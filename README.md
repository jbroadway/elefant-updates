# Elefant Updates

This repository contains update files (patches and scripts) for the
[Elefant CMS](http://www.elefantcms.com/). It is used by the CMS to
check for, fetch, and apply new updates.

The Elefant admin toolbar will check the raw URLs in this repository
looking for the following form:

	https://raw.github.com/jbroadway/elefant-updates/master/releases/1.3.json

This file contains the latest release available for that series in the form:

	{"latest": "1.3.6"}

If a new version is available (compared to the site's current version),
Elefant can then request a list of all available scripts and patches
like this:

	https://raw.github.com/jbroadway/elefant-updates/master/patches.json

This will contain the following data structure:

	{
		"patches": [
			"https:\/\/raw.github.com\/jbroadway\/elefant-updates\/master\/patches\/elefant-1.3.4-1.3.5.patch",
			"https:\/\/raw.github.com\/jbroadway\/elefant-updates\/master\/patches\/elefant-1.3.5-1.3.6.patch"
		],
		"scripts": [
		]
	}

This file is generated by the `scripts/patches.php` file like this:

	php scripts/patches.php

The regenerated JSON file is then committed and pushed to Github.