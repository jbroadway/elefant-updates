diff -urBNs elefant-elefant_1_3_2_beta/.gitattributes elefant-elefant_1_3_3_beta/.gitattributes
--- elefant-elefant_1_3_2_beta/.gitattributes	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/.gitattributes	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,36 @@
+# Auto detect text files and perform LF normalization
+* text=auto
+
+# Custom for Visual Studio
+*.cs     diff=csharp
+*.sln    merge=union
+*.csproj merge=union
+*.vbproj merge=union
+*.fsproj merge=union
+*.dbproj merge=union
+
+# Standard to msysgit
+*.doc    diff=astextplain
+*.DOC	 diff=astextplain
+*.docx   diff=astextplain
+*.DOCX   diff=astextplain
+*.dot    diff=astextplain
+*.DOT    diff=astextplain
+*.pdf    diff=astextplain
+*.PDF    diff=astextplain
+*.rtf    diff=astextplain
+*.RTF    diff=astextplain
+
+# Files that should be treated as binary
+*.png    binary
+*.jpg    binary
+*.jpeg   binary
+*.gif    binary
+*.ico    binary
+*.mp3    binary
+*.flv    binary
+*.swf    binary
+*.mp4    binary
+*.avi    binary
+*.mov    binary
+*.m4v    binary
diff -urBNs elefant-elefant_1_3_2_beta/.gitignore elefant-elefant_1_3_3_beta/.gitignore
--- elefant-elefant_1_3_2_beta/.gitignore	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/.gitignore	2013-03-20 13:48:44.000000000 -0500
@@ -1,4 +1,5 @@
 cache/*
+conf/app.*
 conf/installed
 install/cache/*
 install/installed
diff -urBNs elefant-elefant_1_3_2_beta/.htaccess elefant-elefant_1_3_3_beta/.htaccess
--- elefant-elefant_1_3_2_beta/.htaccess	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/.htaccess	2013-03-20 13:48:44.000000000 -0500
@@ -1,5 +1,7 @@
 <IfModule mod_rewrite.c>
+  Options -MultiViews
   RewriteEngine On
+  RewriteBase /
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . index.php [L]
diff -urBNs elefant-elefant_1_3_2_beta/.travis.yml elefant-elefant_1_3_3_beta/.travis.yml
--- elefant-elefant_1_3_2_beta/.travis.yml	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/.travis.yml	2013-03-20 13:48:44.000000000 -0500
@@ -2,4 +2,9 @@
 phps:
   - 5.3
   - 5.4
-script: phpunit tests
+services: mongodb
+before_script: phpenv config-add tests/travis_conf.ini
+script: phpunit
+branches:
+  only:
+    - master
Files elefant-elefant_1_3_2_beta/LICENSE and elefant-elefant_1_3_3_beta/LICENSE are identical
diff -urBNs elefant-elefant_1_3_2_beta/README.md elefant-elefant_1_3_3_beta/README.md
--- elefant-elefant_1_3_2_beta/README.md	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/README.md	2013-03-20 13:48:44.000000000 -0500
@@ -1,4 +1,4 @@
-# Elefant
+# Elefant CMS
 
 [Elefant](http://www.elefantcms.com/) is a refreshingly simple PHP content management
 system and web framework. Elefant is a fast, lean tool for building everything from
@@ -13,7 +13,7 @@
 
 * http://www.elefantcms.com/documentation
 
-You can also find help on our community forum or IRC chat room here:
+You can also find help on our community forum here:
 
 * http://www.elefantcms.com/community
 
@@ -21,8 +21,8 @@
 
 **Compiled, ultra-fast templates**
 
-Elefant compiles your templates into secure PHP code, so rendering is as fast as
-possible.
+Elefant compiles your templates into secure, readable PHP code, so rendering is as fast as
+possible and also takes advantage of bytecode caching (e.g., APC).
 
 **Dead simple, concise template tags**
 
@@ -46,7 +46,7 @@
 
 **Integrates with 960 grid system and jQuery**
 
-Or any other CSS grid system, giving you complete control over your designs.
+Or any other CSS grid/layout system, giving you complete control over your designs. Theme builder also provides defaults for Twitter Bootstrap.
 
 ## Built for developers
 
@@ -57,7 +57,7 @@
 
 **Extensively documented**
 
-Including full [API reference](http://www.elefantcms.com/wiki/API-reference),
+Including full [API reference](http://api.elefantcms.com/),
 [cheat sheets](http://www.elefantcms.com/wiki/Cheat-sheet),
 [tutorials, and much more](https://github.com/jbroadway/elefant/wiki/Developers).
 
@@ -71,12 +71,12 @@
 Elefant uses [less memory per request](http://www.elefantcms.com/wiki/Performance)
 than any of the major frameworks, so you can serve more visitors with the same resources.
 
-**Good debugging tools**
+**Solid debugging tools**
 
 Debug mode prints full traces with highlighted source code and variable state to
 help you fix bugs faster.
 
-**Minimalist MVC/Model2 architecture**
+**Minimalist HMVC/Model2 architecture**
 
 Elefant takes a [unique but proven approach](http://www.elefantcms.com/wiki/Elefant-architecture)
 that helps minimize boilerplate without sacrificing code organization as your project grows.
@@ -135,3 +135,5 @@
 **Q. Isn't Elefant a bit of an oxymoron for a slim framework?**
 
 A. Why, yes. Yes it is.
+
+[![githalytics.com alpha](https://cruel-carlota.pagodabox.com/20d52a948c8e7c7335a8a7600a121467 "githalytics.com")](http://githalytics.com/jbroadway/elefant)
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/.htaccess and elefant-elefant_1_3_3_beta/apps/.htaccess are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/conf/config.php elefant-elefant_1_3_3_beta/apps/admin/conf/config.php
--- elefant-elefant_1_3_2_beta/apps/admin/conf/config.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/conf/config.php	2013-03-20 13:48:44.000000000 -0500
@@ -10,5 +10,6 @@
 
 handler = admin/versions
 name = Versions
+sitemap = "Webpage::sitemap"
 
 ; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/conf/embed.php elefant-elefant_1_3_3_beta/apps/admin/conf/embed.php
--- elefant-elefant_1_3_2_beta/apps/admin/conf/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/conf/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,6 +3,7 @@
 [admin/forward]
 
 label = "Pages: Redirect Link"
+icon = external-link
 
 to[label] = Link
 to[type] = text
@@ -19,8 +20,9 @@
 
 [admin/conditionalforward]
 label ="Pages: Conditional Redirect"
+icon = /apps/admin/css/icon-conditionalforward.png
 
-to[label] = link
+to[label] = Link
 to[type] = text
 to[initial] = "http://"
 to[regex] = "|^(http:/)?/.+$|"
@@ -34,6 +36,7 @@
 [admin/html]
 
 label = "Embed HTML Code"
+icon = /apps/admin/css/icon-html.png
 
 id[label] = HTML
 id[type] = textarea
@@ -42,4 +45,4 @@
 id[require] = "apps/admin/lib/Functions.php"
 id[filter] = admin_embed_filter
 
-; */ ?>
+; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/conf/update/extended_fields_mysql.sql elefant-elefant_1_3_3_beta/apps/admin/conf/update/extended_fields_mysql.sql
--- elefant-elefant_1_3_2_beta/apps/admin/conf/update/extended_fields_mysql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/conf/update/extended_fields_mysql.sql	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,11 @@
+create table #prefix#extended_fields (
+	id int not null primary key auto_increment,
+	class char(48) not null,
+	sort int not null,
+	name char(48) not null,
+	label char(48) not null,
+	type char(24) not null,
+	required int not null,
+	options char(255) not null,
+	index (class, sort)
+);
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/conf/update/extended_fields_pgsql.sql elefant-elefant_1_3_3_beta/apps/admin/conf/update/extended_fields_pgsql.sql
--- elefant-elefant_1_3_2_beta/apps/admin/conf/update/extended_fields_pgsql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/conf/update/extended_fields_pgsql.sql	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,14 @@
+create sequence #prefix#extended_fields_seq;
+
+create table #prefix#extended_fields (
+	id integer not null default nextval('#prefix#extended_fields_seq') primary key,
+	class char(48) not null,
+	sort int not null,
+	name char(48) not null,
+	label char(48) not null,
+	type char(24) not null,
+	required int not null,
+	options char(255) not null
+);
+
+create index #prefix#extended_fields_class on #prefix#extended_fields (class, sort);
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/conf/update/extended_fields_sqlite.sql elefant-elefant_1_3_3_beta/apps/admin/conf/update/extended_fields_sqlite.sql
--- elefant-elefant_1_3_2_beta/apps/admin/conf/update/extended_fields_sqlite.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/conf/update/extended_fields_sqlite.sql	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,12 @@
+create table #prefix#extended_fields (
+	id integer primary key,
+	class char(48) not null,
+	sort int not null,
+	name char(48) not null,
+	label char(48) not null,
+	type char(24) not null,
+	required int not null,
+	options char(255) not null
+);
+
+create index #prefix#extended_fields_class on #prefix#extended_fields (class, sort);
Files elefant-elefant_1_3_2_beta/apps/admin/css/960.css and elefant-elefant_1_3_3_beta/apps/admin/css/960.css are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/add.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/add.png are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/arrow-down.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/arrow-down.png are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/arrow-right.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/arrow-right.png are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/delete.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/delete.png are identical
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/drag_drop_up_down.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/drag_drop_up_down.png differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/dynamic-icon.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/dynamic-icon.png differ
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/edit.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/edit.png are identical
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/editable-sprite-dark.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/editable-sprite-dark.png differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/editable-sprite.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/editable-sprite.png differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/elefant_logo.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/elefant_logo.png differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/elefant_logo_login.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/elefant_logo_login.png differ
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/file.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/file.png are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/folder.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/folder.png are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/lock.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/lock.png are identical
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/pipe.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/pipe.png differ
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/spacer.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/spacer.png are identical
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/tooltip-top.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/tooltip-top.png differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/admin/undo-icon.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/undo-icon.png differ
Files elefant-elefant_1_3_2_beta/apps/admin/css/admin/versions.png and elefant-elefant_1_3_3_beta/apps/admin/css/admin/versions.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/admin.css elefant-elefant_1_3_3_beta/apps/admin/css/admin.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/admin.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/css/admin.css	2013-03-20 13:48:44.000000000 -0500
@@ -5,15 +5,20 @@
 }
 
 a {
-	color: #8A5AB5;
+	color: #93278f;
 }
 
 a:hover {
-	color: #A753CC;
+	color: #B347AF;
 }
 
 h1, h2 {
-	color: #222;
+	color: #444;
+}
+
+h4 {
+	font-size: 17px;
+	border-bottom: 1px solid #ccc;
 }
 
 table {
@@ -53,7 +58,7 @@
 }
 
 .notice {
-	color: #8A5AB5;
+	color: #1C75BC;
 	display: none;
 }
 
@@ -116,9 +121,9 @@
 	}
 
 	.pager-current {
-		background: #8A5AB5;
+		background: #93278f;
 		color: #f5f5f5;
-		border: 1px solid #8A5AB5;
+		border: 1px solid #93278f;
 	}
 
 	.pager-first, .pager-last {
@@ -231,7 +236,7 @@
 	background: #eee;
 }
 
-input[type=submit] {
+input[type=submit], .dynamic-embed-object-back {
     font-size: 12px;
 	border: 1px solid #ddd;
     background: #e5e5e5;
@@ -244,9 +249,10 @@
     color: #555;
     padding: 5px 10px;
     text-shadow: 0 1px 0 #fff;
+    margin-bottom: 16px;
 }
 
-input[type=submit]:hover {
+input[type=submit]:hover, .dynamic-embed-object-back:hover {
 	color: #333;
 	border: 1px solid #999;
     -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
@@ -254,62 +260,161 @@
     box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
 }
 
-.wysiwyg-embed-objects {
-	width: 38%;
-	float: left;
-	border-right: 1px solid #ccc;
-	margin-right: 10px;
+.dynamic-embed-object-list {
+	padding: 0px;
+	margin: 0px;
 }
 
-.wysiwyg-embed-object-list {
-	padding-left: 0px;
-	margin-left: 0px;
+.dynamic-embed-object-list li {
+	list-style-type: none;
+	display: block;	
+	float:left;
+	padding:0px;
+	margin:0.25%;
+	
 }
 
-.wysiwyg-embed-object-list li {
-	list-style-type: square;
-	margin-left: 10px;
-	padding-left: 0px;
+.dynamic-embed-object-list li {
+	float: left;	
+	width:49%;
+}
+
+.dynamic-embed-object-list li a {
+	display: block;	
+	padding: 3%;
+	background: transparent;
+	color: #333;
+	text-decoration: none;
+	line-height:16px;
+	vertical-align:top;
+	height:16px;
+}
+
+.dynamic-embed-object i {
+	margin:0px 5px 0 2px;
+	width:16px;
+	height:16px;
+	display:inline-block;
+	color:#93278f;
+	font-size:16px;
+	line-height:16px;
 }
 
-.wysiwyg-embed-objects .simplePagerNav {
+.dynamic-embed-object-list li a.current, .dynamic-embed-object-list li a:hover{
+	background: #ddd;
+	color: #333;
+}
+.dynamic-embed-objects .simplePagerNav {
 	list-style-type: none;
+	margin-top: 15px;
 	margin-left: 0px;
 	padding-left: 0px;
 }
 
-.wysiwyg-embed-objects .simplePagerNav li {
+.dynamic-embed-objects .simplePagerNav li {
 	list-style-type: none;
 	margin-left: 0px;
 	padding-left: 0px;
 	display: inline
 }
 
-.wysiwyg-embed-objects .simplePagerNav li a {
+.dynamic-embed-objects .simplePagerNav li a {
 	display: block;
 	float: left;
-	padding: 3px 6px 3px 6px;
-	background: #eee;
+	margin: 1px;
+	padding: 3px 8px 3px 8px;
+	background: #f5f5f5;
 	color: #333;
 	text-decoration: none;
 }
 
-.wysiwyg-embed-objects .simplePagerNav li.currentPage a {
+.dynamic-embed-objects .simplePagerNav li a:hover {
+	background: #ddd;
+}
+
+.dynamic-embed-objects .simplePagerNav li.currentPage a {
 	display: block;
 	float: left;
 	padding: 3px 6px 3px 6px;
-	background: #8A5AB5;
+	background: #93278f;
 	color: #fff;
 	text-decoration: none;
 }
 
-.wysiwyg-embed-object-form {
-	width: 58%;
+.dynamic-embed-object-back {
+	float: left;
+	margin-top: 15px;
+}
+
+.dynamic-embed-object-form-submit {
+	float: right;
+	margin-top: 15px;
+}
+
+.dynamic-embed-object-form h2 {
+	margin: 0;
+	font-size: 16px;
+	color: #333;
+	padding: 5px;
+}
+
+.dynamic-embed-object-form p {
+	margin: 0.5% 0.25%;
+	background: #eee;
+	color: #333;
+	padding: 1.5%;
+}
+
+.dynamic-embed-object-form label {
+	display: block;
+	padding: 0.5% 0.25% 0.25% 0.25%;
+	margin: 0 0.5% 0 0;
+}
+.dynamic-embed-object-form input[type=text], .dynamic-embed-object-form textarea, .dynamic-embed-object-form select {
+	margin: 0;
+	padding: 0.25%;
+	width: 99.5%;
+}
+
+.dynamic-embed-object-form.columns-2 label {
+	float: left;
+	display: block;
+	padding: 1% 0 0.5% 0;
+}
+.dynamic-embed-object-form.columns-2 input[type=text], .dynamic-embed-object-form.columns-2 select {
+	float: left;
+	margin: 0 0 0.5% 0;
+	padding: 1%;
+	width: 95%;
+}
+
+.dynamic-embed-object-form.columns-2 p {
+	float: left;	
+	width: 46%;	
+	margin: 0.25%;
+}
+
+.dynamic-embed-object-form p.dynamic-embed-object-form-submit-wrapper {
+	background: #fff;
+}
+
+.dynamic-embed-object-form input[type=text].dynamic-file-input {
+	float: left;	
+	width: 90%;	
+}
+
+span.dynamic-fileManager { 
+	background: url('/css/files/icon.png');
 	float: left;
+	width: 16px; 
+	height: 16px; 
+	cursor: pointer; 
+	cursor: hand;
+	margin: 2px 2px;
 }
 
 #wrapper {
-	padding-top: 40px;
+	padding-top: 50px;
 }
 
 .nav {
@@ -326,8 +431,8 @@
 	}
 
 	.nav a:hover {
-		color: #A753CC;
-		border-top: 3px solid #A753CC;
+		color: #B347AF;
+		border-top: 3px solid #B347AF;
 		padding-top: 2px;
 	}
 
@@ -354,7 +459,7 @@
 	}
 	
 	#head h1 em {
-		color: #A753CC;
+		color: #B347AF;
 		font-style: italic;
 		margin-right: -3px;
 	}
Files elefant-elefant_1_3_2_beta/apps/admin/css/debugger.css and elefant-elefant_1_3_3_beta/apps/admin/css/debugger.css are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/dynamicobjects.css elefant-elefant_1_3_3_beta/apps/admin/css/dynamicobjects.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/dynamicobjects.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/css/dynamicobjects.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,137 @@
+.dynamicobjects-content {
+}
+
+.dynamicobjects-list {
+	padding: 0px;
+	margin: 0px;
+}
+
+.dynamicobjects-list li {
+	list-style-type: none;
+	display: block;	
+	float:left;
+	padding:0px;
+	margin:0.25%;
+	width:49%;
+}
+
+.dynamicobjects-list li a {
+	display: block;	
+	padding: 3%;
+	background: #eee;
+	color: #333;
+	text-decoration: none;
+	line-height:16px;
+	vertical-align:top;
+	height:16px;
+}
+
+.dynamicobjects-object i {
+	margin:0px 5px 0 2px;
+	width:16px;
+	height:16px;
+	display:inline-block;
+	color:#93278f;
+	font-size:16px;
+	line-height:16px;
+}
+
+.dynamicobjects-list li a.current, .dynamicobjects-list li a:hover{
+	background: #ddd;
+	color: #333;
+}
+.dynamicobjects-content .simplePagerNav {
+	list-style-type: none;
+	margin-top: 15px;
+	margin-left: 0px;
+	padding-left: 0px;
+}
+
+.dynamicobjects-content .simplePagerNav li {
+	list-style-type: none;
+	margin-left: 0px;
+	padding-left: 0px;
+	display: inline
+}
+
+.dynamicobjects-content .simplePagerNav li a {
+	display: block;
+	float: left;
+	margin:0.25%;
+	padding: 3px 6px 3px 6px;
+	background: #eee;
+	color: #333;
+	text-decoration: none;
+}
+
+.dynamicobjects-content .simplePagerNav li.currentPage a {
+	display: block;
+	float: left;
+	padding: 3px 6px 3px 6px;
+	background: #93278f;
+	color: #fff;
+	text-decoration: none;
+}
+
+.dynamicobjects-back {
+	float: left;
+	margin-top: 15px;
+}
+
+.dynamicobjects-submit {
+	float: right;
+	margin-top: 15px;
+}
+
+.dynamicobjects-form h2 {
+	margin: 0;
+	font-size: 16px;
+	color: #333;
+	padding: 5px;
+}
+
+.dynamicobjects-form p {
+	margin: 0.5% 0.25%;
+	background: #eee;
+	color: #333;
+	padding: 1.5%;
+	min-height: 46px;
+}
+
+.dynamicobjects-form label {
+	display: block;
+	padding: 0.5% 0.25% 0.25% 0.25%;
+	margin: 0 0.5% 0 0;
+}
+.dynamicobjects-form input[type=text], .dynamicobjects-form textarea, .dynamicobjects-form select {
+	margin: 0;
+	padding: 0.25%;
+	width: 98%;
+}
+
+.dynamicobjects-form.columns-2 label {
+	float: left;
+	display: block;
+	padding: 1% 0 0.5% 0;
+}
+.dynamicobjects-form.columns-2 input[type=text], .dynamicobjects-form.columns-2 select {
+	float: left;
+	margin: 0 0 0.5% 0;
+	padding: 1%;
+	width: 95%;
+}
+
+.dynamicobjects-form.columns-2 p {
+	float: left;	
+	width: 46%;	
+	margin: 0.25%;
+}
+
+.dynamicobjects-form p.dynamicobjects-form-submit-wrapper {
+	background: #fff;
+}
+
+.dynamicobjects-form input[type=text].wysiwyg-file-input {
+	/*float: left;*/
+	width: 85%;	
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/css/font-awesome-ie7.min.css elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/css/font-awesome-ie7.min.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/css/font-awesome-ie7.min.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/css/font-awesome-ie7.min.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,22 @@
+/*!
+ *  Font Awesome 3.0.2
+ *  the iconic font designed for use with Twitter Bootstrap
+ *  -------------------------------------------------------
+ *  The full suite of pictographic icons, examples, and documentation
+ *  can be found at: http://fortawesome.github.com/Font-Awesome/
+ *
+ *  License
+ *  -------------------------------------------------------
+ *  - The Font Awesome font is licensed under the SIL Open Font License - http://scripts.sil.org/OFL
+ *  - Font Awesome CSS, LESS, and SASS files are licensed under the MIT License -
+ *    http://opensource.org/licenses/mit-license.html
+ *  - The Font Awesome pictograms are licensed under the CC BY 3.0 License - http://creativecommons.org/licenses/by/3.0/
+ *  - Attribution is no longer required in Font Awesome 3.0, but much appreciated:
+ *    "Font Awesome by Dave Gandy - http://fortawesome.github.com/Font-Awesome"
+
+ *  Contact
+ *  -------------------------------------------------------
+ *  Email: dave@davegandy.com
+ *  Twitter: http://twitter.com/fortaweso_me
+ *  Work: Lead Product Designer @ http://kyruus.com
+ */.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle}.nav [class^="icon-"],.nav [class*=" icon-"]{vertical-align:inherit;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px}.nav [class^="icon-"].icon-large,.nav [class*=" icon-"].icon-large{vertical-align:-25%}.nav-pills [class^="icon-"].icon-large,.nav-tabs [class^="icon-"].icon-large,.nav-pills [class*=" icon-"].icon-large,.nav-tabs [class*=" icon-"].icon-large{line-height:.75em;margin-top:-7px;padding-top:5px;margin-bottom:-5px;padding-bottom:4px}.btn [class^="icon-"].pull-left,.btn [class*=" icon-"].pull-left,.btn [class^="icon-"].pull-right,.btn [class*=" icon-"].pull-right{vertical-align:inherit}.btn [class^="icon-"].icon-large,.btn [class*=" icon-"].icon-large{margin-top:-0.5em}a [class^="icon-"],a [class*=" icon-"]{cursor:pointer}ul.icons{text-indent:-1.5em;margin-left:3em}.icon-glass{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf000;')}.icon-music{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf001;')}.icon-search{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf002;')}.icon-envelope{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf003;')}.icon-heart{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf004;')}.icon-star{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf005;')}.icon-star-empty{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf006;')}.icon-user{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf007;')}.icon-film{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf008;')}.icon-th-large{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf009;')}.icon-th{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf00a;')}.icon-th-list{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf00b;')}.icon-ok{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf00c;')}.icon-remove{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf00d;')}.icon-zoom-in{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf00e;')}.icon-zoom-out{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf010;')}.icon-off{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf011;')}.icon-signal{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf012;')}.icon-cog{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf013;')}.icon-trash{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf014;')}.icon-home{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf015;')}.icon-file{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf016;')}.icon-time{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf017;')}.icon-road{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf018;')}.icon-download-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf019;')}.icon-download{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf01a;')}.icon-upload{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf01b;')}.icon-inbox{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf01c;')}.icon-play-circle{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf01d;')}.icon-repeat{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf01e;')}.icon-refresh{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf021;')}.icon-list-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf022;')}.icon-lock{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf023;')}.icon-flag{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf024;')}.icon-headphones{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf025;')}.icon-volume-off{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf026;')}.icon-volume-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf027;')}.icon-volume-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf028;')}.icon-qrcode{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf029;')}.icon-barcode{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf02a;')}.icon-tag{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf02b;')}.icon-tags{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf02c;')}.icon-book{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf02d;')}.icon-bookmark{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf02e;')}.icon-print{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf02f;')}.icon-camera{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf030;')}.icon-font{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf031;')}.icon-bold{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf032;')}.icon-italic{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf033;')}.icon-text-height{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf034;')}.icon-text-width{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf035;')}.icon-align-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf036;')}.icon-align-center{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf037;')}.icon-align-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf038;')}.icon-align-justify{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf039;')}.icon-list{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf03a;')}.icon-indent-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf03b;')}.icon-indent-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf03c;')}.icon-facetime-video{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf03d;')}.icon-picture{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf03e;')}.icon-pencil{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf040;')}.icon-map-marker{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf041;')}.icon-adjust{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf042;')}.icon-tint{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf043;')}.icon-edit{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf044;')}.icon-share{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf045;')}.icon-check{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf046;')}.icon-move{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf047;')}.icon-step-backward{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf048;')}.icon-fast-backward{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf049;')}.icon-backward{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf04a;')}.icon-play{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf04b;')}.icon-pause{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf04c;')}.icon-stop{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf04d;')}.icon-forward{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf04e;')}.icon-fast-forward{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf050;')}.icon-step-forward{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf051;')}.icon-eject{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf052;')}.icon-chevron-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf053;')}.icon-chevron-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf054;')}.icon-plus-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf055;')}.icon-minus-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf056;')}.icon-remove-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf057;')}.icon-ok-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf058;')}.icon-question-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf059;')}.icon-info-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf05a;')}.icon-screenshot{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf05b;')}.icon-remove-circle{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf05c;')}.icon-ok-circle{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf05d;')}.icon-ban-circle{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf05e;')}.icon-arrow-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf060;')}.icon-arrow-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf061;')}.icon-arrow-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf062;')}.icon-arrow-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf063;')}.icon-share-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf064;')}.icon-resize-full{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf065;')}.icon-resize-small{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf066;')}.icon-plus{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf067;')}.icon-minus{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf068;')}.icon-asterisk{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf069;')}.icon-exclamation-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf06a;')}.icon-gift{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf06b;')}.icon-leaf{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf06c;')}.icon-fire{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf06d;')}.icon-eye-open{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf06e;')}.icon-eye-close{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf070;')}.icon-warning-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf071;')}.icon-plane{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf072;')}.icon-calendar{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf073;')}.icon-random{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf074;')}.icon-comment{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf075;')}.icon-magnet{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf076;')}.icon-chevron-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf077;')}.icon-chevron-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf078;')}.icon-retweet{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf079;')}.icon-shopping-cart{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf07a;')}.icon-folder-close{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf07b;')}.icon-folder-open{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf07c;')}.icon-resize-vertical{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf07d;')}.icon-resize-horizontal{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf07e;')}.icon-bar-chart{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf080;')}.icon-twitter-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf081;')}.icon-facebook-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf082;')}.icon-camera-retro{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf083;')}.icon-key{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf084;')}.icon-cogs{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf085;')}.icon-comments{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf086;')}.icon-thumbs-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf087;')}.icon-thumbs-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf088;')}.icon-star-half{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf089;')}.icon-heart-empty{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf08a;')}.icon-signout{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf08b;')}.icon-linkedin-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf08c;')}.icon-pushpin{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf08d;')}.icon-external-link{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf08e;')}.icon-signin{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf090;')}.icon-trophy{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf091;')}.icon-github-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf092;')}.icon-upload-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf093;')}.icon-lemon{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf094;')}.icon-phone{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf095;')}.icon-check-empty{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf096;')}.icon-bookmark-empty{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf097;')}.icon-phone-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf098;')}.icon-twitter{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf099;')}.icon-facebook{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf09a;')}.icon-github{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf09b;')}.icon-unlock{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf09c;')}.icon-credit-card{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf09d;')}.icon-rss{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf09e;')}.icon-hdd{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a0;')}.icon-bullhorn{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a1;')}.icon-bell{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a2;')}.icon-certificate{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a3;')}.icon-hand-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a4;')}.icon-hand-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a5;')}.icon-hand-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a6;')}.icon-hand-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a7;')}.icon-circle-arrow-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a8;')}.icon-circle-arrow-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0a9;')}.icon-circle-arrow-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0aa;')}.icon-circle-arrow-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ab;')}.icon-globe{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ac;')}.icon-wrench{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ad;')}.icon-tasks{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ae;')}.icon-filter{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0b0;')}.icon-briefcase{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0b1;')}.icon-fullscreen{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0b2;')}.icon-group{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c0;')}.icon-link{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c1;')}.icon-cloud{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c2;')}.icon-beaker{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c3;')}.icon-cut{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c4;')}.icon-copy{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c5;')}.icon-paper-clip{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c6;')}.icon-save{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c7;')}.icon-sign-blank{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c8;')}.icon-reorder{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0c9;')}.icon-list-ul{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ca;')}.icon-list-ol{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0cb;')}.icon-strikethrough{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0cc;')}.icon-underline{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0cd;')}.icon-table{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ce;')}.icon-magic{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d0;')}.icon-truck{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d1;')}.icon-pinterest{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d2;')}.icon-pinterest-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d3;')}.icon-google-plus-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d4;')}.icon-google-plus{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d5;')}.icon-money{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d6;')}.icon-caret-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d7;')}.icon-caret-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d8;')}.icon-caret-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0d9;')}.icon-caret-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0da;')}.icon-columns{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0db;')}.icon-sort{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0dc;')}.icon-sort-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0dd;')}.icon-sort-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0de;')}.icon-envelope-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e0;')}.icon-linkedin{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e1;')}.icon-undo{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e2;')}.icon-legal{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e3;')}.icon-dashboard{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e4;')}.icon-comment-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e5;')}.icon-comments-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e6;')}.icon-bolt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e7;')}.icon-sitemap{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e8;')}.icon-umbrella{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0e9;')}.icon-paste{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ea;')}.icon-lightbulb{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0eb;')}.icon-exchange{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ec;')}.icon-cloud-download{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ed;')}.icon-cloud-upload{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0ee;')}.icon-user-md{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f0;')}.icon-stethoscope{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f1;')}.icon-suitcase{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f2;')}.icon-bell-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f3;')}.icon-coffee{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f4;')}.icon-food{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f5;')}.icon-file-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f6;')}.icon-building{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f7;')}.icon-hospital{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f8;')}.icon-ambulance{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0f9;')}.icon-medkit{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0fa;')}.icon-fighter-jet{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0fb;')}.icon-beer{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0fc;')}.icon-h-sign{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0fd;')}.icon-plus-sign-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf0fe;')}.icon-double-angle-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf100;')}.icon-double-angle-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf101;')}.icon-double-angle-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf102;')}.icon-double-angle-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf103;')}.icon-angle-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf104;')}.icon-angle-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf105;')}.icon-angle-up{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf106;')}.icon-angle-down{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf107;')}.icon-desktop{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf108;')}.icon-laptop{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf109;')}.icon-tablet{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf10a;')}.icon-mobile-phone{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf10b;')}.icon-circle-blank{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf10c;')}.icon-quote-left{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf10d;')}.icon-quote-right{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf10e;')}.icon-spinner{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf110;')}.icon-circle{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf111;')}.icon-reply{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf112;')}.icon-github-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf113;')}.icon-folder-close-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf114;')}.icon-folder-open-alt{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf115;')}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/css/font-awesome.css elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/css/font-awesome.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/css/font-awesome.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/css/font-awesome.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,469 @@
+/*  Font Awesome 3.0
+    the iconic font designed for use with Twitter Bootstrap
+    -------------------------------------------------------
+    The full suite of pictographic icons, examples, and documentation
+    can be found at: http://fortawesome.github.com/Font-Awesome/
+
+    License
+    -------------------------------------------------------
+    • The Font Awesome font is licensed under the SIL Open Font License - http://scripts.sil.org/OFL
+    • Font Awesome CSS, LESS, and SASS files are licensed under the MIT License -
+      http://opensource.org/licenses/mit-license.html
+    • The Font Awesome pictograms are licensed under the CC BY 3.0 License - http://creativecommons.org/licenses/by/3.0/
+    • Attribution is no longer required in Font Awesome 3.0, but much appreciated:
+      "Font Awesome by Dave Gandy - http://fortawesome.github.com/Font-Awesome"
+
+    Contact
+    -------------------------------------------------------
+    Email: dave@davegandy.com
+    Twitter: http://twitter.com/fortaweso_me
+    Work: Lead Product Designer @ http://kyruus.com
+
+    */
+@font-face {
+  font-family: 'FontAwesome';
+  src: url('../font/fontawesome-webfont.eot');
+  src: url('../font/fontawesome-webfont.eot?#iefix') format('embedded-opentype'),
+    url('../font/fontawesome-webfont.woff') format('woff'),
+    url('../font/fontawesome-webfont.ttf') format('truetype');
+  font-weight: normal;
+  font-style: normal;
+}
+/*  Font Awesome styles
+    ------------------------------------------------------- */
+/* includes sprites.less reset */
+[class^="icon-"],
+[class*=" icon-"] {
+  font-family: FontAwesome;
+  font-weight: normal;
+  font-style: normal;
+  text-decoration: inherit;
+  display: inline;
+  width: auto;
+  height: auto;
+  line-height: normal;
+  vertical-align: baseline;
+  background-image: none !important;
+  background-position: 0% 0%;
+  background-repeat: repeat;
+}
+[class^="icon-"]:before,
+[class*=" icon-"]:before {
+  text-decoration: inherit;
+  display: inline-block;
+  speak: none;
+}
+/* makes sure icons active on rollover in links */
+a [class^="icon-"],
+a [class*=" icon-"] {
+  display: inline-block;
+}
+/* makes the font 33% larger relative to the icon container */
+.icon-large:before {
+  vertical-align: -10%;
+  font-size: 1.3333333333333333em;
+}
+.btn [class^="icon-"],
+.nav [class^="icon-"],
+.btn [class*=" icon-"],
+.nav [class*=" icon-"] {
+  display: inline;
+  /* keeps button heights with and without icons the same */
+
+  line-height: .6em;
+}
+.btn [class^="icon-"].icon-spin,
+.nav [class^="icon-"].icon-spin,
+.btn [class*=" icon-"].icon-spin,
+.nav [class*=" icon-"].icon-spin {
+  display: inline-block;
+}
+li [class^="icon-"],
+li [class*=" icon-"] {
+  display: inline-block;
+  width: 1.25em;
+  text-align: center;
+}
+li [class^="icon-"].icon-large,
+li [class*=" icon-"].icon-large {
+  /* increased font size for icon-large */
+
+  width: 1.5625em;
+}
+ul.icons {
+  list-style-type: none;
+  text-indent: -0.75em;
+}
+ul.icons li [class^="icon-"],
+ul.icons li [class*=" icon-"] {
+  width: .75em;
+}
+.icon-muted {
+  color: #eeeeee;
+}
+.icon-border {
+  border: solid 1px #eeeeee;
+  padding: .2em .25em .15em;
+  -webkit-border-radius: 3px;
+  -moz-border-radius: 3px;
+  border-radius: 3px;
+}
+.icon-2x {
+  font-size: 2em;
+}
+.icon-2x.icon-border {
+  border-width: 2px;
+  -webkit-border-radius: 4px;
+  -moz-border-radius: 4px;
+  border-radius: 4px;
+}
+.icon-3x {
+  font-size: 3em;
+}
+.icon-3x.icon-border {
+  border-width: 3px;
+  -webkit-border-radius: 5px;
+  -moz-border-radius: 5px;
+  border-radius: 5px;
+}
+.icon-4x {
+  font-size: 4em;
+}
+.icon-4x.icon-border {
+  border-width: 4px;
+  -webkit-border-radius: 6px;
+  -moz-border-radius: 6px;
+  border-radius: 6px;
+}
+.pull-right {
+  float: right;
+}
+.pull-left {
+  float: left;
+}
+[class^="icon-"].pull-left,
+[class*=" icon-"].pull-left {
+  margin-right: .35em;
+}
+[class^="icon-"].pull-right,
+[class*=" icon-"].pull-right {
+  margin-left: .35em;
+}
+.btn [class^="icon-"].pull-left.icon-2x,
+.btn [class*=" icon-"].pull-left.icon-2x,
+.btn [class^="icon-"].pull-right.icon-2x,
+.btn [class*=" icon-"].pull-right.icon-2x {
+  margin-top: .35em;
+}
+.btn [class^="icon-"].icon-spin.icon-large,
+.btn [class*=" icon-"].icon-spin.icon-large {
+  height: .75em;
+}
+.btn.btn-small [class^="icon-"].pull-left.icon-2x,
+.btn.btn-small [class*=" icon-"].pull-left.icon-2x,
+.btn.btn-small [class^="icon-"].pull-right.icon-2x,
+.btn.btn-small [class*=" icon-"].pull-right.icon-2x {
+  margin-top: .45em;
+}
+.btn.btn-large [class^="icon-"].pull-left.icon-2x,
+.btn.btn-large [class*=" icon-"].pull-left.icon-2x,
+.btn.btn-large [class^="icon-"].pull-right.icon-2x,
+.btn.btn-large [class*=" icon-"].pull-right.icon-2x {
+  margin-top: .2em;
+}
+.icon-spin {
+  display: inline-block;
+  -moz-animation: spin 2s infinite linear;
+  -o-animation: spin 2s infinite linear;
+  -webkit-animation: spin 2s infinite linear;
+  animation: spin 2s infinite linear;
+}
+@-moz-keyframes spin {
+  0% { -moz-transform: rotate(0deg); }
+  100% { -moz-transform: rotate(359deg); }
+}
+@-webkit-keyframes spin {
+  0% { -webkit-transform: rotate(0deg); }
+  100% { -webkit-transform: rotate(359deg); }
+}
+@-o-keyframes spin {
+  0% { -o-transform: rotate(0deg); }
+  100% { -o-transform: rotate(359deg); }
+}
+@-ms-keyframes spin {
+  0% { -ms-transform: rotate(0deg); }
+  100% { -ms-transform: rotate(359deg); }
+}
+@keyframes spin {
+  0% { transform: rotate(0deg); }
+  100% { transform: rotate(359deg); }
+}
+/*  Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen
+    readers do not read off random characters that represent icons */
+.icon-glass:before                { content: "\f000"; }
+.icon-music:before                { content: "\f001"; }
+.icon-search:before               { content: "\f002"; }
+.icon-envelope:before             { content: "\f003"; }
+.icon-heart:before                { content: "\f004"; }
+.icon-star:before                 { content: "\f005"; }
+.icon-star-empty:before           { content: "\f006"; }
+.icon-user:before                 { content: "\f007"; }
+.icon-film:before                 { content: "\f008"; }
+.icon-th-large:before             { content: "\f009"; }
+.icon-th:before                   { content: "\f00a"; }
+.icon-th-list:before              { content: "\f00b"; }
+.icon-ok:before                   { content: "\f00c"; }
+.icon-remove:before               { content: "\f00d"; }
+.icon-zoom-in:before              { content: "\f00e"; }
+
+.icon-zoom-out:before             { content: "\f010"; }
+.icon-off:before                  { content: "\f011"; }
+.icon-signal:before               { content: "\f012"; }
+.icon-cog:before                  { content: "\f013"; }
+.icon-trash:before                { content: "\f014"; }
+.icon-home:before                 { content: "\f015"; }
+.icon-file:before                 { content: "\f016"; }
+.icon-time:before                 { content: "\f017"; }
+.icon-road:before                 { content: "\f018"; }
+.icon-download-alt:before         { content: "\f019"; }
+.icon-download:before             { content: "\f01a"; }
+.icon-upload:before               { content: "\f01b"; }
+.icon-inbox:before                { content: "\f01c"; }
+.icon-play-circle:before          { content: "\f01d"; }
+.icon-repeat:before               { content: "\f01e"; }
+
+/* \f020 doesn't work in Safari. all shifted one down */
+.icon-refresh:before              { content: "\f021"; }
+.icon-list-alt:before             { content: "\f022"; }
+.icon-lock:before                 { content: "\f023"; }
+.icon-flag:before                 { content: "\f024"; }
+.icon-headphones:before           { content: "\f025"; }
+.icon-volume-off:before           { content: "\f026"; }
+.icon-volume-down:before          { content: "\f027"; }
+.icon-volume-up:before            { content: "\f028"; }
+.icon-qrcode:before               { content: "\f029"; }
+.icon-barcode:before              { content: "\f02a"; }
+.icon-tag:before                  { content: "\f02b"; }
+.icon-tags:before                 { content: "\f02c"; }
+.icon-book:before                 { content: "\f02d"; }
+.icon-bookmark:before             { content: "\f02e"; }
+.icon-print:before                { content: "\f02f"; }
+
+.icon-camera:before               { content: "\f030"; }
+.icon-font:before                 { content: "\f031"; }
+.icon-bold:before                 { content: "\f032"; }
+.icon-italic:before               { content: "\f033"; }
+.icon-text-height:before          { content: "\f034"; }
+.icon-text-width:before           { content: "\f035"; }
+.icon-align-left:before           { content: "\f036"; }
+.icon-align-center:before         { content: "\f037"; }
+.icon-align-right:before          { content: "\f038"; }
+.icon-align-justify:before        { content: "\f039"; }
+.icon-list:before                 { content: "\f03a"; }
+.icon-indent-left:before          { content: "\f03b"; }
+.icon-indent-right:before         { content: "\f03c"; }
+.icon-facetime-video:before       { content: "\f03d"; }
+.icon-picture:before              { content: "\f03e"; }
+
+.icon-pencil:before               { content: "\f040"; }
+.icon-map-marker:before           { content: "\f041"; }
+.icon-adjust:before               { content: "\f042"; }
+.icon-tint:before                 { content: "\f043"; }
+.icon-edit:before                 { content: "\f044"; }
+.icon-share:before                { content: "\f045"; }
+.icon-check:before                { content: "\f046"; }
+.icon-move:before                 { content: "\f047"; }
+.icon-step-backward:before        { content: "\f048"; }
+.icon-fast-backward:before        { content: "\f049"; }
+.icon-backward:before             { content: "\f04a"; }
+.icon-play:before                 { content: "\f04b"; }
+.icon-pause:before                { content: "\f04c"; }
+.icon-stop:before                 { content: "\f04d"; }
+.icon-forward:before              { content: "\f04e"; }
+
+.icon-fast-forward:before         { content: "\f050"; }
+.icon-step-forward:before         { content: "\f051"; }
+.icon-eject:before                { content: "\f052"; }
+.icon-chevron-left:before         { content: "\f053"; }
+.icon-chevron-right:before        { content: "\f054"; }
+.icon-plus-sign:before            { content: "\f055"; }
+.icon-minus-sign:before           { content: "\f056"; }
+.icon-remove-sign:before          { content: "\f057"; }
+.icon-ok-sign:before              { content: "\f058"; }
+.icon-question-sign:before        { content: "\f059"; }
+.icon-info-sign:before            { content: "\f05a"; }
+.icon-screenshot:before           { content: "\f05b"; }
+.icon-remove-circle:before        { content: "\f05c"; }
+.icon-ok-circle:before            { content: "\f05d"; }
+.icon-ban-circle:before           { content: "\f05e"; }
+
+.icon-arrow-left:before           { content: "\f060"; }
+.icon-arrow-right:before          { content: "\f061"; }
+.icon-arrow-up:before             { content: "\f062"; }
+.icon-arrow-down:before           { content: "\f063"; }
+.icon-share-alt:before            { content: "\f064"; }
+.icon-resize-full:before          { content: "\f065"; }
+.icon-resize-small:before         { content: "\f066"; }
+.icon-plus:before                 { content: "\f067"; }
+.icon-minus:before                { content: "\f068"; }
+.icon-asterisk:before             { content: "\f069"; }
+.icon-exclamation-sign:before     { content: "\f06a"; }
+.icon-gift:before                 { content: "\f06b"; }
+.icon-leaf:before                 { content: "\f06c"; }
+.icon-fire:before                 { content: "\f06d"; }
+.icon-eye-open:before             { content: "\f06e"; }
+
+.icon-eye-close:before            { content: "\f070"; }
+.icon-warning-sign:before         { content: "\f071"; }
+.icon-plane:before                { content: "\f072"; }
+.icon-calendar:before             { content: "\f073"; }
+.icon-random:before               { content: "\f074"; }
+.icon-comment:before              { content: "\f075"; }
+.icon-magnet:before               { content: "\f076"; }
+.icon-chevron-up:before           { content: "\f077"; }
+.icon-chevron-down:before         { content: "\f078"; }
+.icon-retweet:before              { content: "\f079"; }
+.icon-shopping-cart:before        { content: "\f07a"; }
+.icon-folder-close:before         { content: "\f07b"; }
+.icon-folder-open:before          { content: "\f07c"; }
+.icon-resize-vertical:before      { content: "\f07d"; }
+.icon-resize-horizontal:before    { content: "\f07e"; }
+
+.icon-bar-chart:before            { content: "\f080"; }
+.icon-twitter-sign:before         { content: "\f081"; }
+.icon-facebook-sign:before        { content: "\f082"; }
+.icon-camera-retro:before         { content: "\f083"; }
+.icon-key:before                  { content: "\f084"; }
+.icon-cogs:before                 { content: "\f085"; }
+.icon-comments:before             { content: "\f086"; }
+.icon-thumbs-up:before            { content: "\f087"; }
+.icon-thumbs-down:before          { content: "\f088"; }
+.icon-star-half:before            { content: "\f089"; }
+.icon-heart-empty:before          { content: "\f08a"; }
+.icon-signout:before              { content: "\f08b"; }
+.icon-linkedin-sign:before        { content: "\f08c"; }
+.icon-pushpin:before              { content: "\f08d"; }
+.icon-external-link:before        { content: "\f08e"; }
+
+.icon-signin:before               { content: "\f090"; }
+.icon-trophy:before               { content: "\f091"; }
+.icon-github-sign:before          { content: "\f092"; }
+.icon-upload-alt:before           { content: "\f093"; }
+.icon-lemon:before                { content: "\f094"; }
+.icon-phone:before                { content: "\f095"; }
+.icon-check-empty:before          { content: "\f096"; }
+.icon-bookmark-empty:before       { content: "\f097"; }
+.icon-phone-sign:before           { content: "\f098"; }
+.icon-twitter:before              { content: "\f099"; }
+.icon-facebook:before             { content: "\f09a"; }
+.icon-github:before               { content: "\f09b"; }
+.icon-unlock:before               { content: "\f09c"; }
+.icon-credit-card:before          { content: "\f09d"; }
+.icon-rss:before                  { content: "\f09e"; }
+
+.icon-hdd:before                  { content: "\f0a0"; }
+.icon-bullhorn:before             { content: "\f0a1"; }
+.icon-bell:before                 { content: "\f0a2"; }
+.icon-certificate:before          { content: "\f0a3"; }
+.icon-hand-right:before           { content: "\f0a4"; }
+.icon-hand-left:before            { content: "\f0a5"; }
+.icon-hand-up:before              { content: "\f0a6"; }
+.icon-hand-down:before            { content: "\f0a7"; }
+.icon-circle-arrow-left:before    { content: "\f0a8"; }
+.icon-circle-arrow-right:before   { content: "\f0a9"; }
+.icon-circle-arrow-up:before      { content: "\f0aa"; }
+.icon-circle-arrow-down:before    { content: "\f0ab"; }
+.icon-globe:before                { content: "\f0ac"; }
+.icon-wrench:before               { content: "\f0ad"; }
+.icon-tasks:before                { content: "\f0ae"; }
+
+.icon-filter:before               { content: "\f0b0"; }
+.icon-briefcase:before            { content: "\f0b1"; }
+.icon-fullscreen:before           { content: "\f0b2"; }
+
+.icon-group:before                { content: "\f0c0"; }
+.icon-link:before                 { content: "\f0c1"; }
+.icon-cloud:before                { content: "\f0c2"; }
+.icon-beaker:before               { content: "\f0c3"; }
+.icon-cut:before                  { content: "\f0c4"; }
+.icon-copy:before                 { content: "\f0c5"; }
+.icon-paper-clip:before           { content: "\f0c6"; }
+.icon-save:before                 { content: "\f0c7"; }
+.icon-sign-blank:before           { content: "\f0c8"; }
+.icon-reorder:before              { content: "\f0c9"; }
+.icon-list-ul:before              { content: "\f0ca"; }
+.icon-list-ol:before              { content: "\f0cb"; }
+.icon-strikethrough:before        { content: "\f0cc"; }
+.icon-underline:before            { content: "\f0cd"; }
+.icon-table:before                { content: "\f0ce"; }
+
+.icon-magic:before                { content: "\f0d0"; }
+.icon-truck:before                { content: "\f0d1"; }
+.icon-pinterest:before            { content: "\f0d2"; }
+.icon-pinterest-sign:before       { content: "\f0d3"; }
+.icon-google-plus-sign:before     { content: "\f0d4"; }
+.icon-google-plus:before          { content: "\f0d5"; }
+.icon-money:before                { content: "\f0d6"; }
+.icon-caret-down:before           { content: "\f0d7"; }
+.icon-caret-up:before             { content: "\f0d8"; }
+.icon-caret-left:before           { content: "\f0d9"; }
+.icon-caret-right:before          { content: "\f0da"; }
+.icon-columns:before              { content: "\f0db"; }
+.icon-sort:before                 { content: "\f0dc"; }
+.icon-sort-down:before            { content: "\f0dd"; }
+.icon-sort-up:before              { content: "\f0de"; }
+
+.icon-envelope-alt:before         { content: "\f0e0"; }
+.icon-linkedin:before             { content: "\f0e1"; }
+.icon-undo:before                 { content: "\f0e2"; }
+.icon-legal:before                { content: "\f0e3"; }
+.icon-dashboard:before            { content: "\f0e4"; }
+.icon-comment-alt:before          { content: "\f0e5"; }
+.icon-comments-alt:before         { content: "\f0e6"; }
+.icon-bolt:before                 { content: "\f0e7"; }
+.icon-sitemap:before              { content: "\f0e8"; }
+.icon-umbrella:before             { content: "\f0e9"; }
+.icon-paste:before                { content: "\f0ea"; }
+.icon-lightbulb:before            { content: "\f0eb"; }
+.icon-exchange:before             { content: "\f0ec"; }
+.icon-cloud-download:before       { content: "\f0ed"; }
+.icon-cloud-upload:before         { content: "\f0ee"; }
+
+.icon-user-md:before              { content: "\f0f0"; }
+.icon-stethoscope:before          { content: "\f0f1"; }
+.icon-suitcase:before             { content: "\f0f2"; }
+.icon-bell-alt:before             { content: "\f0f3"; }
+.icon-coffee:before               { content: "\f0f4"; }
+.icon-food:before                 { content: "\f0f5"; }
+.icon-file-alt:before             { content: "\f0f6"; }
+.icon-building:before             { content: "\f0f7"; }
+.icon-hospital:before             { content: "\f0f8"; }
+.icon-ambulance:before            { content: "\f0f9"; }
+.icon-medkit:before               { content: "\f0fa"; }
+.icon-fighter-jet:before          { content: "\f0fb"; }
+.icon-beer:before                 { content: "\f0fc"; }
+.icon-h-sign:before               { content: "\f0fd"; }
+.icon-plus-sign-alt:before        { content: "\f0fe"; }
+
+.icon-double-angle-left:before    { content: "\f100"; }
+.icon-double-angle-right:before   { content: "\f101"; }
+.icon-double-angle-up:before      { content: "\f102"; }
+.icon-double-angle-down:before    { content: "\f103"; }
+.icon-angle-left:before           { content: "\f104"; }
+.icon-angle-right:before          { content: "\f105"; }
+.icon-angle-up:before             { content: "\f106"; }
+.icon-angle-down:before           { content: "\f107"; }
+.icon-desktop:before              { content: "\f108"; }
+.icon-laptop:before               { content: "\f109"; }
+.icon-tablet:before               { content: "\f10a"; }
+.icon-mobile-phone:before         { content: "\f10b"; }
+.icon-circle-blank:before         { content: "\f10c"; }
+.icon-quote-left:before           { content: "\f10d"; }
+.icon-quote-right:before          { content: "\f10e"; }
+
+.icon-spinner:before              { content: "\f110"; }
+.icon-circle:before               { content: "\f111"; }
+.icon-reply:before                { content: "\f112"; }
+.icon-github-alt:before           { content: "\f113"; }
+.icon-folder-close-alt:before     { content: "\f114"; }
+.icon-folder-open-alt:before      { content: "\f115"; }
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/css/font-awesome.min.css elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/css/font-awesome.min.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/css/font-awesome.min.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/css/font-awesome.min.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,34 @@
+/*  Font Awesome 3.0
+    the iconic font designed for use with Twitter Bootstrap
+    -------------------------------------------------------
+    The full suite of pictographic icons, examples, and documentation
+    can be found at: http://fortawesome.github.com/Font-Awesome/
+
+    License
+    -------------------------------------------------------
+    • The Font Awesome font is licensed under the SIL Open Font License - http://scripts.sil.org/OFL
+    • Font Awesome CSS, LESS, and SASS files are licensed under the MIT License -
+      http://opensource.org/licenses/mit-license.html
+    • The Font Awesome pictograms are licensed under the CC BY 3.0 License - http://creativecommons.org/licenses/by/3.0/
+    • Attribution is no longer required in Font Awesome 3.0, but much appreciated:
+      "Font Awesome by Dave Gandy - http://fortawesome.github.com/Font-Awesome"
+
+    Contact
+    -------------------------------------------------------
+    Email: dave@davegandy.com
+    Twitter: http://twitter.com/fortaweso_me
+    Work: Lead Product Designer @ http://kyruus.com
+
+    */
+
+@font-face {
+  font-family:'FontAwesome';
+  src:url('../font/fontawesome-webfont.eot');
+  src:url('../font/fontawesome-webfont.eot?#iefix') format('embedded-opentype'),
+    url('../font/fontawesome-webfont.woff') format('woff'),
+    url('../font/fontawesome-webfont.ttf') format('truetype');
+  font-weight:normal;
+  font-style:normal
+}
+
+[class^="icon-"],[class*=" icon-"]{font-family:FontAwesome;font-weight:normal;font-style:normal;text-decoration:inherit;display:inline;width:auto;height:auto;line-height:normal;vertical-align:baseline;background-image:none!important;background-position:0 0;background-repeat:repeat}[class^="icon-"]:before,[class*=" icon-"]:before{text-decoration:inherit;display:inline-block;speak:none}a [class^="icon-"],a [class*=" icon-"]{display:inline-block}.icon-large:before{vertical-align:-10%;font-size:1.3333333333333333em}.btn [class^="icon-"],.nav [class^="icon-"],.btn [class*=" icon-"],.nav [class*=" icon-"]{display:inline;line-height:.6em}.btn [class^="icon-"].icon-spin,.nav [class^="icon-"].icon-spin,.btn [class*=" icon-"].icon-spin,.nav [class*=" icon-"].icon-spin{display:inline-block}li [class^="icon-"],li [class*=" icon-"]{display:inline-block;width:1.25em;text-align:center}li [class^="icon-"].icon-large,li [class*=" icon-"].icon-large{width:1.5625em}ul.icons{list-style-type:none;text-indent:-0.75em}ul.icons li [class^="icon-"],ul.icons li [class*=" icon-"]{width:.75em}.icon-muted{color:#eee}.icon-border{border:solid 1px #eee;padding:.2em .25em .15em;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.icon-2x{font-size:2em}.icon-2x.icon-border{border-width:2px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.icon-3x{font-size:3em}.icon-3x.icon-border{border-width:3px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.icon-4x{font-size:4em}.icon-4x.icon-border{border-width:4px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.pull-right{float:right}.pull-left{float:left}[class^="icon-"].pull-left,[class*=" icon-"].pull-left{margin-right:.35em}[class^="icon-"].pull-right,[class*=" icon-"].pull-right{margin-left:.35em}.btn [class^="icon-"].pull-left.icon-2x,.btn [class*=" icon-"].pull-left.icon-2x,.btn [class^="icon-"].pull-right.icon-2x,.btn [class*=" icon-"].pull-right.icon-2x{margin-top:.35em}.btn [class^="icon-"].icon-spin.icon-large,.btn [class*=" icon-"].icon-spin.icon-large{height:.75em}.btn.btn-small [class^="icon-"].pull-left.icon-2x,.btn.btn-small [class*=" icon-"].pull-left.icon-2x,.btn.btn-small [class^="icon-"].pull-right.icon-2x,.btn.btn-small [class*=" icon-"].pull-right.icon-2x{margin-top:.45em}.btn.btn-large [class^="icon-"].pull-left.icon-2x,.btn.btn-large [class*=" icon-"].pull-left.icon-2x,.btn.btn-large [class^="icon-"].pull-right.icon-2x,.btn.btn-large [class*=" icon-"].pull-right.icon-2x{margin-top:.2em}.icon-spin{display:inline-block;-moz-animation:spin 2s infinite linear;-o-animation:spin 2s infinite linear;-webkit-animation:spin 2s infinite linear;animation:spin 2s infinite linear}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg)}100%{-moz-transform:rotate(359deg)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg)}100%{-o-transform:rotate(359deg)}}@-ms-keyframes spin{0%{-ms-transform:rotate(0deg)}100%{-ms-transform:rotate(359deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}.icon-glass:before{content:"\f000"}.icon-music:before{content:"\f001"}.icon-search:before{content:"\f002"}.icon-envelope:before{content:"\f003"}.icon-heart:before{content:"\f004"}.icon-star:before{content:"\f005"}.icon-star-empty:before{content:"\f006"}.icon-user:before{content:"\f007"}.icon-film:before{content:"\f008"}.icon-th-large:before{content:"\f009"}.icon-th:before{content:"\f00a"}.icon-th-list:before{content:"\f00b"}.icon-ok:before{content:"\f00c"}.icon-remove:before{content:"\f00d"}.icon-zoom-in:before{content:"\f00e"}.icon-zoom-out:before{content:"\f010"}.icon-off:before{content:"\f011"}.icon-signal:before{content:"\f012"}.icon-cog:before{content:"\f013"}.icon-trash:before{content:"\f014"}.icon-home:before{content:"\f015"}.icon-file:before{content:"\f016"}.icon-time:before{content:"\f017"}.icon-road:before{content:"\f018"}.icon-download-alt:before{content:"\f019"}.icon-download:before{content:"\f01a"}.icon-upload:before{content:"\f01b"}.icon-inbox:before{content:"\f01c"}.icon-play-circle:before{content:"\f01d"}.icon-repeat:before{content:"\f01e"}.icon-refresh:before{content:"\f021"}.icon-list-alt:before{content:"\f022"}.icon-lock:before{content:"\f023"}.icon-flag:before{content:"\f024"}.icon-headphones:before{content:"\f025"}.icon-volume-off:before{content:"\f026"}.icon-volume-down:before{content:"\f027"}.icon-volume-up:before{content:"\f028"}.icon-qrcode:before{content:"\f029"}.icon-barcode:before{content:"\f02a"}.icon-tag:before{content:"\f02b"}.icon-tags:before{content:"\f02c"}.icon-book:before{content:"\f02d"}.icon-bookmark:before{content:"\f02e"}.icon-print:before{content:"\f02f"}.icon-camera:before{content:"\f030"}.icon-font:before{content:"\f031"}.icon-bold:before{content:"\f032"}.icon-italic:before{content:"\f033"}.icon-text-height:before{content:"\f034"}.icon-text-width:before{content:"\f035"}.icon-align-left:before{content:"\f036"}.icon-align-center:before{content:"\f037"}.icon-align-right:before{content:"\f038"}.icon-align-justify:before{content:"\f039"}.icon-list:before{content:"\f03a"}.icon-indent-left:before{content:"\f03b"}.icon-indent-right:before{content:"\f03c"}.icon-facetime-video:before{content:"\f03d"}.icon-picture:before{content:"\f03e"}.icon-pencil:before{content:"\f040"}.icon-map-marker:before{content:"\f041"}.icon-adjust:before{content:"\f042"}.icon-tint:before{content:"\f043"}.icon-edit:before{content:"\f044"}.icon-share:before{content:"\f045"}.icon-check:before{content:"\f046"}.icon-move:before{content:"\f047"}.icon-step-backward:before{content:"\f048"}.icon-fast-backward:before{content:"\f049"}.icon-backward:before{content:"\f04a"}.icon-play:before{content:"\f04b"}.icon-pause:before{content:"\f04c"}.icon-stop:before{content:"\f04d"}.icon-forward:before{content:"\f04e"}.icon-fast-forward:before{content:"\f050"}.icon-step-forward:before{content:"\f051"}.icon-eject:before{content:"\f052"}.icon-chevron-left:before{content:"\f053"}.icon-chevron-right:before{content:"\f054"}.icon-plus-sign:before{content:"\f055"}.icon-minus-sign:before{content:"\f056"}.icon-remove-sign:before{content:"\f057"}.icon-ok-sign:before{content:"\f058"}.icon-question-sign:before{content:"\f059"}.icon-info-sign:before{content:"\f05a"}.icon-screenshot:before{content:"\f05b"}.icon-remove-circle:before{content:"\f05c"}.icon-ok-circle:before{content:"\f05d"}.icon-ban-circle:before{content:"\f05e"}.icon-arrow-left:before{content:"\f060"}.icon-arrow-right:before{content:"\f061"}.icon-arrow-up:before{content:"\f062"}.icon-arrow-down:before{content:"\f063"}.icon-share-alt:before{content:"\f064"}.icon-resize-full:before{content:"\f065"}.icon-resize-small:before{content:"\f066"}.icon-plus:before{content:"\f067"}.icon-minus:before{content:"\f068"}.icon-asterisk:before{content:"\f069"}.icon-exclamation-sign:before{content:"\f06a"}.icon-gift:before{content:"\f06b"}.icon-leaf:before{content:"\f06c"}.icon-fire:before{content:"\f06d"}.icon-eye-open:before{content:"\f06e"}.icon-eye-close:before{content:"\f070"}.icon-warning-sign:before{content:"\f071"}.icon-plane:before{content:"\f072"}.icon-calendar:before{content:"\f073"}.icon-random:before{content:"\f074"}.icon-comment:before{content:"\f075"}.icon-magnet:before{content:"\f076"}.icon-chevron-up:before{content:"\f077"}.icon-chevron-down:before{content:"\f078"}.icon-retweet:before{content:"\f079"}.icon-shopping-cart:before{content:"\f07a"}.icon-folder-close:before{content:"\f07b"}.icon-folder-open:before{content:"\f07c"}.icon-resize-vertical:before{content:"\f07d"}.icon-resize-horizontal:before{content:"\f07e"}.icon-bar-chart:before{content:"\f080"}.icon-twitter-sign:before{content:"\f081"}.icon-facebook-sign:before{content:"\f082"}.icon-camera-retro:before{content:"\f083"}.icon-key:before{content:"\f084"}.icon-cogs:before{content:"\f085"}.icon-comments:before{content:"\f086"}.icon-thumbs-up:before{content:"\f087"}.icon-thumbs-down:before{content:"\f088"}.icon-star-half:before{content:"\f089"}.icon-heart-empty:before{content:"\f08a"}.icon-signout:before{content:"\f08b"}.icon-linkedin-sign:before{content:"\f08c"}.icon-pushpin:before{content:"\f08d"}.icon-external-link:before{content:"\f08e"}.icon-signin:before{content:"\f090"}.icon-trophy:before{content:"\f091"}.icon-github-sign:before{content:"\f092"}.icon-upload-alt:before{content:"\f093"}.icon-lemon:before{content:"\f094"}.icon-phone:before{content:"\f095"}.icon-check-empty:before{content:"\f096"}.icon-bookmark-empty:before{content:"\f097"}.icon-phone-sign:before{content:"\f098"}.icon-twitter:before{content:"\f099"}.icon-facebook:before{content:"\f09a"}.icon-github:before{content:"\f09b"}.icon-unlock:before{content:"\f09c"}.icon-credit-card:before{content:"\f09d"}.icon-rss:before{content:"\f09e"}.icon-hdd:before{content:"\f0a0"}.icon-bullhorn:before{content:"\f0a1"}.icon-bell:before{content:"\f0a2"}.icon-certificate:before{content:"\f0a3"}.icon-hand-right:before{content:"\f0a4"}.icon-hand-left:before{content:"\f0a5"}.icon-hand-up:before{content:"\f0a6"}.icon-hand-down:before{content:"\f0a7"}.icon-circle-arrow-left:before{content:"\f0a8"}.icon-circle-arrow-right:before{content:"\f0a9"}.icon-circle-arrow-up:before{content:"\f0aa"}.icon-circle-arrow-down:before{content:"\f0ab"}.icon-globe:before{content:"\f0ac"}.icon-wrench:before{content:"\f0ad"}.icon-tasks:before{content:"\f0ae"}.icon-filter:before{content:"\f0b0"}.icon-briefcase:before{content:"\f0b1"}.icon-fullscreen:before{content:"\f0b2"}.icon-group:before{content:"\f0c0"}.icon-link:before{content:"\f0c1"}.icon-cloud:before{content:"\f0c2"}.icon-beaker:before{content:"\f0c3"}.icon-cut:before{content:"\f0c4"}.icon-copy:before{content:"\f0c5"}.icon-paper-clip:before{content:"\f0c6"}.icon-save:before{content:"\f0c7"}.icon-sign-blank:before{content:"\f0c8"}.icon-reorder:before{content:"\f0c9"}.icon-list-ul:before{content:"\f0ca"}.icon-list-ol:before{content:"\f0cb"}.icon-strikethrough:before{content:"\f0cc"}.icon-underline:before{content:"\f0cd"}.icon-table:before{content:"\f0ce"}.icon-magic:before{content:"\f0d0"}.icon-truck:before{content:"\f0d1"}.icon-pinterest:before{content:"\f0d2"}.icon-pinterest-sign:before{content:"\f0d3"}.icon-google-plus-sign:before{content:"\f0d4"}.icon-google-plus:before{content:"\f0d5"}.icon-money:before{content:"\f0d6"}.icon-caret-down:before{content:"\f0d7"}.icon-caret-up:before{content:"\f0d8"}.icon-caret-left:before{content:"\f0d9"}.icon-caret-right:before{content:"\f0da"}.icon-columns:before{content:"\f0db"}.icon-sort:before{content:"\f0dc"}.icon-sort-down:before{content:"\f0dd"}.icon-sort-up:before{content:"\f0de"}.icon-envelope-alt:before{content:"\f0e0"}.icon-linkedin:before{content:"\f0e1"}.icon-undo:before{content:"\f0e2"}.icon-legal:before{content:"\f0e3"}.icon-dashboard:before{content:"\f0e4"}.icon-comment-alt:before{content:"\f0e5"}.icon-comments-alt:before{content:"\f0e6"}.icon-bolt:before{content:"\f0e7"}.icon-sitemap:before{content:"\f0e8"}.icon-umbrella:before{content:"\f0e9"}.icon-paste:before{content:"\f0ea"}.icon-lightbulb:before{content:"\f0eb"}.icon-exchange:before{content:"\f0ec"}.icon-cloud-download:before{content:"\f0ed"}.icon-cloud-upload:before{content:"\f0ee"}.icon-user-md:before{content:"\f0f0"}.icon-stethoscope:before{content:"\f0f1"}.icon-suitcase:before{content:"\f0f2"}.icon-bell-alt:before{content:"\f0f3"}.icon-coffee:before{content:"\f0f4"}.icon-food:before{content:"\f0f5"}.icon-file-alt:before{content:"\f0f6"}.icon-building:before{content:"\f0f7"}.icon-hospital:before{content:"\f0f8"}.icon-ambulance:before{content:"\f0f9"}.icon-medkit:before{content:"\f0fa"}.icon-fighter-jet:before{content:"\f0fb"}.icon-beer:before{content:"\f0fc"}.icon-h-sign:before{content:"\f0fd"}.icon-plus-sign-alt:before{content:"\f0fe"}.icon-double-angle-left:before{content:"\f100"}.icon-double-angle-right:before{content:"\f101"}.icon-double-angle-up:before{content:"\f102"}.icon-double-angle-down:before{content:"\f103"}.icon-angle-left:before{content:"\f104"}.icon-angle-right:before{content:"\f105"}.icon-angle-up:before{content:"\f106"}.icon-angle-down:before{content:"\f107"}.icon-desktop:before{content:"\f108"}.icon-laptop:before{content:"\f109"}.icon-tablet:before{content:"\f10a"}.icon-mobile-phone:before{content:"\f10b"}.icon-circle-blank:before{content:"\f10c"}.icon-quote-left:before{content:"\f10d"}.icon-quote-right:before{content:"\f10e"}.icon-spinner:before{content:"\f110"}.icon-circle:before{content:"\f111"}.icon-reply:before{content:"\f112"}.icon-github-alt:before{content:"\f113"}.icon-folder-close-alt:before{content:"\f114"}.icon-folder-open-alt:before{content:"\f115"}
\ No newline at end of file
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/font/FontAwesome.otf and elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/font/FontAwesome.otf differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.eot and elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.eot differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.svg elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.svg
--- elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.svg	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.svg	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,255 @@
+<?xml version="1.0" standalone="no"?>
+<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
+<svg xmlns="http://www.w3.org/2000/svg">
+<metadata></metadata>
+<defs>
+<font id="FontAwesomeRegular" horiz-adv-x="1843" >
+<font-face units-per-em="2048" ascent="1536" descent="-512" />
+<missing-glyph horiz-adv-x="512" />
+<glyph horiz-adv-x="0" />
+<glyph horiz-adv-x="0" />
+<glyph unicode="&#xd;" horiz-adv-x="512" />
+<glyph unicode=" "  horiz-adv-x="512" />
+<glyph unicode="&#x09;" horiz-adv-x="512" />
+<glyph unicode="&#xa0;" horiz-adv-x="512" />
+<glyph unicode="o" horiz-adv-x="1591" />
+<glyph unicode="&#xa8;" horiz-adv-x="2048" />
+<glyph unicode="&#xa9;" horiz-adv-x="2048" />
+<glyph unicode="&#xae;" horiz-adv-x="2048" />
+<glyph unicode="&#xb4;" horiz-adv-x="2048" />
+<glyph unicode="&#xc6;" horiz-adv-x="2048" />
+<glyph unicode="&#xcd;" horiz-adv-x="2048" />
+<glyph unicode="&#x2000;" horiz-adv-x="784" />
+<glyph unicode="&#x2001;" horiz-adv-x="1569" />
+<glyph unicode="&#x2002;" horiz-adv-x="784" />
+<glyph unicode="&#x2003;" horiz-adv-x="1569" />
+<glyph unicode="&#x2004;" horiz-adv-x="523" />
+<glyph unicode="&#x2005;" horiz-adv-x="392" />
+<glyph unicode="&#x2006;" horiz-adv-x="261" />
+<glyph unicode="&#x2007;" horiz-adv-x="261" />
+<glyph unicode="&#x2008;" horiz-adv-x="196" />
+<glyph unicode="&#x2009;" horiz-adv-x="313" />
+<glyph unicode="&#x200a;" horiz-adv-x="87" />
+<glyph unicode="&#x202f;" horiz-adv-x="313" />
+<glyph unicode="&#x203a;" horiz-adv-x="2048" />
+<glyph unicode="&#x205f;" horiz-adv-x="392" />
+<glyph unicode="&#x2122;" horiz-adv-x="2048" />
+<glyph unicode="&#x221e;" horiz-adv-x="2048" />
+<glyph unicode="&#xe000;" horiz-adv-x="1024" d="M0 0z" />
+<glyph unicode="&#xf000;" horiz-adv-x="1536" d="M6 1489q20 47 70 47h1382q51 0 72 -47q20 -47 -17 -84l-610 -610v-641h248q33 0 55.5 -22.5t22.5 -53.5q0 -33 -22.5 -55.5t-55.5 -22.5h-768q-31 0 -53.5 22.5t-22.5 55.5q0 31 22.5 53.5t53.5 22.5h250v641l-610 610q-37 37 -17 84z" />
+<glyph unicode="&#xf001;" horiz-adv-x="1488" d="M0 213q0 57 27.5 103t72.5 77t98.5 47.5t106.5 16.5q25 0 50.5 -4t50.5 -11v779q0 27 16 48t43 29q23 6 99.5 29t178 52.5t215 62.5t211 60.5t164 46t74.5 18.5q35 0 58.5 -23.5t23.5 -58.5v-1028q0 -59 -27.5 -104.5t-73 -76t-99.5 -47t-105 -16.5t-105.5 16.5t-98.5 47 t-71.5 75.5t-27.5 105q0 57 27.5 103t71.5 77t98.5 47t105.5 16q27 0 52.5 -4t49.5 -10v537l-678 -195v-815q0 -59 -27.5 -104.5t-71.5 -76t-98.5 -47t-105.5 -16.5q-53 0 -106.5 16.5t-98.5 47t-72.5 76t-27.5 104.5z" />
+<glyph unicode="&#xf002;" horiz-adv-x="1597" d="M0 901q0 137 52 258t143.5 212t212 143.5t258.5 52.5q137 0 257.5 -52.5t212 -143.5t143.5 -212t52 -258q0 -98 -28.5 -191.5t-81.5 -174.5l358 -359q18 -18 18 -47q0 -16 -18 -43t-45 -53.5t-53.5 -45t-42.5 -18.5q-29 0 -47 19l-359 358q-82 -53 -175 -81.5t-191 -28.5 q-137 0 -258 52t-212.5 143t-143.5 212t-52 258zM266 901q0 -84 32 -156.5t86 -126t127 -85t155 -31.5t154.5 31.5t126.5 85t86 126t32 156.5q0 82 -32 154.5t-86 127t-126.5 86t-154.5 31.5t-155 -31.5t-127 -86t-86 -127t-32 -154.5zM414 901q0 51 19.5 97t54 81t80 54.5 t98.5 19.5q20 0 34.5 -14.5t14.5 -36.5q0 -20 -14.5 -34.5t-34.5 -14.5q-63 0 -107.5 -44t-44.5 -108q0 -20 -14.5 -34.5t-34.5 -14.5q-23 0 -37 14.5t-14 34.5z" />
+<glyph unicode="&#xf003;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM154 154h1536v852q-31 -31 -58 -50q-106 -80 -212.5 -159.5t-211.5 -163.5q-61 -49 -131.5 -94t-156.5 -45q-82 0 -153 45t-132 94 q-104 84 -211 164t-213 159q-27 18 -57 50v-852zM154 1317q0 -31 14 -65.5t35.5 -66.5t47 -59.5t50.5 -46.5q100 -76 199.5 -150.5t199.5 -152.5q20 -16 48 -37.5t58 -42t59.5 -35t54.5 -14.5h2h2q25 0 54.5 14.5t59 35t57 42t48.5 37.5q100 78 199.5 153t199.5 150 q25 18 50.5 46t47 60t36 66.5t14.5 65.5v65h-1536v-65z" />
+<glyph unicode="&#xf004;" horiz-adv-x="1802" d="M0 1073q0 113 34 205t97.5 155.5t153.5 98.5t202 35q59 0 117 -18.5t110 -48.5t99 -68.5t88 -77.5q39 39 87 77.5t100.5 68.5t109 48.5t115.5 18.5q113 0 204 -35t154.5 -98.5t97 -155.5t33.5 -205q0 -66 -18.5 -130t-51 -124.5t-74.5 -115t-87 -99.5l-615 -612 q-23 -23 -55 -23q-31 0 -57 23l-615 614q-45 45 -87 99.5t-73.5 114t-50 124t-18.5 129.5z" />
+<glyph unicode="&#xf005;" horiz-adv-x="1675" d="M1 959.5q9 27.5 54 33.5l506 74l227 459q20 41 49 41t50 -41l227 -459l506 -74q45 -6 54 -33.5t-23 -60.5l-367 -356l86 -504q8 -45 -15.5 -62.5t-64.5 5.5l-452 237l-453 -237q-41 -23 -64.5 -5.5t-15.5 62.5l86 504l-364 356q-35 33 -26 60.5z" />
+<glyph unicode="&#xf006;" horiz-adv-x="1675" d="M0 948q0 23 18.5 32t36.5 13l506 74l227 459q6 14 20 27.5t30 13.5q18 0 30.5 -13.5t18.5 -27.5l227 -459l506 -74q18 -4 36.5 -13t18.5 -32q0 -14 -7 -26.5t-17 -22.5l-367 -356l86 -504q0 -4 1 -9t1 -12q0 -20 -9 -34.5t-32 -14.5t-41 13l-452 237l-453 -237 q-18 -12 -39 -13q-23 0 -33 14.5t-10 34.5q0 6 1 11.5t1 9.5l86 504l-364 356q-10 10 -18.5 22.5t-8.5 26.5zM289 866l274 -268l-65 -377l340 178l340 -178l-66 377l274 268l-378 56l-170 344l-170 -344z" />
+<glyph unicode="&#xf007;" horiz-adv-x="1566" d="M0 57v387q0 37 18.5 82t48 86t65.5 74t71 43q18 6 66 13.5t102.5 14.5t104.5 13t77 10q-92 59 -144.5 153.5t-52.5 205.5q0 88 34 165.5t91.5 136t135 92.5t165.5 34t166 -34t136.5 -92.5t92 -136t33.5 -165.5q0 -109 -52 -204.5t-144 -154.5q27 -4 77 -10t104 -13 t101 -14.5t68 -13.5q35 -10 70.5 -42t65.5 -74t48.5 -87t18.5 -82v-387q-10 -4 -22.5 -14t-27 -19.5t-27.5 -16.5t-22 -7h-1370q-35 0 -53 21.5t-45 35.5z" />
+<glyph unicode="&#xf008;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM115 154q0 -16 11 -27.5t28 -11.5h153q16 0 27.5 11t11.5 28v153q0 16 -11 27.5t-28 11.5h-153q-16 0 -27.5 -11t-11.5 -28v-153zM115 512 q0 -16 11 -27.5t28 -11.5h153q16 0 27.5 11.5t11.5 27.5v154q0 16 -11 27.5t-28 11.5h-153q-16 0 -27.5 -11.5t-11.5 -27.5v-154zM115 870q0 -16 11 -27.5t28 -11.5h153q16 0 27.5 11.5t11.5 27.5v154q0 16 -11 27.5t-28 11.5h-153q-16 0 -27.5 -11.5t-11.5 -27.5v-154z M115 1229q0 -16 11 -27.5t28 -11.5h153q16 0 27.5 11t11.5 28v153q0 16 -11 27.5t-28 11.5h-153q-16 0 -27.5 -11t-11.5 -28v-153zM461 154q0 -16 11 -27.5t28 -11.5h843q16 0 27.5 11t11.5 28v512q0 16 -11 27.5t-28 11.5h-843q-16 0 -27.5 -11.5t-11.5 -27.5v-512z M461 870q0 -16 11 -27.5t28 -11.5h843q16 0 27.5 11.5t11.5 27.5v512q0 16 -11 27.5t-28 11.5h-843q-16 0 -27.5 -11t-11.5 -28v-512zM1497 154q0 -16 11.5 -27.5t27.5 -11.5h154q16 0 27.5 11t11.5 28v153q0 16 -11.5 27.5t-27.5 11.5h-154q-16 0 -27.5 -11t-11.5 -28v-153 zM1497 512q0 -16 11.5 -27.5t27.5 -11.5h154q16 0 27.5 11.5t11.5 27.5v154q0 16 -11.5 27.5t-27.5 11.5h-154q-16 0 -27.5 -11.5t-11.5 -27.5v-154zM1497 870q0 -16 11.5 -27.5t27.5 -11.5h154q16 0 27.5 11.5t11.5 27.5v154q0 16 -11.5 27.5t-27.5 11.5h-154 q-16 0 -27.5 -11.5t-11.5 -27.5v-154zM1497 1229q0 -16 11.5 -27.5t27.5 -11.5h154q16 0 27.5 11t11.5 28v153q0 16 -11.5 27.5t-27.5 11.5h-154q-16 0 -27.5 -11t-11.5 -28v-153z" />
+<glyph unicode="&#xf009;" d="M0 78v536q0 33 22.5 55.5t55.5 22.5h690q33 0 55.5 -22.5t22.5 -55.5v-536q0 -33 -22.5 -55.5t-55.5 -22.5h-690q-33 0 -55.5 22.5t-22.5 55.5zM0 922v538q0 31 22.5 53.5t55.5 22.5h690q33 0 55.5 -22.5t22.5 -53.5v-538q0 -33 -22.5 -54.5t-55.5 -21.5h-690 q-33 0 -55.5 21.5t-22.5 54.5zM999 78v536q0 33 21.5 55.5t54.5 22.5h692q31 0 53.5 -22.5t22.5 -55.5v-536q0 -33 -22.5 -55.5t-53.5 -22.5h-692q-33 0 -54.5 22.5t-21.5 55.5zM999 922v538q0 31 21.5 53.5t54.5 22.5h692q31 0 53.5 -22.5t22.5 -53.5v-538 q0 -33 -22.5 -54.5t-53.5 -21.5h-692q-33 0 -54.5 21.5t-21.5 54.5z" />
+<glyph unicode="&#xf00a;" d="M0 78v270q0 33 22.5 54.5t55.5 21.5h358q31 0 53.5 -21.5t22.5 -54.5v-270q0 -33 -22.5 -55.5t-53.5 -22.5h-358q-33 0 -55.5 22.5t-22.5 55.5zM0 655v226q0 33 22.5 54t55.5 21h358q31 0 53.5 -21.5t22.5 -53.5v-226q0 -33 -22.5 -55t-53.5 -22h-358q-33 0 -55.5 22.5 t-22.5 54.5zM0 1188v272q0 31 22.5 53.5t55.5 22.5h358q31 0 53.5 -22.5t22.5 -53.5v-272q0 -33 -22.5 -55.5t-53.5 -22.5h-358q-33 0 -55.5 22.5t-22.5 55.5zM666 78v270q0 33 22.5 54.5t54.5 21.5h359q31 0 53.5 -21.5t22.5 -54.5v-270q0 -33 -22.5 -55.5t-53.5 -22.5 h-359q-33 0 -55 22.5t-22 55.5zM666 655v226q0 33 22.5 54t54.5 21h359q31 0 53.5 -21.5t22.5 -53.5v-226q0 -33 -22.5 -55t-53.5 -22h-359q-33 0 -55 22.5t-22 54.5zM666 1188v272q0 31 22.5 53.5t54.5 22.5h359q31 0 53.5 -22.5t22.5 -53.5v-272q0 -33 -22.5 -55.5 t-53.5 -22.5h-359q-33 0 -55 22.5t-22 55.5zM1331 78v270q0 33 22.5 54.5t55.5 21.5h358q31 0 53.5 -21.5t22.5 -54.5v-270q0 -33 -22.5 -55.5t-53.5 -22.5h-358q-33 0 -55.5 22.5t-22.5 55.5zM1331 655v226q0 33 22.5 54t55.5 21h358q31 0 53.5 -21.5t22.5 -53.5v-226 q0 -33 -22.5 -55t-53.5 -22h-358q-33 0 -55.5 22.5t-22.5 54.5zM1331 1188v272q0 31 22.5 53.5t55.5 22.5h358q31 0 53.5 -22.5t22.5 -53.5v-272q0 -33 -22.5 -55.5t-53.5 -22.5h-358q-33 0 -55.5 22.5t-22.5 55.5z" />
+<glyph unicode="&#xf00b;" d="M0 78v270q0 33 22.5 54.5t55.5 21.5h297q31 0 53.5 -21.5t22.5 -54.5v-270q0 -33 -22.5 -55.5t-53.5 -22.5h-297q-33 0 -55.5 22.5t-22.5 55.5zM0 655v226q0 33 22.5 54t55.5 21h297q31 0 53.5 -21.5t22.5 -53.5v-226q0 -33 -22.5 -55t-53.5 -22h-297q-33 0 -55.5 22.5 t-22.5 54.5zM0 1188v272q0 31 22.5 53.5t55.5 22.5h297q31 0 53.5 -22.5t22.5 -53.5v-272q0 -33 -22.5 -55.5t-53.5 -22.5h-297q-33 0 -55.5 22.5t-22.5 55.5zM604 78v270q0 33 22.5 54.5t55.5 21.5h1085q31 0 53.5 -21.5t22.5 -54.5v-270q0 -33 -22.5 -55.5t-53.5 -22.5 h-1085q-33 0 -55.5 22.5t-22.5 55.5zM604 655v226q0 33 22.5 54t55.5 21h1085q31 0 53.5 -21.5t22.5 -53.5v-226q0 -33 -22.5 -55t-53.5 -22h-1085q-33 0 -55.5 22.5t-22.5 54.5zM604 1188v272q0 31 22.5 53.5t55.5 22.5h1085q31 0 53.5 -22.5t22.5 -53.5v-272 q0 -33 -22.5 -55.5t-53.5 -22.5h-1085q-33 0 -55.5 22.5t-22.5 55.5z" />
+<glyph unicode="&#xf00c;" d="M0 732.5q0 33.5 23 55.5l174 175q23 23 56.5 22.5t55.5 -22.5l365 -365q23 -23 56.5 -23t55.5 23l746 745q23 23 56.5 23t56.5 -23l174 -174q23 -23 22.5 -56.5t-22.5 -55.5l-910 -910q-23 -23 -62.5 -39t-72.5 -16h-88q-35 0 -75 16.5t-62 38.5l-526 529 q-23 23 -23 56.5z" />
+<glyph unicode="&#xf00d;" horiz-adv-x="1536" d="M0 192.5q0 38.5 29 67.5l508 510l-508 500q-29 29 -29 67.5t29 67.5l100 100q29 29 68 29t67 -29l504 -504l504 504q29 29 67.5 29t67.5 -29l100 -100q29 -29 29 -68t-29 -67l-508 -510l508 -500q29 -29 29 -66.5t-29 -66.5l-100 -102q-29 -29 -68 -29t-67 29l-504 505 l-506 -505q-29 -29 -66.5 -29t-66.5 29l-100 100q-29 29 -29 67.5z" />
+<glyph unicode="&#xf00e;" horiz-adv-x="1597" d="M0 901q0 137 52 258t143.5 212t212 143.5t258.5 52.5q137 0 259 -52.5t212 -143.5t142 -212t52 -258q0 -102 -28.5 -195.5t-81.5 -170.5l358 -359q18 -18 18 -46t-18 -48l-94 -94q-20 -18 -48 -18.5t-46 18.5l-359 358q-78 -53 -171 -81.5t-195 -28.5q-137 0 -258 52 t-212.5 142t-143.5 211t-52 260zM266 901q0 -84 32 -156.5t86 -126t127 -85t155 -31.5t155.5 31.5t126.5 85t85 126t32 156.5q0 82 -32 154.5t-85 127t-126.5 86t-155.5 31.5t-155 -31.5t-127 -86t-86 -127t-32 -154.5zM399 868v66q0 33 33 33h168v168q0 33 33 32h65 q14 0 24.5 -9t10.5 -23v-168h166q33 0 33 -33v-66q0 -14 -9.5 -24t-23.5 -10h-166v-166q0 -14 -10 -23.5t-25 -9.5h-65q-33 0 -33 33v166h-168q-14 0 -23.5 10t-9.5 24z" />
+<glyph unicode="&#xf010;" horiz-adv-x="1597" d="M0 901q0 137 52 258t143.5 212t212 143.5t258.5 52.5q137 0 259 -52.5t212 -143.5t142 -212t52 -258q0 -102 -28.5 -195.5t-81.5 -170.5l358 -359q18 -18 18 -46t-18 -48l-94 -94q-20 -18 -48 -18.5t-46 18.5l-359 358q-78 -53 -171 -81.5t-195 -28.5q-137 0 -258 52 t-212.5 142t-143.5 211t-52 260zM266 901q0 -84 32 -156.5t86 -126t127 -85t155 -31.5t155.5 31.5t126.5 85t85 126t32 156.5q0 82 -32 154.5t-85 127t-126.5 86t-155.5 31.5t-155 -31.5t-127 -86t-86 -127t-32 -154.5zM399 868v66q0 33 33 33h467q33 0 33 -33v-66 q0 -14 -9.5 -24t-23.5 -10h-467q-14 0 -23.5 10t-9.5 24z" />
+<glyph unicode="&#xf011;" horiz-adv-x="1488" d="M0 713q0 186 86 349t240 267q12 10 28 6q18 -4 25 -16l90 -131q10 -12 6 -27.5t-16 -25.5q-106 -72 -164.5 -182.5t-58.5 -239.5q0 -104 39.5 -197.5t108.5 -162t162 -108.5t197 -40t197.5 40t163.5 108.5t109.5 161.5t39.5 198q0 129 -59 239.5t-164 182.5 q-14 10 -16 24q-4 16 6 29l88 131q10 12 25.5 15t29.5 -5q154 -104 240 -267t86 -349q0 -154 -58.5 -289t-160 -236.5t-237.5 -160t-290 -58.5t-289 58.5t-236 160t-159.5 236.5t-58.5 289zM627 793v704q0 16 11 27.5t28 11.5h157q16 0 27.5 -11.5t11.5 -27.5v-704 q0 -16 -11 -27.5t-28 -11.5h-157q-16 0 -27.5 11t-11.5 28z" />
+<glyph unicode="&#xf012;" d="M0 39v260q0 16 11.5 27.5t27.5 11.5h192q16 0 26.5 -11.5t10.5 -27.5v-260q0 -16 -10 -27.5t-27 -11.5h-192q-39 0 -39 39zM393 39v434q0 16 11.5 27.5t27.5 11.5h193q16 0 26.5 -11.5t10.5 -27.5v-434q0 -16 -10.5 -27.5t-26.5 -11.5h-193q-16 0 -27.5 11.5t-11.5 27.5z M786 39v676q0 16 11.5 27.5t27.5 11.5h193q16 0 27.5 -11.5t11.5 -27.5v-676q0 -16 -11.5 -27.5t-27.5 -11.5h-193q-16 0 -27.5 11.5t-11.5 27.5zM1182 39v995q0 16 10 27.5t27 11.5h192q16 0 27.5 -11t11.5 -28v-995q0 -16 -11.5 -27.5t-27.5 -11.5h-192q-16 0 -26.5 11.5 t-10.5 27.5zM1575 39v1458q0 39 39 39h190q39 0 39 -39v-1458q0 -39 -39 -39h-190q-39 0 -39 39z" />
+<glyph unicode="&#xf013;" horiz-adv-x="1593" d="M0 651v236q0 12 30.5 21.5t68.5 15.5t74 9t48 5q18 61 49 117q-55 82 -120 157l-7 15q0 8 28 38.5t62.5 65.5t66.5 62.5t40 27.5q2 0 26.5 -18.5t54.5 -41t56.5 -43t32.5 -24.5q29 16 58.5 26.5t60.5 20.5q0 12 3 49t9 75t15.5 69t21.5 31h237q14 0 19 -15 q12 -49 17 -103t14 -106q31 -8 59.5 -19t56.5 -28q8 6 34 26.5t55.5 43t53 40t29.5 17.5t37 -27.5t65 -62.5t61.5 -65.5t27.5 -38.5q0 -4 -17.5 -28.5t-39 -53.5t-42 -55.5t-24.5 -32.5q33 -55 51 -123q49 -10 103.5 -13t101.5 -20q16 -4 16 -18v-236q0 -12 -29.5 -21.5 t-68.5 -15.5t-76 -9t-49 -5q-14 -57 -47 -117q55 -82 121 -157l6 -15q0 -8 -27.5 -38.5t-62.5 -65.5t-66.5 -62.5t-40.5 -27.5q-2 0 -26.5 18.5t-54 41t-56 43t-33.5 24.5q-29 -16 -58.5 -27.5t-59.5 -19.5q-2 -12 -5.5 -49.5t-9.5 -76t-14 -69.5t-21 -31h-237q-14 0 -19 17 q-14 49 -19 103t-11 103q-61 18 -117 50q-41 -31 -81 -60.5t-79 -62.5l-12 -4q-6 0 -37 27.5t-64.5 62.5t-61 65.5t-27.5 38.5q0 2 16 26.5t37.5 53.5t42 55.5t26.5 34.5q-33 55 -51 123q-51 10 -104.5 13t-100.5 20q-16 4 -16 18zM557 768q0 -49 18.5 -93t51 -77t77 -52.5 t93.5 -19.5t93 19.5t75.5 52.5t51 77t19.5 93t-19.5 92t-51 76t-75.5 51.5t-93 18.5t-93.5 -18.5t-77 -51.5t-51 -76t-18.5 -92z" />
+<glyph unicode="&#xf014;" horiz-adv-x="1304" d="M0 1175.5v34.5v36t2 36q25 14 71 23.5t98 15.5t102.5 9t78.5 5q-8 82 11.5 128t59.5 68.5t98.5 29t131.5 6.5q55 0 109.5 -3t97.5 -20.5t68.5 -54.5t25.5 -105v-24t-2 -25q29 -2 79 -5t102.5 -9t99.5 -15.5t72 -23.5v-72v-69q-37 -20 -123 -32.5t-185.5 -19t-193.5 -7.5 t-150 -1q-55 0 -150 1t-194.5 7.5t-184.5 18.5t-122 33q-2 16 -2 34.5zM133 154v837q123 -16 244 -21t244 -5h32q129 2 258 6t258 20v-837q0 -63 -44 -108.5t-107 -45.5h-731q-63 0 -108.5 45t-45.5 109zM303 199q0 -16 10.5 -26.5t26.5 -10.5h39q16 0 27.5 10t11.5 27v614 q0 16 -11.5 27.5t-27.5 11.5h-39q-16 0 -26.5 -11.5t-10.5 -27.5v-614zM504 1384q0 -10 1 -22t3 -23q144 2 291 0q0 12 2 23.5t0 21.5v15q-35 10 -74 11t-74 1q-37 0 -75.5 -1t-73.5 -11v-15zM596 199q0 -16 10 -26.5t27 -10.5h39q16 0 27.5 10t11.5 27v614q0 16 -11.5 27.5 t-27.5 11.5h-39q-16 0 -26.5 -11.5t-10.5 -27.5v-614zM887 199q0 -16 11 -26.5t28 -10.5h39q16 0 27.5 10t11.5 27v614q0 16 -11.5 27.5t-27.5 11.5h-39q-16 0 -27.5 -11.5t-11.5 -27.5v-614z" />
+<glyph unicode="&#xf015;" horiz-adv-x="1880" d="M0 809.5q2 15.5 14 26.5l867 710q27 20 59 21q33 0 59 -21l240 -196v102q0 16 11.5 27.5t27.5 11.5h223q16 0 26.5 -11.5t10.5 -27.5v-348l328 -268q12 -10 14 -25.5t-8 -28.5l-45 -53q-10 -14 -29 -14h-65q-16 0 -25 8l-743 608q-25 20 -50 0l-743 -608q-8 -8 -25 -8 h-65q-18 0 -29 14l-45 53q-10 12 -8 27.5zM266 76v622l674 553l674 -553v-622q0 -33 -21.5 -54.5t-54.5 -21.5h-422v498h-352v-498h-422q-33 0 -54.5 21.5t-21.5 54.5z" />
+<glyph unicode="&#xf016;" horiz-adv-x="1228" d="M0 78v1382q0 31 22.5 53.5t55.5 22.5h614q33 0 71 -16.5t60 -38.5l351 -351q23 -23 39 -60.5t16 -70.5v-921q0 -33 -22.5 -55.5t-53.5 -22.5h-1075q-33 0 -55.5 22.5t-22.5 55.5zM154 154h921v692h-459q-31 0 -53 22.5t-22 55.5v458h-387v-1228zM268 326v116h693v-116 h-693zM268 596v115h693v-115h-693zM694 999h381q0 4 -4 13.5t-6 11.5l-350 348q-2 4 -9.5 6t-11.5 4v-383z" />
+<glyph unicode="&#xf017;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44t218 44t177 120t120 177 t44 218t-44 218t-120 177t-177.5 120t-217.5 44q-117 0 -218.5 -44t-177 -120t-119.5 -177t-44 -218zM635 608v465q0 33 23.5 56.5t56.5 23.5h80q35 0 57 -23.5t22 -56.5v-305h201q33 0 56.5 -23.5t23.5 -56.5v-80q0 -33 -23.5 -56.5t-56.5 -23.5h-360q-33 0 -56.5 23.5 t-23.5 56.5z" />
+<glyph unicode="&#xf018;" d="M2 35l594 1466q6 14 21.5 24.5t31.5 10.5h195l-8 -170h172l-9 170h195q16 0 31.5 -10t21.5 -25l594 -1466q6 -14 -1 -24.5t-23 -10.5h-740l-26 512h-258l-27 -512h-739q-16 0 -23.5 10t-1.5 25zM807 797h229l-20 413h-189z" />
+<glyph unicode="&#xf019;" d="M0 39v614q0 16 11.5 27.5t27.5 11.5h229q16 0 27.5 -11t11.5 -28v-346h1229v346q0 16 11.5 27.5t27.5 11.5h229q16 0 27.5 -11t11.5 -28v-614q0 -39 -39 -39h-1765q-39 0 -39 39zM345.5 944.5q6.5 16.5 39.5 16.5h307v499q0 31 21.5 53.5t54.5 22.5h307q33 0 55.5 -22.5 t22.5 -53.5v-499h307q31 0 37 -16.5t-16 -39.5l-504 -506q-23 -23 -55.5 -22.5t-55.5 22.5l-504 506q-23 23 -16.5 39.5z" />
+<glyph unicode="&#xf01a;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44t218 44t177 120t120 177 t44 218t-44 218t-120 177t-177.5 120t-217.5 44q-117 0 -218.5 -44t-177 -120t-119.5 -177t-44 -218zM414 743q10 25 37 25h208v358q0 16 11.5 28.5t27.5 12.5h201q16 0 27.5 -12t11.5 -29v-358h209q27 0 37 -25t-10 -43l-347 -346q-14 -10 -28 -10t-29 10l-346 346 q-20 18 -10 43z" />
+<glyph unicode="&#xf01b;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44t218 44t177 120t120 177 t44 218t-44 218t-120 177t-177 120t-218 44t-218.5 -44t-177 -120t-119.5 -177t-44 -218zM414 793q-10 25 10 43l346 346q14 10 29 10q14 0 28 -10l347 -346q20 -18 10 -43t-37 -25h-209v-360q0 -16 -11.5 -27.5t-27.5 -11.5h-201q-16 0 -27.5 11t-11.5 28v360h-208 q-27 0 -37 25z" />
+<glyph unicode="&#xf01c;" d="M0 78v577q0 33 9 76t22 72l284 663q12 29 44 49.5t63 20.5h999q31 0 63 -20.5t44 -49.5l284 -663q12 -29 21.5 -72t9.5 -76v-577q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM238 694h387l114 -231h383l117 231h367q-2 4 -2 9.5t-2 9.5l-256 594 h-848l-256 -596q-2 -2 -2 -7.5t-2 -9.5z" />
+<glyph unicode="&#xf01d;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44t218 44t177 120t120 177 t44 218t-44 218t-120 177t-177.5 120t-217.5 44q-117 0 -218.5 -44t-177 -120t-119.5 -177t-44 -218zM582 453v628q0 18 16 29q20 8 31 0l545 -315q16 -6 16 -27q0 -20 -16 -27l-545 -315q-8 -4 -15 -4q-8 0 -16 4q-16 10 -16 27z" />
+<glyph unicode="&#xf01e;" horiz-adv-x="1591" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5q141 0 271 -48.5t239 -140.5l161 162q35 35 58.5 24.5t23.5 -57.5v-463q0 -33 -22 -55q-10 -10 -23.5 -16t-29.5 -6h-463q-47 0 -58.5 23.5t23.5 58.5l160 159q-72 57 -159 88t-181 31q-117 0 -218.5 -44t-177 -120 t-119.5 -177t-44 -218t44 -218t119.5 -177t177 -120t218.5 -44q104 0 198.5 37t169 101.5t123.5 153.5t64 191q0 16 14 27q14 10 31 8l157 -20q16 -4 26.5 -16.5t8.5 -28.5q-20 -147 -89.5 -274.5t-176 -220.5t-242 -145.5t-284.5 -52.5q-166 0 -311.5 62.5t-254 171 t-171 254t-62.5 311.5z" />
+<glyph unicode="&#xf021;" horiz-adv-x="1916" d="M6 311l150 437q10 33 39 45t59 4l438 -150q45 -16 46 -40.5t-42 -47.5l-202 -100q53 -78 123.5 -134.5t160.5 -86.5q111 -37 221.5 -28t207 56t170 129t110.5 193q6 16 20.5 22t30.5 2l152 -51q16 -6 23 -20.5t1 -30.5q-53 -158 -159.5 -274.5t-243.5 -184t-296 -81 t-315 39.5q-135 47 -241.5 134t-179.5 208l-205 -100q-43 -23 -63.5 -5.5t-4.5 64.5zM203 1024q53 156 159.5 273.5t243.5 185t295 81t316 -39.5q133 -47 240.5 -134t180.5 -208l205 100q43 23 63.5 5.5t4.5 -62.5l-150 -439q-10 -33 -39 -45t-59 -4l-438 150 q-45 16 -46 40.5t40 47.5l202 100q-51 78 -122.5 134.5t-159.5 86.5q-111 37 -221.5 28t-207 -56t-170 -129t-110.5 -193q-6 -16 -20.5 -22t-30.5 -2l-152 51q-16 6 -23 20.5t-1 30.5z" />
+<glyph unicode="&#xf022;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM154 154h1536v1075h-1536v-1075zM307 346v76q0 39 39 39h154q16 0 27.5 -11.5t11.5 -27.5v-76q0 -16 -11.5 -27.5t-27.5 -11.5h-154q-39 0 -39 39 zM307 653v76q0 39 39 39h154q16 0 27.5 -11.5t11.5 -27.5v-76q0 -16 -11.5 -27.5t-27.5 -11.5h-154q-39 0 -39 39zM307 961v75q0 39 39 39h154q16 0 27.5 -11t11.5 -28v-75q0 -16 -11.5 -27.5t-27.5 -11.5h-154q-39 0 -39 39zM692 346v76q0 16 10.5 27.5t26.5 11.5h768 q39 0 39 -39v-76q0 -39 -39 -39h-768q-16 0 -26.5 11.5t-10.5 27.5zM692 653v76q0 16 10.5 27.5t26.5 11.5h768q39 0 39 -39v-76q0 -39 -39 -39h-768q-16 0 -26.5 11.5t-10.5 27.5zM692 961v75q0 16 10.5 27.5t26.5 11.5h768q39 0 39 -39v-75q0 -39 -39 -39h-768 q-16 0 -26.5 11t-10.5 28z" />
+<glyph unicode="&#xf023;" horiz-adv-x="1253" d="M0 117v626q0 39 21.5 69t56.5 42v164q0 113 43 213t117.5 175t175 118t213.5 43t213 -43t175 -118t118 -175.5t43 -212.5v-164q35 -12 56 -42t21 -69v-626q0 -47 -34.5 -82t-81.5 -35h-1020q-47 0 -82 35t-35 82zM313 862h627v156q0 66 -24.5 123t-67.5 99t-100.5 66.5 t-120.5 24.5q-66 0 -122 -24.5t-99.5 -66.5t-68 -99.5t-24.5 -122.5v-156zM494 164h266l-66 285q29 18 47.5 48.5t18.5 65.5q0 55 -39 95t-94 40t-94 -40t-39 -95q0 -35 18 -65.5t47 -46.5z" />
+<glyph unicode="&#xf024;" d="M0 1382q0 63 45 108.5t109 45.5q63 0 108 -45.5t45 -108.5q0 -41 -20.5 -74.5t-55.5 -56.5v-1212q0 -16 -11 -27.5t-27 -11.5h-78q-16 0 -26.5 11.5t-10.5 27.5v1212q-35 23 -56.5 56.5t-21.5 74.5zM307 416v745q0 33 19.5 66t48.5 49q104 55 188 86t144 45q70 16 124 18 q68 0 124.5 -11t107.5 -29.5t99 -43t100 -51.5q63 -29 145 -33q70 -4 164 15.5t207 87.5q29 16 47 6t18 -43v-748q0 -31 -18.5 -64.5t-46.5 -49.5q-113 -68 -207 -87.5t-164 -15.5q-82 4 -145 33q-51 27 -99.5 51.5t-99.5 43t-107.5 29.5t-124.5 11q-55 -2 -124 -18 q-59 -14 -143.5 -45t-188.5 -88q-29 -16 -48.5 -4t-19.5 45z" />
+<glyph unicode="&#xf025;" horiz-adv-x="1916" d="M0 729q0 172 85 324.5t221 266.5t307 180.5t345 66.5t345.5 -66.5t307.5 -180.5t221 -266.5t85 -326.5q0 -182 -78 -350l-27 -60l-174 -26q-27 -104 -110.5 -173t-196.5 -69v-41q0 -16 -12 -27.5t-29 -11.5h-80q-16 0 -27.5 11.5t-11.5 27.5v719q0 16 11.5 28.5 t27.5 12.5h80q16 0 28.5 -12.5t12.5 -28.5v-39q88 0 161 -44t114 -116l39 7q33 90 32 192q0 125 -65.5 233.5t-170 190.5t-232.5 129t-251 47t-250.5 -47t-232 -128t-170 -190.5t-65.5 -232.5q0 -104 32 -194l39 -7q41 72 114 116t161 44v39q0 16 12 28.5t29 12.5h80 q16 0 27 -12.5t11 -28.5v-719q0 -16 -11 -27.5t-27 -11.5h-80q-16 0 -28.5 11.5t-12.5 27.5v41q-55 0 -106.5 18.5t-91.5 50.5t-68.5 76t-40.5 97l-175 26l-26 60q-78 168 -78 352z" />
+<glyph unicode="&#xf026;" horiz-adv-x="905" d="M0 578v380q0 16 11.5 27.5t27.5 11.5h420l325 326q49 51 84 37t35 -86v-1012q0 -72 -34.5 -86t-84.5 37l-325 326h-420q-16 0 -27.5 11t-11.5 28z" />
+<glyph unicode="&#xf027;" horiz-adv-x="1277" d="M0 578v380q0 16 11.5 27.5t27.5 11.5h420l325 326q49 51 84 37t35 -86v-1012q0 -72 -34.5 -86t-84.5 37l-325 326h-420q-16 0 -27.5 11t-11.5 28zM1027 406q-9 32 7 61q84 145 84 301t-84 301q-16 29 -7 61t38 48t60.5 8t48.5 -37q104 -182 104 -381q0 -201 -104 -381 q-23 -41 -70 -41q-20 0 -39 12q-29 16 -38 48z" />
+<glyph unicode="&#xf028;" horiz-adv-x="1916" d="M0 578v380q0 16 11.5 27.5t27.5 11.5h420l325 326q49 51 84 37t35 -86v-1012q0 -72 -34.5 -86t-84.5 37l-325 326h-420q-16 0 -27.5 11t-11.5 28zM1027 406q-9 32 7 61q84 145 84 301t-84 301q-16 29 -7 61t38 48t60.5 8t48.5 -37q104 -182 104 -381q0 -201 -104 -381 q-23 -41 -70 -41q-20 0 -39 12q-29 16 -38 48zM1285 219q-7 33 11 62q141 225 142 487q0 262 -142 487q-18 29 -11 62t36 49q29 18 61 11t50 -36q82 -131 123.5 -275t41.5 -298q0 -309 -167 -573q-10 -18 -29 -27.5t-37 -9.5q-25 0 -43 12q-29 16 -36 49zM1540 33 q-6 33 12 59q100 154 152.5 325t52.5 351t-52 351t-153 323q-18 29 -12 61.5t35 50.5q29 16 61 10.5t50 -32.5q115 -174 173 -366.5t58 -397.5t-58.5 -397.5t-172.5 -364.5q-10 -18 -29 -27.5t-37 -9.5q-25 0 -45 13q-29 18 -35 51z" />
+<glyph unicode="&#xf029;" horiz-adv-x="1536" d="M0 0v698h698v-698h-698zM0 838v698h698v-698h-698zM139 139h420v420h-420v-420zM139 977h420v420h-420v-420zM279 279v141h141v-141h-141zM279 1116v139h141v-139h-141zM838 0v698h417v-139h142v139h139v-419h-420v139h-139v-418h-139zM838 838v698h698v-698h-698z M977 977h420v420h-420v-420zM1116 0v139h139v-139h-139zM1116 1116v139h139v-139h-139zM1397 0v139h139v-139h-139z" />
+<glyph unicode="&#xf02a;" d="M0 0v1536h154v-1536h-154zM227 0v1536h37v-1536h-37zM356 0v1536h117v-1536h-117zM545 0v1536h78v-1536h-78zM715 0v1536h76v-1536h-76zM903 0v1536h37v-1536h-37zM1014 0v1536h153v-1536h-153zM1221 0v1536h77v-1536h-77zM1409 0v1536h39v-1536h-39zM1579 0v1536h37 v-1536h-37zM1690 0v1536h153v-1536h-153z" />
+<glyph unicode="&#xf02b;" horiz-adv-x="1488" d="M0 961v454q0 49 35 85t86 36h454q51 0 113 -24.5t94 -61.5l672 -748q33 -39 34 -88t-34 -84l-526 -526q-35 -35 -86 -36t-86 36l-670 750q-35 37 -60.5 96t-25.5 111zM197 1223q0 -49 33.5 -83t82.5 -34t83 34t34 83t-34 82.5t-83 33.5t-82.5 -33.5t-33.5 -82.5z" />
+<glyph unicode="&#xf02c;" horiz-adv-x="1875" d="M0 961v454q0 49 35 85t86 36h454q25 0 53.5 -6t57.5 -18.5t54.5 -28t41.5 -33.5l670 -748q33 -37 34 -86t-34 -84l-526 -524q-35 -35 -86.5 -37t-83.5 37l-670 746q-35 39 -60.5 98t-25.5 109zM195 1223q0 -47 34.5 -82t83.5 -35q47 0 82 35t35 82q0 49 -35 83.5 t-82 34.5q-49 0 -83.5 -34.5t-34.5 -83.5zM791 1534h174q51 0 112.5 -24.5t93.5 -61.5l670 -748q35 -37 35 -87t-35 -85l-524 -524q-35 -35 -86 -36t-86 36l-12 14l514 514q35 35 34.5 84.5t-34.5 85.5l-670 748q-31 35 -84 56.5t-102 27.5z" />
+<glyph unicode="&#xf02d;" horiz-adv-x="1710" d="M10 311q2 16 4 31.5t4 34.5q0 10 -4 20.5t-2 20.5q2 16 15.5 31.5t25.5 35.5q23 37 45.5 90.5t32.5 92.5q4 16 -1 30.5t-1 26.5q4 16 16.5 27.5t20.5 23.5q10 18 21.5 42t21.5 49.5t16 50t8 40.5t-2 33t0 29q6 16 20.5 26.5t24.5 24.5q10 12 21.5 34.5t23 49.5t19.5 52.5 t10 45.5q2 12 -4 24.5t-2 27.5q4 14 18.5 29.5t26.5 31.5q16 25 28.5 58.5t30 61t46 43t77.5 1.5l-2 -4q31 10 54 10h780q78 0 119 -57q41 -53 18 -129l-283 -906q-18 -63 -77.5 -107t-126.5 -44h-893q-10 0 -20.5 -2t-18.5 -12q-12 -20 0 -56q16 -43 60 -75.5t87 -32.5h946 q29 0 57.5 21.5t37.5 47.5l309 987q4 16 5 29.5t-1 28.5q41 -14 61 -43q41 -53 19 -129l-283 -905q-18 -66 -77.5 -109t-127.5 -43h-946q-41 0 -79.5 14.5t-73.5 39t-61.5 58t-41.5 72.5q-25 68 -2 127zM500 961q-10 -39 26 -39h615q16 0 30.5 11t18.5 28l24 75 q4 16 -3 27.5t-23 11.5h-615q-16 0 -31.5 -11t-19.5 -28zM569 1190q-4 -16 3.5 -26.5t23.5 -10.5h614q16 0 30.5 10.5t21.5 26.5l22 78q4 16 -3 27.5t-24 11.5h-614q-16 0 -30.5 -11.5t-20.5 -27.5z" />
+<glyph unicode="&#xf02e;" horiz-adv-x="1253" d="M0 84v1337q0 47 34 81t81 34h1024q47 0 80.5 -34t33.5 -81v-1337q0 -47 -33.5 -81t-80.5 -34t-80 33l-432 432l-432 -432q-33 -33 -80 -33t-81 34t-34 81z" />
+<glyph unicode="&#xf02f;" d="M0 39v346q0 47 18.5 89t50 73t73.5 49t89 18h1383q47 0 89 -18t72.5 -49t49 -73t18.5 -89v-346q0 -39 -39 -39h-1765q-39 0 -39 39zM268 193q0 -16 11.5 -26.5t27.5 -10.5h1229q16 0 27.5 10t11.5 27v38q0 16 -11.5 27.5t-27.5 11.5h-1229q-16 0 -27.5 -11t-11.5 -28v-38 zM307 729v731q0 31 22.5 53.5t55.5 22.5h651v-383q0 -49 34 -83t81 -34h385v-307h-1229zM1151 1153v383l385 -383h-385z" />
+<glyph unicode="&#xf030;" d="M0 115v1075q0 47 34 82t81 35h366l58 125q18 43 66 73.5t95 30.5h443q47 0 95 -30.5t67 -73.5l57 -125h367q47 0 80.5 -35t33.5 -82v-1075q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM442 653q0 -100 38 -187t102.5 -152.5t153 -103.5t186.5 -38t186 38 t152.5 103.5t102.5 152.5t38 187q0 98 -38 186.5t-102.5 153t-152.5 102.5t-186 38t-186.5 -38t-153 -102.5t-102.5 -152.5t-38 -187zM596 653q0 68 25.5 127.5t69.5 103.5t103.5 69.5t127.5 25.5t127 -25.5t103 -69.5t69.5 -103.5t25.5 -127.5t-25.5 -127t-69.5 -104 t-103.5 -70.5t-126.5 -25.5q-68 0 -127.5 25.5t-103.5 70.5t-69.5 104.5t-25.5 126.5z" />
+<glyph unicode="&#xf031;" horiz-adv-x="1644" d="M0 0l2 80q10 4 29.5 8t48.5 8q92 18 108 33q16 10 50 68l233 614l277 725h73h53l11 -20l202 -482q33 -78 64 -151.5t59 -145.5q29 -72 52.5 -130t42.5 -103q12 -29 28.5 -70t36.5 -94q23 -66 64 -150q25 -49 34 -57q20 -18 68 -24q25 -2 49.5 -9.5t52.5 -17.5 q6 -37 7 -55v-10.5t-3 -16.5q-43 0 -90 2t-98 6q-53 4 -99 6t-87 2h-80t-53 -2l-199 -10l-57 -2q0 20 1 39.5t3 38.5l129 26q57 14 67 25q12 8 13 27q0 14 -7 30l-47 115l-90 227l-446 2q-12 -29 -37 -96t-66 -178q-23 -63 -22 -84q0 -27 16 -43q14 -10 40 -17.5t63 -13.5 q14 -4 84 -12v-59q0 -16 -2 -27q-35 0 -121 5t-224 16l-49 -9q-43 -8 -83 -11t-81 -3h-20zM549 655q135 -2 216 -4t105 0l29 2q-18 51 -40.5 111.5t-51.5 130.5t-51.5 122t-38.5 87z" />
+<glyph unicode="&#xf032;" horiz-adv-x="1419" d="M0 0l2 94q27 6 68 12q39 6 69.5 13.5t55.5 17.5q8 14 13 26.5t7 24.5q6 33 8 81t2 112l-2 498q-2 39 -3 139t-5 266q-4 88 -12 109q-4 8 -13 10q-20 14 -69 16q-23 0 -115 13l-4 84l262 6l383 12h45q8 2 15.5 2h13.5t21.5 -1t39.5 -1h76q92 0 193 -27q18 -4 42.5 -13 t53.5 -26q63 -31 104 -75q45 -47 66 -105q10 -29 15 -58.5t5 -62.5q0 -72 -32 -129q-31 -57 -95 -104q-16 -12 -54 -30.5t-97 -47.5q178 -41 268 -145q92 -104 92 -236q0 -72 -28 -162q-23 -66 -72 -116q-66 -72 -141 -109q-78 -35 -205 -59q-70 -12 -199 -11l-199 5 q-63 2 -138 -2.5t-163 -10.5q-25 -2 -93 -4t-181 -6zM537 1419q0 -12 1 -31.5t3 -44.5q2 -51 4 -119.5t0 -158.5v-98v-78q25 -4 52.5 -6t57.5 -2q176 0 267 65q90 66 90 225q0 113 -86 187q-84 76 -258 76q-53 0 -131 -15zM545 457l4 -271q0 -16 10 -43q74 -33 141 -32 q131 0 220 41q82 39 122 112q18 37 28.5 82t10.5 100q0 113 -43 181q-59 94 -141 125q-80 33 -250 32q-37 0 -61.5 -3t-40.5 -7v-143v-174z" />
+<glyph unicode="&#xf033;" horiz-adv-x="1054" d="M0 0l18 84q12 4 32 9t46 11q41 10 71 19.5t50 19.5q29 39 41 103l29 137l57 268l12 64q23 119 41.5 178t18.5 63l30 156l17 64l22 135l9 49v39q-45 23 -148 28q-14 0 -23.5 1.5t-17.5 1.5l21 104l325 -14q31 -2 49.5 -2h26.5q35 0 89 2t132 6q41 4 68.5 6t38.5 2 q-2 -10 -3 -19.5t-3 -19.5q-4 -10 -7.5 -22.5t-7.5 -28.5q-49 -16 -110 -31q-66 -16 -105 -31q-12 -33 -24 -88q-6 -25 -9.5 -45t-5.5 -37q-23 -100 -40 -175.5t-27 -129.5l-64 -311l-39 -158l-43 -235l-14 -45v-10.5t2 -16.5q35 -8 64.5 -13t58.5 -9q4 0 21.5 -2.5 l45.5 -6.5q-2 -18 -3 -32.5t-3 -26.5q-2 -6 -4 -16.5t-6 -22.5q-8 0 -14 -1t-10 -1q-18 -2 -28.5 -2h-14.5h-11.5t-17.5 4q-8 0 -45 4t-105 12l-202 2q-61 0 -181 -12q-39 -4 -63.5 -6t-36.5 -2z" />
+<glyph unicode="&#xf034;" d="M0 1151q14 37 34.5 110.5t45.5 184.5q8 33 13 54.5t9 31.5h58q4 -6 6 -10t4 -9q29 -57 41 -71q16 -4 129 -4q35 0 66.5 1t60.5 1l20 2l113 2l213 -2h289l55 10q10 8 27 53q2 6 4 12.5t6 16.5l43 2h10.5t16.5 -2q2 -39 1 -97.5t1 -138.5v-100v-57q0 -14 -1 -27.5t-3 -23.5 q-20 -8 -37 -11.5t-31 -7.5q-27 51 -53 129q-29 82 -37 92q-12 14 -27 21q-10 4 -60 4h-138h-31t-35 -4q-6 -43 -6 -72l2 -151v-334l2 -359v-147q0 -72 10 -117q8 -4 21.5 -8t34.5 -8q4 0 21 -4t50 -13q27 -10 49 -18q4 -20 4 -33.5v-17.5v-11.5t-2 -17.5h-34q-47 0 -88 2 t-76 6t-95.5 6t-148.5 2q-16 0 -57 -4t-109 -10q-29 -2 -45 -3t-24 -1q0 10 -1.5 16.5t-1.5 10.5l-2 24v10q18 31 80 50q94 27 135 49q4 10 6.5 25.5t4.5 31.5q4 68 6 176.5t0 255.5l-4 428q-2 90 -2 142.5t-4 72.5q0 8 -7 15q-4 6 -12 6q-16 4 -63 4h-127q-90 0 -119 -21 q-41 -29 -121 -153q-23 -35 -35 -35q-23 12 -36 23.5t-19 19.5zM1383 1305.5q-5 13.5 14 33.5l184 185q14 12 33 12q14 0 31 -12l184 -185q18 -20 13 -33.5t-34 -13.5h-118v-1048h118q29 0 34 -13.5t-13 -31.5l-184 -187q-16 -12 -33 -12q-16 0 -31 12l-184 187 q-18 18 -13 31.5t31 13.5h121v1048h-121q-27 0 -32 13.5z" />
+<glyph unicode="&#xf035;" horiz-adv-x="1536" d="M0 233q0 18 12 31l187 185q18 20 31.5 14t13.5 -33v-121h1048v121q0 27 13.5 33t33.5 -14l185 -185q12 -12 12 -31q0 -18 -12 -30l-185 -187q-20 -18 -33.5 -13t-13.5 34v119h-1048v-119q0 -29 -13.5 -34t-31.5 13l-187 187q-12 12 -12 30zM0 1233q14 29 33.5 87 t44.5 146q6 27 11 43.5t9 26.5h56q8 -12 10 -14q27 -47 37 -58q2 0 35.5 -1t77.5 -1h90.5h74.5h123l19 2h108h203h416l53 6q12 10 24 46l4.5 9l6.5 13h39h28v-188v-80v-45q0 -12 -1 -21.5t-3 -19.5q-33 -10 -63 -15q-25 37 -52 103q-27 59 -34 74q-12 10 -27 14q-6 2 -42 3 t-85 1h-103.5h-97.5h-28.5t-34.5 -2q-2 -18 -3 -32.5t-1 -24.5l4 -445l-2 -119q0 -61 12 -92q12 -6 53 -12q4 0 20.5 -4t45.5 -10q14 -4 26.5 -7.5t22.5 -7.5q2 -16 3 -25.5t1 -13.5t-1 -10t-1 -14h-33q-94 0 -157 6q-66 6 -236 6q-14 0 -53 -3t-105 -7q-27 -2 -43 -3 t-24 -1q0 16 -2 20v21v8q20 27 73 39q90 20 132 41q4 8 6 19t4 26q0 18 1 70.5t1 120t-1 142t-2 139t-2 107.5t-1 47q0 8 -6 13q-2 2 -13 6q-14 2 -59 2h-123q-20 0 -62 -1t-85 -2t-78 -4t-41 -7q-41 -25 -117 -123q-20 -29 -33 -29q-23 10 -35 19.5t-18 15.5z" />
+<glyph unicode="&#xf036;" d="M0 78v115q0 31 22.5 53t55.5 22h1689q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM0 500v114q0 33 22.5 55.5t55.5 22.5h1075q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1075 q-33 0 -55.5 22.5t-22.5 55.5zM0 922v114q0 33 22.5 55.5t55.5 22.5h1536q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-1536q-33 0 -55.5 21.5t-22.5 54.5zM0 1343v117q0 31 22.5 53.5t55.5 22.5h921q31 0 53.5 -22.5t22.5 -53.5v-117q0 -31 -22.5 -53 t-53.5 -22h-921q-33 0 -55.5 22.5t-22.5 52.5z" />
+<glyph unicode="&#xf037;" d="M0 78v115q0 31 22.5 53t55.5 22h1689q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM78 922v114q0 33 21.5 55.5t54.5 22.5h1536q33 0 55 -22.5t22 -55.5v-114q0 -33 -22.5 -54.5t-54.5 -21.5h-1536 q-33 0 -54.5 21.5t-21.5 54.5zM307 500v114q0 33 22.5 55.5t55.5 22.5h1075q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1075q-33 0 -55.5 22.5t-22.5 55.5zM385 1343v117q0 31 21.5 53.5t54.5 22.5h921q33 0 55.5 -22.5t22.5 -53.5v-117 q0 -31 -22.5 -53t-55.5 -22h-921q-33 0 -54.5 22.5t-21.5 52.5z" />
+<glyph unicode="&#xf038;" d="M0 78v115q0 31 22.5 53t55.5 22h1689q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM154 922v114q0 33 22.5 55.5t54.5 22.5h1536q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-1536 q-33 0 -55 21.5t-22 54.5zM614 500v114q0 33 22.5 55.5t55.5 22.5h1075q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1075q-33 0 -55.5 22.5t-22.5 55.5zM768 1343v117q0 31 22.5 53.5t55.5 22.5h921q31 0 53.5 -22.5t22.5 -53.5v-117q0 -31 -22.5 -53 t-53.5 -22h-921q-33 0 -55.5 22.5t-22.5 52.5z" />
+<glyph unicode="&#xf039;" d="M0 78v115q0 31 22.5 53t55.5 22h1689q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM0 500v114q0 33 22.5 55.5t55.5 22.5h1689q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1689 q-33 0 -55.5 22.5t-22.5 55.5zM0 922v114q0 33 22.5 55.5t55.5 22.5h1689q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-1689q-33 0 -55.5 21.5t-22.5 54.5zM0 1343v117q0 31 22.5 53.5t55.5 22.5h1689q31 0 53.5 -22.5t22.5 -53.5v-117 q0 -31 -22.5 -53t-53.5 -22h-1689q-33 0 -55.5 22.5t-22.5 52.5z" />
+<glyph unicode="&#xf03a;" d="M0 78v115q0 31 22.5 53t55.5 22h153q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-153q-33 0 -55.5 22.5t-22.5 55.5zM0 500v114q0 33 22.5 55.5t55.5 22.5h153q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-153 q-33 0 -55.5 22.5t-22.5 55.5zM0 922v114q0 33 22.5 55.5t55.5 22.5h153q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-153q-33 0 -55.5 21.5t-22.5 54.5zM0 1343v117q0 31 22.5 53.5t55.5 22.5h153q31 0 53.5 -22.5t22.5 -53.5v-117q0 -31 -22.5 -53 t-53.5 -22h-153q-33 0 -55.5 22.5t-22.5 52.5zM461 78v115q0 31 22.5 53t55.5 22h1228q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-1228q-33 0 -55.5 22.5t-22.5 55.5zM461 500v114q0 33 22.5 55.5t55.5 22.5h1228q31 0 53.5 -22.5t22.5 -55.5v-114 q0 -33 -22.5 -55.5t-53.5 -22.5h-1228q-33 0 -55.5 22.5t-22.5 55.5zM461 922v114q0 33 22.5 55.5t55.5 22.5h1228q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-1228q-33 0 -55.5 21.5t-22.5 54.5zM461 1343v117q0 31 22.5 53.5t55.5 22.5h1228 q31 0 53.5 -22.5t22.5 -53.5v-117q0 -31 -22.5 -53t-53.5 -22h-1228q-33 0 -55.5 22.5t-22.5 52.5z" />
+<glyph unicode="&#xf03b;" d="M0 756v75q0 39 39 39h213v154q0 31 16.5 37t38.5 -17l215 -215q16 -16 17 -36q0 -18 -17 -35l-215 -215q-23 -23 -39 -17t-16 39v152h-213q-39 0 -39 39zM614 39v1458q0 39 39 39h76q39 0 39 -39v-1458q0 -39 -39 -39h-76q-39 0 -39 39zM922 78v115q0 31 22.5 53t54.5 22 h768q31 0 53.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-53.5 -22.5h-768q-33 0 -55 22.5t-22 55.5zM922 500v114q0 33 22.5 55.5t54.5 22.5h615q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-615q-33 0 -55 22.5t-22 55.5zM922 922v114 q0 33 22.5 55.5t54.5 22.5h691q33 0 55 -22.5t22 -55.5v-114q0 -33 -22.5 -54.5t-54.5 -21.5h-691q-33 0 -55 21.5t-22 54.5zM922 1343v117q0 31 22.5 53.5t54.5 22.5h537q33 0 55.5 -22.5t22.5 -53.5v-117q0 -31 -22.5 -53t-55.5 -22h-537q-33 0 -55 22.5t-22 52.5z" />
+<glyph unicode="&#xf03c;" d="M0 78v115q0 31 22.5 53t53.5 22h768q33 0 55.5 -22.5t22.5 -52.5v-115q0 -33 -22.5 -55.5t-55.5 -22.5h-768q-31 0 -53.5 22.5t-22.5 55.5zM0 500v114q0 33 22.5 55.5t53.5 22.5h614q33 0 55.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-55.5 -22.5h-614 q-31 0 -53.5 22.5t-22.5 55.5zM0 922v114q0 33 22.5 55.5t53.5 22.5h692q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-692q-31 0 -53.5 21.5t-22.5 54.5zM0 1343v117q0 31 22.5 53.5t53.5 22.5h538q31 0 53.5 -22.5t22.5 -53.5v-117q0 -31 -22.5 -53 t-53.5 -22h-538q-31 0 -53.5 22.5t-22.5 52.5zM1075 39v1458q0 39 39 39h76q16 0 27.5 -11.5t11.5 -27.5v-1458q0 -16 -11.5 -27.5t-27.5 -11.5h-76q-39 0 -39 39zM1305 743q0 16 14 35l217 215q23 23 38 17t15 -39v-152h215q16 0 27.5 -11t11.5 -28v-75q0 -16 -11 -27.5 t-28 -11.5h-215v-154q0 -31 -15 -38t-38 15l-217 218q-14 18 -14 36z" />
+<glyph unicode="&#xf03d;" d="M0 324v768q0 47 18.5 89t50 72.5t73.5 49t89 18.5h768q47 0 89 -18.5t73 -49t49.5 -72.5t18.5 -89v-240l483 471q23 23 55 23q13 -1 29 -7q47 -20 47 -69v-1127q0 -49 -47 -69q-16 -6 -29 -6q-33 0 -55 22l-483 471v-237q0 -47 -18.5 -89t-49.5 -74t-72.5 -50.5 t-89.5 -18.5h-768q-47 0 -89 18.5t-73.5 50.5t-50 73.5t-18.5 89.5z" />
+<glyph unicode="&#xf03e;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM154 154h1536v1228h-1536v-1228zM307 307v105l277 360l188 -156l354 537l410 -424v-422h-1229zM307 1073q0 66 45 111t111 45q63 0 108 -45 t45 -111q0 -63 -45 -108t-108 -45q-66 0 -111 45t-45 108z" />
+<glyph unicode="&#xf040;" horiz-adv-x="1536" d="M0 0l137 418l867 866l280 -280l-866 -867zM287 407.5q0 -12.5 10 -22.5q8 -8 22 -8q12 0 21 8l690 690q20 20 0 43q-10 10 -22.5 10t-20.5 -10l-690 -688q-10 -10 -10 -22.5zM1102 1382l119 119q35 35 84 35t84 -35l57 -55l55 -57q35 -35 35 -84.5t-35 -83.5l-119 -119z " />
+<glyph unicode="&#xf041;" horiz-adv-x="1128" d="M0 1001q0 117 44 220.5t121 180.5t180.5 121t219.5 44q117 0 219.5 -44t179 -121t120.5 -180.5t44 -220.5q0 -84 -24.5 -159.5t-65.5 -143.5l-379 -661q-41 -68 -95 -68t-93 68l-381 663q-41 68 -65.5 143t-24.5 158zM285 1001q0 -57 21.5 -108t60.5 -89t89 -59.5 t109 -21.5q57 0 108.5 21.5t89.5 59.5t59.5 89t21.5 108t-21.5 108.5t-59.5 90.5t-89 60.5t-109 21.5q-59 0 -109 -21.5t-89 -60.5t-60.5 -90t-21.5 -109z" />
+<glyph unicode="&#xf042;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44v1118q-117 0 -218.5 -44 t-177 -120t-119.5 -177t-44 -218z" />
+<glyph unicode="&#xf043;" horiz-adv-x="1130" d="M0 535q0 86 23.5 161.5t66.5 141.5q20 33 69.5 99.5t108 154.5t113.5 193.5t90 217.5q10 35 37 51.5t57 12.5q31 4 57.5 -12.5t36.5 -51.5q33 -113 89.5 -218t115 -193t107.5 -154.5t69 -99.5q43 -66 66.5 -141.5t23.5 -161.5q0 -117 -44 -220.5t-120.5 -180.5t-180 -121 t-220.5 -44t-220 44t-180 121t-121 180.5t-44 220.5zM248 410q0 -59 41 -100.5t100 -41.5t100 41t41 101q0 43 -22 75q-6 8 -18.5 24.5t-26.5 39t-28.5 48.5t-22.5 54q-4 20 -23 17q-18 4 -24 -17q-8 -29 -21.5 -54.5t-28 -48t-27 -38.5t-18.5 -25q-23 -33 -22 -75z" />
+<glyph unicode="&#xf044;" d="M0 307v922q0 63 24.5 119.5t65.5 97.5t97.5 65.5t119.5 24.5h1075q4 0 10.5 -1t10.5 -1l-191 -191h-905q-47 0 -80.5 -33.5t-33.5 -80.5v-922q0 -47 33.5 -80.5t80.5 -33.5h1075q47 0 81 33.5t34 80.5v445l193 192v-637q0 -63 -25 -118.5t-67 -97.5t-97 -66.5t-119 -24.5 h-1075q-63 0 -119.5 24.5t-97.5 66.5t-65.5 97.5t-24.5 118.5zM631 324l108 329l652 652l221 -222l-651 -651zM866 629q6 -8 17 -8q10 0 16 8l512 510q18 18 0 35q-18 16 -35 0l-510 -510q-18 -18 0 -35zM1501 1415l92 94q29 29 68 29t65 -29l46 -45l45 -45 q27 -29 27.5 -66.5t-27.5 -66.5l-95 -92z" />
+<glyph unicode="&#xf045;" d="M0 307v922q0 63 24.5 119.5t65.5 97.5t97.5 65.5t119.5 24.5h836q-6 -31 -6 -63v-52q-164 -20 -310 -78h-520q-47 0 -80.5 -33.5t-33.5 -80.5v-922q0 -47 33.5 -80.5t80.5 -33.5h1075q47 0 81 33.5t34 80.5v111q16 10 31.5 21.5t32.5 27.5l129 127v-287q0 -63 -25 -118.5 t-67 -97.5t-97 -66.5t-119 -24.5h-1075q-63 0 -119.5 24.5t-97.5 66.5t-65.5 97.5t-24.5 118.5zM385 388.5v37.5q0 166 56.5 312.5t173 256t293.5 173t419 65.5v231q0 57 28.5 69.5t69.5 -28.5l392 -391q27 -25 26 -65q0 -39 -26 -64l-392 -391q-41 -41 -69.5 -28.5 t-28.5 69.5v260q-207 0 -364.5 -43t-266 -116.5t-170 -174t-77.5 -215.5q-4 -27 -31 -27q-25 0 -29 27q-4 23 -4 42.5z" />
+<glyph unicode="&#xf046;" d="M0 307v922q0 63 24.5 119.5t65.5 97.5t97.5 65.5t119.5 24.5h1075q27 0 52 -6l-187 -187h-940q-47 0 -80.5 -33.5t-33.5 -80.5v-922q0 -47 33.5 -80.5t80.5 -33.5h1075q47 0 81 33.5t34 80.5v326l193 192v-518q0 -63 -25 -118.5t-67 -97.5t-97 -66.5t-119 -24.5h-1075 q-63 0 -119.5 24.5t-97.5 66.5t-65.5 97.5t-24.5 118.5zM385 966.5q0 32.5 23 55.5l98 98q23 23 55.5 23t54.5 -23l340 -340l654 656q23 23 56.5 22.5t55.5 -22.5l99 -99q23 -23 22.5 -55.5t-22.5 -54.5l-711 -711l-98 -98q-23 -23 -55.5 -23t-55.5 23l-100 98l-393 395 q-23 23 -23 55.5z" />
+<glyph unicode="&#xf047;" horiz-adv-x="1597" d="M0 768q0 25 18 43l256 256q27 27 45.5 19.5t18.5 -46.5v-170h360v359h-172q-37 0 -45 18.5t19 44.5l256 256q18 18 43 19q25 0 43 -19l256 -256q27 -27 19.5 -45t-46.5 -18h-172v-359h361v170q0 39 18 46.5t45 -19.5l256 -256q18 -18 18 -43t-18 -43l-256 -256 q-27 -27 -45 -19.5t-18 46.5v176h-361v-365h172q39 0 47 -18.5t-20 -44.5l-256 -256q-18 -18 -43 -19q-25 0 -43 19l-256 256q-27 27 -20 45t46 18h172v365h-360v-176q0 -39 -18.5 -46.5t-45.5 19.5l-256 256q-18 18 -18 43z" />
+<glyph unicode="&#xf048;" horiz-adv-x="1075" d="M0 76q0 -31 22.5 -53.5t53.5 -22.5h153q33 0 55.5 22.5t22.5 53.5v1382q0 33 -22.5 55.5t-55.5 22.5h-153q-31 0 -53.5 -22.5t-22.5 -55.5v-1382zM307.5 768q-0.5 27 16.5 43l653 707q14 18 41 18q6 0 22 -4q35 -18 35 -59v-1412q0 -41 -35 -57q-39 -14 -63 14l-653 705 q-16 18 -16.5 45z" />
+<glyph unicode="&#xf049;" d="M0 76q0 -31 22.5 -53.5t53.5 -22.5h153q33 0 55.5 22.5t22.5 53.5v1382q0 33 -22.5 55.5t-55.5 22.5h-153q-31 0 -53.5 -22.5t-22.5 -55.5v-1382zM307.5 768q-0.5 27 16.5 43l653 707q14 18 41 18q6 0 22 -4q35 -18 35 -59v-1412q0 -41 -35 -57q-39 -14 -63 14l-653 705 q-16 18 -16.5 45zM1075.5 768q-0.5 27 16.5 43l653 707q14 18 41 18q6 0 22 -4q35 -18 35 -59v-1412q0 -41 -35 -57q-39 -14 -63 14l-653 705q-16 18 -16.5 45z" />
+<glyph unicode="&#xf04a;" horiz-adv-x="1536" d="M0 767q0 26 16 44l654 707q14 18 41 18q10 0 22 -6q35 -14 35 -57v-1412q0 -41 -35 -57q-37 -16 -63 14l-654 705q-16 18 -16 44zM768 767q0 26 16 44l654 707q14 18 41 18q10 0 22 -6q35 -14 35 -57v-1412q0 -41 -35 -57q-37 -16 -63 14l-654 705q-16 18 -16 44z" />
+<glyph unicode="&#xf04b;" horiz-adv-x="1349" d="M0 70v1396q0 39 35 60q37 23 69 0l1211 -697q35 -25 35 -61q0 -37 -35 -61l-1211 -697q-16 -10 -34 -10t-35 10q-35 20 -35 60z" />
+<glyph unicode="&#xf04c;" horiz-adv-x="1536" d="M0 70v1396q0 29 20.5 49.5t49.5 20.5h489q29 0 49.5 -20.5t20.5 -49.5v-1396q0 -29 -20.5 -49.5t-49.5 -20.5h-489q-29 0 -49.5 20.5t-20.5 49.5zM907 70v1396q0 29 20.5 49.5t49.5 20.5h489q29 0 49.5 -20.5t20.5 -49.5v-1396q0 -29 -20.5 -49.5t-49.5 -20.5h-489 q-29 0 -49.5 20.5t-20.5 49.5z" />
+<glyph unicode="&#xf04d;" horiz-adv-x="1536" d="M0 70v1396q0 29 20.5 49.5t49.5 20.5h1396q29 0 49.5 -20.5t20.5 -49.5v-1396q0 -29 -20.5 -49.5t-49.5 -20.5h-1396q-29 0 -49.5 20.5t-20.5 49.5z" />
+<glyph unicode="&#xf04e;" horiz-adv-x="1536" d="M0 61v1414q0 39 35 57q39 14 63 -14l654 -705q16 -18 16 -45t-16 -45l-654 -705q-16 -18 -41 -18q-6 0 -22 4q-35 16 -35 57zM768 61v1414q0 39 35 57q39 14 63 -14l654 -705q16 -18 16 -45t-16 -45l-654 -705q-16 -18 -41 -18q-6 0 -22 4q-35 16 -35 57z" />
+<glyph unicode="&#xf050;" d="M0 61v1414q0 39 35 57q39 14 63 -14l654 -705q16 -18 16 -45t-16 -45l-654 -705q-16 -18 -41 -18q-6 0 -22 4q-35 16 -35 57zM768 61v1414q0 39 35 57q39 14 63 -14l654 -705q16 -18 16 -45t-16 -45l-654 -705q-16 -18 -41 -18q-6 0 -22 4q-35 16 -35 57zM1536 76 q0 -31 22.5 -53.5t53.5 -22.5h153q33 0 55.5 22.5t22.5 53.5v1382q0 33 -22.5 55.5t-55.5 22.5h-153q-31 0 -53.5 -22.5t-22.5 -55.5v-1382z" />
+<glyph unicode="&#xf051;" horiz-adv-x="1075" d="M0 61v1414q0 39 35 57q39 14 63 -14l654 -705q16 -18 16 -45t-16 -45l-654 -705q-16 -18 -41 -18q-6 0 -22 4q-35 16 -35 57zM768 76q0 -31 22.5 -53.5t53.5 -22.5h153q33 0 55.5 22.5t22.5 53.5v1382q0 33 -22.5 55.5t-55.5 22.5h-153q-31 0 -53.5 -22.5t-22.5 -55.5 v-1382z" />
+<glyph unicode="&#xf052;" horiz-adv-x="1536" d="M0 70v198q0 29 20.5 49.5t49.5 20.5h1396q29 0 49.5 -20.5t20.5 -49.5v-198q0 -29 -20.5 -49.5t-49.5 -20.5h-1396q-29 0 -49.5 20.5t-20.5 49.5zM6 594q-18 43 14 76l699 698q20 20 49 20.5t49 -20.5l699 -698q33 -33 14 -76q-16 -43 -64 -43h-1396q-47 0 -64 43z" />
+<glyph unicode="&#xf053;" horiz-adv-x="964" d="M0 765q0 38 29 66l671 674q29 29 68 29t68 -29l100 -100q29 -29 29 -68t-29 -67l-508 -510l508 -500q29 -29 29 -66.5t-29 -66.5l-100 -102q-29 -29 -68 -29t-68 29l-671 673q-29 29 -29 67z" />
+<glyph unicode="&#xf054;" horiz-adv-x="964" d="M0 194.5q0 38.5 29 67.5l508 508l-508 502q-29 29 -29 66.5t29 66.5l100 102q29 29 68 29t67 -29l672 -673q29 -29 29 -68t-29 -68l-672 -671q-29 -29 -67.5 -29t-67.5 29l-100 100q-29 29 -29 67.5z" />
+<glyph unicode="&#xf055;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM338 688q0 -33 33 -33h313v-344q0 -33 33 -32h164q33 0 32 32v344h314 q12 0 22.5 9.5t10.5 23.5v158q0 14 -10.5 23.5t-22.5 9.5h-314v346q0 33 -32 32h-164q-33 0 -33 -32v-346h-313q-33 0 -33 -33v-158z" />
+<glyph unicode="&#xf056;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM338 688q0 -33 33 -33h856q12 0 22.5 9.5t10.5 23.5v158q0 14 -10.5 23.5 t-22.5 9.5h-856q-33 0 -33 -33v-158z" />
+<glyph unicode="&#xf057;" horiz-adv-x="1597" d="M0 770q0 154 58.5 301.5t174.5 263.5q117 117 264.5 175.5t301 58.5t301 -58.5t264.5 -175.5t175 -264t58 -301t-58 -301t-175 -264t-264.5 -175.5t-301 -58.5t-301 58.5t-264.5 175.5t-175 264t-58 301zM385 505q0 -13 10 -24l115 -116q10 -10 23.5 -10.5t23.5 10.5 l244 243l219 -221q10 -10 23.5 -10t23.5 10l113 113q23 23 0 47l-222 219l246 246q23 23 0 47l-117 115q-25 25 -47 0l-243 -244l-222 221q-10 10 -23 10t-24 -10l-110 -113q-25 -23 0 -47l219 -219l-242 -244q-10 -10 -10 -23z" />
+<glyph unicode="&#xf058;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 718q0 -20 14 -34l319 -319q14 -14 38 -24.5t44 -10.5h56q20 0 43.5 10 t38.5 25l550 550q14 14 14.5 34t-14.5 34l-104 107q-16 14 -35.5 14t-34.5 -14l-452 -453q-14 -14 -33.5 -14t-34.5 14l-221 221q-14 14 -33.5 14t-36.5 -14l-104 -106q-14 -14 -14 -34z" />
+<glyph unicode="&#xf059;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM532 1100l95 -115q4 -8 20 -12q12 0 23 6l10 8t27.5 17.5t39 16.5t46.5 7 q41 0 69.5 -22.5t28.5 -57.5q0 -37 -24.5 -64.5t-61.5 -60.5q-23 -18 -46.5 -40.5t-43 -51.5t-31.5 -63.5t-12 -79.5v-64q0 -12 9 -21t21 -9h164q12 0 20.5 9t8.5 21v51q0 39 25.5 66.5t62.5 60.5q25 20 49.5 46t46 57t34.5 69.5t13 90.5q0 68 -27.5 121t-73.5 87.5 t-103.5 53t-114.5 18.5q-63 0 -113.5 -16.5t-85.5 -35.5t-53 -35.5t-20 -18.5q-16 -16 -3 -39zM672 252q0 -12 9 -21.5t21 -9.5h164q12 0 20.5 9.5t8.5 21.5v156q0 12 -8 21t-21 9h-164q-12 0 -21 -9t-9 -21v-156z" />
+<glyph unicode="&#xf05a;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM573 858q0 -29 29 -29h86v-409h-78q-12 0 -21 -8.5t-9 -20.5v-139q0 -12 9 -21.5 t21 -9.5h402q12 0 20 9.5t8 21.5v139q0 29 -28 29h-78v577q0 12 -8 21.5t-21 9.5h-303q-12 0 -20.5 -9t-8.5 -22v-139zM686 1151q0 -12 9.5 -21.5t21.5 -9.5h188q12 0 20.5 9.5t8.5 21.5v166q0 29 -29 29h-188q-12 0 -21.5 -8.5t-9.5 -20.5v-166z" />
+<glyph unicode="&#xf05b;" horiz-adv-x="1536" d="M0 692v154q0 16 11.5 26.5t27.5 10.5h164q18 84 59 158.5t99.5 133t133 99.5t158.5 59v164q0 39 39 39h154q16 0 26.5 -11.5t10.5 -27.5v-164q84 -18 158.5 -59t133 -99.5t99.5 -133t59 -158.5h164q16 0 27.5 -10.5t11.5 -26.5v-154q0 -39 -39 -39h-164 q-18 -84 -59 -158.5t-99.5 -133t-133 -99.5t-158.5 -59v-164q0 -16 -10.5 -27.5t-26.5 -11.5h-154q-39 0 -39 39v164q-84 18 -158.5 59t-133 99.5t-99.5 133t-59 158.5h-164q-39 0 -39 39zM365 653q29 -106 105.5 -183t182.5 -105v174q0 16 11.5 26t27.5 10h154 q16 0 26.5 -10t10.5 -26v-174q106 29 183 105.5t105 182.5h-172q-39 0 -38 39v154q0 16 11 26.5t27 10.5h172q-29 106 -105.5 183t-182.5 105v-172q0 -16 -10.5 -27t-26.5 -11h-154q-39 0 -39 38v172q-106 -29 -183 -105.5t-105 -182.5h174q16 0 26 -10.5t10 -26.5v-154 q0 -16 -10 -27.5t-26 -11.5h-174z" />
+<glyph unicode="&#xf05c;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44t218 44t177 120t120 177 t44 218t-44 218t-120 177t-177.5 120t-217.5 44q-117 0 -218.5 -44t-177 -120t-119.5 -177t-44 -218zM451 573.5q0 16.5 12 28.5l166 166l-166 166q-12 12 -12 28.5t12 28.5l112 113q29 29 58 0l166 -166l166 166q29 29 57 0l113 -113q29 -29 0 -57l-166 -166l166 -166 q29 -29 0 -57l-113 -113q-12 -12 -28.5 -12t-28.5 12l-166 166l-166 -166q-12 -12 -28.5 -12t-29.5 12l-112 113q-12 12 -12 28.5z" />
+<glyph unicode="&#xf05d;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -117 44 -218t119.5 -177t177 -120t218.5 -44t218 44t177 120t120 177 t44 218t-44 218t-120 177t-177.5 120t-217.5 44q-117 0 -218.5 -44t-177 -120t-119.5 -177t-44 -218zM332 717.5q0 17.5 10 27.5l115 115q10 10 27.5 10t27.5 -10l178 -180q29 -25 58 0l337 340q10 10 27.5 10t28.5 -10l114 -115q10 -10 10.5 -27.5t-10.5 -27.5l-409 -410 q-12 -12 -32.5 -20t-37.5 -8h-114q-16 0 -37 8t-33 20l-250 250q-10 10 -10 27.5z" />
+<glyph unicode="&#xf05e;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -84 23.5 -160t66.5 -141l770 770q-66 43 -141.5 66.5t-159.5 23.5 q-117 0 -218.5 -44t-177 -120t-119.5 -177t-44 -218zM498 297q66 -41 141.5 -64.5t159.5 -23.5q117 0 218 44t177 120t120 177t44 218q0 84 -23.5 160t-64.5 141z" />
+<glyph unicode="&#xf060;" horiz-adv-x="1536" d="M0 768q0 39 29 68l671 673q29 29 68 29t68 -29l100 -100q29 -29 29 -67.5t-29 -67.5l-338 -338h842q41 0 68.5 -27.5t27.5 -68.5v-144q0 -39 -27.5 -66.5t-66.5 -27.5h-844l338 -338q29 -29 29 -67.5t-29 -67.5l-100 -100q-29 -29 -68 -29t-68 29l-671 671q-29 29 -29 68 z" />
+<glyph unicode="&#xf061;" horiz-adv-x="1536" d="M0 698v144q0 39 27.5 66.5t66.5 27.5h844l-338 338q-29 29 -29 67.5t29 67.5l100 100q29 29 68 29t68 -29l671 -673q29 -29 29 -67t-29 -67l-671 -673q-29 -29 -68 -29t-68 29l-100 100q-29 29 -29 68t29 67l338 338h-844q-39 0 -66.5 27.5t-27.5 68.5z" />
+<glyph unicode="&#xf062;" horiz-adv-x="1536" d="M-1 768q-1 39 28 68l673 671q29 29 68 29t68 -29l671 -671q29 -29 29 -68t-29 -68l-100 -100q-29 -29 -66.5 -29t-66.5 29l-340 338v-844q0 -39 -27.5 -66.5t-66.5 -27.5h-144q-41 0 -67.5 27.5t-26.5 66.5v844l-338 -338q-29 -29 -67.5 -29t-67.5 29l-100 100 q-29 29 -30 68z" />
+<glyph unicode="&#xf063;" horiz-adv-x="1536" d="M0 766q0 39 29 68l100 100q29 29 68 29t67 -29l338 -338v844q0 39 27.5 66.5t66.5 27.5h144q41 0 67.5 -27.5t26.5 -66.5v-844l340 338q29 29 66.5 29t66.5 -29l102 -100q29 -29 29 -68t-29 -68l-673 -671q-29 -29 -68 -29t-68 29l-671 671q-29 29 -29 68z" />
+<glyph unicode="&#xf064;" d="M0 135q0 209 71.5 393.5t218 322.5t371 219t531.5 83v293q0 72 36 87t89 -36l491 -493q35 -33 35 -82q0 -47 -35 -82l-491 -494q-51 -51 -88 -35.5t-37 86.5v330q-262 -2 -461 -56.5t-336 -147.5t-215 -219t-98 -271q-4 -33 -37 -33h-2q-33 0 -37 33q-6 51 -6 102z" />
+<glyph unicode="&#xf065;" horiz-adv-x="1536" d="M0 86v522q0 53 26.5 64.5t65.5 -25.5l166 -166l274 275q12 12 31 12t33 -12l160 -160q12 -14 12 -32.5t-12 -31.5l-275 -274l166 -166q39 -39 27 -65.5t-66 -26.5h-520q-37 0 -61 25q-27 27 -27 61zM768 972.5q0 18.5 12 31.5l275 274l-166 166q-39 39 -27 65.5t66 26.5 h520q37 0 61 -25q27 -27 27 -61v-522q0 -53 -26.5 -64.5t-65.5 25.5l-166 166l-274 -273q-12 -14 -31 -14t-33 14l-160 158q-12 14 -12 32.5z" />
+<glyph unicode="&#xf066;" horiz-adv-x="1536" d="M0 202.5q0 18.5 12 33.5l275 272l-166 166q-39 39 -27 65.5t66 26.5h520q38 0 61 -25q27 -27 27 -61v-522q0 -53 -26.5 -64.5t-65.5 27.5l-166 166l-274 -275q-12 -14 -31 -14t-33 14l-160 160q-12 12 -12 30.5zM768 854v522q0 53 26.5 64.5t65.5 -27.5l166 -166l274 275 q12 14 31 14t33 -14l160 -160q12 -12 12 -30.5t-12 -33.5l-275 -272l166 -166q39 -39 27 -65.5t-66 -26.5h-520q-41 0 -61 25q-27 27 -27 61z" />
+<glyph unicode="&#xf067;" horiz-adv-x="1536" d="M0 696v144q0 39 27.5 66.5t66.5 27.5h508v506q0 41 26.5 68.5t67.5 27.5h144q39 0 66.5 -27.5t27.5 -66.5v-508h508q39 0 66.5 -27.5t27.5 -66.5v-144q0 -39 -27.5 -66.5t-66.5 -27.5h-508v-506q0 -41 -27.5 -68.5t-66.5 -27.5h-144q-39 0 -66.5 27.5t-27.5 66.5v508 h-506q-41 0 -68.5 26.5t-27.5 67.5z" />
+<glyph unicode="&#xf068;" horiz-adv-x="1536" d="M0 696v144q0 39 27.5 66.5t66.5 27.5h1348q39 0 66.5 -27.5t27.5 -66.5v-144q0 -39 -27.5 -66.5t-66.5 -27.5h-1346q-41 0 -68.5 26.5t-27.5 67.5z" />
+<glyph unicode="&#xf069;" horiz-adv-x="1427" d="M2 1018q-10 37 10 72l72 124q20 35 58 44.5t73 -9.5l332 -192v383q0 41 27.5 68.5t68.5 27.5h141q41 0 69 -27.5t28 -66.5v-385l331 192q35 18 73 9t58 -44l70 -124q20 -35 11 -72t-44 -57l-333 -193l333 -193q35 -20 44.5 -57t-9.5 -72l-72 -124q-20 -35 -58 -44.5 t-73 9.5l-331 192v-383q0 -41 -28 -68.5t-69 -27.5h-141q-41 0 -68.5 27.5t-27.5 66.5v385l-332 -192q-35 -20 -73 -10t-58 45l-72 124q-18 35 -9 72t44 57l334 193l-334 193q-35 20 -45 57z" />
+<glyph unicode="&#xf06a;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM672 1274l14 -739q4 -29 31 -29h162q12 0 21 8t9 21l17 739q0 10 -8 22q-8 8 -23 9 h-193q-14 0 -22 -9q-8 -12 -8 -22zM680 236q0 -12 8 -21.5t21 -9.5h180q12 0 21.5 9t9.5 22v174q0 12 -9.5 21t-21.5 9h-180q-12 0 -20.5 -9t-8.5 -21v-174z" />
+<glyph unicode="&#xf06b;" horiz-adv-x="1880" d="M0 588v391q0 16 11.5 27.5t27.5 11.5h539q-57 0 -107.5 21.5t-87.5 58.5t-58.5 87t-21.5 107t21.5 107.5t58.5 87.5t87 58.5t108 21.5q61 0 115.5 -24.5t88.5 -69.5l158 -203l158 203q35 45 89 69.5t116 24.5q57 0 107 -21.5t87 -58.5t58.5 -87t21.5 -108 q0 -57 -21.5 -107t-58.5 -87t-87 -58.5t-107 -21.5h538q16 0 27.5 -11.5t11.5 -27.5v-391q0 -16 -11 -27.5t-28 -11.5h-117v-432q0 -47 -34.5 -82t-83.5 -35h-1332q-49 0 -82.5 35t-33.5 82v432h-119q-16 0 -27.5 11t-11.5 28zM461 1292q0 -49 33.5 -82.5t83.5 -33.5h237 l-151 196q-10 10 -32 24.5t-54 14.5q-49 0 -83 -35t-34 -84zM743 221q0 -33 24 -56.5t56 -23.5h234q33 0 56.5 23.5t23.5 56.5v797h-394v-797zM1065 1176h238q49 0 82.5 33.5t33.5 82.5t-33.5 84t-82.5 35q-33 0 -54.5 -14.5t-31.5 -24.5z" />
+<glyph unicode="&#xf06c;" horiz-adv-x="1916" d="M6 135q20 53 56 89t71 65q29 23 50.5 43t27.5 43q2 6 0 12t-10 25q-6 12 -11.5 27.5t-9.5 35.5q-25 160 13 295t120 242.5t195 185.5t235 121q82 29 179.5 34t203.5 7q61 0 127 2t127.5 11t113.5 28.5t85 54.5q20 20 38.5 41t38 36t43 24.5t58.5 9.5q23 0 42.5 -11.5 t29.5 -31.5q66 -133 83 -281.5t-18 -322.5q-90 -487 -579 -740q-231 -123 -467 -123q-154 0 -307 54q-23 8 -45.5 20t-44.5 25q-29 16 -57.5 30.5t-49.5 14.5q-10 -2 -23.5 -17.5t-27.5 -35t-26.5 -41t-20.5 -33.5q-14 -23 -26.5 -41.5t-22.5 -32.5q-25 -31 -64 -31h-4 q-29 2 -49.5 12.5t-33.5 24.5t-20.5 28.5t-9.5 22.5q-27 37 -10 78zM401 507.5q2 -32.5 29 -54.5q20 -18 51 -19q37 0 62 27q90 102 181 175t191.5 117t212 62t242.5 14q33 -4 57.5 19.5t26.5 56.5q2 35 -20.5 58.5t-57.5 25.5q-147 6 -277 -16.5t-247 -73.5t-223.5 -133 t-206.5 -199q-23 -27 -21 -59.5z" />
+<glyph unicode="&#xf06d;" horiz-adv-x="1445" d="M0 442q0 123 63.5 254t174.5 238q10 16 33.5 13t31.5 -21q4 -16 0 -29q-8 -35 -14 -84t-4 -101.5t13 -101.5t38 -84q31 -37 78 -49q-49 154 -40 293t49 259t101.5 217t118.5 167t98 106.5t43 39.5q25 18 47 0q10 -8 13.5 -21.5t-0.5 -24.5q0 -2 -15.5 -42.5t-21.5 -102 t7 -134.5t71 -136q37 -43 67.5 -85t52 -93.5t34 -120t12.5 -162.5q0 -33 -31 -39q-12 -2 -24.5 4t-16.5 19q-14 31 -42 49t-63 18q-47 0 -79.5 -33.5t-32.5 -81.5q0 -121 156 -120q98 0 153 63q37 43 53.5 101.5t20.5 114.5t2 102.5t-4 62.5q-6 12 0 29q8 18 31.5 21 t35.5 -13q111 -106 173.5 -237.5t62.5 -254.5q0 -109 -51.5 -195.5t-145.5 -148t-228 -95.5t-298 -34t-298 34t-228.5 95.5t-145.5 148.5t-51 195z" />
+<glyph unicode="&#xf06e;" d="M0 722q0 44 25 83q78 125 178 224t216 168t242.5 104.5t260.5 35.5q135 0 262 -35.5t241.5 -103.5t215 -167t180.5 -226q23 -39 22.5 -83t-22.5 -81q-80 -127 -180.5 -226.5t-215 -167t-241.5 -103t-262 -35.5q-133 0 -260 35.5t-243 104t-216.5 168t-177.5 224.5 q-25 37 -25 81zM154 723q66 -104 149.5 -190.5t182 -145.5t208 -92t228.5 -33t228.5 33t207.5 92t182 145t150 191q-80 129 -187.5 226.5t-236.5 156.5q51 -59 79.5 -133t28.5 -160q0 -96 -35.5 -179t-99 -146.5t-147.5 -99.5t-179 -36q-96 0 -179 36t-146.5 99.5t-99 146.5 t-35.5 179q0 78 25.5 148.5t68.5 128.5q-117 -59 -217.5 -152.5t-175.5 -214.5zM614 813q0 -23 16.5 -40t41.5 -17t41 17.5t16 39.5q0 78 53.5 131t130.5 53q25 0 41.5 17.5t16.5 40.5q0 25 -16.5 41t-41.5 16q-61 0 -116.5 -23.5t-95 -63.5t-63.5 -95.5t-24 -116.5z" />
+<glyph unicode="&#xf070;" d="M0 767q0 44 25 83q78 125 178 224.5t216 168t242.5 104t260.5 35.5q53 0 105 -7t103 -17l89 158q8 14 24 18q12 6 29 -2l133 -76q14 -8 19.5 -23.5t-3.5 -29.5l-774 -1383q-6 -14 -22 -18q-4 -2 -11 -2q-6 0 -18 4l-135 76q-14 8 -18.5 23.5t3.5 29.5l66 115 q-145 68 -269 178.5t-218 259.5q-25 37 -25 81zM154 768q82 -131 191.5 -229.5t240.5 -157.5l57 104q-86 63 -138 159.5t-52 213.5q0 78 25.5 148.5t68.5 130.5q-117 -61 -217.5 -153.5t-175.5 -215.5zM614 858q0 -23 16.5 -40t41.5 -17t41 17.5t16 39.5q0 78 53.5 131 t130.5 53q25 0 41.5 17.5t16.5 40.5q0 25 -16.5 41t-41.5 16q-61 0 -116.5 -23.5t-95 -63.5t-63.5 -95.5t-24 -116.5zM928 154l88 159q209 25 382 145t292 310q-109 170 -263 283l76 137q92 -66 172 -150t146 -188q23 -39 22.5 -83t-22.5 -81q-160 -254 -392.5 -392 t-500.5 -140zM1081 430l285 510q4 -20 6 -39.5t2 -42.5q0 -74 -21.5 -140.5t-60.5 -121.5t-93 -98t-118 -68z" />
+<glyph unicode="&#xf071;" horiz-adv-x="1775" d="M0 92q0 20 6 39t17 35l768 1331q16 27 39.5 48.5t56.5 21.5t56.5 -21.5t39.5 -48.5l770 -1331q10 -16 16.5 -34.5t6.5 -39.5q0 -49 -38 -70.5t-81 -21.5h-1538q-43 0 -81 21.5t-38 70.5zM770 1114l12 -633q0 -14 10.5 -24.5t24.5 -10.5h139q14 0 24.5 10.5t10.5 24.5 l15 633q0 14 -10.5 24.5t-24.5 10.5h-166q-16 0 -25.5 -10.5t-9.5 -24.5zM776 168q0 -16 10.5 -25.5t24.5 -9.5h154q35 0 34 35v147q0 16 -9 26.5t-25 10.5h-154q-14 0 -24.5 -10t-10.5 -27v-147z" />
+<glyph unicode="&#xf072;" horiz-adv-x="1597" d="M0 541v4q0 31 23 57l30 29q20 25 56 24q8 0 10 -2l280 -32q39 63 93.5 134.5t125.5 151.5l-583 457q-31 25 -31 59v4q0 31 23 58l57 57q27 23 57 23h13.5t13.5 -4l803 -293l151 149q70 70 161 110t167 40q72 0 109 -37q20 -18 28 -46t8 -63q0 -76 -38.5 -167t-110.5 -160 l-150 -152l293 -803q6 -12 6 -26q0 -33 -24 -58l-58 -57q-23 -25 -57 -25h-4q-35 4 -59 31l-455 586q-82 -72 -153.5 -126t-135.5 -93l35 -281v-10q0 -33 -22 -55l-31 -31q-23 -23 -58 -23h-4q-39 4 -59 31l-205 272l-274 207q-29 25 -31 60z" />
+<glyph unicode="&#xf073;" horiz-adv-x="1566" d="M0 117v1147q0 47 35 81.5t82 34.5h39v13q0 31 10 62.5t32.5 56t59.5 40t90 15.5t90 -15.5t59.5 -40t33 -56.5t10.5 -62v-13h49v13q0 31 10 62.5t32.5 56t59.5 40t90 15.5t90 -15.5t60.5 -40t34 -56.5t10.5 -62v-13h49v13q0 31 10.5 62.5t33 56t59 40t90.5 15.5 q53 0 90 -15.5t59.5 -40t32.5 -56.5t10 -62v-13h39q47 0 82 -34.5t35 -81.5v-1147q0 -47 -35 -82t-82 -35h-1333q-47 0 -82 35t-35 82zM158 158h282v250h-282v-250zM158 446h282v252h-282v-252zM158 737h282v252h-282v-252zM272 1165q0 -57 76 -57t76 57v228q0 57 -76 57 t-76 -57v-228zM479 158h285v250h-285v-250zM479 446h285v252h-285v-252zM479 737h285v252h-285v-252zM709 1165q0 -31 16 -44t57 -13t58.5 13.5t17.5 43.5v228q0 29 -17.5 43t-58.5 14t-57 -14.5t-16 -42.5v-228zM803 158h284v250h-284v-250zM803 446h284v252h-284v-252z M803 737h284v252h-284v-252zM1126 158h283v250h-283v-250zM1126 446h283v252h-283v-252zM1126 737h283v252h-283v-252zM1143 1165q0 -57 76 -57t75 57v228q0 57 -75 57q-76 0 -76 -57v-228z" />
+<glyph unicode="&#xf074;" d="M0 252v154q0 16 11.5 27t27.5 11h219q51 0 99.5 31t93.5 83t90 119.5t90 139.5q55 88 114.5 175t127 156t147.5 110.5t180 41.5h203v185q0 41 24.5 49t59.5 -21l334 -278q23 -18 22 -45q0 -29 -22 -47l-334 -277q-35 -29 -59.5 -20.5t-24.5 49.5v174h-203 q-53 0 -100 -31.5t-93 -84t-91.5 -120t-90.5 -139.5q-55 -88 -113.5 -174t-126 -154.5t-148.5 -110.5t-179 -42h-219q-16 0 -27.5 11.5t-11.5 27.5zM0 1108v154q0 39 39 38h219q68 0 127 -20t111.5 -56t97.5 -84t88 -104q-61 -90 -117 -178q-4 -8 -9 -14t-9 -15 q-70 102 -139.5 172t-149.5 70h-219q-16 0 -27.5 10.5t-11.5 26.5zM778 481q29 41 56.5 85t56.5 87q4 10 10 17.5t10 17.5q70 -102 139.5 -170.5t149.5 -68.5h203v190q0 41 24.5 49t59.5 -20l334 -277q23 -18 22 -47q0 -27 -22 -45l-334 -279q-35 -29 -59.5 -20.5 t-24.5 49.5v168h-203q-68 0 -127 20.5t-110.5 56.5t-97.5 84t-87 103z" />
+<glyph unicode="&#xf075;" horiz-adv-x="1916" d="M0 866q0 145 76 272.5t206 222.5t303.5 150.5t372.5 55.5t373 -55.5t304 -150.5t206 -222t76 -273q0 -145 -76 -272t-206 -222.5t-304 -150.5t-373 -55q-92 0 -180 12q-176 -139 -411 -192q-25 -4 -50.5 -8.5t-54.5 -8.5q-16 -2 -27.5 6.5t-15.5 24.5t5 26.5t20 20.5 q23 23 43 44.5t36.5 51t30 69.5t23.5 97q-174 98 -275.5 241.5t-101.5 315.5z" />
+<glyph unicode="&#xf076;" horiz-adv-x="1566" d="M0 621v288q0 16 11.5 27.5t27.5 11.5h391q16 0 28.5 -11t12.5 -28v-288q0 -29 22.5 -60t63.5 -58.5t98.5 -45t128.5 -17.5q70 0 128.5 17.5t99.5 45t63.5 58.5t22.5 60v288q0 39 39 39h391q16 0 27.5 -11t11.5 -28v-288q0 -135 -61.5 -254t-168 -207t-249 -139.5 t-304.5 -51.5q-164 0 -306 51.5t-248.5 139.5t-168 206.5t-61.5 254.5zM0 1106v391q0 16 11.5 27.5t27.5 11.5h391q16 0 28.5 -11.5t12.5 -27.5v-391q0 -16 -12.5 -27.5t-28.5 -11.5h-391q-16 0 -27.5 11.5t-11.5 27.5zM1098 1106v391q0 16 11 27.5t28 11.5h391 q16 0 27.5 -11.5t11.5 -27.5v-391q0 -16 -11.5 -27.5t-27.5 -11.5h-391q-39 0 -39 39z" />
+<glyph unicode="&#xf077;" horiz-adv-x="1536" d="M-1 355.5q-1 37.5 28 66.5l673 674q29 29 68 28.5t68 -28.5l671 -674q29 -29 29 -67t-29 -66l-100 -103q-29 -29 -68 -28.5t-67 28.5l-508 510l-500 -510q-29 -29 -67.5 -28.5t-67.5 28.5l-100 103q-29 29 -30 66.5z" />
+<glyph unicode="&#xf078;" horiz-adv-x="1536" d="M0 918.5q0 37.5 29 66.5l100 102q29 29 68 29t67 -29l508 -509l500 509q29 29 67.5 29t67.5 -29l100 -102q29 -29 30 -66.5t-28 -66.5l-673 -674q-29 -29 -68 -28.5t-68 28.5l-671 674q-29 29 -29 66.5z" />
+<glyph unicode="&#xf079;" horiz-adv-x="1916" d="M2.5 1038.5q-12.5 30.5 28.5 75.5l385 424q25 29 63 29q39 0 64 -29l385 -424q41 -45 28.5 -75.5t-67.5 -30.5h-250v-680h174q6 -10 12 -19.5t17 -19.5l252 -281h-695q-33 0 -56.5 23.5t-23.5 56.5v920h-249q-55 0 -67.5 30.5zM823 1526h695q33 0 56 -22.5t23 -57.5v-918 h250q55 0 67.5 -30.5t-28.5 -75.5l-385 -424q-25 -29 -63 -29q-39 0 -64 29l-385 424q-41 45 -28.5 75.5t67.5 30.5h250v678h-174q-6 10 -12.5 20.5t-14.5 20.5z" />
+<glyph unicode="&#xf07a;" d="M0 1421v76q0 39 39 39h231q16 0 38 -4t36 -8q6 -4 14.5 -14.5t15.5 -23.5t12 -26.5t7 -21.5l27 -125h1347q35 0 58 -27t16 -59l-108 -578q-6 -25 -26.5 -42t-49.5 -17h-1084l35 -168q4 -16 17.5 -26.5t29.5 -10.5h856q16 0 27.5 -11.5t11.5 -27.5v-78q0 -16 -11 -26.5 t-28 -10.5h-163h-652h-104q-16 0 -36.5 3.5t-35.5 9.5q-6 2 -14 13t-15.5 24.5t-12.5 27t-7 21.5l-215 1016q-4 16 -17.5 26t-29.5 10h-170q-39 0 -39 39zM582 115q0 47 33.5 81.5t80.5 34.5q49 0 83 -34.5t34 -81.5t-34 -81t-83 -34q-47 0 -80.5 34t-33.5 81zM1233 115 q0 47 33.5 81.5t81.5 34.5q47 0 80.5 -34.5t33.5 -81.5t-33.5 -81t-80.5 -34t-81 34t-34 81z" />
+<glyph unicode="&#xf07b;" d="M0 115v1306q0 47 34 81t81 34h692q47 0 81 -34t34 -81t33.5 -80.5t80.5 -33.5h693q47 0 80.5 -35t33.5 -82v-1075q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81z" />
+<glyph unicode="&#xf07c;" d="M0 379v1042q0 47 34 81t81 34h692q47 0 81 -34t34 -81t33.5 -80.5t80.5 -33.5h443q47 0 80.5 -35t33.5 -82v-221h-1228q-37 0 -72 -12.5t-65.5 -34t-53 -51t-35.5 -64.5zM43 0l246 760q6 23 30.5 39t47.5 16h1476l-260 -758q-6 -23 -30.5 -40t-47.5 -17h-1462z" />
+<glyph unicode="&#xf07d;" horiz-adv-x="798" d="M2 368.5q10 22.5 57 22.5h203v754h-203q-47 0 -57 22.5t25 57.5l319 319q23 23 53 23q31 0 54 -23l321 -319q33 -35 22.5 -57.5t-57.5 -22.5h-202v-754h202q47 0 57.5 -22.5t-24.5 -57.5l-319 -319q-23 -23 -54 -23t-53 23l-321 319q-33 35 -23 57.5z" />
+<glyph unicode="&#xf07e;" horiz-adv-x="1597" d="M0 729q0 31 23 53l319 322q35 33 57.5 23.5t22.5 -56.5v-205h754v203q0 47 22.5 57.5t56.5 -22.5l320 -322q23 -23 22 -53q0 -31 -22 -53l-320 -322q-35 -33 -57 -22.5t-22 57.5v203h-754v-203q0 -47 -22.5 -57t-57.5 24l-319 320q-23 23 -23 53z" />
+<glyph unicode="&#xf080;" d="M0 115v1306q0 47 35 81t82 34h1612q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1612q-47 0 -82 34t-35 81zM154 154h1536v1228h-1536v-1228zM307 264v363h203v-363h-203zM649 264v776h201v-776h-201zM993 264v592h203v-592h-203zM1333 264v922h203v-922 h-203z" />
+<glyph unicode="&#xf081;" horiz-adv-x="1536" d="M0 193v1150q0 39 15.5 75t41 61.5t60.5 41t73 15.5h1153q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-75 -15.5h-1153q-39 0 -73.5 15.5t-60 41t-41 60.5t-15.5 76zM201 559q80 -111 198.5 -169t259.5 -58q96 0 184.5 26.5t160 73.5 t124 112.5t76.5 143.5q82 6 129 57q14 14 4 33q-8 18 -30 15h-4q23 23 30 45q8 20 -8 32q-14 14 -33 2q-8 -4 -29.5 -10t-45.5 -6q-4 0 -7.5 1t-7.5 1q0 2 -1 4t-1 4q-16 61 -57 110.5t-94 72.5q4 4 6 8t6 8q6 16 0 33q-2 6 -12.5 16t-34.5 8q-2 4 -6 8q-12 12 -25 9 q-25 -4 -49 -13l-2 2q-14 8 -31 -2q-59 -37 -98 -100t-68 -135q-35 31 -57 41q-61 35 -129 63.5t-154 61.5q-14 4 -24 -4q-10 -6 -15 -21q-2 -27 8.5 -58.5t38.5 -62.5q-25 -6 -20 -32q12 -68 68 -101l-13 -12q-14 -14 -4 -33q4 -12 26.5 -37.5t65.5 -38.5q-6 -12 -6 -22 t2 -14q6 -33 39 -50q-37 -25 -79 -34t-85 -5.5t-83 20.5t-70 46q-8 8 -19.5 8t-19.5 -8q-23 -18 -4 -39z" />
+<glyph unicode="&#xf082;" horiz-adv-x="1536" d="M2 193v1150q0 39 15.5 75t41 61.5t60.5 41t74 15.5h1153q80 0 136 -56.5t56 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-74 -15.5h-486v643h172q12 0 21.5 8t9.5 21l12 168q0 14 -8 24q-10 10 -23 10h-184v74q0 41 10.5 54.5t53.5 13.5q25 0 55.5 -4t58.5 -11 q6 0 13.5 1.5t11.5 5.5q10 6 14 22l23 162q4 29 -25 35q-90 25 -188 24q-301 0 -301 -293v-84h-103q-33 0 -32 -32v-168q0 -12 9 -21.5t23 -9.5h103v-643h-393q-39 0 -74 15.5t-60.5 41t-41 60.5t-15.5 76z" />
+<glyph unicode="&#xf083;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM154 160h1536v114h-1536v-114zM154 1145h1536v231h-957l-14 -92h-565v-139zM266 1341h316v93h-316v-93zM557 709q0 -76 28.5 -142.5t78 -116 t116 -78t142.5 -28.5t142 28.5t115.5 78t78 116t28.5 142.5t-28.5 142.5t-78 115.5t-116 77.5t-141.5 28.5q-76 0 -142.5 -28.5t-116 -77.5t-78 -115.5t-28.5 -142.5zM672 709q0 51 19.5 97t53 80t79.5 53t98 19q51 0 97 -19t80 -53t53 -80t19 -97t-19 -97.5t-53 -80 t-80 -53t-97 -19.5t-97.5 19.5t-80 53t-53 79.5t-19.5 98zM743 709q0 -16 12.5 -28.5t28.5 -12.5q18 0 30.5 12.5t12.5 28.5q0 41 28 67.5t67 26.5v2q18 0 30.5 12t12.5 29q0 18 -12.5 30.5t-30.5 12.5q-74 0 -126.5 -53.5t-52.5 -126.5z" />
+<glyph unicode="&#xf084;" horiz-adv-x="1916" d="M0 803.5q-6 111.5 30 230.5t113 228q78 109 179.5 180t209 102t213 17.5t191.5 -74.5q76 -53 121 -134t59 -176.5t-4 -199t-68 -203.5l414 -297l101 139l-105 74q-14 10 -17 27.5t7 32.5l51 69q10 14 26.5 17.5t32.5 -7.5l344 -247q16 -10 18.5 -27.5t-7.5 -32.5l-49 -69 q-10 -14 -27.5 -17.5t-32.5 6.5l-102 76l-101 -139l248 -178q43 -31 52.5 -83t-21.5 -95q-33 -43 -84 -51.5t-94 22.5l-803 573q-78 -80 -170 -130t-186.5 -68.5t-185.5 -2t-167 71.5q-86 61 -133 157.5t-53 208zM230.5 766q7.5 -41 30 -78t58.5 -63q37 -27 79 -36t83 -2 t78 29.5t64 59.5q39 53 41 114.5t-27 114.5q59 -10 116.5 11.5t96.5 74.5q27 37 36 79t2 84t-29.5 79t-59.5 63q-37 27 -79 36t-84 2t-79 -29.5t-63 -59.5q-37 -53 -39 -114.5t26 -114.5q-59 10 -116.5 -12.5t-96.5 -75.5q-27 -37 -36 -79t-1.5 -83z" />
+<glyph unicode="&#xf085;" horiz-adv-x="1916" d="M0 801v180q0 8 22.5 15.5t52 11.5t56.5 7t37 3q12 49 37 88q-23 31 -45.5 61.5t-46.5 59.5l-4 10q0 6 20.5 29.5t47 50t50 47t29.5 20.5q2 0 20.5 -13t41 -30.5t43 -34t24.5 -20.5q43 25 90 37q0 8 3 37t7 57.5t10.5 52t16.5 23.5h178q8 0 15.5 -23.5t11.5 -52t7 -57.5 t5 -37q45 -12 86 -35q31 23 62.5 45.5t60.5 46.5l8 4q4 0 27.5 -21.5t49.5 -47t47.5 -49t21.5 -29.5q0 -4 -13.5 -22.5t-30 -40t-32 -41t-19.5 -25.5q23 -39 39 -92q10 -2 37 -5t55.5 -8.5t51 -11.5t22.5 -14v-178q0 -10 -22.5 -16.5t-51 -11.5t-56.5 -7t-36 -4 q-14 -43 -37 -88q23 -31 44.5 -60.5t48.5 -58.5l2 -10q0 -6 -20.5 -30t-47.5 -50.5t-50.5 -47t-29.5 -20.5q-2 0 -20.5 13.5t-41 31t-42 32.5t-25.5 20q-45 -23 -88 -37q0 -10 -3 -37t-8 -56.5t-12.5 -52t-15.5 -22.5h-178q-8 0 -15.5 22.5t-11.5 52t-7 56t-3 37.5 q-45 12 -88 37q-31 -23 -61.5 -46.5t-59.5 -48.5l-10 -2q-4 0 -27.5 20.5t-49 47t-46 50.5t-20.5 30q0 2 13 20.5t29.5 40t31 41t18.5 25.5q-23 43 -39 94q-10 2 -37 5t-55.5 7t-51 10.5t-22.5 14.5zM420 889q0 -37 14.5 -70t39 -57.5t58 -38.5t70.5 -14t70 14t57.5 38.5 t38.5 57.5t14 70t-14 70.5t-38.5 58t-57.5 39t-70 14.5q-76 0 -129 -53t-53 -129zM1114 373q0 6 13.5 13t31 14.5t33.5 12.5t22 7q4 23 9.5 39t15.5 37q-4 4 -13 17t-18.5 27.5t-16.5 28t-7 17.5t18.5 23.5t43 41t47 40t28.5 24.5l8 4q4 0 16.5 -8.5t25.5 -19.5t25.5 -21.5 t16.5 -14.5q35 12 76 19q2 6 9 21.5t16.5 30.5t17.5 27.5t14 12.5q4 0 34 -7t63.5 -18.5t60.5 -23.5t27 -23q0 -23 -5.5 -47t-9.5 -47q16 -12 28.5 -26.5t22.5 -30.5q25 2 49.5 3t47.5 1q8 0 18 -26.5t17.5 -60.5t12.5 -64.5t5 -39.5q0 -6 -13.5 -13t-29.5 -13t-32.5 -12.5 t-22.5 -8.5q-9 -38 -23 -71q2 -6 11.5 -18.5t18.5 -27t16 -27.5t7 -18q0 -4 -18.5 -23.5t-43 -41t-47 -40.5t-28.5 -26l-8 -4q-4 0 -16.5 8.5t-25.5 19.5t-25.5 21.5t-16.5 14.5q-37 -12 -78 -19q-2 -6 -9 -21.5t-15.5 -30.5t-16.5 -27.5t-14 -12.5t-35 7.5t-62.5 18.5 t-60 23.5t-26.5 22.5q0 23 5 47.5t9 46.5q-16 12 -28.5 26.5t-22.5 30.5q-23 -2 -45.5 -3t-44.5 -1h-14.5t-8.5 11q-2 8 -8 35.5t-13.5 58t-12.5 55.5t-5 29zM1192 1264q0 6 12.5 12t29.5 10t33.5 6t22.5 4q10 33 31 64q-2 4 -8 17.5t-12.5 27.5t-11.5 25.5t-5 15.5 q0 6 21.5 22.5t49 35t51.5 32.5t28 14t13 -9t20.5 -21.5t20.5 -23.5t13 -15q14 4 28.5 6t29.5 0h14q2 4 11 16.5t18.5 25.5t17.5 23.5t12 10.5t30 -11.5t55.5 -26t53 -28.5t23.5 -20q0 -4 -4 -15.5t-8 -26t-8.5 -27.5t-6.5 -17q20 -25 39 -60q51 -4 74 -7t29 -18.5t5 -52 t3 -106.5q0 -6 -12.5 -12.5t-28.5 -10.5t-32.5 -6t-22.5 -4q-13 -36 -31 -63q2 -4 8 -16.5t13.5 -27t12.5 -26.5t5 -14q0 -6 -22.5 -23.5t-50 -36t-51.5 -33t-26 -14.5q-4 0 -14 9.5t-21.5 21.5t-20.5 23.5t-13 15.5q-14 -4 -28.5 -6t-29.5 0h-14q-4 -4 -12 -16.5t-17.5 -26 t-18.5 -23.5t-13 -10t-30 11t-54.5 25.5t-52 29t-23.5 20.5q0 2 3 14.5t8 26.5t9 27.5t6 17.5q-23 23 -38 59q-53 2 -75 5t-29 18.5t-5 52.5t-4 109zM1397 367q0 -49 34.5 -85t84.5 -36q49 0 84.5 34.5t35.5 86.5q0 49 -34.5 83.5t-85.5 34.5q-49 0 -84 -34.5t-35 -83.5z M1446 1206q0 -47 31.5 -78.5t76.5 -31.5q47 0 79 31.5t32 76.5q0 47 -31.5 79t-77.5 32q-47 0 -78.5 -32t-31.5 -77z" />
+<glyph unicode="&#xf086;" horiz-adv-x="1916" d="M0 997q0 119 61.5 222.5t167 180.5t246.5 122t303 45t303.5 -45t247 -122t166.5 -180.5t61 -222.5q0 -117 -61 -221t-166.5 -181t-247 -122t-303.5 -45q-37 0 -73.5 3t-71.5 7q-147 -113 -336 -155q-20 -4 -40.5 -7.5t-43.5 -7.5q-12 -2 -21.5 6.5t-13.5 18.5v2 q-4 12 3 19.5t18 17.5q18 18 34.5 36.5t29.5 42t24.5 55.5t19.5 79q-141 78 -224 195.5t-83 256.5zM649 258q6 4 13.5 8t13.5 8q51 -6 102 -6q197 0 369 56.5t298 155t198.5 231.5t72.5 286q0 41 -6 84q96 -78 151.5 -175t55.5 -208q0 -139 -83 -256.5t-224 -195.5 q8 -47 19 -79t25.5 -55.5t30 -42t33.5 -36.5q10 -10 17.5 -18.5t3.5 -18.5v-2q-2 -12 -12.5 -19.5t-22.5 -5.5q-23 4 -43.5 7.5t-40.5 7.5q-96 20 -180 60t-156 95q-35 -4 -71.5 -7t-73.5 -3q-141 0 -265 35t-225 94z" />
+<glyph unicode="&#xf087;" horiz-adv-x="1597" d="M0 193v643q0 49 35 83.5t84 34.5h348q27 14 43 30.5t35 39.5q16 20 32.5 38.5t34.5 37.5q33 35 76 68.5t66 74.5q16 29 23 64.5t12.5 71.5t12.5 70t23.5 60.5t47 42t81.5 15.5q61 0 111.5 -25.5t85.5 -68.5t54.5 -98.5t19.5 -112.5q0 -59 -17.5 -112.5t-42.5 -107.5 q35 2 70 4.5t70 2.5q55 0 107 -10.5t93 -35t66.5 -67.5t25.5 -109q0 -29 -5 -57t-15 -57q18 -43 18 -90q0 -78 -41 -142q10 -59 -7 -118.5t-58 -104.5q-4 -84 -45 -139.5t-102.5 -89t-135 -47t-143.5 -13.5q-72 0 -144.5 10.5t-142.5 28.5q-70 20 -139.5 43t-142.5 23h-375 q-49 0 -84 34.5t-35 84.5zM236 276q0 -35 22 -57t57 -22q33 0 56.5 22.5t23.5 56.5q0 33 -23.5 56.5t-56.5 23.5q-35 0 -57 -23.5t-22 -56.5zM492 193q70 0 136 -16.5t133.5 -35t141.5 -35t160 -16.5q45 0 98 6t99.5 26.5t78 56.5t31.5 95q0 10 -1 18.5t-3 18.5 q35 16 53.5 53t18.5 74q0 39 -21 68q60 49 60 123q0 23 -12.5 43t-26.5 35q16 29 28.5 57.5t12.5 62.5q0 35 -17.5 55.5t-43 31t-56.5 12.5t-57 2q-45 0 -90.5 -3t-90.5 -3q-31 0 -61.5 3t-58.5 15q0 41 16 78t35.5 74.5t35 78.5t15.5 91q0 33 -10.5 65.5t-29.5 59t-47 44 t-65 17.5h-11t-11 -2q-8 -4 -9 -8t-3 -13q-12 -59 -22.5 -123.5t-39.5 -117.5q-29 -51 -74 -88t-86 -78q-29 -31 -49 -56.5t-41.5 -48t-48.5 -42t-65 -35.5h-2v-643z" />
+<glyph unicode="&#xf088;" horiz-adv-x="1597" d="M0 309q0 29 5 57.5t15 57.5q-18 43 -18 90q0 78 41 141q-10 59 7.5 119t58.5 105q4 84 45 139t102 89t135 47t144 13q72 0 144.5 -10t141.5 -29q70 -20 139.5 -42.5t143.5 -22.5h375q49 0 83.5 -35t34.5 -84v-643q0 -49 -34.5 -84t-83.5 -35h-349q-27 -14 -43 -30.5 t-34 -38.5q-16 -20 -32.5 -39t-35.5 -37q-33 -35 -76 -69t-65 -74q-25 -43 -31 -99.5t-18.5 -106.5t-44 -84t-107.5 -34q-61 0 -111.5 25.5t-85 68.5t-54 98.5t-19.5 112.5q0 59 17.5 112.5t41.5 106.5q-35 -2 -69.5 -4t-69.5 -2q-55 0 -107.5 10.5t-93.5 35t-66.5 67.5 t-25.5 108zM119 309q0 -35 17.5 -55.5t43 -30.5t56 -12t57.5 -2q47 0 91 3t89 3q31 0 61.5 -3t59.5 -15q0 -41 -16.5 -78t-36 -75t-34.5 -79t-15 -90q0 -33 10 -65.5t29.5 -59t47 -43t64.5 -16.5q4 0 11.5 -1t11.5 1q8 4 9 8l3 12q12 59 22.5 124t38.5 118q29 51 74 88 t86 78q29 31 49.5 56.5t42 48t47 42t66.5 35.5h2v643q-72 0 -137.5 16.5t-133 36t-141 36t-159.5 16.5q-45 0 -98.5 -7.5t-99.5 -27t-78 -56t-32 -96.5q0 -10 1 -18t3 -19q-35 -16 -53 -53t-18 -74q0 -39 20 -67q-59 -49 -59 -123q0 -23 12 -43.5t27 -34.5 q-16 -29 -28.5 -57.5t-12.5 -63.5zM1202 860q0 -33 23.5 -56.5t56.5 -23.5q35 0 57.5 23.5t22.5 56.5q0 35 -22.5 57.5t-57.5 22.5q-33 0 -56.5 -22.5t-23.5 -57.5z" />
+<glyph unicode="&#xf089;" horiz-adv-x="837" d="M1 959.5q9 27.5 54 33.5l506 74l227 459q23 41 50 41v-1348l-453 -237q-41 -23 -64.5 -6.5t-15.5 63.5l86 504l-364 356q-35 33 -26 60.5z" />
+<glyph unicode="&#xf08a;" horiz-adv-x="1802" d="M0 1073q0 137 43 231.5t112.5 153t156.5 84t177 25.5q63 0 125 -21.5t115 -53.5t97 -70t75 -68q31 31 76 68.5t98 69.5t113.5 53.5t126.5 21.5q88 0 175 -25.5t156.5 -84t112.5 -153t43 -231.5q0 -94 -34.5 -177t-76.5 -146.5t-79 -102.5t-39 -43l-615 -612 q-26 -23 -57 -23q-33 0 -55 23l-617 614q-4 2 -39.5 41t-77.5 102.5t-77 146.5t-35 177zM160 1073q0 -68 27.5 -131t61.5 -112.5t63 -79.5l28 -29l561 -559l561 559l29 29q29 30 62.5 79.5t61 113t27.5 130.5q0 104 -29.5 169t-77.5 101.5t-106.5 50t-113.5 13.5 q-53 0 -107.5 -25.5t-102.5 -61.5t-86 -74t-56 -60q-25 -31 -62 -31t-61 31q-18 23 -56.5 60.5t-86.5 73.5t-102.5 61.5t-105.5 25.5q-57 0 -115.5 -13.5t-106.5 -50t-77.5 -101t-29.5 -169.5z" />
+<glyph unicode="&#xf08b;" horiz-adv-x="1689" d="M0 307v922q0 63 24.5 118.5t66.5 97.5t97.5 66.5t118.5 24.5h461v-193h-461q-47 0 -80.5 -33.5t-33.5 -80.5v-922q0 -47 33.5 -80.5t80.5 -33.5h461v-193h-461q-63 0 -118.5 24.5t-97.5 66.5t-66.5 97.5t-24.5 118.5zM508 584v368q0 33 22.5 54.5t55.5 21.5h428v293 q0 41 39 57q39 14 65 -14l553 -553q18 -18 18.5 -44t-18.5 -42l-553 -553q-18 -18 -43 -18q-10 0 -22 4q-39 16 -39 57v291h-428q-33 0 -55.5 22.5t-22.5 55.5z" />
+<glyph unicode="&#xf08c;" horiz-adv-x="1536" d="M0 193v1150q0 39 15.5 75t41 61.5t60.5 41t76 15.5h1150q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-75 -15.5h-1150q-80 0 -136.5 56.5t-56.5 136.5zM207 1192q0 -57 40 -97t95 -40q57 0 97 40t40 97q0 55 -40 95t-97 40q-55 0 -95 -40 t-40 -95zM213 240q0 -10 9 -19.5t20 -9.5h200q12 0 20.5 9t8.5 20v706q0 29 -29 29h-200q-10 0 -19.5 -8.5t-9.5 -20.5v-706zM580 240q0 -10 9 -19.5t19 -9.5h201q12 0 20.5 9t8.5 20v383q0 68 26.5 113.5t102.5 45.5q59 0 79.5 -28.5t20.5 -81.5v-432q0 -10 8 -19.5 t21 -9.5h204q10 0 19.5 9t9.5 20v477q0 141 -81 208.5t-216 67.5q-55 0 -107.5 -15t-93.5 -56q0 16 -3 34.5t-25 18.5h-195q-10 0 -19 -8.5t-9 -20.5v-706z" />
+<glyph unicode="&#xf08d;" horiz-adv-x="1916" d="M2 950q8 82 45 172t100 176t139 147.5t152 92.5t145.5 30t121.5 -40q53 -41 73.5 -107.5t12.5 -148.5l301 -225q111 63 215 73t180 -47q55 -41 80.5 -108.5t23.5 -150.5t-30.5 -177t-83.5 -188l428 -410q25 -25 4 -53q-12 -16 -33 -17q-10 0 -18 6l-517 293 q-74 -80 -155.5 -135t-161.5 -80.5t-151.5 -19.5t-127.5 47q-76 55 -95 158.5t9 228.5l-303 223q-76 -33 -145.5 -32t-122.5 40q-51 39 -72.5 104.5t-13.5 147.5zM171 858.5q3 -16.5 15 -27.5q21 -14 50 -14q31 0 65.5 17.5t71.5 46t72.5 66.5t66.5 79q10 14 7 30.5 t-15 26.5q-14 10 -30.5 8.5t-27.5 -16.5q-78 -104 -138 -143t-72 -35q-14 10 -31 7t-27 -15q-10 -14 -7 -30.5zM465 754l364 -271q8 -8 23 -8q20 0 33 17q10 14 8 29.5t-16 25.5l-347 258q-16 -14 -32.5 -27.5t-32.5 -23.5zM829.5 239.5q1.5 -16.5 16.5 -26.5q29 -23 69 -23 q41 0 88.5 21.5t95.5 57.5t94 84.5t87 101.5q10 12 8 28.5t-16 26.5q-12 10 -28.5 8t-26.5 -16q-51 -68 -102.5 -116t-95.5 -75.5t-78 -36t-48 4.5q-14 10 -29.5 7t-25.5 -18q-10 -12 -8.5 -28.5z" />
+<glyph unicode="&#xf08e;" d="M0 307v922q0 63 24.5 119.5t65.5 97.5t97.5 65.5t119.5 24.5h582q-2 -14 -4 -27.5t-2 -29.5v-88q0 -23 6 -48h-582q-47 0 -80.5 -33.5t-33.5 -80.5v-922q0 -47 33.5 -80.5t80.5 -33.5h1075q47 0 81 33.5t34 80.5v340q41 -31 90 -49t103 -20v-271q0 -63 -25 -118.5 t-67 -97.5t-97 -66.5t-119 -24.5h-1075q-63 0 -119.5 24.5t-97.5 66.5t-65.5 97.5t-24.5 118.5zM692.5 522q-0.5 25 16.5 41l770 772h-269q-25 0 -41 16.5t-16 41.5v86q-2 23 15.5 40t41.5 17h576q23 0 40 -17.5t17 -39.5v-86v-490q0 -25 -17.5 -42t-39.5 -15h-86 q-25 0 -41.5 16.5t-16.5 40.5v268l-772 -770q-16 -16 -40.5 -16t-41.5 16l-79 80q-16 16 -16.5 41z" />
+<glyph unicode="&#xf090;" horiz-adv-x="1689" d="M0 584v368q0 33 22.5 54.5t55.5 21.5h428v293q0 41 37 57q39 14 67 -14l553 -553q16 -18 16.5 -44t-16.5 -42l-553 -553q-18 -18 -43 -18q-8 0 -24 4q-37 16 -37 57v291h-428q-33 0 -55.5 22.5t-22.5 55.5zM922 0v193h460q47 0 81 33.5t34 80.5v922q0 47 -33.5 80.5 t-81.5 33.5h-460v193h460q63 0 118.5 -24.5t97.5 -65.5t67 -97.5t25 -119.5v-922q0 -63 -25 -118.5t-67 -97.5t-97 -66.5t-119 -24.5h-460z" />
+<glyph unicode="&#xf091;" horiz-adv-x="1689" d="M0 1042v187q0 33 22.5 54.5t55.5 21.5h323q-2 12 -2 25v24v4q0 53 4.5 88t15.5 54.5t31.5 27.5t55.5 8h678q33 0 54.5 -8t32.5 -27.5t15 -54.5t4 -88v-25.5t-2 -27.5h324q33 0 55.5 -21.5t22.5 -54.5v-187q0 -63 -45.5 -130.5t-122 -128t-180 -106.5t-222.5 -65 q-51 -10 -91 -41.5t-40 -70.5q0 -35 17.5 -51.5t39 -31t40 -31.5t22.5 -52q4 -23 -2 -47q-4 -14 23.5 -23.5t67.5 -18.5t82 -22.5t64 -34.5q12 -10 19.5 -39.5t9.5 -64.5q2 -33 -6 -58.5t-29 -25.5h-985q-20 0 -28.5 25.5t-6.5 58.5q2 35 9.5 64.5t19.5 39.5q23 20 64 34 t80.5 23t68.5 18t25 24q-4 14 -4 25.5v21.5q2 35 21.5 52t42 31.5t39.5 31t17 51.5q0 39 -39.5 70.5t-93.5 41.5q-117 20 -220 66.5t-180 106t-122 127t-45 130.5zM154 1042q0 -20 23.5 -54t67.5 -70.5t106.5 -71.5t140.5 -60q-25 80 -44.5 175.5t-33.5 189.5h-260v-109z M1198 786q78 25 140.5 60t106.5 71.5t67.5 70.5t23.5 54v109h-262q-12 -94 -31.5 -189.5t-44.5 -175.5z" />
+<glyph unicode="&#xf092;" horiz-adv-x="1536" d="M0 193v1150q0 39 15.5 75t41 61.5t60.5 41t76 15.5h1150q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-75 -15.5h-337v25q0 39 2 97t-3.5 115.5t-24.5 104.5t-65 66q188 20 290 110t102 287q0 66 -22.5 128t-67.5 114q6 23 8 45t2 45 q0 41 -9.5 91t-31.5 85h-12q-43 2 -79 -8.5t-68 -27.5t-62.5 -37.5t-65.5 -39.5q-33 4 -65.5 6t-65.5 2t-65.5 -2t-65.5 -6q-35 18 -65.5 39t-62.5 38t-67.5 27.5t-79.5 8.5h-12q-23 -35 -32 -85t-9 -91q0 -23 2 -45.5t8 -44.5q-45 -51 -66.5 -114t-21.5 -128 q0 -193 95.5 -283t281.5 -112q-39 -16 -59.5 -50t-32.5 -75q-27 -8 -49.5 -15.5t-50.5 -7.5q-55 0 -88 28.5t-59.5 62.5t-56.5 62.5t-79 28.5q-4 0 -20.5 -2t-16.5 -12q0 -23 19.5 -32t31.5 -19q39 -31 56.5 -71t39 -76.5t62.5 -62.5t127 -26q35 0 80 11q0 -10 -1 -18.5 t-1 -16.5q0 -29 2 -59.5t-2 -59.5h-317q-80 0 -136.5 56.5t-56.5 136.5z" />
+<glyph unicode="&#xf093;" d="M0 39v614q0 16 11.5 27.5t27.5 11.5h229q16 0 27.5 -11t11.5 -28v-346h1229v346q0 16 11.5 27.5t27.5 11.5h229q16 0 27.5 -11t11.5 -28v-614q0 -39 -39 -39h-1765q-39 0 -39 39zM346 969.5q-6 15.5 16 38.5l504 505q23 23 55.5 23t55.5 -23l506 -505q23 -23 15.5 -38.5 t-38.5 -15.5h-307v-499q0 -33 -22.5 -55.5t-55.5 -22.5h-307q-33 0 -54.5 22.5t-21.5 55.5v499h-307q-33 0 -39 15.5z" />
+<glyph unicode="&#xf094;" horiz-adv-x="1609" d="M2 514q-2 35 1 68.5t7 74.5q4 35 7 72t10 66q14 66 30.5 128t44.5 117q20 41 45 81t54 79q10 14 21 24.5t24 20.5q23 23 45 45.5t49 42.5t57.5 36.5t65.5 33.5q33 16 67.5 29.5t71.5 27.5q70 29 156 51l2 2q45 12 85 17.5t79 5.5q59 0 112.5 -9t106.5 -20q41 -8 85 -15 t93 -7h2q29 0 62.5 5t66.5 5q25 0 45.5 -6t32.5 -25q23 -31 26 -71.5t-2 -75.5q-4 -35 -8 -71t2 -72q4 -23 11.5 -39.5t15.5 -36.5q8 -18 11 -40t7 -42q18 -104 15.5 -195.5t-23 -170.5t-56.5 -148.5t-81 -132.5q-37 -49 -79 -97.5t-92 -91.5t-110.5 -77.5t-134.5 -59.5 q-76 -27 -158.5 -34t-158.5 -11h-31q-104 0 -194.5 16.5t-192.5 16.5h-4q-35 0 -77 -10.5t-83 -12.5h-2q-37 0 -65.5 17.5t-42.5 42.5q-20 35 -17.5 72.5t12.5 68.5t10.5 66.5t-5 75.5t-12.5 81t-9 82z" />
+<glyph unicode="&#xf095;" horiz-adv-x="1597" d="M0 1169q0 55 14.5 114.5t43 114t68.5 98.5t93 69q12 -2 26.5 0t26.5 2q10 0 30 -1l40 -2t38.5 -4.5t27.5 -7.5q8 -6 15 -18t12 -26.5t9.5 -30t8.5 -25.5q6 -18 23.5 -65.5t35.5 -97.5t32.5 -93t14.5 -53q0 -37 -24.5 -68t-54 -57.5t-54.5 -50t-25 -45.5q0 -20 16.5 -49 t26.5 -46q84 -145 188.5 -248.5t252.5 -187.5q18 -10 45.5 -27.5t50.5 -17.5t52.5 32t60 70.5t62 70.5t58.5 32q10 0 51.5 -22.5t89.5 -50t93 -55.5t61 -36q16 -10 46 -25.5t40 -35.5q2 -6 2 -23q0 -16 -3 -36.5t-8 -43t-12 -43t-13 -35.5q-18 -39 -59.5 -71.5t-92.5 -55 t-104.5 -36t-92.5 -13.5q-80 0 -153.5 25.5t-145.5 54.5q-123 45 -232.5 118t-203.5 164t-175 196.5t-144 215.5q-25 41 -52.5 95.5t-51 112t-39 113.5t-15.5 105z" />
+<glyph unicode="&#xf096;" d="M0 307v922q0 63 24.5 118.5t66.5 97.5t97.5 66.5t118.5 24.5h1075q63 0 118.5 -24.5t97.5 -66.5t67 -97.5t25 -118.5v-922q0 -63 -25 -118.5t-67 -97.5t-97 -66.5t-119 -24.5h-1075q-63 0 -118.5 24.5t-97.5 66.5t-66.5 97.5t-24.5 118.5zM193 307q0 -47 33.5 -80.5 t80.5 -33.5h1075q47 0 81 33.5t34 80.5v922q0 47 -34 80.5t-81 33.5h-1075q-47 0 -80.5 -33.5t-33.5 -80.5v-922z" />
+<glyph unicode="&#xf097;" horiz-adv-x="1253" d="M0 84v1337q0 47 34 81t81 34h1024q47 0 80.5 -34t33.5 -81v-1337q0 -47 -33.5 -81t-80.5 -34t-80 33l-432 432l-432 -432q-33 -33 -80 -33t-81 34t-34 81zM158 186l469 471l469 -471v1194h-938v-1194z" />
+<glyph unicode="&#xf098;" horiz-adv-x="1536" d="M0 193v1150q0 39 15.5 75t41 61.5t60.5 41t76 15.5h1150q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-75 -15.5h-1150q-80 0 -136.5 56.5t-56.5 136.5zM193 1040q2 -35 15 -76.5t30 -78.5q16 -37 33.5 -72t33.5 -63q74 -129 176.5 -241 t225.5 -190q31 -18 67.5 -36.5t75.5 -32.5q41 -16 83 -31.5t81 -21.5q63 -10 112.5 2t90.5 34q27 12 57.5 33.5t44.5 52.5q4 8 9 27t9 38t6.5 37.5t-2.5 29.5q-4 12 -24.5 22t-36.5 21q-43 25 -71.5 41t-67.5 38q-16 10 -36 23.5t-38 13.5q-23 0 -46.5 -27.5t-37.5 -43.5 q-12 -14 -36.5 -43t-47.5 -31q-14 -2 -32.5 10t-37.5 23q-106 59 -182 136t-135 177q-10 16 -21.5 37.5t-7.5 38.5q2 18 24.5 33.5t35.5 29.5q14 16 31.5 37t19.5 43q4 16 -5 38t-16 42q-16 43 -28.5 76t-26.5 76q-6 16 -12 40.5t-21 30.5q-8 4 -26.5 7t-39 4.5t-37.5 0 t-24 -1.5h-8q-33 -16 -62.5 -45.5t-51 -69.5t-34 -88t-9.5 -100z" />
+<glyph unicode="&#xf099;" d="M0 399q0 20 13.5 33.5t33.5 13.5q14 0 31 -12q123 -109 287 -108q59 0 117.5 15t107.5 48q-29 16 -47.5 42t-18.5 58q0 23 8 39q-18 6 -44.5 20.5t-51 34t-41 43t-16.5 46.5q0 16 10 28.5t25 22.5q-41 25 -76 74t-35 98q0 33 33 43q-35 35 -55.5 81t-20.5 95 q0 23 9.5 41.5t37.5 18.5q18 0 84 -27t142.5 -60.5t146.5 -67.5t98 -48q25 -14 47.5 -31.5t44.5 -36.5q20 51 47 106.5t60 106.5t73 96t89 74q8 6 24 6q18 0 27 -8q16 6 41.5 13.5t42.5 7.5q29 0 43 -27q31 0 56.5 -15.5t25.5 -50.5q0 -31 -27 -53q96 -43 159.5 -125 t90.5 -182q6 -2 23 -2q47 0 88 16.5t57 16.5q18 0 31.5 -14.5t13.5 -32.5q0 -23 -19.5 -48.5t-33.5 -39.5q23 4 42 -7.5t19 -38.5q0 -29 -26.5 -50t-61.5 -37.5t-72.5 -25.5t-58.5 -11q-43 -139 -133 -246t-210 -178.5t-258 -109.5t-275 -38q-219 0 -415 93.5t-325 273.5 q-8 16 -8 26z" />
+<glyph unicode="&#xf09a;" horiz-adv-x="790" d="M0 862v203q0 16 11.5 28.5t27.5 12.5h125v102q0 358 366 359q123 0 232 -31q33 -10 29 -43l-27 -199q-4 -16 -16 -26q-16 -10 -31 -6q-35 8 -72.5 12t-66.5 4q-53 0 -65.5 -16.5t-12.5 -67.5v-88h223q14 0 29 -14q10 -10 10 -29l-17 -205q0 -16 -11 -25.5t-27 -9.5h-207 v-784q0 -16 -11.5 -27.5t-27.5 -11.5h-258q-16 0 -27.5 11.5t-11.5 27.5v784h-125q-16 0 -27.5 11.5t-11.5 27.5z" />
+<glyph unicode="&#xf09b;" horiz-adv-x="1847" d="M0 743q0 115 37 222.5t113 193.5l-3 4l3 2q-16 39 -21.5 81t-5.5 85q0 25 2 56.5t8 65.5t15.5 63.5t23.5 50.5h8q61 0 110.5 -12.5t94.5 -35t87 -52t91 -60.5q86 25 178.5 33t182.5 8t182 -8t180 -33q47 31 90 60.5t87 52t93.5 35t110.5 12.5h10q12 -20 21.5 -50 t15.5 -64t9 -65.5t3 -56.5q0 -43 -6 -85t-20 -81v-2l-2 -4q76 -86 112.5 -193.5t36.5 -222.5q0 -233 -66.5 -383.5t-188.5 -236.5t-292 -120t-376 -34q-207 0 -378 34t-292 120t-187.5 236.5t-66.5 383.5zM250 483q0 -145 64.5 -224t165 -116t219 -43t227.5 -6q74 0 152.5 2 t153.5 12.5t142.5 34t117.5 67.5t80 111.5t30 165.5q0 84 -27 147.5t-75 106.5t-114.5 64.5t-146.5 21.5q-78 0 -156.5 -7t-156.5 -7t-157 7t-157 7q-162 0 -262 -87t-100 -257zM494 524q0 66 26.5 113t65.5 47t66.5 -47t27.5 -113t-27.5 -112.5t-66.5 -46.5t-65.5 46.5 t-26.5 112.5zM795 258q-6 16 12 25q16 6 24 -13q27 -76 93 -75q31 0 56.5 20.5t35.5 54.5q8 20 26 13q16 -6 13 -25q-16 -47 -51 -75.5t-80 -28.5q-43 0 -78 28.5t-51 75.5zM864 369q0 -12 17.5 -21.5t42.5 -9.5t42 9.5t17 21.5t-17.5 21t-41.5 9q-25 0 -42.5 -9t-17.5 -21z M1167 524q0 -66 28 -112.5t67 -46.5t65.5 46.5t26.5 112.5t-27 113t-65 47q-39 0 -67 -47t-28 -113z" />
+<glyph unicode="&#xf09c;" horiz-adv-x="1880" d="M0 117v626q0 49 35 84t82 35h665v156q0 113 43 213t118 175t175 118t213 43t213.5 -43t175 -118t117.5 -175.5t43 -212.5v-152q0 -33 -22.5 -55.5t-55.5 -22.5h-80q-33 0 -55 23t-22 55v152q0 66 -25 123t-67 99t-99 66.5t-123 24.5t-122 -24.5t-99 -66.5t-67.5 -99.5 t-24.5 -122.5v-156h119q47 0 81.5 -34.5t34.5 -84.5v-626q0 -47 -34.5 -82t-81.5 -35h-1020q-47 0 -82 35t-35 82zM494 164h266l-66 285q29 18 47.5 48.5t18.5 65.5q0 55 -39 95t-94 40t-94 -40t-39 -95q0 -35 18 -65.5t47 -46.5z" />
+<glyph unicode="&#xf09d;" d="M0 154v1228q0 63 45 108.5t109 45.5h1536q63 0 108 -45t45 -109v-1228q0 -63 -45 -108.5t-108 -45.5h-1536q-63 0 -108.5 45t-45.5 109zM154 154h1536v575h-1536v-575zM154 1114h1536v268h-1536v-268zM260 250v115h307v-115h-307zM676 250v115h446v-115h-446z" />
+<glyph unicode="&#xf09e;" horiz-adv-x="1566" d="M0 236q0 49 18.5 91t50 74.5t75 51t92.5 18.5t91 -18.5t74.5 -51t51 -74.5t18.5 -91t-18.5 -92.5t-51 -75t-74.5 -50t-91 -18.5t-92.5 18.5t-75 50t-50 74.5t-18.5 93zM0 819v158q0 35 25 57q23 23 53 23q2 0 3 -1t3 -1q193 -14 362.5 -95t301 -212.5t212 -301.5 t95.5 -362q4 -35 -21 -59q-23 -25 -57 -25h-158q-29 0 -51.5 20.5t-26.5 51.5q-12 133 -68.5 249.5t-145.5 205.5t-205.5 145.5t-249.5 68.5q-31 4 -51.5 27t-20.5 51zM0 1331v158q0 33 25 55q23 23 53 23h4q301 -16 565 -137t463 -320t319.5 -463t137.5 -565q4 -31 -23 -57 q-23 -25 -55 -25h-158q-31 0 -53.5 21.5t-24.5 52.5q-14 238 -110 446.5t-255 367.5t-368 255t-446 110q-31 2 -52.5 24.5t-21.5 53.5z" />
+<glyph unicode="&#xf0a0;" d="M0 193v382q0 23 6 45.5t12 45.5l238 727q20 63 75.5 103t121.5 40h938q66 0 121 -40t75 -103l238 -727q6 -23 12 -45.5t6 -45.5v-382q0 -41 -15.5 -76t-41 -60.5t-61 -41t-74.5 -15.5h-1458q-80 0 -136.5 56.5t-56.5 136.5zM154 193q0 -16 11 -27.5t28 -11.5h1458 q16 0 27.5 11t11.5 28v382q0 16 -11.5 27.5t-27.5 11.5h-1458q-16 0 -27.5 -11t-11.5 -28v-382zM213 768h1417l-188 578q-4 16 -19.5 26t-31.5 10h-938q-16 0 -31.5 -10t-20.5 -26zM1057 385q0 39 27.5 66.5t68.5 27.5q39 0 66.5 -27.5t27.5 -66.5q0 -41 -27.5 -68.5 t-66.5 -27.5q-41 0 -68.5 27.5t-27.5 68.5zM1364 385q0 39 27.5 66.5t68.5 27.5q39 0 66.5 -27.5t27.5 -66.5q0 -41 -27.5 -68.5t-66.5 -27.5q-41 0 -68.5 27.5t-27.5 68.5z" />
+<glyph unicode="&#xf0a1;" d="M0 754v229q0 63 45 108.5t109 45.5h499q115 0 245 33.5t255 90t235.5 128t186.5 147.5q63 0 108.5 -45t45.5 -109v-368q49 -12 81.5 -52.5t32.5 -93.5t-32.5 -93t-81.5 -52v-369q0 -63 -45.5 -108t-108.5 -45q-68 68 -164 132t-206.5 117.5t-227.5 91.5t-227 50 q-43 -12 -70 -40t-37 -62.5t-2 -70.5t37 -65q-25 -41 -23 -75.5t20.5 -66.5t49.5 -61.5t66 -58.5q-20 -43 -69.5 -65.5t-106 -25.5t-110.5 10.5t-85 43.5q-18 61 -40 125t-36 130.5t-14 138t24 151.5h-200q-63 0 -108.5 45t-45.5 109zM807 741q102 -16 206.5 -49t205 -78 t191.5 -99t165 -112v930q-76 -59 -166 -113.5t-190.5 -98.5t-205 -77.5t-206.5 -48.5v-254z" />
+<glyph unicode="&#xf0a2;" horiz-adv-x="1759" d="M0 317q104 78 172 172.5t109 201t60 224t28 240.5q6 84 56 159t126 131t163 89t167 33q74 0 163 -33t165.5 -88t129 -129t52.5 -158q6 -121 27.5 -239.5t63.5 -227t109.5 -204t167.5 -171.5q-4 -70 -56 -114.5t-120 -44.5h-469q-18 -82 -82.5 -135.5t-150.5 -53.5 t-151.5 53.5t-84.5 135.5h-469q-68 0 -120 45t-56 114zM238 317h1284q-78 86 -129.5 183.5t-84 202t-50 214t-25.5 222.5q-4 55 -41 104t-89 86t-111.5 57.5t-110.5 20.5q-47 0 -107.5 -21.5t-114 -56.5t-91.5 -83t-40 -99q-6 -111 -23.5 -222.5t-51 -218t-87 -205 t-128.5 -184.5zM713 209q0 -70 49 -119t119 -49q18 0 18 20t-18 21q-53 0 -91 37t-38 90q0 20 -19 20q-20 0 -20 -20z" />
+<glyph unicode="&#xf0a3;" horiz-adv-x="1597" d="M0 573q0 33 23 56l143 139l-143 139q-23 23 -23 56q0 25 16.5 45t40.5 26l195 49q-6 18 -15.5 48t-18.5 61t-16 59.5t-7 46.5q0 31 21.5 52.5t51.5 21.5q18 0 47 -7t60 -16.5t60.5 -18.5t47.5 -15l49 194q6 25 27 41.5t45 16.5q35 0 53 -23l142 -143l139 143q23 23 53 23 q27 0 47.5 -15.5t26.5 -42.5l49 -194q18 6 48 15t60.5 18.5t59.5 16.5t47 7q29 0 51.5 -21.5t22.5 -52.5q0 -18 -7 -46.5t-16.5 -59.5t-18.5 -60.5t-15 -48.5l194 -49q25 -6 41 -26.5t16 -44.5q0 -33 -22 -56l-145 -139l145 -139q23 -23 22 -56q0 -25 -16 -45t-41 -26 l-194 -49q6 -18 15 -48t18.5 -61t16.5 -59.5t7 -46.5q0 -29 -21.5 -51.5t-52.5 -22.5q-18 0 -47 7t-59.5 16.5t-60 18.5t-48.5 15l-49 -194q-6 -25 -26.5 -41.5t-45.5 -16.5q-33 0 -55 23l-139 143l-142 -143q-18 -23 -53 -23q-25 0 -45 16.5t-27 41.5l-49 194 q-18 -6 -47.5 -15t-60.5 -18.5t-59.5 -16.5t-47.5 -7q-31 0 -52 22.5t-21 51.5q0 18 7 46.5t16 59.5t18.5 60.5t15.5 48.5l-195 49q-25 6 -41 26.5t-16 44.5z" />
+<glyph unicode="&#xf0a4;" horiz-adv-x="1916" d="M0 193v643q0 49 35 83.5t84 34.5h348q27 14 42 30.5t34 39.5q16 20 33.5 38.5t33.5 37.5q35 35 77 68.5t65 74.5q25 43 29.5 99.5t17 106.5t44 84t109.5 34q61 0 111.5 -25.5t85.5 -68.5t54.5 -98.5t19.5 -112.5q0 -53 -15.5 -104.5t-38.5 -98.5h134l376 -2 q49 0 93.5 -17.5t76 -49.5t50 -75t18.5 -94q0 -49 -18.5 -92t-50 -74.5t-75.5 -49t-94 -17.5h-200q-10 -59 -39 -107q10 -59 -7.5 -117.5t-56.5 -103.5q0 -76 -28.5 -131t-75.5 -90t-109.5 -52.5t-132.5 -17.5q-78 0 -148.5 16.5t-136 36t-128 36t-123.5 16.5h-375 q-49 0 -84 34.5t-35 84.5zM233 276q0 -35 22.5 -57t57.5 -22q33 0 56.5 22.5t23.5 56.5q0 33 -23.5 56.5t-56.5 23.5q-35 0 -57.5 -23.5t-22.5 -56.5zM489 193q70 0 136.5 -16.5t133 -35t133 -35t138.5 -16.5q43 0 84 8t72 27.5t50 52.5t19 82q0 14 -1 26.5t-3 24.5 q35 16 53.5 53t18.5 74q0 39 -20 68q59 49 59 123q0 23 -12.5 43.5t-26.5 34.5q90 0 178 1t178 1q51 0 84 30.5t33 81.5q0 53 -32.5 85t-84.5 32q-172 0 -340 1t-338 1q0 41 16.5 78t35 74.5t34 78.5t15.5 91q0 33 -10.5 65.5t-29 59t-46 44t-64.5 17.5h-11t-11 -2 q-8 -4 -9 -8t-3 -13q-12 -59 -22.5 -123.5t-39.5 -117.5q-29 -51 -73 -88t-85 -78q-29 -31 -49 -56.5t-41.5 -48t-48.5 -42t-65 -35.5h-5v-643z" />
+<glyph unicode="&#xf0a5;" horiz-adv-x="1916" d="M0 821q0 51 18.5 94t50 75t75.5 49.5t94 17.5l376 2h134q-23 47 -38.5 98t-15.5 105q0 57 19.5 112.5t54.5 98.5t85 68.5t112 25.5q78 0 109.5 -34t43.5 -84t17.5 -106.5t29.5 -99.5q23 -41 65 -74.5t77 -68.5q16 -18 33.5 -37t33.5 -39q18 -23 33.5 -39t42.5 -31h348 q49 0 84 -34.5t35 -83.5v-643q0 -49 -35 -84t-84 -35h-375q-61 0 -123.5 -16.5t-128 -36t-136 -36t-148.5 -16.5q-70 0 -132.5 17.5t-109.5 52.5t-75.5 90t-28.5 131q-39 45 -56.5 103.5t-7.5 117.5q-29 47 -39 107h-200q-49 0 -93.5 17.5t-76 49t-50 74.5t-18.5 92z M121 821q0 -51 32.5 -81.5t84.5 -30.5q90 0 178 -1t178 -1q-14 -14 -26.5 -35t-12.5 -43q0 -74 59 -123q-20 -29 -20 -68q0 -37 18.5 -73.5t53.5 -53.5q-2 -12 -3 -24.5t-1 -26.5q0 -49 19 -82t50 -52.5t72 -27.5t84 -8q70 0 137.5 16.5t134 35t133 35t135.5 16.5v643h-4 q-41 16 -66.5 35.5t-47 42t-42 48t-48.5 56.5q-41 41 -85 78t-73 88q-29 53 -39 117.5t-23 123.5q-2 8 -3 12.5t-9 8.5q-4 2 -11 2h-11q-37 0 -65 -17.5t-46 -44t-28.5 -59.5t-10.5 -65q0 -49 15.5 -90.5t34 -79t34.5 -74.5t16 -78q-170 0 -337.5 -1t-339.5 -1 q-51 0 -84 -32t-33 -85zM1524 276q0 -35 23.5 -57t56.5 -22q35 0 57 22.5t22 56.5q0 33 -22.5 56.5t-56.5 23.5q-33 0 -56.5 -23.5t-23.5 -56.5z" />
+<glyph unicode="&#xf0a6;" horiz-adv-x="1597" d="M0 602q0 61 25.5 111.5t68.5 85.5t98.5 54t112.5 19q53 0 104.5 -15t98.5 -38v133l2 377q0 49 17.5 93t49 76t74.5 50.5t94 18.5q49 0 92.5 -18.5t75 -50.5t49 -76t17.5 -93v-201q59 -10 106 -38q59 10 118 -7.5t104 -56.5q76 0 131 -28.5t90 -76t52 -109.5t17 -132 q0 -78 -16 -148.5t-35.5 -136t-36 -128t-16.5 -124.5v-374q0 -49 -35 -84t-84 -35h-643q-49 0 -84 34.5t-35 84.5v348q-14 27 -30.5 42t-38.5 34q-20 16 -39 33.5t-37 33.5q-35 35 -68.5 77t-74.5 64q-43 25 -99.5 30t-106.5 17.5t-84 44t-34 109.5zM120 591q-1 -7 1 -11 q4 -8 8 -9.5t12 -3.5q59 -12 124 -22t118 -39q51 -29 88 -73t78 -85q31 -29 56.5 -49t48 -41.5t42 -48.5t35.5 -66v-4h643q0 70 16.5 136.5t35 133t35 133t16.5 138.5q0 43 -8.5 84t-28 71.5t-52 50t-81.5 19.5q-14 0 -26.5 -1t-25.5 -3q-16 35 -53 53.5t-74 18.5 q-39 0 -67 -21q-49 59 -123 60q-23 0 -43.5 -12.5t-34.5 -26.5q0 90 -1 178t-1 178q0 51 -30.5 84t-82.5 33q-53 0 -84.5 -33t-31.5 -84q0 -172 -1 -340t-1 -338q-41 0 -78 16.5t-75 35t-79 34t-90 15.5q-33 0 -65.5 -10.5t-59 -29t-43 -46t-16.5 -64.5q0 -4 -1 -11z M1210 -37q0 -35 23.5 -57.5t56.5 -22.5q35 0 57.5 22.5t22.5 57.5q0 33 -22.5 56.5t-57.5 23.5q-33 0 -56.5 -23.5t-23.5 -56.5z" />
+<glyph unicode="&#xf0a7;" horiz-adv-x="1597" d="M0 584q0 78 34 109.5t84 44t106.5 17.5t99.5 29q41 23 74.5 65t68.5 77q18 16 36.5 33.5t39.5 33.5q23 18 39 33.5t30 42.5v348q0 49 35 84t84 35h643q49 0 84 -35t35 -84v-375q0 -61 16.5 -123.5t36 -128t35.5 -136t16 -148.5q0 -70 -17 -132.5t-52 -109.5t-90.5 -75.5 t-130.5 -28.5q-45 -39 -103.5 -56.5t-118.5 -7.5q-47 -29 -106 -39v-200q0 -49 -17.5 -93.5t-49 -76t-74.5 -50t-93 -18.5q-51 0 -94 18.5t-74.5 50t-49 75.5t-17.5 94l-2 376v134q-47 -23 -98.5 -38.5t-104.5 -15.5q-57 0 -112.5 19.5t-98.5 54.5t-68.5 85t-25.5 112z M120 595q1 -7 1 -11q0 -37 16.5 -64.5t43 -46t59 -29t65.5 -10.5q49 0 90 15.5t79 34t75 35t78 16.5q0 -170 1 -338t1 -340q0 -51 31.5 -84t84.5 -33q51 0 82 32.5t31 84.5q0 90 1 178t1 178q14 -14 34.5 -26.5t43.5 -12.5q74 0 123 59q29 -20 67 -20q37 0 74 18.5t53 53.5 q12 -2 24.5 -3t27.5 -1q49 0 81.5 19t52 50t28 72t8.5 84q0 70 -16.5 137.5t-35 134t-35 133t-16.5 136.5h-643v-5q-16 -41 -35.5 -66.5t-42 -47t-48 -42t-56.5 -48.5q-41 -41 -78 -85t-88 -73q-53 -29 -117.5 -39t-124.5 -23l-12 -3t-8 -9q-2 -4 -1 -11zM1210 1223 q0 -33 23.5 -56.5t56.5 -23.5q35 0 57.5 23.5t22.5 56.5q0 35 -22.5 57.5t-57.5 22.5q-33 0 -56.5 -23t-23.5 -57z" />
+<glyph unicode="&#xf0a8;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -29 20 -49l490 -490q20 -20 48.5 -20t49.5 20l74 74q20 20 20 48 t-20 50l-246 246h612q29 0 49.5 19.5t20.5 48.5v104q0 29 -20.5 49.5t-49.5 20.5h-612l246 246q20 20 20 48.5t-20 49.5l-74 74q-20 20 -48 20t-50 -20l-490 -490q-20 -20 -20 -49z" />
+<glyph unicode="&#xf0a9;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 717q0 -29 20.5 -49.5t48.5 -20.5h613l-246 -246q-20 -20 -20.5 -48.5 t20.5 -49.5l74 -74q20 -20 47.5 -20t50.5 20l489 490q20 20 20.5 49t-20.5 49l-489 490q-20 20 -49 20t-49 -20l-74 -74q-20 -20 -20.5 -48t20.5 -50l246 -246h-613q-29 0 -49 -19.5t-20 -48.5v-104z" />
+<glyph unicode="&#xf0aa;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 768q0 -29 20 -49l74 -74q20 -20 48 -20t50 20l246 246v-612q0 -29 19.5 -49.5 t47.5 -20.5h105q29 0 49.5 20.5t20.5 49.5v612l245 -246q20 -20 49 -20t50 20l73 74q20 20 20.5 48t-20.5 50l-489 490q-20 20 -49 20t-49 -20l-490 -490q-20 -20 -20 -49z" />
+<glyph unicode="&#xf0ab;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5t-311.5 62.5t-254 171t-171 254t-62.5 311.5zM240 769q0 -28 20 -50l490 -490q20 -20 48.5 -20t49.5 20l489 490q20 20 20.5 49 t-20.5 49l-73 74q-20 20 -48 20t-51 -20l-245 -246v612q0 29 -19.5 49.5t-48.5 20.5h-104q-29 0 -49.5 -20.5t-20.5 -49.5v-612l-246 246q-20 20 -49 20t-49 -20l-74 -74q-20 -20 -20 -48z" />
+<glyph unicode="&#xf0ac;" horiz-adv-x="1597" d="M0 768q0 162 63.5 307.5t173 255t254 173t308.5 63.5q162 0 307 -63.5t254.5 -173t173 -255t63.5 -307.5q0 -164 -63.5 -308.5t-173 -254t-254.5 -173t-307 -63.5q-164 0 -308.5 63.5t-254 173t-173 254t-63.5 308.5zM186 1141h4q4 0 12.5 3t8.5 -9q0 -4 -3 -10.5 t11 -6.5q4 0 5 6t3 0l4 -16v-2q0 -4 -5 -6t-3 -6q4 -4 9.5 -4h9.5l4 2l2 2q0 -6 6 -8.5t10 -2.5h2q0 -2 -4 -4t0 -6l23 -4v-2l14 -29q0 -4 -3 -10t-7 -6t-3 3t1 7t-2 7t-15 3q-2 0 -5 -1t-1 -5l12 -26l3 -2l2 -2q-10 0 -13.5 -24t-3.5 -34l4 -18l2 -6v-4l-4 -19l29 -43h6 q2 -4 -2 -8t-2 -8l8 -8q0 -10 4 -14.5t13 -12.5q-2 -12 20.5 -22.5t28.5 -14.5q8 -23 20 -45.5t29 -38.5l2 -14q0 -2 -5 -4t-1 -6l16 -7q4 4 10.5 -8t10.5 -16l-2 -6l12 -17l6 -2l4 8q-4 10 -14 26.5t-20.5 32t-17.5 28t-7 14.5t-2 16t-4 17q6 -4 15 -7.5t15 -7.5 q4 -25 19.5 -40t27.5 -34q-4 -4 0 -5t7 -1q4 -4 4 -14q14 -16 36.5 -44t22.5 -44v-2l-4 -14q6 -16 20.5 -25.5t28.5 -15.5h4q20 -10 41 -21.5t43 -19.5l23 14q8 -2 17 -10t20.5 -18.5t27 -19.5t35.5 -11q14 10 14 -5v-4l25 -30l4 -15q10 -6 20.5 -15t16.5 -20h4 q10 0 16.5 -9t16.5 -9q6 0 6 6q0 14 2 18.5t5 5.5t6 1t3 4l-4 6q-4 0 -6 -5t-6 -1l-14 -8l-17 4l-24 41l8 57q2 4 -7.5 9t-5.5 10q-14 8 -34 8q-4 0 -20.5 -3t-16.5 3t3 16t7 21.5t6 19.5t2 10l13 27l-3 4l-16 4q-4 0 -13 -6t-17.5 -14.5t-14.5 -16.5t-6 -14l-45 -10 q-14 0 -23 12q-4 16 -17 35.5t-13 34.5q0 23 8 43t-6 43q2 0 5 2t1 6l12 14l2 2l2 -2q14 10 37 7t29 14l16 -13q4 -2 9 4.5t5 10.5l-8 4l39 10l2 -6l19 2l22 -14q4 0 8 5t9 1l20 -21q-4 -8 -1 -12t3 -8q0 -6 10.5 -27.5t18.5 -21.5q10 0 9 13t-1 17q0 20 -8 39t-15 39v6 q0 10 12.5 17.5t12.5 9.5q10 8 22.5 16t18.5 19l8 16v10h6t4 6q0 2 -3 3.5t-7 5.5q-4 2 -8 6l6 4q4 6 6 15t-2 16l15 8q-2 -6 4 -8t10 0l10 16q-4 10 -5 7t5 7q10 4 19.5 9.5t19.5 5.5q2 -2 4 -2q6 0 6 2q0 10 -4 12l12 25q14 0 21 12l18 2q6 2 6 8v2l35 10l4 11l-10 14 q2 0 2 4t-4 6t-7 4t-7 4l-4 -2l4 2h6h13t9 9q0 12 -14 12q-18 0 -41.5 -8.5t-32.5 -28.5l-14 -8l18 18l3 6q0 4 -9.5 5.5t-5.5 1.5q18 0 27.5 4t15.5 9t12.5 10t18.5 9q23 -4 44 -2t44 2q6 4 12 8.5t8 10.5l23 4q4 -4 12 2t8 10q0 10 -11 13t-11 14q0 2 1 6t-3 4 q-6 0 -19.5 -6t-19.5 -10q-4 -2 -5 1t-1 7l2 -2l8 4l23 8l4 4q0 6 -7.5 8t-11.5 2t-12 -3t-8 3l2 4q-12 10 -21.5 22.5t-9.5 16.5t1 8.5t-5 4.5q-4 0 -7 -1t-3 5q0 4 -5 17t-14 13l-8 -8q0 -6 -6 -9t-6 -7h-4l-21 -12q-2 4 -5 2t-7 -2h-2l-2 -2q8 0 7 9t-7 9l-16 -4 q-4 0 -4.5 1t2 4t4.5 7t0 8t-6.5 1t-4.5 1h6l5 5q2 2 -1.5 7t-5.5 7l-22 4l-14 12q-2 -2 -7.5 3t-9.5 7l-16 -6l-39 9q-4 0 -8 -2.5t-4 -6.5t4 -6t4 -6t3 -21.5t-5 -13.5l-10 -14q2 -4 7 -7t10 -7.5t9 -10.5t2 -18l-45 -31v-4q0 -8 4 -15t8 -18q10 -4 9.5 -7t-7 -6t-12.5 -6 t-6 -5t-4 -2h-8h-4q0 2 2 3t2 5l-19 12v-2l-8 16q4 10 1 14.5t-3 10.5q0 16 -14.5 16t-30.5 -4q4 2 -1 6.5t-7 4.5q-16 0 -38 14t-36 14q-6 0 -14 -2t-15 -4q4 2 5 10l-13 23l-2 2q-6 0 -14 -5t-8 9q0 2 2 4t0 4q-2 12 5 20.5t11 18.5q4 4 4 8t4 4q8 0 15.5 4.5t17.5 6.5 l2 6q0 4 -21.5 7t-21.5 7l2 2q20 -6 30.5 -7t17.5 2t16.5 8t29.5 14q0 4 -21.5 8t-27.5 8h12q4 0 10.5 -2t10.5 -4q0 -4 6 -5t10 -1l15 10v6l-4 6l22 4q-2 2 1 4t5 2q6 0 12.5 -6t8.5 -6l20 8q-2 2 5.5 3t4.5 6l-14 16q-2 0 -3 3t1 3q10 0 6 10q-8 4 -17 9.5t-20 5.5 q-4 0 -9 -2t-5 -7q0 -4 5 -4t7 -4q4 -4 -2 -4t-6 -2q-8 0 -15 -12t-18 -17q-4 0 -3 2.5t-1 4.5q-2 4 -7 5t-5 5t5 13t-13 9q-8 0 -11.5 -6t-7.5 -12l-22 25l-17 2q0 8 3.5 14t-9.5 16q-6 4 -11 7.5t-11 3.5q-2 0 -9.5 -4.5t-13.5 -8.5t-6 -8t10 -4h-2q-6 0 -6 -8 q0 -2 9.5 -5t13.5 -3q4 2 6 -1.5t6 -3.5l8 3v-5q-2 -2 -2 -4l2 -8l-20 -10q-2 -2 -4 -2t-5 -2q0 -6 5.5 -12.5t-11.5 -6.5l-6 4q0 8 -16.5 13.5t-40 7.5t-47 3t-35.5 1l-33 -10l8 -19q-4 0 -5 -3t3 -5q-4 4 -15 14.5t-15 10.5l-17 4q-35 -2 -78 -33t-84 -72t-75.5 -84 t-53.5 -71zM471 674h2h-2zM487 1413q14 2 25.5 8t24.5 6l6 -4q6 -2 11 -2t9 -4q8 2 17 -2l6 4v8l-2 5l6 -2q6 0 12 10l-2 4q-4 2 -10 4t-10 2t-16.5 -5t-28 -11.5t-29.5 -12.5t-19 -8zM918 86q0 -4 3 -9t3 -9q0 -5 -2 -7q115 20 217 74.5t182 140.5h-2q-8 -4 -14 0l-5 -4 l-12 4h-4l-4 -8l2 8q-6 8 -14 15l-4 2q-4 0 -4 -8q2 16 -8.5 27.5t-26.5 11.5q0 -2 -2 -2h-4l-5 4h7l4 12l-11 8l-2 -2q-14 2 -20 16l-4 2l-2 -2l-4 -2q-12 -4 -21 -8q-12 4 -18 10l-27 -2q0 6 -4 12.5t-12 6.5q-10 0 -20.5 -2t-14.5 -13q0 -4 2 -8t4 -6v-8l-2 -6l-4 -2h-2 l-6 16l6 10q-2 4 -2 10.5t-2 10.5l-2 4h-6l-15 -10h-8l-4 -4q-2 -2 -2 -4t-2 -3l-2 3h-8q-8 -8 -9 -19l3 -4l-9 -6l-2 -4l-6 -4q0 -2 -1 -2t-1 -2v-2v-9l-2 -2v4l-2 2q-2 12 -23 21h-6v-4q2 -6 8.5 -10.5t10.5 -8.5q-2 2 -5 1t-3 -3v-4l14 -20v-39l4 -10q-4 -16 -16 -27v2 l-4 -2l-3 -2l-2 -10l2 -2v-2l-4 4l-2 -13l-12 -4q-6 -4 -5 -11t-5 -11l2 -4l-6 -6q0 -4 -1 -6.5t-1 -6.5l2 -14l6 -4l4 4l2 6l2 -12q0 -4 -4 -8q-6 -4 -12 -9.5t-6 -15.5z" />
+<glyph unicode="&#xf0ad;" horiz-adv-x="1593" d="M8 242q0 33 12.5 62.5t34.5 51.5l609 609q-16 66 -17 122q0 98 38 186.5t102.5 153t151.5 102.5t185 38q94 0 181.5 -36t154.5 -101l-442 -162l-43 -236l184 -153l443 159q-10 -92 -50.5 -171t-104 -137t-145 -91t-174.5 -33q-61 0 -127 17l-606 -607q-47 -47 -112 -47 q-68 0 -115 47q-23 23 -50.5 47.5t-52 52t-41 58.5t-16.5 68zM203 242q0 -33 22.5 -56.5t57.5 -23.5q33 0 56 23.5t23 56.5q0 35 -23.5 57.5t-55.5 22.5q-35 0 -57.5 -23t-22.5 -57z" />
+<glyph unicode="&#xf0ae;" d="M0 76v217q0 31 22.5 53.5t53.5 22.5h1689q33 0 55.5 -22.5t22.5 -53.5v-217q0 -31 -22.5 -53.5t-55.5 -22.5h-1689q-31 0 -53.5 22.5t-22.5 53.5zM0 662v215q0 31 22.5 53t53.5 22h1689q33 0 55.5 -22.5t22.5 -52.5v-215q0 -33 -22.5 -55.5t-55.5 -22.5h-1689 q-31 0 -53.5 22.5t-22.5 55.5zM0 1243v217q0 31 22.5 53.5t53.5 22.5h1689q33 0 55.5 -22.5t22.5 -53.5v-217q0 -31 -22.5 -53.5t-55.5 -22.5h-1689q-31 0 -53.5 22.5t-22.5 53.5zM752 692h999v154h-999v-154zM1059 109h692v153h-692v-153zM1366 1274h385v153h-385v-153z " />
+<glyph unicode="&#xf0b0;" horiz-adv-x="1566" d="M0 1458q0 33 22.5 55.5t55.5 22.5h1411q33 0 55.5 -22.5t22.5 -55.5t-23 -55l-565 -565v-791q0 -33 -22.5 -55.5t-55.5 -22.5t-55 23l-236 235q-23 23 -22 56v555l-565 565q-23 23 -23 55z" />
+<glyph unicode="&#xf0b1;" d="M0 115v512h713q-2 -6 -2 -19v-153q0 -55 38.5 -95.5t96.5 -40.5h153q55 0 94.5 40t39.5 96v153q0 12 -3 19h713v-512q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM0 743v371q0 47 34 81t81 34h424v231q0 31 21.5 53.5t53.5 22.5h615q33 0 55.5 -22.5 t22.5 -53.5v-231h422q47 0 80.5 -34t33.5 -81v-371h-1843zM692 1229h461v153h-461v-153zM825 455v153q0 18 21 19h153q18 0 19 -19v-153q0 -18 -19 -19h-153q-20 0 -21 19z" />
+<glyph unicode="&#xf0b2;" horiz-adv-x="1536" d="M0 80v477q0 51 24.5 61.5t59.5 -24.5l162 -162l340 338l-338 338l-164 -164q-35 -35 -59.5 -25.5t-24.5 60.5v477q0 31 23 57q27 23 57 23h477q51 0 61.5 -24.5t-24.5 -59.5l-160 -158l338 -338l332 334l-162 162q-35 35 -24.5 59.5t61.5 24.5h477q33 0 55 -23 q25 -25 25 -57v-477q0 -51 -24.5 -61.5t-59.5 24.5l-162 162l-334 -334l338 -336l158 160q35 35 59.5 24.5t24.5 -61.5v-477q0 -35 -25 -55q-23 -25 -55 -25h-477q-51 0 -61.5 24.5t24.5 59.5l166 166l-336 336l-340 -340l162 -162q35 -35 24.5 -59.5t-61.5 -24.5h-477 q-31 0 -55 25q-25 20 -25 55z" />
+<glyph unicode="&#xf0c0;" horiz-adv-x="1880" d="M0 852v152q0 18 1 47.5t10 56.5t29.5 46.5t57.5 19.5q-45 29 -71.5 75.5t-26.5 104.5q0 43 16.5 82t46 68.5t68.5 46t82 16.5q45 0 84 -16.5t67.5 -46t46 -68.5t17.5 -82q0 -57 -27.5 -104t-72.5 -76q37 0 57.5 -19.5t29.5 -46.5t11 -56.5t2 -47.5v-152 q-14 -8 -23.5 -18.5t-27.5 -10.5h-328q-16 0 -26.5 10.5t-22.5 18.5zM158 57v387q0 78 45 138.5t98 109.5q10 10 25.5 21.5t33.5 15.5q18 6 41 7t45 5q61 10 130 19.5t135 19.5q-90 57 -144.5 151.5t-54.5 207.5q0 88 34 166.5t92 136t136 91.5t166 34t166 -34t136 -91.5 t92 -136t34 -166.5q0 -113 -54 -207t-145 -152q66 -10 134.5 -19t130.5 -20q23 -4 45 -5t41 -7q18 -4 33.5 -15.5t27.5 -21.5q66 -59 103.5 -116.5t37.5 -131.5v-387q-12 -6 -20 -13t-18.5 -14t-23.5 -14.5t-36 -15.5h-1368q-35 0 -54.5 22.5t-43.5 34.5zM1452 852v152 q0 18 2 47.5t11.5 56.5t30 46.5t56.5 19.5q-45 29 -72.5 75.5t-27.5 104.5q0 43 16.5 82t46 68.5t68.5 46t84 16.5q43 0 82 -16.5t68.5 -46t46 -68.5t16.5 -82q0 -57 -26.5 -104t-71.5 -76q37 0 56.5 -19.5t28.5 -46.5t11 -56.5t2 -47.5v-152q-12 -8 -22.5 -18.5 t-26.5 -10.5h-328q-18 0 -27.5 10.5t-23.5 18.5z" />
+<glyph unicode="&#xf0c1;" horiz-adv-x="1597" d="M0 1137q0 88 34 166.5t92 137t136 92.5t168 34q86 0 166 -33t139 -92q8 -8 21.5 -20.5t26 -25t21.5 -25.5t9 -25q0 -18 -12 -31q-6 -8 -25 -12q-47 -10 -88 -22.5t-86 -31.5q-4 -4 -16 -4t-25.5 10.5t-31 21.5t-42 21.5t-57.5 10.5q-35 0 -66.5 -13.5t-54 -37t-36 -54 t-13.5 -67.5q0 -41 17.5 -75t43 -63.5t56.5 -56.5t57 -53l180 -178q23 -25 54.5 -37t66.5 -12q43 0 73 16t46 16q12 0 39 -21.5t55.5 -49t50 -55t21.5 -42.5q0 -29 -36 -51t-83 -38.5t-94 -26t-72 -9.5q-86 0 -164.5 33t-140.5 92l-303 305q-61 59 -94 139.5t-33 166.5z M578 1010q0 29 35.5 51t82.5 38.5t94 26t72 9.5q86 0 166 -33t139 -92l303 -305q61 -59 94 -139.5t33 -166.5q0 -90 -33.5 -167.5t-92 -136t-137.5 -92.5t-167 -34q-86 0 -165.5 34t-139.5 93q-8 8 -21.5 19.5t-25.5 25t-21.5 26.5t-9.5 26q0 18 13 28q6 8 24 12 q47 10 88 22.5t86 33.5q12 4 17 4q12 0 25.5 -10.5t30.5 -21.5t41 -21.5t58 -10.5q72 0 121 49.5t49 120.5q0 41 -17 76t-44 63.5t-56.5 55.5t-56.5 53l-178 180q-53 49 -123 50q-43 0 -72.5 -17.5t-46.5 -17.5q-12 0 -38.5 21.5t-55 49t-50 56t-21.5 41.5z" />
+<glyph unicode="&#xf0c2;" horiz-adv-x="1880" d="M0 391q0 70 23.5 132.5t64.5 113.5t96.5 86t120.5 51q-33 41 -51 90t-18 105q0 66 24.5 123t66.5 99t99 66.5t123 24.5q113 0 196 -72q18 76 61.5 141.5t103 113.5t133 75t157.5 27q96 0 182 -37t149.5 -100.5t100.5 -149.5t37 -182q0 -57 -13 -109.5t-36 -99.5 q117 -59 188.5 -170t71.5 -248q0 -98 -37 -183t-101.5 -149.5t-149.5 -101.5t-183 -37h-1018q-80 0 -151.5 30.5t-125 84t-84 125t-30.5 151.5z" />
+<glyph unicode="&#xf0c3;" horiz-adv-x="1536" d="M16 72q-39 72 7 141l516 803v366h-78q-33 0 -54.5 22.5t-21.5 55.5q0 31 21.5 53.5t54.5 22.5h614q33 0 55.5 -22.5t22.5 -53.5q0 -33 -22.5 -55.5t-55.5 -22.5h-76v-368l514 -801q45 -70 7 -141q-18 -35 -51 -53.5t-70 -18.5h-1262q-37 0 -69.5 18.5t-51.5 53.5z M377 479h782l-313 490v413h-154v-411z" />
+<glyph unicode="&#xf0c4;" horiz-adv-x="1916" d="M0 180q0 86 44 168t113.5 146.5t154.5 103.5t169 39h13q18 25 57 60.5t63 58.5v12v12q-12 12 -28.5 27.5t-35 32t-33.5 32t-23 27.5q-84 -6 -172.5 33t-160 105.5t-116.5 150.5t-45 168q0 98 62.5 154.5t160.5 56.5q82 0 168 -39t155.5 -103.5t114 -146.5t44.5 -168 q0 -10 -1.5 -21.5t-3.5 -21.5l86 -76l34 17q34 18 90.5 46.5t129 65.5t148.5 76t150.5 77t135 69.5t102.5 52t52 26.5q16 8 37 9q14 0 39 -4.5t52.5 -9.5t53 -11t41.5 -8q29 -4 47.5 -26.5t18.5 -51.5q0 -43 -35 -66l-700 -485l700 -485q35 -23 35 -66q0 -29 -18.5 -51.5 t-47.5 -26.5q-16 -4 -41.5 -9t-53 -10t-52.5 -9.5t-39 -4.5q-10 0 -18.5 2.5t-18.5 6.5l-842 430l-86 -76q2 -10 3.5 -21.5t1.5 -21.5q0 -86 -44.5 -168t-114 -146.5t-155.5 -103.5t-168 -39q-98 0 -160.5 56.5t-62.5 154.5zM197 1358q0 -23 11 -49.5t27.5 -51t35 -45 t34.5 -34.5q35 -29 82 -54.5t94 -25.5q10 0 27 4v6q0 23 -11.5 48.5t-27.5 50t-34.5 46t-35.5 35.5q-35 29 -82 54.5t-94 25.5q-14 0 -26 -4v-6zM199 180q0 -6 2 -10q6 0 11 -1t11 -1q41 0 90 24.5t92.5 61.5t72 83t28.5 89q0 4 -1 5t-1 5q-8 2 -23 2q-41 0 -90 -24.5 t-92 -61.5t-71.5 -83t-28.5 -89zM586 616q53 -25 82 -69l108 96l45 -27l1016 703l-172 31l-975 -498l6 -127zM586 920l35 -35q12 29 36.5 41t53.5 26l-43 37q-29 -45 -82 -69zM741 768q0 35 23.5 57.5t58.5 22.5q33 0 55.5 -22.5t22.5 -57.5q0 -33 -22.5 -56.5t-57.5 -23.5 q-33 0 -56.5 23.5t-23.5 56.5zM903 575l762 -389l172 31l-727 502z" />
+<glyph unicode="&#xf0c5;" horiz-adv-x="1597" d="M0 385v707q0 33 16.5 70.5t38.5 60.5l258 258q23 23 61 39t70 16h463q31 0 53.5 -22.5t22.5 -53.5v-250q16 8 35.5 13.5t40.5 5.5h463q31 0 53 -22.5t22 -53.5v-1075q0 -33 -22.5 -55.5t-52.5 -22.5h-830q-33 0 -55.5 22.5t-22.5 55.5v229h-536q-33 0 -55.5 22.5 t-22.5 55.5zM154 461h460v293q0 45 10.5 87t45.5 74l159 162v305h-278v-321q0 -31 -22.5 -53.5t-53.5 -22.5h-321v-524zM186 1139h211v211zM768 154h676v921h-279v-321q0 -31 -22.5 -53.5t-52.5 -22.5h-322v-524zM801 831h211v211z" />
+<glyph unicode="&#xf0c6;" horiz-adv-x="1470" d="M0 1128q0 90 35 170t94 139.5t139 94.5t170 35q88 0 169 -34t143 -95l655 -656q12 -12 12 -28q0 -10 -11 -26.5t-26.5 -32t-32 -27t-26.5 -11.5q-16 0 -29 13l-655 655q-41 41 -92 61.5t-107 20.5q-57 0 -108 -21.5t-89 -59.5t-59.5 -89t-21.5 -109q0 -55 20.5 -106 t61.5 -92l745 -746q55 -55 133 -55q39 0 74 15.5t60.5 41t41 60.5t15.5 73q0 78 -56 134l-563 563q-29 29 -69 28q-41 0 -71 -29.5t-30 -70.5t29 -70l475 -475q12 -12 12 -28q0 -10 -11 -26.5t-26.5 -32t-32 -27t-26.5 -11.5q-16 0 -29 13l-475 473q-35 37 -55.5 85 t-20.5 99q0 53 20.5 100.5t55.5 83t83.5 56t101.5 20.5q51 0 99 -20.5t85 -55.5l561 -563q102 -102 102 -246q0 -74 -27.5 -137t-74.5 -110t-110.5 -75t-137.5 -28q-143 0 -246 103l-745 745q-61 61 -95 142t-34 169z" />
+<glyph unicode="&#xf0c7;" horiz-adv-x="1536" d="M0 154v1228q0 63 45 108.5t109 45.5h1075q63 0 108 -45l154 -154q45 -45 45 -108v-1075q0 -63 -45 -108.5t-109 -45.5h-1228q-63 0 -108.5 45t-45.5 109zM154 846h1075v536h-1075v-536zM846 922v385h190v-385h-190z" />
+<glyph unicode="&#xf0c8;" horiz-adv-x="1536" d="M0 193v1150q0 39 15.5 75t41 61.5t60.5 41t76 15.5h1150q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-75 -15.5h-1150q-80 0 -136.5 56.5t-56.5 136.5z" />
+<glyph unicode="&#xf0c9;" d="M0 78v215q0 31 22.5 53.5t55.5 22.5h1689q31 0 53.5 -22.5t22.5 -53.5v-215q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM0 659v218q0 31 22.5 53t55.5 22h1689q31 0 53.5 -22.5t22.5 -52.5v-218q0 -31 -22.5 -53t-53.5 -22h-1689 q-33 0 -55.5 22.5t-22.5 52.5zM0 1243v217q0 31 22.5 53.5t55.5 22.5h1689q31 0 53.5 -22.5t22.5 -53.5v-217q0 -31 -22.5 -53.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 53.5z" />
+<glyph unicode="&#xf0ca;" d="M0 211q0 39 15.5 75t41 61.5t60.5 40.5t76 15q39 0 73.5 -15t61 -40.5t42 -61.5t15.5 -75q0 -41 -15.5 -76t-42 -60.5t-61.5 -41t-73 -15.5q-80 0 -136.5 56.5t-56.5 136.5zM0 768q0 39 15.5 75t41 61.5t60.5 41t76 15.5q39 0 73.5 -15.5t61 -41t42 -61.5t15.5 -75 q0 -41 -15.5 -76t-42 -60.5t-61.5 -41t-73 -15.5q-41 0 -76 15.5t-60.5 41t-41 60.5t-15.5 76zM0 1325q0 39 15.5 75t41 61.5t60.5 41t76 15.5q39 0 73.5 -15.5t61 -41t42 -61.5t15.5 -75q0 -41 -15.5 -76t-42 -60.5t-61.5 -40.5t-73 -15q-41 0 -76 15t-60.5 40.5t-41 60.5 t-15.5 76zM522 154v114q0 33 22.5 55.5t55.5 22.5h1167q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-1167q-33 0 -55.5 21.5t-22.5 54.5zM522 711v114q0 33 22.5 55.5t55.5 22.5h1167q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5 h-1167q-33 0 -55.5 22.5t-22.5 55.5zM522 1268v114q0 33 22.5 55.5t55.5 22.5h1167q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1167q-33 0 -55.5 22.5t-22.5 55.5z" />
+<glyph unicode="&#xf0cb;" d="M0 594q0 55 30.5 90t68.5 61.5t69 50t31 56.5q0 29 -17.5 44t-46.5 15q-25 0 -44 -15t-34 -36l-53 37q23 39 58.5 60.5t78.5 21.5q55 0 96.5 -32t41.5 -91q0 -49 -30 -80t-67 -55.5t-67.5 -47t-30.5 -55.5h143v54h66v-115h-289q-2 10 -3 18.5t-1 18.5zM4 55l37 54 q6 -4 12 -10.5t15 -10.5q12 -8 29.5 -14t37.5 -6q35 0 55.5 18t20.5 47q0 31 -23.5 48.5t-58.5 17.5h-23l-16 37l90 108l6 6t7 6l4 6h-9q-4 -2 -14 -2h-92v-49h-66v111h263v-53l-97 -115q41 -6 74 -35t33 -82t-38 -95t-110 -42q-35 0 -60.5 9t-41.5 20q-25 14 -35 26z M14 1434l105 102h67v-360h93v-62h-259v62h93v258v8h-2q-10 -16 -22.5 -28.5t-29.5 -27.5zM522 154v114q0 33 22.5 55.5t55.5 22.5h1167q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -54.5t-53.5 -21.5h-1167q-33 0 -55.5 21.5t-22.5 54.5zM522 711v114q0 33 22.5 55.5 t55.5 22.5h1167q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1167q-33 0 -55.5 22.5t-22.5 55.5zM522 1268v114q0 33 22.5 55.5t55.5 22.5h1167q31 0 53.5 -22.5t22.5 -55.5v-114q0 -33 -22.5 -55.5t-53.5 -22.5h-1167q-33 0 -55.5 22.5t-22.5 55.5z " />
+<glyph unicode="&#xf0cc;" horiz-adv-x="1536" d="M0 692v152h1536v-152h-1536zM268 1114q0 117 44 202t118 141t170 83t203 27q88 0 176 -20.5t172 -49.5q20 -72 27.5 -156t7.5 -157q0 -10 -1 -22.5t-3 -24.5l-13 -2q-23 2 -50 2t-50 6q-18 59 -44 114.5t-62.5 98.5t-88 68.5t-122.5 25.5q-49 0 -94.5 -13.5t-80 -40 t-56 -66.5t-21.5 -93q0 -59 28.5 -102t75.5 -75t105.5 -54.5t118 -42t113.5 -39t93 -41.5h-696q-33 53 -51.5 110.5t-18.5 120.5zM285 310v63v45l110 2q31 -72 64 -134.5t76 -108.5t104 -71.5t152 -25.5q55 0 110 16.5t100.5 48t74 78.5t28.5 109q0 76 -49 128t-119 88 t-146.5 59.5t-132.5 45.5h617q8 -16 15 -38.5t10.5 -48t5.5 -50t2 -43.5q0 -131 -47.5 -226t-127 -156.5t-186 -91.5t-225.5 -30q-53 0 -93 4t-78 12.5t-78 20.5t-93 29q-12 4 -38 12t-36 16q-8 6 -12 50.5t-6 96.5t-2 100z" />
+<glyph unicode="&#xf0cd;" horiz-adv-x="1536" d="M0 0v154h1536v-154h-1536zM0 1532q10 2 19.5 2h19.5q72 0 140.5 -5t137.5 -5q100 0 200.5 2t199.5 6q-4 -16 -1 -36.5t3 -37.5v-8q-66 -10 -108 -7t-65.5 -5t-32.5 -39t-9 -109q0 -137 4 -272t10 -273q8 -147 88 -237t238 -90q125 0 207 29.5t131 88t69.5 146.5t20.5 203 q0 20 -2 65t-5 102.5t-8.5 119t-11.5 113.5t-13 89t-15 45q-33 33 -78 33q-6 0 -23.5 -1t-36 -1t-34 1t-21.5 3l2 82q82 4 163 -3t165 -7q39 0 77.5 5t79.5 5q4 0 9.5 -1t9.5 -1q2 -12 4 -24.5t2 -24.5t-4 -29q-23 -6 -52.5 -8t-58 -7t-48 -16.5t-19.5 -38.5q0 -14 1 -27 t3 -28q2 -6 5 -38.5t5 -79t4 -101.5t4 -103t3 -85t1 -50q0 -37 -2 -80.5t-8 -89t-17.5 -87.5t-29.5 -74q-41 -68 -104.5 -114t-137 -72.5t-153.5 -38t-154 -11.5q-72 0 -144.5 9.5t-140.5 35.5q-96 35 -151 88.5t-84 121t-36 148.5t-7 173v321v42t-1 62.5t-5 60.5t-10 38 q-12 16 -37 23.5t-53.5 10.5t-56.5 3t-44 4z" />
+<glyph unicode="&#xf0ce;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM154 154h460v335h-460v-335zM154 565h460v332h-460v-332zM154 975h460v332h-460v-332zM692 154h461v335h-461v-335zM692 565h461v332h-461v-332z M692 975h461v332h-461v-332zM1229 154h461v335h-461v-335zM1229 565h461v332h-461v-332zM1229 975h461v332h-461v-332z" />
+<glyph unicode="&#xf0d0;" d="M0 197q0 39 29 61l1579 1247q20 17 47 17q35 0 59 -29q10 -12 29.5 -33.5t38 -44t32 -47.5t13.5 -43q0 -39 -29 -61l-1579 -1248q-20 -16 -47 -16q-37 0 -59 29q-10 12 -30 33.5t-38 44t-31.5 47t-13.5 43.5zM256 922l117 36l37 117l34 -117l119 -36l-119 -37l-34 -117 l-37 117zM373 1229l235 71l72 236l72 -236l235 -71l-235 -72l-72 -235l-72 235zM942 1382l117 37l37 117l37 -117l116 -37l-116 -36l-37 -117l-37 117zM1286 1153l94 -121l369 291l-94 121zM1536 885l117 35l37 118l36 -118l117 -35l-117 -37l-36 -117l-37 117z" />
+<glyph unicode="&#xf0d1;" d="M0 358v404q0 25 6 51.5t17.5 53t27 51t31.5 40.5l223 222q16 16 41 31.5t51.5 26.5t53 17.5t51.5 6.5h80v198q0 31 22.5 53.5t52.5 22.5h1108q33 0 55.5 -22.5t22.5 -53.5v-1102q0 -31 -22.5 -53t-55.5 -22h-75v-7q0 -63 -25 -119.5t-65.5 -97.5t-97 -65.5t-120.5 -24.5 q-63 0 -119.5 24.5t-97.5 65.5t-65.5 97.5t-24.5 119.5v7h-307v-7q0 -63 -24.5 -119.5t-65.5 -97.5t-97.5 -65.5t-119.5 -24.5t-119.5 24.5t-97.5 65.5t-65.5 97.5t-24.5 119.5v7h-78q-31 0 -53.5 22.5t-22.5 52.5zM193 700h387v369h-78q-10 0 -31.5 -8t-30.5 -17l-223 -221 q-8 -8 -16 -29.5t-8 -31.5v-62zM346 276q0 -47 34 -80.5t81 -33.5t80.5 33.5t33.5 80.5t-33.5 81t-80.5 34t-81 -33.5t-34 -81.5zM1268 276q0 -47 33.5 -80.5t80.5 -33.5t81 33.5t34 80.5t-33.5 81t-81.5 34q-47 0 -80.5 -33.5t-33.5 -81.5z" />
+<glyph unicode="&#xf0d2;" horiz-adv-x="1597" d="M0 768q0 166 62.5 311.5t171 254t254 171t311.5 62.5t311 -62.5t254 -171t171 -254t62 -311.5t-62 -311.5t-171 -254t-254 -171t-311 -62.5q-59 0 -115.5 8.5t-112.5 24.5q23 35 46.5 80t35.5 92l11 41q6 23 16 66t29 112q23 -41 76 -70.5t118 -29.5q96 0 176 41 t136.5 114.5t88 174t31.5 217.5q0 88 -35.5 171t-102.5 147.5t-160 102t-208 37.5q-141 0 -248.5 -46t-179 -118.5t-107.5 -160.5t-36 -174q0 -104 40 -187.5t124 -117.5q31 -10 41 20q2 10 7 31.5t9 32.5q4 16 1 23t-13 22q-53 59 -53 155q0 76 27.5 145.5t78.5 122t124 84 t163 31.5q80 0 142.5 -23.5t105.5 -64.5t64.5 -96t21.5 -121q0 -86 -18.5 -164t-52.5 -136t-80 -92t-103 -34q-31 0 -57.5 12.5t-45 34t-25.5 49t1 60.5q18 76 44.5 151.5t26.5 130.5q0 49 -26.5 84t-81.5 35q-66 0 -110 -58.5t-44 -146.5q-2 -23 2 -45q2 -18 7.5 -40.5 t15.5 -41.5q-33 -141 -53.5 -225t-30.5 -131q-12 -55 -18 -80q-10 -45 -13.5 -93t-1.5 -89q-104 45 -192 119.5t-151.5 169t-98.5 207t-35 235.5z" />
+<glyph unicode="&#xf0d3;" horiz-adv-x="1536" d="M0 193v1150q0 39 15.5 75t41 61.5t60.5 41t76 15.5h1150q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5t-61.5 -41t-75 -15.5h-829q27 39 59.5 95.5t49.5 117.5l10 41q6 25 17.5 68t29.5 112q20 -41 75.5 -70.5t121.5 -29.5q96 0 176 42t137 115.5 t89 175t32 220.5q0 90 -37 173t-103.5 147.5t-161 102.5t-208.5 38q-143 0 -251 -46.5t-180.5 -120t-108.5 -162.5t-36 -175q0 -104 40 -188.5t124 -118.5q14 -6 25.5 -1t15.5 21q4 10 8 31.5t8 34.5q8 23 -12 43q-23 29 -37 67.5t-14 91.5q0 76 27.5 145.5t79 123t124 85 t164.5 31.5q82 0 144.5 -23.5t105.5 -64.5t64.5 -97t21.5 -124q0 -86 -18.5 -164t-52 -136t-81 -93t-104.5 -35q-31 0 -57.5 12.5t-45 34t-25.5 49t1 60.5q18 78 45 154.5t27 131.5q0 49 -26.5 85t-82.5 36q-66 0 -110.5 -59t-44.5 -150q-2 -23 2 -45q4 -43 22 -84 q-35 -141 -54.5 -226t-29.5 -132q-12 -55 -18 -80q-16 -70 -14 -142.5t6 -117.5h-260q-80 0 -136.5 56.5t-56.5 136.5z" />
+<glyph unicode="&#xf0d4;" horiz-adv-x="1536" d="M0 342v438q55 -68 120.5 -96.5t153.5 -28.5h36t34 4q-8 -23 -14 -42t-6 -42q0 -41 18 -77.5t43 -67.5q-104 -4 -198.5 -22.5t-186.5 -65.5zM0 1214v129q0 39 15.5 75t41 61.5t60.5 41t76 15.5h1150q80 0 136.5 -56.5t56.5 -136.5v-1150q0 -41 -15.5 -76t-41 -60.5 t-61.5 -41t-75 -15.5h-583q23 39 36 81t13 89q0 70 -21.5 121t-54.5 90t-70.5 69.5t-70.5 57.5t-54.5 53.5t-21.5 59.5q0 49 34 81.5t76 72.5t75.5 99.5t33.5 163.5q0 78 -39 157t-106 122h131l133 76h-428q-129 0 -237.5 -36t-188.5 -143zM2 170q14 57 55 96t96.5 61.5 t115 33t110.5 10.5h31.5t31.5 -2q37 -27 78 -54.5t75 -61.5t55.5 -75t21.5 -92q0 -47 -19 -86h-460q-72 0 -126.5 49t-64.5 121zM102 1094q0 43 11.5 85t35 73.5t59.5 51t85 19.5q68 0 118 -41t81.5 -100.5t47 -128t15.5 -123.5q0 -45 -9 -84t-30.5 -68.5t-56.5 -47 t-84 -17.5q-66 0 -116 39t-85 96t-53.5 123.5t-18.5 122.5zM854 1051h223v-224h109v224h223v108h-223v225h-109v-225h-223v-108z" />
+<glyph unicode="&#xf0d5;" horiz-adv-x="1536" d="M0 262q0 100 56.5 166t139.5 105.5t179 56t174 18.5q-23 29 -41.5 64t-18.5 76q0 23 6.5 41t14.5 40q-16 -4 -33.5 -4h-34.5q-68 0 -130 23.5t-108 66.5t-74 101.5t-28 130.5q0 68 25 128t67 109.5t98 84t120 49.5q88 18 176 18h411l-127 -74h-127q72 -43 107 -120.5 t35 -157.5q0 -94 -33 -149.5t-73 -94.5t-72.5 -70.5t-32.5 -78.5q0 -45 44 -82t97 -82t97 -107.5t44 -161.5q0 -102 -50 -175.5t-126.5 -121t-170 -70t-181.5 -22.5q-66 0 -141.5 15.5t-140 50.5t-106.5 90t-42 137zM174 307q0 -68 35 -116t87 -78.5t114.5 -44t117.5 -13.5 q51 0 104.5 11.5t96.5 38t69.5 68.5t26.5 103q0 49 -21.5 89.5t-53 72t-70.5 59t-76 52.5q-14 2 -29.5 3t-29.5 1q-57 0 -123 -12.5t-121 -41t-91 -75.5t-36 -117zM276 1247q0 -53 17.5 -117.5t51.5 -120t82.5 -92t111.5 -36.5q96 0 134 61.5t38 147.5q0 53 -14.5 118.5 t-45 124t-78 97t-112.5 38.5q-47 0 -82 -18t-57.5 -49t-34 -71t-11.5 -83zM999 1206h215v-215h107v215h215v105h-215v217h-107v-217h-215v-105z" />
+<glyph unicode="&#xf0d6;" d="M0 78v1382q0 31 22.5 53.5t55.5 22.5h1689q31 0 53.5 -22.5t22.5 -53.5v-1382q0 -33 -22.5 -55.5t-53.5 -22.5h-1689q-33 0 -55.5 22.5t-22.5 55.5zM154 461q63 0 119.5 -24.5t97.5 -65.5t65.5 -97.5t24.5 -119.5h921q0 63 25 119.5t65.5 97.5t97 65.5t120.5 24.5v614 q-63 0 -120 24.5t-97.5 65.5t-65.5 97.5t-25 119.5h-921q0 -63 -24.5 -119.5t-65.5 -97.5t-97.5 -65.5t-119.5 -24.5v-614zM539 768q0 104 29.5 195.5t81.5 159t122 106.5t150 39t149.5 -39t121.5 -106.5t83 -159t31 -195.5t-31 -195.5t-83 -159t-122 -106.5t-149 -39 q-80 0 -150 39t-122 106.5t-81.5 159t-29.5 195.5zM692 969l94 -99l39 35q8 6 11.5 13.5t7.5 11.5q4 2 8 10h2v-16q0 -8 -1 -16.5t-1 -18.5v-283h-139v-129h438v129h-141v529h-140z" />
+<glyph unicode="&#xf0d7;" horiz-adv-x="1228" d="M6 967q20 47 72 47h1075q50 0 70 -47t-17 -84l-536 -537q-27 -23 -56 -22q-29 0 -55 22l-536 537q-37 37 -17 84z" />
+<glyph unicode="&#xf0d8;" horiz-adv-x="1228" d="M6 371q-20 47 17 84l536 536q23 23 55 23q31 0 54 -23l538 -536q37 -37 17 -84t-70 -47h-1077q-50 0 -70 47z" />
+<glyph unicode="&#xf0d9;" horiz-adv-x="692" d="M0 768q0 33 23 55l538 537q16 16 38 21t44 -5q23 -8 36 -27.5t13 -41.5v-1076q0 -25 -13 -43t-36 -28t-44 -5t-38 21l-538 539q-23 23 -23 53z" />
+<glyph unicode="&#xf0da;" horiz-adv-x="692" d="M0 231v1076q0 49 47 69t84 -16l539 -537q23 -23 22 -55q0 -31 -22 -53l-539 -539q-37 -37 -84 -16q-47 20 -47 71z" />
+<glyph unicode="&#xf0db;" d="M0 115v1306q0 47 34 81t81 34h1614q47 0 80.5 -34t33.5 -81v-1306q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34t-34 81zM154 154h692v1153h-692v-1153zM999 154h691v1153h-691v-1153z" />
+<glyph unicode="&#xf0dc;" horiz-adv-x="1228" d="M0 584q0 31 22.5 54.5t53.5 23.5h1075q33 0 55.5 -23t22.5 -55q0 -33 -23 -56l-536 -536q-23 -23 -56 -23t-55 23l-536 536q-23 23 -23 56zM0 952q0 33 23 56l536 536q23 23 55 23q33 0 56 -23l536 -536q23 -23 23 -56q0 -31 -22.5 -54.5t-55.5 -23.5h-1075 q-31 0 -53.5 23t-22.5 55z" />
+<glyph unicode="&#xf0dd;" horiz-adv-x="1228" d="M0 584q0 31 22.5 54.5t53.5 23.5h1077q31 0 53.5 -23t22.5 -55q0 -33 -23 -56l-536 -536q-23 -23 -56 -23q-35 0 -53 23l-538 536q-23 23 -23 56z" />
+<glyph unicode="&#xf0de;" horiz-adv-x="1228" d="M0 952q0 33 23 56l536 536q23 23 55 23q33 0 56 -23l536 -536q23 -23 23 -56q0 -31 -22.5 -54.5t-53.5 -23.5h-1077q-31 0 -53.5 23t-22.5 55z" />
+<glyph unicode="&#xf0e0;" d="M0 115v905q10 -10 20.5 -17.5t20.5 -15.5q129 -96 256 -191.5t252 -195.5q39 -31 82 -62.5t89 -57t96.5 -41t103.5 -15.5q55 0 105 15.5t96 40t89 56t84 64.5q125 100 252 195.5t256 191.5q10 8 20.5 15.5t20.5 17.5v-905q0 -47 -33.5 -81t-80.5 -34h-1614q-47 0 -81 34 t-34 81zM2 1434q0 41 36 71.5t77 30.5h1614q41 0 76.5 -30.5t35.5 -71.5q0 -31 -18.5 -69t-45 -75t-57 -67.5t-53.5 -48.5q-123 -92 -241.5 -182.5t-239.5 -182.5q-25 -18 -57.5 -45t-67.5 -51.5t-71 -42t-66 -17.5h-2h-2q-31 0 -67 17.5t-70.5 42t-67.5 51.5t-58 45 q-121 92 -239.5 182t-241.5 183q-23 18 -53.5 48.5t-57 67.5t-45 75t-18.5 69z" />
+<glyph unicode="&#xf0e1;" horiz-adv-x="1576" d="M0 1376q0 39 15.5 74t41 60.5t60 41t73.5 15.5t74 -15.5t61.5 -41t41 -60.5t14.5 -74t-14.5 -73.5t-41 -60t-61.5 -41t-74 -15.5t-73.5 15.5t-60 41t-41 60t-15.5 73.5zM10 41v991q0 16 12.5 28.5t28.5 12.5h281q16 0 28.5 -12t12.5 -29v-991q0 -16 -12.5 -28.5 t-28.5 -12.5h-281q-16 0 -28.5 12.5t-12.5 28.5zM524 41v991q0 16 12.5 28.5t28.5 12.5h273q33 0 37 -25.5t4 -48.5q57 53 129.5 76t150.5 23q190 0 304 -95.5t114 -293.5v-668q0 -16 -12.5 -28.5t-28.5 -12.5h-289q-16 0 -27.5 12.5t-11.5 28.5v604q0 76 -27.5 116 t-111.5 40q-53 0 -89 -17.5t-56.5 -47t-28.5 -70.5t-8 -88v-537q0 -16 -12.5 -28.5t-28.5 -12.5h-281q-16 0 -28.5 12.5t-12.5 28.5z" />
+<glyph unicode="&#xf0e2;" horiz-adv-x="1591" d="M0 662q-4 39 35 45l158 20q12 2 30 -8q12 -8 15 -27q14 -102 63 -191t123 -153.5t169 -101.5t200 -37q115 0 217 44t178 120t120 177t44 218t-44 218t-120 177t-178.5 120t-216.5 44q-94 0 -181.5 -30.5t-158.5 -88.5l159 -159q35 -35 24 -58.5t-58 -23.5h-463 q-16 0 -29.5 6t-24.5 16q-25 25 -24 55v463q0 47 24.5 57.5t59.5 -24.5l162 -162q109 92 238.5 140.5t271.5 48.5q166 0 311 -62.5t253.5 -171t171 -254t62.5 -311.5t-62.5 -311.5t-171 -254t-254 -171t-310.5 -62.5q-150 0 -285 52.5t-241.5 145.5t-176.5 220t-90 275z" />
+<glyph unicode="&#xf0e3;" horiz-adv-x="1916" d="M0 651q0 49 37 91t88 42q35 0 68 -22q-20 14 -21 37q0 8 8 24l334 502q14 20 37 21q16 0 24 -9q-25 18 -40 43t-15 56q0 49 38 90t87 41q33 0 62 -19l514 -342q23 -16 36 -40.5t13 -53.5q0 -25 -10.5 -48.5t-26.5 -41.5t-40 -29.5t-48 -11.5q-33 0 -68 23q20 -14 21 -37 q0 -14 -8 -25l-105 -158l227 -151q14 4 28 6t28 2q53 0 94 -29l475 -315q37 -27 58.5 -65.5t21.5 -84.5q0 -74 -52.5 -126t-125.5 -52q-55 0 -99 31l-475 315q-70 47 -75 131l-228 152l-106 -158q-14 -20 -37 -20q-14 0 -25 8q55 -39 56 -100q0 -25 -10.5 -47.5t-28 -41 t-40 -29.5t-46.5 -11q-35 0 -62 18l-514 342q-49 33 -49 92z" />
+<glyph unicode="&#xf0e4;" horiz-adv-x="1880" d="M0 627q0 195 73.5 365.5t201.5 298.5t299 202t366 74t366 -74t299 -202t201.5 -299t73.5 -365q0 -78 -14.5 -159t-42 -159t-68.5 -149.5t-92 -130.5q-23 -29 -59 -29h-1328q-37 0 -59 29q-53 59 -93 130.5t-67.5 149.5t-42 159t-14.5 159zM158 627q0 -49 33.5 -83 t82.5 -34t83 34t34 83t-34.5 82.5t-82.5 33.5q-49 0 -82.5 -33.5t-33.5 -82.5zM352 1098q0 -49 35 -84t82 -35q49 0 84 35t35 84t-35 82.5t-84 33.5q-47 0 -82 -33.5t-35 -82.5zM743 313q0 -82 57.5 -139t139.5 -57t139.5 57t57.5 139q0 49 -26 91t-67 71q4 14 15.5 55 t27 95.5t33 114t30.5 110.5t22.5 88t9.5 43q0 23 -17.5 40t-40.5 17q-20 0 -35.5 -12t-21.5 -31l-135 -487q-39 -2 -74 -17.5t-60.5 -42t-40 -61.5t-14.5 -74zM823 1292q0 -49 34 -82.5t83 -33.5t83 33.5t34 82.5t-34 83t-83 34t-83 -34t-34 -83zM1292 1098q0 -49 35 -83 t84 -34t83 34t34 83t-34 82.5t-83 33.5t-84 -33.5t-35 -82.5zM1489 627q0 -49 34 -83t83 -34t82.5 34t33.5 83t-33.5 82.5t-82.5 33.5t-83 -33.5t-34 -82.5z" />
+<glyph unicode="&#xf0e5;" horiz-adv-x="1916" d="M0 866q0 123 49 225.5t130 183.5t184.5 139.5t209.5 92.5q94 31 190.5 45.5t194.5 14.5t194.5 -14.5t190.5 -45.5q106 -35 210 -93t185 -139t130 -183.5t49 -225.5t-49 -225t-130 -183t-184.5 -140.5t-210.5 -92.5q-94 -31 -190 -45t-195 -14q-92 0 -180 12 q-92 -72 -195.5 -119t-215.5 -73q-27 -4 -55.5 -10.5t-53.5 -6.5q-16 0 -27.5 11.5t-11.5 27.5q0 12 8.5 21.5t16.5 17.5q31 33 53 60.5t37.5 57.5t25 64.5t17.5 79.5q-78 43 -145.5 100.5t-120 128t-82 153.5t-29.5 175zM160 866q0 -72 24.5 -133t65.5 -113.5t94 -95.5 t111 -75q27 -14 51 -27.5t49 -28.5q-10 -47 -17.5 -94t-19.5 -94q59 29 111.5 64.5t105.5 76.5q55 -8 110.5 -14t112.5 -6q156 0 308 43q84 25 171 68.5t158.5 107t116.5 143.5t45 178t-45 178t-116.5 143.5t-158.5 107.5t-171 69q-152 43 -308 43q-158 0 -307 -43 q-84 -25 -171 -69t-158.5 -107.5t-116.5 -143t-45 -178.5z" />
+<glyph unicode="&#xf0e6;" horiz-adv-x="1916" d="M0 997q0 98 40 182.5t106.5 151t150.5 113.5t170 76q76 25 154.5 36t156.5 11q80 0 159 -11.5t155 -35.5q86 -29 170 -76t149.5 -113.5t105 -150.5t39.5 -183q0 -98 -39.5 -182t-105 -149.5t-149.5 -113.5t-170 -77q-154 -47 -314 -47q-37 0 -72.5 3t-72.5 7 q-150 -115 -336 -155q-20 -4 -43 -9.5t-45 -5.5q-12 0 -21.5 9.5t-9.5 23.5q0 10 7.5 17.5l13.5 13.5q51 51 72.5 96t35.5 117q-63 35 -118.5 82t-97.5 104t-66.5 124t-24.5 142zM160 997q0 -72 30.5 -127t77.5 -99t104.5 -78t112.5 -64l-20 -111q33 18 63.5 42t59.5 46 q47 -6 95 -12t95 -6q135 0 264 41q61 18 124 52t114 81t84 105.5t33 129.5q0 72 -33 131.5t-84 105.5t-113.5 80t-124.5 52q-63 23 -129.5 32t-134.5 9q-66 0 -132 -9t-132 -32q-59 -18 -122.5 -52t-115 -80t-84 -105.5t-32.5 -131.5zM649 258l27 16q51 -6 102 -6 q197 0 381 62q111 37 211 99.5t177 147.5t123 190t46 230q0 41 -6 84q90 -72 148.5 -169t58.5 -214q0 -76 -24.5 -142.5t-66.5 -123.5t-97.5 -104t-118.5 -82q14 -72 35.5 -117t72.5 -96q6 -6 13.5 -14.5t7.5 -18.5q0 -16 -10.5 -23.5t-24.5 -7.5q-20 0 -43 5.5t-41 9.5 q-186 41 -336 155q-37 -4 -72.5 -7t-72.5 -3q-129 0 -254 32t-236 97z" />
+<glyph unicode="&#xf0e7;" horiz-adv-x="933" d="M0 557q0 8 2 10l209 932q4 16 16.5 26.5t28.5 10.5h344q18 0 31.5 -13.5t13.5 -33.5q0 -6 -1 -10t-3 -11l-180 -524q12 4 47 13.5t81 21.5t95 26.5t93 25.5t75 18.5t37 7.5q18 0 31.5 -13.5t13.5 -33.5q0 -12 -2 -19l-565 -1306q-10 -29 -43 -29q-18 0 -33 13.5t-15 33.5 q0 6 3 10l204 914q-12 -4 -48 -14.5t-82 -22.5t-97 -26.5t-95 -27t-76 -19.5t-38 -7q-20 0 -33.5 14.5t-13.5 32.5z" />
+<glyph unicode="&#xf0e8;" d="M0 78v383q0 33 22.5 55.5t55.5 22.5h133v153q0 55 40 94t95 39h518v174h-135q-31 0 -53.5 21.5t-22.5 54.5v385q0 31 22.5 53.5t53.5 22.5h385q31 0 53.5 -22.5t22.5 -53.5v-385q0 -33 -22.5 -54.5t-53.5 -21.5h-135v-174h518q55 0 95 -38.5t40 -94.5v-153h135 q31 0 53.5 -22.5t22.5 -55.5v-383q0 -33 -22.5 -55.5t-53.5 -22.5h-385q-33 0 -54 22.5t-21 55.5v383q0 33 21.5 55.5t53.5 22.5h136v153q0 18 -21 19h-518v-172h135q31 0 53.5 -22.5t22.5 -55.5v-383q0 -33 -22.5 -55.5t-53.5 -22.5h-385q-31 0 -53.5 22.5t-22.5 55.5v383 q0 33 22.5 55.5t53.5 22.5h135v172h-518q-20 0 -20 -19v-153h135q33 0 55.5 -22.5t22.5 -55.5v-383q0 -33 -22.5 -55.5t-55.5 -22.5h-383q-33 0 -55.5 22.5t-22.5 55.5z" />
+<glyph unicode="&#xf0e9;" horiz-adv-x="1884" d="M0 770q31 137 109.5 253t193.5 204t257 141t302 66v53q0 35 23.5 57.5t56.5 22.5q35 0 57.5 -22.5t22.5 -57.5v-53q160 -12 303 -65.5t258 -141.5t192.5 -204t108.5 -253q6 -29 -20 -43q-10 -6 -19 -6q-20 0 -28 12q-98 102 -218 103q-86 0 -163.5 -54.5t-130.5 -152.5 q-10 -23 -35 -23t-35 23q-82 150 -213 194v-526q0 -68 -23.5 -127t-63.5 -104.5t-93.5 -71t-114.5 -25.5t-115.5 25.5t-94.5 71t-63.5 104.5t-23.5 127q0 35 23.5 57.5t56.5 22.5q35 0 57.5 -22.5t22.5 -57.5q0 -70 40 -119t97 -49q55 0 95 49t40 119v526 q-131 -45 -213 -194q-10 -23 -35 -23t-34 23q-53 98 -130 152.5t-163 54.5q-121 0 -217 -103q-12 -12 -31 -12q-10 0 -19 6q-25 14 -20 43z" />
+<glyph unicode="&#xf0ea;" horiz-adv-x="1597" d="M0 385v1075q0 31 22.5 53.5t55.5 22.5h921q31 0 53.5 -22.5t22.5 -53.5v-231h33h61q25 0 55.5 -13.5t49.5 -29.5l280 -281q18 -18 30.5 -49t12.5 -55v-62v-678q0 -27 -17 -44t-44 -17h-860q-27 0 -44.5 17.5t-17.5 43.5v246h-536q-33 0 -55.5 22.5t-22.5 55.5zM276 1321 q0 -12 9.5 -21.5t21.5 -9.5h461q12 0 21.5 9.5t9.5 21.5v61q0 12 -9.5 21.5t-21.5 9.5h-461q-12 0 -21.5 -9t-9.5 -22v-61zM737 123h738v555h-367q-27 0 -44 17.5t-17 43.5v367h-310v-983zM1169 801h306q0 2 -3.5 8t-5.5 10l-280 279q0 4 -6 4q-2 0 -2 1t-2 1t-3.5 1t-3.5 1 v-305z" />
+<glyph unicode="&#xf105;" horiz-adv-x="2048" />
+<glyph unicode="&#xf200;" horiz-adv-x="1536" d="M0 57v379q0 39 20.5 87t54.5 90t74.5 73t81.5 35q-35 -59 -34 -129q0 -59 16 -124t59 -106q-18 -37 -18 -75q0 -72 50 -122t122 -50q37 0 68.5 13t55 36.5t37 55.5t13.5 67t-13.5 66.5t-37 55t-55 38t-68.5 14.5q-18 0 -36.5 -5t-35.5 -14q-12 12 -20 31t-13.5 40.5 t-7.5 41.5t-2 37q0 47 28 86t62 67l142 21q-92 57 -142.5 150.5t-50.5 201.5q0 86 33 162t90 133t133 90t162 33t162 -33t133 -90t90 -133t33 -162q0 -109 -50.5 -202t-142.5 -150l158 -23q18 -16 34.5 -36.5t16.5 -47.5q0 -45 -18 -77q-59 33 -121 32q-45 0 -87 -17 t-77 -46q-6 2 -11 3t-11 1q-47 0 -82 -34t-35 -81t34.5 -80.5t82.5 -33.5q47 0 80.5 33.5t33.5 80.5q0 8 -2 15.5t-4 13.5q16 12 35.5 20.5t42.5 8.5q55 0 95 -39t40 -94q0 -23 -8 -41.5t-19 -34.5q-25 10 -45 10q-47 0 -81.5 -34t-34.5 -81t34.5 -80.5t81.5 -33.5t81 33.5 t34 80.5l-2 4q74 74 74 177q0 74 -41 137q45 70 45 157q0 31 -12 62q41 -4 83 -34t74.5 -72t53 -90t20.5 -89v-379q-10 -6 -22.5 -15t-25.5 -18.5t-26.5 -16.5t-21.5 -7h-1344q-35 0 -52 20.5t-44 36.5zM369 287q0 25 17 41t40 16q25 0 41 -16t16 -41q0 -23 -16 -40.5 t-41 -17.5q-23 0 -40 17.5t-17 40.5z" />
+<glyph unicode="&#xf201;" horiz-adv-x="1597" />
+<glyph unicode="&#xf202;" horiz-adv-x="1597" />
+<glyph unicode="&#xf203;" horiz-adv-x="1597" />
+<glyph unicode="&#xf204;" horiz-adv-x="1597" />
+</font>
+</defs></svg> 
\ No newline at end of file
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.ttf and elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.ttf differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.woff and elefant-elefant_1_3_3_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.woff differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/icon-conditionalforward.png and elefant-elefant_1_3_3_beta/apps/admin/css/icon-conditionalforward.png differ
Binary files elefant-elefant_1_3_2_beta/apps/admin/css/icon-html.png and elefant-elefant_1_3_3_beta/apps/admin/css/icon-html.png differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/jquery.jgrowl.css elefant-elefant_1_3_3_beta/apps/admin/css/jquery.jgrowl.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/jquery.jgrowl.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/css/jquery.jgrowl.css	2013-03-20 13:48:44.000000000 -0500
@@ -2,7 +2,7 @@
 div.jGrowl {
 	padding: 			10px;
 	z-index: 			9999;
-	color: 				#fff;
+	color: 				#222;
 	font-size: 			12px;
 }
 
@@ -81,10 +81,10 @@
 }
 
 div.jGrowl div.jGrowl-notification, div.jGrowl div.jGrowl-closer {
-	background-color: 		#000;
-	opacity: 				.75;
-    -ms-filter: 			"progid:DXImageTransform.Microsoft.Alpha(Opacity=85)"; 
-    filter: 				progid:DXImageTransform.Microsoft.Alpha(Opacity=85); 
+	background-color: 		#e5e5e5;
+	opacity: 				.95;
+    -ms-filter: 			"progid:DXImageTransform.Microsoft.Alpha(Opacity=95)"; 
+    filter: 				progid:DXImageTransform.Microsoft.Alpha(Opacity=95); 
 	zoom: 					1;
 	width: 					235px;
 	padding: 				10px;
@@ -94,8 +94,13 @@
 	font-size: 				1em;
 	text-align: 			left;
 	display: 				none;
-	-moz-border-radius: 	5px;
-	-webkit-border-radius:	5px;
+	border:					1px solid #bbb;
+	border-radius:			3px;
+	-moz-border-radius: 	3px;
+	-webkit-border-radius:	3px;
+	-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,.5);
+	-moz-box-shadow: 0px 1px 1px rgba(0,0,0,.5);
+	box-shadow: 0px 1px 1px rgba(0,0,0,.5);
 }
 
 div.jGrowl div.jGrowl-notification {
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/jquery.notifier.css elefant-elefant_1_3_3_beta/apps/admin/css/jquery.notifier.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/jquery.notifier.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/css/jquery.notifier.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,134 @@
+
+div.jGrowl {
+	padding: 			20px;
+	z-index: 			9999;
+	color: 				#222;
+	font-size: 			12px;
+}
+
+/** Special IE6 Style Positioning **/
+div.ie6 {
+	position: 			absolute;
+}
+
+div.ie6.top-right {
+	right: 				auto;
+	bottom: 			auto;
+	left: 				expression( ( 0 - jGrowl.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
+  	top: 				expression( ( 0 + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
+}
+
+div.ie6.top-left {
+	left: 				expression( ( 0 + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
+	top: 				expression( ( 0 + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
+}
+
+div.ie6.bottom-right {
+	left: 				expression( ( 0 - jGrowl.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
+	top: 				expression( ( 0 - jGrowl.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
+}
+
+div.ie6.bottom-left {
+	left: 				expression( ( 0 + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
+	top: 				expression( ( 0 - jGrowl.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
+}
+
+div.ie6.center {
+	left: 				expression( ( 0 + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
+	top: 				expression( ( 0 + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
+	width: 				100%;
+}
+
+/** Normal Style Positions **/
+div.jGrowl {
+	position:			absolute;
+}
+
+body > div.jGrowl {
+	position:			fixed;
+}
+
+div.jGrowl.top-left {
+	left: 				0px;
+	top: 				0px;
+}
+
+div.jGrowl.top-right {
+	right: 				0px;
+	top: 				30px;
+}
+
+div.jGrowl.bottom-left {
+	left: 				0px;
+	bottom:				0px;
+}
+
+div.jGrowl.bottom-right {
+	right: 				0px;
+	bottom: 			0px;
+}
+
+div.jGrowl.center {
+	top: 				0px;
+	width: 				50%;
+	left: 				25%;
+}
+
+/** Cross Browser Styling **/
+div.center div.jGrowl-notification, div.center div.jGrowl-closer {
+	margin-left: 		auto;
+	margin-right: 		auto;
+}
+
+div.jGrowl div.jGrowl-notification, div.jGrowl div.jGrowl-closer {
+	background-color: 		#fafafa;
+	opacity: 				.95;
+    -ms-filter: 			"progid:DXImageTransform.Microsoft.Alpha(Opacity=95)"; 
+    filter: 				progid:DXImageTransform.Microsoft.Alpha(Opacity=95); 
+	zoom: 					1;
+	width: 					235px;
+	padding: 				5px 10px 5px 10px;
+	margin-top: 			5px;
+	margin-bottom: 			5px;
+	font-family: 			Tahoma, Arial, Helvetica, sans-serif;
+	font-size: 				1em;
+	text-align: 			left;
+	display: 				none;
+	border:					1px solid #ccc;
+	border-radius:			3px;
+	-moz-border-radius: 	3px;
+	-webkit-border-radius:	3px;
+}
+
+div.jGrowl div.jGrowl-notification {
+	min-height: 			40px;
+}
+
+div.jGrowl div.jGrowl-notification div.jGrowl-header {
+	font-weight: 			bold;
+	font-size:				.85em;
+}
+
+div.jGrowl div.jGrowl-notification div.jGrowl-close {
+	z-index:				99;
+	float: 					right;
+	font-weight: 			bold;
+	font-size: 				1em;
+	cursor:					pointer;
+}
+
+div.jGrowl div.jGrowl-closer {
+	padding-top: 			4px;
+	padding-bottom: 		4px;
+	cursor: 				pointer;
+	font-size:				.9em;
+	font-weight: 			bold;
+	text-align: 			center;
+}
+
+/** Hide jGrowl when printing **/
+@media print {
+	div.jGrowl {
+		display: 			none;
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/modal.css elefant-elefant_1_3_3_beta/apps/admin/css/modal.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/modal.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/css/modal.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,18 +1,42 @@
-#modal-dialog {
+.modal-overlay {
 	display: none;
-	width: 550px;
-	height: 300px;
+	position: fixed;
+	top: 0;
+	left: 0;
+	width: 100%;
+	height: 100%;
+	background: #000;
+	opacity: 0.2;
+	filter: alpha(opacity=20);
 }
 
-#modal-titlebar {
-	background: #333;
-	border: 1px solid #111;
-	color: #fff;
-	padding: 10px;
+.modal-dialog {
+	display: none;
+	position: absolute;
+	width: 550px;
+	height: 300px;
+	-webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
+	-moz-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
+	box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
+}
+
+.modal-titlebar {
+	background: #eeeeee; /* Old browsers */
+	background: -moz-linear-gradient(top,  #eeeeee 0%, #dddddd 100%); /* FF3.6+ */
+	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
+	background: -webkit-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
+	background: -o-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* Opera 11.10+ */
+	background: -ms-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* IE10+ */
+	background: linear-gradient(to bottom,  #eeeeee 0%,#dddddd 100%); /* W3C */
+	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
+	border-bottom: 1px solid #aaa;
+	border-top: 1px solid #aaa;
+	color: #444;
+	padding: 5px 10px 5px 10px;
 	position: relative;
 }
 
-#modal-close-wrapper {
+.modal-close-wrapper {
 	float: right;
 	font-size: 14px;
 	font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
@@ -20,33 +44,34 @@
 	width: 528px;
 }
 
-#modal-close-button {
-	color: #fff;
+.modal-close-button {
+	color: #444;
 	text-decoration: none;
 	position: absolute;
-	right: 12px;
-	top: 12px;
+	right: 7px;
+	top: 7px;
 	display: block;
-	padding: 6px 10px 6px 10px;
-	background: #333;
+	padding: 1px 5px 1px 5px;
+	border: 1px solid #aaa;
 	line-height: normal;
 }
 
-#modal-close-button:hover {
-	background: #666;
-	color: #fff;
+.modal-close-button:hover {
+	background: #ccc;
+	color: #222;
+	text-decoration: none;
 }
 
-#modal-title {
-	font-size: 20px;
-	font-weight: bold;
+.modal-title {
+	font-size: 16px;
+	font-weight: normal;
 }
 
-#modal-content {
-	background: #fff;
-	border: 1px solid #ccc;
+.modal-content {
+	background: #fafafa;
+	border: 1px solid #fafafa;
 	border-top: 0px none;
 	padding: 15px;
-	height: 202px;
+	height: 233px;
 	overflow-y: auto;
 }
Files elefant-elefant_1_3_2_beta/apps/admin/css/reset.css and elefant-elefant_1_3_3_beta/apps/admin/css/reset.css are identical
Files elefant-elefant_1_3_2_beta/apps/admin/css/text.css and elefant-elefant_1_3_3_beta/apps/admin/css/text.css are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/css/top-bar.css elefant-elefant_1_3_3_beta/apps/admin/css/top-bar.css
--- elefant-elefant_1_3_2_beta/apps/admin/css/top-bar.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/css/top-bar.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,17 +1,17 @@
 body {
-	padding-top: 20px;
+	padding-top: 30px;
 }
 
 #admin-bar {
 	position: absolute;
 	top: 0;
 	left: 0;
-	height: 32px;
+	height: 35px;
 	width: 100%;
 	z-index: 100000;
-	background: #404040;
-	background: rgba(0,0,0,.75);
-	color: #f5f5f5;
+	background: #eee;
+	background: rgba(240,240,240,.8);
+	color: #222;
 	position: fixed;
 	margin: 0px;
 	padding: 0px 10px 0px 10px;
@@ -19,6 +19,18 @@
 	font-weight: bold;
 	font-family: Helvetica, Arial, sans-serif !important;
 	text-align: left;
+
+	background: #eeeeee; /* Old browsers */
+	background: -moz-linear-gradient(top,  #eeeeee 0%, #dddddd 100%); /* FF3.6+ */
+	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
+	background: -webkit-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
+	background: -o-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* Opera 11.10+ */
+	background: -ms-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* IE10+ */
+	background: linear-gradient(to bottom,  #eeeeee 0%,#dddddd 100%); /* W3C */
+
+	-webkit-box-shadow: 0px 1px 2px rgba(0,0,0,.5);
+	-moz-box-shadow: 0px 1px 2px rgba(0,0,0,.5);
+	box-shadow: 0px 1px 2px rgba(0,0,0,.5);
 }
 
 	#admin-bar img {
@@ -38,24 +50,30 @@
 		display: block;
 		float: left;
 		margin: 0;
-		height: 25px;
-		padding: 7px 8px 0px 8px;
+		height: 26px;
+		padding: 9px 8px 0px 8px;
 		font-weight: normal;
-		color: #f5f5f5;
+		color: #222;
 		position: relative;
 	}
 
 		#admin-links>span:hover {
-			color: #A753CC;
-			background: #101010;
-			background: rgba(0,0,0,.9);
+			color: #93278f;
+
+			background: #dddddd; /* Old browsers */
+			background: -moz-linear-gradient(top,  #dddddd 0%, #cccccc 100%); /* FF3.6+ */
+			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
+			background: -webkit-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
+			background: -o-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Opera 11.10+ */
+			background: -ms-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* IE10+ */
+			background: linear-gradient(to bottom,  #dddddd 0%,#cccccc 100%); /* W3C */
+
 			text-decoration: none;
 		}
 
 		#admin-tools>strong {
 			font-weight: normal;
-			background: #5a5a5a;
-			border: 1px solid #777;
+			border: 1px solid #444;
 			-webkit-border-radius: 12px;
 			-moz-border-radius: 12px;
 			border-radius: 12px;
@@ -63,26 +81,32 @@
 		}
 
 		#admin-tools:hover>strong {
-			background: #404040;
-			background: rgba(167,83,204,.4);
-			border: 1px solid #A753CC;
+			background: #ccc;
+			border: 1px solid #93278f;
 		}
 
 	#admin-links a {
 		display: block;
 		float: left;
 		margin: 0;
-		height: 25px;
-		padding: 7px 8px 0px 8px;
+		height: 26px;
+		padding: 9px 8px 0px 8px;
 		font-weight: normal;
-		color: #f5f5f5;
+		color: #222;
 		text-decoration: none;
 	}
 
 		#admin-links a:hover {
-			color: #A753CC;
-			background: #101010;
-			background: rgba(0,0,0,.9);
+			color: #93278f;
+
+			background: #dddddd; /* Old browsers */
+			background: -moz-linear-gradient(top,  #dddddd 0%, #cccccc 100%); /* FF3.6+ */
+			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
+			background: -webkit-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
+			background: -o-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Opera 11.10+ */
+			background: -ms-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* IE10+ */
+			background: linear-gradient(to bottom,  #dddddd 0%,#cccccc 100%); /* W3C */
+
 			text-decoration: none;
 		}
 
@@ -90,12 +114,15 @@
 		display: none;
 		position: absolute;
 		left: 0;
-		top: 32px;
+		top: 35px;
 		margin: 0;
 		padding: 0;
 		float: left;
 		border: 0;
 		list-style: none;
+		-webkit-box-shadow: 0px 1px 2px rgba(0,0,0,.3);
+		-moz-box-shadow: 0px 1px 2px rgba(0,0,0,.3);
+		box-shadow: 0px 1px 2px rgba(0,0,0,.3);
 	}
 
 	#admin-tools-list li {
@@ -110,25 +137,38 @@
 		text-decoration: none;
 		padding: 5px 0 0 5px;
 		margin: 0;
-		color: #fff;
-		background: #404040;
-		background: rgba(0,0,0,.7);
-		border-bottom: 1px solid rgba(255,255,255,.35);
+		color: #222;
+		background: #ddd;
+		background: rgba(235,235,235,.95);
+		margin-top: 0px;
+		border-bottom: 1px solid #ccc;
+		z-index: 99990 !important;
 	}
 
+		#admin-tools-list li:first-child a {
+			margin-top: 2px;
+		}
+
 		#admin-tools-list li a.not-installed, #admin-tools-list li a.needs-upgrade {
-			background: #8A5AB5;
-			background: rgba(138,90,181,.95);
+			color: #fff;
+			background: #93278f;
+			background: rgba(147,39,143,.95);
+		}
+
+		#admin-tools-list li a.not-installed:hover, #admin-tools-list li a.needs-upgrade:hover {
+			color: #fff;
+			background: #B347AF;
+			background: rgba(147,39,143,.85);
 		}
 
 	#admin-tools-list li a:hover {
 		text-decoration: none;
-		background: #101010;
-		background: rgba(0,0,0,.8);
+		background: #ddd;
+		background: rgba(220,220,220,.95);
 	}
 
 	#admin-update-available {
-		color: #fff;
+		color: #93278f;
 		font-size: 12px;
 		font-weight: normal;
 		text-decoration: underline;
@@ -141,56 +181,72 @@
 	}
 
 	#admin-update-available:hover {
-		color: #A753CC;
+		color: #B347AF;
 	}
 
 .admin-options {
+	display: inline-block;
 	margin: 0;
 	padding: 0;
-	border: 0;
-	height: 23px;
+	border: 1px solid #ccc;
+	height: 24px;
 }
 
 .admin-options a {
-	display: block;
+	display: inline-block;
 	position: relative;
 	margin: 0;
 	padding: 0;
 	border: 0;
-	height: 23px;
-	float: left;
-	background: rgba(0,0,0,.75);
+	width: 26px;
+	height: 24px;
+	background-color: #f5f5f5;
+	background-repeat: no-repeat;
+	background-image: url(/apps/admin/css/admin/editable-sprite-dark.png);
 }
 
 .admin-options a:hover {
-	background: rgba(0,0,0,.9);
+	background: #ddd;
+	background-image: url(/apps/admin/css/admin/editable-sprite-dark.png);
 	text-decoration: none !important;
 	margin: 0;
 	padding: 0;
-	border: 0;
 }
 
-.admin-options a img {
-	height: 16px;
-	width: 16px;
-	margin: 0;
-	padding: 3px 5px 5px 5px;
-	border: 0;
-}
+	.admin-options a.editable-add {
+		background-position: 0px 0px;
+	}
+
+	.admin-options a.editable-edit {
+		background-position: -26px 0px;
+	}
+
+	.admin-options a.editable-delete {
+		background-position: -52px 0px;
+	}
+
+	.admin-options a.editable-versions {
+		background-position: -78px 0px;
+	}
+
+	.admin-options a.editable-lock {
+		background-position: -104px 0px;
+	}
 
 .admin-tooltip {
 	position: absolute;
 	z-index: 25;
 	display: none;
-	top: 23px;
-	width: 100px;
-	left: -37px;
+	top: 25px;
+	min-width:100px;
 }
 
 	.admin-tooltip-top {
 		height: 8px;
-		background: url(/apps/admin/css/admin/tooltip-top.png);
-		background-position: 50% 0%;
+		background: url(/apps/admin/css/admin/tooltip-top.png) 5px 0 no-repeat; 
+		z-index: 26;
+		width:100%;
+		position: absolute;
 	}
 
 	.admin-tooltip-body {
@@ -198,12 +254,12 @@
 		font-size: 12px;
 		color: #222;
 		font-weight: bold;
-		background-color: #fff;
-		border-left: 1px solid #222;
-		border-right: 1px solid #222;
-		border-bottom: 1px solid #222;
-		height: 20px;
+		background-color: #f5f5f5;
+		border: 1px solid #555;		
 		text-align: center;
+		margin-top:7px;		
+		margin-left: -25%;
+		width:100%;
 	}
 
 	.admin-tooltip-body {
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/forms/add.php elefant-elefant_1_3_3_beta/apps/admin/forms/add.php
--- elefant-elefant_1_3_2_beta/apps/admin/forms/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/forms/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -4,7 +4,7 @@
 
 not empty = 1
 regex = "/^[a-zA0-9_-]+$/"
-unique = "webpage.id"
+unique = "#prefix#webpage.id"
 not exists = "apps"
 
 [title]
Files elefant-elefant_1_3_2_beta/apps/admin/forms/edit.php and elefant-elefant_1_3_3_beta/apps/admin/forms/edit.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/add.php elefant-elefant_1_3_3_beta/apps/admin/handlers/add.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -19,13 +19,13 @@
 	$wp->put ();
 	Versions::add ($wp);
 	if (! $wp->error) {
-		$this->add_notification (i18n_get ('Page created.'));
+		$this->add_notification (__ ('Page created.'));
 		$_POST['page'] = $_POST['id'];
 		$this->hook ('admin/add', $_POST);
 		$this->redirect ('/' . $_POST['id']);
 	}
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $wp->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $wp->error;
 } else {
 	$pg = new Page;
 	$pg->layout = 'default';
@@ -33,9 +33,9 @@
 	$pg->layouts = admin_get_layouts ();
 	$pg->failed = $f->failed;
 	$pg = $f->merge_values ($pg);
-	$page->title = i18n_get ('Add Page');
-	$page->head = $tpl->render ('admin/add/head', $pg)
-				. $tpl->render ('admin/wysiwyg');
+	$page->title = __ ('Add Page');
+	$this->run ('admin/util/wysiwyg');
+	echo $tpl->render ('admin/add/head', $pg);
 	echo $tpl->render ('admin/add', $pg);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/bgsave.php elefant-elefant_1_3_3_beta/apps/admin/handlers/bgsave.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/bgsave.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/bgsave.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,7 +11,7 @@
 if (! User::require_admin ()) {
 	$res = new StdClass;
 	$res->success = false;
-	$res->error = i18n_get ('Authorization required.');
+	$res->error = __ ('Authorization required.');
 	echo json_encode ($res);
 	return;
 }
Files elefant-elefant_1_3_2_beta/apps/admin/handlers/cancel.php and elefant-elefant_1_3_3_beta/apps/admin/handlers/cancel.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/compare.php elefant-elefant_1_3_3_beta/apps/admin/handlers/compare.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/compare.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/compare.php	2013-03-20 13:48:44.000000000 -0500
@@ -32,7 +32,7 @@
 	);
 }
 
-$page->title = i18n_get ('Comparing') . ' ' . $ver->class . ' / ' . $ver->pkey;
+$page->title = __ ('Comparing') . ' ' . $ver->class . ' / ' . $ver->pkey;
 
 echo $tpl->render ('admin/compare', array (
 	'fields' => $data,
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/conditionalforward.php elefant-elefant_1_3_3_beta/apps/admin/handlers/conditionalforward.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/conditionalforward.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/conditionalforward.php	2013-03-20 13:48:44.000000000 -0500
@@ -13,7 +13,7 @@
 if (User::is_valid () && User::is ('admin')) {
 	printf (
 		'<p>%s:</p><p><a href="%s">%s</a></p>',
-		i18n_getf ('This page forwards members of the %s group to the following link', $user_type),
+		__ ('This page forwards members of the %s group to the following link', $user_type),
 		$url,
 		$url
 	);
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/delete.php elefant-elefant_1_3_3_beta/apps/admin/handlers/delete.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/delete.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/delete.php	2013-03-20 13:48:44.000000000 -0500
@@ -4,30 +4,32 @@
  * Deletes a web page.
  */
 
+$this->require_admin ();
+
 $page->layout = 'admin';
 
-if (! User::require_admin ()) {
-	$this->redirect ('/admin');
+if (! isset ($_POST['page'])) {
+	$this->redirect ('/');
 }
 
-$lock = new Lock ('Webpage', $_GET['page']);
+$lock = new Lock ('Webpage', $_POST['page']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 }
 
-$wp = new Webpage ($_GET['page']);
+$wp = new Webpage ($_POST['page']);
 
 if (! $wp->remove ()) {
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $wp->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $wp->error;
 	return;
 }
 
-$cache->delete ('_admin_page_' . $_GET['page']);
-$this->add_notification (i18n_get ('Page deleted.'));
-$this->hook ('admin/delete', $_GET);
-$this->redirect ('/');
+$cache->delete ('_admin_page_' . $_POST['page']);
+$this->add_notification (__ ('Page deleted.'));
+$this->hook ('admin/delete', $_POST);
+$this->redirect ( isset ($_POST['admin']) ? '/admin/pages' : '/' );
 
-?>
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/edit.php elefant-elefant_1_3_3_beta/apps/admin/handlers/edit.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/edit.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/edit.php	2013-03-20 13:48:44.000000000 -0500
@@ -12,7 +12,7 @@
 
 $lock = new Lock ('Webpage', $_GET['page']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 } else {
@@ -39,21 +39,21 @@
 	if (! $wp->error) {
 		Versions::add ($wp);
 		$cache->delete ('_admin_page_' . $_GET['page']);
-		$this->add_notification (i18n_get ('Page saved.'));
+		$this->add_notification (__ ('Page saved.'));
 		$_POST['page'] = $_GET['page'];
 		$lock->remove ();
 		$this->hook ('admin/edit', $_POST);
 		$this->redirect ('/' . $_POST['id']);
 	}
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $wp->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $wp->error;
 } else {
 	$wp->layouts = admin_get_layouts ();
 	$wp->failed = $f->failed;
 	$wp = $f->merge_values ($wp);
-	$page->title = i18n_get ('Edit Page') . ': ' . $wp->title;
-	$page->head = $tpl->render ('admin/edit/head', $wp)
-				. $tpl->render ('admin/wysiwyg');
+	$page->title = __ ('Edit Page') . ': ' . $wp->title;
+	$this->run ('admin/util/wysiwyg');
+	echo $tpl->render ('admin/edit/head', $wp);
 	echo $tpl->render ('admin/edit', $wp);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/embed/filters.php elefant-elefant_1_3_3_beta/apps/admin/handlers/embed/filters.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/embed/filters.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/embed/filters.php	2013-03-20 13:48:44.000000000 -0500
@@ -2,7 +2,7 @@
 
 /**
  * Apply filters for dynamic embed data.
- * Called by js/wysiwyg/plugins/wysiwyg.embed.js
+ * Called by apps/admin/js/jquery.dynamicobjects.js
  */
 
 $page->layout = false;
@@ -15,6 +15,11 @@
 
 list ($app, $extra) = explode ('/', $_POST['handler']);
 
+if (! file_exists ('apps/' . $app . '/conf/embed.php')) {
+	echo json_encode ((object) array ('success' => false, 'error' => 'Embed file not found', 'data' => $_POST['data']));
+	return;
+}
+
 $rules = parse_ini_file ('apps/' . $app . '/conf/embed.php', true);
 
 if (! isset ($rules[$_POST['handler']])) {
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/embed.php elefant-elefant_1_3_3_beta/apps/admin/handlers/embed.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -18,7 +18,10 @@
 $files = glob ('apps/*/conf/embed.php');
 $embeds = array ();
 foreach ($files as $file) {
-	$embeds = array_merge ($embeds, parse_ini_file ($file, true));
+	$ini = parse_ini_file ($file, true);
+	if (is_array ($ini)) {
+		$embeds = array_merge ($embeds, $ini);
+	}
 }
 
 function admin_embed_sort ($a, $b) {
@@ -41,7 +44,12 @@
 			if ($opt == 'require') {
 				require_once ($val);
 			} elseif ($opt == 'callback') {
-				$embeds[$k]['fields'][$field]['values'] = call_user_func ($val);
+				try {
+					$embeds[$k]['fields'][$field]['values'] = call_user_func ($val);
+				} catch (Exception $e) {
+					error_log (sprintf ('Invalid embed callback %s() for handler %s', $val, $k));
+					unset ($embeds[$k]);
+				}
 			} else {
 				$embeds[$k]['fields'][$field][$opt] = $val;
 			}
Files elefant-elefant_1_3_2_beta/apps/admin/handlers/error.php and elefant-elefant_1_3_3_beta/apps/admin/handlers/error.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/extended/api.php elefant-elefant_1_3_3_beta/apps/admin/handlers/extended/api.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/extended/api.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/extended/api.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,7 @@
+<?php
+
+$this->require_admin ();
+
+$this->restful (new ExtendedAPI ());
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/extended.php elefant-elefant_1_3_3_beta/apps/admin/handlers/extended.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/extended.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/extended.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,63 @@
+<?php
+
+/**
+ * Edit custom fields for a given type.
+ */
+
+$this->require_admin ();
+
+if (! isset ($_GET['extends'])) {
+	echo $this->error (500, __ ('Unknown error'));
+	return;
+}
+
+if (! class_exists ($_GET['extends'])) {
+	echo $this->error (500, __ ('Unknown error'));
+	return;
+}
+
+if (! isset ($_GET['name'])) {
+	$_GET['name'] = $_GET['extends'];
+}
+
+// Create the database table if it doesn't exist
+if (! DB::single ('select count(*) from #prefix#extended_fields')) {
+	$db = DB::get_connection (true);
+	$queries = sql_split (
+		file_get_contents (
+			sprintf (
+				'apps/admin/conf/update/extended_fields_%s.sql',
+				$db->getAttribute (PDO::ATTR_DRIVER_NAME)
+			)
+		)
+	);
+	foreach ($queries as $query) {
+		DB::execute ($query);
+	}
+}
+
+$page->layout = 'admin';
+$page->title = __ ('Custom Fields') . ': ' . __ ($_GET['name']);
+$page->add_script ('/apps/admin/js/handlebars-1.0.rc.1.js');
+$page->add_script ('/js/jquery-ui/jquery-ui.min.js');
+$page->add_script ('/apps/admin/js/extended.js');
+
+$data = array ('extends' => $_GET['extends']);
+$data['fields'] = ExtendedFields::for_class ($_GET['extends']);
+if (! is_array ($data['fields'])) {
+	$data['fields'] = array ();
+}
+
+$res = glob ('apps/*/conf/fields.php');
+$res = is_array ($res) ? $res : array ();
+$data['custom'] = array ();
+foreach ($res as $file) {
+	$fields = parse_ini_file ($file, true);
+	foreach ($fields as $field => $settings) {
+		$data['custom'][$field] = $settings['name'];
+	}
+}
+
+echo $tpl->render ('admin/extended', $data);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/forward.php elefant-elefant_1_3_3_beta/apps/admin/handlers/forward.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/forward.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/forward.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,7 +11,7 @@
 if (User::is_valid () && User::is ('admin')) {
 	printf (
 		'<p>%s:</p><p><a href="%s">%s</a></p>',
-		i18n_get ('This page forwards visitors to the following link'),
+		__ ('This page forwards visitors to the following link'),
 		$url,
 		$url
 	);
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/head/links.php elefant-elefant_1_3_3_beta/apps/admin/handlers/head/links.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/head/links.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/head/links.php	2013-03-20 13:48:44.000000000 -0500
@@ -19,9 +19,9 @@
 	return;
 }
 
-$tools = array ('admin/pages' => array ('handler' => 'admin/pages', 'name' => i18n_get ('All Pages'), 'class' => false));
+$tools = array ('admin/pages' => array ('handler' => 'admin/pages', 'name' => __ ('All Pages'), 'class' => false));
 $res = glob ('apps/*/conf/config.php');
-$apps = DB::pairs ('select * from apps');
+$apps = DB::pairs ('select * from #prefix#apps');
 foreach ($res as $file) {
 	$app = preg_replace ('/^apps\/(.*)\/conf\/config\.php$/i', '\1', $file);
 	$appconf = parse_ini_file ($file, true);
@@ -34,12 +34,12 @@
 				$tools[$appconf['Admin']['handler']]['class'] = false;
 			} elseif ($ver === false) {
 				// not installed
-				$appconf['Admin']['name'] .= ' (' . i18n_get ('click to install') . ')';
+				$appconf['Admin']['name'] .= ' (' . __ ('click to install') . ')';
 				$tools[$appconf['Admin']['install']] = $appconf['Admin'];
 				$tools[$appconf['Admin']['install']]['class'] = 'not-installed';
 			} else {
 				// needs upgrade
-				$appconf['Admin']['name'] .= ' (' . i18n_get ('click to upgrade') . ')';
+				$appconf['Admin']['name'] .= ' (' . __ ('click to upgrade') . ')';
 				$tools[$appconf['Admin']['upgrade']] = $appconf['Admin'];
 				$tools[$appconf['Admin']['upgrade']]['class'] = 'needs-upgrade';
 			}
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/head.php elefant-elefant_1_3_3_beta/apps/admin/handlers/head.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/head.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/head.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,15 +7,21 @@
  */
 
 if ($appconf['Scripts']['jquery_source'] === 'local') {
-	echo "<script src=\"/js/jquery-1.7.1.min.js\"></script>\n";
+	$page->add_script ('/js/jquery-1.8.3.min.js');
 } elseif ($appconf['Scripts']['jquery_source'] === 'google') {
-	echo "<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\n";
+	$page->add_script ('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>');
 } else {
-	echo '<script src="' . $appconf['Scripts']['jquery_source'] . "\"></script>\n";
+	$page->add_script ('<script src="' . $appconf['Scripts']['jquery_source'] . '"></script>');
 }
 
 if (User::is_valid () && User::is ('admin') && $page->preview == false) {
-	echo $tpl->render ('admin/head');
+	$page->add_style ('/apps/admin/css/jquery.jgrowl.css');
+	$page->add_style ('/apps/admin/css/top-bar.css');
+
+	$page->add_script ("<script>$(function(){\$.elefant_version='" . ELEFANT_VERSION . "';});</script>");
+	$page->add_script ('/apps/admin/js/jquery.jgrowl.min.js');
+	$page->add_script ('/js/jquery.cookie.js');
+	$page->add_script ('/apps/admin/js/top-bar.js');
 }
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/admin/handlers/html.php and elefant-elefant_1_3_3_beta/apps/admin/handlers/html.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/index.php elefant-elefant_1_3_3_beta/apps/admin/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -27,11 +27,11 @@
 		Product::logo_login (),
 		Product::name ()
 	);
-	$page->window_title = i18n_get ('Please log in to continue.');
+	$page->window_title = __ ('Please log in to continue.');
 	if (! empty ($_POST['username'])) {
-		echo '<p>' . i18n_get ('Incorrect email or password, please try again.') . '</p>';
+		echo '<p>' . __ ('Incorrect email or password, please try again.') . '</p>';
 	} else {
-		echo '<p>' . i18n_get ('Please log in to continue.') . '</p>';
+		echo '<p>' . __ ('Please log in to continue.') . '</p>';
 	}
 	echo $tpl->render ('admin/index');
 	return;
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/page.php elefant-elefant_1_3_3_beta/apps/admin/handlers/page.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/page.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/page.php	2013-03-20 13:48:44.000000000 -0500
@@ -8,12 +8,21 @@
  */
 
 // determine page id
-$id = count ($this->params) ? $this->params[0] : 'index';
+$id = count ($this->params)
+    ? $this->params[
+            (conf ('General', 'page_url_style') === 'flat')
+                ? 0
+                : count ($this->params) - 1
+        ]
+    : 'index';
 
 // check if cached
 $res = $cache->get ('_admin_page_' . $id);
 if ($res) {
-	$page = (is_object ($res)) ? $res : unserialize ($res);
+	$pg = (is_object ($res)) ? $res : unserialize ($res);
+	foreach ($pg as $key => $value) {
+		$page->{$key} = $value;
+	}
 
 	// show admin edit buttons
 	if (User::is_valid () && User::is ('admin')) {
@@ -32,19 +41,19 @@
 
 // page not found
 if ($wp->error) {
-	echo $this->error (404, i18n_get ('Page not found'), '<p>' . i18n_get ('Hmm, we can\'t seem to find the page you wanted at the moment.') . '</p>');
+	echo $this->error (404, __ ('Page not found'), '<p>' . __ ('Hmm, we can\'t seem to find the page you wanted at the moment.') . '</p>');
 	return;
 }
 
 // access control
 if ($wp->access !== 'public' && ! User::is ('admin')) {
 	if (! User::require_login ()) {
-		$page->title = i18n_get ('Login required');
+		$page->title = __ ('Login required');
 		echo $this->run ('user/login');
 		return;
 	}
 	if (! User::access ($wp->access)) {
-		$page->title = i18n_get ('Login required');
+		$page->title = __ ('Login required');
 		echo $this->run ('user/login');
 		return;
 	}
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/pages.php elefant-elefant_1_3_3_beta/apps/admin/handlers/pages.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/pages.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/pages.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 $this->require_admin ();
 
 $page->layout = 'admin';
-$page->title = i18n_get ('All Pages');
+$page->title = __ ('All Pages');
 
 $limit = 20;
 $num = isset ($_GET['offset']) ? $_GET['offset'] : 1;
Files elefant-elefant_1_3_2_beta/apps/admin/handlers/preview.php and elefant-elefant_1_3_3_beta/apps/admin/handlers/preview.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/restore.php elefant-elefant_1_3_3_beta/apps/admin/handlers/restore.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/restore.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/restore.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,7 +16,7 @@
 
 $lock = new Lock ($ver->class, $ver->pkey);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 } else {
@@ -26,13 +26,13 @@
 $obj = $ver->restore ();
 $obj->put ();
 if ($obj->error) {
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $obj->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $obj->error;
 	return;
 }
 Versions::add ($obj);
 
-$this->add_notification ('Item restored.');
+$this->add_notification (__ ('Item restored.'));
 if ($ver->class == 'Webpage') {
 	$cache->delete ('_admin_page_' . $obj->id);
 	$this->redirect ('/' . $obj->id);
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/dates.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/dates.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/dates.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/dates.php	2013-03-20 13:48:44.000000000 -0500
@@ -29,16 +29,14 @@
 
 $abbr_months = explode (
 	' ',
-	i18n_get ('Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec')
+	__ ('Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec')
 );
 
 $full_months = explode (
 	' ',
-	i18n_get ('January February March April May June July August September October November December')
+	__ ('January February March April May June July August September October November December')
 );
 
-global $i18n;
-
 $page->add_script ('/js/jquery.localize.min.js');
 $page->add_script ('<script>
 $(function () {
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/dynamicobjects.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/dynamicobjects.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/dynamicobjects.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/dynamicobjects.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,53 @@
+<?php
+
+/**
+ * Provides a modal dialog to browse for dynamic objects to embed.
+ *
+ * Usage:
+ *
+ * 1. Load this handler either in your handler:
+ *
+ *     $this->run ('admin/util/dynamicobjects');
+ *
+ * Or anywhere in your view:
+ *
+ *      {! admin/util/dynamicobjects !}
+ *
+ * 2. Use the $.dynamicobjects() function to open the dialog window:
+ *
+ *      $.dynamicobjects ({
+ *          set_value: '#field-id',
+ *          callback: function (embed_code, handler, params, label) {
+ *              console.log (embed_code);
+ *              console.log (handler);
+ *              console.log (params);
+ *              console.log (label);
+ *          }
+ *     });
+ *
+ * Options:
+ *
+ * - callback:  A function to call with the resulting embed code.
+ * - set_value: The selector of an input field to update with the
+ *   resulting embed code.
+ * - current:   Current embed code, for updating existing values.
+ */
+
+$this->run ('admin/util/fontawesome');
+$this->run ('admin/util/modal');
+$this->run ('filemanager/util/browser');
+
+$page->add_style ('/apps/admin/css/dynamicobjects.css');
+$page->add_script ('/js/jquery.verify_values.js');
+$page->add_script ('/js/jquery.quickpager.js');
+$page->add_script ('/apps/admin/js/jquery.dynamicobjects.js');
+$page->add_script (
+	I18n::export (
+		'Dynamic Objects',
+		'Unable to load the dynamic object list. Please try again in a few seconds.',
+		'Embed',
+		'Back'
+	)
+);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/extended.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/extended.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/extended.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/extended.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,82 @@
+<?php
+
+/**
+ * Extends a form with a "Custom Fields" section that
+ * displays inputs for any ExtendedModel-based class.
+ *
+ * Usage:
+ *
+ * 1. Add this to your form view template:
+ *
+ *     {! admin/util/extended?extends=blog\Post !}
+ *
+ * For update forms, pass the extended field values as well:
+ *
+ *     {! admin/util/extended?extends=blog\Post&values=[extra|none] !}
+ *
+ * 2. For update forms, call this in the form handler function,
+ * before calling `$post->put ()`:
+ *
+ *     $post->update_extended ();
+ *
+ * 3. Create a link to edit the custom fields for a given
+ * class somewhere in your app:
+ *
+ *     <a href="/admin/extended?extends=blog\Post&name=Blog+Posts">{"Custom Fields"}</a>
+ */
+
+if (! $this->internal) {
+	return;
+}
+
+$this->require_admin ();
+
+if (! isset ($data['extends'])) {
+	return;
+}
+
+$class = $data['extends'];
+if (! class_exists ($class)) {
+	return;
+}
+
+$data['fields'] = ExtendedFields::for_class ($class);
+$data['open'] = false;
+
+$load_assets = false;
+
+if ($data['fields'] || count ($data['fields']) === 0) {
+	foreach ($data['fields'] as $k => $field) {
+		if (isset ($data['values']) && isset ($data['values'][$field->name])) {
+			$data['fields'][$k]->value = $data['values'][$field->name];
+		}
+
+		if ($field->type === 'select') {
+			$data['fields'][$k]->options = preg_split ("/[\r\n]+/", $field->options);
+		} elseif ($field->type === 'file') {
+			$load_assets = true;
+		} elseif (strpos ($field->type, '_') !== false) {
+			list ($app, $extra) = explode ('_', $field->type);
+			$fields = parse_ini_file ('apps/'. $app . '/conf/fields.php', true);
+			if (isset ($fields[$field->type])) {
+				$settings = $fields[$field->type];
+				if ($settings['type'] === 'select') {
+					$data['fields'][$k]->type = 'select';
+					$data['fields'][$k]->options = call_user_func ($settings['callback']);
+				}
+			}
+		}
+		
+		if ($data['fields'][$k]->required) {
+			$data['open'] = true;
+		}
+	}
+
+	if ($load_assets) {
+		$this->run ('filemanager/util/browser');
+	}
+
+	echo $tpl->render ('admin/util/extended', $data);
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/fontawesome.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/fontawesome.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/fontawesome.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/fontawesome.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,25 @@
+<?php
+
+/**
+ * Loads the Font Awesome icon set so you can use it in your
+ * view templates.
+ *
+ * In PHP, load it like this:
+ *
+ *     $this->run ('admin/util/fontawesome');
+ *
+ * Or in your view template, load it like this:
+ *
+ *     {! admin/util/fontawesome !}
+ *
+ * Now you can use any Font Awesome icon:
+ *
+ *     <i class="icon-cogs"></i>
+ */
+
+if (detect ('msie 7')) {
+	$page->add_style ('/apps/admin/css/font-awesome/css/font-awesome-ie7.min.css');
+}
+$page->add_style ('/apps/admin/css/font-awesome/css/font-awesome.min.css');
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/modal.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/modal.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/modal.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/modal.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,9 +1,8 @@
 <?php
 
 /**
- * Provides modal dialog capabilities to admin screens.
- * Loads and initializes the jQuery SimpleModal plugin,
- * and wraps it in a $.open_dialog(title, html) function.
+ * Provides modal dialog capabilities to app developers.
+ * Supports nested dialogs too.
  *
  * Usage:
  *
@@ -18,15 +17,19 @@
  * 2. Use the $.open_dialog() function to create your
  * dialog windows:
  *
- *     $.open_dialog ('Title', 'HTML goes here');
+ *     $.open_dialog ('Title', 'HTML goes here', options);
  *
  * 3. To close the dialog programmatically, you can
  * use the $.close_dialog() function:
  *
  *     $.close_dialog ();
+ *
+ * Valid options are width and height. Note that $.open_dialog()
+ * returns the current dialog number. A more top level dialog
+ * number can be passed to $.close_dialog() and it will cascade
+ * the close action to all child dialogs too.
  */
 
-$page->add_script ('/apps/admin/js/jquery.simplemodal.1.4.2.min.js');
 $page->add_script ('/apps/admin/js/modal.js');
 $page->add_style ('/apps/admin/css/modal.css');
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/notifier.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/notifier.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/notifier.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/notifier.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,27 @@
+<?php
+
+/**
+ * Provides a public-accessible notifier similar to Elefant's
+ * `Controller::add_notification()` mechanism for admin users.
+ *
+ * Usage:
+ *
+ *     // Initialize in PHP
+ *     $this->run ('admin/util/notifier');
+ *     
+ *     // Initialize in a view template
+ *     {! admin/util/notifier !}
+ *     
+ *     // Add notice in PHP
+ *     Notifier::add_notice ('My notification.');
+ *
+ *     // Add notice in JavaScript
+ *     $.add_notice ('My notification.');
+ */
+
+$page->add_style ('/apps/admin/css/jquery.notifier.css');
+$page->add_script ('/js/jquery.cookie.js');
+$page->add_script ('/apps/admin/js/jquery.jgrowl.min.js');
+$page->add_script ('/apps/admin/js/jquery.notifier.js');
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/redactor.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/redactor.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/redactor.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/redactor.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,28 @@
+<?php
+
+/**
+ * Call this to load the required libraries for the Redactor editor.
+ * Note: For a full editor with the Elefant integrations, see
+ * admin/util/wysiwyg instead.
+ *
+ * In PHP code, call it like this:
+ *
+ *     $this->run ('admin/util/redactor');
+ *
+ * In a view template, call it like this:
+ *
+ *     {! admin/util/redactor !}
+ *
+ * From here, you can initialize Redactor like this:
+ *
+ *     $('#my-textarea').redactor ({
+ *         // editor options
+ *     });
+ */
+
+$page->add_style ('/apps/admin/js/redactor/redactor.css');
+$page->add_style ('/apps/admin/js/redactor/custom.css');
+
+$page->add_script ('/apps/admin/js/redactor/redactor.min.js');
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/util/wysiwyg.php elefant-elefant_1_3_3_beta/apps/admin/handlers/util/wysiwyg.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/util/wysiwyg.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/util/wysiwyg.php	2013-03-20 13:48:44.000000000 -0500
@@ -2,11 +2,59 @@
 
 /**
  * Call this to turn a textarea into a wysiwyg editor.
- * To specify a custom field ID, call it like this:
+ *
+ * In PHP code, call it like this:
+ *
+ *     $this->run ('admin/util/wysiwyg', array ('field_id' => 'body'));
+ *
+ * In a view template, call it like this:
  *
  *     {! admin/util/wysiwyg?field_id=my_field !}
+ *
+ * Alternately, you can disable the auto-initialization and call
+ * it manually on an element like this:
+ *
+ *     {! admin/util/wysiwyg?field_id=0 !}
+ *     
+ *     <textarea id="edit-me"></textarea>
+ *     
+ *     <script>
+ *     $(function () {
+ *         $('#edit-me').wysiwyg ();
+ *     });
+ *     </script>
  */
 
-echo $tpl->render ('admin/wysiwyg', $data);
+$this->run ('admin/util/fontawesome');
+$this->run ('admin/util/dynamicobjects');
+$this->run ('filemanager/util/browser');
+$this->run ('admin/util/redactor');
+
+$page->add_style ('/js/jquery-ui/jquery-ui.css');
+
+$page->add_script ('/js/jquery-ui/jquery-ui.min.js');
+$page->add_script ('/js/jquery.quickpager.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/filebrowser.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/imagebrowser.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/links.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/dynamic.js');
+
+$page->add_script (I18n::export (
+	'Dynamic Objects',
+	'Link',
+	'Page',
+	'Insert',
+	'URL',
+	'Email',
+	'Text',
+	'Open link in new tab',
+	'Cancel',
+	'- select -'
+));
+
+$data['field_id'] = isset ($data['field_id'])
+	? (($data['field_id'] === '0' || empty ($data['field_id'])) ? false : $data['field_id'])
+	: 'webpage-body';
+$page->add_script ($tpl->render ('admin/util/wysiwyg', $data));
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/admin/handlers/validator.php and elefant-elefant_1_3_3_beta/apps/admin/handlers/validator.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/versions.php elefant-elefant_1_3_3_beta/apps/admin/handlers/versions.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/versions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/versions.php	2013-03-20 13:48:44.000000000 -0500
@@ -39,12 +39,12 @@
 function admin_filter_user_name ($id) {
 	$u = new User ($id);
 	if ($u->error) {
-		return i18n_get ('Nobody');
+		return __ ('Nobody');
 	}
 	return $u->name;
 }
 
-$page->title = i18n_get ('Versions of') . ' ' . Template::sanitize ($_GET['type']);
+$page->title = __ ('Versions of') . ' ' . Template::sanitize ($_GET['type']);
 if (! empty ($_GET['id'])) {
 	$page->title .= ' / ' . Template::sanitize ($_GET['id']);
 }
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/handlers/wysiwyg/links.php elefant-elefant_1_3_3_beta/apps/admin/handlers/wysiwyg/links.php
--- elefant-elefant_1_3_2_beta/apps/admin/handlers/wysiwyg/links.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/handlers/wysiwyg/links.php	2013-03-20 13:48:44.000000000 -0500
@@ -22,7 +22,7 @@
 $out = array ();
 foreach ($menu as $pg) {
 	$mt = (! empty ($pg->menu_title)) ? $pg->menu_title : $pg->title;
-	$out[] = array ('url' => '/' . $pg->id, 'title' => $mt);
+	$out[] = array ('url' => Link::href ($pg->id), 'title' => $mt);
 }
 usort ($out, 'admin_links_sort');
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/extended.js elefant-elefant_1_3_3_beta/apps/admin/js/extended.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/extended.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/extended.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,360 @@
+/**
+ * This is the extended fields object that contains the front-end logic
+ * for the extended fields management form (`/admin/extended`). It is
+ * initialized in the `apps/admin/views/extended.html` view template.
+ */
+var extended = (function ($) {
+	var e = {};
+
+	/**
+	 * Debug mode.
+	 */
+	e.debug = true;
+
+	/**
+	 * The fields themselves.
+	 */
+	e.fields = {};
+
+	/**
+	 * List of custom field types to add to the list.
+	 */
+	e.custom = {};
+
+	/**
+	 * The class that the fields are extending.
+	 */
+	e.extends = '';
+
+	/**
+	 * Whether a save request has been sent.
+	 */
+	e.saving = false;
+
+	/**
+	 * A list of templates.
+	 */
+	e.render = {};
+	
+	/**
+	 * The fields div.
+	 */
+	e.div = null;
+
+	/**
+	 * Strings for i18n.
+	 */
+	e.strings = {
+		confirm_delete: 'Are you sure you want to delete this field?',
+		label_empty: 'You must enter a field name.',
+		options_empty: 'You must enter options for a select field.',
+		field_added: 'Field added.',
+		field_updated: 'Field updated.',
+		field_deleted: 'Field deleted.',
+		order_updated: 'Field order has been updated.'
+	};
+
+	/**
+	 * Parse the ID from an ID attribute, taking the form
+	 * `{{id}}-extra`.
+	 */
+	var _parse_id = function (value) {
+		return parseInt (value.split ('-').shift ());
+	};
+
+	/**
+	 * Generate a field name for ExtendedModel from the label.
+	 */
+	var _name = function (label) {
+		return label
+			.replace (/^\s+|\s+$/g, '')
+			.replace (/[^a-zA-Z0-9_]+/g, '_')
+			.replace (/^_+|_+$/g, '')
+			.toLowerCase ();
+	};
+
+	/**
+	 * Does the object have the specified property.
+	 */
+	var _has = function (obj, prop) {
+		return obj.hasOwnProperty (prop);
+	};
+
+	/**
+	 * Calls `console.log()` if debug mode is on.
+	 */
+	var _log = function (obj) {
+		if (e.debug) {
+			console.log (obj);
+		}
+	};
+
+	/**
+	 * Server-side API methods.
+	 */
+	e.api = {};
+
+	/**
+	 * API URL prefix.
+	 */
+	e.api.prefix = '/admin/extended/api/';
+
+	/**
+	 * Add a new field to the list.
+	 */
+	e.api.add_field = function (data, callback) {
+		$.post (e.api.prefix + 'add', data, callback);
+	};
+
+	/**
+	 * Update an existing field.
+	 */
+	e.api.update_field = function (data, callback) {
+		$.post (e.api.prefix + 'edit', data, callback);
+	};
+
+	/**
+	 * Delete a field from the list.
+	 */
+	e.api.delete_field = function (id, callback) {
+		$.post (e.api.prefix + 'delete', {id: id}, callback);
+	};
+
+	/**
+	 * Update sorting order of the fields.
+	 */
+	e.api.update_order = function (fields, callback) {
+		$.post (e.api.prefix + 'sort', {fields: fields}, callback);
+	};
+
+	/**
+	 * Initialize the extended fields UI.
+	 */
+	e.init = function (data) {
+		e.extends = data.extends;
+		e.fields = data.fields;
+		e.strings = data.strings;
+		e.custom = data.custom;
+
+		e.div = $('#fields');
+		e.render.field = Handlebars.compile ($('#field-tpl').html ());
+
+		for (i = 0; i < e.fields.length; i++) {
+			e.init_field (e.fields[i]);
+		}
+
+		$('#add-field').on ('click', e.show_add_field_form);
+		$('#new-field-type').on ('change', e.toggle_add_field_options);
+		$('#new-field-cancel').on ('click', e.show_add_field_button);
+		$('#new-field').on ('submit', e.add_field);
+
+		$('#fields').sortable ({
+			items: '> div',
+			handle: '.field-handle',
+			containment: 'parent',
+			axis: 'y',
+			placeholder: 'placeholder',
+			opacity: 0.9,
+			update: e.update_sorting_order
+			
+		});
+		$('#fields').disableSelection ();
+	};
+
+	/**
+	 * Initializes a field's edit form.
+	 */
+	e.init_field = function (field) {
+		field.required = parseInt (field.required);
+		field.text = (field.type === 'text') ? true : false;
+		field.textarea = (field.type === 'textarea') ? true : false;
+		field.select = (field.type === 'select') ? true : false;
+		field.file = (field.type === 'file') ? true : false;
+		field.image = (field.type === 'image') ? true : false;
+		for (var field_id in e.custom) {
+			field[field_id] = (field.type === field_id) ? true : false;
+		}
+		e.div.append (e.render.field (field));
+
+		$('#' + field.id + '-type').on ('change', e.toggle_field_options);
+		$('#' + field.id + '-save').on ('click', e.update_field);
+		$('#' + field.id + '-delete').on ('click', e.delete_field);
+	};
+
+	/**
+	 * Shows the field form.
+	 */
+	e.show_add_field_form = function (evt) {
+		$('#new-field').show ();
+		$('#add-field').hide ();
+		return false;
+	};
+	
+	/**
+	 * Adds a new field.
+	 */
+	e.show_add_field_button = function (evt) {
+		$('#new-field-options').hide ();
+		$('#new-field').hide ();
+		var form = $('#new-field-form')[0];
+		form.elements.label.value = '';
+		form.elements.type.selectedIndex = 0;
+		form.elements.required.checked = false;
+		form.elements.options.value = '';
+		$('#add-field').show ();
+		return false;
+	};
+
+	/**
+	 * Toggle the options field visibility, show only for select fields.
+	 */
+	e.toggle_add_field_options = function (evt) {
+		if ($(evt.target).val () === 'select') {
+			$('#new-field-options').show ();
+		} else {
+			$('#new-field-options').hide ();
+		}
+	};
+
+	/**
+	 * Toggle the options field visibility, show only for select fields.
+	 */
+	e.toggle_field_options = function (evt) {
+		var id = _parse_id ($(evt.target).attr ('id'));
+		if ($(evt.target).val () === 'select') {
+			$('#' + id + '-options').show ();
+		} else {
+			$('#' + id + '-options').hide ();
+		}
+	};
+	
+	/**
+	 * Adds a new field.
+	 */
+	e.add_field = function (evt) {
+		var form = $('#new-field-form')[0],
+			data = {
+				label: form.elements.label.value,
+				type: form.elements.type[form.elements.type.selectedIndex].value,
+				required: form.elements.required.checked ? 1 : 0,
+				options: form.elements.options.value,
+				name: _name (form.elements.label.value),
+				class: e.extends
+			};
+
+		if (data.label.length === 0) {
+			return e.error (e.strings.label_empty);
+		}
+
+		if (data.type === 'select' && data.options.length === 0) {
+			return e.error (e.strings.options_empty);
+		}
+
+		$('#new-field-saving').show ();
+
+		e.api.add_field (data, function (res) {
+			$('#new-field-saving').hide (200);
+
+			if (! res.success) {
+				$.add_notification (res.error);
+				return;
+			}
+
+			$.add_notification (e.strings.field_added);
+			e.init_field (res.data);
+			e.show_add_field_button ();
+		});
+
+		return false;
+	};
+
+	/**
+	 * Update a field.
+	 */
+	e.update_field = function (evt) {
+		var id = _parse_id ($(evt.target).attr ('id')),
+			form = $('#' + id + '-form')[0],
+			data = {
+				id: id,
+				label: form.elements.label.value,
+				type: form.elements.type[form.elements.type.selectedIndex].value,
+				required: form.elements.required.checked ? 1 : 0,
+				options: form.elements.options.value,
+				name: _name (form.elements.label.value),
+				class: e.extends
+			};
+
+		if (data.label.length === 0) {
+			return e.error (e.strings.label_empty);
+		}
+
+		if (data.type === 'select' && data.options.length === 0) {
+			return e.error (e.strings.options_empty);
+		}
+
+		$('#' + id + '-saving').show ();
+
+		e.api.update_field (data, function (res) {
+			$('#' + id + '-saving').hide (200);
+
+			if (! res.success) {
+				$.add_notification (res.error);
+				return;
+			}
+
+			$.add_notification (e.strings.field_updated);
+		});
+
+		return false;
+	};
+
+	/**
+	 * Deletes a field from the list.
+	 */
+	e.delete_field = function (evt) {
+		if (confirm (e.strings.confirm_delete)) {
+			var id = _parse_id ($(evt.target).attr ('id'));
+			e.api.delete_field ({id: id}, function (res) {
+				if (! res.success) {
+					$.add_notification (res.error);
+					return;
+				}
+
+				$.add_notification (e.strings.field_deleted);
+				$('#' + id + '-wrapper').remove ();
+			});
+		};
+		return false;
+	};
+	
+	/**
+	 * Update the sorting order of the fields.
+	 */
+	e.update_sorting_order = function (evt, ui) {
+		var new_order = [],
+			fields = $('#fields .field');
+
+		for (var i = 0; i < fields.length; i++) {
+			new_order.push (_parse_id ($(fields[i]).attr ('id')));
+		}
+
+		e.api.update_order (new_order, function (res) {
+			if (! res.success) {
+				$.add_notification (res.error);
+				return;
+			}
+
+			$.add_notification (e.strings.order_updated);
+		});
+	};
+	
+	/**
+	 * Show input validation error message.
+	 */
+	e.error = function (msg) {
+		$.add_notification (msg);
+		return false;
+	};
+	
+	return e;
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/handlebars-1.0.rc.1.js elefant-elefant_1_3_3_beta/apps/admin/js/handlebars-1.0.rc.1.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/handlebars-1.0.rc.1.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/handlebars-1.0.rc.1.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,1920 @@
+// lib/handlebars/base.js
+
+/*jshint eqnull:true*/
+this.Handlebars = {};
+
+(function(Handlebars) {
+
+Handlebars.VERSION = "1.0.rc.1";
+
+Handlebars.helpers  = {};
+Handlebars.partials = {};
+
+Handlebars.registerHelper = function(name, fn, inverse) {
+  if(inverse) { fn.not = inverse; }
+  this.helpers[name] = fn;
+};
+
+Handlebars.registerPartial = function(name, str) {
+  this.partials[name] = str;
+};
+
+Handlebars.registerHelper('helperMissing', function(arg) {
+  if(arguments.length === 2) {
+    return undefined;
+  } else {
+    throw new Error("Could not find property '" + arg + "'");
+  }
+});
+
+var toString = Object.prototype.toString, functionType = "[object Function]";
+
+Handlebars.registerHelper('blockHelperMissing', function(context, options) {
+  var inverse = options.inverse || function() {}, fn = options.fn;
+
+
+  var ret = "";
+  var type = toString.call(context);
+
+  if(type === functionType) { context = context.call(this); }
+
+  if(context === true) {
+    return fn(this);
+  } else if(context === false || context == null) {
+    return inverse(this);
+  } else if(type === "[object Array]") {
+    if(context.length > 0) {
+      return Handlebars.helpers.each(context, options);
+    } else {
+      return inverse(this);
+    }
+  } else {
+    return fn(context);
+  }
+});
+
+Handlebars.K = function() {};
+
+Handlebars.createFrame = Object.create || function(object) {
+  Handlebars.K.prototype = object;
+  var obj = new Handlebars.K();
+  Handlebars.K.prototype = null;
+  return obj;
+};
+
+Handlebars.registerHelper('each', function(context, options) {
+  var fn = options.fn, inverse = options.inverse;
+  var ret = "", data;
+
+  if (options.data) {
+    data = Handlebars.createFrame(options.data);
+  }
+
+  if(context && context.length > 0) {
+    for(var i=0, j=context.length; i<j; i++) {
+      if (data) { data.index = i; }
+      ret = ret + fn(context[i], { data: data });
+    }
+  } else {
+    ret = inverse(this);
+  }
+  return ret;
+});
+
+Handlebars.registerHelper('if', function(context, options) {
+  var type = toString.call(context);
+  if(type === functionType) { context = context.call(this); }
+
+  if(!context || Handlebars.Utils.isEmpty(context)) {
+    return options.inverse(this);
+  } else {
+    return options.fn(this);
+  }
+});
+
+Handlebars.registerHelper('unless', function(context, options) {
+  var fn = options.fn, inverse = options.inverse;
+  options.fn = inverse;
+  options.inverse = fn;
+
+  return Handlebars.helpers['if'].call(this, context, options);
+});
+
+Handlebars.registerHelper('with', function(context, options) {
+  return options.fn(context);
+});
+
+Handlebars.registerHelper('log', function(context) {
+  Handlebars.log(context);
+});
+
+}(this.Handlebars));
+;
+// lib/handlebars/compiler/parser.js
+/* Jison generated parser */
+var handlebars = (function(){
+var parser = {trace: function trace() { },
+yy: {},
+symbols_: {"error":2,"root":3,"program":4,"EOF":5,"statements":6,"simpleInverse":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"OPEN_PARTIAL":24,"params":25,"hash":26,"DATA":27,"param":28,"STRING":29,"INTEGER":30,"BOOLEAN":31,"hashSegments":32,"hashSegment":33,"ID":34,"EQUALS":35,"pathSegments":36,"SEP":37,"$accept":0,"$end":1},
+terminals_: {2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},
+productions_: [0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],
+performAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {
+
+var $0 = $$.length - 1;
+switch (yystate) {
+case 1: return $$[$0-1]; 
+break;
+case 2: this.$ = new yy.ProgramNode($$[$0-2], $$[$0]); 
+break;
+case 3: this.$ = new yy.ProgramNode($$[$0]); 
+break;
+case 4: this.$ = new yy.ProgramNode([]); 
+break;
+case 5: this.$ = [$$[$0]]; 
+break;
+case 6: $$[$0-1].push($$[$0]); this.$ = $$[$0-1]; 
+break;
+case 7: this.$ = new yy.BlockNode($$[$0-2], $$[$0-1].inverse, $$[$0-1], $$[$0]); 
+break;
+case 8: this.$ = new yy.BlockNode($$[$0-2], $$[$0-1], $$[$0-1].inverse, $$[$0]); 
+break;
+case 9: this.$ = $$[$0]; 
+break;
+case 10: this.$ = $$[$0]; 
+break;
+case 11: this.$ = new yy.ContentNode($$[$0]); 
+break;
+case 12: this.$ = new yy.CommentNode($$[$0]); 
+break;
+case 13: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1]); 
+break;
+case 14: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1]); 
+break;
+case 15: this.$ = $$[$0-1]; 
+break;
+case 16: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1]); 
+break;
+case 17: this.$ = new yy.MustacheNode($$[$0-1][0], $$[$0-1][1], true); 
+break;
+case 18: this.$ = new yy.PartialNode($$[$0-1]); 
+break;
+case 19: this.$ = new yy.PartialNode($$[$0-2], $$[$0-1]); 
+break;
+case 20: 
+break;
+case 21: this.$ = [[$$[$0-2]].concat($$[$0-1]), $$[$0]]; 
+break;
+case 22: this.$ = [[$$[$0-1]].concat($$[$0]), null]; 
+break;
+case 23: this.$ = [[$$[$0-1]], $$[$0]]; 
+break;
+case 24: this.$ = [[$$[$0]], null]; 
+break;
+case 25: this.$ = [[new yy.DataNode($$[$0])], null]; 
+break;
+case 26: $$[$0-1].push($$[$0]); this.$ = $$[$0-1]; 
+break;
+case 27: this.$ = [$$[$0]]; 
+break;
+case 28: this.$ = $$[$0]; 
+break;
+case 29: this.$ = new yy.StringNode($$[$0]); 
+break;
+case 30: this.$ = new yy.IntegerNode($$[$0]); 
+break;
+case 31: this.$ = new yy.BooleanNode($$[$0]); 
+break;
+case 32: this.$ = new yy.DataNode($$[$0]); 
+break;
+case 33: this.$ = new yy.HashNode($$[$0]); 
+break;
+case 34: $$[$0-1].push($$[$0]); this.$ = $$[$0-1]; 
+break;
+case 35: this.$ = [$$[$0]]; 
+break;
+case 36: this.$ = [$$[$0-2], $$[$0]]; 
+break;
+case 37: this.$ = [$$[$0-2], new yy.StringNode($$[$0])]; 
+break;
+case 38: this.$ = [$$[$0-2], new yy.IntegerNode($$[$0])]; 
+break;
+case 39: this.$ = [$$[$0-2], new yy.BooleanNode($$[$0])]; 
+break;
+case 40: this.$ = [$$[$0-2], new yy.DataNode($$[$0])]; 
+break;
+case 41: this.$ = new yy.IdNode($$[$0]); 
+break;
+case 42: $$[$0-2].push($$[$0]); this.$ = $$[$0-2]; 
+break;
+case 43: this.$ = [$$[$0]]; 
+break;
+}
+},
+table: [{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],
+defaultActions: {16:[2,1],24:[2,25],38:[2,23],55:[2,21]},
+parseError: function parseError(str, hash) {
+    throw new Error(str);
+},
+parse: function parse(input) {
+    var self = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = "", yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
+    this.lexer.setInput(input);
+    this.lexer.yy = this.yy;
+    this.yy.lexer = this.lexer;
+    this.yy.parser = this;
+    if (typeof this.lexer.yylloc == "undefined")
+        this.lexer.yylloc = {};
+    var yyloc = this.lexer.yylloc;
+    lstack.push(yyloc);
+    var ranges = this.lexer.options && this.lexer.options.ranges;
+    if (typeof this.yy.parseError === "function")
+        this.parseError = this.yy.parseError;
+    function popStack(n) {
+        stack.length = stack.length - 2 * n;
+        vstack.length = vstack.length - n;
+        lstack.length = lstack.length - n;
+    }
+    function lex() {
+        var token;
+        token = self.lexer.lex() || 1;
+        if (typeof token !== "number") {
+            token = self.symbols_[token] || token;
+        }
+        return token;
+    }
+    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
+    while (true) {
+        state = stack[stack.length - 1];
+        if (this.defaultActions[state]) {
+            action = this.defaultActions[state];
+        } else {
+            if (symbol === null || typeof symbol == "undefined") {
+                symbol = lex();
+            }
+            action = table[state] && table[state][symbol];
+        }
+        if (typeof action === "undefined" || !action.length || !action[0]) {
+            var errStr = "";
+            if (!recovering) {
+                expected = [];
+                for (p in table[state])
+                    if (this.terminals_[p] && p > 2) {
+                        expected.push("'" + this.terminals_[p] + "'");
+                    }
+                if (this.lexer.showPosition) {
+                    errStr = "Parse error on line " + (yylineno + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + expected.join(", ") + ", got '" + (this.terminals_[symbol] || symbol) + "'";
+                } else {
+                    errStr = "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == 1?"end of input":"'" + (this.terminals_[symbol] || symbol) + "'");
+                }
+                this.parseError(errStr, {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});
+            }
+        }
+        if (action[0] instanceof Array && action.length > 1) {
+            throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);
+        }
+        switch (action[0]) {
+        case 1:
+            stack.push(symbol);
+            vstack.push(this.lexer.yytext);
+            lstack.push(this.lexer.yylloc);
+            stack.push(action[1]);
+            symbol = null;
+            if (!preErrorSymbol) {
+                yyleng = this.lexer.yyleng;
+                yytext = this.lexer.yytext;
+                yylineno = this.lexer.yylineno;
+                yyloc = this.lexer.yylloc;
+                if (recovering > 0)
+                    recovering--;
+            } else {
+                symbol = preErrorSymbol;
+                preErrorSymbol = null;
+            }
+            break;
+        case 2:
+            len = this.productions_[action[1]][1];
+            yyval.$ = vstack[vstack.length - len];
+            yyval._$ = {first_line: lstack[lstack.length - (len || 1)].first_line, last_line: lstack[lstack.length - 1].last_line, first_column: lstack[lstack.length - (len || 1)].first_column, last_column: lstack[lstack.length - 1].last_column};
+            if (ranges) {
+                yyval._$.range = [lstack[lstack.length - (len || 1)].range[0], lstack[lstack.length - 1].range[1]];
+            }
+            r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);
+            if (typeof r !== "undefined") {
+                return r;
+            }
+            if (len) {
+                stack = stack.slice(0, -1 * len * 2);
+                vstack = vstack.slice(0, -1 * len);
+                lstack = lstack.slice(0, -1 * len);
+            }
+            stack.push(this.productions_[action[1]][0]);
+            vstack.push(yyval.$);
+            lstack.push(yyval._$);
+            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
+            stack.push(newState);
+            break;
+        case 3:
+            return true;
+        }
+    }
+    return true;
+}
+};
+/* Jison generated lexer */
+var lexer = (function(){
+var lexer = ({EOF:1,
+parseError:function parseError(str, hash) {
+        if (this.yy.parser) {
+            this.yy.parser.parseError(str, hash);
+        } else {
+            throw new Error(str);
+        }
+    },
+setInput:function (input) {
+        this._input = input;
+        this._more = this._less = this.done = false;
+        this.yylineno = this.yyleng = 0;
+        this.yytext = this.matched = this.match = '';
+        this.conditionStack = ['INITIAL'];
+        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};
+        if (this.options.ranges) this.yylloc.range = [0,0];
+        this.offset = 0;
+        return this;
+    },
+input:function () {
+        var ch = this._input[0];
+        this.yytext += ch;
+        this.yyleng++;
+        this.offset++;
+        this.match += ch;
+        this.matched += ch;
+        var lines = ch.match(/(?:\r\n?|\n).*/g);
+        if (lines) {
+            this.yylineno++;
+            this.yylloc.last_line++;
+        } else {
+            this.yylloc.last_column++;
+        }
+        if (this.options.ranges) this.yylloc.range[1]++;
+
+        this._input = this._input.slice(1);
+        return ch;
+    },
+unput:function (ch) {
+        var len = ch.length;
+        var lines = ch.split(/(?:\r\n?|\n)/g);
+
+        this._input = ch + this._input;
+        this.yytext = this.yytext.substr(0, this.yytext.length-len-1);
+        //this.yyleng -= len;
+        this.offset -= len;
+        var oldLines = this.match.split(/(?:\r\n?|\n)/g);
+        this.match = this.match.substr(0, this.match.length-1);
+        this.matched = this.matched.substr(0, this.matched.length-1);
+
+        if (lines.length-1) this.yylineno -= lines.length-1;
+        var r = this.yylloc.range;
+
+        this.yylloc = {first_line: this.yylloc.first_line,
+          last_line: this.yylineno+1,
+          first_column: this.yylloc.first_column,
+          last_column: lines ?
+              (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length:
+              this.yylloc.first_column - len
+          };
+
+        if (this.options.ranges) {
+            this.yylloc.range = [r[0], r[0] + this.yyleng - len];
+        }
+        return this;
+    },
+more:function () {
+        this._more = true;
+        return this;
+    },
+less:function (n) {
+        this.unput(this.match.slice(n));
+    },
+pastInput:function () {
+        var past = this.matched.substr(0, this.matched.length - this.match.length);
+        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\n/g, "");
+    },
+upcomingInput:function () {
+        var next = this.match;
+        if (next.length < 20) {
+            next += this._input.substr(0, 20-next.length);
+        }
+        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\n/g, "");
+    },
+showPosition:function () {
+        var pre = this.pastInput();
+        var c = new Array(pre.length + 1).join("-");
+        return pre + this.upcomingInput() + "\n" + c+"^";
+    },
+next:function () {
+        if (this.done) {
+            return this.EOF;
+        }
+        if (!this._input) this.done = true;
+
+        var token,
+            match,
+            tempMatch,
+            index,
+            col,
+            lines;
+        if (!this._more) {
+            this.yytext = '';
+            this.match = '';
+        }
+        var rules = this._currentRules();
+        for (var i=0;i < rules.length; i++) {
+            tempMatch = this._input.match(this.rules[rules[i]]);
+            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {
+                match = tempMatch;
+                index = i;
+                if (!this.options.flex) break;
+            }
+        }
+        if (match) {
+            lines = match[0].match(/(?:\r\n?|\n).*/g);
+            if (lines) this.yylineno += lines.length;
+            this.yylloc = {first_line: this.yylloc.last_line,
+                           last_line: this.yylineno+1,
+                           first_column: this.yylloc.last_column,
+                           last_column: lines ? lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length : this.yylloc.last_column + match[0].length};
+            this.yytext += match[0];
+            this.match += match[0];
+            this.matches = match;
+            this.yyleng = this.yytext.length;
+            if (this.options.ranges) {
+                this.yylloc.range = [this.offset, this.offset += this.yyleng];
+            }
+            this._more = false;
+            this._input = this._input.slice(match[0].length);
+            this.matched += match[0];
+            token = this.performAction.call(this, this.yy, this, rules[index],this.conditionStack[this.conditionStack.length-1]);
+            if (this.done && this._input) this.done = false;
+            if (token) return token;
+            else return;
+        }
+        if (this._input === "") {
+            return this.EOF;
+        } else {
+            return this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),
+                    {text: "", token: null, line: this.yylineno});
+        }
+    },
+lex:function lex() {
+        var r = this.next();
+        if (typeof r !== 'undefined') {
+            return r;
+        } else {
+            return this.lex();
+        }
+    },
+begin:function begin(condition) {
+        this.conditionStack.push(condition);
+    },
+popState:function popState() {
+        return this.conditionStack.pop();
+    },
+_currentRules:function _currentRules() {
+        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;
+    },
+topState:function () {
+        return this.conditionStack[this.conditionStack.length-2];
+    },
+pushState:function begin(condition) {
+        this.begin(condition);
+    }});
+lexer.options = {};
+lexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {
+
+var YYSTATE=YY_START
+switch($avoiding_name_collisions) {
+case 0:
+                                   if(yy_.yytext.slice(-1) !== "\\") this.begin("mu");
+                                   if(yy_.yytext.slice(-1) === "\\") yy_.yytext = yy_.yytext.substr(0,yy_.yyleng-1), this.begin("emu");
+                                   if(yy_.yytext) return 14;
+                                 
+break;
+case 1: return 14; 
+break;
+case 2:
+                                   if(yy_.yytext.slice(-1) !== "\\") this.popState();
+                                   if(yy_.yytext.slice(-1) === "\\") yy_.yytext = yy_.yytext.substr(0,yy_.yyleng-1);
+                                   return 14;
+                                 
+break;
+case 3: return 24; 
+break;
+case 4: return 16; 
+break;
+case 5: return 20; 
+break;
+case 6: return 19; 
+break;
+case 7: return 19; 
+break;
+case 8: return 23; 
+break;
+case 9: return 23; 
+break;
+case 10: yy_.yytext = yy_.yytext.substr(3,yy_.yyleng-5); this.popState(); return 15; 
+break;
+case 11: return 22; 
+break;
+case 12: return 35; 
+break;
+case 13: return 34; 
+break;
+case 14: return 34; 
+break;
+case 15: return 37; 
+break;
+case 16: /*ignore whitespace*/ 
+break;
+case 17: this.popState(); return 18; 
+break;
+case 18: this.popState(); return 18; 
+break;
+case 19: yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"'); return 29; 
+break;
+case 20: yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"'); return 29; 
+break;
+case 21: yy_.yytext = yy_.yytext.substr(1); return 27; 
+break;
+case 22: return 31; 
+break;
+case 23: return 31; 
+break;
+case 24: return 30; 
+break;
+case 25: return 34; 
+break;
+case 26: yy_.yytext = yy_.yytext.substr(1, yy_.yyleng-2); return 34; 
+break;
+case 27: return 'INVALID'; 
+break;
+case 28: return 5; 
+break;
+}
+};
+lexer.rules = [/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];
+lexer.conditions = {"mu":{"rules":[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],"inclusive":false},"emu":{"rules":[2],"inclusive":false},"INITIAL":{"rules":[0,1,28],"inclusive":true}};
+return lexer;})()
+parser.lexer = lexer;
+function Parser () { this.yy = {}; }Parser.prototype = parser;parser.Parser = Parser;
+return new Parser;
+})();
+if (typeof require !== 'undefined' && typeof exports !== 'undefined') {
+exports.parser = handlebars;
+exports.Parser = handlebars.Parser;
+exports.parse = function () { return handlebars.parse.apply(handlebars, arguments); }
+exports.main = function commonjsMain(args) {
+    if (!args[1])
+        throw new Error('Usage: '+args[0]+' FILE');
+    var source, cwd;
+    if (typeof process !== 'undefined') {
+        source = require('fs').readFileSync(require('path').resolve(args[1]), "utf8");
+    } else {
+        source = require("file").path(require("file").cwd()).join(args[1]).read({charset: "utf-8"});
+    }
+    return exports.parser.parse(source);
+}
+if (typeof module !== 'undefined' && require.main === module) {
+  exports.main(typeof process !== 'undefined' ? process.argv.slice(1) : require("system").args);
+}
+};
+;
+// lib/handlebars/compiler/base.js
+Handlebars.Parser = handlebars;
+
+Handlebars.parse = function(string) {
+  Handlebars.Parser.yy = Handlebars.AST;
+  return Handlebars.Parser.parse(string);
+};
+
+Handlebars.print = function(ast) {
+  return new Handlebars.PrintVisitor().accept(ast);
+};
+
+Handlebars.logger = {
+  DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, level: 3,
+
+  // override in the host environment
+  log: function(level, str) {}
+};
+
+Handlebars.log = function(level, str) { Handlebars.logger.log(level, str); };
+;
+// lib/handlebars/compiler/ast.js
+(function() {
+
+  Handlebars.AST = {};
+
+  Handlebars.AST.ProgramNode = function(statements, inverse) {
+    this.type = "program";
+    this.statements = statements;
+    if(inverse) { this.inverse = new Handlebars.AST.ProgramNode(inverse); }
+  };
+
+  Handlebars.AST.MustacheNode = function(rawParams, hash, unescaped) {
+    this.type = "mustache";
+    this.escaped = !unescaped;
+    this.hash = hash;
+
+    var id = this.id = rawParams[0];
+    var params = this.params = rawParams.slice(1);
+
+    // a mustache is an eligible helper if:
+    // * its id is simple (a single part, not `this` or `..`)
+    var eligibleHelper = this.eligibleHelper = id.isSimple;
+
+    // a mustache is definitely a helper if:
+    // * it is an eligible helper, and
+    // * it has at least one parameter or hash segment
+    this.isHelper = eligibleHelper && (params.length || hash);
+
+    // if a mustache is an eligible helper but not a definite
+    // helper, it is ambiguous, and will be resolved in a later
+    // pass or at runtime.
+  };
+
+  Handlebars.AST.PartialNode = function(id, context) {
+    this.type    = "partial";
+
+    // TODO: disallow complex IDs
+
+    this.id      = id;
+    this.context = context;
+  };
+
+  var verifyMatch = function(open, close) {
+    if(open.original !== close.original) {
+      throw new Handlebars.Exception(open.original + " doesn't match " + close.original);
+    }
+  };
+
+  Handlebars.AST.BlockNode = function(mustache, program, inverse, close) {
+    verifyMatch(mustache.id, close);
+    this.type = "block";
+    this.mustache = mustache;
+    this.program  = program;
+    this.inverse  = inverse;
+
+    if (this.inverse && !this.program) {
+      this.isInverse = true;
+    }
+  };
+
+  Handlebars.AST.ContentNode = function(string) {
+    this.type = "content";
+    this.string = string;
+  };
+
+  Handlebars.AST.HashNode = function(pairs) {
+    this.type = "hash";
+    this.pairs = pairs;
+  };
+
+  Handlebars.AST.IdNode = function(parts) {
+    this.type = "ID";
+    this.original = parts.join(".");
+
+    var dig = [], depth = 0;
+
+    for(var i=0,l=parts.length; i<l; i++) {
+      var part = parts[i];
+
+      if(part === "..") { depth++; }
+      else if(part === "." || part === "this") { this.isScoped = true; }
+      else { dig.push(part); }
+    }
+
+    this.parts    = dig;
+    this.string   = dig.join('.');
+    this.depth    = depth;
+
+    // an ID is simple if it only has one part, and that part is not
+    // `..` or `this`.
+    this.isSimple = parts.length === 1 && !this.isScoped && depth === 0;
+  };
+
+  Handlebars.AST.DataNode = function(id) {
+    this.type = "DATA";
+    this.id = id;
+  };
+
+  Handlebars.AST.StringNode = function(string) {
+    this.type = "STRING";
+    this.string = string;
+  };
+
+  Handlebars.AST.IntegerNode = function(integer) {
+    this.type = "INTEGER";
+    this.integer = integer;
+  };
+
+  Handlebars.AST.BooleanNode = function(bool) {
+    this.type = "BOOLEAN";
+    this.bool = bool;
+  };
+
+  Handlebars.AST.CommentNode = function(comment) {
+    this.type = "comment";
+    this.comment = comment;
+  };
+
+})();;
+// lib/handlebars/utils.js
+Handlebars.Exception = function(message) {
+  var tmp = Error.prototype.constructor.apply(this, arguments);
+
+  for (var p in tmp) {
+    if (tmp.hasOwnProperty(p)) { this[p] = tmp[p]; }
+  }
+
+  this.message = tmp.message;
+};
+Handlebars.Exception.prototype = new Error();
+
+// Build out our basic SafeString type
+Handlebars.SafeString = function(string) {
+  this.string = string;
+};
+Handlebars.SafeString.prototype.toString = function() {
+  return this.string.toString();
+};
+
+(function() {
+  var escape = {
+    "&": "&amp;",
+    "<": "&lt;",
+    ">": "&gt;",
+    '"': "&quot;",
+    "'": "&#x27;",
+    "`": "&#x60;"
+  };
+
+  var badChars = /[&<>"'`]/g;
+  var possible = /[&<>"'`]/;
+
+  var escapeChar = function(chr) {
+    return escape[chr] || "&amp;";
+  };
+
+  Handlebars.Utils = {
+    escapeExpression: function(string) {
+      // don't escape SafeStrings, since they're already safe
+      if (string instanceof Handlebars.SafeString) {
+        return string.toString();
+      } else if (string == null || string === false) {
+        return "";
+      }
+
+      if(!possible.test(string)) { return string; }
+      return string.replace(badChars, escapeChar);
+    },
+
+    isEmpty: function(value) {
+      if (typeof value === "undefined") {
+        return true;
+      } else if (value === null) {
+        return true;
+      } else if (value === false) {
+        return true;
+      } else if(Object.prototype.toString.call(value) === "[object Array]" && value.length === 0) {
+        return true;
+      } else {
+        return false;
+      }
+    }
+  };
+})();;
+// lib/handlebars/compiler/compiler.js
+
+/*jshint eqnull:true*/
+Handlebars.Compiler = function() {};
+Handlebars.JavaScriptCompiler = function() {};
+
+(function(Compiler, JavaScriptCompiler) {
+  // the foundHelper register will disambiguate helper lookup from finding a
+  // function in a context. This is necessary for mustache compatibility, which
+  // requires that context functions in blocks are evaluated by blockHelperMissing,
+  // and then proceed as if the resulting value was provided to blockHelperMissing.
+
+  Compiler.prototype = {
+    compiler: Compiler,
+
+    disassemble: function() {
+      var opcodes = this.opcodes, opcode, out = [], params, param;
+
+      for (var i=0, l=opcodes.length; i<l; i++) {
+        opcode = opcodes[i];
+
+        if (opcode.opcode === 'DECLARE') {
+          out.push("DECLARE " + opcode.name + "=" + opcode.value);
+        } else {
+          params = [];
+          for (var j=0; j<opcode.args.length; j++) {
+            param = opcode.args[j];
+            if (typeof param === "string") {
+              param = "\"" + param.replace("\n", "\\n") + "\"";
+            }
+            params.push(param);
+          }
+          out.push(opcode.opcode + " " + params.join(" "));
+        }
+      }
+
+      return out.join("\n");
+    },
+
+    guid: 0,
+
+    compile: function(program, options) {
+      this.children = [];
+      this.depths = {list: []};
+      this.options = options;
+
+      // These changes will propagate to the other compiler components
+      var knownHelpers = this.options.knownHelpers;
+      this.options.knownHelpers = {
+        'helperMissing': true,
+        'blockHelperMissing': true,
+        'each': true,
+        'if': true,
+        'unless': true,
+        'with': true,
+        'log': true
+      };
+      if (knownHelpers) {
+        for (var name in knownHelpers) {
+          this.options.knownHelpers[name] = knownHelpers[name];
+        }
+      }
+
+      return this.program(program);
+    },
+
+    accept: function(node) {
+      return this[node.type](node);
+    },
+
+    program: function(program) {
+      var statements = program.statements, statement;
+      this.opcodes = [];
+
+      for(var i=0, l=statements.length; i<l; i++) {
+        statement = statements[i];
+        this[statement.type](statement);
+      }
+      this.isSimple = l === 1;
+
+      this.depths.list = this.depths.list.sort(function(a, b) {
+        return a - b;
+      });
+
+      return this;
+    },
+
+    compileProgram: function(program) {
+      var result = new this.compiler().compile(program, this.options);
+      var guid = this.guid++, depth;
+
+      this.usePartial = this.usePartial || result.usePartial;
+
+      this.children[guid] = result;
+
+      for(var i=0, l=result.depths.list.length; i<l; i++) {
+        depth = result.depths.list[i];
+
+        if(depth < 2) { continue; }
+        else { this.addDepth(depth - 1); }
+      }
+
+      return guid;
+    },
+
+    block: function(block) {
+      var mustache = block.mustache,
+          program = block.program,
+          inverse = block.inverse;
+
+      if (program) {
+        program = this.compileProgram(program);
+      }
+
+      if (inverse) {
+        inverse = this.compileProgram(inverse);
+      }
+
+      var type = this.classifyMustache(mustache);
+
+      if (type === "helper") {
+        this.helperMustache(mustache, program, inverse);
+      } else if (type === "simple") {
+        this.simpleMustache(mustache);
+
+        // now that the simple mustache is resolved, we need to
+        // evaluate it by executing `blockHelperMissing`
+        this.opcode('pushProgram', program);
+        this.opcode('pushProgram', inverse);
+        this.opcode('pushLiteral', '{}');
+        this.opcode('blockValue');
+      } else {
+        this.ambiguousMustache(mustache, program, inverse);
+
+        // now that the simple mustache is resolved, we need to
+        // evaluate it by executing `blockHelperMissing`
+        this.opcode('pushProgram', program);
+        this.opcode('pushProgram', inverse);
+        this.opcode('pushLiteral', '{}');
+        this.opcode('ambiguousBlockValue');
+      }
+
+      this.opcode('append');
+    },
+
+    hash: function(hash) {
+      var pairs = hash.pairs, pair, val;
+
+      this.opcode('push', '{}');
+
+      for(var i=0, l=pairs.length; i<l; i++) {
+        pair = pairs[i];
+        val  = pair[1];
+
+        this.accept(val);
+        this.opcode('assignToHash', pair[0]);
+      }
+    },
+
+    partial: function(partial) {
+      var id = partial.id;
+      this.usePartial = true;
+
+      if(partial.context) {
+        this.ID(partial.context);
+      } else {
+        this.opcode('push', 'depth0');
+      }
+
+      this.opcode('invokePartial', id.original);
+      this.opcode('append');
+    },
+
+    content: function(content) {
+      this.opcode('appendContent', content.string);
+    },
+
+    mustache: function(mustache) {
+      var options = this.options;
+      var type = this.classifyMustache(mustache);
+
+      if (type === "simple") {
+        this.simpleMustache(mustache);
+      } else if (type === "helper") {
+        this.helperMustache(mustache);
+      } else {
+        this.ambiguousMustache(mustache);
+      }
+
+      if(mustache.escaped && !options.noEscape) {
+        this.opcode('appendEscaped');
+      } else {
+        this.opcode('append');
+      }
+    },
+
+    ambiguousMustache: function(mustache, program, inverse) {
+      var id = mustache.id, name = id.parts[0];
+
+      this.opcode('getContext', id.depth);
+
+      this.opcode('pushProgram', program);
+      this.opcode('pushProgram', inverse);
+
+      this.opcode('invokeAmbiguous', name);
+    },
+
+    simpleMustache: function(mustache, program, inverse) {
+      var id = mustache.id;
+
+      if (id.type === 'DATA') {
+        this.DATA(id);
+      } else if (id.parts.length) {
+        this.ID(id);
+      } else {
+        // Simplified ID for `this`
+        this.addDepth(id.depth);
+        this.opcode('getContext', id.depth);
+        this.opcode('pushContext');
+      }
+
+      this.opcode('resolvePossibleLambda');
+    },
+
+    helperMustache: function(mustache, program, inverse) {
+      var params = this.setupFullMustacheParams(mustache, program, inverse),
+          name = mustache.id.parts[0];
+
+      if (this.options.knownHelpers[name]) {
+        this.opcode('invokeKnownHelper', params.length, name);
+      } else if (this.knownHelpersOnly) {
+        throw new Error("You specified knownHelpersOnly, but used the unknown helper " + name);
+      } else {
+        this.opcode('invokeHelper', params.length, name);
+      }
+    },
+
+    ID: function(id) {
+      this.addDepth(id.depth);
+      this.opcode('getContext', id.depth);
+
+      var name = id.parts[0];
+      if (!name) {
+        this.opcode('pushContext');
+      } else {
+        this.opcode('lookupOnContext', id.parts[0]);
+      }
+
+      for(var i=1, l=id.parts.length; i<l; i++) {
+        this.opcode('lookup', id.parts[i]);
+      }
+    },
+
+    DATA: function(data) {
+      this.options.data = true;
+      this.opcode('lookupData', data.id);
+    },
+
+    STRING: function(string) {
+      this.opcode('pushString', string.string);
+    },
+
+    INTEGER: function(integer) {
+      this.opcode('pushLiteral', integer.integer);
+    },
+
+    BOOLEAN: function(bool) {
+      this.opcode('pushLiteral', bool.bool);
+    },
+
+    comment: function() {},
+
+    // HELPERS
+    opcode: function(name) {
+      this.opcodes.push({ opcode: name, args: [].slice.call(arguments, 1) });
+    },
+
+    declare: function(name, value) {
+      this.opcodes.push({ opcode: 'DECLARE', name: name, value: value });
+    },
+
+    addDepth: function(depth) {
+      if(isNaN(depth)) { throw new Error("EWOT"); }
+      if(depth === 0) { return; }
+
+      if(!this.depths[depth]) {
+        this.depths[depth] = true;
+        this.depths.list.push(depth);
+      }
+    },
+
+    classifyMustache: function(mustache) {
+      var isHelper   = mustache.isHelper;
+      var isEligible = mustache.eligibleHelper;
+      var options    = this.options;
+
+      // if ambiguous, we can possibly resolve the ambiguity now
+      if (isEligible && !isHelper) {
+        var name = mustache.id.parts[0];
+
+        if (options.knownHelpers[name]) {
+          isHelper = true;
+        } else if (options.knownHelpersOnly) {
+          isEligible = false;
+        }
+      }
+
+      if (isHelper) { return "helper"; }
+      else if (isEligible) { return "ambiguous"; }
+      else { return "simple"; }
+    },
+
+    pushParams: function(params) {
+      var i = params.length, param;
+
+      while(i--) {
+        param = params[i];
+
+        if(this.options.stringParams) {
+          if(param.depth) {
+            this.addDepth(param.depth);
+          }
+
+          this.opcode('getContext', param.depth || 0);
+          this.opcode('pushStringParam', param.string);
+        } else {
+          this[param.type](param);
+        }
+      }
+    },
+
+    setupMustacheParams: function(mustache) {
+      var params = mustache.params;
+      this.pushParams(params);
+
+      if(mustache.hash) {
+        this.hash(mustache.hash);
+      } else {
+        this.opcode('pushLiteral', '{}');
+      }
+
+      return params;
+    },
+
+    // this will replace setupMustacheParams when we're done
+    setupFullMustacheParams: function(mustache, program, inverse) {
+      var params = mustache.params;
+      this.pushParams(params);
+
+      this.opcode('pushProgram', program);
+      this.opcode('pushProgram', inverse);
+
+      if(mustache.hash) {
+        this.hash(mustache.hash);
+      } else {
+        this.opcode('pushLiteral', '{}');
+      }
+
+      return params;
+    }
+  };
+
+  var Literal = function(value) {
+    this.value = value;
+  };
+
+  JavaScriptCompiler.prototype = {
+    // PUBLIC API: You can override these methods in a subclass to provide
+    // alternative compiled forms for name lookup and buffering semantics
+    nameLookup: function(parent, name, type) {
+      if (/^[0-9]+$/.test(name)) {
+        return parent + "[" + name + "]";
+      } else if (JavaScriptCompiler.isValidJavaScriptVariableName(name)) {
+        return parent + "." + name;
+      }
+      else {
+        return parent + "['" + name + "']";
+      }
+    },
+
+    appendToBuffer: function(string) {
+      if (this.environment.isSimple) {
+        return "return " + string + ";";
+      } else {
+        return "buffer += " + string + ";";
+      }
+    },
+
+    initializeBuffer: function() {
+      return this.quotedString("");
+    },
+
+    namespace: "Handlebars",
+    // END PUBLIC API
+
+    compile: function(environment, options, context, asObject) {
+      this.environment = environment;
+      this.options = options || {};
+
+      Handlebars.log(Handlebars.logger.DEBUG, this.environment.disassemble() + "\n\n");
+
+      this.name = this.environment.name;
+      this.isChild = !!context;
+      this.context = context || {
+        programs: [],
+        aliases: { }
+      };
+
+      this.preamble();
+
+      this.stackSlot = 0;
+      this.stackVars = [];
+      this.registers = { list: [] };
+      this.compileStack = [];
+
+      this.compileChildren(environment, options);
+
+      var opcodes = environment.opcodes, opcode;
+
+      this.i = 0;
+
+      for(l=opcodes.length; this.i<l; this.i++) {
+        opcode = opcodes[this.i];
+
+        if(opcode.opcode === 'DECLARE') {
+          this[opcode.name] = opcode.value;
+        } else {
+          this[opcode.opcode].apply(this, opcode.args);
+        }
+      }
+
+      return this.createFunctionContext(asObject);
+    },
+
+    nextOpcode: function() {
+      var opcodes = this.environment.opcodes, opcode = opcodes[this.i + 1];
+      return opcodes[this.i + 1];
+    },
+
+    eat: function(opcode) {
+      this.i = this.i + 1;
+    },
+
+    preamble: function() {
+      var out = [];
+
+      if (!this.isChild) {
+        var namespace = this.namespace;
+        var copies = "helpers = helpers || " + namespace + ".helpers;";
+        if (this.environment.usePartial) { copies = copies + " partials = partials || " + namespace + ".partials;"; }
+        if (this.options.data) { copies = copies + " data = data || {};"; }
+        out.push(copies);
+      } else {
+        out.push('');
+      }
+
+      if (!this.environment.isSimple) {
+        out.push(", buffer = " + this.initializeBuffer());
+      } else {
+        out.push("");
+      }
+
+      // track the last context pushed into place to allow skipping the
+      // getContext opcode when it would be a noop
+      this.lastContext = 0;
+      this.source = out;
+    },
+
+    createFunctionContext: function(asObject) {
+      var locals = this.stackVars.concat(this.registers.list);
+
+      if(locals.length > 0) {
+        this.source[1] = this.source[1] + ", " + locals.join(", ");
+      }
+
+      // Generate minimizer alias mappings
+      if (!this.isChild) {
+        var aliases = [];
+        for (var alias in this.context.aliases) {
+          this.source[1] = this.source[1] + ', ' + alias + '=' + this.context.aliases[alias];
+        }
+      }
+
+      if (this.source[1]) {
+        this.source[1] = "var " + this.source[1].substring(2) + ";";
+      }
+
+      // Merge children
+      if (!this.isChild) {
+        this.source[1] += '\n' + this.context.programs.join('\n') + '\n';
+      }
+
+      if (!this.environment.isSimple) {
+        this.source.push("return buffer;");
+      }
+
+      var params = this.isChild ? ["depth0", "data"] : ["Handlebars", "depth0", "helpers", "partials", "data"];
+
+      for(var i=0, l=this.environment.depths.list.length; i<l; i++) {
+        params.push("depth" + this.environment.depths.list[i]);
+      }
+
+      if (asObject) {
+        params.push(this.source.join("\n  "));
+
+        return Function.apply(this, params);
+      } else {
+        var functionSource = 'function ' + (this.name || '') + '(' + params.join(',') + ') {\n  ' + this.source.join("\n  ") + '}';
+        Handlebars.log(Handlebars.logger.DEBUG, functionSource + "\n\n");
+        return functionSource;
+      }
+    },
+
+    // [blockValue]
+    //
+    // On stack, before: hash, inverse, program, value
+    // On stack, after: return value of blockHelperMissing
+    //
+    // The purpose of this opcode is to take a block of the form
+    // `{{#foo}}...{{/foo}}`, resolve the value of `foo`, and
+    // replace it on the stack with the result of properly
+    // invoking blockHelperMissing.
+    blockValue: function() {
+      this.context.aliases.blockHelperMissing = 'helpers.blockHelperMissing';
+
+      var params = ["depth0"];
+      this.setupParams(0, params);
+
+      this.replaceStack(function(current) {
+        params.splice(1, 0, current);
+        return current + " = blockHelperMissing.call(" + params.join(", ") + ")";
+      });
+    },
+
+    // [ambiguousBlockValue]
+    //
+    // On stack, before: hash, inverse, program, value
+    // Compiler value, before: lastHelper=value of last found helper, if any
+    // On stack, after, if no lastHelper: same as [blockValue]
+    // On stack, after, if lastHelper: value
+    ambiguousBlockValue: function() {
+      this.context.aliases.blockHelperMissing = 'helpers.blockHelperMissing';
+
+      var params = ["depth0"];
+      this.setupParams(0, params);
+
+      var current = this.topStack();
+      params.splice(1, 0, current);
+
+      this.source.push("if (!" + this.lastHelper + ") { " + current + " = blockHelperMissing.call(" + params.join(", ") + "); }");
+    },
+
+    // [appendContent]
+    //
+    // On stack, before: ...
+    // On stack, after: ...
+    //
+    // Appends the string value of `content` to the current buffer
+    appendContent: function(content) {
+      this.source.push(this.appendToBuffer(this.quotedString(content)));
+    },
+
+    // [append]
+    //
+    // On stack, before: value, ...
+    // On stack, after: ...
+    //
+    // Coerces `value` to a String and appends it to the current buffer.
+    //
+    // If `value` is truthy, or 0, it is coerced into a string and appended
+    // Otherwise, the empty string is appended
+    append: function() {
+      var local = this.popStack();
+      this.source.push("if(" + local + " || " + local + " === 0) { " + this.appendToBuffer(local) + " }");
+      if (this.environment.isSimple) {
+        this.source.push("else { " + this.appendToBuffer("''") + " }");
+      }
+    },
+
+    // [appendEscaped]
+    //
+    // On stack, before: value, ...
+    // On stack, after: ...
+    //
+    // Escape `value` and append it to the buffer
+    appendEscaped: function() {
+      var opcode = this.nextOpcode(), extra = "";
+      this.context.aliases.escapeExpression = 'this.escapeExpression';
+
+      if(opcode && opcode.opcode === 'appendContent') {
+        extra = " + " + this.quotedString(opcode.args[0]);
+        this.eat(opcode);
+      }
+
+      this.source.push(this.appendToBuffer("escapeExpression(" + this.popStack() + ")" + extra));
+    },
+
+    // [getContext]
+    //
+    // On stack, before: ...
+    // On stack, after: ...
+    // Compiler value, after: lastContext=depth
+    //
+    // Set the value of the `lastContext` compiler value to the depth
+    getContext: function(depth) {
+      if(this.lastContext !== depth) {
+        this.lastContext = depth;
+      }
+    },
+
+    // [lookupOnContext]
+    //
+    // On stack, before: ...
+    // On stack, after: currentContext[name], ...
+    //
+    // Looks up the value of `name` on the current context and pushes
+    // it onto the stack.
+    lookupOnContext: function(name) {
+      this.pushStack(this.nameLookup('depth' + this.lastContext, name, 'context'));
+    },
+
+    // [pushContext]
+    //
+    // On stack, before: ...
+    // On stack, after: currentContext, ...
+    //
+    // Pushes the value of the current context onto the stack.
+    pushContext: function() {
+      this.pushStackLiteral('depth' + this.lastContext);
+    },
+
+    // [resolvePossibleLambda]
+    //
+    // On stack, before: value, ...
+    // On stack, after: resolved value, ...
+    //
+    // If the `value` is a lambda, replace it on the stack by
+    // the return value of the lambda
+    resolvePossibleLambda: function() {
+      this.context.aliases.functionType = '"function"';
+
+      this.replaceStack(function(current) {
+        return "typeof " + current + " === functionType ? " + current + "() : " + current;
+      });
+    },
+
+    // [lookup]
+    //
+    // On stack, before: value, ...
+    // On stack, after: value[name], ...
+    //
+    // Replace the value on the stack with the result of looking
+    // up `name` on `value`
+    lookup: function(name) {
+      this.replaceStack(function(current) {
+        return current + " == null || " + current + " === false ? " + current + " : " + this.nameLookup(current, name, 'context');
+      });
+    },
+
+    // [lookupData]
+    //
+    // On stack, before: ...
+    // On stack, after: data[id], ...
+    //
+    // Push the result of looking up `id` on the current data
+    lookupData: function(id) {
+      this.pushStack(this.nameLookup('data', id, 'data'));
+    },
+
+    // [pushStringParam]
+    //
+    // On stack, before: ...
+    // On stack, after: string, currentContext, ...
+    //
+    // This opcode is designed for use in string mode, which
+    // provides the string value of a parameter along with its
+    // depth rather than resolving it immediately.
+    pushStringParam: function(string) {
+      this.pushStackLiteral('depth' + this.lastContext);
+      this.pushString(string);
+    },
+
+    // [pushString]
+    //
+    // On stack, before: ...
+    // On stack, after: quotedString(string), ...
+    //
+    // Push a quoted version of `string` onto the stack
+    pushString: function(string) {
+      this.pushStackLiteral(this.quotedString(string));
+    },
+
+    // [push]
+    //
+    // On stack, before: ...
+    // On stack, after: expr, ...
+    //
+    // Push an expression onto the stack
+    push: function(expr) {
+      this.pushStack(expr);
+    },
+
+    // [pushLiteral]
+    //
+    // On stack, before: ...
+    // On stack, after: value, ...
+    //
+    // Pushes a value onto the stack. This operation prevents
+    // the compiler from creating a temporary variable to hold
+    // it.
+    pushLiteral: function(value) {
+      this.pushStackLiteral(value);
+    },
+
+    // [pushProgram]
+    //
+    // On stack, before: ...
+    // On stack, after: program(guid), ...
+    //
+    // Push a program expression onto the stack. This takes
+    // a compile-time guid and converts it into a runtime-accessible
+    // expression.
+    pushProgram: function(guid) {
+      if (guid != null) {
+        this.pushStackLiteral(this.programExpression(guid));
+      } else {
+        this.pushStackLiteral(null);
+      }
+    },
+
+    // [invokeHelper]
+    //
+    // On stack, before: hash, inverse, program, params..., ...
+    // On stack, after: result of helper invocation
+    //
+    // Pops off the helper's parameters, invokes the helper,
+    // and pushes the helper's return value onto the stack.
+    //
+    // If the helper is not found, `helperMissing` is called.
+    invokeHelper: function(paramSize, name) {
+      this.context.aliases.helperMissing = 'helpers.helperMissing';
+
+      var helper = this.lastHelper = this.setupHelper(paramSize, name);
+      this.register('foundHelper', helper.name);
+
+      this.pushStack("foundHelper ? foundHelper.call(" +
+        helper.callParams + ") " + ": helperMissing.call(" +
+        helper.helperMissingParams + ")");
+    },
+
+    // [invokeKnownHelper]
+    //
+    // On stack, before: hash, inverse, program, params..., ...
+    // On stack, after: result of helper invocation
+    //
+    // This operation is used when the helper is known to exist,
+    // so a `helperMissing` fallback is not required.
+    invokeKnownHelper: function(paramSize, name) {
+      var helper = this.setupHelper(paramSize, name);
+      this.pushStack(helper.name + ".call(" + helper.callParams + ")");
+    },
+
+    // [invokeAmbiguous]
+    //
+    // On stack, before: hash, inverse, program, params..., ...
+    // On stack, after: result of disambiguation
+    //
+    // This operation is used when an expression like `{{foo}}`
+    // is provided, but we don't know at compile-time whether it
+    // is a helper or a path.
+    //
+    // This operation emits more code than the other options,
+    // and can be avoided by passing the `knownHelpers` and
+    // `knownHelpersOnly` flags at compile-time.
+    invokeAmbiguous: function(name) {
+      this.context.aliases.functionType = '"function"';
+
+      this.pushStackLiteral('{}');
+      var helper = this.setupHelper(0, name);
+
+      var helperName = this.lastHelper = this.nameLookup('helpers', name, 'helper');
+      this.register('foundHelper', helperName);
+
+      var nonHelper = this.nameLookup('depth' + this.lastContext, name, 'context');
+      var nextStack = this.nextStack();
+
+      this.source.push('if (foundHelper) { ' + nextStack + ' = foundHelper.call(' + helper.callParams + '); }');
+      this.source.push('else { ' + nextStack + ' = ' + nonHelper + '; ' + nextStack + ' = typeof ' + nextStack + ' === functionType ? ' + nextStack + '() : ' + nextStack + '; }');
+    },
+
+    // [invokePartial]
+    //
+    // On stack, before: context, ...
+    // On stack after: result of partial invocation
+    //
+    // This operation pops off a context, invokes a partial with that context,
+    // and pushes the result of the invocation back.
+    invokePartial: function(name) {
+      var params = [this.nameLookup('partials', name, 'partial'), "'" + name + "'", this.popStack(), "helpers", "partials"];
+
+      if (this.options.data) {
+        params.push("data");
+      }
+
+      this.context.aliases.self = "this";
+      this.pushStack("self.invokePartial(" + params.join(", ") + ");");
+    },
+
+    // [assignToHash]
+    //
+    // On stack, before: value, hash, ...
+    // On stack, after: hash, ...
+    //
+    // Pops a value and hash off the stack, assigns `hash[key] = value`
+    // and pushes the hash back onto the stack.
+    assignToHash: function(key) {
+      var value = this.popStack();
+      var hash = this.topStack();
+
+      this.source.push(hash + "['" + key + "'] = " + value + ";");
+    },
+
+    // HELPERS
+
+    compiler: JavaScriptCompiler,
+
+    compileChildren: function(environment, options) {
+      var children = environment.children, child, compiler;
+
+      for(var i=0, l=children.length; i<l; i++) {
+        child = children[i];
+        compiler = new this.compiler();
+
+        this.context.programs.push('');     // Placeholder to prevent name conflicts for nested children
+        var index = this.context.programs.length;
+        child.index = index;
+        child.name = 'program' + index;
+        this.context.programs[index] = compiler.compile(child, options, this.context);
+      }
+    },
+
+    programExpression: function(guid) {
+      this.context.aliases.self = "this";
+
+      if(guid == null) {
+        return "self.noop";
+      }
+
+      var child = this.environment.children[guid],
+          depths = child.depths.list, depth;
+
+      var programParams = [child.index, child.name, "data"];
+
+      for(var i=0, l = depths.length; i<l; i++) {
+        depth = depths[i];
+
+        if(depth === 1) { programParams.push("depth0"); }
+        else { programParams.push("depth" + (depth - 1)); }
+      }
+
+      if(depths.length === 0) {
+        return "self.program(" + programParams.join(", ") + ")";
+      } else {
+        programParams.shift();
+        return "self.programWithDepth(" + programParams.join(", ") + ")";
+      }
+    },
+
+    register: function(name, val) {
+      this.useRegister(name);
+      this.source.push(name + " = " + val + ";");
+    },
+
+    useRegister: function(name) {
+      if(!this.registers[name]) {
+        this.registers[name] = true;
+        this.registers.list.push(name);
+      }
+    },
+
+    pushStackLiteral: function(item) {
+      this.compileStack.push(new Literal(item));
+      return item;
+    },
+
+    pushStack: function(item) {
+      this.source.push(this.incrStack() + " = " + item + ";");
+      this.compileStack.push("stack" + this.stackSlot);
+      return "stack" + this.stackSlot;
+    },
+
+    replaceStack: function(callback) {
+      var item = callback.call(this, this.topStack());
+
+      this.source.push(this.topStack() + " = " + item + ";");
+      return "stack" + this.stackSlot;
+    },
+
+    nextStack: function(skipCompileStack) {
+      var name = this.incrStack();
+      this.compileStack.push("stack" + this.stackSlot);
+      return name;
+    },
+
+    incrStack: function() {
+      this.stackSlot++;
+      if(this.stackSlot > this.stackVars.length) { this.stackVars.push("stack" + this.stackSlot); }
+      return "stack" + this.stackSlot;
+    },
+
+    popStack: function() {
+      var item = this.compileStack.pop();
+
+      if (item instanceof Literal) {
+        return item.value;
+      } else {
+        this.stackSlot--;
+        return item;
+      }
+    },
+
+    topStack: function() {
+      var item = this.compileStack[this.compileStack.length - 1];
+
+      if (item instanceof Literal) {
+        return item.value;
+      } else {
+        return item;
+      }
+    },
+
+    quotedString: function(str) {
+      return '"' + str
+        .replace(/\\/g, '\\\\')
+        .replace(/"/g, '\\"')
+        .replace(/\n/g, '\\n')
+        .replace(/\r/g, '\\r') + '"';
+    },
+
+    setupHelper: function(paramSize, name) {
+      var params = [];
+      this.setupParams(paramSize, params);
+      var foundHelper = this.nameLookup('helpers', name, 'helper');
+
+      return {
+        params: params,
+        name: foundHelper,
+        callParams: ["depth0"].concat(params).join(", "),
+        helperMissingParams: ["depth0", this.quotedString(name)].concat(params).join(", ")
+      };
+    },
+
+    // the params and contexts arguments are passed in arrays
+    // to fill in
+    setupParams: function(paramSize, params) {
+      var options = [], contexts = [], param, inverse, program;
+
+      options.push("hash:" + this.popStack());
+
+      inverse = this.popStack();
+      program = this.popStack();
+
+      // Avoid setting fn and inverse if neither are set. This allows
+      // helpers to do a check for `if (options.fn)`
+      if (program || inverse) {
+        if (!program) {
+          this.context.aliases.self = "this";
+          program = "self.noop";
+        }
+
+        if (!inverse) {
+         this.context.aliases.self = "this";
+          inverse = "self.noop";
+        }
+
+        options.push("inverse:" + inverse);
+        options.push("fn:" + program);
+      }
+
+      for(var i=0; i<paramSize; i++) {
+        param = this.popStack();
+        params.push(param);
+
+        if(this.options.stringParams) {
+          contexts.push(this.popStack());
+        }
+      }
+
+      if (this.options.stringParams) {
+        options.push("contexts:[" + contexts.join(",") + "]");
+      }
+
+      if(this.options.data) {
+        options.push("data:data");
+      }
+
+      params.push("{" + options.join(",") + "}");
+      return params.join(", ");
+    }
+  };
+
+  var reservedWords = (
+    "break else new var" +
+    " case finally return void" +
+    " catch for switch while" +
+    " continue function this with" +
+    " default if throw" +
+    " delete in try" +
+    " do instanceof typeof" +
+    " abstract enum int short" +
+    " boolean export interface static" +
+    " byte extends long super" +
+    " char final native synchronized" +
+    " class float package throws" +
+    " const goto private transient" +
+    " debugger implements protected volatile" +
+    " double import public let yield"
+  ).split(" ");
+
+  var compilerWords = JavaScriptCompiler.RESERVED_WORDS = {};
+
+  for(var i=0, l=reservedWords.length; i<l; i++) {
+    compilerWords[reservedWords[i]] = true;
+  }
+
+  JavaScriptCompiler.isValidJavaScriptVariableName = function(name) {
+    if(!JavaScriptCompiler.RESERVED_WORDS[name] && /^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(name)) {
+      return true;
+    }
+    return false;
+  };
+
+})(Handlebars.Compiler, Handlebars.JavaScriptCompiler);
+
+Handlebars.precompile = function(string, options) {
+  options = options || {};
+
+  var ast = Handlebars.parse(string);
+  var environment = new Handlebars.Compiler().compile(ast, options);
+  return new Handlebars.JavaScriptCompiler().compile(environment, options);
+};
+
+Handlebars.compile = function(string, options) {
+  options = options || {};
+
+  var compiled;
+  function compile() {
+    var ast = Handlebars.parse(string);
+    var environment = new Handlebars.Compiler().compile(ast, options);
+    var templateSpec = new Handlebars.JavaScriptCompiler().compile(environment, options, undefined, true);
+    return Handlebars.template(templateSpec);
+  }
+
+  // Template is only compiled on first use and cached after that point.
+  return function(context, options) {
+    if (!compiled) {
+      compiled = compile();
+    }
+    return compiled.call(this, context, options);
+  };
+};
+;
+// lib/handlebars/runtime.js
+Handlebars.VM = {
+  template: function(templateSpec) {
+    // Just add water
+    var container = {
+      escapeExpression: Handlebars.Utils.escapeExpression,
+      invokePartial: Handlebars.VM.invokePartial,
+      programs: [],
+      program: function(i, fn, data) {
+        var programWrapper = this.programs[i];
+        if(data) {
+          return Handlebars.VM.program(fn, data);
+        } else if(programWrapper) {
+          return programWrapper;
+        } else {
+          programWrapper = this.programs[i] = Handlebars.VM.program(fn);
+          return programWrapper;
+        }
+      },
+      programWithDepth: Handlebars.VM.programWithDepth,
+      noop: Handlebars.VM.noop
+    };
+
+    return function(context, options) {
+      options = options || {};
+      return templateSpec.call(container, Handlebars, context, options.helpers, options.partials, options.data);
+    };
+  },
+
+  programWithDepth: function(fn, data, $depth) {
+    var args = Array.prototype.slice.call(arguments, 2);
+
+    return function(context, options) {
+      options = options || {};
+
+      return fn.apply(this, [context, options.data || data].concat(args));
+    };
+  },
+  program: function(fn, data) {
+    return function(context, options) {
+      options = options || {};
+
+      return fn(context, options.data || data);
+    };
+  },
+  noop: function() { return ""; },
+  invokePartial: function(partial, name, context, helpers, partials, data) {
+    var options = { helpers: helpers, partials: partials, data: data };
+
+    if(partial === undefined) {
+      throw new Handlebars.Exception("The partial " + name + " could not be found");
+    } else if(partial instanceof Function) {
+      return partial(context, options);
+    } else if (!Handlebars.compile) {
+      throw new Handlebars.Exception("The partial " + name + " could not be compiled when running in runtime-only mode");
+    } else {
+      partials[name] = Handlebars.compile(partial, {data: data !== undefined});
+      return partials[name](context, options);
+    }
+  }
+};
+
+Handlebars.template = Handlebars.VM.template;
+;
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/jquery-ui.min.js elefant-elefant_1_3_3_beta/apps/admin/js/jquery-ui.min.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/jquery-ui.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/jquery-ui.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,407 @@
+/*!
+ * jQuery UI 1.8.13
+ *
+ * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
+ * Dual licensed under the MIT or GPL Version 2 licenses.
+ * http://jquery.org/license
+ *
+ * http://docs.jquery.com/UI
+ */
+(function(a,d){function c(g,e){var i=g.nodeName.toLowerCase();if("area"===i){e=g.parentNode;i=e.name;if(!g.href||!i||e.nodeName.toLowerCase()!=="map")return false;g=a("img[usemap=#"+i+"]")[0];return!!g&&f(g)}return(/input|select|textarea|button|object/.test(i)?!g.disabled:"a"==i?g.href||e:e)&&f(g)}function f(g){return!a(g).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.13",
+keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(g,e){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){a(i).focus();
+e&&e.call(i)},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;g=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,
+"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!g.length?a(document):g},zIndex:function(g){if(g!==d)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var e;g.length&&g[0]!==document;){e=g.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){e=parseInt(g.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}g=g.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",
+function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(g,e){function i(l,o,n,k){a.each(b,function(){o-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(n)o-=parseFloat(a.curCSS(l,"border"+this+"Width",true))||0;if(k)o-=parseFloat(a.curCSS(l,"margin"+this,true))||0});return o}var b=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
+outerHeight:a.fn.outerHeight};a.fn["inner"+e]=function(l){if(l===d)return j["inner"+e].call(this);return this.each(function(){a(this).css(h,i(this,l)+"px")})};a.fn["outer"+e]=function(l,o){if(typeof l!=="number")return j["outer"+e].call(this,l);return this.each(function(){a(this).css(h,i(this,l,true,o)+"px")})}});a.extend(a.expr[":"],{data:function(g,e,i){return!!a.data(g,i[3])},focusable:function(g){return c(g,!isNaN(a.attr(g,"tabindex")))},tabbable:function(g){var e=a.attr(g,"tabindex"),i=isNaN(e);
+return(i||e>=0)&&c(g,!i)}});a(function(){var g=document.body,e=g.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart"in e;g.removeChild(e).style.display="none"});a.extend(a.ui,{plugin:{add:function(g,e,i){g=a.ui[g].prototype;for(var b in i){g.plugins[b]=g.plugins[b]||[];g.plugins[b].push([e,i[b]])}},call:function(g,e,i){if((e=g.plugins[e])&&g.element[0].parentNode)for(var b=
+0;b<e.length;b++)g.options[e[b][0]]&&e[b][1].apply(g.element,i)}},contains:function(g,e){return document.compareDocumentPosition?g.compareDocumentPosition(e)&16:g!==e&&g.contains(e)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden")return false;e=e&&e==="left"?"scrollLeft":"scrollTop";var i=false;if(g[e]>0)return true;g[e]=1;i=g[e]>0;g[e]=0;return i},isOverAxis:function(g,e,i){return g>e&&g<e+i},isOver:function(g,e,i,b,h,j){return a.ui.isOverAxis(g,i,h)&&a.ui.isOverAxis(e,b,j)}})}})(jQuery);
+(function(a,d){if(a.cleanData){var c=a.cleanData;a.cleanData=function(g){for(var e=0,i;(i=g[e])!=null;e++)a(i).triggerHandler("remove");c(g)}}else{var f=a.fn.remove;a.fn.remove=function(g,e){return this.each(function(){if(!e)if(!g||a.filter(g,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return f.call(a(this),g,e)})}}a.widget=function(g,e,i){var b=g.split(".")[0],h;g=g.split(".")[1];h=b+"-"+g;if(!i){i=e;e=a.Widget}a.expr[":"][h]=function(j){return!!a.data(j,
+g)};a[b]=a[b]||{};a[b][g]=function(j,l){arguments.length&&this._createWidget(j,l)};e=new e;e.options=a.extend(true,{},e.options);a[b][g].prototype=a.extend(true,e,{namespace:b,widgetName:g,widgetEventPrefix:a[b][g].prototype.widgetEventPrefix||g,widgetBaseClass:h},i);a.widget.bridge(g,a[b][g])};a.widget.bridge=function(g,e){a.fn[g]=function(i){var b=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!b&&h.length?a.extend.apply(null,[true,i].concat(h)):i;if(b&&i.charAt(0)==="_")return j;
+b?this.each(function(){var l=a.data(this,g),o=l&&a.isFunction(l[i])?l[i].apply(l,h):l;if(o!==l&&o!==d){j=o;return false}}):this.each(function(){var l=a.data(this,g);l?l.option(i||{})._init():a.data(this,g,new e(i,this))});return j}};a.Widget=function(g,e){arguments.length&&this._createWidget(g,e)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(g,e){a.data(e,this.widgetName,this);this.element=a(e);this.options=a.extend(true,{},this.options,
+this._getCreateOptions(),g);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
+widget:function(){return this.element},option:function(g,e){var i=g;if(arguments.length===0)return a.extend({},this.options);if(typeof g==="string"){if(e===d)return this.options[g];i={};i[g]=e}this._setOptions(i);return this},_setOptions:function(g){var e=this;a.each(g,function(i,b){e._setOption(i,b)});return this},_setOption:function(g,e){this.options[g]=e;if(g==="disabled")this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e);return this},
+enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(g,e,i){var b=this.options[g];e=a.Event(e);e.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();i=i||{};if(e.originalEvent){g=a.event.props.length;for(var h;g;){h=a.event.props[--g];e[h]=e.originalEvent[h]}}this.element.trigger(e,i);return!(a.isFunction(b)&&b.call(this.element[0],e,i)===false||e.isDefaultPrevented())}}})(jQuery);
+(function(a){var d=false;a(document).mousedown(function(){d=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(f){return c._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===a.data(f.target,c.widgetName+".preventClickEvent")){a.removeData(f.target,c.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
+this.widgetName)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var f=this,g=c.which==1,e=typeof this.options.cancel=="string"?a(c.target).parents().add(c.target).filter(this.options.cancel).length:false;if(!g||e||!this._mouseCapture(c))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=
+this._mouseStart(c)!==false;if(!this._mouseStarted){c.preventDefault();return true}}true===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(i){return f._mouseMove(i)};this._mouseUpDelegate=function(i){return f._mouseUp(i)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=true}},_mouseMove:function(c){if(a.browser.msie&&
+!(document.documentMode>=9)&&!c.button)return this._mouseUp(c);if(this._mouseStarted){this._mouseDrag(c);return c.preventDefault()}if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==false)?this._mouseDrag(c):this._mouseUp(c);return!this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
+false;c.target==this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",true);this._mouseStop(c)}return false},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
+(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
+"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(d){var c=
+this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(d);if(!this.handle)return false;a(c.iframeFix===true?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(d){var c=this.options;this.helper=
+this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
+this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);
+this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(d){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)c=
+a.ui.ddmanager.drop(this,d);if(this.dropped){c=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",d)!==false&&f._clear()})}else this._trigger("stop",
+d)!==false&&this._clear();return false},_mouseUp:function(d){this.options.iframeFix===true&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});return a.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
+d.target)c=true});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d=
+{left:+d[0],top:+d[1]||0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&
+a.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=
+this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
+{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[(d.containment=="document"?0:a(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(d.containment=="document"?0:a(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(d.containment=="document"?0:a(window).scrollLeft())+
+a(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d.containment=="document"?0:a(window).scrollTop())+(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)&&d.containment.constructor!=Array){d=a(d.containment);var c=d[0];if(c){d.offset();var f=a(c).css("overflow")!="hidden";this.containment=[(parseInt(a(c).css("borderLeftWidth"),
+10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-
+this.margins.top-this.margins.bottom];this.relative_container=d}}else if(d.containment.constructor==Array)this.containment=d.containment},_convertPositionTo:function(d,c){if(!c)c=this.position;d=d=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&
+a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
+this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName),e=d.pageX,i=d.pageY;if(this.originalPosition){var b;if(this.containment){if(this.relative_container){b=this.relative_container.offset();b=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]}else b=this.containment;if(d.pageX-this.offset.click.left<b[0])e=b[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<b[1])i=b[1]+this.offset.click.top;
+if(d.pageX-this.offset.click.left>b[2])e=b[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>b[3])i=b[3]+this.offset.click.top}if(c.grid){i=this.originalPageY+Math.round((i-this.originalPageY)/c.grid[1])*c.grid[1];i=b?!(i-this.offset.click.top<b[1]||i-this.offset.click.top>b[3])?i:!(i-this.offset.click.top<b[1])?i-c.grid[1]:i+c.grid[1]:i;e=this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0];e=b?!(e-this.offset.click.left<b[0]||e-this.offset.click.left>b[2])?e:!(e-this.offset.click.left<
+b[0])?e-c.grid[0]:e+c.grid[0]:e}}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
+this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,c,f){f=f||this._uiHash();a.ui.plugin.call(this,d,[c,f]);if(d=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,d,c,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.13"});
+a.ui.plugin.add("draggable","connectToSortable",{start:function(d,c){var f=a(this).data("draggable"),g=f.options,e=a.extend({},c,{item:f.element});f.sortables=[];a(g.connectToSortable).each(function(){var i=a.data(this,"sortable");if(i&&!i.options.disabled){f.sortables.push({instance:i,shouldRevert:i.options.revert});i.refreshPositions();i._trigger("activate",d,e)}})},stop:function(d,c){var f=a(this).data("draggable"),g=a.extend({},c,{item:f.element});a.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=
+0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,g)}})},drag:function(d,c){var f=a(this).data("draggable"),g=this;a.each(f.sortables,function(){this.instance.positionAbs=
+f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,
+true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",d);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}this.instance.currentItem&&this.instance._mouseDrag(d)}else if(this.instance.isOver){this.instance.isOver=
+0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();f._trigger("fromSortable",d);f.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor"))c._cursor=
+d.css("cursor");d.css("cursor",c.cursor)},stop:function(){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity"))c._opacity=d.css("opacity");d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("draggable");
+if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML")d.overflowOffset=d.scrollParent.offset()},drag:function(d){var c=a(this).data("draggable"),f=c.options,g=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x")if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<f.scrollSensitivity)c.scrollParent[0].scrollTop=g=c.scrollParent[0].scrollTop+f.scrollSpeed;else if(d.pageY-c.overflowOffset.top<f.scrollSensitivity)c.scrollParent[0].scrollTop=
+g=c.scrollParent[0].scrollTop-f.scrollSpeed;if(!f.axis||f.axis!="y")if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<f.scrollSensitivity)c.scrollParent[0].scrollLeft=g=c.scrollParent[0].scrollLeft+f.scrollSpeed;else if(d.pageX-c.overflowOffset.left<f.scrollSensitivity)c.scrollParent[0].scrollLeft=g=c.scrollParent[0].scrollLeft-f.scrollSpeed}else{if(!f.axis||f.axis!="x")if(d.pageY-a(document).scrollTop()<f.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed);
+else if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed);if(!f.axis||f.axis!="y")if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}g!==false&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,
+d)}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var f=a(this),g=f.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})})},drag:function(d,c){for(var f=a(this).data("draggable"),g=f.options,e=g.snapTolerance,i=c.offset.left,b=i+f.helperProportions.width,h=c.offset.top,
+j=h+f.helperProportions.height,l=f.snapElements.length-1;l>=0;l--){var o=f.snapElements[l].left,n=o+f.snapElements[l].width,k=f.snapElements[l].top,m=k+f.snapElements[l].height;if(o-e<i&&i<n+e&&k-e<h&&h<m+e||o-e<i&&i<n+e&&k-e<j&&j<m+e||o-e<b&&b<n+e&&k-e<h&&h<m+e||o-e<b&&b<n+e&&k-e<j&&j<m+e){if(g.snapMode!="inner"){var p=Math.abs(k-j)<=e,q=Math.abs(m-h)<=e,s=Math.abs(o-b)<=e,r=Math.abs(n-i)<=e;if(p)c.position.top=f._convertPositionTo("relative",{top:k-f.helperProportions.height,left:0}).top-f.margins.top;
+if(q)c.position.top=f._convertPositionTo("relative",{top:m,left:0}).top-f.margins.top;if(s)c.position.left=f._convertPositionTo("relative",{top:0,left:o-f.helperProportions.width}).left-f.margins.left;if(r)c.position.left=f._convertPositionTo("relative",{top:0,left:n}).left-f.margins.left}var u=p||q||s||r;if(g.snapMode!="outer"){p=Math.abs(k-h)<=e;q=Math.abs(m-j)<=e;s=Math.abs(o-i)<=e;r=Math.abs(n-b)<=e;if(p)c.position.top=f._convertPositionTo("relative",{top:k,left:0}).top-f.margins.top;if(q)c.position.top=
+f._convertPositionTo("relative",{top:m-f.helperProportions.height,left:0}).top-f.margins.top;if(s)c.position.left=f._convertPositionTo("relative",{top:0,left:o}).left-f.margins.left;if(r)c.position.left=f._convertPositionTo("relative",{top:0,left:n-f.helperProportions.width}).left-f.margins.left}if(!f.snapElements[l].snapping&&(p||q||s||r||u))f.options.snap.snap&&f.options.snap.snap.call(f.element,d,a.extend(f._uiHash(),{snapItem:f.snapElements[l].item}));f.snapElements[l].snapping=p||q||s||r||u}else{f.snapElements[l].snapping&&
+f.options.snap.release&&f.options.snap.release.call(f.element,d,a.extend(f._uiHash(),{snapItem:f.snapElements[l].item}));f.snapElements[l].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(f,g){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(f){this.style.zIndex=c+f});this[0].style.zIndex=c+d.length}}});
+a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex"))c._zIndex=d.css("zIndex");d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
+(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(f){return f.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);
+d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;c<d.length;c++)d[c]==this&&d.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(d,c){if(d=="accept")this.accept=a.isFunction(c)?c:function(f){return f.is(c)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&
+this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
+this._trigger("over",d,this.ui(c))}},_out:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",d,this.ui(c))}},_drop:function(d,c){var f=c||a.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0])return false;var g=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=
+a.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==f.options.scope&&e.accept.call(e.element[0],f.currentItem||f.element)&&a.ui.intersect(f,a.extend(e,{offset:e.element.offset()}),e.options.tolerance)){g=true;return false}});if(g)return false;if(this.accept.call(this.element[0],f.currentItem||f.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
+d,this.ui(f));return this.element}return false},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.13"});a.ui.intersect=function(d,c,f){if(!c.offset)return false;var g=(d.positionAbs||d.position.absolute).left,e=g+d.helperProportions.width,i=(d.positionAbs||d.position.absolute).top,b=i+d.helperProportions.height,h=c.offset.left,j=h+c.proportions.width,l=c.offset.top,o=l+c.proportions.height;
+switch(f){case "fit":return h<=g&&e<=j&&l<=i&&b<=o;case "intersect":return h<g+d.helperProportions.width/2&&e-d.helperProportions.width/2<j&&l<i+d.helperProportions.height/2&&b-d.helperProportions.height/2<o;case "pointer":return a.ui.isOver((d.positionAbs||d.position.absolute).top+(d.clickOffset||d.offset.click).top,(d.positionAbs||d.position.absolute).left+(d.clickOffset||d.offset.click).left,l,h,c.proportions.height,c.proportions.width);case "touch":return(i>=l&&i<=o||b>=l&&b<=o||i<l&&b>o)&&(g>=
+h&&g<=j||e>=h&&e<=j||g<h&&e>j);default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,c){var f=a.ui.ddmanager.droppables[d.options.scope]||[],g=c?c.type:null,e=(d.currentItem||d.element).find(":data(droppable)").andSelf(),i=0;a:for(;i<f.length;i++)if(!(f[i].options.disabled||d&&!f[i].accept.call(f[i].element[0],d.currentItem||d.element))){for(var b=0;b<e.length;b++)if(e[b]==f[i].element[0]){f[i].proportions.height=0;continue a}f[i].visible=f[i].element.css("display")!=
+"none";if(f[i].visible){g=="mousedown"&&f[i]._activate.call(f[i],c);f[i].offset=f[i].element.offset();f[i].proportions={width:f[i].element[0].offsetWidth,height:f[i].element[0].offsetHeight}}}},drop:function(d,c){var f=false;a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(d,this,this.options.tolerance))f=f||this._drop.call(this,c);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||
+d.element)){this.isout=1;this.isover=0;this._deactivate.call(this,c)}}});return f},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var f=a.ui.intersect(d,this,this.options.tolerance);if(f=!f&&this.isover==1?"isout":f&&this.isover==0?"isover":null){var g;if(this.options.greedy){var e=this.element.parents(":data(droppable):eq(0)");if(e.length){g=
+a.data(e[0],"droppable");g.greedyChild=f=="isover"?1:0}}if(g&&f=="isover"){g.isover=0;g.isout=1;g._out.call(g,c)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,c);if(g&&f=="isout"){g.isout=0;g.isover=1;g._over.call(g,c)}}}})}}})(jQuery);
+(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,g=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,
+_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
+top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
+this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=g.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
+nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var e=this.handles.split(",");this.handles={};for(var i=0;i<e.length;i++){var b=a.trim(e[i]),h=a('<div class="ui-resizable-handle '+("ui-resizable-"+b)+'"></div>');/sw|se|ne|nw/.test(b)&&h.css({zIndex:++g.zIndex});"se"==b&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[b]=".ui-resizable-"+b;this.element.append(h)}}this._renderAxis=function(j){j=j||this.element;for(var l in this.handles){if(this.handles[l].constructor==
+String)this.handles[l]=a(this.handles[l],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var o=a(this.handles[l],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(l)?o.outerHeight():o.outerWidth();o=["padding",/ne|nw|n/.test(l)?"Top":/se|sw|s/.test(l)?"Bottom":/^e$/.test(l)?"Right":"Left"].join("");j.css(o,n);this._proportionallyResize()}a(this.handles[l])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
+this._handles.mouseover(function(){if(!f.resizing){if(this.className)var j=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=j&&j[1]?j[1]:"se"}});if(g.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){if(!g.disabled){a(this).removeClass("ui-resizable-autohide");f._handles.show()}},function(){if(!g.disabled)if(!f.resizing){a(this).addClass("ui-resizable-autohide");f._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
+var f=function(e){a(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);var g=this.element;g.after(this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(f){var g=
+false;for(var e in this.handles)if(a(this.handles[e])[0]==f.target)g=true;return!this.options.disabled&&g},_mouseStart:function(f){var g=this.options,e=this.element.position(),i=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(i.is(".ui-draggable")||/absolute/.test(i.css("position")))i.css({position:"absolute",top:e.top,left:e.left});a.browser.opera&&/relative/.test(i.css("position"))&&i.css({position:"relative",top:"auto",left:"auto"});
+this._renderProxy();e=d(this.helper.css("left"));var b=d(this.helper.css("top"));if(g.containment){e+=a(g.containment).scrollLeft()||0;b+=a(g.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:e,top:b};this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};this.originalPosition={left:e,top:b};this.sizeDiff=
+{width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;g=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",g=="auto"?this.axis+"-resize":g);i.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(f){var g=this.helper,e=this.originalMousePosition,i=this._change[this.axis];
+if(!i)return false;e=i.apply(this,[f,f.pageX-e.left||0,f.pageY-e.top||0]);if(this._aspectRatio||f.shiftKey)e=this._updateRatio(e,f);e=this._respectSize(e,f);this._propagate("resize",f);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(e);this._trigger("resize",f,this.ui());return false},_mouseStop:function(f){this.resizing=
+false;var g=this.options,e=this;if(this._helper){var i=this._proportionallyResizeElements,b=i.length&&/textarea/i.test(i[0].nodeName);i=b&&a.ui.hasScroll(i[0],"left")?0:e.sizeDiff.height;b=b?0:e.sizeDiff.width;b={width:e.helper.width()-b,height:e.helper.height()-i};i=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null;var h=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;g.animate||this.element.css(a.extend(b,{top:h,left:i}));e.helper.height(e.size.height);
+e.helper.width(e.size.width);this._helper&&!g.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",f);this._helper&&this.helper.remove();return false},_updateCache:function(f){this.offset=this.helper.offset();if(c(f.left))this.position.left=f.left;if(c(f.top))this.position.top=f.top;if(c(f.height))this.size.height=f.height;if(c(f.width))this.size.width=f.width},_updateRatio:function(f){var g=this.position,e=this.size,
+i=this.axis;if(f.height)f.width=e.height*this.aspectRatio;else if(f.width)f.height=e.width/this.aspectRatio;if(i=="sw"){f.left=g.left+(e.width-f.width);f.top=null}if(i=="nw"){f.top=g.top+(e.height-f.height);f.left=g.left+(e.width-f.width)}return f},_respectSize:function(f){var g=this.options,e=this.axis,i=c(f.width)&&g.maxWidth&&g.maxWidth<f.width,b=c(f.height)&&g.maxHeight&&g.maxHeight<f.height,h=c(f.width)&&g.minWidth&&g.minWidth>f.width,j=c(f.height)&&g.minHeight&&g.minHeight>f.height;if(h)f.width=
+g.minWidth;if(j)f.height=g.minHeight;if(i)f.width=g.maxWidth;if(b)f.height=g.maxHeight;var l=this.originalPosition.left+this.originalSize.width,o=this.position.top+this.size.height,n=/sw|nw|w/.test(e);e=/nw|ne|n/.test(e);if(h&&n)f.left=l-g.minWidth;if(i&&n)f.left=l-g.maxWidth;if(j&&e)f.top=o-g.minHeight;if(b&&e)f.top=o-g.maxHeight;if((g=!f.width&&!f.height)&&!f.left&&f.top)f.top=null;else if(g&&!f.top&&f.left)f.left=null;return f},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=
+this.helper||this.element,g=0;g<this._proportionallyResizeElements.length;g++){var e=this._proportionallyResizeElements[g];if(!this.borderDif){var i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],b=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(i,function(h,j){h=parseInt(h,10)||0;j=parseInt(b[j],10)||0;return h+j})}a.browser.msie&&(a(f).is(":hidden")||a(f).parents(":hidden").length)||
+e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var g=a.browser.msie&&a.browser.version<7,e=g?1:0;g=g?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-
+e+"px",top:this.elementOffset.top-e+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(f,g){return{width:this.originalSize.width+g}},w:function(f,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(f,g,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(f,g,e){return{height:this.originalSize.height+e}},se:function(f,g,e){return a.extend(this._change.s.apply(this,
+arguments),this._change.e.apply(this,[f,g,e]))},sw:function(f,g,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,g,e]))},ne:function(f,g,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,g,e]))},nw:function(f,g,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,g,e]))}},_propagate:function(f,g){a.ui.plugin.call(this,f,[g,this.ui()]);f!="resize"&&this._trigger(f,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
+element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.13"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var f=a(this).data("resizable").options,g=function(e){a(e).each(function(){var i=a(this);i.data("resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10),position:i.css("position")})})};
+if(typeof f.alsoResize=="object"&&!f.alsoResize.parentNode)if(f.alsoResize.length){f.alsoResize=f.alsoResize[0];g(f.alsoResize)}else a.each(f.alsoResize,function(e){g(e)});else g(f.alsoResize)},resize:function(f,g){var e=a(this).data("resizable");f=e.options;var i=e.originalSize,b=e.originalPosition,h={height:e.size.height-i.height||0,width:e.size.width-i.width||0,top:e.position.top-b.top||0,left:e.position.left-b.left||0},j=function(l,o){a(l).each(function(){var n=a(this),k=a(this).data("resizable-alsoresize"),
+m={},p=o&&o.length?o:n.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(p,function(q,s){if((q=(k[s]||0)+(h[s]||0))&&q>=0)m[s]=q||null});if(a.browser.opera&&/relative/.test(n.css("position"))){e._revertToRelativePosition=true;n.css({position:"absolute",top:"auto",left:"auto"})}n.css(m)})};typeof f.alsoResize=="object"&&!f.alsoResize.nodeType?a.each(f.alsoResize,function(l,o){j(l,o)}):j(f.alsoResize)},stop:function(){var f=a(this).data("resizable"),g=f.options,
+e=function(i){a(i).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};if(f._revertToRelativePosition){f._revertToRelativePosition=false;typeof g.alsoResize=="object"&&!g.alsoResize.nodeType?a.each(g.alsoResize,function(i){e(i)}):e(g.alsoResize)}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(f){var g=a(this).data("resizable"),e=g.options,i=g._proportionallyResizeElements,b=i.length&&/textarea/i.test(i[0].nodeName),
+h=b&&a.ui.hasScroll(i[0],"left")?0:g.sizeDiff.height;b={width:g.size.width-(b?0:g.sizeDiff.width),height:g.size.height-h};h=parseInt(g.element.css("left"),10)+(g.position.left-g.originalPosition.left)||null;var j=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(a.extend(b,j&&h?{top:j,left:h}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var l={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),
+10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};i&&i.length&&a(i[0]).css({width:l.width,height:l.height});g._updateCache(l);g._propagate("resize",f)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var f=a(this).data("resizable"),g=f.element,e=f.options.containment;if(g=e instanceof a?e.get(0):/parent/.test(e)?g.parent().get(0):e){f.containerElement=a(g);if(/document/.test(e)||e==document){f.containerOffset={left:0,top:0};f.containerPosition={left:0,
+top:0};f.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var i=a(g),b=[];a(["Top","Right","Left","Bottom"]).each(function(l,o){b[l]=d(i.css("padding"+o))});f.containerOffset=i.offset();f.containerPosition=i.position();f.containerSize={height:i.innerHeight()-b[3],width:i.innerWidth()-b[1]};e=f.containerOffset;var h=f.containerSize.height,j=f.containerSize.width;j=a.ui.hasScroll(g,"left")?g.scrollWidth:j;
+h=a.ui.hasScroll(g)?g.scrollHeight:h;f.parentData={element:g,left:e.left,top:e.top,width:j,height:h}}}},resize:function(f){var g=a(this).data("resizable"),e=g.options,i=g.containerOffset,b=g.position;f=g._aspectRatio||f.shiftKey;var h={top:0,left:0},j=g.containerElement;if(j[0]!=document&&/static/.test(j.css("position")))h=i;if(b.left<(g._helper?i.left:0)){g.size.width+=g._helper?g.position.left-i.left:g.position.left-h.left;if(f)g.size.height=g.size.width/e.aspectRatio;g.position.left=e.helper?i.left:
+0}if(b.top<(g._helper?i.top:0)){g.size.height+=g._helper?g.position.top-i.top:g.position.top;if(f)g.size.width=g.size.height*e.aspectRatio;g.position.top=g._helper?i.top:0}g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;e=Math.abs((g._helper?g.offset.left-h.left:g.offset.left-h.left)+g.sizeDiff.width);i=Math.abs((g._helper?g.offset.top-h.top:g.offset.top-i.top)+g.sizeDiff.height);b=g.containerElement.get(0)==g.element.parent().get(0);h=/relative|absolute/.test(g.containerElement.css("position"));
+if(b&&h)e-=g.parentData.left;if(e+g.size.width>=g.parentData.width){g.size.width=g.parentData.width-e;if(f)g.size.height=g.size.width/g.aspectRatio}if(i+g.size.height>=g.parentData.height){g.size.height=g.parentData.height-i;if(f)g.size.width=g.size.height*g.aspectRatio}},stop:function(){var f=a(this).data("resizable"),g=f.options,e=f.containerOffset,i=f.containerPosition,b=f.containerElement,h=a(f.helper),j=h.offset(),l=h.outerWidth()-f.sizeDiff.width;h=h.outerHeight()-f.sizeDiff.height;f._helper&&
+!g.animate&&/relative/.test(b.css("position"))&&a(this).css({left:j.left-i.left-e.left,width:l,height:h});f._helper&&!g.animate&&/static/.test(b.css("position"))&&a(this).css({left:j.left-i.left-e.left,width:l,height:h})}});a.ui.plugin.add("resizable","ghost",{start:function(){var f=a(this).data("resizable"),g=f.options,e=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost==
+"string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var f=a(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(){var f=a(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var f=a(this).data("resizable"),g=f.options,e=f.size,i=f.originalSize,b=f.originalPosition,h=f.axis;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;
+var j=Math.round((e.width-i.width)/(g.grid[0]||1))*(g.grid[0]||1);g=Math.round((e.height-i.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g}else if(/^(ne)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g;f.position.top=b.top-g}else{if(/^(sw)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g}else{f.size.width=i.width+j;f.size.height=i.height+g;f.position.top=b.top-g}f.position.left=b.left-j}}});var d=function(f){return parseInt(f,
+10)||0},c=function(f){return!isNaN(parseInt(f,10))}})(jQuery);
+(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var d=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(d.options.filter,d.element[0]);c.each(function(){var f=a(this),g=f.offset();a.data(this,"selectable-item",{element:this,$element:f,left:g.left,top:g.top,right:g.left+f.outerWidth(),bottom:g.top+f.outerHeight(),startselected:false,selected:f.hasClass("ui-selected"),
+selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(d){var c=this;this.opos=[d.pageX,
+d.pageY];if(!this.options.disabled){var f=this.options;this.selectees=a(f.filter,this.element[0]);this._trigger("start",d);a(f.appendTo).append(this.helper);this.helper.css({left:d.clientX,top:d.clientY,width:0,height:0});f.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var g=a.data(this,"selectable-item");g.startselected=true;if(!d.metaKey){g.$element.removeClass("ui-selected");g.selected=false;g.$element.addClass("ui-unselecting");g.unselecting=true;c._trigger("unselecting",
+d,{unselecting:g.element})}});a(d.target).parents().andSelf().each(function(){var g=a.data(this,"selectable-item");if(g){var e=!d.metaKey||!g.$element.hasClass("ui-selected");g.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");g.unselecting=!e;g.selecting=e;(g.selected=e)?c._trigger("selecting",d,{selecting:g.element}):c._trigger("unselecting",d,{unselecting:g.element});return false}})}},_mouseDrag:function(d){var c=this;this.dragged=true;if(!this.options.disabled){var f=
+this.options,g=this.opos[0],e=this.opos[1],i=d.pageX,b=d.pageY;if(g>i){var h=i;i=g;g=h}if(e>b){h=b;b=e;e=h}this.helper.css({left:g,top:e,width:i-g,height:b-e});this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!(!j||j.element==c.element[0])){var l=false;if(f.tolerance=="touch")l=!(j.left>i||j.right<g||j.top>b||j.bottom<e);else if(f.tolerance=="fit")l=j.left>g&&j.right<i&&j.top>e&&j.bottom<b;if(l){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");
+j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;c._trigger("selecting",d,{selecting:j.element})}}else{if(j.selecting)if(d.metaKey&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}c._trigger("unselecting",d,{unselecting:j.element})}if(j.selected)if(!d.metaKey&&
+!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;c._trigger("unselecting",d,{unselecting:j.element})}}}});return false}},_mouseStop:function(d){var c=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var f=a.data(this,"selectable-item");f.$element.removeClass("ui-unselecting");f.unselecting=false;f.startselected=false;c._trigger("unselected",d,{unselected:f.element})});a(".ui-selecting",this.element[0]).each(function(){var f=
+a.data(this,"selectable-item");f.$element.removeClass("ui-selecting").addClass("ui-selected");f.selecting=false;f.selected=true;f.startselected=true;c._trigger("selected",d,{selected:f.element})});this._trigger("stop",d);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.13"})})(jQuery);
+(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var d=this.options;this.containerCache={};this.element.addClass("ui-sortable");
+this.refresh();this.floating=this.items.length?d.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData("sortable-item");return this},_setOption:function(d,c){if(d===
+"disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,c){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(d);var f=null,g=this;a(d.target).parents().each(function(){if(a.data(this,"sortable-item")==g){f=a(this);return false}});if(a.data(d.target,"sortable-item")==g)f=a(d.target);if(!f)return false;if(this.options.handle&&
+!c){var e=false;a(this.options.handle,f).find("*").andSelf().each(function(){if(this==d.target)e=true});if(!e)return false}this.currentItem=f;this._removeCurrentsFromItems();return true},_mouseStart:function(d,c,f){c=this.options;var g=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(d);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,
+left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
+this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",c.cursor)}if(c.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",c.opacity)}if(c.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",c.zIndex)}if(this.scrollParent[0]!=
+document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",d,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!f)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",d,g._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(d);
+return true},_mouseDrag:function(d){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var c=this.options,f=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+c.scrollSpeed;else if(d.pageY-this.overflowOffset.top<
+c.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-c.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+c.scrollSpeed;else if(d.pageX-this.overflowOffset.left<c.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(d.pageY-a(document).scrollTop()<c.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()-
+c.scrollSpeed);else if(a(window).height()-(d.pageY-a(document).scrollTop())<c.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed);if(d.pageX-a(document).scrollLeft()<c.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<c.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)}f!==false&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,
+d)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;c>=0;c--){f=this.items[c];var g=f.item[0],e=this._intersectsWithPointer(f);if(e)if(g!=this.currentItem[0]&&this.placeholder[e==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],
+g):true)){this.direction=e==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(d,f);else break;this._trigger("change",d,this._uiHash());break}}this._contactContainers(d);a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);this._trigger("sort",d,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(d,c){if(d){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,d);if(this.options.revert){var f=this;c=f.placeholder.offset();
+f.reverting=true;a(this.helper).animate({left:c.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(d)})}else this._clear(d,c);return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
+this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,
+dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(d){var c=this._getItemsAsjQuery(d&&d.connected),f=[];d=d||{};a(c).each(function(){var g=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[-=_](.+)/);if(g)f.push((d.key||g[1]+"[]")+"="+(d.key&&d.expression?g[1]:g[2]))});!f.length&&d.key&&f.push(d.key+"=");return f.join("&")},
+toArray:function(d){var c=this._getItemsAsjQuery(d&&d.connected),f=[];d=d||{};c.each(function(){f.push(a(d.item||this).attr(d.attribute||"id")||"")});return f},_intersectsWith:function(d){var c=this.positionAbs.left,f=c+this.helperProportions.width,g=this.positionAbs.top,e=g+this.helperProportions.height,i=d.left,b=i+d.width,h=d.top,j=h+d.height,l=this.offset.click.top,o=this.offset.click.left;l=g+l>h&&g+l<j&&c+o>i&&c+o<b;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||
+this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?l:i<c+this.helperProportions.width/2&&f-this.helperProportions.width/2<b&&h<g+this.helperProportions.height/2&&e-this.helperProportions.height/2<j},_intersectsWithPointer:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width);c=c&&d;d=this._getDragVerticalDirection();
+var f=this._getDragHorizontalDirection();if(!c)return false;return this.floating?f&&f=="right"||d=="down"?2:1:d&&(d=="down"?2:1)},_intersectsWithSides:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width);var f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&d||g=="left"&&!d:f&&(f=="down"&&c||f=="up"&&!c)},
+_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!=0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!=0&&(d>0?"right":"left")},refresh:function(d){this._refreshItems(d);this.refreshPositions();return this},_connectWith:function(){var d=this.options;return d.connectWith.constructor==String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var c=[],f=[],g=this._connectWith();
+if(g&&d)for(d=g.length-1;d>=0;d--)for(var e=a(g[d]),i=e.length-1;i>=0;i--){var b=a.data(e[i],"sortable");if(b&&b!=this&&!b.options.disabled)f.push([a.isFunction(b.options.items)?b.options.items.call(b.element):a(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
+this]);for(d=f.length-1;d>=0;d--)f[d][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var d=this.currentItem.find(":data(sortable-item)"),c=0;c<this.items.length;c++)for(var f=0;f<d.length;f++)d[f]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(d){this.items=[];this.containers=[this];var c=this.items,f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):a(this.options.items,this.element),
+this]],g=this._connectWith();if(g)for(var e=g.length-1;e>=0;e--)for(var i=a(g[e]),b=i.length-1;b>=0;b--){var h=a.data(i[b],"sortable");if(h&&h!=this&&!h.options.disabled){f.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],d,{item:this.currentItem}):a(h.options.items,h.element),h]);this.containers.push(h)}}for(e=f.length-1;e>=0;e--){d=f[e][1];g=f[e][0];b=0;for(i=g.length;b<i;b++){h=a(g[b]);h.data("sortable-item",d);c.push({item:h,instance:d,width:0,height:0,left:0,top:0})}}},refreshPositions:function(d){if(this.offsetParent&&
+this.helper)this.offset.parent=this._getParentOffset();for(var c=this.items.length-1;c>=0;c--){var f=this.items[c];if(!(f.instance!=this.currentContainer&&this.currentContainer&&f.item[0]!=this.currentItem[0])){var g=this.options.toleranceElement?a(this.options.toleranceElement,f.item):f.item;if(!d){f.width=g.outerWidth();f.height=g.outerHeight()}g=g.offset();f.left=g.left;f.top=g.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=
+this.containers.length-1;c>=0;c--){g=this.containers[c].element.offset();this.containers[c].containerCache.left=g.left;this.containers[c].containerCache.top=g.top;this.containers[c].containerCache.width=this.containers[c].element.outerWidth();this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(d){var c=d||this,f=c.options;if(!f.placeholder||f.placeholder.constructor==String){var g=f.placeholder;f.placeholder={element:function(){var e=
+a(document.createElement(c.currentItem[0].nodeName)).addClass(g||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g)e.style.visibility="hidden";return e},update:function(e,i){if(!(g&&!f.forcePlaceholderSize)){i.height()||i.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10));i.width()||i.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||
+0,10))}}}}c.placeholder=a(f.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);f.placeholder.update(c,c.placeholder)},_contactContainers:function(d){for(var c=null,f=null,g=this.containers.length-1;g>=0;g--)if(!a.ui.contains(this.currentItem[0],this.containers[g].element[0]))if(this._intersectsWith(this.containers[g].containerCache)){if(!(c&&a.ui.contains(this.containers[g].element[0],c.element[0]))){c=this.containers[g];f=g}}else if(this.containers[g].containerCache.over){this.containers[g]._trigger("out",
+d,this._uiHash(this));this.containers[g].containerCache.over=0}if(c)if(this.containers.length===1){this.containers[f]._trigger("over",d,this._uiHash(this));this.containers[f].containerCache.over=1}else if(this.currentContainer!=this.containers[f]){c=1E4;g=null;for(var e=this.positionAbs[this.containers[f].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[f].element[0],this.items[i].item[0])){var b=this.items[i][this.containers[f].floating?"left":"top"];if(Math.abs(b-
+e)<c){c=Math.abs(b-e);g=this.items[i]}}if(g||this.options.dropOnEmpty){this.currentContainer=this.containers[f];g?this._rearrange(d,g,null,true):this._rearrange(d,null,this.containers[f].element,true);this._trigger("change",d,this._uiHash());this.containers[f]._trigger("change",d,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",d,this._uiHash(this));this.containers[f].containerCache.over=1}}},_createHelper:function(d){var c=
+this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(d[0].style.width==
+""||c.forceHelperSize)d.width(this.currentItem.width());if(d[0].style.height==""||c.forceHelperSize)d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d={left:+d[0],top:+d[1]||0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=
+this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d=
+{top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
+10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(d.containment=="document"?
+document:window).width()-this.helperProportions.width-this.margins.left,(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)){var c=a(d.containment)[0];d=a(d.containment).offset();var f=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),
+10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,c){if(!c)c=
+this.position;d=d=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&
+this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
+var e=d.pageX,i=d.pageY;if(this.originalPosition){if(this.containment){if(d.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<this.containment[1])i=this.containment[1]+this.offset.click.top;if(d.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>this.containment[3])i=this.containment[3]+this.offset.click.top}if(c.grid){i=this.originalPageY+Math.round((i-
+this.originalPageY)/c.grid[1])*c.grid[1];i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<this.containment[1])?i-c.grid[1]:i+c.grid[1]:i;e=this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-c.grid[0]:e+c.grid[0]:e}}return{top:i-
+this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_rearrange:function(d,c,f,g){f?f[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],
+this.direction=="down"?c.item[0]:c.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var e=this,i=this.counter;window.setTimeout(function(){i==e.counter&&e.refreshPositions(!g)},0)},_clear:function(d,c){this.reverting=false;var f=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS)if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static")this._storedCSS[g]=
+"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&f.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c)f.push(function(e){this._trigger("update",e,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||f.push(function(e){this._trigger("remove",
+e,this._uiHash())});for(g=this.containers.length-1;g>=0;g--)if(a.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!c){f.push(function(e){return function(i){e._trigger("receive",i,this._uiHash(this))}}.call(this,this.containers[g]));f.push(function(e){return function(i){e._trigger("update",i,this._uiHash(this))}}.call(this,this.containers[g]))}}for(g=this.containers.length-1;g>=0;g--){c||f.push(function(e){return function(i){e._trigger("deactivate",i,this._uiHash(this))}}.call(this,
+this.containers[g]));if(this.containers[g].containerCache.over){f.push(function(e){return function(i){e._trigger("out",i,this._uiHash(this))}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",
+d,this._uiHash());for(g=0;g<f.length;g++)f[g].call(this,d);this._trigger("stop",d,this._uiHash())}return false}c||this._trigger("beforeStop",d,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(g=0;g<f.length;g++)f[g].call(this,d);this._trigger("stop",d,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
+_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.13"})})(jQuery);
+jQuery.effects||function(a,d){function c(n){var k;if(n&&n.constructor==Array&&n.length==3)return n;if(k=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)];if(k=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return[parseFloat(k[1])*2.55,parseFloat(k[2])*2.55,parseFloat(k[3])*2.55];if(k=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return[parseInt(k[1],
+16),parseInt(k[2],16),parseInt(k[3],16)];if(k=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return[parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(n))return j.transparent;return j[a.trim(n).toLowerCase()]}function f(n,k){var m;do{m=a.curCSS(n,k);if(m!=""&&m!="transparent"||a.nodeName(n,"body"))break;k="backgroundColor"}while(n=n.parentNode);return c(m)}function g(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,
+k={},m,p;if(n&&n.length&&n[0]&&n[n[0]])for(var q=n.length;q--;){m=n[q];if(typeof n[m]=="string"){p=m.replace(/\-(\w)/g,function(s,r){return r.toUpperCase()});k[p]=n[m]}}else for(m in n)if(typeof n[m]==="string")k[m]=n[m];return k}function e(n){var k,m;for(k in n){m=n[k];if(m==null||a.isFunction(m)||k in o||/scrollbar/.test(k)||!/color/i.test(k)&&isNaN(parseFloat(m)))delete n[k]}return n}function i(n,k){var m={_:0},p;for(p in k)if(n[p]!=k[p])m[p]=k[p];return m}function b(n,k,m,p){if(typeof n=="object"){p=
+k;m=null;k=n;n=k.effect}if(a.isFunction(k)){p=k;m=null;k={}}if(typeof k=="number"||a.fx.speeds[k]){p=m;m=k;k={}}if(a.isFunction(m)){p=m;m=null}k=k||{};m=m||k.duration;m=a.fx.off?0:typeof m=="number"?m:m in a.fx.speeds?a.fx.speeds[m]:a.fx.speeds._default;p=p||k.complete;return[n,k,m,p]}function h(n){if(!n||typeof n==="number"||a.fx.speeds[n])return true;if(typeof n==="string"&&!a.effects[n])return true;return false}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor",
+"borderTopColor","borderColor","color","outlineColor"],function(n,k){a.fx.step[k]=function(m){if(!m.colorInit){m.start=f(m.elem,k);m.end=c(m.end);m.colorInit=true}m.elem.style[k]="rgb("+Math.max(Math.min(parseInt(m.pos*(m.end[0]-m.start[0])+m.start[0],10),255),0)+","+Math.max(Math.min(parseInt(m.pos*(m.end[1]-m.start[1])+m.start[1],10),255),0)+","+Math.max(Math.min(parseInt(m.pos*(m.end[2]-m.start[2])+m.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
+0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
+211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},l=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(n,k,m,
+p){if(a.isFunction(m)){p=m;m=null}return this.queue(function(){var q=a(this),s=q.attr("style")||" ",r=e(g.call(this)),u,v=q.attr("class");a.each(l,function(w,x){n[x]&&q[x+"Class"](n[x])});u=e(g.call(this));q.attr("class",v);q.animate(i(r,u),{queue:false,duration:k,easding:m,complete:function(){a.each(l,function(w,x){n[x]&&q[x+"Class"](n[x])});if(typeof q.attr("style")=="object"){q.attr("style").cssText="";q.attr("style").cssText=s}else q.attr("style",s);p&&p.apply(this,arguments);a.dequeue(this)}})})};
+a.fn.extend({_addClass:a.fn.addClass,addClass:function(n,k,m,p){return k?a.effects.animateClass.apply(this,[{add:n},k,m,p]):this._addClass(n)},_removeClass:a.fn.removeClass,removeClass:function(n,k,m,p){return k?a.effects.animateClass.apply(this,[{remove:n},k,m,p]):this._removeClass(n)},_toggleClass:a.fn.toggleClass,toggleClass:function(n,k,m,p,q){return typeof k=="boolean"||k===d?m?a.effects.animateClass.apply(this,[k?{add:n}:{remove:n},m,p,q]):this._toggleClass(n,k):a.effects.animateClass.apply(this,
+[{toggle:n},k,m,p])},switchClass:function(n,k,m,p,q){return a.effects.animateClass.apply(this,[{add:k,remove:n},m,p,q])}});a.extend(a.effects,{version:"1.8.13",save:function(n,k){for(var m=0;m<k.length;m++)k[m]!==null&&n.data("ec.storage."+k[m],n[0].style[k[m]])},restore:function(n,k){for(var m=0;m<k.length;m++)k[m]!==null&&n.css(k[m],n.data("ec.storage."+k[m]))},setMode:function(n,k){if(k=="toggle")k=n.is(":hidden")?"show":"hide";return k},getBaseline:function(n,k){var m;switch(n[0]){case "top":m=
+0;break;case "middle":m=0.5;break;case "bottom":m=1;break;default:m=n[0]/k.height}switch(n[1]){case "left":n=0;break;case "center":n=0.5;break;case "right":n=1;break;default:n=n[1]/k.width}return{x:n,y:m}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var k={width:n.outerWidth(true),height:n.outerHeight(true),"float":n.css("float")},m=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});
+n.wrap(m);m=n.parent();if(n.css("position")=="static"){m.css({position:"relative"});n.css({position:"relative"})}else{a.extend(k,{position:n.css("position"),zIndex:n.css("z-index")});a.each(["top","left","bottom","right"],function(p,q){k[q]=n.css(q);if(isNaN(parseInt(k[q],10)))k[q]="auto"});n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return m.css(k).show()},removeWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent().replaceWith(n);return n},setTransition:function(n,
+k,m,p){p=p||{};a.each(k,function(q,s){unit=n.cssUnit(s);if(unit[0]>0)p[s]=unit[0]*m+unit[1]});return p}});a.fn.extend({effect:function(n){var k=b.apply(this,arguments),m={options:k[1],duration:k[2],callback:k[3]};k=m.options.mode;var p=a.effects[n];if(a.fx.off||!p)return k?this[k](m.duration,m.callback):this.each(function(){m.callback&&m.callback.call(this)});return p.call(this,m)},_show:a.fn.show,show:function(n){if(h(n))return this._show.apply(this,arguments);else{var k=b.apply(this,arguments);
+k[1].mode="show";return this.effect.apply(this,k)}},_hide:a.fn.hide,hide:function(n){if(h(n))return this._hide.apply(this,arguments);else{var k=b.apply(this,arguments);k[1].mode="hide";return this.effect.apply(this,k)}},__toggle:a.fn.toggle,toggle:function(n){if(h(n)||typeof n==="boolean"||a.isFunction(n))return this.__toggle.apply(this,arguments);else{var k=b.apply(this,arguments);k[1].mode="toggle";return this.effect.apply(this,k)}},cssUnit:function(n){var k=this.css(n),m=[];a.each(["em","px","%",
+"pt"],function(p,q){if(k.indexOf(q)>0)m=[parseFloat(k),q]});return m}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(n,k,m,p,q){return a.easing[a.easing.def](n,k,m,p,q)},easeInQuad:function(n,k,m,p,q){return p*(k/=q)*k+m},easeOutQuad:function(n,k,m,p,q){return-p*(k/=q)*(k-2)+m},easeInOutQuad:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k+m;return-p/2*(--k*(k-2)-1)+m},easeInCubic:function(n,k,m,p,q){return p*(k/=q)*k*k+m},easeOutCubic:function(n,k,m,p,q){return p*
+((k=k/q-1)*k*k+1)+m},easeInOutCubic:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k*k+m;return p/2*((k-=2)*k*k+2)+m},easeInQuart:function(n,k,m,p,q){return p*(k/=q)*k*k*k+m},easeOutQuart:function(n,k,m,p,q){return-p*((k=k/q-1)*k*k*k-1)+m},easeInOutQuart:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k*k*k+m;return-p/2*((k-=2)*k*k*k-2)+m},easeInQuint:function(n,k,m,p,q){return p*(k/=q)*k*k*k*k+m},easeOutQuint:function(n,k,m,p,q){return p*((k=k/q-1)*k*k*k*k+1)+m},easeInOutQuint:function(n,k,m,p,q){if((k/=
+q/2)<1)return p/2*k*k*k*k*k+m;return p/2*((k-=2)*k*k*k*k+2)+m},easeInSine:function(n,k,m,p,q){return-p*Math.cos(k/q*(Math.PI/2))+p+m},easeOutSine:function(n,k,m,p,q){return p*Math.sin(k/q*(Math.PI/2))+m},easeInOutSine:function(n,k,m,p,q){return-p/2*(Math.cos(Math.PI*k/q)-1)+m},easeInExpo:function(n,k,m,p,q){return k==0?m:p*Math.pow(2,10*(k/q-1))+m},easeOutExpo:function(n,k,m,p,q){return k==q?m+p:p*(-Math.pow(2,-10*k/q)+1)+m},easeInOutExpo:function(n,k,m,p,q){if(k==0)return m;if(k==q)return m+p;if((k/=
+q/2)<1)return p/2*Math.pow(2,10*(k-1))+m;return p/2*(-Math.pow(2,-10*--k)+2)+m},easeInCirc:function(n,k,m,p,q){return-p*(Math.sqrt(1-(k/=q)*k)-1)+m},easeOutCirc:function(n,k,m,p,q){return p*Math.sqrt(1-(k=k/q-1)*k)+m},easeInOutCirc:function(n,k,m,p,q){if((k/=q/2)<1)return-p/2*(Math.sqrt(1-k*k)-1)+m;return p/2*(Math.sqrt(1-(k-=2)*k)+1)+m},easeInElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q)==1)return m+p;s||(s=q*0.3);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/
+r);return-(r*Math.pow(2,10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s))+m},easeOutElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q)==1)return m+p;s||(s=q*0.3);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/r);return r*Math.pow(2,-10*k)*Math.sin((k*q-n)*2*Math.PI/s)+p+m},easeInOutElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q/2)==2)return m+p;s||(s=q*0.3*1.5);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/r);if(k<1)return-0.5*
+r*Math.pow(2,10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s)+m;return r*Math.pow(2,-10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s)*0.5+p+m},easeInBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;return p*(k/=q)*k*((s+1)*k-s)+m},easeOutBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;return p*((k=k/q-1)*k*((s+1)*k+s)+1)+m},easeInOutBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;if((k/=q/2)<1)return p/2*k*k*(((s*=1.525)+1)*k-s)+m;return p/2*((k-=2)*k*(((s*=1.525)+1)*k+s)+2)+m},easeInBounce:function(n,k,m,p,q){return p-a.easing.easeOutBounce(n,
+q-k,0,p,q)+m},easeOutBounce:function(n,k,m,p,q){return(k/=q)<1/2.75?p*7.5625*k*k+m:k<2/2.75?p*(7.5625*(k-=1.5/2.75)*k+0.75)+m:k<2.5/2.75?p*(7.5625*(k-=2.25/2.75)*k+0.9375)+m:p*(7.5625*(k-=2.625/2.75)*k+0.984375)+m},easeInOutBounce:function(n,k,m,p,q){if(k<q/2)return a.easing.easeInBounce(n,k*2,0,p,q)*0.5+m;return a.easing.easeOutBounce(n,k*2-q,0,p,q)*0.5+p*0.5+m}})}(jQuery);
+(function(a){a.effects.blind=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"vertical";a.effects.save(c,f);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),b=e=="vertical"?"height":"width";e=e=="vertical"?i.height():i.width();g=="show"&&i.css(b,0);var h={};h[b]=g=="show"?e:0;i.animate(h,d.duration,d.options.easing,function(){g=="hide"&&c.hide();a.effects.restore(c,
+f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
+(function(a){a.effects.bounce=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"effect"),e=d.options.direction||"up",i=d.options.distance||20,b=d.options.times||5,h=d.duration||250;/show|hide/.test(g)&&f.push("opacity");a.effects.save(c,f);c.show();a.effects.createWrapper(c);var j=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";i=d.options.distance||(j=="top"?c.outerHeight({margin:true})/3:c.outerWidth({margin:true})/
+3);if(g=="show")c.css("opacity",0).css(j,e=="pos"?-i:i);if(g=="hide")i/=b*2;g!="hide"&&b--;if(g=="show"){var l={opacity:1};l[j]=(e=="pos"?"+=":"-=")+i;c.animate(l,h/2,d.options.easing);i/=2;b--}for(l=0;l<b;l++){var o={},n={};o[j]=(e=="pos"?"-=":"+=")+i;n[j]=(e=="pos"?"+=":"-=")+i;c.animate(o,h/2,d.options.easing).animate(n,h/2,d.options.easing);i=g=="hide"?i*2:i/2}if(g=="hide"){l={opacity:0};l[j]=(e=="pos"?"-=":"+=")+i;c.animate(l,h/2,d.options.easing,function(){c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);
+d.callback&&d.callback.apply(this,arguments)})}else{o={};n={};o[j]=(e=="pos"?"-=":"+=")+i;n[j]=(e=="pos"?"+=":"-=")+i;c.animate(o,h/2,d.options.easing).animate(n,h/2,d.options.easing,function(){a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
+(function(a){a.effects.clip=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"vertical";a.effects.save(c,f);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"});i=c[0].tagName=="IMG"?i:c;var b={size:e=="vertical"?"height":"width",position:e=="vertical"?"top":"left"};e=e=="vertical"?i.height():i.width();if(g=="show"){i.css(b.size,0);i.css(b.position,
+e/2)}var h={};h[b.size]=g=="show"?e:0;h[b.position]=g=="show"?0:e/2;i.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()}})})}})(jQuery);
+(function(a){a.effects.drop=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","opacity"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"left";a.effects.save(c,f);c.show();a.effects.createWrapper(c);var i=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";var b=d.options.distance||(i=="top"?c.outerHeight({margin:true})/2:c.outerWidth({margin:true})/2);if(g=="show")c.css("opacity",0).css(i,e=="pos"?-b:b);var h={opacity:g==
+"show"?1:0};h[i]=(g=="show"?e=="pos"?"+=":"-=":e=="pos"?"-=":"+=")+b;c.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
+(function(a){a.effects.explode=function(d){return this.queue(function(){var c=d.options.pieces?Math.round(Math.sqrt(d.options.pieces)):3,f=d.options.pieces?Math.round(Math.sqrt(d.options.pieces)):3;d.options.mode=d.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":d.options.mode;var g=a(this).show().css("visibility","hidden"),e=g.offset();e.top-=parseInt(g.css("marginTop"),10)||0;e.left-=parseInt(g.css("marginLeft"),10)||0;for(var i=g.outerWidth(true),b=g.outerHeight(true),h=0;h<c;h++)for(var j=
+0;j<f;j++)g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(i/f),top:-h*(b/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:i/f,height:b/c,left:e.left+j*(i/f)+(d.options.mode=="show"?(j-Math.floor(f/2))*(i/f):0),top:e.top+h*(b/c)+(d.options.mode=="show"?(h-Math.floor(c/2))*(b/c):0),opacity:d.options.mode=="show"?0:1}).animate({left:e.left+j*(i/f)+(d.options.mode=="show"?0:(j-Math.floor(f/2))*(i/f)),top:e.top+
+h*(b/c)+(d.options.mode=="show"?0:(h-Math.floor(c/2))*(b/c)),opacity:d.options.mode=="show"?1:0},d.duration||500);setTimeout(function(){d.options.mode=="show"?g.css({visibility:"visible"}):g.css({visibility:"visible"}).hide();d.callback&&d.callback.apply(g[0]);g.dequeue();a("div.ui-effects-explode").remove()},d.duration||500)})}})(jQuery);
+(function(a){a.effects.fade=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"hide");c.animate({opacity:f},{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
+(function(a){a.effects.fold=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.size||15,i=!!d.options.horizFirst,b=d.duration?d.duration/2:a.fx.speeds._default/2;a.effects.save(c,f);c.show();var h=a.effects.createWrapper(c).css({overflow:"hidden"}),j=g=="show"!=i,l=j?["width","height"]:["height","width"];j=j?[h.width(),h.height()]:[h.height(),h.width()];var o=/([0-9]+)%/.exec(e);if(o)e=parseInt(o[1],
+10)/100*j[g=="hide"?0:1];if(g=="show")h.css(i?{height:0,width:e}:{height:e,width:0});i={};o={};i[l[0]]=g=="show"?j[0]:e;o[l[1]]=g=="show"?j[1]:0;h.animate(i,b,d.options.easing).animate(o,b,d.options.easing,function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
+(function(a){a.effects.highlight=function(d){return this.queue(function(){var c=a(this),f=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(c,d.options.mode||"show"),e={backgroundColor:c.css("backgroundColor")};if(g=="hide")e.opacity=0;a.effects.save(c,f);c.show().css({backgroundImage:"none",backgroundColor:d.options.color||"#ffff99"}).animate(e,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);g=="show"&&!a.support.opacity&&
+this.style.removeAttribute("filter");d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
+(function(a){a.effects.pulsate=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"show");times=(d.options.times||5)*2-1;duration=d.duration?d.duration/2:a.fx.speeds._default/2;isVisible=c.is(":visible");animateTo=0;if(!isVisible){c.css("opacity",0).show();animateTo=1}if(f=="hide"&&isVisible||f=="show"&&!isVisible)times--;for(f=0;f<times;f++){c.animate({opacity:animateTo},duration,d.options.easing);animateTo=(animateTo+1)%2}c.animate({opacity:animateTo},duration,
+d.options.easing,function(){animateTo==0&&c.hide();d.callback&&d.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);
+(function(a){a.effects.puff=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"hide"),g=parseInt(d.options.percent,10)||150,e=g/100,i={height:c.height(),width:c.width()};a.extend(d.options,{fade:true,mode:f,percent:f=="hide"?g:100,from:f=="hide"?i:{height:i.height*e,width:i.width*e}});c.effect("scale",d.options,d.duration,d.callback);c.dequeue()})};a.effects.scale=function(d){return this.queue(function(){var c=a(this),f=a.extend(true,{},d.options),g=a.effects.setMode(c,
+d.options.mode||"effect"),e=parseInt(d.options.percent,10)||(parseInt(d.options.percent,10)==0?0:g=="hide"?0:100),i=d.options.direction||"both",b=d.options.origin;if(g!="effect"){f.origin=b||["middle","center"];f.restore=true}b={height:c.height(),width:c.width()};c.from=d.options.from||(g=="show"?{height:0,width:0}:b);e={y:i!="horizontal"?e/100:1,x:i!="vertical"?e/100:1};c.to={height:b.height*e.y,width:b.width*e.x};if(d.options.fade){if(g=="show"){c.from.opacity=0;c.to.opacity=1}if(g=="hide"){c.from.opacity=
+1;c.to.opacity=0}}f.from=c.from;f.to=c.to;f.mode=g;c.effect("size",f,d.duration,d.callback);c.dequeue()})};a.effects.size=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","width","height","overflow","opacity"],g=["position","top","bottom","left","right","overflow","opacity"],e=["width","height","overflow"],i=["fontSize"],b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
+j=a.effects.setMode(c,d.options.mode||"effect"),l=d.options.restore||false,o=d.options.scale||"both",n=d.options.origin,k={height:c.height(),width:c.width()};c.from=d.options.from||k;c.to=d.options.to||k;if(n){n=a.effects.getBaseline(n,k);c.from.top=(k.height-c.from.height)*n.y;c.from.left=(k.width-c.from.width)*n.x;c.to.top=(k.height-c.to.height)*n.y;c.to.left=(k.width-c.to.width)*n.x}var m={from:{y:c.from.height/k.height,x:c.from.width/k.width},to:{y:c.to.height/k.height,x:c.to.width/k.width}};
+if(o=="box"||o=="both"){if(m.from.y!=m.to.y){f=f.concat(b);c.from=a.effects.setTransition(c,b,m.from.y,c.from);c.to=a.effects.setTransition(c,b,m.to.y,c.to)}if(m.from.x!=m.to.x){f=f.concat(h);c.from=a.effects.setTransition(c,h,m.from.x,c.from);c.to=a.effects.setTransition(c,h,m.to.x,c.to)}}if(o=="content"||o=="both")if(m.from.y!=m.to.y){f=f.concat(i);c.from=a.effects.setTransition(c,i,m.from.y,c.from);c.to=a.effects.setTransition(c,i,m.to.y,c.to)}a.effects.save(c,l?f:g);c.show();a.effects.createWrapper(c);
+c.css("overflow","hidden").css(c.from);if(o=="content"||o=="both"){b=b.concat(["marginTop","marginBottom"]).concat(i);h=h.concat(["marginLeft","marginRight"]);e=f.concat(b).concat(h);c.find("*[width]").each(function(){child=a(this);l&&a.effects.save(child,e);var p={height:child.height(),width:child.width()};child.from={height:p.height*m.from.y,width:p.width*m.from.x};child.to={height:p.height*m.to.y,width:p.width*m.to.x};if(m.from.y!=m.to.y){child.from=a.effects.setTransition(child,b,m.from.y,child.from);
+child.to=a.effects.setTransition(child,b,m.to.y,child.to)}if(m.from.x!=m.to.x){child.from=a.effects.setTransition(child,h,m.from.x,child.from);child.to=a.effects.setTransition(child,h,m.to.x,child.to)}child.css(child.from);child.animate(child.to,d.duration,d.options.easing,function(){l&&a.effects.restore(child,e)})})}c.animate(c.to,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity);j=="hide"&&c.hide();a.effects.restore(c,
+l?f:g);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
+(function(a){a.effects.shake=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"];a.effects.setMode(c,d.options.mode||"effect");var g=d.options.direction||"left",e=d.options.distance||20,i=d.options.times||3,b=d.duration||d.options.duration||140;a.effects.save(c,f);c.show();a.effects.createWrapper(c);var h=g=="up"||g=="down"?"top":"left",j=g=="up"||g=="left"?"pos":"neg";g={};var l={},o={};g[h]=(j=="pos"?"-=":"+=")+e;l[h]=(j=="pos"?"+=":"-=")+e*2;o[h]=
+(j=="pos"?"-=":"+=")+e*2;c.animate(g,b,d.options.easing);for(e=1;e<i;e++)c.animate(l,b,d.options.easing).animate(o,b,d.options.easing);c.animate(l,b,d.options.easing).animate(g,b/2,d.options.easing,function(){a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
+(function(a){a.effects.slide=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"show"),e=d.options.direction||"left";a.effects.save(c,f);c.show();a.effects.createWrapper(c).css({overflow:"hidden"});var i=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";var b=d.options.distance||(i=="top"?c.outerHeight({margin:true}):c.outerWidth({margin:true}));if(g=="show")c.css(i,e=="pos"?isNaN(b)?"-"+b:-b:b);
+var h={};h[i]=(g=="show"?e=="pos"?"+=":"-=":e=="pos"?"-=":"+=")+b;c.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
+(function(a){a.effects.transfer=function(d){return this.queue(function(){var c=a(this),f=a(d.options.to),g=f.offset();f={top:g.top,left:g.left,height:f.innerHeight(),width:f.innerWidth()};g=c.offset();var e=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(d.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,d.duration,d.options.easing,function(){e.remove();d.callback&&d.callback.apply(c[0],arguments);
+c.dequeue()})})}})(jQuery);
+(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var d=this,c=d.options;d.running=0;d.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");d.headers=
+d.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")});d.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
+if(c.navigation){var f=d.element.find("a").filter(c.navigationFilter).eq(0);if(f.length){var g=f.closest(".ui-accordion-header");d.active=g.length?g:f.closest(".ui-accordion-content").prev()}}d.active=d._findActive(d.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");d.active.next().addClass("ui-accordion-content-active");d._createIcons();d.resize();d.element.attr("role","tablist");d.headers.attr("role","tab").bind("keydown.accordion",
+function(e){return d._keydown(e)}).next().attr("role","tabpanel");d.headers.not(d.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();d.active.length?d.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):d.headers.eq(0).attr("tabIndex",0);a.browser.safari||d.headers.find("a").attr("tabIndex",-1);c.event&&d.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(e){d._clickHandler.call(d,e,this);e.preventDefault()})},_createIcons:function(){var d=
+this.options;if(d.icons){a("<span></span>").addClass("ui-icon "+d.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(d.icons.header).toggleClass(d.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var d=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
+this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(d.autoHeight||d.fillHeight)c.css("height","");return a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d=="active"&&this.activate(c);if(d=="icons"){this._destroyIcons();
+c&&this._createIcons()}if(d=="disabled")this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(d){if(!(this.options.disabled||d.altKey||d.ctrlKey)){var c=a.ui.keyCode,f=this.headers.length,g=this.headers.index(d.target),e=false;switch(d.keyCode){case c.RIGHT:case c.DOWN:e=this.headers[(g+1)%f];break;case c.LEFT:case c.UP:e=this.headers[(g-1+f)%f];break;case c.SPACE:case c.ENTER:this._clickHandler({target:d.target},d.target);
+d.preventDefault()}if(e){a(d.target).attr("tabIndex",-1);a(e).attr("tabIndex",0);e.focus();return false}return true}},resize:function(){var d=this.options,c;if(d.fillSpace){if(a.browser.msie){var f=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",f);this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+
+a(this).height()))}).css("overflow","auto")}else if(d.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c)}return this},activate:function(d){this.options.active=d;d=this._findActive(d)[0];this._clickHandler({target:d},d);return this},_findActive:function(d){return d?typeof d==="number"?this.headers.filter(":eq("+d+")"):this.headers.not(this.headers.not(d)):d===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(d,c){var f=this.options;
+if(!f.disabled)if(d.target){d=a(d.currentTarget||c);c=d[0]===this.active[0];f.active=f.collapsible&&c?false:this.headers.index(d);if(!(this.running||!f.collapsible&&c)){var g=this.active;h=d.next();i=this.active.next();b={options:f,newHeader:c&&f.collapsible?a([]):d,oldHeader:this.active,newContent:c&&f.collapsible?a([]):h,oldContent:i};var e=this.headers.index(this.active[0])>this.headers.index(d[0]);this.active=c?a([]):d;this._toggle(h,i,b,c,e);g.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(f.icons.headerSelected).addClass(f.icons.header);
+if(!c){d.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(f.icons.header).addClass(f.icons.headerSelected);d.next().addClass("ui-accordion-content-active")}}}else if(f.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(f.icons.headerSelected).addClass(f.icons.header);this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),
+b={options:f,newHeader:a([]),oldHeader:f.active,newContent:a([]),oldContent:i},h=this.active=a([]);this._toggle(h,i,b)}},_toggle:function(d,c,f,g,e){var i=this,b=i.options;i.toShow=d;i.toHide=c;i.data=f;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=c.size()===0?d.size():c.size();if(b.animated){f={};f=b.collapsible&&g?{toShow:a([]),toHide:c,complete:h,down:e,autoHeight:b.autoHeight||b.fillSpace}:{toShow:d,toHide:c,complete:h,down:e,autoHeight:b.autoHeight||
+b.fillSpace};if(!b.proxied)b.proxied=b.animated;if(!b.proxiedDuration)b.proxiedDuration=b.duration;b.animated=a.isFunction(b.proxied)?b.proxied(f):b.proxied;b.duration=a.isFunction(b.proxiedDuration)?b.proxiedDuration(f):b.proxiedDuration;g=a.ui.accordion.animations;var j=b.duration,l=b.animated;if(l&&!g[l]&&!a.easing[l])l="slide";g[l]||(g[l]=function(o){this.slide(o,{easing:l,duration:j||700})});g[l](f)}else{if(b.collapsible&&g)d.toggle();else{c.hide();d.show()}h(true)}c.prev().attr({"aria-expanded":"false",
+"aria-selected":"false",tabIndex:-1}).blur();d.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(d){this.running=d?0:--this.running;if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length)this.toHide.parent()[0].className=this.toHide.parent()[0].className;this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,{version:"1.8.13",
+animations:{slide:function(d,c){d=a.extend({easing:"swing",duration:300},d,c);if(d.toHide.size())if(d.toShow.size()){var f=d.toShow.css("overflow"),g=0,e={},i={},b;c=d.toShow;b=c[0].style.width;c.width(parseInt(c.parent().width(),10)-parseInt(c.css("paddingLeft"),10)-parseInt(c.css("paddingRight"),10)-(parseInt(c.css("borderLeftWidth"),10)||0)-(parseInt(c.css("borderRightWidth"),10)||0));a.each(["height","paddingTop","paddingBottom"],function(h,j){i[j]="hide";h=(""+a.css(d.toShow[0],j)).match(/^([\d+-.]+)(.*)$/);
+e[j]={value:h[1],unit:h[2]||"px"}});d.toShow.css({height:0,overflow:"hidden"}).show();d.toHide.filter(":hidden").each(d.complete).end().filter(":visible").animate(i,{step:function(h,j){if(j.prop=="height")g=j.end-j.start===0?0:(j.now-j.start)/(j.end-j.start);d.toShow[0].style[j.prop]=g*e[j.prop].value+e[j.prop].unit},duration:d.duration,easing:d.easing,complete:function(){d.autoHeight||d.toShow.css("height","");d.toShow.css({width:b,overflow:f});d.complete()}})}else d.toHide.animate({height:"hide",
+paddingTop:"hide",paddingBottom:"hide"},d);else d.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},d)},bounceslide:function(d){this.slide(d,{easing:d.down?"easeOutBounce":"swing",duration:d.down?1E3:200})}}})})(jQuery);
+(function(a){var d=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var c=this,f=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){if(!(c.options.disabled||c.element.attr("readonly"))){g=
+false;var i=a.ui.keyCode;switch(e.keyCode){case i.PAGE_UP:c._move("previousPage",e);break;case i.PAGE_DOWN:c._move("nextPage",e);break;case i.UP:c._move("previous",e);e.preventDefault();break;case i.DOWN:c._move("next",e);e.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:if(c.menu.active){g=true;e.preventDefault()}case i.TAB:if(!c.menu.active)return;c.menu.select(e);break;case i.ESCAPE:c.element.val(c.term);c.close(e);break;default:clearTimeout(c.searching);c.searching=setTimeout(function(){if(c.term!=
+c.element.val()){c.selectedItem=null;c.search(null,e)}},c.options.delay);break}}}).bind("keypress.autocomplete",function(e){if(g){g=false;e.preventDefault()}}).bind("focus.autocomplete",function(){if(!c.options.disabled){c.selectedItem=null;c.previous=c.element.val()}}).bind("blur.autocomplete",function(e){if(!c.options.disabled){clearTimeout(c.searching);c.closing=setTimeout(function(){c.close(e);c._change(e)},150)}});this._initSource();this.response=function(){return c._response.apply(c,arguments)};
+this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",f)[0]).mousedown(function(e){var i=c.menu.element[0];a(e.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==i&&!a.ui.contains(i,b.target)&&c.close()})},1);setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(e,i){i=i.item.data("item.autocomplete");false!==c._trigger("focus",e,{item:i})&&/^key/.test(e.originalEvent.type)&&
+c.element.val(i.value)},selected:function(e,i){var b=i.item.data("item.autocomplete"),h=c.previous;if(c.element[0]!==f.activeElement){c.element.focus();c.previous=h;setTimeout(function(){c.previous=h;c.selectedItem=b},1)}false!==c._trigger("select",e,{item:b})&&c.element.val(b.value);c.term=c.element.val();c.close(e);c.selectedItem=b},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
+a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(c,f){a.Widget.prototype._setOption.apply(this,arguments);c==="source"&&this._initSource();if(c==="appendTo")this.menu.element.appendTo(a(f||"body",this.element[0].ownerDocument)[0]);c==="disabled"&&
+f&&this.xhr&&this.xhr.abort()},_initSource:function(){var c=this,f,g;if(a.isArray(this.options.source)){f=this.options.source;this.source=function(e,i){i(a.ui.autocomplete.filter(f,e.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(e,i){c.xhr&&c.xhr.abort();c.xhr=a.ajax({url:g,data:e,dataType:"json",autocompleteRequest:++d,success:function(b){this.autocompleteRequest===d&&i(b)},error:function(){this.autocompleteRequest===d&&i([])}})}}else this.source=
+this.options.source},search:function(c,f){c=c!=null?c:this.element.val();this.term=this.element.val();if(c.length<this.options.minLength)return this.close(f);clearTimeout(this.closing);if(this._trigger("search",f)!==false)return this._search(c)},_search:function(c){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:c},this.response)},_response:function(c){if(!this.options.disabled&&c&&c.length){c=this._normalize(c);this._suggest(c);this._trigger("open")}else this.close();
+this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(c){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",c)}},_change:function(c){this.previous!==this.element.val()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){if(c.length&&c[0].label&&c[0].value)return c;return a.map(c,function(f){if(typeof f==="string")return{label:f,value:f};return a.extend({label:f.label||
+f.value,value:f.value||f.label},f)})},_suggest:function(c){var f=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(f,c);this.menu.deactivate();this.menu.refresh();f.show();this._resizeMenu();f.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(c,f){var g=this;
+a.each(f,function(e,i){g._renderItem(c,i)})},_renderItem:function(c,f){return a("<li></li>").data("item.autocomplete",f).append(a("<a></a>").text(f.label)).appendTo(c)},_move:function(c,f){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate()}else this.menu[c](f);else this.search(null,f)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
+"\\$&")},filter:function(c,f){var g=new RegExp(a.ui.autocomplete.escapeRegex(f),"i");return a.grep(c,function(e){return g.test(e.label||e.value||e)})}})})(jQuery);
+(function(a){a.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();d.select(c)}});this.refresh()},refresh:function(){var d=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
+-1).mouseenter(function(c){d.activate(c,a(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(d,c){this.deactivate();if(this.hasScroll()){var f=c.offset().top-this.element.offset().top,g=this.element.scrollTop(),e=this.element.height();if(f<0)this.element.scrollTop(g+f);else f>=e&&this.element.scrollTop(g+f-e+c.height())}this.active=c.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",d,{item:c})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
+this._trigger("blur");this.active=null}},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(d,c,f){if(this.active){d=this.active[d+"All"](".ui-menu-item").eq(0);d.length?this.activate(f,d):this.activate(f,this.element.children(c))}else this.activate(f,
+this.element.children(c))},nextPage:function(d){if(this.hasScroll())if(!this.active||this.last())this.activate(d,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,f=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var e=a(this).offset().top-c-f+a(this).height();return e<10&&e>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(d,g)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||
+this.last()?":first":":last"))},previousPage:function(d){if(this.hasScroll())if(!this.active||this.first())this.activate(d,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=a(this).offset().top-c+f-a(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(d,result)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||
+this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})})(jQuery);
+(function(a){var d,c=function(g){a(":ui-button",g.target.form).each(function(){var e=a(this).data("button");setTimeout(function(){e.refresh()},1)})},f=function(g){var e=g.name,i=g.form,b=a([]);if(e)b=i?a(i).find("[name='"+e+"']"):a("[name='"+e+"']",g.ownerDocument).filter(function(){return!this.form});return b};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",
+c);if(typeof this.options.disabled!=="boolean")this.options.disabled=this.element.attr("disabled");this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var g=this,e=this.options,i=this.type==="checkbox"||this.type==="radio",b="ui-state-hover"+(!i?" ui-state-active":"");if(e.label===null)e.label=this.buttonElement.html();if(this.element.is(":disabled"))e.disabled=true;this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",
+function(){if(!e.disabled){a(this).addClass("ui-state-hover");this===d&&a(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){e.disabled||a(this).removeClass(b)}).bind("focus.button",function(){a(this).addClass("ui-state-focus")}).bind("blur.button",function(){a(this).removeClass("ui-state-focus")}).bind("click.button",function(h){e.disabled&&h.stopImmediatePropagation()});i&&this.element.bind("change.button",function(){g.refresh()});if(this.type==="checkbox")this.buttonElement.bind("click.button",
+function(){if(e.disabled)return false;a(this).toggleClass("ui-state-active");g.buttonElement.attr("aria-pressed",g.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(e.disabled)return false;a(this).addClass("ui-state-active");g.buttonElement.attr("aria-pressed",true);var h=g.element[0];f(h).not(h).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)});else{this.buttonElement.bind("mousedown.button",
+function(){if(e.disabled)return false;a(this).addClass("ui-state-active");d=this;a(document).one("mouseup",function(){d=null})}).bind("mouseup.button",function(){if(e.disabled)return false;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(e.disabled)return false;if(h.keyCode==a.ui.keyCode.SPACE||h.keyCode==a.ui.keyCode.ENTER)a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===
+a.ui.keyCode.SPACE&&a(this).click()})}this._setOption("disabled",e.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){var g=this.element.parents().filter(":last"),e="label[for="+this.element.attr("id")+"]";this.buttonElement=g.find(e);if(!this.buttonElement.length){g=g.length?g.siblings():this.element.siblings();this.buttonElement=g.filter(e);
+if(!this.buttonElement.length)this.buttonElement=g.find(e)}this.element.addClass("ui-helper-hidden-accessible");(g=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",g)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
+this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(g,e){a.Widget.prototype._setOption.apply(this,arguments);if(g==="disabled")e?this.element.attr("disabled",true):this.element.removeAttr("disabled");this._resetButton()},refresh:function(){var g=this.element.is(":disabled");g!==this.options.disabled&&this._setOption("disabled",g);if(this.type==="radio")f(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
+true):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var g=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
+e=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(g.empty()).text(),i=this.options.icons,b=i.primary&&i.secondary,h=[];if(i.primary||i.secondary){if(this.options.text)h.push("ui-button-text-icon"+(b?"s":i.primary?"-primary":"-secondary"));i.primary&&g.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>");i.secondary&&g.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>");if(!this.options.text){h.push(b?"ui-button-icons-only":
+"ui-button-icon-only");this.hasTitle||g.attr("title",e)}}else h.push("ui-button-text-only");g.addClass(h.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(g,e){g==="disabled"&&this.buttons.button("option",g,e);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},
+destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");a.Widget.prototype.destroy.call(this)}})})(jQuery);
+(function(a,d){function c(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
+"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
+"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
+minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=f(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function f(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
+"mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){if(!a.datepicker._isDisabledDatepicker(i.inline?b.parent()[0]:i.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
+a(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}})}function g(b,h){a.extend(b,h);for(var j in h)if(h[j]==null||h[j]==d)b[j]=h[j];return b}a.extend(a.ui,{datepicker:{version:"1.8.13"}});var e=(new Date).getTime(),i;a.extend(c.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},
+_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){g(this._defaults,b||{});return this},_attachDatepicker:function(b,h){var j=null;for(var l in this._defaults){var o=b.getAttribute("date:"+l);if(o){j=j||{};try{j[l]=eval(o)}catch(n){j[l]=o}}}l=b.nodeName.toLowerCase();o=l=="div"||l=="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}var k=this._newInst(a(b),o);k.settings=a.extend({},h||{},j||{});if(l=="input")this._connectDatepicker(b,k);else o&&this._inlineDatepicker(b,k)},_newInst:function(b,
+h){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:h,dpDiv:!h?this.dpDiv:f(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(b,h){var j=a(b);h.append=a([]);h.trigger=a([]);if(!j.hasClass(this.markerClassName)){this._attachments(j,h);j.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
+function(l,o,n){h.settings[o]=n}).bind("getData.datepicker",function(l,o){return this._get(h,o)});this._autoSize(h);a.data(b,"datepicker",h)}},_attachments:function(b,h){var j=this._get(h,"appendText"),l=this._get(h,"isRTL");h.append&&h.append.remove();if(j){h.append=a('<span class="'+this._appendClass+'">'+j+"</span>");b[l?"before":"after"](h.append)}b.unbind("focus",this._showDatepicker);h.trigger&&h.trigger.remove();j=this._get(h,"showOn");if(j=="focus"||j=="both")b.focus(this._showDatepicker);
+if(j=="button"||j=="both"){j=this._get(h,"buttonText");var o=this._get(h,"buttonImage");h.trigger=a(this._get(h,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:o,alt:j,title:j}):a('<button type="button"></button>').addClass(this._triggerClass).html(o==""?j:a("<img/>").attr({src:o,alt:j,title:j})));b[l?"before":"after"](h.trigger);h.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(b[0]);
+return false})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var h=new Date(2009,11,20),j=this._get(b,"dateFormat");if(j.match(/[DM]/)){var l=function(o){for(var n=0,k=0,m=0;m<o.length;m++)if(o[m].length>n){n=o[m].length;k=m}return k};h.setMonth(l(this._get(b,j.match(/MM/)?"monthNames":"monthNamesShort")));h.setDate(l(this._get(b,j.match(/DD/)?"dayNames":"dayNamesShort"))+20-h.getDay())}b.input.attr("size",this._formatDate(b,h).length)}},_inlineDatepicker:function(b,h){var j=a(b);
+if(!j.hasClass(this.markerClassName)){j.addClass(this.markerClassName).append(h.dpDiv).bind("setData.datepicker",function(l,o,n){h.settings[o]=n}).bind("getData.datepicker",function(l,o){return this._get(h,o)});a.data(b,"datepicker",h);this._setDate(h,this._getDefaultDate(h),true);this._updateDatepicker(h);this._updateAlternate(h);h.dpDiv.show()}},_dialogDatepicker:function(b,h,j,l,o){b=this._dialogInst;if(!b){this.uuid+=1;this._dialogInput=a('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');
+this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);b=this._dialogInst=this._newInst(this._dialogInput,false);b.settings={};a.data(this._dialogInput[0],"datepicker",b)}g(b.settings,l||{});h=h&&h.constructor==Date?this._formatDate(b,h):h;this._dialogInput.val(h);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/
+2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=j;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();a.removeData(b,
+"datepicker");if(l=="input"){j.append.remove();j.trigger.remove();h.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(l=="div"||l=="span")h.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();if(l=="input"){b.disabled=false;j.trigger.filter("button").each(function(){this.disabled=
+false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(l=="div"||l=="span"){h=h.children("."+this._inlineClass);h.children().removeClass("ui-state-disabled");h.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=a.map(this._disabledInputs,function(o){return o==b?null:o})}},_disableDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();if(l=="input"){b.disabled=
+true;j.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(l=="div"||l=="span"){h=h.children("."+this._inlineClass);h.children().addClass("ui-state-disabled");h.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=a.map(this._disabledInputs,function(o){return o==b?null:o});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return false;
+for(var h=0;h<this._disabledInputs.length;h++)if(this._disabledInputs[h]==b)return true;return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(h){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,h,j){var l=this._getInst(b);if(arguments.length==2&&typeof h=="string")return h=="defaults"?a.extend({},a.datepicker._defaults):l?h=="all"?a.extend({},l.settings):this._get(l,h):null;var o=h||{};if(typeof h=="string"){o={};o[h]=j}if(l){this._curInst==l&&
+this._hideDatepicker();var n=this._getDateDatepicker(b,true),k=this._getMinMaxDate(l,"min"),m=this._getMinMaxDate(l,"max");g(l.settings,o);if(k!==null&&o.dateFormat!==d&&o.minDate===d)l.settings.minDate=this._formatDate(l,k);if(m!==null&&o.dateFormat!==d&&o.maxDate===d)l.settings.maxDate=this._formatDate(l,m);this._attachments(a(b),l);this._autoSize(l);this._setDate(l,n);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(b,h,j){this._optionDatepicker(b,h,j)},_refreshDatepicker:function(b){(b=
+this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,h){if(b=this._getInst(b)){this._setDate(b,h);this._updateDatepicker(b);this._updateAlternate(b)}},_getDateDatepicker:function(b,h){(b=this._getInst(b))&&!b.inline&&this._setDateFromField(b,h);return b?this._getDate(b):null},_doKeyDown:function(b){var h=a.datepicker._getInst(b.target),j=true,l=h.dpDiv.is(".ui-datepicker-rtl");h._keyEvent=true;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();
+j=false;break;case 13:j=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",h.dpDiv);j[0]?a.datepicker._selectDay(b.target,h.selectedMonth,h.selectedYear,j[0]):a.datepicker._hideDatepicker();return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(h,"stepBigMonths"):-a.datepicker._get(h,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(h,"stepBigMonths"):+a.datepicker._get(h,
+"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey)a.datepicker._clearDate(b.target);j=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||b.metaKey)a.datepicker._gotoToday(b.target);j=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,l?+1:-1,"D");j=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(h,"stepBigMonths"):-a.datepicker._get(h,"stepMonths"),"M");break;case 38:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,
+-7,"D");j=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,l?-1:+1,"D");j=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(h,"stepBigMonths"):+a.datepicker._get(h,"stepMonths"),"M");break;case 40:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,+7,"D");j=b.ctrlKey||b.metaKey;break;default:j=false}else if(b.keyCode==36&&b.ctrlKey)a.datepicker._showDatepicker(this);else j=false;if(j){b.preventDefault();
+b.stopPropagation()}},_doKeyPress:function(b){var h=a.datepicker._getInst(b.target);if(a.datepicker._get(h,"constrainInput")){h=a.datepicker._possibleChars(a.datepicker._get(h,"dateFormat"));var j=String.fromCharCode(b.charCode==d?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||j<" "||!h||h.indexOf(j)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))){a.datepicker._setDateFromField(b);
+a.datepicker._updateAlternate(b);a.datepicker._updateDatepicker(b)}}catch(h){a.datepicker.log(h)}return true},_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!="input")b=a("input",b.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var h=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=h&&a.datepicker._curInst.dpDiv.stop(true,true);var j=a.datepicker._get(h,"beforeShow");g(h.settings,j?j.apply(b,[b,h]):{});h.lastVal=
+null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(h);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}var l=false;a(b).parents().each(function(){l|=a(this).css("position")=="fixed";return!l});if(l&&a.browser.opera){a.datepicker._pos[0]-=document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}j={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=
+null;h.dpDiv.empty();h.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(h);j=a.datepicker._checkOffset(h,j,l);h.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":l?"fixed":"absolute",display:"none",left:j.left+"px",top:j.top+"px"});if(!h.inline){j=a.datepicker._get(h,"showAnim");var o=a.datepicker._get(h,"duration"),n=function(){var k=h.dpDiv.find("iframe.ui-datepicker-cover");if(k.length){var m=a.datepicker._getBorders(h.dpDiv);k.css({left:-m[0],
+top:-m[1],width:h.dpDiv.outerWidth(),height:h.dpDiv.outerHeight()})}};h.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=true;a.effects&&a.effects[j]?h.dpDiv.show(j,a.datepicker._get(h,"showOptions"),o,n):h.dpDiv[j||"show"](j?o:null,n);if(!j||!o)n();h.input.is(":visible")&&!h.input.is(":disabled")&&h.input.focus();a.datepicker._curInst=h}}},_updateDatepicker:function(b){var h=a.datepicker._getBorders(b.dpDiv);i=b;b.dpDiv.empty().append(this._generateHTML(b));var j=b.dpDiv.find("iframe.ui-datepicker-cover");
+j.length&&j.css({left:-h[0],top:-h[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();h=this._getNumberOfMonths(b);j=h[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");j>1&&b.dpDiv.addClass("ui-datepicker-multi-"+j).css("width",17*j+"em");b.dpDiv[(h[0]!=1||h[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");
+b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var l=b.yearshtml;setTimeout(function(){l===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);l=b.yearshtml=null},0)}},_getBorders:function(b){var h=function(j){return{thin:1,medium:2,thick:3}[j]||j};return[parseFloat(h(b.css("border-left-width"))),parseFloat(h(b.css("border-top-width")))]},
+_checkOffset:function(b,h,j){var l=b.dpDiv.outerWidth(),o=b.dpDiv.outerHeight(),n=b.input?b.input.outerWidth():0,k=b.input?b.input.outerHeight():0,m=document.documentElement.clientWidth+a(document).scrollLeft(),p=document.documentElement.clientHeight+a(document).scrollTop();h.left-=this._get(b,"isRTL")?l-n:0;h.left-=j&&h.left==b.input.offset().left?a(document).scrollLeft():0;h.top-=j&&h.top==b.input.offset().top+k?a(document).scrollTop():0;h.left-=Math.min(h.left,h.left+l>m&&m>l?Math.abs(h.left+l-
+m):0);h.top-=Math.min(h.top,h.top+o>p&&p>o?Math.abs(o+k):0);return h},_findPos:function(b){for(var h=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[h?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var h=this._curInst;if(!(!h||b&&h!=a.data(b,"datepicker")))if(this._datepickerShowing){b=this._get(h,"showAnim");var j=this._get(h,"duration"),l=function(){a.datepicker._tidyDialog(h);this._curInst=
+null};a.effects&&a.effects[b]?h.dpDiv.hide(b,a.datepicker._get(h,"showOptions"),j,l):h.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?j:null,l);b||l();if(b=this._get(h,"onClose"))b.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
+_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,h,j){b=a(b);var l=this._getInst(b[0]);if(!this._isDisabledDatepicker(b[0])){this._adjustInstDate(l,h+(j=="M"?this._get(l,"showCurrentAtPos"):
+0),j);this._updateDatepicker(l)}},_gotoToday:function(b){b=a(b);var h=this._getInst(b[0]);if(this._get(h,"gotoCurrent")&&h.currentDay){h.selectedDay=h.currentDay;h.drawMonth=h.selectedMonth=h.currentMonth;h.drawYear=h.selectedYear=h.currentYear}else{var j=new Date;h.selectedDay=j.getDate();h.drawMonth=h.selectedMonth=j.getMonth();h.drawYear=h.selectedYear=j.getFullYear()}this._notifyChange(h);this._adjustDate(b)},_selectMonthYear:function(b,h,j){b=a(b);var l=this._getInst(b[0]);l._selectingMonthYear=
+false;l["selected"+(j=="M"?"Month":"Year")]=l["draw"+(j=="M"?"Month":"Year")]=parseInt(h.options[h.selectedIndex].value,10);this._notifyChange(l);this._adjustDate(b)},_clickMonthYear:function(b){var h=this._getInst(a(b)[0]);h.input&&h._selectingMonthYear&&setTimeout(function(){h.input.focus()},0);h._selectingMonthYear=!h._selectingMonthYear},_selectDay:function(b,h,j,l){var o=a(b);if(!(a(l).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))){o=this._getInst(o[0]);o.selectedDay=o.currentDay=
+a("a",l).html();o.selectedMonth=o.currentMonth=h;o.selectedYear=o.currentYear=j;this._selectDate(b,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,h){b=this._getInst(a(b)[0]);h=h!=null?h:this._formatDate(b);b.input&&b.input.val(h);this._updateAlternate(b);var j=this._get(b,"onSelect");if(j)j.apply(b.input?b.input[0]:null,[h,b]);else b.input&&b.input.trigger("change");if(b.inline)this._updateDatepicker(b);
+else{this._hideDatepicker();this._lastInput=b.input[0];typeof b.input[0]!="object"&&b.input.focus();this._lastInput=null}},_updateAlternate:function(b){var h=this._get(b,"altField");if(h){var j=this._get(b,"altFormat")||this._get(b,"dateFormat"),l=this._getDate(b),o=this.formatDate(j,l,this._getFormatConfig(b));a(h).each(function(){a(this).val(o)})}},noWeekends:function(b){b=b.getDay();return[b>0&&b<6,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var h=
+b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((h-b)/864E5)/7)+1},parseDate:function(b,h,j){if(b==null||h==null)throw"Invalid arguments";h=typeof h=="object"?h.toString():h+"";if(h=="")return null;var l=(j?j.shortYearCutoff:null)||this._defaults.shortYearCutoff;l=typeof l!="string"?l:(new Date).getFullYear()%100+parseInt(l,10);for(var o=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,n=(j?j.dayNames:null)||this._defaults.dayNames,k=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort,
+m=(j?j.monthNames:null)||this._defaults.monthNames,p=j=-1,q=-1,s=-1,r=false,u=function(y){(y=G+1<b.length&&b.charAt(G+1)==y)&&G++;return y},v=function(y){var H=u(y);y=new RegExp("^\\d{1,"+(y=="@"?14:y=="!"?20:y=="y"&&H?4:y=="o"?3:2)+"}");y=h.substring(z).match(y);if(!y)throw"Missing number at position "+z;z+=y[0].length;return parseInt(y[0],10)},w=function(y,H,N){y=a.map(u(y)?N:H,function(D,E){return[[E,D]]}).sort(function(D,E){return-(D[1].length-E[1].length)});var J=-1;a.each(y,function(D,E){D=
+E[1];if(h.substr(z,D.length).toLowerCase()==D.toLowerCase()){J=E[0];z+=D.length;return false}});if(J!=-1)return J+1;else throw"Unknown name at position "+z;},x=function(){if(h.charAt(z)!=b.charAt(G))throw"Unexpected literal at position "+z;z++},z=0,G=0;G<b.length;G++)if(r)if(b.charAt(G)=="'"&&!u("'"))r=false;else x();else switch(b.charAt(G)){case "d":q=v("d");break;case "D":w("D",o,n);break;case "o":s=v("o");break;case "m":p=v("m");break;case "M":p=w("M",k,m);break;case "y":j=v("y");break;case "@":var C=
+new Date(v("@"));j=C.getFullYear();p=C.getMonth()+1;q=C.getDate();break;case "!":C=new Date((v("!")-this._ticksTo1970)/1E4);j=C.getFullYear();p=C.getMonth()+1;q=C.getDate();break;case "'":if(u("'"))x();else r=true;break;default:x()}if(j==-1)j=(new Date).getFullYear();else if(j<100)j+=(new Date).getFullYear()-(new Date).getFullYear()%100+(j<=l?0:-100);if(s>-1){p=1;q=s;do{l=this._getDaysInMonth(j,p-1);if(q<=l)break;p++;q-=l}while(1)}C=this._daylightSavingAdjust(new Date(j,p-1,q));if(C.getFullYear()!=
+j||C.getMonth()+1!=p||C.getDate()!=q)throw"Invalid date";return C},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(b,h,j){if(!h)return"";var l=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,o=(j?j.dayNames:null)||this._defaults.dayNames,
+n=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort;j=(j?j.monthNames:null)||this._defaults.monthNames;var k=function(u){(u=r+1<b.length&&b.charAt(r+1)==u)&&r++;return u},m=function(u,v,w){v=""+v;if(k(u))for(;v.length<w;)v="0"+v;return v},p=function(u,v,w,x){return k(u)?x[v]:w[v]},q="",s=false;if(h)for(var r=0;r<b.length;r++)if(s)if(b.charAt(r)=="'"&&!k("'"))s=false;else q+=b.charAt(r);else switch(b.charAt(r)){case "d":q+=m("d",h.getDate(),2);break;case "D":q+=p("D",h.getDay(),l,o);break;
+case "o":q+=m("o",(h.getTime()-(new Date(h.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":q+=m("m",h.getMonth()+1,2);break;case "M":q+=p("M",h.getMonth(),n,j);break;case "y":q+=k("y")?h.getFullYear():(h.getYear()%100<10?"0":"")+h.getYear()%100;break;case "@":q+=h.getTime();break;case "!":q+=h.getTime()*1E4+this._ticksTo1970;break;case "'":if(k("'"))q+="'";else s=true;break;default:q+=b.charAt(r)}return q},_possibleChars:function(b){for(var h="",j=false,l=function(n){(n=o+1<b.length&&b.charAt(o+
+1)==n)&&o++;return n},o=0;o<b.length;o++)if(j)if(b.charAt(o)=="'"&&!l("'"))j=false;else h+=b.charAt(o);else switch(b.charAt(o)){case "d":case "m":case "y":case "@":h+="0123456789";break;case "D":case "M":return null;case "'":if(l("'"))h+="'";else j=true;break;default:h+=b.charAt(o)}return h},_get:function(b,h){return b.settings[h]!==d?b.settings[h]:this._defaults[h]},_setDateFromField:function(b,h){if(b.input.val()!=b.lastVal){var j=this._get(b,"dateFormat"),l=b.lastVal=b.input?b.input.val():null,
+o,n;o=n=this._getDefaultDate(b);var k=this._getFormatConfig(b);try{o=this.parseDate(j,l,k)||n}catch(m){this.log(m);l=h?"":l}b.selectedDay=o.getDate();b.drawMonth=b.selectedMonth=o.getMonth();b.drawYear=b.selectedYear=o.getFullYear();b.currentDay=l?o.getDate():0;b.currentMonth=l?o.getMonth():0;b.currentYear=l?o.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,h,
+j){var l=function(n){var k=new Date;k.setDate(k.getDate()+n);return k},o=function(n){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),n,a.datepicker._getFormatConfig(b))}catch(k){}var m=(n.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,p=m.getFullYear(),q=m.getMonth();m=m.getDate();for(var s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=s.exec(n);r;){switch(r[2]||"d"){case "d":case "D":m+=parseInt(r[1],10);break;case "w":case "W":m+=parseInt(r[1],10)*7;break;case "m":case "M":q+=
+parseInt(r[1],10);m=Math.min(m,a.datepicker._getDaysInMonth(p,q));break;case "y":case "Y":p+=parseInt(r[1],10);m=Math.min(m,a.datepicker._getDaysInMonth(p,q));break}r=s.exec(n)}return new Date(p,q,m)};if(h=(h=h==null||h===""?j:typeof h=="string"?o(h):typeof h=="number"?isNaN(h)?j:l(h):new Date(h.getTime()))&&h.toString()=="Invalid Date"?j:h){h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0)}return this._daylightSavingAdjust(h)},_daylightSavingAdjust:function(b){if(!b)return null;
+b.setHours(b.getHours()>12?b.getHours()+2:0);return b},_setDate:function(b,h,j){var l=!h,o=b.selectedMonth,n=b.selectedYear;h=this._restrictMinMax(b,this._determineDate(b,h,new Date));b.selectedDay=b.currentDay=h.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=h.getMonth();b.drawYear=b.selectedYear=b.currentYear=h.getFullYear();if((o!=b.selectedMonth||n!=b.selectedYear)&&!j)this._notifyChange(b);this._adjustInstDate(b);if(b.input)b.input.val(l?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||
+b.input&&b.input.val()==""?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_generateHTML:function(b){var h=new Date;h=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth(),h.getDate()));var j=this._get(b,"isRTL"),l=this._get(b,"showButtonPanel"),o=this._get(b,"hideIfNoPrevNext"),n=this._get(b,"navigationAsDateFormat"),k=this._getNumberOfMonths(b),m=this._get(b,"showCurrentAtPos"),p=this._get(b,"stepMonths"),q=k[0]!=1||k[1]!=1,s=this._daylightSavingAdjust(!b.currentDay?
+new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),r=this._getMinMaxDate(b,"min"),u=this._getMinMaxDate(b,"max");m=b.drawMonth-m;var v=b.drawYear;if(m<0){m+=12;v--}if(u){var w=this._daylightSavingAdjust(new Date(u.getFullYear(),u.getMonth()-k[0]*k[1]+1,u.getDate()));for(w=r&&w<r?r:w;this._daylightSavingAdjust(new Date(v,m,1))>w;){m--;if(m<0){m=11;v--}}}b.drawMonth=m;b.drawYear=v;w=this._get(b,"prevText");w=!n?w:this.formatDate(w,this._daylightSavingAdjust(new Date(v,m-p,1)),this._getFormatConfig(b));
+w=this._canAdjustMonth(b,-1,v,m)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+b.id+"', -"+p+", 'M');\" title=\""+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"e":"w")+'">'+w+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"e":"w")+'">'+w+"</span></a>";var x=this._get(b,"nextText");x=!n?x:this.formatDate(x,this._daylightSavingAdjust(new Date(v,
+m+p,1)),this._getFormatConfig(b));o=this._canAdjustMonth(b,+1,v,m)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+b.id+"', +"+p+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"w":"e")+'">'+x+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"w":"e")+'">'+x+"</span></a>";p=this._get(b,"currentText");x=this._get(b,"gotoCurrent")&&
+b.currentDay?s:h;p=!n?p:this.formatDate(p,x,this._getFormatConfig(b));n=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+e+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"";l=l?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(j?n:"")+(this._isInRange(b,x)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
+e+".datepicker._gotoToday('#"+b.id+"');\">"+p+"</button>":"")+(j?"":n)+"</div>":"";n=parseInt(this._get(b,"firstDay"),10);n=isNaN(n)?0:n;p=this._get(b,"showWeek");x=this._get(b,"dayNames");this._get(b,"dayNamesShort");var z=this._get(b,"dayNamesMin"),G=this._get(b,"monthNames"),C=this._get(b,"monthNamesShort"),y=this._get(b,"beforeShowDay"),H=this._get(b,"showOtherMonths"),N=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var J=this._getDefaultDate(b),D="",E=0;E<k[0];E++){for(var P=
+"",L=0;L<k[1];L++){var Q=this._daylightSavingAdjust(new Date(v,m,b.selectedDay)),B=" ui-corner-all",F="";if(q){F+='<div class="ui-datepicker-group';if(k[1]>1)switch(L){case 0:F+=" ui-datepicker-group-first";B=" ui-corner-"+(j?"right":"left");break;case k[1]-1:F+=" ui-datepicker-group-last";B=" ui-corner-"+(j?"left":"right");break;default:F+=" ui-datepicker-group-middle";B="";break}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&E==0?j?
+o:w:"")+(/all|right/.test(B)&&E==0?j?w:o:"")+this._generateMonthYearHeader(b,m,v,r,u,E>0||L>0,G,C)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var I=p?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"";for(B=0;B<7;B++){var A=(B+n)%7;I+="<th"+((B+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+x[A]+'">'+z[A]+"</span></th>"}F+=I+"</tr></thead><tbody>";I=this._getDaysInMonth(v,m);if(v==b.selectedYear&&m==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,
+I);B=(this._getFirstDayOfMonth(v,m)-n+7)%7;I=q?6:Math.ceil((B+I)/7);A=this._daylightSavingAdjust(new Date(v,m,1-B));for(var R=0;R<I;R++){F+="<tr>";var S=!p?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(A)+"</td>";for(B=0;B<7;B++){var M=y?y.apply(b.input?b.input[0]:null,[A]):[true,""],K=A.getMonth()!=m,O=K&&!N||!M[0]||r&&A<r||u&&A>u;S+='<td class="'+((B+n+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(A.getTime()==Q.getTime()&&m==b.selectedMonth&&
+b._keyEvent||J.getTime()==A.getTime()&&J.getTime()==Q.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!H?"":" "+M[1]+(A.getTime()==s.getTime()?" "+this._currentClass:"")+(A.getTime()==h.getTime()?" ui-datepicker-today":""))+'"'+((!K||H)&&M[2]?' title="'+M[2]+'"':"")+(O?"":' onclick="DP_jQuery_'+e+".datepicker._selectDay('#"+b.id+"',"+A.getMonth()+","+A.getFullYear()+', this);return false;"')+">"+(K&&!H?"&#xa0;":O?'<span class="ui-state-default">'+A.getDate()+
+"</span>":'<a class="ui-state-default'+(A.getTime()==h.getTime()?" ui-state-highlight":"")+(A.getTime()==s.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+'" href="#">'+A.getDate()+"</a>")+"</td>";A.setDate(A.getDate()+1);A=this._daylightSavingAdjust(A)}F+=S+"</tr>"}m++;if(m>11){m=0;v++}F+="</tbody></table>"+(q?"</div>"+(k[0]>0&&L==k[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");P+=F}D+=P}D+=l+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
+"");b._keyEvent=false;return D},_generateMonthYearHeader:function(b,h,j,l,o,n,k,m){var p=this._get(b,"changeMonth"),q=this._get(b,"changeYear"),s=this._get(b,"showMonthAfterYear"),r='<div class="ui-datepicker-title">',u="";if(n||!p)u+='<span class="ui-datepicker-month">'+k[h]+"</span>";else{k=l&&l.getFullYear()==j;var v=o&&o.getFullYear()==j;u+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+
+b.id+"');\">";for(var w=0;w<12;w++)if((!k||w>=l.getMonth())&&(!v||w<=o.getMonth()))u+='<option value="'+w+'"'+(w==h?' selected="selected"':"")+">"+m[w]+"</option>";u+="</select>"}s||(r+=u+(n||!(p&&q)?"&#xa0;":""));if(!b.yearshtml){b.yearshtml="";if(n||!q)r+='<span class="ui-datepicker-year">'+j+"</span>";else{m=this._get(b,"yearRange").split(":");var x=(new Date).getFullYear();k=function(z){z=z.match(/c[+-].*/)?j+parseInt(z.substring(1),10):z.match(/[+-].*/)?x+parseInt(z,10):parseInt(z,10);return isNaN(z)?
+x:z};h=k(m[0]);m=Math.max(h,k(m[1]||""));h=l?Math.max(h,l.getFullYear()):h;m=o?Math.min(m,o.getFullYear()):m;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+b.id+"');\">";h<=m;h++)b.yearshtml+='<option value="'+h+'"'+(h==j?' selected="selected"':"")+">"+h+"</option>";b.yearshtml+="</select>";r+=b.yearshtml;b.yearshtml=null}}r+=this._get(b,"yearSuffix");if(s)r+=
+(n||!(p&&q)?"&#xa0;":"")+u;r+="</div>";return r},_adjustInstDate:function(b,h,j){var l=b.drawYear+(j=="Y"?h:0),o=b.drawMonth+(j=="M"?h:0);h=Math.min(b.selectedDay,this._getDaysInMonth(l,o))+(j=="D"?h:0);l=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(l,o,h)));b.selectedDay=l.getDate();b.drawMonth=b.selectedMonth=l.getMonth();b.drawYear=b.selectedYear=l.getFullYear();if(j=="M"||j=="Y")this._notifyChange(b)},_restrictMinMax:function(b,h){var j=this._getMinMaxDate(b,"min");b=this._getMinMaxDate(b,
+"max");h=j&&h<j?j:h;return h=b&&h>b?b:h},_notifyChange:function(b){var h=this._get(b,"onChangeMonthYear");if(h)h.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(b,h){return this._determineDate(b,this._get(b,h+"Date"),null)},_getDaysInMonth:function(b,h){return 32-this._daylightSavingAdjust(new Date(b,h,32)).getDate()},_getFirstDayOfMonth:function(b,
+h){return(new Date(b,h,1)).getDay()},_canAdjustMonth:function(b,h,j,l){var o=this._getNumberOfMonths(b);j=this._daylightSavingAdjust(new Date(j,l+(h<0?h:o[0]*o[1]),1));h<0&&j.setDate(this._getDaysInMonth(j.getFullYear(),j.getMonth()));return this._isInRange(b,j)},_isInRange:function(b,h){var j=this._getMinMaxDate(b,"min");b=this._getMinMaxDate(b,"max");return(!j||h.getTime()>=j.getTime())&&(!b||h.getTime()<=b.getTime())},_getFormatConfig:function(b){var h=this._get(b,"shortYearCutoff");h=typeof h!=
+"string"?h:(new Date).getFullYear()%100+parseInt(h,10);return{shortYearCutoff:h,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,h,j,l){if(!h){b.currentDay=b.selectedDay;b.currentMonth=b.selectedMonth;b.currentYear=b.selectedYear}h=h?typeof h=="object"?h:this._daylightSavingAdjust(new Date(l,j,h)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));
+return this.formatDate(this._get(b,"dateFormat"),h,this._getFormatConfig(b))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var h=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(h));if(b=="option"&&
+arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(h));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(h)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new c;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.13";window["DP_jQuery_"+e]=a})(jQuery);
+(function(a,d){var c={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},f={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},g=a.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,
+position:{my:"center",at:"center",collision:"fit",using:function(e){var i=a(this).css(e).offset().top;i<0&&a(this).css("top",e.top-i)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var e=this,i=e.options,b=i.title||"&#160;",h=a.ui.dialog.getTitleId(e.element),j=(e.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){if(i.closeOnEscape&&n.keyCode&&n.keyCode===a.ui.keyCode.ESCAPE){e.close(n);n.preventDefault()}}).attr({role:"dialog","aria-labelledby":h}).mousedown(function(n){e.moveToTop(false,n)});e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(j);var l=(e.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(j),
+o=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")}).click(function(n){e.close(n);return false}).appendTo(l);(e.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(o);a("<span></span>").addClass("ui-dialog-title").attr("id",
+h).html(b).prependTo(l);if(a.isFunction(i.beforeclose)&&!a.isFunction(i.beforeClose))i.beforeClose=i.beforeclose;l.find("*").add(l).disableSelection();i.draggable&&a.fn.draggable&&e._makeDraggable();i.resizable&&a.fn.resizable&&e._makeResizable();e._createButtons(i.buttons);e._isOpen=false;a.fn.bgiframe&&j.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;e.overlay&&e.overlay.destroy();e.uiDialog.hide();e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
+e.uiDialog.remove();e.originalTitle&&e.element.attr("title",e.originalTitle);return e},widget:function(){return this.uiDialog},close:function(e){var i=this,b,h;if(false!==i._trigger("beforeClose",e)){i.overlay&&i.overlay.destroy();i.uiDialog.unbind("keypress.ui-dialog");i._isOpen=false;if(i.options.hide)i.uiDialog.hide(i.options.hide,function(){i._trigger("close",e)});else{i.uiDialog.hide();i._trigger("close",e)}a.ui.dialog.overlay.resize();if(i.options.modal){b=0;a(".ui-dialog").each(function(){if(this!==
+i.uiDialog[0]){h=a(this).css("z-index");isNaN(h)||(b=Math.max(b,h))}});a.ui.dialog.maxZ=b}return i}},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var b=this,h=b.options;if(h.modal&&!e||!h.stack&&!h.modal)return b._trigger("focus",i);if(h.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=h.zIndex;if(b.overlay){a.ui.dialog.maxZ+=1;b.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}e={scrollTop:b.element.attr("scrollTop"),scrollLeft:b.element.attr("scrollLeft")};a.ui.dialog.maxZ+=
+1;b.uiDialog.css("z-index",a.ui.dialog.maxZ);b.element.attr(e);b._trigger("focus",i);return b},open:function(){if(!this._isOpen){var e=this,i=e.options,b=e.uiDialog;e.overlay=i.modal?new a.ui.dialog.overlay(e):null;e._size();e._position(i.position);b.show(i.show);e.moveToTop(true);i.modal&&b.bind("keypress.ui-dialog",function(h){if(h.keyCode===a.ui.keyCode.TAB){var j=a(":tabbable",this),l=j.filter(":first");j=j.filter(":last");if(h.target===j[0]&&!h.shiftKey){l.focus(1);return false}else if(h.target===
+l[0]&&h.shiftKey){j.focus(1);return false}}});a(e.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();e._isOpen=true;e._trigger("open");return e}},_createButtons:function(e){var i=this,b=false,h=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),j=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(h);i.uiDialog.find(".ui-dialog-buttonpane").remove();typeof e==="object"&&e!==null&&a.each(e,
+function(){return!(b=true)});if(b){a.each(e,function(l,o){o=a.isFunction(o)?{click:o,text:l}:o;var n=a('<button type="button"></button>').click(function(){o.click.apply(i.element[0],arguments)}).appendTo(j);a.each(o,function(k,m){if(k!=="click")k in g?n[k](m):n.attr(k,m)});a.fn.button&&n.button()});h.appendTo(i.uiDialog)}},_makeDraggable:function(){function e(l){return{position:l.position,offset:l.offset}}var i=this,b=i.options,h=a(document),j;i.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
+handle:".ui-dialog-titlebar",containment:"document",start:function(l,o){j=b.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");i._trigger("dragStart",l,e(o))},drag:function(l,o){i._trigger("drag",l,e(o))},stop:function(l,o){b.position=[o.position.left-h.scrollLeft(),o.position.top-h.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(j);i._trigger("dragStop",l,e(o));a.ui.dialog.overlay.resize()}})},_makeResizable:function(e){function i(l){return{originalPosition:l.originalPosition,
+originalSize:l.originalSize,position:l.position,size:l.size}}e=e===d?this.options.resizable:e;var b=this,h=b.options,j=b.uiDialog.css("position");e=typeof e==="string"?e:"n,e,s,w,se,sw,ne,nw";b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:b._minHeight(),handles:e,start:function(l,o){a(this).addClass("ui-dialog-resizing");b._trigger("resizeStart",l,i(o))},resize:function(l,o){b._trigger("resize",
+l,i(o))},stop:function(l,o){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();b._trigger("resizeStop",l,i(o));a.ui.dialog.overlay.resize()}}).css("position",j).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(e){var i=[],b=[0,0],h;if(e){if(typeof e==="string"||typeof e==="object"&&"0"in e){i=e.split?e.split(" "):
+[e[0],e[1]];if(i.length===1)i[1]=i[0];a.each(["left","top"],function(j,l){if(+i[j]===i[j]){b[j]=i[j];i[j]=l}});e={my:i.join(" "),at:i.join(" "),offset:b.join(" ")}}e=a.extend({},a.ui.dialog.prototype.options.position,e)}else e=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},e));h||this.uiDialog.hide()},_setOptions:function(e){var i=this,b={},h=false;a.each(e,function(j,l){i._setOption(j,l);
+if(j in c)h=true;if(j in f)b[j]=l});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(e,i){var b=this,h=b.uiDialog;switch(e){case "beforeclose":e="beforeClose";break;case "buttons":b._createButtons(i);break;case "closeText":b.uiDialogTitlebarCloseText.text(""+i);break;case "dialogClass":h.removeClass(b.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i);break;case "disabled":i?h.addClass("ui-dialog-disabled"):
+h.removeClass("ui-dialog-disabled");break;case "draggable":var j=h.is(":data(draggable)");j&&!i&&h.draggable("destroy");!j&&i&&b._makeDraggable();break;case "position":b._position(i);break;case "resizable":(j=h.is(":data(resizable)"))&&!i&&h.resizable("destroy");j&&typeof i==="string"&&h.resizable("option","handles",i);!j&&i!==false&&b._makeResizable(i);break;case "title":a(".ui-dialog-title",b.uiDialogTitlebar).html(""+(i||"&#160;"));break}a.Widget.prototype._setOption.apply(b,arguments)},_size:function(){var e=
+this.options,i,b,h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(e.minWidth>e.width)e.width=e.minWidth;i=this.uiDialog.css({height:"auto",width:e.width}).height();b=Math.max(0,e.minHeight-i);if(e.height==="auto")if(a.support.minHeight)this.element.css({minHeight:b,height:"auto"});else{this.uiDialog.show();e=this.element.css("height","auto").height();h||this.uiDialog.hide();this.element.height(Math.max(e,b))}else this.element.height(Math.max(e.height-
+i,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.13",uuid:0,maxZ:0,getTitleId:function(e){e=e.attr("id");if(!e){this.uuid+=1;e=this.uuid}return"ui-dialog-title-"+e},overlay:function(e){this.$el=a.ui.dialog.overlay.create(e)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),
+create:function(e){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1);a(document).bind("keydown.dialog-overlay",function(b){if(e.options.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){e.close(b);b.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var i=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
+height:this.height()});a.fn.bgiframe&&i.bgiframe();this.instances.push(i);return i},destroy:function(e){var i=a.inArray(e,this.instances);i!=-1&&this.oldInstances.push(this.instances.splice(i,1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");e.remove();var b=0;a.each(this.instances,function(){b=Math.max(b,this.css("z-index"))});this.maxZ=b},height:function(){var e,i;if(a.browser.msie&&a.browser.version<7){e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
+i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return e<i?a(window).height()+"px":e+"px"}else return a(document).height()+"px"},width:function(){var e,i;if(a.browser.msie&&a.browser.version<7){e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return e<i?a(window).width()+"px":e+"px"}else return a(document).width()+"px"},resize:function(){var e=a([]);a.each(a.ui.dialog.overlay.instances,
+function(){e=e.add(this)});e.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
+(function(a){a.ui=a.ui||{};var d=/left|center|right/,c=/top|center|bottom/,f=a.fn.position,g=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=a.extend({},e);var i=a(e.of),b=i[0],h=(e.collision||"flip").split(" "),j=e.offset?e.offset.split(" "):[0,0],l,o,n;if(b.nodeType===9){l=i.width();o=i.height();n={top:0,left:0}}else if(b.setTimeout){l=i.width();o=i.height();n={top:i.scrollTop(),left:i.scrollLeft()}}else if(b.preventDefault){e.at="left top";l=o=0;n={top:e.of.pageY,
+left:e.of.pageX}}else{l=i.outerWidth();o=i.outerHeight();n=i.offset()}a.each(["my","at"],function(){var k=(e[this]||"").split(" ");if(k.length===1)k=d.test(k[0])?k.concat(["center"]):c.test(k[0])?["center"].concat(k):["center","center"];k[0]=d.test(k[0])?k[0]:"center";k[1]=c.test(k[1])?k[1]:"center";e[this]=k});if(h.length===1)h[1]=h[0];j[0]=parseInt(j[0],10)||0;if(j.length===1)j[1]=j[0];j[1]=parseInt(j[1],10)||0;if(e.at[0]==="right")n.left+=l;else if(e.at[0]==="center")n.left+=l/2;if(e.at[1]==="bottom")n.top+=
+o;else if(e.at[1]==="center")n.top+=o/2;n.left+=j[0];n.top+=j[1];return this.each(function(){var k=a(this),m=k.outerWidth(),p=k.outerHeight(),q=parseInt(a.curCSS(this,"marginLeft",true))||0,s=parseInt(a.curCSS(this,"marginTop",true))||0,r=m+q+(parseInt(a.curCSS(this,"marginRight",true))||0),u=p+s+(parseInt(a.curCSS(this,"marginBottom",true))||0),v=a.extend({},n),w;if(e.my[0]==="right")v.left-=m;else if(e.my[0]==="center")v.left-=m/2;if(e.my[1]==="bottom")v.top-=p;else if(e.my[1]==="center")v.top-=
+p/2;v.left=Math.round(v.left);v.top=Math.round(v.top);w={left:v.left-q,top:v.top-s};a.each(["left","top"],function(x,z){a.ui.position[h[x]]&&a.ui.position[h[x]][z](v,{targetWidth:l,targetHeight:o,elemWidth:m,elemHeight:p,collisionPosition:w,collisionWidth:r,collisionHeight:u,offset:j,my:e.my,at:e.at})});a.fn.bgiframe&&k.bgiframe();k.offset(a.extend(v,{using:e.using}))})};a.ui.position={fit:{left:function(e,i){var b=a(window);b=i.collisionPosition.left+i.collisionWidth-b.width()-b.scrollLeft();e.left=
+b>0?e.left-b:Math.max(e.left-i.collisionPosition.left,e.left)},top:function(e,i){var b=a(window);b=i.collisionPosition.top+i.collisionHeight-b.height()-b.scrollTop();e.top=b>0?e.top-b:Math.max(e.top-i.collisionPosition.top,e.top)}},flip:{left:function(e,i){if(i.at[0]!=="center"){var b=a(window);b=i.collisionPosition.left+i.collisionWidth-b.width()-b.scrollLeft();var h=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,j=i.at[0]==="left"?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];e.left+=
+i.collisionPosition.left<0?h+j+l:b>0?h+j+l:0}},top:function(e,i){if(i.at[1]!=="center"){var b=a(window);b=i.collisionPosition.top+i.collisionHeight-b.height()-b.scrollTop();var h=i.my[1]==="top"?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,j=i.at[1]==="top"?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];e.top+=i.collisionPosition.top<0?h+j+l:b>0?h+j+l:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(e,i){if(/static/.test(a.curCSS(e,"position")))e.style.position="relative";var b=a(e),
+h=b.offset(),j=parseInt(a.curCSS(e,"top",true),10)||0,l=parseInt(a.curCSS(e,"left",true),10)||0;h={top:i.top-h.top+j,left:i.left-h.left+l};"using"in i?i.using.call(e,h):b.css(h)};a.fn.offset=function(e){var i=this[0];if(!i||!i.ownerDocument)return null;if(e)return this.each(function(){a.offset.setOffset(this,e)});return g.call(this)}}})(jQuery);
+(function(a,d){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
+this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(c){if(c===d)return this._value();this._setOption("value",c);return this},_setOption:function(c,f){if(c==="value"){this.options.value=f;this._refreshValue();this._value()===this.options.max&&this._trigger("complete")}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var c=this.options.value;if(typeof c!=="number")c=0;return Math.min(this.options.max,Math.max(this.min,c))},_percentage:function(){return 100*
+this._value()/this.options.max},_refreshValue:function(){var c=this.value(),f=this._percentage();if(this.oldValue!==c){this.oldValue=c;this._trigger("change")}this.valueDiv.toggle(c>this.min).toggleClass("ui-corner-right",c===this.options.max).width(f.toFixed(0)+"%");this.element.attr("aria-valuenow",c)}});a.extend(a.ui.progressbar,{version:"1.8.13"})})(jQuery);
+(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var d=this,c=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=c.values&&c.values.length||1,e=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);if(c.range){if(c.range===true){if(!c.values)c.values=[this._valueMin(),this._valueMin()];if(c.values.length&&c.values.length!==2)c.values=[c.values[0],c.values[0]]}this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(c.range==="min"||c.range==="max"?" ui-slider-range-"+c.range:""))}for(var i=f.length;i<g;i+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
+this.handles=f.add(a(e.join("")).appendTo(d.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(c.disabled)a(this).blur();else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",
+b)});this.handles.keydown(function(b){var h=true,j=a(this).data("index.ui-slider-handle"),l,o,n;if(!d.options.disabled){switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:h=false;if(!d._keySliding){d._keySliding=true;a(this).addClass("ui-state-active");l=d._start(b,j);if(l===false)return}break}n=d.options.step;l=d.options.values&&d.options.values.length?
+(o=d.values(j)):(o=d.value());switch(b.keyCode){case a.ui.keyCode.HOME:o=d._valueMin();break;case a.ui.keyCode.END:o=d._valueMax();break;case a.ui.keyCode.PAGE_UP:o=d._trimAlignValue(l+(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:o=d._trimAlignValue(l-(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(l===d._valueMax())return;o=d._trimAlignValue(l+n);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(l===d._valueMin())return;o=d._trimAlignValue(l-
+n);break}d._slide(b,j,o);return h}}).keyup(function(b){var h=a(this).data("index.ui-slider-handle");if(d._keySliding){d._keySliding=false;d._stop(b,h);d._change(b,h);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();
+return this},_mouseCapture:function(d){var c=this.options,f,g,e,i,b;if(c.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();f=this._normValueFromMouse({x:d.pageX,y:d.pageY});g=this._valueMax()-this._valueMin()+1;i=this;this.handles.each(function(h){var j=Math.abs(f-i.values(h));if(g>j){g=j;e=a(this);b=h}});if(c.range===true&&this.values(1)===c.min){b+=1;e=a(this.handles[b])}if(this._start(d,b)===false)return false;
+this._mouseSliding=true;i._handleIndex=b;e.addClass("ui-state-active").focus();c=e.offset();this._clickOffset=!a(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-c.left-e.width()/2,top:d.pageY-c.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(d,b,f);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(d){var c=
+this._normValueFromMouse({x:d.pageX,y:d.pageY});this._slide(d,this._handleIndex,c);return false},_mouseStop:function(d){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(d,this._handleIndex);this._change(d,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var c;if(this.orientation==="horizontal"){c=
+this.elementSize.width;d=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;d=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}c=d/c;if(c>1)c=1;if(c<0)c=0;if(this.orientation==="vertical")c=1-c;d=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+c*d)},_start:function(d,c){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);
+f.values=this.values()}return this._trigger("start",d,f)},_slide:function(d,c,f){var g;if(this.options.values&&this.options.values.length){g=this.values(c?0:1);if(this.options.values.length===2&&this.options.range===true&&(c===0&&f>g||c===1&&f<g))f=g;if(f!==this.values(c)){g=this.values();g[c]=f;d=this._trigger("slide",d,{handle:this.handles[c],value:f,values:g});this.values(c?0:1);d!==false&&this.values(c,f,true)}}else if(f!==this.value()){d=this._trigger("slide",d,{handle:this.handles[c],value:f});
+d!==false&&this.value(f)}},_stop:function(d,c){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);f.values=this.values()}this._trigger("stop",d,f)},_change:function(d,c){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);f.values=this.values()}this._trigger("change",d,f)}},value:function(d){if(arguments.length){this.options.value=
+this._trimAlignValue(d);this._refreshValue();this._change(null,0)}else return this._value()},values:function(d,c){var f,g,e;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(c);this._refreshValue();this._change(null,d)}else if(arguments.length)if(a.isArray(arguments[0])){f=this.options.values;g=arguments[0];for(e=0;e<f.length;e+=1){f[e]=this._trimAlignValue(g[e]);this._change(null,e)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(d):
+this.value();else return this._values()},_setOption:function(d,c){var f,g=0;if(a.isArray(this.options.values))g=this.options.values.length;a.Widget.prototype._setOption.apply(this,arguments);switch(d){case "disabled":if(c){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
+this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(f=0;f<g;f+=1)this._change(null,f);this._animateOff=false;break}},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d)},_values:function(d){var c,f;if(arguments.length){c=this.options.values[d];
+return c=this._trimAlignValue(c)}else{c=this.options.values.slice();for(f=0;f<c.length;f+=1)c[f]=this._trimAlignValue(c[f]);return c}},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var c=this.options.step>0?this.options.step:1,f=(d-this._valueMin())%c;alignValue=d-f;if(Math.abs(f)*2>=c)alignValue+=f>0?c:-c;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
+_refreshValue:function(){var d=this.options.range,c=this.options,f=this,g=!this._animateOff?c.animate:false,e,i={},b,h,j,l;if(this.options.values&&this.options.values.length)this.handles.each(function(o){e=(f.values(o)-f._valueMin())/(f._valueMax()-f._valueMin())*100;i[f.orientation==="horizontal"?"left":"bottom"]=e+"%";a(this).stop(1,1)[g?"animate":"css"](i,c.animate);if(f.options.range===true)if(f.orientation==="horizontal"){if(o===0)f.range.stop(1,1)[g?"animate":"css"]({left:e+"%"},c.animate);
+if(o===1)f.range[g?"animate":"css"]({width:e-b+"%"},{queue:false,duration:c.animate})}else{if(o===0)f.range.stop(1,1)[g?"animate":"css"]({bottom:e+"%"},c.animate);if(o===1)f.range[g?"animate":"css"]({height:e-b+"%"},{queue:false,duration:c.animate})}b=e});else{h=this.value();j=this._valueMin();l=this._valueMax();e=l!==j?(h-j)/(l-j)*100:0;i[f.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[g?"animate":"css"](i,c.animate);if(d==="min"&&this.orientation==="horizontal")this.range.stop(1,
+1)[g?"animate":"css"]({width:e+"%"},c.animate);if(d==="max"&&this.orientation==="horizontal")this.range[g?"animate":"css"]({width:100-e+"%"},{queue:false,duration:c.animate});if(d==="min"&&this.orientation==="vertical")this.range.stop(1,1)[g?"animate":"css"]({height:e+"%"},c.animate);if(d==="max"&&this.orientation==="vertical")this.range[g?"animate":"css"]({height:100-e+"%"},{queue:false,duration:c.animate})}}});a.extend(a.ui.slider,{version:"1.8.13"})})(jQuery);
+(function(a,d){function c(){return++g}function f(){return++e}var g=0,e=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(i,b){if(i=="selected")this.options.collapsible&&
+b==this.options.selected||this.select(b);else{this.options[i]=b;this._tabify()}},_tabId:function(i){return i.title&&i.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(i){return i.replace(/:/g,"\\:")},_cookie:function(){var i=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[i].concat(a.makeArray(arguments)))},_ui:function(i,b){return{tab:i,panel:b,index:this.anchors.index(i)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var i=
+a(this);i.html(i.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function b(r,u){r.css("display","");!a.support.opacity&&u.opacity&&r[0].style.removeAttribute("filter")}var h=this,j=this.options,l=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(r,u){var v=a(u).attr("href"),w=v.split("#")[0],x;if(w&&(w===location.toString().split("#")[0]||
+(x=a("base")[0])&&w===x.href)){v=u.hash;u.href=v}if(l.test(v))h.panels=h.panels.add(h.element.find(h._sanitizeSelector(v)));else if(v&&v!=="#"){a.data(u,"href.tabs",v);a.data(u,"load.tabs",v.replace(/#.*$/,""));v=h._tabId(u);u.href="#"+v;u=h.element.find("#"+v);if(!u.length){u=a(j.panelTemplate).attr("id",v).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(h.panels[r-1]||h.list);u.data("destroy.tabs",true)}h.panels=h.panels.add(u)}else j.disabled.push(r)});if(i){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
+this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(j.selected===d){location.hash&&this.anchors.each(function(r,u){if(u.hash==location.hash){j.selected=r;return false}});if(typeof j.selected!=="number"&&j.cookie)j.selected=parseInt(h._cookie(),10);if(typeof j.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)j.selected=
+this.lis.index(this.lis.filter(".ui-tabs-selected"));j.selected=j.selected||(this.lis.length?0:-1)}else if(j.selected===null)j.selected=-1;j.selected=j.selected>=0&&this.anchors[j.selected]||j.selected<0?j.selected:0;j.disabled=a.unique(j.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(r){return h.lis.index(r)}))).sort();a.inArray(j.selected,j.disabled)!=-1&&j.disabled.splice(a.inArray(j.selected,j.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
+if(j.selected>=0&&this.anchors.length){h.element.find(h._sanitizeSelector(h.anchors[j.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(j.selected).addClass("ui-tabs-selected ui-state-active");h.element.queue("tabs",function(){h._trigger("show",null,h._ui(h.anchors[j.selected],h.element.find(h._sanitizeSelector(h.anchors[j.selected].hash))[0]))});this.load(j.selected)}a(window).bind("unload",function(){h.lis.add(h.anchors).unbind(".tabs");h.lis=h.anchors=h.panels=null})}else j.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
+this.element[j.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");j.cookie&&this._cookie(j.selected,j.cookie);i=0;for(var o;o=this.lis[i];i++)a(o)[a.inArray(i,j.disabled)!=-1&&!a(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");j.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(j.event!=="mouseover"){var n=function(r,u){u.is(":not(.ui-state-disabled)")&&u.addClass("ui-state-"+r)},k=function(r,u){u.removeClass("ui-state-"+
+r)};this.lis.bind("mouseover.tabs",function(){n("hover",a(this))});this.lis.bind("mouseout.tabs",function(){k("hover",a(this))});this.anchors.bind("focus.tabs",function(){n("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var m,p;if(j.fx)if(a.isArray(j.fx)){m=j.fx[0];p=j.fx[1]}else m=p=j.fx;var q=p?function(r,u){a(r).closest("li").addClass("ui-tabs-selected ui-state-active");u.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",
+function(){b(u,p);h._trigger("show",null,h._ui(r,u[0]))})}:function(r,u){a(r).closest("li").addClass("ui-tabs-selected ui-state-active");u.removeClass("ui-tabs-hide");h._trigger("show",null,h._ui(r,u[0]))},s=m?function(r,u){u.animate(m,m.duration||"normal",function(){h.lis.removeClass("ui-tabs-selected ui-state-active");u.addClass("ui-tabs-hide");b(u,m);h.element.dequeue("tabs")})}:function(r,u){h.lis.removeClass("ui-tabs-selected ui-state-active");u.addClass("ui-tabs-hide");h.element.dequeue("tabs")};
+this.anchors.bind(j.event+".tabs",function(){var r=this,u=a(r).closest("li"),v=h.panels.filter(":not(.ui-tabs-hide)"),w=h.element.find(h._sanitizeSelector(r.hash));if(u.hasClass("ui-tabs-selected")&&!j.collapsible||u.hasClass("ui-state-disabled")||u.hasClass("ui-state-processing")||h.panels.filter(":animated").length||h._trigger("select",null,h._ui(this,w[0]))===false){this.blur();return false}j.selected=h.anchors.index(this);h.abort();if(j.collapsible)if(u.hasClass("ui-tabs-selected")){j.selected=
+-1;j.cookie&&h._cookie(j.selected,j.cookie);h.element.queue("tabs",function(){s(r,v)}).dequeue("tabs");this.blur();return false}else if(!v.length){j.cookie&&h._cookie(j.selected,j.cookie);h.element.queue("tabs",function(){q(r,w)});h.load(h.anchors.index(this));this.blur();return false}j.cookie&&h._cookie(j.selected,j.cookie);if(w.length){v.length&&h.element.queue("tabs",function(){s(r,v)});h.element.queue("tabs",function(){q(r,w)});h.load(h.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
+a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(i){if(typeof i=="string")i=this.anchors.index(this.anchors.filter("[href$="+i+"]"));return i},destroy:function(){var i=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var b=
+a.data(this,"href.tabs");if(b)this.href=b;var h=a(this).unbind(".tabs");a.each(["href","load","cache"],function(j,l){h.removeData(l+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});i.cookie&&this._cookie(null,i.cookie);return this},add:function(i,
+b,h){if(h===d)h=this.anchors.length;var j=this,l=this.options;b=a(l.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,b));i=!i.indexOf("#")?i.replace("#",""):this._tabId(a("a",b)[0]);b.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var o=j.element.find("#"+i);o.length||(o=a(l.panelTemplate).attr("id",i).data("destroy.tabs",true));o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(h>=this.lis.length){b.appendTo(this.list);o.appendTo(this.list[0].parentNode)}else{b.insertBefore(this.lis[h]);
+o.insertBefore(this.panels[h])}l.disabled=a.map(l.disabled,function(n){return n>=h?++n:n});this._tabify();if(this.anchors.length==1){l.selected=0;b.addClass("ui-tabs-selected ui-state-active");o.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){j._trigger("show",null,j._ui(j.anchors[0],j.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[h],this.panels[h]));return this},remove:function(i){i=this._getIndex(i);var b=this.options,h=this.lis.eq(i).remove(),j=this.panels.eq(i).remove();
+if(h.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(i+(i+1<this.anchors.length?1:-1));b.disabled=a.map(a.grep(b.disabled,function(l){return l!=i}),function(l){return l>=i?--l:l});this._tabify();this._trigger("remove",null,this._ui(h.find("a")[0],j[0]));return this},enable:function(i){i=this._getIndex(i);var b=this.options;if(a.inArray(i,b.disabled)!=-1){this.lis.eq(i).removeClass("ui-state-disabled");b.disabled=a.grep(b.disabled,function(h){return h!=i});this._trigger("enable",null,
+this._ui(this.anchors[i],this.panels[i]));return this}},disable:function(i){i=this._getIndex(i);var b=this.options;if(i!=b.selected){this.lis.eq(i).addClass("ui-state-disabled");b.disabled.push(i);b.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[i],this.panels[i]))}return this},select:function(i){i=this._getIndex(i);if(i==-1)if(this.options.collapsible&&this.options.selected!=-1)i=this.options.selected;else return this;this.anchors.eq(i).trigger(this.options.event+".tabs");return this},
+load:function(i){i=this._getIndex(i);var b=this,h=this.options,j=this.anchors.eq(i)[0],l=a.data(j,"load.tabs");this.abort();if(!l||this.element.queue("tabs").length!==0&&a.data(j,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(i).addClass("ui-state-processing");if(h.spinner){var o=a("span",j);o.data("label.tabs",o.html()).html(h.spinner)}this.xhr=a.ajax(a.extend({},h.ajaxOptions,{url:l,success:function(n,k){b.element.find(b._sanitizeSelector(j.hash)).html(n);b._cleanup();h.cache&&a.data(j,
+"cache.tabs",true);b._trigger("load",null,b._ui(b.anchors[i],b.panels[i]));try{h.ajaxOptions.success(n,k)}catch(m){}},error:function(n,k){b._cleanup();b._trigger("load",null,b._ui(b.anchors[i],b.panels[i]));try{h.ajaxOptions.error(n,k,i,j)}catch(m){}}}));b.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
+url:function(i,b){this.anchors.eq(i).removeData("cache.tabs").data("load.tabs",b);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.13"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(i,b){var h=this,j=this.options,l=h._rotate||(h._rotate=function(o){clearTimeout(h.rotation);h.rotation=setTimeout(function(){var n=j.selected;h.select(++n<h.anchors.length?n:0)},i);o&&o.stopPropagation()});b=h._unrotate||(h._unrotate=!b?function(o){o.clientX&&
+h.rotate(null)}:function(){t=j.selected;l()});if(i){this.element.bind("tabsshow",l);this.anchors.bind(j.event+".tabs",b);l()}else{clearTimeout(h.rotation);this.element.unbind("tabsshow",l);this.anchors.unbind(j.event+".tabs",b);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/jquery.dynamicobjects.js elefant-elefant_1_3_3_beta/apps/admin/js/jquery.dynamicobjects.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/jquery.dynamicobjects.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/jquery.dynamicobjects.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,368 @@
+/**
+ * Used by the admin/util/dynamicobjects handler to provide an
+ * object chooser for app developers.
+ */
+;(function ($) {
+	var self = {};
+
+	// Current list of options
+	self.opts = {};
+
+	// List of embeddable handlers
+	self.list = [];
+
+	// Initialized
+	self.initialized = false;
+
+	self.init = function () {
+		$.get (
+			'/admin/embed',
+			function (res) {
+				self.list = res;
+				self.initialized = true;
+			}
+		);
+	};
+
+	// Build an embed string from a handler and data
+	self.build_embed_string = function (handler, data) {
+		var i, sep = '?', embed = handler;
+		for (i in data) {
+			embed += sep + i + '=' + escape (data[i]);
+			sep = '&';
+		}
+		return embed;
+	};
+
+	// Parse an embed string into a handler and data
+	self.parse_embed_string = function (str) {
+		str = str.replace ('{!', '').replace ('!}', '').trim ();
+		if (str.indexOf ('?') !== -1) {
+			var split = str.split ('?'),
+				handler = split[0],
+				params = (split[1].indexOf ('&') !== -1) ? split[1].split ('&') : [split[1]],
+				data = {};
+
+			for (var i = 0; i < params.length; i++) {
+				split = params[i].split ('=');
+				data[split[0]] = decodeURIComponent (split[1]);
+			}
+		} else {
+			var handler = str,
+				data = {};
+		}
+		return {
+			handler: handler,
+			data: data
+		};
+	};
+
+	// Submit the chosen handler and data
+	self.return_object = function (handler, data, label) {
+		var handler = handler ? handler : $(this).data ('handler'),
+			data = data ? data : $(this).data,
+			embed_code = self.build_embed_string (handler, data),
+			label = label ? label : $(this).data ('label');
+		
+		if (self.opts.set_value) {
+			$(self.opts.set_value).val (embed_code);
+		}
+
+		if (self.opts.callback) {
+			self.opts.callback (embed_code, handler, data, label);
+		}
+
+		$.close_dialog ();
+		return false;
+	};
+
+	$.dynamicobjects = function (opts) {
+		var defaults = {
+			callback: null,
+			set_value: null,
+			current: null,
+			title: $.i18n ('Dynamic Objects'),
+			embed_button: $.i18n ('Embed'),
+			back_button: $.i18n ('Back'),
+			browse_button: $.i18n ('Browse')
+		};
+		
+		self.opts = $.extend (defaults, opts);
+		
+		if (! self.initialized) {
+			alert ($.i18n ('Unable to load the dynamic object list. Please try again in a few seconds.'));
+			return;
+		}
+
+		// the base html
+		var html = '<div id="dynamicobjects-wrapper">' +
+			'<div class="dynamicobjects-content clearfix">' +
+				'<ul class="dynamicobjects-list clearfix"></ul>' +
+			'</div>' +
+			'<div class="dynamicobjects-form">' +
+				'<form id="dynamicobjects-form"></form>' +
+			'</div>' +
+			'<br clear="both" />' +
+		'</div>';
+
+		// current is an existing object choice
+		var current = (self.opts.current !== null)
+			? self.parse_embed_string (self.opts.current)
+			: false;
+
+		$.open_dialog (self.opts.title, html);
+
+		// build the list of handlers
+		var ui = '',
+			list = $('.dynamicobjects-list');
+
+		for (var i = 0; i < self.list.length; i++) {
+			var item = self.list[i],
+				icon = '';
+
+			if (item.icon) {
+				if (item.icon.indexOf ('/') === -1) {
+					icon = 'class="icon-' + item.icon + '"';
+				} else {
+					icon = 'style="background: url(' + item.icon + ') no-repeat"';
+				}
+			} else {
+				icon = 'class="icon-cog"';
+			}
+
+			ui += '<li>' +
+				'<a href="javascript:void(0)" class="dynamicobjects-object" id="dynamicobjects-object-' + i + '" data-handler="' + i + '">' +
+					'<i ' + icon + '></i>' + item.label +
+				'</a>' +
+			'</li>';
+		}
+
+		// page the list of handlers
+		list.html (ui).quickPager ();
+
+		// handle choosing a handler from the list
+		$('.dynamicobjects-object').click (function () {
+			var i = 0,
+				num = $(this).data ('handler'),
+				obj = self.list[num],
+				f = $('#dynamicobjects-form'),
+				html = '';
+
+				if (obj.fields.length === 0) {
+					// no parameters, return handler
+					self.return_object (obj.handler, {}, obj.label);
+				}
+
+				// generate the form screen
+				$('.dynamicobjects-object').removeClass ('current');
+				$(this).addClass ('current');
+				$('.dynamicobjects-content').hide ();
+				$('.dynamicobjects-form').show ();
+
+				html = '' +
+					'<input type="hidden" name="handler" value="' + obj.handler + '" />' +
+					'<input type="hidden" name="label" value="' + obj.label + '" />' +
+					'<h2>' + obj.label + '</h2>' +
+					'<div class="clearfix">';
+
+				for (var i in obj.fields) {
+					if (! obj.fields[i].initial) {
+						obj.fields[i].initial = '';
+					}
+					
+					if (obj.fields[i].type == 'select') {
+						html += '<p><label for="' + obj.fields[i].name + '">' + obj.fields[i].label + '</label><select name="' + obj.fields[i].name + '">';
+						for (var o in obj.fields[i].values) {
+							if (obj.fields[i].values[o].hasOwnProperty ('key') && obj.fields[i].values[o].hasOwnProperty ('value')) {
+								if (obj.fields[i].initial == obj.fields[i].values[o].key) {
+									html += '<option value="' + obj.fields[i].values[o].key + '" selected>' + obj.fields[i].values[o].value + '</option>';
+								} else {
+									html += '<option value="' + obj.fields[i].values[o].key + '">' + obj.fields[i].values[o].value + '</option>';
+								}
+							} else {
+								if (obj.fields[i].initial == obj.fields[i].values[o]) {
+									html += '<option value="' + obj.fields[i].values[o] + '" selected>' + obj.fields[i].values[o] + '</option>';
+								} else {
+									html += '<option value="' + obj.fields[i].values[o] + '">' + obj.fields[i].values[o] + '</option>';
+								}
+							}
+						}
+						if (obj.fields[i].message) {
+							html += '</select><span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
+						} else {
+							html += '</select></p>';
+						}
+					} else if (obj.fields[i].type == 'textarea') {
+						html += '<p><label for="' + obj.fields[i].name + '">' + obj.fields[i].label + '</label><textarea name="' + obj.fields[i].name + '" rows="6">' + obj.fields[i].initial + '</textarea>';
+						if (obj.fields[i].message) {
+							html += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
+						} else {
+							html += '</p>';
+						}
+					} else if (obj.fields[i].type == 'file') {
+						html += '<p><label for="' + obj.fields[i].name + '" >' + obj.fields[i].label + '</label>';
+						html += '<input type="text" class="wysiwyg-file-input" name="' + obj.fields[i].name + '" id="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" />';
+
+						// add the File Manager icon:
+						html += '&nbsp;<button class="wysiwyg-fileManager" id="' + obj.fields[i].name + '-fileManager">' + self.opts.browse_button + '</button>';
+						html += "<br clear:both />"
+
+						if (obj.fields[i].message) {
+							html += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span>';
+						} 
+							
+						html += '</p>';
+						
+					} else {
+						html += '<p><label for="' + obj.fields[i].name + '">' + obj.fields[i].label + '</label><input type="text" name="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" />';
+						if (obj.fields[i].message) {
+							html += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
+							
+						} else {
+							html += '</p>';
+						}
+					}
+				}
+
+				html += '</div><div>' +
+					'<input type="submit" class="dynamicobjects-submit" value="' + self.opts.embed_button + '" />' +
+					'<input type="submit" class="dynamicobjects-back clearfix" value="' + self.opts.back_button + '" />' +
+				'</div><br clear="both" />';
+
+				f.html (html);
+
+				if (obj.columns == '2') {
+					$('.dynamicobjects-form').addClass ('columns-2');
+				} else {
+					$('.dynamicobjects-form').removeClass ('columns-2');
+				}
+
+				// back button handler
+				$('.dynamicobjects-back', '#dynamicobjects-form')
+					.unbind ('click')
+					.click (function () {
+						$('.dynamicobjects-form').hide ();
+						$('.dynamicobjects-content').show ();
+					});
+
+				// selecting a file
+				for (var i in obj.fields) {
+					if (obj.fields[i].type == 'file') {
+						$('#' + obj.fields[i].name + '-fileManager').bind ('click', function () {
+							$.filebrowser ({
+								set_value: '#' + obj.fields[i].name
+								// todo: limit by file type
+							});
+							return false;
+						});
+					}
+				}
+
+				// submit button handler
+				$('.dynamicobjects-submit').click (function (evt) {
+					evt.preventDefault ();
+
+					var i = 0,
+						fields = obj.fields,
+						label = obj.label,
+						form = $(this)[0].form,
+						out = form.elements.handler.value,
+						label = form.elements.label.value,
+						key_list = ['name', 'label', 'type', 'initial', 'message', 'require', 'callback', 'values', 'filter'],
+						filters = false;
+
+					// validate form
+					for (var i in fields) {
+						var rules = [];
+						for (var r in fields[i]) {
+							var in_key_list = false;
+							for (var k = 0; k < key_list.length; k++) {
+								if (r == key_list[k]) {
+									in_key_list = true;
+									break;
+								}
+							}
+							if (! in_key_list) {
+								// it's a rule!
+								if (! $(form.elements[i]).verify_value ({form:form, type:r, validator: fields[i][r]})) {
+									$('#' + i + '-msg').show ();
+									return false;
+								}
+							}
+						}
+					}
+
+					// are there any filters?
+					for (var i in fields) {
+						if (fields[i].hasOwnProperty ('filter')) {
+							filters = true;
+						}
+					}
+
+					// build an array of valid data from the fields
+					var unfiltered = {};
+					for (var i = 0; i < form.elements.length; i++) {
+						if (form.elements[i].name == 'handler' || form.elements[i].name == 'label' || ! form.elements[i].name) {
+							continue;
+						}
+						unfiltered[form.elements[i].name] = form.elements[i].value;
+					}
+
+					if (filters) {
+						// apply filters server-side then submit the form with the returned values
+						$.post ('/admin/embed/filters', {handler: out, data: unfiltered}, function (res) {
+							self.return_object (out, res.data, label);
+						});
+					} else {
+						// no filters, submit the form now
+						self.return_object (out, unfiltered, label);
+					}
+
+					return false;
+				});
+		});
+
+		if (current) {
+			for (var i = 0; i < self.list.length; i++) {
+				if (self.list[i].handler === current.handler) {
+					$('#dynamicobjects-object-' + i).addClass ('current');
+
+					if (! $.isEmptyObject (current.data)) {
+						var c = 0;
+						for (k in current.data) {
+							if (current.data.hasOwnProperty (k)) {
+								c++;
+							}
+						}
+
+						if (c > 0) {
+							// simulate selection
+							$('#dynamicobjects-object-' + i).click ();
+
+							// fill with original values
+							var f = $('#dynamicobjects-form').get (0);
+							for (var k in current.data) {
+								if (f.elements[k]) {
+									if (self.list[i].fields[k] && self.list[i].fields[k].hasOwnProperty ('filter')) {
+										var data = {};
+										data[k] = current.data[k];
+										$.post ('/admin/embed/filters', {handler: current.handler, data: data, reverse: 'yes'}, function (res) {
+											$(f.elements[k]).val (res.data[k]);
+										});
+									} else {
+										$(f.elements[k]).val (current.data[k]);
+									}
+								}
+							}
+						}
+					}
+
+					$('.simplePageNav' + Math.ceil (i / 10) + ' a').click ();
+					break;
+				}
+			}
+		}
+	};
+
+	self.init ();
+})(jQuery);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/admin/js/jquery.jgrowl.min.js and elefant-elefant_1_3_3_beta/apps/admin/js/jquery.jgrowl.min.js are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/jquery.notifier.js elefant-elefant_1_3_3_beta/apps/admin/js/jquery.notifier.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/jquery.notifier.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/jquery.notifier.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,36 @@
+/**
+ * Provides a general-purpose user notifier based on the jQuery
+ * cookie and jGrowl plugins. See `apps/admin/handlers/util/notifier.php`
+ * for more information.
+ */
+
+jQuery.add_notice = function (msg) {
+	var notices = $.cookie ('notifier_notices');
+	if (notices !== null) {
+		msg = notices + '|' + msg;
+	}
+	$.cookie ('notifier_notices', msg, {path: '/'});
+};
+
+$(function () {
+	var jgrowl_interval = function () {
+		var notice = $.cookie ('notifier_notices'),
+			msglist = [],
+			i = 0;
+
+		$.cookie ('notifier_notices', null, {path: '/'});
+
+		if (notice !== null) {
+			msglist = notice.split ('|');
+			for (i = 0; i < msglist.length; i++) {
+				if (msglist[i].length > 0) {
+					$.jGrowl (msglist[i].replace (/\+/g, ' '));
+				}
+			}
+		}
+		// clear notices
+		setTimeout (jgrowl_interval, 1000);
+	}
+
+	jgrowl_interval ();
+});
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/jquery.simplemodal.1.4.2.min.js elefant-elefant_1_3_3_beta/apps/admin/js/jquery.simplemodal.1.4.2.min.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/jquery.simplemodal.1.4.2.min.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/js/jquery.simplemodal.1.4.2.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -1,10 +1,10 @@
-/*
- * SimpleModal 1.4.2 - jQuery Plugin
- * http://simplemodal.com/
- * Copyright (c) 2011 Eric Martin
- * Licensed under MIT and GPL
- * Date: Sat, Dec 17 2011 15:35:38 -0800
- */
+/*
+ * SimpleModal 1.4.2 - jQuery Plugin
+ * http://simplemodal.com/
+ * Copyright (c) 2011 Eric Martin
+ * Licensed under MIT and GPL
+ * Date: Sat, Dec 17 2011 15:35:38 -0800
+ */
 (function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){var j=[],k=b(document),l=b.browser.msie&&6===parseInt(b.browser.version)&&"object"!==typeof window.XMLHttpRequest,n=b.browser.msie&&7===parseInt(b.browser.version),m=null,h=b(window),i=[];b.modal=function(a,d){return b.modal.impl.init(a,d)};b.modal.close=function(){b.modal.impl.close()};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=function(){b.modal.impl.setContainerDimensions()};
 b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,d){b.modal.impl.update(a,d)};b.fn.modal=function(a){return b.modal.impl.init(this,a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1E3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',
 closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl={d:{},init:function(a,d){if(this.d.data)return!1;m=b.browser.msie&&!b.boxModel;this.o=b.extend({},b.modal.defaults,d);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof a){if(a=a instanceof jQuery?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/modal.js elefant-elefant_1_3_3_beta/apps/admin/js/modal.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/modal.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/js/modal.js	2013-03-20 13:48:44.000000000 -0500
@@ -1,22 +1,124 @@
 $(function () {
-	$('body').append ('<div id="modal-dialog">' +
-			'<div id="modal-titlebar">' +
-				'<div id="modal-close-wrapper">' +
-					'<a id="modal-close-button" href="#" class="simplemodal-close">X</a>' +
+	// n is the topmost dialog
+	var n = 0;
+
+	// create the html a new modal dialog
+	function new_modal () {
+		n++;
+		$('body').append ('<div id="modal-overlay-' + n + '" class="modal-overlay"></div>' + 
+			'<div id="modal-dialog-' + n + '" class="modal-dialog">' +
+				'<div id="modal-titlebar-' + n + '" class="modal-titlebar">' +
+					'<div class="modal-close-wrapper">' +
+						'<a href="#" id="modal-close-' + n + '" data-modal="' + n + '" class="modal-close-button">X</a>' +
+					'</div>' +
+					'<div id="modal-title-' + n + '" class="modal-title"></div>' +
 				'</div>' +
-				'<div id="modal-title"></div>' +
-			'</div>' +
-			'<div id="modal-content"></div>' +
-		'</div>');
-
-	$.open_dialog = function (title, html) {
-		$('#modal-title').html (title);
-		$('#modal-content').html (html);
-		$('#modal-dialog').modal ();
+				'<div id="modal-content-' + n + '" class="modal-content"></div>' +
+			'</div>');
+		return n;
+	}
+
+	// removes the html from the specified dialog
+	function close_modal (num) {
+		$('#modal-dialog-' + num).remove ();
+		$('#modal-overlay-' + num).remove ();
+	}
+
+	// centers the specified dialog
+	function center_modal (num) {
+		var modal = $('#modal-dialog-' + num),
+			top = Math.max ($(window).height () - modal.outerHeight (), 0) / 2,
+			left = Math.max ($(window).width () - modal.outerWidth (), 0) / 2;
+
+		modal.css ({
+			top: top + $(window).scrollTop () + ((num - 1) * 10),
+			left: left + $(window).scrollLeft () + ((num - 1) * 10)
+		});
+	}
+
+	// disable scrolling
+	function disable_scrolling () {
+		var html = $('html'),
+			scrollpos = [
+				self.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,
+				self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
+			];
+
+		html.data ('scroll-pos', scrollpos)
+			.data ('prev-overflow', html.css ('overflow'))
+			.css ('overflow', 'hidden');
+
+		window.scrollTo (scrollpos[0], scrollpos[1]);
+	}
+
+	// re-enable scrolling
+	function enable_scrolling () {
+		var html = $('html'),
+			scrollpos = html.data ('scroll-pos');
+
+		html.css ('overflow', html.data ('prev-overflow'));
+		window.scrollTo (scrollpos[0], scrollpos[1]);
+	}
+
+	// open a new modal dialog
+	$.open_dialog = function (title, html, opts) {
+		var defaults = {
+			width: 550,
+			height: 300
+		};
+
+		opts = opts || {};
+		opts = $.extend (defaults, opts);
+
+		var num = new_modal (),
+			modal = $('#modal-dialog-' + n);
+
+		$('#modal-title-' + num).html (title);
+		$('#modal-content-' + num).html (html);
+		$('#modal-overlay-' + num).show ().css ({'z-index': num * 100000});
+		modal.show ().css ({'z-index': (num * 100000) + 1});
+
+		if (opts.width) {
+			modal.css ({width: opts.width + 'px'});
+			modal.children ('.modal-close-wrapper').css ({width: (opts.width - 22) + 'px'});
+		}
+
+		if (opts.height) {
+			modal.css ({height: opts.height + 'px'});
+			modal.children ('.modal-content').css ({height: (opts.height - 67) + 'px'});
+		}
+
+		center_modal (num);
+
+		$('#modal-close-' + num).click ($.close_dialog);
+
+		if (num === 1) {
+			disable_scrolling ();
+		}
+
+		return num;
 	};
 
-	$.close_dialog = function () {
-		$.modal.close ();
+	// close the top or the specified dialog
+	$.close_dialog = function (num) {
+		if (typeof num === 'object') {
+			num = $(num.target).data ('modal');
+		} else {
+			num = num ? num : n;
+		}
+
+		// cascade if outer dialog is closed
+		for (var i = n; i >= num; i--) {
+			close_modal (i);
+		}
+
+		// adjust active number
+		n = num - 1;
+
+		if (n === 0) {
+			enable_scrolling ();
+		}
+
 		return false;
 	}
 });
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/custom.css elefant-elefant_1_3_3_beta/apps/admin/js/redactor/custom.css
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/custom.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/custom.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,169 @@
+.redactor_box {
+	border: 0;
+	background: inherit;
+}
+
+.redactor_toolbar {
+	border: 0;
+	background: inherit;
+}
+
+.redactor_toolbar li.redactor_separator {
+	border: 0;
+	background-image: url(/apps/admin/css/admin/pipe.png);
+	background-repeat: no-repeat;
+	background-position: 0px 9px;
+	width: 1px;
+}
+
+.redactor_editor {
+	margin-top: -1px !important;
+}
+
+.redactor_editor, .redactor_box textarea {
+	border: 1px solid #999;
+	-webkit-border-radius: 2px;
+	-moz-border-radius: 2px;
+	border-radius: 2px;
+	width: 654px !important;
+	height: 418px !important;
+	padding: 10px 5px 5px 5px !important;
+}
+
+.redactor_editor:focus {
+	height: 418px !important;
+	padding: 10px 5px 5px 5px !important;
+	margin-top: -1px !important;
+}
+
+.redactor_toolbar li a.redactor_btn_undo {
+	background-image: url(/apps/admin/css/admin/undo-icon.png);
+	background-repeat: no-repeat;
+	background-position: 0px 0px;
+}
+
+.redactor_toolbar li a.redactor_btn_link_unlink {
+	background-position: -300px;
+}
+
+.redactor_toolbar li a.redactor_btn_filebrowser {
+	background-position: -250px;
+}
+
+.redactor_toolbar li a.redactor_btn_imagebrowser {
+	background-position: -200px;
+}
+
+.redactor_toolbar li a.redactor_btn_dynamic {
+	background-image: url(/apps/admin/css/admin/dynamic-icon.png);
+	background-repeat: no-repeat;
+	background-position: 4px 4px;
+}
+
+.redactor_editor .embedded {
+	background-color: #eee;
+	border: 1px solid #ccc;
+	-webkit-border-radius: 4px;
+	-moz-border-radius: 4px;
+	border-radius: 4px;
+	background-image: url(/apps/admin/css/admin/dynamic-icon.png);
+	background-repeat: no-repeat;
+	background-position: 5px 44%;
+	padding: 5px 7px 5px 28px;
+	white-space: nowrap;
+}
+
+.redactor_editor .embedded:hover {
+	cursor: pointer;
+}
+
+.redactor_editor .embedded:after {
+	content: attr(data-label);
+}
+
+#redactor_modal_overlay {
+	background: #000;
+	opacity: 0.2;
+	filter: alpha(opacity=20);
+}
+
+#redactor_modal {
+	-webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
+	-moz-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
+	box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
+	-webkit-border-radius: 0;
+	-moz-border-radius: 0;
+	border-radius: 0;
+}
+
+#redactor_modal_close {
+	color: #444;
+	border: 1px solid #aaa;
+	margin-top: 3px;
+	margin-right: 3px;
+	line-height: 18px;
+	text-align: center;
+}
+
+#redactor_modal_close:hover {
+	background-color: #ccc;
+	color: #222;
+}
+
+#redactor_modal_header {
+	background: #eeeeee; /* Old browsers */
+	background: -moz-linear-gradient(top,  #eeeeee 0%, #dddddd 100%); /* FF3.6+ */
+	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
+	background: -webkit-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* Chrome10+,Safari5.1+ */
+	background: -o-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* Opera 11.10+ */
+	background: -ms-linear-gradient(top,  #eeeeee 0%,#dddddd 100%); /* IE10+ */
+	background: linear-gradient(to bottom,  #eeeeee 0%,#dddddd 100%); /* W3C */
+	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
+	border-bottom: 1px solid #aaa;
+	border-top: 1px solid #aaa;
+	color: #444;
+	padding: 5px 10px 5px 10px;
+	font-size: 16px;
+	font-weight: normal;
+	-webkit-border-radius: 0;
+	-moz-border-radius: 0;
+	border-radius: 0;
+}
+
+#redactor_modal_inner {
+	background: #fafafa;
+	border: 1px solid #fafafa;
+	border-top: 0px none;
+	padding: 15px;
+	height: 233px;
+	overflow-y: auto;
+}
+
+.links-btn {
+	display: inline-block;
+	padding-right: 8px;
+	padding-left: 8px;
+	border-left: 1px solid #ccc;
+	margin-bottom: 3px;
+}
+
+.links-btn:first-child {
+	border-left: 0;
+	padding-left: 0;
+}
+
+.links-btn:hover {
+	cursor: pointer;
+}
+
+.links-btn.active {
+	font-weight: bold;
+}
+
+#links-page {
+	min-width: 175px;
+}
+
+#links-url, #links-email {
+	display: none;
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/dynamic.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/dynamic.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/dynamic.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/dynamic.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,53 @@
+/**
+ * Provides a Dynamic Objects menu for the Redactor editor,
+ * which integrates with Elefant's dynamic handler embedding
+ * capability.
+ */
+
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.dynamic = {
+	// Initialize the plugin
+	init: function () {
+		$('.redactor_editor').on ('click', '.embedded', {plugin: this}, $.proxy (this.edit_handler, this));
+		this.addBtn ('dynamic', $.i18n ('Dynamic Objects'), $.proxy (this.add_handler, this));
+		//this.button.add.call (this, 'dynamic', $.i18n ('Dynamic Objects'), $.proxy (this.add_handler, this));
+	},
+
+	// Open the dialog when the button is clicked
+	add_handler: function (self, evt, button, current) {
+		this._current = current ? this._current : null;
+		this.saveSelection ();
+		$.dynamicobjects ({
+			callback: $.proxy (this.insert_object, this),
+			current: current ? current : null
+		});
+	},
+
+	// Reopen the dialog to edit an existing embed
+	edit_handler: function (evt) {
+		this._current = evt.target;
+		this.add_handler (this, evt, 'dynamic', $(evt.target).data ('embed'));
+		return false;
+	},
+
+	// Insert/replace an embed code in the editor
+	insert_object: function (embed_code, handler, params, label) {
+		this.restoreSelection ();
+		if (this._current) {
+			// update existing embed
+			$(this._current).replaceWith (
+				'<span class="embedded" data-embed="' + embed_code + '" data-label="' + label + '" title="Click to edit."></span>'
+			);
+			this.syncCode();
+		} else {
+			// enter a new embed
+			this.insertHtml (
+			//this.exec.command.call (
+			//	this,
+			//	'inserthtml',
+				'<span class="embedded" data-embed="' + embed_code + '" data-label="' + label + '" title="Click to edit."></span>'
+			);
+		}
+	}
+};
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/filebrowser.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/filebrowser.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/filebrowser.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/filebrowser.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,42 @@
+/**
+ * Integrates Redactor with Elefant's file browser dialog.
+ * Requires Elefant's filemanager/util/browser handler.
+ */
+
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.filebrowser = {
+	// Initialize the plugin
+	init: function () {
+		this.addBtnAfter ('imagebrowser', 'filebrowser', $.i18n ('Insert File'), $.proxy (this.open_dialog, this));
+		//this.button.addAfter.call (this, 'imagebrowser', 'filebrowser', $.i18n ('Insert File'), $.proxy (this.open_dialog, this));
+	},
+	
+	open_dialog: function (self, evt, button) {
+		self.saveSelection ();
+		$.filebrowser ({
+			callback: $.proxy (this.insert_file, this)
+		});
+	},
+	
+	insert_file: function (file) {
+		this.restoreSelection ();
+		if (file.match (/\.(jpg|png|gif)$/i)) {
+			this.insertHtml ('<img src="' + file + '" alt="" style="" />');
+			//this.exec.command.call (this, 'inserthtml', '<img src="' + file + '" alt="" style="" />');
+		} else if (file.match (/\.swf$/i)) {
+			this.insertHtml ('<span class="embedded" data-embed="filemanager/swf?file=' + file + '" data-label="Embedded Flash (SWF)" title="Click to edit."></span>');
+			//this.exec.command.call (this, 'inserthtml', '<p><span class="embedded" data-embed="filemanager/swf?file=' + file + '" data-label="{"Embedded Flash (SWF)"}" title="{"Click to edit."}"></span></p>');
+		} else if (file.match (/\.(mp4|m4v|flv|f4v)$/i)) {
+			this.insertHtml ('<span class="embedded" data-embed="filemanager/video?file=' + file + '" data-label="Embedded Video (MP4)" title="Click to edit."></span>');
+			//this.exec.command.call (this, 'inserthtml', '<p><span class="embedded" data-embed="filemanager/video?file=' + file + '" data-label="{"Embedded Video (MP4)"}" title="{"Click to edit."}"></span></p>');
+		} else if (file.match (/\.mp3$/i)) {
+			this.insertHtml ('<span class="embedded" data-embed="filemanager/audio?file=' + file + '" data-label="Embedded Audio (MP3)" title="Click to edit."></span>');
+			//this.exec.command.call (this, 'inserthtml', '<p><span class="embedded" data-embed="filemanager/audio?file=' + file + '" data-label="{"Embedded Audio (MP3)"}" title="{"Click to edit."}"></span></p>');
+		} else {
+			var basename = file.match (/([^\/]+)$/)[1];
+			this.insertHtml ('<a href="' + file + '">' + basename + '</a>');
+			//this.exec.command.call (this, 'inserthtml', '<a href="' + file + '">' + basename + '</a>');
+		}
+	}
+};
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/fontfamily.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/fontfamily.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/fontfamily.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/fontfamily.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,34 @@
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.fontfamily = {
+
+	init: function()
+	{
+		var fonts = [
+			'Arial',
+			'Helvetica',
+			'Georgia',
+			'Times New Roman',
+			'Monospace'
+		];
+		var that = this;
+		var dropdown = {};
+
+		$.each(fonts, function(i,s)
+		{
+			dropdown['s' + i] = { title: s, callback: function() { that.setFontfamily(s); } };
+		});
+
+		dropdown['remove'] = { title: 'Remove font', callback: function() { that.resetFontfamily(); } };
+
+		this.button.add.call(this, 'fontfamily', 'Change font family', false, dropdown);
+	},
+	setFontfamily: function(value)
+	{
+		this.inline.setStyle.call(this, 'font-family', value);
+	},
+	resetFontfamily: function()
+	{
+		this.inline.removeStyle.call(this, 'font-family');
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/fontsize.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/fontsize.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/fontsize.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/fontsize.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,29 @@
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.fontsize = {
+
+	init: function()
+	{
+		var fonts = [10, 11, 12, 14, 16, 18, 20, 24, 28, 30];
+		var that = this;
+		var dropdown = {};
+
+		$.each(fonts, function(i,s)
+		{
+			dropdown['s' + i] = { title: s + 'px', callback: function() { that.setFontsize(s); } };
+		});
+
+		dropdown['remove'] = { title: 'Remove font size', callback: function() { that.resetFontsize(); } };
+
+
+		this.button.add.call(this, 'fontsize', 'Change font size', false, dropdown);
+	},
+	setFontsize: function(size)
+	{
+		this.inline.setStyle.call(this, 'font-size', size + 'px');
+	},
+	resetFontsize: function()
+	{
+		this.inline.removeStyle.call(this, 'font-size');
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/fullscreen.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/fullscreen.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/fullscreen.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/fullscreen.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,127 @@
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.fullscreen = {
+
+	init: function()
+	{
+		this.fullscreen = false;
+		this.button.add.call(this, 'fullscreen', 'Fullscreen', $.proxy(function()
+		{
+			this.toggleFullscreen();
+		}, this));
+
+		this.button.setRight.call(this, 'fullscreen');
+	},
+	toggleFullscreen: function()
+	{
+		var html;
+
+		if (this.fullscreen === false)
+		{
+			this.button.changeIcon.call(this, 'fullscreen', 'normalscreen');
+			this.button.active.call(this, 'fullscreen');
+			this.fullscreen = true;
+
+			if (this.opts.toolbarExternal)
+			{
+				this.toolcss = {};
+				this.boxcss = {};
+				this.toolcss.width = this.$toolbar.css('width');
+				this.toolcss.top = this.$toolbar.css('top');
+				this.toolcss.position = this.$toolbar.css('position');
+				this.boxcss.top = this.$box.css('top');
+			}
+
+			this.fsheight = this.$editor.height();
+
+			if (this.opts.iframe) var html = this.getCode();
+
+			this.tmpspan = $('<span></span>');
+			this.$box.addClass('redactor_box_fullscreen').after(this.tmpspan);
+
+			$('body, html').css('overflow', 'hidden');
+			$('body').prepend(this.$box);
+
+			if (this.opts.iframe) this.setCode(html);
+
+			this.fullScreenResize();
+			$(window).resize($.proxy(this.fullScreenResize, this));
+			$(document).scrollTop(0,0);
+
+			this.$editor.focus();
+			this.observe.start.call(this);
+		}
+		else
+		{
+			this.button.removeIcon.call(this, 'fullscreen', 'normalscreen');
+			this.button.inactive.call(this, 'fullscreen');
+			this.fullscreen = false;
+
+			$(window).unbind('resize', $.proxy(this.fullScreenResize, this));
+			$('body, html').css('overflow', '');
+
+			this.$box.removeClass('redactor_box_fullscreen').css({ width: 'auto', height: 'auto' });
+			this.tmpspan.after(this.$box).remove();
+
+			this.sync();
+
+			var height = this.fsheight;
+			if (this.opts.autoresize)
+			{
+				height = 'auto';
+			}
+
+			if (this.opts.toolbarExternal)
+			{
+				this.$box.css('top', this.boxcss.top);
+				this.$toolbar.css({ 'width': this.toolcss.width, 'top': this.toolcss.top, 'position': this.toolcss.position });
+			}
+
+			if (this.opts.iframe === false)
+			{
+				this.$editor.css('height', height)
+			}
+			else
+			{
+				this.$frame.css('height', height)
+			}
+
+			this.$el.css('height', height);
+			this.$editor.focus();
+			this.observe.start.call(this);
+		}
+	},
+	fullScreenResize: function()
+	{
+		if (this.fullscreen === false)
+		{
+			return false;
+		}
+
+		var toolbarHeight = this.$toolbar.height();
+
+		var pad = this.$editor.css('padding-top').replace('px', '');
+		var height = $(window).height() - toolbarHeight;
+		this.$box.width($(window).width() - 2).height(height+toolbarHeight);
+
+		if (this.opts.toolbarExternal)
+		{
+			this.$toolbar.css({ 'top': '0px', 'position': 'absolute', 'width': '100%'});
+			this.$box.css('top', toolbarHeight + 'px');
+		}
+
+		if (this.opts.iframe === false)
+		{
+			this.$editor.height(height-(pad*2));
+		}
+		else
+		{
+			setTimeout($.proxy(function()
+			{
+				this.$frame.height(height);
+			}, this), 1);
+		}
+
+		this.$el.height(height);
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/imagebrowser.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/imagebrowser.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/imagebrowser.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/imagebrowser.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,28 @@
+/**
+ * Integrates Redactor with Elefant's thumbnail image browser.
+ * Requires Elefant's filemanager/util/browser handler.
+ */
+
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.imagebrowser = {
+	// Initialize the plugin
+	init: function () {
+		this.addBtnAfter ('link_unlink', 'imagebrowser', $.i18n ('Insert Image'), $.proxy (this.open_dialog, this));
+		//this.button.addAfter.call (this, 'link_unlink', 'imagebrowser', $.i18n ('Insert Image'), $.proxy (this.open_dialog, this));
+	},
+	
+	open_dialog: function (self, evt, button) {
+		self.saveSelection ();
+		$.filebrowser ({
+			thumbs: true,
+			callback: $.proxy (this.insert_image, this)
+		});
+	},
+	
+	insert_image: function (file) {
+		this.restoreSelection ();
+		this.insertHtml ('<img src="' + file + '" alt="" style="" />');
+		//this.exec.command.call (this, 'inserthtml', '<img src="' + file + '" alt="" style="" />');
+	}
+};
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/links.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/links.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/plugins/links.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/plugins/links.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,227 @@
+/**
+ * Provides a link menu for the Redactor editor, which integrates
+ * with Elefant's list of internal pages so a user doesn't have
+ * to copy and paste or manually type a link to a page within
+ * their own site.
+ */
+
+if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+
+RedactorPlugins.links = {
+	// 
+	// Initialize the plugin
+	init: function () {
+		$.getJSON (
+			'/admin/wysiwyg/links',
+			$.proxy (
+				function (res) {
+					this._links = res;
+				},
+				this
+			)
+		);
+	},
+	
+	// Initialize the plugin when the button is clicked
+	insert: function (self, evt, button) {
+		self.insert_link_node = false;
+		self.has_selected_text = false;
+		var sel = self.getCurrentNode (),
+		//var sel = self.selection.get.call (self)
+			url = '', text = '', target = '',
+			page_matched = false,
+			base = window.location.origin
+				? window.location.origin
+				: window.location.protocol + '//' + window.location.host;
+
+		if (sel && sel.anchorNode && sel.anchorNode.parentNode.tagName === 'A') {
+			self.insert_link_node = sel.anchorNode.parentNode;
+			url = sel.anchorNode.parentNode.href;
+			text = sel.anchorNode.parentNode.text;
+			target = sel.anchorNode.parentNode.target;
+		} else if (sel.tagName && sel.tagName === 'A') {
+			self.insert_link_node = sel;
+			url = sel.href;
+			text = sel.text;
+			target = sel.target;
+		} else {
+			var parent = self.getParentNode ();
+			if (parent.nodeName === 'A') {
+				self.insert_link_node = $(parent);
+				text = self.insert_link_node.text ();
+				url = self.insert_link_node.attr ('href');
+				target = self.insert_link_node.attr ('target');
+			} else if (self.oldIE ()) {
+				text = sel.text;
+			} else {
+				text = self.getSelectedHtml ();
+			}
+		}
+		
+		if (text.length !== 0) {
+			self.has_selected_text = true;
+		}
+		
+		if (url.search (base) === 0) {
+			url = url.replace (base, '');
+		}
+
+		//self.selection.save.call (self);
+		self.saveSelection ();
+
+		$.open_dialog (
+			$.i18n ('Link'),
+			'<div class="links-content">' +
+				'<p>' +
+					'<span class="links-btn" id="links-page-btn">' + $.i18n ('Page') + '</span>' +
+					'<span class="links-btn" id="links-url-btn">' + $.i18n ('URL') + '</span>' +
+					'<span class="links-btn" id="links-email-btn">' + $.i18n ('Email') + '</span>' +
+					'<br />' +
+					'<select id="links-page">' +
+					'</select>' +
+					'<input type="text" id="links-url" size="65" placeholder="http://" />' +
+					'<input type="email" id="links-email" size="65" placeholder="you@example.com" />' +
+				'</p>' +
+				'<p>' +
+					$.i18n ('Text') + '<br />' +
+					'<input type="text" id="links-text" size="65" />' +
+				'</p>' +
+				'<p>' +
+					'<input type="checkbox" id="links-tab"> ' +
+					'<label for="links-tab">' +
+						$.i18n ('Open link in new tab') +
+					'</label>' +
+				'</p>' +
+				'<p>' +
+					'<input type="submit" id="links-submit" value="' + $.i18n ('Insert') + '" />' +
+					' &nbsp; ' +
+					'<a href="#" id="links-cancel">' + $.i18n ('Cancel') + '</a>' +
+				'</p>' +
+			'</div>'
+		);
+
+		if (self._links) {
+			var sel = $('#links-page');
+			sel.append (
+				$('<option>')
+					.attr ('value', '')
+					.text ($.i18n ('- select -'))
+			);
+			for (var i in self._links) {
+				if (url === self._links[i].url) {
+					sel.append (
+						$('<option>')
+							.attr ('value', self._links[i].url)
+							.text (self._links[i].title)
+							.attr ('selected', 'selected')
+					);
+					page_matched = true;
+				} else {
+					sel.append (
+						$('<option>')
+							.attr ('value', self._links[i].url)
+							.text (self._links[i].title)
+					);
+				}
+			}
+		}
+
+		if (page_matched) {
+			self.show_pages ();
+		} else if (url.search ('mailto:') === 0) {
+			$('#links-email').val (url.replace ('mailto:', ''));
+			self.show_email ();
+		} else if (url.length !== 0) {
+			$('#links-url').val (url);
+			self.show_url ();
+		} else {
+			self.show_pages ();
+		}
+
+		$('#links-text').val (text);
+
+		if (target.length !== 0) {
+			$('#links-tab').attr ('checked', 'checked');
+		}
+
+		$('#links-page-btn').click ($.proxy (self.show_pages, self));
+		$('#links-url-btn').click ($.proxy (self.show_url, self));
+		$('#links-email-btn').click ($.proxy (self.show_email, self));
+		$('#links-cancel').click (function () { $.close_dialog (); });
+		$('#links-submit').click ($.proxy (self.handle, self));
+	},
+
+	// Insert or update the link
+	handle: function () {
+		//$(this.editor_id).redactor ('selection.restore');
+		this.restoreSelection ();
+		
+		var active = this.links_active,
+			page = $('#links-page').find (':selected').val (),
+			url = $('#links-url').val (),
+			email = $('#links-email').val (),
+			text = $('#links-text').val (),
+			target = $('#links-tab').is (':checked'),
+			href = '';
+
+		if (active === 'page') {
+			href = page;
+		} else if (active === 'url') {
+			href = url;
+		} else if (active === 'email') {
+			href = 'mailto:' + email;
+		}
+
+		if (this.insert_link_node) {
+			$(this.insert_link_node).text (text);
+			$(this.insert_link_node).attr ('href', href);
+			if (target) {
+				$(this.insert_link_node).attr ('target', '_blank');
+			} else {
+				$(this.insert_link_node).removeAttr ('target');
+			}
+		} else {
+			var html = '<a href="' + href + '"';
+			if (target) {
+				html += ' target="_blank"';
+			}
+			html += '>' + text + '</a>';
+			this.insertHtml (html);
+		}
+
+		$.close_dialog ();
+	},
+	
+	// Show the pages list
+	show_pages: function () {
+		this.links_active = 'page';
+		$('#links-page-btn').addClass ('active');
+		$('#links-url-btn').removeClass ('active');
+		$('#links-email-btn').removeClass ('active');
+		$('#links-page').show ();
+		$('#links-url').hide ();
+		$('#links-email').hide ();
+	},
+	
+	// Show the URL input
+	show_url: function () {
+		this.links_active = 'url';
+		$('#links-page-btn').removeClass ('active');
+		$('#links-url-btn').addClass ('active');
+		$('#links-email-btn').removeClass ('active');
+		$('#links-page').hide ();
+		$('#links-url').show ();
+		$('#links-email').hide ();
+	},
+	
+	// Show the email input
+	show_email: function () {
+		this.links_active = 'email';
+		$('#links-page-btn').removeClass ('active');
+		$('#links-url-btn').removeClass ('active');
+		$('#links-email-btn').addClass ('active');
+		$('#links-page').hide ();
+		$('#links-url').hide ();
+		$('#links-email').show ();
+	}
+};
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor-iframe.css elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor-iframe.css
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor-iframe.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor-iframe.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,184 @@
+html {
+	padding: 0;
+	margin: 0;
+}
+body {
+	font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif;
+	margin: 0;
+	padding: 15px;
+}
+
+code,
+pre {
+	font-family: Menlo, Monaco, monospace, sans-serif;
+}
+
+div,
+p,
+ul,
+ol,
+table,
+dl,
+blockquote,
+pre {
+	font-size: 15px;
+	line-height: 1.45em;
+}
+
+a {
+	color: #15c;
+	text-decoration: underline;
+}
+.redactor_placeholder {
+	color: #999 !important;
+}
+
+object,
+embed,
+video,
+img {
+	width: auto;
+	max-width: 100%;
+}
+video,
+img {
+	height: auto;
+}
+
+div,
+p,
+ul,
+ol,
+table,
+dl,
+blockquote,
+pre {
+	box-shadow: none;
+	background: none;
+	margin: 0;
+	margin-bottom: 15px;
+	border: none;
+}
+iframe,
+object,
+hr {
+	margin-bottom: 15px;
+}
+blockquote {
+	margin-left: 3em;
+	font-style: italic;
+	color: #777;
+}
+ul,
+ol {
+	padding-left: 2em;
+}
+ul ul,
+ol ol,
+ul ol,
+ol ul {
+	border: none;
+	margin: 2px;
+	padding: 0;
+	padding-left: 2em;
+}
+dl dt { font-weight: bold; }
+dd { margin-left: 1em;}
+
+table {
+	border-collapse: collapse;
+	font-size: 1em;
+}
+table td {
+	border: 1px solid #ddd;
+	padding: 5px;
+	vertical-align: top;
+}
+table thead td {
+	border-bottom: 2px solid #000;
+	font-weight: bold;
+}
+code {
+	background-color: #d8d7d7;
+}
+pre {
+	font-size: 90%;
+	background: #f8f8f8;
+	border: 1px solid #ddd;
+	border-radius: 3px;
+	padding: 1em;
+	white-space: pre;
+	overflow: auto;
+}
+hr {
+  display: block;
+  height: 1px;
+  border: 0;
+  border-top: 1px solid #ccc;
+}
+
+h1,
+h2,
+h3,
+h4,
+h5 {
+	color: #000;
+	background: none;
+	margin: 0;
+	padding: 0;
+	font-weight: bold;
+}
+
+h1 {
+	font-size: 36px;
+	line-height: 40px;
+	margin-bottom: 10px;
+}
+h2 {
+	font-size: 30px;
+	line-height: 38px;
+	margin-bottom: 15px;
+}
+h3 {
+	font-size: 24px;
+	line-height: 30px;
+	margin-bottom: 10px;
+}
+h4 {
+	font-size: 18px;
+	line-height: 24px;
+	margin-bottom: 10px;
+}
+h5 {
+	font-size: 1em;
+	margin-bottom: 10px;
+}
+
+body.redactor_editor_wym {
+	background: #f6f6f6;
+}
+.redactor_editor_wym div,
+.redactor_editor_wym p,
+.redactor_editor_wym ul,
+.redactor_editor_wym ol,
+.redactor_editor_wym table,
+.redactor_editor_wym dl,
+.redactor_editor_wym pre,
+.redactor_editor_wym h1,
+.redactor_editor_wym h2,
+.redactor_editor_wym h3,
+.redactor_editor_wym h4,
+.redactor_editor_wym h5,
+.redactor_editor_wym blockquote {
+	background-color: #fff;
+	border: 1px solid #e4e4e4;
+	padding: 10px;
+	margin: 10px 0;
+}
+.redactor_editor_wym pre {
+	border: 2px dashed #e4e4e4;
+}
+.redactor_editor_wym ul,
+.redactor_editor_wym ol {
+	padding-left: 2em;
+}
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor.css elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor.css
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,692 @@
+.redactor_box {
+	position: relative;
+	border: 1px solid #ddd;
+	overflow: visible;
+}
+.redactor_box, .redactor_box textarea {
+	background-color: #fff;
+}
+
+body .redactor_air {
+	position: absolute;
+	border: 1px solid #ddd;
+	border-bottom: none;
+	z-index: 2;
+}
+
+/*
+	Fullscreen
+*/
+body .redactor_box_fullscreen {
+    left: 0;
+    position: fixed;
+    overflow: hidden;
+    top: 0;
+    width: 100%;
+    z-index: 2000;
+}
+
+.redactor_box textarea {
+	font-family: Menlo, Monaco, monospace, sans-serif;
+	font-size: 13px;
+	overflow: auto;
+	resize: none;
+	margin: 0;
+	padding: 0;
+	display: block;
+	position: relative;
+	z-index: 1004;
+	outline: none;
+	border: none;
+	width: 100%;
+}
+
+.redactor_editor,
+.redactor_editor:focus,
+.redactor_editor div,
+.redactor_editor p,
+.redactor_editor ul,
+.redactor_editor ol,
+.redactor_editor table,
+.redactor_editor dl,
+.redactor_editor blockquote,
+.redactor_editor pre,
+.redactor_editor h1,
+.redactor_editor h2,
+.redactor_editor h3,
+.redactor_editor h4,
+.redactor_editor h5 {
+	font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+}
+
+.redactor_editor code,
+.redactor_editor pre {
+	font-family: Menlo, Monaco, monospace, sans-serif !important;
+}
+
+.redactor_editor,
+.redactor_editor:focus,
+.redactor_editor div,
+.redactor_editor p,
+.redactor_editor ul,
+.redactor_editor ol,
+.redactor_editor table,
+.redactor_editor dl,
+.redactor_editor blockquote,
+.redactor_editor pre {
+	font-size: 15px !important;
+	line-height: 1.45em !important;
+}
+
+.redactor_editor, .redactor_editor:focus {
+	position: relative;
+	outline: none;
+	box-shadow: none !important;
+	padding: 15px !important;
+	margin: 0 !important;
+	background: none;
+	background: #fff !important;
+	overflow: auto;
+	white-space: normal;
+}
+.redactor_editor a {
+	color: #15c !important;
+	text-decoration: underline !important;
+}
+
+.redactor_editor object,
+.redactor_editor embed,
+.redactor_editor video,
+.redactor_editor img {
+	width: auto;
+	max-width: 100%;
+}
+.redactor_editor video,
+.redactor_editor img {
+	height: auto;
+}
+
+.redactor_editor div,
+.redactor_editor p,
+.redactor_editor ul,
+.redactor_editor ol,
+.redactor_editor table,
+.redactor_editor dl,
+.redactor_editor blockquote,
+.redactor_editor pre {
+	box-shadow: none !important;
+	background: none !important;
+	margin: 0 !important;
+	margin-bottom: 15px !important;
+	border: none;
+}
+.redactor_editor iframe,
+.redactor_editor object,
+.redactor_editor hr {
+	margin-bottom: 15px !important;
+}
+.redactor_editor blockquote {
+	margin-left: 3em !important;
+	font-style: italic !important;
+	color: #777;
+}
+.redactor_editor ul,
+.redactor_editor ol {
+	padding-left: 2em !important;
+}
+.redactor_editor ul ul,
+.redactor_editor ol ol,
+.redactor_editor ul ol,
+.redactor_editor ol ul {
+	border: none;
+	margin: 2px !important;
+	padding: 0 !important;
+	padding-left: 2em !important;
+}
+.redactor_editor dl dt { font-weight: bold; }
+.redactor_editor dd { margin-left: 1em;}
+
+.redactor_editor table {
+	border-collapse: collapse;
+	font-size: 1em !important;
+}
+.redactor_editor table td {
+	border: 1px solid #ddd;
+	padding: 5px !important;
+	vertical-align: top;
+}
+.redactor_editor table thead td {
+	border-bottom: 2px solid #000 !important;
+	font-weight: bold !important;
+}
+.redactor_editor code {
+	background-color: #d8d7d7 !important;
+}
+.redactor_editor pre {
+	font-size: 90% !important;
+	background: #f8f8f8 !important;
+	border: 1px solid #ddd !important;
+	border-radius: 3px !important;
+	padding: 1em !important;
+	white-space: pre;
+	overflow: auto;
+}
+.redactor_editor hr {
+  display: block;
+  height: 1px;
+  border: 0;
+  border-top: 1px solid #ccc;
+}
+
+.redactor_editor h1,
+.redactor_editor h2,
+.redactor_editor h3,
+.redactor_editor h4,
+.redactor_editor h5 {
+	color: #000;
+	background: none;
+	margin: 0 !important;
+	padding: 0 !important;
+	font-weight: bold;
+}
+
+.redactor_editor h1 {
+	font-size: 36px !important;
+	line-height: 40px !important;
+	margin-bottom: 10px !important;
+}
+.redactor_editor h2 {
+	font-size: 30px !important;
+	line-height: 38px !important;
+	margin-bottom: 15px !important;
+}
+.redactor_editor h3 {
+	font-size: 24px !important;
+	line-height: 30px !important;
+	margin-bottom: 10px !important;
+}
+.redactor_editor h4 {
+	font-size: 18px !important;
+	line-height: 24px !important;
+	margin-bottom: 10px !important;
+}
+.redactor_editor h5 {
+	font-size: 1em !important;
+	margin-bottom: 10px !important;
+}
+
+.redactor_editor.redactor_editor_wym {
+	background: #f6f6f6 !important;
+	padding: 5px 15px !important;
+}
+.redactor_editor_wym div,
+.redactor_editor_wym p,
+.redactor_editor_wym ul,
+.redactor_editor_wym ol,
+.redactor_editor_wym table,
+.redactor_editor_wym dl,
+.redactor_editor_wym pre,
+.redactor_editor_wym h1,
+.redactor_editor_wym h2,
+.redactor_editor_wym h3,
+.redactor_editor_wym h4,
+.redactor_editor_wym h5,
+.redactor_editor_wym blockquote {
+	background-color: #fff !important;
+	border: 1px solid #e4e4e4 !important;
+	padding: 10px !important;
+	margin: 10px 0 !important;
+}
+.redactor_editor_wym ul,
+.redactor_editor_wym ol {
+	padding-left: 2em !important;
+}
+
+
+/*
+	TOOLBAR
+*/
+.redactor_toolbar {
+	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif !important;
+	position: relative;
+	left: 0;
+	top: 0;
+	margin: 0 !important;
+	padding: 0 !important;
+	padding-left: 2px !important;
+	line-height: 0 !important;
+	list-style: none !important;
+	font-size: 0;
+	background: #f1f1f1;
+	background: -moz-linear-gradient(top,  #f1f1f1 0%, #e2e2e2 100%);
+	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f1f1f1), color-stop(100%,#e2e2e2));
+	background: -webkit-linear-gradient(top,  #f1f1f1 0%,#e2e2e2 100%);
+	background: -o-linear-gradient(top,  #f1f1f1 0%,#e2e2e2 100%);
+	background: -ms-linear-gradient(top,  #f1f1f1 0%,#e2e2e2 100%);
+	background: linear-gradient(to bottom,  #f1f1f1 0%,#e2e2e2 100%);
+	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f1f1f1', endColorstr='#e2e2e2',GradientType=0 );
+	overflow: hidden !important;
+	height: 32px !important;
+	border-bottom: 1px solid #bbb;
+}
+body .redactor_air .redactor_toolbar {
+	padding-right: 2px !important;
+}
+.redactor_toolbar li {
+	float: left !important;
+	margin: 0 !important;
+	padding: 3px 1px;
+	padding-right: 0;
+	list-style: none !important;
+	outline: none;
+}
+.redactor_toolbar li.redactor_separator {
+	float: left;
+	height: 34px;
+	border-left: 1px solid #d3d3d3;
+	border-right: 1px solid #f1f1f1;
+	padding: 0;
+	margin: 0 2px 0 3px !important;
+}
+.redactor_toolbar li a {
+	width: 25px;
+	height: 25px;
+	border: 1px solid transparent;
+	* border: 1px solid #eee;
+	display: block;
+	line-height: 0;
+	font-size: 0;
+	cursor: pointer;
+	zoom: 1;
+	outline: none;
+	text-decoration: none;
+}
+.redactor_toolbar li.redactor_btn_right {
+	float: none;
+	float: right !important;
+}
+.redactor_toolbar li a {
+	display: block;
+	text-indent: -9999px;
+	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAooAAAAZCAYAAAC2GQ9IAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAF4BJREFUeNrsXQlYFFe2LpoGgQZtVEARjYrigijuW9xIHNQxLsm4PWNERxhw17glE2OIz2U0xnFl1JeYoFGzqdHEMUHFLcaFuCBk3CKIyoAoNFtAoOn5T3sbO/0a6Oqqbsnk/t93v1q66p6qW/ec859zb1U76HQ6gYODg4ODg4ODg8MUDpwocnBwcHBwcHBwcKLIwcHBwcHBwcHBiSIHBwcHBwcHBwcnihwcHBwcHBwcHJwocnBwcHBwcHD8ZuEaERGxWaPRhIk5Sa1Wf7h169bpWC2y9wUr+TPj4OCoLJCMjo72ycnJaVNWVubl5OSU1qZNm0QYuV9403BwcPxOodiyZUubo0ePJn322Wee2NaIPL+hWJJIwDmTsViGcvv3ThSV06ZNG+js7OxIGyUlJdpNmzbFYbWM902OGgCXqKiolY8ePZplbQX16tVbFxMTswirxVUdl5ycrIyNje1QWFg4oKio6HkQNX/ogx+Rt/Lycnd2WLlCoSDSVlqrVq2fQeRuu7i4JKhUqrjhw4f/1LNnT62Ee3VctWpVjxs3bnwJeWqlUlkE+W4FBQVHGjduHDZ48OCHOEZXE9rqGcJ55syZczIyMlairbvMmTPnEj0TaytDe1s1vLNgwQIHrpocv3OoR48enWO600oiV6WMsLCwPiCJp2gHbVshw8fo+i5bcC7JDTY69zdDFJURERGhW7du/VYmEucaHh6+CU5otFarVZmyb5QMifV7TJgw4YfHjx8HmvvRy8vrbyCkS7D6WMa2rTN27Ng0ONnahh2enp7/QCQyV3gGqWMOWdBACvEhsPP/jpJalX4dOHBgUEpKygEQwXKQwGIET1q1Wl2KbRqCSAdxVKA4/vLLL846nU4B3QksLi4Oys/PH/3gwQPFsWPHhoG8HLZSP5XLli0bnJSUtMfPzy9zypQpR7y9vfMuXrzYCDo/NDExcTyI4maK5WpAWz1L1IW9eo1F+1OxoOstkFtIaGio8Nxzzwloe66BHLL6JFPAvuTt2bOnCVZzrZThNG/evMlpaWn/MOyA/UresWPHH+CDvzP44FGjRvmjpFQTbIrSxZUrV767aNGit032N0W5LJMMqkv46KOPThnvtIIs1jJa/5jsG+rYZ+5A1DuSyQ02c26NJorOiJxfd3Bw6Ij1H1CyJV6DIwxgaG5u7iSTBtqPxhuBVT85iCI66vJt27bNjIuL696mTZu06Ojo/bt37+68b9++3llZWQuXLFmSgX2bKDsjl1JC4d6AcqyFcjiDCH86cOBA6gwuVhDFimgJ7dIM6ymWnmhhB641ffr0v6IdFn366afehs4vs4xKoz6ZZdhSTgORkWBlUWGDashPbRhaGmJwwDnJIHy369SpU+Tm5kbErAzkUMB6KdNfyr47Qn9qgay4nTt3rtkXX3zRLj09PRr7z1ihn0rowZhr165tDQgIuAdCeBmGPgFBzu1evXoFw0iGgqg2x3Fu1RHFStrKJTY2tulrr71G919sZltsWz0rKEDmO7m6uuqdLsj5IHJWtiCKrVq1ElxcXPRk8c6dOzbJvNhABy2SJSHjY+v7sGc72QsNmzRpkgqCltS1a9f0DRs2DDp16lQ79K1S6OBG0uf58+cPYskZa4mi83vvvXfl7Nmz295///1w+NpU2JNVVCd88MqlS5fOX7x4MUU8CrJvMhJFBzMkUf8cZWw/s3WtXr16HdN9a5452cZU9JlJBiJqhFT2+zPXj6qIosO6desaJiYm/gVO4ige/vfYR0NZ9fPy8v4cEhKyg8hQVFTUMEQonlu2bNlUjeOoDO4pKSkRZvYbLtRdhgecj5LOOiZFTeRcb44bN67o8OHDPYqKihyhLD2wL1YG4mtA4d69e/2JJNarV68EJJGGpe4K1g2jGXeg/lacW11E5RYaGloARXbC+nOGdpJZhmBGEWwhw5ZyXEwiQTrODcZ1ETMYK7GobP5esFFU6FLNNfiADLaglQEDBpwk/cMqDfVSxtt16tSpH48ZM+ZtkLgk9qyUIJJuKPVBIF8goojzA7DfW2R/dnrrrbcm//zzz2u7det23c/Pr3Djxo1/xPqZwMDAtC+//HKFu7t74ciRIxMt6CPm2kpP/DIyMsIoMGcBoOm22LZSrFmzJiApKWkD7nkAAthSnU5H+l3u5eW1Gk5qOZyW68GDB1dkZ2eH4/cyFC2OcfDw8PgK97UIgW+qFQ6LSPmwyMjIeMgf8+jRI1/Ykk6DBg26J0gYfjZFhw4dnnbMpk3lIIr20kFLZVmb8bH1fdizneyFslWrVr3PSBr198F6Rw8IT4YzM2DD6LqljBISB3io1WofM19LHCML5d8o9UpLS4uYH8yWkSQSKbr1LBoUZPuYj4/PWQnE2pCV3F4JaWtWE/TcHFF0fOONN/rA8EVpNJrRcFJXnn/+ecocOlO2DQ0zAs6obPz48Vfo4KCgIA8Y4oUgXdF169bdjLITUcNPIoylOyLmAjgn0/13ZHyeRBRvFxcX68lnWVkZkbULa9eubU8kEUTucVhY2HmWnZEL5SDZrWmlXbt2KSy7c9NaJUSH+bvJerCF0Yol0L700kv3QRQNUVOuDWSIvXarZdhJDh17HqTts4cPH/ahHVjP27x58+gqyKKlqFNSUmIgSNRvjrI6SafaghA13blz56YzZ85Mg67tYX2K+q7KGcAyEn2dMn51xGQCFixYMC8tLW0JyOlFBE4OBw4c6Ari802fPn0y33nnnc9r166tnDdv3nZvb+9kMfeINmkKXXiOHBKIpjvshwbk+sUCwHQbBE7Xvn17MYGK+61bt7bQPM7WrVvfadKkySMEsm737t1TFxYW/gm6vRX1+yCYHQSilQ7yq3F1dS2GvfG5ffv2aJzrgTrGMBshBrXxjOq0aNHiLEp/2MvGP/7445/QXkfkzCo2aNBAACEV+vXrp88snjhxQnKd9tJBC2Rdrsn3Yc92shOIrH3LAs76sBH6BI3uyadP6LopmeEm0X7RSEcmVPnfzNeSrDSWqHGHTpIPviZjQkbvs/CsokG2lhh2xMTEpEdFRfnaukFnzJgRAtlRWM2R2JcryyjWCP0wJYpuERER22F0+3bs2PH8kCFD1sP4/os9ZHJS6uTk5L/07t37NHv4uXCOV1BWw2n5I2rvCcM7DRH6cpCwNRZmGEsHDx58/tixYy+j4zraQ1uuX7/uj05FUYDQqFGjgokTJ55s2LAhNVChjGLq3r17txetBAQEXGRtaG2kpsH1zmYPf0Bl0YcZ9Mfx6yzJfhKJxbFTWGRUIU9GGYaOT9mlEzQng5TDwnsRI6Oivdj8Dg2LOPfJLMeNkcQ/GnbQOu1jZFGYNGkSZcmE7du3h4l83k4gNnqyBHL2kD0fQ+BVV680paUe6Mex06dPf37jxo00N46Cn3zwriw989dqFSy4swS15s6d+7/379+fC6JzFrKVcXFxwdCLw506dfoRJG4tzVEcOXJkPEhqAo6/IYgYPUCbUOBI5JIy1uply5aFRUdH7zE8G5NtcjSBx48ft7T6htnZ2X38/f2zUUc86RmcUZ34+PgOGRkZ+StWrPizo6Ojc/fu3a+BRCpDQkIuY5uyGk3gSF5BMBwiPJkgLoYoOuKZ9rtz585Y9Kuxhp0gn0MoayIXUVSr1TT3keyVnijSNpFF2pYAMbotGOmQxkLHJWbIqz/KbCNZYoZsDbbkKxH6LUbHRbWTBFtlTxQa+TjPan6v6TB+85iybpcN09Ww/BrbV7F8JMg7BUBjQr7yUE4yvy5pFMEGGUVZ9dyUKHq2bNnSEdG/J5xGRzyEPDicm4GBgZQq1h44cKAbyJwvTUrF9j3WUDdg1P0uXbo0AI6yo0qlKu/SpQs5KJWFziTPx8fnfGxs7IfffvvtS7t27fIBUbXpW3zBwcHZb7755uE1a9b0RbTut3z58iEwwJeXLl36vVydmBxtfn6+2tXVtWzgwIFxEiMotYSUsiVzNDzQqc7RSnh4eHdcr6cNZAiGTghZlyS2gUXHMjLqKbLNLJXja0wSjckiosy9eqtbWBjKiJIbyONmMf3HsALSpgWxMR6icTTJOPkxo08RvA4RvN5gKRQKnXE9leHGjRuu27Zte4dI4rBhw05169YtBYRr3Ouvv/45dPlnLOeAhKUhcMxElD6ybdu2Py1cuJAyDmKGjchg32XX06CkpIRIbQYrptt0/Q1E1F2PEWrqW/tRbu3YsWMCAs++7PeKZ+Tg4KDLyckhZ0L2qz3OGZyXl6dmdYgZulKlpKS8sGnTplVeXl6UgWmMZzwEz95z9+7dIePGjaMpLFqpRsRACoks0pAzzVFE4C6VKIqds5UqyD/cXNW5l0XYEsOxwTZoA7Ud2tjqeWRWkOtKZcGnO+G3U1bWKwY6Z2fnfEHakLO5N49TDIQKSxrppJLI5GRbK6MS0mYIToz7oeTsqA0yirLquSlR1M6fP5+MbeYnn3zS5uTJk/1Onz49HM7hlcWLFycgSp/es2fPYyybSA2pmDt37uR79+4ta9as2dXx48ef6t+/P6WVz4lg2JSavkoPIDQ0NOuDDz5409ahCJsncRFO8AGuPxzXr7p79y6l4cmZ35dBhNv58+eJoQstWrTIYg8hX2JHsuXQc73IyMj3r127FgSi/gmI4hQbDT2bKqDaQjmXrVUS9kbaABvI8a7sh8zMzFBT8shIjMVQKpU69FOH7OzsWgik/j+z9/DQTZkyJQn6aGy0BDpezyZ/TS4rJaRXrlzpmJ6ePhUk8QT0958nTpzwBjmlQMc/OTl5aKdOna56e3uXov36NW/e/PrLL798UxA5RQMcuQ+Cz+eNhp4F2JkpRkPPFdtWDD070XxD3DdlK2n+Stqrr756HAFaL+xr7uvrm492VOCZqPz8/K6iP1xg+ugOAkZvjDuIyLzq22znzp0dUV8XkMR3maNoHgTAPjaHvZwHoviVHM6D5idSJtEYRBbpxRY4d6m2RPZpJVbUL1mWLe/JDvehroQgiHHuakuJooksz61bt448cuRIY+hf+UcAC+bE1muWENatW9esv8vPz28gUS3012/mzWMDWbxslBmzFpW9Qa0WbDS1wAYZRVl1wpQo5rBUahqcRnMUXziOOkVFRaqvv/6694MHD/qtXbt2CutQNESk7t27dw6i3JWBgYGGrEEK62iWprB1TO4FQd43lCoFm6NIk33qqdXq0UQUnZycyMF6yUQUPdFW3WmFnCsWDwRpE4RtPfRc0L1790sHDx4cuX37dnJ+ZTYaejadS0L3tVZmGabKEs0UcbbMcpxFXoq3iGPL6Q3n3Nxcl7y8PFcQRYVRhkqLbc3s2bOv+Pv7f4btU8LT+TEKOl4fqTx5Q7q6YM0JutARpFIBXafhmuNdunRpDGPeMiEhoTUIz3cIoHwPHTrUq0+fPokTJkzYCwJ2RxD5ZQAbDz1rQZ4e4Dr9pk2b9n8gfrdAotVarbYZiuucOXP2gNS5o/7/gU4GXLhwYWFhYSE5sfY5OTm1AwICxE4J8UR7fIN2U02aNOlv0Jceq1ev7ol66U1wISsrqy0C0PVr1qwJFyR8BouyiTQ3EURev03kMCIiQr8kAkm/SbUlVeiM2OFmU/Ji8ZCwRFnWyKxJQ8+GrKi19y2GEJnKavj48eMX9A5YpyM7QaM8SVbUazYX07Vr19sNGzbUpKam+u3YsaMTbEfqwoULZ8Lf0lQaKSOGVb15THZS6jcGFdBvXxBRW79BbeuMoqx6rjST3aNsIQ0B0VBMI0S0NLSSu3Tp0jlwIscYGcwyGOlXXnmFhmv/xSJoIlm5VpKiEsG+8yPKYMy73bx5sz5t9OjR46bEDlzR0b755pvg7OzsxrQRHBz8gyBxoqtg+6Hnx7NmzXoTBKFZVFTUwpiYmLk2kFFhrIw+faS2gQxjRdgvJRtZ3b2IjNjETBAv8fb21oAoNti/f//Q0tLSWyCA6SCIOSA+j5YvX/42yFCm8ORFl8wVK1YoiouLvRwcHJqCIL5EFdSvXz9XqH7qh7Jly5alCAKd9uzZ4zZ27NhbKpUqZ+jQoTtCQ0ObIygckZiY2Hn48OFnRowY8TWCqZMsayf26wbGQ8/euHbStXQWQJluix16zp48efIBOKOXb9261RPbPR8+fEhD0QU05QNk8Z8gt66wXa3i4+N7wzm2MMrYPcA9fyVSPz127dq1EEt6q5zmHnvOnz+fyPp7KG2EJ1NyDgnWfQarghQicKP+W7GPMog0/EwEkogiEUgrs4qW9O9UCZkTsUPCUmRZK7OmDD1rBPu9/GIqy1+j0ZQyomh4meW0TLKo3vvTp0/fu2HDhpEHDx6MpdK6deuD77777geC9Jf9fgW53jw2BIKm2Up7wAYZRVn1vLr/enZkmRN6e7Kt8GTe4RVGJo1/L2edQ+pnIfqjweINmSDKPFEGjTIdEuv1CAsLS2CfDPl1r/D0LOrbt2/G+PHjN2DzC+Fp+t0a1JoxY8bSzMzM+cY7IyMjg0JCQpIF6+dmkPGbyNap/TuIICgfW9AZ6LtZL1ImR3gyDYAce6jMMow7cH9GeDUW3otYGcFMRirrO01Z+0mVU9E/JUaP1fXp1t9//330+vXrR4P8lTs6OhZiWYSSr1QqH9MHuKG3RSA97lgqy8vLPbB0wdIVRUUf4J46deo+BHl/ZUFcpZwEdfRFYPB2QkJCBy8vr/WdO3f+0NnZucnp06dX5uTkBEFvvkPfPQzZp1i0XiRWl23cVjSXirL3dJyfIYBlffgH5vyc2O9dUWozu0W6SKMfdI0JFjoZi+eU4bpF/1GA4Z9ZZs6cqSeLhNjYWCEjI0M/BE3k0RjoH3qyKPKfWYKr0QWxulZTZMktM9hCm2GPe5IbHpMmTfqxsLCwpfHOoKCgPyxevPiYIMP8WqaXFLj1RnFl+njbKKtpbbbdrF2BvrViyS2pHIRGBugly7cMOwxvUMvERUx5zgDWHv0rySjq/ZfJ8cftrXvVEcUKAiQ8/dRGriDvP5hURYgMNyRV6XzZg+jLSFEBy144s6wqOVNSkOsS743aiD5ETm9SBrEMJWV99kvsxGqjTqRh25ZEDIaUcnXDCO7MyRrmpVD71JdZhun9qM2syyVDbXQvGqP2kyqnx7Zt27bHxcW1traDDBw48Fp4eDgNM5yt4jB6ueLFlJSUMVevXm12/fp196ysLBWIm3tJSQkNFztSAaGjf2rRqVSqYnd39yJE1fmtWrUqROR+r2nTpp+CVNKnMB5WIYcyfM1LS0sHHj58OOTQoUOd4DxcYBNq4VzHWbNmHQwODj7C+nCayEyivdpKwcgf6Xhdps+kZ/mMqD1ix9C0Eh8W7Dqwe6Hf/s36uyW6GWzpi1gw6B3F2i07/YVfdbpgjT7XBFlyy7TUZtjjnuSGL/NR/ZndL2Q6dpj5wBIZZCiYP2zESKP+szlMJ6X8M5kpATK8ebxPkOev7QyJjIk06sWylTQtjkZRj8oUAFgdRIsgirLqnqVE0V4wJUSCIH2+hD6CYgpRX/j1RPxypiQPWJFKgIlQN2DF1YhY07yuHEG+D4xyPBtQ36Qh836CdUNT1I9PsMAhtYrjlIzUtBOeDHH6MGPrzrJjDsLTaRJa4em0jRxmjGl4OImRoOqmgbgKT/8iqhHTD0PfpTrOMeNeWkPbyp6wNMv0W8gqcfx+Yc4fUmB1lwVPkjOKIEK6agiPtdO8zBEgucm5gSx2Fp7Mrb7I7Gi2TDJ6xMTExMbHx7cUc1JISMiNyMjIidUEzjZBTSOKHBw1GS5GgYCLFecbfwamuglmCiaDjDplzNxYIKI0Mu46ZtTLWJDzCzP4Bax+Sw2+EyOilHVTMdmFjGjmWOk47NlW9g5k5c6Ac3Bw1CyQjtMIRS6zgeUy1t3MKIi29E8Rco0C5xR7N8Zviih+/vnnFRc7atQoB96XOTj++2AvPef2hIOD4xklHGgKnI+IIJqC5UwWvNsscK7MJv7mMop0I9yoc3D895NFe+g5tyccHBwcVdtEPvTMwcHBwcHBwcFhFpwocnBwcHBwcHBwmMV/BBgAHTxEUMWGlxEAAAAASUVORK5CYII=);
+	background-repeat: no-repeat;
+	background-position: 0;
+}
+@media all and (-webkit-min-device-pixel-ratio: 1.5) {
+
+	.redactor_toolbar li a {
+		background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABRQAAAAyCAYAAAAtK1dkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAKodJREFUeNrsnQtcVNX2xzfDG+QtiG9QTE0rS4pMSVHDSjHN0Ewty/shzWumluY/zbTuVSz1qper9dcempl6y3c+/4Wamc98hyGCPARF3jA8Bpj/Wsw+eBgHGGBmzjnD+n4+mzmcOTOz93nsvfZvr72XjVarZQRBEARBEARBEARBEARBEMagolNAEARBEARBEARBEARBEISxkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITRkKBIEARBEARBEARBEARBEITR2NEpIAiCIIjmwejRoy36e1u3bqWTThAEQRAEQRBWCAmKBEEQBEEQBEEQBEEQRJ00dXB669atnvAdOXzbC15y6awqFxIUCYIgCIJoKC0g/R1Sb0gOkM5D+jekTDo1BEEQBEEQhqlLkBOLbfWhRDFOv3y4bYFyuEyaNOn7goKCCHP9gJub247169ePg011c7ufSVAkCIIgCKIh9IG0CVIgpOuQiiENhzQFEhpTh8z8+45vv/32rIyMjH9IeRL8/f3fX7Vq1QrYLKNbgiAIgiAIExDQwGPPy60A+h6IsJ2rv1+MBUTFtuYUExH4/hHw0obbxc0KEhQJgiAIc2Btoo/tBx98MDA1NfXj0tLSHpWVlS3MmW+VSlXo6Oh4pU2bNh8tXrz4MOwql8l17QdpH9N5Ij4F6QTf3xXSNkjfQ+rGzOup6Cf1fYVAHpbAy3eQUuhxtz6WLl2qteTvzZ4924bOOkEQBLF169Z/wUsv/i+KcL1qOdRTpkUI0Ns+b4TnZdVxZsqPr4XK7cdIUCSEjvCUKVMWFBUVjSgpKele593p6xsdExOzADZL6bQRBEHca1StSPSxf//99ycnJib+S6vVqiyRbxQsi4uLQxISEvbBb7+9ZMmStbBbI/HpFIuJoZDSRO9dgxQJ6Qqk9yHNMmM+WsvoPm/NSFBskr311ltvfZSdnf3WyJEje40ZMyYJ9mnptBAEQRDNFGwHv4G0k+nExO0KLINY6PSsT0yE9782c34c9H4PhUtTeEPqi70OzfGGJUGxJjYbN27scPjw4f3QketWyw3/ZVRU1Jjc3FxX/D8mJuY3eHFi8hIU3ceNG3dFo9G0M/oD7u4H7ezszqxdu3YRk6c4avvxxx8PvHTp0sG6DlKpVPnff/99B9jMo9uZICTFakSfnJwc/5SUlH9YSkzUB387MTFxV2Bg4E0Jz6FYTBzAdGLiJEhn2b0RZRQVr7J7o+rmwqUBhqHDwYMHW4eHh6ez+r1U7Y8fP+7bt29fLKPGSOPRhR71JuGnVqv/VllZ6R4fHz8V/p/PdFPoCYIgiKYJHTlN+QLoG36/bt06bOfVcs1/586dxyxevPhH7CdOnTp1YWZm5hz9Y5S2PAmfHny+IWspKvlehHLuYDrxNMmCefqGmcYbspcFbF7ZQ4JiTdyOHj36Y21iIqdcpVLZiv7HKSolMiuH+6ZNm97FG3zOnDmvQ0e0lfAGdEhvR0dHb8RKddeuXcHQeeoF7/vl5+eHw77w1157bVSPHj3Gzp49+wL8XymjMtnOnz8/A16nbd68+eXt27f31Wsscl599dUDwcHB++FfD2ZZQdFgRcnXgmDmagzMsdYEXyQYgywcgu/3NqVhYsFySNIAUznuoyGijzmeSVOJPnb79+8frNFo3HhdUzFt2rTELl26oEBVYab8q27duuW3ZMmSLhkZGbb427///vsgqL83MGmmPgtiYjbTiYnJkBYznSfiXD2jzFmC/NVlGHqlpKQ8C6/YNtT3PLknJSWF9u3b9xhs55PxaH4b9PPPPx+lVqtb4j+3b9/G9Y2WMxIUqQ2xYPmUll+yTQgjCRA2hgwZcmbSpEm4dAo6jLhFRUW9KTjG6L2viY+Pb7du3brnse8IoGOKD5NIUIRr/kZWVtbjCxcufBlsIS/hDScnJ82HH364OSgo6CT8Gw/JHpJDTEzMT2inrF+/PvLAgQPBvFxbYN9xSI5MQesdW5GYyOrysORiItpwsRZ+vs9DvmKbcH2oPRcbcyYSIIzJkKMwciBME4bPlkpwQWo9FytXrnwlLy/vsXqOu1FZWSnuROYx+Xn0YUcIp53Zd+/ePVMsKKpUKrzmcZDShw8fjikzOjp6+NmzZ6s6y8XFxV2vX7++HjYHyqzhxnN+G8sVHh7+h76gOGbMmLjg4OCjvNyW9k4MaOB+U/6uqdeaiIKEU0S9LFgWU5cjQKJ7lMrReNHH1JhS9HEA2gj/ODs7F3Xp0gWnH18yo3Fq16ZNmx7wW+gx7s4z0ZobxJYWFFFMRM9wYZqzWEzEqeSf6h0bBGmLhfNYq2EINoZfamoq5uk4HHOnHjvFOykpCcWtX+HYbHMbkcbaT2Y0FKVu1z3i4uLGCf/cvn37gY0bNw6aMGHCd8x8Yr1ZCQkJqUpffPEFKymRfKzZ2toQc5VPafkl24QwSoDAPyNHjkwbO3YstuGneP+ou55jDNMC8PIHpGywb9pBv9Bm5syZkU5OTtg3dJYo/9gHveDj42MH/buwPXv2VPdL2rdvrw4KCkLHl3PYn2W6GQXoBIOzOJwmTZrUCgVFeMV+IR6XyhS0NJkR04OT4P0Apd+gEoqJDTrfBo6XYnBD1vWunYUulM2xY8e65ebmToNOUcl77713iVdQcnq4W6jV6gFW0oigoHgZkrqoqKhGB6q8vBzP+Rmmm5aGD0TcSy+9ZHv27NmXq2vw3NxHv/rqq+def/31rTIy6jEfWJbSTZs2TRC/gQ1L3759v4XN3bxhsXSePRu439y/2+R+Lrs/Squngsoh1QLFVI66Oc+NBpMJKhYSROzs7e2dhH80Gg3WoTjafRryX2Gm/OPU6nz+W1XwPNha+F4QxET0Dsf2UV9MfFVU37ZlusjPKDyulFmb2BBve0naPLSTVq5c6Xft2rU3wRZ5trKyssZzaGNjU+Lo6HjZzc1t67Jly/bDvVdu4DvsZs2a9WxBQcGo0tLSntBHdK1xU6lUuc7Ozj8/8MADa2bMmHGLSbtWoWrXrl0haWlpweKdly9fnsjbckV6Ij3yyCPoPcO6du3KLly4IAtBwYp/17OZ5pdsE8Kods/Dw6Ng7NixXzFdwLRrvN9drOcYg84kKKb8znTCGw5iZjz99NO+f/zxh5+E+cc2AEXOgsLCwleYLtib0JdFL/ZfeX9WaN+xTbzJ7RXUGGZCOsqTNYmJKMIlQXpHyTenXMRETkAjjrf04Ias6107E90UNpMnT/Zeu3ZtNjwEhgxU58OHD78NnSOX/v37XwsICMCRf423tze6UWczeSzA7QqGtpuVNSbl0GjU5s2Cozko0J3u3LmzP5Q9EhqU6s7qrVu3hsHLXlb7tC+pcE5JSanhRcrXFTvPG5EKRjSFLyB1otNAENXYIKL/tdw4rbeuEQxDHM3ka+IY3RHgdbRWnAmmW2LDUvRnumnOxoqJOE0Yl0nA5TMyZXYNtQ04rtLSNgncH/azZs36G7S7n1ZUVLjWdhy00Y/m5uZOeOONN45FRkaOhnQbbS60wTZv3uw3adKk7woKCgbW9VtqtbrPqVOn3pkxY8YHK1asWMOkmwLmcu7cuZeGDh16JTY29sGioqKqezstLe2pkydPdgkJCTnDFBacpWPHjszTU2d7d+vWTQ6CIkEQzRc19LfRKzGW3RMTjbE9qoS8ESNGfA112BsS18NV9ha0izXaKejbVvLyGBosxP3CTDU5ziKs12as431BhEMUKyjKTEwU8iSOql0X5CVtgKYKig6+vr5vT5w4cZRWq8WH+jlmWIBqmZycPAI3Bg8ejGs04HoHdmAc74LPqlxdXX+IiYlZxaRd28AWaI5rShagDc+vX7Wg6OLigusQtmDyExR9MjIyaqxx2bp1a5zCjdOhyyXKU66Biqh6vbgGVFINwZLr0dVWRrmWw1x5pXIQDSUA/zRSVJSShoqJaBT6chsAOzDoGbCXd2LMTnR09Kt+fn59oR3TqFSqct4WYJtWNm/ePGc3NzeHBQsWjGrTpk0BHIP5rrSxsdFCquAdEy18jsExTnCsHbyGt2vXrmq+KhxvozuE2cAxqm+++aaniY1Yh7lz505PSUlZauxnCgsLQ/fs2fMbtNOh8PlbsbGxOL3rV7Va3dmYz6NomZaW9q/33nvP+9NPP/2nRB0un8TExGHTpk3bnZub2+r48eNV6yiWlZU5QXnGh4SE4CwLRa2l2KvXvaoaxUV/f3+MMi9llqy9DTFF+ZSWX7JNCGPJ/OCDD3DZlJuNqOPR2ecCtIWfMGnWT2zWNmMttoJYhFP0Os5gC6MmNEJUNqnXR01i96Jq11v/McsGj1FEvdsYAU0FFUyP27dvT83Ly3sFDNMqr75WrVr9BS/oGp2vbyx/8sknbxcVFXmDgZjctWvXX7j408rd3b0lrpkDRvCTY8eO/dDDw+M7+J6YhQsXXmGWDwhSFhYWdvrYsWPhza32AuO9dUlJib14X3BwcLwMs2oL99NTpaWljsIOZ2fnilGjRu2TQ0Wk0Wh2VT0g0DG1tbXNESocyO9G2LfLlD8IHdw8R0dHS1ZoSQoqh6HrUT3CCvtN7uVlznJgAwf1rCBq4NRXrcLKUevzHBQU9ERWVtYrxcXFA+H+6gK/HY9TMn18fL775z//eaqpU4plgKfIgFKKqCgWE3HNRIzmXJ+Y6M90YuIJSDi9agLvkFhEUJwzZ85ppos2XWkgOa9cuXIIHINCZyHTeTyIExO9Oq1evbrfu+++e5HdC7Zmo/fquHfvXpPkG+4H1VdffdUnMTFxsXj/gw8+WB4YGKhu2bIl5kELz7rdtWvX3CA5FBYWVh0Dz0zgoUOH/jN06NC/7dy5c7VYTHRxccEpt2WQCuGZqhpoy87OdkpKSnK+dOlSdVufnJw875tvvvnltddeO2phm8s+Ojp6XLt27a7Bs37y4Ycf9j1+/HiE8OaNGzdehJel/N5TxoPu6Vk1zVkMTn+WWFA0a1sotEWW6mxB3akSnld4drT65WtsmwfPVPKGDRtqLCdx4sQJ/I1Kc1yP2jqtSrNNrMDGsnbu8D55YxZzxRkSOP35LpNf4FGrBuqdr6Gum6i3r1pMRBsS/hfEJcasQ2gPYBJ7/sF5/aMB18iL2vOaNERQdJg6derbYLS+VFRUFCLsBIOw6LHHHssIDw/fVsvnfBMSEqoejOHDhx9gurX7ivD/+fPnbzt48ODL586d809NTXUDg/dNTK+//vpJMIj/a2GvxcKePXueAwMw88KFC77NqO5y27Fjx3TxjkGDBiWHhoYe550vOeEK91KN6VxBQUE4te4Gk9iT0lBFJFQ4EyZMOGumRseiFZqCyoEV4HmoHMWVq4cg6OD+2gIuyO164H2F3wuNRh4kJhY/oBxeSimHobZr7ty5o+/evft+Xl5etcdXSUnJg5ig8zAA3l8CedkKZdRYS2WrAFFRiObcEDERX3EgTiwmYmCnry2Y70yeV62B5FGii46B5zyP3S8iio2oFmVlZaW87TPU/mGdUmDCfLe4evXq+3C/Vz/cUVFRKYMHD8bp4zd5fvF8Y5RyDMqDwYFa8Dzf5NfKa8WKFZv5sQE8j2hj4RqJ6Xwbvx8HfzvGxsaGrl27tiMOUGi1WtXFixfnwf4XLdyGeiUmJo555plncK3eS2FhYeV79uwZlJKSUhWNPScnp9233347aPz48ZuYQpYxQTHxyJEjVQFZcA1F8T4pg7M0pJPUyLZCkujIFgpoZOry5Yo7zUIZzB3N1Vy2iQRCixcjGkIxa5qXd1M/TzRONNrJ64QR/L6vISaKxSXRthwx1qNODlOIAxpxvMXzLef23BhB0X7mzJmvp6enfyZ4I3p5eRX37t0767nnnktu3749ijk4mo8C1B29zKF34oyioiIf9E7s0qULGo9pcEIq4b07fn5+P4HBmAfpYTAkO+3bt6/D2bNnfcCYDEHREr0WW7du/e7y5cuxk2LuTiW6dF+bPHnyliVLlkTdvHnTwcorrSqBGDpPY4XI1q6urtoXX3wxOSIi4n+ZLoJpkczy7JGbm9tDvMPf3x87VbctcH80piIKsMDvnjdxhYIvN9j9a7UFKKkcekKB2FhXUjkCxCKUgYq+o8Kuh4Dtp59+OjA7O3se1D3dDB2AIqNKpZoHx92Fsh+2Ak9FsUEgV1FRHIClKWIiRn2ea+G834XzmVZLnVZZUlKCnaI8OOZuPfWfFo5FQbGgtusDx5hSUPSF56B6gLZPnz5ZgwcPxnVsf+HXAfOCU6LnJicnj9FoNPrrPL9Rq+Fmb1/Url27/0ZHRy/i34Oe/f4DBgy4euXKlXeOHDlStdh+VlbWE8zA7BIzgsFYgjHozKhRo9AzMgF39uzZMx7swEeEgy5dujQRXnYxhXhfoDfihg0bqjwVcRuRQXAWxdkgEpXD2stnFtvECq6HWYVcc3XcCeuFex/G8vtEuEfQo1ksJgrHyX0tvyRm3DRiqaYQ6z+Xcl9DUdbthDGCopu3t3coehDiPyNHjkwZO3bsSdj8k+kiCSdywzeL3T+S0RIMxDG48fTTT6PhiN6Jwqh/Ac94Cj4o7du3D4yKikJPle6bN28O2b59e3sUMPG3Yd9/mW76lDnBqQ3JPj4+O6ATa7t79+5hkPeWsbGxztZUWd28ebMNVET33TAPPvhgab9+/a5DZwYffvQkTWby8wzwuHXr1gN6+caF2/Mkzpe1RXm29G+Z9bv1DEZFRquuRVT0VOh91eLOnTtTc3JyutV1EL6PxzFd5EGpn3FTG405MutUmFJMnE3dAqPxUqvVHsI/nTp1Ogcv+yFdhHukDKdEgz0UmpCQ8LeGfrFGo3FNTEx87csvv9zyxhtvHERRHr4P7a2Sjh074vV+Ho8rLi5Gj0dvC5bZ9fjx46/26tULvTBvcdvOcejQobv27dtXLSimpaX1UUpwFhQNwbaq8kSMi4urFhQR3JZQULQWG4SiVcvUNlH49QiQqBxN6rg3wu69v+Hx8qrRX8flviDdrEdwISHUhIg9k8WDzCJRMYkfmqSg9bfFdm5uXfc5d2CRC3iu5b6GoqzbCWMERScwcivi4+MrMAowCn0HDx50bdu2bTakvVOmTPkDbppyAzeK3X/+859ROHWlc+fOWY8//jgayVXeifxGQwNRDcehZ2D6mjVrVGBADoI0ENdbxGNwfTz8bcyDhS4Wip1ovBZGRESgh96Db7311iOQ11BrqcD69u2bOX36dJyeng/XJnD//v39Dhw40Prq1auOkHpA52NBhw4dipYsWfKnzLKO6yf20V8/Ecrzm7WJDRJW/vjyOaQovgvFhGiZVfomNaoUdn1yrMCgw3ZhaEZGxjPGHIzH4fF86nM5b1tsoqOjAxITE/8+fvz4F3BfixYtdgYGBv57zpw5SUwBkWGhDAt54y2Hayme5jyA6cTET1j9YqL+monWIiZa8v5xsrOzq6yoqKhaGy49PR07eekoJgrt3qBBgxzB5ioBu6jBdhC0kZohQ4bgdGdMFbh8ANx7GWBnVc/Btbe3R5vM0ULltTlx4sQDqampEfD8usTGxo6r7UAMzrJv374pISEhf2cyDwqAwVh+//33qm0UFnHdRAzIguCrDIKzEARhuC2WIsiBuQmot0Nla2vfyO9VSoTbSldXVxysqpRp/mr0T/RnrtQnxsm5P6WwAITiPpbc11CUd+fOiGNKXnnllV2Q7Hbv3h0KRpNHfHy8919//RWFCf6P8/Hx2d6tW7d/T58+PZ0LhVU335UrV6bgRnh4OHY6UKAqEF0Mm5UrV7aeMmXK39Vq9cji4uJqb5UuXbrkPfnkk3kRERE4go1TXiy1AA3mHcUpvKkSeccJO1hWIyiWlpYW8E7gLS9g7Nixf0FHPGL58uVVDWp5ebnrjRs3YubPn2/38ccfr2HSTiUW0wLup+HiHUFBQXd451fqqdnWEuW5N6RIpvNW6cR04jpOv8thyoryXF/jZ46yWCQCoZ6oqMRyuGZlZT0P9ZCTkfWVEx7PdBGDhYED1/T09I+zs7OrxQjYnunk5NQKNicz+a39qm+I7GDyiViJ011RTMxk96I5o8D4AaQtrG4x8VdI65j1eSbaWPC3Kjp06JANNlXV9ONTp0493bt3b1+M3MxtqUo/P7/sVatWbTh9+nQ42ElGz5hwdHQsCQkJOeTm5pYpdKrQ7rpw4YLXmTNn+gvH+fv75zHLzUZw+vnnn1/p3r17wrx58zBIDrbhZfyc+0L5wz777LNqWzAjIwM9YH2YjAVFnOIM57pKSBS4du1ataCISBicxZxRISk6cvO9TtZyPZKY8V5JJjt3zALeTfVcHxdoX54Q74iMjMyG9Fcd/W2lCIkCGt6nl7IPW8MDUXT/GuyfyHyN7YAGHqu0+yWgEcdbuoyybieMERRRgMKh1+yIiIgzkHokJyc/sH///sBff/3VH4VASHMvXrw4GI7BlI/eiatXrx6dmZnZHb0Tw8LCsLJO1lsHyw0+s6OgoODxKivTyUnTr1+/jGeffTYRDGys1K7wAv7FTLsIujGUcUMXUytmRUAHHTvbaMhjFGfsnFxG8bZ9+/ZdU1JSqjsrsD0f60Cm81qRA9537tzpLd4BBjt2frOY9FOzDRklYqPBHAaLOYwSDLoiTH27YSHDy1zGVYCFjUhLusALDZkSy+Gen5/foMaQH+8OKQ+ngP7www/B6enpY/WPg32vLF68+MTcuXO/kGv9ayBSn6R1Kr93UFAawHRiIiJ4j05jNcVEHOATojkLYuJESMuZxGLi0qVLx/v6+j5pY2OjgYR5Lucdicp58+Y5urm5OXz44Ycvtm7dGm2JSjxGq9XicVqMkgdUCW4fffSRU4sWLRzg9Zm2bdsKU8KqBEb4jAqjrW/YsOEhE2Y9/4knnrgQHx9fdc4LCws9165d+8OPP/74P6Ghofu47ZMA+d/YrVu3hJ07dw7LycnxgbzYYKZ9fHwy33zzzSPr1q3rB+2jv7Afjs8dMWLEXnj9lbf1FfB97vBsPAN22T/gmfIRMtC7d28c7LWECG8TGxsb9Ndff42fPXv2l7y9Ea9p6QTnIh1skbmCLZKdnd122bJlE2fNmrWEyWdwswaGpjTj//37V2u2UgZnMadgYsk2z2qFH4VeJ2u5HnLzArPU9cE2rIaguG3bNu/IyMi1TBfsS+rnoamoDh061NbBwUEtcf8wwIDdXp+nX4Bc70k9MQvLUZst76nEh0YBayjKup0wRlBEI+4WN/ziILXp0KFD56ioqEcg9QAD9+GTJ0968mnKwsLennFxcThNRfBONKR8+oHh7t2qVavskJCQ3BdeeAEDu6CIiJZZAru3tk4ZI8xB1ZRzfq5PwnVIx8A4wptqtbrl/v37n3z22WfRQ1Rql3Gby5cvB2ZlZbUW7xw+fPhPTOc9Jzl1RXk2V1QmM7tc47TnaPH5VVo54Hu/hjxPNPZ6yfx6VJdJ4eVAQbFtQz6Qmpra7c0339weGBi4csGCBerCwsJpGJ32vgpNq7WB99CL+XuZGiuGIvVJCU5pRoEQg4Iki/YLg0g4gINLlXRgOs/E2sTEWVIXZPbs2ehNfYa3VZW8fRO2nVesWBE+Z84cDHRSxAxHghbaRKfVq1f3e/fdd3HQTaz+2IheXfbs2WOqrGeC7fMj2FB9rl+/jmsZsoKCgk6Qvk9ISMB1rWpvFG1stBMmTEDD8nD79u0ZdKDm4zMgvA+ffaq+H4dnSv3SSy/hGtWZZr5EtgsXLgxLTk5eW1FR4Q7PKXZaD+vZhWiP5j7xxBNDwRapDlRz7ty5uZ988knSvHnzMJJ1uZyeaQy6goIivg4ZMqTe4+A6y8I2aUybYKjOsuCASG3Cj0mWNZF6KZHapjeaKvozRXludtQnlFbiGoo5OTn6Hu/Yxz8pw/JoXVxcanip5+bm4iCzqpbj7fPy8nzc3NzuStxmeOpt1/k869v3MkMsZmE5tlvZMyMunzHPV5JctIbGtuembr/tGnBsGe9ooNcejnjj6HIgGMMPQeqYkZGRyTOqAmP7SfROxAorLCxsN9MtKHrfQz137twv/f39fZluRATXLEzkhm0Rk++6B9YGXpcsjUajH1CHQWXsze8RqUVdhyNHjtRYc61t27aFrVq1QhFaDoJiQAP3m/J3zTFSEsXFhNEWKos5yoGV/U5ukI+w0HUx1/UQC1I7RQ2ZEsvhUlhY6NaQD1RUVNiC4dsb0oZ6W/nc3J5MhqOjMhQTEQyYhoLhKb39KDDhGo+omqF42Ie3AUIAFlmJiRzsOOAgpCGh0L0MYLrBzlxWU0BketstSktLcRC1kN3vtSeIdaacMYHt15np06dvXb58+fjExEQHYz6EXpVwH50aNmwYXo+kIUOGnITn5NimTZtCoS03asp2UFBQ6TvvvLPN3t6+agaKOdvvWbNmvZeSkvKJsGPZsmW4nMoakZBjB/bgiwkJCVv0Pwzlcb548eKGyZMnD1+7du1rTEbTn9HzEKc3Hzhw4L73OnbsyMaMGVPjWAkExQATfo8cvWaofNKUL0DC82GNHoWWRqPX/rGhQ4dekXF+S9GTH+rZalu+pKQE28ra1oF0vnz5cgj0EXGmVbFMylCfmKhv38sNQaS2qrXpxShgDUVZt3d2jfhMJTeoMaUynVdhS39/f6ygUGxsceTIkXfwwIEDB6Lgc5kZHvm7A5/5gVcIdxl5I0qJCjoy7cU7vL29S/r27SuX6c5u2dnZj4l3dOrUKZnff3JoLKwpyvMhppvuPNqCZTHHd2OdE8srfqYnKiouOrJYkBLVp0qM8uxgzgciPz8fB6jc5WSEwbWbwY1EOYmJ6JmAnodfG3gPB/XQQwyjPAcx3fqVcyFdZ/IUE5G7cG5v1fLsVKrVarRP8uCYrHqeM4x6XCUo1nat4BiTCYo8SEo8dHy2Llq0qHLXrl3Df/75Z9+srKxaRcHg4OAS6Pxd7NGjBwbMucrtrj+ff/75LYGBgXZ79+599MyZM86VlYbHZL28vLTw+fThw4fv5B0YnPJcasZr47hs2bKjTCdS92A6YTad6daqFgIT2S9evBgHqtF2xOl4bfg9quW25jVe9+E+WQiK6HUYEhJSq5eeoeAsggApA9tETm0ClU955bP2qNvWTiUujSHeAe0e9sHlKhQVPfTQQ3/06dPn1okTJ7BtwOW7HFavXj182rRp2I6Il8OwjYmJCUtNTR0wf/58bHPy5VCAujz6ZDrgbPD5s1YxkSljDUVZt3d2Tfx8GdxcGfAw3OZGIvvtt996lZWVBfTs2fPWmDFjcOrZTUPeidxILGQ1PQkIy+MIle470BGv0QmPiIg4zTuWUk8xsjl58mQgGOFPi3e2adPmGm/86N4xHRiQZTDfFiI9d2b3r6eoFOoSFRVDLWKiYnF3dy/JyspyNVd9wUUHuZAECa9frswMxfrWFcLZAi+LjXQmXzGx3ntCpVLZMOOCreAxKmbZwCzY4Tnp6OhYGBkZeR3So3l5eR2uX7/um5GR0YLnvyIwMDDf19f3jo+PDy4LcxwSttGpGBEa6ggcXPupe/fumZD65ubmPpyenu6fnJzsUV5ejtdO6+fnp+7cuXOmt7c3XlucHo7ep3EW6HCV8ufgJ6E+FtXPwjOBHcJ0Xq4LtXwHCqey8DZBcTA8PLxKVKwLXEtRHJwFp0XjOoriAC4EQRBSA22OUM/KEaz342bMmPFVTk7OjLi4OBfceezYsQ9u3LiBS5r8D8+747Rp0xaVlZUNmTp16ucdO3b8k8lXJL3PvleymAjlwJmoAUp+BhSwhqKssTPBBcAXQRRUPfXUUwWQlvFOHY5KZ9YygktCogWuL1S2XcQ7wJAN2L17d5eIiIgbCxYs6A4dj5nQ8ZgovO/q6qodP3583KBBg76Ff1OYtFPPbb777ruOR48eXQcNRA3LPSUlxZFZLvp3fVhFlGfI57Y6OtJKi/Is7rTG8vIdMeM1MVckxWrvNgPfr8Qozzlr1qzBPOOC4PZN+SIcYLexqXG7okh2jukGq3xMmWl7e/vqEfCCggIXMGTbhIaGXqivfuQGYmPOpwp/o6ioyNlQHkwAzgZIZHoLs9eBICauZMoSE4V7RdWQc2/JvPFozvgs4zIy6Hn/i4eHh2/v3r1bwrYHu7fsCN5HKKqlMd307nwh0B33dMT2GnuFVzw9PdtC8uvevTuORDvyZwPfuyv6jrsW6kCWcVsipY5jcOAyg8knCFyt4FqI4vUSo6J0Y29Lly6t3qc/3VkABUjcj0KjoWnSFrJNGtUmSBxAyuzlk6gDq9TyWXvUbavuF65fvz4U+n41BnUx2OoPP/zQddSoUVL3+wxRyduPnxYtWuT8yy+/jDh16lSrs2fPuqalpc2E9m8mHuTu7n42ICDgz3nz5n3G21KMEVAs1wthRWLiDt5PeUfBz0USk/8airJuz+1M/H1oGKO34kFeAdxhNI1ZCtzHjRt3RaPRtNN/Az0RN27cuAdSjf39+/cvbNmypRqMXfRawGmvuIB9lhzLgPz222/PQ0r19/d/f9WqVSskvs8MVURKjPJsqspWbuUQREVPkUGqhOjI+H07WE1PHnNfE3NfD/SkwuAK2Ju2bcoX6YmJQvuTww1JUwqK5SEhIdc3b95cXlxcbJeXl9di9erVeyCZQkwy6jhnZ+eqPDDTeozjWonvMd16qWfrOO4rdk9MlKXBCOfxl/rOMbwuM/Z61HVdjL1mjRAUSninCZ8RFNvRCwPFQBQ4K/j7mKrXv9L7fAW///EZxunDKEY78ecM7bFS3rkqY5YbzDX5FCmpA2igGKgf1Vkf9EAUC4wK6STJrfNE5ZNv+cxlDyr1OikBx6lTpy7MzMycY+hN2N9qy5YtByCxPn36BM+YMeMPJi9hEZe6wGXUSsLCwq5BegS2WzGdh/1tfn/gtO1Mfp8k8fdk6bhkZWLiN/xfxQqKtQXGaoD91uzbO3MIivlMJmsWNGPcN23a9C7TqdgBkFrya13Jb6Y0fo2ceIWMr0KwHayw43ilrJG4DNjZfRRSRy4Q2Ik6Xjg9CtePOs47XVIKivVVRNbgHp2r8HLoi3LnFZhnRV+TukQfmVPm5eWVNGHChN+/+OKLflJkYNy4cacgDzdNXM8tYTqhEI0TjN58Se99XO8SPRMnMBmLiVaIll/nsiZ8XsOT1LZYgJm+k6YcNY92m8onz/Ll0jOoOJxiYmJ+4n07nLmGzhqCl6IwGIWe7xgXAQOjqpj8PBULuZ2Swvt+Huzeutw42IqzU+4yy3nfN8UexiWYqpdhEiLvyjCrtbbhessx9VLaA9HUPokpB5etod61Y0S9F1DkYooXMhk6legRh1PFrjJ5uuDn80YhnRk3fauUfyaLNyqlMinDZd7A1VYGNS9jKd2mBEGYCTRUEwcPHrzB09PTZefOnQ/dvHnTHtdCM6v17+SEUyc1L7zwwqXg4GA02m4w03oo4mj+MEg/Mt2ael8zXRTnTN7eTWK6wC0LIC2S2TUpHjZs2OU9e/b0lDITeG2YjKdUyQBPhXwnQRCENYMGy03eXzpbT98LBblKmZZDw22UTCu7PgFMpmLR1q1bvx49evREvX01PCzhf0ErQWhpgmYICYr1k8TuuZgKLtXYiTjEK94kGeZZEOOUjDWUgSCaM9Yi+mi58fp/wcHBxZCeYjqhDaekmit4B/4mDpjg9G0U+Y7zPJh6+s4pSN0g4fxM9ESMEr2Hy1+8zI+RGxmvvvrqF5DCYNtLojzg4NvPTDeoRRjG1Gut0TpqBEEQDQeFxJs8KQq+znCTgbbIxsJZN7b9O8/zJ8fTnwRpJ+TNUwhsWct07SR2b+pzkkxvpbLHH388+fTp0x3M9QMhISFJrJk6OdnoRY4nCIIgCFOASxUMhyQH0WcX04lzTQEH4NA7CpeJwKk2uM6dOQVFHInHQBrC+kAm8U6sZ5pGEC8bGrgVpvg9MxnJuMyFP09SRfVGkTqdXx/ykjcMPi8BzHRehcL6PyQqEgRBNAMULCga2/7JvV3D/A+A9AL/Hx2sYhXYDneGNApSKKQWZvh+nHJ/jOlm/SQ0t+eUBEWCIAjCHJDoI0/j3KK/J9NRd4IgCIIgCKJ+BHEUSWLKHNTDWUWtmc4pwMEM3499DIxHcYs1w6VwSFAkCIIgCIIgCIIgCIIgCMJoVHQKCIIgCIIgCIIgCIIgCIIwFgrKYiG2bdtm0BU0MjLShs4OQRAEQVB7TuUgCIIgCIIglGInkoeihTBkoJPRThAEQRDUnlM5CIIgCIIgCKXZiSQoSnRRyGgnCIIgCGrPqRwEQRAEQRCEEu1ECspCEARBEARBEARBEARBEITRkIciQRAEQRAEQRAEQRAEQRBGQ4IiQRAEQRAEQRAEQRAEQRBGQ4IiQRAEQRAEQRAEQRAEQRBG8/8CDACn2Bhs7uzfIwAAAABJRU5ErkJggg==);
+		background-size: auto 25px;
+	}
+
+}
+
+.redactor_toolbar li a:hover {
+	border-color: #98a6ba;
+	background-color: #dde4ef;
+	outline: none;
+}
+.redactor_toolbar li a:active, .redactor_toolbar li a.redactor_act {
+	border-color: #b5b5b5;
+	background-color: #ddd;
+	outline: none;
+}
+
+
+/*
+	BUTTONS
+	step 25px
+*/
+body .redactor_toolbar li a.redactor_btn_html				{ background-position: 0px; }
+body .redactor_toolbar li a.redactor_btn_formatting		    { background-position: -25px; }
+body .redactor_toolbar li a.redactor_btn_bold				{ background-position: -50px; }
+body .redactor_toolbar li a.redactor_btn_italic			    { background-position: -75px; }
+body .redactor_toolbar li a.redactor_btn_deleted		 	{ background-position: -500px; }
+body .redactor_toolbar li a.redactor_btn_unorderedlist 	    { background-position: -100px; }
+body .redactor_toolbar li a.redactor_btn_orderedlist   	    { background-position: -125px; }
+body .redactor_toolbar li a.redactor_btn_outdent	 		{ background-position: -150px; }
+body .redactor_toolbar li a.redactor_btn_indent		 	  	{ background-position: -175px; }
+body .redactor_toolbar li a.redactor_btn_image		 		{ background-position: -200px; }
+body .redactor_toolbar li a.redactor_btn_video		 		{ background-position: -225px; }
+body .redactor_toolbar li a.redactor_btn_file		 		{ background-position: -250px; }
+body .redactor_toolbar li a.redactor_btn_table		 		{ background-position: -275px; }
+body .redactor_toolbar li a.redactor_btn_link		 		{ background-position: -300px; }
+body .redactor_toolbar li a.redactor_btn_fontcolor		 	{ background-position: -325px; }
+body .redactor_toolbar li a.redactor_btn_backcolor		 	{ background-position: -350px; }
+body .redactor_toolbar li a.redactor_btn_alignleft		  	{ background-position: -375px; }
+body .redactor_toolbar li a.redactor_btn_aligncenter		{ background-position: -400px; }
+body .redactor_toolbar li a.redactor_btn_alignright		  	{ background-position: -425px; }
+body .redactor_toolbar li a.redactor_btn_justify		 	{ background-position: -450px; }
+body .redactor_toolbar li a.redactor_btn_horizontalrule 	{ background-position: -475px; }
+body .redactor_toolbar li a.redactor_btn_underline		 	{ background-position: -525px; }
+
+body .redactor_toolbar li a.redactor_btn_fullscreen		 	{ background-position: -550px; }
+body .redactor_toolbar li a.redactor_btn_normalscreen		{ background-position: -575px; }
+body .redactor_toolbar li a.redactor_btn_clips		 		{ background-position: -600px; }
+
+body .redactor_toolbar li a.redactor_btn_alignment	 		{ background-position: -625px; }
+
+/*
+	Toolbar classes
+*/
+.redactor_format_blockquote {
+	font-style: italic;
+	color: #666 !important;
+	padding-left: 10px;
+}
+.redactor_format_pre {
+	font-family: monospace, sans-serif;
+}
+.redactor_format_h1, .redactor_format_h2, .redactor_format_h3, .redactor_format_h4 {
+	font-weight: bold;
+}
+.redactor_format_h1 {
+	font-size: 30px;
+	line-height: 36px;
+}
+.redactor_format_h2 {
+	font-size: 24px;
+	line-height: 36px;
+}
+.redactor_format_h3 {
+	font-size: 20px;
+	line-height: 30px;
+}
+.redactor_format_h4 {
+	font-size: 16px;
+	line-height: 26px;
+}
+
+/*
+	DROPDOWN
+*/
+.redactor_dropdown {
+	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif;
+	top: 28px;
+	left: 0;
+	z-index: 2004;
+	position: absolute;
+	width: 200px;
+	background-color: #fff;
+	border: 1px solid #ccc;
+	font-size: 13px;
+	-webkit-box-shadow: 0 2px 4px #ccc;
+	-moz-box-shadow: 0 2px 4px #ccc;
+	box-shadow: 0 2px 4px #ccc;
+	line-height: 21px;
+	padding: 10px;
+}
+.redactor_separator_drop {
+	border-top: 1px solid #ddd;
+	padding: 0 !important;
+	line-height: 0;
+	font-size: 0;
+}
+.redactor_dropdown a {
+	display: block;
+	color: #000;
+	padding: 3px 5px;
+	text-decoration: none;
+}
+.redactor_dropdown a:hover {
+	color: #444 !important;
+	text-decoration: none;
+	background-color: #dde4ef;
+}
+
+/* ColorPicker */
+.redactor_color_link {
+	padding: 0 !important;
+	width: 15px !important;
+	height: 15px !important;
+	box-shadow: 0 1px 2px rgba(0, 0, 0, .2) inset !important;
+	border-radius: 4px !important;
+	float: left !important;
+	border: 2px solid #fff !important;
+	font-size: 0;
+}
+.redactor_color_none {
+	font-size: 11px;
+}
+
+
+
+/* MODAL */
+#redactor_modal_overlay {
+	position: fixed;
+	margin: auto;
+	top: 0;
+	left: 0;
+	width: 100%;
+	height: 100%;
+	z-index: 50000;
+
+	-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
+	filter:alpha(opacity=50);
+	opacity: 0.50;
+
+	background-color: #333 !important;
+}
+
+#redactor_modal {
+	background: #f7f7f7;
+	background: -moz-linear-gradient(top,  #f7f7f7 0%, #e2e2e2 100%);
+	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f7f7f7), color-stop(100%,#e2e2e2));
+	background: -webkit-linear-gradient(top,  #f7f7f7 0%,#e2e2e2 100%);
+	background: -o-linear-gradient(top,  #f7f7f7 0%,#e2e2e2 100%);
+	background: -ms-linear-gradient(top,  #f7f7f7 0%,#e2e2e2 100%);
+	background: linear-gradient(to bottom,  #f7f7f7 0%,#e2e2e2 100%);
+	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7f7f7', endColorstr='#e2e2e2',GradientType=0 );
+	text-shadow: 0 1px 0 #fff;
+	padding: 0;
+	position: fixed;
+	top: 50%;
+	left: 50%;
+	box-shadow: 0px 5px 60px #000;
+  	border-radius: 3px;
+  	z-index: 50001;
+	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif;
+	font-size: 12px !important;
+	color: #000;
+}
+#redactor_modal_header {
+	padding: 11px 30px 0 15px;
+	font-size: 12px;
+	border-radius: 3px 3px 0 0;
+	font-weight: bold;
+}
+#redactor_modal_content {
+	padding: 20px 30px;
+
+}
+#redactor_modal_close {
+	position: absolute;
+	right: 5px;
+	top: 5px;
+	font-size: 20px;
+	width: 20px;
+	height: 20px;
+	color: #777;
+	cursor: pointer;
+}
+#redactor_modal_close:hover {
+	color: #000;
+}
+#redactor_modal label {
+	margin: 10px 0 3px 0 !important;
+	padding: 0 !important;
+	float: none !important;
+	display: block !important;
+}
+#redactor_modal textarea {
+	margin-top: 4px;
+	display: block;
+}
+.redactor_input  {
+	width: 99%;
+	font-size: 14px;
+}
+.redactor_modal_box {
+	height: 350px;
+	overflow: auto;
+	margin-bottom: 10px;
+}
+#redactor_image_box {
+	height: 270px;
+	overflow: auto;
+	margin-bottom: 10px;
+}
+#redactor_image_box_select {
+	display: block;
+	width: 200px;
+	margin-bottom: 15px;
+}
+#redactor_image_box img {
+	margin-right: 10px;
+	margin-bottom: 10px;
+	cursor: pointer;
+	max-width: 100px;
+}
+#redactor_tabs {
+	margin-bottom: 18px;
+}
+#redactor_tabs a {
+	display: inline-block;
+	border: 1px solid #d2d2d2;
+	padding: 4px 14px;
+	font-size: 12px;
+	background-color: #fff;
+	text-decoration: none;
+	color: #000;
+	line-height: 1;
+	border-radius: 10px;
+	margin-right: 5px;
+}
+#redactor_tabs a:hover, #redactor_tabs a.redactor_tabs_act {
+	background-color: #ddd;
+	padding: 5px 15px;
+	box-shadow: 0 1px 2px rgba(0, 0, 0, .4) inset;
+	border: none;
+	text-shadow: 0 1px 0 #eee;
+	color: #777 !important;
+	text-decoration: none !important;
+}
+#redactor_modal_footer {
+	padding: 9px 30px 20px 30px;
+	border-radius: 0 0 3px 3px;
+	text-align: right;
+}
+
+#redactor_modal input[type="radio"],
+#redactor_modal input[type="checkbox"] {
+	position: relative;
+	top: -1px;
+}
+#redactor_modal input[type="text"],
+#redactor_modal input[type="password"],
+#redactor_modal input[type="email"],
+#redactor_modal textarea {
+	position: relative;
+	z-index: 2;
+	font-family: Helvetica, Arial, Tahoma, sans-serif;
+	height: 23px;
+	border: 1px solid #ccc;
+	margin: 0;
+	padding: 1px 2px;
+	background-color: white;
+	color: #333;
+	font-size: 13px;
+	line-height: 1;
+	border-radius: 1px;
+	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;
+	-webkit-transition: border 0.3s ease-in;
+	-moz-transition: border 0.3s ease-in;
+	-ms-transition: border 0.3s ease-in;
+	-o-transition: border 0.3s ease-in;
+	transition: border 0.3s ease-in;
+}
+#redactor_modal textarea {
+	line-height: 1.4em;
+}
+#redactor_modal input:focus,
+#redactor_modal textarea:focus {
+	outline: none;
+	border-color: #5ca9e4;
+	box-shadow: 0 0 0 2px rgba(70, 161, 231, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) inset;
+}
+
+.redactor_modal_btn {
+	margin-left: 8px;
+	position: relative;
+	cursor: pointer;
+	outline: none;
+	display: inline-block;
+	text-align: center;
+	text-decoration: none;
+	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif;
+	line-height: 1;
+	font-size: 12px;
+	font-weight: normal;
+	padding: 6px 16px 5px 16px;
+	border-radius: 4px;
+	background-color: #f3f3f3;
+	background-image: -moz-linear-gradient(top, #ffffff, #e1e1e1);
+	background-image: -ms-linear-gradient(top, #ffffff, #e1e1e1);
+	background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e1e1e1));
+	background-image: -webkit-linear-gradient(top, #ffffff, #e1e1e1);
+	background-image: -o-linear-gradient(top, #ffffff, #e1e1e1);
+	background-image: linear-gradient(top, #ffffff, #e1e1e1);
+	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#e1e1e1', GradientType=0);
+	border: 1px solid #ccc;
+	border-bottom-color: #aaa;
+	box-shadow: 0 1px 1px rgba(0, 0, 0, .1);
+	text-shadow: 0 1px 0px #ffffff;
+	color: #000;
+}
+.redactor_modal_btn:hover {
+	color: #555;
+}
+.redactor_modal_btn:hover {
+	filter: none;
+	background: none;
+	background: #f3f3f3;
+	text-shadow: 0 1px 0px rgba(255, 255, 255, 0.8);
+	text-decoration: none;
+}
+
+
+/* Drag and Drop Area */
+.redactor_droparea {
+	position: relative;
+    width: 100%;
+    margin: auto;
+    margin-bottom: 5px;
+}
+.redactor_droparea .redactor_dropareabox {
+	z-index: 1;
+	position: relative;
+    text-align: center;
+    width: 99%;
+    background-color: #fff;
+    padding: 60px 0;
+    border: 2px dashed #bbb;
+}
+.redactor_droparea .redactor_dropareabox, .redactor_dropalternative {
+    color: #555;
+    font-size: 12px;
+}
+.redactor_dropalternative {
+	margin: 4px 0 2px 0;
+}
+.redactor_dropareabox.hover {
+    background: #efe3b8;
+    border-color: #aaa;
+}
+.redactor_dropareabox.error {
+    background: #f7e5e5;
+    border-color: #dcc3c3;
+}
+.redactor_dropareabox.drop {
+    background: #f4f4ee;
+    border-color: #e0e5d6;
+}
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,4286 @@
+/*
+	Redactor v8.2.3
+	Updated: March 6, 2013
+
+	http://redactorjs.com/
+
+	Copyright (c) 2009-2013, Imperavi Inc.
+	License: http://redactorjs.com/license/
+
+	Usage: $('#content').redactor();
+*/
+
+var rwindow, rdocument;
+
+if (typeof RELANG === 'undefined')
+{
+	var RELANG = {};
+}
+
+var RLANG = {
+	html: 'HTML',
+	video: 'Insert Video',
+	image: 'Insert Image',
+	table: 'Table',
+	link: 'Link',
+	link_insert: 'Insert link',
+	unlink: 'Unlink',
+	formatting: 'Formatting',
+	paragraph: 'Paragraph',
+	quote: 'Quote',
+	code: 'Code',
+	header1: 'Header 1',
+	header2: 'Header 2',
+	header3: 'Header 3',
+	header4: 'Header 4',
+	bold:  'Bold',
+	italic: 'Italic',
+	fontcolor: 'Font Color',
+	backcolor: 'Back Color',
+	unorderedlist: 'Unordered List',
+	orderedlist: 'Ordered List',
+	outdent: 'Outdent',
+	indent: 'Indent',
+	cancel: 'Cancel',
+	insert: 'Insert',
+	save: 'Save',
+	_delete: 'Delete',
+	insert_table: 'Insert Table',
+	insert_row_above: 'Add Row Above',
+	insert_row_below: 'Add Row Below',
+	insert_column_left: 'Add Column Left',
+	insert_column_right: 'Add Column Right',
+	delete_column: 'Delete Column',
+	delete_row: 'Delete Row',
+	delete_table: 'Delete Table',
+	rows: 'Rows',
+	columns: 'Columns',
+	add_head: 'Add Head',
+	delete_head: 'Delete Head',
+	title: 'Title',
+	image_position: 'Position',
+	none: 'None',
+	left: 'Left',
+	right: 'Right',
+	image_web_link: 'Image Web Link',
+	text: 'Text',
+	mailto: 'Email',
+	web: 'URL',
+	video_html_code: 'Video Embed Code',
+	file: 'Insert File',
+	upload: 'Upload',
+	download: 'Download',
+	choose: 'Choose',
+	or_choose: 'Or choose',
+	drop_file_here: 'Drop file here',
+	align_left:	'Align text to the left',
+	align_center: 'Center text',
+	align_right: 'Align text to the right',
+	align_justify: 'Justify text',
+	horizontalrule: 'Insert Horizontal Rule',
+	deleted: 'Deleted',
+	anchor: 'Anchor',
+	link_new_tab: 'Open link in new tab',
+	underline: 'Underline',
+	alignment: 'Alignment'
+};
+
+(function($){
+
+	// Plugin
+	jQuery.fn.redactor = function(option)
+	{
+		return this.each(function()
+		{
+			var $obj = $(this);
+
+			var data = $obj.data('redactor');
+			if (!data)
+			{
+				$obj.data('redactor', (data = new Redactor(this, option)));
+			}
+		});
+	};
+
+
+	// Initialization
+	var Redactor = function(element, options)
+	{
+		// Element
+		this.$el = $(element);
+
+		// Lang
+		if (typeof options !== 'undefined' && typeof options.lang !== 'undefined' && options.lang !== 'en' && typeof RELANG[options.lang] !== 'undefined')
+		{
+			RLANG = RELANG[options.lang];
+		}
+
+		// Options
+		this.opts = $.extend({
+
+			iframe: false,
+			css: false, // url
+
+			lang: 'en',
+			direction: 'ltr', // ltr or rtl
+
+			callback: false, // function
+			keyupCallback: false, // function
+			keydownCallback: false, // function
+			execCommandCallback: false, // function
+
+			plugins: false,
+			cleanup: true,
+
+			focus: false,
+			tabindex: false,
+			autoresize: true,
+			minHeight: false,
+			fixed: false,
+			fixedTop: 0, // pixels
+			fixedBox: false,
+			source: true,
+			shortcuts: true,
+
+			mobile: true,
+			air: false, // true or toolbar
+			wym: false,
+
+			convertLinks: true,
+			convertDivs: true,
+			protocol: 'http://', // for links http or https or ftp or false
+
+			autosave: false, // false or url
+			autosaveCallback: false, // function
+			interval: 60, // seconds
+
+			imageGetJson: false, // url (ex. /folder/images.json ) or false
+
+			imageUpload: false, // url
+			imageUploadCallback: false, // function
+			imageUploadErrorCallback: false, // function
+
+			fileUpload: false, // url
+			fileUploadCallback: false, // function
+			fileUploadErrorCallback: false, // function
+
+			uploadCrossDomain: false,
+			uploadFields: false,
+
+			observeImages: true,
+			overlay: true, // modal overlay
+
+			allowedTags: ["form", "input", "button", "select", "option", "datalist", "output", "textarea", "fieldset", "legend",
+					"section", "header", "hgroup", "aside", "footer", "article", "details", "nav", "progress", "time", "canvas",
+					"code", "span", "div", "label", "a", "br", "p", "b", "i", "del", "strike", "u",
+					"img", "video", "source", "track", "audio", "iframe", "object", "embed", "param", "blockquote",
+					"mark", "cite", "small", "ul", "ol", "li", "hr", "dl", "dt", "dd", "sup", "sub",
+					"big", "pre", "code", "figure", "figcaption", "strong", "em", "table", "tr", "td",
+					"th", "tbody", "thead", "tfoot", "h1", "h2", "h3", "h4", "h5", "h6"],
+
+			toolbarExternal: false, // ID selector
+
+			buttonsCustom: {},
+			buttonsAdd: [],
+			buttons: ['html', '|', 'formatting', '|', 'bold', 'italic', 'deleted', '|', 'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
+					'image', 'video', 'file', 'table', 'link', '|',
+					'fontcolor', 'backcolor', '|', 'alignment', '|', 'horizontalrule'], // 'underline', 'alignleft', 'aligncenter', 'alignright', 'justify'
+
+			airButtons: ['formatting', '|', 'bold', 'italic', 'deleted', '|', 'unorderedlist', 'orderedlist', 'outdent', 'indent', '|', 'fontcolor', 'backcolor'],
+
+			formattingTags: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4'],
+
+			activeButtons: ['deleted', 'italic', 'bold', 'underline', 'unorderedlist', 'orderedlist'], // 'alignleft', 'aligncenter', 'alignright', 'justify'
+			activeButtonsStates: {
+				b: 'bold',
+				strong: 'bold',
+				i: 'italic',
+				em: 'italic',
+				del: 'deleted',
+				strike: 'deleted',
+				ul: 'unorderedlist',
+				ol: 'orderedlist',
+				u: 'underline'
+			},
+
+			colors: [
+				'#ffffff', '#000000', '#eeece1', '#1f497d', '#4f81bd', '#c0504d', '#9bbb59', '#8064a2', '#4bacc6', '#f79646', '#ffff00',
+				'#f2f2f2', '#7f7f7f', '#ddd9c3', '#c6d9f0', '#dbe5f1', '#f2dcdb', '#ebf1dd', '#e5e0ec', '#dbeef3', '#fdeada', '#fff2ca',
+				'#d8d8d8', '#595959', '#c4bd97', '#8db3e2', '#b8cce4', '#e5b9b7', '#d7e3bc', '#ccc1d9', '#b7dde8', '#fbd5b5', '#ffe694',
+				'#bfbfbf', '#3f3f3f', '#938953', '#548dd4', '#95b3d7', '#d99694', '#c3d69b', '#b2a2c7', '#b7dde8', '#fac08f', '#f2c314',
+				'#a5a5a5', '#262626', '#494429', '#17365d', '#366092', '#953734', '#76923c', '#5f497a', '#92cddc', '#e36c09', '#c09100',
+				'#7f7f7f', '#0c0c0c', '#1d1b10', '#0f243e', '#244061', '#632423', '#4f6128', '#3f3151', '#31859b', '#974806', '#7f6000'],
+
+			// private
+			emptyHtml: '<p><br /></p>',
+			buffer: false,
+			visual: true,
+
+			// modal windows container
+			modal_file: String() +
+				'<div id="redactor_modal_content">' +
+				'<form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data">' +
+					'<label>Name (optional)</label>' +
+					'<input type="text" id="redactor_filename" class="redactor_input" />' +
+					'<div style="margin-top: 7px;">' +
+						'<input type="file" id="redactor_file" name="file" />' +
+					'</div>' +
+				'</form><br>' +
+				'</div>',
+
+			modal_image_edit: String() +
+				'<div id="redactor_modal_content">' +
+				'<label>' + RLANG.title + '</label>' +
+				'<input id="redactor_file_alt" class="redactor_input" />' +
+				'<label>' + RLANG.link + '</label>' +
+				'<input id="redactor_file_link" class="redactor_input" />' +
+				'<label>' + RLANG.image_position + '</label>' +
+				'<select id="redactor_form_image_align">' +
+					'<option value="none">' + RLANG.none + '</option>' +
+					'<option value="left">' + RLANG.left + '</option>' +
+					'<option value="right">' + RLANG.right + '</option>' +
+				'</select>' +
+				'</div>' +
+				'<div id="redactor_modal_footer">' +
+					'<a href="javascript:void(null);" id="redactor_image_delete_btn" class="redactor_modal_btn">' + RLANG._delete + '</a>&nbsp;&nbsp;&nbsp;' +
+					'<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">' + RLANG.cancel + '</a>' +
+					'<input type="button" name="save" class="redactor_modal_btn" id="redactorSaveBtn" value="' + RLANG.save + '" />' +
+				'</div>',
+
+			modal_image: String() +
+				'<div id="redactor_modal_content">' +
+				'<div id="redactor_tabs">' +
+					'<a href="javascript:void(null);" class="redactor_tabs_act">' + RLANG.upload + '</a>' +
+					'<a href="javascript:void(null);">' + RLANG.choose + '</a>' +
+					'<a href="javascript:void(null);">' + RLANG.link + '</a>' +
+				'</div>' +
+				'<form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data">' +
+					'<div id="redactor_tab1" class="redactor_tab">' +
+						'<input type="file" id="redactor_file" name="file" />' +
+					'</div>' +
+					'<div id="redactor_tab2" class="redactor_tab" style="display: none;">' +
+						'<div id="redactor_image_box"></div>' +
+					'</div>' +
+				'</form>' +
+				'<div id="redactor_tab3" class="redactor_tab" style="display: none;">' +
+					'<label>' + RLANG.image_web_link + '</label>' +
+					'<input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  />' +
+				'</div>' +
+				'</div>' +
+				'<div id="redactor_modal_footer">' +
+					'<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">' + RLANG.cancel + '</a>' +
+					'<input type="button" name="upload" class="redactor_modal_btn" id="redactor_upload_btn" value="' + RLANG.insert + '" />' +
+				'</div>',
+
+			modal_link: String() +
+				'<div id="redactor_modal_content">' +
+				'<form id="redactorInsertLinkForm" method="post" action="">' +
+					'<div id="redactor_tabs">' +
+						'<a href="javascript:void(null);" class="redactor_tabs_act">URL</a>' +
+						'<a href="javascript:void(null);">Email</a>' +
+						'<a href="javascript:void(null);">' + RLANG.anchor + '</a>' +
+					'</div>' +
+					'<input type="hidden" id="redactor_tab_selected" value="1" />' +
+					'<div class="redactor_tab" id="redactor_tab1">' +
+						'<label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  />' +
+						'<label>' + RLANG.text + '</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" />' +
+						'<label><input type="checkbox" id="redactor_link_blank"> ' + RLANG.link_new_tab + '</label>' +
+					'</div>' +
+					'<div class="redactor_tab" id="redactor_tab2" style="display: none;">' +
+						'<label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" />' +
+						'<label>' + RLANG.text + '</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" />' +
+					'</div>' +
+					'<div class="redactor_tab" id="redactor_tab3" style="display: none;">' +
+						'<label>' + RLANG.anchor + '</label><input type="text" class="redactor_input" id="redactor_link_anchor"  />' +
+						'<label>' + RLANG.text + '</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" />' +
+					'</div>' +
+				'</form>' +
+				'</div>' +
+				'<div id="redactor_modal_footer">' +
+					'<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">' + RLANG.cancel + '</a>' +
+					'<input type="button" class="redactor_modal_btn" id="redactor_insert_link_btn" value="' + RLANG.insert + '" />' +
+				'</div>',
+
+			modal_table: String() +
+				'<div id="redactor_modal_content">' +
+					'<label>' + RLANG.rows + '</label>' +
+					'<input type="text" size="5" value="2" id="redactor_table_rows" />' +
+					'<label>' + RLANG.columns + '</label>' +
+					'<input type="text" size="5" value="3" id="redactor_table_columns" />' +
+				'</div>' +
+				'<div id="redactor_modal_footer">' +
+					'<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">' + RLANG.cancel + '</a>' +
+					'<input type="button" name="upload" class="redactor_modal_btn" id="redactor_insert_table_btn" value="' + RLANG.insert + '" />' +
+				'</div>',
+
+			modal_video: String() +
+				'<div id="redactor_modal_content">' +
+				'<form id="redactorInsertVideoForm">' +
+					'<label>' + RLANG.video_html_code + '</label>' +
+					'<textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea>' +
+				'</form>' +
+				'</div>'+
+				'<div id="redactor_modal_footer">' +
+					'<a href="javascript:void(null);" class="redactor_modal_btn redactor_btn_modal_close">' + RLANG.cancel + '</a>' +
+					'<input type="button" class="redactor_modal_btn" id="redactor_insert_video_btn" value="' + RLANG.insert + '" />' +
+				'</div>',
+
+			toolbar: {
+				html:
+				{
+					title: RLANG.html,
+					func: 'toggle'
+				},
+				formatting:
+				{
+					title: RLANG.formatting,
+					func: 'show',
+					dropdown:
+					{
+						p:
+						{
+							title: RLANG.paragraph,
+							exec: 'formatblock'
+						},
+						blockquote:
+						{
+							title: RLANG.quote,
+							exec: 'formatblock',
+							className: 'redactor_format_blockquote'
+						},
+						pre:
+						{
+							title: RLANG.code,
+							exec: 'formatblock',
+							className: 'redactor_format_pre'
+						},
+						h1:
+						{
+							title: RLANG.header1,
+							exec: 'formatblock',
+							className: 'redactor_format_h1'
+						},
+						h2:
+						{
+							title: RLANG.header2,
+							exec: 'formatblock',
+							className: 'redactor_format_h2'
+						},
+						h3:
+						{
+							title: RLANG.header3,
+							exec: 'formatblock',
+							className: 'redactor_format_h3'
+						},
+						h4:
+						{
+							title: RLANG.header4,
+							exec: 'formatblock',
+							className: 'redactor_format_h4'
+						}
+					}
+				},
+				bold:
+				{
+					title: RLANG.bold,
+					exec: 'bold'
+				},
+				italic:
+				{
+					title: RLANG.italic,
+					exec: 'italic'
+				},
+				deleted:
+				{
+					title: RLANG.deleted,
+					exec: 'strikethrough'
+				},
+				underline:
+				{
+					title: RLANG.underline,
+					exec: 'underline'
+				},
+				unorderedlist:
+				{
+					title: '&bull; ' + RLANG.unorderedlist,
+					exec: 'insertunorderedlist'
+				},
+				orderedlist:
+				{
+					title: '1. ' + RLANG.orderedlist,
+					exec: 'insertorderedlist'
+				},
+				outdent:
+				{
+					title: '< ' + RLANG.outdent,
+					exec: 'outdent'
+				},
+				indent:
+				{
+					title: '> ' + RLANG.indent,
+					exec: 'indent'
+				},
+				image:
+				{
+					title: RLANG.image,
+					func: 'showImage'
+				},
+				video:
+				{
+					title: RLANG.video,
+					func: 'showVideo'
+				},
+				file:
+				{
+					title: RLANG.file,
+					func: 'showFile'
+				},
+				table:
+				{
+					title: RLANG.table,
+					func: 'show',
+					dropdown:
+					{
+						insert_table:
+						{
+							title: RLANG.insert_table,
+							func: 'showTable'
+						},
+						separator_drop1:
+						{
+							name: 'separator'
+						},
+						insert_row_above:
+						{
+							title: RLANG.insert_row_above,
+							func: 'insertRowAbove'
+						},
+						insert_row_below:
+						{
+							title: RLANG.insert_row_below,
+							func: 'insertRowBelow'
+						},
+						insert_column_left:
+						{
+							title: RLANG.insert_column_left,
+							func: 'insertColumnLeft'
+						},
+						insert_column_right:
+						{
+							title: RLANG.insert_column_right,
+							func: 'insertColumnRight'
+						},
+						separator_drop2:
+						{
+							name: 'separator'
+						},
+						add_head:
+						{
+							title: RLANG.add_head,
+							func: 'addHead'
+						},
+						delete_head:
+						{
+							title: RLANG.delete_head,
+							func: 'deleteHead'
+						},
+						separator_drop3:
+						{
+							name: 'separator'
+						},
+						delete_column:
+						{
+							title: RLANG.delete_column,
+							func: 'deleteColumn'
+						},
+						delete_row:
+						{
+							title: RLANG.delete_row,
+							func: 'deleteRow'
+						},
+						delete_table:
+						{
+							title: RLANG.delete_table,
+							func: 'deleteTable'
+						}
+					}
+				},
+				link:
+				{
+					title: RLANG.link,
+					func: 'show',
+					dropdown:
+					{
+						link:
+						{
+							title: RLANG.link_insert,
+							func: 'showLink'
+						},
+						unlink:
+						{
+							title: RLANG.unlink,
+							exec: 'unlink'
+						}
+					}
+				},
+				fontcolor:
+				{
+					title: RLANG.fontcolor,
+					func: 'show'
+				},
+				backcolor:
+				{
+					title: RLANG.backcolor,
+					func: 'show'
+				},
+				alignment:
+				{
+					title: RLANG.alignment,
+					func: 'show',
+					dropdown:
+					{
+						alignleft:
+						{
+							title: RLANG.align_left,
+							exec: 'JustifyLeft'
+						},
+						aligncenter:
+						{
+							title: RLANG.align_center,
+							exec: 'JustifyCenter'
+						},
+						alignright:
+						{
+							title: RLANG.align_right,
+							exec: 'JustifyRight'
+						},
+						justify:
+						{
+							title: RLANG.align_justify,
+							exec: 'JustifyFull'
+						}
+					}
+				},
+				alignleft:
+				{
+					exec: 'JustifyLeft',
+					title: RLANG.align_left
+				},
+				aligncenter:
+				{
+					exec: 'JustifyCenter',
+					title: RLANG.align_center
+				},
+				alignright:
+				{
+					exec: 'JustifyRight',
+					title: RLANG.align_right
+				},
+				justify:
+				{
+					exec: 'JustifyFull',
+					title: RLANG.align_justify
+				},
+				horizontalrule:
+				{
+					exec: 'inserthorizontalrule',
+					title: RLANG.horizontalrule
+				}
+			}
+
+
+		}, options, this.$el.data());
+
+		this.dropdowns = [];
+
+		// Init
+		this.init();
+	};
+
+	// Functionality
+	Redactor.prototype = {
+
+
+		// Initialization
+		init: function()
+		{
+			// get dimensions
+			this.height = this.$el.css('height');
+			this.width = this.$el.css('width');
+
+			rdocument = this.document = document;
+			rwindow = this.window = window;
+
+			// mobile
+			if (this.opts.mobile === false && this.isMobile())
+			{
+				this.build(true);
+				return false;
+			}
+
+			// iframe
+			if (this.opts.iframe)
+			{
+				this.opts.autoresize = false;
+			}
+
+			// extend buttons
+			if (this.opts.air)
+			{
+				this.opts.buttons = this.opts.airButtons;
+			}
+			else if (this.opts.toolbar !== false)
+			{
+				if (this.opts.source === false)
+				{
+					var index = this.opts.buttons.indexOf('html');
+					var next = this.opts.buttons[index+1];
+					this.opts.buttons.splice(index, 1);
+					if (typeof next !== 'undefined' && next === '|')
+					{
+						this.opts.buttons.splice(index, 1);
+					}
+				}
+
+				$.extend(this.opts.toolbar, this.opts.buttonsCustom);
+				$.each(this.opts.buttonsAdd, $.proxy(function(i,s)
+				{
+					this.opts.buttons.push(s);
+
+				}, this));
+			}
+
+			// formatting tags
+			if (this.opts.toolbar !== false)
+			{
+				$.each(this.opts.toolbar.formatting.dropdown, $.proxy(function(i,s)
+				{
+					if ($.inArray(i, this.opts.formattingTags) == '-1')
+					{
+						delete this.opts.toolbar.formatting.dropdown[i];
+					}
+
+				}, this));
+			}
+
+			function afterBuild()
+			{
+	      		// air enable
+				this.enableAir();
+
+				// toolbar
+				this.buildToolbar();
+
+				// PLUGINS
+				if (typeof this.opts.plugins === 'object')
+				{
+					$.each(this.opts.plugins, $.proxy(function(i,s)
+					{
+						if (typeof RedactorPlugins[s] !== 'undefined')
+						{
+							$.extend(this, RedactorPlugins[s]);
+
+							if (typeof RedactorPlugins[s].init !== 'undefined')
+							{
+								this.init();
+							}
+						}
+
+					}, this));
+				}
+
+				// buttons response
+				if (this.opts.activeButtons !== false && this.opts.toolbar !== false)
+				{
+					var observeFormatting = $.proxy(function() { this.observeFormatting(); }, this);
+					this.$editor.click(observeFormatting).keyup(observeFormatting);
+				}
+
+				// paste
+				var oldsafari = false;
+				if (this.browser('webkit') && navigator.userAgent.indexOf('Chrome') === -1)
+				{
+					var arr = this.browser('version').split('.');
+					if (arr[0] < 536) oldsafari = true;
+				}
+
+				if (this.isMobile(true) === false && oldsafari === false)
+				{
+					this.$editor.bind('paste', $.proxy(function(e)
+					{
+						if (this.opts.cleanup === false)
+						{
+							return true;
+						}
+
+						this.pasteRunning = true;
+
+						this.setBuffer();
+
+						if (this.opts.autoresize === true)
+						{
+							this.saveScroll = this.document.body.scrollTop;
+						}
+						else
+						{
+							this.saveScroll = this.$editor.scrollTop();
+						}
+
+						var frag = this.extractContent();
+
+						setTimeout($.proxy(function()
+						{
+							var pastedFrag = this.extractContent();
+							this.$editor.append(frag);
+
+							this.restoreSelection();
+
+							var html = this.getFragmentHtml(pastedFrag);
+							this.pasteCleanUp(html);
+							this.pasteRunning = false;
+
+						}, this), 1);
+
+					}, this));
+				}
+
+				// key handlers
+				this.keyup();
+				this.keydown();
+
+				// autosave
+				if (this.opts.autosave !== false)
+				{
+					this.autoSave();
+				}
+
+				// observers
+				setTimeout($.proxy(function()
+				{
+					this.observeImages();
+					this.observeTables();
+
+				}, this), 1);
+
+				// FF fix
+				if (this.browser('mozilla'))
+				{
+					this.$editor.click($.proxy(function()
+					{
+						this.saveSelection();
+					}, this));
+
+					try
+					{
+						this.document.execCommand('enableObjectResizing', false, false);
+						this.document.execCommand('enableInlineTableEditing', false, false);
+					}
+					catch (e) {}
+				}
+
+				// focus
+				if (this.opts.focus)
+				{
+					setTimeout($.proxy(function(){
+						this.$editor.focus();
+					}, this), 1);
+				}
+
+				// fixed
+				if (this.opts.fixed)
+				{
+					this.observeScroll();
+					$(document).scroll($.proxy(this.observeScroll, this));
+				}
+
+				// callback
+				if (typeof this.opts.callback === 'function')
+				{
+					this.opts.callback(this);
+				}
+
+				if (this.opts.toolbar !== false)
+				{
+					this.$toolbar.find('a').attr('tabindex', '-1');
+				}
+			}
+
+			// construct editor
+		    this.build(false, afterBuild);
+
+		},
+		shortcuts: function(e, cmd)
+		{
+			e.preventDefault();
+			this.execCommand(cmd, false);
+		},
+		keyup: function()
+		{
+			this.$editor.keyup($.proxy(function(e)
+			{
+				var key = e.keyCode || e.which;
+
+				if (this.browser('mozilla') && !this.pasteRunning)
+				{
+					this.saveSelection();
+				}
+
+				// callback as you type
+				if (typeof this.opts.keyupCallback === 'function')
+				{
+					this.opts.keyupCallback(this, e);
+				}
+
+				// if empty
+				if (key === 8 || key === 46)
+				{
+					this.observeImages();
+					return this.formatEmpty(e);
+				}
+
+				// new line p
+				if (key === 13 && !e.shiftKey && !e.ctrlKey && !e.metaKey)
+				{
+					if (this.browser('webkit'))
+					{
+						this.formatNewLine(e);
+					}
+
+					// convert links
+					if (this.opts.convertLinks)
+					{
+						this.$editor.linkify();
+					}
+				}
+
+				this.syncCode();
+
+			}, this));
+		},
+		keydown: function()
+		{
+			this.$editor.keydown($.proxy(function(e)
+			{
+				var key = e.keyCode || e.which;
+				var parent = this.getParentNode();
+				var current = this.getCurrentNode();
+				var pre = false;
+				var ctrl = e.ctrlKey || e.metaKey;
+
+				if ((parent || current) && ($(parent).get(0).tagName === 'PRE' || $(current).get(0).tagName === 'PRE'))
+				{
+					pre = true;
+				}
+
+				// callback keydown
+				if (typeof this.opts.keydownCallback === 'function')
+				{
+					this.opts.keydownCallback(this, e);
+				}
+
+				if (ctrl && this.opts.shortcuts)
+				{
+					if (key === 90)
+					{
+						if (this.opts.buffer !== false)
+						{
+							e.preventDefault();
+							this.getBuffer();
+						}
+						else if (e.shiftKey)
+						{
+							this.shortcuts(e, 'redo');	// Ctrl + Shift + z
+						}
+						else
+						{
+							this.shortcuts(e, 'undo'); // Ctrl + z
+						}
+					}
+					else if (key === 77)
+					{
+						this.shortcuts(e, 'removeFormat'); // Ctrl + m
+					}
+					else if (key === 66)
+					{
+						this.shortcuts(e, 'bold'); // Ctrl + b
+					}
+					else if (key === 73)
+					{
+						this.shortcuts(e, 'italic'); // Ctrl + i
+					}
+					else if (key === 74)
+					{
+						this.shortcuts(e, 'insertunorderedlist'); // Ctrl + j
+					}
+					else if (key === 75)
+					{
+						this.shortcuts(e, 'insertorderedlist'); // Ctrl + k
+					}
+					else if (key === 76)
+					{
+						this.shortcuts(e, 'superscript'); // Ctrl + l
+					}
+					else if (key === 72)
+					{
+						this.shortcuts(e, 'subscript'); // Ctrl + h
+					}
+				}
+
+				// clear undo buffer
+				if (!ctrl && key !== 90)
+				{
+					this.opts.buffer = false;
+				}
+
+				// enter
+				if (pre === true && key === 13)
+				{
+					e.preventDefault();
+
+					var html = $(current).parent().text();
+					this.insertNodeAtCaret(this.document.createTextNode('\r\n'));
+					if (html.search(/\s$/) == -1)
+					{
+						this.insertNodeAtCaret(this.document.createTextNode('\r\n'));
+					}
+					this.syncCode();
+
+					return false;
+				}
+
+				// tab
+				if (this.opts.shortcuts && !e.shiftKey && key === 9)
+				{
+					if (pre === false)
+					{
+						this.shortcuts(e, 'indent'); // Tab
+					}
+					else
+					{
+						e.preventDefault();
+						this.insertNodeAtCaret(this.document.createTextNode('\t'));
+						this.syncCode();
+						return false;
+					}
+				}
+				else if (this.opts.shortcuts && e.shiftKey && key === 9 )
+				{
+					this.shortcuts(e, 'outdent'); // Shift + tab
+				}
+
+				// safari shift key + enter
+				if (this.browser('webkit') && navigator.userAgent.indexOf('Chrome') === -1)
+				{
+					return this.safariShiftKeyEnter(e, key);
+				}
+			}, this));
+		},
+		build: function(mobile, whendone)
+		{
+			if (mobile !== true)
+			{
+				// container
+				this.$box = $('<div class="redactor_box"></div>');
+
+				// air box
+				if (this.opts.air)
+				{
+					this.air = $('<div class="redactor_air" style="display: none;"></div>');
+				}
+
+				this.$content = null;
+
+				function initFrame()
+				{
+					this.$editor = this.$content.contents().find("body").attr('contenteditable', true).attr('dir', this.opts.direction);
+
+					rdocument = this.document = this.$editor[0].ownerDocument;
+					rwindow = this.window = this.document.defaultView || window;
+
+					if (this.opts.css !== false)
+					{
+						this.$content.contents().find('head').append('<link rel="stylesheet" href="' + this.opts.css + '" />');
+					}
+
+					this.$editor.html(html);
+
+					if (whendone)
+					{
+						whendone.call(this);
+						whendone = null;
+					}
+				}
+
+				// editor
+				this.textareamode = true;
+				if (this.$el.get(0).tagName === 'TEXTAREA')
+				{
+					if(this.opts.iframe)
+					{
+						var me = this;
+						this.$content = $('<iframe style="width: 100%;" frameborder="0"></iframe>').load(function()
+						{
+							initFrame.call(me);
+						});
+					}
+					else
+					{
+						 this.$content = this.$editor = $('<div></div>');
+					}
+
+					var classlist = this.$el.get(0).className.split(/\s+/);
+					$.each(classlist, $.proxy(function(i,s)
+					{
+						this.$content.addClass('redactor_' + s);
+					}, this));
+				}
+				else
+				{
+					this.textareamode = false;
+					this.$content = this.$editor = this.$el;
+					this.$el = $('<textarea name="' + this.$editor.attr('id') + '"></textarea>').css('height', this.height);
+				}
+
+				if (this.$editor)
+				{
+					this.$editor.addClass('redactor_editor').attr('contenteditable', true).attr('dir', this.opts.direction);
+				}
+
+				if (this.opts.tabindex !== false)
+				{
+					this.$content.attr('tabindex', this.opts.tabindex);
+				}
+
+				if (this.opts.minHeight !== false)
+				{
+					this.$content.css('min-height', this.opts.minHeight + 'px');
+				}
+
+				if (this.opts.wym === true)
+				{
+					this.$content.addClass('redactor_editor_wym');
+				}
+
+				if (this.opts.autoresize === false)
+				{
+					this.$content.css('height', this.height);
+				}
+
+				// hide textarea
+				this.$el.hide();
+
+				// append box and frame
+				var html = '';
+				if (this.textareamode)
+				{
+					// get html
+					html = this.$el.val();
+					html = this.savePreCode(html);
+
+					this.$box.insertAfter(this.$el).append(this.$content).append(this.$el);
+				}
+				else
+				{
+					// get html
+					html = this.$editor.html();
+					html = this.savePreCode(html);
+
+					this.$box.insertAfter(this.$content).append(this.$el).append(this.$editor);
+
+				}
+
+				// conver newlines to p
+				html = this.paragraphy(html);
+
+				// enable
+				if (this.$editor)
+				{
+					this.$editor.html(html);
+				}
+
+				if (this.textareamode === false)
+				{
+					this.syncCode();
+				}
+			}
+			else
+			{
+				if (this.$el.get(0).tagName !== 'TEXTAREA')
+				{
+					var html = this.$el.val();
+					var textarea = $('<textarea name="' + this.$editor.attr('id') + '"></textarea>').css('height', this.height).val(html);
+					this.$el.hide();
+					this.$el.after(textarea);
+				}
+			}
+
+			if (whendone && this.$editor)
+			{
+				whendone.call(this);
+			}
+
+		},
+		enableAir: function()
+		{
+			if (this.opts.air === false)
+			{
+				return false;
+			}
+
+			this.air.hide();
+
+			this.$editor.bind('textselect', $.proxy(function(e)
+			{
+				this.showAir(e);
+
+			}, this));
+
+			this.$editor.bind('textunselect', $.proxy(function()
+			{
+				this.air.hide();
+
+			}, this));
+
+		},
+		showAir: function(e)
+		{
+			$('.redactor_air').hide();
+
+			var width = this.air.innerWidth();
+			var left = e.clientX;
+
+			if ($(this.document).width() < (left + width))
+			{
+				left = left - width;
+			}
+
+			var top = e.clientY + $(document).scrollTop() + 14;
+			if (this.opts.iframe === true)
+			{
+				top = top + this.$box.position().top;
+				left = left + this.$box.position().left;
+			}
+
+			this.air.css({ left: left + 'px', top: top + 'px' }).show();
+		},
+		syncCode: function()
+		{
+			this.$el.val(this.$editor.html());
+		},
+
+		// API functions
+		setCode: function(html)
+		{
+			html = this.stripTags(html);
+			this.$editor.html(html).focus();
+
+			this.syncCode();
+		},
+		getCode: function()
+		{
+			var html = '';
+			if (this.opts.visual)
+			{
+				html = this.$editor.html()
+			}
+			else
+			{
+				html = this.$el.val();
+			}
+
+			return this.stripTags(html);
+		},
+		insertHtml: function(html)
+		{
+			this.$editor.focus();
+			this.pasteHtmlAtCaret(html);
+			this.observeImages();
+			this.syncCode();
+		},
+
+		pasteHtmlAtCaret: function (html)
+		{
+			var sel, range;
+			if (this.document.getSelection)
+			{
+				sel = this.window.getSelection();
+				if (sel.getRangeAt && sel.rangeCount)
+				{
+					range = sel.getRangeAt(0);
+					range.deleteContents();
+					var el = this.document.createElement("div");
+					el.innerHTML = html;
+					var frag = this.document.createDocumentFragment(), node, lastNode;
+					while (node = el.firstChild)
+					{
+						lastNode = frag.appendChild(node);
+					}
+					range.insertNode(frag);
+
+					if (lastNode)
+					{
+						range = range.cloneRange();
+						range.setStartAfter(lastNode);
+						range.collapse(true);
+						sel.removeAllRanges();
+						sel.addRange(range);
+					}
+				}
+			}
+			else if (this.document.selection && this.document.selection.type != "Control")
+			{
+				this.document.selection.createRange().pasteHTML(html);
+			}
+		},
+
+		destroy: function()
+		{
+			var html = this.getCode();
+
+			if (this.textareamode)
+			{
+				this.$box.after(this.$el);
+				this.$box.remove();
+				this.$el.height(this.height).val(html).show();
+			}
+			else
+			{
+				this.$box.after(this.$editor);
+				this.$box.remove();
+				this.$editor.removeClass('redactor_editor').removeClass('redactor_editor_wym').attr('contenteditable', false).html(html).show();
+			}
+
+			if (this.opts.toolbarExternal)
+			{
+				$(this.opts.toolbarExternal).empty();
+			}
+
+			$('.redactor_air').remove();
+
+			for (var i = 0; i < this.dropdowns.length; i++)
+			{
+				this.dropdowns[i].remove();
+				delete(this.dropdowns[i]);
+			}
+
+			if (this.opts.autosave !== false)
+			{
+				clearInterval(this.autosaveInterval);
+			}
+
+		},
+		// end API functions
+
+		// OBSERVERS
+		observeFormatting: function()
+		{
+			var parent = this.getCurrentNode();
+
+			this.inactiveAllButtons();
+
+			$.each(this.opts.activeButtonsStates, $.proxy(function(i,s)
+			{
+				if ($(parent).closest(i,this.$editor.get()[0]).length != 0)
+				{
+					this.setBtnActive(s);
+				}
+
+			}, this));
+
+			var tag = $(parent).closest(['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'td']);
+
+			if (typeof tag[0] !== 'undefined' && typeof tag[0].elem !== 'undefined' && $(tag[0].elem).size() != 0)
+			{
+				var align = $(tag[0].elem).css('text-align');
+
+				switch (align)
+				{
+					case 'right':
+						this.setBtnActive('alignright');
+					break;
+					case 'center':
+						this.setBtnActive('aligncenter');
+					break;
+					case 'justify':
+						this.setBtnActive('justify');
+					break;
+					default:
+						this.setBtnActive('alignleft');
+					break;
+				}
+			}
+		},
+		observeImages: function()
+		{
+			if (this.opts.observeImages === false)
+			{
+				return false;
+			}
+
+			this.$editor.find('img').each($.proxy(function(i,s)
+			{
+				if (this.browser('msie'))
+				{
+					$(s).attr('unselectable', 'on');
+				}
+
+				this.resizeImage(s);
+
+			}, this));
+
+		},
+		observeTables: function()
+		{
+			this.$editor.find('table').click($.proxy(this.tableObserver, this));
+		},
+		observeScroll: function()
+		{
+			var scrolltop = $(this.document).scrollTop();
+			var boxtop = this.$box.offset().top;
+			var left = 0;
+
+			if (scrolltop > boxtop)
+			{
+				var width = '100%';
+				if (this.opts.fixedBox)
+				{
+					left = this.$box.offset().left;
+					width = this.$box.innerWidth();
+				}
+
+				this.fixed = true;
+				this.$toolbar.css({ position: 'fixed', width: width, zIndex: 1005, top: this.opts.fixedTop + 'px', left: left });
+			}
+			else
+			{
+				this.fixed = false;
+				this.$toolbar.css({ position: 'relative', width: 'auto', zIndex: 1, top: 0, left: left });
+			}
+		},
+
+		// BUFFER
+		setBuffer: function()
+		{
+			this.saveSelection();
+			this.opts.buffer = this.$editor.html();
+		},
+		getBuffer: function()
+		{
+			if (this.opts.buffer === false)
+			{
+				return false;
+			}
+
+			this.$editor.html(this.opts.buffer);
+
+			if (!this.browser('msie'))
+			{
+				this.restoreSelection();
+			}
+
+			this.opts.buffer = false;
+		},
+
+
+
+		// EXECCOMMAND
+		execCommand: function(cmd, param)
+		{
+			if (this.opts.visual == false)
+			{
+				this.$el.focus();
+				return false;
+			}
+
+			try
+			{
+
+				var parent;
+
+				if (cmd === 'inserthtml')
+				{
+					if (this.browser('msie'))
+					{
+						this.$editor.focus();
+						this.document.selection.createRange().pasteHTML(param);
+					}
+					else
+					{
+						this.pasteHtmlAtCaret(param);
+						//this.execRun(cmd, param);
+					}
+
+					this.observeImages();
+				}
+				else if (cmd === 'unlink')
+				{
+					parent = this.getParentNode();
+					if ($(parent).get(0).tagName === 'A')
+					{
+						$(parent).replaceWith($(parent).text());
+					}
+					else
+					{
+						this.execRun(cmd, param);
+					}
+				}
+				else if (cmd === 'JustifyLeft' || cmd === 'JustifyCenter' || cmd === 'JustifyRight' || cmd === 'JustifyFull')
+				{
+					parent = this.getCurrentNode();
+					var tag = $(parent).get(0).tagName;
+
+					if (this.opts.iframe === false && $(parent).parents('.redactor_editor').size() == 0)
+					{
+						return false;
+					}
+
+					var tagsArray = ['P', 'DIV', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'BLOCKQUOTE', 'TD'];
+					if ($.inArray(tag, tagsArray) != -1)
+					{
+						var align = false;
+
+						if (cmd === 'JustifyCenter')
+						{
+							align = 'center';
+						}
+						else if (cmd === 'JustifyRight')
+						{
+							align = 'right';
+						}
+						else if (cmd === 'JustifyFull')
+						{
+							align = 'justify';
+						}
+
+						if (align === false)
+						{
+							$(parent).css('text-align', '');
+						}
+						else
+						{
+							$(parent).css('text-align', align);
+						}
+					}
+					else
+					{
+						this.execRun(cmd, param);
+					}
+				}
+				else if (cmd === 'formatblock' && param === 'blockquote')
+				{
+					parent = this.getCurrentNode();
+					if ($(parent).get(0).tagName === 'BLOCKQUOTE')
+					{
+						if (this.browser('msie'))
+						{
+							var node = $('<p>' + $(parent).html() + '</p>');
+							$(parent).replaceWith(node);
+						}
+						else
+						{
+							this.execRun(cmd, 'p');
+						}
+					}
+					else if ($(parent).get(0).tagName === 'P')
+					{
+						var parent2 = $(parent).parent();
+						if ($(parent2).get(0).tagName === 'BLOCKQUOTE')
+						{
+							var node = $('<p>' + $(parent).html() + '</p>');
+							$(parent2).replaceWith(node);
+							this.setSelection(node[0], 0, node[0], 0);
+						}
+						else
+						{
+							if (this.browser('msie'))
+							{
+								var node = $('<blockquote>' + $(parent).html() + '</blockquote>');
+								$(parent).replaceWith(node);
+							}
+							else
+							{
+								this.execRun(cmd, param);
+							}
+						}
+					}
+					else
+					{
+						this.execRun(cmd, param);
+					}
+				}
+				else if (cmd === 'formatblock' && (param === 'pre' || param === 'p'))
+				{
+					parent = this.getParentNode();
+
+					if ($(parent).get(0).tagName === 'PRE')
+					{
+						$(parent).replaceWith('<p>' +  this.encodeEntities($(parent).text()) + '</p>');
+					}
+					else
+					{
+						this.execRun(cmd, param);
+					}
+				}
+				else
+				{
+					if (cmd === 'inserthorizontalrule' && this.browser('msie'))
+					{
+						this.$editor.focus();
+					}
+
+					if (cmd === 'formatblock' && this.browser('mozilla'))
+					{
+						this.$editor.focus();
+					}
+
+					this.execRun(cmd, param);
+				}
+
+				if (cmd === 'inserthorizontalrule')
+				{
+					this.$editor.find('hr').removeAttr('id');
+				}
+
+				this.syncCode();
+
+				if (this.oldIE())
+				{
+					this.$editor.focus();
+				}
+
+				if (typeof this.opts.execCommandCallback === 'function')
+				{
+					this.opts.execCommandCallback(this, cmd);
+				}
+
+				if (this.opts.air)
+				{
+					this.air.hide();
+				}
+			}
+			catch (e) { }
+		},
+		execRun: function(cmd, param)
+		{
+			if (cmd === 'formatblock' && this.browser('msie'))
+			{
+				param = '<' + param + '>';
+			}
+
+			this.document.execCommand(cmd, false, param);
+		},
+
+		// FORMAT NEW LINE
+		formatNewLine: function(e)
+		{
+			var parent = this.getParentNode();
+
+			if (parent.nodeName === 'DIV' && parent.className === 'redactor_editor')
+			{
+				var element = $(this.getCurrentNode());
+
+				if (element.get(0).tagName === 'DIV' && (element.html() === '' || element.html() === '<br>'))
+				{
+					var newElement = $('<p>').append(element.clone().get(0).childNodes);
+					element.replaceWith(newElement);
+					newElement.html('<br />');
+					this.setSelection(newElement[0], 0, newElement[0], 0);
+				}
+			}
+		},
+
+		// SAFARI SHIFT KEY + ENTER
+		safariShiftKeyEnter: function(e, key)
+		{
+			if (e.shiftKey && key === 13)
+			{
+				e.preventDefault();
+				this.insertNodeAtCaret($('<span><br /></span>').get(0));
+				this.syncCode();
+				return false;
+			}
+			else
+			{
+				return true;
+			}
+		},
+
+		// FORMAT EMPTY
+		formatEmpty: function(e)
+		{
+			var html = $.trim(this.$editor.html());
+
+			html = html.replace(/<br\s?\/?>/i, '');
+			var thtml = html.replace(/<p>\s?<\/p>/gi, '');
+
+			if (html === '' || thtml === '')
+			{
+				e.preventDefault();
+
+				var node = $(this.opts.emptyHtml).get(0);
+				this.$editor.html(node);
+				this.setSelection(node, 0, node, 0);
+
+				this.syncCode();
+				return false;
+			}
+			else
+			{
+				this.syncCode();
+			}
+		},
+
+		// PARAGRAPHY
+		paragraphy: function (str)
+		{
+			str = $.trim(str);
+			if (str === '' || str === '<p></p>')
+			{
+				return this.opts.emptyHtml;
+			}
+
+			// convert div to p
+			if (this.opts.convertDivs)
+			{
+				str = str.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '<p>$2</p>');
+			}
+
+			// inner functions
+			var X = function(x, a, b) { return x.replace(new RegExp(a, 'g'), b); };
+			var R = function(a, b) { return X(str, a, b); };
+
+			// block elements
+			var blocks = '(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])';
+
+			//str = '<p>' + str;
+			str += '\n';
+
+			R('<br />\\s*<br />', '\n\n');
+			R('(<' + blocks + '[^>]*>)', '\n$1');
+			R('(</' + blocks + '>)', '$1\n\n');
+			R('\r\n|\r', '\n'); // newlines
+			R('\n\n+', '\n\n'); // remove duplicates
+			R('\n?((.|\n)+?)$', '<p>$1</p>\n'); // including one at the end
+			R('<p>\\s*?</p>', ''); // remove empty p
+			R('<p>(<div[^>]*>\\s*)', '$1<p>');
+			R('<p>([^<]+)\\s*?(</(div|address|form)[^>]*>)', '<p>$1</p>$2');
+			R('<p>\\s*(</?' + blocks + '[^>]*>)\\s*</p>', '$1');
+			R('<p>(<li.+?)</p>', '$1');
+			R('<p>\\s*(</?' + blocks + '[^>]*>)', '$1');
+			R('(</?' + blocks + '[^>]*>)\\s*</p>', '$1');
+			R('(</?' + blocks + '[^>]*>)\\s*<br />', '$1');
+			R('<br />(\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)', '$1');
+
+			// pre
+			if (str.indexOf('<pre') != -1)
+			{
+				R('(<pre(.|\n)*?>)((.|\n)*?)</pre>', function(m0, m1, m2, m3)
+				{
+					return X(m1, '\\\\([\'\"\\\\])', '$1') + X(X(X(m3, '<p>', '\n'), '</p>|<br />', ''), '\\\\([\'\"\\\\])', '$1') + '</pre>';
+				});
+			}
+
+			return R('\n</p>$', '</p>');
+		},
+
+		// REMOVE TAGS
+		stripTags: function(html)
+		{
+			var allowed = this.opts.allowedTags;
+			var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;
+			return html.replace(tags, function ($0, $1)
+			{
+				return $.inArray($1.toLowerCase(), allowed) > '-1' ? $0 : '';
+			});
+		},
+
+
+		savePreCode: function(html)
+		{
+			var pre = html.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);
+			if (pre !== null)
+			{
+				$.each(pre, $.proxy(function(i,s)
+				{
+					var arr = s.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);
+					arr[2] = this.encodeEntities(arr[2]);
+					html = html.replace(s, '<pre' + arr[1] + '>' + arr[2] + '</pre>');
+				}, this));
+			}
+
+			return html;
+		},
+		encodeEntities: function(str)
+		{
+			str = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"');
+			return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
+		},
+		cleanupPre: function(s)
+		{
+			s = s.replace(/<br>/gi, '\n');
+			s = s.replace(/<\/p>/gi, '\n');
+			s = s.replace(/<\/div>/gi, '\n');
+
+			var tmp = this.document.createElement("div");
+			tmp.innerHTML = s;
+			return tmp.textContent||tmp.innerText;
+
+		},
+
+
+		// PASTE CLEANUP
+		pasteCleanUp: function(html)
+		{
+			var parent = this.getParentNode();
+
+			// clean up pre
+			if ($(parent).get(0).tagName === 'PRE')
+			{
+				html = this.cleanupPre(html);
+				this.pasteCleanUpInsert(html);
+				return true;
+			}
+
+			// remove comments and php tags
+			html = html.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi, '');
+
+			// remove nbsp
+			html = html.replace(/(&nbsp;){2,}/gi, '&nbsp;');
+
+			// remove google docs marker
+			html = html.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi, "$2");
+
+			// strip tags
+			html = this.stripTags(html);
+
+			// prevert
+			html = html.replace(/<td><\/td>/gi, '[td]');
+			html = html.replace(/<td>&nbsp;<\/td>/gi, '[td]');
+			html = html.replace(/<td><br><\/td>/gi, '[td]');
+			html = html.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi, '[a href="$2"]$4[/a]');
+			html = html.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi, '[iframe$1]$2[/iframe]');
+			html = html.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi, '[video$1]$2[/video]');
+			html = html.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi, '[audio$1]$2[/audio]');
+			html = html.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi, '[embed$1]$2[/embed]');
+			html = html.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi, '[object$1]$2[/object]');
+			html = html.replace(/<param(.*?)>/gi, '[param$1]');
+			html = html.replace(/<img(.*?)style="(.*?)"(.*?)>/gi, '[img$1$3]');
+
+			// remove attributes
+			html = html.replace(/<(\w+)([\w\W]*?)>/gi, '<$1>');
+
+			// remove empty
+			html = html.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, '');
+			html = html.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, '');
+
+			// revert
+			html = html.replace(/\[td\]/gi, '<td>&nbsp;</td>');
+			html = html.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi, '<a href="$1">$2</a>');
+			html = html.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi, '<iframe$1>$2</iframe>');
+			html = html.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi, '<video$1>$2</video>');
+			html = html.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi, '<audio$1>$2</audio>');
+			html = html.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi, '<embed$1>$2</embed>');
+			html = html.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi, '<object$1>$2</object>');
+			html = html.replace(/\[param(.*?)\]/gi, '<param$1>');
+			html = html.replace(/\[img(.*?)\]/gi, '<img$1>');
+
+
+			// convert div to p
+			if (this.opts.convertDivs)
+			{
+				html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '<p>$2</p>');
+			}
+
+			// remove span
+			html = html.replace(/<span>([\w\W]*?)<\/span>/gi, '$1');
+
+			html = html.replace(/\n{3,}/gi, '\n');
+
+			// remove dirty p
+			html = html.replace(/<p><p>/gi, '<p>');
+			html = html.replace(/<\/p><\/p>/gi, '</p>');
+
+			// FF fix
+			if (this.browser('mozilla'))
+			{
+				html = html.replace(/<br>$/gi, '');
+			}
+
+			this.pasteCleanUpInsert(html);
+
+		},
+
+		pasteCleanUpInsert: function(html)
+		{
+			this.execCommand('inserthtml', html);
+
+			if (this.opts.autoresize === true)
+			{
+				$(this.document.body).scrollTop(this.saveScroll);
+			}
+			else
+			{
+				this.$editor.scrollTop(this.saveScroll);
+			}
+		},
+
+
+		// TEXTAREA CODE FORMATTING
+		formattingRemove: function(html)
+		{
+			// save pre
+			var prebuffer = [];
+			var pre = html.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);
+			if (pre !== null)
+			{
+				$.each(pre, function(i,s)
+				{
+					html = html.replace(s, 'prebuffer_' + i);
+					prebuffer.push(s);
+				});
+			}
+
+			html = html.replace(/\s{2,}/g, ' ');
+			html = html.replace(/\n/g, ' ');
+			html = html.replace(/[\t]*/g, '');
+			html = html.replace(/\n\s*\n/g, "\n");
+			html = html.replace(/^[\s\n]*/g, '');
+			html = html.replace(/[\s\n]*$/g, '');
+			html = html.replace(/>\s+</g, '><');
+
+			if (prebuffer)
+			{
+				$.each(prebuffer, function(i,s)
+				{
+					html = html.replace('prebuffer_' + i, s);
+				});
+
+				prebuffer = [];
+			}
+
+			return html;
+		},
+		formattingIndenting: function(html)
+		{
+			html = html.replace(/<li/g, "\t<li");
+			html = html.replace(/<tr/g, "\t<tr");
+			html = html.replace(/<td/g, "\t\t<td");
+			html = html.replace(/<\/tr>/g, "\t</tr>");
+
+			return html;
+		},
+		formattingEmptyTags: function(html)
+		{
+			var etags = ["<pre></pre>","<blockquote>\\s*</blockquote>","<em>\\s*</em>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>", "<span>&nbsp;<span>", "<b>\\s*</b>", "<b>&nbsp;</b>", "<p>\\s*</p>", "<p>&nbsp;</p>",  "<p>\\s*<br>\\s*</p>", "<div>\\s*</div>", "<div>\\s*<br>\\s*</div>"];
+			for (var i = 0; i < etags.length; ++i)
+			{
+				var bbb = etags[i];
+				html = html.replace(new RegExp(bbb,'gi'), "");
+			}
+
+			return html;
+		},
+		formattingAddBefore: function(html)
+		{
+			var lb = '\r\n';
+			var btags = ["<p", "<form","</ul>", '</ol>', "<fieldset","<legend","<object","<embed","<select","<option","<input","<textarea","<pre","<blockquote","<ul","<ol","<li","<dl","<dt","<dd","<table", "<thead","<tbody","<caption","</caption>","<th","<tr","<td","<figure"];
+			for (var i = 0; i < btags.length; ++i)
+			{
+				var eee = btags[i];
+				html = html.replace(new RegExp(eee,'gi'),lb+eee);
+			}
+
+			return html;
+		},
+		formattingAddAfter: function(html)
+		{
+			var lb = '\r\n';
+			var atags = ['</p>', '</div>', '</h1>', '</h2>', '</h3>', '</h4>', '</h5>', '</h6>', '<br>', '<br />', '</dl>', '</dt>', '</dd>', '</form>', '</blockquote>', '</pre>', '</legend>', '</fieldset>', '</object>', '</embed>', '</textarea>', '</select>', '</option>', '</table>', '</thead>', '</tbody>', '</tr>', '</td>', '</th>', '</figure>'];
+			for (var i = 0; i < atags.length; ++i)
+			{
+				var aaa = atags[i];
+				html = html.replace(new RegExp(aaa,'gi'),aaa+lb);
+			}
+
+			return html;
+		},
+		formatting: function(html)
+		{
+			html = this.formattingRemove(html);
+
+			// empty tags
+			html = this.formattingEmptyTags(html);
+
+			// add formatting before
+			html = this.formattingAddBefore(html);
+
+			// add formatting after
+			html = this.formattingAddAfter(html);
+
+			// indenting
+			html = this.formattingIndenting(html);
+
+			return html;
+		},
+
+		// TOGGLE
+		toggle: function()
+		{
+			var html;
+
+			if (this.opts.visual)
+			{
+				var height = this.$editor.innerHeight();
+
+				this.$editor.hide();
+				this.$content.hide();
+
+				html = this.$editor.html();
+				//html = $.trim(this.formatting(html));
+
+				this.$el.height(height).val(html).show().focus();
+
+				this.setBtnActive('html');
+				this.opts.visual = false;
+			}
+			else
+			{
+				this.$el.hide();
+				var html = this.$el.val();
+
+				//html = this.savePreCode(html);
+
+				// clean up
+				//html = this.stripTags(html);
+
+				// set code
+				this.$editor.html(html).show();
+				this.$content.show();
+
+				if (this.$editor.html() === '')
+				{
+					this.setCode(this.opts.emptyHtml);
+				}
+
+				this.$editor.focus();
+
+				this.setBtnInactive('html');
+				this.opts.visual = true;
+
+				this.observeImages();
+				this.observeTables();
+			}
+		},
+
+		// AUTOSAVE
+		autoSave: function()
+		{
+			this.autosaveInterval = setInterval($.proxy(function()
+			{
+				$.ajax({
+					url: this.opts.autosave,
+					type: 'post',
+					data: this.$el.attr('name') + '=' + escape(encodeURIComponent(this.getCode())),
+					success: $.proxy(function(data)
+					{
+						// callback
+						if (typeof this.opts.autosaveCallback === 'function')
+						{
+							this.opts.autosaveCallback(data, this);
+						}
+
+					}, this)
+				});
+
+
+			}, this), this.opts.interval*1000);
+		},
+
+		// TOOLBAR
+		buildToolbar: function()
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			this.$toolbar = $('<ul>').addClass('redactor_toolbar');
+
+			if (this.opts.air)
+			{
+				$(this.air).append(this.$toolbar);
+				$('body').append(this.air);
+			}
+			else
+			{
+				if (this.opts.toolbarExternal === false)
+				{
+					this.$box.prepend(this.$toolbar);
+				}
+				else
+				{
+					$(this.opts.toolbarExternal).html(this.$toolbar);
+				}
+			}
+
+			$.each(this.opts.buttons, $.proxy(function(i,key)
+			{
+
+				if (key !== '|' && typeof this.opts.toolbar[key] !== 'undefined')
+				{
+					var s = this.opts.toolbar[key];
+
+					if (this.opts.fileUpload === false && key === 'file')
+					{
+						return true;
+					}
+
+					this.$toolbar.append($('<li>').append(this.buildButton(key, s)));
+				}
+
+
+				if (key === '|')
+				{
+					this.$toolbar.append($('<li class="redactor_separator"></li>'));
+				}
+
+			}, this));
+
+		},
+		buildButton: function(key, s)
+		{
+			var button = $('<a href="javascript:void(null);" title="' + s.title + '" class="redactor_btn_' + key + '"></a>');
+
+			if (typeof s.func === 'undefined')
+			{
+				button.click($.proxy(function()
+				{
+					if ($.inArray(key, this.opts.activeButtons) != -1)
+					{
+						this.inactiveAllButtons();
+						this.setBtnActive(key);
+					}
+
+					if (this.browser('mozilla'))
+					{
+						this.$editor.focus();
+						//this.restoreSelection();
+					}
+
+					this.execCommand(s.exec, key);
+
+				}, this));
+			}
+			else if (s.func !== 'show')
+			{
+				button.click($.proxy(function(e) {
+
+					this[s.func](e);
+
+				}, this));
+			}
+
+			if (typeof s.callback !== 'undefined' && s.callback !== false)
+			{
+				button.click($.proxy(function(e) { s.callback(this, e, key); }, this));
+			}
+
+			// dropdown
+			if (key === 'backcolor' || key === 'fontcolor' || typeof(s.dropdown) !== 'undefined')
+			{
+				var dropdown = $('<div class="redactor_dropdown" style="display: none;">');
+
+				if (key === 'backcolor' || key === 'fontcolor')
+				{
+					dropdown = this.buildColorPicker(dropdown, key);
+				}
+				else
+				{
+					dropdown = this.buildDropdown(dropdown, s.dropdown);
+				}
+
+				this.dropdowns.push(dropdown.appendTo($(document.body)));
+
+				// observing dropdown
+				this.hdlShowDropDown = $.proxy(function(e) { this.showDropDown(e, dropdown, key); }, this);
+
+				button.click(this.hdlShowDropDown);
+			}
+
+			return button;
+		},
+		buildDropdown: function(dropdown, obj)
+		{
+			$.each(obj, $.proxy(
+				function (x, d)
+				{
+					if (typeof(d.className) === 'undefined')
+					{
+						d.className = '';
+					}
+
+					var drop_a;
+					if (typeof d.name !== 'undefined' && d.name === 'separator')
+					{
+						drop_a = $('<a class="redactor_separator_drop">');
+					}
+					else
+					{
+						drop_a = $('<a href="javascript:void(null);" class="' + d.className + '">' + d.title + '</a>');
+
+						if (typeof(d.callback) === 'function')
+						{
+							$(drop_a).click($.proxy(function(e) { d.callback(this, e, x); }, this));
+						}
+						else if (typeof(d.func) === 'undefined')
+						{
+							$(drop_a).click($.proxy(function() { this.execCommand(d.exec, x); }, this));
+						}
+						else
+						{
+							$(drop_a).click($.proxy(function(e) { this[d.func](e); }, this));
+						}
+					}
+
+					$(dropdown).append(drop_a);
+
+				}, this)
+			);
+
+			return dropdown;
+
+		},
+		buildColorPicker: function(dropdown, key)
+		{
+			var mode;
+			if (key === 'backcolor')
+			{
+				if (this.browser('msie'))
+				{
+					mode = 'BackColor';
+				}
+				else
+				{
+					mode = 'hilitecolor';
+				}
+			}
+			else
+			{
+				mode = 'forecolor';
+			}
+
+			$(dropdown).width(210);
+
+			var len = this.opts.colors.length;
+			for (var i = 0; i < len; ++i)
+			{
+				var color = this.opts.colors[i];
+
+				var swatch = $('<a rel="' + color + '" href="javascript:void(null);" class="redactor_color_link"></a>').css({ 'backgroundColor': color });
+				$(dropdown).append(swatch);
+
+				var _self = this;
+				$(swatch).click(function()
+				{
+					_self.execCommand(mode, $(this).attr('rel'));
+
+					if (mode === 'forecolor')
+					{
+						_self.$editor.find('font').replaceWith(function() {
+
+							return $('<span style="color: ' + $(this).attr('color') + ';">' + $(this).html() + '</span>');
+
+						});
+					}
+
+					if (_self.browser('msie') && mode === 'BackColor')
+					{
+						_self.$editor.find('font').replaceWith(function() {
+
+							return $('<span style="' + $(this).attr('style') + '">' + $(this).html() + '</span>');
+
+						});
+					}
+
+				});
+			}
+
+			var elnone = $('<a href="javascript:void(null);" class="redactor_color_none"></a>').html(RLANG.none);
+
+			if (key === 'backcolor')
+			{
+				elnone.click($.proxy(this.setBackgroundNone, this));
+			}
+			else
+			{
+				elnone.click($.proxy(this.setColorNone, this));
+			}
+
+			$(dropdown).append(elnone);
+
+			return dropdown;
+		},
+		setBackgroundNone: function()
+		{
+			$(this.getParentNode()).css('background-color', 'transparent');
+			this.syncCode();
+		},
+		setColorNone: function()
+		{
+			$(this.getParentNode()).attr('color', '').css('color', '');
+			this.syncCode();
+		},
+
+		// DROPDOWNS
+		showDropDown: function(e, dropdown, key)
+		{
+			if (this.getBtn(key).hasClass('dropact'))
+			{
+				this.hideAllDropDown();
+			}
+			else
+			{
+				this.hideAllDropDown();
+
+				this.setBtnActive(key);
+				this.getBtn(key).addClass('dropact');
+
+				var left = this.getBtn(key).offset().left;
+
+				if (this.opts.air)
+				{
+					var air_top = this.air.offset().top;
+
+					$(dropdown).css({ position: 'absolute', left: left + 'px', top: air_top+30 + 'px' }).show();
+				}
+				else if (this.opts.fixed && this.fixed)
+				{
+					$(dropdown).css({ position: 'fixed', left: left + 'px', top: '30px' }).show();
+				}
+				else
+				{
+					var top = this.$toolbar.offset().top + 30;
+					$(dropdown).css({ position: 'absolute', left: left + 'px', top: top + 'px' }).show();
+				}
+			}
+
+			var hdlHideDropDown = $.proxy(function(e) { this.hideDropDown(e, dropdown, key); }, this);
+
+			$(document).one('click', hdlHideDropDown);
+			this.$editor.one('click', hdlHideDropDown);
+			this.$content.one('click', hdlHideDropDown);
+
+			e.stopPropagation();
+
+		},
+		hideAllDropDown: function()
+		{
+			this.$toolbar.find('a.dropact').removeClass('redactor_act').removeClass('dropact');
+			$('.redactor_dropdown').hide();
+		},
+		hideDropDown: function(e, dropdown, key)
+		{
+			if (!$(e.target).hasClass('dropact'))
+			{
+				$(dropdown).removeClass('dropact');
+				this.showedDropDown = false;
+				this.hideAllDropDown();
+			}
+		},
+
+		// BUTTONS MANIPULATIONS
+		getBtn: function(key)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			return $(this.$toolbar.find('a.redactor_btn_' + key));
+		},
+		setBtnActive: function(key)
+		{
+			this.getBtn(key).addClass('redactor_act');
+		},
+		setBtnInactive: function(key)
+		{
+			this.getBtn(key).removeClass('redactor_act');
+		},
+		inactiveAllButtons: function()
+		{
+			$.each(this.opts.activeButtons, $.proxy(function(i,s)
+			{
+				this.setBtnInactive(s);
+
+			}, this));
+		},
+		changeBtnIcon: function(key, classname)
+		{
+			this.getBtn(key).addClass('redactor_btn_' + classname);
+		},
+		removeBtnIcon: function(key, classname)
+		{
+			this.getBtn(key).removeClass('redactor_btn_' + classname);
+		},
+
+		addBtnSeparator: function()
+		{
+			this.$toolbar.append($('<li class="redactor_separator"></li>'));
+		},
+		addBtnSeparatorAfter: function(key)
+		{
+			var $btn = this.getBtn(key);
+			$btn.parent().after($('<li class="redactor_separator"></li>'));
+		},
+		addBtnSeparatorBefore: function(key)
+		{
+			var $btn = this.getBtn(key);
+			$btn.parent().before($('<li class="redactor_separator"></li>'));
+		},
+		removeBtnSeparatorAfter: function(key)
+		{
+			var $btn = this.getBtn(key);
+			$btn.parent().next().remove();
+		},
+		removeBtnSeparatorBefore: function(key)
+		{
+			var $btn = this.getBtn(key);
+			$btn.parent().prev().remove();
+		},
+
+		setBtnRight: function(key)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			this.getBtn(key).parent().addClass('redactor_btn_right');
+		},
+		setBtnLeft: function(key)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			this.getBtn(key).parent().removeClass('redactor_btn_right');
+		},
+		addBtn: function(key, title, callback, dropdown)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			var btn = this.buildButton(key, { title: title, callback: callback, dropdown: dropdown });
+			this.$toolbar.append($('<li>').append(btn));
+		},
+		addBtnFirst: function(key, title, callback, dropdown)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			var btn = this.buildButton(key, { title: title, callback: callback, dropdown: dropdown });
+			this.$toolbar.prepend($('<li>').append(btn));
+		},
+		addBtnAfter: function(afterkey, key, title, callback, dropdown)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			var btn = this.buildButton(key, { title: title, callback: callback, dropdown: dropdown });
+			var $btn = this.getBtn(afterkey);
+			$btn.parent().after($('<li>').append(btn));
+		},
+		addBtnBefore: function(beforekey, key, title, callback, dropdown)
+		{
+			if (this.opts.toolbar === false)
+			{
+				return false;
+			}
+
+			var btn = this.buildButton(key, { title: title, callback: callback, dropdown: dropdown });
+			var $btn = this.getBtn(beforekey);
+			$btn.parent().before($('<li>').append(btn));
+		},
+		removeBtn: function(key, separator)
+		{
+			var $btn = this.getBtn(key);
+
+			if (separator === true)
+			{
+				$btn.parent().next().remove();
+			}
+
+			$btn.parent().removeClass('redactor_btn_right');
+			$btn.remove();
+		},
+
+
+		// SELECTION AND NODE MANIPULATION
+		getFragmentHtml: function (fragment)
+		{
+			var cloned = fragment.cloneNode(true);
+			var div = this.document.createElement('div');
+			div.appendChild(cloned);
+			return div.innerHTML;
+		},
+		extractContent: function()
+		{
+			var node = this.$editor.get(0);
+			var frag = this.document.createDocumentFragment(), child;
+			while ((child = node.firstChild))
+			{
+				frag.appendChild(child);
+			}
+
+			return frag;
+		},
+
+		// Save and Restore Selection
+		saveSelection: function()
+		{
+			this.$editor.focus();
+
+			this.savedSel = this.getOrigin();
+			this.savedSelObj = this.getFocus();
+		},
+		restoreSelection: function()
+		{
+			if (typeof this.savedSel !== 'undefined' && this.savedSel !== null && this.savedSelObj !== null && this.savedSel[0].tagName !== 'BODY')
+			{
+				if (this.opts.iframe === false && $(this.savedSel[0]).closest('.redactor_editor').size() == 0)
+				{
+					this.$editor.focus();
+				}
+				else
+				{
+					if (this.browser('opera'))
+					{
+						this.$editor.focus();
+					}
+
+					this.setSelection(this.savedSel[0], this.savedSel[1], this.savedSelObj[0], this.savedSelObj[1]);
+
+					if (this.browser('mozilla'))
+					{
+						this.$editor.focus();
+					}
+				}
+			}
+			else
+			{
+				this.$editor.focus();
+			}
+		},
+
+		// Selection
+		getSelection: function()
+		{
+			var doc = this.document;
+
+			if (this.window.getSelection)
+			{
+				return this.window.getSelection();
+			}
+			else if (doc.getSelection)
+			{
+				return doc.getSelection();
+			}
+			else // IE
+			{
+				return doc.selection.createRange();
+			}
+
+			return false;
+		},
+		hasSelection: function()
+		{
+			if (!this.oldIE())
+			{
+				var sel;
+				return (sel = this.getSelection()) && (sel.focusNode != null) && (sel.anchorNode != null);
+			}
+			else // IE8
+			{
+				var node = this.$editor.get(0);
+
+				var range;
+				node.focus();
+				if (!node.document.selection)
+				{
+					return false;
+				}
+
+				range = node.document.selection.createRange();
+				return range && range.parentElement().document === node.document;
+			}
+		},
+		getOrigin: function()
+		{
+			if (!this.oldIE())
+			{
+				var sel;
+				if (!((sel = this.getSelection()) && (sel.anchorNode != null)))
+				{
+					return null;
+				}
+
+				return [sel.anchorNode, sel.anchorOffset];
+			}
+			else
+			{
+				var node = this.$editor.get(0);
+
+				var range;
+				node.focus();
+				if (!this.hasSelection())
+				{
+					return null;
+				}
+
+				range = node.document.selection.createRange();
+				return this._getBoundary(node.document, range, true);
+			}
+		},
+		getFocus: function()
+		{
+			if (!this.oldIE())
+			{
+				var sel;
+				if (!((sel = this.getSelection()) && (sel.focusNode != null)))
+				{
+					return null;
+				}
+
+				return [sel.focusNode, sel.focusOffset];
+			}
+			else
+			{
+				var node = this.$editor.get(0);
+
+				var range;
+				node.focus();
+				if (!this.hasSelection())
+				{
+					return null;
+				}
+
+				range = node.document.selection.createRange();
+				return this._getBoundary(node.document, range, false);
+
+			}
+		},
+		setSelection: function (orgn, orgo, focn, foco)
+		{
+			if (focn == null)
+			{
+				focn = orgn;
+			}
+
+			if (foco == null)
+			{
+				foco = orgo;
+			}
+
+			if (!this.oldIE())
+			{
+				var sel = this.getSelection();
+				if (!sel)
+				{
+					return;
+				}
+
+				if (sel.collapse && sel.extend)
+				{
+					sel.collapse(orgn, orgo);
+					sel.extend(focn, foco);
+				}
+				else // IE9
+				{
+					r = this.document.createRange();
+					r.setStart(orgn, orgo);
+					r.setEnd(focn, foco);
+
+					try
+					{
+						sel.removeAllRanges();
+					}
+					catch (e) {}
+
+					sel.addRange(r);
+				}
+			}
+			else
+			{
+				var node = this.$editor.get(0);
+				var range = node.document.body.createTextRange();
+
+				this._moveBoundary(node.document, range, false, focn, foco);
+				this._moveBoundary(node.document, range, true, orgn, orgo);
+				return range.select();
+			}
+		},
+
+		// Get elements, html and text
+		getCurrentNode: function()
+		{
+			if (typeof this.window.getSelection !== 'undefined')
+			{
+				return this.getSelectedNode().parentNode;
+			}
+			else if (typeof this.document.selection !== 'undefined')
+			{
+				return this.getSelection().parentElement();
+			}
+		},
+		getParentNode: function()
+		{
+			return $(this.getCurrentNode()).parent()[0]
+		},
+		getSelectedNode: function()
+		{
+			if (this.oldIE())
+			{
+				return this.getSelection().parentElement();
+			}
+			else if (typeof this.window.getSelection !== 'undefined')
+			{
+				var s = this.window.getSelection();
+				if (s.rangeCount > 0)
+				{
+					return this.getSelection().getRangeAt(0).commonAncestorContainer;
+				}
+				else
+				{
+					return false;
+				}
+			}
+			else if (typeof this.document.selection !== 'undefined')
+			{
+				return this.getSelection();
+			}
+		},
+
+
+		// IE8 specific selection
+		_getBoundary: function(doc, textRange, bStart)
+		{
+			var cursor, cursorNode, node, offset, parent;
+
+			cursorNode = doc.createElement('a');
+			cursor = textRange.duplicate();
+			cursor.collapse(bStart);
+			parent = cursor.parentElement();
+			while (true)
+			{
+				parent.insertBefore(cursorNode, cursorNode.previousSibling);
+				cursor.moveToElementText(cursorNode);
+				if (!(cursor.compareEndPoints((bStart ? 'StartToStart' : 'StartToEnd'), textRange) > 0 && (cursorNode.previousSibling != null)))
+				{
+					break;
+				}
+			}
+
+			if (cursor.compareEndPoints((bStart ? 'StartToStart' : 'StartToEnd'), textRange) === -1 && cursorNode.nextSibling)
+			{
+				cursor.setEndPoint((bStart ? 'EndToStart' : 'EndToEnd'), textRange);
+				node = cursorNode.nextSibling;
+				offset = cursor.text.length;
+			}
+			else
+			{
+				node = cursorNode.parentNode;
+				offset = this._getChildIndex(cursorNode);
+			}
+
+			cursorNode.parentNode.removeChild(cursorNode);
+			return [node, offset];
+		},
+		_moveBoundary: function(doc, textRange, bStart, node, offset)
+		{
+			var anchorNode, anchorParent, cursor, cursorNode, textOffset;
+
+			textOffset = 0;
+			anchorNode = this._isText(node) ? node : node.childNodes[offset];
+			anchorParent = this._isText(node) ? node.parentNode : node;
+
+			if (this._isText(node))
+			{
+				textOffset = offset;
+			}
+
+			cursorNode = doc.createElement('a');
+			anchorParent.insertBefore(cursorNode, anchorNode || null);
+			cursor = doc.body.createTextRange();
+			cursor.moveToElementText(cursorNode);
+			cursorNode.parentNode.removeChild(cursorNode);
+
+			textRange.setEndPoint((bStart ? 'StartToStart' : 'EndToEnd'), cursor);
+			return textRange[bStart ? 'moveStart' : 'moveEnd']('character', textOffset);
+		},
+		_isText: function (d)
+		{
+			return (d != null ? d.nodeType == 3 : false);
+		},
+		_getChildIndex: function (e)
+		{
+			var k = 0;
+			while (e = e.previousSibling) {
+				k++;
+			}
+			return k;
+		},
+
+		insertNodeAfterCaret: function(node)
+		{
+			this.saveSelection();
+		    this.insertNodeAtCaret(node);
+			this.restoreSelection();
+		},
+
+		insertNodeAtCaret: function(node)
+		{
+			if (this.window.getSelection)
+			{
+				var sel = this.getSelection();
+				if (sel.rangeCount)
+				{
+					var range = sel.getRangeAt(0);
+					range.collapse(false);
+					range.insertNode(node);
+					range = range.cloneRange();
+					range.selectNodeContents(node);
+					range.collapse(false);
+					sel.removeAllRanges();
+					sel.addRange(range);
+				}
+			}
+			else if (this.document.selection)
+			{
+				var html = (node.nodeType === 1) ? node.outerHTML : node.data;
+				var id = "marker_" + ("" + Math.random()).slice(2);
+				html += '<span id="' + id + '"></span>';
+				var textRange = this.getSelection();
+				textRange.collapse(false);
+				textRange.pasteHTML(html);
+				var markerSpan = this.document.getElementById(id);
+				textRange.moveToElementText(markerSpan);
+				textRange.select();
+				markerSpan.parentNode.removeChild(markerSpan);
+			}
+		},
+		getSelectedHtml: function()
+		{
+			var html = '';
+			if (this.window.getSelection)
+			{
+				var sel = this.window.getSelection();
+				if (sel.rangeCount)
+				{
+					var container = this.document.createElement("div");
+					for (var i = 0, len = sel.rangeCount; i < len; ++i)
+					{
+						container.appendChild(sel.getRangeAt(i).cloneContents());
+					}
+
+					html = container.innerHTML;
+
+				}
+			}
+			else if (this.document.selection)
+			{
+				if (this.document.selection.type === "Text")
+				{
+					html = this.document.selection.createRange().htmlText;
+				}
+			}
+
+			return html;
+		},
+
+		// RESIZE IMAGES
+		resizeImage: function(resize)
+		{
+			var clicked = false;
+			var clicker = false;
+			var start_x;
+			var start_y;
+			var ratio = $(resize).width()/$(resize).height();
+			var min_w = 10;
+			var min_h = 10;
+
+			$(resize).off('hover mousedown mouseup click mousemove');
+ 			$(resize).hover(function() { $(resize).css('cursor', 'nw-resize'); }, function() { $(resize).css('cursor',''); clicked = false; });
+
+			$(resize).mousedown(function(e)
+			{
+				e.preventDefault();
+
+				ratio = $(resize).width()/$(resize).height();
+
+				clicked = true;
+				clicker = true;
+
+				start_x = Math.round(e.pageX - $(resize).eq(0).offset().left);
+				start_y = Math.round(e.pageY - $(resize).eq(0).offset().top);
+			});
+
+			$(resize).mouseup($.proxy(function(e)
+			{
+				clicked = false;
+				$(resize).css('cursor','');
+				this.syncCode();
+
+			}, this));
+
+			$(resize).click($.proxy(function(e)
+			{
+				if (clicker)
+				{
+					this.imageEdit(e);
+				}
+
+			}, this));
+
+			$(resize).mousemove(function(e)
+			{
+				if (clicked)
+				{
+					clicker = false;
+
+					var mouse_x = Math.round(e.pageX - $(this).eq(0).offset().left) - start_x;
+					var mouse_y = Math.round(e.pageY - $(this).eq(0).offset().top) - start_y;
+
+					var div_h = $(resize).height();
+
+					var new_h = parseInt(div_h, 10) + mouse_y;
+					var new_w = new_h*ratio;
+
+					if (new_w > min_w)
+					{
+						$(resize).width(new_w);
+					}
+
+					if (new_h > min_h)
+					{
+						$(resize).height(new_h);
+					}
+
+					start_x = Math.round(e.pageX - $(this).eq(0).offset().left);
+					start_y = Math.round(e.pageY - $(this).eq(0).offset().top);
+				}
+			});
+		},
+
+		// TABLE
+		showTable: function()
+		{
+			this.saveSelection();
+
+			this.modalInit(RLANG.table, this.opts.modal_table, 300, $.proxy(function()
+				{
+					$('#redactor_insert_table_btn').click($.proxy(this.insertTable, this));
+
+					setTimeout(function()
+					{
+						$('#redactor_table_rows').focus();
+					}, 200);
+
+				}, this)
+			);
+		},
+		insertTable: function()
+		{
+			var rows = $('#redactor_table_rows').val();
+			var columns = $('#redactor_table_columns').val();
+
+			var table_box = $('<div></div>');
+
+			var tableid = Math.floor(Math.random() * 99999);
+			var table = $('<table id="table' + tableid + '"><tbody></tbody></table>');
+
+			for (var i = 0; i < rows; i++)
+			{
+				var row = $('<tr></tr>');
+				for (var z = 0; z < columns; z++)
+				{
+					var column = $('<td><br></td>');
+					$(row).append(column);
+				}
+				$(table).append(row);
+			}
+
+			$(table_box).append(table);
+			var html = $(table_box).html() + '<p></p>';
+
+			this.restoreSelection();
+			this.execCommand('inserthtml', html);
+			this.modalClose();
+			this.observeTables();
+
+		},
+		tableObserver: function(e)
+		{
+			this.$table = $(e.target).closest('table');
+
+			this.$table_tr = this.$table.find('tr');
+			this.$table_td = this.$table.find('td');
+
+			this.$tbody = $(e.target).closest('tbody');
+			this.$thead = $(this.$table).find('thead');
+
+			this.$current_td = $(e.target);
+			this.$current_tr = $(e.target).closest('tr');
+		},
+		deleteTable: function()
+		{
+			$(this.$table).remove();
+			this.$table = false;
+			this.syncCode();
+		},
+		deleteRow: function()
+		{
+			$(this.$current_tr).remove();
+			this.syncCode();
+		},
+		deleteColumn: function()
+		{
+			var index = $(this.$current_td).get(0).cellIndex;
+
+			$(this.$table).find('tr').each(function()
+			{
+				$(this).find('td').eq(index).remove();
+			});
+
+			this.syncCode();
+		},
+		addHead: function()
+		{
+			if ($(this.$table).find('thead').size() !== 0)
+			{
+				this.deleteHead();
+			}
+			else
+			{
+				var tr = $(this.$table).find('tr').first().clone();
+				tr.find('td').html('&nbsp;');
+				this.$thead = $('<thead></thead>');
+				this.$thead.append(tr);
+				$(this.$table).prepend(this.$thead);
+				this.syncCode();
+			}
+		},
+		deleteHead: function()
+		{
+			$(this.$thead).remove();
+			this.$thead = false;
+			this.syncCode();
+		},
+		insertRowAbove: function()
+		{
+			this.insertRow('before');
+		},
+		insertRowBelow: function()
+		{
+			this.insertRow('after');
+		},
+		insertColumnLeft: function()
+		{
+			this.insertColumn('before');
+		},
+		insertColumnRight: function()
+		{
+			this.insertColumn('after');
+		},
+		insertRow: function(type)
+		{
+			var new_tr = $(this.$current_tr).clone();
+			new_tr.find('td').html('&nbsp;');
+			if (type === 'after')
+			{
+				$(this.$current_tr).after(new_tr);
+			}
+			else
+			{
+				$(this.$current_tr).before(new_tr);
+			}
+
+			this.syncCode();
+		},
+		insertColumn: function(type)
+		{
+			var index = 0;
+
+			this.$current_tr.find('td').each($.proxy(function(i,s)
+			{
+				if ($(s)[0] === this.$current_td[0])
+				{
+					index = i;
+				}
+			}, this));
+
+			this.$table_tr.each(function(i,s)
+			{
+				var current = $(s).find('td').eq(index);
+
+				var td = current.clone();
+				td.html('&nbsp;');
+
+				if (type === 'after')
+				{
+					$(current).after(td);
+				}
+				else
+				{
+					$(current).before(td);
+				}
+
+			});
+
+			this.syncCode();
+		},
+
+		// INSERT VIDEO
+		showVideo: function()
+		{
+			this.saveSelection();
+			this.modalInit(RLANG.video, this.opts.modal_video, 600, $.proxy(function()
+				{
+					$('#redactor_insert_video_btn').click($.proxy(this.insertVideo, this));
+
+					setTimeout(function()
+					{
+						$('#redactor_insert_video_area').focus();
+					}, 200);
+
+				}, this)
+			);
+		},
+		insertVideo: function()
+		{
+			var data = $('#redactor_insert_video_area').val();
+			data = this.stripTags(data);
+
+			this.restoreSelection();
+			this.execCommand('inserthtml', data);
+			this.modalClose();
+		},
+
+		// INSERT IMAGE
+		imageEdit: function(e)
+		{
+			var $el = $(e.target);
+			var parent = $el.parent();
+
+			var callback = $.proxy(function()
+			{
+				$('#redactor_file_alt').val($el.attr('alt'));
+				$('#redactor_image_edit_src').attr('href', $el.attr('src'));
+				$('#redactor_form_image_align').val($el.css('float'));
+
+				if ($(parent).get(0).tagName === 'A')
+				{
+					$('#redactor_file_link').val($(parent).attr('href'));
+				}
+
+				$('#redactor_image_delete_btn').click($.proxy(function() { this.imageDelete($el); }, this));
+				$('#redactorSaveBtn').click($.proxy(function() { this.imageSave($el); }, this));
+
+			}, this);
+
+			this.modalInit(RLANG.image, this.opts.modal_image_edit, 380, callback);
+
+		},
+		imageDelete: function(el)
+		{
+			$(el).remove();
+			this.modalClose();
+			this.syncCode();
+		},
+		imageSave: function(el)
+		{
+			var parent = $(el).parent();
+
+			$(el).attr('alt', $('#redactor_file_alt').val());
+
+			var floating = $('#redactor_form_image_align').val();
+
+			if (floating === 'left')
+			{
+				$(el).css({ 'float': 'left', margin: '0 10px 10px 0' });
+			}
+			else if (floating === 'right')
+			{
+				$(el).css({ 'float': 'right', margin: '0 0 10px 10px' });
+			}
+			else
+			{
+				$(el).css({ 'float': 'none', margin: '0' });
+			}
+
+			// as link
+			var link = $.trim($('#redactor_file_link').val());
+			if (link !== '')
+			{
+				if ($(parent).get(0).tagName !== 'A')
+				{
+					$(el).replaceWith('<a href="' + link + '">' + this.outerHTML(el) + '</a>');
+				}
+				else
+				{
+					$(parent).attr('href', link);
+				}
+			}
+			else
+			{
+				if ($(parent).get(0).tagName === 'A')
+				{
+					$(parent).replaceWith(this.outerHTML(el));
+				}
+			}
+
+			this.modalClose();
+			this.observeImages();
+			this.syncCode();
+
+		},
+		showImage: function()
+		{
+			this.saveSelection();
+
+			var callback = $.proxy(function()
+			{
+				// json
+				if (this.opts.imageGetJson !== false)
+				{
+					$.getJSON(this.opts.imageGetJson, $.proxy(function(data) {
+
+						var folders = {};
+						var z = 0;
+
+						// folders
+						$.each(data, $.proxy(function(key, val)
+						{
+							if (typeof val.folder !== 'undefined')
+							{
+								z++;
+								folders[val.folder] = z;
+							}
+
+						}, this));
+
+						var folderclass = false;
+						$.each(data, $.proxy(function(key, val)
+						{
+							// title
+							var thumbtitle = '';
+							if (typeof val.title !== 'undefined')
+							{
+								thumbtitle = val.title;
+							}
+
+							var folderkey = 0;
+							if (!$.isEmptyObject(folders) && typeof val.folder !== 'undefined')
+							{
+								folderkey = folders[val.folder];
+								if (folderclass === false)
+								{
+									folderclass = '.redactorfolder' + folderkey;
+								}
+							}
+
+							var img = $('<img src="' + val.thumb + '" class="redactorfolder redactorfolder' + folderkey + '" rel="' + val.image + '" title="' + thumbtitle + '" />');
+							$('#redactor_image_box').append(img);
+							$(img).click($.proxy(this.imageSetThumb, this));
+
+
+						}, this));
+
+						// folders
+						if (!$.isEmptyObject(folders))
+						{
+							$('.redactorfolder').hide();
+							$(folderclass).show();
+
+							var onchangeFunc = function(e)
+							{
+								$('.redactorfolder').hide();
+								$('.redactorfolder' + $(e.target).val()).show();
+							}
+
+							var select = $('<select id="redactor_image_box_select">');
+							$.each(folders, function(k,v)
+							{
+								select.append($('<option value="' + v + '">' + k + '</option>'));
+							});
+
+							$('#redactor_image_box').before(select);
+							select.change(onchangeFunc);
+						}
+
+					}, this));
+				}
+				else
+				{
+					$('#redactor_tabs a').eq(1).remove();
+				}
+
+				if (this.opts.imageUpload !== false)
+				{
+
+					// dragupload
+					if (this.opts.uploadCrossDomain === false && this.isMobile() === false)
+					{
+
+						if ($('#redactor_file').size() !== 0)
+						{
+							$('#redactor_file').dragupload(
+							{
+								url: this.opts.imageUpload,
+								uploadFields: this.opts.uploadFields,
+								success: $.proxy(this.imageUploadCallback, this),
+								error: $.proxy(this.opts.imageUploadErrorCallback, this)
+							});
+						}
+					}
+
+					// ajax upload
+					this.uploadInit('redactor_file',
+					{
+						auto: true,
+						url: this.opts.imageUpload,
+						success: $.proxy(this.imageUploadCallback, this),
+						error: $.proxy(this.opts.imageUploadErrorCallback, this)
+					});
+				}
+				else
+				{
+					$('.redactor_tab').hide();
+					if (this.opts.imageGetJson === false)
+					{
+						$('#redactor_tabs').remove();
+						$('#redactor_tab3').show();
+					}
+					else
+					{
+						var tabs = $('#redactor_tabs a');
+						tabs.eq(0).remove();
+						tabs.eq(1).addClass('redactor_tabs_act');
+						$('#redactor_tab2').show();
+					}
+				}
+
+				$('#redactor_upload_btn').click($.proxy(this.imageUploadCallbackLink, this));
+
+				if (this.opts.imageUpload === false && this.opts.imageGetJson === false)
+				{
+					setTimeout(function()
+					{
+						$('#redactor_file_link').focus();
+					}, 200);
+
+				}
+
+			}, this);
+
+			this.modalInit(RLANG.image, this.opts.modal_image, 610, callback);
+
+		},
+		imageSetThumb: function(e)
+		{
+			this._imageSet('<img src="' + $(e.target).attr('rel') + '" alt="' + $(e.target).attr('title') + '" />', true);
+		},
+		imageUploadCallbackLink: function()
+		{
+			if ($('#redactor_file_link').val() !== '')
+			{
+				var data = '<img src="' + $('#redactor_file_link').val() + '" />';
+				this._imageSet(data, true);
+			}
+			else
+			{
+				this.modalClose();
+			}
+		},
+		imageUploadCallback: function(data)
+		{
+			this._imageSet(data);
+		},
+		_imageSet: function(json, link)
+		{
+			this.restoreSelection();
+
+			if (json !== false)
+			{
+				var html = '';
+				if (link !== true)
+				{
+					html = '<p><img src="' + json.filelink + '" /></p>';
+				}
+				else
+				{
+					html = json;
+				}
+
+				this.execCommand('inserthtml', html);
+
+				// upload image callback
+				if (link !== true && typeof this.opts.imageUploadCallback === 'function')
+				{
+					this.opts.imageUploadCallback(this, json);
+				}
+			}
+
+			this.modalClose();
+			this.observeImages();
+		},
+
+		// INSERT LINK
+		showLink: function()
+		{
+			this.saveSelection();
+
+			var callback = $.proxy(function()
+			{
+				this.insert_link_node = false;
+				var sel = this.getSelection();
+				var url = '', text = '', target = '';
+
+				if (this.browser('msie'))
+				{
+					var parent = this.getParentNode();
+					if (parent.nodeName === 'A')
+					{
+						this.insert_link_node = $(parent);
+						text = this.insert_link_node.text();
+						url = this.insert_link_node.attr('href');
+						target = this.insert_link_node.attr('target');
+					}
+					else
+					{
+						if (this.oldIE())
+						{
+							text = sel.text;
+						}
+						else
+						{
+							text = sel.toString();
+						}
+					}
+				}
+				else
+				{
+					if (sel && sel.anchorNode && sel.anchorNode.parentNode.tagName === 'A')
+					{
+						url = sel.anchorNode.parentNode.href;
+						text = sel.anchorNode.parentNode.text;
+						target = sel.anchorNode.parentNode.target;
+
+						if (sel.toString() === '')
+						{
+							this.insert_link_node = sel.anchorNode.parentNode;
+						}
+					}
+					else
+					{
+						text = sel.toString();
+					}
+				}
+
+				$('.redactor_link_text').val(text);
+
+				var thref = self.location.href.replace(/\/$/i, '');
+				var turl = url.replace(thref, '');
+
+				if (url.search('mailto:') === 0)
+				{
+					this.setModalTab(2);
+
+					$('#redactor_tab_selected').val(2);
+					$('#redactor_link_mailto').val(url.replace('mailto:', ''));
+				}
+				else if (turl.search(/^#/gi) === 0)
+				{
+					this.setModalTab(3);
+
+					$('#redactor_tab_selected').val(3);
+					$('#redactor_link_anchor').val(turl.replace(/^#/gi, ''));
+				}
+				else
+				{
+					$('#redactor_link_url').val(turl);
+				}
+
+				if (target === '_blank')
+				{
+					$('#redactor_link_blank').attr('checked', true);
+				}
+
+				$('#redactor_insert_link_btn').click($.proxy(this.insertLink, this));
+
+				setTimeout(function()
+				{
+					$('#redactor_link_url').focus();
+				}, 200);
+
+			}, this);
+
+			this.modalInit(RLANG.link, this.opts.modal_link, 460, callback);
+
+		},
+		insertLink: function()
+		{
+			var tab_selected = $('#redactor_tab_selected').val();
+			var link = '', text = '', targettext = '', target = '';
+
+			if (tab_selected === '1') // url
+			{
+				link = $('#redactor_link_url').val();
+				text = $('#redactor_link_url_text').val();
+
+				if ($('#redactor_link_blank').prop('checked'))
+				{
+					targettext = ' target="_blank"';
+					target = '_blank';
+				}
+
+				// test url
+				var pattern = '/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/';
+				//var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}';
+				var re = new RegExp('^(http|ftp|https)://' + pattern,'i');
+				var re2 = new RegExp('^' + pattern,'i');
+				if (link.search(re) == -1 && link.search(re2) == 0 && this.opts.protocol !== false)
+				{
+					link = this.opts.protocol + link;
+				}
+
+			}
+			else if (tab_selected === '2') // mailto
+			{
+				link = 'mailto:' + $('#redactor_link_mailto').val();
+				text = $('#redactor_link_mailto_text').val();
+			}
+			else if (tab_selected === '3') // anchor
+			{
+				link = '#' + $('#redactor_link_anchor').val();
+				text = $('#redactor_link_anchor_text').val();
+			}
+
+			this._insertLink('<a href="' + link + '"' + targettext + '>' +  text + '</a>', $.trim(text), link, target);
+
+		},
+		_insertLink: function(a, text, link, target)
+		{
+			this.$editor.focus();
+			this.restoreSelection();
+
+			if (text !== '')
+			{
+				if (this.insert_link_node)
+				{
+					$(this.insert_link_node).text(text);
+					$(this.insert_link_node).attr('href', link);
+					if (target !== '')
+					{
+						$(this.insert_link_node).attr('target', target);
+					}
+					else
+					{
+						$(this.insert_link_node).removeAttr('target');
+					}
+
+					this.syncCode();
+				}
+				else
+				{
+					this.execCommand('inserthtml', a);
+				}
+			}
+
+			this.modalClose();
+		},
+
+		// INSERT FILE
+		showFile: function()
+		{
+			this.saveSelection();
+
+			var callback = $.proxy(function()
+			{
+				var sel = this.getSelection();
+
+				var text = '';
+
+				if (this.oldIE())
+				{
+					text = sel.text;
+				}
+				else
+				{
+					text = sel.toString();
+				}
+
+				$('#redactor_filename').val(text);
+
+				// dragupload
+				if (this.opts.uploadCrossDomain === false && this.isMobile() === false)
+				{
+					$('#redactor_file').dragupload(
+					{
+						url: this.opts.fileUpload,
+						uploadFields: this.opts.uploadFields,
+						success: $.proxy(this.fileUploadCallback, this),
+						error: $.proxy(this.opts.fileUploadErrorCallback, this)
+					});
+				}
+
+				this.uploadInit('redactor_file',
+				{
+					auto: true,
+					url: this.opts.fileUpload,
+					success: $.proxy(this.fileUploadCallback, this),
+					error: $.proxy(this.opts.fileUploadErrorCallback, this)
+				});
+
+			}, this);
+
+			this.modalInit(RLANG.file, this.opts.modal_file, 500, callback);
+		},
+		fileUploadCallback: function(json)
+		{
+			this.restoreSelection();
+
+			if (json !== false)
+			{
+				var text = $('#redactor_filename').val();
+
+				if (text === '')
+				{
+					text = json.filename;
+				}
+
+				var link = '<a href="' + json.filelink + '">' + text + '</a>';
+
+				// chrome fix
+				if (this.browser('webkit') && !!this.window.chrome)
+				{
+					link = link + '&nbsp;';
+				}
+
+				this.execCommand('inserthtml', link);
+
+				// file upload callback
+				if (typeof this.opts.fileUploadCallback === 'function')
+				{
+					this.opts.fileUploadCallback(this, json);
+				}
+			}
+
+			this.modalClose();
+		},
+
+
+
+		// MODAL
+		modalInit: function(title, content, width, callback)
+		{
+			// modal overlay
+			if ($('#redactor_modal_overlay').size() === 0)
+			{
+				this.overlay = $('<div id="redactor_modal_overlay" style="display: none;"></div>');
+				$('body').prepend(this.overlay);
+			}
+
+			if (this.opts.overlay)
+			{
+				$('#redactor_modal_overlay').show();
+				$('#redactor_modal_overlay').click($.proxy(this.modalClose, this));
+			}
+
+			if ($('#redactor_modal').size() === 0)
+			{
+				this.modal = $('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><div id="redactor_modal_header"></div><div id="redactor_modal_inner"></div></div>');
+				$('body').append(this.modal);
+			}
+
+			$('#redactor_modal_close').click($.proxy(this.modalClose, this));
+
+			this.hdlModalClose = $.proxy(function(e) { if ( e.keyCode === 27) { this.modalClose(); return false; } }, this);
+
+			$(document).keyup(this.hdlModalClose);
+			this.$editor.keyup(this.hdlModalClose);
+
+			// set content
+			if (content.indexOf('#') == 0)
+			{
+				$('#redactor_modal_inner').empty().append($(content).html());
+			}
+			else
+			{
+				$('#redactor_modal_inner').empty().append(content);
+			}
+
+
+			$('#redactor_modal_header').html(title);
+
+			// draggable
+			if (typeof $.fn.draggable !== 'undefined')
+			{
+				$('#redactor_modal').draggable({ handle: '#redactor_modal_header' });
+				$('#redactor_modal_header').css('cursor', 'move');
+			}
+
+			// tabs
+			if ($('#redactor_tabs').size() !== 0)
+			{
+				var that = this;
+				$('#redactor_tabs a').each(function(i,s)
+				{
+					i++;
+					$(s).click(function()
+					{
+						$('#redactor_tabs a').removeClass('redactor_tabs_act');
+						$(this).addClass('redactor_tabs_act');
+						$('.redactor_tab').hide();
+						$('#redactor_tab' + i).show();
+						$('#redactor_tab_selected').val(i);
+
+						if (that.isMobile() === false)
+						{
+							var height = $('#redactor_modal').outerHeight();
+							$('#redactor_modal').css('margin-top', '-' + (height+10)/2 + 'px');
+						}
+					});
+				});
+			}
+
+			$('#redactor_modal .redactor_btn_modal_close').click($.proxy(this.modalClose, this));
+
+			if (this.isMobile() === false)
+			{
+				$('#redactor_modal').css({ position: 'fixed', top: '-2000px', left: '50%', width: width + 'px', marginLeft: '-' + (width+60)/2 + 'px' }).show();
+
+				this.modalSaveBodyOveflow = $(document.body).css('overflow');
+				$(document.body).css('overflow', 'hidden');
+			}
+			else
+			{
+				$('#redactor_modal').css({ position: 'fixed', width: '100%', height: '100%', top: '0', left: '0', margin: '0', minHeight: '300px' }).show();
+			}
+
+			// callback
+			if (typeof callback === 'function')
+			{
+				callback();
+			}
+
+			if (this.isMobile() === false)
+			{
+				setTimeout(function()
+				{
+					var height = $('#redactor_modal').outerHeight();
+					$('#redactor_modal').css({ top: '50%', height: 'auto', minHeight: 'auto', marginTop: '-' + (height+10)/2 + 'px' });
+
+				}, 20);
+			}
+
+		},
+		modalClose: function()
+		{
+			$('#redactor_modal_close').unbind('click', this.modalClose);
+			$('#redactor_modal').fadeOut('fast', $.proxy(function()
+			{
+				$('#redactor_modal_inner').html('');
+
+				if (this.opts.overlay)
+				{
+					$('#redactor_modal_overlay').hide();
+					$('#redactor_modal_overlay').unbind('click', this.modalClose);
+				}
+
+				$(document).unbind('keyup', this.hdlModalClose);
+				this.$editor.unbind('keyup', this.hdlModalClose);
+
+			}, this));
+
+
+			if (this.isMobile() === false)
+			{
+				$(document.body).css('overflow', this.modalSaveBodyOveflow ? this.modalSaveBodyOveflow : 'visible');
+			}
+
+			return false;
+
+		},
+		setModalTab: function(num)
+		{
+			$('.redactor_tab').hide();
+			var tabs = $('#redactor_tabs a');
+			tabs.removeClass('redactor_tabs_act');
+			tabs.eq(num-1).addClass('redactor_tabs_act');
+			$('#redactor_tab' + num).show();
+		},
+
+		// UPLOAD
+		uploadInit: function(element, options)
+		{
+			// Upload Options
+			this.uploadOptions = {
+				url: false,
+				success: false,
+				error: false,
+				start: false,
+				trigger: false,
+				auto: false,
+				input: false
+			};
+
+			$.extend(this.uploadOptions, options);
+
+			// Test input or form
+			if ($('#' + element).size() !== 0 && $('#' + element).get(0).tagName === 'INPUT')
+			{
+				this.uploadOptions.input = $('#' + element);
+				this.element = $($('#' + element).get(0).form);
+			}
+			else
+			{
+				this.element = $('#' + element);
+			}
+
+			this.element_action = this.element.attr('action');
+
+			// Auto or trigger
+			if (this.uploadOptions.auto)
+			{
+				$(this.uploadOptions.input).change($.proxy(function()
+				{
+					this.element.submit(function(e) { return false; });
+					this.uploadSubmit();
+				}, this));
+
+			}
+			else if (this.uploadOptions.trigger)
+			{
+				$('#' + this.uploadOptions.trigger).click($.proxy(this.uploadSubmit, this));
+			}
+		},
+		uploadSubmit : function()
+		{
+			this.uploadForm(this.element, this.uploadFrame());
+		},
+		uploadFrame : function()
+		{
+			this.id = 'f' + Math.floor(Math.random() * 99999);
+
+			var d = this.document.createElement('div');
+			var iframe = '<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';
+			d.innerHTML = iframe;
+			$(d).appendTo("body");
+
+			// Start
+			if (this.uploadOptions.start)
+			{
+				this.uploadOptions.start();
+			}
+
+			$('#' + this.id).load($.proxy(this.uploadLoaded, this));
+
+			return this.id;
+		},
+		uploadForm : function(f, name)
+		{
+			if (this.uploadOptions.input)
+			{
+				var formId = 'redactorUploadForm' + this.id;
+				var fileId = 'redactorUploadFile' + this.id;
+				this.form = $('<form  action="' + this.uploadOptions.url + '" method="POST" target="' + name + '" name="' + formId + '" id="' + formId + '" enctype="multipart/form-data"></form>');
+
+				// append hidden fields
+				if (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')
+				{
+					$.each(this.opts.uploadFields, $.proxy(function(k,v)
+					{
+						if (v.toString().indexOf('#') === 0)
+						{
+							v = $(v).val();
+						}
+
+						var hidden = $('<input/>', {'type': "hidden", 'name': k, 'value': v});
+						$(this.form).append(hidden);
+
+					}, this));
+				}
+
+				var oldElement = this.uploadOptions.input;
+				var newElement = $(oldElement).clone();
+				$(oldElement).attr('id', fileId);
+				$(oldElement).before(newElement);
+				$(oldElement).appendTo(this.form);
+				$(this.form).css('position', 'absolute');
+				$(this.form).css('top', '-2000px');
+				$(this.form).css('left', '-2000px');
+				$(this.form).appendTo('body');
+
+				this.form.submit();
+			}
+			else
+			{
+				f.attr('target', name);
+				f.attr('method', 'POST');
+				f.attr('enctype', 'multipart/form-data');
+				f.attr('action', this.uploadOptions.url);
+
+				this.element.submit();
+			}
+
+		},
+		uploadLoaded : function()
+		{
+			var i = $('#' + this.id)[0];
+			var d;
+
+			if (i.contentDocument)
+			{
+				d = i.contentDocument;
+			}
+			else if (i.contentWindow)
+			{
+				d = i.contentWindow.document;
+			}
+			else
+			{
+				d = window.frames[this.id].document;
+			}
+
+			// Success
+			if (this.uploadOptions.success)
+			{
+				if (typeof d !== 'undefined')
+				{
+					// Remove bizarre <pre> tag wrappers around our json data:
+					var rawString = d.body.innerHTML;
+					var jsonString = rawString.match(/\{(.|\n)*\}/)[0];
+					var json = $.parseJSON(jsonString);
+
+					if (typeof json.error == 'undefined')
+					{
+						this.uploadOptions.success(json);
+					}
+					else
+					{
+						this.uploadOptions.error(this, json);
+						this.modalClose();
+					}
+				}
+				else
+				{
+					alert('Upload failed!');
+					this.modalClose();
+				}
+			}
+
+			this.element.attr('action', this.element_action);
+			this.element.attr('target', '');
+
+		},
+
+		// UTILITY
+		browser: function(browser)
+		{
+			var ua = navigator.userAgent.toLowerCase();
+			var match = /(chrome)[ \/]([\w.]+)/.exec(ua) || /(webkit)[ \/]([\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua) || /(msie) ([\w.]+)/.exec(ua) || ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua) || [];
+
+			if (browser == 'version')
+			{
+				return match[2];
+			}
+
+			if (browser == 'webkit')
+			{
+				return (match[1] == 'chrome' || match[1] == 'webkit');
+			}
+
+			return match[1] == browser;
+		},
+		oldIE: function()
+		{
+			if (this.browser('msie') && parseInt(this.browser('version'), 10) < 9)
+			{
+				return true;
+			}
+
+			return false;
+		},
+		outerHTML: function(s)
+		{
+			return $("<p>").append($(s).eq(0).clone()).html();
+		},
+		normalize: function(str)
+		{
+			return parseInt(str.replace('px',''), 10);
+		},
+		isMobile: function(ipad)
+		{
+			if (ipad === true && /(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent))
+			{
+				return true;
+			}
+			else if (/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent))
+			{
+				return true;
+			}
+			else
+			{
+				return false;
+			}
+		}
+
+	};
+
+
+	// API
+	$.fn.getObject = function()
+	{
+		return this.data('redactor');
+	};
+
+	$.fn.getEditor = function()
+	{
+		return this.data('redactor').$editor;
+	};
+
+	$.fn.getCode = function()
+	{
+		return $.trim(this.data('redactor').getCode());
+	};
+
+	$.fn.getText = function()
+	{
+		return this.data('redactor').$editor.text();
+	};
+
+	$.fn.getSelected = function()
+	{
+		return this.data('redactor').getSelectedHtml();
+	};
+
+	$.fn.setCode = function(html)
+	{
+		this.data('redactor').setCode(html);
+	};
+
+	$.fn.insertHtml = function(html)
+	{
+		this.data('redactor').insertHtml(html);
+	};
+
+	$.fn.destroyEditor = function()
+	{
+		this.each(function()
+		{
+			if (typeof $(this).data('redactor') != 'undefined')
+			{
+				$(this).data('redactor').destroy();
+				$(this).removeData('redactor');
+			}
+		});
+	};
+
+	$.fn.setFocus = function()
+	{
+		this.data('redactor').$editor.focus();
+	};
+
+	$.fn.execCommand = function(cmd, param)
+	{
+		this.data('redactor').execCommand(cmd, param);
+	};
+
+})(jQuery);
+
+/*
+	Plugin Drag and drop Upload v1.0.2
+	http://imperavi.com/
+	Copyright 2012, Imperavi Inc.
+*/
+(function($){
+
+	"use strict";
+
+	// Initialization
+	$.fn.dragupload = function(options)
+	{
+		return this.each(function() {
+			var obj = new Construct(this, options);
+			obj.init();
+		});
+	};
+
+	// Options and variables
+	function Construct(el, options) {
+
+		this.opts = $.extend({
+
+			url: false,
+			success: false,
+			error: false,
+			preview: false,
+			uploadFields: false,
+
+			text: RLANG.drop_file_here,
+			atext: RLANG.or_choose
+
+		}, options);
+
+		this.$el = $(el);
+	}
+
+	// Functionality
+	Construct.prototype = {
+		init: function()
+		{
+			if (navigator.userAgent.search("MSIE") === -1)
+			{
+				this.droparea = $('<div class="redactor_droparea"></div>');
+				this.dropareabox = $('<div class="redactor_dropareabox">' + this.opts.text + '</div>');
+				this.dropalternative = $('<div class="redactor_dropalternative">' + this.opts.atext + '</div>');
+
+				this.droparea.append(this.dropareabox);
+
+				this.$el.before(this.droparea);
+				this.$el.before(this.dropalternative);
+
+				// drag over
+				this.dropareabox.bind('dragover', $.proxy(function() { return this.ondrag(); }, this));
+
+				// drag leave
+				this.dropareabox.bind('dragleave', $.proxy(function() { return this.ondragleave(); }, this));
+
+				var uploadProgress = $.proxy(function(e)
+				{
+					var percent = parseInt(e.loaded / e.total * 100, 10);
+					this.dropareabox.text('Loading ' + percent + '%');
+
+				}, this);
+
+				var xhr = jQuery.ajaxSettings.xhr();
+
+				if (xhr.upload)
+				{
+					xhr.upload.addEventListener('progress', uploadProgress, false);
+				}
+
+				var provider = function () { return xhr; };
+
+				// drop
+				this.dropareabox.get(0).ondrop = $.proxy(function(event)
+				{
+					event.preventDefault();
+
+					this.dropareabox.removeClass('hover').addClass('drop');
+
+					var file = event.dataTransfer.files[0];
+					var fd = new FormData();
+
+					// append hidden fields
+					if (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')
+					{
+						$.each(this.opts.uploadFields, $.proxy(function(k,v)
+						{
+							if (v.toString().indexOf('#') === 0)
+							{
+								v = $(v).val();
+							}
+
+							fd.append(k, v);
+
+						}, this));
+					}
+
+					// append file data
+					fd.append('file', file);
+
+					$.ajax({
+						url: this.opts.url,
+						dataType: 'html',
+						data: fd,
+						xhr: provider,
+						cache: false,
+						contentType: false,
+						processData: false,
+						type: 'POST',
+						success: $.proxy(function(data)
+						{
+							var json = $.parseJSON(data);
+
+							if (typeof json.error == 'undefined')
+							{
+								this.opts.success(json);
+							}
+							else
+							{
+								this.opts.error(this, json);
+								this.opts.success(false);
+							}
+
+						}, this)
+					});
+
+
+				}, this);
+			}
+		},
+		ondrag: function()
+		{
+			this.dropareabox.addClass('hover');
+			return false;
+		},
+		ondragleave: function()
+		{
+			this.dropareabox.removeClass('hover');
+			return false;
+		}
+	};
+
+})(jQuery);
+
+
+
+// Define: Linkify plugin from stackoverflow
+(function($){
+
+	"use strict";
+
+	var protocol = 'http://';
+	var url1 = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,
+	url2 = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,
+
+		linkifyThis = function ()
+		{
+			var childNodes = this.childNodes,
+			i = childNodes.length;
+			while(i--)
+			{
+				var n = childNodes[i];
+				if (n.nodeType === 3)
+				{
+					var html = n.nodeValue;
+					if (html)
+					{
+						html = html.replace(/&/g, '&amp;')
+									.replace(/</g, '&lt;')
+									.replace(/>/g, '&gt;')
+									.replace(url1, '$1<a href="' + protocol + '$2">$2</a>$3')
+									.replace(url2, '$1<a href="$2">$2</a>$5');
+
+						$(n).after(html).remove();
+					}
+				}
+				else if (n.nodeType === 1  &&  !/^(a|button|textarea)$/i.test(n.tagName))
+				{
+					linkifyThis.call(n);
+				}
+			}
+		};
+
+	$.fn.linkify = function ()
+	{
+		this.each(linkifyThis);
+	};
+
+})(jQuery);
+
+
+/* jQuery plugin textselect
+ * version: 0.9
+ * author: Josef Moravec
+ * updated: Imperavi Inc.
+ *
+ */
+(function ($) {
+    $.event.special.textselect =
+    {
+        setup: function (data, namespaces)
+        {
+
+            $(this).data("textselected", false);
+            $(this).data("ttt", data);
+            $(this).on('mouseup', $.event.special.textselect.handler)
+        },
+        teardown: function (data)
+        {
+            $(this).off('mouseup', $.event.special.textselect.handler)
+        },
+        handler: function (event)
+        {
+            var data = $(this).data("ttt");
+            var text = $.event.special.textselect.getSelectedText(data).toString();
+
+            if (text != '')
+            {
+                $(this).data("textselected", true);
+                event.type = "textselect";
+                event.text = text;
+
+                $.event.dispatch.apply(this, arguments)
+            }
+        },
+        getSelectedText: function (data)
+        {
+            var text = '';
+            if (rwindow.getSelection) text = rwindow.getSelection();
+            else if (rdocument.getSelection) text = rdocument.getSelection();
+            else if (rdocument.selection) text = rdocument.selection.createRange().text;
+            return text
+        }
+    };
+    $.event.special.textunselect =
+    {
+        setup: function (data, namespaces)
+        {
+            $(this).data("rttt", data);
+            $(this).data("textselected", false);
+            $(this).on('mouseup', $.event.special.textunselect.handler);
+            $(this).on('keyup', $.event.special.textunselect.handlerKey)
+        },
+        teardown: function (data)
+        {
+            $(this).unbind('mouseup', $.event.special.textunselect.handler)
+        },
+        handler: function (event)
+        {
+            if ($(this).data("textselected"))
+            {
+                var data = $(this).data("rttt");
+                var text = $.event.special.textselect.getSelectedText(data).toString();
+                if (text == '')
+                {
+                    $(this).data("textselected", false);
+                    event.type = "textunselect";
+                    $.event.dispatch.apply(this, arguments)
+                }
+            }
+        },
+        handlerKey: function (event)
+        {
+            if ($(this).data("textselected"))
+            {
+                var data = $(this).data("rttt");
+                var text = $.event.special.textselect.getSelectedText(data).toString();
+                if ((event.keyCode = 27) && (text == ''))
+                {
+                    $(this).data("textselected", false);
+                    event.type = "textunselect";
+                    $.event.dispatch.apply(this, arguments)
+                }
+            }
+        }
+    }
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor.min.js elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor.min.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/redactor/redactor.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/js/redactor/redactor.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,12 @@
+/*
+	Redactor v8.2.3
+	Updated: March 6, 2013
+
+	http://redactorjs.com/
+
+	Copyright (c) 2009-2013, Imperavi Inc.
+	License: http://redactorjs.com/license/
+
+	Usage: $('#content').redactor();
+*/
+eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('x 49,3k;q(O 5m==="1b"){x 5m={}}x F={Q:"bw",1T:"3b 9z",3h:"3b b3",1h:"6T",2g:"b4",92:"3b 2g",4w:"bt",2X:"bu",8Y:"bk",8X:"bs",5z:"9y",8M:"5a 1",7U:"5a 2",7N:"5a 3",8b:"5a 4",2q:"be",2t:"bp",3o:"bZ aN",2R:"bR aN",3e:"bN aD",3c:"bx aD",3v:"bS",3p:"bT",3C:"bY",43:"3b",5S:"bX",8u:"45",70:"3b 6T",6Z:"4a 6V bD",7B:"4a 6V by",71:"4a 6W aT",7H:"4a 6W aY",7b:"45 6W",6R:"45 6V",6B:"45 6T",7W:"bA",95:"bB",6t:"4a aX",6S:"45 aX",K:"bC",8v:"bM",1S:"bV",1o:"aT",2Z:"aY",8f:"b3 bO b4",V:"aU",4B:"7r",bh:"7D",91:"9z bm 9y",22:"3b bg",3W:"a0",bP:"bH",5H:"bI",9s:"bK 5H",9f:"bL 22 bU",6v:"aa V a7 9U 1o",6E:"bW V",6M:"aa V a7 9U 2Z",7u:"bi V",4Y:"3b b9 ba",2W:"bj",7n:"bv",85:"bq 2g bo 2C bd",3T:"bf",5n:"dy"};(v(b){3L.fn.1N=v(c){D 7.1i(v(){x e=b(7);x d=e.11("1N");q(!d){e.11("1N",(d=2C a(7,c)))}})};x a=v(d,c){7.$el=b(d);q(O c!=="1b"&&O c.4d!=="1b"&&c.4d!=="en"&&O 5m[c.4d]!=="1b"){F=5m[c.4d]}7.B=b.3m({1t:y,R:y,4d:"en",6X:"d0",23:y,7F:y,6N:y,7L:y,5B:y,96:M,1e:y,4K:y,42:M,4i:y,2u:y,8N:0,8l:y,4M:M,1C:M,8Z:M,1I:y,83:y,8H:M,7G:M,7y:"6Q://",5j:y,65:y,8r:60,4q:y,4l:y,3Y:y,5R:y,4X:y,40:y,7A:y,7q:y,28:y,2y:M,4p:M,8R:["1d","18","3d","2I","2h","cZ","cY","2s","6a","6l","d2","d7","d6","d5","d4","cX","cW","cP","aV","cO","cN","5z","1L","E","17","a","br","p","b","i","9n","9r","u","2x","1T","4M","cM","2G","1t","1P","2l","3M","2a","cQ","cV","cU","2N","33","1m","8E","dl","dt","dd","c0","cS","d8","1n","5z","5W","dr","9L","em","1h","1J","1c","4g","38","1U","8K","4m","4n","4o","4j","6e","6q"],4I:y,98:{},7T:[],35:["Q","|","2X","|","2q","2t","2W","|","3e","3c","3v","3p","|","3h","1T","22","1h","2g","|","3o","2R","|","5n","|","4Y"],8p:["2X","|","2q","2t","2W","|","3e","3c","3v","3p","|","3o","2R"],9g:["p","2a","1n","4m","4n","4o","4j"],53:["2W","2t","2q","3T","3e","3c"],7Y:{b:"2q",9L:"2q",i:"2t",em:"2t",9n:"2W",9r:"2W",2N:"3e",33:"3c",u:"3T"},5Y:["#dp","#do","#du","#dx","#dw","#dv","#dn","#dm","#de","#dc","#da","#dg","#7O","#di","#cK","#cg","#cf","#ce","#ch","#ci","#cm","#cj","#c4","#c3","#c1","#c5","#c9","#c7","#co","#cE","#80","#cC","#cB","#cF","#cG","#cH","#cv","#cT","#cw","#cx","#cy","#80","#cu","#ct","#cp","#cq","#cr","#cs","#cz","#cA","#cI","#cJ","#cD","#cn","#c8","#7O","#ca","#c6","#c2","#cb","#cc","#ck","#cl","#cd","#cL","#dh"],5s:"<p><br /></p>",3w:y,3z:M,af:2U()+\'<E I="3V"><1d I="dj" 4u="5p" 3a="" 5e="5d/1d-11"><17>dk (df)</17><18 1f="V" I="7x" N="2z" /><E 1x="3O-1s: db;"><18 1f="22" I="3r" 1v="22" /></E></1d><br></E>\',9i:2U()+\'<E I="3V"><17>\'+F.K+\'</17><18 I="6c" N="2z" /><17>\'+F.2g+\'</17><18 I="36" N="2z" /><17>\'+F.8v+\'</17><2I I="6f"><2h 1X="1S">\'+F.1S+\'</2h><2h 1X="1o">\'+F.1o+\'</2h><2h 1X="2Z">\'+F.2Z+\'</2h></2I></E><E I="48"><a 12="1G:1K(X);" I="9a" N="2e">\'+F.8u+\'</a>&1F;&1F;&1F;<a 12="1G:1K(X);" N="2e 3Z">\'+F.3C+\'</a><18 1f="3d" 1v="5S" N="2e" I="9h" 1X="\'+F.5S+\'" /></E>\',9q:2U()+\'<E I="3V"><E I="2L"><a 12="1G:1K(X);" N="3y">\'+F.3W+\'</a><a 12="1G:1K(X);">\'+F.5H+\'</a><a 12="1G:1K(X);">\'+F.2g+\'</a></E><1d I="ds" 4u="5p" 3a="" 5e="5d/1d-11"><E I="87" N="2n"><18 1f="22" I="3r" 1v="22" /></E><E I="5P" N="2n" 1x="2P: 1S;"><E I="5M"></E></E></1d><E I="5O" N="2n" 1x="2P: 1S;"><17>\'+F.8f+\'</17><18 1f="V" 1v="36" I="36" N="2z"  /></E></E><E I="48"><a 12="1G:1K(X);" N="2e 3Z">\'+F.3C+\'</a><18 1f="3d" 1v="3W" N="2e" I="9k" 1X="\'+F.43+\'" /></E>\',ac:2U()+\'<E I="3V"><1d I="dq" 4u="5p" 3a=""><E I="2L"><a 12="1G:1K(X);" N="3y">7D</a><a 12="1G:1K(X);">7r</a><a 12="1G:1K(X);">\'+F.7n+\'</a></E><18 1f="6x" I="4h" 1X="1" /><E N="2n" I="87"><17>7D</17><18 1f="V" I="59" N="2z"  /><17>\'+F.V+\'</17><18 1f="V" N="2z 57" I="a6" /><17><18 1f="d9" I="7o"> \'+F.85+\'</17></E><E N="2n" I="5P" 1x="2P: 1S;"><17>7r</17><18 1f="V" I="7t" N="2z" /><17>\'+F.V+\'</17><18 1f="V" N="2z 57" I="ae" /></E><E N="2n" I="5O" 1x="2P: 1S;"><17>\'+F.7n+\'</17><18 1f="V" N="2z" I="6s"  /><17>\'+F.V+\'</17><18 1f="V" N="2z 57" I="ak" /></E></1d></E><E I="48"><a 12="1G:1K(X);" N="2e 3Z">\'+F.3C+\'</a><18 1f="3d" N="2e" I="ab" 1X="\'+F.43+\'" /></E>\',aW:2U()+\'<E I="3V"><17>\'+F.7W+\'</17><18 1f="V" 2b="5" 1X="2" I="64" /><17>\'+F.95+\'</17><18 1f="V" 2b="5" 1X="3" I="au" /></E><E I="48"><a 12="1G:1K(X);" N="2e 3Z">\'+F.3C+\'</a><18 1f="3d" 1v="3W" N="2e" I="b7" 1X="\'+F.43+\'" /></E>\',9H:2U()+\'<E I="3V"><1d I="cR"><17>\'+F.91+\'</17><2s I="6n" 1x="21: 99%; 1q: d3;"></2s></1d></E><E I="48"><a 12="1G:1K(X);" N="2e 3Z">\'+F.3C+\'</a><18 1f="3d" N="2e" I="9F" 1X="\'+F.43+\'" /></E>\',Z:{Q:{K:F.Q,1g:"8G"},2X:{K:F.2X,1g:"1k",24:{p:{K:F.8Y,15:"2f"},2a:{K:F.8X,15:"2f",2j:"d1"},1n:{K:F.5z,15:"2f",2j:"bl"},4m:{K:F.8M,15:"2f",2j:"bc"},4n:{K:F.7U,15:"2f",2j:"bQ"},4o:{K:F.7N,15:"2f",2j:"bF"},4j:{K:F.8b,15:"2f",2j:"bJ"}}},2q:{K:F.2q,15:"2q"},2t:{K:F.2t,15:"2t"},2W:{K:F.2W,15:"bG"},3T:{K:F.3T,15:"3T"},3e:{K:"&bb; "+F.3e,15:"8g"},3c:{K:"1. "+F.3c,15:"7Z"},3v:{K:"< "+F.3v,15:"3v"},3p:{K:"> "+F.3p,15:"3p"},3h:{K:F.3h,1g:"9c"},1T:{K:F.1T,1g:"9I"},22:{K:F.22,1g:"ai"},1h:{K:F.1h,1g:"1k",24:{70:{K:F.70,1g:"b5"},bn:{1v:"5x"},6Z:{K:F.6Z,1g:"9w"},7B:{K:F.7B,1g:"9C"},71:{K:F.71,1g:"9D"},7H:{K:F.7H,1g:"9J"},bE:{1v:"5x"},6t:{K:F.6t,1g:"an"},6S:{K:F.6S,1g:"62"},bz:{1v:"5x"},7b:{K:F.7b,1g:"9v"},6R:{K:F.6R,1g:"9u"},6B:{K:F.6B,1g:"9x"}}},2g:{K:F.2g,1g:"1k",24:{2g:{K:F.92,1g:"9l"},4w:{K:F.4w,15:"4w"}}},3o:{K:F.3o,1g:"1k"},2R:{K:F.2R,1g:"1k"},5n:{K:F.5n,1g:"1k",24:{7c:{K:F.6v,15:"6C"},7g:{K:F.6E,15:"5k"},7k:{K:F.6M,15:"5f"},4b:{K:F.7u,15:"5g"}}},7c:{15:"6C",K:F.6v},7g:{15:"5k",K:F.6E},7k:{15:"5f",K:F.6M},4b:{15:"5g",K:F.7u},4Y:{15:"7K",K:F.4Y}}},c,7.$el.11());7.4A=[];7.3Q()};a.9E={3Q:v(){7.1q=7.$el.R("1q");7.21=7.$el.R("21");3k=7.L=L;49=7.1Q=1Q;q(7.B.8Z===y&&7.2F()){7.6Y(M);D y}q(7.B.1t){7.B.42=y}q(7.B.1I){7.B.35=7.B.8p}C{q(7.B.Z!==y){q(7.B.4M===y){x d=7.B.35.31("Q");x e=7.B.35[d+1];7.B.35.8D(d,1);q(O e!=="1b"&&e==="|"){7.B.35.8D(d,1)}}b.3m(7.B.Z,7.B.98);b.1i(7.B.7T,b.G(v(f,g){7.B.35.68(g)},7))}}q(7.B.Z!==y){b.1i(7.B.Z.2X.24,b.G(v(f,g){q(b.5h(f,7.B.9g)=="-1"){8e 7.B.Z.2X.24[f]}},7))}v c(){7.8h();7.8w();q(O 7.B.5B==="1P"){b.1i(7.B.5B,b.G(v(j,k){q(O 6k[k]!=="1b"){b.3m(7,6k[k]);q(O 6k[k].3Q!=="1b"){7.3Q()}}},7))}q(7.B.53!==y&&7.B.Z!==y){x g=b.G(v(){7.7P()},7);7.$J.16(g).2K(g)}x i=y;q(7.1j("3l")&&3U.3R.31("94")===-1){x f=7.1j("4Q").88(".");q(f[0]<ef){i=M}}q(7.2F(M)===y&&i===y){7.$J.4v("fD",b.G(v(j){q(7.B.96===y){D M}7.7M=M;7.8V();q(7.B.42===M){7.55=7.L.1O.3J}C{7.55=7.$J.3J()}x k=7.5Q();2T(b.G(v(){x l=7.5Q();7.$J.Y(k);7.2D();x m=7.aJ(l);7.82(m);7.7M=y},7),1)},7))}7.2K();7.6G();q(7.B.5j!==y){7.8y()}2T(b.G(v(){7.2y();7.5q()},7),1);q(7.1j("3j")){7.$J.16(b.G(v(){7.2B()},7));6r{7.L.1D("fE",y,y);7.L.1D("fF",y,y)}6i(h){}}q(7.B.1e){2T(b.G(v(){7.$J.1e()},7),1)}q(7.B.2u){7.7d();b(L).fC(b.G(7.7d,7))}q(O 7.B.23==="v"){7.B.23(7)}q(7.B.Z!==y){7.$Z.1p("a").U("4K","-1")}}7.6Y(y,c)},1C:v(d,c){d.2V();7.1D(c,y)},2K:v(){7.$J.2K(b.G(v(d){x c=d.5w||d.8F;q(7.1j("3j")&&!7.7M){7.2B()}q(O 7.B.7F==="v"){7.B.7F(7,d)}q(c===8||c===46){7.2y();D 7.8t(d)}q(c===13&&!d.4c&&!d.8q&&!d.8m){q(7.1j("3l")){7.8n(d)}q(7.B.8H){7.$J.aO()}}7.1l()},7))},6G:v(){7.$J.6G(b.G(v(j){x d=j.5w||j.8F;x f=7.2M();x i=7.3s();x h=y;x g=j.8q||j.8m;q((f||i)&&(b(f).19(0).1r==="58"||b(i).19(0).1r==="58")){h=M}q(O 7.B.6N==="v"){7.B.6N(7,j)}q(g&&7.B.1C){q(d===90){q(7.B.3w!==y){j.2V();7.8W()}C{q(j.4c){7.1C(j,"fB")}C{7.1C(j,"fx")}}}C{q(d===77){7.1C(j,"fy")}C{q(d===66){7.1C(j,"2q")}C{q(d===73){7.1C(j,"2t")}C{q(d===74){7.1C(j,"8g")}C{q(d===75){7.1C(j,"7Z")}C{q(d===76){7.1C(j,"fz")}C{q(d===72){7.1C(j,"fA")}}}}}}}}}q(!g&&d!==90){7.B.3w=y}q(h===M&&d===13){j.2V();x c=b(i).1M().V();7.41(7.L.7E("\\r\\n"));q(c.3S(/\\s$/)==-1){7.41(7.L.7E("\\r\\n"))}7.1l();D y}q(7.B.1C&&!j.4c&&d===9){q(h===y){7.1C(j,"3p")}C{j.2V();7.41(7.L.7E("\\t"));7.1l();D y}}C{q(7.B.1C&&j.4c&&d===9){7.1C(j,"3v")}}q(7.1j("3l")&&3U.3R.31("94")===-1){D 7.8s(j,d)}},7))},6Y:v(e,i){q(e!==M){7.$1V=b(\'<E N="fG"></E>\');q(7.B.1I){7.1I=b(\'<E N="7i" 1x="2P: 1S;"></E>\')}7.$1H=X;v h(){7.$J=7.$1H.86().1p("1O").U("7h",M).U("81",7.B.6X);3k=7.L=7.$J[0].fH;49=7.1Q=7.L.fN||1Q;q(7.B.R!==y){7.$1H.86().1p("fO").Y(\'<2g 47="fP" 12="\'+7.B.R+\'" />\')}7.$J.Q(f);q(i){i.4O(7);i=X}}7.4G=M;q(7.$el.19(0).1r==="8a"){q(7.B.1t){x g=7;7.$1H=b(\'<1t 1x="21: 4H%;" fM="0"></1t>\').a3(v(){h.4O(g)})}C{7.$1H=7.$J=b("<E></E>")}x d=7.$el.19(0).2j.88(/\\s+/);b.1i(d,b.G(v(j,k){7.$1H.1W("fL"+k)},7))}C{7.4G=y;7.$1H=7.$J=7.$el;7.$el=b(\'<2s 1v="\'+7.$J.U("I")+\'"></2s>\').R("1q",7.1q)}q(7.$J){7.$J.1W("4J").U("7h",M).U("81",7.B.6X)}q(7.B.4K!==y){7.$1H.U("4K",7.B.4K)}q(7.B.4i!==y){7.$1H.R("fI-1q",7.B.4i+"1R")}q(7.B.83===M){7.$1H.1W("8c")}q(7.B.42===y){7.$1H.R("1q",7.1q)}7.$el.1E();x f="";q(7.4G){f=7.$el.T();f=7.7C(f);7.$1V.89(7.$el).Y(7.$1H).Y(7.$el)}C{f=7.$J.Q();f=7.7C(f);7.$1V.89(7.$1H).Y(7.$el).Y(7.$J)}f=7.8J(f);q(7.$J){7.$J.Q(f)}q(7.4G===y){7.1l()}}C{q(7.$el.19(0).1r!=="8a"){x f=7.$el.T();x c=b(\'<2s 1v="\'+7.$J.U("I")+\'"></2s>\').R("1q",7.1q).T(f);7.$el.1E();7.$el.26(c)}}q(i&&7.$J){i.4O(7)}},8h:v(){q(7.B.1I===y){D y}7.1I.1E();7.$J.4v("37",b.G(v(c){7.8i(c)},7));7.$J.4v("3x",b.G(v(){7.1I.1E()},7))},8i:v(g){b(".7i").1E();x c=7.1I.8P();x f=g.fJ;q(b(7.L).21()<(f+c)){f=f-c}x d=g.fK+b(L).3J()+14;q(7.B.1t===M){d=d+7.$1V.2p().1s;f=f+7.$1V.2p().1o}7.1I.R({1o:f+"1R",1s:d+"1R"}).1k()},1l:v(){7.$el.T(7.$J.Q())},52:v(c){c=7.4e(c);7.$J.Q(c).1e();7.1l()},4C:v(){x c="";q(7.B.3z){c=7.$J.Q()}C{c=7.$el.T()}D 7.4e(c)},7a:v(c){7.$J.1e();7.6A(c);7.2y();7.1l()},6A:v(d){x h,c;q(7.L.1a){h=7.1Q.1a();q(h.4x&&h.4D){c=h.4x(0);c.fw();x e=7.L.3g("E");e.3B=d;x i=7.L.aH(),g,f;4L(g=e.aG){f=i.5v(g)}c.aR(i);q(f){c=c.b1();c.fv(f);c.3n(M);h.6m();h.6b(c)}}}C{q(7.L.1z&&7.L.1z.1f!="fh"){7.L.1z.2E().5Z(d)}}},9j:v(){x d=7.4C();q(7.4G){7.$1V.26(7.$el);7.$1V.1u();7.$el.1q(7.1q).T(d).1k()}C{7.$1V.26(7.$J);7.$1V.1u();7.$J.1Z("4J").1Z("8c").U("7h",y).Q(d).1k()}q(7.B.4I){b(7.B.4I).7z()}b(".7i").1u();34(x c=0;c<7.4A.39;c++){7.4A[c].1u();8e(7.4A[c])}q(7.B.5j!==y){fi(7.8x)}},7P:v(){x d=7.3s();7.5G();b.1i(7.B.7Y,b.G(v(f,g){q(b(d).3F(f,7.$J.19()[0]).39!=0){7.2J(g)}},7));x c=b(d).3F(["p","E","4m","4n","4o","4j","6e","6q","2a","1c"]);q(O c[0]!=="1b"&&O c[0].7j!=="1b"&&b(c[0].7j).2b()!=0){x e=b(c[0].7j).R("V-7l");fj(e){7f"2Z":7.2J("7k");4s;7f"8o":7.2J("7g");4s;7f"4b":7.2J("4b");4s;fg:7.2J("7c");4s}}},2y:v(){q(7.B.2y===y){D y}7.$J.1p("2x").1i(b.G(v(c,d){q(7.1j("25")){b(d).U("ff","56")}7.aZ(d)},7))},5q:v(){7.$J.1p("1h").16(b.G(7.9B,7))},7d:v(){x c=b(7.L).3J();x f=7.$1V.2i().1s;x e=0;q(c>f){x d="4H%";q(7.B.8l){e=7.$1V.2i().1o;d=7.$1V.8P()}7.2u=M;7.$Z.R({2p:"2u",21:d,8O:fb,1s:7.B.8N+"1R",1o:e})}C{7.2u=y;7.$Z.R({2p:"fc",21:"3t",8O:1,1s:0,1o:e})}},8V:v(){7.2B();7.B.3w=7.$J.Q()},8W:v(){q(7.B.3w===y){D y}7.$J.Q(7.B.3w);q(!7.1j("25")){7.2D()}7.B.3w=y},1D:v(d,c){q(7.B.3z==y){7.$el.1e();D y}6r{x k;q(d==="3q"){q(7.1j("25")){7.$J.1e();7.L.1z.2E().5Z(c)}C{7.6A(c)}7.2y()}C{q(d==="4w"){k=7.2M();q(b(k).19(0).1r==="A"){b(k).2v(b(k).V())}C{7.32(d,c)}}C{q(d==="6C"||d==="5k"||d==="5f"||d==="5g"){k=7.3s();x l=b(k).19(0).1r;q(7.B.1t===y&&b(k).fR(".4J").2b()==0){D y}x g=["P","7p","fe","fk","fl","fs","ft","fu","7J","fr"];q(b.5h(l,g)!=-1){x i=y;q(d==="5k"){i="8o"}C{q(d==="5f"){i="2Z"}C{q(d==="5g"){i="4b"}}}q(i===y){b(k).R("V-7l","")}C{b(k).R("V-7l",i)}}C{7.32(d,c)}}C{q(d==="2f"&&c==="2a"){k=7.3s();q(b(k).19(0).1r==="7J"){q(7.1j("25")){x f=b("<p>"+b(k).Q()+"</p>");b(k).2v(f)}C{7.32(d,"p")}}C{q(b(k).19(0).1r==="P"){x j=b(k).1M();q(b(j).19(0).1r==="7J"){x f=b("<p>"+b(k).Q()+"</p>");b(j).2v(f);7.4F(f[0],0,f[0],0)}C{q(7.1j("25")){x f=b("<2a>"+b(k).Q()+"</2a>");b(k).2v(f)}C{7.32(d,c)}}}C{7.32(d,c)}}}C{q(d==="2f"&&(c==="1n"||c==="p")){k=7.2M();q(b(k).19(0).1r==="58"){b(k).2v("<p>"+7.7w(b(k).V())+"</p>")}C{7.32(d,c)}}C{q(d==="7K"&&7.1j("25")){7.$J.1e()}q(d==="2f"&&7.1j("3j")){7.$J.1e()}7.32(d,c)}}}}}q(d==="7K"){7.$J.1p("8E").aj("I")}7.1l();q(7.2O()){7.$J.1e()}q(O 7.B.7L==="v"){7.B.7L(7,d)}q(7.B.1I){7.1I.1E()}}6i(h){}},32:v(c,d){q(c==="2f"&&7.1j("25")){d="<"+d+">"}7.L.1D(c,y,d)},8n:v(f){x d=7.2M();q(d.9m==="7p"&&d.2j==="4J"){x c=b(7.3s());q(c.19(0).1r==="7p"&&(c.Q()===""||c.Q()==="<br>")){x g=b("<p>").Y(c.3I().19(0).6z);c.2v(g);g.Q("<br />");7.4F(g[0],0,g[0],0)}}},8s:v(d,c){q(d.4c&&c===13){d.2V();7.41(b("<1L><br /></1L>").19(0));7.1l();D y}C{D M}},8t:v(g){x c=b.4t(7.$J.Q());c=c.H(/<br\\s?\\/?>/i,"");x f=c.H(/<p>\\s?<\\/p>/gi,"");q(c===""||f===""){g.2V();x d=b(7.B.5s).19(0);7.$J.Q(d);7.4F(d,0,d,0);7.1l();D y}C{7.1l()}},8J:v(e){e=b.4t(e);q(e===""||e==="<p></p>"){D 7.B.5s}q(7.B.7G){e=e.H(/<E(.*?)>([\\w\\W]*?)<\\/E>/gi,"<p>$2</p>")}x f=v(h,i,g){D h.H(2C 3P(i,"g"),g)};x c=v(h,g){D f(e,h,g)};x d="(1h|1U|8K|6h|fq|38|1J|1c|4g|E|dl|dd|dt|2N|33|1m|1n|2I|1d|2a|8Q|fm|1x|fo|1P|18|3M|p|h[1-6])";e+="\\n";c("<br />\\\\s*<br />","\\n\\n");c("(<"+d+"[^>]*>)","\\n$1");c("(</"+d+">)","$1\\n\\n");c("\\r\\n|\\r","\\n");c("\\n\\n+","\\n\\n");c("\\n?((.|\\n)+?)$","<p>$1</p>\\n");c("<p>\\\\s*?</p>","");c("<p>(<E[^>]*>\\\\s*)","$1<p>");c("<p>([^<]+)\\\\s*?(</(E|8Q|1d)[^>]*>)","<p>$1</p>$2");c("<p>\\\\s*(</?"+d+"[^>]*>)\\\\s*</p>","$1");c("<p>(<1m.+?)</p>","$1");c("<p>\\\\s*(</?"+d+"[^>]*>)","$1");c("(</?"+d+"[^>]*>)\\\\s*</p>","$1");c("(</?"+d+"[^>]*>)\\\\s*<br />","$1");c("<br />(\\\\s*</?(p|1m|E|dl|dd|dt|4g|1n|1c|2N|33)[^>]*>)","$1");q(e.31("<1n")!=-1){c("(<1n(.|\\n)*?>)((.|\\n)*?)</1n>",v(j,i,h,g){D f(i,"\\\\\\\\([\'\\"\\\\\\\\])","$1")+f(f(f(g,"<p>","\\n"),"</p>|<br />",""),"\\\\\\\\([\'\\"\\\\\\\\])","$1")+"</1n>"})}D c("\\n</p>$","</p>")},4e:v(d){x e=7.B.8R;x c=/<\\/?([a-z][a-fp-9]*)\\b[^>]*>/gi;D d.H(c,v(g,f){D b.5h(f.9N(),e)>"-1"?g:""})},7C:v(c){x d=c.5t(/<1n(.*?)>([\\w\\W]*?)<\\/1n>/gi);q(d!==X){b.1i(d,b.G(v(f,g){x e=g.5t(/<1n(.*?)>([\\w\\W]*?)<\\/1n>/i);e[2]=7.7w(e[2]);c=c.H(g,"<1n"+e[1]+">"+e[2]+"</1n>")},7))}D c},7w:v(c){c=2U(c).H(/&7m;/g,"&").H(/&4z;/g,"<").H(/&4r;/g,">").H(/&8j;/g,\'"\');D 2U(c).H(/&/g,"&7m;").H(/</g,"&4z;").H(/>/g,"&4r;").H(/"/g,"&8j;")},84:v(d){d=d.H(/<br>/gi,"\\n");d=d.H(/<\\/p>/gi,"\\n");d=d.H(/<\\/E>/gi,"\\n");x c=7.L.3g("E");c.3B=d;D c.fQ||c.gk},82:v(c){x d=7.2M();q(b(d).19(0).1r==="58"){c=7.84(c);7.5F(c);D M}c=c.H(/<!--[\\s\\S]*?-->|<\\?(?:gh)?[\\s\\S]*?\\?>/gi,"");c=c.H(/(&1F;){2,}/gi,"&1F;");c=c.H(/<b\\gg="gf-4M-gj(.*?)">([\\w\\W]*?)<\\/b>/gi,"$2");c=7.4e(c);c=c.H(/<1c><\\/1c>/gi,"[1c]");c=c.H(/<1c>&1F;<\\/1c>/gi,"[1c]");c=c.H(/<1c><br><\\/1c>/gi,"[1c]");c=c.H(/<a(.*?)12="(.*?)"(.*?)>([\\w\\W]*?)<\\/a>/gi,\'[a 12="$2"]$4[/a]\');c=c.H(/<1t(.*?)>([\\w\\W]*?)<\\/1t>/gi,"[1t$1]$2[/1t]");c=c.H(/<1T(.*?)>([\\w\\W]*?)<\\/1T>/gi,"[1T$1]$2[/1T]");c=c.H(/<2G(.*?)>([\\w\\W]*?)<\\/2G>/gi,"[2G$1]$2[/2G]");c=c.H(/<2l(.*?)>([\\w\\W]*?)<\\/2l>/gi,"[2l$1]$2[/2l]");c=c.H(/<1P(.*?)>([\\w\\W]*?)<\\/1P>/gi,"[1P$1]$2[/1P]");c=c.H(/<3M(.*?)>/gi,"[3M$1]");c=c.H(/<2x(.*?)1x="(.*?)"(.*?)>/gi,"[2x$1$3]");c=c.H(/<(\\w+)([\\w\\W]*?)>/gi,"<$1>");c=c.H(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&1F;|<br>)<\\/[^>]+>/gi,"");c=c.H(/<[^\\/>][^>]*>(\\s*|\\t*|\\n*|&1F;|<br>)<\\/[^>]+>/gi,"");c=c.H(/\\[1c\\]/gi,"<1c>&1F;</1c>");c=c.H(/\\[a 12="(.*?)"\\]([\\w\\W]*?)\\[\\/a\\]/gi,\'<a 12="$1">$2</a>\');c=c.H(/\\[1t(.*?)\\]([\\w\\W]*?)\\[\\/1t\\]/gi,"<1t$1>$2</1t>");c=c.H(/\\[1T(.*?)\\]([\\w\\W]*?)\\[\\/1T\\]/gi,"<1T$1>$2</1T>");c=c.H(/\\[2G(.*?)\\]([\\w\\W]*?)\\[\\/2G\\]/gi,"<2G$1>$2</2G>");c=c.H(/\\[2l(.*?)\\]([\\w\\W]*?)\\[\\/2l\\]/gi,"<2l$1>$2</2l>");c=c.H(/\\[1P(.*?)\\]([\\w\\W]*?)\\[\\/1P\\]/gi,"<1P$1>$2</1P>");c=c.H(/\\[3M(.*?)\\]/gi,"<3M$1>");c=c.H(/\\[2x(.*?)\\]/gi,"<2x$1>");q(7.B.7G){c=c.H(/<E(.*?)>([\\w\\W]*?)<\\/E>/gi,"<p>$2</p>")}c=c.H(/<1L>([\\w\\W]*?)<\\/1L>/gi,"$1");c=c.H(/\\n{3,}/gi,"\\n");c=c.H(/<p><p>/gi,"<p>");c=c.H(/<\\/p><\\/p>/gi,"</p>");q(7.1j("3j")){c=c.H(/<br>$/gi,"")}7.5F(c)},5F:v(c){7.1D("3q",c);q(7.B.42===M){b(7.L.1O).3J(7.55)}C{7.$J.3J(7.55)}},8C:v(d){x c=[];x e=d.5t(/<1n(.*?)>([\\w\\W]*?)<\\/1n>/gi);q(e!==X){b.1i(e,v(f,g){d=d.H(g,"8d"+f);c.68(g)})}d=d.H(/\\s{2,}/g," ");d=d.H(/\\n/g," ");d=d.H(/[\\t]*/g,"");d=d.H(/\\n\\s*\\n/g,"\\n");d=d.H(/^[\\s\\n]*/g,"");d=d.H(/[\\s\\n]*$/g,"");d=d.H(/>\\s+</g,"><");q(c){b.1i(c,v(f,g){d=d.H("8d"+f,g)});c=[]}D d},8I:v(c){c=c.H(/<1m/g,"\\t<1m");c=c.H(/<1J/g,"\\t<1J");c=c.H(/<1c/g,"\\t\\t<1c");c=c.H(/<\\/1J>/g,"\\t</1J>");D c},8B:v(f){x e=["<1n></1n>","<2a>\\\\s*</2a>","<em>\\\\s*</em>","<2N></2N>","<33></33>","<1m></1m>","<1h></1h>","<1J></1J>","<1L>\\\\s*<1L>","<1L>&1F;<1L>","<b>\\\\s*</b>","<b>&1F;</b>","<p>\\\\s*</p>","<p>&1F;</p>","<p>\\\\s*<br>\\\\s*</p>","<E>\\\\s*</E>","<E>\\\\s*<br>\\\\s*</E>"];34(x d=0;d<e.39;++d){x c=e[d];f=f.H(2C 3P(c,"gi"),"")}D f},8A:v(e){x f="\\r\\n";x g=["<p","<1d","</2N>","</33>","<6a","<6l","<1P","<2l","<2I","<2h","<18","<2s","<1n","<2a","<2N","<33","<1m","<dl","<dt","<dd","<1h","<1U","<38","<6h","</6h>","<4g","<1J","<1c","<5W"];34(x d=0;d<g.39;++d){x c=g[d];e=e.H(2C 3P(c,"gi"),f+c)}D e},8z:v(e){x g="\\r\\n";x c=["</p>","</E>","</4m>","</4n>","</4o>","</4j>","</6e>","</6q>","<br>","<br />","</dl>","</dt>","</dd>","</1d>","</2a>","</1n>","</6l>","</6a>","</1P>","</2l>","</2s>","</2I>","</2h>","</1h>","</1U>","</38>","</1J>","</1c>","</4g>","</5W>"];34(x d=0;d<c.39;++d){x f=c[d];e=e.H(2C 3P(f,"gi"),f+g)}D e},2X:v(c){c=7.8C(c);c=7.8B(c);c=7.8A(c);c=7.8z(c);c=7.8I(c);D c},8G:v(){x d;q(7.B.3z){x c=7.$J.gd();7.$J.1E();7.$1H.1E();d=7.$J.Q();7.$el.1q(c).T(d).1k().1e();7.2J("Q");7.B.3z=y}C{7.$el.1E();x d=7.$el.T();7.$J.Q(d).1k();7.$1H.1k();q(7.$J.Q()===""){7.52(7.B.5s)}7.$J.1e();7.5D("Q");7.B.3z=M;7.2y();7.5q()}},8y:v(){7.8x=fY(b.G(v(){b.b8({2o:7.B.5j,1f:"5p",11:7.$el.U("1v")+"="+fZ(g0(7.4C())),29:b.G(v(c){q(O 7.B.65==="v"){7.B.65(c,7)}},7)})},7),7.B.8r*g1)},8w:v(){q(7.B.Z===y){D y}7.$Z=b("<2N>").1W("fX");q(7.B.1I){b(7.1I).Y(7.$Z);b("1O").Y(7.1I)}C{q(7.B.4I===y){7.$1V.4U(7.$Z)}C{b(7.B.4I).Q(7.$Z)}}b.1i(7.B.35,b.G(v(d,c){q(c!=="|"&&O 7.B.Z[c]!=="1b"){x e=7.B.Z[c];q(7.B.4X===y&&c==="22"){D M}7.$Z.Y(b("<1m>").Y(7.3X(c,e)))}q(c==="|"){7.$Z.Y(b(\'<1m N="5i"></1m>\'))}},7))},3X:v(d,e){x c=b(\'<a 12="1G:1K(X);" K="\'+e.K+\'" N="4R\'+d+\'"></a>\');q(O e.1g==="1b"){c.16(b.G(v(){q(b.5h(d,7.B.53)!=-1){7.5G();7.2J(d)}q(7.1j("3j")){7.$J.1e()}7.1D(e.15,d)},7))}C{q(e.1g!=="1k"){c.16(b.G(v(g){7[e.1g](g)},7))}}q(O e.23!=="1b"&&e.23!==y){c.16(b.G(v(g){e.23(7,g,d)},7))}q(d==="2R"||d==="3o"||O(e.24)!=="1b"){x f=b(\'<E N="7R" 1x="2P: 1S;">\');q(d==="2R"||d==="3o"){f=7.8L(f,d)}C{f=7.97(f,e.24)}7.4A.68(f.5o(b(L.1O)));7.93=b.G(v(g){7.7Q(g,f,d)},7);c.16(7.93)}D c},97:v(d,c){b.1i(c,b.G(v(e,g){q(O(g.2j)==="1b"){g.2j=""}x f;q(O g.1v!=="1b"&&g.1v==="5x"){f=b(\'<a N="fW">\')}C{f=b(\'<a 12="1G:1K(X);" N="\'+g.2j+\'">\'+g.K+"</a>");q(O(g.23)==="v"){b(f).16(b.G(v(h){g.23(7,h,e)},7))}C{q(O(g.1g)==="1b"){b(f).16(b.G(v(){7.1D(g.15,e)},7))}C{b(f).16(b.G(v(h){7[g.1g](h)},7))}}}b(d).Y(f)},7));D d},8L:v(l,k){x f;q(k==="2R"){q(7.1j("25")){f="8T"}C{f="fS"}}C{f="8U"}b(l).21(fT);x g=7.B.5Y.39;34(x e=0;e<g;++e){x c=7.B.5Y[e];x j=b(\'<a 47="\'+c+\'" 12="1G:1K(X);" N="ge"></a>\').R({fU:c});b(l).Y(j);x h=7;b(j).16(v(){h.1D(f,b(7).U("47"));q(f==="8U"){h.$J.1p("8S").2v(v(){D b(\'<1L 1x="4y: \'+b(7).U("4y")+\';">\'+b(7).Q()+"</1L>")})}q(h.1j("25")&&f==="8T"){h.$J.1p("8S").2v(v(){D b(\'<1L 1x="\'+b(7).U("1x")+\'">\'+b(7).Q()+"</1L>")})}})}x d=b(\'<a 12="1G:1K(X);" N="fV"></a>\').Q(F.1S);q(k==="2R"){d.16(b.G(7.7X,7))}C{d.16(b.G(7.7V,7))}b(l).Y(d);D l},7X:v(){b(7.2M()).R("g2-4y","g3");7.1l()},7V:v(){b(7.2M()).U("4y","").R("4y","");7.1l()},7Q:v(i,j,d){q(7.1A(d).8k("3N")){7.4Z()}C{7.4Z();7.2J(d);7.1A(d).1W("3N");x h=7.1A(d).2i().1o;q(7.B.1I){x f=7.1I.2i().1s;b(j).R({2p:"6u",1o:h+"1R",1s:f+30+"1R"}).1k()}C{q(7.B.2u&&7.2u){b(j).R({2p:"2u",1o:h+"1R",1s:"ga"}).1k()}C{x g=7.$Z.2i().1s+30;b(j).R({2p:"6u",1o:h+"1R",1s:g+"1R"}).1k()}}}x c=b.G(v(k){7.7S(k,j,d)},7);b(L).6d("16",c);7.$J.6d("16",c);7.$1H.6d("16",c);i.gb()},4Z:v(){7.$Z.1p("a.3N").1Z("5E").1Z("3N");b(".7R").1E()},7S:v(d,f,c){q(!b(d.1y).8k("3N")){b(f).1Z("3N");7.gc=y;7.4Z()}},1A:v(c){q(7.B.Z===y){D y}D b(7.$Z.1p("a.4R"+c))},2J:v(c){7.1A(c).1W("5E")},5D:v(c){7.1A(c).1Z("5E")},5G:v(){b.1i(7.B.53,b.G(v(c,d){7.5D(d)},7))},g9:v(c,d){7.1A(c).1W("4R"+d)},g8:v(c,d){7.1A(c).1Z("4R"+d)},g4:v(){7.$Z.Y(b(\'<1m N="5i"></1m>\'))},g5:v(c){x d=7.1A(c);d.1M().26(b(\'<1m N="5i"></1m>\'))},g6:v(c){x d=7.1A(c);d.1M().2A(b(\'<1m N="5i"></1m>\'))},g7:v(c){x d=7.1A(c);d.1M().aI().1u()},fd:v(c){x d=7.1A(c);d.1M().f9().1u()},e4:v(c){q(7.B.Z===y){D y}7.1A(c).1M().1W("5K")},e5:v(c){q(7.B.Z===y){D y}7.1A(c).1M().1Z("5K")},e6:v(d,e,g,f){q(7.B.Z===y){D y}x c=7.3X(d,{K:e,23:g,24:f});7.$Z.Y(b("<1m>").Y(c))},e7:v(d,e,g,f){q(7.B.Z===y){D y}x c=7.3X(d,{K:e,23:g,24:f});7.$Z.4U(b("<1m>").Y(c))},e3:v(i,d,f,h,g){q(7.B.Z===y){D y}x c=7.3X(d,{K:f,23:h,24:g});x e=7.1A(i);e.1M().26(b("<1m>").Y(c))},e2:v(g,d,f,i,h){q(7.B.Z===y){D y}x c=7.3X(d,{K:f,23:i,24:h});x e=7.1A(g);e.1M().2A(b("<1m>").Y(c))},dY:v(c,e){x d=7.1A(c);q(e===M){d.1M().aI().1u()}d.1M().1Z("5K");d.1u()},aJ:v(d){x c=d.dZ(M);x e=7.L.3g("E");e.5v(c);D e.3B},5Q:v(){x c=7.$J.19(0);x e=7.L.aH(),d;4L((d=c.aG)){e.5v(d)}D e},2B:v(){7.$J.1e();7.3u=7.aQ();7.5c=7.aM()},2D:v(){q(O 7.3u!=="1b"&&7.3u!==X&&7.5c!==X&&7.3u[0].1r!=="dz"){q(7.B.1t===y&&b(7.3u[0]).3F(".4J").2b()==0){7.$J.1e()}C{q(7.1j("9Q")){7.$J.1e()}7.4F(7.3u[0],7.3u[1],7.5c[0],7.5c[1]);q(7.1j("3j")){7.$J.1e()}}}C{7.$J.1e()}},1a:v(){x c=7.L;q(7.1Q.1a){D 7.1Q.1a()}C{q(c.1a){D c.1a()}C{D c.1z.2E()}}D y},5J:v(){q(!7.2O()){x e;D(e=7.1a())&&(e.5I!=X)&&(e.2H!=X)}C{x d=7.$J.19(0);x c;d.1e();q(!d.L.1z){D y}c=d.L.1z.2E();D c&&c.54().L===d.L}},aQ:v(){q(!7.2O()){x e;q(!((e=7.1a())&&(e.2H!=X))){D X}D[e.2H,e.e0]}C{x d=7.$J.19(0);x c;d.1e();q(!7.5J()){D X}c=d.L.1z.2E();D 7.6g(d.L,c,M)}},aM:v(){q(!7.2O()){x e;q(!((e=7.1a())&&(e.5I!=X))){D X}D[e.5I,e.e1]}C{x d=7.$J.19(0);x c;d.1e();q(!7.5J()){D X}c=d.L.1z.2E();D 7.6g(d.L,c,y)}},4F:v(k,j,i,g){q(i==X){i=k}q(g==X){g=j}q(!7.2O()){x f=7.1a();q(!f){D}q(f.3n&&f.3m){f.3n(k,j);f.3m(i,g)}C{r=7.L.2E();r.e8(k,j);r.e9(i,g);6r{f.6m()}6i(h){}f.6b(r)}}C{x d=7.$J.19(0);x c=d.L.1O.aS();7.6j(d.L,c,y,i,g);7.6j(d.L,c,M,k,j);D c.2I()}},3s:v(){q(O 7.1Q.1a!=="1b"){D 7.aC().2k}C{q(O 7.L.1z!=="1b"){D 7.1a().54()}}},2M:v(){D b(7.3s()).1M()[0]},aC:v(){q(7.2O()){D 7.1a().54()}C{q(O 7.1Q.1a!=="1b"){x c=7.1Q.1a();q(c.4D>0){D 7.1a().4x(0).eg}C{D y}}C{q(O 7.L.1z!=="1b"){D 7.1a()}}}},6g:v(h,f,g){x j,c,e,i,d;c=h.3g("a");j=f.eh();j.3n(g);d=j.54();4L(M){d.ap(c,c.6o);j.5X(c);q(!(j.as((g?"6p":"at"),f)>0&&(c.6o!=X))){4s}}q(j.as((g?"6p":"at"),f)===-1&&c.aq){j.av((g?"ei":"aA"),f);e=c.aq;i=j.V.39}C{e=c.2k;i=7.aw(c)}c.2k.5T(c);D[e,i]},6j:v(h,l,k,e,f){x i,g,j,c,d;d=0;i=7.5b(e)?e:e.6z[f];g=7.5b(e)?e.2k:e;q(7.5b(e)){d=f}c=h.3g("a");g.ap(c,i||X);j=h.1O.aS();j.5X(c);c.2k.5T(c);l.av((k?"6p":"aA"),j);D l[k?"ej":"fa"]("ee",d)},5b:v(c){D(c!=X?c.5r==3:y)},aw:v(d){x c=0;4L(d=d.6o){c++}D c},ea:v(c){7.2B();7.41(c);7.2D()},41:v(g){q(7.1Q.1a){x h=7.1a();q(h.4D){x d=h.4x(0);d.3n(y);d.aR(g);d=d.b1();d.eb(g);d.3n(y);h.6m();h.6b(d)}}C{q(7.L.1z){x e=(g.5r===1)?g.4S:g.11;x i="ec"+(""+2d.6O()).ed(2);e+=\'<1L I="\'+i+\'"></1L>\';x f=7.1a();f.3n(y);f.5Z(e);x c=7.L.dX(i);f.5X(c);f.2I();c.2k.5T(c)}}},9M:v(){x f="";q(7.1Q.1a){x g=7.1Q.1a();q(g.4D){x d=7.L.3g("E");34(x e=0,c=g.4D;e<c;++e){d.5v(g.4x(e).dW())}f=d.3B}}C{q(7.L.1z){q(7.L.1z.1f==="aU"){f=7.L.1z.2E().dG}}}D f},aZ:v(g){x h=y;x d=y;x f;x c;x i=b(g).21()/b(g).1q();x e=10;x j=10;b(g).aP("4E b2 3E 16 b0");b(g).4E(v(){b(g).R("4T","dH-dI")},v(){b(g).R("4T","");h=y});b(g).b2(v(k){k.2V();i=b(g).21()/b(g).1q();h=M;d=M;f=2d.3D(k.67-b(g).eq(0).2i().1o);c=2d.3D(k.63-b(g).eq(0).2i().1s)});b(g).3E(b.G(v(k){h=y;b(g).R("4T","");7.1l()},7));b(g).16(b.G(v(k){q(d){7.9t(k)}},7));b(g).b0(v(o){q(h){d=y;x l=2d.3D(o.67-b(7).eq(0).2i().1o)-f;x k=2d.3D(o.63-b(7).eq(0).2i().1s)-c;x n=b(g).1q();x p=5A(n,10)+k;x m=p*i;q(m>e){b(g).21(m)}q(p>j){b(g).1q(p)}f=2d.3D(o.67-b(7).eq(0).2i().1o);c=2d.3D(o.63-b(7).eq(0).2i().1s)}})},b5:v(){7.2B();7.3f(F.1h,7.B.aW,dJ,b.G(v(){b("#b7").16(b.G(7.b6,7));2T(v(){b("#64").1e()},4P)},7))},b6:v(){x m=b("#64").T();x f=b("#au").T();x c=b("<E></E>");x d=2d.9W(2d.6O()*a2);x k=b(\'<1h I="1h\'+d+\'"><38></38></1h>\');34(x g=0;g<m;g++){x l=b("<1J></1J>");34(x j=0;j<f;j++){x e=b("<1c><br></1c>");b(l).Y(e)}b(k).Y(l)}b(c).Y(k);x h=b(c).Q()+"<p></p>";7.2D();7.1D("3q",h);7.1w();7.5q()},9B:v(c){7.$1h=b(c.1y).3F("1h");7.$9K=7.$1h.1p("1J");7.$dF=7.$1h.1p("1c");7.$38=b(c.1y).3F("38");7.$1U=b(7.$1h).1p("1U");7.$5U=b(c.1y);7.$3H=b(c.1y).3F("1J")},9x:v(){b(7.$1h).1u();7.$1h=y;7.1l()},9u:v(){b(7.$3H).1u();7.1l()},9v:v(){x c=b(7.$5U).19(0).dE;b(7.$1h).1p("1J").1i(v(){b(7).1p("1c").eq(c).1u()});7.1l()},an:v(){q(b(7.$1h).1p("1U").2b()!==0){7.62()}C{x c=b(7.$1h).1p("1J").dA().3I();c.1p("1c").Q("&1F;");7.$1U=b("<1U></1U>");7.$1U.Y(c);b(7.$1h).4U(7.$1U);7.1l()}},62:v(){b(7.$1U).1u();7.$1U=y;7.1l()},9w:v(){7.61("2A")},9C:v(){7.61("26")},9D:v(){7.5V("2A")},9J:v(){7.5V("26")},61:v(c){x d=b(7.$3H).3I();d.1p("1c").Q("&1F;");q(c==="26"){b(7.$3H).26(d)}C{b(7.$3H).2A(d)}7.1l()},5V:v(d){x c=0;7.$3H.1p("1c").1i(b.G(v(e,f){q(b(f)[0]===7.$5U[0]){c=e}},7));7.$9K.1i(v(e,f){x g=b(f).1p("1c").eq(c);x h=g.3I();h.Q("&1F;");q(d==="26"){b(g).26(h)}C{b(g).2A(h)}});7.1l()},9I:v(){7.2B();7.3f(F.1T,7.B.9H,dB,b.G(v(){b("#9F").16(b.G(7.9G,7));2T(v(){b("#6n").1e()},4P)},7))},9G:v(){x c=b("#6n").T();c=7.4e(c);7.2D();7.1D("3q",c);7.1w()},9t:v(f){x c=b(f.1y);x d=c.1M();x g=b.G(v(){b("#6c").T(c.U("6w"));b("#dC").U("12",c.U("44"));b("#6f").T(c.R("4V"));q(b(d).19(0).1r==="A"){b("#36").T(b(d).U("12"))}b("#9a").16(b.G(v(){7.9e(c)},7));b("#9h").16(b.G(v(){7.9b(c)},7))},7);7.3f(F.3h,7.B.9i,dD,g)},9e:v(c){b(c).1u();7.1w();7.1l()},9b:v(d){x c=b(d).1M();b(d).U("6w",b("#6c").T());x f=b("#6f").T();q(f==="1o"){b(d).R({"4V":"1o",3O:"0 4W 4W 0"})}C{q(f==="2Z"){b(d).R({"4V":"2Z",3O:"0 0 4W 4W"})}C{b(d).R({"4V":"1S",3O:"0"})}}x e=b.4t(b("#36").T());q(e!==""){q(b(c).19(0).1r!=="A"){b(d).2v(\'<a 12="\'+e+\'">\'+7.4S(d)+"</a>")}C{b(c).U("12",e)}}C{q(b(c).19(0).1r==="A"){b(c).2v(7.4S(d))}}7.1w();7.2y();7.1l()},9c:v(){7.2B();x c=b.G(v(){q(7.B.4q!==y){b.dK(7.B.4q,b.G(v(h){x f={};x j=0;b.1i(h,b.G(v(k,l){q(O l.51!=="1b"){j++;f[l.51]=j}},7));x g=y;b.1i(h,b.G(v(n,o){x m="";q(O o.K!=="1b"){m=o.K}x k=0;q(!b.9d(f)&&O o.51!=="1b"){k=f[o.51];q(g===y){g=".3K"+k}}x l=b(\'<2x 44="\'+o.dL+\'" N="3K 3K\'+k+\'" 47="\'+o.3h+\'" K="\'+m+\'" />\');b("#5M").Y(l);b(l).16(b.G(7.9p,7))},7));q(!b.9d(f)){b(".3K").1E();b(g).1k();x i=v(k){b(".3K").1E();b(".3K"+b(k.1y).T()).1k()};x e=b(\'<2I I="dS">\');b.1i(f,v(m,l){e.Y(b(\'<2h 1X="\'+l+\'">\'+m+"</2h>"))});b("#5M").2A(e);e.9P(i)}},7))}C{b("#2L a").eq(1).1u()}q(7.B.4l!==y){q(7.B.7q===y&&7.2F()===y){q(b("#3r").2b()!==0){b("#3r").6U({2o:7.B.4l,28:7.B.28,29:b.G(7.3Y,7),2r:b.G(7.B.5R,7)})}}7.6K("3r",{3t:M,2o:7.B.4l,29:b.G(7.3Y,7),2r:b.G(7.B.5R,7)})}C{b(".2n").1E();q(7.B.4q===y){b("#2L").1u();b("#5O").1k()}C{x d=b("#2L a");d.eq(0).1u();d.eq(1).1W("3y");b("#5P").1k()}}b("#9k").16(b.G(7.9o,7));q(7.B.4l===y&&7.B.4q===y){2T(v(){b("#36").1e()},4P)}},7);7.3f(F.3h,7.B.9q,dT,c)},9p:v(c){7.5u(\'<2x 44="\'+b(c.1y).U("47")+\'" 6w="\'+b(c.1y).U("K")+\'" />\',M)},9o:v(){q(b("#36").T()!==""){x c=\'<2x 44="\'+b("#36").T()+\'" />\';7.5u(c,M)}C{7.1w()}},3Y:v(c){7.5u(c)},5u:v(d,e){7.2D();q(d!==y){x c="";q(e!==M){c=\'<p><2x 44="\'+d.a5+\'" /></p>\'}C{c=d}7.1D("3q",c);q(e!==M&&O 7.B.3Y==="v"){7.B.3Y(7,d)}}7.1w();7.2y()},9l:v(){7.2B();x c=b.G(v(){7.2m=y;x h=7.1a();x d="",j="",i="";q(7.1j("25")){x f=7.2M();q(f.9m==="A"){7.2m=b(f);j=7.2m.V();d=7.2m.U("12");i=7.2m.U("1y")}C{q(7.2O()){j=h.V}C{j=h.2Q()}}}C{q(h&&h.2H&&h.2H.2k.1r==="A"){d=h.2H.2k.12;j=h.2H.2k.V;i=h.2H.2k.1y;q(h.2Q()===""){7.2m=h.2H.2k}}C{j=h.2Q()}}b(".57").T(j);x e=dU.dV.12.H(/\\/$/i,"");x g=d.H(e,"");q(d.3S("4B:")===0){7.6H(2);b("#4h").T(2);b("#7t").T(d.H("4B:",""))}C{q(g.3S(/^#/gi)===0){7.6H(3);b("#4h").T(3);b("#6s").T(g.H(/^#/gi,""))}C{b("#59").T(g)}}q(i==="7v"){b("#7o").U("a8",M)}b("#ab").16(b.G(7.a9,7));2T(v(){b("#59").1e()},4P)},7);7.3f(F.2g,7.B.ac,dR,c)},a9:v(){x h=b("#4h").T();x f="",j="",d="",i="";q(h==="1"){f=b("#59").T();j=b("#a6").T();q(b("#7o").dQ("a8")){d=\' 1y="7v"\';i="7v"}x g="/(w+:{0,1}w*@)?(S+)(:[0-9]+)?(/|/([w#!:.?+=&%@!-/]))?/";x e=2C 3P("^(6Q|ar|ao)://"+g,"i");x c=2C 3P("^"+g,"i");q(f.3S(e)==-1&&f.3S(c)==0&&7.B.7y!==y){f=7.B.7y+f}}C{q(h==="2"){f="4B:"+b("#7t").T();j=b("#ae").T()}C{q(h==="3"){f="#"+b("#6s").T();j=b("#ak").T()}}}7.al(\'<a 12="\'+f+\'"\'+d+">"+j+"</a>",b.4t(j),f,i)},al:v(c,f,d,e){7.$J.1e();7.2D();q(f!==""){q(7.2m){b(7.2m).V(f);b(7.2m).U("12",d);q(e!==""){b(7.2m).U("1y",e)}C{b(7.2m).aj("1y")}7.1l()}C{7.1D("3q",c)}}7.1w()},ai:v(){7.2B();x c=b.G(v(){x d=7.1a();x e="";q(7.2O()){e=d.V}C{e=d.2Q()}b("#7x").T(e);q(7.B.7q===y&&7.2F()===y){b("#3r").6U({2o:7.B.4X,28:7.B.28,29:b.G(7.40,7),2r:b.G(7.B.7A,7)})}7.6K("3r",{3t:M,2o:7.B.4X,29:b.G(7.40,7),2r:b.G(7.B.7A,7)})},7);7.3f(F.22,7.B.af,dM,c)},40:v(c){7.2D();q(c!==y){x e=b("#7x").T();q(e===""){e=c.dN}x d=\'<a 12="\'+c.a5+\'">\'+e+"</a>";q(7.1j("3l")&&!!7.1Q.7e){d=d+"&1F;"}7.1D("3q",d);q(O 7.B.40==="v"){7.B.40(7,c)}}7.1w()},3f:v(f,e,c,g){q(b("#3A").2b()===0){7.4p=b(\'<E I="3A" 1x="2P: 1S;"></E>\');b("1O").4U(7.4p)}q(7.B.4p){b("#3A").1k();b("#3A").16(b.G(7.1w,7))}q(b("#2c").2b()===0){7.9S=b(\'<E I="2c" 1x="2P: 1S;"><E I="7I">&dO;</E><E I="4N"></E><E I="5y"></E></E>\');b("1O").Y(7.9S)}b("#7I").16(b.G(7.1w,7));7.4k=b.G(v(h){q(h.5w===27){7.1w();D y}},7);b(L).2K(7.4k);7.$J.2K(7.4k);q(e.31("#")==0){b("#5y").7z().Y(b(e).Q())}C{b("#5y").7z().Y(e)}b("#4N").Q(f);q(O b.fn.9T!=="1b"){b("#2c").9T({dP:"#4N"});b("#4N").R("4T","ek")}q(b("#2L").2b()!==0){x d=7;b("#2L a").1i(v(h,j){h++;b(j).16(v(){b("#2L a").1Z("3y");b(7).1W("3y");b(".2n").1E();b("#2n"+h).1k();b("#4h").T(h);q(d.2F()===y){x i=b("#2c").9R();b("#2c").R("3O-1s","-"+(i+10)/2+"1R")}})})}b("#2c .3Z").16(b.G(7.1w,7));q(7.2F()===y){b("#2c").R({2p:"2u",1s:"-6y",1o:"50%",21:c+"1R",eo:"-"+(c+60)/2+"1R"}).1k();7.6I=b(L.1O).R("6J");b(L.1O).R("6J","6x")}C{b("#2c").R({2p:"2u",21:"4H%",1q:"4H%",1s:"0",1o:"0",3O:"0",4i:"eU"}).1k()}q(O g==="v"){g()}q(7.2F()===y){2T(v(){x h=b("#2c").9R();b("#2c").R({1s:"50%",1q:"3t",4i:"3t",eV:"-"+(h+10)/2+"1R"})},20)}},1w:v(){b("#7I").4f("16",7.1w);b("#2c").eW("eX",b.G(v(){b("#5y").Q("");q(7.B.4p){b("#3A").1E();b("#3A").4f("16",7.1w)}b(L).4f("2K",7.4k);7.$J.4f("2K",7.4k)},7));q(7.2F()===y){b(L.1O).R("6J",7.6I?7.6I:"eT")}D y},6H:v(c){b(".2n").1E();x d=b("#2L a");d.1Z("3y");d.eq(c-1).1W("3y");b("#2n"+c).1k()},6K:v(d,c){7.1B={2o:y,29:y,2r:y,6F:y,6L:y,3t:y,18:y};b.3m(7.1B,c);q(b("#"+d).2b()!==0&&b("#"+d).19(0).1r==="eS"){7.1B.18=b("#"+d);7.2Y=b(b("#"+d).19(0).1d)}C{7.2Y=b("#"+d)}7.9O=7.2Y.U("3a");q(7.1B.3t){b(7.1B.18).9P(b.G(v(){7.2Y.6D(v(f){D y});7.6P()},7))}C{q(7.1B.6L){b("#"+7.1B.6L).16(b.G(7.6P,7))}}},6P:v(){7.a1(7.2Y,7.9V())},9V:v(){7.I="f"+2d.9W(2d.6O()*a2);x e=7.L.3g("E");x c=\'<1t 1x="2P:1S" I="\'+7.I+\'" 1v="\'+7.I+\'"></1t>\';e.3B=c;b(e).5o("1O");q(7.1B.6F){7.1B.6F()}b("#"+7.I).a3(b.G(7.9X,7));D 7.I},a1:v(g,e){q(7.1B.18){x h="eO"+7.I;x c="eP"+7.I;7.1d=b(\'<1d  3a="\'+7.1B.2o+\'" 4u="79" 1y="\'+e+\'" 1v="\'+h+\'" I="\'+h+\'" 5e="5d/1d-11"></1d>\');q(7.B.28!==y&&O 7.B.28==="1P"){b.1i(7.B.28,b.G(v(j,f){q(f.2Q().31("#")===0){f=b(f).T()}x l=b("<18/>",{1f:"6x",1v:j,1X:f});b(7.1d).Y(l)},7))}x d=7.1B.18;x i=b(d).3I();b(d).U("I",c);b(d).2A(i);b(d).5o(7.1d);b(7.1d).R("2p","6u");b(7.1d).R("1s","-6y");b(7.1d).R("1o","-6y");b(7.1d).5o("1O");7.1d.6D()}C{g.U("1y",e);g.U("4u","79");g.U("5e","5d/1d-11");g.U("3a",7.1B.2o);7.2Y.6D()}},9X:v(){x g=b("#"+7.I)[0];x h;q(g.9Y){h=g.9Y}C{q(g.9Z){h=g.9Z.L}C{h=1Q.eQ[7.I].L}}q(7.1B.29){q(O h!=="1b"){x f=h.1O.3B;x e=f.5t(/\\{(.|\\n)*\\}/)[0];x c=b.ay(e);q(O c.2r=="1b"){7.1B.29(c)}C{7.1B.2r(7,c);7.1w()}}C{eR("a0 eY!");7.1w()}}7.2Y.U("3a",7.9O);7.2Y.U("1y","")},1j:v(d){x e=3U.3R.9N();x c=/(7e)[ \\/]([\\w.]+)/.15(e)||/(3l)[ \\/]([\\w.]+)/.15(e)||/(9Q)(?:.*4Q|)[ \\/]([\\w.]+)/.15(e)||/(25) ([\\w.]+)/.15(e)||e.31("eZ")<0&&/(3j)(?:.*? f6:([\\w.]+)|)/.15(e)||[];q(d=="4Q"){D c[2]}q(d=="3l"){D(c[1]=="7e"||c[1]=="3l")}D c[1]==d},2O:v(){q(7.1j("25")&&5A(7.1j("4Q"),10)<9){D M}D y},4S:v(c){D b("<p>").Y(b(c).eq(0).3I()).Q()},f7:v(c){D 5A(c.H("1R",""),10)},2F:v(c){q(c===M&&/(a4|ah|f8|ag|ad)/.7s(3U.3R)){D M}C{q(/(a4|ah|ag|ad)/.7s(3U.3R)){D M}C{D y}}}};b.fn.f5=v(){D 7.11("1N")};b.fn.f4=v(){D 7.11("1N").$J};b.fn.4C=v(){D b.4t(7.11("1N").4C())};b.fn.f0=v(){D 7.11("1N").$J.V()};b.fn.f1=v(){D 7.11("1N").9M()};b.fn.52=v(c){7.11("1N").52(c)};b.fn.7a=v(c){7.11("1N").7a(c)};b.fn.f2=v(){7.1i(v(){q(O b(7).11("1N")!="1b"){b(7).11("1N").9j();b(7).f3("1N")}})};b.fn.eN=v(){7.11("1N").$J.1e()};b.fn.1D=v(c,d){7.11("1N").1D(c,d)}})(3L);(v(b){b.fn.6U=v(c){D 7.1i(v(){x d=2C a(7,c);d.3Q()})};v a(d,c){7.B=b.3m({2o:y,29:y,2r:y,eM:y,28:y,V:F.9f,9A:F.9s},c);7.$el=b(d)}a.9E={3Q:v(){q(3U.3R.3S("ew")===-1){7.78=b(\'<E N="ex"></E>\');7.2S=b(\'<E N="ey">\'+7.B.V+"</E>");7.am=b(\'<E N="ez">\'+7.B.9A+"</E>");7.78.Y(7.2S);7.$el.2A(7.78);7.$el.2A(7.am);7.2S.4v("ev",b.G(v(){D 7.az()},7));7.2S.4v("eu",b.G(v(){D 7.aB()},7));x e=b.G(v(g){x f=5A(g.ep/g.er*4H,10);7.2S.V("es "+f+"%")},7);x d=3L.et.ax();q(d.3W){d.3W.eA("aV",e,y)}x c=v(){D d};7.2S.19(0).eB=b.G(v(h){h.2V();7.2S.1Z("4E").1W("eI");x g=h.eJ.eK[0];x f=2C eL();q(7.B.28!==y&&O 7.B.28==="1P"){b.1i(7.B.28,b.G(v(j,i){q(i.2Q().31("#")===0){i=b(i).T()}f.Y(j,i)},7))}f.Y("22",g);b.b8({2o:7.B.2o,eH:"Q",11:f,ax:c,eG:y,eC:y,eD:y,1f:"79",29:b.G(v(j){x i=b.ay(j);q(O i.2r=="1b"){7.B.29(i)}C{7.B.2r(7,i);7.B.29(y)}},7)})},7)}},az:v(){7.2S.1W("4E");D y},aB:v(){7.2S.1Z("4E");D y}}})(3L);(v(b){x e="6Q://";x d=/(^|&4z;|\\s)(eE\\..+?\\..+?)(\\s|&4r;|$)/g,a=/(^|&4z;|\\s)(((ao?|ar):\\/\\/|4B:).+?)(\\s|&4r;|$)/g,c=v(){x h=7.6z,g=h.39;4L(g--){x j=h[g];q(j.5r===3){x f=j.eF;q(f){f=f.H(/&/g,"&7m;").H(/</g,"&4z;").H(/>/g,"&4r;").H(d,\'$1<a 12="\'+e+\'$2">$2</a>$3\').H(a,\'$1<a 12="$2">$2</a>$5\');b(j).26(f).1u()}}C{q(j.5r===1&&!/^(a|3d|2s)$/i.7s(j.1r)){c.4O(j)}}}};b.fn.aO=v(){7.1i(c)}})(3L);(v(a){a.1Y.2w.37={aK:v(c,b){a(7).11("3i",y);a(7).11("aL",c);a(7).56("3E",a.1Y.2w.37.3G)},aF:v(b){a(7).aP("3E",a.1Y.2w.37.3G)},3G:v(b){x c=a(7).11("aL");x d=a.1Y.2w.37.5l(c).2Q();q(d!=""){a(7).11("3i",M);b.1f="37";b.V=d;a.1Y.5N.5L(7,5C)}},5l:v(b){x c="";q(49.1a){c=49.1a()}C{q(3k.1a){c=3k.1a()}C{q(3k.1z){c=3k.1z.2E().V}}}D c}};a.1Y.2w.3x={aK:v(c,b){a(7).11("69",c);a(7).11("3i",y);a(7).56("3E",a.1Y.2w.3x.3G);a(7).56("2K",a.1Y.2w.3x.aE)},aF:v(b){a(7).4f("3E",a.1Y.2w.3x.3G)},3G:v(b){q(a(7).11("3i")){x c=a(7).11("69");x d=a.1Y.2w.37.5l(c).2Q();q(d==""){a(7).11("3i",y);b.1f="3x";a.1Y.5N.5L(7,5C)}}},aE:v(b){q(a(7).11("3i")){x c=a(7).11("69");x d=a.1Y.2w.37.5l(c).2Q();q((b.5w=27)&&(d=="")){a(7).11("3i",y);b.1f="3x";a.1Y.5N.5L(7,5C)}}}}})(3L);',62,1013,'|||||||this|||||||||||||||||||if|||||function||var|false|||opts|else|return|div|RLANG|proxy|replace|id|editor|title|document|true|class|typeof||html|css||val|attr|text||null|append|toolbar||data|href|||exec|click|label|input|get|getSelection|undefined|td|form|focus|type|func|table|each|browser|show|syncCode|li|pre|left|find|height|tagName|top|iframe|remove|name|modalClose|style|target|selection|getBtn|uploadOptions|shortcuts|execCommand|hide|nbsp|javascript|content|air|tr|void|span|parent|redactor|body|object|window|px|none|video|thead|box|addClass|value|event|removeClass||width|file|callback|dropdown|msie|after||uploadFields|success|blockquote|size|redactor_modal|Math|redactor_modal_btn|formatblock|link|option|offset|className|parentNode|embed|insert_link_node|redactor_tab|url|position|bold|error|textarea|italic|fixed|replaceWith|special|img|observeImages|redactor_input|before|saveSelection|new|restoreSelection|createRange|isMobile|audio|anchorNode|select|setBtnActive|keyup|redactor_tabs|getParentNode|ul|oldIE|display|toString|backcolor|dropareabox|setTimeout|String|preventDefault|deleted|formatting|element|right||indexOf|execRun|ol|for|buttons|redactor_file_link|textselect|tbody|length|action|Insert|orderedlist|button|unorderedlist|modalInit|createElement|image|textselected|mozilla|rdocument|webkit|extend|collapse|fontcolor|indent|inserthtml|redactor_file|getCurrentNode|auto|savedSel|outdent|buffer|textunselect|redactor_tabs_act|visual|redactor_modal_overlay|innerHTML|cancel|round|mouseup|closest|handler|current_tr|clone|scrollTop|redactorfolder|jQuery|param|dropact|margin|RegExp|init|userAgent|search|underline|navigator|redactor_modal_content|upload|buildButton|imageUploadCallback|redactor_btn_modal_close|fileUploadCallback|insertNodeAtCaret|autoresize|insert|src|Delete||rel|redactor_modal_footer|rwindow|Add|justify|shiftKey|lang|stripTags|unbind|th|redactor_tab_selected|minHeight|h4|hdlModalClose|imageUpload|h1|h2|h3|overlay|imageGetJson|gt|break|trim|method|bind|unlink|getRangeAt|color|lt|dropdowns|mailto|getCode|rangeCount|hover|setSelection|textareamode|100|toolbarExternal|redactor_editor|tabindex|while|source|redactor_modal_header|call|200|version|redactor_btn_|outerHTML|cursor|prepend|float|10px|fileUpload|horizontalrule|hideAllDropDown||folder|setCode|activeButtons|parentElement|saveScroll|on|redactor_link_text|PRE|redactor_link_url|Header|_isText|savedSelObj|multipart|enctype|JustifyRight|JustifyFull|inArray|redactor_separator|autosave|JustifyCenter|getSelectedText|RELANG|alignment|appendTo|post|observeTables|nodeType|emptyHtml|match|_imageSet|appendChild|keyCode|separator|redactor_modal_inner|code|parseInt|plugins|arguments|setBtnInactive|redactor_act|pasteCleanUpInsert|inactiveAllButtons|choose|focusNode|hasSelection|redactor_btn_right|apply|redactor_image_box|dispatch|redactor_tab3|redactor_tab2|extractContent|imageUploadErrorCallback|save|removeChild|current_td|insertColumn|figure|moveToElementText|colors|pasteHTML||insertRow|deleteHead|pageY|redactor_table_rows|autosaveCallback||pageX|push|rttt|fieldset|addRange|redactor_file_alt|one|h5|redactor_form_image_align|_getBoundary|caption|catch|_moveBoundary|RedactorPlugins|legend|removeAllRanges|redactor_insert_video_area|previousSibling|StartToStart|h6|try|redactor_link_anchor|add_head|absolute|align_left|alt|hidden|2000px|childNodes|pasteHtmlAtCaret|delete_table|JustifyLeft|submit|align_center|start|keydown|setModalTab|modalSaveBodyOveflow|overflow|uploadInit|trigger|align_right|keydownCallback|random|uploadSubmit|http|delete_row|delete_head|Table|dragupload|Row|Column|direction|build|insert_row_above|insert_table|insert_column_left|||||||droparea|POST|insertHtml|delete_column|alignleft|observeScroll|chrome|case|aligncenter|contenteditable|redactor_air|elem|alignright|align|amp|anchor|redactor_link_blank|DIV|uploadCrossDomain|Email|test|redactor_link_mailto|align_justify|_blank|encodeEntities|redactor_filename|protocol|empty|fileUploadErrorCallback|insert_row_below|savePreCode|URL|createTextNode|keyupCallback|convertDivs|insert_column_right|redactor_modal_close|BLOCKQUOTE|inserthorizontalrule|execCommandCallback|pasteRunning|header3|7f7f7f|observeFormatting|showDropDown|redactor_dropdown|hideDropDown|buttonsAdd|header2|setColorNone|rows|setBackgroundNone|activeButtonsStates|insertorderedlist|b7dde8|dir|pasteCleanUp|wym|cleanupPre|link_new_tab|contents|redactor_tab1|split|insertAfter|TEXTAREA|header4|redactor_editor_wym|prebuffer_|delete|image_web_link|insertunorderedlist|enableAir|showAir|quot|hasClass|fixedBox|metaKey|formatNewLine|center|airButtons|ctrlKey|interval|safariShiftKeyEnter|formatEmpty|_delete|image_position|buildToolbar|autosaveInterval|autoSave|formattingAddAfter|formattingAddBefore|formattingEmptyTags|formattingRemove|splice|hr|which|toggle|convertLinks|formattingIndenting|paragraphy|tfoot|buildColorPicker|header1|fixedTop|zIndex|innerWidth|address|allowedTags|font|BackColor|forecolor|setBuffer|getBuffer|quote|paragraph|mobile||video_html_code|link_insert|hdlShowDropDown|Chrome|columns|cleanup|buildDropdown|buttonsCustom||redactor_image_delete_btn|imageSave|showImage|isEmptyObject|imageDelete|drop_file_here|formattingTags|redactorSaveBtn|modal_image_edit|destroy|redactor_upload_btn|showLink|nodeName|del|imageUploadCallbackLink|imageSetThumb|modal_image|strike|or_choose|imageEdit|deleteRow|deleteColumn|insertRowAbove|deleteTable|Code|Video|atext|tableObserver|insertRowBelow|insertColumnLeft|prototype|redactor_insert_video_btn|insertVideo|modal_video|showVideo|insertColumnRight|table_tr|strong|getSelectedHtml|toLowerCase|element_action|change|opera|outerHeight|modal|draggable|the|uploadFrame|floor|uploadLoaded|contentDocument|contentWindow|Upload|uploadForm|99999|load|iPhone|filelink|redactor_link_url_text|to|checked|insertLink|Align|redactor_insert_link_btn|modal_link|Android|redactor_link_mailto_text|modal_file|BlackBerry|iPod|showFile|removeAttr|redactor_link_anchor_text|_insertLink|dropalternative|addHead|https|insertBefore|nextSibling|ftp|compareEndPoints|StartToEnd|redactor_table_columns|setEndPoint|_getChildIndex|xhr|parseJSON|ondrag|EndToEnd|ondragleave|getSelectedNode|List|handlerKey|teardown|firstChild|createDocumentFragment|next|getFragmentHtml|setup|ttt|getFocus|Color|linkify|off|getOrigin|insertNode|createTextRange|Left|Text|progress|modal_table|Head|Right|resizeImage|mousemove|cloneRange|mousedown|Image|Link|showTable|insertTable|redactor_insert_table_btn|ajax|Horizontal|Rule|bull|redactor_format_h1|tab|Bold|Underline|File|web|Justify|Deleted|Paragraph|redactor_format_pre|Embed|separator_drop1|in|Italic|Open||Quote|Unlink|Formatting|Anchor|HTML|Ordered|Below|separator_drop3|Rows|Columns|Title|Above|separator_drop2|redactor_format_h3|strikethrough|Download|Choose|redactor_format_h4|Or|Drop|Position|Unordered|Web|download|redactor_format_h2|Back|Outdent|Indent|here|None|Center|Save|Cancel|Font|sup|c4bd97|0f243e|595959|d8d8d8|8db3e2|1d1b10|e5b9b7|c09100|b8cce4|0c0c0c|244061|632423|31859b|ebf1dd|f2dcdb|dbe5f1|e5e0ec|dbeef3|fff2ca|4f6128|3f3151|fdeada|e36c09|d7e3bc|a5a5a5|262626|494429|17365d|f2c314|fac08f|548dd4|d99694|c3d69b|b2a2c7|366092|953734|ffe694|fbd5b5|92cddc|ccc1d9|bfbfbf|3f3f3f|938953|76923c|5f497a|c6d9f0|974806|track|canvas|time|nav|mark|redactorInsertVideoForm|sub|95b3d7|small|cite|details|article|output|datalist|ltr|redactor_format_blockquote|section|160px|footer|aside|hgroup|header|big|checkbox|ffff00|7px|f79646||4bacc6|optional|f2f2f2|7f6000|ddd9c3|redactorUploadFileForm|Name||8064a2|9bbb59|000000|ffffff|redactorInsertLinkForm|figcaption|redactorInsertImageForm||eeece1|c0504d|4f81bd|1f497d|Alignment|BODY|first|600|redactor_image_edit_src|380|cellIndex|table_td|htmlText|nw|resize|300|getJSON|thumb|500|filename|times|handle|prop|460|redactor_image_box_select|610|self|location|cloneContents|getElementById|removeBtn|cloneNode|anchorOffset|focusOffset|addBtnBefore|addBtnAfter|setBtnRight|setBtnLeft|addBtn|addBtnFirst|setStart|setEnd|insertNodeAfterCaret|selectNodeContents|marker_|slice|character|536|commonAncestorContainer|duplicate|EndToStart|moveStart|move||||marginLeft|loaded||total|Loading|ajaxSettings|dragleave|dragover|MSIE|redactor_droparea|redactor_dropareabox|redactor_dropalternative|addEventListener|ondrop|contentType|processData|www|nodeValue|cache|dataType|drop|dataTransfer|files|FormData|preview|setFocus|redactorUploadForm|redactorUploadFile|frames|alert|INPUT|visible|300px|marginTop|fadeOut|fast|failed|compatible|getText|getSelected|destroyEditor|removeData|getEditor|getObject|rv|normalize|iPad|prev|moveEnd|1005|relative|removeBtnSeparatorBefore|H1|unselectable|default|Control|clearInterval|switch|H2|H3|math||script|z0|colgroup|TD|H4|H5|H6|setStartAfter|deleteContents|undo|removeFormat|superscript|subscript|redo|scroll|paste|enableObjectResizing|enableInlineTableEditing|redactor_box|ownerDocument|min|clientX|clientY|redactor_|frameborder|defaultView|head|stylesheet|textContent|parents|hilitecolor|210|backgroundColor|redactor_color_none|redactor_separator_drop|redactor_toolbar|setInterval|escape|encodeURIComponent|1000|background|transparent|addBtnSeparator|addBtnSeparatorAfter|addBtnSeparatorBefore|removeBtnSeparatorAfter|removeBtnIcon|changeBtnIcon|30px|stopPropagation|showedDropDown|innerHeight|redactor_color_link|internal|sid|php||marker|innerText'.split('|'),0,{}))
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/js/top-bar.js elefant-elefant_1_3_3_beta/apps/admin/js/top-bar.js
--- elefant-elefant_1_3_2_beta/apps/admin/js/top-bar.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/js/top-bar.js	2013-03-20 13:48:44.000000000 -0500
@@ -18,7 +18,7 @@
  *
  *     <a href="/post/here"
  *        data-id="{{id}}"
- *        onclick="$.confirm_and_post (this, 'Are you sure?')"
+ *        onclick="return $.confirm_and_post (this, 'Are you sure?')"
  *     >Delete</a>
  */
 jQuery.confirm_and_post = function (el, msg) {
@@ -31,7 +31,7 @@
 	}
 
 	var $el = $(el),
-		params = $el.data ()
+		params = $el.data (),
 		url = $el.attr ('href'),
 		$form = $('<form>')
 			.attr ('method', 'post')
@@ -49,26 +49,123 @@
 	return false;
 };
 
+/**
+ * Turns a section of a form into an expandable/collapsible section.
+ * Usage:
+ *
+ *     <h4 id="extras-header">{"Extra options"}</h4>
+ *     <div id="extras-section">
+ *         <!-- Extra content here -->
+ *     </div>
+ *     
+ *     <script>
+ *     $(function () {
+ *         $.expanded_section ({
+ *             handle: '#extras-header',
+ *             section: '#extras-section',
+ *             visible: false
+ *         });
+ *     });
+ *     </script>
+ */
+jQuery.expanded_section = function (options) {
+	var defaults = {
+		header: '#expanded-header',
+		section: '#expanded-section',
+		arrowClass: 'arrow',
+		arrowOffClass: 'arrow-off',
+		visible: false
+	};
+
+	var options = $.extend (defaults, options),
+		header = $(options.header),
+		section = $(options.section);
+
+	if (options.visible) {
+		header.prepend ('<span class="' + options.arrowClass + '"></span>');
+		section.css ('display', 'block');
+	} else {
+		header.prepend ('<span class="' + options.arrowClass + ' ' + options.arrowOffClass + '"></span>');
+		section.css ('display', 'none');
+	}
+
+	header
+		.hover (
+			function () {
+				$(this).css ('cursor', 'pointer');
+			},
+			function () {
+				$(this).css ('cursor', 'default');
+			}
+		)
+		.click (
+			function (evt) {
+				if (section.css ('display') === 'none') {
+					section.slideDown ('fast', function () {
+						window.scrollTo (0, 1000);
+					});
+					header.children ('span.' + options.arrowClass).removeClass (options.arrowOffClass);
+				} else {
+					section.slideUp ('fast', function () {
+						section.css ('display', 'none');
+					});
+					header.children ('span.' + options.arrowClass).addClass (options.arrowOffClass);
+				}
+			}
+		);
+};
+
+/**
+ * Translates strings of text in .js files.
+ * Usage:
+ *
+ *     <script>
+ *     $(function () {
+ *         // This will make the text available to $.i18n()
+ *         $.i18n_append ({
+ *             'Some text': '{"Some text"}',
+ *             'Another string': '{"Another string"}'
+ *         });
+ *         
+ *         // Now fetch a translated string
+ *         console.log ($.i18n ('Some text'));
+ *     });
+ *     </script>
+ */
+(function ($) {
+	var strings = {};
+
+	$.i18n_append = function (obj) {
+		strings = $.extend (strings, obj);
+	};
+
+	$.i18n = function (text) {
+		if (strings[text]) {
+			return strings[text];
+		}
+		return text;
+	};
+})(jQuery);
+
 $(function () {
 	var sliding_up = false;
 	$('body').append ('<div id="admin-bar"><div id="admin-links"></div><a href="/"><img id="admin-logo" src="/apps/admin/css/admin/spacer.png" alt="" /></a></div>');
 	$.get ('/admin/head/links', function (res) {
 		$('#admin-logo').attr ('src', res.logo).attr ('alt', res.name);
 		$('#admin-links').append (res.links);
-		$('#admin-tools').hover (function () {
-			if (! sliding_up) {
-				$('#admin-tools-list').slideDown ('fast').show ();
+		
+		
+		$('#admin-tools').hover (
+			function () {
+				$('#admin-tools-list').stop ().css("height","auto").slideDown ('fast');
+			},
+			function () {
+				$('#admin-tools-list').stop ().slideUp ('slow');
 			}
-			$(this).parent ().hover (
-				function () {},
-				function () {
-					sliding_up = true;
-					$('#admin-tools-list').slideUp ('slow', function () {
-						sliding_up = false;
-					});
-				}
-			);
-		})
+		)
+		$('#admin-links a').not('#admin-tools-list a').bind("mouseover", function(){
+			$('#admin-tools-list').stop ().slideUp ('slow');
+		});
 	});
 	$('.admin-options a').hover (
 		function () {
Files elefant-elefant_1_3_2_beta/apps/admin/lib/Diff.php and elefant-elefant_1_3_3_beta/apps/admin/lib/Diff.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/lib/ExtendedAPI.php elefant-elefant_1_3_3_beta/apps/admin/lib/ExtendedAPI.php
--- elefant-elefant_1_3_2_beta/apps/admin/lib/ExtendedAPI.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/lib/ExtendedAPI.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,140 @@
+<?php
+
+/**
+ * Provides the RESTful API for the extended fields form.
+ */
+class ExtendedAPI extends Restful {
+	/**
+	 * Add a new field. Parameters should be:
+	 *
+	 * - class
+	 * - name
+	 * - label
+	 * - type
+	 * - required
+	 * - options
+	 */
+	public function post_add () {
+		if (! isset ($_POST['class'])) {
+			return $this->error (__ ('Missing parameter: class'));
+		}
+		
+		if (! class_exists ($_POST['class'])) {
+			return $this->error (__ ('Invalid class name.'));
+		}
+
+		if (! isset ($_POST['name']) || empty ($_POST['name'])) {
+			return $this->error (__ ('Missing parameter: name'));
+		}
+
+		if (! isset ($_POST['label']) || empty ($_POST['label'])) {
+			return $this->error (__ ('Missing parameter: label'));
+		}
+
+		if (! isset ($_POST['type']) || empty ($_POST['type'])) {
+			return $this->error (__ ('Missing parameter: type'));
+		}
+		
+		if (! isset ($_POST['required'])) {
+			return $this->error (__ ('Missing parameter: required'));
+		}
+		
+		if (! isset ($_POST['options'])) {
+			return $this->error (__ ('Missing parameter: options'));
+		}
+		error_log (json_encode ($_POST));
+		error_log ($_POST['class']);
+		error_log ($_POST['type']);
+		error_log ($_POST['name']);
+
+		$_POST['sort'] = ExtendedFields::next_sort ($_POST['class']);
+		error_log ($_POST['sort']);
+
+		$obj = new ExtendedFields ($_POST);
+
+		if (! $obj->put ()) {
+			return $this->error (__ ('An unknown error occurred.'));
+		}
+
+		return $obj->orig ();
+	}
+
+	/**
+	 * Update a field.
+	 */
+	public function post_edit () {
+		if (! isset ($_POST['id'])) {
+			return $this->error (__ ('Missing parameter: id'));
+		}
+
+		$obj = new ExtendedFields ($_POST['id']);
+		if ($obj->error) {
+			return $this->error (__ ('Field not found.'));
+		}
+
+		$obj->label		= isset ($_POST['label'])		? $_POST['label']		: $obj->label;
+		$obj->type		= isset ($_POST['type'])		? $_POST['type']		: $obj->type;
+		$obj->options	= isset ($_POST['options'])		? $_POST['options']		: $obj->options;
+		$obj->required	= isset ($_POST['required'])	? $_POST['required']	: $obj->required;
+
+		if (! $obj->put ()) {
+			return $this->error (__ ('An unknown error occurred.'));
+		}
+
+		return $obj->orig ();
+	}
+
+	/**
+	 * Delete a field.
+	 */
+	public function post_delete () {
+		if (! isset ($_POST['id'])) {
+			return $this->error (__ ('Missing parameter: id'));
+		}
+
+		$obj = new ExtendedFields ($_POST['id']);
+		if ($obj->error) {
+			return $this->error (__ ('Field not found.'));
+		}
+
+		$o = $obj->orig ();
+
+		if (! $obj->remove ()) {
+			return $this->error (__ ('An unknown error occurred.'));
+		}
+
+		return $_POST['id'];
+	}
+
+	/**
+	 * Update the sorting order of the specified fields.
+	 * Accepts an array of field IDs of the form:
+	 *
+	 *     fields[]=2&fields[]=1&fields[]=3
+	 *
+	 * This should be the new sorting order (ascending).
+	 */
+	public function post_sort () {
+		if (! isset ($_POST['fields']) || ! is_array ($_POST['fields'])) {
+			return $this->error (__ ('Missing parameter: fields'));
+		}
+
+		ExtendedFields::batch (function () {
+			for ($i = 0; $i < count ($_POST['fields']); $i++) {
+				if (! DB::execute (
+					'update #prefix#extended_fields set sort = ? where id = ?',
+					$i,
+					$_POST['fields'][$i]
+				)) {
+					return false;
+				}
+			}
+
+			return true;
+		});
+
+		return true;
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/lib/Functions.php elefant-elefant_1_3_3_beta/apps/admin/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/admin/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -26,6 +26,9 @@
  * The reverse lookup that returns HTML for a given ID value.
  */
 function admin_embed_lookup ($id) {
+	if (! file_exists ('cache/html/' . $id . '.html')) {
+		return '';
+	}
 	return file_get_contents ('cache/html/' . $id . '.html');
 }
 
@@ -72,11 +75,11 @@
 	return array (
 		(object) array (
 			'key' => 301,
-			'value' => i18n_get ('Permanent (best for SEO)')
+			'value' => __ ('Permanent (best for SEO)')
 		),
 		(object) array (
 			'key' => 302,
-			'value' => i18n_get ('Temporary')
+			'value' => __ ('Temporary')
 		)
 	);
 }
@@ -90,7 +93,7 @@
 	foreach ($list as $access) {
 		$out[] = (object) array (
 			'key' => $access,
-			'value' => i18n_get (ucfirst ($access))
+			'value' => __ (ucfirst ($access))
 		);
 	}
 	return $out;
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/lib/Lock.php elefant-elefant_1_3_3_beta/apps/admin/lib/Lock.php
--- elefant-elefant_1_3_2_beta/apps/admin/lib/Lock.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/lib/Lock.php	2013-03-20 13:48:44.000000000 -0500
@@ -91,7 +91,7 @@
 		$key = ($key) ? $key : $this->key;
 		
 		if (DB::execute (
-			'insert into `lock`
+			'insert into `#prefix#lock`
 				(user, resource, resource_id, expires, created, modified)
 			values
 				(?, ?, ?, ?, ?, ?)',
@@ -116,7 +116,7 @@
 		$key = ($key) ? $key : $this->key;
 
 		return DB::shift (
-			'select id from `lock` where user != ? and resource = ? and resource_id = ? and expires > ?',
+			'select id from `#prefix#lock` where user != ? and resource = ? and resource_id = ? and expires > ?',
 			User::val ('id'),
 			$resource,
 			$key,
@@ -131,7 +131,7 @@
 		$resource = ($resource) ? $resource : $this->resource;
 		$key = ($key) ? $key : $this->key;
 
-		return DB::single ('select * from `lock` where resource = ? and resource_id = ?', $resource, $key);
+		return DB::single ('select * from `#prefix#lock` where resource = ? and resource_id = ?', $resource, $key);
 	}
 
 	/**
@@ -142,7 +142,7 @@
 		$key = ($key) ? $key : $this->key;
 
 		if (DB::execute (
-			'update `lock` set modified = ?, expires = ? where resource = ? and resource_id = ?',
+			'update `#prefix#lock` set modified = ?, expires = ? where resource = ? and resource_id = ?',
 			gmdate ('Y-m-d H:i:s'),
 			gmdate ('Y-m-d H:i:s', time () + $this->timeout),
 			$resource,
@@ -161,21 +161,21 @@
 		$resource = ($resource) ? $resource : $this->resource;
 		$key = ($key) ? $key : $this->key;
 
-		return DB::execute ('delete from `lock` where resource = ? and resource_id = ?', $resource, $key);
+		return DB::execute ('delete from `#prefix#lock` where resource = ? and resource_id = ?', $resource, $key);
 	}
 
 	/**
 	 * Clear all locks held by the current user.
 	 */
 	public static function clear () {
-		return DB::execute ('delete from `lock` where user = ?', User::val ('id'));
+		return DB::execute ('delete from `#prefix#lock` where user = ?', User::val ('id'));
 	}
 
 	/**
 	 * Clear all locks.
 	 */
 	public static function clear_all () {
-		return DB::execute ('delete from `lock`');
+		return DB::execute ('delete from `#prefix#lock`');
 	}
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/lib/Notifier.php elefant-elefant_1_3_3_beta/apps/admin/lib/Notifier.php
--- elefant-elefant_1_3_2_beta/apps/admin/lib/Notifier.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/lib/Notifier.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,26 @@
+<?php
+
+/**
+ * Provides a general-purpose user notifier based on the jQuery
+ * cookie and jGrowl plugins. See `apps/admin/handlers/util/notifier.php`
+ * for more information.
+ *
+ * Usage:
+ *
+ *     Notifier::add_notice ('My notification.');
+ */
+class Notifier {
+	public static $cookie_name = 'notifier_notices';
+	
+	/**
+	 * Add a notice for the current user.
+	 */
+	public static function add_notice ($msg) {
+		if (isset ($_COOKIE[self::$cookie_name])) {
+			$msg = $_COOKIE[self::$cookie_name] . '|' . $msg;
+		}
+		return setcookie (self::$cookie_name, $msg, 0, '/');
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/models/ExtendedFields.php elefant-elefant_1_3_3_beta/apps/admin/models/ExtendedFields.php
--- elefant-elefant_1_3_2_beta/apps/admin/models/ExtendedFields.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/models/ExtendedFields.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,64 @@
+<?php
+
+/**
+ * Elefant CMS - http://www.elefantcms.com/
+ *
+ * Copyright (c) 2011 Johnny Broadway
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a copy
+ * of this software and associated documentation files (the "Software"), to deal
+ * in the Software without restriction, including without limitation the rights
+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+ * copies of the Software, and to permit persons to whom the Software is
+ * furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+ * THE SOFTWARE.
+ */
+
+/**
+ * Model for managing extended fields for ExtendedModel classes.
+ *
+ * Fields:
+ *
+ * id
+ * class
+ * sort
+ * name
+ * label
+ * type
+ * required
+ * options
+ */
+class ExtendedFields extends Model {
+	public $table = '#prefix#extended_fields';
+
+	/**
+	 * Get a list of extended fields for the specified class.
+	 */
+	public static function for_class ($class) {
+		return self::query ()
+			->where ('class', $class)
+			->order ('sort', 'asc')
+			->fetch_orig ();
+	}
+
+	/**
+	 * Get the next number to use for sorting.
+	 */
+	public static function next_sort ($class) {
+		return self::query ()
+			->where ('class', $class)
+			->count ();
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/models/Versions.php elefant-elefant_1_3_3_beta/apps/admin/models/Versions.php
--- elefant-elefant_1_3_2_beta/apps/admin/models/Versions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/models/Versions.php	2013-03-20 13:48:44.000000000 -0500
@@ -68,6 +68,11 @@
  */
 class Versions extends Model {
 	/**
+	 * The database table name.
+	 */
+	public $table = '#prefix#versions';
+
+	/**
 	 * Add a version to the store.
 	 */
 	public static function add ($obj) {
@@ -181,8 +186,8 @@
 	 * Get a list of classes that have objects stored.
 	 */
 	public static function get_classes () {
-		return db_shift_array (
-			'select distinct class from versions order by class asc'
+		return DB::shift_array (
+			'select distinct class from #prefix#versions order by class asc'
 		);
 	}
 }
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/models/Webpage.php elefant-elefant_1_3_3_beta/apps/admin/models/Webpage.php
--- elefant-elefant_1_3_2_beta/apps/admin/models/Webpage.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/models/Webpage.php	2013-03-20 13:48:44.000000000 -0500
@@ -42,6 +42,11 @@
  */
 class Webpage extends Model {
 	/**
+	 * The database table name.
+	 */
+	public $table = '#prefix#webpage';
+
+	/**
 	 * Override the getter for head to include the description
 	 * and keywords fields as meta tags.
 	 */
@@ -58,6 +63,21 @@
 		}
 		return parent::__get ($key);
 	}
+
+	/**
+	 * Generate a list of pages for the sitemaps app.
+	 */
+	public static function sitemap () {
+		$pages = self::query ()
+			->where ('access', 'public')
+			->fetch_orig ();
+		
+		$urls = array ();
+		foreach ($pages as $page) {
+			$urls[] = Link::href ($page->id);
+		}
+		return $urls;
+	}
 }
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/admin/views/add/head.html and elefant-elefant_1_3_3_beta/apps/admin/views/add/head.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/add.html and elefant-elefant_1_3_3_beta/apps/admin/views/add.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/base.html and elefant-elefant_1_3_3_beta/apps/admin/views/base.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/compare.html and elefant-elefant_1_3_3_beta/apps/admin/views/compare.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/default-validation.html and elefant-elefant_1_3_3_beta/apps/admin/views/default-validation.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/edit/head.html and elefant-elefant_1_3_3_beta/apps/admin/views/edit/head.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/edit.html and elefant-elefant_1_3_3_beta/apps/admin/views/edit.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/editable.html elefant-elefant_1_3_3_beta/apps/admin/views/editable.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/editable.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/views/editable.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,3 +1,3 @@
 <p class="admin-options">
-	<a href="/admin/add" title="{"Add Page"}"><img src="/apps/admin/css/admin/add.png" /></a>{% if locked %}<a href="javascript:void(0)" title="{"Editing Locked"}"><img src="/apps/admin/css/admin/lock.png" /></a>{% else %}<a href="/admin/edit?page={{ id }}" title="{"Edit Page"}"><img src="/apps/admin/css/admin/edit.png" /></a><a href="/admin/versions?type=Webpage&id={{ id }}" title="{"Versions"}"><img src="/apps/admin/css/admin/versions.png" /></a><a href="/admin/delete?page={{ id }}" title="{"Delete Page"}" onclick="return confirm ('{"Are you sure you want to delete the current page?"}');"><img src="/apps/admin/css/admin/delete.png" /></a>{% end %}
+	<a href="/admin/add" title="{"Add Page"}" class="editable-add"></a>{% if locked %}<a href="javascript:void(0)" title="{"Editing Locked"}" class="editable-lock"></a>{% else %}<a href="/admin/edit?page={{ id }}" title="{"Edit Page"}" class="editable-edit"></a><a href="/admin/versions?type=Webpage&id={{ id }}" title="{"Versions"}" class="editable-versions"></a><a href="/admin/delete" data-page="{{ id }}" title="{"Delete Page"}" onclick="return $.confirm_and_post (this, '{"Are you sure you want to delete the current page?"}');" class="editable-delete"></a>{% end %}
 </p>
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/extended.html elefant-elefant_1_3_3_beta/apps/admin/views/extended.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/extended.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/views/extended.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,202 @@
+<div class="form">
+
+<div id="fields">
+</div>
+
+<div id="add">
+	<a href="#" id="add-field">{"Add Field"}</a>
+
+	<div class="field" id="new-field">
+	<form class="field-form" id="new-field-form">
+		<p>
+			{"Field name"}:
+			<input type="text" name="label" size="40" />
+			&nbsp;<span class="vertical-hr">|</span>&nbsp;
+			{"Type"}:
+			<select name="type" id="new-field-type">
+				<option value="text">{"Single-line text"}</option>
+				<option value="textarea">{"Paragraph text"}</option>
+				<option value="select">{"Drop down"}</option>
+				<option value="file">{"File link"}</option>
+				<option value="image">{"Image link"}</option>
+{% foreach custom as field_id, field_name %}
+				<option value="{{field_id}}">{{field_name|__}}</option>
+{% end %}
+			</select>
+			&nbsp;<span class="vertical-hr">|</span>&nbsp;
+			<input type="checkbox" name="required" value="1" /> {"Required"}
+		</p>
+		<p class="submit-buttons">
+			<span class="saving" id="new-field-saving">{"Saving..."}&nbsp;</span>
+			<input type="submit" value="{"Add"}" />
+			&nbsp;
+			<a href="#" id="new-field-cancel">{"Cancel"}</a>
+		</p>
+		<p style="float: left; display: none" id="new-field-options">
+			{"Drop down options (one per line)"}:<br />
+			<textarea name="options" cols="60" rows="4"></textarea>
+		</p>
+		<br style="clear: both" />
+	</form>
+</div>
+</div>
+
+</div>
+
+<script id="field-tpl" type="text/html">
+	<div class="field" id="\{{id}}-wrapper" data-sort="\{{sort}}">
+		<div class="field-handle" id="\{{id}}-handle"></div>
+		<form class="field-form" id="\{{id}}-form">
+			<p>
+				{"Field name"}:
+				<input type="text" name="label" value="\{{label}}" size="40" />
+				&nbsp;<span class="vertical-hr">|</span>&nbsp;
+				{"Type"}:
+				<select name="type" id="\{{id}}-type">
+					<option value="text"\{{#if text}} selected\{{/if}}>{"Single-line text"}</option>
+					<option value="textarea"\{{#if textarea}} selected\{{/if}}>{"Paragraph text"}</option>
+					<option value="select"\{{#if select}} selected\{{/if}}>{"Drop down"}</option>
+					<option value="file"\{{#if file}} selected\{{/if}}>{"File link"}</option>
+					<option value="image"\{{#if image}} selected\{{/if}}>{"Image link"}</option>
+{% foreach custom as field_id, field_name %}
+					<option value="{{field_id}}"\{{#if {{field_id}}\}} selected \{{/if}}>{{field_name|__}}</option>
+{% end %}
+				</select>
+				&nbsp;<span class="vertical-hr">|</span>&nbsp;
+				<input type="checkbox" name="required" value="1"\{{#if required}} checked\{{/if}} /> {"Required"}
+			</p>
+			<p class="submit-buttons">
+				<span class="saving" id="\{{id}}-saving">{"Saving..."}&nbsp;</span>
+				<input type="submit" id="\{{id}}-save" value="{"Save"}" />
+				&nbsp;
+				<a href="#" id="\{{id}}-delete">{"Delete"}</a>
+			</p>
+			<p style="float: left\{{#unless select}}; display: none\{{/unless}}" id="\{{id}}-options">
+				{"Drop down options (one per line)"}:<br />
+				<textarea name="options" cols="60" rows="3">\{{{options}}}</textarea>
+			</p>
+			<br style="clear: both" />
+		</form>
+	</div>
+</script>
+
+<script>
+$(function () {
+	extended.init ({
+		extends: {{extends||json_encode}},
+		fields: {{fields|json_encode}},
+		strings: {
+			confirm_delete: '{"Are you sure you want to delete this field?"}',
+			label_empty: '{"You must enter a field name."}',
+			options_empty: '{"You must enter options for a select field."}',
+			field_added: '{"Field added."}',
+			field_updated: '{"Field updated."}',
+			field_delete: '{"Field deleted."}',
+			order_updated: '{"Field order has been updated."}'
+		},
+		custom: {{custom|json_encode}}
+	});
+});
+</script>
+
+<style>
+.vertical-hr {
+	color: #ccc;
+}
+
+#fields {
+	margin-left: -33px;
+	padding-left: 33px;
+}
+
+.field {
+	position: relative;
+	margin-left: -33px;
+	padding-left: 33px;
+}
+
+	.placeholder {
+		border: 1px solid #ccc;
+		background-color: #ffe;
+		-webkit-border-radius: 4px;
+		-moz-border-radius: 4px;
+		border-radius: 4px;
+		padding: 5px 8px 5px 8px;
+		margin-bottom: 8px;
+		min-height: 58px;
+		z-index: 1;
+	}
+
+	.field-form {
+		position: relative;
+		border: 1px solid #ccc;
+		background-color: #fafafa;
+		-webkit-border-radius: 4px;
+		-webkit-border-top-left-radius: 0;
+		-moz-border-radius: 4px;
+		-moz-border-radius-topleft: 0;
+		border-radius: 4px;
+		border-top-left-radius: 0;
+		padding: 5px 8px 5px 8px;
+		margin-bottom: 8px;
+		min-height: 58px;
+		z-index: 1;
+	}
+
+	.field-handle {
+		position: absolute;
+		display: block;
+		border: 1px solid #ccc;
+		border-right: 0px none;
+		background-color: #fafafa;
+		background-image: url(/apps/admin/css/admin/drag_drop_up_down.png);
+		background-repeat: no-repeat;
+		background-position: 5px 5px;
+		-webkit-border-radius: 4px;
+		-webkit-border-top-right-radius: 0;
+		-webkit-border-bottom-right-radius: 0;
+		-moz-border-radius: 4px;
+		-moz-border-radius-topright: 0;
+		-moz-border-radius-bottomright: 0;
+		border-radius: 4px;
+		border-top-right-radius: 0;
+		border-bottom-right-radius: 0;
+		width: 24px;
+		height: 24px;
+		margin-top: 0px;
+		margin-left: -24px;
+		z-index: 2;
+	}
+	
+	.field-handle:hover {
+		cursor: move;
+	}
+
+	.field p {
+		margin: 8px 0px 0px 0px;
+	}
+
+	.field p:first-child {
+		margin-top: 0px;
+	}
+	
+	.submit-buttons {
+		position: absolute;
+		bottom: 5px;
+		right: 8px;
+	}
+
+	.saving {
+		display: none;
+	}
+
+#new-field {
+	display: none;
+}
+
+	#new-field form {
+		-webkit-border-top-left-radius: 4px;
+		-moz-border-radius-topleft: 4px;
+		border-top-left-radius: 4px;
+	}
+</style>
Files elefant-elefant_1_3_2_beta/apps/admin/views/head/links.html and elefant-elefant_1_3_3_beta/apps/admin/views/head/links.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/head.html elefant-elefant_1_3_3_beta/apps/admin/views/head.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/head.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/views/head.html	1969-12-31 18:00:00.000000000 -0600
@@ -1,6 +0,0 @@
-<script>$(function(){$.elefant_version='{{ constant('ELEFANT_VERSION') }}';});</script>
-<script src="/apps/admin/js/jquery.jgrowl.min.js"></script>
-<script src="/js/jquery.cookie.js"></script>
-<script src="/apps/admin/js/top-bar.js"></script>
-<link rel="stylesheet" href="/apps/admin/css/jquery.jgrowl.css"></script>
-<link rel="stylesheet" href="/apps/admin/css/top-bar.css"></script>
Files elefant-elefant_1_3_2_beta/apps/admin/views/index.html and elefant-elefant_1_3_3_beta/apps/admin/views/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/admin/views/locked.html and elefant-elefant_1_3_3_beta/apps/admin/views/locked.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/pages.html elefant-elefant_1_3_3_beta/apps/admin/views/pages.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/pages.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/views/pages.html	2013-03-20 13:48:44.000000000 -0500
@@ -13,21 +13,21 @@
 <p>
 <table width="100%">
 	<tr>
-		<th width="30%">{"ID"}</th>
-		<th width="30%">{"Title"}</th>
-		<th width="20%">{"Access"}</th>
-		<th width="20%">&nbsp;</th>
+		<th width="38%">{"ID"}</th>
+		<th width="38%">{"Title"}</th>
+		<th width="12%">{"Access"}</th>
+		<th width="12%">&nbsp;</th>
 	</tr>
 {% foreach pages %}
 	<tr>
-		<td><a href="/{{ loop_value->id }}" target="_blank">{{ loop_value->id }}</a></td>
+		<td><a href="{{ loop_value->id|Link::href }}" target="_blank">{{ loop_value->id }}</a></td>
 		<td>{{ loop_value->title }}</td>
 		<td>{{ loop_value->access|ucfirst }}</td>
-		<td>
+		<td style="text-align: right">
 			{% if loop_value->locked %}
 			{"Editing Locked"}
 			{% else %}
-			<a href="/admin/edit?page={{ loop_value->id }}">{"Edit"}</a> | <a href="/admin/delete?page={{ loop_value->id }}" onclick="return confirm ('{"Are you sure you want to delete this page?"}');">{"Delete"}</a>
+			<a href="/admin/edit?page={{ loop_value->id }}">{"Edit"}</a> | <a href="/admin/delete" data-page="{{ loop_value->id }}" data-admin="true" onclick="return $.confirm_and_post (this, '{"Are you sure you want to delete this page?"}')">{"Delete"}</a>
 			{% end %}
 		</td>
 	</tr>
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/util/extended.html elefant-elefant_1_3_3_beta/apps/admin/views/util/extended.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/util/extended.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/views/util/extended.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,128 @@
+<h4 id="extended-header">{"Custom Fields"}</h4>
+
+<div id="extended-fields">
+{% foreach fields as field %}
+	{% if field->type === 'text' %}
+		<p>
+			{{field->label|__}}:<br />
+			<input	type="text"
+					name="_extended[{{field->name}}]"
+					id="_extended_{{field->name}}"
+					value="{{field->value|quotes}}"
+					size="30"
+			/>
+			{% if field->required %}
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
+	{% elseif field->type === 'textarea' %}
+		<p>
+			{{field->label|__}}:<br />
+			<textarea	name="_extended[{{field->name}}]"
+						id="_extended_{{field->name}}"
+						cols="80"
+						rows="6"
+			>{{field->value}}</textarea>
+			{% if field->required %}
+				<br />
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
+	{% elseif field->type === 'select' %}
+		<p>
+			{{field->label|__}}:<br />
+			<select	name="_extended[{{field->name}}]"
+					id="_extended_{{field->name}}"
+			>
+				<option value="">- {"choose"} -</option>
+				{% foreach field->options as option %}
+				<option value="{{option}}"{% if option == $data->field->value %} selected{% end %}>{{option}}</option>
+				{% end %}
+			</select>
+			{% if field->required %}
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
+	{% elseif field->type === 'file' %}
+		<p>
+			{{field->label|__}}:<br />
+			<input	type="text"
+					name="_extended[{{field->name}}]"
+					id="_extended_{{field->name}}"
+					value="{{field->value|quotes}}"
+					class="wysiwyg-file-input"
+					size="30"
+			/>
+			<input	type="submit"
+					id="{{field->name}}-filebrowser"
+					value="{'Browse...'}"
+					onclick="return filebrowser_{{field->name}} ()"
+			/>
+			{% if field->required %}
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
+	{% elseif field->type === 'image' %}
+		<p>
+			{{field->label|__}}:<br />
+			<input	type="text"
+					name="_extended[{{field->name}}]"
+					id="_extended_{{field->name}}"
+					value="{{field->value|quotes}}"
+					class="wysiwyg-file-input"
+					size="30"
+			/>
+			<input	type="submit"
+					id="{{field->name}}-filebrowser"
+					value="{'Browse...'}"
+					onclick="return imagebrowser_{{field->name}} ()"
+			/>
+			{% if field->required %}
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
+	{% end %}
+{% end %}
+</div>
+
+<script>
+{% foreach fields as field %}
+	{% if field->type === 'file' %}
+		function filebrowser_{{field->name}} () {
+			$.filebrowser ({
+				set_value: '#_extended_{{field->name}}'
+			});
+			return false;
+		}
+	{% elseif field->type === 'image' %}
+		function imagebrowser_{{field->name}} () {
+			$.filebrowser ({
+				set_value: '#_extended_{{field->name}}',
+				thumbs: true
+			});
+			return false;
+		}
+	{% end %}
+{% end %}
+$(function () {
+	$.expanded_section ({
+		header: '#extended-header',
+		section: '#extended-fields',
+		visible: {% if open %}true{% else %}false{% end %}
+	});
+
+	{% foreach fields as field %}
+		{% if field->required %}
+			$('form').on ('submit', function () {
+				var val = $('#_extended_{{field->name}}').val ();
+				if (! val || val === null || val === '') {
+					$('#_extended_{{field->name}}_notice').show ();
+					return false;
+				}
+				$('#_extended_{{field->name}}_notice').hide ();
+				return true;
+			});
+		{% end %}
+	{% end %}
+});
+</script>
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/util/wysiwyg.html elefant-elefant_1_3_3_beta/apps/admin/views/util/wysiwyg.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/util/wysiwyg.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/admin/views/util/wysiwyg.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,71 @@
+<script>
+$(function () {
+	/**
+	 * This initializes the Redactor editor with the integration
+	 * points/plugins that tie into Elefant's pages, files, and
+	 * dynamic objects embedding.
+	 */
+	$.fn.extend ({
+		wysiwyg: function (options) {
+			var defaults = {
+				lang: '{{i18n.language|none}}',
+				plugins: ['links', 'imagebrowser', 'filebrowser', 'dynamic'],
+				buttons: [
+					'formatting', '|', 'bold', 'italic', 'deleted', '|',
+					'alignment', 'horizontalrule', '|', 'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
+					'link_unlink', 'imagebrowser', 'filebrowser', 'table', '|',
+					'undo', 'html', 'dynamic'
+				],
+				buttonsCustom: {
+					undo: {
+						title: '{"Undo"}',
+						dropdown: {
+							point1: {
+								title: '{"Undo"}',
+								callback: undo
+							},
+							point2: {
+								title: '{"Redo"}',
+								callback: redo
+							}
+						}
+					},
+					link_unlink: {
+						title: '{"Link"}',
+						dropdown: {
+							point1: {
+								title: '{"Insert Link"}',
+								callback: RedactorPlugins.links.insert
+							},
+							point2: {
+								title: '{"Unlink"}',
+								exec: 'unlink'
+							}
+						}
+					}
+				}
+			};
+
+			options = $.extend (defaults, options);
+
+			return this.each (function () {
+				$(this).redactor (options);
+			});
+		}
+	});
+
+	{% if field_id %}
+	$('#{{ field_id }}').wysiwyg ();
+	{% end %}
+
+	RedactorPlugins.links.editor_id = '#{{ field_id }}';
+
+	function undo (obj, evt, key) {
+		obj.exec.command.call (obj, 'undo');
+	}
+
+	function redo (obj, evt, key) {
+		obj.exec.command.call (obj, 'redo');
+	}
+});
+</script>
Files elefant-elefant_1_3_2_beta/apps/admin/views/versions.html and elefant-elefant_1_3_3_beta/apps/admin/views/versions.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/admin/views/wysiwyg.html elefant-elefant_1_3_3_beta/apps/admin/views/wysiwyg.html
--- elefant-elefant_1_3_2_beta/apps/admin/views/wysiwyg.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/admin/views/wysiwyg.html	1969-12-31 18:00:00.000000000 -0600
@@ -1,82 +0,0 @@
-<link rel="stylesheet" href="/js/jquery-ui/jquery-ui.css" />
-<link rel="stylesheet" href="/css/wysiwyg/jquery.wysiwyg.css" type="text/css" />
-<link rel="stylesheet" href="/css/files/wysiwyg.fileManager.css" type="text/css" />
-<script type="text/javascript" src="/js/jquery-ui/jquery-ui.min.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/jquery.wysiwyg.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/controls/wysiwyg.image2.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/controls/wysiwyg.link2.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/controls/wysiwyg.table.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/plugins/wysiwyg.fileManager.js"></script>
-<script type="text/javascript" src="/js/jquery.quickpager.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/plugins/wysiwyg.embed.js"></script>
-<script type="text/javascript" src="/js/wysiwyg/plugins/wysiwyg.i18n.js"></script>
-<?php if (file_exists ('js/wysiwyg/i18n/lang.' . $GLOBALS['i18n']->language . '.js')) { ?>
-<script type="text/javascript" src="/js/wysiwyg/i18n/lang.{{i18n.language|none}}.js"></script>
-<?php } ?>
-<script type="text/javascript">
-$(function () {
-	$('#{% if field_id %}{{ field_id }}{% else %}webpage-body{% end %}').wysiwyg ({
-		initialContent: '<p><br /></p>',
-<?php if (file_exists ('js/wysiwyg/i18n/lang.' . $GLOBALS['i18n']->language . '.js')) { ?>
-		plugins: {
-			i18n: { lang: '{{i18n.language|none}}' }
-		},
-<?php } ?>
-		controls: {
-			strikeThrough	:{visible:false},
-			justifyFull		:{visible:false},
-			paragraph		:{visible:true},
-			removeFormat	:{visible:true},
-			html			:{visible:true},
-			'fileManager': {
-				visible: true,
-				groupIndex: 12,
-				tooltip: '{"File Manager"}',
-				exec: function () {
-					$.wysiwyg.fileManager.init (function (file) {
-						if (file.match (/\.(jpg|png|gif)$/i)) {
-							$('#webpage-body').wysiwyg ('insertImage', file);
-						} else if (file.match (/\.swf$/i)) {
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><span class="embedded">{' + '! filemanager/swf?file=' + file + ' !}</span></p>');
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><br /></p>');
-						} else if (file.match (/\.mp4$/i)) {
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><span class="embedded">{' + '! filemanager/video?file=' + file + ' !}</span></p>');
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><br /></p>');
-						} else if (file.match (/\.mp3$/i)) {
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><span class="embedded">{' + '! filemanager/audio?file=' + file + ' !}</span></p>');
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><br /></p>');
-						} else {
-							$('#webpage-body').wysiwyg ('createLink', file);
-						}
-					});
-				}
-			},
-			'dynamic': {
-				visible: true,
-				tooltip: '{"Dynamic Objects"}',
-				tags: ['span'],
-				exec: function () {
-					$.wysiwyg.embed.init (this, function (existing, embed_code) {
-						if (! existing) {
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><span class="embedded">{' + '! ' + embed_code + ' !}</span></p>');
-							$('#webpage-body').wysiwyg ('insertHtml', '<p><br /></p>');
-						} else {
-							$(existing).replaceWith ('<span class="embedded">{' + '! ' + embed_code + ' !}</span>');
-						}
-					});
-				}
-			}
-		},
-		//dialog:'jqueryui',
-		css: '/css/wysiwyg/default.css',
-		'events': {
-			click: function () {
-				try {
-					$('form').autosave ();
-				} catch (e) {}
-			}
-		}
-	});
-	$.wysiwyg.fileManager.setAjaxHandler ('http://{{ $_SERVER.HTTP_HOST }}/filemanager/embed');
-});
-</script>
Files elefant-elefant_1_3_2_beta/apps/api/conf/config.php and elefant-elefant_1_3_3_beta/apps/api/conf/config.php are identical
Files elefant-elefant_1_3_2_beta/apps/api/handlers/index.php and elefant-elefant_1_3_3_beta/apps/api/handlers/index.php are identical
Files elefant-elefant_1_3_2_beta/apps/api/handlers/v1.php and elefant-elefant_1_3_3_beta/apps/api/handlers/v1.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/api/models/Api.php elefant-elefant_1_3_3_beta/apps/api/models/Api.php
--- elefant-elefant_1_3_2_beta/apps/api/models/Api.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/api/models/Api.php	2013-03-20 13:48:44.000000000 -0500
@@ -40,6 +40,11 @@
  */
 class Api extends Model {
 	/**
+	 * The database table name.
+	 */
+	public $table = '#prefix#api';
+
+	/**
 	 * The auth token for the request.
 	 */
 	public $key = 'token';
Files elefant-elefant_1_3_2_beta/apps/blocks/conf/config.php and elefant-elefant_1_3_3_beta/apps/blocks/conf/config.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/forms/add.php elefant-elefant_1_3_3_beta/apps/blocks/forms/add.php
--- elefant-elefant_1_3_2_beta/apps/blocks/forms/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/forms/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -4,7 +4,7 @@
 
 not empty = 1
 regex = "/^[a-zA0-9_-]+$/"
-unique = "blocks.id"
+unique = "#prefix#blocks.id"
 
 [title]
 
Files elefant-elefant_1_3_2_beta/apps/blocks/forms/edit.php and elefant-elefant_1_3_3_beta/apps/blocks/forms/edit.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/handlers/add.php elefant-elefant_1_3_3_beta/apps/blocks/handlers/add.php
--- elefant-elefant_1_3_2_beta/apps/blocks/handlers/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/handlers/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -17,26 +17,26 @@
 	$b->put ();
 	Versions::add ($b);
 	if (! $b->error) {
-		$this->add_notification ('Block added.');
+		$this->add_notification (__ ('Block added.'));
 		$this->hook ('blocks/add', $_POST);
 		if (isset ($_GET['return'])) {
 			$this->redirect ($_GET['return']);
 		}
 		$this->redirect ('/blocks/admin');
 	}
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $b->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $b->error;
 } else {
 	$b = new Block;
 	$b->id = $_GET['id'];
 	$b->access = 'public';
-	$b->yes_no = array ('yes' => i18n_get ('Yes'), 'no' => i18n_get ('No'));
+	$b->yes_no = array ('yes' => __ ('Yes'), 'no' => __ ('No'));
 
 	$b->failed = $f->failed;
 	$b = $f->merge_values ($b);
-	$page->title = i18n_get ('Add Block');
-	$page->head = $tpl->render ('blocks/add/head', $b)
-				. $tpl->render ('admin/wysiwyg');
+	$page->title = __ ('Add Block');
+	$this->run ('admin/util/wysiwyg');
+	echo $tpl->render ('blocks/add/head', $b);
 	echo $tpl->render ('blocks/add', $b);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/handlers/admin.php elefant-elefant_1_3_3_beta/apps/blocks/handlers/admin.php
--- elefant-elefant_1_3_2_beta/apps/blocks/handlers/admin.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/handlers/admin.php	2013-03-20 13:48:44.000000000 -0500
@@ -23,7 +23,7 @@
 	$blocks[$k]->locked = $lock->exists ('Block', $b->id);
 }
 
-$page->title = i18n_get ('Blocks');
+$page->title = __ ('Blocks');
 echo $tpl->render ('blocks/admin', array (
 	'limit' => $limit,
 	'total' => $count,
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/handlers/bgsave.php elefant-elefant_1_3_3_beta/apps/blocks/handlers/bgsave.php
--- elefant-elefant_1_3_2_beta/apps/blocks/handlers/bgsave.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/handlers/bgsave.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,7 +11,7 @@
 if (! User::require_admin ()) {
 	$res = new StdClass;
 	$res->success = false;
-	$res->error = i18n_get ('Authorization required.');
+	$res->error = __ ('Authorization required.');
 	echo json_encode ($res);
 	return;
 }
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/handlers/delete.php elefant-elefant_1_3_3_beta/apps/blocks/handlers/delete.php
--- elefant-elefant_1_3_2_beta/apps/blocks/handlers/delete.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/handlers/delete.php	2013-03-20 13:48:44.000000000 -0500
@@ -4,34 +4,36 @@
  * Block delete handler.
  */
 
+$this->require_admin ();
+
 $page->layout = 'admin';
 
-if (! User::require_admin ()) {
-	$this->redirect ('/admin');
+if (! isset ($_POST['id'])) {
+	$this->redirect ('/blocks/admin');
 }
 
-$lock = new Lock ('Block', $_GET['id']);
+$lock = new Lock ('Block', $_POST['id']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 }
 
-$b = new Block ($_GET['id']);
+$b = new Block ($_POST['id']);
 
 if (! $b->remove ()) {
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $b->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $b->error;
 	return;
 }
 
-$this->hook ('blocks/delete', $_GET);
+$this->hook ('blocks/delete', $_POST);
 
-$this->add_notification ('Block deleted.');
-if (! isset ($_GET['return'])) {
+$this->add_notification (__ ('Block deleted.'));
+if (! isset ($_POST['return'])) {
 	$this->redirect ('/blocks/admin');
 } else {
-	$this->redirect ($_GET['return']);
+	$this->redirect ($_POST['return']);
 }
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/handlers/edit.php elefant-elefant_1_3_3_beta/apps/blocks/handlers/edit.php
--- elefant-elefant_1_3_2_beta/apps/blocks/handlers/edit.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/handlers/edit.php	2013-03-20 13:48:44.000000000 -0500
@@ -12,7 +12,7 @@
 
 $lock = new Lock ('Block', $_GET['id']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 } else {
@@ -31,7 +31,7 @@
 	$b->put ();
 	Versions::add ($b);
 	if (! $b->error) {
-		$this->add_notification ('Block saved.');
+		$this->add_notification (__ ('Block saved.'));
 		$_POST['id'] = $_GET['id'];
 		$lock->remove ();
 		$this->hook ('blocks/edit', $_POST);
@@ -40,15 +40,15 @@
 		}
 		$this->redirect ('/blocks/admin');
 	}
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $b->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $b->error;
 } else {
-	$b->yes_no = array ('yes' => i18n_get ('Yes'), 'no' => i18n_get ('No'));
+	$b->yes_no = array ('yes' => __ ('Yes'), 'no' => __ ('No'));
 	$b->failed = $f->failed;
 	$b = $f->merge_values ($b);
-	$page->title = i18n_get ('Edit Block') . ': ' . $b->title;
-	$page->head = $tpl->render ('blocks/edit/head', $b)
-				. $tpl->render ('admin/wysiwyg');
+	$page->title = __ ('Edit Block') . ': ' . $b->title;
+	$this->run ('admin/util/wysiwyg');
+	echo $tpl->render ('blocks/edit/head', $b);
 	echo $tpl->render ('blocks/edit', $b);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/handlers/index.php elefant-elefant_1_3_3_beta/apps/blocks/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/blocks/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -10,15 +10,27 @@
  *
  *     {! blocks/index?id=[id] !}
  *
+ * or this:
+ *
+ *     {! blocks/index?id=banner-[id] !}
+ *
  * In the above example, `[id]` is replaced with the current page ID, so
  * that on each page, it will try to render a block in that position with
  * the same ID as the current page.
  *
+ * Additionally you can also provide a fallback block in which will be 
+ * displayd if there is no individual block for this page defiened
+ *
+ *     {! blocks/index?id=banner-[id]&fallback=banner !}
+ *
  * See the API documentation for the Template class for more info on
  * `[expr]` style sub-expressions.
  */
 
 $id = (isset ($this->params[0])) ? $this->params[0] : (isset ($data['id']) ? $data['id'] : false);
+if (isset ($data['id'])) {
+ 	$fallback_id = (isset ($data['fallback'])) ? $data['fallback'] : false;
+} 
 if (! $id) {
 	if (User::is_valid () && User::is ('admin')) {
 		echo $tpl->render ('blocks/editable', (object) array ('id' => $id, 'locked' => false));
@@ -29,11 +41,19 @@
 $lock = new Lock ('Block', $id);
 
 $b = new Block ($id);
-if ($b->error) {
-	if (User::is_valid () && User::is ('admin')) {
-		echo $tpl->render ('blocks/editable', (object) array ('id' => $id, 'locked' => false, 'title' => false));
+if ($b->error) {	
+	if ($fallback_id) {		
+		$lock = new Lock ('Block', $fallback_id);
+		$b = new Block ($fallback_id);
+		$b->new_id = $id;
+	}
+	if ($b->error) {
+		if (User::is_valid () && User::is ('admin')) {
+			$fallback_id = $id;
+			echo $tpl->render ('blocks/editable', (object) array ('id' => $fallback_id, 'locked' => false, 'title' => false));
+		}
+		return;
 	}
-	return;
 }
 
 // permissions
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/models/Block.php elefant-elefant_1_3_3_beta/apps/blocks/models/Block.php
--- elefant-elefant_1_3_2_beta/apps/blocks/models/Block.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/models/Block.php	2013-03-20 13:48:44.000000000 -0500
@@ -36,6 +36,10 @@
  * show_title
  */
 class Block extends Model {
+	/**
+	 * The database table name.
+	 */
+	public $table = '#prefix#block';
 }
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/blocks/views/add/head.html and elefant-elefant_1_3_3_beta/apps/blocks/views/add/head.html are identical
Files elefant-elefant_1_3_2_beta/apps/blocks/views/add.html and elefant-elefant_1_3_3_beta/apps/blocks/views/add.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/views/admin.html elefant-elefant_1_3_3_beta/apps/blocks/views/admin.html
--- elefant-elefant_1_3_2_beta/apps/blocks/views/admin.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/views/admin.html	2013-03-20 13:48:44.000000000 -0500
@@ -27,7 +27,7 @@
 			{% if loop_value->locked %}
 			{"Editing Locked"}
 			{% else %}
-			<a href="/blocks/edit?id={{ loop_value->id }}">{"Edit"}</a> | <a href="/blocks/delete?id={{ loop_value->id }}" onclick="return confirm ('{"Are you sure you want to delete this block?"}');">{"Delete"}</a>
+			<a href="/blocks/edit?id={{ loop_value->id }}">{"Edit"}</a> | <a href="/blocks/delete" data-id="{{ loop_value->id }}" onclick="return $.confirm_and_post (this, '{"Are you sure you want to delete this block?"}');">{"Delete"}</a>
 			{% end %}
 		</td>
 	</tr>
Files elefant-elefant_1_3_2_beta/apps/blocks/views/edit/head.html and elefant-elefant_1_3_3_beta/apps/blocks/views/edit/head.html are identical
Files elefant-elefant_1_3_2_beta/apps/blocks/views/edit.html and elefant-elefant_1_3_3_beta/apps/blocks/views/edit.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blocks/views/editable.html elefant-elefant_1_3_3_beta/apps/blocks/views/editable.html
--- elefant-elefant_1_3_2_beta/apps/blocks/views/editable.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blocks/views/editable.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,11 +1,11 @@
 <p class="admin-options">
 {% if title %}
 	{% if locked %}
-		<a href="javascript:void(0)" title="{"Editing Locked"}"><img src="/apps/admin/css/admin/lock.png" /></a>
+		<a href="javascript:void(0)" title="{"Editing Locked"}" class="ediable-lock"></a>
 	{% else %}
-		<a href="/blocks/edit?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Edit Block"}"><img src="/apps/admin/css/admin/edit.png" /></a><a href="/admin/versions?type=Block&id={{ id }}" title="{"Versions"}"><img src="/apps/admin/css/admin/versions.png" /></a><a href="/blocks/delete?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Delete Block"}" onclick="return confirm ('{"Are you sure you want to delete the current block?"}');"><img src="/apps/admin/css/admin/delete.png" /></a>
+		{% if new_id %}<a href="/blocks/add?id={{ new_id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Page-Specific Block"}" class="editable-add"></a>{% end %}<a href="/blocks/edit?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Edit Block"}" class="editable-edit"></a><a href="/admin/versions?type=Block&id={{ id }}" title="{"Versions"}" class="editable-versions"></a><a href="/blocks/delete" data-id="{{ id }}" data-return="{{ $_SERVER.REQUEST_URI }}" title="{"Delete Block"}" onclick="return $.confirm_and_post {% if new_id %}(this, '{"Are you sure you want to delete the default block? This will remove it from all pages using this block"}'){% else %} (this, '{"Are you sure you want to delete the current block?"}') {% end %};" class="editable-delete"></a>
 	{% end %}
 {% else %}
-	<a href="/blocks/add?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Block"}"><img src="/apps/admin/css/admin/add.png" /></a>
+	<a href="/blocks/add?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Block"}" class="editable-add"></a>
 {% end %}
 </p>
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/conf/config.php elefant-elefant_1_3_3_beta/apps/blog/conf/config.php
--- elefant-elefant_1_3_2_beta/apps/blog/conf/config.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/conf/config.php	2013-03-20 13:48:44.000000000 -0500
@@ -36,14 +36,6 @@
 facebook = On
 google = On
 
-[Twitter]
-
-; Set these to your twitter credentials to have blog posts automatically
-; tweeted to your twitter account.
-
-username = ""
-password = ""
-
 [Custom Handlers]
 
 ; You can override some of the built-in handlers with your own
@@ -60,5 +52,6 @@
 install = blog/upgrade
 upgrade = blog/upgrade
 version = 1.1.3-stable
+sitemap = "blog\Post::sitemap"
 
 ; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/conf/embed.php elefant-elefant_1_3_3_beta/apps/blog/conf/embed.php
--- elefant-elefant_1_3_2_beta/apps/blog/conf/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/conf/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,6 +3,7 @@
 [blog/headlines]
 
 label = "Blog: Headlines"
+icon = rss
 
 tag[label] = "Tag (optional)"
 tag[type] = select
@@ -17,10 +18,12 @@
 [blog/tags]
 
 label = "Blog: Tag Cloud"
+icon = tags
 
 [blog/rssviewer]
 
 label = "Blog: RSS Viewer"
+icon = rss
 
 url[label] = RSS Link
 url[type] = text
@@ -31,6 +34,7 @@
 [blog/postsfeed]
 
 label = "Blog: Latest Posts"
+icon = time
 
 number[label] = "Number of Posts"
 number[type] = numeric
Files elefant-elefant_1_3_2_beta/apps/blog/css/jquery.tagit.css and elefant-elefant_1_3_3_beta/apps/blog/css/jquery.tagit.css are identical
Files elefant-elefant_1_3_2_beta/apps/blog/forms/add.php and elefant-elefant_1_3_3_beta/apps/blog/forms/add.php are identical
Files elefant-elefant_1_3_2_beta/apps/blog/forms/edit.php and elefant-elefant_1_3_3_beta/apps/blog/forms/edit.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/forms/settings.php elefant-elefant_1_3_3_beta/apps/blog/forms/settings.php
--- elefant-elefant_1_3_2_beta/apps/blog/forms/settings.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/blog/forms/settings.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,32 @@
+; <?php /*
+
+[title]
+
+not empty = 1
+
+[layout]
+
+skip_if_empty = 1
+callback = admin_layout_exists
+
+[post_layout]
+
+skip_if_empty = 1
+callback = admin_layout_exists
+
+[comments]
+
+not empty = 1
+regex = "/^(facebook|disqus|none)$/"
+
+[disqus_shortname]
+
+skip_if_empty = 1
+regex = "/^[a-zA-Z0-9_-]+$/"
+
+;[twitter_username]
+
+;skip_if_empty = 1
+;regex = "/^[a-zA-Z0-9_-]+$/"
+
+; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/add.php elefant-elefant_1_3_3_beta/apps/blog/handlers/add.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,24 +14,22 @@
 $f->verify_csrf = false;
 if ($f->submit ()) {
 	$autopost_pom = ($_POST['autopost_pom'] == 'yes') ? true : false;
-	$autopost_tw = ($_POST['autopost_tw'] == 'yes') ? true : false;
 	unset ($_POST['autopost_pom']);
-	unset ($_POST['autopost_tw']);
 
 	$p = new blog\Post ($_POST);
 	$p->put ();
 	Versions::add ($p);
 	if (! $p->error) {
-		$this->add_notification (i18n_get ('Blog post added.'));
+		$this->add_notification (__ ('Blog post added.'));
 
 		// add tags
 		if ($_POST['published'] == 'yes' && ! empty ($_POST['tags'])) {
 			$tags = explode (',', $_POST['tags']);
 			foreach ($tags as $tag) {
 				$tr = trim ($tag);
-				DB::execute ('insert into blog_tag (id) values (?)', $tr);
+				DB::execute ('insert into #prefix#blog_tag (id) values (?)', $tr);
 				DB::execute (
-					'insert into blog_post_tag (tag_id, post_id) values (?, ?)',
+					'insert into #prefix#blog_post_tag (tag_id, post_id) values (?, ?)',
 					$tr,
 					$p->id
 				);
@@ -46,15 +44,6 @@
 				$pom = new Pingomatic;
 				$pom->post ($appconf['Blog']['title'], 'http://' . $_SERVER['HTTP_HOST'] . '/blog');
 			}
-
-			if ($autopost_tw && ! empty ($appconf['Twitter']['username']) && ! empty ($appconf['Twitter']['password'])) {
-				$b = new Bitly;
-				$short = $b->shorten ('http://' . $_SERVER['HTTP_HOST'] . '/blog/post/' . $p->id . '/' . URLify::filter ($p->title));
-				$t = new twitter;
-				$t->username = $appconf['Twitter']['username'];
-				$t->password = $appconf['Twitter']['password'];
-				$t->update ($p->title . ' ' . $short);
-			}
 		}
 
 		// reset blog rss cache
@@ -64,22 +53,21 @@
 		$this->hook ('blog/add', $_POST);
 		$this->redirect ('/blog/admin');
 	}
-	$page->title = 'An Error Occurred';
-	echo 'Error Message: ' . $p->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $p->error;
 } else {
 	$p = new blog\Post;
 	$p->author = User::val ('name');
 	$p->ts = gmdate ('Y-m-d H:i:s');
-	$p->yes_no = array ('yes' => i18n_get ('Yes'), 'no' => i18n_get ('No'));
+	$p->yes_no = array ('yes' => __ ('Yes'), 'no' => __ ('No'));
 	$p->autopost_pom = 'yes';
-	$p->autopost_tw = 'yes';
 
 	$p->failed = $f->failed;
 	$p = $f->merge_values ($p);
 	$p->tag_list = explode (',', $p->tags);
-	$page->title = i18n_get ('Add Blog Post');
-	$page->head = $tpl->render ('admin/wysiwyg')
-				. $tpl->render ('blog/add/head', $p);
+	$page->title = __ ('Add Blog Post');
+	$this->run ('admin/util/wysiwyg');
+	echo $tpl->render ('blog/add/head', $p);
 	echo $tpl->render ('blog/add', $p);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/admin.php elefant-elefant_1_3_3_beta/apps/blog/handlers/admin.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/admin.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/admin.php	2013-03-20 13:48:44.000000000 -0500
@@ -25,7 +25,7 @@
 	$posts[$k]->locked = $lock->exists ('Blog', $p->id);
 }
 
-$page->title = i18n_get ('Blog Posts');
+$page->title = __ ('Blog Posts');
 echo $tpl->render ('blog/admin', array (
 	'limit' => $limit,
 	'total' => $count,
Files elefant-elefant_1_3_2_beta/apps/blog/handlers/bgsave.php and elefant-elefant_1_3_3_beta/apps/blog/handlers/bgsave.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/by.php elefant-elefant_1_3_3_beta/apps/blog/handlers/by.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/by.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/by.php	2013-03-20 13:48:44.000000000 -0500
@@ -26,10 +26,12 @@
 foreach ($posts as $post) {
 	$post->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
 	$post->tag_list = explode (',', $post->tags);
+	$post->social_buttons = $appconf['Social Buttons'];
+	$post->body = $tpl->run_includes ($post->body);
 	echo $tpl->render ('blog/post', $post);
 }
 
-$page->title = i18n_getf ('Posts by %s', $tpl->sanitize ($page->author));
+$page->title = __ ('Posts by %s', $tpl->sanitize ($page->author));
 
 $page->add_script (sprintf (
 	'<link rel="alternate" type="application/rss+xml" href="http://%s/blog/rss" />',
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/commentcount.php elefant-elefant_1_3_3_beta/apps/blog/handlers/commentcount.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/commentcount.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/commentcount.php	2013-03-20 13:48:44.000000000 -0500
@@ -13,7 +13,7 @@
 			'<a href="%s">%s %s</a>',
 			$data['url'],
 			$this->run ('social/facebook/commentcount', $data),
-			i18n_get ('comments')
+			__ ('comments')
 		);
 		break;
 }
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/delete.php elefant-elefant_1_3_3_beta/apps/blog/handlers/delete.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/delete.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/delete.php	2013-03-20 13:48:44.000000000 -0500
@@ -4,39 +4,41 @@
  * Blog post delete handler.
  */
 
+$this->require_admin ();
+
 $page->layout = 'admin';
 
-if (! User::require_admin ()) {
-	$this->redirect ('/admin');
+if (! isset ($_POST['id'])) {
+	$this->redirect ('/blog/admin');
 }
 
-$lock = new Lock ('Blog', $_GET['id']);
+$lock = new Lock ('Blog', $_POST['id']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 }
 
 require_once ('apps/blog/lib/Filters.php');
 
-$p = new blog\Post ($_GET['id']);
+$p = new blog\Post ($_POST['id']);
 $tags = $p->tags;
 $title = $p->title;
 
 if (! $p->remove ()) {
-	$page->title = 'An Error Occurred';
-	echo 'Error Message: ' . $u->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $u->error;
 	return;
 }
 
 // reset blog rss cache
 $cache->delete ('blog_rss');
 
-DB::execute ('delete from blog_post_tag where post_id = ?', $_GET['id']);
+DB::execute ('delete from #prefix#blog_post_tag where post_id = ?', $_POST['id']);
 
-$_GET['page'] = 'blog/post/' . $_GET['id'] . '/' . URLify::filter ($title);
-$this->hook ('blog/delete', $_GET);
-$this->add_notification (i18n_get ('Blog post deleted.'));
+$_GET['page'] = 'blog/post/' . $_POST['id'] . '/' . URLify::filter ($title);
+$this->hook ('blog/delete', $_POST);
+$this->add_notification (__ ('Blog post deleted.'));
 $this->redirect ('/blog/admin');
 
-?>
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/disqus/commentcount.php elefant-elefant_1_3_3_beta/apps/blog/handlers/disqus/commentcount.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/disqus/commentcount.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/disqus/commentcount.php	2013-03-20 13:48:44.000000000 -0500
@@ -15,7 +15,7 @@
 	'<a href="%s#disqus_thread" data-disqus-identifier="%s">%s</a>',
 	$data['url'],
 	$data['id'],
-	i18n_get ('comments')
+	__ ('comments')
 );
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/blog/handlers/disqus/comments.php and elefant-elefant_1_3_3_beta/apps/blog/handlers/disqus/comments.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/edit.php elefant-elefant_1_3_3_beta/apps/blog/handlers/edit.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/edit.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/edit.php	2013-03-20 13:48:44.000000000 -0500
@@ -12,7 +12,7 @@
 
 $lock = new Lock ('Blog', $_GET['id']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 } else {
@@ -25,9 +25,7 @@
 $f->verify_csrf = false;
 if ($f->submit ()) {
 	$autopost_pom = ($_POST['autopost_pom'] == 'yes') ? true : false;
-	$autopost_tw = ($_POST['autopost_tw'] == 'yes') ? true : false;
 	unset ($_POST['autopost_pom']);
-	unset ($_POST['autopost_tw']);
 
 	if ($p->published == 'no' && $_POST['published'] == 'yes') {
 		$autopost = true;
@@ -42,20 +40,22 @@
 	$p->body = $_POST['body'];
 	$p->tags = $_POST['tags'];
 
+	$p->update_extended ();
+
 	$p->put ();
 	Versions::add ($p);
 	if (! $p->error) {
-		$this->add_notification (i18n_get ('Blog post saved.'));
+		$this->add_notification (__ ('Blog post saved.'));
 
 		// update tags
 		if ($_POST['published'] == 'yes') {
-			DB::execute ('delete from blog_post_tag where post_id = ?', $p->id);
+			DB::execute ('delete from #prefix#blog_post_tag where post_id = ?', $p->id);
 			$tags = explode (',', $_POST['tags']);
 			foreach ($tags as $tag) {
 				$tr = trim ($tag);
-				DB::execute ('insert into blog_tag (id) values (?)', $tr);
+				DB::execute ('insert into #prefix#blog_tag (id) values (?)', $tr);
 				DB::execute (
-					'insert into blog_post_tag (tag_id, post_id) values (?, ?)',
+					'insert into #prefix#blog_post_tag (tag_id, post_id) values (?, ?)',
 					$tr,
 					$p->id
 				);
@@ -70,15 +70,6 @@
 				$pom = new Pingomatic;
 				$pom->post ($appconf['Blog']['title'], 'http://' . $_SERVER['HTTP_HOST'] . '/blog');
 			}
-
-			if ($autopost_tw && ! empty ($appconf['Twitter']['username']) && ! empty ($appconf['Twitter']['password'])) {
-				$b = new Bitly;
-				$short = $b->shorten ('http://' . $_SERVER['HTTP_HOST'] . '/blog/post/' . $p->id . '/' . URLify::filter ($p->title));
-				$t = new twitter;
-				$t->username = $appconf['Twitter']['username'];
-				$t->password = $appconf['Twitter']['password'];
-				$t->update ($p->title . ' ' . $short);
-			}
 		}
 
 		// reset blog rss cache
@@ -89,19 +80,18 @@
 		$this->hook ('blog/edit', $_POST);
 		$this->redirect ('/blog/admin');
 	}
-	$page->title = 'An Error Occurred';
-	echo 'Error Message: ' . $p->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $p->error;
 } else {
-	$p->yes_no = array ('yes' => i18n_get ('Yes'), 'no' => i18n_get ('No'));
+	$p->yes_no = array ('yes' => __ ('Yes'), 'no' => __ ('No'));
 	$p->autopost_pom = 'yes';
-	$p->autopost_tw = 'yes';
 	$p->tag_list = explode (',', $p->tags);
 
 	$p->failed = $f->failed;
 	$p = $f->merge_values ($p);
-	$page->title = i18n_get ('Edit Blog Post') . ': ' . $p->title;
-	$page->head = $tpl->render ('admin/wysiwyg')
-				. $tpl->render ('blog/edit/head', $p);
+	$page->title = __ ('Edit Blog Post') . ': ' . $p->title;
+	$this->run ('admin/util/wysiwyg');
+	echo $tpl->render ('blog/edit/head', $p);
 	echo $tpl->render ('blog/edit', $p);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/headlines.php elefant-elefant_1_3_3_beta/apps/blog/handlers/headlines.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/headlines.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/headlines.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 if (! $this->internal) {
 	$page->layout = $appconf['Blog']['layout'];
-	$page->title = i18n_get ('Latest Posts');
+	$page->title = __ ('Latest Posts');
 }
 
 require_once ('apps/blog/lib/Filters.php');
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/import/blogger.php elefant-elefant_1_3_3_beta/apps/blog/handlers/import/blogger.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/import/blogger.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/import/blogger.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 $this->require_admin ();
 
 $page->layout = 'admin';
-$page->title = i18n_get ('Blogger importer');
+$page->title = __ ('Blogger importer');
 
 $f = new Form ('post');
 
@@ -49,15 +49,15 @@
 				}
 			}
 			
-			echo '<p>' . i18n_getf ('Imported %d posts.', $imported) . '</p>';
-			echo '<p><a href="/blog/admin">' . i18n_get ('Continue') . '</a></p>';
+			echo '<p>' . __ ('Imported %d posts.', $imported) . '</p>';
+			echo '<p><a href="/blog/admin">' . __ ('Continue') . '</a></p>';
 		} catch (Exception $e) {
-			echo '<p><strong>' . i18n_get ('Error importing file') . ': ' . $e->getMessage () . '</strong></p>';
-			echo '<p><a href="/blog/admin">' . i18n_get ('Back') . '</a></p>';
+			echo '<p><strong>' . __ ('Error importing file') . ': ' . $e->getMessage () . '</strong></p>';
+			echo '<p><a href="/blog/admin">' . __ ('Back') . '</a></p>';
 		}
 		return;
 	} else {
-		echo '<p><strong>' . i18n_get ('Error uploading file.') . '</strong></p>';
+		echo '<p><strong>' . __ ('Error uploading file.') . '</strong></p>';
 	}
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/import/csv.php elefant-elefant_1_3_3_beta/apps/blog/handlers/import/csv.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/import/csv.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/import/csv.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 $this->require_admin ();
 
 $page->layout = 'admin';
-$page->title = i18n_get ('CSV Importer');
+$page->title = __ ('CSV Importer');
 
 $f = new Form ('post');
 
@@ -34,10 +34,10 @@
 			));
 			return;
 		} else {
-			echo '<p><strong>' . i18n_get ('Unable to parse the uploaded file.') . '</strong></p>';
+			echo '<p><strong>' . __ ('Unable to parse the uploaded file.') . '</strong></p>';
 		}
 	} else {
-		echo '<p><strong>' . i18n_get ('Error uploading file.') . '</strong></p>';
+		echo '<p><strong>' . __ ('Error uploading file.') . '</strong></p>';
 	}
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/import/csv2.php elefant-elefant_1_3_3_beta/apps/blog/handlers/import/csv2.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/import/csv2.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/import/csv2.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,22 +7,22 @@
 $this->require_admin ();
 
 $page->layout = 'admin';
-$page->title = i18n_get ('CSV Importer');
+$page->title = __ ('CSV Importer');
 
 $imported = 0;
 
 $file = 'cache/blog_csv_import.csv';
 
 if (! file_exists ($file)) {
-	echo '<p>' . i18n_get ('Uploaded CSV file not found.') . '</p>';
-	echo '<p><a href="/blog/import">' . i18n_get ('Back') . '</a></p>';
+	echo '<p>' . __ ('Uploaded CSV file not found.') . '</p>';
+	echo '<p><a href="/blog/import">' . __ ('Back') . '</a></p>';
 	return;
 }
 
 $res = blog\CsvParser::parse ($file);
 if (! $res) {
-	echo '<p>' . i18n_get ('Unable to parse the uploaded file.') . '</p>';
-	echo '<p><a href="/blog/import">' . i18n_get ('Back') . '</a></p>';
+	echo '<p>' . __ ('Unable to parse the uploaded file.') . '</p>';
+	echo '<p><a href="/blog/import">' . __ ('Back') . '</a></p>';
 	return;
 }
 
@@ -60,7 +60,7 @@
 	}
 }
 
-echo '<p>' . i18n_getf ('Imported %d posts.', $imported) . '</p>';
-echo '<p><a href="/blog/admin">' . i18n_get ('Continue') . '</a></p>';
+echo '<p>' . __ ('Imported %d posts.', $imported) . '</p>';
+echo '<p><a href="/blog/admin">' . __ ('Continue') . '</a></p>';
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/import/wordpress.php elefant-elefant_1_3_3_beta/apps/blog/handlers/import/wordpress.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/import/wordpress.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/import/wordpress.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 $this->require_admin ();
 
 $page->layout = 'admin';
-$page->title = i18n_get ('Wordpress importer');
+$page->title = __ ('Wordpress importer');
 
 $f = new Form ('post');
 
@@ -43,15 +43,15 @@
 				}
 			}
 			
-			echo '<p>' . i18n_getf ('Imported %d posts.', $imported) . '</p>';
-			echo '<p><a href="/blog/admin">' . i18n_get ('Continue') . '</a></p>';
+			echo '<p>' . __ ('Imported %d posts.', $imported) . '</p>';
+			echo '<p><a href="/blog/admin">' . __ ('Continue') . '</a></p>';
 		} catch (Exception $e) {
-			echo '<p><strong>' . i18n_get ('Error importing file') . ': ' . $e->getMessage () . '</strong></p>';
-			echo '<p><a href="/blog/admin">' . i18n_get ('Back') . '</a></p>';
+			echo '<p><strong>' . __ ('Error importing file') . ': ' . $e->getMessage () . '</strong></p>';
+			echo '<p><a href="/blog/admin">' . __ ('Back') . '</a></p>';
 		}
 		return;
 	} else {
-		echo '<p><strong>' . i18n_get ('Error uploading file.') . '</strong></p>';
+		echo '<p><strong>' . __ ('Error uploading file.') . '</strong></p>';
 	}
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/import.php elefant-elefant_1_3_3_beta/apps/blog/handlers/import.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/import.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/import.php	2013-03-20 13:48:44.000000000 -0500
@@ -8,7 +8,7 @@
 
 $page->layout = 'admin';
 
-$page->title = i18n_get ('Choose an importer');
+$page->title = __ ('Choose an importer');
 
 echo $tpl->render ('blog/import');
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/index.php elefant-elefant_1_3_3_beta/apps/blog/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 if ($appconf['Custom Handlers']['blog/index'] != 'blog/index') {
 	if (! $appconf['Custom Handlers']['blog/index']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	$extra = (count ($this->params) > 0) ? '/' . $this->params[0] : '';
@@ -30,13 +30,13 @@
 $page->next = $page->num + 2;
 
 if (! is_array ($posts) || count ($posts) === 0) {
-	echo '<p>' . i18n_get ('No posts yet... :(') . '</p>';
+	echo '<p>' . __ ('No posts yet... :(') . '</p>';
 	if (User::require_admin ()) {
-		echo '<p><a href="/blog/add">' . i18n_get ('Add Blog Post') . '</a></p>';
+		echo '<p><a href="/blog/add">' . __ ('Add Blog Post') . '</a></p>';
 	}
 } else {
 	if (User::require_admin ()) {
-		echo '<p><a href="/blog/add">' . i18n_get ('Add Blog Post') . '</a></p>';
+		echo '<p><a href="/blog/add">' . __ ('Add Blog Post') . '</a></p>';
 	}
 
 	foreach ($posts as $post) {
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/post.php elefant-elefant_1_3_3_beta/apps/blog/handlers/post.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/post.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/post.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 if ($appconf['Custom Handlers']['blog/post'] != 'blog/post') {
 	if (! $appconf['Custom Handlers']['blog/post']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	echo $this->run ($appconf['Custom Handlers']['blog/post'] . '/' . $this->params[0], $data);
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/postsfeed.php elefant-elefant_1_3_3_beta/apps/blog/handlers/postsfeed.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/postsfeed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/postsfeed.php	2013-03-20 13:48:44.000000000 -0500
@@ -15,13 +15,13 @@
 $page->count = $p->query ()->where ('published', 'yes')->count ();
 
 	if (! is_array ($posts) || count ($posts) === 0) {
-	    echo '<p>' . i18n_get ('No posts yet... :(') . '</p>';
+	    echo '<p>' . __ ('No posts yet... :(') . '</p>';
 	        if (User::require_admin ()) {
-		    echo '<p><a href="/blog/add">' . i18n_get ('Add Blog Post') . '</a></p>';
+		    echo '<p><a href="/blog/add">' . __ ('Add Blog Post') . '</a></p>';
 	        }
 	} else {
 	    if (User::require_admin ()) {
-		echo '<p><a href="/blog/add">' . i18n_get ('Add Blog Post') . '</a></p>';
+		echo '<p><a href="/blog/add">' . __ ('Add Blog Post') . '</a></p>';
 	    }
 
 	    foreach ($posts as $post) {
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/rss.php elefant-elefant_1_3_3_beta/apps/blog/handlers/rss.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/rss.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/rss.php	2013-03-20 13:48:44.000000000 -0500
@@ -4,7 +4,7 @@
  * Renders the RSS feed for the blog.
  */
 
-$res = $cache->get ('_blog_rss');
+$res = $cache->get ('blog_rss');
 if (! $res) {
 	require_once ('apps/blog/lib/Filters.php');
 
@@ -14,13 +14,14 @@
 	$page->date = gmdate ('Y-m-d\TH:i:s');
 	foreach ($page->posts as $k => $post) {
 		$page->posts[$k]->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
+		$page->posts[$k]->body = $tpl->run_includes ($page->posts[$k]->body);
 	}
 
 	$res = $tpl->render ('blog/rss', $page);
-	$cache->set ('_blog_rss', $res, 1800); // half an hour
+	$cache->set ('blog_rss', $res, 1800); // half an hour
 }
 $page->layout = FALSE;
 header ('Content-Type: text/xml');
 echo $res;
 
-?>
+?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/blog/handlers/rssviewer.php and elefant-elefant_1_3_3_beta/apps/blog/handlers/rssviewer.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/settings.php elefant-elefant_1_3_3_beta/apps/blog/handlers/settings.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/settings.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/settings.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,54 @@
+<?php
+
+/**
+ * This is the settings form for the blog app.
+ */
+
+$this->require_admin ();
+
+require_once ('apps/admin/lib/Functions.php');
+
+$page->layout = 'admin';
+$page->title = __ ('Blog Settings');
+
+$form = new Form ('post', $this);
+
+$form->data = array (
+	'title' => $appconf['Blog']['title'],
+	'layouts' => admin_get_layouts (),
+	'layout' => $appconf['Blog']['layout'],
+	'post_layout' => $appconf['Blog']['post_layout'],
+	'comments' => $appconf['Blog']['comments'],
+	'disqus_shortname' => $appconf['Blog']['disqus_shortname'],
+	'social_twitter' => $appconf['Social Buttons']['twitter'],
+	'social_facebook' => $appconf['Social Buttons']['facebook'],
+	'social_google' => $appconf['Social Buttons']['google'],
+);
+
+echo $form->handle (function ($form) {
+	if (! Ini::write (
+		array (
+			'Blog' => array (
+				'title' => $_POST['title'],
+				'layout' => $_POST['layout'],
+				'post_layout' => $_POST['post_layout'],
+				'comments' => ($_POST['comments'] === 'none') ? false : $_POST['comments'],
+				'disqus_shortname' => $_POST['disqus_shortname']
+			),
+			'Social Buttons' => array (
+				'twitter' => ($_POST['social_twitter'] === 'yes') ? true : false,
+				'facebook' => ($_POST['social_facebook'] === 'yes') ? true : false,
+				'google' => ($_POST['social_google'] === 'yes') ? true : false
+			)
+		),
+		'conf/app.blog.' . ELEFANT_ENV . '.php'
+	)) {
+		printf ('<p>%s</p>', __ ('Unable to save changes. Check your folder permissions and try again.'));
+		return;
+	}
+
+	$form->controller->add_notification (__ ('Settings saved.'));
+	$form->controller->redirect ('/blog/admin');
+});
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/tag.php elefant-elefant_1_3_3_beta/apps/blog/handlers/tag.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/tag.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/tag.php	2013-03-20 13:48:44.000000000 -0500
@@ -26,10 +26,12 @@
 foreach ($posts as $post) {
 	$post->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
 	$post->tag_list = explode (',', $post->tags);
+	$post->social_buttons = $appconf['Social Buttons'];
+	$post->body = $tpl->run_includes ($post->body);
 	echo $tpl->render ('blog/post', $post);
 }
 
-$page->title = i18n_getf ('Tagged: %s', $tpl->sanitize ($page->tag));
+$page->title = __ ('Tagged: %s', $tpl->sanitize ($page->tag));
 
 $page->add_script (sprintf (
 	'<link rel="alternate" type="application/rss+xml" href="http://%s/blog/rss" />',
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/taglist.php elefant-elefant_1_3_3_beta/apps/blog/handlers/taglist.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/taglist.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/taglist.php	2013-03-20 13:48:44.000000000 -0500
@@ -10,7 +10,7 @@
 
 echo json_encode (
 	DB::shift_array (
-		'select distinct tag_id from blog_post_tag'
+		'select distinct tag_id from #prefix#blog_post_tag'
 	)
 );
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/tags.php elefant-elefant_1_3_3_beta/apps/blog/handlers/tags.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/tags.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/tags.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,10 +6,10 @@
 
 if (! $this->internal) {
 	$page->layout = $appconf['Blog']['layout'];
-	$page->title = i18n_get ('Tags');
+	$page->title = __ ('Tags');
 }
 
-$pg->limit = 10;
+$pg = new stdClass;
 $pg->tags = blog\Post::tags ();
 foreach ($pg->tags as $k => $v) {
 	$pg->tags[$k] = ($v / 10 < 2) ? $v / 10 + .9 : (($v / 10 >= 2) ? 3 : $v / 10);
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/handlers/upgrade.php elefant-elefant_1_3_3_beta/apps/blog/handlers/upgrade.php
--- elefant-elefant_1_3_2_beta/apps/blog/handlers/upgrade.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/handlers/upgrade.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,25 +5,25 @@
 $this->require_admin ();
 
 if ($this->installed ('blog', $appconf['Admin']['version']) === true) {
-	$page->title = i18n_get ('Upgrade completed');
-	echo '<p><a href="/blog/admin">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Upgrade completed');
+	echo '<p><a href="/blog/admin">' . __ ('Continue') . '</a></p>';
 	return;
 }
 
-$page->title = i18n_get ('Upgrading Blog App');
+$page->title = __ ('Upgrading Blog App');
 
 $db = DB::get_connection (1);
 $dbtype = $db->getAttribute (PDO::ATTR_DRIVER_NAME);
 switch ($dbtype) {
 	case 'pgsql':
 	case 'mysql':
-		DB::execute ('alter table blog_post add column extra text not null default \'\'');
+		DB::execute ('alter table #prefix#blog_post add column extra text not null default \'\'');
 		break;
 	case 'sqlite':
-		DB::execute ('alter table blog_post add column "extra" "text not null"');
+		DB::execute ('alter table #prefix#blog_post add column "extra" "text not null"');
 		break;
 }
-echo '<p>' . i18n_get ('Done.') . '</p>';
+echo '<p>' . __ ('Done.') . '</p>';
 
 $this->mark_installed ('blog', $appconf['Admin']['version']);
 
Files elefant-elefant_1_3_2_beta/apps/blog/js/autocomplete.js and elefant-elefant_1_3_3_beta/apps/blog/js/autocomplete.js are identical
Files elefant-elefant_1_3_2_beta/apps/blog/js/jquery.timepicker.js and elefant-elefant_1_3_3_beta/apps/blog/js/jquery.timepicker.js are identical
Files elefant-elefant_1_3_2_beta/apps/blog/js/tag-it.js and elefant-elefant_1_3_3_beta/apps/blog/js/tag-it.js are identical
Files elefant-elefant_1_3_2_beta/apps/blog/lib/Bitly.php and elefant-elefant_1_3_3_beta/apps/blog/lib/Bitly.php are identical
Files elefant-elefant_1_3_2_beta/apps/blog/lib/CsvParser.php and elefant-elefant_1_3_3_beta/apps/blog/lib/CsvParser.php are identical
Files elefant-elefant_1_3_2_beta/apps/blog/lib/Filters.php and elefant-elefant_1_3_3_beta/apps/blog/lib/Filters.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/lib/Functions.php elefant-elefant_1_3_3_beta/apps/blog/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/blog/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,7 +5,7 @@
  * Dynamic Objects dialog.
  */
 function blog_get_tags () {
-	$out = array ((object) array ('key' => '', 'value' => i18n_get ('- select -')));
+	$out = array ((object) array ('key' => '', 'value' => __ ('- select -')));
 	$tags = blog\Post::tags ();
 	foreach ($tags as $tag => $count) {
 		$out[] = (object) array ('key' => $tag, 'value' => $tag . ' (' . $count . ')');
@@ -19,8 +19,8 @@
  */
 function blog_yes_no () {
 	return array (
-		(object) array ('key' => 'no', 'value' => i18n_get ('No')),
-		(object) array ('key' => 'yes', 'value' => i18n_get ('Yes')),
+		(object) array ('key' => 'no', 'value' => __ ('No')),
+		(object) array ('key' => 'yes', 'value' => __ ('Yes')),
 	);
 }
 		
Files elefant-elefant_1_3_2_beta/apps/blog/lib/Pingomatic.php and elefant-elefant_1_3_3_beta/apps/blog/lib/Pingomatic.php are identical
Files elefant-elefant_1_3_2_beta/apps/blog/lib/SimplePie.php and elefant-elefant_1_3_3_beta/apps/blog/lib/SimplePie.php are identical
Files elefant-elefant_1_3_2_beta/apps/blog/lib/Twitter.php and elefant-elefant_1_3_3_beta/apps/blog/lib/Twitter.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/models/Post.php elefant-elefant_1_3_3_beta/apps/blog/models/Post.php
--- elefant-elefant_1_3_2_beta/apps/blog/models/Post.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/models/Post.php	2013-03-20 13:48:44.000000000 -0500
@@ -42,9 +42,9 @@
  */
 class Post extends \ExtendedModel {
 	/**
-	 * Table name.
+	 * The database table name.
 	 */
-	public $table = 'blog_post';
+	public $table = '#prefix#blog_post';
 
 	/**
 	 * The `extra` field can contain an arbitrary number of additional
@@ -56,49 +56,59 @@
 	 * Get the most recently published posts.
 	 */
 	public static function latest ($limit = 10, $offset = 0) {
-		$p = new Post;
-		return $p->query ()->where ('published', 'yes')->order ('ts desc')->fetch_orig ($limit, $offset);
+		return self::query ()->where ('published', 'yes')->order ('ts desc')->fetch_orig ($limit, $offset);
 	}
 
 	/**
 	 * Get posts by the specified author.
 	 */
 	public static function by ($author, $limit = 10, $offset = 0) {
-		$p = new Post;
-		return $p->query ()->where ('published', 'yes')->where ('author', $author)->order ('ts desc')->fetch_orig ($limit, $offset);
+		return self::query ()->where ('published', 'yes')->where ('author', $author)->order ('ts desc')->fetch_orig ($limit, $offset);
 	}
 
 	/**
 	 * Get the latest headlines only.
 	 */
 	public static function headlines ($limit = 10) {
-		$p = new Post;
-		return $p->query (array ('id', 'ts', 'title'))->where ('published', 'yes')->order ('ts desc')->fetch_orig ($limit);
+		return self::query (array ('id', 'ts', 'title'))->where ('published', 'yes')->order ('ts desc')->fetch_orig ($limit);
 	}
 
 	/**
 	 * Get posts by a certain tag.
 	 */
 	public static function tagged ($tag, $limit = 10, $offset = 0) {
-		$p = new Post;
-		$ids = \DB::shift_array ('select post_id from blog_post_tag where tag_id = ?', $tag);
-		return $p->query ()->where ('id in(' . join (',', $ids) . ')')->where ('published', 'yes')->order ('ts desc')->fetch_orig ($limit, $offset);
+		$ids = \DB::shift_array ('select post_id from #prefix#blog_post_tag where tag_id = ?', $tag);
+		return self::query ()->where ('id in(' . join (',', $ids) . ')')->where ('published', 'yes')->order ('ts desc')->fetch_orig ($limit, $offset);
 	}
 
 	/**
 	 * Count posts by a certain tag.
 	 */
 	public static function count_by_tag ($tag, $limit = 10, $offset = 0) {
-		$p = new Post;
-		$ids = \DB::shift_array ('select post_id from blog_post_tag where tag_id = ?', $tag);
-		return $p->query ()->where ('id in(' . join (',', $ids) . ')')->where ('published', 'yes')->order ('ts desc')->count ();
+		$ids = \DB::shift_array ('select post_id from #prefix#blog_post_tag where tag_id = ?', $tag);
+		return self::query ()->where ('id in(' . join (',', $ids) . ')')->where ('published', 'yes')->order ('ts desc')->count ();
 	}
 
 	/**
 	 * Get a list of tags and the number of posts they've been used on.
 	 */
 	public static function tags () {
-		return \DB::pairs ('select tag_id, count(*) as posts from blog_post_tag group by tag_id order by tag_id asc');
+		return \DB::pairs ('select tag_id, count(*) as posts from #prefix#blog_post_tag group by tag_id order by tag_id asc');
+	}
+
+	/**
+	 * Generate a list of pages for the sitemaps app.
+	 */
+	public static function sitemap () {
+		$posts = self::query ()
+			->where ('published', 'yes')
+			->fetch_orig ();
+		
+		$urls = array ();
+		foreach ($posts as $post) {
+			$urls[] = '/blog/post/' . $post->id . '/' . \URLify::filter ($post->title);
+		}
+		return $urls;
 	}
 }
 
Files elefant-elefant_1_3_2_beta/apps/blog/views/add/head.html and elefant-elefant_1_3_3_beta/apps/blog/views/add/head.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/views/add.html elefant-elefant_1_3_3_beta/apps/blog/views/add.html
--- elefant-elefant_1_3_2_beta/apps/blog/views/add.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/views/add.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,11 +1,14 @@
+{! user/util/userchooser !}
+
 <div class="form">
 
 <p class="autosave-notice">{"Auto-saved data found for this form."} <a href="#" class="autosave-restore">{"Click here to restore."}</a></p>
 
 <form method="POST" id="add-form">
-<p>{"Title"}:<br /><input type="text" name="title" size="50" value="{{ title }}" />
+<p>{"Title"}:<br /><input type="text" name="title" size="80" value="{{ title }}" />
 <span class="notice" id="title-notice">{"You must enter a title."}</span></p>
-<p>{"Author"}:<br /><input type="text" name="author" size="30" value="{{ author }}" />
+<p>{"Author"}:<br /><input type="text" name="author" id="author" size="30" value="{{ author }}" />
+<input type="submit" value="{"Choose"}" id="users" />
 <span class="notice" id="author-notice">{"You must enter an author."}</span></p>
 <p>{"Date/Time"}:<br /><input type="text" name="ts" id="ts" size="30" value="{{ ts }}" />
 <span class="notice" id="ts-notice">{"You must select a date/time."}</span></p>
@@ -29,9 +32,11 @@
 <input type="hidden" name="tags" id="tags"></p>
 <p>{"Auto-post options"}:<br />
 <input type="checkbox" name="autopost_pom" id="autopost_pom" value="yes" {% if autopost_tw %}checked{% end %} /> <label for="autopost_pom">Ping-o-matic</label><br />
-<input type="checkbox" name="autopost_tw" id="autopost_tw" value="yes" {% if autopost_tw %}checked{% end %} /> <label for="autopost_tw">Twitter</label>
 </p>
 </div>
+
+{! admin/util/extended?extends=blog\Post !}
+
 <p>
 	<input type="submit" value="{"Add Blog Post"}" class="autosave-clear" />&nbsp;
 	<a href="javascript:history.go(-1)" onclick="return $.cancel_autosave ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
@@ -40,3 +45,14 @@
 
 </div>
 <div class="clear"></div>
+
+<script>
+$(function () {
+	$('#users').click (function () {
+		$.userchooser ({
+			set_name_value: '#author'
+		});
+		return false;
+	});
+});
+</script>
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/views/admin.html elefant-elefant_1_3_3_beta/apps/blog/views/admin.html
--- elefant-elefant_1_3_2_beta/apps/blog/views/admin.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/views/admin.html	2013-03-20 13:48:44.000000000 -0500
@@ -4,6 +4,10 @@
 	<a href="/blog/add">{"New Post"}</a>
 	&nbsp;|&nbsp;
 	<a href="/blog/import">{"Import Posts"}</a>
+	&nbsp;|&nbsp;
+	<a href="/blog/settings">{"Settings"}</a>
+	&nbsp;|&nbsp;
+	<a href="/admin/extended?extends=blog\Post&name=Blog+Posts">{"Custom Fields"}</a>
 </p>
 
 <p style="float: left">
@@ -35,7 +39,7 @@
 			{% if loop_value->locked %}
 			{"Editing Locked"}
 			{% else %}
-			<a href="/blog/edit?id={{ loop_value->id }}">{"Edit"}</a> | <a href="/blog/delete?id={{ loop_value->id }}" onclick="return confirm ('{"Are you sure you want to delete this post?"}');">{"Delete"}</a>
+			<a href="/blog/edit?id={{ loop_value->id }}">{"Edit"}</a> | <a href="/blog/delete" data-id="{{ loop_value->id }}" onclick="return $.confirm_and_post (this, '{"Are you sure you want to delete this post?"}');">{"Delete"}</a>
 			{% end %}
 		</td>
 	</tr>
Files elefant-elefant_1_3_2_beta/apps/blog/views/by.html and elefant-elefant_1_3_3_beta/apps/blog/views/by.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/disqus/commentcount.html and elefant-elefant_1_3_3_beta/apps/blog/views/disqus/commentcount.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/disqus/comments.html and elefant-elefant_1_3_3_beta/apps/blog/views/disqus/comments.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/edit/head.html and elefant-elefant_1_3_3_beta/apps/blog/views/edit/head.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/views/edit.html elefant-elefant_1_3_3_beta/apps/blog/views/edit.html
--- elefant-elefant_1_3_2_beta/apps/blog/views/edit.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/views/edit.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,11 +1,14 @@
+{! user/util/userchooser !}
+
 <div class="form">
 
 <p class="autosave-notice">{"Auto-saved data found for this form."} <a href="#" class="autosave-restore">{"Click here to restore."}</a></p>
 
 <form method="POST" id="edit-form">
-<p>{"Title"}:<br /><input type="text" name="title" size="50" value="{{ title|quotes }}" />
+<p>{"Title"}:<br /><input type="text" name="title" size="80" value="{{ title|quotes }}" />
 <span class="notice" id="title-notice">{"You must enter a title."}</span></p>
-<p>{"Author"}:<br /><input type="text" name="author" size="30" value="{{ author|quotes }}" />
+<p>{"Author"}:<br /><input type="text" name="author" id="author" size="30" value="{{ author|quotes }}" />
+<input type="submit" value="{"Choose"}" id="users" />
 <span class="notice" id="author-notice">{"You must enter an author."}</span></p>
 <p>{"Date/Time"}:<br /><input type="text" name="ts" id="ts" size="30" value="{{ ts }}" />
 <span class="notice" id="ts-notice">{"You must select a date/time."}</span></p>
@@ -29,9 +32,11 @@
 <input type="hidden" name="tags" id="tags"></p>
 <p>{"Auto-post options"}:<br />
 <input type="checkbox" name="autopost_pom" id="autopost_pom" value="yes" {% if autopost_tw %}checked{% end %} /> <label for="autopost_pom">Ping-o-matic</label><br />
-<input type="checkbox" name="autopost_tw" id="autopost_tw" value="yes" {% if autopost_tw %}checked{% end %} /> <label for="autopost_tw">Twitter</label>
 </p>
 </div>
+
+{! admin/util/extended?extends=blog\Post&values=[extra|none] !}
+
 <p>
 	<input type="submit" value="{"Save Blog Post"}" class="autosave-clear" />&nbsp;
 	<input type="submit" value="{"Save &amp; Keep Editing"}" id="bgsave" />&nbsp;
@@ -42,3 +47,14 @@
 
 </div>
 <div class="clear"></div>
+
+<script>
+$(function () {
+	$('#users').click (function () {
+		$.userchooser ({
+			set_name_value: '#author'
+		});
+		return false;
+	});
+});
+</script>
Files elefant-elefant_1_3_2_beta/apps/blog/views/headlines.html and elefant-elefant_1_3_3_beta/apps/blog/views/headlines.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/import/blogger.html and elefant-elefant_1_3_3_beta/apps/blog/views/import/blogger.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/import/csv.html and elefant-elefant_1_3_3_beta/apps/blog/views/import/csv.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/import/csv2.html and elefant-elefant_1_3_3_beta/apps/blog/views/import/csv2.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/import/wordpress.html and elefant-elefant_1_3_3_beta/apps/blog/views/import/wordpress.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/import.html and elefant-elefant_1_3_3_beta/apps/blog/views/import.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/index.html and elefant-elefant_1_3_3_beta/apps/blog/views/index.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/views/post.html elefant-elefant_1_3_3_beta/apps/blog/views/post.html
--- elefant-elefant_1_3_2_beta/apps/blog/views/post.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/blog/views/post.html	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,11 @@
 
 <div class="blog-post block">
 <h3><a href="{{ url }}">{{ title }}</a></h3>
-<p class="blog-info info">{{ ts|I18n::date_time }} - {" by "} <a href="/blog/by/{{ author }}">{{ author }}</a></p>
+<p class="blog-info info">{{ ts|I18n::date_time }} - {" by "} <a href="/blog/by/{{ author }}">{{ author }}</a>
+{% if User::require_admin () %}
+&nbsp;|&nbsp; <a href="/blog/edit?id={{ id }}">{"Edit Post"}</a>
+{% end %}
+</p>
 {{ body|none }}
 <div class="blog-tags info">
 {"Tags"}: 
Files elefant-elefant_1_3_2_beta/apps/blog/views/rss.html and elefant-elefant_1_3_3_beta/apps/blog/views/rss.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/rssviewer.html and elefant-elefant_1_3_3_beta/apps/blog/views/rssviewer.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/blog/views/settings.html elefant-elefant_1_3_3_beta/apps/blog/views/settings.html
--- elefant-elefant_1_3_2_beta/apps/blog/views/settings.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/blog/views/settings.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,66 @@
+<div class="form">
+
+<form method="post" id="{{_form}}">
+
+<p>{"Blog title"}:<br />
+<input type="text" name="title" size="40" value="{{ title|quotes }}" />
+<span class="notice" id="title-notice">{"You must enter a blog title."}</span></p>
+
+<p>{"Page layout"}:<br />
+<select name="layout">
+{% foreach layouts %}
+	<option value="{{ loop_value }}"{% if loop_value == $data->layout %} selected{% end %}>{{ loop_value|ucfirst }}</option>
+{% end %}
+</select></p>
+
+<p>{"Post page layout"}:<br />
+<select name="post_layout">
+{% foreach layouts %}
+	<option value="{{ loop_value }}"{% if loop_value == $data->post_layout %} selected{% end %}>{{ loop_value|ucfirst }}</option>
+{% end %}
+</select></p>
+
+<p>{"Comments"}:<br />
+<select name="comments" id="comments">
+	<option value="none"{% if comments === false %} selected{% end %}>{"Off"}</option>
+	<option value="facebook"{% if comments === 'facebook' %} selected{% end %}>{"Facebook"}</option>
+	<option value="disqus"{% if comments === 'disqus' %} selected{% end %}>{"Disqus"}</option>
+</select></p>
+
+<p id="disqus_shortname">{"Disqus shortname"}:<br />
+<input type="text" name="disqus_shortname" size="30" value="{{ disqus_shortname|quotes }}" />
+</p>
+
+<p>{"Social buttons"}:<br />
+<input type="checkbox" name="social_twitter" value="yes"{% if social_twitter %} checked{% end %} /> {"Twitter"}<br />
+<input type="checkbox" name="social_facebook" value="yes"{% if social_facebook %} checked{% end %} /> {"Facebook"}<br />
+<input type="checkbox" name="social_google" value="yes"{% if social_google %} checked{% end %} /> {"Google"}<br />
+</p>
+
+<p>
+	<input type="submit" value="{"Save Settings"}" />
+	&nbsp;
+	<a href="/blog/admin" onclick="return confirm ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
+</p>
+
+</form>
+
+</div>
+
+<script>
+$(function () {
+	if ($('#comments').val () === 'disqus') {
+		$('#disqus_shortname').show ();
+	} else {
+		$('#disqus_shortname').hide ();
+	}
+
+	$('#comments').on ('change', function () {
+		if ($('#comments').val () === 'disqus') {
+			$('#disqus_shortname').show ();
+		} else {
+			$('#disqus_shortname').hide ();
+		}
+	});
+});
+</script>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/blog/views/tag.html and elefant-elefant_1_3_3_beta/apps/blog/views/tag.html are identical
Files elefant-elefant_1_3_2_beta/apps/blog/views/tags.html and elefant-elefant_1_3_3_beta/apps/blog/views/tags.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/backup.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/backup.php are identical
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/build-app.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/build-app.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/cli/handlers/bundle-translations.php elefant-elefant_1_3_3_beta/apps/cli/handlers/bundle-translations.php
--- elefant-elefant_1_3_2_beta/apps/cli/handlers/bundle-translations.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/cli/handlers/bundle-translations.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,85 @@
+<?php
+
+/**
+ * Exports translations into an app's lang folder.
+ */
+
+if (! $this->cli) {
+	die ('Must be run from the command line.');
+}
+
+$page->layout = false;
+
+if (! isset ($_SERVER['argv'][2])) {
+	echo "Usage: elefant bundle-translations <appname>\n";
+	die;
+}
+
+$app = $_SERVER['argv'][2];
+if (! is_dir ('apps/' . $app)) {
+	printf ("App not found: %s\n", $app);
+	die;
+}
+
+if (! is_dir ('apps/' . $app . '/lang')) {
+	mkdir ('apps/' . $app . '/lang');
+}
+
+if (! file_exists ('lang/_index.php')) {
+	echo "Translation index file not found.\n";
+	die;
+}
+
+// Build a list of strings from the app
+$index = unserialize (file_get_contents ('lang/_index.php'));
+$include = array ();
+
+foreach ($index as $string) {
+	foreach ($string['src'] as $source) {
+		if (strpos ($source, 'apps/' . $app . '/') === 0) {
+			$include[] = $string['orig'];
+			break;
+		}
+	}
+}
+
+// Include and export each language
+foreach ($i18n->languages as $lang) {
+	$code = (! empty ($lang['locale']))
+		? $lang['code'] . '_' . $lang['locale']
+		: $lang['code'];
+
+	require ('lang/' . $code . '.php');
+
+	$export = array ();
+
+	foreach ($include as $string) {
+		if (isset ($this->lang_hash[$code][$string])) {
+			$export[$string] = $this->lang_hash[$code][$string];
+		}
+	}
+
+	asort ($export);
+
+	$out = "<?php\n\nif (! isset (\$this->lang_hash['$code'])) {\n";
+	$out .= "\t\$this->lang_hash['$code'] = array ();\n}\n\n";
+	$out .= "\$this->lang_hash['$code'] = array_merge (\n\t";
+	$out .= "\$this->lang_hash['$code'],\n\tarray (\n";
+	$sep = '';
+	foreach ($export as $k => $v) {
+		$out .= sprintf (
+			"%s\t\t'%s' => '%s'",
+			$sep,
+			str_replace ('\'', '\\\'', stripslashes ($k)),
+			str_replace ('\'', '&apos;', stripslashes ($v))
+		);
+		$sep = ",\r";
+	}
+	$out .= "\n\t)\n);\n\n?>";
+
+	file_put_contents ('apps/' . $app . '/lang/' . $code . '.php', $out);
+}
+
+printf ("Translations exported to apps/%s/lang/\n", $app);
+
+?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/crud-app.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/crud-app.php are identical
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/encrypt-password.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/encrypt-password.php are identical
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/export-db.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/export-db.php are identical
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/generate-password.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/generate-password.php are identical
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/import-db.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/import-db.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/cli/handlers/index.php elefant-elefant_1_3_3_beta/apps/cli/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/cli/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/cli/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -36,6 +36,7 @@
   crud-app <modelname> <fieldlist> Build the scaffolding for a CRUD app
   generate-password <length(8)>    Generate a random password
   encrypt-password <password>      Encrypt a password for the db
+  bundle-translations <appname>    Bundle translations into an app
   version                          Output the Elefant version number
   help                             Print this help output
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/cli/handlers/install.php elefant-elefant_1_3_3_beta/apps/cli/handlers/install.php
--- elefant-elefant_1_3_2_beta/apps/cli/handlers/install.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/cli/handlers/install.php	2013-03-20 13:48:44.000000000 -0500
@@ -22,6 +22,8 @@
 	return;
 }
 
+require_once ('apps/cli/lib/Functions.php');
+
 $conf = parse_ini_file ('conf/config.php', true);
 
 // set the necessary folder permissions
@@ -56,9 +58,14 @@
 DB::beginTransaction ();
 
 foreach ($sqldata as $sql) {
+	if (trim ($sql) === 'begin' || trim ($sql) === 'commit') {
+		continue;
+	}
+
 	if (! DB::execute ($sql)) {
 		echo '** Error: ' . DB::error () . "\n";
 		DB::rollback ();
+		return;
 	}
 }
 
@@ -66,12 +73,13 @@
 $pass = generate_password (8);
 $date = gmdate ('Y-m-d H:i:s');
 if (! DB::execute (
-	"update `user` set `email` = ?, `password` = ? where `id` = 1",
+	"update `#prefix#user` set `email` = ?, `password` = ? where `id` = 1",
 	$conf['General']['email_from'],
-	encrypt_password ($pass)
+	User::encrypt_pass ($pass)
 )) {
 	echo 'Error: ' . DB::error () . "\n";
 	DB::rollback ();
+	return;
 }
 
 DB::commit ();
diff -urBNs elefant-elefant_1_3_2_beta/apps/cli/handlers/update.php elefant-elefant_1_3_3_beta/apps/cli/handlers/update.php
--- elefant-elefant_1_3_2_beta/apps/cli/handlers/update.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/cli/handlers/update.php	2013-03-20 13:48:44.000000000 -0500
@@ -15,22 +15,26 @@
 
 $page->layout = false;
 
-echo "Not implemented yet.\n";
-return;
+require_once ('apps/cli/lib/Functions.php');
 
 // get the major/minor version
 $major_minor = preg_replace ('/\.[0-9]+$/', '', ELEFANT_VERSION);
 
 // fetch the latest version from the server
 $res = json_decode (
-	file_get_contents (
+	fetch_url (
 		'http://www.elefantcms.com/updates/check.php?v=' . $major_minor
 	)
 );
 
+if (! is_object ($res)) {
+	echo "Error: Unable to fetch latest version from the server.\n";
+	return;
+}
+
 // are we already up to date?
 if ($res->latest <= ELEFANT_VERSION) {
-	echo "Already up-to-date.\n";
+	echo ELEFANT_VERSION . " is already up-to-date.\n";
 	return;
 }
 
@@ -44,16 +48,24 @@
 }
 
 // check for and download new patch files
-$res = json_decode (file_get_contents ('http://www.elefantcms.com/updates/patches.php'));
+$res = json_decode (fetch_url ('http://www.elefantcms.com/updates/patches.php?v=' . $major_minor));
+
+if (! is_object ($res)) {
+	echo "Error: Unable to fetch patch list from the server.\n";
+	return;
+}
 
 foreach ($res->patches as $patch_file) {
 	$base = basename ($patch_file);
 	if (! file_exists ('conf/updates/' . $base)) {
 		echo "Fetching new patch: {$base}\n";
-		file_put_contents (
-			'conf/updates/' . $base,
-			file_get_contents ($patch_file)
-		);
+		$contents = fetch_url ($patch_file);
+		if (! $contents) {
+			printf ("Error: Unable to retrieve file %s\n", $patch_file);
+			return;
+		}
+		file_put_contents ('conf/updates/' . $base, $contents);
+
 		// TODO: MD5 checks from 3rd party repo
 	}
 }
@@ -62,16 +74,54 @@
 	$base = basename ($script_file);
 	if (! file_exists ('conf/updates/' . $base)) {
 		echo "Fetching new db update: {$base}\n";
-		file_put_contents (
-			'conf/updates/' . $base,
-			file_get_contents ($script_file)
-		);
+		$contents = fetch_url ($script_file);
+		if (! $contents) {
+			printf ("Error: Unable to retrieve file %s\n", $script_file);
+			return;
+		}
+		file_put_contents ('conf/updates/' . $base, $contents);
+
 		// TODO: MD5 checks from 3rd party repo
 	}
 }
 
-// TODO:
-// 1. determine which patches/db updates need to be run
-// 2. test and apply the patches and db updates in sequence
+$versions = cli_get_versions (ELEFANT_VERSION, $latest);
+
+// Test and apply the patches and db updates in sequence
+foreach ($versions as $version) {
+	printf ("Testing patch: %s\n", basename ($version['patch']));
+	exec ('patch --dry-run -p1 -f -i ' . $version['patch'], $output);
+	$output = join ("\n", $output);
+	if (strpos ($output, 'FAILED')) {
+		printf ("Error applying patch %s\n", $version['patch']);
+		echo "See conf/updates/error.log for details.\n";
+		file_put_contents ('conf/updates/error.log', $output);
+		return;
+	}
+
+	// Patch is okay to apply
+	echo "Patch ok, applying...\n";
+	exec ('patch -p1 -f -i ' . $version['patch']);
+
+	// Apply associated database updates
+	if ($version['script']) {
+		printf ("Applying db update: %s\n", basename ($version['script']));
+		$sqldata = sql_split (file_get_contents ($version['script']));
+		DB::beginTransaction ();
+		foreach ($sqldata as $sql) {
+			if (! DB::execute ($sql)) {
+				$error = DB::error ();
+				DB::rollback ();
+				printf ("Error applying db update: %s\n", $version['script']);
+				echo "See conf/updates/error.log for details.\n";
+				file_put_contents ('conf/updates/error.log', $error);
+				return;
+			}
+		}
+		DB::commit ();
+	}
+}
+
+printf ("Applied %d updates.\n", count ($versions));
 
-?>
\ No newline at end of file
+?>
Files elefant-elefant_1_3_2_beta/apps/cli/handlers/version.php and elefant-elefant_1_3_3_beta/apps/cli/handlers/version.php are identical
Files elefant-elefant_1_3_2_beta/apps/cli/lib/CRUDHelpers.php and elefant-elefant_1_3_3_beta/apps/cli/lib/CRUDHelpers.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/cli/lib/Functions.php elefant-elefant_1_3_3_beta/apps/cli/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/cli/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/cli/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,4 +14,43 @@
 	return $pass;
 }
 
+/**
+ * Determine which patches/db updates need to be run.
+ * Note that this imposes limits on the version numbering
+ * of Elefant, specifically:
+ *
+ * - Minor versions can go up to 10
+ * - Bug fix numbers can go up to 20
+ *
+ * So the highest release number for the 1.x series is 1.10.20
+ * before rolling over to 2.0.0.
+ */
+function cli_get_versions ($current, $latest) {
+	$versions = array ();
+	$files = glob ('conf/updates/elefant-' . $current . '-*.patch');
+	while ($current !== $latest) {
+		$files = glob ('conf/updates/elefant-' . $current . '-*.patch');
+		if (count ($files) > 0) {
+			$script = preg_replace ('/\.patch$/', '.sql', $files[0]);
+			$versions[] = array (
+				'patch' => $files[0],
+				'script' => file_exists ($script) ? $script : false
+			);
+		}
+
+		list ($major, $minor, $fix) = explode ('.', $current);
+		$fix++;
+		if ($fix > 20) {
+			$fix = 0;
+			$minor++;
+		}
+		if ($minor > 10) {
+			$major++;
+			$minor = 0;
+		}
+		$current = $major . '.' . $minor . '.' . $fix;
+	}
+	return $versions;
+}
+
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/cli/views/build-app/admin_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/build-app/admin_handler.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/build-app/config.html and elefant-elefant_1_3_3_beta/apps/cli/views/build-app/config.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/build-app/index_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/build-app/index_handler.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/build-app/index_view.html and elefant-elefant_1_3_3_beta/apps/cli/views/build-app/index_view.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/add_form.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/add_form.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/add_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/add_handler.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/add_view.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/add_view.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/admin_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/admin_handler.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/admin_view.html elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/admin_view.html
--- elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/admin_view.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/admin_view.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,4 +1,4 @@
-<p><a href="/{{plural}}/add">{"Add {{appname|ucfirst}}"}</a></p>
+<p><a href="/{{plural}}/add">\{"Add {{appname|ucfirst}}"}</a></p>
 
 <p>
 <table width="100%">
@@ -13,7 +13,7 @@
 			<a	href="/{{plural}}/edit?id=\{{ loop_value->id }}">\{"Edit"}</a> |
 			<a	href="/{{plural}}/delete"
 				data-id="\{{ loop_value->id }}"
-				onclick="$.confirm_and_post (this, '\{"Are you sure you want to delete this {{appname}}?"}')">\{"Delete"}</a>
+				onclick="return $.confirm_and_post (this, '\{"Are you sure you want to delete this {{appname}}?"}')">\{"Delete"}</a>
 		</td>
 	</tr>
 \{% end %}
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/config.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/config.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/delete_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/delete_handler.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/edit_form.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/edit_form.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/edit_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/edit_handler.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/edit_view.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/edit_view.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/index_handler.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/index_handler.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/index_view.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/index_view.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/install_mysql.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/install_mysql.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/install_pgsql.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/install_pgsql.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/install_sqlite.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/install_sqlite.html are identical
Files elefant-elefant_1_3_2_beta/apps/cli/views/crud-app/model.html and elefant-elefant_1_3_3_beta/apps/cli/views/crud-app/model.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/conf/config.php and elefant-elefant_1_3_3_beta/apps/designer/conf/config.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/css/add_layout.css elefant-elefant_1_3_3_beta/apps/designer/css/add_layout.css
--- elefant-elefant_1_3_2_beta/apps/designer/css/add_layout.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/css/add_layout.css	2013-03-20 13:48:44.000000000 -0500
@@ -2,7 +2,7 @@
 	height: 100%;
 }
 #wrapper {
-	padding-top: 33px !important;
+	padding-top: 38px !important;
 }
 #body {
 	position: relative;
@@ -51,6 +51,7 @@
 .CodeMirror {
 	border: 1px solid #ccc;
 	background: #fff;
+	max-width: 1022px;
 }
 .CodeMirror-scroll {
 	height: 240px;
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/css/add_stylesheet.css elefant-elefant_1_3_3_beta/apps/designer/css/add_stylesheet.css
--- elefant-elefant_1_3_2_beta/apps/designer/css/add_stylesheet.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/css/add_stylesheet.css	2013-03-20 13:48:44.000000000 -0500
@@ -2,7 +2,7 @@
 	height: 100%;
 }
 #wrapper {
-	padding-top: 33px !important;
+	padding-top: 38px !important;
 }
 #body {
 	position: relative;
@@ -38,6 +38,7 @@
 .CodeMirror {
 	border: 1px solid #ccc;
 	background: #fff;
+	max-width: 1022px;
 }
 .CodeMirror-scroll {
 	height: 240px;
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/css/edit_layout.css elefant-elefant_1_3_3_beta/apps/designer/css/edit_layout.css
--- elefant-elefant_1_3_2_beta/apps/designer/css/edit_layout.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/css/edit_layout.css	2013-03-20 13:48:44.000000000 -0500
@@ -2,7 +2,7 @@
 	height: 100%;
 }
 #wrapper {
-	padding-top: 33px !important;
+	padding-top: 38px !important;
 }
 #body {
 	width: 1024px;
@@ -18,7 +18,7 @@
 }
 #tags {
 	background: #f1f1f1;
-	margin-top: 12px;
+	margin-top: 5px;
 	border: 1px solid #ccc;
 	border-bottom: 0px;
 	-webkit-border-top-left-radius: 2px;
@@ -43,6 +43,7 @@
 .CodeMirror {
 	border: 1px solid #ccc;
 	background: #fff;
+	max-width: 1022px;
 }
 .CodeMirror-scroll {
 	height: 240px;
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/css/edit_stylesheet.css elefant-elefant_1_3_3_beta/apps/designer/css/edit_stylesheet.css
--- elefant-elefant_1_3_2_beta/apps/designer/css/edit_stylesheet.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/css/edit_stylesheet.css	2013-03-20 13:48:44.000000000 -0500
@@ -2,7 +2,7 @@
 	height: 100%;
 }
 #wrapper {
-	padding-top: 33px !important;
+	padding-top: 38px !important;
 }
 #body {
 	position: relative;
@@ -49,6 +49,7 @@
 .CodeMirror {
 	border: 1px solid #ccc;
 	background: #fff;
+	max-width: 1022px;
 }
 .CodeMirror-scroll {
 	height: 240px;
Files elefant-elefant_1_3_2_beta/apps/designer/forms/addlayout.php and elefant-elefant_1_3_3_beta/apps/designer/forms/addlayout.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/forms/addstylesheet.php and elefant-elefant_1_3_3_beta/apps/designer/forms/addstylesheet.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/forms/editlayout.php and elefant-elefant_1_3_3_beta/apps/designer/forms/editlayout.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/forms/editstylesheet.php and elefant-elefant_1_3_3_beta/apps/designer/forms/editstylesheet.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/forms/installer.php and elefant-elefant_1_3_3_beta/apps/designer/forms/installer.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/add/layout.php elefant-elefant_1_3_3_beta/apps/designer/handlers/add/layout.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/add/layout.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/add/layout.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,14 +14,14 @@
 $f->verify_csrf = false;
 if ($f->submit ()) {
 	if (@file_put_contents ('layouts/' . $_POST['name'] . '.html', $_POST['body'])) {
-		$this->add_notification (i18n_get ('Layout added.'));
+		$this->add_notification (__ ('Layout added.'));
 		@chmod ('layouts/' . $_POST['name'] . '.html', 0666);
 		$this->redirect ('/designer');
 	}
-	$page->title = i18n_get ('Saving Layout Failed');
-	echo '<p>' . i18n_get ('Check that your permissions are correct and try again.') . '</p>';
+	$page->title = __ ('Saving Layout Failed');
+	echo '<p>' . __ ('Check that your permissions are correct and try again.') . '</p>';
 } else {
-	$page->window_title = i18n_get ('New Layout');
+	$page->window_title = __ ('New Layout');
 }
 
 $o = new StdClass;
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/add/stylesheet.php elefant-elefant_1_3_3_beta/apps/designer/handlers/add/stylesheet.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/add/stylesheet.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/add/stylesheet.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,14 +14,14 @@
 $f->verify_csrf = false;
 if ($f->submit ()) {
 	if (@file_put_contents ('css/' . $_POST['name'] . '.css', $_POST['body'])) {
-		$this->add_notification (i18n_get ('Stylesheet added.'));
+		$this->add_notification (__ ('Stylesheet added.'));
 		@chmod ('layouts/' . $_POST['name'] . '.html', 0666);
 		$this->redirect ('/designer');
 	}
-	$page->title = i18n_get ('Saving Stylesheet Failed');
-	echo '<p>' . i18n_get ('Check that your permissions are correct and try again.') . '</p>';
+	$page->title = __ ('Saving Stylesheet Failed');
+	echo '<p>' . __ ('Check that your permissions are correct and try again.') . '</p>';
 } else {
-	$page->window_title = i18n_get ('New Stylesheet');
+	$page->window_title = __ ('New Stylesheet');
 }
 
 $o = new StdClass;
Files elefant-elefant_1_3_2_beta/apps/designer/handlers/bgsave.php and elefant-elefant_1_3_3_beta/apps/designer/handlers/bgsave.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/csspreview.php elefant-elefant_1_3_3_beta/apps/designer/handlers/csspreview.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/csspreview.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/csspreview.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 $this->require_admin ();
 
-$page->title = i18n_get ('Page title');
+$page->title = __ ('Page title');
 $page->preview = true;
 $page->layout = false;
 
@@ -42,6 +42,6 @@
 	$page->layout = file_get_contents ('layouts/default.html');
 }
 
-echo '<p>' . i18n_get ('This is a preview of how your layout will look.') . '</p>';
+echo '<p>' . __ ('This is a preview of how your layout will look.') . '</p>';
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/delete.php elefant-elefant_1_3_3_beta/apps/designer/handlers/delete.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/delete.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/delete.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,19 +16,19 @@
 
 $lock = new Lock ('Designer', $_GET['file']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 }
 
 if (! @unlink ($_GET['file'])) {
-	$page->title = i18n_get ('Unable to Delete File');
-	echo '<p>' . i18n_get ('Check that your permissions are correct and try again.') . '</p>';
-	echo '<p><a href="/designer">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Unable to Delete File');
+	echo '<p>' . __ ('Check that your permissions are correct and try again.') . '</p>';
+	echo '<p><a href="/designer">' . __ ('Continue') . '</a></p>';
 	return;
 }
 
-$this->add_notification (i18n_get ('File deleted.'));
+$this->add_notification (__ ('File deleted.'));
 $this->redirect ('/designer');
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/edit/layout.php elefant-elefant_1_3_3_beta/apps/designer/handlers/edit/layout.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/edit/layout.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/edit/layout.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,7 +16,7 @@
 
 $lock = new Lock ('Designer', $_GET['file']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 } else {
@@ -27,17 +27,17 @@
 $f->verify_csrf = false;
 if ($f->submit ()) {
 	if (@file_put_contents ($_GET['file'], $_POST['body'])) {
-		$this->add_notification (i18n_get ('Layout saved.'));
+		$this->add_notification (__ ('Layout saved.'));
 		try {
 			@chmod ($_GET['file'], 0666);
 		} catch (Exception $e) {}
 		$lock->remove ();
 		$this->redirect ('/designer');
 	}
-	$page->title = i18n_get ('Saving Layout Failed');
-	echo '<p>' . i18n_get ('Check that your permissions are correct and try again.') . '</p>';
+	$page->title = __ ('Saving Layout Failed');
+	echo '<p>' . __ ('Check that your permissions are correct and try again.') . '</p>';
 } else {
-	$page->title = i18n_get ('Edit Layout') . ': ' . $_GET['file'];
+	$page->title = __ ('Edit Layout') . ': ' . $_GET['file'];
 }
 
 $o = new StdClass;
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/edit/stylesheet.php elefant-elefant_1_3_3_beta/apps/designer/handlers/edit/stylesheet.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/edit/stylesheet.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/edit/stylesheet.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,7 +16,7 @@
 
 $lock = new Lock ('Designer', $_GET['file']);
 if ($lock->exists ()) {
-	$page->title = i18n_get ('Editing Locked');
+	$page->title = __ ('Editing Locked');
 	echo $tpl->render ('admin/locked', $lock->info ());
 	return;
 } else {
@@ -27,17 +27,17 @@
 $f->verify_csrf = false;
 if ($f->submit ()) {
 	if (@file_put_contents ($_GET['file'], $_POST['body'])) {
-		$this->add_notification (i18n_get ('Stylesheet saved.'));
+		$this->add_notification (__ ('Stylesheet saved.'));
 		try {
 			@chmod ($_GET['file'], 0666);
 		} catch (Exception $e) {}
 		$lock->remove ();
 		$this->redirect ('/designer');
 	}
-	$page->title = i18n_get ('Saving Stylesheet Failed');
-	echo '<p>' . i18n_get ('Check that your permissions are correct and try again.') . '</p>';
+	$page->title = __ ('Saving Stylesheet Failed');
+	echo '<p>' . __ ('Check that your permissions are correct and try again.') . '</p>';
 } else {
-	$page->title = i18n_get ('Edit Stylesheet') . ': ' . $_GET['file'];
+	$page->title = __ ('Edit Stylesheet') . ': ' . $_GET['file'];
 }
 
 $o = new StdClass;
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/index.php elefant-elefant_1_3_3_beta/apps/designer/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -46,7 +46,7 @@
 
 require_once ('apps/designer/lib/Functions.php');
 
-$page->title = i18n_get ('Designer');
+$page->title = __ ('Designer');
 echo $tpl->render ('designer/index', $out);
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/installer.php elefant-elefant_1_3_3_beta/apps/designer/handlers/installer.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/installer.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/installer.php	2013-03-20 13:48:44.000000000 -0500
@@ -8,16 +8,14 @@
 
 $this->require_admin ();
 
-$page->title = i18n_get ('Install App/Theme');
+$page->title = __ ('Install App/Theme');
 
 require_once ('apps/designer/lib/Functions.php');
 
 $form = new Form ('post', $this);
 $page->installer_error = false;
 
-echo $form->handle (function ($form) {
-	global $page, $tpl;
-
+echo $form->handle (function ($form) use ($page, $tpl) {
 	if (! empty ($_POST['github'])) {
 		if (github_is_zip ($_POST['github'])) {
 			ZipInstaller::clean ();
@@ -42,7 +40,7 @@
 
 			// Zip successfully installed
 			ZipInstaller::clean ();
-			$page->title = i18n_get ('Install completed');
+			$page->title = __ ('Install completed');
 			echo $tpl->render ('designer/installed', $res);
 		} else {
 			// Import from Github
@@ -54,7 +52,7 @@
 			}
 	
 			// App/theme successfully installed
-			$page->title = i18n_get ('Install completed');
+			$page->title = __ ('Install completed');
 			echo $tpl->render ('designer/installed', $res);
 		}
 	} elseif (is_uploaded_file ($_FILES['zipfile']['tmp_name'])) {
@@ -71,7 +69,7 @@
 
 		// Zip successfully installed
 		ZipInstaller::clean ();
-		$page->title = i18n_get ('Install completed');
+		$page->title = __ ('Install completed');
 		echo $tpl->render ('designer/installed', $res);
 	} else {
 		$form->failed = array ('other');
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/makedefault.php elefant-elefant_1_3_3_beta/apps/designer/handlers/makedefault.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/makedefault.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/makedefault.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,7 +16,7 @@
 );
 file_put_contents ('conf/config.php', $confdata);
 
-$this->add_notification (i18n_get ('Default layout updated.'));
+$this->add_notification (__ ('Default layout updated.'));
 $this->redirect ('/designer');
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/handlers/preview.php elefant-elefant_1_3_3_beta/apps/designer/handlers/preview.php
--- elefant-elefant_1_3_2_beta/apps/designer/handlers/preview.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/handlers/preview.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 $this->require_admin ();
 
-$page->title = i18n_get ('Page title');
+$page->title = __ ('Page title');
 $page->preview = true;
 
 if ($_SERVER['REQUEST_METHOD'] == 'GET') {
@@ -21,6 +21,6 @@
 	$page->layout = $_POST['layout'];
 }
 
-echo '<p>' . i18n_get ('This is a preview of how your layout will look.') . '</p>';
+echo '<p>' . __ ('This is a preview of how your layout will look.') . '</p>';
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/LICENSE and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/LICENSE are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/README.md and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/README.md are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/compress.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/compress.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/css/baboon.png and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/css/baboon.png are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/css/baboon_vector.svg and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/css/baboon_vector.svg are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/css/docs.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/css/docs.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/activeline.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/activeline.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/complete.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/complete.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/complete.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/complete.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/marker.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/marker.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/mustache.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/mustache.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/resize.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/resize.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/runmode.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/runmode.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/search.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/search.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/demo/theme.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/demo/theme.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/internals.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/internals.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/lib/codemirror.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/lib/codemirror.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/lib/codemirror.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/lib/codemirror.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/lib/overlay.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/lib/overlay.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/lib/runmode.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/lib/runmode.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/manual.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/manual.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/clike/clike.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/clike/clike.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/clike/clike.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/clike/clike.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/clike/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/clike/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/css/css.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/css/css.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/css/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/css/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/diff/diff.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/diff/diff.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/diff/diff.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/diff/diff.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/diff/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/diff/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/haskell/haskell.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/haskell/haskell.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/haskell/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/haskell/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/htmlmixed/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/htmlmixed/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/javascript/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/javascript/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/javascript/javascript.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/javascript/javascript.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/lua/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/lua/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/lua/lua.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/lua/lua.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/php/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/php/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/php/php.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/php/php.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/plsql/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/plsql/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/plsql/plsql.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/plsql/plsql.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/python/LICENSE.txt and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/python/LICENSE.txt are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/python/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/python/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/python/python.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/python/python.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/rst/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/rst/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/rst/rst.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/rst/rst.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/rst/rst.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/rst/rst.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/smalltalk/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/smalltalk/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/smalltalk/smalltalk.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/smalltalk/smalltalk.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/stex/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/stex/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/stex/stex.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/stex/stex.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/xml/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/xml/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/mode/xml/xml.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/mode/xml/xml.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/oldrelease.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/oldrelease.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/test/index.html and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/test/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/test/test.js and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/test/test.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/theme/default.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/theme/default.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/theme/elegant.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/theme/elegant.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/theme/neat.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/theme/neat.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/codemirror/theme/night.css and elefant-elefant_1_3_3_beta/apps/designer/js/codemirror/theme/night.css are identical
Files elefant-elefant_1_3_2_beta/apps/designer/js/jquery.bindWithDelay.js and elefant-elefant_1_3_3_beta/apps/designer/js/jquery.bindWithDelay.js are identical
Files elefant-elefant_1_3_2_beta/apps/designer/lib/Functions.php and elefant-elefant_1_3_3_beta/apps/designer/lib/Functions.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/lib/GithubFetcher.php elefant-elefant_1_3_3_beta/apps/designer/lib/GithubFetcher.php
--- elefant-elefant_1_3_2_beta/apps/designer/lib/GithubFetcher.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/lib/GithubFetcher.php	2013-03-20 13:48:44.000000000 -0500
@@ -56,17 +56,20 @@
 	 * Uses CURL to perform a GET request to the Github API v3.
 	 */
 	public static function _fetch ($url) {
-		$ch = curl_init ();
-		curl_setopt ($ch, CURLOPT_HEADER, 0);
-		curl_setopt ($ch, CURLOPT_VERBOSE, 0);
-		curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
-		curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
-		curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
-		curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
-		curl_setopt ($ch, CURLOPT_URL, $url);
-		$res = curl_exec ($ch);
-		curl_close ($ch);
-		return $res;
+		if (extension_loaded ('curl')) {
+			$ch = curl_init ();
+			curl_setopt ($ch, CURLOPT_HEADER, 0);
+			curl_setopt ($ch, CURLOPT_VERBOSE, 0);
+			curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
+			curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
+			curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
+			curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
+			curl_setopt ($ch, CURLOPT_URL, $url);
+			$res = curl_exec ($ch);
+			curl_close ($ch);
+			return $res;
+		}
+		return file_get_contents ($url);
 	}
 
 	public static function parse_url ($url) {
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/lib/GithubInstaller.php elefant-elefant_1_3_3_beta/apps/designer/lib/GithubInstaller.php
--- elefant-elefant_1_3_2_beta/apps/designer/lib/GithubInstaller.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/lib/GithubInstaller.php	2013-03-20 13:48:44.000000000 -0500
@@ -13,6 +13,11 @@
 		list ($user, $project) = github_parse_url ($source);
 		$github = new GithubFetcher ($user, $project);
 		$tree = $github->tree ();
+		
+		if (! is_array ($tree)) {
+			self::$error = __ ('Unable to fetch configuration file.');
+			return false;
+		}
 
 		// Get config and verify it
 		$found = false;
@@ -20,13 +25,13 @@
 		foreach ($tree as $item) {
 			if ($item->path === 'elefant.json') {
 				$data = $github->get ($item);
-				if (! $data) {
-					self::$error = i18n_get ('Unable to fetch configuration file.');
+				if (! $data || strlen ($data) !== $item->size) {
+					self::$error = __ ('Unable to fetch configuration file.');
 					return false;
 				}
 				$conf = json_decode ($data);
 				if (! $conf) {
-					self::$error = i18n_get ('Verification failed: Invalid configuration file.');
+					self::$error = __ ('Verification failed: Invalid configuration file.');
 					return false;
 				}
 				if (! self::verify ($conf)) {
@@ -38,7 +43,7 @@
 			}
 		}
 		if (! $found) {
-			self::$error = i18n_get ('Configuration file not found.');
+			self::$error = __ ('Configuration file not found.');
 			return false;
 		}
 
@@ -46,13 +51,13 @@
 		if ($conf->type === 'app') {
 			$dest = 'apps/' . $conf->folder;
 			if (! mkdir ($dest)) {
-				self::$error = i18n_get ('Unable to write to apps folder.');
+				self::$error = __ ('Unable to write to apps folder.');
 				return false;
 			}
 		} else {
 			$dest = 'layouts/' . $conf->folder;
 			if (! mkdir ($dest)) {
-				self::$error = i18n_get ('Unable to write to layouts folder.');
+				self::$error = __ ('Unable to write to layouts folder.');
 				return false;
 			}
 		}
@@ -66,8 +71,8 @@
 				mkdir ($dest . '/' . $item->path);
 			} else {
 				$data = $github->get ($item);
-				if ($data === false) {
-					self::$error = i18n_get ('Unable to fetch file') . ' ' . $item->path;
+				if ($data === false || strlen ($data) !== $item->size) {
+					self::$error = __ ('Unable to fetch file') . ' ' . $item->path;
 					rmdir_recursive ($dest);
 					return false;
 				}
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/lib/Installer.php elefant-elefant_1_3_3_beta/apps/designer/lib/Installer.php
--- elefant-elefant_1_3_2_beta/apps/designer/lib/Installer.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/lib/Installer.php	2013-03-20 13:48:44.000000000 -0500
@@ -15,41 +15,41 @@
 	 */
 	public static function verify ($config) {
 		if (! isset ($config->name)) {
-			self::$error = i18n_get ('Verification failed: No name specified');
+			self::$error = __ ('Verification failed: No name specified');
 			return false;
 		}
 
 		if (! isset ($config->type)) {
-			self::$error = i18n_get ('Verification failed: No type specified.');
+			self::$error = __ ('Verification failed: No type specified.');
 			return false;
 		}
 
 		if (! in_array ($config->type, array ('theme', 'app'))) {
 			// No type or invalid type specified
-			self::$error = i18n_get ('Verification failed: Invalid type.');
+			self::$error = __ ('Verification failed: Invalid type.');
 			return false;
 		}
 
 		if (! isset ($config->folder)) {
-			self::$error = i18n_get ('Verification failed: No folder specified');
+			self::$error = __ ('Verification failed: No folder specified');
 			return false;
 		}
 
-		if (! preg_match ('/^[a-z0-9_-]+$/i', $config->folder)) {
+		if (! preg_match ('/^[a-z0-9\._-]+$/i', $config->folder)) {
 			// No folder or invalid name (e.g., spaces)
-			self::$error = i18n_get ('Verification failed: Invalid folder name.');
+			self::$error = __ ('Verification failed: Invalid folder name.');
 			return false;
 		}
 
 		if (! isset ($config->version)) {
 			// Version is required
-			self::$error = i18n_get ('Verification failed: No version specified.');
+			self::$error = __ ('Verification failed: No version specified.');
 			return false;
 		}
 
 		if (! isset ($config->repository) && ! isset ($config->website)) {
 			// Repository or website required
-			self::$error = i18n_get ('Verification failed: Repository or website required.');
+			self::$error = __ ('Verification failed: Repository or website required.');
 			return false;
 		}
 
@@ -60,10 +60,10 @@
 
 		// Check that it's not overwriting an existing app or theme
 		if ($config->type == 'theme' && file_exists ('layouts/' . $config->folder)) {
-			self::$error = i18n_get ('A theme by this name is already installed.');
+			self::$error = __ ('A theme by this name is already installed.');
 			return false;
 		} elseif ($config->type == 'app' && file_exists ('apps/' . $config->folder)) {
-			self::$error = i18n_get ('An app by this name is already installed.');
+			self::$error = __ ('An app by this name is already installed.');
 			return false;
 		}
 
@@ -75,12 +75,12 @@
 	 */
 	public static function verify_requires ($requires) {
 		if (isset ($requires->php) && version_compare (PHP_VERSION, $requires->php) < 0) {
-			self::$error = i18n_getf ('Verification failed: This install requires PHP %s or newer.', $requires->php);
+			self::$error = __ ('Verification failed: This install requires PHP %s or newer.', $requires->php);
 			return false;
 		}
 
 		if (isset ($requires->elefant) && version_compare (ELEFANT_VERSION, $requires->elefant) < 0) {
-			self::$error = i18n_getf ('Verification failed: This install requires Elefant %s or newer.', $requires->elefant);
+			self::$error = __ ('Verification failed: This install requires Elefant %s or newer.', $requires->elefant);
 			return false;
 		}
 
Files elefant-elefant_1_3_2_beta/apps/designer/lib/PclZip.php and elefant-elefant_1_3_3_beta/apps/designer/lib/PclZip.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/lib/ZipInstaller.php elefant-elefant_1_3_3_beta/apps/designer/lib/ZipInstaller.php
--- elefant-elefant_1_3_2_beta/apps/designer/lib/ZipInstaller.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/lib/ZipInstaller.php	2013-03-20 13:48:44.000000000 -0500
@@ -13,7 +13,7 @@
 		try {
 			Zipper::unzip ($source['tmp_name']);
 		} catch (Exception $e) {
-			self::$error = i18n_get ('Could not unzip the file.');
+			self::$error = __ ('Could not unzip the file.');
 			return false;
 		}
 
@@ -21,13 +21,13 @@
 
 		// Get config and verify it
 		if (! file_exists ($folder . '/elefant.json')) {
-			self::$error = i18n_get ('Verification failed: No configuration file found.');
+			self::$error = __ ('Verification failed: No configuration file found.');
 			return false;
 		}
 
 		$conf = json_decode (file_get_contents ($folder . '/elefant.json'));
 		if ($conf === false) {
-			self::$error = i18n_get ('Verification failed: Invalid configuration file.');
+			self::$error = __ ('Verification failed: Invalid configuration file.');
 			return false;
 		}
 
@@ -39,13 +39,13 @@
 		// Move files over
 		if ($conf->type === 'app') {
 			if (! rename ($folder, 'apps/' . $conf->folder)) {
-				self::$error = i18n_get ('Unable to write to apps folder.');
+				self::$error = __ ('Unable to write to apps folder.');
 				return false;
 			}
 			chmod_recursive ('apps/' . $conf->folder, 0777);
 		} else {
 			if (! rename ($folder, 'layouts/' . $conf->folder)) {
-				self::$error = i18n_get ('Unable to write to layouts folder.');
+				self::$error = __ ('Unable to write to layouts folder.');
 			}
 			chmod_recursive ('layouts/' . $conf->folder, 0777);
 		}
@@ -95,25 +95,30 @@
 			chmod ('cache/zip', 0777);
 		}
 
-		$ch = curl_init ();
-		curl_setopt ($ch, CURLOPT_HEADER, 0);
-		curl_setopt ($ch, CURLOPT_VERBOSE, 0);
-		curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
-		curl_setopt ($ch, CURLOPT_MAXREDIRS, 3);
-		curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
-		curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
-		curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
-		curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
-		curl_setopt ($ch, CURLOPT_URL, $url);
-		$res = curl_exec ($ch);
-		curl_close ($ch);
+		if (extension_loaded ('curl')) {
+			$ch = curl_init ();
+			curl_setopt ($ch, CURLOPT_HEADER, 0);
+			curl_setopt ($ch, CURLOPT_VERBOSE, 0);
+			curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
+			curl_setopt ($ch, CURLOPT_MAXREDIRS, 3);
+			curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
+			curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
+			curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
+			curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
+			curl_setopt ($ch, CURLOPT_URL, $url);
+			$res = curl_exec ($ch);
+			curl_close ($ch);
+		} else {
+			$res = file_get_contents ($url);
+		}
+
 		if ($res === false) {
-			self::$error = i18n_get ('Failed to retrieve the file at the specified link.');
+			self::$error = __ ('Failed to retrieve the file at the specified link.');
 			return false;
 		}
 
 		if (! file_put_contents ($tmp, $res)) {
-			self::$error = i18n_get ('Unable to write to cache folder.');
+			self::$error = __ ('Unable to write to cache folder.');
 			return false;
 		}
 		chmod ($tmp, 0777);
Files elefant-elefant_1_3_2_beta/apps/designer/lib/Zipper.php and elefant-elefant_1_3_3_beta/apps/designer/lib/Zipper.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/tests/GithubFetcherTest.php and elefant-elefant_1_3_3_beta/apps/designer/tests/GithubFetcherTest.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/tests/ZipperTest.php and elefant-elefant_1_3_3_beta/apps/designer/tests/ZipperTest.php are identical
Files elefant-elefant_1_3_2_beta/apps/designer/views/add/layout.html and elefant-elefant_1_3_3_beta/apps/designer/views/add/layout.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/views/add/stylesheet.html and elefant-elefant_1_3_3_beta/apps/designer/views/add/stylesheet.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/views/edit/layout.html and elefant-elefant_1_3_3_beta/apps/designer/views/edit/layout.html are identical
Files elefant-elefant_1_3_2_beta/apps/designer/views/edit/stylesheet.html and elefant-elefant_1_3_3_beta/apps/designer/views/edit/stylesheet.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/views/index.html elefant-elefant_1_3_3_beta/apps/designer/views/index.html
--- elefant-elefant_1_3_2_beta/apps/designer/views/index.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/views/index.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,14 +1,13 @@
 {! admin/util/dates !}
 
-<link rel="stylesheet" type="text/css" href="/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.css" />
-<script src="/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
+<link rel="stylesheet" type="text/css" href="/apps/filemanager/css/colorbox/colorbox.css" />
+<script src="/apps/filemanager/js/jquery.colorbox.min.js"></script>
 <script>
 $(function () {
-	$('.preview').fancybox ({
-		width: 1024,
-		height: '85%',
-		padding: 0,
-		margin: 10
+	$('.preview').colorbox ({
+		iframe:true,
+		innerWidth: '85%',
+		innerHeight: '85%'
 	});
 });
 </script>
@@ -29,9 +28,9 @@
 <p>
 <table width="100%">
 	<tr>
-		<th width="40%">{"Layout"}</th>
-		<th width="20%">{"Last Modified"}</th>
-		<th width="20%">{"File Size"}</th>
+		<th width="45%">{"Layout"}</th>
+		<th width="25%">{"Last Modified"}</th>
+		<th width="10%">{"File Size"}</th>
 		<th width="20%">&nbsp;</th>
 	</tr>
 {% foreach layouts %}
@@ -65,17 +64,17 @@
 <p>
 <table width="100%">
 	<tr>
-		<th width="40%">{"Stylesheet"}</th>
+		<th width="45%">{"Stylesheet"}</th>
 		<th width="25%">{"Last Modified"}</th>
-		<th width="20%">{"File Size"}</th>
-		<th width="15%">&nbsp;</th>
+		<th width="10%">{"File Size"}</th>
+		<th width="20%">&nbsp;</th>
 	</tr>
 {% foreach stylesheets %}
 	<tr>
 		<td><a href="/{{ loop_value }}" class="preview iframe">{{ loop_value }}</a></td>
 		<td>{{ loop_value|filemtime|I18n::date_time }}</td>
 		<td>{{ loop_value|filesize|format_filesize }}</td>
-		<td>
+		<td style="text-align: right">
 			{% if locks[$data->loop_value] %}
 			{"Editing Locked"}
 			{% else %}
@@ -122,6 +121,7 @@
 		padding: 5px 10px 5px 10px;
 		background: #e5e5e5;
 		border-right: 1px solid #ccc;
+		outline: none;
 	}
 	
 	.ui-state-default a:hover {
@@ -133,6 +133,7 @@
 		background: #8A5AB5;
 		color: #f5f5f5;
 		border-right: 0px;
+		outline: none;
 	}
 	
 	.ui-tabs-selected a:hover {
Files elefant-elefant_1_3_2_beta/apps/designer/views/installed.html and elefant-elefant_1_3_3_beta/apps/designer/views/installed.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/designer/views/installer.html elefant-elefant_1_3_3_beta/apps/designer/views/installer.html
--- elefant-elefant_1_3_2_beta/apps/designer/views/installer.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/designer/views/installer.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,8 @@
 <form method="POST" id="{{ _form }}" enctype="multipart/form-data" onsubmit="$('#submit').attr ('disabled', 'disabled')">
 <input type="hidden" name="other" />
 
-<p><strong><em>{"Important: Only install apps or themes from trusted sources."}</em></strong></p>
+<p><strong><em>{"Important: Only install apps or themes from trusted sources."}<br />
+{"Also note that Github limits you to installing one app per hour."}</em></strong></p>
 
 {% if ! extension_loaded ('curl') %}
 <p class="visible-notice">{"Note: Installing from links has been disabled because the PHP cURL extension is missing."}</p>
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/conf/config.php elefant-elefant_1_3_3_beta/apps/filemanager/conf/config.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/conf/config.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/conf/config.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,5 +1,15 @@
 ; <?php /*
 
+[General]
+
+; Set a custom proxy handler (e.g., "aws/s3") to serve
+; file requests instead of handling them directly.
+proxy_handler = Off
+
+; To enable image editing in the file manager, register
+; for an API key with Aviary.com and enter it here.
+aviary_key = Off
+
 [Admin]
 
 handler = filemanager/index
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/conf/embed.php elefant-elefant_1_3_3_beta/apps/filemanager/conf/embed.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/conf/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/conf/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,6 +3,7 @@
 [filemanager/slideshow]
 
 label = "Images: Slideshow"
+icon = picture
 
 path[label] = Folder
 path[type] = select
@@ -12,6 +13,7 @@
 [filemanager/gallery]
 
 label = "Images: Gallery"
+icon = picture
 
 path[label] = Folder
 path[type] = select
@@ -36,6 +38,7 @@
 [filemanager/audio]
 
 label = "Embedded Audio (MP3)"
+icon = headphones
 
 file[label] = MP3 Audio
 file[type] = file
@@ -43,6 +46,7 @@
 [filemanager/video]
 
 label = "Embedded Video (MP4)"
+icon = facetime-video
 
 file[label] = MP4 Video
 file[type] = file
@@ -50,6 +54,7 @@
 [filemanager/swf]
 
 label = "Embedded Flash (SWF)"
+icon = "/apps/filemanager/css/icon-swf.png"
 
 file[label] = SWF Flash File
 file[type] = file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/css/colorbox/colorbox.css elefant-elefant_1_3_3_beta/apps/filemanager/css/colorbox/colorbox.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/css/colorbox/colorbox.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/css/colorbox/colorbox.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,43 @@
+/*
+    ColorBox Core Style:
+    The following CSS is consistent between example themes and should not be altered.
+*/
+#colorbox, #cboxOverlay, #cboxWrapper{position:absolute; top:0; left:0; z-index:9999; overflow:hidden;}
+#cboxOverlay{position:fixed; width:100%; height:100%;}
+#cboxMiddleLeft, #cboxBottomLeft{clear:left;}
+#cboxContent{position:relative;}
+#cboxLoadedContent{overflow:auto;}
+#cboxTitle{margin:0;}
+#cboxLoadingOverlay, #cboxLoadingGraphic{position:absolute; top:0; left:0; width:100%; height:100%;}
+#cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow{cursor:pointer;}
+.cboxPhoto{float:left; margin:auto; border:0; display:block; max-width:none;}
+.cboxIframe{width:100%; height:100%; display:block; border:0;}
+#colorbox, #cboxContent, #cboxLoadedContent{box-sizing:content-box; -moz-box-sizing:content-box; -webkit-box-sizing:content-box;}
+
+/* 
+    User Style:
+    Change the following styles to modify the appearance of ColorBox.  They are
+    ordered & tabbed in a way that represents the nesting of the generated HTML.
+*/
+#cboxOverlay{background:#fff;}
+#colorbox{}
+    #cboxContent{margin-top:32px; overflow:visible;}
+        .cboxIframe{background:#fff;}
+        #cboxError{padding:50px; border:1px solid #ccc;}
+        #cboxLoadedContent{background:#000; padding:1px;}
+        #cboxLoadingGraphic{background:url(loading.gif) no-repeat center center;}
+        #cboxLoadingOverlay{background:#000;}
+        #cboxTitle{position:absolute; top:-22px; left:0; color:#000;}
+        #cboxCurrent{position:absolute; top:-22px; right:205px; text-indent:-9999px;}
+        #cboxSlideshow, #cboxPrevious, #cboxNext, #cboxClose{text-indent:-9999px; width:20px; height:20px; position:absolute; top:-20px; background:url(controls.png) no-repeat 0 0;}
+        #cboxPrevious{background-position:0px 0px; right:44px;}
+        #cboxPrevious:hover{background-position:0px -25px;}
+        #cboxNext{background-position:-25px 0px; right:22px;}
+        #cboxNext:hover{background-position:-25px -25px;}
+        #cboxClose{background-position:-50px 0px; right:0;}
+        #cboxClose:hover{background-position:-50px -25px;}
+        .cboxSlideshow_on #cboxPrevious, .cboxSlideshow_off #cboxPrevious{right:66px;}
+        .cboxSlideshow_on #cboxSlideshow{background-position:-75px -25px; right:44px;}
+        .cboxSlideshow_on #cboxSlideshow:hover{background-position:-100px -25px;}
+        .cboxSlideshow_off #cboxSlideshow{background-position:-100px 0px; right:44px;}
+        .cboxSlideshow_off #cboxSlideshow:hover{background-position:-75px -25px;}
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/css/colorbox/controls.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/colorbox/controls.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/css/colorbox/loading.gif and elefant-elefant_1_3_3_beta/apps/filemanager/css/colorbox/loading.gif differ
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/current.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/current.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/css/filebrowser.css elefant-elefant_1_3_3_beta/apps/filemanager/css/filebrowser.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/css/filebrowser.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/css/filebrowser.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,67 @@
+#filebrowser-dropzone {
+	height: 100%;
+	border: 2px solid #fafafa;
+}
+
+	#filebrowser-dropzone.filebrowser-over {
+		border: 2px dashed #ddd;
+	}
+
+#filebrowser-list {
+	margin-top: 8px;
+}
+
+#filebrowser-col-a, #filebrowser-col-b {
+	list-style-type: none;
+	margin-left: 0px;
+	padding-left: 0px;
+	width: 50%;
+	float: left;
+}
+
+#filebrowser-col-a li, #filebrowser-col-b li {
+	list-style-type: none;
+	margin-left: 0px;
+	padding-left: 0px;
+	padding-bottom: 5px;
+}
+
+.filebrowser-thumb {
+	display: inline-block;
+	vertical-align: bottom;
+	margin-right: 10px;
+	margin-bottom: 10px;
+}
+
+.filebrowser-thumb img {
+	max-width: 100px;
+	border: 1px solid #ddd;
+}
+
+#filebrowser-upload {
+	float: right;
+}
+
+#filebrowser-upload-progress {
+	display: none;
+	width: 150px;
+	border: 1px solid #ddd;
+}
+
+#filebrowser-upload-progress-bar {
+	display: inline-block;
+	background-color: #ddd;
+	height: 18px;
+	width: 5%;
+	z-index: 0;
+}
+
+#filebrowser-upload-progress-text {
+	z-index: 1;
+	margin-top: -24px;
+	margin-left: 2px;
+}
+
+#filebrowser-file {
+	outline-width: 0;
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/css/filemanager.css elefant-elefant_1_3_3_beta/apps/filemanager/css/filemanager.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/css/filemanager.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/css/filemanager.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,87 @@
+.draggable {
+	cursor: move !important;
+}
+
+#filemanager-dropzone {
+	height: 100%;
+	border: 2px dashed #e5e5e5;
+	margin: -8px 0px -8px 0px;
+	padding: 16px 0px 6px 16px;
+}
+
+	#filemanager-dropzone form, #filemanager-dropzone p {
+		padding: 0;
+		margin: 0;
+	}
+
+	#filemanager-dropzone:after {
+		font-family: 'FontAwesome';
+		content: "\f01b";
+		color: #e5e5e5;
+		font-size: 48px;
+		float: right;
+		margin-top: -62px;
+		padding-right: 16px;
+	}
+
+	#filemanager-dropzone.filemanager-over {
+		border: 2px dashed #ccc;
+	}
+
+	#filemanager-dropzone.filemanager-over:after {
+		font-family: 'FontAwesome';
+		content: "\f01b";
+		color: #ccc;
+		font-size: 48px;
+		float: right;
+		margin-top: -50px;
+		padding-right: 16px;
+	}
+
+#filemanager-upload-form {
+	display: inline-block;
+	width: 450px;
+}
+
+#filemanager-upload-progress {
+	display: none;
+	width: 450px;
+	height: 18px;
+	border: 1px solid #ddd;
+	position: relative;
+}
+
+#filemanager-upload-progress-bar {
+	display: none;
+	position: absolute;
+	top: 0;
+	left: 0;
+	display: inline-block;
+	background-color: #ddd;
+	height: 18px;
+	width: 5%;
+	z-index: 0;
+}
+
+#filemanager-upload-progress-text {
+	display: none;
+	position: absolute;
+	top: 0;
+	left: 2px;
+	z-index: 1;
+}
+
+.file-img {
+	position: relative;
+}
+
+.file-img-preview {
+	position: absolute;
+	top: 20px;
+	left: 30px;
+	max-width: 200px;
+	max-height: 105px;
+	border: 1px solid #999;
+	background-color: #fefefe;
+	z-index: 1000;
+}
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/gallery.css and elefant-elefant_1_3_3_beta/apps/filemanager/css/gallery.css are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/gallery_embedded.css and elefant-elefant_1_3_3_beta/apps/filemanager/css/gallery_embedded.css are identical
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/css/icon-swf.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/icon-swf.png differ
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/mediaelement/background.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/mediaelement/background.png are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/mediaelement/bigplay.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/mediaelement/bigplay.png are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/mediaelement/controls.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/mediaelement/controls.png are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/mediaelement/loading.gif and elefant-elefant_1_3_3_beta/apps/filemanager/css/mediaelement/loading.gif are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/mediaelement/mediaelementplayer.css and elefant-elefant_1_3_3_beta/apps/filemanager/css/mediaelement/mediaelementplayer.css are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/css/multi-file.css elefant-elefant_1_3_3_beta/apps/filemanager/css/multi-file.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/css/multi-file.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/css/multi-file.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,35 @@
+.multi-file-preview {
+	border: 1px dashed #ccc;
+	width: 500px;
+	padding: 5px;
+}
+ 
+#multi-file-list {
+	list-style-type: none;
+	margin-left: 0px;
+	padding-left: 0px;
+	margin-bottom: 5px;
+}
+
+#multi-file-list li {
+	list-style-type: none;
+	margin-left: 10px;
+	padding-left: 0px;
+}
+
+#multi-file-list li:hover {
+	cursor: move;
+}
+
+#multi-file-list a {
+	margin-right: 5px;
+	text-decoration: none;
+}
+
+#multi-file-list a:hover {
+	text-decoration: none;
+}
+
+#multi-file-button {
+	display: block;
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/css/multi-image.css elefant-elefant_1_3_3_beta/apps/filemanager/css/multi-image.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/css/multi-image.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/css/multi-image.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,44 @@
+.multi-image-preview {
+	border: 1px dashed #ccc;
+	width: 500px;
+	padding: 5px;
+}
+
+.multi-image-placeholder {
+	display: inline-block;
+	height: 50px;
+	width: 50px;
+	background-color: #ccc;
+	margin-right: 10px;
+	margin-bottom: 10px;
+}
+ 
+#multi-image-list {
+	display: block;
+	min-height: 52px;
+}
+
+#multi-image-list div {
+	float: left;
+	height: 52px;
+	margin-right: 10px;
+	margin-bottom: 10px;
+}
+ 
+#multi-image-list img {
+	width: auto;
+	height: auto;
+	max-width: 50px;
+	max-height: 50px;
+	border: 1px solid #999;
+}
+ 
+#multi-image-list img:hover {
+	cursor: move;
+}
+
+#multi-image-button {
+	display: block;
+	margin-top: 5px;
+	clear: both;
+}
Files elefant-elefant_1_3_2_beta/apps/filemanager/css/notcurrent.png and elefant-elefant_1_3_3_beta/apps/filemanager/css/notcurrent.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/api.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/api.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/api.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/api.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,6 +5,6 @@
  */
 
 $this->require_admin ();
-$this->restful (new FileManager ($this));
+$this->restful (new filemanager\API ());
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/audio.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/audio.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/audio.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/audio.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,6 +11,11 @@
 
 $data['div'] = preg_replace ('/[^a-zA-Z0-9-]+/', '-', trim ($data['file'], '/'));
 
+// rewrite if proxy is set
+if ($appconf['General']['proxy_handler']) {
+	$data['file'] = str_replace ('/files/', '/filemanager/proxy/', $data['file']);
+}
+
 echo $tpl->render ('filemanager/audio', $data);
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/edit/img.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/edit/img.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/edit/img.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/edit/img.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,57 @@
+<?php
+
+/**
+ * Save the changes from Aviary for an image.
+ */
+
+$this->require_admin ();
+$page->layout = false;
+header ('Content-Type: application/json');
+
+if (! isset ($_GET['file'])) {
+	echo json_encode (array (
+		'success' => false,
+		'error' => __ ('No file specified.')
+	));
+	return;
+}
+
+if (! FileManager::verify_file ($_GET['file'])) {
+	echo json_encode (array (
+		'success' => false,
+		'error' => __ ('Invalid file.')
+	));
+	return;
+}
+
+if (! isset ($_GET['url'])) {
+	echo json_encode (array (
+		'success' => false,
+		'error' => __ ('No image url specified.')
+	));
+	return;
+}
+
+$res = fetch_url ($_GET['url']);
+if (! $res) {
+	echo json_encode (array (
+		'success' => false,
+		'error' => __ ('Updated image not found.')
+	));
+	return;
+}
+
+if (! file_put_contents ('files/' . $_GET['file'], $res)) {
+	echo json_encode (array (
+		'success' => false,
+		'error' => __ ('Unable to write to the file. Please check your folder permissions and try again.')
+	));
+	return;
+}
+
+echo json_encode (array (
+	'success' => true,
+	'data' => __ ('File saved.')
+));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/edit.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/edit.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/edit.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/edit.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,38 @@
+<?php
+
+/**
+ * Edits plain text files in the file manager.
+ */
+
+$this->require_admin ();
+
+if (! isset ($_GET['file'])) {
+	$this->add_notification (__ ('No file specified.'));
+	$this->redirect ('/filemanager/index');
+}
+
+if (! FileManager::verify_file ($_GET['file'])) {
+	$this->add_notification (__ ('Invalid file.'));
+	$this->redirect ('/filemanager/index');
+}
+
+$form = new Form ('post', $this);
+
+$form->data = array (
+	'body' => file_get_contents ('files/' . $_GET['file'])
+);
+
+$page->title = __ ('Edit file') . ': ' . basename ($_GET['file']);
+$page->layout = 'admin';
+
+echo $form->handle (function ($form) {
+	if (! file_put_contents ('files/' . $_GET['file'], $_POST['body'])) {
+		$form->controller->add_notification (__ ('Unable to write to the file. Please check your folder permissions and try again.'));
+		return false;
+	}
+
+	$form->controller->add_notification (__ ('File saved.'));
+	$form->controller->redirect ('/filemanager/index');
+});
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/embed.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/embed.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -87,28 +87,28 @@
 			}
 		}
 		if ($ok < 3) {
-			echo i18n_get ('Invalid directory');
+			echo __ ('Invalid directory');
 			return;
 		}
 		if (! isset ($_POST['newName'])) {
-			echo i18n_get ('No name specified');
+			echo __ ('No name specified');
 			break;
 		}
 		if (strpos ($_POST['newName'], '..') !== false || strpos ($_POST['newName'], '/') !== false) {
-			echo i18n_get ('Invalid name');
+			echo __ ('Invalid name');
 			return;
 		}
 		$dest = ltrim ($_POST['dir'], '/') . '/' . $_POST['newName'];
 		if (file_exists ($dest)) {
-			echo i18n_get ('File already exists');
+			echo __ ('File already exists');
 			return;
 		}
 		if (! is_uploaded_file ($_FILES['handle']['tmp_name'])) {
-			echo i18n_get ('File upload failed');
+			echo __ ('File upload failed');
 			return;
 		}
 		if (! move_uploaded_file ($_FILES['handle']['tmp_name'], $dest)) {
-			echo i18n_get ('File save failed');
+			echo __ ('File save failed');
 			return;
 		}
 		echo 'File uploaded successfully';
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/gallery.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/gallery.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/gallery.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/gallery.php	2013-03-20 13:48:44.000000000 -0500
@@ -57,11 +57,22 @@
 
 // display style
 if ($data['style'] === 'lightbox') {
+	$page->add_style ('/apps/filemanager/css/gallery.css');
+	$page->add_style ('/apps/filemanager/css/colorbox/colorbox.css');
+	$page->add_script ('/apps/filemanager/js/jquery.colorbox.min.js');
+
 	$template = 'filemanager/gallery';
 } else {
 	$template = 'filemanager/gallery/embedded';
 }
 
+// rewrite if proxy is set
+if ($appconf['General']['proxy_handler']) {
+	foreach ($list as $k => $file) {
+		$list[$k]->path = str_replace ('files/', 'filemanager/proxy/', $file->path);
+	}
+}
+
 echo $tpl->render (
 	$template,
 	array (
@@ -71,4 +82,4 @@
 	)
 );
 
-?>
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/index.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,8 +16,8 @@
 
 if (isset ($_GET['path'])) {
 	if (! FileManager::verify_folder ($_GET['path'], $root)) {
-		$page->title = i18n_get ('Invalid Path');
-		echo '<p><a href="/filemanager">' . i18n_get ('Back') . '</a></p>';
+		$page->title = __ ('Invalid Path');
+		echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
 		return;
 	}
 	$o->path = trim ($_GET['path'], '/');
@@ -33,15 +33,37 @@
 		$o->parts[$part] = $joined;
 		$o->lastpath = $part;
 	}
-	$page->window_title = i18n_get ('Files') . '/' . $o->path;
+	$page->window_title = __ ('Files') . '/' . $o->path;
 } else {
 	$o->path = '';
 	$o->fullpath = $root;
 	$o->parts = array ();
 	$o->lastpath = '';
-	$page->window_title = i18n_get ('Files');
+	$page->window_title = __ ('Files');
 }
 
+if ($appconf['General']['aviary_key']) {
+	$page->add_script ('http://feather.aviary.com/js/feather.js');
+	$o->aviary_key = $appconf['General']['aviary_key'];
+} else {
+	$o->aviary_key = false;
+}
+
+$page->add_style ('/apps/filemanager/css/filemanager.css');
+$page->add_script ('/js/jquery-ui/jquery-ui.min.js');
+$page->add_script ('/js/urlify.js');
+$page->add_script ('/apps/filemanager/js/jquery.filedrop.js');
+$page->add_script ('/apps/filemanager/js/jquery.tmpl.beta1.min.js');
+$page->add_script ('/apps/filemanager/js/jquery.filemanager.js');
+$page->add_script (I18n::export (
+	'New folder name:',
+	'Rename:',
+	'Are you sure you want to delete this file?',
+	'Your browser does not support drag and drop file uploads.',
+	'Please upload fewer files at a time.',
+	'The following file is too large to upload'
+));
+
 echo $tpl->render ('filemanager/index', $o);
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/filemanager/handlers/mediaelement.php and elefant-elefant_1_3_3_beta/apps/filemanager/handlers/mediaelement.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/multi.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/multi.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/multi.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/multi.php	1969-12-31 18:00:00.000000000 -0600
@@ -1,79 +0,0 @@
-<?php
-
-/**
- * Multi-file uploader.
- */
-
-// Fetch the session from Uploadify
-if (isset ($_POST['uploadify_session_id'])) {
-	@session_set_cookie_params (time () + 2592000);
-	@session_start ();
-	$_SESSION['session_id'] = $_POST['uploadify_session_id'];
-	$_SERVER['HTTP_USER_AGENT'] = $_POST['uploadify_user_agent'];
-}
-
-// Authentication
-if (! User::require_admin ()) {
-	if (! empty ($_FILES)) {
-		header ('HTTP/1.1 405 ' . i18n_get ('Admin access required.'));
-		exit;
-	}
-	$this->redirect ('/admin');
-}
-
-$root = getcwd () . '/files/';
-$_GET['path'] = isset ($_POST['path']) ? $_POST['path'] : $_GET['path'];
-
-if (! empty ($_FILES)) {
-	// Handle uploads
-	$page->layout = false;
-
-	if (! FileManager::verify_folder ($_GET['path'], $root)) {
-		header ('HTTP/1.1 406 ' . i18n_get ('Invalid Path'));
-		exit;
-	} elseif ($_FILES['Filedata']['error'] > 0) {
-		header ('HTTP/1.1 407 ' . i18n_get ('Unknown error'));
-		exit;
-	} elseif (file_exists ($root . $_GET['path'] . '/' . $_FILES['Filedata']['name'])) {
-		header ('HTTP/1.1 408 ' . i18n_get ('A file by that name already exists.'));
-		exit;
-	} elseif (! move_uploaded_file ($_FILES['Filedata']['tmp_name'], $root . $_GET['path'] . '/' . $_FILES['Filedata']['name'])) {
-		header ('HTTP/1.1 409 ' . i18n_get ('Unable to save the file.'));
-		return;
-	}
-	// File saved
-
-	chmod ($root . $_GET['path'] . '/' . $_FILES['Filedata']['name'], 0666);
-	$this->hook ('filemanager/add', array (
-		'file' => $_POST['path'] . '/' . $_FILES['Filedata']['name']
-	));
-	echo '1';
-	return;
-}
-
-$page->layout = 'admin';
-$page->title = i18n_get ('Multi-file uploader');
-
-// Show uploader
-$o = new StdClass;
-
-$o->path = trim ($_GET['path'], '/');
-$o->fullpath = $root . $o->path;
-$tmp = explode ('/', $o->path);
-$joined = '';
-$sep = '';
-$o->parts = array ();
-$o->lastpath = '';
-foreach ($tmp as $part) {
-	$joined .= $sep . $part;
-	$sep = '/';
-	$o->parts[$part] = $joined;
-	$o->lastpath = $part;
-}
-
-$page->add_script ('/apps/filemanager/js/uploadify/swfobject.js');
-$page->add_script ('/apps/filemanager/js/uploadify/jquery.uploadify.v2.1.4.min.js');
-
-echo $tpl->render ('filemanager/multi', $o);
-
-?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/properties.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/properties.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/properties.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/properties.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,7 +11,7 @@
 $file = urldecode (join ('/', $this->params));
 
 $out = array (
-	'title' => i18n_get ('Properties'),
+	'title' => __ ('Properties'),
 	'body' => $tpl->render (
 		'filemanager/properties',
 		array (
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/proxy.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/proxy.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/proxy.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/proxy.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,25 @@
+<?php
+
+/**
+ * Acts as a proxy to intercept file requests and
+ * enable them to be served by custom handlers,
+ * to integrate with external storage solutions
+ * such as Amazon S3 or Rackspace Cloud Files.
+ * To use, edit the proxy_handler setting in
+ * the file manager app and it will automatically
+ * generate file links that are passed to the
+ * proxy.
+ */
+
+if ($appconf['General']['proxy_handler']) {
+	echo $this->run (
+		$appconf['General']['proxy_handler'],
+		array (
+			'file' => join ('/', $this->params)
+		)
+	);
+}
+
+$this->permanent_redirect ('/files/' . join ('/', $this->params));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/redactor/images.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/redactor/images.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/redactor/images.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/redactor/images.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,34 @@
+<?php
+
+/**
+ * List available images for the wysiwyg editor.
+ */
+
+$page->layout = false;
+
+$this->require_admin ();
+
+$images = array ();
+
+$glob = array (
+	glob ('files/*.{png,jpg,gif,jpeg}', GLOB_BRACE),
+	glob ('files/*/*.{png,jpg,gif,jpeg}', GLOB_BRACE),
+	glob ('files/*/*/*.{png,jpg,gif,jpeg}', GLOB_BRACE),
+	glob ('files/*/*/*/*.{png,jpg,gif,jpeg}', GLOB_BRACE)
+);
+
+foreach ($glob as $list) {
+	if (is_array ($list)) {
+		foreach ($list as $item) {
+			$images[] = array (
+				'thumb' => '/' . $item,
+				'image' => '/' . $item,
+				'folder' => str_replace ('/', ' / ', dirname ($item))
+			);
+		}
+	}
+}
+
+echo stripslashes (json_encode ($images));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/redactor/upload.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/redactor/upload.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/redactor/upload.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/redactor/upload.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,61 @@
+<?php
+
+/**
+ * Upload handler for the wysiwyg editor.
+ */
+
+$page->layout = false;
+
+$this->require_admin ();
+
+$root = getcwd () . '/files/';
+
+if (! isset ($_FILES['file'])) {
+	echo json_encode (array ('error' => __ ('File upload field not set.')));
+	return;
+}
+
+foreach ($_FILES['file']['error'] as $error) {
+	if ($error > 0) {
+		$errors = array (
+			1 => __ ('File size is too large.'),
+			2 => __ ('File size is too large.'),
+			3 => __ ('The file was only partially uploaded.'),
+			4 => __ ('No file was uploaded.'),
+			6 => __ ('Missing a temporary folder, check your PHP setup.'),
+			7 => __ ('Failed to write the file to disk.'),
+			8 => __ ('A PHP extension stopped the file upload.')
+		);
+		echo json_encode (array ('error' => $errors[$error]));
+		return;
+	}
+}
+
+if (file_exists ($root . $_FILES['file']['name'])) {
+	echo json_encode (array ('error' => __ ('File already exists') . ': ' . $_FILES['file']['name']));
+	return;
+}
+
+if (strpos ($_FILES['file']['name'], '..') !== false) {
+	echo json_encode (array ('error' => __ ('Invalid file name') . ': ' . $_FILES['file']['name']));
+	return;
+}
+
+if (@move_uploaded_file ($_FILES['file']['tmp_name'], $root . $_FILES['file']['name'])) {
+	@chmod ($root . $_FILES['file']['name'], 0666);
+	$this->hook ('filemanager/add', array (
+		'file' => '/' . $_FILES['file']['name']
+	));
+	echo stripslashes (
+		json_encode (
+			array (
+				'filelink' => '/files/' . $_FILES['file']['name'],
+				'filename' => $_FILES['file']['name']
+			)
+		)
+	);
+} else {
+	echo json_encode (array ('error' => __ ('Failed to save file') . ': ' . $_FILES['file']['name']));
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/slideshow.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/slideshow.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/slideshow.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/slideshow.php	2013-03-20 13:48:44.000000000 -0500
@@ -26,8 +26,18 @@
 	return;
 }
 
+$name = str_replace ('/', '-', $path);
+
 $files = glob ('files/' . $path . '/*.{jpg,jpeg,gif,png,JPG,JPEG,GIF,PNG}', GLOB_BRACE);
 
-echo $tpl->render ('filemanager/slideshow', array ('files' => $files));
+// rewrite if proxy is set
+if ($appconf['General']['proxy_handler']) {
+	foreach ($files as $k => $file) {
+		$files[$k] = str_replace ('files/', 'filemanager/proxy/', $file);
+	}
+}
+
+$page->add_script ('/apps/filemanager/js/jquery.cycle.all.min.js');
+echo $tpl->render ('filemanager/slideshow', array ('files' => $files, 'name' => $name));
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/swf.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/swf.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/swf.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/swf.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,6 +7,11 @@
 
 $data['div'] = preg_replace ('/[^a-zA-Z0-9-]+/', '-', trim ($data['file'], '/'));
 
+// rewrite if proxy is set
+if ($appconf['General']['proxy_handler']) {
+	$data['file'] = str_replace ('/files/', '/filemanager/proxy/', $data['file']);
+}
+
 echo $tpl->render ('filemanager/swf', $data);
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/upgrade.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/upgrade.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/upgrade.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/upgrade.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,18 +5,18 @@
 $this->require_admin ();
 
 if ($this->installed ('filemanager', $appconf['Admin']['version']) === true) {
-	$page->title = i18n_get ('Upgrade completed');
-	echo '<p><a href="/filemanager/index">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Upgrade completed');
+	echo '<p><a href="/filemanager/index">' . __ ('Continue') . '</a></p>';
 	return;
 }
 
-$page->title = i18n_get ('Upgrading Files App');
+$page->title = __ ('Upgrading Files App');
 
 $db = DB::get_connection (1);
 $dbtype = $db->getAttribute (PDO::ATTR_DRIVER_NAME);
 switch ($dbtype) {
 	case 'mysql':
-		DB::execute ('create table filemanager_prop (
+		DB::execute ('create table #prefix#filemanager_prop (
 			file char(128) not null primary key,
 			prop char(32) not null,
 			value char(255) not null,
@@ -25,15 +25,15 @@
 		break;
 	case 'pgsql':
 	case 'sqlite':
-		DB::execute ('create table filemanager_prop (
+		DB::execute ('create table #prefix#filemanager_prop (
 			file char(128) not null primary key,
 			prop char(32) not null,
 			value char(255) not null
 		)');
-		DB::execute ('create index filemanager_prop_name on filemanager_prop (prop)');
+		DB::execute ('create index #prefix#filemanager_prop_name on #prefix#filemanager_prop (prop)');
 		break;
 }
-echo '<p>' . i18n_get ('Done.') . '</p>';
+echo '<p>' . __ ('Done.') . '</p>';
 
 $this->mark_installed ('filemanager', $appconf['Admin']['version']);
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/upload/drop.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/upload/drop.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/upload/drop.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/upload/drop.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,61 @@
+<?php
+
+/**
+ * Upload handler for the filemanager/util/browser dialog.
+ */
+
+$page->layout = false;
+
+if (! User::require_admin ()) {
+	echo json_encode (array ('success' => false, 'error' => __ ('Must be logged in to upload')));
+	return;
+}
+
+$root = getcwd () . '/files/';
+
+if (! FileManager::verify_folder ($_POST['path'], $root)) {
+	echo json_encode (array ('success' => false, 'error' => __ ('Invalid path')));
+	return;
+}
+
+if (! isset ($_FILES['file'])) {
+	echo json_encode (array ('success' => false, 'error' => __ ('No file uploaded or file too large.')));
+	return;
+}
+
+if (isset ($_FILES['file']['error']) && $_FILES['file']['error'] > 0) {
+	$errors = array (
+		1 => __ ('File size is too large.'),
+		2 => __ ('File size is too large.'),
+		3 => __ ('The file was only partially uploaded.'),
+		4 => __ ('No file was uploaded.'),
+		6 => __ ('Missing a temporary folder, check your PHP setup.'),
+		7 => __ ('Failed to write the file to disk.'),
+		8 => __ ('A PHP extension stopped the file upload.')
+	);
+	echo json_encode (array ('success' => false, 'error' => $errors[$_FILES['file']['error']]));
+	return;
+}
+
+if (@file_exists ($root . $_POST['path'] . '/' . $_FILES['file']['name'])) {
+	echo json_encode (array ('success' => false, 'error' => __ ('A file by that name already exists.')));
+	return;
+}
+if (strpos ($_FILES['file']['name'], '..') !== false) {
+	echo json_encode (array ('success' => false, 'error' => __ ('The file name contains invalid characters.')));
+	return;
+}
+
+if (@move_uploaded_file ($_FILES['file']['tmp_name'], $root . $_POST['path'] . '/' . $_FILES['file']['name'])) {
+	@chmod ($root . $_POST['path'] . '/' . $_FILES['file']['name'], 0666);
+	$this->hook ('filemanager/add', array (
+		'file' => $_POST['path'] . '/' . $_FILES['file']['name']
+	));
+} else {
+	echo json_encode (array ('success' => false, 'error' => __ ('Unable to save the file') . ': ' . $_FILES['file']['name']));
+	return;
+}
+
+echo json_encode (array ('success' => true, 'data' => __ ('File saved.')));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/upload.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/upload.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/upload.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/upload.php	2013-03-20 13:48:44.000000000 -0500
@@ -13,41 +13,47 @@
 $root = getcwd () . '/files/';
 
 if (! FileManager::verify_folder ($_POST['path'], $root)) {
-	$page->title = i18n_get ('Invalid Path');
-	echo '<p><a href="/filemanager">' . i18n_get ('Back') . '</a></p>';
+	$page->title = __ ('Invalid Path');
+	echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
 	return;
 }
 
 if (! isset ($_FILES['file'])) {
-	$page->title = i18n_get ('An Error Occurred');
-	echo '<p>' . i18n_get ('No file uploaded or file too large.') . '</p>';
-	echo '<p><a href="/filemanager">' . i18n_get ('Back') . '</a></p>';
+	$page->title = __ ('An Error Occurred');
+	echo '<p>' . __ ('No file uploaded or file too large.') . '</p>';
+	echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
 	return;
 }
 
 foreach ($_FILES['file']['error'] as $error) {
 	if ($error > 0) {
 		$errors = array (
-			1 => i18n_get ('File size is too large.'),
-			2 => i18n_get ('File size is too large.'),
-			3 => i18n_get ('The file was only partially uploaded.'),
-			4 => i18n_get ('No file was uploaded.'),
-			6 => i18n_get ('Missing a temporary folder, check your PHP setup.'),
-			7 => i18n_get ('Failed to write the file to disk.'),
-			8 => i18n_get ('A PHP extension stopped the file upload.')
+			1 => __ ('File size is too large.'),
+			2 => __ ('File size is too large.'),
+			3 => __ ('The file was only partially uploaded.'),
+			4 => __ ('No file was uploaded.'),
+			6 => __ ('Missing a temporary folder, check your PHP setup.'),
+			7 => __ ('Failed to write the file to disk.'),
+			8 => __ ('A PHP extension stopped the file upload.')
 		);
-		$page->title = i18n_get ('An Error Occurred');
-		echo '<p>' . i18n_get ('Error message') . ': ' . $errors[$error] . '</p>';
-		echo '<p><a href="/filemanager">' . i18n_get ('Back') . '</a></p>';
+		$page->title = __ ('An Error Occurred');
+		echo '<p>' . __ ('Error message') . ': ' . $errors[$error] . '</p>';
+		echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
 		return;
 	}
 }
 
 for ($i = 0; $i < count ($_FILES['file']['name']); $i++) {
 	if (@file_exists ($root . $_POST['path'] . '/' . $_FILES['file']['name'][$i])) {
-		$page->title = i18n_get ('File Already Exists') . ': ' . $_FILES['file']['name'][$i];
-		echo '<p>' . i18n_get ('A file by that name already exists.') . '</p>';
-		echo '<p><a href="/filemanager">' . i18n_get ('Back') . '</a></p>';
+		$page->title = __ ('File Already Exists') . ': ' . $_FILES['file']['name'][$i];
+		echo '<p>' . __ ('A file by that name already exists.') . '</p>';
+		echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
+		return;
+	}
+	if (strpos ($_FILES['file']['name'][$i], '..') !== false) {
+		$page->title = __ ('Invalid File Name') . ': ' . $_FILES['file']['name'][$i];
+		echo '<p>' . __ ('The file name contains invalid characters.') . '</p>';
+		echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
 		return;
 	}
 }
@@ -68,12 +74,12 @@
 
 if (count ($_FILES['file']) > 1) {
 	if (count ($_FILES['file']['name']) === $count) {
-		$this->add_notification (i18n_getf ('%d files saved.', $count));
+		$this->add_notification (__ ('%d files saved.', $count));
 	} else {
-		$this->add_notification (i18n_getf ('%d file saved. Unable to save files: %s', $count, join (', ', $errors)));
+		$this->add_notification (__ ('%d file saved. Unable to save files: %s', $count, join (', ', $errors)));
 	}
 } else {
-	$this->add_notification (i18n_get ('File saved.'));
+	$this->add_notification (__ ('File saved.'));
 }
 $this->redirect ('/filemanager?path=' . $_POST['path']);
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/util/browser.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/util/browser.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/util/browser.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/util/browser.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,66 @@
+<?php
+
+/**
+ * Provides a modal dialog to browse for files.
+ *
+ * Usage:
+ *
+ * 1. Load this handler either in your handler:
+ *
+ *     $this->run ('filemanager/util/browser');
+ *
+ * Or anywhere in your view:
+ *
+ *      {! filemanager/util/browser !}
+ *
+ * 2. Use the $.filebrowser() function to open the dialog window:
+ *
+ *      $.filebrowser ({
+ *          allowed: ['jpg', 'jpeg', 'png', 'gif'],
+ *          set_value: '#field-id',
+ *          title: 'Choose an image',
+ *          thumbs: true,
+ *          callback: function (file) {
+ *              console.log ('You chose: '  + file);
+ *          }
+ *     });
+ *
+ * Options:
+ *
+ * - allowed:   An array of allowed file extensions.
+ * - callback:  A function to call with the chosen file link.
+ * - set_value: The selector of an input field to update with the
+ *   chosen file link.
+ * - thumbs:    Whether to show thumbnails instead of file names.
+ *   Note: also automatically sets allowed list to jpeg, png, and
+ *   gif formats so you don't have to set allowed explicitly.
+ * - title:     A custom title for the dialog window.
+ */
+
+$this->run ('admin/util/modal');
+
+$page->add_style ('/apps/filemanager/css/filebrowser.css');
+$page->add_script ('/apps/filemanager/js/jquery.filedrop.js');
+$page->add_script ('/apps/filemanager/js/filemanager.js');
+$page->add_script ('/apps/filemanager/js/jquery.filebrowser.js');
+$page->add_script (
+	sprintf (
+		'<script>var filebrowser_max_filesize = %s;</script>',
+		(int) ini_get ('upload_max_filesize')
+	)
+);
+$page->add_script (
+	I18n::export (
+		array (
+			'Choose a file',
+			'New file',
+			'Please upload one of the following file types',
+			'Your browser does not support drag and drop file uploads.',
+			'Please upload fewer files at a time.',
+			'The following file is too large to upload',
+			'Uploading...'
+		)
+	)
+);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/util/multi-file.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/util/multi-file.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/util/multi-file.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/util/multi-file.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,55 @@
+<?php
+
+/**
+ * Provides a multi-file selector based on the file browser
+ * from filemanager/util/browser.
+ *
+ * Usage:
+ *
+ * 1. Load this handler either in your handler:
+ *
+ *     $this->run ('filemanager/util/multi-file');
+ *
+ * Or anywhere in your view:
+ *
+ *     {! filemanager/util/multi-file !}
+ *
+ * 2. Create the HTML elements for the input field and the
+ * preview area:
+ *
+ *     <p>
+ *         {"Attach files"}:
+ *         <div id="preview"></div>
+ *         <input type="hidden" name="files" id="files" />
+ *     </p>
+ *
+ * 3. Use the $.multi_file() function to initialize the plugin:
+ *
+ *     $.multi_image ({
+ *         field: '#files',
+ *         preview: '#preview'
+ *     });
+ *
+ * This helper stores the list of files in the following format
+ * in the input field, so you can easily split them into an array:
+ *
+ *     /files/file1.txt|/files/file2.doc|/files/file3.txt
+ *
+ * Options:
+ *
+ * - field:   The selector of an input field to update with the list.
+ * - preview: The selector of an element to use to contain the list preview.
+ */
+
+$this->run ('filemanager/util/browser');
+$this->run ('admin/util/fontawesome');
+
+$page->add_style ('/apps/filemanager/css/multi-file.css');
+$page->add_script ('/js/jquery-ui/jquery-ui.min.js');
+$page->add_script ('/apps/filemanager/js/jquery.multi-file.js');
+$page->add_script (I18n::export (
+	'Click to remove',
+	'Browse files'
+));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/util/multi-image.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/util/multi-image.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/util/multi-image.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/util/multi-image.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,54 @@
+<?php
+
+/**
+ * Provides a multi-image selector based on the image browser
+ * from filemanager/util/browser.
+ *
+ * Usage:
+ *
+ * 1. Load this handler either in your handler:
+ *
+ *     $this->run ('filemanager/util/multi-image');
+ *
+ * Or anywhere in your view:
+ *
+ *     {! filemanager/util/multi-image !}
+ *
+ * 2. Create the HTML elements for the input field and the
+ * preview area:
+ *
+ *     <p>
+ *         {"Attach images"}:
+ *         <div id="preview"></div>
+ *         <input type="hidden" name="images" id="images" />
+ *     </p>
+ *
+ * 3. Use the $.multi_image() function to initialize the plugin:
+ *
+ *     $.multi_image ({
+ *         field: '#images',
+ *         preview: '#preview'
+ *     });
+ *
+ * This helper stores the list of images in the following format
+ * in the input field, so you can easily split them into an array:
+ *
+ *     /files/file1.jpg|/files/file2.jpg|/files/file3.png
+ *
+ * Options:
+ *
+ * - field:   The selector of an input field to update with the list.
+ * - preview: The selector of an element to use to contain the list preview.
+ */
+
+$this->run ('filemanager/util/browser');
+
+$page->add_style ('/apps/filemanager/css/multi-image.css');
+$page->add_script ('/js/jquery-ui/jquery-ui.min.js');
+$page->add_script ('/apps/filemanager/js/jquery.multi-image.js');
+$page->add_script (I18n::export (
+	'Click to remove, drag to re-order',
+	'Browse images'
+));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/handlers/video.php elefant-elefant_1_3_3_beta/apps/filemanager/handlers/video.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/handlers/video.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/handlers/video.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,6 +11,11 @@
 
 $data['div'] = preg_replace ('/[^a-zA-Z0-9-]+/', '-', trim ($data['file'], '/'));
 
+// rewrite if proxy is set
+if ($appconf['General']['proxy_handler']) {
+	$data['file'] = str_replace ('/files/', '/filemanager/proxy/', $data['file']);
+}
+
 echo $tpl->render ('filemanager/video', $data);
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/filemanager/js/expressInstall.swf and elefant-elefant_1_3_3_beta/apps/filemanager/js/expressInstall.swf are identical
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/blank.gif and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/blank.gif differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_close.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_close.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_loading.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_loading.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_nav_left.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_nav_left.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_nav_right.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_nav_right.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_e.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_e.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_n.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_n.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_ne.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_ne.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_nw.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_nw.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_s.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_s.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_se.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_se.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_sw.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_sw.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_shadow_w.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_shadow_w.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_title_left.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_title_left.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_title_main.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_title_main.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_title_over.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_title_over.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancy_title_right.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancy_title_right.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancybox-x.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancybox-x.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancybox-y.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancybox-y.png differ
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/fancybox.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/fancybox.png differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.easing-1.3.pack.js elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.easing-1.3.pack.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.easing-1.3.pack.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.easing-1.3.pack.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,72 +0,0 @@
-/*
- * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
- *
- * Uses the built in easing capabilities added In jQuery 1.1
- * to offer multiple easing options
- *
- * TERMS OF USE - jQuery Easing
- * 
- * Open source under the BSD License. 
- * 
- * Copyright © 2008 George McGinley Smith
- * All rights reserved.
- * 
- * Redistribution and use in source and binary forms, with or without modification, 
- * are permitted provided that the following conditions are met:
- * 
- * Redistributions of source code must retain the above copyright notice, this list of 
- * conditions and the following disclaimer.
- * Redistributions in binary form must reproduce the above copyright notice, this list 
- * of conditions and the following disclaimer in the documentation and/or other materials 
- * provided with the distribution.
- * 
- * Neither the name of the author nor the names of contributors may be used to endorse 
- * or promote products derived from this software without specific prior written permission.
- * 
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
- * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
- * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
- *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
- *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
- * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
- *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
- * OF THE POSSIBILITY OF SUCH DAMAGE. 
- *
-*/
-
-// t: current time, b: begInnIng value, c: change In value, d: duration
-eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('h.i[\'1a\']=h.i[\'z\'];h.O(h.i,{y:\'D\',z:9(x,t,b,c,d){6 h.i[h.i.y](x,t,b,c,d)},17:9(x,t,b,c,d){6 c*(t/=d)*t+b},D:9(x,t,b,c,d){6-c*(t/=d)*(t-2)+b},13:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t+b;6-c/2*((--t)*(t-2)-1)+b},X:9(x,t,b,c,d){6 c*(t/=d)*t*t+b},U:9(x,t,b,c,d){6 c*((t=t/d-1)*t*t+1)+b},R:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t*t+b;6 c/2*((t-=2)*t*t+2)+b},N:9(x,t,b,c,d){6 c*(t/=d)*t*t*t+b},M:9(x,t,b,c,d){6-c*((t=t/d-1)*t*t*t-1)+b},L:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t*t*t+b;6-c/2*((t-=2)*t*t*t-2)+b},K:9(x,t,b,c,d){6 c*(t/=d)*t*t*t*t+b},J:9(x,t,b,c,d){6 c*((t=t/d-1)*t*t*t*t+1)+b},I:9(x,t,b,c,d){e((t/=d/2)<1)6 c/2*t*t*t*t*t+b;6 c/2*((t-=2)*t*t*t*t+2)+b},G:9(x,t,b,c,d){6-c*8.C(t/d*(8.g/2))+c+b},15:9(x,t,b,c,d){6 c*8.n(t/d*(8.g/2))+b},12:9(x,t,b,c,d){6-c/2*(8.C(8.g*t/d)-1)+b},Z:9(x,t,b,c,d){6(t==0)?b:c*8.j(2,10*(t/d-1))+b},Y:9(x,t,b,c,d){6(t==d)?b+c:c*(-8.j(2,-10*t/d)+1)+b},W:9(x,t,b,c,d){e(t==0)6 b;e(t==d)6 b+c;e((t/=d/2)<1)6 c/2*8.j(2,10*(t-1))+b;6 c/2*(-8.j(2,-10*--t)+2)+b},V:9(x,t,b,c,d){6-c*(8.o(1-(t/=d)*t)-1)+b},S:9(x,t,b,c,d){6 c*8.o(1-(t=t/d-1)*t)+b},Q:9(x,t,b,c,d){e((t/=d/2)<1)6-c/2*(8.o(1-t*t)-1)+b;6 c/2*(8.o(1-(t-=2)*t)+1)+b},P:9(x,t,b,c,d){f s=1.l;f p=0;f a=c;e(t==0)6 b;e((t/=d)==1)6 b+c;e(!p)p=d*.3;e(a<8.w(c)){a=c;f s=p/4}m f s=p/(2*8.g)*8.r(c/a);6-(a*8.j(2,10*(t-=1))*8.n((t*d-s)*(2*8.g)/p))+b},H:9(x,t,b,c,d){f s=1.l;f p=0;f a=c;e(t==0)6 b;e((t/=d)==1)6 b+c;e(!p)p=d*.3;e(a<8.w(c)){a=c;f s=p/4}m f s=p/(2*8.g)*8.r(c/a);6 a*8.j(2,-10*t)*8.n((t*d-s)*(2*8.g)/p)+c+b},T:9(x,t,b,c,d){f s=1.l;f p=0;f a=c;e(t==0)6 b;e((t/=d/2)==2)6 b+c;e(!p)p=d*(.3*1.5);e(a<8.w(c)){a=c;f s=p/4}m f s=p/(2*8.g)*8.r(c/a);e(t<1)6-.5*(a*8.j(2,10*(t-=1))*8.n((t*d-s)*(2*8.g)/p))+b;6 a*8.j(2,-10*(t-=1))*8.n((t*d-s)*(2*8.g)/p)*.5+c+b},F:9(x,t,b,c,d,s){e(s==u)s=1.l;6 c*(t/=d)*t*((s+1)*t-s)+b},E:9(x,t,b,c,d,s){e(s==u)s=1.l;6 c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},16:9(x,t,b,c,d,s){e(s==u)s=1.l;e((t/=d/2)<1)6 c/2*(t*t*(((s*=(1.B))+1)*t-s))+b;6 c/2*((t-=2)*t*(((s*=(1.B))+1)*t+s)+2)+b},A:9(x,t,b,c,d){6 c-h.i.v(x,d-t,0,c,d)+b},v:9(x,t,b,c,d){e((t/=d)<(1/2.k)){6 c*(7.q*t*t)+b}m e(t<(2/2.k)){6 c*(7.q*(t-=(1.5/2.k))*t+.k)+b}m e(t<(2.5/2.k)){6 c*(7.q*(t-=(2.14/2.k))*t+.11)+b}m{6 c*(7.q*(t-=(2.18/2.k))*t+.19)+b}},1b:9(x,t,b,c,d){e(t<d/2)6 h.i.A(x,t*2,0,c,d)*.5+b;6 h.i.v(x,t*2-d,0,c,d)*.5+c*.5+b}});',62,74,'||||||return||Math|function|||||if|var|PI|jQuery|easing|pow|75|70158|else|sin|sqrt||5625|asin|||undefined|easeOutBounce|abs||def|swing|easeInBounce|525|cos|easeOutQuad|easeOutBack|easeInBack|easeInSine|easeOutElastic|easeInOutQuint|easeOutQuint|easeInQuint|easeInOutQuart|easeOutQuart|easeInQuart|extend|easeInElastic|easeInOutCirc|easeInOutCubic|easeOutCirc|easeInOutElastic|easeOutCubic|easeInCirc|easeInOutExpo|easeInCubic|easeOutExpo|easeInExpo||9375|easeInOutSine|easeInOutQuad|25|easeOutSine|easeInOutBack|easeInQuad|625|984375|jswing|easeInOutBounce'.split('|'),0,{}))
-
-/*
- *
- * TERMS OF USE - EASING EQUATIONS
- * 
- * Open source under the BSD License. 
- * 
- * Copyright © 2001 Robert Penner
- * All rights reserved.
- * 
- * Redistribution and use in source and binary forms, with or without modification, 
- * are permitted provided that the following conditions are met:
- * 
- * Redistributions of source code must retain the above copyright notice, this list of 
- * conditions and the following disclaimer.
- * Redistributions in binary form must reproduce the above copyright notice, this list 
- * of conditions and the following disclaimer in the documentation and/or other materials 
- * provided with the distribution.
- * 
- * Neither the name of the author nor the names of contributors may be used to endorse 
- * or promote products derived from this software without specific prior written permission.
- * 
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
- * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
- * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
- *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
- *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
- *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
- * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
- *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
- * OF THE POSSIBILITY OF SUCH DAMAGE. 
- *
- */
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.css elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.css	1969-12-31 18:00:00.000000000 -0600
@@ -1,359 +0,0 @@
-/*
- * FancyBox - jQuery Plugin
- * Simple and fancy lightbox alternative
- *
- * Examples and documentation at: http://fancybox.net
- * 
- * Copyright (c) 2008 - 2010 Janis Skarnelis
- * That said, it is hardly a one-person project. Many people have submitted bugs, code, and offered their advice freely. Their support is greatly appreciated.
- * 
- * Version: 1.3.4 (11/11/2010)
- * Requires: jQuery v1.3+
- *
- * Dual licensed under the MIT and GPL licenses:
- *   http://www.opensource.org/licenses/mit-license.php
- *   http://www.gnu.org/licenses/gpl.html
- */
-
-#fancybox-loading {
-	position: fixed;
-	top: 50%;
-	left: 50%;
-	width: 40px;
-	height: 40px;
-	margin-top: -20px;
-	margin-left: -20px;
-	cursor: pointer;
-	overflow: hidden;
-	z-index: 1104;
-	display: none;
-}
-
-#fancybox-loading div {
-	position: absolute;
-	top: 0;
-	left: 0;
-	width: 40px;
-	height: 480px;
-	background-image: url('fancybox.png');
-}
-
-#fancybox-overlay {
-	position: absolute;
-	top: 0;
-	left: 0;
-	width: 100%;
-	z-index: 1100;
-	display: none;
-}
-
-#fancybox-tmp {
-	padding: 0;
-	margin: 0;
-	border: 0;
-	overflow: auto;
-	display: none;
-}
-
-#fancybox-wrap {
-	position: absolute;
-	top: 0;
-	left: 0;
-	padding: 20px;
-	z-index: 1101;
-	outline: none;
-	display: none;
-}
-
-#fancybox-outer {
-	position: relative;
-	width: 100%;
-	height: 100%;
-	background: #fff;
-}
-
-#fancybox-content {
-	width: 0;
-	height: 0;
-	padding: 0;
-	outline: none;
-	position: relative;
-	overflow: hidden;
-	z-index: 1102;
-	border: 0px solid #fff;
-}
-
-#fancybox-hide-sel-frame {
-	position: absolute;
-	top: 0;
-	left: 0;
-	width: 100%;
-	height: 100%;
-	background: transparent;
-	z-index: 1101;
-}
-
-#fancybox-close {
-	position: absolute;
-	top: -15px;
-	right: -15px;
-	width: 30px;
-	height: 30px;
-	background: transparent url('fancybox.png') -40px 0px;
-	cursor: pointer;
-	z-index: 1103;
-	display: none;
-}
-
-#fancybox-error {
-	color: #444;
-	font: normal 12px/20px Arial;
-	padding: 14px;
-	margin: 0;
-}
-
-#fancybox-img {
-	width: 100%;
-	height: 100%;
-	padding: 0;
-	margin: 0;
-	border: none;
-	outline: none;
-	line-height: 0;
-	vertical-align: top;
-}
-
-#fancybox-frame {
-	width: 100%;
-	height: 100%;
-	border: none;
-	display: block;
-}
-
-#fancybox-left, #fancybox-right {
-	position: absolute;
-	bottom: 0px;
-	height: 100%;
-	width: 35%;
-	cursor: pointer;
-	outline: none;
-	background: transparent url('blank.gif');
-	z-index: 1102;
-	display: none;
-}
-
-#fancybox-left {
-	left: 0px;
-}
-
-#fancybox-right {
-	right: 0px;
-}
-
-#fancybox-left-ico, #fancybox-right-ico {
-	position: absolute;
-	top: 50%;
-	left: -9999px;
-	width: 30px;
-	height: 30px;
-	margin-top: -15px;
-	cursor: pointer;
-	z-index: 1102;
-	display: block;
-}
-
-#fancybox-left-ico {
-	background-image: url('fancybox.png');
-	background-position: -40px -30px;
-}
-
-#fancybox-right-ico {
-	background-image: url('fancybox.png');
-	background-position: -40px -60px;
-}
-
-#fancybox-left:hover, #fancybox-right:hover {
-	visibility: visible; /* IE6 */
-}
-
-#fancybox-left:hover span {
-	left: 20px;
-}
-
-#fancybox-right:hover span {
-	left: auto;
-	right: 20px;
-}
-
-.fancybox-bg {
-	position: absolute;
-	padding: 0;
-	margin: 0;
-	border: 0;
-	width: 20px;
-	height: 20px;
-	z-index: 1001;
-}
-
-#fancybox-bg-n {
-	top: -20px;
-	left: 0;
-	width: 100%;
-	background-image: url('fancybox-x.png');
-}
-
-#fancybox-bg-ne {
-	top: -20px;
-	right: -20px;
-	background-image: url('fancybox.png');
-	background-position: -40px -162px;
-}
-
-#fancybox-bg-e {
-	top: 0;
-	right: -20px;
-	height: 100%;
-	background-image: url('fancybox-y.png');
-	background-position: -20px 0px;
-}
-
-#fancybox-bg-se {
-	bottom: -20px;
-	right: -20px;
-	background-image: url('fancybox.png');
-	background-position: -40px -182px; 
-}
-
-#fancybox-bg-s {
-	bottom: -20px;
-	left: 0;
-	width: 100%;
-	background-image: url('fancybox-x.png');
-	background-position: 0px -20px;
-}
-
-#fancybox-bg-sw {
-	bottom: -20px;
-	left: -20px;
-	background-image: url('fancybox.png');
-	background-position: -40px -142px;
-}
-
-#fancybox-bg-w {
-	top: 0;
-	left: -20px;
-	height: 100%;
-	background-image: url('fancybox-y.png');
-}
-
-#fancybox-bg-nw {
-	top: -20px;
-	left: -20px;
-	background-image: url('fancybox.png');
-	background-position: -40px -122px;
-}
-
-#fancybox-title {
-	font-family: Helvetica;
-	font-size: 12px;
-	z-index: 1102;
-}
-
-.fancybox-title-inside {
-	padding-bottom: 10px;
-	text-align: center;
-	color: #333;
-	background: #fff;
-	position: relative;
-}
-
-.fancybox-title-outside {
-	padding-top: 10px;
-	color: #fff;
-}
-
-.fancybox-title-over {
-	position: absolute;
-	bottom: 0;
-	left: 0;
-	color: #FFF;
-	text-align: left;
-}
-
-#fancybox-title-over {
-	padding: 10px;
-	background-image: url('fancy_title_over.png');
-	display: block;
-}
-
-.fancybox-title-float {
-	position: absolute;
-	left: 0;
-	bottom: -20px;
-	height: 32px;
-}
-
-#fancybox-title-float-wrap {
-	border: none;
-	border-collapse: collapse;
-	width: auto;
-}
-
-#fancybox-title-float-wrap td {
-	border: none;
-	white-space: nowrap;
-}
-
-#fancybox-title-float-left {
-	padding: 0 0 0 15px;
-	background: url('fancybox.png') -40px -90px no-repeat;
-}
-
-#fancybox-title-float-main {
-	color: #FFF;
-	line-height: 29px;
-	font-weight: bold;
-	padding: 0 0 3px 0;
-	background: url('fancybox-x.png') 0px -40px;
-}
-
-#fancybox-title-float-right {
-	padding: 0 0 0 15px;
-	background: url('fancybox.png') -55px -90px no-repeat;
-}
-
-/* IE6 */
-
-.fancybox-ie6 #fancybox-close { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_close.png', sizingMethod='scale'); }
-
-.fancybox-ie6 #fancybox-left-ico { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_nav_left.png', sizingMethod='scale'); }
-.fancybox-ie6 #fancybox-right-ico { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_nav_right.png', sizingMethod='scale'); }
-
-.fancybox-ie6 #fancybox-title-over { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_over.png', sizingMethod='scale'); zoom: 1; }
-.fancybox-ie6 #fancybox-title-float-left { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_left.png', sizingMethod='scale'); }
-.fancybox-ie6 #fancybox-title-float-main { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_main.png', sizingMethod='scale'); }
-.fancybox-ie6 #fancybox-title-float-right { background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_title_right.png', sizingMethod='scale'); }
-
-.fancybox-ie6 #fancybox-bg-w, .fancybox-ie6 #fancybox-bg-e, .fancybox-ie6 #fancybox-left, .fancybox-ie6 #fancybox-right, #fancybox-hide-sel-frame {
-	height: expression(this.parentNode.clientHeight + "px");
-}
-
-#fancybox-loading.fancybox-ie6 {
-	position: absolute; margin-top: 0;
-	top: expression( (-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px');
-}
-
-#fancybox-loading.fancybox-ie6 div	{ background: transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_loading.png', sizingMethod='scale'); }
-
-/* IE6, IE7, IE8 */
-
-.fancybox-ie .fancybox-bg { background: transparent !important; }
-
-.fancybox-ie #fancybox-bg-n { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_n.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-ne { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_ne.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-e { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_e.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-se { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_se.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-s { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_s.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-sw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_sw.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-w { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_w.png', sizingMethod='scale'); }
-.fancybox-ie #fancybox-bg-nw { filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='fancybox/fancy_shadow_nw.png', sizingMethod='scale'); }
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.js elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,1156 +0,0 @@
-/*
- * FancyBox - jQuery Plugin
- * Simple and fancy lightbox alternative
- *
- * Examples and documentation at: http://fancybox.net
- *
- * Copyright (c) 2008 - 2010 Janis Skarnelis
- * That said, it is hardly a one-person project. Many people have submitted bugs, code, and offered their advice freely. Their support is greatly appreciated.
- *
- * Version: 1.3.4 (11/11/2010)
- * Requires: jQuery v1.3+
- *
- * Dual licensed under the MIT and GPL licenses:
- *   http://www.opensource.org/licenses/mit-license.php
- *   http://www.gnu.org/licenses/gpl.html
- */
-
-;(function($) {
-	var tmp, loading, overlay, wrap, outer, content, close, title, nav_left, nav_right,
-
-		selectedIndex = 0, selectedOpts = {}, selectedArray = [], currentIndex = 0, currentOpts = {}, currentArray = [],
-
-		ajaxLoader = null, imgPreloader = new Image(), imgRegExp = /\.(jpg|gif|png|bmp|jpeg)(.*)?$/i, swfRegExp = /[^\.]\.(swf)\s*$/i,
-
-		loadingTimer, loadingFrame = 1,
-
-		titleHeight = 0, titleStr = '', start_pos, final_pos, busy = false, fx = $.extend($('<div/>')[0], { prop: 0 }),
-
-		isIE6 = $.browser.msie && $.browser.version < 7 && !window.XMLHttpRequest,
-
-		/*
-		 * Private methods 
-		 */
-
-		_abort = function() {
-			loading.hide();
-
-			imgPreloader.onerror = imgPreloader.onload = null;
-
-			if (ajaxLoader) {
-				ajaxLoader.abort();
-			}
-
-			tmp.empty();
-		},
-
-		_error = function() {
-			if (false === selectedOpts.onError(selectedArray, selectedIndex, selectedOpts)) {
-				loading.hide();
-				busy = false;
-				return;
-			}
-
-			selectedOpts.titleShow = false;
-
-			selectedOpts.width = 'auto';
-			selectedOpts.height = 'auto';
-
-			tmp.html( '<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>' );
-
-			_process_inline();
-		},
-
-		_start = function() {
-			var obj = selectedArray[ selectedIndex ],
-				href, 
-				type, 
-				title,
-				str,
-				emb,
-				ret;
-
-			_abort();
-
-			selectedOpts = $.extend({}, $.fn.fancybox.defaults, (typeof $(obj).data('fancybox') == 'undefined' ? selectedOpts : $(obj).data('fancybox')));
-
-			ret = selectedOpts.onStart(selectedArray, selectedIndex, selectedOpts);
-
-			if (ret === false) {
-				busy = false;
-				return;
-			} else if (typeof ret == 'object') {
-				selectedOpts = $.extend(selectedOpts, ret);
-			}
-
-			title = selectedOpts.title || (obj.nodeName ? $(obj).attr('title') : obj.title) || '';
-
-			if (obj.nodeName && !selectedOpts.orig) {
-				selectedOpts.orig = $(obj).children("img:first").length ? $(obj).children("img:first") : $(obj);
-			}
-
-			if (title === '' && selectedOpts.orig && selectedOpts.titleFromAlt) {
-				title = selectedOpts.orig.attr('alt');
-			}
-
-			href = selectedOpts.href || (obj.nodeName ? $(obj).attr('href') : obj.href) || null;
-
-			if ((/^(?:javascript)/i).test(href) || href == '#') {
-				href = null;
-			}
-
-			if (selectedOpts.type) {
-				type = selectedOpts.type;
-
-				if (!href) {
-					href = selectedOpts.content;
-				}
-
-			} else if (selectedOpts.content) {
-				type = 'html';
-
-			} else if (href) {
-				if (href.match(imgRegExp)) {
-					type = 'image';
-
-				} else if (href.match(swfRegExp)) {
-					type = 'swf';
-
-				} else if ($(obj).hasClass("iframe")) {
-					type = 'iframe';
-
-				} else if (href.indexOf("#") === 0) {
-					type = 'inline';
-
-				} else {
-					type = 'ajax';
-				}
-			}
-
-			if (!type) {
-				_error();
-				return;
-			}
-
-			if (type == 'inline') {
-				obj	= href.substr(href.indexOf("#"));
-				type = $(obj).length > 0 ? 'inline' : 'ajax';
-			}
-
-			selectedOpts.type = type;
-			selectedOpts.href = href;
-			selectedOpts.title = title;
-
-			if (selectedOpts.autoDimensions) {
-				if (selectedOpts.type == 'html' || selectedOpts.type == 'inline' || selectedOpts.type == 'ajax') {
-					selectedOpts.width = 'auto';
-					selectedOpts.height = 'auto';
-				} else {
-					selectedOpts.autoDimensions = false;	
-				}
-			}
-
-			if (selectedOpts.modal) {
-				selectedOpts.overlayShow = true;
-				selectedOpts.hideOnOverlayClick = false;
-				selectedOpts.hideOnContentClick = false;
-				selectedOpts.enableEscapeButton = false;
-				selectedOpts.showCloseButton = false;
-			}
-
-			selectedOpts.padding = parseInt(selectedOpts.padding, 10);
-			selectedOpts.margin = parseInt(selectedOpts.margin, 10);
-
-			tmp.css('padding', (selectedOpts.padding + selectedOpts.margin));
-
-			$('.fancybox-inline-tmp').unbind('fancybox-cancel').bind('fancybox-change', function() {
-				$(this).replaceWith(content.children());				
-			});
-
-			switch (type) {
-				case 'html' :
-					tmp.html( selectedOpts.content );
-					_process_inline();
-				break;
-
-				case 'inline' :
-					if ( $(obj).parent().is('#fancybox-content') === true) {
-						busy = false;
-						return;
-					}
-
-					$('<div class="fancybox-inline-tmp" />')
-						.hide()
-						.insertBefore( $(obj) )
-						.bind('fancybox-cleanup', function() {
-							$(this).replaceWith(content.children());
-						}).bind('fancybox-cancel', function() {
-							$(this).replaceWith(tmp.children());
-						});
-
-					$(obj).appendTo(tmp);
-
-					_process_inline();
-				break;
-
-				case 'image':
-					busy = false;
-
-					$.fancybox.showActivity();
-
-					imgPreloader = new Image();
-
-					imgPreloader.onerror = function() {
-						_error();
-					};
-
-					imgPreloader.onload = function() {
-						busy = true;
-
-						imgPreloader.onerror = imgPreloader.onload = null;
-
-						_process_image();
-					};
-
-					imgPreloader.src = href;
-				break;
-
-				case 'swf':
-					selectedOpts.scrolling = 'no';
-
-					str = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' + selectedOpts.width + '" height="' + selectedOpts.height + '"><param name="movie" value="' + href + '"></param>';
-					emb = '';
-
-					$.each(selectedOpts.swf, function(name, val) {
-						str += '<param name="' + name + '" value="' + val + '"></param>';
-						emb += ' ' + name + '="' + val + '"';
-					});
-
-					str += '<embed src="' + href + '" type="application/x-shockwave-flash" width="' + selectedOpts.width + '" height="' + selectedOpts.height + '"' + emb + '></embed></object>';
-
-					tmp.html(str);
-
-					_process_inline();
-				break;
-
-				case 'ajax':
-					busy = false;
-
-					$.fancybox.showActivity();
-
-					selectedOpts.ajax.win = selectedOpts.ajax.success;
-
-					ajaxLoader = $.ajax($.extend({}, selectedOpts.ajax, {
-						url	: href,
-						data : selectedOpts.ajax.data || {},
-						error : function(XMLHttpRequest, textStatus, errorThrown) {
-							if ( XMLHttpRequest.status > 0 ) {
-								_error();
-							}
-						},
-						success : function(data, textStatus, XMLHttpRequest) {
-							var o = typeof XMLHttpRequest == 'object' ? XMLHttpRequest : ajaxLoader;
-							if (o.status == 200) {
-								if ( typeof selectedOpts.ajax.win == 'function' ) {
-									ret = selectedOpts.ajax.win(href, data, textStatus, XMLHttpRequest);
-
-									if (ret === false) {
-										loading.hide();
-										return;
-									} else if (typeof ret == 'string' || typeof ret == 'object') {
-										data = ret;
-									}
-								}
-
-								tmp.html( data );
-								_process_inline();
-							}
-						}
-					}));
-
-				break;
-
-				case 'iframe':
-					_show();
-				break;
-			}
-		},
-
-		_process_inline = function() {
-			var
-				w = selectedOpts.width,
-				h = selectedOpts.height;
-
-			if (w.toString().indexOf('%') > -1) {
-				w = parseInt( ($(window).width() - (selectedOpts.margin * 2)) * parseFloat(w) / 100, 10) + 'px';
-
-			} else {
-				w = w == 'auto' ? 'auto' : w + 'px';	
-			}
-
-			if (h.toString().indexOf('%') > -1) {
-				h = parseInt( ($(window).height() - (selectedOpts.margin * 2)) * parseFloat(h) / 100, 10) + 'px';
-
-			} else {
-				h = h == 'auto' ? 'auto' : h + 'px';	
-			}
-
-			tmp.wrapInner('<div style="width:' + w + ';height:' + h + ';overflow: ' + (selectedOpts.scrolling == 'auto' ? 'auto' : (selectedOpts.scrolling == 'yes' ? 'scroll' : 'hidden')) + ';position:relative;"></div>');
-
-			selectedOpts.width = tmp.width();
-			selectedOpts.height = tmp.height();
-
-			_show();
-		},
-
-		_process_image = function() {
-			selectedOpts.width = imgPreloader.width;
-			selectedOpts.height = imgPreloader.height;
-
-			$("<img />").attr({
-				'id' : 'fancybox-img',
-				'src' : imgPreloader.src,
-				'alt' : selectedOpts.title
-			}).appendTo( tmp );
-
-			_show();
-		},
-
-		_show = function() {
-			var pos, equal;
-
-			loading.hide();
-
-			if (wrap.is(":visible") && false === currentOpts.onCleanup(currentArray, currentIndex, currentOpts)) {
-				$.event.trigger('fancybox-cancel');
-
-				busy = false;
-				return;
-			}
-
-			busy = true;
-
-			$(content.add( overlay )).unbind();
-
-			$(window).unbind("resize.fb scroll.fb");
-			$(document).unbind('keydown.fb');
-
-			if (wrap.is(":visible") && currentOpts.titlePosition !== 'outside') {
-				wrap.css('height', wrap.height());
-			}
-
-			currentArray = selectedArray;
-			currentIndex = selectedIndex;
-			currentOpts = selectedOpts;
-
-			if (currentOpts.overlayShow) {
-				overlay.css({
-					'background-color' : currentOpts.overlayColor,
-					'opacity' : currentOpts.overlayOpacity,
-					'cursor' : currentOpts.hideOnOverlayClick ? 'pointer' : 'auto',
-					'height' : $(document).height()
-				});
-
-				if (!overlay.is(':visible')) {
-					if (isIE6) {
-						$('select:not(#fancybox-tmp select)').filter(function() {
-							return this.style.visibility !== 'hidden';
-						}).css({'visibility' : 'hidden'}).one('fancybox-cleanup', function() {
-							this.style.visibility = 'inherit';
-						});
-					}
-
-					overlay.show();
-				}
-			} else {
-				overlay.hide();
-			}
-
-			final_pos = _get_zoom_to();
-
-			_process_title();
-
-			if (wrap.is(":visible")) {
-				$( close.add( nav_left ).add( nav_right ) ).hide();
-
-				pos = wrap.position(),
-
-				start_pos = {
-					top	 : pos.top,
-					left : pos.left,
-					width : wrap.width(),
-					height : wrap.height()
-				};
-
-				equal = (start_pos.width == final_pos.width && start_pos.height == final_pos.height);
-
-				content.fadeTo(currentOpts.changeFade, 0.3, function() {
-					var finish_resizing = function() {
-						content.html( tmp.contents() ).fadeTo(currentOpts.changeFade, 1, _finish);
-					};
-
-					$.event.trigger('fancybox-change');
-
-					content
-						.empty()
-						.removeAttr('filter')
-						.css({
-							'border-width' : currentOpts.padding,
-							'width'	: final_pos.width - currentOpts.padding * 2,
-							'height' : selectedOpts.autoDimensions ? 'auto' : final_pos.height - titleHeight - currentOpts.padding * 2
-						});
-
-					if (equal) {
-						finish_resizing();
-
-					} else {
-						fx.prop = 0;
-
-						$(fx).animate({prop: 1}, {
-							 duration : currentOpts.changeSpeed,
-							 easing : currentOpts.easingChange,
-							 step : _draw,
-							 complete : finish_resizing
-						});
-					}
-				});
-
-				return;
-			}
-
-			wrap.removeAttr("style");
-
-			content.css('border-width', currentOpts.padding);
-
-			if (currentOpts.transitionIn == 'elastic') {
-				start_pos = _get_zoom_from();
-
-				content.html( tmp.contents() );
-
-				wrap.show();
-
-				if (currentOpts.opacity) {
-					final_pos.opacity = 0;
-				}
-
-				fx.prop = 0;
-
-				$(fx).animate({prop: 1}, {
-					 duration : currentOpts.speedIn,
-					 easing : currentOpts.easingIn,
-					 step : _draw,
-					 complete : _finish
-				});
-
-				return;
-			}
-
-			if (currentOpts.titlePosition == 'inside' && titleHeight > 0) {	
-				title.show();	
-			}
-
-			content
-				.css({
-					'width' : final_pos.width - currentOpts.padding * 2,
-					'height' : selectedOpts.autoDimensions ? 'auto' : final_pos.height - titleHeight - currentOpts.padding * 2
-				})
-				.html( tmp.contents() );
-
-			wrap
-				.css(final_pos)
-				.fadeIn( currentOpts.transitionIn == 'none' ? 0 : currentOpts.speedIn, _finish );
-		},
-
-		_format_title = function(title) {
-			if (title && title.length) {
-				if (currentOpts.titlePosition == 'float') {
-					return '<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">' + title + '</td><td id="fancybox-title-float-right"></td></tr></table>';
-				}
-
-				return '<div id="fancybox-title-' + currentOpts.titlePosition + '">' + title + '</div>';
-			}
-
-			return false;
-		},
-
-		_process_title = function() {
-			titleStr = currentOpts.title || '';
-			titleHeight = 0;
-
-			title
-				.empty()
-				.removeAttr('style')
-				.removeClass();
-
-			if (currentOpts.titleShow === false) {
-				title.hide();
-				return;
-			}
-
-			titleStr = $.isFunction(currentOpts.titleFormat) ? currentOpts.titleFormat(titleStr, currentArray, currentIndex, currentOpts) : _format_title(titleStr);
-
-			if (!titleStr || titleStr === '') {
-				title.hide();
-				return;
-			}
-
-			title
-				.addClass('fancybox-title-' + currentOpts.titlePosition)
-				.html( titleStr )
-				.appendTo( 'body' )
-				.show();
-
-			switch (currentOpts.titlePosition) {
-				case 'inside':
-					title
-						.css({
-							'width' : final_pos.width - (currentOpts.padding * 2),
-							'marginLeft' : currentOpts.padding,
-							'marginRight' : currentOpts.padding
-						});
-
-					titleHeight = title.outerHeight(true);
-
-					title.appendTo( outer );
-
-					final_pos.height += titleHeight;
-				break;
-
-				case 'over':
-					title
-						.css({
-							'marginLeft' : currentOpts.padding,
-							'width'	: final_pos.width - (currentOpts.padding * 2),
-							'bottom' : currentOpts.padding
-						})
-						.appendTo( outer );
-				break;
-
-				case 'float':
-					title
-						.css('left', parseInt((title.width() - final_pos.width - 40)/ 2, 10) * -1)
-						.appendTo( wrap );
-				break;
-
-				default:
-					title
-						.css({
-							'width' : final_pos.width - (currentOpts.padding * 2),
-							'paddingLeft' : currentOpts.padding,
-							'paddingRight' : currentOpts.padding
-						})
-						.appendTo( wrap );
-				break;
-			}
-
-			title.hide();
-		},
-
-		_set_navigation = function() {
-			if (currentOpts.enableEscapeButton || currentOpts.enableKeyboardNav) {
-				$(document).bind('keydown.fb', function(e) {
-					if (e.keyCode == 27 && currentOpts.enableEscapeButton) {
-						e.preventDefault();
-						$.fancybox.close();
-
-					} else if ((e.keyCode == 37 || e.keyCode == 39) && currentOpts.enableKeyboardNav && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA' && e.target.tagName !== 'SELECT') {
-						e.preventDefault();
-						$.fancybox[ e.keyCode == 37 ? 'prev' : 'next']();
-					}
-				});
-			}
-
-			if (!currentOpts.showNavArrows) { 
-				nav_left.hide();
-				nav_right.hide();
-				return;
-			}
-
-			if ((currentOpts.cyclic && currentArray.length > 1) || currentIndex !== 0) {
-				nav_left.show();
-			}
-
-			if ((currentOpts.cyclic && currentArray.length > 1) || currentIndex != (currentArray.length -1)) {
-				nav_right.show();
-			}
-		},
-
-		_finish = function () {
-			if (!$.support.opacity) {
-				content.get(0).style.removeAttribute('filter');
-				wrap.get(0).style.removeAttribute('filter');
-			}
-
-			if (selectedOpts.autoDimensions) {
-				content.css('height', 'auto');
-			}
-
-			wrap.css('height', 'auto');
-
-			if (titleStr && titleStr.length) {
-				title.show();
-			}
-
-			if (currentOpts.showCloseButton) {
-				close.show();
-			}
-
-			_set_navigation();
-	
-			if (currentOpts.hideOnContentClick)	{
-				content.bind('click', $.fancybox.close);
-			}
-
-			if (currentOpts.hideOnOverlayClick)	{
-				overlay.bind('click', $.fancybox.close);
-			}
-
-			$(window).bind("resize.fb", $.fancybox.resize);
-
-			if (currentOpts.centerOnScroll) {
-				$(window).bind("scroll.fb", $.fancybox.center);
-			}
-
-			if (currentOpts.type == 'iframe') {
-				$('<iframe id="fancybox-frame" name="fancybox-frame' + new Date().getTime() + '" frameborder="0" hspace="0" ' + ($.browser.msie ? 'allowtransparency="true""' : '') + ' scrolling="' + selectedOpts.scrolling + '" src="' + currentOpts.href + '"></iframe>').appendTo(content);
-			}
-
-			wrap.show();
-
-			busy = false;
-
-			$.fancybox.center();
-
-			currentOpts.onComplete(currentArray, currentIndex, currentOpts);
-
-			_preload_images();
-		},
-
-		_preload_images = function() {
-			var href, 
-				objNext;
-
-			if ((currentArray.length -1) > currentIndex) {
-				href = currentArray[ currentIndex + 1 ].href;
-
-				if (typeof href !== 'undefined' && href.match(imgRegExp)) {
-					objNext = new Image();
-					objNext.src = href;
-				}
-			}
-
-			if (currentIndex > 0) {
-				href = currentArray[ currentIndex - 1 ].href;
-
-				if (typeof href !== 'undefined' && href.match(imgRegExp)) {
-					objNext = new Image();
-					objNext.src = href;
-				}
-			}
-		},
-
-		_draw = function(pos) {
-			var dim = {
-				width : parseInt(start_pos.width + (final_pos.width - start_pos.width) * pos, 10),
-				height : parseInt(start_pos.height + (final_pos.height - start_pos.height) * pos, 10),
-
-				top : parseInt(start_pos.top + (final_pos.top - start_pos.top) * pos, 10),
-				left : parseInt(start_pos.left + (final_pos.left - start_pos.left) * pos, 10)
-			};
-
-			if (typeof final_pos.opacity !== 'undefined') {
-				dim.opacity = pos < 0.5 ? 0.5 : pos;
-			}
-
-			wrap.css(dim);
-
-			content.css({
-				'width' : dim.width - currentOpts.padding * 2,
-				'height' : dim.height - (titleHeight * pos) - currentOpts.padding * 2
-			});
-		},
-
-		_get_viewport = function() {
-			return [
-				$(window).width() - (currentOpts.margin * 2),
-				$(window).height() - (currentOpts.margin * 2),
-				$(document).scrollLeft() + currentOpts.margin,
-				$(document).scrollTop() + currentOpts.margin
-			];
-		},
-
-		_get_zoom_to = function () {
-			var view = _get_viewport(),
-				to = {},
-				resize = currentOpts.autoScale,
-				double_padding = currentOpts.padding * 2,
-				ratio;
-
-			if (currentOpts.width.toString().indexOf('%') > -1) {
-				to.width = parseInt((view[0] * parseFloat(currentOpts.width)) / 100, 10);
-			} else {
-				to.width = currentOpts.width + double_padding;
-			}
-
-			if (currentOpts.height.toString().indexOf('%') > -1) {
-				to.height = parseInt((view[1] * parseFloat(currentOpts.height)) / 100, 10);
-			} else {
-				to.height = currentOpts.height + double_padding;
-			}
-
-			if (resize && (to.width > view[0] || to.height > view[1])) {
-				if (selectedOpts.type == 'image' || selectedOpts.type == 'swf') {
-					ratio = (currentOpts.width ) / (currentOpts.height );
-
-					if ((to.width ) > view[0]) {
-						to.width = view[0];
-						to.height = parseInt(((to.width - double_padding) / ratio) + double_padding, 10);
-					}
-
-					if ((to.height) > view[1]) {
-						to.height = view[1];
-						to.width = parseInt(((to.height - double_padding) * ratio) + double_padding, 10);
-					}
-
-				} else {
-					to.width = Math.min(to.width, view[0]);
-					to.height = Math.min(to.height, view[1]);
-				}
-			}
-
-			to.top = parseInt(Math.max(view[3] - 20, view[3] + ((view[1] - to.height - 40) * 0.5)), 10);
-			to.left = parseInt(Math.max(view[2] - 20, view[2] + ((view[0] - to.width - 40) * 0.5)), 10);
-
-			return to;
-		},
-
-		_get_obj_pos = function(obj) {
-			var pos = obj.offset();
-
-			pos.top += parseInt( obj.css('paddingTop'), 10 ) || 0;
-			pos.left += parseInt( obj.css('paddingLeft'), 10 ) || 0;
-
-			pos.top += parseInt( obj.css('border-top-width'), 10 ) || 0;
-			pos.left += parseInt( obj.css('border-left-width'), 10 ) || 0;
-
-			pos.width = obj.width();
-			pos.height = obj.height();
-
-			return pos;
-		},
-
-		_get_zoom_from = function() {
-			var orig = selectedOpts.orig ? $(selectedOpts.orig) : false,
-				from = {},
-				pos,
-				view;
-
-			if (orig && orig.length) {
-				pos = _get_obj_pos(orig);
-
-				from = {
-					width : pos.width + (currentOpts.padding * 2),
-					height : pos.height + (currentOpts.padding * 2),
-					top	: pos.top - currentOpts.padding - 20,
-					left : pos.left - currentOpts.padding - 20
-				};
-
-			} else {
-				view = _get_viewport();
-
-				from = {
-					width : currentOpts.padding * 2,
-					height : currentOpts.padding * 2,
-					top	: parseInt(view[3] + view[1] * 0.5, 10),
-					left : parseInt(view[2] + view[0] * 0.5, 10)
-				};
-			}
-
-			return from;
-		},
-
-		_animate_loading = function() {
-			if (!loading.is(':visible')){
-				clearInterval(loadingTimer);
-				return;
-			}
-
-			$('div', loading).css('top', (loadingFrame * -40) + 'px');
-
-			loadingFrame = (loadingFrame + 1) % 12;
-		};
-
-	/*
-	 * Public methods 
-	 */
-
-	$.fn.fancybox = function(options) {
-		if (!$(this).length) {
-			return this;
-		}
-
-		$(this)
-			.data('fancybox', $.extend({}, options, ($.metadata ? $(this).metadata() : {})))
-			.unbind('click.fb')
-			.bind('click.fb', function(e) {
-				e.preventDefault();
-
-				if (busy) {
-					return;
-				}
-
-				busy = true;
-
-				$(this).blur();
-
-				selectedArray = [];
-				selectedIndex = 0;
-
-				var rel = $(this).attr('rel') || '';
-
-				if (!rel || rel == '' || rel === 'nofollow') {
-					selectedArray.push(this);
-
-				} else {
-					selectedArray = $("a[rel=" + rel + "], area[rel=" + rel + "]");
-					selectedIndex = selectedArray.index( this );
-				}
-
-				_start();
-
-				return;
-			});
-
-		return this;
-	};
-
-	$.fancybox = function(obj) {
-		var opts;
-
-		if (busy) {
-			return;
-		}
-
-		busy = true;
-		opts = typeof arguments[1] !== 'undefined' ? arguments[1] : {};
-
-		selectedArray = [];
-		selectedIndex = parseInt(opts.index, 10) || 0;
-
-		if ($.isArray(obj)) {
-			for (var i = 0, j = obj.length; i < j; i++) {
-				if (typeof obj[i] == 'object') {
-					$(obj[i]).data('fancybox', $.extend({}, opts, obj[i]));
-				} else {
-					obj[i] = $({}).data('fancybox', $.extend({content : obj[i]}, opts));
-				}
-			}
-
-			selectedArray = jQuery.merge(selectedArray, obj);
-
-		} else {
-			if (typeof obj == 'object') {
-				$(obj).data('fancybox', $.extend({}, opts, obj));
-			} else {
-				obj = $({}).data('fancybox', $.extend({content : obj}, opts));
-			}
-
-			selectedArray.push(obj);
-		}
-
-		if (selectedIndex > selectedArray.length || selectedIndex < 0) {
-			selectedIndex = 0;
-		}
-
-		_start();
-	};
-
-	$.fancybox.showActivity = function() {
-		clearInterval(loadingTimer);
-
-		loading.show();
-		loadingTimer = setInterval(_animate_loading, 66);
-	};
-
-	$.fancybox.hideActivity = function() {
-		loading.hide();
-	};
-
-	$.fancybox.next = function() {
-		return $.fancybox.pos( currentIndex + 1);
-	};
-
-	$.fancybox.prev = function() {
-		return $.fancybox.pos( currentIndex - 1);
-	};
-
-	$.fancybox.pos = function(pos) {
-		if (busy) {
-			return;
-		}
-
-		pos = parseInt(pos);
-
-		selectedArray = currentArray;
-
-		if (pos > -1 && pos < currentArray.length) {
-			selectedIndex = pos;
-			_start();
-
-		} else if (currentOpts.cyclic && currentArray.length > 1) {
-			selectedIndex = pos >= currentArray.length ? 0 : currentArray.length - 1;
-			_start();
-		}
-
-		return;
-	};
-
-	$.fancybox.cancel = function() {
-		if (busy) {
-			return;
-		}
-
-		busy = true;
-
-		$.event.trigger('fancybox-cancel');
-
-		_abort();
-
-		selectedOpts.onCancel(selectedArray, selectedIndex, selectedOpts);
-
-		busy = false;
-	};
-
-	// Note: within an iframe use - parent.$.fancybox.close();
-	$.fancybox.close = function() {
-		if (busy || wrap.is(':hidden')) {
-			return;
-		}
-
-		busy = true;
-
-		if (currentOpts && false === currentOpts.onCleanup(currentArray, currentIndex, currentOpts)) {
-			busy = false;
-			return;
-		}
-
-		_abort();
-
-		$(close.add( nav_left ).add( nav_right )).hide();
-
-		$(content.add( overlay )).unbind();
-
-		$(window).unbind("resize.fb scroll.fb");
-		$(document).unbind('keydown.fb');
-
-		content.find('iframe').attr('src', isIE6 && /^https/i.test(window.location.href || '') ? 'javascript:void(false)' : 'about:blank');
-
-		if (currentOpts.titlePosition !== 'inside') {
-			title.empty();
-		}
-
-		wrap.stop();
-
-		function _cleanup() {
-			overlay.fadeOut('fast');
-
-			title.empty().hide();
-			wrap.hide();
-
-			$.event.trigger('fancybox-cleanup');
-
-			content.empty();
-
-			currentOpts.onClosed(currentArray, currentIndex, currentOpts);
-
-			currentArray = selectedOpts	= [];
-			currentIndex = selectedIndex = 0;
-			currentOpts = selectedOpts	= {};
-
-			busy = false;
-		}
-
-		if (currentOpts.transitionOut == 'elastic') {
-			start_pos = _get_zoom_from();
-
-			var pos = wrap.position();
-
-			final_pos = {
-				top	 : pos.top ,
-				left : pos.left,
-				width :	wrap.width(),
-				height : wrap.height()
-			};
-
-			if (currentOpts.opacity) {
-				final_pos.opacity = 1;
-			}
-
-			title.empty().hide();
-
-			fx.prop = 1;
-
-			$(fx).animate({ prop: 0 }, {
-				 duration : currentOpts.speedOut,
-				 easing : currentOpts.easingOut,
-				 step : _draw,
-				 complete : _cleanup
-			});
-
-		} else {
-			wrap.fadeOut( currentOpts.transitionOut == 'none' ? 0 : currentOpts.speedOut, _cleanup);
-		}
-	};
-
-	$.fancybox.resize = function() {
-		if (overlay.is(':visible')) {
-			overlay.css('height', $(document).height());
-		}
-
-		$.fancybox.center(true);
-	};
-
-	$.fancybox.center = function() {
-		var view, align;
-
-		if (busy) {
-			return;	
-		}
-
-		align = arguments[0] === true ? 1 : 0;
-		view = _get_viewport();
-
-		if (!align && (wrap.width() > view[0] || wrap.height() > view[1])) {
-			return;	
-		}
-
-		wrap
-			.stop()
-			.animate({
-				'top' : parseInt(Math.max(view[3] - 20, view[3] + ((view[1] - content.height() - 40) * 0.5) - currentOpts.padding)),
-				'left' : parseInt(Math.max(view[2] - 20, view[2] + ((view[0] - content.width() - 40) * 0.5) - currentOpts.padding))
-			}, typeof arguments[0] == 'number' ? arguments[0] : 200);
-	};
-
-	$.fancybox.init = function() {
-		if ($("#fancybox-wrap").length) {
-			return;
-		}
-
-		$('body').append(
-			tmp	= $('<div id="fancybox-tmp"></div>'),
-			loading	= $('<div id="fancybox-loading"><div></div></div>'),
-			overlay	= $('<div id="fancybox-overlay"></div>'),
-			wrap = $('<div id="fancybox-wrap"></div>')
-		);
-
-		outer = $('<div id="fancybox-outer"></div>')
-			.append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>')
-			.appendTo( wrap );
-
-		outer.append(
-			content = $('<div id="fancybox-content"></div>'),
-			close = $('<a id="fancybox-close"></a>'),
-			title = $('<div id="fancybox-title"></div>'),
-
-			nav_left = $('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),
-			nav_right = $('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')
-		);
-
-		close.click($.fancybox.close);
-		loading.click($.fancybox.cancel);
-
-		nav_left.click(function(e) {
-			e.preventDefault();
-			$.fancybox.prev();
-		});
-
-		nav_right.click(function(e) {
-			e.preventDefault();
-			$.fancybox.next();
-		});
-
-		if ($.fn.mousewheel) {
-			wrap.bind('mousewheel.fb', function(e, delta) {
-				if (busy) {
-					e.preventDefault();
-
-				} else if ($(e.target).get(0).clientHeight == 0 || $(e.target).get(0).scrollHeight === $(e.target).get(0).clientHeight) {
-					e.preventDefault();
-					$.fancybox[ delta > 0 ? 'prev' : 'next']();
-				}
-			});
-		}
-
-		if (!$.support.opacity) {
-			wrap.addClass('fancybox-ie');
-		}
-
-		if (isIE6) {
-			loading.addClass('fancybox-ie6');
-			wrap.addClass('fancybox-ie6');
-
-			$('<iframe id="fancybox-hide-sel-frame" src="' + (/^https/i.test(window.location.href || '') ? 'javascript:void(false)' : 'about:blank' ) + '" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer);
-		}
-	};
-
-	$.fn.fancybox.defaults = {
-		padding : 10,
-		margin : 40,
-		opacity : false,
-		modal : false,
-		cyclic : false,
-		scrolling : 'auto',	// 'auto', 'yes' or 'no'
-
-		width : 560,
-		height : 340,
-
-		autoScale : true,
-		autoDimensions : true,
-		centerOnScroll : false,
-
-		ajax : {},
-		swf : { wmode: 'transparent' },
-
-		hideOnOverlayClick : true,
-		hideOnContentClick : false,
-
-		overlayShow : true,
-		overlayOpacity : 0.7,
-		overlayColor : '#777',
-
-		titleShow : true,
-		titlePosition : 'float', // 'float', 'outside', 'inside' or 'over'
-		titleFormat : null,
-		titleFromAlt : false,
-
-		transitionIn : 'fade', // 'elastic', 'fade' or 'none'
-		transitionOut : 'fade', // 'elastic', 'fade' or 'none'
-
-		speedIn : 300,
-		speedOut : 300,
-
-		changeSpeed : 300,
-		changeFade : 'fast',
-
-		easingIn : 'swing',
-		easingOut : 'swing',
-
-		showCloseButton	 : true,
-		showNavArrows : true,
-		enableEscapeButton : true,
-		enableKeyboardNav : true,
-
-		onStart : function(){},
-		onCancel : function(){},
-		onComplete : function(){},
-		onCleanup : function(){},
-		onClosed : function(){},
-		onError : function(){}
-	};
-
-	$(document).ready(function() {
-		$.fancybox.init();
-	});
-
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.pack.js elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.pack.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.pack.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.pack.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,46 +0,0 @@
-/*
- * FancyBox - jQuery Plugin
- * Simple and fancy lightbox alternative
- *
- * Examples and documentation at: http://fancybox.net
- * 
- * Copyright (c) 2008 - 2010 Janis Skarnelis
- * That said, it is hardly a one-person project. Many people have submitted bugs, code, and offered their advice freely. Their support is greatly appreciated.
- * 
- * Version: 1.3.4 (11/11/2010)
- * Requires: jQuery v1.3+
- *
- * Dual licensed under the MIT and GPL licenses:
- *   http://www.opensource.org/licenses/mit-license.php
- *   http://www.gnu.org/licenses/gpl.html
- */
-
-;(function(b){var m,t,u,f,D,j,E,n,z,A,q=0,e={},o=[],p=0,d={},l=[],G=null,v=new Image,J=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,W=/[^\.]\.(swf)\s*$/i,K,L=1,y=0,s="",r,i,h=false,B=b.extend(b("<div/>")[0],{prop:0}),M=b.browser.msie&&b.browser.version<7&&!window.XMLHttpRequest,N=function(){t.hide();v.onerror=v.onload=null;G&&G.abort();m.empty()},O=function(){if(false===e.onError(o,q,e)){t.hide();h=false}else{e.titleShow=false;e.width="auto";e.height="auto";m.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');
-F()}},I=function(){var a=o[q],c,g,k,C,P,w;N();e=b.extend({},b.fn.fancybox.defaults,typeof b(a).data("fancybox")=="undefined"?e:b(a).data("fancybox"));w=e.onStart(o,q,e);if(w===false)h=false;else{if(typeof w=="object")e=b.extend(e,w);k=e.title||(a.nodeName?b(a).attr("title"):a.title)||"";if(a.nodeName&&!e.orig)e.orig=b(a).children("img:first").length?b(a).children("img:first"):b(a);if(k===""&&e.orig&&e.titleFromAlt)k=e.orig.attr("alt");c=e.href||(a.nodeName?b(a).attr("href"):a.href)||null;if(/^(?:javascript)/i.test(c)||
-c=="#")c=null;if(e.type){g=e.type;if(!c)c=e.content}else if(e.content)g="html";else if(c)g=c.match(J)?"image":c.match(W)?"swf":b(a).hasClass("iframe")?"iframe":c.indexOf("#")===0?"inline":"ajax";if(g){if(g=="inline"){a=c.substr(c.indexOf("#"));g=b(a).length>0?"inline":"ajax"}e.type=g;e.href=c;e.title=k;if(e.autoDimensions)if(e.type=="html"||e.type=="inline"||e.type=="ajax"){e.width="auto";e.height="auto"}else e.autoDimensions=false;if(e.modal){e.overlayShow=true;e.hideOnOverlayClick=false;e.hideOnContentClick=
-false;e.enableEscapeButton=false;e.showCloseButton=false}e.padding=parseInt(e.padding,10);e.margin=parseInt(e.margin,10);m.css("padding",e.padding+e.margin);b(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){b(this).replaceWith(j.children())});switch(g){case "html":m.html(e.content);F();break;case "inline":if(b(a).parent().is("#fancybox-content")===true){h=false;break}b('<div class="fancybox-inline-tmp" />').hide().insertBefore(b(a)).bind("fancybox-cleanup",function(){b(this).replaceWith(j.children())}).bind("fancybox-cancel",
-function(){b(this).replaceWith(m.children())});b(a).appendTo(m);F();break;case "image":h=false;b.fancybox.showActivity();v=new Image;v.onerror=function(){O()};v.onload=function(){h=true;v.onerror=v.onload=null;e.width=v.width;e.height=v.height;b("<img />").attr({id:"fancybox-img",src:v.src,alt:e.title}).appendTo(m);Q()};v.src=c;break;case "swf":e.scrolling="no";C='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+e.width+'" height="'+e.height+'"><param name="movie" value="'+c+
-'"></param>';P="";b.each(e.swf,function(x,H){C+='<param name="'+x+'" value="'+H+'"></param>';P+=" "+x+'="'+H+'"'});C+='<embed src="'+c+'" type="application/x-shockwave-flash" width="'+e.width+'" height="'+e.height+'"'+P+"></embed></object>";m.html(C);F();break;case "ajax":h=false;b.fancybox.showActivity();e.ajax.win=e.ajax.success;G=b.ajax(b.extend({},e.ajax,{url:c,data:e.ajax.data||{},error:function(x){x.status>0&&O()},success:function(x,H,R){if((typeof R=="object"?R:G).status==200){if(typeof e.ajax.win==
-"function"){w=e.ajax.win(c,x,H,R);if(w===false){t.hide();return}else if(typeof w=="string"||typeof w=="object")x=w}m.html(x);F()}}}));break;case "iframe":Q()}}else O()}},F=function(){var a=e.width,c=e.height;a=a.toString().indexOf("%")>-1?parseInt((b(window).width()-e.margin*2)*parseFloat(a)/100,10)+"px":a=="auto"?"auto":a+"px";c=c.toString().indexOf("%")>-1?parseInt((b(window).height()-e.margin*2)*parseFloat(c)/100,10)+"px":c=="auto"?"auto":c+"px";m.wrapInner('<div style="width:'+a+";height:"+c+
-";overflow: "+(e.scrolling=="auto"?"auto":e.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');e.width=m.width();e.height=m.height();Q()},Q=function(){var a,c;t.hide();if(f.is(":visible")&&false===d.onCleanup(l,p,d)){b.event.trigger("fancybox-cancel");h=false}else{h=true;b(j.add(u)).unbind();b(window).unbind("resize.fb scroll.fb");b(document).unbind("keydown.fb");f.is(":visible")&&d.titlePosition!=="outside"&&f.css("height",f.height());l=o;p=q;d=e;if(d.overlayShow){u.css({"background-color":d.overlayColor,
-opacity:d.overlayOpacity,cursor:d.hideOnOverlayClick?"pointer":"auto",height:b(document).height()});if(!u.is(":visible")){M&&b("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});u.show()}}else u.hide();i=X();s=d.title||"";y=0;n.empty().removeAttr("style").removeClass();if(d.titleShow!==false){if(b.isFunction(d.titleFormat))a=d.titleFormat(s,l,p,d);else a=s&&s.length?
-d.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+s+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+d.titlePosition+'">'+s+"</div>":false;s=a;if(!(!s||s==="")){n.addClass("fancybox-title-"+d.titlePosition).html(s).appendTo("body").show();switch(d.titlePosition){case "inside":n.css({width:i.width-d.padding*2,marginLeft:d.padding,marginRight:d.padding});
-y=n.outerHeight(true);n.appendTo(D);i.height+=y;break;case "over":n.css({marginLeft:d.padding,width:i.width-d.padding*2,bottom:d.padding}).appendTo(D);break;case "float":n.css("left",parseInt((n.width()-i.width-40)/2,10)*-1).appendTo(f);break;default:n.css({width:i.width-d.padding*2,paddingLeft:d.padding,paddingRight:d.padding}).appendTo(f)}}}n.hide();if(f.is(":visible")){b(E.add(z).add(A)).hide();a=f.position();r={top:a.top,left:a.left,width:f.width(),height:f.height()};c=r.width==i.width&&r.height==
-i.height;j.fadeTo(d.changeFade,0.3,function(){var g=function(){j.html(m.contents()).fadeTo(d.changeFade,1,S)};b.event.trigger("fancybox-change");j.empty().removeAttr("filter").css({"border-width":d.padding,width:i.width-d.padding*2,height:e.autoDimensions?"auto":i.height-y-d.padding*2});if(c)g();else{B.prop=0;b(B).animate({prop:1},{duration:d.changeSpeed,easing:d.easingChange,step:T,complete:g})}})}else{f.removeAttr("style");j.css("border-width",d.padding);if(d.transitionIn=="elastic"){r=V();j.html(m.contents());
-f.show();if(d.opacity)i.opacity=0;B.prop=0;b(B).animate({prop:1},{duration:d.speedIn,easing:d.easingIn,step:T,complete:S})}else{d.titlePosition=="inside"&&y>0&&n.show();j.css({width:i.width-d.padding*2,height:e.autoDimensions?"auto":i.height-y-d.padding*2}).html(m.contents());f.css(i).fadeIn(d.transitionIn=="none"?0:d.speedIn,S)}}}},Y=function(){if(d.enableEscapeButton||d.enableKeyboardNav)b(document).bind("keydown.fb",function(a){if(a.keyCode==27&&d.enableEscapeButton){a.preventDefault();b.fancybox.close()}else if((a.keyCode==
-37||a.keyCode==39)&&d.enableKeyboardNav&&a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.target.tagName!=="SELECT"){a.preventDefault();b.fancybox[a.keyCode==37?"prev":"next"]()}});if(d.showNavArrows){if(d.cyclic&&l.length>1||p!==0)z.show();if(d.cyclic&&l.length>1||p!=l.length-1)A.show()}else{z.hide();A.hide()}},S=function(){if(!b.support.opacity){j.get(0).style.removeAttribute("filter");f.get(0).style.removeAttribute("filter")}e.autoDimensions&&j.css("height","auto");f.css("height","auto");
-s&&s.length&&n.show();d.showCloseButton&&E.show();Y();d.hideOnContentClick&&j.bind("click",b.fancybox.close);d.hideOnOverlayClick&&u.bind("click",b.fancybox.close);b(window).bind("resize.fb",b.fancybox.resize);d.centerOnScroll&&b(window).bind("scroll.fb",b.fancybox.center);if(d.type=="iframe")b('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(b.browser.msie?'allowtransparency="true""':"")+' scrolling="'+e.scrolling+'" src="'+d.href+'"></iframe>').appendTo(j);
-f.show();h=false;b.fancybox.center();d.onComplete(l,p,d);var a,c;if(l.length-1>p){a=l[p+1].href;if(typeof a!=="undefined"&&a.match(J)){c=new Image;c.src=a}}if(p>0){a=l[p-1].href;if(typeof a!=="undefined"&&a.match(J)){c=new Image;c.src=a}}},T=function(a){var c={width:parseInt(r.width+(i.width-r.width)*a,10),height:parseInt(r.height+(i.height-r.height)*a,10),top:parseInt(r.top+(i.top-r.top)*a,10),left:parseInt(r.left+(i.left-r.left)*a,10)};if(typeof i.opacity!=="undefined")c.opacity=a<0.5?0.5:a;f.css(c);
-j.css({width:c.width-d.padding*2,height:c.height-y*a-d.padding*2})},U=function(){return[b(window).width()-d.margin*2,b(window).height()-d.margin*2,b(document).scrollLeft()+d.margin,b(document).scrollTop()+d.margin]},X=function(){var a=U(),c={},g=d.autoScale,k=d.padding*2;c.width=d.width.toString().indexOf("%")>-1?parseInt(a[0]*parseFloat(d.width)/100,10):d.width+k;c.height=d.height.toString().indexOf("%")>-1?parseInt(a[1]*parseFloat(d.height)/100,10):d.height+k;if(g&&(c.width>a[0]||c.height>a[1]))if(e.type==
-"image"||e.type=="swf"){g=d.width/d.height;if(c.width>a[0]){c.width=a[0];c.height=parseInt((c.width-k)/g+k,10)}if(c.height>a[1]){c.height=a[1];c.width=parseInt((c.height-k)*g+k,10)}}else{c.width=Math.min(c.width,a[0]);c.height=Math.min(c.height,a[1])}c.top=parseInt(Math.max(a[3]-20,a[3]+(a[1]-c.height-40)*0.5),10);c.left=parseInt(Math.max(a[2]-20,a[2]+(a[0]-c.width-40)*0.5),10);return c},V=function(){var a=e.orig?b(e.orig):false,c={};if(a&&a.length){c=a.offset();c.top+=parseInt(a.css("paddingTop"),
-10)||0;c.left+=parseInt(a.css("paddingLeft"),10)||0;c.top+=parseInt(a.css("border-top-width"),10)||0;c.left+=parseInt(a.css("border-left-width"),10)||0;c.width=a.width();c.height=a.height();c={width:c.width+d.padding*2,height:c.height+d.padding*2,top:c.top-d.padding-20,left:c.left-d.padding-20}}else{a=U();c={width:d.padding*2,height:d.padding*2,top:parseInt(a[3]+a[1]*0.5,10),left:parseInt(a[2]+a[0]*0.5,10)}}return c},Z=function(){if(t.is(":visible")){b("div",t).css("top",L*-40+"px");L=(L+1)%12}else clearInterval(K)};
-b.fn.fancybox=function(a){if(!b(this).length)return this;b(this).data("fancybox",b.extend({},a,b.metadata?b(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();if(!h){h=true;b(this).blur();o=[];q=0;c=b(this).attr("rel")||"";if(!c||c==""||c==="nofollow")o.push(this);else{o=b("a[rel="+c+"], area[rel="+c+"]");q=o.index(this)}I()}});return this};b.fancybox=function(a,c){var g;if(!h){h=true;g=typeof c!=="undefined"?c:{};o=[];q=parseInt(g.index,10)||0;if(b.isArray(a)){for(var k=
-0,C=a.length;k<C;k++)if(typeof a[k]=="object")b(a[k]).data("fancybox",b.extend({},g,a[k]));else a[k]=b({}).data("fancybox",b.extend({content:a[k]},g));o=jQuery.merge(o,a)}else{if(typeof a=="object")b(a).data("fancybox",b.extend({},g,a));else a=b({}).data("fancybox",b.extend({content:a},g));o.push(a)}if(q>o.length||q<0)q=0;I()}};b.fancybox.showActivity=function(){clearInterval(K);t.show();K=setInterval(Z,66)};b.fancybox.hideActivity=function(){t.hide()};b.fancybox.next=function(){return b.fancybox.pos(p+
-1)};b.fancybox.prev=function(){return b.fancybox.pos(p-1)};b.fancybox.pos=function(a){if(!h){a=parseInt(a);o=l;if(a>-1&&a<l.length){q=a;I()}else if(d.cyclic&&l.length>1){q=a>=l.length?0:l.length-1;I()}}};b.fancybox.cancel=function(){if(!h){h=true;b.event.trigger("fancybox-cancel");N();e.onCancel(o,q,e);h=false}};b.fancybox.close=function(){function a(){u.fadeOut("fast");n.empty().hide();f.hide();b.event.trigger("fancybox-cleanup");j.empty();d.onClosed(l,p,d);l=e=[];p=q=0;d=e={};h=false}if(!(h||f.is(":hidden"))){h=
-true;if(d&&false===d.onCleanup(l,p,d))h=false;else{N();b(E.add(z).add(A)).hide();b(j.add(u)).unbind();b(window).unbind("resize.fb scroll.fb");b(document).unbind("keydown.fb");j.find("iframe").attr("src",M&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");d.titlePosition!=="inside"&&n.empty();f.stop();if(d.transitionOut=="elastic"){r=V();var c=f.position();i={top:c.top,left:c.left,width:f.width(),height:f.height()};if(d.opacity)i.opacity=1;n.empty().hide();B.prop=1;
-b(B).animate({prop:0},{duration:d.speedOut,easing:d.easingOut,step:T,complete:a})}else f.fadeOut(d.transitionOut=="none"?0:d.speedOut,a)}}};b.fancybox.resize=function(){u.is(":visible")&&u.css("height",b(document).height());b.fancybox.center(true)};b.fancybox.center=function(a){var c,g;if(!h){g=a===true?1:0;c=U();!g&&(f.width()>c[0]||f.height()>c[1])||f.stop().animate({top:parseInt(Math.max(c[3]-20,c[3]+(c[1]-j.height()-40)*0.5-d.padding)),left:parseInt(Math.max(c[2]-20,c[2]+(c[0]-j.width()-40)*0.5-
-d.padding))},typeof a=="number"?a:200)}};b.fancybox.init=function(){if(!b("#fancybox-wrap").length){b("body").append(m=b('<div id="fancybox-tmp"></div>'),t=b('<div id="fancybox-loading"><div></div></div>'),u=b('<div id="fancybox-overlay"></div>'),f=b('<div id="fancybox-wrap"></div>'));D=b('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(f);
-D.append(j=b('<div id="fancybox-content"></div>'),E=b('<a id="fancybox-close"></a>'),n=b('<div id="fancybox-title"></div>'),z=b('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),A=b('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));E.click(b.fancybox.close);t.click(b.fancybox.cancel);z.click(function(a){a.preventDefault();b.fancybox.prev()});A.click(function(a){a.preventDefault();b.fancybox.next()});
-b.fn.mousewheel&&f.bind("mousewheel.fb",function(a,c){if(h)a.preventDefault();else if(b(a.target).get(0).clientHeight==0||b(a.target).get(0).scrollHeight===b(a.target).get(0).clientHeight){a.preventDefault();b.fancybox[c>0?"prev":"next"]()}});b.support.opacity||f.addClass("fancybox-ie");if(M){t.addClass("fancybox-ie6");f.addClass("fancybox-ie6");b('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(D)}}};
-b.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",
-easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};b(document).ready(function(){b.fancybox.init()})})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.mousewheel-3.0.4.pack.js elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.mousewheel-3.0.4.pack.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/fancybox/jquery.mousewheel-3.0.4.pack.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/fancybox/jquery.mousewheel-3.0.4.pack.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,14 +0,0 @@
-/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
-* Licensed under the MIT License (LICENSE.txt).
-*
-* Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
-* Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
-* Thanks to: Seamus Leahy for adding deltaX and deltaY
-*
-* Version: 3.0.4
-*
-* Requires: 1.2.2+
-*/
-
-(function(d){function g(a){var b=a||window.event,i=[].slice.call(arguments,1),c=0,h=0,e=0;a=d.event.fix(b);a.type="mousewheel";if(a.wheelDelta)c=a.wheelDelta/120;if(a.detail)c=-a.detail/3;e=c;if(b.axis!==undefined&&b.axis===b.HORIZONTAL_AXIS){e=0;h=-1*c}if(b.wheelDeltaY!==undefined)e=b.wheelDeltaY/120;if(b.wheelDeltaX!==undefined)h=-1*b.wheelDeltaX/120;i.unshift(a,c,h,e);return d.event.handle.apply(this,i)}var f=["DOMMouseScroll","mousewheel"];d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=
-f.length;a;)this.addEventListener(f[--a],g,false);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],g,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/filemanager.js elefant-elefant_1_3_3_beta/apps/filemanager/js/filemanager.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/filemanager.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/filemanager.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,148 @@
+/**
+ * The API for accessing the filemanager.
+ *
+ * Usage:
+ *
+ *     filemanager.ls ({path: ''}, function (res) {
+ *         if (res.success) {
+ *             console.log (res.data);
+ *         }
+ *     });
+ *
+ * Methods:
+ *
+ * - filemanager.ls ({path: ''}, callback);
+ * - filemanager.dirs (callback);
+ * - filemanager.mkdir ({path: '', name: 'my-folder'}, callback);
+ * - filemanager.rm ({path: ''}, callback);
+ * - filemanager.mv ({path: 'foo.txt', rename: 'bar.txt'}, callback);
+ * - filemanager.prop ({path: 'foo.txt', prop: 'description', value: 'Foo'}, callback);
+ */
+var filemanager = (function ($) {
+	var self = {};
+	
+	// the prefix for api requests
+	self.prefix = '/filemanager/api/';
+	
+	// enable/disable debugging output to the console
+	self.debug = false;
+	
+	// helper function to verify parameters
+	var _has = function (obj, prop) {
+		return obj.hasOwnProperty (prop);
+	};
+	
+	// console log wrapper for debugging
+	var _log = function (obj) {
+		if (self.debug) {
+			console.log (obj);
+		}
+		return obj;
+	};
+
+	// List files for a path
+	self.ls = function (opts, callback) {
+		if (! _has (opts, 'path')) {
+			throw new Error ('filemanager.ls() - Missing parameter: path');
+		}
+
+		$.get (
+			self.prefix + 'ls/' + opts.path,
+			callback
+		);
+	};
+
+	// List all folders
+	self.dirs = function (callback) {
+		$.get (
+			self.prefix + 'dirs',
+			callback
+		);
+	};
+
+	// Make a new folder
+	self.mkdir = function (opts, callback) {
+		if (! _has (opts, 'path')) {
+			throw new Error ('filemanager.mkdir() - Missing parameter: path');
+		}
+
+		if (! _has (opts, 'name')) {
+			throw new Error ('filemanager.mkdir() - Missing parameter: name');
+		}
+
+		$.get (
+			self.prefix + 'mkdir/' + opts.path + '/' + opts.name,
+			callback
+		);
+	};
+
+	// Delete a file
+	self.rm = function (opts, callback) {
+		if (! _has (opts, 'path')) {
+			throw new Error ('filemanager.rm() - Missing parameter: path');
+		}
+
+		$.get (
+			self.prefix + 'rm/' + opts.path,
+			callback
+		);
+	};
+
+	// Rename a file
+	self.mv = function (opts, callback) {
+		if (! _has (opts, 'path')) {
+			throw new Error ('filemanager.mv() - Missing parameter: path');
+		}
+
+		if (! _has (opts, 'rename')) {
+			throw new Error ('filemanager.mv() - Missing parameter: rename');
+		}
+
+		$.get (
+			self.prefix + 'rm/' + opts.path
+				+ '?rename=' + encodeURIComponent (opts.rename),
+			callback
+		);
+	};
+
+	// Move a file into a different folder
+	self.drop = function (opts, callback) {
+		if (! _has (opts, 'path')) {
+			throw new Error ('filemanager.drop() - Missing parameter: path');
+		}
+
+		if (! _has (opts, 'folder')) {
+			throw new Error ('filemanager.drop() - Missing parameter: folder');
+		}
+
+		$.get (
+			self.prefix + 'drop/' + opts.path
+				+ '?folder=' + encodeURIComponent (opts.folder),
+			callback
+		);
+	};
+
+	// Update a property value for a file
+	self.prop = function (opts, callback) {
+		if (! _has (opts, 'path')) {
+			throw new Error ('filemanager.prop() - Missing parameter: path');
+		}
+
+		if (! _has (opts, 'prop')) {
+			throw new Error ('filemanager.prop() - Missing parameter: prop');
+		}
+
+		if (! _has (opts, 'value')) {
+			throw new Error ('filemanager.prop() - Missing parameter: value');
+		}
+
+		$.get (
+			self.prefix + 'prop/' + opts.path
+				+ '?prop=' + encodeURIComponent (opts.prop)
+				+ '&value=' + encodeURIComponent (opts.value),
+			callback
+		);
+	};
+
+	return self;
+})(jQuery);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/filemanager/js/flashmediaelement.swf and elefant-elefant_1_3_3_beta/apps/filemanager/js/flashmediaelement.swf are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.colorbox.min.js elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.colorbox.min.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.colorbox.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.colorbox.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,7 @@
+/*
+	jQuery ColorBox v1.3.27
+	(c) 2013 Jack Moore - jacklmoore.com/colorbox
+	updated: 2013-01-23
+	license: http://www.opensource.org/licenses/mit-license.php
+*/
+(function(e,t,i){function o(i,o,n){var h=t.createElement(i);return o&&(h.id=U+o),n&&(h.style.cssText=n),e(h)}function n(e){var t=b.length,i=(j+e)%t;return 0>i?t+i:i}function h(e,t){return Math.round((/%/.test(e)?("x"===t?T.width():T.height())/100:1)*parseInt(e,10))}function r(e){return _.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(e)}function l(){var t,i=e.data(N,J);null==i?(_=e.extend({},$),console&&console.log&&console.log("Error: cboxElement missing settings object")):_=e.extend({},i);for(t in _)e.isFunction(_[t])&&"on"!==t.slice(0,2)&&(_[t]=_[t].call(N));_.rel=_.rel||N.rel||e(N).data("rel")||"nofollow",_.href=_.href||e(N).attr("href"),_.title=_.title||N.title,"string"==typeof _.href&&(_.href=e.trim(_.href))}function s(i,o){e(t).trigger(i),e("*",p).trigger(i),o&&o.call(N)}function a(){var e,t,i,o=U+"Slideshow_",n="click."+U;_.slideshow&&b[1]?(t=function(){I.html(_.slideshowStop).unbind(n).bind(et,function(){(_.loop||b[j+1])&&(e=setTimeout(G.next,_.slideshowSpeed))}).bind(Z,function(){clearTimeout(e)}).one(n+" "+tt,i),p.removeClass(o+"off").addClass(o+"on"),e=setTimeout(G.next,_.slideshowSpeed)},i=function(){clearTimeout(e),I.html(_.slideshowStart).unbind([et,Z,tt,n].join(" ")).one(n,function(){G.next(),t()}),p.removeClass(o+"on").addClass(o+"off")},_.slideshowAuto?t():i()):p.removeClass(o+"off "+o+"on")}function d(i){R||(N=i,l(),b=e(N),j=0,"nofollow"!==_.rel&&(b=e("."+V).filter(function(){var t,i=e.data(this,J);return i&&(t=e(this).data("rel")||i.rel||this.rel),t===_.rel}),j=b.index(N),-1===j&&(b=b.add(N),j=b.length-1)),O||(O=P=!0,p.show(),_.returnFocus&&(e(N).blur(),e(t).one(it,function(){e(N).focus()})),f.css({opacity:parseFloat(_.opacity),cursor:_.overlayClose?"pointer":"auto"}).show(),_.w=h(_.initialWidth,"x"),_.h=h(_.initialHeight,"y"),G.position(),ht&&T.bind("resize."+rt+" scroll."+rt,function(){f.css({width:T.width(),height:T.height(),top:T.scrollTop(),left:T.scrollLeft()})}).trigger("resize."+rt),s(Y,_.onOpen),F.add(k).hide(),S.html(_.close).show()),G.load(!0))}function c(){!p&&t.body&&(X=!1,T=e(i),p=o(lt).attr({id:J,"class":nt?U+(ht?"IE6":"IE"):""}).hide(),f=o(lt,"Overlay",ht?"position:absolute":"").hide(),H=o(lt,"LoadingOverlay").add(o(lt,"LoadingGraphic")),m=o(lt,"Wrapper"),w=o(lt,"Content").append(C=o(lt,"LoadedContent","width:0; height:0; overflow:hidden"),k=o(lt,"Title"),E=o(lt,"Current"),L=o(lt,"Next"),M=o(lt,"Previous"),I=o(lt,"Slideshow").bind(Y,a),S=o(lt,"Close")),m.append(o(lt).append(o(lt,"TopLeft"),g=o(lt,"TopCenter"),o(lt,"TopRight")),o(lt,!1,"clear:left").append(y=o(lt,"MiddleLeft"),w,x=o(lt,"MiddleRight")),o(lt,!1,"clear:left").append(o(lt,"BottomLeft"),v=o(lt,"BottomCenter"),o(lt,"BottomRight"))).find("div div").css({"float":"left"}),W=o(lt,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),F=L.add(M).add(E).add(I),e(t.body).append(f,p.append(m,W)))}function u(){return p?(X||(X=!0,K=g.height()+v.height()+w.outerHeight(!0)-w.height(),z=y.width()+x.width()+w.outerWidth(!0)-w.width(),D=C.outerHeight(!0),B=C.outerWidth(!0),L.click(function(){G.next()}),M.click(function(){G.prev()}),S.click(function(){G.close()}),f.click(function(){_.overlayClose&&G.close()}),e(t).bind("keydown."+U,function(e){var t=e.keyCode;O&&_.escKey&&27===t&&(e.preventDefault(),G.close()),O&&_.arrowKey&&b[1]&&(37===t?(e.preventDefault(),M.click()):39===t&&(e.preventDefault(),L.click()))}),e(t).delegate("."+V,"click",function(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),d(this))})),!0):!1}var f,p,m,w,g,y,x,v,b,T,C,W,H,k,E,I,L,M,S,F,_,K,z,D,B,N,j,A,O,P,R,q,G,Q,X,$={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},J="colorbox",U="cbox",V=U+"Element",Y=U+"_open",Z=U+"_load",et=U+"_complete",tt=U+"_cleanup",it=U+"_closed",ot=U+"_purge",nt=!e.support.leadingWhitespace,ht=nt&&!i.XMLHttpRequest,rt=U+"_IE6",lt="div";e.colorbox||(e(c),G=e.fn[J]=e[J]=function(t,i){var o=this;if(t=t||{},c(),u()){if(e.isFunction(o))o=e("<a/>"),t.open=!0;else if(!o[0])return o;i&&(t.onComplete=i),o.each(function(){e.data(this,J,e.extend({},e.data(this,J)||$,t))}).addClass(V),(e.isFunction(t.open)&&t.open.call(o)||t.open)&&d(o[0])}return o},G.position=function(e,t){function i(e){g[0].style.width=v[0].style.width=w[0].style.width=parseInt(e.style.width,10)-z+"px",w[0].style.height=y[0].style.height=x[0].style.height=parseInt(e.style.height,10)-K+"px"}var o,n,r,l=0,s=0,a=p.offset();T.unbind("resize."+U),p.css({top:-9e4,left:-9e4}),n=T.scrollTop(),r=T.scrollLeft(),_.fixed&&!ht?(a.top-=n,a.left-=r,p.css({position:"fixed"})):(l=n,s=r,p.css({position:"absolute"})),s+=_.right!==!1?Math.max(T.width()-_.w-B-z-h(_.right,"x"),0):_.left!==!1?h(_.left,"x"):Math.round(Math.max(T.width()-_.w-B-z,0)/2),l+=_.bottom!==!1?Math.max(T.height()-_.h-D-K-h(_.bottom,"y"),0):_.top!==!1?h(_.top,"y"):Math.round(Math.max(T.height()-_.h-D-K,0)/2),p.css({top:a.top,left:a.left}),e=p.width()===_.w+B&&p.height()===_.h+D?0:e||0,m[0].style.width=m[0].style.height="9999px",o={width:_.w+B+z,height:_.h+D+K,top:l,left:s},0===e&&p.css(o),p.dequeue().animate(o,{duration:e,complete:function(){i(this),P=!1,m[0].style.width=_.w+B+z+"px",m[0].style.height=_.h+D+K+"px",_.reposition&&setTimeout(function(){T.bind("resize."+U,G.position)},1),t&&t()},step:function(){i(this)}})},G.resize=function(e){O&&(e=e||{},e.width&&(_.w=h(e.width,"x")-B-z),e.innerWidth&&(_.w=h(e.innerWidth,"x")),C.css({width:_.w}),e.height&&(_.h=h(e.height,"y")-D-K),e.innerHeight&&(_.h=h(e.innerHeight,"y")),e.innerHeight||e.height||(C.css({height:"auto"}),_.h=C.height()),C.css({height:_.h}),G.position("none"===_.transition?0:_.speed))},G.prep=function(i){function h(){return _.w=_.w||C.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function l(){return _.h=_.h||C.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if(O){var a,d="none"===_.transition?0:_.speed;C.empty().remove(),C=o(lt,"LoadedContent").append(i),C.hide().appendTo(W.show()).css({width:h(),overflow:_.scrolling?"auto":"hidden"}).css({height:l()}).prependTo(w),W.hide(),e(A).css({"float":"none"}),a=function(){function i(){nt&&p[0].style.removeAttribute("filter")}var h,l,a=b.length,c="frameBorder",u="allowTransparency";O&&(l=function(){clearTimeout(q),H.detach().hide(),s(et,_.onComplete)},nt&&A&&C.fadeIn(100),k.html(_.title).add(C).show(),a>1?("string"==typeof _.current&&E.html(_.current.replace("{current}",j+1).replace("{total}",a)).show(),L[_.loop||a-1>j?"show":"hide"]().html(_.next),M[_.loop||j?"show":"hide"]().html(_.previous),_.slideshow&&I.show(),_.preloading&&e.each([n(-1),n(1)],function(){var t,i,o=b[this],n=e.data(o,J);n&&n.href?(t=n.href,e.isFunction(t)&&(t=t.call(o))):t=o.href,r(t)&&(i=new Image,i.src=t)})):F.hide(),_.iframe?(h=o("iframe")[0],c in h&&(h[c]=0),u in h&&(h[u]="true"),_.scrolling||(h.scrolling="no"),e(h).attr({src:_.href,name:(new Date).getTime(),"class":U+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",l).appendTo(C),e(t).one(ot,function(){h.src="//about:blank"}),_.fastIframe&&e(h).trigger("load")):l(),"fade"===_.transition?p.fadeTo(d,1,i):i())},"fade"===_.transition?p.fadeTo(d,0,function(){G.position(0,a)}):G.position(d,a)}},G.load=function(i){var n,a,d,c=G.prep;P=!0,A=!1,N=b[j],i||l(),Q&&p.add(f).removeClass(Q),_.className&&p.add(f).addClass(_.className),Q=_.className,s(ot),s(Z,_.onLoad),_.h=_.height?h(_.height,"y")-D-K:_.innerHeight&&h(_.innerHeight,"y"),_.w=_.width?h(_.width,"x")-B-z:_.innerWidth&&h(_.innerWidth,"x"),_.mw=_.w,_.mh=_.h,_.maxWidth&&(_.mw=h(_.maxWidth,"x")-B-z,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.maxHeight&&(_.mh=h(_.maxHeight,"y")-D-K,_.mh=_.h&&_.h<_.mh?_.h:_.mh),n=_.href,q=setTimeout(function(){H.show().appendTo(w)},100),_.inline?(d=o(lt).hide().insertBefore(e(n)[0]),e(t).one(ot,function(){d.replaceWith(C.children())}),c(e(n))):_.iframe?c(" "):_.html?c(_.html):r(n)?(e(A=new Image).addClass(U+"Photo").bind("error",function(){_.title=!1,c(o(lt,"Error").html(_.imgError))}).on("load",function(){var e;_.scalePhotos&&(a=function(){A.height-=A.height*e,A.width-=A.width*e},_.mw&&A.width>_.mw&&(e=(A.width-_.mw)/A.width,a()),_.mh&&A.height>_.mh&&(e=(A.height-_.mh)/A.height,a())),_.h&&(A.style.marginTop=Math.max(_.h-A.height,0)/2+"px"),b[1]&&(_.loop||b[j+1])&&(A.style.cursor="pointer",A.onclick=function(){G.next()}),nt&&(A.style.msInterpolationMode="bicubic"),setTimeout(function(){c(A)},1)}),setTimeout(function(){A.src=n},1)):n&&W.load(n,_.data,function(t,i){c("error"===i?o(lt,"Error").html(_.xhrError):e(this).contents())})},G.next=function(){!P&&b[1]&&(_.loop||b[j+1])&&(j=n(1),G.load())},G.prev=function(){!P&&b[1]&&(_.loop||j)&&(j=n(-1),G.load())},G.close=function(){O&&!R&&(R=!0,O=!1,s(tt,_.onCleanup),T.unbind("."+U+" ."+rt),f.fadeTo(200,0),p.stop().fadeTo(300,0,function(){p.add(f).css({opacity:1,cursor:"auto"}).hide(),s(ot),C.empty().remove(),setTimeout(function(){R=!1,s(it,_.onClosed)},1)}))},G.remove=function(){e([]).add(p).add(f).remove(),p=null,e("."+V).removeData(J).removeClass(V),e(t).undelegate("."+V)},G.element=function(){return e(N)},G.settings=$)})(jQuery,document,window);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.cycle.all.min.js and elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.cycle.all.min.js are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.filebrowser.js elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.filebrowser.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.filebrowser.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.filebrowser.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,339 @@
+/**
+ * Used by the filemanager/util/browser handler to provide a file
+ * browser for app developers.
+ */
+;(function ($) {
+	var self = {};
+
+	// Current list of options
+	self.opts = {};
+
+	// The folder prefix for file paths
+	self.prefix = '/files/';
+
+	// jQuery reference to #filebrowser-dirs
+	self.dirs = null;
+
+	// jQuery reference to #filebrowser-list
+	self.list = null;
+	
+	// jQuery reference to #filebrowser-upload
+	self.upload = null;
+
+	// A regular expression matching any of the allowed file extensions
+	self.extensions = null;
+
+	// Shorten a file name if it's too long
+	self.shorten = function (name) {
+		return (name.length < 30)
+			? name
+			: name.substr (0, 17) + '...' + name.slice (-9);
+	};
+
+	// Callback to update list of folders
+	self.update_dirs = function (res) {
+		if (! res.success) {
+			return;
+		}
+
+		for (var i in res.data) {
+			var option = $('<option></option>')
+				.attr ('value', res.data[i])
+				.text ('files/' + res.data[i]);
+
+			if (self.opts.path === res.data[i]) {
+				option.attr ('selected', 'selected');
+			}
+
+			self.dirs.append (option);
+		}
+	};
+
+	// Callback to update list of files
+	self.update_list = function (res) {
+		if (! res.success) {
+			return;
+		}
+
+		self.list.empty ();
+
+		// Initialize columns for file lists
+		if (! self.opts.thumbs) {
+			self.list.append ('<ul id="filebrowser-col-a"></ul><ul id="filebrowser-col-b"></ul>');
+			var list = $('#filebrowser-col-a');
+
+			if (res.data.files.length > 8) {
+				col_b_after = Math.ceil (res.data.files.length / 2);
+			} else {
+				col_b_after = res.data.files.length;
+			}
+		}
+
+		for (var i in res.data.files) {
+			if (self.extensions && ! res.data.files[i].path.match (self.extensions)) {
+				continue;
+			}
+
+			if (! self.opts.thumbs) {
+				// Create list items
+				if (i >= col_b_after) {
+					list = $('#filebrowser-col-b');
+				}
+
+				list.append (
+					$('<li></li>')
+						.append (
+							$('<img />')
+								.attr ('src', '/apps/admin/css/admin/file.png')
+								.css ({
+									'padding-right': '5px',
+									'margin-top': '-2px'
+								})
+						)
+						.append (
+							$('<a></a>')
+								.attr ('href', '#')
+								.attr ('class', 'filebrowser-file')
+								.attr ('title', res.data.files[i].name)
+								.data ('file', res.data.files[i].path)
+								.text (self.shorten (res.data.files[i].name))
+								.click (self.select_file)
+						)
+				);
+
+			} else {
+				// Create thumbnails
+				self.list.append (
+					$('<a></a>')
+						.attr ('href', '#')
+						.attr ('class', 'filebrowser-thumb')
+						.attr ('title', res.data.files[i].name)
+						.data ('file', res.data.files[i].path)
+						.click (self.select_file)
+						.append ('<img src="' + self.prefix + res.data.files[i].path + '" />')
+				);
+			}
+		}
+	};
+
+	// Fetch folder of files
+	self.fetch_list = function () {
+		$('#filebrowser-dirs option:selected').each (function () {
+			self.opts.path = $(this).val ();
+			filemanager.ls ({path: self.opts.path}, self.update_list);
+		});
+	};
+
+	// Select and return a file
+	self.select_file = function () {
+		var file = $(this).data ('file');
+
+		if (self.opts.set_value) {
+			$(self.opts.set_value).val (self.prefix + file);
+		}
+
+		if (self.opts.callback) {
+			self.opts.callback (self.prefix + file);
+		}
+
+		$.close_dialog ();
+		return false;
+	};
+
+	// Return an array of allowed mime types
+	self.allowed_mimes = function () {
+		if (self.opts.allowed.length === 0) {
+			return [];
+		}
+
+		var mimes = [];
+		for (var i = 0; i < self.opts.allowed.length; i++) {
+			if (self.opts.mimes[self.opts.allowed[i]]) {
+				mimes.push (self.opts.mimes[self.opts.allowed[i]]);
+			}
+		}
+		return mimes;
+	};
+
+	$.filebrowser = function (opts) {
+		var defaults = {
+			allowed: [],
+			callback: null,
+			set_value: null,
+			title: $.i18n ('Choose a file'),
+			new_file: $.i18n ('New file'),
+			uploading_text: $.i18n ('Uploading...'),
+			thumbs: false,
+			path: '',
+			uploading: 0,
+			mimes: {
+				jpg: 'image/jpeg',
+				jpeg: 'image/jpeg',
+				png: 'image/png',
+				gif: 'image/gif',
+				mp4: 'video/mp4',
+				m4v: 'video/x-m4v',
+				flv: 'video/x-flv',
+				f4v: 'video/mp4',
+				mp3: 'audio/mp3',
+				pdf: 'application/pdf',
+				doc: 'application/msword',
+				docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
+				xls: 'application/vnd.ms-excel',
+				xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
+				ppt: 'application/vnd.ms-powerpoint',
+				pptx: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
+				txt: 'text/plain',
+				html: 'text/html',
+				js: 'text/javascript',
+				css: 'text/css'
+			}
+		};
+
+		self.opts = $.extend (defaults, opts);
+
+		if (self.opts.thumbs) {
+			self.opts.allowed = ['jpg', 'jpeg', 'png', 'gif'];
+		}
+
+		self.extensions = self.opts.allowed.length
+			? new RegExp ('\.(' + self.opts.allowed.join ('|') + ')$', 'i')
+			: null;
+
+		$.open_dialog (
+			self.opts.title,
+			'<div id="filebrowser-dropzone">' +
+				'<form method="post" enctype="multipart/form-data">' +
+					'<div id="filebrowser-upload">' +
+						'<div id="filebrowser-upload-form">' +
+							self.opts.new_file + ': ' +
+							'<input type="file" name="file[]" id="filebrowser-file" multiple="multiple" />' +
+						'</div>' +
+						'<div id="filebrowser-upload-progress">' +
+							'<div id="filebrowser-upload-progress-bar"></div>' +
+							'<div id="filebrowser-upload-progress-text">' + self.opts.uploading_text + '</div>' +
+						'</div>' +
+					'</div>' +
+					'<select id="filebrowser-dirs"><option value="">files</option></select>' +
+					'<div id="filebrowser-list"></div>' +
+				'</form>' +
+			'</div>'
+		);
+
+		self.dirs = $('#filebrowser-dirs');
+		self.list = $('#filebrowser-list');
+		self.upload = $('#filebrowser-upload');
+
+		self.dirs.change (self.fetch_list);
+
+		filemanager.dirs (self.update_dirs);
+		filemanager.ls ({path: self.opts.path}, self.update_list);
+
+		// Implements drag and drop file upload support,
+		// for browsers that support it, with fallback
+		// for those that don't.
+		$('#filebrowser-dropzone').filedrop ({
+			fallback_id: 'filebrowser-file',
+			url: '/filemanager/upload/drop',
+			paramname: 'file',
+			withCredentials: true,
+			data: {
+				path: function () {
+					return self.opts.path;
+				}
+			},
+			error: function (err, file) {
+				$('#filebrowser-dropzone').removeClass ('filebrowser-over');
+
+				// Reset the upload progress bar
+				$('#filebrowser-upload-progress-bar').css ('width', '5%');
+				$('#filebrowser-upload-progress').hide ();
+				$('#filebrowser-upload-form').show ();
+
+				switch (err) {
+					case 'FileTypeNotAllowed':
+						alert (
+							$.i18n ('Please upload one of the following file types')
+							+ ': ' +
+							self.opts.allowed.join (', ')
+						);
+						break;
+					case 'BrowserNotSupported':
+						alert ($.i18n ('Your browser does not support drag and drop file uploads.'));
+						break;
+					case 'TooManyFiles':
+						alert ($.i18n ('Please upload fewer files at a time.'));
+						break;
+					case 'FileTooLarge':
+						alert (
+							$.i18n ('The following file is too large to upload')
+							+ ': ' +
+							file.name
+						);
+						break;
+				}
+			},
+			allowedfiletypes: self.allowed_mimes (),
+			maxfiles: 12,
+			maxfilesize: filebrowser_max_filesize ? filebrowser_max_filesize : 2,
+			queuefiles: 2,
+			dragOver: function () {
+				$('#filebrowser-dropzone').addClass ('filebrowser-over');
+			},
+			dragLeave: function () {
+				$('#filebrowser-dropzone').removeClass ('filebrowser-over');
+			},
+			docLeave: function () {
+				$('#filebrowser-dropzone').removeClass ('filebrowser-over');
+			},
+			drop: function () {
+				$('#filebrowser-dropzone').removeClass ('filebrowser-over');
+			},
+			uploadStarted: function (i, file, len) {
+				// Save the total so we only notify at the end
+				self.opts.uploading = len;
+				
+				// Replace the upload field with a progress bar
+				$('#filebrowser-upload-form').hide ();
+				$('#filebrowser-upload-progress').show ();
+			},
+			uploadFinished: function (i, file, res, time) {
+				if (! res.success) {
+					alert (res.error);
+
+					// Reset the upload progress bar
+					$('#filebrowser-upload-progress-bar').css ('width', '5%');
+					$('#filebrowser-upload-progress').hide ();
+					$('#filebrowser-upload-form').show ();
+
+				} else {
+					if (i === self.opts.uploading - 1) {
+						// This is the last file, add notification
+						$.add_notification (res.data);
+
+						// Reset the upload progress bar
+						$('#filebrowser-upload-progress-bar').css ('width', '5%');
+						$('#filebrowser-upload-progress').hide ();
+						$('#filebrowser-upload-form').show ();
+
+						if (i === 0) {
+							// Only one file, auto-select it
+							$('<a></a>')
+								.data ('file', self.opts.path + '/' + file.name)
+								.click (self.select_file)
+								.click ();
+							return;
+						}
+
+						// Update the file list
+						filemanager.ls ({path: self.opts.path}, self.update_list);
+					}
+				}
+			},
+			progressUpdated: function (i, file, progress) {
+				// Update the progress bar
+				$('#filebrowser-upload-progress-bar').css ('width', progress + '%');
+			}
+		});
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.filedrop.js elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.filedrop.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.filedrop.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.filedrop.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,519 @@
+/*global jQuery:false, alert:false */
+
+/*
+ * Default text - jQuery plugin for html5 dragging files from desktop to browser
+ *
+ * Author: Weixi Yen
+ *
+ * Email: [Firstname][Lastname]@gmail.com
+ *
+ * Copyright (c) 2010 Resopollution
+ *
+ * Licensed under the MIT license:
+ *   http://www.opensource.org/licenses/mit-license.php
+ *
+ * Project home:
+ *   http://www.github.com/weixiyen/jquery-filedrop
+ *
+ * Version:  0.1.0
+ *
+ * Features:
+ *      Allows sending of extra parameters with file.
+ *      Works with Firefox 3.6+
+ *      Future-compliant with HTML5 spec (will work with Webkit browsers and IE9)
+ * Usage:
+ *  See README at project homepage
+ *
+ */
+;(function($) {
+
+  jQuery.event.props.push("dataTransfer");
+
+  var default_opts = {
+      fallback_id: '',
+      url: '',
+      refresh: 1000,
+      paramname: 'userfile',
+      allowedfiletypes:[],
+      maxfiles: 25,           // Ignored if queuefiles is set > 0
+      maxfilesize: 1,         // MB file size limit
+      queuefiles: 0,          // Max files before queueing (for large volume uploads)
+      queuewait: 200,         // Queue wait time if full
+      data: {},
+      headers: {},
+      drop: empty,
+      dragStart: empty,
+      dragEnter: empty,
+      dragOver: empty,
+      dragLeave: empty,
+      docEnter: empty,
+      docOver: empty,
+      docLeave: empty,
+      beforeEach: empty,
+      afterAll: empty,
+      rename: empty,
+      error: function(err, file, i, status) {
+        alert(err);
+      },
+      uploadStarted: empty,
+      uploadFinished: empty,
+      progressUpdated: empty,
+      globalProgressUpdated: empty,
+      speedUpdated: empty
+      },
+      errors = ["BrowserNotSupported", "TooManyFiles", "FileTooLarge", "FileTypeNotAllowed", "NotFound", "NotReadable", "AbortError", "ReadError"],
+      doc_leave_timer, stop_loop = false,
+      files_count = 0,
+      files,
+      useBinaryUrl = !jQuery.isFunction(FileReader.prototype.readAsBinaryString);
+
+  $.fn.filedrop = function(options) {
+    var opts = $.extend({}, default_opts, options),
+        global_progress = [];
+
+    this.on('drop', drop).on('dragstart', opts.dragStart).on('dragenter', dragEnter).on('dragover', dragOver).on('dragleave', dragLeave);
+    $(document).on('drop', docDrop).on('dragenter', docEnter).on('dragover', docOver).on('dragleave', docLeave);
+
+    $('#' + opts.fallback_id).change(function(e) {
+      opts.drop(e);
+      files = e.target.files;
+      files_count = files.length;
+      upload();
+    });
+
+    function drop(e) {
+      if( opts.drop.call(this, e) === false ) return false;
+      files = e.dataTransfer.files;
+      if (files === null || files === undefined || files.length === 0) {
+        opts.error(errors[0]);
+        return false;
+      }
+      files_count = files.length;
+      upload();
+      e.preventDefault();
+      return false;
+    }
+
+    function getBuilder(filename, filedata, mime, boundary) {
+      var dashdash = '--',
+          crlf = '\r\n',
+          builder = '';
+
+      if (opts.data) {
+        var params = $.param(opts.data).split(/&/);
+
+        $.each(params, function() {
+          var pair = this.split("=", 2),
+              name = decodeURIComponent(pair[0]),
+              val  = decodeURIComponent(pair[1]);
+
+          builder += dashdash;
+          builder += boundary;
+          builder += crlf;
+          builder += 'Content-Disposition: form-data; name="' + name + '"';
+          builder += crlf;
+          builder += crlf;
+          builder += val;
+          builder += crlf;
+        });
+      }
+
+      builder += dashdash;
+      builder += boundary;
+      builder += crlf;
+      builder += 'Content-Disposition: form-data; name="' + opts.paramname + '"';
+      builder += '; filename="' + filename + '"';
+      builder += crlf;
+
+      builder += 'Content-Type: ' + mime;
+      builder += crlf;
+      builder += crlf;
+
+      if (useBinaryUrl) {
+      	if (filedata !== null) {
+          builder += atob(filedata.split(',')[1]);
+        }
+      } else {
+        builder += filedata;
+      }
+      builder += crlf;
+
+      builder += dashdash;
+      builder += boundary;
+      builder += dashdash;
+      builder += crlf;
+      return builder;
+    }
+
+    function progress(e) {
+      if (e.lengthComputable) {
+        var percentage = Math.round((e.loaded * 100) / e.total);
+        if (this.currentProgress !== percentage) {
+
+          this.currentProgress = percentage;
+          opts.progressUpdated(this.index, this.file, this.currentProgress);
+
+          global_progress[this.global_progress_index] = this.currentProgress;
+          globalProgress();
+
+          var elapsed = new Date().getTime();
+          var diffTime = elapsed - this.currentStart;
+          if (diffTime >= opts.refresh) {
+            var diffData = e.loaded - this.startData;
+            var speed = diffData / diffTime; // KB per second
+            opts.speedUpdated(this.index, this.file, speed);
+            this.startData = e.loaded;
+            this.currentStart = elapsed;
+          }
+        }
+      }
+    }
+
+    function globalProgress() {
+      if (global_progress.length === 0) {
+        return;
+      }
+
+      var total = 0, index;
+      for (index in global_progress) {
+        if(global_progress.hasOwnProperty(index)) {
+          total = total + global_progress[index];
+        }
+      }
+
+      opts.globalProgressUpdated(Math.round(total / global_progress.length));
+    }
+
+    // Respond to an upload
+    function upload() {
+      stop_loop = false;
+
+      if (!files) {
+        opts.error(errors[0]);
+        return false;
+      }
+
+      if (opts.allowedfiletypes.push && opts.allowedfiletypes.length) {
+        for(var fileIndex = files.length;fileIndex--;) {
+          if(!files[fileIndex].type || $.inArray(files[fileIndex].type, opts.allowedfiletypes) < 0) {
+            opts.error(errors[3], files[fileIndex]);
+            return false;
+          }
+        }
+      }
+
+      var filesDone = 0,
+          filesRejected = 0;
+
+      if (files_count > opts.maxfiles && opts.queuefiles === 0) {
+        opts.error(errors[1]);
+        return false;
+      }
+
+      // Define queues to manage upload process
+      var workQueue = [];
+      var processingQueue = [];
+      var doneQueue = [];
+
+      // Add everything to the workQueue
+      for (var i = 0; i < files_count; i++) {
+        workQueue.push(i);
+      }
+
+      // Helper function to enable pause of processing to wait
+      // for in process queue to complete
+      var pause = function(timeout) {
+        setTimeout(process, timeout);
+        return;
+      };
+
+      // Process an upload, recursive
+      var process = function() {
+
+        var fileIndex;
+
+        if (stop_loop) {
+          return false;
+        }
+
+        // Check to see if are in queue mode
+        if (opts.queuefiles > 0 && processingQueue.length >= opts.queuefiles) {
+          return pause(opts.queuewait);
+        } else {
+          // Take first thing off work queue
+          fileIndex = workQueue[0];
+          workQueue.splice(0, 1);
+
+          // Add to processing queue
+          processingQueue.push(fileIndex);
+        }
+
+        try {
+          if (beforeEach(files[fileIndex]) !== false) {
+            if (fileIndex === files_count) {
+              return;
+            }
+            var reader = new FileReader(),
+                max_file_size = 1048576 * opts.maxfilesize;
+
+            reader.index = fileIndex;
+            if (files[fileIndex].size > max_file_size) {
+              opts.error(errors[2], files[fileIndex], fileIndex);
+              // Remove from queue
+              processingQueue.forEach(function(value, key) {
+                if (value === fileIndex) {
+                  processingQueue.splice(key, 1);
+                }
+              });
+              filesRejected++;
+              return true;
+            }
+
+            reader.onerror = function(e) {
+                switch(e.target.error.code) {
+                    case e.target.error.NOT_FOUND_ERR:
+                        opts.error(errors[4]);
+                        return false;
+                    case e.target.error.NOT_READABLE_ERR:
+                        opts.error(errors[5]);
+                        return false;
+                    case e.target.error.ABORT_ERR:
+                        opts.error(errors[6]);
+                        return false;
+                    default:
+                        opts.error(errors[7]);
+                        return false;
+                };
+            };
+
+            reader.onloadend = !opts.beforeSend ? send : function (e) {
+              opts.beforeSend(files[fileIndex], fileIndex, function () { send(e); });
+            };
+            
+            if (!useBinaryUrl) {
+                reader.readAsBinaryString(files[fileIndex]);
+            } else {
+            	reader.readAsDataURL(files[fileIndex]);
+            }
+
+          } else {
+            filesRejected++;
+          }
+        } catch (err) {
+          // Remove from queue
+          processingQueue.forEach(function(value, key) {
+            if (value === fileIndex) {
+              processingQueue.splice(key, 1);
+            }
+          });
+          if (window.console){ console.error(err); }
+          opts.error(errors[0]);
+          return false;
+        }
+
+        // If we still have work to do,
+        if (workQueue.length > 0) {
+          process();
+        }
+      };
+
+      var send = function(e) {
+
+        var fileIndex = ((typeof(e.srcElement) === "undefined") || e.srcElement === null? e.target : e.srcElement).index;
+
+        // Sometimes the index is not attached to the
+        // event object. Find it by size. Hack for sure.
+        if (e.target.index === undefined) {
+          e.target.index = getIndexBySize(e.total);
+        }
+
+        var xhr = new XMLHttpRequest(),
+            upload = xhr.upload,
+            file = files[e.target.index],
+            index = e.target.index,
+            start_time = new Date().getTime(),
+            boundary = '------multipartformboundary' + (new Date()).getTime(),
+            global_progress_index = global_progress.length,
+            builder,
+            newName = rename(file.name),
+            mime = file.type;
+
+        if (typeof newName === "string") {
+          builder = getBuilder(newName, e.target.result, mime, boundary);
+        } else {
+          builder = getBuilder(file.name, e.target.result, mime, boundary);
+        }
+
+        upload.index = index;
+        upload.file = file;
+        upload.downloadStartTime = start_time;
+        upload.currentStart = start_time;
+        upload.currentProgress = 0;
+        upload.global_progress_index = global_progress_index;
+        upload.startData = 0;
+        upload.addEventListener("progress", progress, false);
+
+		// Allow url to be a method
+		if (jQuery.isFunction(opts.url)) {
+	        xhr.open("POST", opts.url(), true);
+	    } else {
+	    	xhr.open("POST", opts.url, true);
+	    }
+
+        if (opts.withCredentials) {
+          xhr.withCredentials = opts.withCredentials;
+        }
+	    
+        xhr.setRequestHeader('content-type', 'multipart/form-data; boundary=' + boundary);
+
+        // Add headers
+        $.each(opts.headers, function(k, v) {
+          xhr.setRequestHeader(k, v);
+        });
+
+        xhr.sendAsBinary(builder);
+
+        global_progress[global_progress_index] = 0;
+        globalProgress();
+
+        opts.uploadStarted(index, file, files_count);
+
+        xhr.onload = function() {
+            var serverResponse = null;
+
+            if (xhr.responseText) {
+              try {
+                serverResponse = jQuery.parseJSON(xhr.responseText);
+              }
+              catch (e) {
+                serverResponse = xhr.responseText;
+              }
+            }
+
+            var now = new Date().getTime(),
+                timeDiff = now - start_time,
+                result = opts.uploadFinished(index, file, serverResponse, timeDiff, xhr);
+            filesDone++;
+
+            // Remove from processing queue
+            processingQueue.forEach(function(value, key) {
+              if (value === fileIndex) {
+                processingQueue.splice(key, 1);
+              }
+            });
+
+            // Add to donequeue
+            doneQueue.push(fileIndex);
+
+            // Make sure the global progress is updated
+            global_progress[global_progress_index] = 100;
+            globalProgress();
+
+            if (filesDone === (files_count - filesRejected)) {
+              afterAll();
+            }
+            if (result === false) {
+              stop_loop = true;
+            }
+          
+
+          // Pass any errors to the error option
+          if (xhr.status < 200 || xhr.status > 299) {
+            opts.error(xhr.statusText, file, fileIndex, xhr.status);
+          }
+        };
+      };
+
+      // Initiate the processing loop
+      process();
+    }
+
+    function getIndexBySize(size) {
+      for (var i = 0; i < files_count; i++) {
+        if (files[i].size === size) {
+          return i;
+        }
+      }
+
+      return undefined;
+    }
+
+    function rename(name) {
+      return opts.rename(name);
+    }
+
+    function beforeEach(file) {
+      return opts.beforeEach(file);
+    }
+
+    function afterAll() {
+      return opts.afterAll();
+    }
+
+    function dragEnter(e) {
+      clearTimeout(doc_leave_timer);
+      e.preventDefault();
+      opts.dragEnter.call(this, e);
+    }
+
+    function dragOver(e) {
+      clearTimeout(doc_leave_timer);
+      e.preventDefault();
+      opts.docOver.call(this, e);
+      opts.dragOver.call(this, e);
+    }
+
+    function dragLeave(e) {
+      clearTimeout(doc_leave_timer);
+      opts.dragLeave.call(this, e);
+      e.stopPropagation();
+    }
+
+    function docDrop(e) {
+      e.preventDefault();
+      opts.docLeave.call(this, e);
+      return false;
+    }
+
+    function docEnter(e) {
+      clearTimeout(doc_leave_timer);
+      e.preventDefault();
+      opts.docEnter.call(this, e);
+      return false;
+    }
+
+    function docOver(e) {
+      clearTimeout(doc_leave_timer);
+      e.preventDefault();
+      opts.docOver.call(this, e);
+      return false;
+    }
+
+    function docLeave(e) {
+      doc_leave_timer = setTimeout((function(_this) {
+        return function() {
+          opts.docLeave.call(_this, e);
+        };
+      })(this), 200);
+    }
+
+    return this;
+  };
+
+  function empty() {}
+
+  try {
+    if (XMLHttpRequest.prototype.sendAsBinary) {
+        return;
+    }
+    XMLHttpRequest.prototype.sendAsBinary = function(datastr) {
+      function byteValue(x) {
+        return x.charCodeAt(0) & 0xff;
+      }
+      var ords = Array.prototype.map.call(datastr, byteValue);
+      var ui8a = new Uint8Array(ords);
+      this.send(ui8a.buffer);
+    };
+  } catch (e) {}
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.filemanager.js elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.filemanager.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.filemanager.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.filemanager.js	2013-03-20 13:48:44.000000000 -0500
@@ -2,6 +2,19 @@
  * Used by the filemanager app to implement ajax functions.
  */
 (function ($) {
+	var filemanager = {
+		path: '',
+		aviary: null,
+		aviary_key: false,
+		aviary_current: false,
+		text_file: /\.(txt|html?|xml|md|csv|css|js|json)$/,
+		img_file: /\.(gif|png|jpe?g)$/,
+		max_filesize: 2,
+		strings: {
+			
+		}
+	};
+
 	$.extend ({
 		filemanager: function (cmd, options) {
 			var defaults = {
@@ -13,7 +26,7 @@
 			
 			switch (cmd) {
 				case 'mkdir':
-					var name = downcode ( prompt ('New folder name:', ''), dir_length );
+					var name = downcode ( prompt ($.i18n ('New folder name:'), ''), dir_length );
 					if (name) {
 						$.get (options.root + cmd + '/' + options.file + '/' + name, function (res) {
 							if (res.success) {
@@ -26,24 +39,34 @@
 					}
 					break;
 				case 'mv':
-					var name = downcode ( prompt ('Rename:', options.name), dir_length);
+					var name = downcode ( prompt ($.i18n ('Rename:'), options.name), dir_length);
 					if (name) {
 						$.get (options.root + cmd + '/' + options.file + '?rename=' + name, function (res) {
 							if (res.success) {
 								$.add_notification (res.data.msg);
-								$.filemanager ('ls', {file: filemanager_path});
+								$.filemanager ('ls', {file: filemanager.path});
 							} else {
 								$.add_notification (res.error);
 							}
 						});
 					}
 					break;
+				case 'drop':
+					$.get (options.root + cmd + '/' + options.file + '?folder=' + options.folder, function (res) {
+						if (res.success) {
+							$.add_notification (res.data.msg);
+							$.filemanager ('ls', {file: filemanager.path});
+						} else {
+							$.add_notification (res.error);
+						}
+					});
+					break;
 				case 'rm':
-					if (confirm ('Are you sure you want to delete this file?')) {
+					if (confirm ($.i18n ('Are you sure you want to delete this file?'))) {
 						$.get (options.root + cmd + '/' + options.file, function (res) {
 							if (res.success) {
 								$.add_notification (res.data.msg);
-								$.filemanager ('ls', {file: filemanager_path});
+								$.filemanager ('ls', {file: filemanager.path});
 							} else {
 								$.add_notification (res.error);
 							}
@@ -58,11 +81,20 @@
 						if (res.success && res.data) {
 							if (res.data.dirs) {
 								for (var i = 0; i < res.data.dirs.length; i++) {
+									res.data.dirs[i]._name = res.data.dirs[i].name.replace (/'/g, '\\\'');
+									res.data.dirs[i]._path = res.data.dirs[i].path.replace (/'/g, '\\\'');
 									$.tmpl ('tpl_dir', res.data.dirs[i]).appendTo (tbody);
 								}
 							}
 							if (res.data.files) {
 								for (var i = 0; i < res.data.files.length; i++) {
+									res.data.files[i].is_img = res.data.files[i].name.match (filemanager.img_file);
+									res.data.files[i].image_file = (filemanager.aviary !== null)
+										? res.data.files[i].name.match (filemanager.img_file)
+										: false;
+									res.data.files[i].text_file = res.data.files[i].name.match (filemanager.text_file);
+									res.data.files[i]._name = res.data.files[i].name.replace (/'/g, '\\\'');
+									res.data.files[i]._path = res.data.files[i].path.replace (/'/g, '\\\'');
 									$.tmpl ('tpl_file', res.data.files[i]).appendTo (tbody);
 								}
 							}
@@ -66,7 +98,33 @@
 									$.tmpl ('tpl_file', res.data.files[i]).appendTo (tbody);
 								}
 							}
+
 							$.localize_dates ();
+
+							$('.draggable').draggable ({
+								cursor: 'move',
+								revert: 'invalid'
+							});
+
+							$('.dropzone').droppable ({
+								accept: '.draggable',
+								tolerance: 'pointer',
+								drop: function (event, ui) {
+									var type = ui.draggable[0].nodeName.toLowerCase (),
+										src = ui.draggable,
+										folder = $(this).data ('folder');
+
+									if (type === 'a' || type === 'img') {
+										src = src.parent ();
+									}
+
+									var file = src.data ('file');
+									file = file ? file : src.data ('folder');
+
+									//console.log (file + ' -> ' + folder);									
+									$.filemanager ('drop', {file: file, folder: folder});
+								}
+							});
 						}
 					});
 					break;
@@ -79,11 +137,142 @@
 						);
 					});
 					break;
+				case 'img':
+					// edit an image
+					var url = window.location.href.split ('/filemanager')[0] + '/files/' + options.file;
+					filemanager.aviary_current = options.file;
+					$('#aviary-tmp').attr ('src', url);
+
+					filemanager.aviary.launch ({
+						image: 'aviary-tmp',
+						url: url
+					});
+					break;
 			}
 			return false;
 		}
 	});
 
+	$.filemanager_init = function (options) {
+		filemanager = $.extend (filemanager, options);
+
+		$.filemanager ('ls', {file: filemanager.path});
+
+		if (filemanager.aviary_key) {
+			filemanager.aviary = new Aviary.Feather ({
+				apiKey: filemanager.aviary_key,
+				apiVersion: 2,
+				tools: 'all',
+				appendTo: '',
+				onSave: function (img, url) {
+					// send update to server
+					$.get ('/filemanager/edit/img?file=' + encodeURIComponent (filemanager.aviary_current) + '&url=' + encodeURIComponent (url), function (res) {
+						if (! res.success) {
+							$.add_notification (res.error);
+						} else {
+							$.add_notification (res.data);
+						}
+					});
+				}
+			});
+		}
+
+		$('#filemanager-dropzone').filedrop ({
+			fallback_id: 'file-upload',
+			url: '/filemanager/upload/drop',
+			paramname: 'file',
+			withCredentials: true,
+			data: {
+				path: function () {
+					return filemanager.path
+				}
+			},
+			error: function (err, file) {
+				$('#filemanager-dropzone').removeClass ('filemanager-over');
+
+				// Reset the upload progress bar
+				hide_progress_bar ();
+
+				switch (err) {
+					case 'BrowserNotSupported':
+						alert ($.i18n ('Your browser does not support drag and drop file uploads.'));
+						break;
+					case 'TooManyFiles':
+						alert ($.i18n ('Please upload fewer files at a time.'));
+						break;
+					case 'FileTooLarge':
+						alert (
+							$.i18n ('The following file is too large to upload')
+							+ ': ' +
+							file.name
+						);
+						break;
+				}
+			},
+			maxfiles: 12,
+			maxfilesize: filemanager.max_filesize,
+			queuefiles: 2,
+			dragOver: function () {
+				$('#filemanager-dropzone').addClass ('filemanager-over');
+			},
+			dragLeave: function () {
+				$('#filemanager-dropzone').removeClass ('filemanager-over');
+			},
+			dropLeave: function () {
+				$('#filemanager-dropzone').removeClass ('filemanager-over');
+			},
+			drop: function () {
+				$('#filemanager-dropzone').removeClass ('filemanager-over');
+			},
+			uploadStarted: function (i, file, len) {
+				// Save the total so we only notify at the end
+				filemanager._upload_total = len;
+
+				// Replace the upload field with a progress bar
+				show_progress_bar ();
+			},
+			uploadFinished: function (i, file, res, time) {
+				if (! res.success) {
+					alert (res.error);
+
+					// Reset the upload progress bar
+					hide_progress_bar ();
+				
+				} else {
+					if (i === filemanager._upload_total - 1) {
+						// This is the last file, add notification
+						$.add_notification (res.data);
+						
+						// Update the file list
+						$.filemanager ('ls', {file: filemanager.path});
+						
+						// Reset the upload progress bar
+						hide_progress_bar ();
+					}
+				}
+			},
+			progressUpdated: function (i, file, progress) {
+				// Update the progress bar
+				$('#filemanager-upload-progress-bar').css ('width', progress + '%');
+			}
+		});
+	};
+
+	function show_progress_bar () {
+		$('#filemanager-upload-form').css ({display: 'none'});
+		$('#filemanager-upload-progress-bar').css ({display: 'inline-block'});
+		$('#filemanager-upload-progress-text').css ({display: 'inline-block'});
+		$('#filemanager-upload-progress').css ({display: 'inline-block'});
+	}
+
+	function hide_progress_bar () {
+		$('#filemanager-upload-progress-bar').css ('width', '5%');
+		$('#filemanager-upload-progress-bar').css ({display: 'none'});
+		$('#filemanager-upload-progress-text').css ({display: 'none'});
+		$('#filemanager-upload-progress').css ({display: 'none'});
+		$('#filemanager-upload-form').css ({display: 'inline-block'});
+	}
+
 	$.filemanager_prop = function (form) {
 		var file = form.elements.file.value,
 			desc = form.elements.desc.value;
@@ -94,4 +283,19 @@
 		});
 		return false;
 	};
+
+	$.filemanager_verify_files = function (files) {
+		if (files.length === 0) {
+			return 'no_files';
+		}
+		for (var i = 0; i < files.length; i++) {
+			if (files[i].name === '') {
+				return 'invalid_name';
+			}
+			if (files[i].name.indexOf ('..') !== -1) {
+				return 'invalid_name';
+			}
+		}
+		return false;
+	};
 })(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.multi-file.js elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.multi-file.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.multi-file.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.multi-file.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,144 @@
+/**
+ * Used by the filemanager/util/multi-file handler to provide
+ * a multi-file selector for app developers.
+ */
+;(function ($) {
+	var self = {};
+
+	self.opts = {};
+
+	self.last_path = null;
+
+	// Get the file list as an array from the field
+	self.get_files = function () {
+		var files = $(self.opts.field).val ();
+		
+		if (files.length === 0) {
+			return [];
+		}
+
+		if (files.match ('|')) {
+			return files.split ('|');
+		}
+
+		return [files];
+	};
+
+	// Store the file list back into the field
+	self.set_files = function (files) {
+		$(self.opts.field).val (files.join ('|'));
+	};
+
+	// Add a file from the chooser
+	self.add_file = function (file) {
+		var files = self.get_files ();
+
+		self.last_path = self.dirname (file).replace (/^\/files\//, '');
+
+		// avoid duplicates
+		if ($.inArray (file, files) !== -1) {
+			return;
+		}
+
+		files.push (file);
+
+		self.set_files (files);
+		self.update_preview (files);
+	};
+
+	// Remove a file when it's been clicked
+	self.remove_file = function (e) {
+		e.preventDefault ();
+
+		var file = $(this).attr ('href'),
+			files = self.get_files ();
+
+		while (files.indexOf (file) !== -1) {
+			files.splice (files.indexOf (file), 1);
+		}
+		
+		self.set_files (files);
+		self.update_preview (files);
+	};
+
+	// Update the preview of the files
+	self.update_preview = function (files) {
+		var prev = $('#multi-file-list');
+		prev.html ('');
+		for (var i in files) {
+			prev.append (
+				$('<li></li>')
+					.append (
+						$('<a></a>')
+							.attr ('href', files[i])
+							.attr ('title', $.i18n ('Click to remove'))
+							.html ('<span class="icon-remove"></span>')
+							.click (self.remove_file)
+					)
+					.append (
+						$('<span></span>')
+							.attr ('title', files[i])
+							.text (files[i].replace (/^.*[\/\\]/g, ''))
+					)
+			);
+		}
+
+		// Allow files ot be sorted via drag and drop
+		$('#multi-file-list').sortable ({
+			distance: 5,
+			tolerance: 'pointer',
+			update: function (evt, ui) {
+				var files = [];
+				$('#multi-file-list li a').each (function () {
+					files.push ($(this).attr ('href'));
+				});
+				self.set_files (files);
+			}
+		});
+	};
+
+	// From http://phpjs.org/functions/dirname/
+	self.dirname = function (path) {
+		return path.replace(/\\/g, '/').replace(/\/[^\/]*\/?$/, '');
+	};
+
+	$.multi_file = function (opts) {
+		var defaults = {
+			field: '#files',
+			preview: '#files-preview',
+			allowed: [],
+			path: null
+		};
+
+		self.opts = $.extend (defaults, opts);
+		self.last_path = self.opts.path;
+
+		$(self.opts.preview)
+			.addClass ('multi-file-preview')
+			.append (
+				$('<ul></ul>')
+					.attr ('id', 'multi-file-list')
+			)
+			.append (
+				$('<button>' + $.i18n ('Browse files') + '</button>')
+					.attr ('id', 'multi-file-button')
+			);
+
+		var files = self.get_files ();
+		self.update_preview (files);
+
+		$('#multi-file-button').click (function () {
+			var fb_opts = {
+				callback: self.add_file,
+				allowed: self.opts.allowed
+			};
+
+			if (self.last_path !== null) {
+				fb_opts.path = self.last_path;
+			}
+
+			$.filebrowser (fb_opts);
+			return false;
+		});
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.multi-image.js elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.multi-image.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.multi-image.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.multi-image.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,137 @@
+/**
+ * Used by the filemanager/util/multi-image handler to provide
+ * a multi-image selector for app developers.
+ */
+;(function ($) {
+	var self = {};
+
+	self.opts = {};
+
+	self.last_path = null;
+
+	// Get the image list as an array from the field
+	self.get_images = function () {
+		var images = $(self.opts.field).val ();
+		
+		if (images.length === 0) {
+			return [];
+		}
+
+		if (images.match ('|')) {
+			return images.split ('|');
+		}
+
+		return [images];
+	};
+
+	// Store the image list back into the field
+	self.set_images = function (images) {
+		$(self.opts.field).val (images.join ('|'));
+	};
+
+	// Add an image from the chooser
+	self.add_image = function (file) {
+		var images = self.get_images ();
+
+		self.last_path = self.dirname (file).replace (/^\/files\//, '');
+
+		// avoid duplicates
+		if ($.inArray (file, images) !== -1) {
+			return;
+		}
+
+		images.push (file);
+
+		self.set_images (images);
+		self.update_preview (images);
+	};
+
+	// Remove an image when it's been clicked
+	self.remove_image = function () {
+		var file = $(this).attr ('src'),
+			images = self.get_images ();
+
+		while (images.indexOf (file) !== -1) {
+			images.splice (images.indexOf (file), 1);
+		}
+		
+		self.set_images (images);
+		self.update_preview (images);
+	};
+
+	// Update the preview of the images
+	self.update_preview = function (images) {
+		var prev = $('#multi-image-list');
+		prev.html ('');
+		for (var i in images) {
+			prev.append (
+				$('<div></div>').append (
+					$('<img>')
+						.attr ('src', images[i])
+						.attr ('title', $.i18n ('Click to remove, drag to re-order'))
+						.addClass ('sortable')
+						.click (self.remove_image)
+				)
+			);
+		}
+
+		// Allow images to be sorted via drag and drop
+		$('#multi-image-list').sortable ({
+			placeholder: 'multi-image-placeholder',
+			distance: 5,
+			helper: 'clone',
+			tolerance: 'pointer',
+			update: function (evt, ui) {
+				var images = [];
+				$('#multi-image-list div img').each (function () {
+					images.push ($(this).attr ('src'));
+				});
+				self.set_images (images);
+			}
+		});
+	};
+
+	// From http://phpjs.org/functions/dirname/
+	self.dirname = function (path) {
+		return path.replace(/\\/g, '/').replace(/\/[^\/]*\/?$/, '');
+	};
+
+	$.multi_image = function (opts) {
+		var defaults = {
+			field: '#images',
+			preview: '#images-preview',
+			path: null
+		};
+
+		self.opts = $.extend (defaults, opts);
+		self.last_path = self.opts.path;
+
+		$(self.opts.preview)
+			.addClass ('multi-image-preview')
+			.append (
+				$('<div></div>')
+					.attr ('id', 'multi-image-list')
+			)
+			.append (
+				$('<button>' + $.i18n ('Browse images') + '</button>')
+					.attr ('id', 'multi-image-button')
+			);
+
+		var images = self.get_images ();
+		self.update_preview (images);
+
+		$('#multi-image-button').click (function () {
+			var fb_opts = {
+				thumbs: true,
+				callback: self.add_image
+			};
+
+			if (self.last_path !== null) {
+				fb_opts.path = self.last_path;
+			}
+
+			$.filebrowser (fb_opts);
+			return false;
+		});
+	};
+})(jQuery);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/filemanager/js/jquery.tmpl.beta1.min.js and elefant-elefant_1_3_3_beta/apps/filemanager/js/jquery.tmpl.beta1.min.js are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/js/mediaelement-and-player.min.js and elefant-elefant_1_3_3_beta/apps/filemanager/js/mediaelement-and-player.min.js are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/js/swfobject.js and elefant-elefant_1_3_3_beta/apps/filemanager/js/swfobject.js are identical
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/cancel.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/cancel.png differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/jquery.uploadify.v2.1.4.min.js elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/jquery.uploadify.v2.1.4.min.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/jquery.uploadify.v2.1.4.min.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/jquery.uploadify.v2.1.4.min.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,26 +0,0 @@
-/*
-Uploadify v2.1.4
-Release Date: November 8, 2010
-
-Copyright (c) 2010 Ronnie Garcia, Travis Nickels
-
-Permission is hereby granted, free of charge, to any person obtaining a copy
-of this software and associated documentation files (the "Software"), to deal
-in the Software without restriction, including without limitation the rights
-to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
-copies of the Software, and to permit persons to whom the Software is
-furnished to do so, subject to the following conditions:
-
-The above copyright notice and this permission notice shall be included in
-all copies or substantial portions of the Software.
-
-THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
-THE SOFTWARE.
-*/
-
-if(jQuery){(function(a){a.extend(a.fn,{uploadify:function(b){a(this).each(function(){var f=a.extend({id:a(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:30,width:120,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:999,simUploadLimit:1,queueID:false,displayData:"percentage",removeCompleted:true,onInit:function(){},onSelect:function(){},onSelectOnce:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onClearQueue:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},b);a(this).data("settings",f);var e=location.pathname;e=e.split("/");e.pop();e=e.join("/")+"/";var g={};g.uploadifyID=f.id;g.pagepath=e;if(f.buttonImg){g.buttonImg=escape(f.buttonImg)}if(f.buttonText){g.buttonText=escape(f.buttonText)}if(f.rollover){g.rollover=true}g.script=f.script;g.folder=escape(f.folder);if(f.scriptData){var h="";for(var d in f.scriptData){h+="&"+d+"="+f.scriptData[d]}g.scriptData=escape(h.substr(1))}g.width=f.width;g.height=f.height;g.wmode=f.wmode;g.method=f.method;g.queueSizeLimit=f.queueSizeLimit;g.simUploadLimit=f.simUploadLimit;if(f.hideButton){g.hideButton=true}if(f.fileDesc){g.fileDesc=f.fileDesc}if(f.fileExt){g.fileExt=f.fileExt}if(f.multi){g.multi=true}if(f.auto){g.auto=true}if(f.sizeLimit){g.sizeLimit=f.sizeLimit}if(f.checkScript){g.checkScript=f.checkScript}if(f.fileDataName){g.fileDataName=f.fileDataName}if(f.queueID){g.queueID=f.queueID}if(f.onInit()!==false){a(this).css("display","none");a(this).after('<div id="'+a(this).attr("id")+'Uploader"></div>');swfobject.embedSWF(f.uploader,f.id+"Uploader",f.width,f.height,"9.0.24",f.expressInstall,g,{quality:"high",wmode:f.wmode,allowScriptAccess:f.scriptAccess},{},function(i){if(typeof(f.onSWFReady)=="function"&&i.success){f.onSWFReady()}});if(f.queueID==false){a("#"+a(this).attr("id")+"Uploader").after('<div id="'+a(this).attr("id")+'Queue" class="uploadifyQueue"></div>')}else{a("#"+f.queueID).addClass("uploadifyQueue")}}if(typeof(f.onOpen)=="function"){a(this).bind("uploadifyOpen",f.onOpen)}a(this).bind("uploadifySelect",{action:f.onSelect,queueID:f.queueID},function(k,i,j){if(k.data.action(k,i,j)!==false){var l=Math.round(j.size/1024*100)*0.01;var m="KB";if(l>1000){l=Math.round(l*0.001*100)*0.01;m="MB"}var n=l.toString().split(".");if(n.length>1){l=n[0]+"."+n[1].substr(0,2)}else{l=n[0]}if(j.name.length>20){fileName=j.name.substr(0,20)+"..."}else{fileName=j.name}queue="#"+a(this).attr("id")+"Queue";if(k.data.queueID){queue="#"+k.data.queueID}a(queue).append('<div id="'+a(this).attr("id")+i+'" class="uploadifyQueueItem"><div class="cancel"><a href="javascript:jQuery(\'#'+a(this).attr("id")+"').uploadifyCancel('"+i+'\')"><img src="'+f.cancelImg+'" border="0" /></a></div><span class="fileName">'+fileName+" ("+l+m+')</span><span class="percentage"></span><div class="uploadifyProgress"><div id="'+a(this).attr("id")+i+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div></div></div>')}});a(this).bind("uploadifySelectOnce",{action:f.onSelectOnce},function(i,j){i.data.action(i,j);if(f.auto){if(f.checkScript){a(this).uploadifyUpload(null,false)}else{a(this).uploadifyUpload(null,true)}}});a(this).bind("uploadifyQueueFull",{action:f.onQueueFull},function(i,j){if(i.data.action(i,j)!==false){alert("The queue is full.  The max size is "+j+".")}});a(this).bind("uploadifyCheckExist",{action:f.onCheck},function(n,m,l,k,p){var j=new Object();j=l;j.folder=(k.substr(0,1)=="/")?k:e+k;if(p){for(var i in l){var o=i}}a.post(m,j,function(s){for(var q in s){if(n.data.action(n,s,q)!==false){var r=confirm("Do you want to replace the file "+s[q]+"?");if(!r){document.getElementById(a(n.target).attr("id")+"Uploader").cancelFileUpload(q,true,true)}}}if(p){document.getElementById(a(n.target).attr("id")+"Uploader").startFileUpload(o,true)}else{document.getElementById(a(n.target).attr("id")+"Uploader").startFileUpload(null,true)}},"json")});a(this).bind("uploadifyCancel",{action:f.onCancel},function(n,j,m,o,i,l){if(n.data.action(n,j,m,o,l)!==false){if(i){var k=(l==true)?0:250;a("#"+a(this).attr("id")+j).fadeOut(k,function(){a(this).remove()})}}});a(this).bind("uploadifyClearQueue",{action:f.onClearQueue},function(k,j){var i=(f.queueID)?f.queueID:a(this).attr("id")+"Queue";if(j){a("#"+i).find(".uploadifyQueueItem").remove()}if(k.data.action(k,j)!==false){a("#"+i).find(".uploadifyQueueItem").each(function(){var l=a(".uploadifyQueueItem").index(this);a(this).delay(l*100).fadeOut(250,function(){a(this).remove()})})}});var c=[];a(this).bind("uploadifyError",{action:f.onError},function(m,i,l,k){if(m.data.action(m,i,l,k)!==false){var j=new Array(i,l,k);c.push(j);a("#"+a(this).attr("id")+i).find(".percentage").text(" - "+k.type+" Error");a("#"+a(this).attr("id")+i).find(".uploadifyProgress").hide();a("#"+a(this).attr("id")+i).addClass("uploadifyError")}});if(typeof(f.onUpload)=="function"){a(this).bind("uploadifyUpload",f.onUpload)}a(this).bind("uploadifyProgress",{action:f.onProgress,toDisplay:f.displayData},function(k,i,j,l){if(k.data.action(k,i,j,l)!==false){a("#"+a(this).attr("id")+i+"ProgressBar").animate({width:l.percentage+"%"},250,function(){if(l.percentage==100){a(this).closest(".uploadifyProgress").fadeOut(250,function(){a(this).remove()})}});if(k.data.toDisplay=="percentage"){displayData=" - "+l.percentage+"%"}if(k.data.toDisplay=="speed"){displayData=" - "+l.speed+"KB/s"}if(k.data.toDisplay==null){displayData=" "}a("#"+a(this).attr("id")+i).find(".percentage").text(displayData)}});a(this).bind("uploadifyComplete",{action:f.onComplete},function(l,i,k,j,m){if(l.data.action(l,i,k,unescape(j),m)!==false){a("#"+a(this).attr("id")+i).find(".percentage").text(" - Completed");if(f.removeCompleted){a("#"+a(l.target).attr("id")+i).fadeOut(250,function(){a(this).remove()})}a("#"+a(l.target).attr("id")+i).addClass("completed")}});if(typeof(f.onAllComplete)=="function"){a(this).bind("uploadifyAllComplete",{action:f.onAllComplete},function(i,j){if(i.data.action(i,j)!==false){c=[]}})}})},uploadifySettings:function(f,j,c){var g=false;a(this).each(function(){if(f=="scriptData"&&j!=null){if(c){var i=j}else{var i=a.extend(a(this).data("settings").scriptData,j)}var l="";for(var k in i){l+="&"+k+"="+i[k]}j=escape(l.substr(1))}g=document.getElementById(a(this).attr("id")+"Uploader").updateSettings(f,j)});if(j==null){if(f=="scriptData"){var b=unescape(g).split("&");var e=new Object();for(var d=0;d<b.length;d++){var h=b[d].split("=");e[h[0]]=h[1]}g=e}}return g},uploadifyUpload:function(b,c){a(this).each(function(){if(!c){c=false}document.getElementById(a(this).attr("id")+"Uploader").startFileUpload(b,c)})},uploadifyCancel:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").cancelFileUpload(b,true,true,false)})},uploadifyClearQueue:function(){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").clearFileUploadQueue(false)})}})})(jQuery)};
\ No newline at end of file
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/rollover.png and elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/rollover.png differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/swfobject.js elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/swfobject.js
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/swfobject.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/swfobject.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,4 +0,0 @@
-/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
-	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
-*/
-var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/uploadify.css elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/uploadify.css
--- elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/uploadify.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/uploadify.css	1969-12-31 18:00:00.000000000 -0600
@@ -1,52 +0,0 @@
-/*
-Uploadify v2.1.4
-Release Date: November 8, 2010
-
-Copyright (c) 2010 Ronnie Garcia, Travis Nickels
-
-Permission is hereby granted, free of charge, to any person obtaining a copy
-of this software and associated documentation files (the "Software"), to deal
-in the Software without restriction, including without limitation the rights
-to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
-copies of the Software, and to permit persons to whom the Software is
-furnished to do so, subject to the following conditions:
-
-The above copyright notice and this permission notice shall be included in
-all copies or substantial portions of the Software.
-
-THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
-THE SOFTWARE.
-*/
-.uploadifyQueueItem {
-	background-color: #F5F5F5;
-	border: 2px solid #E5E5E5;
-	font: 11px Verdana, Geneva, sans-serif;
-	margin-top: 5px;
-	padding: 10px;
-	width: 350px;
-}
-.uploadifyError {
-	background-color: #FDE5DD !important;
-	border: 2px solid #FBCBBC !important;
-}
-.uploadifyQueueItem .cancel {
-	float: right;
-}
-.uploadifyQueue .completed {
-	background-color: #E5E5E5;
-}
-.uploadifyProgress {
-	background-color: #E5E5E5;
-	margin-top: 10px;
-	width: 100%;
-}
-.uploadifyProgressBar {
-	background-color: #0099FF;
-	height: 3px;
-	width: 1px;
-}
\ No newline at end of file
Binary files elefant-elefant_1_3_2_beta/apps/filemanager/js/uploadify/uploadify.swf and elefant-elefant_1_3_3_beta/apps/filemanager/js/uploadify/uploadify.swf differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/lib/API.php elefant-elefant_1_3_3_beta/apps/filemanager/lib/API.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/lib/API.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/lib/API.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,144 @@
+<?php
+
+namespace filemanager;
+
+use DB, FileManager, I18n, Restful;
+
+/**
+ * Provides the JSON API for the admin file manager/browser, as well as functions
+ * to verify files and folders.
+ */
+class API extends Restful {
+	/**
+	 * Handle list directory requests (/filemanager/api/ls).
+	 */
+	public function get_ls () {
+		$file = urldecode (join ('/', func_get_args ()));
+
+		$res = FileManager::dir ($file);
+		if (! $res) {
+			return $this->error (FileManager::error ());
+		}
+
+		foreach ($res['dirs'] as $k => $dir) {
+			$res['dirs'][$k]['mtime'] = I18n::date_time ($dir['mtime']);
+		}
+
+		foreach ($res['files'] as $k => $file) {
+			$res['files'][$k]['mtime'] = I18n::date_time ($file['mtime']);
+			$res['files'][$k]['fsize'] = format_filesize ($file['fsize']);
+		}
+
+		return $res;
+	}
+
+	/**
+	 * Handle a directories request (/filemanager/api/dirs).
+	 */
+	public function get_dirs () {
+		return FileManager::list_folders ();
+	}
+
+	/**
+	 * Handle remove file requests (/filemanager/api/rm).
+	 */
+	public function get_rm () {
+		$file = urldecode (join ('/', func_get_args ()));
+
+		$res = FileManager::unlink ($file);
+		if (! $res) {
+			return $this->error (FileManager::error ());
+		}
+
+		$this->controller->hook ('filemanager/delete', array (
+			'file' => $file
+		));
+
+		return array ('msg' => __ ('File deleted.'), 'data' => $file);
+	}
+
+	/**
+	 * Handle rename requests (/filemanager/api/mv).
+	 */
+	public function get_mv () {
+		$file = urldecode (join ('/', func_get_args ()));
+
+		$is_folder = FileManager::verify_folder ($file) ? true : false;
+		
+		if (! FileManager::rename ($file, $_GET['rename'])) {
+			return $this->error (FileManager::error ());
+		}
+		$parts = explode ('/', $file);
+		$old = array_pop ($parts);
+		$new = preg_replace ('/' . preg_quote ($old) . '$/', $_GET['rename'], $file);
+		if ($is_folder) {
+			return array ('msg' => __ ('Folder renamed.'), 'data' => $new);
+		}
+		$this->controller->hook ('filemanager/rename', array (
+			'file' => $file,
+			'renamed' => $new
+		));
+		return array ('msg' => __ ('File renamed.'), 'data' => $new);
+	}
+
+	/**
+	 * Handle drop requests (/filemanager/api/drop), which move files between
+	 * folders.
+	 */
+	public function get_drop () {
+		$file = urldecode (join ('/', func_get_args ()));
+		
+		if (! FileManager::move ($file, $_GET['folder'])) {
+			return $this->error (FileManager::error ());
+		}
+
+		$new = $_GET['folder'] . '/' . basename ($file);
+		$this->controller->hook ('filemanager/drop', array (
+			'file' => $file,
+			'folder' => $_GET['folder'],
+			'new' => $new
+		));
+		return array ('msg' => __ ('File moved.'), 'data' => $new);
+	}
+
+	/**
+	 * Handle make directory requests (/filemanager/api/mkdir).
+	 */
+	public function get_mkdir () {
+		$file = urldecode (join ('/', func_get_args ()));
+		
+		if (! FileManager::mkdir ($file)) {
+			return $this->error (FileManager::error ());
+		}
+
+		return array ('msg' => __ ('Folder created.'), 'data' => $file);
+	}
+
+	/**
+	 * Handle property update requests (/filemanager/api/prop).
+	 */
+	public function get_prop () {
+		$file = urldecode (join ('/', func_get_args ()));
+		if (! FileManager::verify_file ($file, $this->root)) {
+			return $this->error (__ ('Invalid file name'));
+		}
+		if (! isset ($_GET['prop'])) {
+			return $this->error (__ ('Missing property name'));
+		}
+		if (isset ($_GET['value'])) {
+			// update and fetch
+			$res = FileManager::prop ($file, $_GET['prop'], $_GET['value']);
+		} else {
+			// fetch
+			$res = FileManager::prop ($file, $_GET['prop']);
+		}
+		return array (
+			'file' => $file,
+			'prop' => $_GET['prop'],
+			'value' => $res,
+			'msg' => __ ('Properties saved.')
+		);
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/lib/FileManager.php elefant-elefant_1_3_3_beta/apps/filemanager/lib/FileManager.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/lib/FileManager.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/lib/FileManager.php	2013-03-20 13:48:44.000000000 -0500
@@ -25,19 +25,35 @@
  */
 
 /**
- * Provides the JSON API for the admin file manager/browser, as well as functions
- * to verify files and folders.
+ * Provides an API for managing common file operations such as listing directory
+ * contents, renaming, and deleting files. Using this class, extended file
+ * properties will be correctly re-linked to files that are renamed or moved,
+ * and file and folder names and paths will be verified to be correct.
+ *
+ * Also note that file and folder paths are specified relative to `FileManager::root()`.
+ *
+ * Usage:
+ *
+ *     <?php
+ *     
+ *     // Get listing of files/homepage directory
+ *     $list = FileManager::dir ('homepage');
+ *     
+ *     // Delete files/homepage/photo1.jpg
+ *     $res = FileManager::unlink ('homepage/photo1.jpg');
+ *     
+ *     ?>
  */
-class FileManager extends Restful {
+class FileManager {
 	/**
 	 * The path to the root directory to store files.
 	 */
-	public $root;
+	public static $root = null;
 
 	/**
 	 * The web path to the root directory.
 	 */
-	public $webroot = '/files/';
+	public static $webroot = '/files/';
 
 	/**
 	 * The error message if an error occurs in one of the static methods.
@@ -45,45 +61,55 @@
 	public static $error;
 
 	/**
-	 * The controller object for the current request.
+	 * Returns the $root. Sets $root if not yet set.
 	 */
-	public $controller;
+	public static function root () {
+		if (self::$root === null) {
+			self::$root = getcwd () . self::$webroot;
+		}
+		return self::$root;
+	}
 
 	/**
-	 * Constructor sets $root.
+	 * Returns the last error message.
 	 */
-	public function __construct ($controller) {
-		$this->controller = $controller;
-		$this->root = getcwd () . $this->webroot;
+	public static function error () {
+		return self::$error;
 	}
 
 	/**
-	 * Handle list directory requests (/filemanager/api/ls).
+	 * List all directories and files in a directory. Returns an array
+	 * with 'dirs' and 'files'. Each directory has a 'name', 'path',
+	 * and 'mtime'. Each file also has 'fsize'.
 	 */
-	public function get_ls () {
-		$file = urldecode (join ('/', func_get_args ()));
+	public static function dir ($path = '') {
+		if (! self::verify_folder ($path)) {
+			self::$error = __ ('Invalid folder name');
+			return false;
+		}
 
-		if (! self::verify_folder ($file, $this->root)) {
-			return $this->error (i18n_get ('Invalid folder name'));
+		$d = dir (self::root () . $path);
+		if (! $d) {
+			self::$error = __ ('Unable to read folder');
+			return false;
 		}
 
-		$d = dir ($this->root . $file);
 		$out = array ('dirs' => array (), 'files' => array ());
 		while (false !=  ($entry = $d->read ())) {
 			if (preg_match ('/^\./', $entry)) {
 				continue;
-			} elseif (@is_dir ($this->root . $file . '/' . $entry)) {
+			} elseif (is_dir (self::root () . $path . '/' . $entry)) {
 				$out['dirs'][] = array (
 					'name' => $entry,
-					'path' => ltrim ($file . '/' . $entry, '/'),
-					'mtime' => I18n::date_time (filemtime ($this->root . $file . '/' . $entry))
+					'path' => ltrim ($path . '/' . $entry, '/'),
+					'mtime' => filemtime (self::root () . $path . '/' . $entry)
 				);
 			} else {
 				$out['files'][] = array (
 					'name' => $entry,
-					'path' => ltrim ($file . '/' . $entry, '/'),
-					'mtime' => I18n::date_time (filemtime ($this->root . $file . '/' . $entry)),
-					'fsize' => format_filesize (filesize ($this->root . $file . '/' . $entry))
+					'path' => ltrim ($path . '/' . $entry, '/'),
+					'mtime' => filemtime (self::root () . $path . '/' . $entry),
+					'fsize' => filesize (self::root () . $path . '/' . $entry)
 				);
 			}
 		}
@@ -94,111 +120,206 @@
 	}
 
 	/**
-	 * Handle remove file requests (/filemanager/api/rm).
+	 * Delete a file.
 	 */
-	public function get_rm () {
-		$file = urldecode (join ('/', func_get_args ()));
+	public static function unlink ($file) {
+		if (self::verify_folder ($file)) {
+			self::$error = __ ('Unable to delete folders');
+			return false;
+		} elseif (! self::verify_file ($file)) {
+			self::$error = __ ('File not found');
+			return false;
+		} elseif (! unlink (self::root () . $file)) {
+			self::$error = __ ('Unable to delete') . ' ' . $file;
+			return false;
+		}
+		self::prop_delete ($file);
+		return true;
+	}
 
-		if (self::verify_folder ($file, $this->root)) {
-			return $this->error (i18n_get ('Unable to delete folders'));
-		} elseif (! self::verify_file ($file, $this->root)) {
-			return $this->error (i18n_get ('File not found'));
-		} elseif (! unlink ($this->root . $file)) {
-			return $this->error (i18n_get ('Unable to delete') . ' ' . $file);
+	/**
+	 * Rename a file or folder.
+	 */
+	public static function rename ($file, $new_name) {
+		if (self::verify_folder ($file)) {
+			if (! self::verify_folder_name ($new_name)) {
+				self::$error = __ ('Invalid folder name');
+				return false;
+			}
+			$parts = explode ('/', $file);
+			$old = array_pop ($parts);
+			$new = preg_replace ('/' . preg_quote ($old) . '$/', $new_name, $file);
+			if (! rename (self::root () . $file, self::root () . $new)) {
+				self::$error = __ ('Unable to rename') . ' ' . $file;
+				return false;
+			}
+			self::prop_rename ($file, $new, true);
+			return true;
+		} elseif (self::verify_file ($file)) {
+			if (! self::verify_file_name ($new_name)) {
+				self::$error = __ ('Invalid file name');
+				return false;
+			}
+			$parts = explode ('/', $file);
+			$old = array_pop ($parts);
+			$new = preg_replace ('/' . preg_quote ($old) . '$/', $new_name, $file);
+			if (! rename (self::root () . $file, self::root () . $new)) {
+				self::$error = __ ('Unable to rename') . ' ' . $file;
+				return false;
+			}
+			FileManager::prop_rename ($file, $new);
+			return true;
 		}
-		FileManager::prop_delete ($file);
-		$this->controller->hook ('filemanager/delete', array (
-			'file' => $file
-		));
-		return array ('msg' => i18n_get ('File deleted.'), 'data' => $file);
+		self::$error = __ ('File not found');
+		return false;
 	}
 
 	/**
-	 * Handle rename requests (/filemanager/api/mv).
+	 * Move a file to a new folder.
 	 */
-	public function get_mv () {
-		$file = urldecode (join ('/', func_get_args ()));
-		
-		if (self::verify_folder ($file, $this->root)) {
-			if (! self::verify_folder_name ($_GET['rename'])) {
-				return $this->error (i18n_get ('Invalid folder name'));
-			} else {
-				$parts = explode ('/', $file);
-				$old = array_pop ($parts);
-				$new = preg_replace ('/' . preg_quote ($old) . '$/', $_GET['rename'], $file);
-				if (! rename ($this->root . $file, $this->root . $new)) {
-					return $this->error (i18n_get ('Unable to rename') . ' ' . $file);
-				}
-				FileManager::prop_rename ($file, $new, true);
-				return array ('msg' => i18n_get ('Folder renamed.'), 'data' => $new);
+	public static function move ($file, $folder) {
+		if (! self::verify_file ($file)) {
+			self::$error = __ ('File not found');
+			return false;
+		}
+
+		if (! self::verify_folder ($folder)) {
+			self::$error = __ ('Invalid folder');
+			return false;
+		}
+
+		$new = $folder . '/' . basename ($file);
+		if (! rename (self::root () . $file, self::root () . $new)) {
+			self::$error = __ ('Unable to move') . ' ' . $file;
+			return false;
+		}
+
+		self::prop_rename ($file, $new);
+		return true;
+	}
+
+	/**
+	 * Touch a file. If it exists, updates its modification
+	 * time. If not, creates a blank file.
+	 */
+	public static function touch ($file) {
+		if (! self::verify_file ($file)) {
+			$basename = basename ($file);
+			$path = pathinfo ($file, PATHINFO_DIRNAME);
+			if (! self::verify_folder ($path)) {
+				self::$error = __ ('Invalid folder');
+				return false;
 			}
-		} elseif (self::verify_file ($file, $this->root)) {
-			if (! self::verify_file_name ($_GET['rename'])) {
-				return $this->error (i18n_get ('Invalid file name'));
-			} else {
-				$parts = explode ('/', $file);
-				$old = array_pop ($parts);
-				$new = preg_replace ('/' . preg_quote ($old) . '$/', $_GET['rename'], $file);
-				if (! rename ($this->root . $file, $this->root . $new)) {
-					return $this->error (i18n_get ('Unable to rename') . ' ' . $file);
-				}
-				FileManager::prop_rename ($file, $new);
-				$this->controller->hook ('filemanager/rename', array (
-					'file' => $file,
-					'renamed' => $new
-				));
-				return array ('msg' => i18n_get ('File renamed.'), 'data' => $new);
+			if (! self::verify_file_name ($basename)) {
+				self::$error = __ ('Invalid file name');
+				return false;
 			}
 		}
-		return $this->error (i18n_get ('File not found'));
+
+		return touch (self::root () . $file);
 	}
 
 	/**
-	 * Handle make directory requests (/filemanager/api/mkdir).
+	 * Make a new folder.
 	 */
-	public function get_mkdir () {
-		$file = urldecode (join ('/', func_get_args ()));
-		
-		$parts = explode ('/', $file);
+	public static function mkdir ($folder) {
+		$parts = explode ('/', $folder);
 		$newdir = array_pop ($parts);
-		$path = preg_replace ('/\/?' . preg_quote ($newdir) . '$/', '', $file);
-		if (! self::verify_folder ($path, $this->root)) {
-			return $this->error (i18n_get ('Invalid location'));
+		$path = preg_replace ('/\/?' . preg_quote ($newdir) . '$/', '', $folder);
+		if (! self::verify_folder ($path)) {
+			self::$error = __ ('Invalid location');
+			return false;
 		} elseif (! self::verify_folder_name ($newdir)) {
-			return $this->error (i18n_get ('Invalid folder name'));
-		} elseif (@is_dir ($this->root . $file)) {
-			return $this->error (i18n_get ('Folder already exists') . ' ' . $file);
-		} elseif (! mkdir ($this->root . $file)) {
-			return $this->error (i18n_get ('Unable to create folder') . ' ' . $file);
+			self::$error = __ ('Invalid folder name');
+			return false;
+		} elseif (is_dir (self::root () . $folder)) {
+			self::$error = __ ('Folder already exists') . ' ' . $folder;
+			return false;
+		} elseif (! mkdir (self::root () . $folder)) {
+			self::$error = __ ('Unable to create folder') . ' ' . $folder;
+			return false;
 		}
-		chmod ($this->root . $file, 0777);
-		return array ('msg' => i18n_get ('Folder created.'), 'data' => $file);
+		chmod (self::root () . $folder, 0777);
+		return true;
 	}
 
 	/**
-	 * Handle property update requests (/filemanager/api/prop).
+	 * Remove a folder. The folder must be empty, or recursive
+	 * must be set to true to remove non-empty folders.
 	 */
-	public function get_prop () {
-		$file = urldecode (join ('/', func_get_args ()));
-		if (! self::verify_file ($file, $this->root)) {
-			return $this->error (i18n_get ('Invalid file name'));
+	public static function rmdir ($folder, $recursive = false) {
+		if (! self::verify_folder ($folder)) {
+			self::$error = __ ('Invalid folder name');
+			return false;
+		}
+
+		$list = self::dir ($folder);
+		if (! $list) {
+			self::$error = __ ('Unable to verify folder');
+			return false;
+		}
+		
+		if (! $recursive) {
+			if (count ($list['dirs']) > 0 || count ($list['files']) > 0) {
+				self::$error = __ ('Folder must be empty');
+				return false;
+			}
+			if (! rmdir (self::root () . $folder)) {
+				self::$error = __ ('Unable to delete folder');
+				return false;
+			}
+			return true;
 		}
-		if (! isset ($_GET['prop'])) {
-			return $this->error (i18n_get ('Missing property name'));
+
+		return self::rmdir_recursive (self::root () . $folder);
+	}
+
+	/**
+	 * Handles recursively deleting folders for `FileManager::rmdir()`.
+	 */
+	private static function rmdir_recursive ($path) {
+		if (preg_match ('|/\.+$|', $path)) {
+			return;
 		}
-		if (isset ($_GET['value'])) {
-			// update and fetch
-			$res = self::prop ($file, $_GET['prop'], $_GET['value']);
+		return is_file ($path)
+			? unlink ($path)
+			: array_map (array ('FileManager', 'rmdir_recursive'), glob ($path . '/{,.}*', GLOB_BRACE)) == rmdir ($path);
+	}
+
+	/**
+	 * Returns a list of folders recursively under the specified
+	 * folder path.
+	 */
+	public static function list_folders ($path = '') {
+		$folders = array ();
+
+		if (! empty ($path)) {
+			$rpath = 'files/' . $path;
+			$epath = $path . '/';
 		} else {
-			// fetch
-			$res = self::prop ($file, $_GET['prop']);
+			$rpath = 'files';
+			$epath = '';
 		}
-		return array (
-			'file' => $file,
-			'prop' => $_GET['prop'],
-			'value' => $res,
-			'msg' => i18n_get ('Properties saved.')
-		);
+		$d = dir ($rpath);
+		if (! $d) {
+			return array ();
+		}
+		while (false !== ($file = $d->read ())) {
+			$files[] = $file;
+		}
+		$d->close ();
+
+		foreach ($files as $file) {
+			if (strpos ($file, '.') === 0 || ! @is_dir ($rpath . '/' . $file)) {
+				continue;
+			}
+			$folders[] = $epath . $file;
+			$subs = self::list_folders ($epath . $file);
+			foreach ($subs as $sub) {
+				$folders[] = $sub;
+			}
+		}
+		return $folders;
 	}
 
 	/**
@@ -206,7 +327,7 @@
 	 * inside a certain root folder.
 	 */
 	public static function verify_folder ($path, $root = false) {
-		$root = ($root) ? rtrim ($root) : getcwd () . '/files';
+		$root = ($root) ? rtrim ($root) : rtrim (self::root ());
 		$path = trim ($path, '/');
 		if (strpos ($path, '..') !== false) {
 			return false;
@@ -222,7 +343,7 @@
 	 * inside a certain root folder.
 	 */
 	public static function verify_file ($path, $root = false) {
-		$root = ($root) ? rtrim ($root) : getcwd () . '/files';
+		$root = ($root) ? rtrim ($root) : rtrim (self::root ());
 		$path = trim ($path, '/');
 		if (strpos ($path, '..') !== false) {
 			return false;
@@ -266,7 +387,7 @@
 	 * Fetch all of the properties for the specified file.
 	 */
 	public static function props ($file) {
-		return DB::pairs ('select prop, value from filemanager_prop where file = ?', $file);
+		return DB::pairs ('select prop, value from #prefix#filemanager_prop where file = ?', $file);
 	}
 
 	/**
@@ -280,10 +401,10 @@
 			$res = self::prop ($file, $prop);
 			if ($res === $value) {
 				return $value;
-			} elseif (! $res) {
+			} elseif ($res === false || $res === null) {
 				// doesn't exist yet
 				if (! DB::execute (
-					'insert into filemanager_prop (file, prop, value) values (?, ?, ?)',
+					'insert into #prefix#filemanager_prop (file, prop, value) values (?, ?, ?)',
 					$file,
 					$prop,
 					$value
@@ -294,7 +415,7 @@
 			} else {
 				// already exists, update
 				if (! DB::execute (
-					'update filemanager_prop set value = ? where file = ? and prop = ?',
+					'update #prefix#filemanager_prop set value = ? where file = ? and prop = ?',
 					$value,
 					$file,
 					$prop
@@ -310,13 +431,13 @@
 			$qmarks = array_fill (0, count ($file), '?');
 			$file[] = $prop;
 			return DB::pairs (
-				'select file, value from filemanager_prop where file in(' . join (', ', $qmarks) . ') and prop = ?',
+				'select file, value from #prefix#filemanager_prop where file in(' . join (', ', $qmarks) . ') and prop = ?',
 				$file
 			);
 		}
 		// get a single value
 		return DB::shift (
-			'select value from filemanager_prop where file = ? and prop = ?',
+			'select value from #prefix#filemanager_prop where file = ? and prop = ?',
 			$file,
 			$prop
 		);
@@ -328,7 +449,7 @@
 	public static function prop_rename ($file, $new_name, $folder = false) {
 		if ($folder) {
 			if (! DB::execute (
-				'update filemanager_prop set file = replace(file, ?, ?) where file like ?',
+				'update #prefix#filemanager_prop set file = replace(file, ?, ?) where file like ?',
 				$file . '/',
 				$new_name . '/',
 				$file . '/%'
@@ -339,7 +460,7 @@
 			return true;
 		}
 		if (! DB::execute (
-			'update filemanager_prop set file = ? where file = ?',
+			'update #prefix#filemanager_prop set file = ? where file = ?',
 			$new_name,
 			$file
 		)) {
@@ -354,7 +475,7 @@
 	 */
 	public static function prop_delete ($file) {
 		if (! DB::execute (
-			'delete from filemanager_prop where file = ?',
+			'delete from #prefix#filemanager_prop where file = ?',
 			$file
 		)) {
 			self::$error = DB::error ();
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/lib/Functions.php elefant-elefant_1_3_3_beta/apps/filemanager/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -25,39 +25,10 @@
  */
 
 /**
- * Returns a list of folders recursively under the specified
- * folder path.
+ * Alias of `FileManager::list_folders()` for backward compatibility.
  */
 function filemanager_list_folders ($path = '') {
-	$folders = array ();
-
-	if (! empty ($path)) {
-		$rpath = 'files/' . $path;
-		$epath = $path . '/';
-	} else {
-		$rpath = 'files';
-		$epath = '';
-	}
-	$d = dir ($rpath);
-	if (! $d) {
-		return array ();
-	}
-	while (false !== ($file = $d->read ())) {
-		$files[] = $file;
-	}
-	$d->close ();
-
-	foreach ($files as $file) {
-		if (strpos ($file, '.') === 0 || ! @is_dir ($rpath . '/' . $file)) {
-			continue;
-		}
-		$folders[] = $epath . $file;
-		$subs = filemanager_list_folders ($epath . $file);
-		foreach ($subs as $sub) {
-			$folders[] = $sub;
-		}
-	}
-	return $folders;
+	return FileManager::list_folders ($path);
 }
 
 /**
@@ -67,15 +38,15 @@
 	return array (
 		array (
 			'key' => 'desc',
-			'value' => i18n_get ('Newest first')
+			'value' => __ ('Newest first')
 		),
 		array (
 			'key' => 'asc',
-			'value' => i18n_get ('Oldest first')
+			'value' => __ ('Oldest first')
 		),
 		array (
 			'key' => 'alpha',
-			'value' => i18n_get ('Alphabetical')
+			'value' => __ ('Alphabetical')
 		)
 	);
 }
@@ -87,11 +58,11 @@
 	return array (
 		array (
 			'key' => 'no',
-			'value' => i18n_get ('No')
+			'value' => __ ('No')
 		),
 		array (
 			'key' => 'yes',
-			'value' => i18n_get ('Yes')
+			'value' => __ ('Yes')
 		)
 	);
 }
@@ -103,11 +74,11 @@
 	return array (
 		array (
 			'key' => 'lightbox',
-			'value' => i18n_get ('Lightbox')
+			'value' => __ ('Lightbox')
 		),
 		array (
 			'key' => 'embedded',
-			'value' => i18n_get ('Embedded')
+			'value' => __ ('Embedded')
 		)
 	);
 }
@@ -141,77 +112,10 @@
 }
 
 /**
- * If it can, it creates a cached thumbnail of the specified
- * image file, saved to `cache/thumbs` with the name
- * `md5($file)` plus `-WIDTHxHEIGHT.jpg`. If it can't create
- * the thumbnail, the original will be returned with one of
- * the following messages added to it as a hashmark:
- *
- *     #gd-missing
- *     #libjpg-missing
- *     #libpng-missing
- *     #libgif-missing
- *     #unsupported-format
- *
- * If the cached version already exists, and its modification time
- * is newer than the original, then the cached version is returned
- * immediately.
- *
- * This makes first requests to a gallery page expensive, but
- * subsequent requests much faster.
+ * Alias of `Image::resize()` for backward compatibility.
  */
-function filemanager_get_thumbnail ($file, $width = 140, $height = 105) {
-	$cache_file = 'cache/thumbs/' . md5 ($file) . '-' . $width . 'x' . $height . '.jpg';
-	if (@file_exists ($cache_file) && @filemtime ($cache_file) > @filemtime ($file)) {
-		return $cache_file;
-	}
-
-	$info = pathinfo ($file);
-	$ext = strtolower ($info['extension']);
-
-	if (! extension_loaded ('gd')) {
-		return $file . '#gd-missing';
-	}
-	if ($ext === 'jpg' || $ext === 'jpeg') {
-		if (@imagetypes () & IMG_JPG) {
-			$orig = @imagecreatefromjpeg ($file);
-		} else {
-			return $file . '#libjpg-missing';
-		}
-	} elseif ($ext === 'png') {
-		if (@imagetypes () & IMG_PNG) {
-			$orig = @imagecreatefrompng ($file);
-		} else {
-			return $file . '#libpng-missing';
-		}
-	} elseif ($ext === 'gif') {
-		if (@imagetypes () & IMG_GIF) {
-			$orig = @imagecreatefromgif ($file);
-		} else {
-			return $file . '#libgif-missing';
-		}
-	} else {
-		return $file . '#unsupported-format';
-	}
-
-	if (! @is_dir ('cache/thumbs')) {
-		mkdir ('cache/thumbs');
-	}
-
-	list ($w, $h) = getimagesize ($file);
-
-	$ratio = max ($width / $w, $height / $h);
-	$woffset = ($w - $width / $ratio) / 2;
-	$hoffset = ($h - $height / $ratio) / 2;
-	$h = $height / $ratio;
-	$w = $width / $ratio;
-
-	$new = @imagecreatetruecolor ($width, $height);
-	@imagecopyresampled ($new, $orig, 0, 0, $woffset, $hoffset, $width, $height, $w, $h);
-	@imagejpeg ($new, $cache_file);
-	@imagedestroy ($orig);
-	@imagedestroy ($new);
-	return $cache_file;
+function filemanager_get_thumbnail ($file, $width = 140, $height = 105, $style = "cover") {
+	return Image::resize ($file, $width, $height, $style);
 }
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/lib/Image.php elefant-elefant_1_3_3_beta/apps/filemanager/lib/Image.php
--- elefant-elefant_1_3_2_beta/apps/filemanager/lib/Image.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/lib/Image.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,110 @@
+<?php
+
+/**
+ * Image-manipulation methods.
+ */
+class Image {
+	/**
+	 * If it can, it creates a cached thumbnail of the specified
+	 * image file, saved to `cache/thumbs` with the name
+	 * `md5($file)` plus `-WIDTHxHEIGHT.jpg`. If it can't create
+	 * the thumbnail, the original will be returned with one of
+	 * the following messages added to it as a hashmark:
+	 *
+	 *     #gd-missing
+	 *     #libjpg-missing
+	 *     #libpng-missing
+	 *     #libgif-missing
+	 *     #unsupported-format
+	 *
+	 * If the cached version already exists, and its modification time
+	 * is newer than the original, then the cached version is returned
+	 * immediately.
+	 *
+	 * This makes first requests to a gallery page expensive, but
+	 * subsequent requests much faster.
+	 */
+	public static function resize ($file, $width = 140, $height = 105, $style = 'cover', $format = 'jpg') {
+		if (strpos ($file, '/') === 0) {
+			$file = ltrim ($file, '/');
+		}
+
+		$cache_file = 'cache/thumbs/' . md5 ($file) . '-'. $style ."-" . $width . 'x' . $height . '.' . $format;
+		if (@file_exists ($cache_file) && @filemtime ($cache_file) > @filemtime ($file)) {
+			return $cache_file;
+		}
+
+		$info = pathinfo ($file);
+		$ext = strtolower ($info['extension']);
+
+		if (! extension_loaded ('gd')) {
+			return $file . '#gd-missing';
+		}
+		if ($ext === 'jpg' || $ext === 'jpeg') {
+			if (@imagetypes () & IMG_JPG) {
+				$orig = @imagecreatefromjpeg ($file);
+			} else {
+				return $file . '#libjpg-missing';
+			}
+		} elseif ($ext === 'png') {
+			if (@imagetypes () & IMG_PNG) {
+				$orig = @imagecreatefrompng ($file);
+			} else {
+				return $file . '#libpng-missing';
+			}
+		} elseif ($ext === 'gif') {
+			if (@imagetypes () & IMG_GIF) {
+				$orig = @imagecreatefromgif ($file);
+			} else {
+				return $file . '#libgif-missing';
+			}
+		} else {
+			return $file . '#unsupported-format';
+		}
+
+		if (! @is_dir ('cache/thumbs')) {
+			mkdir ('cache/thumbs');
+		}
+
+		list ($w, $h) = getimagesize ($file);
+
+		if($style === "cover"){
+			$ratio = max ($width / $w, $height / $h);
+			$woffset = ($w - $width / $ratio) / 2;
+			$hoffset = ($h - $height / $ratio) / 2;
+			$h = $height / $ratio;
+			$w = $width / $ratio;	
+		} elseif ($style === "stretch"){		
+			$woffset = 0;
+			$hoffset = 0;
+		} elseif ($style === "contain"){		
+			$woffset = 0;
+			$hoffset = 0;			
+			$scale = min($width/$w, $height/$h);	
+			$width  = ceil($scale*$w);
+			$height = ceil($scale*$h);
+		}
+	
+		$new = @imagecreatetruecolor ($width, $height);
+
+		if ($format === 'png') {
+			@imagealphablending ($new, false);
+			@imagesavealpha ($new, true);
+			@imagecopyresampled ($new, $orig, 0, 0, $woffset, $hoffset, $width, $height, $w, $h);
+			@imagepng ($new, $cache_file);
+		} elseif ($format === 'gif') {
+			$black = imagecolorallocate ($new, 0, 0, 0);
+			@imagecolortransparent ($new, $black);
+			@imagecopyresampled ($new, $orig, 0, 0, $woffset, $hoffset, $width, $height, $w, $h);
+			@imagegif ($new, $cache_file);
+		} else {
+			@imagecopyresampled ($new, $orig, 0, 0, $woffset, $hoffset, $width, $height, $w, $h);
+			@imagejpeg ($new, $cache_file);
+		}
+		@imagedestroy ($orig);
+		@imagedestroy ($new);
+		return $cache_file;
+	}
+}
+
+?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/filemanager/views/audio.html and elefant-elefant_1_3_3_beta/apps/filemanager/views/audio.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/views/edit.html elefant-elefant_1_3_3_beta/apps/filemanager/views/edit.html
--- elefant-elefant_1_3_2_beta/apps/filemanager/views/edit.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/filemanager/views/edit.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,53 @@
+<form method="post" id="{{_form}}">
+
+<p class="autosave-notice">{"Auto-saved data found for this form."} <a href="#" class="autosave-restore">{"Click here to restore."}</a></p>
+
+<p><textarea name="body" id="code-body" cols="90" rows="28">{{body}}</textarea></p>
+
+<p>
+	<input type="submit" class="autosave-clear" value="{"Save File"}" />&nbsp;
+	<a href="/filemanager/index" onclick="return $.cancel_autosave ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
+</p>
+
+</form>
+
+<link rel="stylesheet" type="text/css" href="/apps/designer/js/codemirror/lib/codemirror.css" />
+<link rel="stylesheet" type="text/css" href="/apps/designer/js/codemirror/theme/default.css" />
+<style>
+.CodeMirror {
+	border: 1px solid #ccc;
+	background: #fff;
+}
+</style>
+<script src="/js/json2.js"></script>
+<script src="/js/jstorage.js"></script>
+<script src="/js/jquery.autosave.js"></script>
+<script src="/apps/designer/js/codemirror/lib/codemirror.js"></script>
+<script src="/apps/designer/js/codemirror/mode/xml/xml.js"></script>
+<script src="/apps/designer/js/codemirror/mode/css/css.js"></script>
+<script src="/apps/designer/js/codemirror/mode/javascript/javascript.js"></script>
+<script src="/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js"></script>
+<script>
+var _codemirror;
+
+$(function () {
+	_codemirror = CodeMirror.fromTextArea (
+		document.getElementById ('code-body'),
+		{
+			mode: 'text/html',
+			theme: 'default',
+			indentWithTabs: true,
+			lineNumbers: true,
+			onFocus: function () {
+				try {
+					$('form').autosave ();
+				} catch (e) {}
+			}
+		}
+	);
+
+	$('.CodeMirror-scroll').height ($(window).height () - 200);
+
+	$('#{{_form}}').autosave ();
+});
+</script>
Files elefant-elefant_1_3_2_beta/apps/filemanager/views/gallery/embedded.html and elefant-elefant_1_3_3_beta/apps/filemanager/views/gallery/embedded.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/views/gallery.html elefant-elefant_1_3_3_beta/apps/filemanager/views/gallery.html
--- elefant-elefant_1_3_2_beta/apps/filemanager/views/gallery.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/views/gallery.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,16 +1,18 @@
-<link rel="stylesheet" type="text/css" href="/apps/filemanager/css/gallery.css" />
-<link rel="stylesheet" type="text/css" href="/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.css" />
-<script src="/apps/filemanager/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
+<style type="text/css">
+	a.cboxElement {outline: 0;}
+</style>
 <script>
 $(function () {
-	$('.gallery').fancybox ({
-		titlePosition: 'inside'
+	$('.gallery').colorbox ({ 
+		scalePhotos:true,
+		maxWidth:"90%",
+		maxHeight:"90%"
 	});
 });
 </script>
 
 <div id="gallery">
 {% foreach files %}
-	<div><a href="/{{ loop_value->path }}" rel="gallery-{{ gallery }}" class="gallery"{% if desc === 'yes' %} title="{{ loop_value->desc }}"{% end %}><img src="/{{ loop_value->path|filemanager_get_thumbnail }}" alt="" /></a></div>
+	<div><a href="/{{ loop_value->path }}" rel="gallery-{{ gallery }}" class="gallery"{% if desc === 'yes' %} title="{{ loop_value->desc }}"{% end %}><img src="/{{ loop_value->path|filemanager_get_thumbnail }}" alt="{% if desc === 'yes' %}{{ loop_value->desc }}{% end %}" /></a></div>
 {% end %}
 </div>
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/views/index.html elefant-elefant_1_3_3_beta/apps/filemanager/views/index.html
--- elefant-elefant_1_3_2_beta/apps/filemanager/views/index.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/views/index.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,12 +1,10 @@
 {! admin/util/dates !}
 {! admin/util/modal !}
+{! admin/util/fontawesome !}
 
-<script type="text/javascript" src="/js/urlify.js"></script>
-<script type="text/javascript" src="/apps/filemanager/js/jquery.tmpl.beta1.min.js"></script>
-<script type="text/javascript" src="/apps/filemanager/js/jquery.filemanager.js"></script>
 <script type="text/x-jquery-tmpl" id="tpl_dir">
 	<tr>
-		<td><img src="/apps/admin/css/admin/folder.png" alt="${name}" style="padding-right: 5px; margin-top: -2px" /> <a href="/filemanager?path=${path}">${name}</a></td>
+		<td><div class="dropzone draggable" data-folder="${path}"><img src="/apps/admin/css/admin/folder.png" alt="${name}" style="padding-right: 5px; margin-top: -2px" /> <a href="/filemanager?path=${path}">${name}</a></div></td>
 		<td>\{{html mtime}}</td>
 		<td>&nbsp;</td>
 		<td style="text-align: right"><a href="#" onclick="return $.filemanager ('mv', {file: '${path}', name: '${name}'})">{"Rename"}</a></td>
@@ -12,59 +10,113 @@
 		<td style="text-align: right"><a href="#" onclick="return $.filemanager ('mv', {file: '${path}', name: '${name}'})">{"Rename"}</a></td>
 	</tr>
 </script>
+
 <script type="text/x-jquery-tmpl" id="tpl_file">
 	<tr>
-		<td><img src="/apps/admin/css/admin/file.png" alt="${name}" style="padding-right: 5px; margin-top: -2px" /> <a href="/files/${path}" target="_blank">${name}</a></td>
+		<td><div class="draggable" data-file="${_path}"><img src="/apps/admin/css/admin/file.png" alt="${name}" style="padding-right: 5px; margin-top: -2px" /> <a href="/files/${path}" target="_blank"\{{if is_img}} class="file-img"\{{/if}}>${name}</a></div></td>
 		<td>\{{html mtime}}</td>
 		<td>${fsize}</td>
 		<td style="text-align: right">
-			<a href="#" onclick="return $.filemanager ('prop', {file: '${path}', name: '${name}'})">{"Properties"}</a> |
-			<a href="#" onclick="return $.filemanager ('mv', {file: '${path}', name: '${name}'})">{"Rename"}</a> | 
-			<a href="#" onclick="return $.filemanager ('rm', {file: '${path}'})">{"Delete"}</a>
+			\{{if image_file}}
+			<a href="#" onclick="return $.filemanager ('img', {file: '${_path}', name: '${_name}'})">{"Edit"}</a> |
+			\{{/if}}
+			\{{if text_file}}
+			<a href="/filemanager/edit?file=${path}">{"Edit"}</a> |
+			\{{/if}}
+			<a href="#" onclick="return $.filemanager ('prop', {file: '${_path}', name: '${_name}'})">{"Properties"}</a> |
+			<a href="#" onclick="return $.filemanager ('mv', {file: '${_path}', name: '${_name}'})">{"Rename"}</a> | 
+			<a href="#" onclick="return $.filemanager ('rm', {file: '${_path}'})">{"Delete"}</a>
 		</td>
 	</tr>
 </script>
+
+<script type="text/x-jquery-tmpl" id="tpl_edit_txt">
+	<textarea cols="70" rows="20" id="tpl-edit-txt">\{{html txt}}</textarea>
+</script>
+
 <script type="text/javascript">
-var filemanager_path = '{{ path }}';
 $(function () {
-	$.filemanager ('ls', {file: '{{ path }}'});
+	$.filemanager_init ({
+		path: '{{path}}',
+		aviary_key: {% if aviary_key %}'{{ aviary_key }}'{% else %}false{% end %},
+		max_filesize: {{ (int) ini_get ('upload_max_filesize')}}
+
+	});
+
+	// Image preview on hover
+	$(document).on (
+		'mouseenter',
+		'.file-img',
+		function () {
+			$(this).append (
+				$('<img>')
+					.attr ('src', $(this).attr ('href'))
+					.addClass ('file-img-preview')
+			);
+		}
+	);
+
+	// Remove image preview
+	$(document).on (
+		'mouseleave',
+		'.file-img',
+		function () {
+			$(this).children ('.file-img-preview').remove ();
+		}
+	);
 });
+var i18n = {
+	no_files: '{"Please select a file to upload."}',
+	invalid_name: '{"The file name contains invalid characters."}'
+};
 </script>
 
 <h2>
 {% if path == '' %}
 	{"Files"}
 {% else %}
-	<a href="/filemanager">{"Files"}</a>
+	<a href="/filemanager" class="dropzone" data-folder="">{"Files"}</a>
 	{% foreach parts %}
 		{% if loop_index == $data->lastpath %}
 			/ {{ loop_index }}
 		{% else %}
-			/ <a href="/filemanager?path={{ loop_value }}">{{ loop_index }}</a>
+			/ <a href="/filemanager?path={{ loop_value }}" class="dropzone" data-folder="{{ loop_value }}">{{ loop_index }}</a>
 		{% end %}
 	{% end %}
 {% end %}
 </h2>
 
+<div id="filemanager-dropzone">
+
 <p>
 	<form action="/filemanager/upload" method="post" enctype="multipart/form-data">
 	<input type="hidden" name="path" value="{{ path }}" />
 	<a href="#" onclick="return $.filemanager ('mkdir', {file: '{{ path }}'})">{"New folder"}</a>
 	&nbsp;|&nbsp;
-	{"New file"} ({"max"} {{ ini_get ('upload_max_filesize')}}B): <input type="file" name="file[]" multiple="multiple" /> <input type="submit" value="{"Upload"}" onclick="if (this.form.elements.file.value == '') { alert ('Please select a file to upload.'); return false; } this.value = 'Uploading...'; this.disabled = true; this.form.submit ()" />
-	&nbsp;|&nbsp;
-	<a href="/filemanager/multi?path=/{{ path }}">{"Multi-file uploader"}</a>
+	<span id="filemanager-upload-form">
+	{"New file"} ({"max"} {{ ini_get ('upload_max_filesize')}}B): <input type="file" name="file[]" id="file-upload" multiple="multiple" /> <input type="submit" value="{"Upload"}" onclick="err = $.filemanager_verify_files ($('#file-upload')[0].files); if (err) { alert (i18n[err]); return false; } this.value = 'Uploading...'; this.disabled = true; this.form.submit ()" />
+	</span>
+	<span id="filemanager-upload-progress">
+		<div id="filemanager-upload-progress-bar"></div>
+		<div id="filemanager-upload-progress-text">{"Uploading..."}</div>
+	</span>
 	</form>
 </p>
 
+</div>
+
 <p>
 <table width="100%">
 	<tr>
-		<th width="48%">{" Name "}</th>
+		<th width="45%">{" Name "}</th>
 		<th width="22%">{" Last modified "}</th>
 		<th width="8%">{" File size "}</th>
-		<th width="22%">&nbsp;</th>
+		<th width="25%">&nbsp;</th>
 	</tr>
 	<tbody id="file-list"></tbody>
 </table>
 </p>
+
+{% if aviary_key %}
+<img src="/apps/admin/css/admin/spacer.png" id="aviary-tmp" height="0" width="0" display: none" />
+{% end %}
Files elefant-elefant_1_3_2_beta/apps/filemanager/views/mediaelement.html and elefant-elefant_1_3_3_beta/apps/filemanager/views/mediaelement.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/views/multi.html elefant-elefant_1_3_3_beta/apps/filemanager/views/multi.html
--- elefant-elefant_1_3_2_beta/apps/filemanager/views/multi.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/views/multi.html	1969-12-31 18:00:00.000000000 -0600
@@ -1,129 +0,0 @@
-<script>
-$(function() {
-	$('#file').uploadify({
-		uploader        : '/apps/filemanager/js/uploadify/uploadify.swf',
-		script          : '/filemanager/multi',
-		scriptData      : { path: '/{{ path }}', uploadify_session_id: '{{$_SESSION.session_id}}', uploadify_user_agent: '{{$_SERVER.HTTP_USER_AGENT}}' },
-		cancelImg       : '/apps/filemanager/js/uploadify/cancel.png',
-		buttonImg       : ' ',
-		buttonText      : '{"Browse"}',
-		wmode           : 'transparent',
-		queueID         : 'fileQueue',
-		removeCompleted : false,
-		auto            : true,
-		multi           : true,
-		onInit          : function () {
-			var w = $('#fileButton').outerWidth ();
-			$('#fileUploader').css ('width', w + 'px');
-			$('#uploadWrapper').css ('width', w + 'px');
-		},
-		onError         : function (evt, id, file, err) {
-			var msg = '';
-			switch (err.info) {
-				case 405:
-					msg = '{"Admin access required."}';
-					break;
-				case 406:
-					msg = '{"Invalid Path"}';
-					break;
-				case 408:
-					msg = '{"A file by that name already exists."}';
-					break;
-				case 409:
-					msg = '{"Unable to save the file."}';
-					break;
-				case 407:
-				default:
-					msg = '{"Unknown error"}';
-					break;
-			}
-			setTimeout ('$("#file' + id + ' span.percentage").html (" - ' + msg + '");', 100);
-		}
-	});
-
-	$('#uploadWrapper').hover (function () {
-		$('#fileButton').addClass ('hover');
-	}, function () {
-		$('#fileButton').removeClass ('hover');
-	});
-});
-</script>
-<style>
-#fileWrapper {
-	position: relative;
-}
-#fileButton {
-	position: absolute;
-	top: 0;
-	left: 0;
-	display: block;
-	float: left;
-    font-size: 12px;
-	border: 1px solid #ddd;
-    background: #e5e5e5;
-    background: -webkit-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
-    background: -moz-linear-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
-    border: solid 1px #ccc;
-    border-radius: 4px;
-    -webkit-border-radius: 4px;
-    -moz-border-radius: 4px;
-    color: #555;
-    padding: 5px 10px;
-    text-shadow: 0 1px 0 #fff;
-    height: 18px;
-    width: auto;
-    z-index: 0;
-}
-#fileButton.hover {
-	color: #333;
-	border: 1px solid #999;
-    -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
-    -webkit-box-shadow:0 2px 5px rgba(0, 0, 0, 0.2);
-    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
-}
-#uploadWrapper {
-	position: relative;
-	height: 28px;
-	width: 100px;
-	z-index: 10;
-}
-.cancel {
-	float: left;
-	margin-right: 5px;
-}
-#fileQueue {
-	margin-top: 15px;
-}
-</style>
-
-<p>
-	<a href="/filemanager?path=/{{ path }}">&laquo; {"Back"}</a>
-	&nbsp;|&nbsp;
-	{"Folder"}:
-{% if path === '' %}
-	<a href="/filemanager/multi?path=/">{"Files"}</a>
-{% else %}
-	<a href="/filemanager/multi?path=/">{"Files"}</a>
-	{% foreach parts %}
-		{% if loop_index == $data->lastpath %}
-			/ {{ loop_index }}
-		{% else %}
-			/ <a href="/filemanager/multi?path=/{{ loop_value }}">{{ loop_index }}</a>
-		{% end %}
-	{% end %}
-{% end %}
-</p>
-
-<div id="fileWrapper">
-	<a id="fileButton">{"Browse"}</a>
-	<div id="uploadWrapper">
-	<input id="file" type="file" name="file" />
-	</div>
-</div>
-
-<br clear="both" />
-
-<div id="fileQueue">
-</div>
-
-<br clear="both" />
Files elefant-elefant_1_3_2_beta/apps/filemanager/views/properties.html and elefant-elefant_1_3_3_beta/apps/filemanager/views/properties.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/filemanager/views/slideshow.html elefant-elefant_1_3_3_beta/apps/filemanager/views/slideshow.html
--- elefant-elefant_1_3_2_beta/apps/filemanager/views/slideshow.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/filemanager/views/slideshow.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,20 +1,19 @@
-<script type="text/javascript" src="/apps/filemanager/js/jquery.cycle.all.min.js"></script>
 <script type="text/javascript"> 
 $(window).load (function () {
-	$('#slideshow').cycle ({
+	$('#slideshow-{{name}}').cycle ({
 		fx: 'fade',
-		pager: '#slideshow-nav',
+		pager: '#slideshow-{{name}}-nav',
 		timeout: 6000,
 		startingSlide: Math.floor (Math.random () * 5)
 	});
 });
 </script>
 <style type="text/css">
-#slideshow-nav {
+#slideshow-{{name}}-nav {
 	margin-left: 48%;
 	margin-top: 10px;
 }
-#slideshow-nav a {
+#slideshow-{{name}}-nav a {
 	display: block;
 	width: 10px;
 	height: 10px;
@@ -26,15 +25,15 @@
 	text-decoration: none;
 }
 
-#slideshow-nav a.activeSlide {
+#slideshow-{{name}}-nav a.activeSlide {
 	background: url(/apps/filemanager/css/current.png) no-repeat;
 }
 </style>
 
-<div id="slideshow">
+<div id="slideshow-{{name}}">
 {% foreach files %}
 	<img src="/{{ loop_value }}" alt="" {% if loop_index > 0 %}style="display: none"{% end %} />
 {% end %}
 </div>
-<div id="slideshow-nav"></div>
+<div id="slideshow-{{name}}-nav"></div>
 <br style="clear: both" />
Files elefant-elefant_1_3_2_beta/apps/filemanager/views/swf.html and elefant-elefant_1_3_3_beta/apps/filemanager/views/swf.html are identical
Files elefant-elefant_1_3_2_beta/apps/filemanager/views/video.html and elefant-elefant_1_3_3_beta/apps/filemanager/views/video.html are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/conf/config.php and elefant-elefant_1_3_3_beta/apps/navigation/conf/config.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/conf/embed.php elefant-elefant_1_3_3_beta/apps/navigation/conf/embed.php
--- elefant-elefant_1_3_2_beta/apps/navigation/conf/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/conf/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,14 +3,17 @@
 [navigation/top]
 
 label = "Navigation: Top Level"
+icon = /apps/navigation/css/icon-nav-top.png
 
 [navigation/map]
 
 label = "Navigation: Site Map"
+icon = /apps/navigation/css/icon-sitemap.png
 
 [navigation/section]
 
 label = "Navigation: Section"
+icon = /apps/navigation/css/icon-nav-section.png
 
 section[label] = Section
 section[type] = select
@@ -20,5 +23,18 @@
 [navigation/contextual]
 
 label = "Navigation: Contextual"
+icon = /apps/navigation/css/icon-nav-contextual.png
+
+[navigation/breadcrumb]
+
+label = "Navigation: Breadcrumb"
+
+[navigation/languages]
+
+label = "Navigation: Languages"
+
+[navigation/redirect]
+
+label = "Multilingual Homepage Redirect"
 
 ; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/css/dropmenu.css elefant-elefant_1_3_3_beta/apps/navigation/css/dropmenu.css
--- elefant-elefant_1_3_2_beta/apps/navigation/css/dropmenu.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/css/dropmenu.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,59 @@
+.dropmenu, .dropmenu ul {
+	margin: 0;
+	padding: 0;
+	list-style-type: none;
+	list-style-position: outside;
+	position: relative;
+	line-height: 1.5em;
+}
+
+.dropmenu ul {
+	margin-top: 0px !important;
+	z-index: 9999;
+}
+
+.dropmenu ul a:link, .dropmenu ul a:active, .dropmenu ul a:visited {
+	background-color: #eee;
+	text-decoration: none;
+	text-align: left;
+	padding: 0px 5px;
+	display: block;
+}
+
+.dropmenu ul a:hover {
+	background-color: #ddd;
+}
+
+.dropmenu li {
+	float: left;
+	position: relative;
+}
+
+.dropmenu ul {
+	position: absolute;
+	width: 12em;
+	top: 1.5em;
+	display: none;
+}
+
+.dropmenu li ul a {
+	width: 12em;
+	float: left;
+}
+
+.dropmenu ul ul {
+	top: auto;
+}
+
+.dropmenu li ul ul {
+	left: 14em;
+	margin: 0px 0px 0px 10px;
+}
+
+.dropmenu li:hover ul ul, .dropmenu li:hover ul ul ul, .dropmenu li:hover ul ul ul ul {
+	display: none;
+}
+
+.dropmenu li:hover ul, .dropmenu li li:hover ul, .dropmenu li li li:hover ul, .dropmenu li li li li:hover ul {
+	display: block;
+}
Binary files elefant-elefant_1_3_2_beta/apps/navigation/css/icon-nav-contextual.png and elefant-elefant_1_3_3_beta/apps/navigation/css/icon-nav-contextual.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/css/icon-nav-section.png and elefant-elefant_1_3_3_beta/apps/navigation/css/icon-nav-section.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/css/icon-nav-top.png and elefant-elefant_1_3_3_beta/apps/navigation/css/icon-nav-top.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/css/icon-sitemap.png and elefant-elefant_1_3_3_beta/apps/navigation/css/icon-sitemap.png differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/admin.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/admin.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/admin.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/admin.php	2013-03-20 13:48:44.000000000 -0500
@@ -9,9 +9,12 @@
 	$this->redirect ('/admin');
 }
 
-$page->title = i18n_get ('Navigation');
+$page->title = __ ('Navigation');
 $page->layout = 'admin';
-$page->add_script ('<script src="/apps/navigation/js/jquery.jstree.js"></script>');
+
+$page->add_script ('<script src="/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js"></script>', 'tail');
+$page->add_script ('<script src="/apps/navigation/js/tree-drag-drop/tree-drag-drop.js"></script>', 'tail');
+$page->add_style ('/apps/admin/css/font-awesome/css/font-awesome.min.css');
 
 // get ids already in tree to skip
 $nav = new Navigation;
@@ -19,10 +22,10 @@
 
 // build other page list
 require_once ('apps/navigation/lib/Functions.php');
-$pages = navigation_get_other_pages ($ids);
+$other_pages = navigation_get_other_pages ($ids);
 
 echo $tpl->render ('navigation/admin', array (
-	'pages' => $pages
+	'other_pages' => $other_pages
 ));
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/admin_tree.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/admin_tree.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/admin_tree.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/admin_tree.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,14 @@
+<?php
+
+/**
+ * Displays a multi-level bulleted list for the app/navigation/admin.
+ */
+
+$n = new Navigation;
+
+require_once ('apps/navigation/lib/Functions.php');
+navigation_print_admin_tree ($n->tree);
+
+//$this->cache = true;
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/api.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/api.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/api.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/api.php	2013-03-20 13:48:44.000000000 -0500
@@ -22,52 +22,21 @@
 $out = null;
 $nav = new Navigation;
 
-switch ($this->params[0]) {
-	case 'add':
-		$id = $_POST['page'];
-		$parent = $_POST['parent'];
-		if ($parent === 'false') {
-			$parent = false;
+switch ($this->params[0]) {	
+	case 'update':
+		$tree = $_POST['tree'];	
+		if(empty($tree)){
+			$tree =  array();
 		}
-		if ($nav->add ($id, $parent) && $nav->save ()) {
+		require_once ('apps/navigation/lib/Functions.php');		
+		if ($nav->update ($tree) && $nav->save ()) {
 			$out = array (
-				'msg' => sprintf ('Page %s added to tree under %s.', $id, $parent),
-				'page' => $id,
-				'parent' => $parent
+				'msg' => sprintf ('Nav json has been updated'),
 			);
 		} else {
 			$error = $nav->error;
 		}
-		break;
-	case 'move':
-		$id = $_POST['page'];
-		$ref = $_POST['ref'];
-		$pos = $_POST['pos'];
-		if ($nav->move ($id, $ref, $pos) && $nav->save ()) {
-			$out = array (
-				'msg' => sprintf ('Page %s moved to %s %s.', $id, $pos, $ref),
-				'page' => $id,
-				'ref' => $ref,
-				'pos' => $pos
-			);
-		} else {
-			$error = $nav->error;
-		}
-		break;
-	case 'remove':
-		$id = $_POST['page'];
-		if ($nav->remove ($id) && $nav->save ()) {
-			require_once ('apps/navigation/lib/Functions.php');
-			$ids = $nav->get_all_ids ();
-			$out = array (
-				'msg' => sprintf ('Page %s removed.', $id),
-				'page' => $id,
-				'other' => navigation_get_other_pages ($ids)
-			);
-		} else {
-			$error = $nav->error;
-		}
-		break;
+		break;	
 	default:
 		$error = 'Unknown method';
 		break;
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/breadcrumb.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/breadcrumb.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/breadcrumb.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/breadcrumb.php	2013-03-20 13:48:44.000000000 -0500
@@ -16,22 +16,33 @@
  *         padding: 0;
  *         display: inline;
  *     }
+ *
+ *     .breadcrumb li:before {
+ *         content: " / ";
+ *     }
+ *
+ *     .breadcrumb li:first-child:before {
+ *         content: "";
+ *     }
  */
 
-$n = new Navigation;
+$n = Link::nav ();
 $path = $n->path ($page->id, true);
-$home = array ('index' => i18n_get ('Home'));
+$home_id = conf ('I18n', 'multilingual') ? $i18n->language : 'index';
+$home = array ($home_id => __ ('Home'));
 $path = ($path) ? $path : $home;
-if (! in_array ('index', array_keys ($path))) {
+if (isset ($path[$home_id])) {
+	$path[$home_id] = __ ('Home');
+} else {
 	$path = array_merge ($home, $path);
 }
 
 echo "<ul class=\"breadcrumb\">\n";
 foreach ($path as $id => $title) {
 	if ($id != $page->id) {
-		printf ("<li><a href=\"/%s\">%s</a> <span class=\"divider\">/</span></li>\n", $id, $title);
+		printf ("<li>%s <span class=\"divider\">/</span></li>\n", Link::make ($id, $title));
 	} else {
-		printf ("<li class=\"active\">%s</li>\n", $title);
+		printf ("<li class=\"current\">%s</li>\n", $title);
 	}
 }
 echo '</ul>';
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/contextual.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/contextual.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/contextual.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/contextual.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,11 +6,19 @@
  * All parents and children of the current page.
  */
 
-$n = new Navigation;
+$n = Link::nav ();
 $path = $n->path ($page->id);
 $path = ($path) ? $path : array ();
 
 require_once ('apps/navigation/lib/Functions.php');
-navigation_print_context ($n->tree, $path);
+
+if (conf ('I18n', 'multilingual')) {
+	$section = $n->node ($i18n->language);
+	if (is_array ($section->children)) {
+		navigation_print_context ($section->children, $path);
+	}
+} else {
+	navigation_print_context ($n->tree, $path);
+}
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/cookie.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/cookie.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/cookie.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/cookie.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,28 @@
+<?php
+
+/**
+ * If language negotiation method is set to cookie, use
+ * this to set the language cookie. Also accepts an optional
+ * redirect parameter to send them to afterwards, otherwise
+ * it redirects to the page you just came from.
+ *
+ * Usage:
+ *
+ *     /navigation/cookie/fr
+ *     /navigation/cookie/fr?redirect=/fr
+ */
+
+$lang = count ($this->params) ? $this->params[0] : $i18n->language;
+
+setcookie (
+	$i18n->cookieName,
+	$lang,
+	time () + 2592000, // 1 month
+	'/'
+);
+
+isset ($_GET['redirect'])
+	? $this->redirect ($_GET['redirect'])
+	: $this->redirect ($_SERVER['HTTP_REFERER']);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/dropmenu.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/dropmenu.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/dropmenu.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/dropmenu.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,33 @@
+<?php
+
+/**
+ * Displays a multi-level dynamic drop menu.
+ *
+ * Usage:
+ *
+ * 1. Embed the drop menu in your layout file like this:
+ *
+ *     {! navigation/dropmenu !}
+ *
+ * 2. Customize the menu in your design stylesheet.
+ */
+
+$n = Link::nav ();
+
+$data['id'] = isset ($data['id']) ? $data['id'] : 'dropmenu';
+
+$page->add_style ('/apps/navigation/css/dropmenu.css');
+$page->add_script ('/apps/navigation/js/dropmenu.js');
+
+require_once ('apps/navigation/lib/Functions.php');
+
+if (conf ('I18n', 'multilingual')) {
+	$section = $n->node ($i18n->language);
+	if (is_array ($section->children)) {
+		navigation_print_dropmenu ($section->children, $data['id']);
+	}
+} else {
+	navigation_print_dropmenu ($n->tree, $data['id']);
+}
+
+?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/handlers/hook/delete.php and elefant-elefant_1_3_3_beta/apps/navigation/handlers/hook/delete.php are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/handlers/hook/edit.php and elefant-elefant_1_3_3_beta/apps/navigation/handlers/hook/edit.php are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/handlers/index.php and elefant-elefant_1_3_3_beta/apps/navigation/handlers/index.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/json.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/json.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/json.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/json.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 $page->layout = false;
 header ('Content-Type: application/json');
-echo file_get_contents ('conf/navigation.json');
+echo file_exists ('conf/navigation.json') ? file_get_contents ('conf/navigation.json') : '[]';
 $this->quit ();
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/languages.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/languages.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/languages.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/languages.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,44 @@
+<?php
+
+/**
+ * Displays the top-level navigation as a bulleted list
+ * when [I18n][multilingual] is enabled, which will show
+ * a list of languages linking to their homepages, with
+ * `class="current"` added to the current page's `<li>`
+ * element for custom styling.
+ */
+
+if (! conf ('I18n', 'multilingual')) {
+	return;
+}
+
+$n = Link::nav ();
+
+echo '<ul>';
+foreach ($n->tree as $item) {
+	switch ($i18n->negotiation) {
+		case 'http':
+		case 'url':
+			echo Link::single ($item->attr->id, $item->data);
+			break;
+		case 'cookie':
+			echo Link::single (
+				$item->attr->id,
+				$item->data,
+				'/navigation/cookie/' . $item->attr->id . '?redirect=/' . $item->attr->id
+			);
+			break;
+		case 'subdomain':
+			echo Link::single (
+				$item->attr->id,
+				$item->data,
+				$this->is_https ()
+					? 'https://' . $item->attr->id . '.' . Link::base_domain () . '/' . $item->attr->id
+					: 'http://' . $item->attr->id . '.' . Link::base_domain () . '/' . $item->attr->id
+			);
+			break;
+	}
+}
+echo '</ul>';
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/map.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/map.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/map.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/map.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,22 +5,17 @@
  * bulleted list.
  */
 
-$n = new Navigation;
+$n = Link::nav ();
 
-function navigation_print_level ($tree) {
-	echo '<ul>';
-	foreach ($tree as $item) {
-		printf ('<li><a href="/%s">%s</a>', $item->attr->id, $item->data);
-		if (isset ($item->children)) {
-			navigation_print_level ($item->children);
-		}
-		echo '</li>';
+require_once ('apps/navigation/lib/Functions.php');
+
+if (conf ('I18n', 'multilingual')) {
+	$section = $n->node ($i18n->language);
+	if (is_array ($section->children)) {
+		navigation_print_level ($section->children);
 	}
-	echo '</ul>';
+} else {
+	navigation_print_level ($n->tree);
 }
 
-navigation_print_level ($n->tree);
-
-$this->cache = true;
-
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/pager.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/pager.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/pager.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/pager.php	2013-03-20 13:48:44.000000000 -0500
@@ -84,6 +84,8 @@
 	$o->links[$i] = sprintf ($o->url, $i);
 }
 
+if (isset ($_SERVER["QUERY_STRING"]) && $_SERVER["QUERY_STRING"]) $o->url .= '?'.$_SERVER["QUERY_STRING"];
+
 if ($data['style'] === 'results') {
 	if ($o->total == 0) {
 		echo __ ('No results.');
@@ -102,4 +104,4 @@
 
 echo $tpl->render ('navigation/pager/' . $data['style'], $o);
 
-?>
\ No newline at end of file
+?>
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/redirect.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/redirect.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/redirect.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/redirect.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,21 @@
+<?php
+
+/**
+ * Redirect users to the language homepage.
+ */
+
+$url = Link::href ($i18n->language);
+
+if (User::is_valid () && User::is ('admin')) {
+	printf (
+		'<p>%s:</p><p><a href="%s">%s</a></p>',
+		__ ('This page forwards visitors to the following link'),
+		$url,
+		$url
+	);
+	return;
+}
+
+$this->permanent_redirect ($url);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/section.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/section.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/section.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/section.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,17 +6,15 @@
  * the current page's `<li>` element for custom styling.
  */
 
-$n = new Navigation;
+$n = Link::nav ();
 $section = $n->node ($data['section']);
 
-echo '<ul>';
-foreach ($section->children as $item) {
-	if ($item->attr->id == $page->id) {
-		printf ('<li class="current"><a href="/%s">%s</a></li>', $item->attr->id, $item->data);
-	} else {
-		printf ('<li><a href="/%s">%s</a></li>', $item->attr->id, $item->data);
+if (is_array ($section->children)) {
+	echo '<ul>';
+	foreach ($section->children as $item) {
+		echo Link::single ($item->attr->id, $item->data);
 	}
-}
-echo '</ul>';
+	echo '</ul>';
+}	
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/handlers/top.php elefant-elefant_1_3_3_beta/apps/navigation/handlers/top.php
--- elefant-elefant_1_3_2_beta/apps/navigation/handlers/top.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/handlers/top.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,30 +6,17 @@
  * `<li>` element for custom styling.
  */
 
-$res = $cache->get ('_navigation_top');
-if ($res) {
-	echo str_replace (
-		sprintf ('<li><a href="/%s">', $page->id),
-		sprintf ('<li class="current"><a href="/%s">', $page->id),
-		$res
-	);
+if (conf ('I18n', 'multilingual')) {
+	echo $this->run ('navigation/section', array ('section' => $i18n->language));
 	return;
 }
 
-$n = new Navigation;
+$n = Link::nav ();
 
-$out = '<ul>';
+echo '<ul>';
 foreach ($n->tree as $item) {
-	$out .= sprintf ('<li><a href="/%s">%s</a></li>', $item->attr->id, $item->data);
+	echo Link::single ($item->attr->id, $item->data);
 }
-$out .= '</ul>';
+echo '</ul>';
 
-$cache->set ('_navigation_top', $out);
-
-echo str_replace (
-	sprintf ('<li><a href="/%s">', $page->id),
-	sprintf ('<li class="current"><a href="/%s">', $page->id),
-	$out
-);
-
-?>
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/dropmenu.js elefant-elefant_1_3_3_beta/apps/navigation/js/dropmenu.js
--- elefant-elefant_1_3_2_beta/apps/navigation/js/dropmenu.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/dropmenu.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,11 @@
+$(function () {
+	$('.dropmenu ul').css ({display: 'none'}); // opera fix
+	$('.dropmenu li').hover (
+		function () {
+			$(this).find ('ul:first').css ({visibility: 'visible', display: 'none'}).slideDown (100);
+		},
+		function () {
+			$(this).find ('ul:first').css ({visibility: 'hidden'});
+		}
+	);
+});
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/jquery.jstree.js elefant-elefant_1_3_3_beta/apps/navigation/js/jquery.jstree.js
--- elefant-elefant_1_3_2_beta/apps/navigation/js/jquery.jstree.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/jquery.jstree.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,4551 +0,0 @@
-/*
- * jsTree 1.0-rc3
- * http://jstree.com/
- *
- * Copyright (c) 2010 Ivan Bozhanov (vakata.com)
- *
- * Licensed same as jquery - under the terms of either the MIT License or the GPL Version 2 License
- *   http://www.opensource.org/licenses/mit-license.php
- *   http://www.gnu.org/licenses/gpl.html
- *
- * $Date: 2011-02-09 01:17:14 +0200 (ср, 09 февр 2011) $
- * $Revision: 236 $
- */
-
-/*jslint browser: true, onevar: true, undef: true, bitwise: true, strict: true */
-/*global window : false, clearInterval: false, clearTimeout: false, document: false, setInterval: false, setTimeout: false, jQuery: false, navigator: false, XSLTProcessor: false, DOMParser: false, XMLSerializer: false*/
-
-"use strict";
-
-// top wrapper to prevent multiple inclusion (is this OK?)
-(function () { if(jQuery && jQuery.jstree) { return; }
-	var is_ie6 = false, is_ie7 = false, is_ff2 = false;
-
-/* 
- * jsTree core
- */
-(function ($) {
-	// Common functions not related to jsTree 
-	// decided to move them to a `vakata` "namespace"
-	$.vakata = {};
-	// CSS related functions
-	$.vakata.css = {
-		get_css : function(rule_name, delete_flag, sheet) {
-			rule_name = rule_name.toLowerCase();
-			var css_rules = sheet.cssRules || sheet.rules,
-				j = 0;
-			do {
-				if(css_rules.length && j > css_rules.length + 5) { return false; }
-				if(css_rules[j].selectorText && css_rules[j].selectorText.toLowerCase() == rule_name) {
-					if(delete_flag === true) {
-						if(sheet.removeRule) { sheet.removeRule(j); }
-						if(sheet.deleteRule) { sheet.deleteRule(j); }
-						return true;
-					}
-					else { return css_rules[j]; }
-				}
-			}
-			while (css_rules[++j]);
-			return false;
-		},
-		add_css : function(rule_name, sheet) {
-			if($.jstree.css.get_css(rule_name, false, sheet)) { return false; }
-			if(sheet.insertRule) { sheet.insertRule(rule_name + ' { }', 0); } else { sheet.addRule(rule_name, null, 0); }
-			return $.vakata.css.get_css(rule_name);
-		},
-		remove_css : function(rule_name, sheet) { 
-			return $.vakata.css.get_css(rule_name, true, sheet); 
-		},
-		add_sheet : function(opts) {
-			var tmp = false, is_new = true;
-			if(opts.str) {
-				if(opts.title) { tmp = $("style[id='" + opts.title + "-stylesheet']")[0]; }
-				if(tmp) { is_new = false; }
-				else {
-					tmp = document.createElement("style");
-					tmp.setAttribute('type',"text/css");
-					if(opts.title) { tmp.setAttribute("id", opts.title + "-stylesheet"); }
-				}
-				if(tmp.styleSheet) {
-					if(is_new) { 
-						document.getElementsByTagName("head")[0].appendChild(tmp); 
-						tmp.styleSheet.cssText = opts.str; 
-					}
-					else {
-						tmp.styleSheet.cssText = tmp.styleSheet.cssText + " " + opts.str; 
-					}
-				}
-				else {
-					tmp.appendChild(document.createTextNode(opts.str));
-					document.getElementsByTagName("head")[0].appendChild(tmp);
-				}
-				return tmp.sheet || tmp.styleSheet;
-			}
-			if(opts.url) {
-				if(document.createStyleSheet) {
-					try { tmp = document.createStyleSheet(opts.url); } catch (e) { }
-				}
-				else {
-					tmp			= document.createElement('link');
-					tmp.rel		= 'stylesheet';
-					tmp.type	= 'text/css';
-					tmp.media	= "all";
-					tmp.href	= opts.url;
-					document.getElementsByTagName("head")[0].appendChild(tmp);
-					return tmp.styleSheet;
-				}
-			}
-		}
-	};
-
-	// private variables 
-	var instances = [],			// instance array (used by $.jstree.reference/create/focused)
-		focused_instance = -1,	// the index in the instance array of the currently focused instance
-		plugins = {},			// list of included plugins
-		prepared_move = {};		// for the move_node function
-
-	// jQuery plugin wrapper (thanks to jquery UI widget function)
-	$.fn.jstree = function (settings) {
-		var isMethodCall = (typeof settings == 'string'), // is this a method call like $().jstree("open_node")
-			args = Array.prototype.slice.call(arguments, 1), 
-			returnValue = this;
-
-		// if a method call execute the method on all selected instances
-		if(isMethodCall) {
-			if(settings.substring(0, 1) == '_') { return returnValue; }
-			this.each(function() {
-				var instance = instances[$.data(this, "jstree_instance_id")],
-					methodValue = (instance && $.isFunction(instance[settings])) ? instance[settings].apply(instance, args) : instance;
-					if(typeof methodValue !== "undefined" && (settings.indexOf("is_") === 0 || (methodValue !== true && methodValue !== false))) { returnValue = methodValue; return false; }
-			});
-		}
-		else {
-			this.each(function() {
-				// extend settings and allow for multiple hashes and $.data
-				var instance_id = $.data(this, "jstree_instance_id"),
-					a = [],
-					b = settings ? $.extend({}, true, settings) : {},
-					c = $(this), 
-					s = false, 
-					t = [];
-				a = a.concat(args);
-				if(c.data("jstree")) { a.push(c.data("jstree")); }
-				b = a.length ? $.extend.apply(null, [true, b].concat(a)) : b;
-
-				// if an instance already exists, destroy it first
-				if(typeof instance_id !== "undefined" && instances[instance_id]) { instances[instance_id].destroy(); }
-				// push a new empty object to the instances array
-				instance_id = parseInt(instances.push({}),10) - 1;
-				// store the jstree instance id to the container element
-				$.data(this, "jstree_instance_id", instance_id);
-				// clean up all plugins
-				b.plugins = $.isArray(b.plugins) ? b.plugins : $.jstree.defaults.plugins.slice();
-				b.plugins.unshift("core");
-				// only unique plugins
-				b.plugins = b.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");
-
-				// extend defaults with passed data
-				s = $.extend(true, {}, $.jstree.defaults, b);
-				s.plugins = b.plugins;
-				$.each(plugins, function (i, val) { 
-					if($.inArray(i, s.plugins) === -1) { s[i] = null; delete s[i]; } 
-					else { t.push(i); }
-				});
-				s.plugins = t;
-
-				// push the new object to the instances array (at the same time set the default classes to the container) and init
-				instances[instance_id] = new $.jstree._instance(instance_id, $(this).addClass("jstree jstree-" + instance_id), s); 
-				// init all activated plugins for this instance
-				$.each(instances[instance_id]._get_settings().plugins, function (i, val) { instances[instance_id].data[val] = {}; });
-				$.each(instances[instance_id]._get_settings().plugins, function (i, val) { if(plugins[val]) { plugins[val].__init.apply(instances[instance_id]); } });
-				// initialize the instance
-				setTimeout(function() { if(instances[instance_id]) { instances[instance_id].init(); } }, 0);
-			});
-		}
-		// return the jquery selection (or if it was a method call that returned a value - the returned value)
-		return returnValue;
-	};
-	// object to store exposed functions and objects
-	$.jstree = {
-		defaults : {
-			plugins : []
-		},
-		_focused : function () { return instances[focused_instance] || null; },
-		_reference : function (needle) { 
-			// get by instance id
-			if(instances[needle]) { return instances[needle]; }
-			// get by DOM (if still no luck - return null
-			var o = $(needle); 
-			if(!o.length && typeof needle === "string") { o = $("#" + needle); }
-			if(!o.length) { return null; }
-			return instances[o.closest(".jstree").data("jstree_instance_id")] || null; 
-		},
-		_instance : function (index, container, settings) { 
-			// for plugins to store data in
-			this.data = { core : {} };
-			this.get_settings	= function () { return $.extend(true, {}, settings); };
-			this._get_settings	= function () { return settings; };
-			this.get_index		= function () { return index; };
-			this.get_container	= function () { return container; };
-			this.get_container_ul = function () { return container.children("ul:eq(0)"); };
-			this._set_settings	= function (s) { 
-				settings = $.extend(true, {}, settings, s);
-			};
-		},
-		_fn : { },
-		plugin : function (pname, pdata) {
-			pdata = $.extend({}, {
-				__init		: $.noop, 
-				__destroy	: $.noop,
-				_fn			: {},
-				defaults	: false
-			}, pdata);
-			plugins[pname] = pdata;
-
-			$.jstree.defaults[pname] = pdata.defaults;
-			$.each(pdata._fn, function (i, val) {
-				val.plugin		= pname;
-				val.old			= $.jstree._fn[i];
-				$.jstree._fn[i] = function () {
-					var rslt,
-						func = val,
-						args = Array.prototype.slice.call(arguments),
-						evnt = new $.Event("before.jstree"),
-						rlbk = false;
-
-					if(this.data.core.locked === true && i !== "unlock" && i !== "is_locked") { return; }
-
-					// Check if function belongs to the included plugins of this instance
-					do {
-						if(func && func.plugin && $.inArray(func.plugin, this._get_settings().plugins) !== -1) { break; }
-						func = func.old;
-					} while(func);
-					if(!func) { return; }
-
-					// context and function to trigger events, then finally call the function
-					if(i.indexOf("_") === 0) {
-						rslt = func.apply(this, args);
-					}
-					else {
-						rslt = this.get_container().triggerHandler(evnt, { "func" : i, "inst" : this, "args" : args, "plugin" : func.plugin });
-						if(rslt === false) { return; }
-						if(typeof rslt !== "undefined") { args = rslt; }
-
-						rslt = func.apply(
-							$.extend({}, this, { 
-								__callback : function (data) { 
-									this.get_container().triggerHandler( i + '.jstree', { "inst" : this, "args" : args, "rslt" : data, "rlbk" : rlbk });
-								},
-								__rollback : function () { 
-									rlbk = this.get_rollback();
-									return rlbk;
-								},
-								__call_old : function (replace_arguments) {
-									return func.old.apply(this, (replace_arguments ? Array.prototype.slice.call(arguments, 1) : args ) );
-								}
-							}), args);
-					}
-
-					// return the result
-					return rslt;
-				};
-				$.jstree._fn[i].old = val.old;
-				$.jstree._fn[i].plugin = pname;
-			});
-		},
-		rollback : function (rb) {
-			if(rb) {
-				if(!$.isArray(rb)) { rb = [ rb ]; }
-				$.each(rb, function (i, val) {
-					instances[val.i].set_rollback(val.h, val.d);
-				});
-			}
-		}
-	};
-	// set the prototype for all instances
-	$.jstree._fn = $.jstree._instance.prototype = {};
-
-	// load the css when DOM is ready
-	$(function() {
-		// code is copied from jQuery ($.browser is deprecated + there is a bug in IE)
-		var u = navigator.userAgent.toLowerCase(),
-			v = (u.match( /.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/ ) || [0,'0'])[1],
-			css_string = '' + 
-				'.jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } ' + 
-				'.jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } ' + 
-				'.jstree-rtl li { margin-left:0; margin-right:18px; } ' + 
-				'.jstree > ul > li { margin-left:0px; } ' + 
-				'.jstree-rtl > ul > li { margin-right:0px; } ' + 
-				'.jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } ' + 
-				'.jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } ' + 
-				'.jstree a:focus { outline: none; } ' + 
-				'.jstree a > ins { height:16px; width:16px; } ' + 
-				'.jstree a > .jstree-icon { margin-right:3px; } ' + 
-				'.jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } ' + 
-				'li.jstree-open > ul { display:block; } ' + 
-				'li.jstree-closed > ul { display:none; } ';
-		// Correct IE 6 (does not support the > CSS selector)
-		if(/msie/.test(u) && parseInt(v, 10) == 6) { 
-			is_ie6 = true;
-
-			// fix image flicker and lack of caching
-			try {
-				document.execCommand("BackgroundImageCache", false, true);
-			} catch (err) { }
-
-			css_string += '' + 
-				'.jstree li { height:18px; margin-left:0; margin-right:0; } ' + 
-				'.jstree li li { margin-left:18px; } ' + 
-				'.jstree-rtl li li { margin-left:0px; margin-right:18px; } ' + 
-				'li.jstree-open ul { display:block; } ' + 
-				'li.jstree-closed ul { display:none !important; } ' + 
-				'.jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } ' + 
-				'.jstree li a ins { height:16px; width:16px; margin-right:3px; } ' + 
-				'.jstree-rtl li a ins { margin-right:0px; margin-left:3px; } ';
-		}
-		// Correct IE 7 (shifts anchor nodes onhover)
-		if(/msie/.test(u) && parseInt(v, 10) == 7) { 
-			is_ie7 = true;
-			css_string += '.jstree li a { border-width:0 !important; padding:0px 2px !important; } ';
-		}
-		// correct ff2 lack of display:inline-block
-		if(!/compatible/.test(u) && /mozilla/.test(u) && parseFloat(v, 10) < 1.9) {
-			is_ff2 = true;
-			css_string += '' + 
-				'.jstree ins { display:-moz-inline-box; } ' + 
-				'.jstree li { line-height:12px; } ' + // WHY??
-				'.jstree a { display:-moz-inline-box; } ' + 
-				'.jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ';
-				/* this shouldn't be here as it is theme specific */
-		}
-		// the default stylesheet
-		$.vakata.css.add_sheet({ str : css_string, title : "jstree" });
-	});
-
-	// core functions (open, close, create, update, delete)
-	$.jstree.plugin("core", {
-		__init : function () {
-			this.data.core.locked = false;
-			this.data.core.to_open = this.get_settings().core.initially_open;
-			this.data.core.to_load = this.get_settings().core.initially_load;
-		},
-		defaults : { 
-			html_titles	: false,
-			animation	: 500,
-			initially_open : [],
-			initially_load : [],
-			open_parents : true,
-			notify_plugins : true,
-			rtl			: false,
-			load_open	: false,
-			strings		: {
-				loading		: "Loading ...",
-				new_node	: "New node",
-				multiple_selection : "Multiple selection"
-			}
-		},
-		_fn : { 
-			init	: function () { 
-				this.set_focus(); 
-				if(this._get_settings().core.rtl) {
-					this.get_container().addClass("jstree-rtl").css("direction", "rtl");
-				}
-				this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>" + this._get_string("loading") + "</a></li></ul>");
-				this.data.core.li_height = this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height() || 18;
-
-				this.get_container()
-					.delegate("li > ins", "click.jstree", $.proxy(function (event) {
-							var trgt = $(event.target);
-							// if(trgt.is("ins") && event.pageY - trgt.offset().top < this.data.core.li_height) { this.toggle_node(trgt); }
-							this.toggle_node(trgt);
-						}, this))
-					.bind("mousedown.jstree", $.proxy(function () { 
-							this.set_focus(); // This used to be setTimeout(set_focus,0) - why?
-						}, this))
-					.bind("dblclick.jstree", function (event) { 
-						var sel;
-						if(document.selection && document.selection.empty) { document.selection.empty(); }
-						else {
-							if(window.getSelection) {
-								sel = window.getSelection();
-								try { 
-									sel.removeAllRanges();
-									sel.collapse();
-								} catch (err) { }
-							}
-						}
-					});
-				if(this._get_settings().core.notify_plugins) {
-					this.get_container()
-						.bind("load_node.jstree", $.proxy(function (e, data) { 
-								var o = this._get_node(data.rslt.obj),
-									t = this;
-								if(o === -1) { o = this.get_container_ul(); }
-								if(!o.length) { return; }
-								o.find("li").each(function () {
-									var th = $(this);
-									if(th.data("jstree")) {
-										$.each(th.data("jstree"), function (plugin, values) {
-											if(t.data[plugin] && $.isFunction(t["_" + plugin + "_notify"])) {
-												t["_" + plugin + "_notify"].call(t, th, values);
-											}
-										});
-									}
-								});
-							}, this));
-				}
-				if(this._get_settings().core.load_open) {
-					this.get_container()
-						.bind("load_node.jstree", $.proxy(function (e, data) { 
-								var o = this._get_node(data.rslt.obj),
-									t = this;
-								if(o === -1) { o = this.get_container_ul(); }
-								if(!o.length) { return; }
-								o.find("li.jstree-open:not(:has(ul))").each(function () {
-									t.load_node(this, $.noop, $.noop);
-								});
-							}, this));
-				}
-				this.__callback();
-				this.load_node(-1, function () { this.loaded(); this.reload_nodes(); });
-			},
-			destroy	: function () { 
-				var i,
-					n = this.get_index(),
-					s = this._get_settings(),
-					_this = this;
-
-				$.each(s.plugins, function (i, val) {
-					try { plugins[val].__destroy.apply(_this); } catch(err) { }
-				});
-				this.__callback();
-				// set focus to another instance if this one is focused
-				if(this.is_focused()) { 
-					for(i in instances) { 
-						if(instances.hasOwnProperty(i) && i != n) { 
-							instances[i].set_focus(); 
-							break; 
-						} 
-					}
-				}
-				// if no other instance found
-				if(n === focused_instance) { focused_instance = -1; }
-				// remove all traces of jstree in the DOM (only the ones set using jstree*) and cleans all events
-				this.get_container()
-					.unbind(".jstree")
-					.undelegate(".jstree")
-					.removeData("jstree_instance_id")
-					.find("[class^='jstree']")
-						.andSelf()
-						.attr("class", function () { return this.className.replace(/jstree[^ ]*|$/ig,''); });
-				$(document)
-					.unbind(".jstree-" + n)
-					.undelegate(".jstree-" + n);
-				// remove the actual data
-				instances[n] = null;
-				delete instances[n];
-			},
-
-			_core_notify : function (n, data) {
-				if(data.opened) {
-					this.open_node(n, false, true);
-				}
-			},
-
-			lock : function () {
-				this.data.core.locked = true;
-				this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");
-				this.__callback({});
-			},
-			unlock : function () {
-				this.data.core.locked = false;
-				this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");
-				this.__callback({});
-			},
-			is_locked : function () { return this.data.core.locked; },
-			save_opened : function () {
-				var _this = this;
-				this.data.core.to_open = [];
-				this.get_container_ul().find("li.jstree-open").each(function () { 
-					if(this.id) { _this.data.core.to_open.push("#" + this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")); }
-				});
-				this.__callback(_this.data.core.to_open);
-			},
-			save_loaded : function () { },
-			reload_nodes : function (is_callback) {
-				var _this = this,
-					done = true,
-					current = [],
-					remaining = [];
-				if(!is_callback) { 
-					this.data.core.reopen = false; 
-					this.data.core.refreshing = true; 
-					this.data.core.to_open = $.map($.makeArray(this.data.core.to_open), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
-					this.data.core.to_load = $.map($.makeArray(this.data.core.to_load), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
-					if(this.data.core.to_open.length) {
-						this.data.core.to_load = this.data.core.to_load.concat(this.data.core.to_open);
-					}
-				}
-				if(this.data.core.to_load.length) {
-					$.each(this.data.core.to_load, function (i, val) {
-						if(val == "#") { return true; }
-						if($(val).length) { current.push(val); }
-						else { remaining.push(val); }
-					});
-					if(current.length) {
-						this.data.core.to_load = remaining;
-						$.each(current, function (i, val) { 
-							if(!_this._is_loaded(val)) {
-								_this.load_node(val, function () { _this.reload_nodes(true); }, function () { _this.reload_nodes(true); });
-								done = false;
-							}
-						});
-					}
-				}
-				if(this.data.core.to_open.length) {
-					$.each(this.data.core.to_open, function (i, val) {
-						_this.open_node(val, false, true); 
-					});
-				}
-				if(done) { 
-					// TODO: find a more elegant approach to syncronizing returning requests
-					if(this.data.core.reopen) { clearTimeout(this.data.core.reopen); }
-					this.data.core.reopen = setTimeout(function () { _this.__callback({}, _this); }, 50);
-					this.data.core.refreshing = false;
-					this.reopen();
-				}
-			},
-			reopen : function () {
-				var _this = this;
-				if(this.data.core.to_open.length) {
-					$.each(this.data.core.to_open, function (i, val) {
-						_this.open_node(val, false, true); 
-					});
-				}
-				this.__callback({});
-			},
-			refresh : function (obj) {
-				var _this = this;
-				this.save_opened();
-				if(!obj) { obj = -1; }
-				obj = this._get_node(obj);
-				if(!obj) { obj = -1; }
-				if(obj !== -1) { obj.children("UL").remove(); }
-				else { this.get_container_ul().empty(); }
-				this.load_node(obj, function () { _this.__callback({ "obj" : obj}); _this.reload_nodes(); });
-			},
-			// Dummy function to fire after the first load (so that there is a jstree.loaded event)
-			loaded	: function () { 
-				this.__callback(); 
-			},
-			// deal with focus
-			set_focus	: function () { 
-				if(this.is_focused()) { return; }
-				var f = $.jstree._focused();
-				if(f) { f.unset_focus(); }
-
-				this.get_container().addClass("jstree-focused"); 
-				focused_instance = this.get_index(); 
-				this.__callback();
-			},
-			is_focused	: function () { 
-				return focused_instance == this.get_index(); 
-			},
-			unset_focus	: function () {
-				if(this.is_focused()) {
-					this.get_container().removeClass("jstree-focused"); 
-					focused_instance = -1; 
-				}
-				this.__callback();
-			},
-
-			// traverse
-			_get_node		: function (obj) { 
-				var $obj = $(obj, this.get_container()); 
-				if($obj.is(".jstree") || obj == -1) { return -1; } 
-				$obj = $obj.closest("li", this.get_container()); 
-				return $obj.length ? $obj : false; 
-			},
-			_get_next		: function (obj, strict) {
-				obj = this._get_node(obj);
-				if(obj === -1) { return this.get_container().find("> ul > li:first-child"); }
-				if(!obj.length) { return false; }
-				if(strict) { return (obj.nextAll("li").size() > 0) ? obj.nextAll("li:eq(0)") : false; }
-
-				if(obj.hasClass("jstree-open")) { return obj.find("li:eq(0)"); }
-				else if(obj.nextAll("li").size() > 0) { return obj.nextAll("li:eq(0)"); }
-				else { return obj.parentsUntil(".jstree","li").next("li").eq(0); }
-			},
-			_get_prev		: function (obj, strict) {
-				obj = this._get_node(obj);
-				if(obj === -1) { return this.get_container().find("> ul > li:last-child"); }
-				if(!obj.length) { return false; }
-				if(strict) { return (obj.prevAll("li").length > 0) ? obj.prevAll("li:eq(0)") : false; }
-
-				if(obj.prev("li").length) {
-					obj = obj.prev("li").eq(0);
-					while(obj.hasClass("jstree-open")) { obj = obj.children("ul:eq(0)").children("li:last"); }
-					return obj;
-				}
-				else { var o = obj.parentsUntil(".jstree","li:eq(0)"); return o.length ? o : false; }
-			},
-			_get_parent		: function (obj) {
-				obj = this._get_node(obj);
-				if(obj == -1 || !obj.length) { return false; }
-				var o = obj.parentsUntil(".jstree", "li:eq(0)");
-				return o.length ? o : -1;
-			},
-			_get_children	: function (obj) {
-				obj = this._get_node(obj);
-				if(obj === -1) { return this.get_container().children("ul:eq(0)").children("li"); }
-				if(!obj.length) { return false; }
-				return obj.children("ul:eq(0)").children("li");
-			},
-			get_path		: function (obj, id_mode) {
-				var p = [],
-					_this = this;
-				obj = this._get_node(obj);
-				if(obj === -1 || !obj || !obj.length) { return false; }
-				obj.parentsUntil(".jstree", "li").each(function () {
-					p.push( id_mode ? this.id : _this.get_text(this) );
-				});
-				p.reverse();
-				p.push( id_mode ? obj.attr("id") : this.get_text(obj) );
-				return p;
-			},
-
-			// string functions
-			_get_string : function (key) {
-				return this._get_settings().core.strings[key] || key;
-			},
-
-			is_open		: function (obj) { obj = this._get_node(obj); return obj && obj !== -1 && obj.hasClass("jstree-open"); },
-			is_closed	: function (obj) { obj = this._get_node(obj); return obj && obj !== -1 && obj.hasClass("jstree-closed"); },
-			is_leaf		: function (obj) { obj = this._get_node(obj); return obj && obj !== -1 && obj.hasClass("jstree-leaf"); },
-			correct_state	: function (obj) {
-				obj = this._get_node(obj);
-				if(!obj || obj === -1) { return false; }
-				obj.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();
-				this.__callback({ "obj" : obj });
-			},
-			// open/close
-			open_node	: function (obj, callback, skip_animation) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				if(!obj.hasClass("jstree-closed")) { if(callback) { callback.call(); } return false; }
-				var s = skip_animation || is_ie6 ? 0 : this._get_settings().core.animation,
-					t = this;
-				if(!this._is_loaded(obj)) {
-					obj.children("a").addClass("jstree-loading");
-					this.load_node(obj, function () { t.open_node(obj, callback, skip_animation); }, callback);
-				}
-				else {
-					if(this._get_settings().core.open_parents) {
-						obj.parentsUntil(".jstree",".jstree-closed").each(function () {
-							t.open_node(this, false, true);
-						});
-					}
-					if(s) { obj.children("ul").css("display","none"); }
-					obj.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");
-					if(s) { obj.children("ul").stop(true, true).slideDown(s, function () { this.style.display = ""; t.after_open(obj); }); }
-					else { t.after_open(obj); }
-					this.__callback({ "obj" : obj });
-					if(callback) { callback.call(); }
-				}
-			},
-			after_open	: function (obj) { this.__callback({ "obj" : obj }); },
-			close_node	: function (obj, skip_animation) {
-				obj = this._get_node(obj);
-				var s = skip_animation || is_ie6 ? 0 : this._get_settings().core.animation,
-					t = this;
-				if(!obj.length || !obj.hasClass("jstree-open")) { return false; }
-				if(s) { obj.children("ul").attr("style","display:block !important"); }
-				obj.removeClass("jstree-open").addClass("jstree-closed");
-				if(s) { obj.children("ul").stop(true, true).slideUp(s, function () { this.style.display = ""; t.after_close(obj); }); }
-				else { t.after_close(obj); }
-				this.__callback({ "obj" : obj });
-			},
-			after_close	: function (obj) { this.__callback({ "obj" : obj }); },
-			toggle_node	: function (obj) {
-				obj = this._get_node(obj);
-				if(obj.hasClass("jstree-closed")) { return this.open_node(obj); }
-				if(obj.hasClass("jstree-open")) { return this.close_node(obj); }
-			},
-			open_all	: function (obj, do_animation, original_obj) {
-				obj = obj ? this._get_node(obj) : -1;
-				if(!obj || obj === -1) { obj = this.get_container_ul(); }
-				if(original_obj) { 
-					obj = obj.find("li.jstree-closed");
-				}
-				else {
-					original_obj = obj;
-					if(obj.is(".jstree-closed")) { obj = obj.find("li.jstree-closed").andSelf(); }
-					else { obj = obj.find("li.jstree-closed"); }
-				}
-				var _this = this;
-				obj.each(function () { 
-					var __this = this; 
-					if(!_this._is_loaded(this)) { _this.open_node(this, function() { _this.open_all(__this, do_animation, original_obj); }, !do_animation); }
-					else { _this.open_node(this, false, !do_animation); }
-				});
-				// so that callback is fired AFTER all nodes are open
-				if(original_obj.find('li.jstree-closed').length === 0) { this.__callback({ "obj" : original_obj }); }
-			},
-			close_all	: function (obj, do_animation) {
-				var _this = this;
-				obj = obj ? this._get_node(obj) : this.get_container();
-				if(!obj || obj === -1) { obj = this.get_container_ul(); }
-				obj.find("li.jstree-open").andSelf().each(function () { _this.close_node(this, !do_animation); });
-				this.__callback({ "obj" : obj });
-			},
-			clean_node	: function (obj) {
-				obj = obj && obj != -1 ? $(obj) : this.get_container_ul();
-				obj = obj.is("li") ? obj.find("li").andSelf() : obj.find("li");
-				obj.removeClass("jstree-last")
-					.filter("li:last-child").addClass("jstree-last").end()
-					.filter(":has(li)")
-						.not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
-				obj.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();
-				this.__callback({ "obj" : obj });
-			},
-			// rollback
-			get_rollback : function () { 
-				this.__callback();
-				return { i : this.get_index(), h : this.get_container().children("ul").clone(true), d : this.data }; 
-			},
-			set_rollback : function (html, data) {
-				this.get_container().empty().append(html);
-				this.data = data;
-				this.__callback();
-			},
-			// Dummy functions to be overwritten by any datastore plugin included
-			load_node	: function (obj, s_call, e_call) { this.__callback({ "obj" : obj }); },
-			_is_loaded	: function (obj) { return true; },
-
-			// Basic operations: create
-			create_node	: function (obj, position, js, callback, is_loaded) {
-				obj = this._get_node(obj);
-				position = typeof position === "undefined" ? "last" : position;
-				var d = $("<li />"),
-					s = this._get_settings().core,
-					tmp;
-
-				if(obj !== -1 && !obj.length) { return false; }
-				if(!is_loaded && !this._is_loaded(obj)) { this.load_node(obj, function () { this.create_node(obj, position, js, callback, true); }); return false; }
-
-				this.__rollback();
-
-				if(typeof js === "string") { js = { "data" : js }; }
-				if(!js) { js = {}; }
-				if(js.attr) { d.attr(js.attr); }
-				if(js.metadata) { d.data(js.metadata); }
-				if(js.state) { d.addClass("jstree-" + js.state); }
-				if(!js.data) { js.data = this._get_string("new_node"); }
-				if(!$.isArray(js.data)) { tmp = js.data; js.data = []; js.data.push(tmp); }
-				$.each(js.data, function (i, m) {
-					tmp = $("<a />");
-					if($.isFunction(m)) { m = m.call(this, js); }
-					if(typeof m == "string") { tmp.attr('href','#')[ s.html_titles ? "html" : "text" ](m); }
-					else {
-						if(!m.attr) { m.attr = {}; }
-						if(!m.attr.href) { m.attr.href = '#'; }
-						tmp.attr(m.attr)[ s.html_titles ? "html" : "text" ](m.title);
-						if(m.language) { tmp.addClass(m.language); }
-					}
-					tmp.prepend("<ins class='jstree-icon'>&#160;</ins>");
-					if(!m.icon && js.icon) { m.icon = js.icon; }
-					if(m.icon) { 
-						if(m.icon.indexOf("/") === -1) { tmp.children("ins").addClass(m.icon); }
-						else { tmp.children("ins").css("background","url('" + m.icon + "') center center no-repeat"); }
-					}
-					d.append(tmp);
-				});
-				d.prepend("<ins class='jstree-icon'>&#160;</ins>");
-				if(obj === -1) {
-					obj = this.get_container();
-					if(position === "before") { position = "first"; }
-					if(position === "after") { position = "last"; }
-				}
-				switch(position) {
-					case "before": obj.before(d); tmp = this._get_parent(obj); break;
-					case "after" : obj.after(d);  tmp = this._get_parent(obj); break;
-					case "inside":
-					case "first" :
-						if(!obj.children("ul").length) { obj.append("<ul />"); }
-						obj.children("ul").prepend(d);
-						tmp = obj;
-						break;
-					case "last":
-						if(!obj.children("ul").length) { obj.append("<ul />"); }
-						obj.children("ul").append(d);
-						tmp = obj;
-						break;
-					default:
-						if(!obj.children("ul").length) { obj.append("<ul />"); }
-						if(!position) { position = 0; }
-						tmp = obj.children("ul").children("li").eq(position);
-						if(tmp.length) { tmp.before(d); }
-						else { obj.children("ul").append(d); }
-						tmp = obj;
-						break;
-				}
-				if(tmp === -1 || tmp.get(0) === this.get_container().get(0)) { tmp = -1; }
-				this.clean_node(tmp);
-				this.__callback({ "obj" : d, "parent" : tmp });
-				if(callback) { callback.call(this, d); }
-				return d;
-			},
-			// Basic operations: rename (deal with text)
-			get_text	: function (obj) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				var s = this._get_settings().core.html_titles;
-				obj = obj.children("a:eq(0)");
-				if(s) {
-					obj = obj.clone();
-					obj.children("INS").remove();
-					return obj.html();
-				}
-				else {
-					obj = obj.contents().filter(function() { return this.nodeType == 3; })[0];
-					return obj.nodeValue;
-				}
-			},
-			set_text	: function (obj, val) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				obj = obj.children("a:eq(0)");
-				if(this._get_settings().core.html_titles) {
-					var tmp = obj.children("INS").clone();
-					obj.html(val).prepend(tmp);
-					this.__callback({ "obj" : obj, "name" : val });
-					return true;
-				}
-				else {
-					obj = obj.contents().filter(function() { return this.nodeType == 3; })[0];
-					this.__callback({ "obj" : obj, "name" : val });
-					return (obj.nodeValue = val);
-				}
-			},
-			rename_node : function (obj, val) {
-				obj = this._get_node(obj);
-				this.__rollback();
-				if(obj && obj.length && this.set_text.apply(this, Array.prototype.slice.call(arguments))) { this.__callback({ "obj" : obj, "name" : val }); }
-			},
-			// Basic operations: deleting nodes
-			delete_node : function (obj) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				this.__rollback();
-				var p = this._get_parent(obj), prev = $([]), t = this;
-				obj.each(function () {
-					prev = prev.add(t._get_prev(this));
-				});
-				obj = obj.detach();
-				if(p !== -1 && p.find("> ul > li").length === 0) {
-					p.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");
-				}
-				this.clean_node(p);
-				this.__callback({ "obj" : obj, "prev" : prev, "parent" : p });
-				return obj;
-			},
-			prepare_move : function (o, r, pos, cb, is_cb) {
-				var p = {};
-
-				p.ot = $.jstree._reference(o) || this;
-				p.o = p.ot._get_node(o);
-				p.r = r === - 1 ? -1 : this._get_node(r);
-				p.p = (typeof pos === "undefined" || pos === false) ? "last" : pos; // TODO: move to a setting
-				if(!is_cb && prepared_move.o && prepared_move.o[0] === p.o[0] && prepared_move.r[0] === p.r[0] && prepared_move.p === p.p) {
-					this.__callback(prepared_move);
-					if(cb) { cb.call(this, prepared_move); }
-					return;
-				}
-				p.ot = $.jstree._reference(p.o) || this;
-				p.rt = $.jstree._reference(p.r) || this; // r === -1 ? p.ot : $.jstree._reference(p.r) || this
-				if(p.r === -1 || !p.r) {
-					p.cr = -1;
-					switch(p.p) {
-						case "first":
-						case "before":
-						case "inside":
-							p.cp = 0; 
-							break;
-						case "after":
-						case "last":
-							p.cp = p.rt.get_container().find(" > ul > li").length; 
-							break;
-						default:
-							p.cp = p.p;
-							break;
-					}
-				}
-				else {
-					if(!/^(before|after)$/.test(p.p) && !this._is_loaded(p.r)) {
-						return this.load_node(p.r, function () { this.prepare_move(o, r, pos, cb, true); });
-					}
-					switch(p.p) {
-						case "before":
-							p.cp = p.r.index();
-							p.cr = p.rt._get_parent(p.r);
-							break;
-						case "after":
-							p.cp = p.r.index() + 1;
-							p.cr = p.rt._get_parent(p.r);
-							break;
-						case "inside":
-						case "first":
-							p.cp = 0;
-							p.cr = p.r;
-							break;
-						case "last":
-							p.cp = p.r.find(" > ul > li").length; 
-							p.cr = p.r;
-							break;
-						default: 
-							p.cp = p.p;
-							p.cr = p.r;
-							break;
-					}
-				}
-				p.np = p.cr == -1 ? p.rt.get_container() : p.cr;
-				p.op = p.ot._get_parent(p.o);
-				p.cop = p.o.index();
-				if(p.op === -1) { p.op = p.ot ? p.ot.get_container() : this.get_container(); }
-				if(!/^(before|after)$/.test(p.p) && p.op && p.np && p.op[0] === p.np[0] && p.o.index() < p.cp) { p.cp++; }
-				//if(p.p === "before" && p.op && p.np && p.op[0] === p.np[0] && p.o.index() < p.cp) { p.cp--; }
-				p.or = p.np.find(" > ul > li:nth-child(" + (p.cp + 1) + ")");
-				prepared_move = p;
-				this.__callback(prepared_move);
-				if(cb) { cb.call(this, prepared_move); }
-			},
-			check_move : function () {
-				var obj = prepared_move, ret = true, r = obj.r === -1 ? this.get_container() : obj.r;
-				if(!obj || !obj.o || obj.or[0] === obj.o[0]) { return false; }
-				if(obj.op && obj.np && obj.op[0] === obj.np[0] && obj.cp - 1 === obj.o.index()) { return false; }
-				obj.o.each(function () { 
-					if(r.parentsUntil(".jstree", "li").andSelf().index(this) !== -1) { ret = false; return false; }
-				});
-				return ret;
-			},
-			move_node : function (obj, ref, position, is_copy, is_prepared, skip_check) {
-				if(!is_prepared) { 
-					return this.prepare_move(obj, ref, position, function (p) {
-						this.move_node(p, false, false, is_copy, true, skip_check);
-					});
-				}
-				if(is_copy) { 
-					prepared_move.cy = true;
-				}
-				if(!skip_check && !this.check_move()) { return false; }
-
-				this.__rollback();
-				var o = false;
-				if(is_copy) {
-					o = obj.o.clone(true);
-					o.find("*[id]").andSelf().each(function () {
-						if(this.id) { this.id = "copy_" + this.id; }
-					});
-				}
-				else { o = obj.o; }
-
-				if(obj.or.length) { obj.or.before(o); }
-				else { 
-					if(!obj.np.children("ul").length) { $("<ul />").appendTo(obj.np); }
-					obj.np.children("ul:eq(0)").append(o); 
-				}
-
-				try { 
-					obj.ot.clean_node(obj.op);
-					obj.rt.clean_node(obj.np);
-					if(!obj.op.find("> ul > li").length) {
-						obj.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove();
-					}
-				} catch (e) { }
-
-				if(is_copy) { 
-					prepared_move.cy = true;
-					prepared_move.oc = o; 
-				}
-				this.__callback(prepared_move);
-				return prepared_move;
-			},
-			_get_move : function () { return prepared_move; }
-		}
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree ui plugin
- * This plugins handles selecting/deselecting/hovering/dehovering nodes
- */
-(function ($) {
-	var scrollbar_width, e1, e2;
-	$(function() {
-		if (/msie/.test(navigator.userAgent.toLowerCase())) {
-			e1 = $('<textarea cols="10" rows="2"></textarea>').css({ position: 'absolute', top: -1000, left: 0 }).appendTo('body');
-			e2 = $('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({ position: 'absolute', top: -1000, left: 0 }).appendTo('body');
-			scrollbar_width = e1.width() - e2.width();
-			e1.add(e2).remove();
-		} 
-		else {
-			e1 = $('<div />').css({ width: 100, height: 100, overflow: 'auto', position: 'absolute', top: -1000, left: 0 })
-					.prependTo('body').append('<div />').find('div').css({ width: '100%', height: 200 });
-			scrollbar_width = 100 - e1.width();
-			e1.parent().remove();
-		}
-	});
-	$.jstree.plugin("ui", {
-		__init : function () { 
-			this.data.ui.selected = $(); 
-			this.data.ui.last_selected = false; 
-			this.data.ui.hovered = null;
-			this.data.ui.to_select = this.get_settings().ui.initially_select;
-
-			this.get_container()
-				.delegate("a", "click.jstree", $.proxy(function (event) {
-						event.preventDefault();
-						event.currentTarget.blur();
-						if(!$(event.currentTarget).hasClass("jstree-loading")) {
-							this.select_node(event.currentTarget, true, event);
-						}
-					}, this))
-				.delegate("a", "mouseenter.jstree", $.proxy(function (event) {
-						if(!$(event.currentTarget).hasClass("jstree-loading")) {
-							this.hover_node(event.target);
-						}
-					}, this))
-				.delegate("a", "mouseleave.jstree", $.proxy(function (event) {
-						if(!$(event.currentTarget).hasClass("jstree-loading")) {
-							this.dehover_node(event.target);
-						}
-					}, this))
-				.bind("reopen.jstree", $.proxy(function () { 
-						this.reselect();
-					}, this))
-				.bind("get_rollback.jstree", $.proxy(function () { 
-						this.dehover_node();
-						this.save_selected();
-					}, this))
-				.bind("set_rollback.jstree", $.proxy(function () { 
-						this.reselect();
-					}, this))
-				.bind("close_node.jstree", $.proxy(function (event, data) { 
-						var s = this._get_settings().ui,
-							obj = this._get_node(data.rslt.obj),
-							clk = (obj && obj.length) ? obj.children("ul").find("a.jstree-clicked") : $(),
-							_this = this;
-						if(s.selected_parent_close === false || !clk.length) { return; }
-						clk.each(function () { 
-							_this.deselect_node(this);
-							if(s.selected_parent_close === "select_parent") { _this.select_node(obj); }
-						});
-					}, this))
-				.bind("delete_node.jstree", $.proxy(function (event, data) { 
-						var s = this._get_settings().ui.select_prev_on_delete,
-							obj = this._get_node(data.rslt.obj),
-							clk = (obj && obj.length) ? obj.find("a.jstree-clicked") : [],
-							_this = this;
-						clk.each(function () { _this.deselect_node(this); });
-						if(s && clk.length) { 
-							data.rslt.prev.each(function () { 
-								if(this.parentNode) { _this.select_node(this); return false; /* if return false is removed all prev nodes will be selected */}
-							});
-						}
-					}, this))
-				.bind("move_node.jstree", $.proxy(function (event, data) { 
-						if(data.rslt.cy) { 
-							data.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked");
-						}
-					}, this));
-		},
-		defaults : {
-			select_limit : -1, // 0, 1, 2 ... or -1 for unlimited
-			select_multiple_modifier : "ctrl", // on, or ctrl, shift, alt
-			select_range_modifier : "shift",
-			selected_parent_close : "select_parent", // false, "deselect", "select_parent"
-			selected_parent_open : true,
-			select_prev_on_delete : true,
-			disable_selecting_children : false,
-			initially_select : []
-		},
-		_fn : { 
-			_get_node : function (obj, allow_multiple) {
-				if(typeof obj === "undefined" || obj === null) { return allow_multiple ? this.data.ui.selected : this.data.ui.last_selected; }
-				var $obj = $(obj, this.get_container()); 
-				if($obj.is(".jstree") || obj == -1) { return -1; } 
-				$obj = $obj.closest("li", this.get_container()); 
-				return $obj.length ? $obj : false; 
-			},
-			_ui_notify : function (n, data) {
-				if(data.selected) {
-					this.select_node(n, false);
-				}
-			},
-			save_selected : function () {
-				var _this = this;
-				this.data.ui.to_select = [];
-				this.data.ui.selected.each(function () { if(this.id) { _this.data.ui.to_select.push("#" + this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")); } });
-				this.__callback(this.data.ui.to_select);
-			},
-			reselect : function () {
-				var _this = this,
-					s = this.data.ui.to_select;
-				s = $.map($.makeArray(s), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
-				// this.deselect_all(); WHY deselect, breaks plugin state notifier?
-				$.each(s, function (i, val) { if(val && val !== "#") { _this.select_node(val); } });
-				this.data.ui.selected = this.data.ui.selected.filter(function () { return this.parentNode; });
-				this.__callback();
-			},
-			refresh : function (obj) {
-				this.save_selected();
-				return this.__call_old();
-			},
-			hover_node : function (obj) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				//if(this.data.ui.hovered && obj.get(0) === this.data.ui.hovered.get(0)) { return; }
-				if(!obj.hasClass("jstree-hovered")) { this.dehover_node(); }
-				this.data.ui.hovered = obj.children("a").addClass("jstree-hovered").parent();
-				this._fix_scroll(obj);
-				this.__callback({ "obj" : obj });
-			},
-			dehover_node : function () {
-				var obj = this.data.ui.hovered, p;
-				if(!obj || !obj.length) { return false; }
-				p = obj.children("a").removeClass("jstree-hovered").parent();
-				if(this.data.ui.hovered[0] === p[0]) { this.data.ui.hovered = null; }
-				this.__callback({ "obj" : obj });
-			},
-			select_node : function (obj, check, e) {
-				obj = this._get_node(obj);
-				if(obj == -1 || !obj || !obj.length) { return false; }
-				var s = this._get_settings().ui,
-					is_multiple = (s.select_multiple_modifier == "on" || (s.select_multiple_modifier !== false && e && e[s.select_multiple_modifier + "Key"])),
-					is_range = (s.select_range_modifier !== false && e && e[s.select_range_modifier + "Key"] && this.data.ui.last_selected && this.data.ui.last_selected[0] !== obj[0] && this.data.ui.last_selected.parent()[0] === obj.parent()[0]),
-					is_selected = this.is_selected(obj),
-					proceed = true,
-					t = this;
-				if(check) {
-					if(s.disable_selecting_children && is_multiple && 
-						(
-							(obj.parentsUntil(".jstree","li").children("a.jstree-clicked").length) ||
-							(obj.children("ul").find("a.jstree-clicked:eq(0)").length)
-						)
-					) {
-						return false;
-					}
-					proceed = false;
-					switch(!0) {
-						case (is_range):
-							this.data.ui.last_selected.addClass("jstree-last-selected");
-							obj = obj[ obj.index() < this.data.ui.last_selected.index() ? "nextUntil" : "prevUntil" ](".jstree-last-selected").andSelf();
-							if(s.select_limit == -1 || obj.length < s.select_limit) {
-								this.data.ui.last_selected.removeClass("jstree-last-selected");
-								this.data.ui.selected.each(function () {
-									if(this !== t.data.ui.last_selected[0]) { t.deselect_node(this); }
-								});
-								is_selected = false;
-								proceed = true;
-							}
-							else {
-								proceed = false;
-							}
-							break;
-						case (is_selected && !is_multiple): 
-							this.deselect_all();
-							is_selected = false;
-							proceed = true;
-							break;
-						case (!is_selected && !is_multiple): 
-							if(s.select_limit == -1 || s.select_limit > 0) {
-								this.deselect_all();
-								proceed = true;
-							}
-							break;
-						case (is_selected && is_multiple): 
-							this.deselect_node(obj);
-							break;
-						case (!is_selected && is_multiple): 
-							if(s.select_limit == -1 || this.data.ui.selected.length + 1 <= s.select_limit) { 
-								proceed = true;
-							}
-							break;
-					}
-				}
-				if(proceed && !is_selected) {
-					if(!is_range) { this.data.ui.last_selected = obj; }
-					obj.children("a").addClass("jstree-clicked");
-					if(s.selected_parent_open) {
-						obj.parents(".jstree-closed").each(function () { t.open_node(this, false, true); });
-					}
-					this.data.ui.selected = this.data.ui.selected.add(obj);
-					this._fix_scroll(obj.eq(0));
-					this.__callback({ "obj" : obj, "e" : e });
-				}
-			},
-			_fix_scroll : function (obj) {
-				var c = this.get_container()[0], t;
-				if(c.scrollHeight > c.offsetHeight) {
-					obj = this._get_node(obj);
-					if(!obj || obj === -1 || !obj.length || !obj.is(":visible")) { return; }
-					t = obj.offset().top - this.get_container().offset().top;
-					if(t < 0) { 
-						c.scrollTop = c.scrollTop + t - 1; 
-					}
-					if(t + this.data.core.li_height + (c.scrollWidth > c.offsetWidth ? scrollbar_width : 0) > c.offsetHeight) { 
-						c.scrollTop = c.scrollTop + (t - c.offsetHeight + this.data.core.li_height + 1 + (c.scrollWidth > c.offsetWidth ? scrollbar_width : 0)); 
-					}
-				}
-			},
-			deselect_node : function (obj) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				if(this.is_selected(obj)) {
-					obj.children("a").removeClass("jstree-clicked");
-					this.data.ui.selected = this.data.ui.selected.not(obj);
-					if(this.data.ui.last_selected.get(0) === obj.get(0)) { this.data.ui.last_selected = this.data.ui.selected.eq(0); }
-					this.__callback({ "obj" : obj });
-				}
-			},
-			toggle_select : function (obj) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return false; }
-				if(this.is_selected(obj)) { this.deselect_node(obj); }
-				else { this.select_node(obj); }
-			},
-			is_selected : function (obj) { return this.data.ui.selected.index(this._get_node(obj)) >= 0; },
-			get_selected : function (context) { 
-				return context ? $(context).find("a.jstree-clicked").parent() : this.data.ui.selected; 
-			},
-			deselect_all : function (context) {
-				var ret = context ? $(context).find("a.jstree-clicked").parent() : this.get_container().find("a.jstree-clicked").parent();
-				ret.children("a.jstree-clicked").removeClass("jstree-clicked");
-				this.data.ui.selected = $([]);
-				this.data.ui.last_selected = false;
-				this.__callback({ "obj" : ret });
-			}
-		}
-	});
-	// include the selection plugin by default
-	$.jstree.defaults.plugins.push("ui");
-})(jQuery);
-//*/
-
-/* 
- * jsTree CRRM plugin
- * Handles creating/renaming/removing/moving nodes by user interaction.
- */
-(function ($) {
-	$.jstree.plugin("crrm", { 
-		__init : function () {
-			this.get_container()
-				.bind("move_node.jstree", $.proxy(function (e, data) {
-					if(this._get_settings().crrm.move.open_onmove) {
-						var t = this;
-						data.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function () {
-							t.open_node(this, false, true);
-						});
-					}
-				}, this));
-		},
-		defaults : {
-			input_width_limit : 200,
-			move : {
-				always_copy			: false, // false, true or "multitree"
-				open_onmove			: true,
-				default_position	: "last",
-				check_move			: function (m) { return true; }
-			}
-		},
-		_fn : {
-			_show_input : function (obj, callback) {
-				obj = this._get_node(obj);
-				var rtl = this._get_settings().core.rtl,
-					w = this._get_settings().crrm.input_width_limit,
-					w1 = obj.children("ins").width(),
-					w2 = obj.find("> a:visible > ins").width() * obj.find("> a:visible > ins").length,
-					t = this.get_text(obj),
-					h1 = $("<div />", { css : { "position" : "absolute", "top" : "-200px", "left" : (rtl ? "0px" : "-1000px"), "visibility" : "hidden" } }).appendTo("body"),
-					h2 = obj.css("position","relative").append(
-					$("<input />", { 
-						"value" : t,
-						"class" : "jstree-rename-input",
-						// "size" : t.length,
-						"css" : {
-							"padding" : "0",
-							"border" : "1px solid silver",
-							"position" : "absolute",
-							"left"  : (rtl ? "auto" : (w1 + w2 + 4) + "px"),
-							"right" : (rtl ? (w1 + w2 + 4) + "px" : "auto"),
-							"top" : "0px",
-							"height" : (this.data.core.li_height - 2) + "px",
-							"lineHeight" : (this.data.core.li_height - 2) + "px",
-							"width" : "150px" // will be set a bit further down
-						},
-						"blur" : $.proxy(function () {
-							var i = obj.children(".jstree-rename-input"),
-								v = i.val();
-							if(v === "") { v = t; }
-							h1.remove();
-							i.remove(); // rollback purposes
-							this.set_text(obj,t); // rollback purposes
-							this.rename_node(obj, v);
-							callback.call(this, obj, v, t);
-							obj.css("position","");
-						}, this),
-						"keyup" : function (event) {
-							var key = event.keyCode || event.which;
-							if(key == 27) { this.value = t; this.blur(); return; }
-							else if(key == 13) { this.blur(); return; }
-							else {
-								h2.width(Math.min(h1.text("pW" + this.value).width(),w));
-							}
-						},
-						"keypress" : function(event) {
-							var key = event.keyCode || event.which;
-							if(key == 13) { return false; }
-						}
-					})
-				).children(".jstree-rename-input"); 
-				this.set_text(obj, "");
-				h1.css({
-						fontFamily		: h2.css('fontFamily')		|| '',
-						fontSize		: h2.css('fontSize')		|| '',
-						fontWeight		: h2.css('fontWeight')		|| '',
-						fontStyle		: h2.css('fontStyle')		|| '',
-						fontStretch		: h2.css('fontStretch')		|| '',
-						fontVariant		: h2.css('fontVariant')		|| '',
-						letterSpacing	: h2.css('letterSpacing')	|| '',
-						wordSpacing		: h2.css('wordSpacing')		|| ''
-				});
-				h2.width(Math.min(h1.text("pW" + h2[0].value).width(),w))[0].select();
-			},
-			rename : function (obj) {
-				obj = this._get_node(obj);
-				this.__rollback();
-				var f = this.__callback;
-				this._show_input(obj, function (obj, new_name, old_name) { 
-					f.call(this, { "obj" : obj, "new_name" : new_name, "old_name" : old_name });
-				});
-			},
-			create : function (obj, position, js, callback, skip_rename) {
-				var t, _this = this;
-				obj = this._get_node(obj);
-				if(!obj) { obj = -1; }
-				this.__rollback();
-				t = this.create_node(obj, position, js, function (t) {
-					var p = this._get_parent(t),
-						pos = $(t).index();
-					if(callback) { callback.call(this, t); }
-					if(p.length && p.hasClass("jstree-closed")) { this.open_node(p, false, true); }
-					if(!skip_rename) { 
-						this._show_input(t, function (obj, new_name, old_name) { 
-							_this.__callback({ "obj" : obj, "name" : new_name, "parent" : p, "position" : pos });
-						});
-					}
-					else { _this.__callback({ "obj" : t, "name" : this.get_text(t), "parent" : p, "position" : pos }); }
-				});
-				return t;
-			},
-			remove : function (obj) {
-				obj = this._get_node(obj, true);
-				var p = this._get_parent(obj), prev = this._get_prev(obj);
-				this.__rollback();
-				obj = this.delete_node(obj);
-				if(obj !== false) { this.__callback({ "obj" : obj, "prev" : prev, "parent" : p }); }
-			},
-			check_move : function () {
-				if(!this.__call_old()) { return false; }
-				var s = this._get_settings().crrm.move;
-				if(!s.check_move.call(this, this._get_move())) { return false; }
-				return true;
-			},
-			move_node : function (obj, ref, position, is_copy, is_prepared, skip_check) {
-				var s = this._get_settings().crrm.move;
-				if(!is_prepared) { 
-					if(typeof position === "undefined") { position = s.default_position; }
-					if(position === "inside" && !s.default_position.match(/^(before|after)$/)) { position = s.default_position; }
-					return this.__call_old(true, obj, ref, position, is_copy, false, skip_check);
-				}
-				// if the move is already prepared
-				if(s.always_copy === true || (s.always_copy === "multitree" && obj.rt.get_index() !== obj.ot.get_index() )) {
-					is_copy = true;
-				}
-				this.__call_old(true, obj, ref, position, is_copy, true, skip_check);
-			},
-
-			cut : function (obj) {
-				obj = this._get_node(obj, true);
-				if(!obj || !obj.length) { return false; }
-				this.data.crrm.cp_nodes = false;
-				this.data.crrm.ct_nodes = obj;
-				this.__callback({ "obj" : obj });
-			},
-			copy : function (obj) {
-				obj = this._get_node(obj, true);
-				if(!obj || !obj.length) { return false; }
-				this.data.crrm.ct_nodes = false;
-				this.data.crrm.cp_nodes = obj;
-				this.__callback({ "obj" : obj });
-			},
-			paste : function (obj) { 
-				obj = this._get_node(obj);
-				if(!obj || !obj.length) { return false; }
-				var nodes = this.data.crrm.ct_nodes ? this.data.crrm.ct_nodes : this.data.crrm.cp_nodes;
-				if(!this.data.crrm.ct_nodes && !this.data.crrm.cp_nodes) { return false; }
-				if(this.data.crrm.ct_nodes) { this.move_node(this.data.crrm.ct_nodes, obj); this.data.crrm.ct_nodes = false; }
-				if(this.data.crrm.cp_nodes) { this.move_node(this.data.crrm.cp_nodes, obj, false, true); }
-				this.__callback({ "obj" : obj, "nodes" : nodes });
-			}
-		}
-	});
-	// include the crr plugin by default
-	// $.jstree.defaults.plugins.push("crrm");
-})(jQuery);
-//*/
-
-/* 
- * jsTree themes plugin
- * Handles loading and setting themes, as well as detecting path to themes, etc.
- */
-(function ($) {
-	var themes_loaded = [];
-	// this variable stores the path to the themes folder - if left as false - it will be autodetected
-	$.jstree._themes = false;
-	$.jstree.plugin("themes", {
-		__init : function () { 
-			this.get_container()
-				.bind("init.jstree", $.proxy(function () {
-						var s = this._get_settings().themes;
-						this.data.themes.dots = s.dots; 
-						this.data.themes.icons = s.icons; 
-						this.set_theme(s.theme, s.url);
-					}, this))
-				.bind("loaded.jstree", $.proxy(function () {
-						// bound here too, as simple HTML tree's won't honor dots & icons otherwise
-						if(!this.data.themes.dots) { this.hide_dots(); }
-						else { this.show_dots(); }
-						if(!this.data.themes.icons) { this.hide_icons(); }
-						else { this.show_icons(); }
-					}, this));
-		},
-		defaults : { 
-			theme : "default", 
-			url : false,
-			dots : true,
-			icons : true
-		},
-		_fn : {
-			set_theme : function (theme_name, theme_url) {
-				if(!theme_name) { return false; }
-				if(!theme_url) { theme_url = $.jstree._themes + theme_name + '/style.css'; }
-				if($.inArray(theme_url, themes_loaded) == -1) {
-					$.vakata.css.add_sheet({ "url" : theme_url });
-					themes_loaded.push(theme_url);
-				}
-				if(this.data.themes.theme != theme_name) {
-					this.get_container().removeClass('jstree-' + this.data.themes.theme);
-					this.data.themes.theme = theme_name;
-				}
-				this.get_container().addClass('jstree-' + theme_name);
-				if(!this.data.themes.dots) { this.hide_dots(); }
-				else { this.show_dots(); }
-				if(!this.data.themes.icons) { this.hide_icons(); }
-				else { this.show_icons(); }
-				this.__callback();
-			},
-			get_theme	: function () { return this.data.themes.theme; },
-
-			show_dots	: function () { this.data.themes.dots = true; this.get_container().children("ul").removeClass("jstree-no-dots"); },
-			hide_dots	: function () { this.data.themes.dots = false; this.get_container().children("ul").addClass("jstree-no-dots"); },
-			toggle_dots	: function () { if(this.data.themes.dots) { this.hide_dots(); } else { this.show_dots(); } },
-
-			show_icons	: function () { this.data.themes.icons = true; this.get_container().children("ul").removeClass("jstree-no-icons"); },
-			hide_icons	: function () { this.data.themes.icons = false; this.get_container().children("ul").addClass("jstree-no-icons"); },
-			toggle_icons: function () { if(this.data.themes.icons) { this.hide_icons(); } else { this.show_icons(); } }
-		}
-	});
-	// autodetect themes path
-	$(function () {
-		if($.jstree._themes === false) {
-			$("script").each(function () { 
-				if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)) { 
-					$.jstree._themes = this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/, "") + 'themes/'; 
-					return false; 
-				}
-			});
-		}
-		if($.jstree._themes === false) { $.jstree._themes = "themes/"; }
-	});
-	// include the themes plugin by default
-	$.jstree.defaults.plugins.push("themes");
-})(jQuery);
-//*/
-
-/*
- * jsTree hotkeys plugin
- * Enables keyboard navigation for all tree instances
- * Depends on the jstree ui & jquery hotkeys plugins
- */
-(function ($) {
-	var bound = [];
-	function exec(i, event) {
-		var f = $.jstree._focused(), tmp;
-		if(f && f.data && f.data.hotkeys && f.data.hotkeys.enabled) { 
-			tmp = f._get_settings().hotkeys[i];
-			if(tmp) { return tmp.call(f, event); }
-		}
-	}
-	$.jstree.plugin("hotkeys", {
-		__init : function () {
-			if(typeof $.hotkeys === "undefined") { throw "jsTree hotkeys: jQuery hotkeys plugin not included."; }
-			if(!this.data.ui) { throw "jsTree hotkeys: jsTree UI plugin not included."; }
-			$.each(this._get_settings().hotkeys, function (i, v) {
-				if(v !== false && $.inArray(i, bound) == -1) {
-					$(document).bind("keydown", i, function (event) { return exec(i, event); });
-					bound.push(i);
-				}
-			});
-			this.get_container()
-				.bind("lock.jstree", $.proxy(function () {
-						if(this.data.hotkeys.enabled) { this.data.hotkeys.enabled = false; this.data.hotkeys.revert = true; }
-					}, this))
-				.bind("unlock.jstree", $.proxy(function () {
-						if(this.data.hotkeys.revert) { this.data.hotkeys.enabled = true; }
-					}, this));
-			this.enable_hotkeys();
-		},
-		defaults : {
-			"up" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
-				this.hover_node(this._get_prev(o));
-				return false; 
-			},
-			"ctrl+up" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
-				this.hover_node(this._get_prev(o));
-				return false; 
-			},
-			"shift+up" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
-				this.hover_node(this._get_prev(o));
-				return false; 
-			},
-			"down" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
-				this.hover_node(this._get_next(o));
-				return false;
-			},
-			"ctrl+down" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
-				this.hover_node(this._get_next(o));
-				return false;
-			},
-			"shift+down" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
-				this.hover_node(this._get_next(o));
-				return false;
-			},
-			"left" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected;
-				if(o) {
-					if(o.hasClass("jstree-open")) { this.close_node(o); }
-					else { this.hover_node(this._get_prev(o)); }
-				}
-				return false;
-			},
-			"ctrl+left" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected;
-				if(o) {
-					if(o.hasClass("jstree-open")) { this.close_node(o); }
-					else { this.hover_node(this._get_prev(o)); }
-				}
-				return false;
-			},
-			"shift+left" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected;
-				if(o) {
-					if(o.hasClass("jstree-open")) { this.close_node(o); }
-					else { this.hover_node(this._get_prev(o)); }
-				}
-				return false;
-			},
-			"right" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected;
-				if(o && o.length) {
-					if(o.hasClass("jstree-closed")) { this.open_node(o); }
-					else { this.hover_node(this._get_next(o)); }
-				}
-				return false;
-			},
-			"ctrl+right" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected;
-				if(o && o.length) {
-					if(o.hasClass("jstree-closed")) { this.open_node(o); }
-					else { this.hover_node(this._get_next(o)); }
-				}
-				return false;
-			},
-			"shift+right" : function () { 
-				var o = this.data.ui.hovered || this.data.ui.last_selected;
-				if(o && o.length) {
-					if(o.hasClass("jstree-closed")) { this.open_node(o); }
-					else { this.hover_node(this._get_next(o)); }
-				}
-				return false;
-			},
-			"space" : function () { 
-				if(this.data.ui.hovered) { this.data.ui.hovered.children("a:eq(0)").click(); } 
-				return false; 
-			},
-			"ctrl+space" : function (event) { 
-				event.type = "click";
-				if(this.data.ui.hovered) { this.data.ui.hovered.children("a:eq(0)").trigger(event); } 
-				return false; 
-			},
-			"shift+space" : function (event) { 
-				event.type = "click";
-				if(this.data.ui.hovered) { this.data.ui.hovered.children("a:eq(0)").trigger(event); } 
-				return false; 
-			},
-			"f2" : function () { this.rename(this.data.ui.hovered || this.data.ui.last_selected); },
-			"del" : function () { this.remove(this.data.ui.hovered || this._get_node(null)); }
-		},
-		_fn : {
-			enable_hotkeys : function () {
-				this.data.hotkeys.enabled = true;
-			},
-			disable_hotkeys : function () {
-				this.data.hotkeys.enabled = false;
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree JSON plugin
- * The JSON data store. Datastores are build by overriding the `load_node` and `_is_loaded` functions.
- */
-(function ($) {
-	$.jstree.plugin("json_data", {
-		__init : function() {
-			var s = this._get_settings().json_data;
-			if(s.progressive_unload) {
-				this.get_container().bind("after_close.jstree", function (e, data) {
-					data.rslt.obj.children("ul").remove();
-				});
-			}
-		},
-		defaults : { 
-			// `data` can be a function:
-			//  * accepts two arguments - node being loaded and a callback to pass the result to
-			//  * will be executed in the current tree's scope & ajax won't be supported
-			data : false, 
-			ajax : false,
-			correct_state : true,
-			progressive_render : false,
-			progressive_unload : false
-		},
-		_fn : {
-			load_node : function (obj, s_call, e_call) { var _this = this; this.load_node_json(obj, function () { _this.__callback({ "obj" : _this._get_node(obj) }); s_call.call(this); }, e_call); },
-			_is_loaded : function (obj) { 
-				var s = this._get_settings().json_data;
-				obj = this._get_node(obj); 
-				return obj == -1 || !obj || (!s.ajax && !s.progressive_render && !$.isFunction(s.data)) || obj.is(".jstree-open, .jstree-leaf") || obj.children("ul").children("li").length > 0;
-			},
-			refresh : function (obj) {
-				obj = this._get_node(obj);
-				var s = this._get_settings().json_data;
-				if(obj && obj !== -1 && s.progressive_unload && ($.isFunction(s.data) || !!s.ajax)) {
-					obj.removeData("jstree_children");
-				}
-				return this.__call_old();
-			},
-			load_node_json : function (obj, s_call, e_call) {
-				var s = this.get_settings().json_data, d,
-					error_func = function () {},
-					success_func = function () {};
-				obj = this._get_node(obj);
-
-				if(obj && obj !== -1 && (s.progressive_render || s.progressive_unload) && !obj.is(".jstree-open, .jstree-leaf") && obj.children("ul").children("li").length === 0 && obj.data("jstree_children")) {
-					d = this._parse_json(obj.data("jstree_children"), obj);
-					if(d) {
-						obj.append(d);
-						if(!s.progressive_unload) { obj.removeData("jstree_children"); }
-					}
-					this.clean_node(obj);
-					if(s_call) { s_call.call(this); }
-					return;
-				}
-
-				if(obj && obj !== -1) {
-					if(obj.data("jstree_is_loading")) { return; }
-					else { obj.data("jstree_is_loading",true); }
-				}
-				switch(!0) {
-					case (!s.data && !s.ajax): throw "Neither data nor ajax settings supplied.";
-					// function option added here for easier model integration (also supporting async - see callback)
-					case ($.isFunction(s.data)):
-						s.data.call(this, obj, $.proxy(function (d) {
-							d = this._parse_json(d, obj);
-							if(!d) { 
-								if(obj === -1 || !obj) {
-									if(s.correct_state) { this.get_container().children("ul").empty(); }
-								}
-								else {
-									obj.children("a.jstree-loading").removeClass("jstree-loading");
-									obj.removeData("jstree_is_loading");
-									if(s.correct_state) { this.correct_state(obj); }
-								}
-								if(e_call) { e_call.call(this); }
-							}
-							else {
-								if(obj === -1 || !obj) { this.get_container().children("ul").empty().append(d.children()); }
-								else { obj.append(d).children("a.jstree-loading").removeClass("jstree-loading"); obj.removeData("jstree_is_loading"); }
-								this.clean_node(obj);
-								if(s_call) { s_call.call(this); }
-							}
-						}, this));
-						break;
-					case (!!s.data && !s.ajax) || (!!s.data && !!s.ajax && (!obj || obj === -1)):
-						if(!obj || obj == -1) {
-							d = this._parse_json(s.data, obj);
-							if(d) {
-								this.get_container().children("ul").empty().append(d.children());
-								this.clean_node();
-							}
-							else { 
-								if(s.correct_state) { this.get_container().children("ul").empty(); }
-							}
-						}
-						if(s_call) { s_call.call(this); }
-						break;
-					case (!s.data && !!s.ajax) || (!!s.data && !!s.ajax && obj && obj !== -1):
-						error_func = function (x, t, e) {
-							var ef = this.get_settings().json_data.ajax.error; 
-							if(ef) { ef.call(this, x, t, e); }
-							if(obj != -1 && obj.length) {
-								obj.children("a.jstree-loading").removeClass("jstree-loading");
-								obj.removeData("jstree_is_loading");
-								if(t === "success" && s.correct_state) { this.correct_state(obj); }
-							}
-							else {
-								if(t === "success" && s.correct_state) { this.get_container().children("ul").empty(); }
-							}
-							if(e_call) { e_call.call(this); }
-						};
-						success_func = function (d, t, x) {
-							var sf = this.get_settings().json_data.ajax.success; 
-							if(sf) { d = sf.call(this,d,t,x) || d; }
-							if(d === "" || (d && d.toString && d.toString().replace(/^[\s\n]+$/,"") === "") || (!$.isArray(d) && !$.isPlainObject(d))) {
-								return error_func.call(this, x, t, "");
-							}
-							d = this._parse_json(d, obj);
-							if(d) {
-								if(obj === -1 || !obj) { this.get_container().children("ul").empty().append(d.children()); }
-								else { obj.append(d).children("a.jstree-loading").removeClass("jstree-loading"); obj.removeData("jstree_is_loading"); }
-								this.clean_node(obj);
-								if(s_call) { s_call.call(this); }
-							}
-							else {
-								if(obj === -1 || !obj) {
-									if(s.correct_state) { 
-										this.get_container().children("ul").empty(); 
-										if(s_call) { s_call.call(this); }
-									}
-								}
-								else {
-									obj.children("a.jstree-loading").removeClass("jstree-loading");
-									obj.removeData("jstree_is_loading");
-									if(s.correct_state) { 
-										this.correct_state(obj);
-										if(s_call) { s_call.call(this); } 
-									}
-								}
-							}
-						};
-						s.ajax.context = this;
-						s.ajax.error = error_func;
-						s.ajax.success = success_func;
-						if(!s.ajax.dataType) { s.ajax.dataType = "json"; }
-						if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, obj); }
-						if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, obj); }
-						$.ajax(s.ajax);
-						break;
-				}
-			},
-			_parse_json : function (js, obj, is_callback) {
-				var d = false, 
-					p = this._get_settings(),
-					s = p.json_data,
-					t = p.core.html_titles,
-					tmp, i, j, ul1, ul2;
-
-				if(!js) { return d; }
-				if(s.progressive_unload && obj && obj !== -1) { 
-					obj.data("jstree_children", d);
-				}
-				if($.isArray(js)) {
-					d = $();
-					if(!js.length) { return false; }
-					for(i = 0, j = js.length; i < j; i++) {
-						tmp = this._parse_json(js[i], obj, true);
-						if(tmp.length) { d = d.add(tmp); }
-					}
-				}
-				else {
-					if(typeof js == "string") { js = { data : js }; }
-					if(!js.data && js.data !== "") { return d; }
-					d = $("<li />");
-					if(js.attr) { d.attr(js.attr); }
-					if(js.metadata) { d.data(js.metadata); }
-					if(js.state) { d.addClass("jstree-" + js.state); }
-					if(!$.isArray(js.data)) { tmp = js.data; js.data = []; js.data.push(tmp); }
-					$.each(js.data, function (i, m) {
-						tmp = $("<a />");
-						if($.isFunction(m)) { m = m.call(this, js); }
-						if(typeof m == "string") { tmp.attr('href','#')[ t ? "html" : "text" ](m); }
-						else {
-							if(!m.attr) { m.attr = {}; }
-							if(!m.attr.href) { m.attr.href = '#'; }
-							tmp.attr(m.attr)[ t ? "html" : "text" ](m.title);
-							if(m.language) { tmp.addClass(m.language); }
-						}
-						tmp.prepend("<ins class='jstree-icon'>&#160;</ins>");
-						if(!m.icon && js.icon) { m.icon = js.icon; }
-						if(m.icon) { 
-							if(m.icon.indexOf("/") === -1) { tmp.children("ins").addClass(m.icon); }
-							else { tmp.children("ins").css("background","url('" + m.icon + "') center center no-repeat"); }
-						}
-						d.append(tmp);
-					});
-					d.prepend("<ins class='jstree-icon'>&#160;</ins>");
-					if(js.children) { 
-						if(s.progressive_render && js.state !== "open") {
-							d.addClass("jstree-closed").data("jstree_children", js.children);
-						}
-						else {
-							if(s.progressive_unload) { d.data("jstree_children", js.children); }
-							if($.isArray(js.children) && js.children.length) {
-								tmp = this._parse_json(js.children, obj, true);
-								if(tmp.length) {
-									ul2 = $("<ul />");
-									ul2.append(tmp);
-									d.append(ul2);
-								}
-							}
-						}
-					}
-				}
-				if(!is_callback) {
-					ul1 = $("<ul />");
-					ul1.append(d);
-					d = ul1;
-				}
-				return d;
-			},
-			get_json : function (obj, li_attr, a_attr, is_callback) {
-				var result = [], 
-					s = this._get_settings(), 
-					_this = this,
-					tmp1, tmp2, li, a, t, lang;
-				obj = this._get_node(obj);
-				if(!obj || obj === -1) { obj = this.get_container().find("> ul > li"); }
-				li_attr = $.isArray(li_attr) ? li_attr : [ "id", "class" ];
-				if(!is_callback && this.data.types) { li_attr.push(s.types.type_attr); }
-				a_attr = $.isArray(a_attr) ? a_attr : [ ];
-
-				obj.each(function () {
-					li = $(this);
-					tmp1 = { data : [] };
-					if(li_attr.length) { tmp1.attr = { }; }
-					$.each(li_attr, function (i, v) { 
-						tmp2 = li.attr(v); 
-						if(tmp2 && tmp2.length && tmp2.replace(/jstree[^ ]*/ig,'').length) {
-							tmp1.attr[v] = (" " + tmp2).replace(/ jstree[^ ]*/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""); 
-						}
-					});
-					if(li.hasClass("jstree-open")) { tmp1.state = "open"; }
-					if(li.hasClass("jstree-closed")) { tmp1.state = "closed"; }
-					if(li.data()) { tmp1.metadata = li.data(); }
-					a = li.children("a");
-					a.each(function () {
-						t = $(this);
-						if(
-							a_attr.length || 
-							$.inArray("languages", s.plugins) !== -1 || 
-							t.children("ins").get(0).style.backgroundImage.length || 
-							(t.children("ins").get(0).className && t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').length)
-						) { 
-							lang = false;
-							if($.inArray("languages", s.plugins) !== -1 && $.isArray(s.languages) && s.languages.length) {
-								$.each(s.languages, function (l, lv) {
-									if(t.hasClass(lv)) {
-										lang = lv;
-										return false;
-									}
-								});
-							}
-							tmp2 = { attr : { }, title : _this.get_text(t, lang) }; 
-							$.each(a_attr, function (k, z) {
-								tmp2.attr[z] = (" " + (t.attr(z) || "")).replace(/ jstree[^ ]*/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");
-							});
-							if($.inArray("languages", s.plugins) !== -1 && $.isArray(s.languages) && s.languages.length) {
-								$.each(s.languages, function (k, z) {
-									if(t.hasClass(z)) { tmp2.language = z; return true; }
-								});
-							}
-							if(t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').replace(/^\s+$/ig,"").length) {
-								tmp2.icon = t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");
-							}
-							if(t.children("ins").get(0).style.backgroundImage.length) {
-								tmp2.icon = t.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","");
-							}
-						}
-						else {
-							tmp2 = _this.get_text(t);
-						}
-						if(a.length > 1) { tmp1.data.push(tmp2); }
-						else { tmp1.data = tmp2; }
-					});
-					li = li.find("> ul > li");
-					if(li.length) { tmp1.children = _this.get_json(li, li_attr, a_attr, true); }
-					result.push(tmp1);
-				});
-				return result;
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree languages plugin
- * Adds support for multiple language versions in one tree
- * This basically allows for many titles coexisting in one node, but only one of them being visible at any given time
- * This is useful for maintaining the same structure in many languages (hence the name of the plugin)
- */
-(function ($) {
-	$.jstree.plugin("languages", {
-		__init : function () { this._load_css();  },
-		defaults : [],
-		_fn : {
-			set_lang : function (i) { 
-				var langs = this._get_settings().languages,
-					st = false,
-					selector = ".jstree-" + this.get_index() + ' a';
-				if(!$.isArray(langs) || langs.length === 0) { return false; }
-				if($.inArray(i,langs) == -1) {
-					if(!!langs[i]) { i = langs[i]; }
-					else { return false; }
-				}
-				if(i == this.data.languages.current_language) { return true; }
-				st = $.vakata.css.get_css(selector + "." + this.data.languages.current_language, false, this.data.languages.language_css);
-				if(st !== false) { st.style.display = "none"; }
-				st = $.vakata.css.get_css(selector + "." + i, false, this.data.languages.language_css);
-				if(st !== false) { st.style.display = ""; }
-				this.data.languages.current_language = i;
-				this.__callback(i);
-				return true;
-			},
-			get_lang : function () {
-				return this.data.languages.current_language;
-			},
-			_get_string : function (key, lang) {
-				var langs = this._get_settings().languages,
-					s = this._get_settings().core.strings;
-				if($.isArray(langs) && langs.length) {
-					lang = (lang && $.inArray(lang,langs) != -1) ? lang : this.data.languages.current_language;
-				}
-				if(s[lang] && s[lang][key]) { return s[lang][key]; }
-				if(s[key]) { return s[key]; }
-				return key;
-			},
-			get_text : function (obj, lang) {
-				obj = this._get_node(obj) || this.data.ui.last_selected;
-				if(!obj.size()) { return false; }
-				var langs = this._get_settings().languages,
-					s = this._get_settings().core.html_titles;
-				if($.isArray(langs) && langs.length) {
-					lang = (lang && $.inArray(lang,langs) != -1) ? lang : this.data.languages.current_language;
-					obj = obj.children("a." + lang);
-				}
-				else { obj = obj.children("a:eq(0)"); }
-				if(s) {
-					obj = obj.clone();
-					obj.children("INS").remove();
-					return obj.html();
-				}
-				else {
-					obj = obj.contents().filter(function() { return this.nodeType == 3; })[0];
-					return obj.nodeValue;
-				}
-			},
-			set_text : function (obj, val, lang) {
-				obj = this._get_node(obj) || this.data.ui.last_selected;
-				if(!obj.size()) { return false; }
-				var langs = this._get_settings().languages,
-					s = this._get_settings().core.html_titles,
-					tmp;
-				if($.isArray(langs) && langs.length) {
-					lang = (lang && $.inArray(lang,langs) != -1) ? lang : this.data.languages.current_language;
-					obj = obj.children("a." + lang);
-				}
-				else { obj = obj.children("a:eq(0)"); }
-				if(s) {
-					tmp = obj.children("INS").clone();
-					obj.html(val).prepend(tmp);
-					this.__callback({ "obj" : obj, "name" : val, "lang" : lang });
-					return true;
-				}
-				else {
-					obj = obj.contents().filter(function() { return this.nodeType == 3; })[0];
-					this.__callback({ "obj" : obj, "name" : val, "lang" : lang });
-					return (obj.nodeValue = val);
-				}
-			},
-			_load_css : function () {
-				var langs = this._get_settings().languages,
-					str = "/* languages css */",
-					selector = ".jstree-" + this.get_index() + ' a',
-					ln;
-				if($.isArray(langs) && langs.length) {
-					this.data.languages.current_language = langs[0];
-					for(ln = 0; ln < langs.length; ln++) {
-						str += selector + "." + langs[ln] + " {";
-						if(langs[ln] != this.data.languages.current_language) { str += " display:none; "; }
-						str += " } ";
-					}
-					this.data.languages.language_css = $.vakata.css.add_sheet({ 'str' : str, 'title' : "jstree-languages" });
-				}
-			},
-			create_node : function (obj, position, js, callback) {
-				var t = this.__call_old(true, obj, position, js, function (t) {
-					var langs = this._get_settings().languages,
-						a = t.children("a"),
-						ln;
-					if($.isArray(langs) && langs.length) {
-						for(ln = 0; ln < langs.length; ln++) {
-							if(!a.is("." + langs[ln])) {
-								t.append(a.eq(0).clone().removeClass(langs.join(" ")).addClass(langs[ln]));
-							}
-						}
-						a.not("." + langs.join(", .")).remove();
-					}
-					if(callback) { callback.call(this, t); }
-				});
-				return t;
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/*
- * jsTree cookies plugin
- * Stores the currently opened/selected nodes in a cookie and then restores them
- * Depends on the jquery.cookie plugin
- */
-(function ($) {
-	$.jstree.plugin("cookies", {
-		__init : function () {
-			if(typeof $.cookie === "undefined") { throw "jsTree cookie: jQuery cookie plugin not included."; }
-
-			var s = this._get_settings().cookies,
-				tmp;
-			if(!!s.save_loaded) {
-				tmp = $.cookie(s.save_loaded);
-				if(tmp && tmp.length) { this.data.core.to_load = tmp.split(","); }
-			}
-			if(!!s.save_opened) {
-				tmp = $.cookie(s.save_opened);
-				if(tmp && tmp.length) { this.data.core.to_open = tmp.split(","); }
-			}
-			if(!!s.save_selected) {
-				tmp = $.cookie(s.save_selected);
-				if(tmp && tmp.length && this.data.ui) { this.data.ui.to_select = tmp.split(","); }
-			}
-			this.get_container()
-				.one( ( this.data.ui ? "reselect" : "reopen" ) + ".jstree", $.proxy(function () {
-					this.get_container()
-						.bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree", $.proxy(function (e) { 
-								if(this._get_settings().cookies.auto_save) { this.save_cookie((e.handleObj.namespace + e.handleObj.type).replace("jstree","")); }
-							}, this));
-				}, this));
-		},
-		defaults : {
-			save_loaded		: "jstree_load",
-			save_opened		: "jstree_open",
-			save_selected	: "jstree_select",
-			auto_save		: true,
-			cookie_options	: {}
-		},
-		_fn : {
-			save_cookie : function (c) {
-				if(this.data.core.refreshing) { return; }
-				var s = this._get_settings().cookies;
-				if(!c) { // if called manually and not by event
-					if(s.save_loaded) {
-						this.save_loaded();
-						$.cookie(s.save_loaded, this.data.core.to_load.join(","), s.cookie_options);
-					}
-					if(s.save_opened) {
-						this.save_opened();
-						$.cookie(s.save_opened, this.data.core.to_open.join(","), s.cookie_options);
-					}
-					if(s.save_selected && this.data.ui) {
-						this.save_selected();
-						$.cookie(s.save_selected, this.data.ui.to_select.join(","), s.cookie_options);
-					}
-					return;
-				}
-				switch(c) {
-					case "open_node":
-					case "close_node":
-						if(!!s.save_opened) { 
-							this.save_opened(); 
-							$.cookie(s.save_opened, this.data.core.to_open.join(","), s.cookie_options); 
-						}
-						if(!!s.save_loaded) { 
-							this.save_loaded(); 
-							$.cookie(s.save_loaded, this.data.core.to_load.join(","), s.cookie_options); 
-						}
-						break;
-					case "select_node":
-					case "deselect_node":
-						if(!!s.save_selected && this.data.ui) { 
-							this.save_selected(); 
-							$.cookie(s.save_selected, this.data.ui.to_select.join(","), s.cookie_options); 
-						}
-						break;
-				}
-			}
-		}
-	});
-	// include cookies by default
-	// $.jstree.defaults.plugins.push("cookies");
-})(jQuery);
-//*/
-
-/*
- * jsTree sort plugin
- * Sorts items alphabetically (or using any other function)
- */
-(function ($) {
-	$.jstree.plugin("sort", {
-		__init : function () {
-			this.get_container()
-				.bind("load_node.jstree", $.proxy(function (e, data) {
-						var obj = this._get_node(data.rslt.obj);
-						obj = obj === -1 ? this.get_container().children("ul") : obj.children("ul");
-						this.sort(obj);
-					}, this))
-				.bind("rename_node.jstree create_node.jstree create.jstree", $.proxy(function (e, data) {
-						this.sort(data.rslt.obj.parent());
-					}, this))
-				.bind("move_node.jstree", $.proxy(function (e, data) {
-						var m = data.rslt.np == -1 ? this.get_container() : data.rslt.np;
-						this.sort(m.children("ul"));
-					}, this));
-		},
-		defaults : function (a, b) { return this.get_text(a) > this.get_text(b) ? 1 : -1; },
-		_fn : {
-			sort : function (obj) {
-				var s = this._get_settings().sort,
-					t = this;
-				obj.append($.makeArray(obj.children("li")).sort($.proxy(s, t)));
-				obj.find("> li > ul").each(function() { t.sort($(this)); });
-				this.clean_node(obj);
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/*
- * jsTree DND plugin
- * Drag and drop plugin for moving/copying nodes
- */
-(function ($) {
-	var o = false,
-		r = false,
-		m = false,
-		ml = false,
-		sli = false,
-		sti = false,
-		dir1 = false,
-		dir2 = false,
-		last_pos = false;
-	$.vakata.dnd = {
-		is_down : false,
-		is_drag : false,
-		helper : false,
-		scroll_spd : 10,
-		init_x : 0,
-		init_y : 0,
-		threshold : 5,
-		helper_left : 5,
-		helper_top : 10,
-		user_data : {},
-
-		drag_start : function (e, data, html) { 
-			if($.vakata.dnd.is_drag) { $.vakata.drag_stop({}); }
-			try {
-				e.currentTarget.unselectable = "on";
-				e.currentTarget.onselectstart = function() { return false; };
-				if(e.currentTarget.style) { e.currentTarget.style.MozUserSelect = "none"; }
-			} catch(err) { }
-			$.vakata.dnd.init_x = e.pageX;
-			$.vakata.dnd.init_y = e.pageY;
-			$.vakata.dnd.user_data = data;
-			$.vakata.dnd.is_down = true;
-			$.vakata.dnd.helper = $("<div id='vakata-dragged' />").html(html); //.fadeTo(10,0.25);
-			$(document).bind("mousemove", $.vakata.dnd.drag);
-			$(document).bind("mouseup", $.vakata.dnd.drag_stop);
-			return false;
-		},
-		drag : function (e) { 
-			if(!$.vakata.dnd.is_down) { return; }
-			if(!$.vakata.dnd.is_drag) {
-				if(Math.abs(e.pageX - $.vakata.dnd.init_x) > 5 || Math.abs(e.pageY - $.vakata.dnd.init_y) > 5) { 
-					$.vakata.dnd.helper.appendTo("body");
-					$.vakata.dnd.is_drag = true;
-					$(document).triggerHandler("drag_start.vakata", { "event" : e, "data" : $.vakata.dnd.user_data });
-				}
-				else { return; }
-			}
-
-			// maybe use a scrolling parent element instead of document?
-			if(e.type === "mousemove") { // thought of adding scroll in order to move the helper, but mouse poisition is n/a
-				var d = $(document), t = d.scrollTop(), l = d.scrollLeft();
-				if(e.pageY - t < 20) { 
-					if(sti && dir1 === "down") { clearInterval(sti); sti = false; }
-					if(!sti) { dir1 = "up"; sti = setInterval(function () { $(document).scrollTop($(document).scrollTop() - $.vakata.dnd.scroll_spd); }, 150); }
-				}
-				else { 
-					if(sti && dir1 === "up") { clearInterval(sti); sti = false; }
-				}
-				if($(window).height() - (e.pageY - t) < 20) {
-					if(sti && dir1 === "up") { clearInterval(sti); sti = false; }
-					if(!sti) { dir1 = "down"; sti = setInterval(function () { $(document).scrollTop($(document).scrollTop() + $.vakata.dnd.scroll_spd); }, 150); }
-				}
-				else { 
-					if(sti && dir1 === "down") { clearInterval(sti); sti = false; }
-				}
-
-				if(e.pageX - l < 20) {
-					if(sli && dir2 === "right") { clearInterval(sli); sli = false; }
-					if(!sli) { dir2 = "left"; sli = setInterval(function () { $(document).scrollLeft($(document).scrollLeft() - $.vakata.dnd.scroll_spd); }, 150); }
-				}
-				else { 
-					if(sli && dir2 === "left") { clearInterval(sli); sli = false; }
-				}
-				if($(window).width() - (e.pageX - l) < 20) {
-					if(sli && dir2 === "left") { clearInterval(sli); sli = false; }
-					if(!sli) { dir2 = "right"; sli = setInterval(function () { $(document).scrollLeft($(document).scrollLeft() + $.vakata.dnd.scroll_spd); }, 150); }
-				}
-				else { 
-					if(sli && dir2 === "right") { clearInterval(sli); sli = false; }
-				}
-			}
-
-			$.vakata.dnd.helper.css({ left : (e.pageX + $.vakata.dnd.helper_left) + "px", top : (e.pageY + $.vakata.dnd.helper_top) + "px" });
-			$(document).triggerHandler("drag.vakata", { "event" : e, "data" : $.vakata.dnd.user_data });
-		},
-		drag_stop : function (e) {
-			if(sli) { clearInterval(sli); }
-			if(sti) { clearInterval(sti); }
-			$(document).unbind("mousemove", $.vakata.dnd.drag);
-			$(document).unbind("mouseup", $.vakata.dnd.drag_stop);
-			$(document).triggerHandler("drag_stop.vakata", { "event" : e, "data" : $.vakata.dnd.user_data });
-			$.vakata.dnd.helper.remove();
-			$.vakata.dnd.init_x = 0;
-			$.vakata.dnd.init_y = 0;
-			$.vakata.dnd.user_data = {};
-			$.vakata.dnd.is_down = false;
-			$.vakata.dnd.is_drag = false;
-		}
-	};
-	$(function() {
-		var css_string = '#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ';
-		$.vakata.css.add_sheet({ str : css_string, title : "vakata" });
-	});
-
-	$.jstree.plugin("dnd", {
-		__init : function () {
-			this.data.dnd = {
-				active : false,
-				after : false,
-				inside : false,
-				before : false,
-				off : false,
-				prepared : false,
-				w : 0,
-				to1 : false,
-				to2 : false,
-				cof : false,
-				cw : false,
-				ch : false,
-				i1 : false,
-				i2 : false,
-				mto : false
-			};
-			this.get_container()
-				.bind("mouseenter.jstree", $.proxy(function (e) {
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							if(this.data.themes) {
-								m.attr("class", "jstree-" + this.data.themes.theme); 
-								if(ml) { ml.attr("class", "jstree-" + this.data.themes.theme); }
-								$.vakata.dnd.helper.attr("class", "jstree-dnd-helper jstree-" + this.data.themes.theme);
-							}
-							//if($(e.currentTarget).find("> ul > li").length === 0) {
-							if(e.currentTarget === e.target && $.vakata.dnd.user_data.obj && $($.vakata.dnd.user_data.obj).length && $($.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0] !== e.target) { // node should not be from the same tree
-								var tr = $.jstree._reference(e.target), dc;
-								if(tr.data.dnd.foreign) {
-									dc = tr._get_settings().dnd.drag_check.call(this, { "o" : o, "r" : tr.get_container(), is_root : true });
-									if(dc === true || dc.inside === true || dc.before === true || dc.after === true) {
-										$.vakata.dnd.helper.children("ins").attr("class","jstree-ok");
-									}
-								}
-								else {
-									tr.prepare_move(o, tr.get_container(), "last");
-									if(tr.check_move()) {
-										$.vakata.dnd.helper.children("ins").attr("class","jstree-ok");
-									}
-								}
-							}
-						}
-					}, this))
-				.bind("mouseup.jstree", $.proxy(function (e) {
-						//if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree && $(e.currentTarget).find("> ul > li").length === 0) {
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree && e.currentTarget === e.target && $.vakata.dnd.user_data.obj && $($.vakata.dnd.user_data.obj).length && $($.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0] !== e.target) { // node should not be from the same tree
-							var tr = $.jstree._reference(e.currentTarget), dc;
-							if(tr.data.dnd.foreign) {
-								dc = tr._get_settings().dnd.drag_check.call(this, { "o" : o, "r" : tr.get_container(), is_root : true });
-								if(dc === true || dc.inside === true || dc.before === true || dc.after === true) {
-									tr._get_settings().dnd.drag_finish.call(this, { "o" : o, "r" : tr.get_container(), is_root : true });
-								}
-							}
-							else {
-								tr.move_node(o, tr.get_container(), "last", e[tr._get_settings().dnd.copy_modifier + "Key"]);
-							}
-						}
-					}, this))
-				.bind("mouseleave.jstree", $.proxy(function (e) {
-						if(e.relatedTarget && e.relatedTarget.id && e.relatedTarget.id === "jstree-marker-line") {
-							return false; 
-						}
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
-							if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
-							if(this.data.dnd.to1) { clearTimeout(this.data.dnd.to1); }
-							if(this.data.dnd.to2) { clearTimeout(this.data.dnd.to2); }
-							if($.vakata.dnd.helper.children("ins").hasClass("jstree-ok")) {
-								$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");
-							}
-						}
-					}, this))
-				.bind("mousemove.jstree", $.proxy(function (e) {
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							var cnt = this.get_container()[0];
-
-							// Horizontal scroll
-							if(e.pageX + 24 > this.data.dnd.cof.left + this.data.dnd.cw) {
-								if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
-								this.data.dnd.i1 = setInterval($.proxy(function () { this.scrollLeft += $.vakata.dnd.scroll_spd; }, cnt), 100);
-							}
-							else if(e.pageX - 24 < this.data.dnd.cof.left) {
-								if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
-								this.data.dnd.i1 = setInterval($.proxy(function () { this.scrollLeft -= $.vakata.dnd.scroll_spd; }, cnt), 100);
-							}
-							else {
-								if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
-							}
-
-							// Vertical scroll
-							if(e.pageY + 24 > this.data.dnd.cof.top + this.data.dnd.ch) {
-								if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
-								this.data.dnd.i2 = setInterval($.proxy(function () { this.scrollTop += $.vakata.dnd.scroll_spd; }, cnt), 100);
-							}
-							else if(e.pageY - 24 < this.data.dnd.cof.top) {
-								if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
-								this.data.dnd.i2 = setInterval($.proxy(function () { this.scrollTop -= $.vakata.dnd.scroll_spd; }, cnt), 100);
-							}
-							else {
-								if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
-							}
-
-						}
-					}, this))
-				.bind("scroll.jstree", $.proxy(function (e) { 
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree && m && ml) {
-							m.hide();
-							ml.hide();
-						}
-					}, this))
-				.delegate("a", "mousedown.jstree", $.proxy(function (e) { 
-						if(e.which === 1) {
-							this.start_drag(e.currentTarget, e);
-							return false;
-						}
-					}, this))
-				.delegate("a", "mouseenter.jstree", $.proxy(function (e) { 
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							this.dnd_enter(e.currentTarget);
-						}
-					}, this))
-				.delegate("a", "mousemove.jstree", $.proxy(function (e) { 
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							if(!r || !r.length || r.children("a")[0] !== e.currentTarget) {
-								this.dnd_enter(e.currentTarget);
-							}
-							if(typeof this.data.dnd.off.top === "undefined") { this.data.dnd.off = $(e.target).offset(); }
-							this.data.dnd.w = (e.pageY - (this.data.dnd.off.top || 0)) % this.data.core.li_height;
-							if(this.data.dnd.w < 0) { this.data.dnd.w += this.data.core.li_height; }
-							this.dnd_show();
-						}
-					}, this))
-				.delegate("a", "mouseleave.jstree", $.proxy(function (e) { 
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							if(e.relatedTarget && e.relatedTarget.id && e.relatedTarget.id === "jstree-marker-line") {
-								return false; 
-							}
-								if(m) { m.hide(); }
-								if(ml) { ml.hide(); }
-							/*
-							var ec = $(e.currentTarget).closest("li"), 
-								er = $(e.relatedTarget).closest("li");
-							if(er[0] !== ec.prev()[0] && er[0] !== ec.next()[0]) {
-								if(m) { m.hide(); }
-								if(ml) { ml.hide(); }
-							}
-							*/
-							this.data.dnd.mto = setTimeout( 
-								(function (t) { return function () { t.dnd_leave(e); }; })(this),
-							0);
-						}
-					}, this))
-				.delegate("a", "mouseup.jstree", $.proxy(function (e) { 
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree) {
-							this.dnd_finish(e);
-						}
-					}, this));
-
-			$(document)
-				.bind("drag_stop.vakata", $.proxy(function () {
-						if(this.data.dnd.to1) { clearTimeout(this.data.dnd.to1); }
-						if(this.data.dnd.to2) { clearTimeout(this.data.dnd.to2); }
-						if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
-						if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
-						this.data.dnd.after		= false;
-						this.data.dnd.before	= false;
-						this.data.dnd.inside	= false;
-						this.data.dnd.off		= false;
-						this.data.dnd.prepared	= false;
-						this.data.dnd.w			= false;
-						this.data.dnd.to1		= false;
-						this.data.dnd.to2		= false;
-						this.data.dnd.i1		= false;
-						this.data.dnd.i2		= false;
-						this.data.dnd.active	= false;
-						this.data.dnd.foreign	= false;
-						if(m) { m.css({ "top" : "-2000px" }); }
-						if(ml) { ml.css({ "top" : "-2000px" }); }
-					}, this))
-				.bind("drag_start.vakata", $.proxy(function (e, data) {
-						if(data.data.jstree) { 
-							var et = $(data.event.target);
-							if(et.closest(".jstree").hasClass("jstree-" + this.get_index())) {
-								this.dnd_enter(et);
-							}
-						}
-					}, this));
-				/*
-				.bind("keydown.jstree-" + this.get_index() + " keyup.jstree-" + this.get_index(), $.proxy(function(e) {
-						if($.vakata.dnd.is_drag && $.vakata.dnd.user_data.jstree && !this.data.dnd.foreign) {
-							var h = $.vakata.dnd.helper.children("ins");
-							if(e[this._get_settings().dnd.copy_modifier + "Key"] && h.hasClass("jstree-ok")) {
-								h.parent().html(h.parent().html().replace(/ \(Copy\)$/, "") + " (Copy)");
-							} 
-							else {
-								h.parent().html(h.parent().html().replace(/ \(Copy\)$/, ""));
-							}
-						}
-					}, this)); */
-
-
-
-			var s = this._get_settings().dnd;
-			if(s.drag_target) {
-				$(document)
-					.delegate(s.drag_target, "mousedown.jstree-" + this.get_index(), $.proxy(function (e) {
-						o = e.target;
-						$.vakata.dnd.drag_start(e, { jstree : true, obj : e.target }, "<ins class='jstree-icon'></ins>" + $(e.target).text() );
-						if(this.data.themes) { 
-							if(m) { m.attr("class", "jstree-" + this.data.themes.theme); }
-							if(ml) { ml.attr("class", "jstree-" + this.data.themes.theme); }
-							$.vakata.dnd.helper.attr("class", "jstree-dnd-helper jstree-" + this.data.themes.theme); 
-						}
-						$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");
-						var cnt = this.get_container();
-						this.data.dnd.cof = cnt.offset();
-						this.data.dnd.cw = parseInt(cnt.width(),10);
-						this.data.dnd.ch = parseInt(cnt.height(),10);
-						this.data.dnd.foreign = true;
-						e.preventDefault();
-					}, this));
-			}
-			if(s.drop_target) {
-				$(document)
-					.delegate(s.drop_target, "mouseenter.jstree-" + this.get_index(), $.proxy(function (e) {
-							if(this.data.dnd.active && this._get_settings().dnd.drop_check.call(this, { "o" : o, "r" : $(e.target), "e" : e })) {
-								$.vakata.dnd.helper.children("ins").attr("class","jstree-ok");
-							}
-						}, this))
-					.delegate(s.drop_target, "mouseleave.jstree-" + this.get_index(), $.proxy(function (e) {
-							if(this.data.dnd.active) {
-								$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");
-							}
-						}, this))
-					.delegate(s.drop_target, "mouseup.jstree-" + this.get_index(), $.proxy(function (e) {
-							if(this.data.dnd.active && $.vakata.dnd.helper.children("ins").hasClass("jstree-ok")) {
-								this._get_settings().dnd.drop_finish.call(this, { "o" : o, "r" : $(e.target), "e" : e });
-							}
-						}, this));
-			}
-		},
-		defaults : {
-			copy_modifier	: "ctrl",
-			check_timeout	: 100,
-			open_timeout	: 500,
-			drop_target		: ".jstree-drop",
-			drop_check		: function (data) { return true; },
-			drop_finish		: $.noop,
-			drag_target		: ".jstree-draggable",
-			drag_finish		: $.noop,
-			drag_check		: function (data) { return { after : false, before : false, inside : true }; }
-		},
-		_fn : {
-			dnd_prepare : function () {
-				if(!r || !r.length) { return; }
-				this.data.dnd.off = r.offset();
-				if(this._get_settings().core.rtl) {
-					this.data.dnd.off.right = this.data.dnd.off.left + r.width();
-				}
-				if(this.data.dnd.foreign) {
-					var a = this._get_settings().dnd.drag_check.call(this, { "o" : o, "r" : r });
-					this.data.dnd.after = a.after;
-					this.data.dnd.before = a.before;
-					this.data.dnd.inside = a.inside;
-					this.data.dnd.prepared = true;
-					return this.dnd_show();
-				}
-				this.prepare_move(o, r, "before");
-				this.data.dnd.before = this.check_move();
-				this.prepare_move(o, r, "after");
-				this.data.dnd.after = this.check_move();
-				if(this._is_loaded(r)) {
-					this.prepare_move(o, r, "inside");
-					this.data.dnd.inside = this.check_move();
-				}
-				else {
-					this.data.dnd.inside = false;
-				}
-				this.data.dnd.prepared = true;
-				return this.dnd_show();
-			},
-			dnd_show : function () {
-				if(!this.data.dnd.prepared) { return; }
-				var o = ["before","inside","after"],
-					r = false,
-					rtl = this._get_settings().core.rtl,
-					pos;
-				if(this.data.dnd.w < this.data.core.li_height/3) { o = ["before","inside","after"]; }
-				else if(this.data.dnd.w <= this.data.core.li_height*2/3) {
-					o = this.data.dnd.w < this.data.core.li_height/2 ? ["inside","before","after"] : ["inside","after","before"];
-				}
-				else { o = ["after","inside","before"]; }
-				$.each(o, $.proxy(function (i, val) { 
-					if(this.data.dnd[val]) {
-						$.vakata.dnd.helper.children("ins").attr("class","jstree-ok");
-						r = val;
-						return false;
-					}
-				}, this));
-				if(r === false) { $.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"); }
-				
-				pos = rtl ? (this.data.dnd.off.right - 18) : (this.data.dnd.off.left + 10);
-				switch(r) {
-					case "before":
-						m.css({ "left" : pos + "px", "top" : (this.data.dnd.off.top - 6) + "px" }).show();
-						if(ml) { ml.css({ "left" : (pos + 8) + "px", "top" : (this.data.dnd.off.top - 1) + "px" }).show(); }
-						break;
-					case "after":
-						m.css({ "left" : pos + "px", "top" : (this.data.dnd.off.top + this.data.core.li_height - 6) + "px" }).show();
-						if(ml) { ml.css({ "left" : (pos + 8) + "px", "top" : (this.data.dnd.off.top + this.data.core.li_height - 1) + "px" }).show(); }
-						break;
-					case "inside":
-						m.css({ "left" : pos + ( rtl ? -4 : 4) + "px", "top" : (this.data.dnd.off.top + this.data.core.li_height/2 - 5) + "px" }).show();
-						if(ml) { ml.hide(); }
-						break;
-					default:
-						m.hide();
-						if(ml) { ml.hide(); }
-						break;
-				}
-				last_pos = r;
-				return r;
-			},
-			dnd_open : function () {
-				this.data.dnd.to2 = false;
-				this.open_node(r, $.proxy(this.dnd_prepare,this), true);
-			},
-			dnd_finish : function (e) {
-				if(this.data.dnd.foreign) {
-					if(this.data.dnd.after || this.data.dnd.before || this.data.dnd.inside) {
-						this._get_settings().dnd.drag_finish.call(this, { "o" : o, "r" : r, "p" : last_pos });
-					}
-				}
-				else {
-					this.dnd_prepare();
-					this.move_node(o, r, last_pos, e[this._get_settings().dnd.copy_modifier + "Key"]);
-				}
-				o = false;
-				r = false;
-				m.hide();
-				if(ml) { ml.hide(); }
-			},
-			dnd_enter : function (obj) {
-				if(this.data.dnd.mto) { 
-					clearTimeout(this.data.dnd.mto);
-					this.data.dnd.mto = false;
-				}
-				var s = this._get_settings().dnd;
-				this.data.dnd.prepared = false;
-				r = this._get_node(obj);
-				if(s.check_timeout) { 
-					// do the calculations after a minimal timeout (users tend to drag quickly to the desired location)
-					if(this.data.dnd.to1) { clearTimeout(this.data.dnd.to1); }
-					this.data.dnd.to1 = setTimeout($.proxy(this.dnd_prepare, this), s.check_timeout); 
-				}
-				else { 
-					this.dnd_prepare(); 
-				}
-				if(s.open_timeout) { 
-					if(this.data.dnd.to2) { clearTimeout(this.data.dnd.to2); }
-					if(r && r.length && r.hasClass("jstree-closed")) { 
-						// if the node is closed - open it, then recalculate
-						this.data.dnd.to2 = setTimeout($.proxy(this.dnd_open, this), s.open_timeout);
-					}
-				}
-				else {
-					if(r && r.length && r.hasClass("jstree-closed")) { 
-						this.dnd_open();
-					}
-				}
-			},
-			dnd_leave : function (e) {
-				this.data.dnd.after		= false;
-				this.data.dnd.before	= false;
-				this.data.dnd.inside	= false;
-				$.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");
-				m.hide();
-				if(ml) { ml.hide(); }
-				if(r && r[0] === e.target.parentNode) {
-					if(this.data.dnd.to1) {
-						clearTimeout(this.data.dnd.to1);
-						this.data.dnd.to1 = false;
-					}
-					if(this.data.dnd.to2) {
-						clearTimeout(this.data.dnd.to2);
-						this.data.dnd.to2 = false;
-					}
-				}
-			},
-			start_drag : function (obj, e) {
-				o = this._get_node(obj);
-				if(this.data.ui && this.is_selected(o)) { o = this._get_node(null, true); }
-				var dt = o.length > 1 ? this._get_string("multiple_selection") : this.get_text(o),
-					cnt = this.get_container();
-				if(!this._get_settings().core.html_titles) { dt = dt.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"); }
-				$.vakata.dnd.drag_start(e, { jstree : true, obj : o }, "<ins class='jstree-icon'></ins>" + dt );
-				if(this.data.themes) { 
-					if(m) { m.attr("class", "jstree-" + this.data.themes.theme); }
-					if(ml) { ml.attr("class", "jstree-" + this.data.themes.theme); }
-					$.vakata.dnd.helper.attr("class", "jstree-dnd-helper jstree-" + this.data.themes.theme); 
-				}
-				this.data.dnd.cof = cnt.offset();
-				this.data.dnd.cw = parseInt(cnt.width(),10);
-				this.data.dnd.ch = parseInt(cnt.height(),10);
-				this.data.dnd.active = true;
-			}
-		}
-	});
-	$(function() {
-		var css_string = '' + 
-			'#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px; ' + 
-			' -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; ' +
-			'} ' + 
-			'#vakata-dragged .jstree-ok { background:green; } ' + 
-			'#vakata-dragged .jstree-invalid { background:red; } ' + 
-			'#jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } ' + 
-			'#jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43; ' + 
-			' cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666; ' + 
-			' -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; ' +
-			'}' + 
-			'';
-		$.vakata.css.add_sheet({ str : css_string, title : "jstree" });
-		m = $("<div />").attr({ id : "jstree-marker" }).hide().html("&raquo;")
-			.bind("mouseleave mouseenter", function (e) { 
-				m.hide();
-				ml.hide();
-				e.preventDefault(); 
-				e.stopImmediatePropagation(); 
-				return false; 
-			})
-			.appendTo("body");
-		ml = $("<div />").attr({ id : "jstree-marker-line" }).hide()
-			.bind("mouseup", function (e) { 
-				if(r && r.length) { 
-					r.children("a").trigger(e); 
-					e.preventDefault(); 
-					e.stopImmediatePropagation(); 
-					return false; 
-				} 
-			})
-			.bind("mouseleave", function (e) { 
-				var rt = $(e.relatedTarget);
-				if(rt.is(".jstree") || rt.closest(".jstree").length === 0) {
-					if(r && r.length) { 
-						r.children("a").trigger(e); 
-						m.hide();
-						ml.hide();
-						e.preventDefault(); 
-						e.stopImmediatePropagation(); 
-						return false; 
-					}
-				}
-			})
-			.appendTo("body");
-		$(document).bind("drag_start.vakata", function (e, data) {
-			if(data.data.jstree) { m.show(); if(ml) { ml.show(); } }
-		});
-		$(document).bind("drag_stop.vakata", function (e, data) {
-			if(data.data.jstree) { m.hide(); if(ml) { ml.hide(); } }
-		});
-	});
-})(jQuery);
-//*/
-
-/*
- * jsTree checkbox plugin
- * Inserts checkboxes in front of every node
- * Depends on the ui plugin
- * DOES NOT WORK NICELY WITH MULTITREE DRAG'N'DROP
- */
-(function ($) {
-	$.jstree.plugin("checkbox", {
-		__init : function () {
-			this.data.checkbox.noui = this._get_settings().checkbox.override_ui;
-			if(this.data.ui && this.data.checkbox.noui) {
-				this.select_node = this.deselect_node = this.deselect_all = $.noop;
-				this.get_selected = this.get_checked;
-			}
-
-			this.get_container()
-				.bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree", $.proxy(function (e, data) { 
-						this._prepare_checkboxes(data.rslt.obj);
-					}, this))
-				.bind("loaded.jstree", $.proxy(function (e) {
-						this._prepare_checkboxes();
-					}, this))
-				.delegate( (this.data.ui && this.data.checkbox.noui ? "a" : "ins.jstree-checkbox") , "click.jstree", $.proxy(function (e) {
-						e.preventDefault();
-						if(this._get_node(e.target).hasClass("jstree-checked")) { this.uncheck_node(e.target); }
-						else { this.check_node(e.target); }
-						if(this.data.ui && this.data.checkbox.noui) {
-							this.save_selected();
-							if(this.data.cookies) { this.save_cookie("select_node"); }
-						}
-						else {
-							e.stopImmediatePropagation();
-							return false;
-						}
-					}, this));
-		},
-		defaults : {
-			override_ui : false,
-			two_state : false,
-			real_checkboxes : false,
-			checked_parent_open : true,
-			real_checkboxes_names : function (n) { return [ ("check_" + (n[0].id || Math.ceil(Math.random() * 10000))) , 1]; }
-		},
-		__destroy : function () {
-			this.get_container()
-				.find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end()
-				.find("ins.jstree-checkbox").remove();
-		},
-		_fn : {
-			_checkbox_notify : function (n, data) {
-				if(data.checked) {
-					this.check_node(n, false);
-				}
-			},
-			_prepare_checkboxes : function (obj) {
-				obj = !obj || obj == -1 ? this.get_container().find("> ul > li") : this._get_node(obj);
-				if(obj === false) { return; } // added for removing root nodes
-				var c, _this = this, t, ts = this._get_settings().checkbox.two_state, rc = this._get_settings().checkbox.real_checkboxes, rcn = this._get_settings().checkbox.real_checkboxes_names;
-				obj.each(function () {
-					t = $(this);
-					c = t.is("li") && (t.hasClass("jstree-checked") || (rc && t.children(":checked").length)) ? "jstree-checked" : "jstree-unchecked";
-					t.find("li").andSelf().each(function () {
-						var $t = $(this), nm;
-						$t.children("a" + (_this.data.languages ? "" : ":eq(0)") ).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass( ts ? "jstree-unchecked" : c );
-						if(rc) {
-							if(!$t.children(":checkbox").length) {
-								nm = rcn.call(_this, $t);
-								$t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='" + nm[0] + "' name='" + nm[0] + "' value='" + nm[1] + "' />");
-							}
-							else {
-								$t.children(":checkbox").addClass("jstree-real-checkbox");
-							}
-						}
-						if(!ts) {
-							if(c === "jstree-checked" || $t.hasClass("jstree-checked") || $t.children(':checked').length) {
-								$t.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked", true);
-							}
-						}
-						else {
-							if($t.hasClass("jstree-checked") || $t.children(':checked').length) {
-								$t.addClass("jstree-checked").children(":checkbox").prop("checked", true);
-							}
-						}
-					});
-				});
-				if(!ts) {
-					obj.find(".jstree-checked").parent().parent().each(function () { _this._repair_state(this); }); 
-				}
-			},
-			change_state : function (obj, state) {
-				obj = this._get_node(obj);
-				var coll = false, rc = this._get_settings().checkbox.real_checkboxes;
-				if(!obj || obj === -1) { return false; }
-				state = (state === false || state === true) ? state : obj.hasClass("jstree-checked");
-				if(this._get_settings().checkbox.two_state) {
-					if(state) { 
-						obj.removeClass("jstree-checked").addClass("jstree-unchecked"); 
-						if(rc) { obj.children(":checkbox").prop("checked", false); }
-					}
-					else { 
-						obj.removeClass("jstree-unchecked").addClass("jstree-checked"); 
-						if(rc) { obj.children(":checkbox").prop("checked", true); }
-					}
-				}
-				else {
-					if(state) { 
-						coll = obj.find("li").andSelf();
-						if(!coll.filter(".jstree-checked, .jstree-undetermined").length) { return false; }
-						coll.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"); 
-						if(rc) { coll.children(":checkbox").prop("checked", false); }
-					}
-					else { 
-						coll = obj.find("li").andSelf();
-						if(!coll.filter(".jstree-unchecked, .jstree-undetermined").length) { return false; }
-						coll.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"); 
-						if(rc) { coll.children(":checkbox").prop("checked", true); }
-						if(this.data.ui) { this.data.ui.last_selected = obj; }
-						this.data.checkbox.last_selected = obj;
-					}
-					obj.parentsUntil(".jstree", "li").each(function () {
-						var $this = $(this);
-						if(state) {
-							if($this.children("ul").children("li.jstree-checked, li.jstree-undetermined").length) {
-								$this.parentsUntil(".jstree", "li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
-								if(rc) { $this.parentsUntil(".jstree", "li").andSelf().children(":checkbox").prop("checked", false); }
-								return false;
-							}
-							else {
-								$this.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");
-								if(rc) { $this.children(":checkbox").prop("checked", false); }
-							}
-						}
-						else {
-							if($this.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length) {
-								$this.parentsUntil(".jstree", "li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
-								if(rc) { $this.parentsUntil(".jstree", "li").andSelf().children(":checkbox").prop("checked", false); }
-								return false;
-							}
-							else {
-								$this.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
-								if(rc) { $this.children(":checkbox").prop("checked", true); }
-							}
-						}
-					});
-				}
-				if(this.data.ui && this.data.checkbox.noui) { this.data.ui.selected = this.get_checked(); }
-				this.__callback(obj);
-				return true;
-			},
-			check_node : function (obj) {
-				if(this.change_state(obj, false)) { 
-					obj = this._get_node(obj);
-					if(this._get_settings().checkbox.checked_parent_open) {
-						var t = this;
-						obj.parents(".jstree-closed").each(function () { t.open_node(this, false, true); });
-					}
-					this.__callback({ "obj" : obj }); 
-				}
-			},
-			uncheck_node : function (obj) {
-				if(this.change_state(obj, true)) { this.__callback({ "obj" : this._get_node(obj) }); }
-			},
-			check_all : function () {
-				var _this = this, 
-					coll = this._get_settings().checkbox.two_state ? this.get_container_ul().find("li") : this.get_container_ul().children("li");
-				coll.each(function () {
-					_this.change_state(this, false);
-				});
-				this.__callback();
-			},
-			uncheck_all : function () {
-				var _this = this,
-					coll = this._get_settings().checkbox.two_state ? this.get_container_ul().find("li") : this.get_container_ul().children("li");
-				coll.each(function () {
-					_this.change_state(this, true);
-				});
-				this.__callback();
-			},
-
-			is_checked : function(obj) {
-				obj = this._get_node(obj);
-				return obj.length ? obj.is(".jstree-checked") : false;
-			},
-			get_checked : function (obj, get_all) {
-				obj = !obj || obj === -1 ? this.get_container() : this._get_node(obj);
-				return get_all || this._get_settings().checkbox.two_state ? obj.find(".jstree-checked") : obj.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked");
-			},
-			get_unchecked : function (obj, get_all) { 
-				obj = !obj || obj === -1 ? this.get_container() : this._get_node(obj);
-				return get_all || this._get_settings().checkbox.two_state ? obj.find(".jstree-unchecked") : obj.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked");
-			},
-
-			show_checkboxes : function () { this.get_container().children("ul").removeClass("jstree-no-checkboxes"); },
-			hide_checkboxes : function () { this.get_container().children("ul").addClass("jstree-no-checkboxes"); },
-
-			_repair_state : function (obj) {
-				obj = this._get_node(obj);
-				if(!obj.length) { return; }
-				if(this._get_settings().checkbox.two_state) {
-					obj.find('li').andSelf().not('.jstree-checked').removeClass('jstree-undetermined').addClass('jstree-unchecked').children(':checkbox').prop('checked', true);
-					return;
-				}
-				var rc = this._get_settings().checkbox.real_checkboxes,
-					a = obj.find("> ul > .jstree-checked").length,
-					b = obj.find("> ul > .jstree-undetermined").length,
-					c = obj.find("> ul > li").length;
-				if(c === 0) { if(obj.hasClass("jstree-undetermined")) { this.change_state(obj, false); } }
-				else if(a === 0 && b === 0) { this.change_state(obj, true); }
-				else if(a === c) { this.change_state(obj, false); }
-				else { 
-					obj.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
-					if(rc) { obj.parentsUntil(".jstree", "li").andSelf().children(":checkbox").prop("checked", false); }
-				}
-			},
-			reselect : function () {
-				if(this.data.ui && this.data.checkbox.noui) { 
-					var _this = this,
-						s = this.data.ui.to_select;
-					s = $.map($.makeArray(s), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
-					this.deselect_all();
-					$.each(s, function (i, val) { _this.check_node(val); });
-					this.__callback();
-				}
-				else { 
-					this.__call_old(); 
-				}
-			},
-			save_loaded : function () {
-				var _this = this;
-				this.data.core.to_load = [];
-				this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function () {
-					if(this.id) { _this.data.core.to_load.push("#" + this.id); }
-				});
-			}
-		}
-	});
-	$(function() {
-		var css_string = '.jstree .jstree-real-checkbox { display:none; } ';
-		$.vakata.css.add_sheet({ str : css_string, title : "jstree" });
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree XML plugin
- * The XML data store. Datastores are build by overriding the `load_node` and `_is_loaded` functions.
- */
-(function ($) {
-	$.vakata.xslt = function (xml, xsl, callback) {
-		var rs = "", xm, xs, processor, support;
-		// TODO: IE9 no XSLTProcessor, no document.recalc
-		if(document.recalc) {
-			xm = document.createElement('xml');
-			xs = document.createElement('xml');
-			xm.innerHTML = xml;
-			xs.innerHTML = xsl;
-			$("body").append(xm).append(xs);
-			setTimeout( (function (xm, xs, callback) {
-				return function () {
-					callback.call(null, xm.transformNode(xs.XMLDocument));
-					setTimeout( (function (xm, xs) { return function () { $(xm).remove(); $(xs).remove(); }; })(xm, xs), 200);
-				};
-			})(xm, xs, callback), 100);
-			return true;
-		}
-		if(typeof window.DOMParser !== "undefined" && typeof window.XMLHttpRequest !== "undefined" && typeof window.XSLTProcessor === "undefined") {
-			xml = new DOMParser().parseFromString(xml, "text/xml");
-			xsl = new DOMParser().parseFromString(xsl, "text/xml");
-			// alert(xml.transformNode());
-			// callback.call(null, new XMLSerializer().serializeToString(rs));
-			
-		}
-		if(typeof window.DOMParser !== "undefined" && typeof window.XMLHttpRequest !== "undefined" && typeof window.XSLTProcessor !== "undefined") {
-			processor = new XSLTProcessor();
-			support = $.isFunction(processor.transformDocument) ? (typeof window.XMLSerializer !== "undefined") : true;
-			if(!support) { return false; }
-			xml = new DOMParser().parseFromString(xml, "text/xml");
-			xsl = new DOMParser().parseFromString(xsl, "text/xml");
-			if($.isFunction(processor.transformDocument)) {
-				rs = document.implementation.createDocument("", "", null);
-				processor.transformDocument(xml, xsl, rs, null);
-				callback.call(null, new XMLSerializer().serializeToString(rs));
-				return true;
-			}
-			else {
-				processor.importStylesheet(xsl);
-				rs = processor.transformToFragment(xml, document);
-				callback.call(null, $("<div />").append(rs).html());
-				return true;
-			}
-		}
-		return false;
-	};
-	var xsl = {
-		'nest' : '<' + '?xml version="1.0" encoding="utf-8" ?>' + 
-			'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >' + 
-			'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" />' + 
-			'<xsl:template match="/">' + 
-			'	<xsl:call-template name="nodes">' + 
-			'		<xsl:with-param name="node" select="/root" />' + 
-			'	</xsl:call-template>' + 
-			'</xsl:template>' + 
-			'<xsl:template name="nodes">' + 
-			'	<xsl:param name="node" />' + 
-			'	<ul>' + 
-			'	<xsl:for-each select="$node/item">' + 
-			'		<xsl:variable name="children" select="count(./item) &gt; 0" />' + 
-			'		<li>' + 
-			'			<xsl:attribute name="class">' + 
-			'				<xsl:if test="position() = last()">jstree-last </xsl:if>' + 
-			'				<xsl:choose>' + 
-			'					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>' + 
-			'					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>' + 
-			'					<xsl:otherwise>jstree-leaf </xsl:otherwise>' + 
-			'				</xsl:choose>' + 
-			'				<xsl:value-of select="@class" />' + 
-			'			</xsl:attribute>' + 
-			'			<xsl:for-each select="@*">' + 
-			'				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">' + 
-			'					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>' + 
-			'				</xsl:if>' + 
-			'			</xsl:for-each>' + 
-			'	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>' + 
-			'			<xsl:for-each select="content/name">' + 
-			'				<a>' + 
-			'				<xsl:attribute name="href">' + 
-			'					<xsl:choose>' + 
-			'					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>' + 
-			'					<xsl:otherwise>#</xsl:otherwise>' + 
-			'					</xsl:choose>' + 
-			'				</xsl:attribute>' + 
-			'				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>' + 
-			'				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>' + 
-			'				<xsl:for-each select="@*">' + 
-			'					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">' + 
-			'						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>' + 
-			'					</xsl:if>' + 
-			'				</xsl:for-each>' + 
-			'					<ins>' + 
-			'						<xsl:attribute name="class">jstree-icon ' + 
-			'							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>' + 
-			'						</xsl:attribute>' + 
-			'						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>' + 
-			'						<xsl:text>&#xa0;</xsl:text>' + 
-			'					</ins>' + 
-			'					<xsl:copy-of select="./child::node()" />' + 
-			'				</a>' + 
-			'			</xsl:for-each>' + 
-			'			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>' + 
-			'		</li>' + 
-			'	</xsl:for-each>' + 
-			'	</ul>' + 
-			'</xsl:template>' + 
-			'</xsl:stylesheet>',
-
-		'flat' : '<' + '?xml version="1.0" encoding="utf-8" ?>' + 
-			'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >' + 
-			'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" />' + 
-			'<xsl:template match="/">' + 
-			'	<ul>' + 
-			'	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">' + /* the last `or` may be removed */
-			'		<xsl:call-template name="nodes">' + 
-			'			<xsl:with-param name="node" select="." />' + 
-			'			<xsl:with-param name="is_last" select="number(position() = last())" />' + 
-			'		</xsl:call-template>' + 
-			'	</xsl:for-each>' + 
-			'	</ul>' + 
-			'</xsl:template>' + 
-			'<xsl:template name="nodes">' + 
-			'	<xsl:param name="node" />' + 
-			'	<xsl:param name="is_last" />' + 
-			'	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />' + 
-			'	<li>' + 
-			'	<xsl:attribute name="class">' + 
-			'		<xsl:if test="$is_last = true()">jstree-last </xsl:if>' + 
-			'		<xsl:choose>' + 
-			'			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>' + 
-			'			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>' + 
-			'			<xsl:otherwise>jstree-leaf </xsl:otherwise>' + 
-			'		</xsl:choose>' + 
-			'		<xsl:value-of select="@class" />' + 
-			'	</xsl:attribute>' + 
-			'	<xsl:for-each select="@*">' + 
-			'		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">' + 
-			'		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>' + 
-			'		</xsl:if>' + 
-			'	</xsl:for-each>' + 
-			'	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>' + 
-			'	<xsl:for-each select="content/name">' + 
-			'		<a>' + 
-			'		<xsl:attribute name="href">' + 
-			'			<xsl:choose>' + 
-			'			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>' + 
-			'			<xsl:otherwise>#</xsl:otherwise>' + 
-			'			</xsl:choose>' + 
-			'		</xsl:attribute>' + 
-			'		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>' + 
-			'		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>' + 
-			'		<xsl:for-each select="@*">' + 
-			'			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">' + 
-			'				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>' + 
-			'			</xsl:if>' + 
-			'		</xsl:for-each>' + 
-			'			<ins>' + 
-			'				<xsl:attribute name="class">jstree-icon ' + 
-			'					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>' + 
-			'				</xsl:attribute>' + 
-			'				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>' + 
-			'				<xsl:text>&#xa0;</xsl:text>' + 
-			'			</ins>' + 
-			'			<xsl:copy-of select="./child::node()" />' + 
-			'		</a>' + 
-			'	</xsl:for-each>' + 
-			'	<xsl:if test="$children">' + 
-			'		<ul>' + 
-			'		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">' + 
-			'			<xsl:call-template name="nodes">' + 
-			'				<xsl:with-param name="node" select="." />' + 
-			'				<xsl:with-param name="is_last" select="number(position() = last())" />' + 
-			'			</xsl:call-template>' + 
-			'		</xsl:for-each>' + 
-			'		</ul>' + 
-			'	</xsl:if>' + 
-			'	</li>' + 
-			'</xsl:template>' + 
-			'</xsl:stylesheet>'
-	},
-	escape_xml = function(string) {
-		return string
-			.toString()
-			.replace(/&/g, '&amp;')
-			.replace(/</g, '&lt;')
-			.replace(/>/g, '&gt;')
-			.replace(/"/g, '&quot;')
-			.replace(/'/g, '&apos;');
-	};
-	$.jstree.plugin("xml_data", {
-		defaults : { 
-			data : false,
-			ajax : false,
-			xsl : "flat",
-			clean_node : false,
-			correct_state : true,
-			get_skip_empty : false,
-			get_include_preamble : true
-		},
-		_fn : {
-			load_node : function (obj, s_call, e_call) { var _this = this; this.load_node_xml(obj, function () { _this.__callback({ "obj" : _this._get_node(obj) }); s_call.call(this); }, e_call); },
-			_is_loaded : function (obj) { 
-				var s = this._get_settings().xml_data;
-				obj = this._get_node(obj);
-				return obj == -1 || !obj || (!s.ajax && !$.isFunction(s.data)) || obj.is(".jstree-open, .jstree-leaf") || obj.children("ul").children("li").size() > 0;
-			},
-			load_node_xml : function (obj, s_call, e_call) {
-				var s = this.get_settings().xml_data,
-					error_func = function () {},
-					success_func = function () {};
-
-				obj = this._get_node(obj);
-				if(obj && obj !== -1) {
-					if(obj.data("jstree_is_loading")) { return; }
-					else { obj.data("jstree_is_loading",true); }
-				}
-				switch(!0) {
-					case (!s.data && !s.ajax): throw "Neither data nor ajax settings supplied.";
-					case ($.isFunction(s.data)):
-						s.data.call(this, obj, $.proxy(function (d) {
-							this.parse_xml(d, $.proxy(function (d) {
-								if(d) {
-									d = d.replace(/ ?xmlns="[^"]*"/ig, "");
-									if(d.length > 10) {
-										d = $(d);
-										if(obj === -1 || !obj) { this.get_container().children("ul").empty().append(d.children()); }
-										else { obj.children("a.jstree-loading").removeClass("jstree-loading"); obj.append(d); obj.removeData("jstree_is_loading"); }
-										if(s.clean_node) { this.clean_node(obj); }
-										if(s_call) { s_call.call(this); }
-									}
-									else {
-										if(obj && obj !== -1) { 
-											obj.children("a.jstree-loading").removeClass("jstree-loading");
-											obj.removeData("jstree_is_loading");
-											if(s.correct_state) { 
-												this.correct_state(obj);
-												if(s_call) { s_call.call(this); } 
-											}
-										}
-										else {
-											if(s.correct_state) { 
-												this.get_container().children("ul").empty();
-												if(s_call) { s_call.call(this); } 
-											}
-										}
-									}
-								}
-							}, this));
-						}, this));
-						break;
-					case (!!s.data && !s.ajax) || (!!s.data && !!s.ajax && (!obj || obj === -1)):
-						if(!obj || obj == -1) {
-							this.parse_xml(s.data, $.proxy(function (d) {
-								if(d) {
-									d = d.replace(/ ?xmlns="[^"]*"/ig, "");
-									if(d.length > 10) {
-										d = $(d);
-										this.get_container().children("ul").empty().append(d.children());
-										if(s.clean_node) { this.clean_node(obj); }
-										if(s_call) { s_call.call(this); }
-									}
-								}
-								else { 
-									if(s.correct_state) { 
-										this.get_container().children("ul").empty(); 
-										if(s_call) { s_call.call(this); }
-									}
-								}
-							}, this));
-						}
-						break;
-					case (!s.data && !!s.ajax) || (!!s.data && !!s.ajax && obj && obj !== -1):
-						error_func = function (x, t, e) {
-							var ef = this.get_settings().xml_data.ajax.error; 
-							if(ef) { ef.call(this, x, t, e); }
-							if(obj !== -1 && obj.length) {
-								obj.children("a.jstree-loading").removeClass("jstree-loading");
-								obj.removeData("jstree_is_loading");
-								if(t === "success" && s.correct_state) { this.correct_state(obj); }
-							}
-							else {
-								if(t === "success" && s.correct_state) { this.get_container().children("ul").empty(); }
-							}
-							if(e_call) { e_call.call(this); }
-						};
-						success_func = function (d, t, x) {
-							d = x.responseText;
-							var sf = this.get_settings().xml_data.ajax.success; 
-							if(sf) { d = sf.call(this,d,t,x) || d; }
-							if(d === "" || (d && d.toString && d.toString().replace(/^[\s\n]+$/,"") === "")) {
-								return error_func.call(this, x, t, "");
-							}
-							this.parse_xml(d, $.proxy(function (d) {
-								if(d) {
-									d = d.replace(/ ?xmlns="[^"]*"/ig, "");
-									if(d.length > 10) {
-										d = $(d);
-										if(obj === -1 || !obj) { this.get_container().children("ul").empty().append(d.children()); }
-										else { obj.children("a.jstree-loading").removeClass("jstree-loading"); obj.append(d); obj.removeData("jstree_is_loading"); }
-										if(s.clean_node) { this.clean_node(obj); }
-										if(s_call) { s_call.call(this); }
-									}
-									else {
-										if(obj && obj !== -1) { 
-											obj.children("a.jstree-loading").removeClass("jstree-loading");
-											obj.removeData("jstree_is_loading");
-											if(s.correct_state) { 
-												this.correct_state(obj);
-												if(s_call) { s_call.call(this); } 
-											}
-										}
-										else {
-											if(s.correct_state) { 
-												this.get_container().children("ul").empty();
-												if(s_call) { s_call.call(this); } 
-											}
-										}
-									}
-								}
-							}, this));
-						};
-						s.ajax.context = this;
-						s.ajax.error = error_func;
-						s.ajax.success = success_func;
-						if(!s.ajax.dataType) { s.ajax.dataType = "xml"; }
-						if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, obj); }
-						if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, obj); }
-						$.ajax(s.ajax);
-						break;
-				}
-			},
-			parse_xml : function (xml, callback) {
-				var s = this._get_settings().xml_data;
-				$.vakata.xslt(xml, xsl[s.xsl], callback);
-			},
-			get_xml : function (tp, obj, li_attr, a_attr, is_callback) {
-				var result = "", 
-					s = this._get_settings(), 
-					_this = this,
-					tmp1, tmp2, li, a, lang;
-				if(!tp) { tp = "flat"; }
-				if(!is_callback) { is_callback = 0; }
-				obj = this._get_node(obj);
-				if(!obj || obj === -1) { obj = this.get_container().find("> ul > li"); }
-				li_attr = $.isArray(li_attr) ? li_attr : [ "id", "class" ];
-				if(!is_callback && this.data.types && $.inArray(s.types.type_attr, li_attr) === -1) { li_attr.push(s.types.type_attr); }
-
-				a_attr = $.isArray(a_attr) ? a_attr : [ ];
-
-				if(!is_callback) { 
-					if(s.xml_data.get_include_preamble) { 
-						result += '<' + '?xml version="1.0" encoding="UTF-8"?' + '>'; 
-					}
-					result += "<root>"; 
-				}
-				obj.each(function () {
-					result += "<item";
-					li = $(this);
-					$.each(li_attr, function (i, v) { 
-						var t = li.attr(v);
-						if(!s.xml_data.get_skip_empty || typeof t !== "undefined") {
-							result += " " + v + "=\"" + escape_xml((" " + (t || "")).replace(/ jstree[^ ]*/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")) + "\""; 
-						}
-					});
-					if(li.hasClass("jstree-open")) { result += " state=\"open\""; }
-					if(li.hasClass("jstree-closed")) { result += " state=\"closed\""; }
-					if(tp === "flat") { result += " parent_id=\"" + escape_xml(is_callback) + "\""; }
-					result += ">";
-					result += "<content>";
-					a = li.children("a");
-					a.each(function () {
-						tmp1 = $(this);
-						lang = false;
-						result += "<name";
-						if($.inArray("languages", s.plugins) !== -1) {
-							$.each(s.languages, function (k, z) {
-								if(tmp1.hasClass(z)) { result += " lang=\"" + escape_xml(z) + "\""; lang = z; return false; }
-							});
-						}
-						if(a_attr.length) { 
-							$.each(a_attr, function (k, z) {
-								var t = tmp1.attr(z);
-								if(!s.xml_data.get_skip_empty || typeof t !== "undefined") {
-									result += " " + z + "=\"" + escape_xml((" " + t || "").replace(/ jstree[^ ]*/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")) + "\"";
-								}
-							});
-						}
-						if(tmp1.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').replace(/^\s+$/ig,"").length) {
-							result += ' icon="' + escape_xml(tmp1.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")) + '"';
-						}
-						if(tmp1.children("ins").get(0).style.backgroundImage.length) {
-							result += ' icon="' + escape_xml(tmp1.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,"")) + '"';
-						}
-						result += ">";
-						result += "<![CDATA[" + _this.get_text(tmp1, lang) + "]]>";
-						result += "</name>";
-					});
-					result += "</content>";
-					tmp2 = li[0].id || true;
-					li = li.find("> ul > li");
-					if(li.length) { tmp2 = _this.get_xml(tp, li, li_attr, a_attr, tmp2); }
-					else { tmp2 = ""; }
-					if(tp == "nest") { result += tmp2; }
-					result += "</item>";
-					if(tp == "flat") { result += tmp2; }
-				});
-				if(!is_callback) { result += "</root>"; }
-				return result;
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/*
- * jsTree search plugin
- * Enables both sync and async search on the tree
- * DOES NOT WORK WITH JSON PROGRESSIVE RENDER
- */
-(function ($) {
-	$.expr[':'].jstree_contains = function(a,i,m){
-		return (a.textContent || a.innerText || "").toLowerCase().indexOf(m[3].toLowerCase())>=0;
-	};
-	$.expr[':'].jstree_title_contains = function(a,i,m) {
-		return (a.getAttribute("title") || "").toLowerCase().indexOf(m[3].toLowerCase())>=0;
-	};
-	$.jstree.plugin("search", {
-		__init : function () {
-			this.data.search.str = "";
-			this.data.search.result = $();
-			if(this._get_settings().search.show_only_matches) {
-				this.get_container()
-					.bind("search.jstree", function (e, data) {
-						$(this).children("ul").find("li").hide().removeClass("jstree-last");
-						data.rslt.nodes.parentsUntil(".jstree").andSelf().show()
-							.filter("ul").each(function () { $(this).children("li:visible").eq(-1).addClass("jstree-last"); });
-					})
-					.bind("clear_search.jstree", function () {
-						$(this).children("ul").find("li").css("display","").end().end().jstree("clean_node", -1);
-					});
-			}
-		},
-		defaults : {
-			ajax : false,
-			search_method : "jstree_contains", // for case insensitive - jstree_contains
-			show_only_matches : false
-		},
-		_fn : {
-			search : function (str, skip_async) {
-				if($.trim(str) === "") { this.clear_search(); return; }
-				var s = this.get_settings().search, 
-					t = this,
-					error_func = function () { },
-					success_func = function () { };
-				this.data.search.str = str;
-
-				if(!skip_async && s.ajax !== false && this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length > 0) {
-					this.search.supress_callback = true;
-					error_func = function () { };
-					success_func = function (d, t, x) {
-						var sf = this.get_settings().search.ajax.success; 
-						if(sf) { d = sf.call(this,d,t,x) || d; }
-						this.data.search.to_open = d;
-						this._search_open();
-					};
-					s.ajax.context = this;
-					s.ajax.error = error_func;
-					s.ajax.success = success_func;
-					if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, str); }
-					if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, str); }
-					if(!s.ajax.data) { s.ajax.data = { "search_string" : str }; }
-					if(!s.ajax.dataType || /^json/.exec(s.ajax.dataType)) { s.ajax.dataType = "json"; }
-					$.ajax(s.ajax);
-					return;
-				}
-				if(this.data.search.result.length) { this.clear_search(); }
-				this.data.search.result = this.get_container().find("a" + (this.data.languages ? "." + this.get_lang() : "" ) + ":" + (s.search_method) + "(" + this.data.search.str + ")");
-				this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function () {
-					t.open_node(this, false, true);
-				});
-				this.__callback({ nodes : this.data.search.result, str : str });
-			},
-			clear_search : function (str) {
-				this.data.search.result.removeClass("jstree-search");
-				this.__callback(this.data.search.result);
-				this.data.search.result = $();
-			},
-			_search_open : function (is_callback) {
-				var _this = this,
-					done = true,
-					current = [],
-					remaining = [];
-				if(this.data.search.to_open.length) {
-					$.each(this.data.search.to_open, function (i, val) {
-						if(val == "#") { return true; }
-						if($(val).length && $(val).is(".jstree-closed")) { current.push(val); }
-						else { remaining.push(val); }
-					});
-					if(current.length) {
-						this.data.search.to_open = remaining;
-						$.each(current, function (i, val) { 
-							_this.open_node(val, function () { _this._search_open(true); }); 
-						});
-						done = false;
-					}
-				}
-				if(done) { this.search(this.data.search.str, true); }
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree contextmenu plugin
- */
-(function ($) {
-	$.vakata.context = {
-		hide_on_mouseleave : false,
-
-		cnt		: $("<div id='vakata-contextmenu' />"),
-		vis		: false,
-		tgt		: false,
-		par		: false,
-		func	: false,
-		data	: false,
-		rtl		: false,
-		show	: function (s, t, x, y, d, p, rtl) {
-			$.vakata.context.rtl = !!rtl;
-			var html = $.vakata.context.parse(s), h, w;
-			if(!html) { return; }
-			$.vakata.context.vis = true;
-			$.vakata.context.tgt = t;
-			$.vakata.context.par = p || t || null;
-			$.vakata.context.data = d || null;
-			$.vakata.context.cnt
-				.html(html)
-				.css({ "visibility" : "hidden", "display" : "block", "left" : 0, "top" : 0 });
-
-			if($.vakata.context.hide_on_mouseleave) {
-				$.vakata.context.cnt
-					.one("mouseleave", function(e) { $.vakata.context.hide(); });
-			}
-
-			h = $.vakata.context.cnt.height();
-			w = $.vakata.context.cnt.width();
-			if(x + w > $(document).width()) { 
-				x = $(document).width() - (w + 5); 
-				$.vakata.context.cnt.find("li > ul").addClass("right"); 
-			}
-			if(y + h > $(document).height()) { 
-				y = y - (h + t[0].offsetHeight); 
-				$.vakata.context.cnt.find("li > ul").addClass("bottom"); 
-			}
-
-			$.vakata.context.cnt
-				.css({ "left" : x, "top" : y })
-				.find("li:has(ul)")
-					.bind("mouseenter", function (e) { 
-						var w = $(document).width(),
-							h = $(document).height(),
-							ul = $(this).children("ul").show(); 
-						if(w !== $(document).width()) { ul.toggleClass("right"); }
-						if(h !== $(document).height()) { ul.toggleClass("bottom"); }
-					})
-					.bind("mouseleave", function (e) { 
-						$(this).children("ul").hide(); 
-					})
-					.end()
-				.css({ "visibility" : "visible" })
-				.show();
-			$(document).triggerHandler("context_show.vakata");
-		},
-		hide	: function () {
-			$.vakata.context.vis = false;
-			$.vakata.context.cnt.attr("class","").css({ "visibility" : "hidden" });
-			$(document).triggerHandler("context_hide.vakata");
-		},
-		parse	: function (s, is_callback) {
-			if(!s) { return false; }
-			var str = "",
-				tmp = false,
-				was_sep = true;
-			if(!is_callback) { $.vakata.context.func = {}; }
-			str += "<ul>";
-			$.each(s, function (i, val) {
-				if(!val) { return true; }
-				$.vakata.context.func[i] = val.action;
-				if(!was_sep && val.separator_before) {
-					str += "<li class='vakata-separator vakata-separator-before'></li>";
-				}
-				was_sep = false;
-				str += "<li class='" + (val._class || "") + (val._disabled ? " jstree-contextmenu-disabled " : "") + "'><ins ";
-				if(val.icon && val.icon.indexOf("/") === -1) { str += " class='" + val.icon + "' "; }
-				if(val.icon && val.icon.indexOf("/") !== -1) { str += " style='background:url(" + val.icon + ") center center no-repeat;' "; }
-				str += ">&#160;</ins><a href='#' rel='" + i + "'>";
-				if(val.submenu) {
-					str += "<span style='float:" + ($.vakata.context.rtl ? "left" : "right") + ";'>&raquo;</span>";
-				}
-				str += val.label + "</a>";
-				if(val.submenu) {
-					tmp = $.vakata.context.parse(val.submenu, true);
-					if(tmp) { str += tmp; }
-				}
-				str += "</li>";
-				if(val.separator_after) {
-					str += "<li class='vakata-separator vakata-separator-after'></li>";
-					was_sep = true;
-				}
-			});
-			str = str.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");
-			str += "</ul>";
-			$(document).triggerHandler("context_parse.vakata");
-			return str.length > 10 ? str : false;
-		},
-		exec	: function (i) {
-			if($.isFunction($.vakata.context.func[i])) {
-				// if is string - eval and call it!
-				$.vakata.context.func[i].call($.vakata.context.data, $.vakata.context.par);
-				return true;
-			}
-			else { return false; }
-		}
-	};
-	$(function () {
-		var css_string = '' + 
-			'#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } ' + 
-			'#vakata-contextmenu ul { min-width:180px; *width:180px; } ' + 
-			'#vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } ' + 
-			'#vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } ' + 
-			'#vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } ' + 
-			'#vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } ' + 
-			'#vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } ' + 
-			'#vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } ' + 
-			'#vakata-contextmenu .right { right:100%; left:auto; } ' + 
-			'#vakata-contextmenu .bottom { bottom:-1px; top:auto; } ' + 
-			'#vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ';
-		$.vakata.css.add_sheet({ str : css_string, title : "vakata" });
-		$.vakata.context.cnt
-			.delegate("a","click", function (e) { e.preventDefault(); })
-			.delegate("a","mouseup", function (e) {
-				if(!$(this).parent().hasClass("jstree-contextmenu-disabled") && $.vakata.context.exec($(this).attr("rel"))) {
-					$.vakata.context.hide();
-				}
-				else { $(this).blur(); }
-			})
-			.delegate("a","mouseover", function () {
-				$.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover");
-			})
-			.appendTo("body");
-		$(document).bind("mousedown", function (e) { if($.vakata.context.vis && !$.contains($.vakata.context.cnt[0], e.target)) { $.vakata.context.hide(); } });
-		if(typeof $.hotkeys !== "undefined") {
-			$(document)
-				.bind("keydown", "up", function (e) { 
-					if($.vakata.context.vis) { 
-						var o = $.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();
-						if(!o.length) { o = $.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last(); }
-						o.addClass("vakata-hover");
-						e.stopImmediatePropagation(); 
-						e.preventDefault();
-					} 
-				})
-				.bind("keydown", "down", function (e) { 
-					if($.vakata.context.vis) { 
-						var o = $.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();
-						if(!o.length) { o = $.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first(); }
-						o.addClass("vakata-hover");
-						e.stopImmediatePropagation(); 
-						e.preventDefault();
-					} 
-				})
-				.bind("keydown", "right", function (e) { 
-					if($.vakata.context.vis) { 
-						$.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");
-						e.stopImmediatePropagation(); 
-						e.preventDefault();
-					} 
-				})
-				.bind("keydown", "left", function (e) { 
-					if($.vakata.context.vis) { 
-						$.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");
-						e.stopImmediatePropagation(); 
-						e.preventDefault();
-					} 
-				})
-				.bind("keydown", "esc", function (e) { 
-					$.vakata.context.hide(); 
-					e.preventDefault();
-				})
-				.bind("keydown", "space", function (e) { 
-					$.vakata.context.cnt.find(".vakata-hover").last().children("a").click();
-					e.preventDefault();
-				});
-		}
-	});
-
-	$.jstree.plugin("contextmenu", {
-		__init : function () {
-			this.get_container()
-				.delegate("a", "contextmenu.jstree", $.proxy(function (e) {
-						e.preventDefault();
-						if(!$(e.currentTarget).hasClass("jstree-loading")) {
-							this.show_contextmenu(e.currentTarget, e.pageX, e.pageY);
-						}
-					}, this))
-				.delegate("a", "click.jstree", $.proxy(function (e) {
-						if(this.data.contextmenu) {
-							$.vakata.context.hide();
-						}
-					}, this))
-				.bind("destroy.jstree", $.proxy(function () {
-						// TODO: move this to descruct method
-						if(this.data.contextmenu) {
-							$.vakata.context.hide();
-						}
-					}, this));
-			$(document).bind("context_hide.vakata", $.proxy(function () { this.data.contextmenu = false; }, this));
-		},
-		defaults : { 
-			select_node : false, // requires UI plugin
-			show_at_node : true,
-			items : { // Could be a function that should return an object like this one
-				"create" : {
-					"separator_before"	: false,
-					"separator_after"	: true,
-					"label"				: "Create",
-					"action"			: function (obj) { this.create(obj); }
-				},
-				"rename" : {
-					"separator_before"	: false,
-					"separator_after"	: false,
-					"label"				: "Rename",
-					"action"			: function (obj) { this.rename(obj); }
-				},
-				"remove" : {
-					"separator_before"	: false,
-					"icon"				: false,
-					"separator_after"	: false,
-					"label"				: "Delete",
-					"action"			: function (obj) { if(this.is_selected(obj)) { this.remove(); } else { this.remove(obj); } }
-				},
-				"ccp" : {
-					"separator_before"	: true,
-					"icon"				: false,
-					"separator_after"	: false,
-					"label"				: "Edit",
-					"action"			: false,
-					"submenu" : { 
-						"cut" : {
-							"separator_before"	: false,
-							"separator_after"	: false,
-							"label"				: "Cut",
-							"action"			: function (obj) { this.cut(obj); }
-						},
-						"copy" : {
-							"separator_before"	: false,
-							"icon"				: false,
-							"separator_after"	: false,
-							"label"				: "Copy",
-							"action"			: function (obj) { this.copy(obj); }
-						},
-						"paste" : {
-							"separator_before"	: false,
-							"icon"				: false,
-							"separator_after"	: false,
-							"label"				: "Paste",
-							"action"			: function (obj) { this.paste(obj); }
-						}
-					}
-				}
-			}
-		},
-		_fn : {
-			show_contextmenu : function (obj, x, y) {
-				obj = this._get_node(obj);
-				var s = this.get_settings().contextmenu,
-					a = obj.children("a:visible:eq(0)"),
-					o = false,
-					i = false;
-				if(s.select_node && this.data.ui && !this.is_selected(obj)) {
-					this.deselect_all();
-					this.select_node(obj, true);
-				}
-				if(s.show_at_node || typeof x === "undefined" || typeof y === "undefined") {
-					o = a.offset();
-					x = o.left;
-					y = o.top + this.data.core.li_height;
-				}
-				i = obj.data("jstree") && obj.data("jstree").contextmenu ? obj.data("jstree").contextmenu : s.items;
-				if($.isFunction(i)) { i = i.call(this, obj); }
-				this.data.contextmenu = true;
-				$.vakata.context.show(i, a, x, y, this, obj, this._get_settings().core.rtl);
-				if(this.data.themes) { $.vakata.context.cnt.attr("class", "jstree-" + this.data.themes.theme + "-context"); }
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree types plugin
- * Adds support types of nodes
- * You can set an attribute on each li node, that represents its type.
- * According to the type setting the node may get custom icon/validation rules
- */
-(function ($) {
-	$.jstree.plugin("types", {
-		__init : function () {
-			var s = this._get_settings().types;
-			this.data.types.attach_to = [];
-			this.get_container()
-				.bind("init.jstree", $.proxy(function () { 
-						var types = s.types, 
-							attr  = s.type_attr, 
-							icons_css = "", 
-							_this = this;
-
-						$.each(types, function (i, tp) {
-							$.each(tp, function (k, v) { 
-								if(!/^(max_depth|max_children|icon|valid_children)$/.test(k)) { _this.data.types.attach_to.push(k); }
-							});
-							if(!tp.icon) { return true; }
-							if( tp.icon.image || tp.icon.position) {
-								if(i == "default")	{ icons_css += '.jstree-' + _this.get_index() + ' a > .jstree-icon { '; }
-								else				{ icons_css += '.jstree-' + _this.get_index() + ' li[' + attr + '="' + i + '"] > a > .jstree-icon { '; }
-								if(tp.icon.image)	{ icons_css += ' background-image:url(' + tp.icon.image + '); '; }
-								if(tp.icon.position){ icons_css += ' background-position:' + tp.icon.position + '; '; }
-								else				{ icons_css += ' background-position:0 0; '; }
-								icons_css += '} ';
-							}
-						});
-						if(icons_css !== "") { $.vakata.css.add_sheet({ 'str' : icons_css, title : "jstree-types" }); }
-					}, this))
-				.bind("before.jstree", $.proxy(function (e, data) { 
-						var s, t, 
-							o = this._get_settings().types.use_data ? this._get_node(data.args[0]) : false, 
-							d = o && o !== -1 && o.length ? o.data("jstree") : false;
-						if(d && d.types && d.types[data.func] === false) { e.stopImmediatePropagation(); return false; }
-						if($.inArray(data.func, this.data.types.attach_to) !== -1) {
-							if(!data.args[0] || (!data.args[0].tagName && !data.args[0].jquery)) { return; }
-							s = this._get_settings().types.types;
-							t = this._get_type(data.args[0]);
-							if(
-								( 
-									(s[t] && typeof s[t][data.func] !== "undefined") || 
-									(s["default"] && typeof s["default"][data.func] !== "undefined") 
-								) && this._check(data.func, data.args[0]) === false
-							) {
-								e.stopImmediatePropagation();
-								return false;
-							}
-						}
-					}, this));
-			if(is_ie6) {
-				this.get_container()
-					.bind("load_node.jstree set_type.jstree", $.proxy(function (e, data) {
-							var r = data && data.rslt && data.rslt.obj && data.rslt.obj !== -1 ? this._get_node(data.rslt.obj).parent() : this.get_container_ul(),
-								c = false,
-								s = this._get_settings().types;
-							$.each(s.types, function (i, tp) {
-								if(tp.icon && (tp.icon.image || tp.icon.position)) {
-									c = i === "default" ? r.find("li > a > .jstree-icon") : r.find("li[" + s.type_attr + "='" + i + "'] > a > .jstree-icon");
-									if(tp.icon.image) { c.css("backgroundImage","url(" + tp.icon.image + ")"); }
-									c.css("backgroundPosition", tp.icon.position || "0 0");
-								}
-							});
-						}, this));
-			}
-		},
-		defaults : {
-			// defines maximum number of root nodes (-1 means unlimited, -2 means disable max_children checking)
-			max_children		: -1,
-			// defines the maximum depth of the tree (-1 means unlimited, -2 means disable max_depth checking)
-			max_depth			: -1,
-			// defines valid node types for the root nodes
-			valid_children		: "all",
-
-			// whether to use $.data
-			use_data : false, 
-			// where is the type stores (the rel attribute of the LI element)
-			type_attr : "rel",
-			// a list of types
-			types : {
-				// the default type
-				"default" : {
-					"max_children"	: -1,
-					"max_depth"		: -1,
-					"valid_children": "all"
-
-					// Bound functions - you can bind any other function here (using boolean or function)
-					//"select_node"	: true
-				}
-			}
-		},
-		_fn : {
-			_types_notify : function (n, data) {
-				if(data.type && this._get_settings().types.use_data) {
-					this.set_type(data.type, n);
-				}
-			},
-			_get_type : function (obj) {
-				obj = this._get_node(obj);
-				return (!obj || !obj.length) ? false : obj.attr(this._get_settings().types.type_attr) || "default";
-			},
-			set_type : function (str, obj) {
-				obj = this._get_node(obj);
-				var ret = (!obj.length || !str) ? false : obj.attr(this._get_settings().types.type_attr, str);
-				if(ret) { this.__callback({ obj : obj, type : str}); }
-				return ret;
-			},
-			_check : function (rule, obj, opts) {
-				obj = this._get_node(obj);
-				var v = false, t = this._get_type(obj), d = 0, _this = this, s = this._get_settings().types, data = false;
-				if(obj === -1) { 
-					if(!!s[rule]) { v = s[rule]; }
-					else { return; }
-				}
-				else {
-					if(t === false) { return; }
-					data = s.use_data ? obj.data("jstree") : false;
-					if(data && data.types && typeof data.types[rule] !== "undefined") { v = data.types[rule]; }
-					else if(!!s.types[t] && typeof s.types[t][rule] !== "undefined") { v = s.types[t][rule]; }
-					else if(!!s.types["default"] && typeof s.types["default"][rule] !== "undefined") { v = s.types["default"][rule]; }
-				}
-				if($.isFunction(v)) { v = v.call(this, obj); }
-				if(rule === "max_depth" && obj !== -1 && opts !== false && s.max_depth !== -2 && v !== 0) {
-					// also include the node itself - otherwise if root node it is not checked
-					obj.children("a:eq(0)").parentsUntil(".jstree","li").each(function (i) {
-						// check if current depth already exceeds global tree depth
-						if(s.max_depth !== -1 && s.max_depth - (i + 1) <= 0) { v = 0; return false; }
-						d = (i === 0) ? v : _this._check(rule, this, false);
-						// check if current node max depth is already matched or exceeded
-						if(d !== -1 && d - (i + 1) <= 0) { v = 0; return false; }
-						// otherwise - set the max depth to the current value minus current depth
-						if(d >= 0 && (d - (i + 1) < v || v < 0) ) { v = d - (i + 1); }
-						// if the global tree depth exists and it minus the nodes calculated so far is less than `v` or `v` is unlimited
-						if(s.max_depth >= 0 && (s.max_depth - (i + 1) < v || v < 0) ) { v = s.max_depth - (i + 1); }
-					});
-				}
-				return v;
-			},
-			check_move : function () {
-				if(!this.__call_old()) { return false; }
-				var m  = this._get_move(),
-					s  = m.rt._get_settings().types,
-					mc = m.rt._check("max_children", m.cr),
-					md = m.rt._check("max_depth", m.cr),
-					vc = m.rt._check("valid_children", m.cr),
-					ch = 0, d = 1, t;
-
-				if(vc === "none") { return false; } 
-				if($.isArray(vc) && m.ot && m.ot._get_type) {
-					m.o.each(function () {
-						if($.inArray(m.ot._get_type(this), vc) === -1) { d = false; return false; }
-					});
-					if(d === false) { return false; }
-				}
-				if(s.max_children !== -2 && mc !== -1) {
-					ch = m.cr === -1 ? this.get_container().find("> ul > li").not(m.o).length : m.cr.find("> ul > li").not(m.o).length;
-					if(ch + m.o.length > mc) { return false; }
-				}
-				if(s.max_depth !== -2 && md !== -1) {
-					d = 0;
-					if(md === 0) { return false; }
-					if(typeof m.o.d === "undefined") {
-						// TODO: deal with progressive rendering and async when checking max_depth (how to know the depth of the moved node)
-						t = m.o;
-						while(t.length > 0) {
-							t = t.find("> ul > li");
-							d ++;
-						}
-						m.o.d = d;
-					}
-					if(md - m.o.d < 0) { return false; }
-				}
-				return true;
-			},
-			create_node : function (obj, position, js, callback, is_loaded, skip_check) {
-				if(!skip_check && (is_loaded || this._is_loaded(obj))) {
-					var p  = (typeof position == "string" && position.match(/^before|after$/i) && obj !== -1) ? this._get_parent(obj) : this._get_node(obj),
-						s  = this._get_settings().types,
-						mc = this._check("max_children", p),
-						md = this._check("max_depth", p),
-						vc = this._check("valid_children", p),
-						ch;
-					if(typeof js === "string") { js = { data : js }; }
-					if(!js) { js = {}; }
-					if(vc === "none") { return false; } 
-					if($.isArray(vc)) {
-						if(!js.attr || !js.attr[s.type_attr]) { 
-							if(!js.attr) { js.attr = {}; }
-							js.attr[s.type_attr] = vc[0]; 
-						}
-						else {
-							if($.inArray(js.attr[s.type_attr], vc) === -1) { return false; }
-						}
-					}
-					if(s.max_children !== -2 && mc !== -1) {
-						ch = p === -1 ? this.get_container().find("> ul > li").length : p.find("> ul > li").length;
-						if(ch + 1 > mc) { return false; }
-					}
-					if(s.max_depth !== -2 && md !== -1 && (md - 1) < 0) { return false; }
-				}
-				return this.__call_old(true, obj, position, js, callback, is_loaded, skip_check);
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree HTML plugin
- * The HTML data store. Datastores are build by replacing the `load_node` and `_is_loaded` functions.
- */
-(function ($) {
-	$.jstree.plugin("html_data", {
-		__init : function () { 
-			// this used to use html() and clean the whitespace, but this way any attached data was lost
-			this.data.html_data.original_container_html = this.get_container().find(" > ul > li").clone(true);
-			// remove white space from LI node - otherwise nodes appear a bit to the right
-			this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function() { return this.nodeType == 3; }).remove();
-		},
-		defaults : { 
-			data : false,
-			ajax : false,
-			correct_state : true
-		},
-		_fn : {
-			load_node : function (obj, s_call, e_call) { var _this = this; this.load_node_html(obj, function () { _this.__callback({ "obj" : _this._get_node(obj) }); s_call.call(this); }, e_call); },
-			_is_loaded : function (obj) { 
-				obj = this._get_node(obj); 
-				return obj == -1 || !obj || (!this._get_settings().html_data.ajax && !$.isFunction(this._get_settings().html_data.data)) || obj.is(".jstree-open, .jstree-leaf") || obj.children("ul").children("li").size() > 0;
-			},
-			load_node_html : function (obj, s_call, e_call) {
-				var d,
-					s = this.get_settings().html_data,
-					error_func = function () {},
-					success_func = function () {};
-				obj = this._get_node(obj);
-				if(obj && obj !== -1) {
-					if(obj.data("jstree_is_loading")) { return; }
-					else { obj.data("jstree_is_loading",true); }
-				}
-				switch(!0) {
-					case ($.isFunction(s.data)):
-						s.data.call(this, obj, $.proxy(function (d) {
-							if(d && d !== "" && d.toString && d.toString().replace(/^[\s\n]+$/,"") !== "") {
-								d = $(d);
-								if(!d.is("ul")) { d = $("<ul />").append(d); }
-								if(obj == -1 || !obj) { this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); }
-								else { obj.children("a.jstree-loading").removeClass("jstree-loading"); obj.append(d).children("ul").find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); obj.removeData("jstree_is_loading"); }
-								this.clean_node(obj);
-								if(s_call) { s_call.call(this); }
-							}
-							else {
-								if(obj && obj !== -1) {
-									obj.children("a.jstree-loading").removeClass("jstree-loading");
-									obj.removeData("jstree_is_loading");
-									if(s.correct_state) { 
-										this.correct_state(obj);
-										if(s_call) { s_call.call(this); } 
-									}
-								}
-								else {
-									if(s.correct_state) { 
-										this.get_container().children("ul").empty();
-										if(s_call) { s_call.call(this); } 
-									}
-								}
-							}
-						}, this));
-						break;
-					case (!s.data && !s.ajax):
-						if(!obj || obj == -1) {
-							this.get_container()
-								.children("ul").empty()
-								.append(this.data.html_data.original_container_html)
-								.find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'>&#160;</ins>").end()
-								.filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
-							this.clean_node();
-						}
-						if(s_call) { s_call.call(this); }
-						break;
-					case (!!s.data && !s.ajax) || (!!s.data && !!s.ajax && (!obj || obj === -1)):
-						if(!obj || obj == -1) {
-							d = $(s.data);
-							if(!d.is("ul")) { d = $("<ul />").append(d); }
-							this.get_container()
-								.children("ul").empty().append(d.children())
-								.find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'>&#160;</ins>").end()
-								.filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
-							this.clean_node();
-						}
-						if(s_call) { s_call.call(this); }
-						break;
-					case (!s.data && !!s.ajax) || (!!s.data && !!s.ajax && obj && obj !== -1):
-						obj = this._get_node(obj);
-						error_func = function (x, t, e) {
-							var ef = this.get_settings().html_data.ajax.error; 
-							if(ef) { ef.call(this, x, t, e); }
-							if(obj != -1 && obj.length) {
-								obj.children("a.jstree-loading").removeClass("jstree-loading");
-								obj.removeData("jstree_is_loading");
-								if(t === "success" && s.correct_state) { this.correct_state(obj); }
-							}
-							else {
-								if(t === "success" && s.correct_state) { this.get_container().children("ul").empty(); }
-							}
-							if(e_call) { e_call.call(this); }
-						};
-						success_func = function (d, t, x) {
-							var sf = this.get_settings().html_data.ajax.success; 
-							if(sf) { d = sf.call(this,d,t,x) || d; }
-							if(d === "" || (d && d.toString && d.toString().replace(/^[\s\n]+$/,"") === "")) {
-								return error_func.call(this, x, t, "");
-							}
-							if(d) {
-								d = $(d);
-								if(!d.is("ul")) { d = $("<ul />").append(d); }
-								if(obj == -1 || !obj) { this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); }
-								else { obj.children("a.jstree-loading").removeClass("jstree-loading"); obj.append(d).children("ul").find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); obj.removeData("jstree_is_loading"); }
-								this.clean_node(obj);
-								if(s_call) { s_call.call(this); }
-							}
-							else {
-								if(obj && obj !== -1) {
-									obj.children("a.jstree-loading").removeClass("jstree-loading");
-									obj.removeData("jstree_is_loading");
-									if(s.correct_state) { 
-										this.correct_state(obj);
-										if(s_call) { s_call.call(this); } 
-									}
-								}
-								else {
-									if(s.correct_state) { 
-										this.get_container().children("ul").empty();
-										if(s_call) { s_call.call(this); } 
-									}
-								}
-							}
-						};
-						s.ajax.context = this;
-						s.ajax.error = error_func;
-						s.ajax.success = success_func;
-						if(!s.ajax.dataType) { s.ajax.dataType = "html"; }
-						if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, obj); }
-						if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, obj); }
-						$.ajax(s.ajax);
-						break;
-				}
-			}
-		}
-	});
-	// include the HTML data plugin by default
-	$.jstree.defaults.plugins.push("html_data");
-})(jQuery);
-//*/
-
-/* 
- * jsTree themeroller plugin
- * Adds support for jQuery UI themes. Include this at the end of your plugins list, also make sure "themes" is not included.
- */
-(function ($) {
-	$.jstree.plugin("themeroller", {
-		__init : function () {
-			var s = this._get_settings().themeroller;
-			this.get_container()
-				.addClass("ui-widget-content")
-				.addClass("jstree-themeroller")
-				.delegate("a","mouseenter.jstree", function (e) {
-					if(!$(e.currentTarget).hasClass("jstree-loading")) {
-						$(this).addClass(s.item_h);
-					}
-				})
-				.delegate("a","mouseleave.jstree", function () {
-					$(this).removeClass(s.item_h);
-				})
-				.bind("init.jstree", $.proxy(function (e, data) { 
-						data.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");
-						this._themeroller(data.inst.get_container().find("> ul > li"));
-					}, this))
-				.bind("open_node.jstree create_node.jstree", $.proxy(function (e, data) { 
-						this._themeroller(data.rslt.obj);
-					}, this))
-				.bind("loaded.jstree refresh.jstree", $.proxy(function (e) {
-						this._themeroller();
-					}, this))
-				.bind("close_node.jstree", $.proxy(function (e, data) {
-						this._themeroller(data.rslt.obj);
-					}, this))
-				.bind("delete_node.jstree", $.proxy(function (e, data) {
-						this._themeroller(data.rslt.parent);
-					}, this))
-				.bind("correct_state.jstree", $.proxy(function (e, data) {
-						data.rslt.obj
-							.children("ins.jstree-icon").removeClass(s.opened + " " + s.closed + " ui-icon").end()
-							.find("> a > ins.ui-icon")
-								.filter(function() { 
-									return this.className.toString()
-										.replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"")
-										.indexOf("ui-icon-") === -1; 
-								}).removeClass(s.item_open + " " + s.item_clsd).addClass(s.item_leaf || "jstree-no-icon");
-					}, this))
-				.bind("select_node.jstree", $.proxy(function (e, data) {
-						data.rslt.obj.children("a").addClass(s.item_a);
-					}, this))
-				.bind("deselect_node.jstree deselect_all.jstree", $.proxy(function (e, data) {
-						this.get_container()
-							.find("a." + s.item_a).removeClass(s.item_a).end()
-							.find("a.jstree-clicked").addClass(s.item_a);
-					}, this))
-				.bind("dehover_node.jstree", $.proxy(function (e, data) {
-						data.rslt.obj.children("a").removeClass(s.item_h);
-					}, this))
-				.bind("hover_node.jstree", $.proxy(function (e, data) {
-						this.get_container()
-							.find("a." + s.item_h).not(data.rslt.obj).removeClass(s.item_h);
-						data.rslt.obj.children("a").addClass(s.item_h);
-					}, this))
-				.bind("move_node.jstree", $.proxy(function (e, data) {
-						this._themeroller(data.rslt.o);
-						this._themeroller(data.rslt.op);
-					}, this));
-		},
-		__destroy : function () {
-			var s = this._get_settings().themeroller,
-				c = [ "ui-icon" ];
-			$.each(s, function (i, v) {
-				v = v.split(" ");
-				if(v.length) { c = c.concat(v); }
-			});
-			this.get_container()
-				.removeClass("ui-widget-content")
-				.find("." + c.join(", .")).removeClass(c.join(" "));
-		},
-		_fn : {
-			_themeroller : function (obj) {
-				var s = this._get_settings().themeroller;
-				obj = !obj || obj == -1 ? this.get_container_ul() : this._get_node(obj).parent();
-				obj
-					.find("li.jstree-closed")
-						.children("ins.jstree-icon").removeClass(s.opened).addClass("ui-icon " + s.closed).end()
-						.children("a").addClass(s.item)
-							.children("ins.jstree-icon").addClass("ui-icon")
-								.filter(function() { 
-									return this.className.toString()
-										.replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"")
-										.indexOf("ui-icon-") === -1; 
-								}).removeClass(s.item_leaf + " " + s.item_open).addClass(s.item_clsd || "jstree-no-icon")
-								.end()
-							.end()
-						.end()
-					.end()
-					.find("li.jstree-open")
-						.children("ins.jstree-icon").removeClass(s.closed).addClass("ui-icon " + s.opened).end()
-						.children("a").addClass(s.item)
-							.children("ins.jstree-icon").addClass("ui-icon")
-								.filter(function() { 
-									return this.className.toString()
-										.replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"")
-										.indexOf("ui-icon-") === -1; 
-								}).removeClass(s.item_leaf + " " + s.item_clsd).addClass(s.item_open || "jstree-no-icon")
-								.end()
-							.end()
-						.end()
-					.end()
-					.find("li.jstree-leaf")
-						.children("ins.jstree-icon").removeClass(s.closed + " ui-icon " + s.opened).end()
-						.children("a").addClass(s.item)
-							.children("ins.jstree-icon").addClass("ui-icon")
-								.filter(function() { 
-									return this.className.toString()
-										.replace(s.item_clsd,"").replace(s.item_open,"").replace(s.item_leaf,"")
-										.indexOf("ui-icon-") === -1; 
-								}).removeClass(s.item_clsd + " " + s.item_open).addClass(s.item_leaf || "jstree-no-icon");
-			}
-		},
-		defaults : {
-			"opened"	: "ui-icon-triangle-1-se",
-			"closed"	: "ui-icon-triangle-1-e",
-			"item"		: "ui-state-default",
-			"item_h"	: "ui-state-hover",
-			"item_a"	: "ui-state-active",
-			"item_open"	: "ui-icon-folder-open",
-			"item_clsd"	: "ui-icon-folder-collapsed",
-			"item_leaf"	: "ui-icon-document"
-		}
-	});
-	$(function() {
-		var css_string = '' + 
-			'.jstree-themeroller .ui-icon { overflow:visible; } ' + 
-			'.jstree-themeroller a { padding:0 2px; } ' + 
-			'.jstree-themeroller .jstree-no-icon { display:none; }';
-		$.vakata.css.add_sheet({ str : css_string, title : "jstree" });
-	});
-})(jQuery);
-//*/
-
-/* 
- * jsTree unique plugin
- * Forces different names amongst siblings (still a bit experimental)
- * NOTE: does not check language versions (it will not be possible to have nodes with the same title, even in different languages)
- */
-(function ($) {
-	$.jstree.plugin("unique", {
-		__init : function () {
-			this.get_container()
-				.bind("before.jstree", $.proxy(function (e, data) { 
-						var nms = [], res = true, p, t;
-						if(data.func == "move_node") {
-							// obj, ref, position, is_copy, is_prepared, skip_check
-							if(data.args[4] === true) {
-								if(data.args[0].o && data.args[0].o.length) {
-									data.args[0].o.children("a").each(function () { nms.push($(this).text().replace(/^\s+/g,"")); });
-									res = this._check_unique(nms, data.args[0].np.find("> ul > li").not(data.args[0].o), "move_node");
-								}
-							}
-						}
-						if(data.func == "create_node") {
-							// obj, position, js, callback, is_loaded
-							if(data.args[4] || this._is_loaded(data.args[0])) {
-								p = this._get_node(data.args[0]);
-								if(data.args[1] && (data.args[1] === "before" || data.args[1] === "after")) {
-									p = this._get_parent(data.args[0]);
-									if(!p || p === -1) { p = this.get_container(); }
-								}
-								if(typeof data.args[2] === "string") { nms.push(data.args[2]); }
-								else if(!data.args[2] || !data.args[2].data) { nms.push(this._get_string("new_node")); }
-								else { nms.push(data.args[2].data); }
-								res = this._check_unique(nms, p.find("> ul > li"), "create_node");
-							}
-						}
-						if(data.func == "rename_node") {
-							// obj, val
-							nms.push(data.args[1]);
-							t = this._get_node(data.args[0]);
-							p = this._get_parent(t);
-							if(!p || p === -1) { p = this.get_container(); }
-							res = this._check_unique(nms, p.find("> ul > li").not(t), "rename_node");
-						}
-						if(!res) {
-							e.stopPropagation();
-							return false;
-						}
-					}, this));
-		},
-		defaults : { 
-			error_callback : $.noop
-		},
-		_fn : { 
-			_check_unique : function (nms, p, func) {
-				var cnms = [];
-				p.children("a").each(function () { cnms.push($(this).text().replace(/^\s+/g,"")); });
-				if(!cnms.length || !nms.length) { return true; }
-				cnms = cnms.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");
-				if((cnms.length + nms.length) != cnms.concat(nms).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length) {
-					this._get_settings().unique.error_callback.call(null, nms, p, func);
-					return false;
-				}
-				return true;
-			},
-			check_move : function () {
-				if(!this.__call_old()) { return false; }
-				var p = this._get_move(), nms = [];
-				if(p.o && p.o.length) {
-					p.o.children("a").each(function () { nms.push($(this).text().replace(/^\s+/g,"")); });
-					return this._check_unique(nms, p.np.find("> ul > li").not(p.o), "check_move");
-				}
-				return true;
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-/*
- * jsTree wholerow plugin
- * Makes select and hover work on the entire width of the node
- * MAY BE HEAVY IN LARGE DOM
- */
-(function ($) {
-	$.jstree.plugin("wholerow", {
-		__init : function () {
-			if(!this.data.ui) { throw "jsTree wholerow: jsTree UI plugin not included."; }
-			this.data.wholerow.html = false;
-			this.data.wholerow.to = false;
-			this.get_container()
-				.bind("init.jstree", $.proxy(function (e, data) { 
-						this._get_settings().core.animation = 0;
-					}, this))
-				.bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree", $.proxy(function (e, data) { 
-						this._prepare_wholerow_span( data && data.rslt && data.rslt.obj ? data.rslt.obj : -1 );
-					}, this))
-				.bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree", $.proxy(function (e, data) { 
-						if(this.data.to) { clearTimeout(this.data.to); }
-						this.data.to = setTimeout( (function (t, o) { return function() { t._prepare_wholerow_ul(o); }; })(this,  data && data.rslt && data.rslt.obj ? data.rslt.obj : -1), 0);
-					}, this))
-				.bind("deselect_all.jstree", $.proxy(function (e, data) { 
-						this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked " + (this.data.themeroller ? this._get_settings().themeroller.item_a : "" ));
-					}, this))
-				.bind("select_node.jstree deselect_node.jstree ", $.proxy(function (e, data) { 
-						data.rslt.obj.each(function () { 
-							var ref = data.inst.get_container().find(" > .jstree-wholerow li:visible:eq(" + ( parseInt((($(this).offset().top - data.inst.get_container().offset().top + data.inst.get_container()[0].scrollTop) / data.inst.data.core.li_height),10)) + ")");
-							// ref.children("a")[e.type === "select_node" ? "addClass" : "removeClass"]("jstree-clicked");
-							ref.children("a").attr("class",data.rslt.obj.children("a").attr("class"));
-						});
-					}, this))
-				.bind("hover_node.jstree dehover_node.jstree", $.proxy(function (e, data) { 
-						this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered " + (this.data.themeroller ? this._get_settings().themeroller.item_h : "" ));
-						if(e.type === "hover_node") {
-							var ref = this.get_container().find(" > .jstree-wholerow li:visible:eq(" + ( parseInt(((data.rslt.obj.offset().top - this.get_container().offset().top + this.get_container()[0].scrollTop) / this.data.core.li_height),10)) + ")");
-							// ref.children("a").addClass("jstree-hovered");
-							ref.children("a").attr("class",data.rslt.obj.children(".jstree-hovered").attr("class"));
-						}
-					}, this))
-				.delegate(".jstree-wholerow-span, ins.jstree-icon, li", "click.jstree", function (e) {
-						var n = $(e.currentTarget);
-						if(e.target.tagName === "A" || (e.target.tagName === "INS" && n.closest("li").is(".jstree-open, .jstree-closed"))) { return; }
-						n.closest("li").children("a:visible:eq(0)").click();
-						e.stopImmediatePropagation();
-					})
-				.delegate("li", "mouseover.jstree", $.proxy(function (e) {
-						e.stopImmediatePropagation();
-						if($(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length) { return false; }
-						this.hover_node(e.currentTarget);
-						return false;
-					}, this))
-				.delegate("li", "mouseleave.jstree", $.proxy(function (e) {
-						if($(e.currentTarget).children("a").hasClass("jstree-hovered").length) { return; }
-						this.dehover_node(e.currentTarget);
-					}, this));
-			if(is_ie7 || is_ie6) {
-				$.vakata.css.add_sheet({ str : ".jstree-" + this.get_index() + " { position:relative; } ", title : "jstree" });
-			}
-		},
-		defaults : {
-		},
-		__destroy : function () {
-			this.get_container().children(".jstree-wholerow").remove();
-			this.get_container().find(".jstree-wholerow-span").remove();
-		},
-		_fn : {
-			_prepare_wholerow_span : function (obj) {
-				obj = !obj || obj == -1 ? this.get_container().find("> ul > li") : this._get_node(obj);
-				if(obj === false) { return; } // added for removing root nodes
-				obj.each(function () {
-					$(this).find("li").andSelf().each(function () {
-						var $t = $(this);
-						if($t.children(".jstree-wholerow-span").length) { return true; }
-						$t.prepend("<span class='jstree-wholerow-span' style='width:" + ($t.parentsUntil(".jstree","li").length * 18) + "px;'>&#160;</span>");
-					});
-				});
-			},
-			_prepare_wholerow_ul : function () {
-				var o = this.get_container().children("ul").eq(0), h = o.html();
-				o.addClass("jstree-wholerow-real");
-				if(this.data.wholerow.last_html !== h) {
-					this.data.wholerow.last_html = h;
-					this.get_container().children(".jstree-wholerow").remove();
-					this.get_container().append(
-						o.clone().removeClass("jstree-wholerow-real")
-							.wrapAll("<div class='jstree-wholerow' />").parent()
-							.width(o.parent()[0].scrollWidth)
-							.css("top", (o.height() + ( is_ie7 ? 5 : 0)) * -1 )
-							.find("li[id]").each(function () { this.removeAttribute("id"); }).end()
-					);
-				}
-			}
-		}
-	});
-	$(function() {
-		var css_string = '' + 
-			'.jstree .jstree-wholerow-real { position:relative; z-index:1; } ' + 
-			'.jstree .jstree-wholerow-real li { cursor:pointer; } ' + 
-			'.jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } ' + 
-			'.jstree .jstree-wholerow { position:relative; z-index:0; height:0; } ' + 
-			'.jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } ' + 
-			'.jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } ' + 
-			'.jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }' + 
-			'.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }' + 
-			'.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } ' + 
-			'.jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }';
-		if(is_ff2) {
-			css_string += '' + 
-				'.jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } ' + 
-				'.jstree .jstree-wholerow-real a { border-color:transparent !important; } ';
-		}
-		if(is_ie7 || is_ie6) {
-			css_string += '' + 
-				'.jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } ' + 
-				'.jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ';
-		}
-		$.vakata.css.add_sheet({ str : css_string, title : "jstree" });
-	});
-})(jQuery);
-//*/
-
-/*
-* jsTree model plugin
-* This plugin gets jstree to use a class model to retrieve data, creating great dynamism
-*/
-(function ($) {
-	var nodeInterface = ["getChildren","getChildrenCount","getAttr","getName","getProps"],
-		validateInterface = function(obj, inter) {
-			var valid = true;
-			obj = obj || {};
-			inter = [].concat(inter);
-			$.each(inter, function (i, v) {
-				if(!$.isFunction(obj[v])) { valid = false; return false; }
-			});
-			return valid;
-		};
-	$.jstree.plugin("model", {
-		__init : function () {
-			if(!this.data.json_data) { throw "jsTree model: jsTree json_data plugin not included."; }
-			this._get_settings().json_data.data = function (n, b) {
-				var obj = (n == -1) ? this._get_settings().model.object : n.data("jstree_model");
-				if(!validateInterface(obj, nodeInterface)) { return b.call(null, false); }
-				if(this._get_settings().model.async) {
-					obj.getChildren($.proxy(function (data) {
-						this.model_done(data, b);
-					}, this));
-				}
-				else {
-					this.model_done(obj.getChildren(), b);
-				}
-			};
-		},
-		defaults : {
-			object : false,
-			id_prefix : false,
-			async : false
-		},
-		_fn : {
-			model_done : function (data, callback) {
-				var ret = [], 
-					s = this._get_settings(),
-					_this = this;
-
-				if(!$.isArray(data)) { data = [data]; }
-				$.each(data, function (i, nd) {
-					var r = nd.getProps() || {};
-					r.attr = nd.getAttr() || {};
-					if(nd.getChildrenCount()) { r.state = "closed"; }
-					r.data = nd.getName();
-					if(!$.isArray(r.data)) { r.data = [r.data]; }
-					if(_this.data.types && $.isFunction(nd.getType)) {
-						r.attr[s.types.type_attr] = nd.getType();
-					}
-					if(r.attr.id && s.model.id_prefix) { r.attr.id = s.model.id_prefix + r.attr.id; }
-					if(!r.metadata) { r.metadata = { }; }
-					r.metadata.jstree_model = nd;
-					ret.push(r);
-				});
-				callback.call(null, ret);
-			}
-		}
-	});
-})(jQuery);
-//*/
-
-})();
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/apple/bg.jpg and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/apple/bg.jpg are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/apple/d.png and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/apple/d.png are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/apple/dot_for_ie.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/apple/dot_for_ie.gif are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/themes/apple/style.css elefant-elefant_1_3_3_beta/apps/navigation/js/themes/apple/style.css
--- elefant-elefant_1_3_2_beta/apps/navigation/js/themes/apple/style.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/themes/apple/style.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,61 +1,61 @@
-/*
- * jsTree apple theme 1.0
- * Supported features: dots/no-dots, icons/no-icons, focused, loading
- * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
- */
-
-.jstree-apple > ul { background:url("bg.jpg") left top repeat; }
-.jstree-apple li, 
-.jstree-apple ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
-.jstree-apple li { background-position:-90px 0; background-repeat:repeat-y;  }
-.jstree-apple li.jstree-last { background:transparent; }
-.jstree-apple .jstree-open > ins { background-position:-72px 0; }
-.jstree-apple .jstree-closed > ins { background-position:-54px 0; }
-.jstree-apple .jstree-leaf > ins { background-position:-36px 0; }
-
-.jstree-apple a { border-radius:4px; -moz-border-radius:4px; -webkit-border-radius:4px; text-shadow:1px 1px 1px white; }
-.jstree-apple .jstree-hovered { background:#e7f4f9; border:1px solid #d8f0fa; padding:0 3px 0 1px; text-shadow:1px 1px 1px silver; }
-.jstree-apple .jstree-clicked { background:#beebff; border:1px solid #99defd; padding:0 3px 0 1px; }
-.jstree-apple a .jstree-icon { background-position:-56px -20px; }
-.jstree-apple a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
-
-.jstree-apple.jstree-focused { background:white; }
-
-.jstree-apple .jstree-no-dots li, 
-.jstree-apple .jstree-no-dots .jstree-leaf > ins { background:transparent; }
-.jstree-apple .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
-.jstree-apple .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
-
-.jstree-apple .jstree-no-icons a .jstree-icon { display:none; }
-
-.jstree-apple .jstree-search { font-style:italic; }
-
-.jstree-apple .jstree-no-icons .jstree-checkbox { display:inline-block; }
-.jstree-apple .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
-.jstree-apple .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
-.jstree-apple .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
-.jstree-apple .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
-.jstree-apple .jstree-checked > a > .checkbox:hover { background-position:-38px -37px; }
-.jstree-apple .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
-.jstree-apple .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
-
-#vakata-dragged.jstree-apple ins { background:transparent !important; }
-#vakata-dragged.jstree-apple .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
-#vakata-dragged.jstree-apple .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
-#jstree-marker.jstree-apple { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
-
-.jstree-apple a.jstree-search { color:aqua; }
-.jstree-apple .jstree-locked a { color:silver; cursor:default; }
-
-#vakata-contextmenu.jstree-apple-context, 
-#vakata-contextmenu.jstree-apple-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
-#vakata-contextmenu.jstree-apple-context li { }
-#vakata-contextmenu.jstree-apple-context a { color:black; }
-#vakata-contextmenu.jstree-apple-context a:hover, 
-#vakata-contextmenu.jstree-apple-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
-#vakata-contextmenu.jstree-apple-context li.jstree-contextmenu-disabled a, 
-#vakata-contextmenu.jstree-apple-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
-#vakata-contextmenu.jstree-apple-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
-#vakata-contextmenu.jstree-apple-context li ul { margin-left:-4px; }
-
+/*
+ * jsTree apple theme 1.0
+ * Supported features: dots/no-dots, icons/no-icons, focused, loading
+ * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
+ */
+
+.jstree-apple > ul { background:url("bg.jpg") left top repeat; }
+.jstree-apple li, 
+.jstree-apple ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
+.jstree-apple li { background-position:-90px 0; background-repeat:repeat-y;  }
+.jstree-apple li.jstree-last { background:transparent; }
+.jstree-apple .jstree-open > ins { background-position:-72px 0; }
+.jstree-apple .jstree-closed > ins { background-position:-54px 0; }
+.jstree-apple .jstree-leaf > ins { background-position:-36px 0; }
+
+.jstree-apple a { border-radius:4px; -moz-border-radius:4px; -webkit-border-radius:4px; text-shadow:1px 1px 1px white; }
+.jstree-apple .jstree-hovered { background:#e7f4f9; border:1px solid #d8f0fa; padding:0 3px 0 1px; text-shadow:1px 1px 1px silver; }
+.jstree-apple .jstree-clicked { background:#beebff; border:1px solid #99defd; padding:0 3px 0 1px; }
+.jstree-apple a .jstree-icon { background-position:-56px -20px; }
+.jstree-apple a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
+
+.jstree-apple.jstree-focused { background:white; }
+
+.jstree-apple .jstree-no-dots li, 
+.jstree-apple .jstree-no-dots .jstree-leaf > ins { background:transparent; }
+.jstree-apple .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
+.jstree-apple .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
+
+.jstree-apple .jstree-no-icons a .jstree-icon { display:none; }
+
+.jstree-apple .jstree-search { font-style:italic; }
+
+.jstree-apple .jstree-no-icons .jstree-checkbox { display:inline-block; }
+.jstree-apple .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
+.jstree-apple .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
+.jstree-apple .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
+.jstree-apple .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
+.jstree-apple .jstree-checked > a > .checkbox:hover { background-position:-38px -37px; }
+.jstree-apple .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
+.jstree-apple .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
+
+#vakata-dragged.jstree-apple ins { background:transparent !important; }
+#vakata-dragged.jstree-apple .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
+#vakata-dragged.jstree-apple .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
+#jstree-marker.jstree-apple { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
+
+.jstree-apple a.jstree-search { color:aqua; }
+.jstree-apple .jstree-locked a { color:silver; cursor:default; }
+
+#vakata-contextmenu.jstree-apple-context, 
+#vakata-contextmenu.jstree-apple-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
+#vakata-contextmenu.jstree-apple-context li { }
+#vakata-contextmenu.jstree-apple-context a { color:black; }
+#vakata-contextmenu.jstree-apple-context a:hover, 
+#vakata-contextmenu.jstree-apple-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
+#vakata-contextmenu.jstree-apple-context li.jstree-contextmenu-disabled a, 
+#vakata-contextmenu.jstree-apple-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
+#vakata-contextmenu.jstree-apple-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
+#vakata-contextmenu.jstree-apple-context li ul { margin-left:-4px; }
+
 /* TODO: IE6 support - the `>` selectors */
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/apple/throbber.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/apple/throbber.gif are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/classic/d.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/classic/d.gif are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/classic/d.png and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/classic/d.png are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/classic/dot_for_ie.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/classic/dot_for_ie.gif are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/themes/classic/style.css elefant-elefant_1_3_3_beta/apps/navigation/js/themes/classic/style.css
--- elefant-elefant_1_3_2_beta/apps/navigation/js/themes/classic/style.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/themes/classic/style.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,77 +1,77 @@
-/*
- * jsTree classic theme 1.0
- * Supported features: dots/no-dots, icons/no-icons, focused, loading
- * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
- */
-
-.jstree-classic li, 
-.jstree-classic ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
-.jstree-classic li { background-position:-90px 0; background-repeat:repeat-y;  }
-.jstree-classic li.jstree-last { background:transparent; }
-.jstree-classic .jstree-open > ins { background-position:-72px 0; }
-.jstree-classic .jstree-closed > ins { background-position:-54px 0; }
-.jstree-classic .jstree-leaf > ins { background-position:-36px 0; }
-
-.jstree-classic .jstree-hovered { background:#e7f4f9; border:1px solid #e7f4f9; padding:0 2px 0 1px; }
-.jstree-classic .jstree-clicked { background:navy; border:1px solid navy; padding:0 2px 0 1px; color:white; }
-.jstree-classic a .jstree-icon { background-position:-56px -19px; }
-.jstree-classic .jstree-open > a .jstree-icon { background-position:-56px -36px; }
-.jstree-classic a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
-
-.jstree-classic.jstree-focused { background:white; }
-
-.jstree-classic .jstree-no-dots li, 
-.jstree-classic .jstree-no-dots .jstree-leaf > ins { background:transparent; }
-.jstree-classic .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
-.jstree-classic .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
-
-.jstree-classic .jstree-no-icons a .jstree-icon { display:none; }
-
-.jstree-classic .jstree-search { font-style:italic; }
-
-.jstree-classic .jstree-no-icons .jstree-checkbox { display:inline-block; }
-.jstree-classic .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
-.jstree-classic .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
-.jstree-classic .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
-.jstree-classic .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
-.jstree-classic .jstree-checked > a > .jstree-checkbox:hover { background-position:-38px -37px; }
-.jstree-classic .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
-.jstree-classic .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
-
-#vakata-dragged.jstree-classic ins { background:transparent !important; }
-#vakata-dragged.jstree-classic .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
-#vakata-dragged.jstree-classic .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
-#jstree-marker.jstree-classic { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
-
-.jstree-classic a.jstree-search { color:aqua; }
-.jstree-classic .jstree-locked a { color:silver; cursor:default; }
-
-#vakata-contextmenu.jstree-classic-context, 
-#vakata-contextmenu.jstree-classic-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
-#vakata-contextmenu.jstree-classic-context li { }
-#vakata-contextmenu.jstree-classic-context a { color:black; }
-#vakata-contextmenu.jstree-classic-context a:hover, 
-#vakata-contextmenu.jstree-classic-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
-#vakata-contextmenu.jstree-classic-context li.jstree-contextmenu-disabled a, 
-#vakata-contextmenu.jstree-classic-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
-#vakata-contextmenu.jstree-classic-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
-#vakata-contextmenu.jstree-classic-context li ul { margin-left:-4px; }
-
-/* IE6 BEGIN */
-.jstree-classic li, 
-.jstree-classic ins,
-#vakata-dragged.jstree-classic .jstree-invalid, 
-#vakata-dragged.jstree-classic .jstree-ok, 
-#jstree-marker.jstree-classic { _background-image:url("d.gif"); }
-.jstree-classic .jstree-open ins { _background-position:-72px 0; }
-.jstree-classic .jstree-closed ins { _background-position:-54px 0; }
-.jstree-classic .jstree-leaf ins { _background-position:-36px 0; }
-.jstree-classic .jstree-open a ins.jstree-icon { _background-position:-56px -36px; }
-.jstree-classic .jstree-closed a ins.jstree-icon { _background-position:-56px -19px; }
-.jstree-classic .jstree-leaf a ins.jstree-icon { _background-position:-56px -19px; }
-#vakata-contextmenu.jstree-classic-context ins { _display:none; }
-#vakata-contextmenu.jstree-classic-context li { _zoom:1; }
-.jstree-classic .jstree-undetermined a .jstree-checkbox { _background-position:-20px -19px; }
-.jstree-classic .jstree-checked a .jstree-checkbox { _background-position:-38px -19px; }
-.jstree-classic .jstree-unchecked a .jstree-checkbox { _background-position:-2px -19px; }
+/*
+ * jsTree classic theme 1.0
+ * Supported features: dots/no-dots, icons/no-icons, focused, loading
+ * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
+ */
+
+.jstree-classic li, 
+.jstree-classic ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
+.jstree-classic li { background-position:-90px 0; background-repeat:repeat-y;  }
+.jstree-classic li.jstree-last { background:transparent; }
+.jstree-classic .jstree-open > ins { background-position:-72px 0; }
+.jstree-classic .jstree-closed > ins { background-position:-54px 0; }
+.jstree-classic .jstree-leaf > ins { background-position:-36px 0; }
+
+.jstree-classic .jstree-hovered { background:#e7f4f9; border:1px solid #e7f4f9; padding:0 2px 0 1px; }
+.jstree-classic .jstree-clicked { background:navy; border:1px solid navy; padding:0 2px 0 1px; color:white; }
+.jstree-classic a .jstree-icon { background-position:-56px -19px; }
+.jstree-classic .jstree-open > a .jstree-icon { background-position:-56px -36px; }
+.jstree-classic a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
+
+.jstree-classic.jstree-focused { background:white; }
+
+.jstree-classic .jstree-no-dots li, 
+.jstree-classic .jstree-no-dots .jstree-leaf > ins { background:transparent; }
+.jstree-classic .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
+.jstree-classic .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
+
+.jstree-classic .jstree-no-icons a .jstree-icon { display:none; }
+
+.jstree-classic .jstree-search { font-style:italic; }
+
+.jstree-classic .jstree-no-icons .jstree-checkbox { display:inline-block; }
+.jstree-classic .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
+.jstree-classic .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
+.jstree-classic .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
+.jstree-classic .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
+.jstree-classic .jstree-checked > a > .jstree-checkbox:hover { background-position:-38px -37px; }
+.jstree-classic .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
+.jstree-classic .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
+
+#vakata-dragged.jstree-classic ins { background:transparent !important; }
+#vakata-dragged.jstree-classic .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
+#vakata-dragged.jstree-classic .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
+#jstree-marker.jstree-classic { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
+
+.jstree-classic a.jstree-search { color:aqua; }
+.jstree-classic .jstree-locked a { color:silver; cursor:default; }
+
+#vakata-contextmenu.jstree-classic-context, 
+#vakata-contextmenu.jstree-classic-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
+#vakata-contextmenu.jstree-classic-context li { }
+#vakata-contextmenu.jstree-classic-context a { color:black; }
+#vakata-contextmenu.jstree-classic-context a:hover, 
+#vakata-contextmenu.jstree-classic-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
+#vakata-contextmenu.jstree-classic-context li.jstree-contextmenu-disabled a, 
+#vakata-contextmenu.jstree-classic-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
+#vakata-contextmenu.jstree-classic-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
+#vakata-contextmenu.jstree-classic-context li ul { margin-left:-4px; }
+
+/* IE6 BEGIN */
+.jstree-classic li, 
+.jstree-classic ins,
+#vakata-dragged.jstree-classic .jstree-invalid, 
+#vakata-dragged.jstree-classic .jstree-ok, 
+#jstree-marker.jstree-classic { _background-image:url("d.gif"); }
+.jstree-classic .jstree-open ins { _background-position:-72px 0; }
+.jstree-classic .jstree-closed ins { _background-position:-54px 0; }
+.jstree-classic .jstree-leaf ins { _background-position:-36px 0; }
+.jstree-classic .jstree-open a ins.jstree-icon { _background-position:-56px -36px; }
+.jstree-classic .jstree-closed a ins.jstree-icon { _background-position:-56px -19px; }
+.jstree-classic .jstree-leaf a ins.jstree-icon { _background-position:-56px -19px; }
+#vakata-contextmenu.jstree-classic-context ins { _display:none; }
+#vakata-contextmenu.jstree-classic-context li { _zoom:1; }
+.jstree-classic .jstree-undetermined a .jstree-checkbox { _background-position:-20px -19px; }
+.jstree-classic .jstree-checked a .jstree-checkbox { _background-position:-38px -19px; }
+.jstree-classic .jstree-unchecked a .jstree-checkbox { _background-position:-2px -19px; }
 /* IE6 END */
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/classic/throbber.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/classic/throbber.gif are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default/d.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default/d.gif are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default/d.png and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default/d.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default/style.css elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default/style.css
--- elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default/style.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default/style.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,74 +1,74 @@
-/*
- * jsTree default theme 1.0
- * Supported features: dots/no-dots, icons/no-icons, focused, loading
- * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
- */
-
-.jstree-default li, 
-.jstree-default ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
-.jstree-default li { background-position:-90px 0; background-repeat:repeat-y; }
-.jstree-default li.jstree-last { background:transparent; }
-.jstree-default .jstree-open > ins { background-position:-72px 0; }
-.jstree-default .jstree-closed > ins { background-position:-54px 0; }
-.jstree-default .jstree-leaf > ins { background-position:-36px 0; }
-
-.jstree-default .jstree-hovered { background:#e7f4f9; border:1px solid #d8f0fa; padding:0 2px 0 1px; }
-.jstree-default .jstree-clicked { background:#beebff; border:1px solid #99defd; padding:0 2px 0 1px; }
-.jstree-default a .jstree-icon { background-position:-56px -19px; }
-.jstree-default a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
-
-.jstree-default.jstree-focused { background:#ffffee; }
-
-.jstree-default .jstree-no-dots li, 
-.jstree-default .jstree-no-dots .jstree-leaf > ins { background:transparent; }
-.jstree-default .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
-.jstree-default .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
-
-.jstree-default .jstree-no-icons a .jstree-icon { display:none; }
-
-.jstree-default .jstree-search { font-style:italic; }
-
-.jstree-default .jstree-no-icons .jstree-checkbox { display:inline-block; }
-.jstree-default .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
-.jstree-default .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
-.jstree-default .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
-.jstree-default .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
-.jstree-default .jstree-checked > a > .jstree-checkbox:hover { background-position:-38px -37px; }
-.jstree-default .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
-.jstree-default .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
-
-#vakata-dragged.jstree-default ins { background:transparent !important; }
-#vakata-dragged.jstree-default .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
-#vakata-dragged.jstree-default .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
-#jstree-marker.jstree-default { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
-
-.jstree-default a.jstree-search { color:aqua; }
-.jstree-default .jstree-locked a { color:silver; cursor:default; }
-
-#vakata-contextmenu.jstree-default-context, 
-#vakata-contextmenu.jstree-default-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
-#vakata-contextmenu.jstree-default-context li { }
-#vakata-contextmenu.jstree-default-context a { color:black; }
-#vakata-contextmenu.jstree-default-context a:hover, 
-#vakata-contextmenu.jstree-default-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
-#vakata-contextmenu.jstree-default-context li.jstree-contextmenu-disabled a, 
-#vakata-contextmenu.jstree-default-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
-#vakata-contextmenu.jstree-default-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
-#vakata-contextmenu.jstree-default-context li ul { margin-left:-4px; }
-
-/* IE6 BEGIN */
-.jstree-default li, 
-.jstree-default ins,
-#vakata-dragged.jstree-default .jstree-invalid, 
-#vakata-dragged.jstree-default .jstree-ok, 
-#jstree-marker.jstree-default { _background-image:url("d.gif"); }
-.jstree-default .jstree-open ins { _background-position:-72px 0; }
-.jstree-default .jstree-closed ins { _background-position:-54px 0; }
-.jstree-default .jstree-leaf ins { _background-position:-36px 0; }
-.jstree-default a ins.jstree-icon { _background-position:-56px -19px; }
-#vakata-contextmenu.jstree-default-context ins { _display:none; }
-#vakata-contextmenu.jstree-default-context li { _zoom:1; }
-.jstree-default .jstree-undetermined a .jstree-checkbox { _background-position:-20px -19px; }
-.jstree-default .jstree-checked a .jstree-checkbox { _background-position:-38px -19px; }
-.jstree-default .jstree-unchecked a .jstree-checkbox { _background-position:-2px -19px; }
+/*
+ * jsTree default theme 1.0
+ * Supported features: dots/no-dots, icons/no-icons, focused, loading
+ * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
+ */
+
+.jstree-default li, 
+.jstree-default ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
+.jstree-default li { background-position:-90px 0; background-repeat:repeat-y; }
+.jstree-default li.jstree-last { background:transparent; }
+.jstree-default .jstree-open > ins { background-position:-72px 0; }
+.jstree-default .jstree-closed > ins { background-position:-54px 0; }
+.jstree-default .jstree-leaf > ins { background-position:-36px 0; }
+
+.jstree-default .jstree-hovered { background:#e7f4f9; border:1px solid #d8f0fa; padding:0 2px 0 1px; }
+.jstree-default .jstree-clicked { background:#beebff; border:1px solid #99defd; padding:0 2px 0 1px; }
+.jstree-default a .jstree-icon { background-position:-56px -19px; }
+.jstree-default a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
+
+.jstree-default.jstree-focused { background:#ffffee; }
+
+.jstree-default .jstree-no-dots li, 
+.jstree-default .jstree-no-dots .jstree-leaf > ins { background:transparent; }
+.jstree-default .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
+.jstree-default .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
+
+.jstree-default .jstree-no-icons a .jstree-icon { display:none; }
+
+.jstree-default .jstree-search { font-style:italic; }
+
+.jstree-default .jstree-no-icons .jstree-checkbox { display:inline-block; }
+.jstree-default .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
+.jstree-default .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
+.jstree-default .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
+.jstree-default .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
+.jstree-default .jstree-checked > a > .jstree-checkbox:hover { background-position:-38px -37px; }
+.jstree-default .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
+.jstree-default .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
+
+#vakata-dragged.jstree-default ins { background:transparent !important; }
+#vakata-dragged.jstree-default .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
+#vakata-dragged.jstree-default .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
+#jstree-marker.jstree-default { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
+
+.jstree-default a.jstree-search { color:aqua; }
+.jstree-default .jstree-locked a { color:silver; cursor:default; }
+
+#vakata-contextmenu.jstree-default-context, 
+#vakata-contextmenu.jstree-default-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
+#vakata-contextmenu.jstree-default-context li { }
+#vakata-contextmenu.jstree-default-context a { color:black; }
+#vakata-contextmenu.jstree-default-context a:hover, 
+#vakata-contextmenu.jstree-default-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
+#vakata-contextmenu.jstree-default-context li.jstree-contextmenu-disabled a, 
+#vakata-contextmenu.jstree-default-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
+#vakata-contextmenu.jstree-default-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
+#vakata-contextmenu.jstree-default-context li ul { margin-left:-4px; }
+
+/* IE6 BEGIN */
+.jstree-default li, 
+.jstree-default ins,
+#vakata-dragged.jstree-default .jstree-invalid, 
+#vakata-dragged.jstree-default .jstree-ok, 
+#jstree-marker.jstree-default { _background-image:url("d.gif"); }
+.jstree-default .jstree-open ins { _background-position:-72px 0; }
+.jstree-default .jstree-closed ins { _background-position:-54px 0; }
+.jstree-default .jstree-leaf ins { _background-position:-36px 0; }
+.jstree-default a ins.jstree-icon { _background-position:-56px -19px; }
+#vakata-contextmenu.jstree-default-context ins { _display:none; }
+#vakata-contextmenu.jstree-default-context li { _zoom:1; }
+.jstree-default .jstree-undetermined a .jstree-checkbox { _background-position:-20px -19px; }
+.jstree-default .jstree-checked a .jstree-checkbox { _background-position:-38px -19px; }
+.jstree-default .jstree-unchecked a .jstree-checkbox { _background-position:-2px -19px; }
 /* IE6 END */
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default/throbber.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default/throbber.gif are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default-rtl/d.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default-rtl/d.gif are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default-rtl/d.png and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default-rtl/d.png are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default-rtl/dots.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default-rtl/dots.gif are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default-rtl/style.css elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default-rtl/style.css
--- elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default-rtl/style.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default-rtl/style.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,84 +1,84 @@
-/*
- * jsTree default-rtl theme 1.0
- * Supported features: dots/no-dots, icons/no-icons, focused, loading
- * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
- */
-
-.jstree-default-rtl li, 
-.jstree-default-rtl ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
-.jstree-default-rtl li { background-position:-90px 0; background-repeat:repeat-y; }
-.jstree-default-rtl li.jstree-last { background:transparent; }
-.jstree-default-rtl .jstree-open > ins { background-position:-72px 0; }
-.jstree-default-rtl .jstree-closed > ins { background-position:-54px 0; }
-.jstree-default-rtl .jstree-leaf > ins { background-position:-36px 0; }
-
-.jstree-default-rtl .jstree-hovered { background:#e7f4f9; border:1px solid #d8f0fa; padding:0 2px 0 1px; }
-.jstree-default-rtl .jstree-clicked { background:#beebff; border:1px solid #99defd; padding:0 2px 0 1px; }
-.jstree-default-rtl a .jstree-icon { background-position:-56px -19px; }
-.jstree-default-rtl a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
-
-.jstree-default-rtl.jstree-focused { background:#ffffee; }
-
-.jstree-default-rtl .jstree-no-dots li, 
-.jstree-default-rtl .jstree-no-dots .jstree-leaf > ins { background:transparent; }
-.jstree-default-rtl .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
-.jstree-default-rtl .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
-
-.jstree-default-rtl .jstree-no-icons a .jstree-icon { display:none; }
-
-.jstree-default-rtl .jstree-search { font-style:italic; }
-
-.jstree-default-rtl .jstree-no-icons .jstree-checkbox { display:inline-block; }
-.jstree-default-rtl .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
-.jstree-default-rtl .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
-.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
-.jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
-.jstree-default-rtl .jstree-checked > a > .jstree-checkbox:hover { background-position:-38px -37px; }
-.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
-.jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
-
-#vakata-dragged.jstree-default-rtl ins { background:transparent !important; }
-#vakata-dragged.jstree-default-rtl .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
-#vakata-dragged.jstree-default-rtl .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
-#jstree-marker.jstree-default-rtl { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
-
-.jstree-default-rtl a.jstree-search { color:aqua; }
-.jstree-default-rtl .jstree-locked a { color:silver; cursor:default; }
-
-#vakata-contextmenu.jstree-default-rtl-context, 
-#vakata-contextmenu.jstree-default-rtl-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
-#vakata-contextmenu.jstree-default-rtl-context li { }
-#vakata-contextmenu.jstree-default-rtl-context a { color:black; }
-#vakata-contextmenu.jstree-default-rtl-context a:hover, 
-#vakata-contextmenu.jstree-default-rtl-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
-#vakata-contextmenu.jstree-default-rtl-context li.jstree-contextmenu-disabled a, 
-#vakata-contextmenu.jstree-default-rtl-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
-#vakata-contextmenu.jstree-default-rtl-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
-#vakata-contextmenu.jstree-default-rtl-context li ul { margin-left:-4px; }
-
-/* IE6 BEGIN */
-.jstree-default-rtl li, 
-.jstree-default-rtl ins,
-#vakata-dragged.jstree-default-rtl .jstree-invalid, 
-#vakata-dragged.jstree-default-rtl .jstree-ok, 
-#jstree-marker.jstree-default-rtl { _background-image:url("d.gif"); }
-.jstree-default-rtl .jstree-open ins { _background-position:-72px 0; }
-.jstree-default-rtl .jstree-closed ins { _background-position:-54px 0; }
-.jstree-default-rtl .jstree-leaf ins { _background-position:-36px 0; }
-.jstree-default-rtl a ins.jstree-icon { _background-position:-56px -19px; }
-#vakata-contextmenu.jstree-default-rtl-context ins { _display:none; }
-#vakata-contextmenu.jstree-default-rtl-context li { _zoom:1; }
-.jstree-default-rtl .jstree-undetermined a .jstree-checkbox { _background-position:-18px -19px; }
-.jstree-default-rtl .jstree-checked a .jstree-checkbox { _background-position:-36px -19px; }
-.jstree-default-rtl .jstree-unchecked a .jstree-checkbox { _background-position:0px -19px; }
-/* IE6 END */
-
-/* RTL part */
-.jstree-default-rtl .jstree-hovered, .jstree-default-rtl .jstree-clicked { padding:0 1px 0 2px; }
-.jstree-default-rtl li { background-image:url("dots.gif"); background-position: 100% 0px; }
-.jstree-default-rtl .jstree-checked > a > .jstree-checkbox { background-position:-36px -19px; margin-left:2px; }
-.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox { background-position:0px -19px; margin-left:2px; }
-.jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox { background-position:-18px -19px; margin-left:2px; }
-.jstree-default-rtl .jstree-checked > a > .jstree-checkbox:hover { background-position:-36px -37px; }
-.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox:hover { background-position:0px -37px; }
+/*
+ * jsTree default-rtl theme 1.0
+ * Supported features: dots/no-dots, icons/no-icons, focused, loading
+ * Supported plugins: ui (hovered, clicked), checkbox, contextmenu, search
+ */
+
+.jstree-default-rtl li, 
+.jstree-default-rtl ins { background-image:url("d.png"); background-repeat:no-repeat; background-color:transparent; }
+.jstree-default-rtl li { background-position:-90px 0; background-repeat:repeat-y; }
+.jstree-default-rtl li.jstree-last { background:transparent; }
+.jstree-default-rtl .jstree-open > ins { background-position:-72px 0; }
+.jstree-default-rtl .jstree-closed > ins { background-position:-54px 0; }
+.jstree-default-rtl .jstree-leaf > ins { background-position:-36px 0; }
+
+.jstree-default-rtl .jstree-hovered { background:#e7f4f9; border:1px solid #d8f0fa; padding:0 2px 0 1px; }
+.jstree-default-rtl .jstree-clicked { background:#beebff; border:1px solid #99defd; padding:0 2px 0 1px; }
+.jstree-default-rtl a .jstree-icon { background-position:-56px -19px; }
+.jstree-default-rtl a.jstree-loading .jstree-icon { background:url("throbber.gif") center center no-repeat !important; }
+
+.jstree-default-rtl.jstree-focused { background:#ffffee; }
+
+.jstree-default-rtl .jstree-no-dots li, 
+.jstree-default-rtl .jstree-no-dots .jstree-leaf > ins { background:transparent; }
+.jstree-default-rtl .jstree-no-dots .jstree-open > ins { background-position:-18px 0; }
+.jstree-default-rtl .jstree-no-dots .jstree-closed > ins { background-position:0 0; }
+
+.jstree-default-rtl .jstree-no-icons a .jstree-icon { display:none; }
+
+.jstree-default-rtl .jstree-search { font-style:italic; }
+
+.jstree-default-rtl .jstree-no-icons .jstree-checkbox { display:inline-block; }
+.jstree-default-rtl .jstree-no-checkboxes .jstree-checkbox { display:none !important; }
+.jstree-default-rtl .jstree-checked > a > .jstree-checkbox { background-position:-38px -19px; }
+.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox { background-position:-2px -19px; }
+.jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox { background-position:-20px -19px; }
+.jstree-default-rtl .jstree-checked > a > .jstree-checkbox:hover { background-position:-38px -37px; }
+.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox:hover { background-position:-2px -37px; }
+.jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-20px -37px; }
+
+#vakata-dragged.jstree-default-rtl ins { background:transparent !important; }
+#vakata-dragged.jstree-default-rtl .jstree-ok { background:url("d.png") -2px -53px no-repeat !important; }
+#vakata-dragged.jstree-default-rtl .jstree-invalid { background:url("d.png") -18px -53px no-repeat !important; }
+#jstree-marker.jstree-default-rtl { background:url("d.png") -41px -57px no-repeat !important; text-indent:-100px; }
+
+.jstree-default-rtl a.jstree-search { color:aqua; }
+.jstree-default-rtl .jstree-locked a { color:silver; cursor:default; }
+
+#vakata-contextmenu.jstree-default-rtl-context, 
+#vakata-contextmenu.jstree-default-rtl-context li ul { background:#f0f0f0; border:1px solid #979797; -moz-box-shadow: 1px 1px 2px #999; -webkit-box-shadow: 1px 1px 2px #999; box-shadow: 1px 1px 2px #999; }
+#vakata-contextmenu.jstree-default-rtl-context li { }
+#vakata-contextmenu.jstree-default-rtl-context a { color:black; }
+#vakata-contextmenu.jstree-default-rtl-context a:hover, 
+#vakata-contextmenu.jstree-default-rtl-context .vakata-hover > a { padding:0 5px; background:#e8eff7; border:1px solid #aecff7; color:black; -moz-border-radius:2px; -webkit-border-radius:2px; border-radius:2px; }
+#vakata-contextmenu.jstree-default-rtl-context li.jstree-contextmenu-disabled a, 
+#vakata-contextmenu.jstree-default-rtl-context li.jstree-contextmenu-disabled a:hover { color:silver; background:transparent; border:0; padding:1px 4px; }
+#vakata-contextmenu.jstree-default-rtl-context li.vakata-separator { background:white; border-top:1px solid #e0e0e0; margin:0; }
+#vakata-contextmenu.jstree-default-rtl-context li ul { margin-left:-4px; }
+
+/* IE6 BEGIN */
+.jstree-default-rtl li, 
+.jstree-default-rtl ins,
+#vakata-dragged.jstree-default-rtl .jstree-invalid, 
+#vakata-dragged.jstree-default-rtl .jstree-ok, 
+#jstree-marker.jstree-default-rtl { _background-image:url("d.gif"); }
+.jstree-default-rtl .jstree-open ins { _background-position:-72px 0; }
+.jstree-default-rtl .jstree-closed ins { _background-position:-54px 0; }
+.jstree-default-rtl .jstree-leaf ins { _background-position:-36px 0; }
+.jstree-default-rtl a ins.jstree-icon { _background-position:-56px -19px; }
+#vakata-contextmenu.jstree-default-rtl-context ins { _display:none; }
+#vakata-contextmenu.jstree-default-rtl-context li { _zoom:1; }
+.jstree-default-rtl .jstree-undetermined a .jstree-checkbox { _background-position:-18px -19px; }
+.jstree-default-rtl .jstree-checked a .jstree-checkbox { _background-position:-36px -19px; }
+.jstree-default-rtl .jstree-unchecked a .jstree-checkbox { _background-position:0px -19px; }
+/* IE6 END */
+
+/* RTL part */
+.jstree-default-rtl .jstree-hovered, .jstree-default-rtl .jstree-clicked { padding:0 1px 0 2px; }
+.jstree-default-rtl li { background-image:url("dots.gif"); background-position: 100% 0px; }
+.jstree-default-rtl .jstree-checked > a > .jstree-checkbox { background-position:-36px -19px; margin-left:2px; }
+.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox { background-position:0px -19px; margin-left:2px; }
+.jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox { background-position:-18px -19px; margin-left:2px; }
+.jstree-default-rtl .jstree-checked > a > .jstree-checkbox:hover { background-position:-36px -37px; }
+.jstree-default-rtl .jstree-unchecked > a > .jstree-checkbox:hover { background-position:0px -37px; }
 .jstree-default-rtl .jstree-undetermined > a > .jstree-checkbox:hover { background-position:-18px -37px; }
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/js/themes/default-rtl/throbber.gif and elefant-elefant_1_3_3_beta/apps/navigation/js/themes/default-rtl/throbber.gif are identical
Binary files elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/closedhand.cur and elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/closedhand.cur differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/collapsed.png and elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/collapsed.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/cursorGrab.png and elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/cursorGrab.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png and elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/expanded.png and elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/expanded.png differ
Binary files elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/openhand.cur and elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/openhand.cur differ
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css
--- elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,92 @@
+/* CSS Document */
+
+
+.treeDragDrop{
+	-moz-user-select: none; 
+	-khtml-user-select: none; 
+    -webkit-user-select: none; 
+    -o-user-select: none; 
+	font-family: 'Helvetica Neue', Arial, 'Liberation Sans', FreeSans, sans-serif;
+}
+
+.treeDragDrop .tdd-trashbin{
+	border:dashed #999 1px;
+	min-height:44px;
+	padding:10px;
+}
+
+.treeDragDrop .tdd-tree{
+	border:solid #999 1px;
+	min-height:44px;
+	padding:10px;
+}
+
+
+
+.treeDragDrop ul, .tdd-dragContainer ul{
+	margin:0;
+	padding:0;
+}
+
+.treeDragDrop li, .tdd-dragContainer li{
+	list-style:none;
+	margin:0;
+	padding:10px 10px 10px 25px;
+	border:solid #ddd 1px;
+	border-top: 0px;
+	font-size:13px;
+	line-height:20px;
+	display:block;
+	cursor:move;
+}
+
+.treeDragDrop li:first-child, .tdd-dragContainer li:first-child {
+	border-top: 1px solid #ddd;
+}
+
+body:not(.cursorGrabbing) .treeDragDrop li, .tdd-dragContainer li{
+	cursor: url(cursorGrab.png), move;
+}
+
+.treeDragDrop li.tdd-collapsed{
+	background: url(collapsed.png) no-repeat 8px 10px;
+}
+
+.treeDragDrop li.tdd-expanded{
+	background: url(expanded.png) no-repeat 8px 10px;
+}
+
+.treeDragDrop .tdd-after, .treeDragDrop .tdd-before, .treeDragDrop .tdd-append{
+	height:6px;
+	margin:0;
+	/* border:solid #E4426B 1px; */
+	background:#93278f;
+	width:100px;
+}
+
+.tdd-selected{
+	opacity:0.4
+}
+
+.tdd-dragContainer{
+	position:absolute;
+	z-index:999;
+}
+
+li.ui-draggable-dragging, .ui-draggable-dragging li{
+	list-style:none;
+}
+
+body.cursorGrabbing{
+	cursor: url(cursorGrabbing.png), move;
+}
+
+.treeDragDrop .tdd-tree i{
+	cursor: pointer;
+}
+
+
+.treeDragDrop .tdd-tree i:hover{
+	color:#93278f;
+}
+
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js
--- elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,6 @@
+/*! jQuery UI - v1.9.1 - 2012-11-22
+* http://jqueryui.com
+* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.datepicker.js
+* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
+
+(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){e.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/tree-drag-drop.js elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/tree-drag-drop.js
--- elefant-elefant_1_3_2_beta/apps/navigation/js/tree-drag-drop/tree-drag-drop.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/js/tree-drag-drop/tree-drag-drop.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,362 @@
+/*global window, $, jQuery*/
+
+if (typeof String.prototype.trim !== 'function') {
+	String.prototype.trim = function () {
+		"use strict";
+		return this.replace(/^\s+|\s+$/g, '');
+	};
+}
+
+(function ($, undef) {
+	"use strict";
+
+	$.treeDragDrop = {
+		
+		defaults: {			
+			selectedClass: "tdd-selected",
+			collapsedClass: "tdd-collapsed",
+			expandedClass: "tdd-expanded",
+			beforeClass: "tdd-before", 
+			afterClass: "tdd-after",
+			cursorGrabbingUrl: null,
+			inFolderThreshhold: 100,
+			cursorAt: {left: 10, top: -40}, 
+			dragContainer: $('<div class="tdd-dragContainer" />'),			
+			marker: $('<div />'),
+			attributes: ["id", "class"],
+			getUrl: null,
+			updateUrl: null		
+		}		
+	};	
+	
+	
+	// helpers
+	
+	function debug(txt) {
+		if (window.console && window.console.log) {
+			window.console.log(txt);
+		}
+	}
+			
+	function getContext(el) {
+		return el.closest(".treeDragDrop");
+	}
+	
+	function getOptions(el) {
+		return el.closest(".treeDragDrop").data("options");
+	}
+	
+	function serializeTree(el, ctx) {
+		var data = [],
+			intestingAttr = getOptions(el).attributes;
+		
+		el.children("li").each(function (index, value) {			
+			var obj = {},
+				attr = {};
+						
+			obj.data = $(value).clone().children().remove().end().text().trim();
+			$.each(intestingAttr, function (index, attribute) {
+				
+				if ($(value).attr(attribute) !== undef || attribute === "class") {
+					if (attribute === "class") {						
+						if ($(value).children("i").attr(attribute) !== undef) {
+							attr.classname = $(value).children("i").attr(attribute);
+							debug("serializeTree: attr.classname " + attr.classname);
+						}						
+					} else {
+						attr[attribute] = $(value).attr(attribute);
+					}
+				}
+			});			
+			obj.attr = attr;								
+			if ($(value).children("ul").length > 0) {
+				obj.children = serializeTree($(value).children("ul"));
+			}			
+			data.push(obj);
+		});	
+		
+		return data;
+	}
+		
+	function sendTree(tree, updateUrl) {
+		var ajaxData, 
+			treeData = serializeTree(tree);
+		
+		debug(treeData);		
+		if (updateUrl !== null) {
+			ajaxData = {tree: treeData};
+			$.post(updateUrl, ajaxData, function (res) {
+				//console.log (res.data.msg);
+				//TODO: error handling
+				return true;
+			});
+		}	
+	}
+	
+	function updateFolderIcons(ctx, options) {
+		debug("updateFolderIcons:");
+		
+		//debug($("li:not(>ul)", ctx).length);
+		//debug($("li>ul", ctx).length);
+		//debug($("li", ctx).length);
+		
+		$("li:not(:has(ul))", ctx).children("i").removeClass(options.expandedClass).removeClass(options.collapsedClass);
+		$("li>ul", ctx).siblings("i:not(." + options.collapsedClass + ")").addClass(options.expandedClass);
+	}
+	// handlers	
+		
+	$.treeDragDrop.handlers = {
+				
+		handleDraggableStart: function (e, o) {			
+			debug("handleDraggableStart");	
+			var options = getOptions($(e.target));			
+			$(e.target).addClass(getOptions($(e.target)).selectedClass);
+			document.onmousemove = function () {
+				return false;
+			};	
+			
+			$("body").css("cursor", "url(" + options.cursorGrabbingUrl + ") , move").addClass("cursorGrabbing");
+		},
+		
+		handleDraggableDrag: function (e, o) {
+			debug("handleDraggableDrag");						
+		},
+		
+		handleDraggableStop: function (e, o) {
+			debug("handleDraggableStop");
+			
+			var ctx = getContext($(e.target)),
+				options = getOptions($(e.target)),			
+				tree = $(".tdd-tree", ctx);			
+			// remove the mousemove Listener			
+			$("li, .tdd-tree", ctx).unbind("mousemove").removeClass(options.selectedClass);
+			
+			// build the array and post the ajax
+			debug("handleDraggableStop: sendTree");
+			sendTree(tree, options.updateUrl);
+			
+			$("body").removeClass("cursorGrabbing").css("cursor", "auto");
+		},
+		
+		handleDroppableOut: function (e, o) {
+			$(e.target).unbind("mousemove");						
+		},
+		
+		handleDroppableOver: function (e, o) {
+			debug("handleDroppableOver");
+			var	options = getOptions($(e.target)),
+				selectedClass = options.selectedClass,
+				beforeClass = options.beforeClass,
+				afterClass = options.afterClass,
+				marker = options.marker;		
+			
+			if ($(e.target).is("li")) {
+				// bind MouseMove to the item to check if the draggable should be appended or placed before or after the item 
+				$(e.target).bind("mousemove", function (mme) {
+					
+					var target = $(mme.target),						
+						x = mme.pageX - $(mme.target).offset().left,
+						y = mme.pageY - $(mme.target).offset().top,
+						threshhold = options.inFolderThreshhold;
+					
+					// threshhold for apending or placing before/ater
+					// will grow according to the deepness of nesting
+					
+					if (target.find("ul").length !== 0) {
+						threshhold = Math.min(options.inFolderThreshhold * (target.find("ul").length + 1), target.width() * 0.75);
+					}
+					
+					marker.removeClass(beforeClass, afterClass);
+										
+					// prevent dropping items in itself
+					if (target.hasClass(selectedClass) || target.parents("." + selectedClass).length !== 0) {
+						marker.detach();
+					} else if (target.parents(".tdd-trashbin").length !== 0) {						
+						target.parents(".tdd-trashbin").append(marker);						
+					} else {
+						// append to item
+						if (x > threshhold) {							
+							// append to ul if there is one
+							if (target.is("li") && target.children("ul").length !== 0) {
+								target.children("ul").append(marker);
+							} else if (target.is("li")) {
+								target.append(marker);
+							}
+						// place before item	
+						} else if (y < target.height() / 2) {
+							marker.addClass(beforeClass);
+							target.before(marker);
+						// place after item
+						} else {
+							marker.addClass(afterClass);
+							target.after(marker);
+						}
+					}
+							
+					//e.stopImmediatePropagation();
+				});
+							
+			// if tree is empty items may be put in the ul 
+			//} else if ($(e.target).hasClass("tdd-tree")/* && $(".tdd-tree").children().length === 0 */) {
+			} else if ($(e.target).hasClass("tdd-tree")) {
+				debug("tree");
+				marker.removeClass(beforeClass, afterClass);
+				marker.addClass(beforeClass);
+				$(e.target).append(marker);
+			} else if ($(e.target).hasClass("tdd-trashbin")) {
+				debug("trashbin");
+				$(e.target).append(marker);
+			}
+			
+			//e.stopImmediatePropagation();		
+		},
+		
+		handleDroppableDrop: function (e, o) {
+			debug("handleDroppableDrop");
+			
+			var	draggable = $(o.draggable),
+				dropable = $(e.target),
+				marker = $.treeDragDrop.defaults.marker,
+				ctx = draggable.data("tddCtx"),
+				options = ctx.data("options");
+				
+			// remove selection	
+			draggable.removeClass(options.selectedClass);
+			
+			// if its the trashbin put them all next to each other (no nesting)
+			if (dropable.parents(".tdd-trashbin").length !== 0 || dropable.hasClass("tdd-trashbin")) {
+				$(".tdd-trashbin").append(draggable);	
+				$("li", draggable).each(function (index, value) {
+					$(".tdd-trashbin").append(value);
+				});				
+				
+			// put the item directly in the tree ul if it contains no other element	
+			} else if (dropable.hasClass("tdd-tree") && $(".tdd-tree").children().length === 0) {
+				$(".tdd-tree").append(draggable);
+			// otherwise put it before the marker, which will be detached asap
+			} else {				
+				marker.before(draggable);				
+				if (draggable.parent().is("li")) {					
+					draggable.wrap("<ul></ul>");				
+				}
+			}			
+			marker.detach();
+			//clean up empty uls if its not the tree or trashbin
+			$("ul", ctx).not(".tdd-trashbin, .tdd-tree").each(function () {
+				if ($(this).children().length === 0) {
+					debug($(this));
+					$(this).remove();					
+				}
+			});	
+			// adjust expand/collapse icons 
+			
+			updateFolderIcons(ctx, options);
+		},
+		
+		
+		// toggle expand/collapse
+		handleClick: function (e) {
+			
+			if ($("body").hasClass("cursorGrabbing")) {
+				e.stopImmediatePropagation();
+				return false;
+			}
+			
+			var target = $(e.target),
+				ctx = getContext($(e.target)),
+				tree = $(".tdd-tree", ctx),
+				options = getOptions($(e.target)),
+				collapsed = options.collapsedClass,
+				expanded = options.expandedClass;
+			
+			
+			if (target.siblings("ul").length === 0) {				
+				return false;				
+			} else {			
+				if (target.hasClass(collapsed)) {
+					target.removeClass(collapsed).addClass(expanded);					
+					target.siblings("ul").show();					
+				} else {
+					target.removeClass(expanded).addClass(collapsed);	
+					target.siblings("ul").hide();
+				}
+			}	
+			
+			//debug("handleClick: target " +target);
+			//debug(target);
+			//debug("handleClick: sendTree ");
+			sendTree(tree, options.updateUrl);						
+			e.stopImmediatePropagation();
+		}
+	};
+	
+	
+	// the Prototype
+		
+	$.fn.treeDragDrop = function (options) {
+		
+		//extend the global default with the options for the element
+		options = $.extend({}, $.treeDragDrop.defaults, options);
+						
+		return this.each(function () {
+			var ctx = $(this),
+				data = ctx.data('treeDragDrop');
+			
+			// init the element
+			if (!data) {	
+				$("li", ctx).draggable({ 
+					addClasses: false,
+					cursorAt:  $.treeDragDrop.defaults.cursorAt,
+					helper: "clone",
+					appendTo: "body",
+					opacity: 0.2,
+					delay: 10,
+					//create: $.treeDragDrop.handlers.handleDraggableCreate,
+					start: $.treeDragDrop.handlers.handleDraggableStart,
+					//drag: $.treeDragDrop.handlers.handleDraggableDrag,
+					stop: $.treeDragDrop.handlers.handleDraggableStop
+				}).droppable({
+					addClasses: false,
+					greedy: false,
+					tolerance: "pointer",
+					drop: $.treeDragDrop.handlers.handleDroppableDrop,
+					over: $.treeDragDrop.handlers.handleDroppableOver,
+					out: $.treeDragDrop.handlers.handleDroppableOut
+					
+				}).bind("onselectstart", function () { 
+					return false;
+				//}).attr("unselectable", "on").data("tddCtx", ctx).has("ul").children("i").addClass(options.expandedClass);
+				}).attr("unselectable", "on").data("tddCtx", ctx);
+				
+				$(".tdd-tree, .tdd-trashbin", ctx).droppable({
+					addClasses: false,				
+					tolerance: "pointer",
+					drop: $.treeDragDrop.handlers.handleDroppableDrop,
+					over: $.treeDragDrop.handlers.handleDroppableOver,
+					out: $.treeDragDrop.handlers.handleDroppableOut				
+				}).bind("onselectstart", function () {return false; }).attr("unselectable", "on");
+				
+				$(".tdd-tree i", ctx).bind("click", $.treeDragDrop.handlers.handleClick);
+				updateFolderIcons(ctx, options);
+				$(".tdd-tree i." + options.collapsedClass, ctx).siblings("ul").hide();
+				
+				$.treeDragDrop.defaults.marker.bind("mousemove", function () { return false; });
+				$.treeDragDrop.defaults.marker.bind("mouseover", function () { return false; });
+				
+			
+				ctx.data('options',  options);											
+				ctx.data('treeDragDrop', {inited: true});				
+			}				
+		});
+	};
+	
+}(jQuery));
+
+
+$('.treeDragDrop').treeDragDrop({
+	collapsedClass: "icon-folder-close", 
+	expandedClass: "icon-folder-open", 
+	updateUrl: "/navigation/api/update",
+	cursorGrabbingUrl: ($.browser.msie) ? "/apps/navigation/js/tree-drag-drop/css/closedhand.cur" : "/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png"
+}); 
+
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/lib/Functions.php elefant-elefant_1_3_3_beta/apps/navigation/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/navigation/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -18,13 +18,13 @@
 	echo '<ul>';
 	foreach ($tree as $item) {
 		if ($item->attr->id == $path[count ($path) - 1]) {
-			printf ('<li class="current"><a href="/%s">%s</a>', $item->attr->id, $item->data);
+			echo '<li class="current">' . Link::make ($item->attr->id, $item->data);
 			if (isset ($item->children)) {
 				navigation_print_context ($item->children, $path);
 			}
 			echo '</li>';
 		} elseif (in_array ($item->attr->id, $path)) {
-			printf ('<li class="parent"><a href="/%s">%s</a>', $item->attr->id, $item->data);
+			echo '<li class="parent">' . Link::make ($item->attr->id, $item->data);
 			if (isset ($item->children)) {
 				navigation_print_context ($item->children, $path);
 			}
@@ -37,12 +37,48 @@
 }
 
 /**
+ * Print the full site tree as an HTML list.
+ */
+function navigation_print_level ($tree) {
+	echo '<ul>';
+	foreach ($tree as $item) {
+		echo '<li>' . Link::make ($item->attr->id, $item->data);
+		if (isset ($item->children)) {
+			navigation_print_level ($item->children);
+		}
+		echo '</li>';
+	}
+	echo '</ul>';
+}
+
+/**
+ * Prints the site tree for the navigation/dropmenu handler.
+ */
+function navigation_print_dropmenu ($tree, $id = false) {
+	if ($id) {
+		echo '<ul id="' . $id . '" class="dropmenu">';
+	} else {
+		echo '<ul class="dropmenu">';
+	}
+
+	foreach ($tree as $item) {
+		echo '<li>' . Link::make ($item->attr->id, $item->data);
+		if (isset ($item->children)) {
+			navigation_print_level ($item->children);
+		}
+		echo '</li>';
+	}
+	echo '</ul>';
+}
+
+/**
  * Clears all cache keys for the navigation app.
  */
 function navigation_clear_cache () {
 	global $cache;
 	$cache->delete ('_navigation_top');
-	$cache->delete ('navigation_map');
+	$cache->delete ('_c_navigation_map');
+	$cache->delete ('_c_navigation_dropmenu');
 }
 
 /**
@@ -50,7 +86,7 @@
  */
 function navigation_get_other_pages ($ids) {
 	$pages = array ();
-	$res = DB::fetch ('select id, title, menu_title from webpage where access = "public"');
+	$res = DB::fetch ('select id, title, menu_title from #prefix#webpage where access = "public"');
 	foreach ($res as $p) {
 		if (in_array ($p->id, $ids)) {
 			// skip if in tree
@@ -65,4 +101,17 @@
 	return $pages;
 }
 
+function navigation_print_admin_tree ($tree, $tree_root=true) {
+	echo ($tree_root) ?'<ul class="tdd-tree">' : "<ul>";
+	foreach ($tree as $item) {
+		printf ('<li id="%s"><i class="%s"></i> %s', $item->attr->id, $item->attr->classname,  $item->data);
+		if (isset ($item->children)) {
+			navigation_print_admin_tree ($item->children, false);
+		}
+		echo '</li>';
+	}
+	echo '</ul>';
+}
+
+
 ?>
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/lib/Link.php elefant-elefant_1_3_3_beta/apps/navigation/lib/Link.php
--- elefant-elefant_1_3_2_beta/apps/navigation/lib/Link.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/navigation/lib/Link.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,218 @@
+<?php
+
+/**
+ * Generate correct links for site navigation, based on the
+ * various combinations of `page_url_style`, `multilingual`,
+ * `negotiation_method`, and the currently active page.
+ *
+ * Usage:
+ *
+ *     <?php
+ *     
+ *     $nav = Link::nav ();
+ *     
+ *     echo '<ul>';
+ *     foreach ($nav->tree as $item) {
+ *         echo Link::single ($item->attr->id, $item->data);
+ *     }
+ *     echo '</ul>';
+ *     
+ *     ?>
+ */
+class Link {
+	protected static $url_style = null;
+
+	protected static $multilingual = null;
+
+	protected static $negotiation_method = null;
+
+	protected static $nav = null;
+
+	protected static $i18n = null;
+
+	protected static $current = null;
+
+	protected static $active = null;
+
+	/**
+	 * Reset the internal state of the class.
+	 */
+	public static function reset () {
+		self::$url_style = null;
+		self::$multilingual = null;
+		self::$negotiation_method = null;
+		self::$nav = null;
+		self::$i18n = null;
+		self::$current = null;
+		self::$active = null;
+	}
+
+	/**
+	 * Gets or sets the URL style (nested or flat).
+	 */
+	public static function url_style ($url_style = null) {
+		if ($url_style !== null) {
+			self::$url_style = $url_style;
+		}
+		if (self::$url_style === null) {
+			self::$url_style = conf ('General', 'page_url_style');
+		}
+		return self::$url_style;
+	}
+
+	/**
+	 * Gets or sets whether the site is multilingual.
+	 */
+	public static function multilingual ($multilingual = null) {
+		if ($multilingual !== null) {
+			self::$multilingual = $multilingual;
+		}
+		if (self::$multilingual === null) {
+			self::$multilingual = conf ('I18n', 'multilingual');
+		}
+
+		return self::$multilingual;
+	}
+
+	/**
+	 * Gets or sets the language negotiation method.
+	 */
+	public static function negotiation_method ($negotiation_method = null) {
+		if ($negotiation_method !== null) {
+			self::$negotiation_method = $negotiation_method;
+		}
+		if (self::$negotiation_method === null) {
+			self::$negotiation_method = conf ('I18n', 'negotiation_method');
+		}
+		return self::$negotiation_method;
+	}
+
+	/**
+	 * Gets or sets the Navigation object.
+	 */
+	public static function nav ($nav = null) {
+		if ($nav !== null) {
+			self::$nav = $nav;
+		}
+		if (self::$nav === null) {
+			self::$nav = new Navigation ();
+		}
+		return self::$nav;
+	}
+
+	/**
+	 * Gets or sets the I18n object.
+	 */
+	public static function i18n ($i18n = null) {
+		if ($i18n !== null) {
+			self::$i18n = $i18n;
+		}
+		if (self::$i18n === null) {
+			self::$i18n = $GLOBALS['i18n'];
+		}
+		return self::$i18n;
+	}
+
+	/**
+	 * Gets or sets the current page ID. Also resets $active if it changes.
+	 */
+	public static function current ($current = null) {
+		if ($current !== null) {
+			self::$current = $current;
+			self::$active = null;
+		}
+		if (self::$current === null) {
+			self::$current = $GLOBALS['page']->id;
+			self::$active = null;
+		}
+		return self::$current;
+	}
+
+	/**
+	 * Gets a list of parent page IDs in order to add class="active" to them.
+	 */
+	public static function active () {
+		if (self::$active === null) {
+			$nav = self::nav ();
+			self::$active = $nav->path (self::current ());
+			if (! is_array (self::$active)) {
+				self::$active = array ();
+			}
+		}
+		return self::$active;
+	}
+
+	/**
+	 * Generates a URL for a page ID.
+	 */
+	public static function href ($id) {
+		// Use $prefix only if negotiation_method is 'url' and
+		// page_url_style is not 'nested', otherwise it's not needed
+		if (self::negotiation_method () === 'url' && self::url_style () !== 'nested') {
+			$i18n = self::i18n ();
+			$prefix = $i18n->prefix;
+			if (! empty ($prefix) && in_array ($id, array_keys ($i18n->languages))) {
+				// Prevent /en/en or /en/fr links
+				$prefix = '';
+			}
+		} else {
+			$prefix = '';
+		}
+
+		// Replace $id with nested URL if page_url_style is 'nested'
+		if (self::url_style () === 'nested') {
+			$nav = self::nav ();
+			$path = $nav->path ($id);
+			if (is_array ($path)) {
+				$id = join ('/', $path);
+			}
+		}
+
+		// Render and return
+		return $prefix . '/' . $id;		
+	}
+
+	/**
+	 * Generates a link tag for the specified page ID and title.
+	 */
+	public static function make ($id, $title, $href = null) {
+		$href = ($href !== null) ? $href : self::href ($id);
+		return sprintf (
+			'<a href="%s">%s</a>',
+			$href,
+			$title
+		);
+	}
+
+	/**
+	 * Generates a single navigation link as a list item.
+	 */
+	public static function single ($id, $title, $href = null) {
+		// Set class="current" if page is current
+		$current = (self::current () === $id) ? ' class="current"' : '';
+
+		// Set class="active" if page is parent of current
+		if (empty ($current)) {
+			$current = in_array ($id, self::active ()) ? ' class="active"' : $current;
+		}
+
+		return sprintf (
+			"<li%s>%s</li>\n",
+			$current,
+			self::make ($id, $title, $href)
+		);
+	}
+
+	/**
+	 * Get the domain minus any subdomain.
+	 */
+	public static function base_domain () {
+		$parts = explode ('.', $_SERVER['HTTP_HOST']);
+		if (count ($parts) === 3) {
+			array_shift ($parts);
+		}
+		return join ('.', $parts);
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/lib/Navigation.php elefant-elefant_1_3_3_beta/apps/navigation/lib/Navigation.php
--- elefant-elefant_1_3_2_beta/apps/navigation/lib/Navigation.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/lib/Navigation.php	2013-03-20 13:48:44.000000000 -0500
@@ -78,7 +78,11 @@
 	 */
 	public function __construct ($file = 'conf/navigation.json') {
 		$this->file = $file;
-		$this->tree = json_decode (file_get_contents ($file));
+		$this->tree = json_decode (file_exists ($file) ? file_get_contents ($file) : '[]');
+		if ( (json_last_error () != JSON_ERROR_NONE) ||
+			 !(is_array ($this->tree)) ) {
+			$this->tree = array();
+		}
 	}
 
 	/**
@@ -204,7 +208,7 @@
 		if (is_object ($id)) {
 			$new_page = $id;
 		} else {
-			$pg = DB::single ('select title, menu_title from webpage where id = ?', $id);
+			$pg = DB::single ('select title, menu_title from #prefix#webpage where id = ?', $id);
 			$title = (! empty ($pg->menu_title)) ? $pg->menu_title : $pg->title;
 			$new_page = (object) array (
 				'data' => $title,
@@ -236,7 +240,7 @@
 	 * Remove a page from the tree. Removes all children as well
 	 * unless you set $recursive to false.
 	 */
-	public function remove ($id, $recursive = true) {
+	function remove ($id, $recursive = true) {
 		$ref = $this->parent ($id);
 
 		if ($ref) {
@@ -412,6 +416,15 @@
 		}
 		return true;
 	}
+	
+	/**
+	 * Update the tree from Json to the file.
+	 */
+	public function update ($tree) {
+		$this->tree = $tree;
+		return true;
+	}
+	
 
 	/**
 	 * Save the tree out to the file.
Files elefant-elefant_1_3_2_beta/apps/navigation/pix/trash.png and elefant-elefant_1_3_3_beta/apps/navigation/pix/trash.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/navigation/views/admin.html elefant-elefant_1_3_3_beta/apps/navigation/views/admin.html
--- elefant-elefant_1_3_2_beta/apps/navigation/views/admin.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/navigation/views/admin.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,146 +1,50 @@
-<script>
+<link href="/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css" rel="stylesheet" type="text/css" />
 
-$(function () {
-	var $navigation = $('#navigation');
-	$navigation.bind ('move_node.jstree', function (evt, data) {
-		if (data.rslt.p == 'inside') {
-			$navigation.jstree ('open_node', data.rslt.r[0]);
-		}
-		$.post ('/navigation/api/move', {page: data.rslt.o[0].id, ref: data.rslt.r[0].id, pos: data.rslt.p}, function (res) {
-			//console.log (res.data.msg);
-			//TODO: error handling
-			return true;
-		});
-	}).jstree ({
-		plugins: ['themes', 'json_data', 'sort', 'dnd', 'crrm'],
-		themes: {
-			theme: 'classic',
-			dots: false,
-			icons: false
-		},
-		json_data: {
-			ajax: {
-				url: '/navigation/json'
-			}
-		},
-		dnd: {
-			'drag_finish': function (data) {
-				var new_node = {
-						attr: {
-							id: $(data.o).attr ('id'),
-							sort: $(data.r).find ('> ul > li').length
-						},
-						data: $(data.o).text ()
-					},
-					last = $(data.r).find ('> ul > li').last ();
-
-				if (last.length > 0) {
-					// add after last
-					$navigation.jstree ('create_node', last, 'after', new_node);
-				} else {
-					// first child
-					$navigation.jstree ('create_node', data.r, 'inside', new_node);
-				}
-				$navigation.jstree ('open_node', data.r);
-
-				// remove from other
-				$(data.o).remove ();
-
-				// save to database
-				var parent = $(data.r);
-				if (parent.is ('div')) {
-					parent = false;
-				} else {
-					parent = parent.attr ('id');
-				}
-				$.post ('/navigation/api/add', {page: $(data.o).attr('id'), parent: parent}, function (res) {
-					//console.log (res.data.msg);
-					//TODO: error handling
-					return true;
-				});
-			}
-		},
-		sort: function (a, b) {
-			if ($(a).attr ('sort') > $(b).attr ('sort')) {
-				1;
-			}
-			return -1;
-		}
-	});
-	$(document).bind ('drag_stop.vakata', function (evt, data) {
-		if (data.data.jstree && data.event.target.id == 'garbage') {
-			var id = $(data.data.obj).attr ('id');
-			$.jstree._reference (data.data.obj).remove (data.data.obj);
-			$.post ('/navigation/api/remove', {page: id}, function (res) {
-				// update other pages from res.other
-				//TODO: error handling
-				$('#other-pages li').remove ();
-				for (var p in res.data.other) {
-					$('#other-pages').append (
-						'<li class="jstree-draggable" id="' + p + '">' + res.data.other[p] + '</li>'
-					);
-				}
-				return true;
-			});
-		}
-	});
-});
-
-</script>
+<!--[if IE]>
 <style>
-
-#pages ul {
-	margin-left: 0;
-	padding-left: 0;
-}
-
-#pages ul li {
-	margin-left: 3px;
-	padding-left: 0;
-	list-style-type: square;
-	list-style-position: inside;
+body:not(.cursorGrabbing) .treeDragDrop li, .tdd-dragContainer li{
+	cursor: url(/apps/navigation/js/tree-drag-drop/css/openhand.cur), move;
 }
-
-#pages ul li:hover {
-	cursor: pointer;
-}
-
-#navigation {
-	min-height: 60px;
+</style>
+<![endif]-->
+<style>
+.trashbin{
+	width:48%; 
+	float:right
 }
 
-#garbage {
-	background: url(/apps/navigation/pix/trash.png);
-	background-repeat: no-repeat;
-	background-position: 0px 16px;
-	padding: 16px 10px 10px 24px;
-	margin-top: 5px;
-	border-top: 1px solid #ccc;
+.tree{
+	width:48%; 
+	float:left
 }
 
-.jstree-classic.jstree-focused {
-	background: inherit !important;
+.caption{
+	margin-top:10px;
 }
 
 </style>
 
-<div style="width: 48%; float: left">
-<h4>{"Site tree"}</h4>
-<p>{"Drag and drop pages to organize your navigation."}</p>
-<div id="navigation"></div>
-
-<p id="garbage">{"Drag pages here to remove them from the tree."}</p>
+<div class="treeDragDrop">
+	<div class="tree">
+		<h4> {"Site tree"}</h4>
+		<p class="caption">{"Drag pages to the site tree to include them in your navigation."}</p>
+		{! navigation/admin_tree !}	
+		
+	</div>	
+	<div class="trashbin">
+		<h4> {"Other pages"}</h4>	
+		<p class="caption">{"Drag pages here to remove them from the tree."}</p>
+		<ul class="tdd-trashbin">
+		{% foreach other_pages %}
+			<li id="{{ loop_index }}">{{ loop_value }}</li>
+		{% end %}
+		</ul>
+		
+	</div>
 </div>
+<br clear="both" />
 
-<div style="width: 48%; float: right">
-<h4>{"Other pages"}</h4>
-<p>{"Drag these pages to the site tree to include them in your navigation."}</p>
-<div id="pages">
-<ul id="other-pages">
-{% foreach pages %}
-	<li class="jstree-draggable" id="{{ loop_index }}">{{ loop_value }}</li>
-{% end %}
-</ul>
-<p><em>{"Note: Pages that are not publicly visible will not be listed here."}</em></p>
-</div>
-</div>
+<p class="caption"><em>{"Note: Pages that are not publicly visible will not be listed here."}</em></p>
+
+<script type="text/javascript">
+</script>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/navigation/views/pager/numbers.html and elefant-elefant_1_3_3_beta/apps/navigation/views/pager/numbers.html are identical
Files elefant-elefant_1_3_2_beta/apps/navigation/views/pager/text.html and elefant-elefant_1_3_3_beta/apps/navigation/views/pager/text.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/conf/config.php and elefant-elefant_1_3_3_beta/apps/social/conf/config.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/social/conf/embed.php elefant-elefant_1_3_3_beta/apps/social/conf/embed.php
--- elefant-elefant_1_3_2_beta/apps/social/conf/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/social/conf/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,6 +3,7 @@
 [social/facebook/like]
 
 label = Facebook: Like Button
+icon = thumbs-up
 
 url[label] = Link
 url[type] = text
@@ -13,6 +14,7 @@
 [social/facebook/like-box]
 
 label = Facebook: Like-Box
+icon = facebook-sign
 columns = 2
 
 url[label] = Facebook Page URL
@@ -60,10 +62,18 @@
 [social/facebook/comments]
 
 label = Facebook: Comments
+icon = /apps/social/css/icon-facebook-comments.png
+
+url[label] = Link
+url[type] = text
+url[not empty] = 1
+url[regex] = "|^http://.+$|"
+url[message] = Please enter a valid URL.
 
 [social/facebook/commentcount]
 
 label = Facebook: Comment Count
+icon = /apps/social/css/icon-facebook-commentcount.png
 
 url[label] = Link
 url[type] = text
@@ -74,6 +84,7 @@
 [social/twitter/follow]
 
 label = Twitter: Follow
+icon = /apps/social/css/icon-twitter-follow.png
 
 twitter_id[label] = Twitter ID
 twitter_id[type] = text
@@ -82,6 +93,7 @@
 
 [social/twitter/feed]
 label = Twitter: Feed
+icon = twitter-sign
 columns = 2
 
 twitter_id[label] = Twitter ID
@@ -141,6 +153,7 @@
 [social/twitter/tweet]
 
 label = Twitter: Share
+icon = twitter
 
 url[label] = Link
 url[type] = text
@@ -154,6 +167,7 @@
 [social/google/plusone]
 
 label = "Google: +1 Button"
+icon = google-plus-sign
 
 url[label] = Link
 url[type] = text
@@ -164,6 +178,7 @@
 [social/video/youtube]
 
 label = "Video: YouTube"
+icon = facetime-video
 
 url[label] = Link
 url[type] = text
@@ -174,6 +189,7 @@
 [social/google/maps]
 
 label = "Google: Map"
+icon = map-marker
 
 address[label] = Address
 address[type] = text
@@ -199,6 +215,7 @@
 [social/video/vimeo]
 
 label = "Video: Vimeo"
+icon = facetime-video
 
 url[label] = Link
 url[type] = text
Binary files elefant-elefant_1_3_2_beta/apps/social/css/icon-facebook-commentcount.png and elefant-elefant_1_3_3_beta/apps/social/css/icon-facebook-commentcount.png differ
Binary files elefant-elefant_1_3_2_beta/apps/social/css/icon-facebook-comments.png and elefant-elefant_1_3_3_beta/apps/social/css/icon-facebook-comments.png differ
Binary files elefant-elefant_1_3_2_beta/apps/social/css/icon-twitter-follow.png and elefant-elefant_1_3_3_beta/apps/social/css/icon-twitter-follow.png differ
Files elefant-elefant_1_3_2_beta/apps/social/handlers/facebook/commentcount.php and elefant-elefant_1_3_3_beta/apps/social/handlers/facebook/commentcount.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/social/handlers/facebook/comments.php elefant-elefant_1_3_3_beta/apps/social/handlers/facebook/comments.php
--- elefant-elefant_1_3_2_beta/apps/social/handlers/facebook/comments.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/social/handlers/facebook/comments.php	2013-03-20 13:48:44.000000000 -0500
@@ -9,6 +9,10 @@
 	echo $this->run ('social/facebook/init');
 }
 
+$data['url'] = isset ($data['url'])
+	? $data['url']
+	: '//' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
+
 echo $tpl->render ('social/facebook/comments', $data);
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/social/handlers/facebook/init.php and elefant-elefant_1_3_3_beta/apps/social/handlers/facebook/init.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/facebook/like-box.php and elefant-elefant_1_3_3_beta/apps/social/handlers/facebook/like-box.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/facebook/like.php and elefant-elefant_1_3_3_beta/apps/social/handlers/facebook/like.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/google/init.php and elefant-elefant_1_3_3_beta/apps/social/handlers/google/init.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/google/maps.php and elefant-elefant_1_3_3_beta/apps/social/handlers/google/maps.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/google/plusone.php and elefant-elefant_1_3_3_beta/apps/social/handlers/google/plusone.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/index.php and elefant-elefant_1_3_3_beta/apps/social/handlers/index.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/twitter/feed.php and elefant-elefant_1_3_3_beta/apps/social/handlers/twitter/feed.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/twitter/follow.php and elefant-elefant_1_3_3_beta/apps/social/handlers/twitter/follow.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/twitter/init.php and elefant-elefant_1_3_3_beta/apps/social/handlers/twitter/init.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/twitter/tweet.php and elefant-elefant_1_3_3_beta/apps/social/handlers/twitter/tweet.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/video/vimeo.php and elefant-elefant_1_3_3_beta/apps/social/handlers/video/vimeo.php are identical
Files elefant-elefant_1_3_2_beta/apps/social/handlers/video/youtube.php and elefant-elefant_1_3_3_beta/apps/social/handlers/video/youtube.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/social/lib/Functions.php elefant-elefant_1_3_3_beta/apps/social/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/social/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/social/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,15 +5,15 @@
  */
 function social_true_false () {
 	return array (
-		(object) array ('key' => 'true', 'value' => i18n_get ('True')),
-		(object) array ('key' => 'false', 'value' => i18n_get ('False')),
+		(object) array ('key' => 'true', 'value' => __ ('True')),
+		(object) array ('key' => 'false', 'value' => __ ('False')),
 	);
 }
 
 function facebook_light_dark () {
 	return array (
-		(object) array ('key' => 'light', 'value' => i18n_get ('Light')),
-		(object) array ('key' => 'dark', 'value' => i18n_get ('Dark')),
+		(object) array ('key' => 'light', 'value' => __ ('Light')),
+		(object) array ('key' => 'dark', 'value' => __ ('Dark')),
 	);
 }
 ?>
Files elefant-elefant_1_3_2_beta/apps/social/views/facebook/commentcount.html and elefant-elefant_1_3_3_beta/apps/social/views/facebook/commentcount.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/facebook/comments.html and elefant-elefant_1_3_3_beta/apps/social/views/facebook/comments.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/facebook/init.html and elefant-elefant_1_3_3_beta/apps/social/views/facebook/init.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/facebook/like-box.html and elefant-elefant_1_3_3_beta/apps/social/views/facebook/like-box.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/facebook/like.html and elefant-elefant_1_3_3_beta/apps/social/views/facebook/like.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/google/init.html and elefant-elefant_1_3_3_beta/apps/social/views/google/init.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/google/maps.html and elefant-elefant_1_3_3_beta/apps/social/views/google/maps.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/social/views/google/plusone.html elefant-elefant_1_3_3_beta/apps/social/views/google/plusone.html
--- elefant-elefant_1_3_2_beta/apps/social/views/google/plusone.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/social/views/google/plusone.html	2013-03-20 13:48:44.000000000 -0500
@@ -1 +1 @@
-<g:plusone href="{{ url }}" count="true" size="medium"></g:plusone>
+<div class="g-plusone" data-href="{{ url }}" data-size="medium"></div>
Files elefant-elefant_1_3_2_beta/apps/social/views/index.html and elefant-elefant_1_3_3_beta/apps/social/views/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/twitter/feed.html and elefant-elefant_1_3_3_beta/apps/social/views/twitter/feed.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/twitter/follow.html and elefant-elefant_1_3_3_beta/apps/social/views/twitter/follow.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/twitter/init.html and elefant-elefant_1_3_3_beta/apps/social/views/twitter/init.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/twitter/tweet.html and elefant-elefant_1_3_3_beta/apps/social/views/twitter/tweet.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/video/vimeo.html and elefant-elefant_1_3_3_beta/apps/social/views/video/vimeo.html are identical
Files elefant-elefant_1_3_2_beta/apps/social/views/video/youtube.html and elefant-elefant_1_3_3_beta/apps/social/views/video/youtube.html are identical
Files elefant-elefant_1_3_2_beta/apps/translator/conf/config.php and elefant-elefant_1_3_3_beta/apps/translator/conf/config.php are identical
Files elefant-elefant_1_3_2_beta/apps/translator/forms/add.php and elefant-elefant_1_3_3_beta/apps/translator/forms/add.php are identical
Files elefant-elefant_1_3_2_beta/apps/translator/forms/settings.php and elefant-elefant_1_3_3_beta/apps/translator/forms/settings.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/add.php elefant-elefant_1_3_3_beta/apps/translator/handlers/add.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -9,7 +9,7 @@
 
 $page->layout = 'admin';
 
-$page->title = i18n_get ('Add language');
+$page->title = __ ('Add language');
 
 $form = new Form ('post', $this);
 
@@ -27,7 +27,7 @@
 		$lang = $_POST['code'];
 	}
 
-	global $i18n;
+	$i18n = $this->controller->i18n ();
 
 	$i18n->languages[$lang] = array (
 		'name' => $_POST['name'],
@@ -47,7 +47,7 @@
 		return false;
 	}
 
-	$form->controller->add_notification (i18n_get ('Language added.'));
+	$form->controller->add_notification (__ ('Language added.'));
 	$form->controller->redirect ('/translator/index');
 });
 
Files elefant-elefant_1_3_2_beta/apps/translator/handlers/api.php and elefant-elefant_1_3_3_beta/apps/translator/handlers/api.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/build.php elefant-elefant_1_3_3_beta/apps/translator/handlers/build.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/build.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/build.php	2013-03-20 13:48:44.000000000 -0500
@@ -11,9 +11,9 @@
 
 if (! isset ($this->params[0])) {
 	if (! file_exists ('lang/_index.php')) {
-		$page->title = i18n_get ('Building index');
+		$page->title = __ ('Building index');
 	} else {
-		$page->title = i18n_get ('Rebuilding index');
+		$page->title = __ ('Rebuilding index');
 	}
 
 	echo 'Please wait...';
@@ -46,6 +46,7 @@
 
 foreach ($sources as $source) {
 	$files = glob ($source);
+	$files = is_array ($files) ? $files : array ();
 	foreach ($files as $file) {
 		$data = file_get_contents ($file);
 		if (preg_match ('/\.html/', $file)) {
@@ -55,8 +56,16 @@
 				if (! isset ($list[$str])) {
 					$list[$str] = array (
 						'orig' => $str,
-						'src' => $file
+						'src' => array ($file)
 					);
+				} else {
+					$list[$str]['src'] = is_array ($list[$str]['src'])
+						? $list[$str]['src']
+						: array ($list[$str]['src']);
+
+					if (! in_array ($file, $list[$str]['src'])) {
+						$list[$str]['src'][] = $file;
+					}
 				}
 			}
 		} else {
@@ -67,8 +76,46 @@
 				if (! isset ($list[$str])) {
 					$list[$str] = array (
 						'orig' => $str,
-						'src' => $file
+						'src' => array ($file)
 					);
+				} else {
+					$list[$str]['src'] = is_array ($list[$str]['src'])
+						? $list[$str]['src']
+						: array ($list[$str]['src']);
+
+					if (! in_array ($file, $list[$str]['src'])) {
+						$list[$str]['src'][] = $file;
+					}
+				}
+			}
+
+			// parse for I18n::export syntax
+			preg_match_all ('/I18n::export\s+?\(([^\)]+)\)/s', $data, $matches);
+			foreach ($matches[1] as $match) {
+				if (! preg_match ('/array\s+?\(/', $match)) {
+					$match = 'array (' . $match;
+				}
+				$match = '<?php $__tmp__ = ' . $match . ');?>';
+
+				$tokens = token_get_all ($match);
+				foreach ($tokens as $tok) {
+					if ($tok[0] === T_CONSTANT_ENCAPSED_STRING) {
+						$str = stripslashes (trim ($tok[1], '"\''));
+						if (! isset ($list[$str])) {
+							$list[$str] = array (
+								'orig' => $str,
+								'src' => array ($file)
+							);
+						} else {
+							$list[$str]['src'] = is_array ($list[$str]['src'])
+								? $list[$str]['src']
+								: array ($list[$str]['src']);
+
+							if (! in_array ($file, $list[$str]['src'])) {
+								$list[$str]['src'][] = $file;
+							}
+						}
+					}
 				}
 			}
 		}
@@ -78,8 +125,8 @@
 file_put_contents ('lang/_index.php', serialize ($list));
 chmod ('lang/_index.php', 0666);
 
-$page->title = i18n_get ('Indexing completed');
+$page->title = __ ('Indexing completed');
 
-echo '<p><a href="/translator/index">' . i18n_get ('Continue') . '</a></p>';
+echo '<p><a href="/translator/index">' . __ ('Continue') . '</a></p>';
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/delete.php elefant-elefant_1_3_3_beta/apps/translator/handlers/delete.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/delete.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/delete.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,8 +6,6 @@
 
 $this->require_admin ();
 
-global $i18n;
-
 require_once ('apps/translator/lib/Functions.php');
 
 if (isset ($i18n->languages[$_GET['lang']])) {
@@ -18,7 +16,7 @@
 	Ini::write ($i18n->languages, 'lang/languages.php');
 }
 
-$this->add_notification (i18n_get ('Language deleted.'));
+$this->add_notification (__ ('Language deleted.'));
 $this->redirect ('/translator/index');
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/edit.php elefant-elefant_1_3_3_beta/apps/translator/handlers/edit.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/edit.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/edit.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,8 +14,6 @@
 
 $page->layout = 'admin';
 
-global $i18n;
-
 $lang = $this->params[0];
 
 $empty = (isset ($_GET['empty']) && $_GET['empty'] == 1) ? true : false;
@@ -25,7 +23,7 @@
 
 $info = $i18n->languages[$lang];
 
-$page->title = i18n_get ('Editing language') . ': ' . $info['name'];
+$page->title = __ ('Editing language') . ': ' . $info['name'];
 
 $all = unserialize (file_get_contents ('lang/_index.php'));
 $sources = Translator::get_sources ($all);
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/index.php elefant-elefant_1_3_3_beta/apps/translator/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,9 +14,7 @@
 
 $page->layout = 'admin';
 
-$page->title = i18n_get ('Languages');
-
-global $i18n;
+$page->title = __ ('Languages');
 
 echo $tpl->render ('translator/index', $i18n);
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/makedefault.php elefant-elefant_1_3_3_beta/apps/translator/handlers/makedefault.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/makedefault.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/makedefault.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,8 +6,6 @@
 
 $this->require_admin ();
 
-global $i18n;
-
 require_once ('apps/translator/lib/Functions.php');
 
 if (isset ($i18n->languages[$_GET['lang']])) {
@@ -21,7 +19,7 @@
 	Ini::write ($i18n->languages, 'lang/languages.php');
 }
 
-$this->add_notification (i18n_get ('Default language updated.'));
+$this->add_notification (__ ('Default language updated.'));
 $this->redirect ('/translator/index');
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/settings.php elefant-elefant_1_3_3_beta/apps/translator/handlers/settings.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/settings.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/settings.php	2013-03-20 13:48:44.000000000 -0500
@@ -14,11 +14,9 @@
 
 $page->layout = 'admin';
 
-global $i18n;
-
 $lang = $i18n->languages[$_GET['lang']];
 
-$page->title = i18n_get ('Language settings') . ': ' . $lang['name'];
+$page->title = __ ('Language settings') . ': ' . $lang['name'];
 
 $form = new Form ('post', $this);
 
@@ -38,7 +36,7 @@
 		$lang = $_POST['code'];
 	}
 
-	global $i18n;
+	$i18n = $this->controller->i18n ();
 
 	if ($lang !== $_GET['lang']) {
 		// Language has changed ids
@@ -67,7 +65,7 @@
 		return false;
 	}
 
-	$form->controller->add_notification (i18n_get ('Language updated.'));
+	$form->controller->add_notification (__ ('Language updated.'));
 	$form->controller->redirect ('/translator/index');
 });
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/handlers/sources.php elefant-elefant_1_3_3_beta/apps/translator/handlers/sources.php
--- elefant-elefant_1_3_2_beta/apps/translator/handlers/sources.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/translator/handlers/sources.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,41 @@
+<?php
+
+$this->require_admin ();
+
+$page->layout = false;
+
+$index = unserialize (file_get_contents ('lang/_index.php'));
+if (! isset ($index[$_GET['string']])) {
+	printf ('<p>%s</p>', __ ('String not found.'));
+	return;
+}
+
+$string = $index[$_GET['string']];
+$string['src'] = is_array ($string['src']) ? $string['src'] : array ($string['src']);
+
+$contexts = array ();
+
+foreach ($string['src'] as $source) {
+	$lines = file ($source);
+	foreach ($lines as $line => $text) {
+		if (strpos ($text, $_GET['string']) !== false) {
+			$start = $line >= 2 ? $line - 2 : 0;
+
+			$slice = array_slice ($lines, $start, 5);
+			$code = '';
+			foreach ($slice as $n => $single) {
+				$code .= '<span class="line-number">' . ($start + $n + 1) . '.</span> ' . Template::sanitize ($single);
+			}
+			$code = str_replace ($_GET['string'], '<span class="trans-text">' . $_GET['string'] . '</span>', $code);
+
+			$contexts[] = (object) array (
+				'file' => $source,
+				'code' => $code
+			);
+		}
+	}
+}
+
+echo View::render ('translator/sources', array ('contexts' => $contexts));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/lib/Functions.php elefant-elefant_1_3_3_beta/apps/translator/lib/Functions.php
--- elefant-elefant_1_3_2_beta/apps/translator/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -44,4 +44,19 @@
 	return $t->completed ($lang);
 }
 
+/**
+ * Filter &apos; back to single quotes.
+ */
+function translator_filter_apos ($text) {
+	return str_replace ('&apos;', '\'', $text);
+}
+
+/**
+ * Filter sources into a list.
+ */
+function translator_filter_sources ($sources) {
+	$sources = is_array ($sources) ? $sources : array ($sources);
+	return "\n- " . join ("\n- ", $sources);
+}
+
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/lib/Translator.php elefant-elefant_1_3_3_beta/apps/translator/lib/Translator.php
--- elefant-elefant_1_3_2_beta/apps/translator/lib/Translator.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/lib/Translator.php	2013-03-20 13:48:44.000000000 -0500
@@ -30,7 +30,10 @@
 	public static function get_sources ($items) {
 		$sources = array ();
 		foreach ($items as $k => $v) {
-			$sources[$v['src']] = $v['src'];
+			$v['src'] = is_array ($v['src']) ? $v['src'] : array ($v['src']);
+			foreach ($v['src'] as $src) {
+				$sources[$src] = $src;
+			}
 		}
 		asort ($sources);
 		return $sources;
@@ -42,7 +45,8 @@
 	public static function get_by_source ($items, $source) {
 		$out = array ();
 		foreach ($items as $k => $v) {
-			if ($v['src'] === $source) {
+			$v['src'] = is_array ($v['src']) ? $v['src'] : array ($v['src']);
+			if (in_array ($source, $v['src'])) {
 				$out[$k] = $v;
 			}
 		}
@@ -76,7 +80,7 @@
 				"%s\t'%s' => '%s'",
 				$sep,
 				str_replace ('\'', '\\\'', stripslashes ($k)),
-				str_replace ('\'', '\\\'', stripslashes ($v))
+				str_replace ('\'', '&apos;', stripslashes ($v))
 			);
 			$sep = ",\r";
 		}
Files elefant-elefant_1_3_2_beta/apps/translator/views/add.html and elefant-elefant_1_3_3_beta/apps/translator/views/add.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/views/edit.html elefant-elefant_1_3_3_beta/apps/translator/views/edit.html
--- elefant-elefant_1_3_2_beta/apps/translator/views/edit.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/views/edit.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,3 +1,5 @@
+{! admin/util/modal !}
+
 <form style="display: inline" method="GET" action="/translator/edit/{{ lang }}">
 <div style="float: right; margin-top: -5px">
 <select name="source" onchange="this.form.elements['contains'].value = ''; this.form.submit ()">
@@ -31,7 +33,7 @@
 	</tr>
 {% foreach items %}
 	<tr id="tr-{{ loop_index|translator_field_id }}">
-		<td class="original" title="{"Source"}: {{ loop_value[src] }}">{{ loop_index }}</td>
+		<td class="original" title="{"Source"}: {{ loop_value[src]|translator_filter_sources }}" data-string="{{ loop_index|quotes }}">{{ loop_index }}</td>
 		<td class="translate">
 			<textarea
 				rows="1" style="float:left; width: 85%; height: 100%"
@@ -40,7 +42,7 @@
 				id="textarea-{{ loop_index|translator_field_id }}"
 				onblur="$.save_element (this)"
 				{% if empty ($data->loop_value[trans]) %} class="empty"{% end %}
-			>{{ loop_value[trans] }}</textarea>
+			>{{ loop_value[trans]|translator_filter_apos }}</textarea>
 			<span id="saving-{{ loop_index|translator_field_id }}" class="notice" style="float: left; margin-left: 7px">{"Saving..."}</span>
 		</td>
 	</tr>
@@ -60,6 +62,20 @@
 			$(this).addClass ('empty');
 		}
 	});
+
+	$('.original').click (function () {
+		var string = $(this).data ('string'),
+			title = (string.length > 65)
+				? string.substring (0, 62) + '...'
+				: string;
+		$.get ('/translator/sources?string=' + encodeURIComponent (string), function (res) {
+			$.open_dialog (
+				title,
+				res,
+				{ height: 450 }
+			);
+		});
+	});
 });
 
 $.save_element = function (el) {
@@ -87,4 +103,7 @@
 .empty {
 	background: #ffd;
 }
+.original:hover {
+	cursor: pointer;
+}
 </style>
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/views/edit_search.html elefant-elefant_1_3_3_beta/apps/translator/views/edit_search.html
--- elefant-elefant_1_3_2_beta/apps/translator/views/edit_search.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/views/edit_search.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,3 +1,5 @@
+{! admin/util/modal !}
+
 <form style="display: inline" method="GET" action="/translator/edit/{{ lang }}">
 <div style="float: right; margin-top: -5px">
 <select name="source" onchange="this.form.elements['contains'].value = ''; this.form.submit ()">
@@ -33,7 +35,7 @@
 {% foreach items %}
 	{% if empty === false || $data->loop_value['trans'] === '' %}
 		<tr id="tr-{{ loop_index|translator_field_id }}">
-			<td class="original" title="{"Source"}: {{ loop_value[src] }}">{{ loop_index }}</td>
+			<td class="original" title="{"Source"}: {{ loop_value[src]|translator_filter_sources }}" data-string="{{ loop_index|quotes }}">{{ loop_index }}</td>
 			<td class="translate">
 				<textarea
 					rows="1" style="float:left; width: 85%; height: 100%"
@@ -42,7 +44,7 @@
 					id="textarea-{{ loop_index|translator_field_id }}"
 					onblur="$.save_element (this)"
 					{% if empty ($data->loop_value[trans]) %} class="empty"{% end %}
-				>{{ loop_value[trans] }}</textarea>
+				>{{ loop_value[trans]|translator_filter_apos }}</textarea>
 				<span id="saving-{{ loop_index|translator_field_id }}" class="notice" style="float: left; margin-left: 7px">{"Saving..."}</span>
 			</td>
 		</tr>
@@ -61,6 +63,20 @@
 			$(this).addClass ('empty');
 		}
 	});
+
+	$('.original').click (function () {
+		var string = $(this).data ('string'),
+			title = (string.length > 65)
+				? string.substring (0, 62) + '...'
+				: string;
+		$.get ('/translator/sources?string=' + encodeURIComponent (string), function (res) {
+			$.open_dialog (
+				title,
+				res,
+				{ height: 450 }
+			);
+		});
+	});
 });
 
 $.save_element = function (el) {
@@ -88,4 +104,7 @@
 .empty {
 	background: #ffd;
 }
+.original:hover {
+	cursor: pointer;
+}
 </style>
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/views/edit_source.html elefant-elefant_1_3_3_beta/apps/translator/views/edit_source.html
--- elefant-elefant_1_3_2_beta/apps/translator/views/edit_source.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/views/edit_source.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,3 +1,5 @@
+{! admin/util/modal !}
+
 <form style="display: inline" method="GET" action="/translator/edit/{{ lang }}">
 <div style="float: right; margin-top: -5px">
 <select name="source" onchange="this.form.elements['contains'].value = ''; this.form.submit ()">
@@ -33,7 +35,7 @@
 {% foreach items %}
 	{% if empty === false || $data->loop_value['trans'] === '' %}
 		<tr id="tr-{{ loop_index|translator_field_id }}">
-			<td class="original" title="{"Source"}: {{ loop_value[src] }}">{{ loop_index }}</td>
+			<td class="original" title="{"Source"}: {{ loop_value[src]|translator_filter_sources }}" data-string="{{ loop_index|quotes }}">{{ loop_index }}</td>
 			<td class="translate">
 				<textarea
 					rows="1" style="float:left; width: 85%; height: 100%"
@@ -42,7 +44,7 @@
 					id="textarea-{{ loop_index|translator_field_id }}"
 					onblur="$.save_element (this)"
 					{% if empty ($data->loop_value[trans]) %} class="empty"{% end %}
-				>{{ loop_value[trans] }}</textarea>
+				>{{ loop_value[trans]|translator_filter_apos }}</textarea>
 				<span id="saving-{{ loop_index|translator_field_id }}" class="notice" style="float: left; margin-left: 7px">{"Saving..."}</span>
 			</td>
 		</tr>
@@ -61,6 +63,20 @@
 			$(this).addClass ('empty');
 		}
 	});
+
+	$('.original').click (function () {
+		var string = $(this).data ('string'),
+			title = (string.length > 65)
+				? string.substring (0, 62) + '...'
+				: string;
+		$.get ('/translator/sources?string=' + encodeURIComponent (string), function (res) {
+			$.open_dialog (
+				title,
+				res,
+				{ height: 450 }
+			);
+		});
+	});
 });
 
 $.save_element = function (el) {
@@ -88,4 +104,7 @@
 .empty {
 	background: #ffd;
 }
+.original:hover {
+	cursor: pointer;
+}
 </style>
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/views/index.html elefant-elefant_1_3_3_beta/apps/translator/views/index.html
--- elefant-elefant_1_3_2_beta/apps/translator/views/index.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/translator/views/index.html	2013-03-20 13:48:44.000000000 -0500
@@ -28,7 +28,7 @@
 				<a href="/translator/makedefault?lang={{ loop_index }}">{"Make default"}</a> |
 			{% end %}
 			<a href="/translator/edit/{{ loop_index }}">{"Edit"}</a> |
-			<a href="/translator/settings/?lang={{ loop_index }}">{"Settings"}</a> |
+			<a href="/translator/settings?lang={{ loop_index }}">{"Settings"}</a> |
 			<a href="/translator/delete?lang={{ loop_index }}" onclick="return confirm ('{"Are you sure you want to delete this language?"}');">{"Delete"}</a>
 		</td>
 	</tr>
Files elefant-elefant_1_3_2_beta/apps/translator/views/settings.html and elefant-elefant_1_3_3_beta/apps/translator/views/settings.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/translator/views/sources.html elefant-elefant_1_3_3_beta/apps/translator/views/sources.html
--- elefant-elefant_1_3_2_beta/apps/translator/views/sources.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/translator/views/sources.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,27 @@
+{% foreach contexts as context %}
+<div class="context">
+	<p><b>{{context->file}}</b></p>
+	<pre><code>{{context->code|none}}</code></pre>
+</div>
+{% end %}
+
+<style>
+.context p {
+	margin-bottom: 5px;
+}
+.context pre {
+	border: 1px solid #ddd;
+	background: #fff;
+	color: #444;
+	border-radius: 3px;
+	padding: 3px;
+	overflow-x: scroll;
+}
+.line-number {
+	color: #999;
+}
+.trans-text {
+	font-weight: bold;
+	color: #396;
+}
+</style>
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/conf/config.php elefant-elefant_1_3_3_beta/apps/user/conf/config.php
--- elefant-elefant_1_3_2_beta/apps/user/conf/config.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/conf/config.php	2013-03-20 13:48:44.000000000 -0500
@@ -38,7 +38,9 @@
 ; The value "admin" is short for "type:admin".
 
 ; To specify a custom access level for a custom user type, enter
-; "client = type:client" or simply "client = client".
+; "client = type:client" or simply "client = client". To enter
+; multiple user types, separate each value with a comma, e.g.,
+; "shared = group_a, group_b, group_c".
 
 public = all
 member = login
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/conf/embed.php elefant-elefant_1_3_3_beta/apps/user/conf/embed.php
--- elefant-elefant_1_3_2_beta/apps/user/conf/embed.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/conf/embed.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,9 +3,11 @@
 [user/login]
 
 label = "User: Login"
+icon = signin
 
 [user/sidebar]
 
 label = "User: Sidebar"
+icon = user
 
 ; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/css/userchooser.css elefant-elefant_1_3_3_beta/apps/user/css/userchooser.css
--- elefant-elefant_1_3_2_beta/apps/user/css/userchooser.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/css/userchooser.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,112 @@
+#userchooser-add-link {
+	float: left;
+	margin-top: 7px;
+}
+
+#userchooser-search {
+	text-align: right;
+	width: 100%;
+	padding-bottom: 7px;
+	margin-bottom: 7px;
+	border-bottom: 1px solid #ccc;
+}
+
+#userchooser-list {
+	margin: 0;
+	padding: 0;
+}
+
+#userchooser-list li {
+	list-style-type: none;
+	display: block;
+	float: left;
+	padding: 0;
+	margin: 0.25%;
+	width: 49%;
+}
+
+#userchooser-list li a {
+	display: block;
+	padding: 3%;
+	background: #eee;
+	color: #333;
+	text-decoration: none;
+	line-height: 16px;
+	vertical-align: top;
+	height: 16px;
+}
+
+	#userchooser-list li a.user-added {
+		font-weight: bold;
+		background-color: rgba(147, 39, 143, .15) !important;
+	}
+
+#userchooser-list li a i {
+	margin: 0px 5px 0px 2px;
+	width: 16px;
+	height: 16px;
+	display: inline-block;
+	color: #93278f;
+	font-size: 16px;
+	line-height: 16px;
+}
+
+#userchooser-list li a:hover {
+	background: #ddd;
+	color: #333;
+}
+
+#userchooser-list li span.userchooser-disabled {
+	display: block;
+	padding: 3%;
+	background: #eee;
+	color: #999;
+	text-decoration: none;
+	line-height: 16px;
+	vertical-align: top;
+	height: 16px;
+}
+
+#userchooser-list li span.userchooser-disabled i {
+	margin: 0px 5px 0px 2px;
+	width: 16px;
+	height: 16px;
+	display: inline-block;
+	color: #999;
+	font-size: 16px;
+	line-height: 16px;
+}
+
+#userchooser-wrapper .simplePagerNav {
+	list-style-type: none;
+	margin-top: 15px;
+	margin-left: 0px;
+	padding-left: 0px;
+}
+
+#userchooser-wrapper .simplePagerNav li {
+	list-style-type: none;
+	margin-left: 0px;
+	padding-left: 0px;
+	display: inline
+}
+
+#userchooser-wrapper .simplePagerNav li a {
+	display: block;
+	float: left;
+	margin:0.25%;
+	padding: 3px 6px 3px 6px;
+	background: #eee;
+	color: #333;
+	text-decoration: none;
+}
+
+#userchooser-wrapper .simplePagerNav li.currentPage a {
+	display: block;
+	float: left;
+	padding: 3px 6px 3px 6px;
+	background: #93278f;
+	color: #fff;
+	text-decoration: none;
+}
+
Files elefant-elefant_1_3_2_beta/apps/user/forms/add.php and elefant-elefant_1_3_3_beta/apps/user/forms/add.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/forms/edit.php and elefant-elefant_1_3_3_beta/apps/user/forms/edit.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/forms/login/newuser.php and elefant-elefant_1_3_3_beta/apps/user/forms/login/newuser.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/forms/newpass.php and elefant-elefant_1_3_3_beta/apps/user/forms/newpass.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/forms/recover.php elefant-elefant_1_3_3_beta/apps/user/forms/recover.php
--- elefant-elefant_1_3_2_beta/apps/user/forms/recover.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/forms/recover.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,6 +3,6 @@
 [email]
 
 email = 1
-not unique = "user.email"
+not unique = "#prefix#user.email"
 
 ; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/forms/settings.php elefant-elefant_1_3_3_beta/apps/user/forms/settings.php
--- elefant-elefant_1_3_2_beta/apps/user/forms/settings.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/forms/settings.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,3 @@
+; <?php /*
+
+; */ ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/forms/signup.php elefant-elefant_1_3_3_beta/apps/user/forms/signup.php
--- elefant-elefant_1_3_2_beta/apps/user/forms/signup.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/forms/signup.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 [email]
 
 email = 1
-unique = "user.email"
+unique = "#prefix#user.email"
 
 [password]
 
Files elefant-elefant_1_3_2_beta/apps/user/forms/update.php and elefant-elefant_1_3_3_beta/apps/user/forms/update.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/add.php elefant-elefant_1_3_3_beta/apps/user/handlers/add.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/add.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/add.php	2013-03-20 13:48:44.000000000 -0500
@@ -24,12 +24,12 @@
 	$u->put ();
 	Versions::add ($u);
 	if (! $u->error) {
-		$this->add_notification (i18n_get ('User added.'));
+		$this->add_notification (__ ('User added.'));
 		$this->hook ('user/add', $_POST);
 		$this->redirect ('/user/admin');
 	}
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $u->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $u->error;
 } else {
 	$u = new User;
 	$u->type = 'admin';
@@ -37,7 +37,7 @@
 
 	$u->failed = $f->failed;
 	$u = $f->merge_values ($u);
-	$page->title = i18n_get ('Add User');
+	$page->title = __ ('Add User');
 	echo $tpl->render ('user/add', $u);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/admin.php elefant-elefant_1_3_3_beta/apps/user/handlers/admin.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/admin.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/admin.php	2013-03-20 13:48:44.000000000 -0500
@@ -17,7 +17,7 @@
 	->fetch_orig ($limit, $offset);
 $count = User::query ()->count ();
 
-$page->title = i18n_get ('Users');
+$page->title = __ ('Users');
 echo $tpl->render ('user/admin', array (
 	'limit' => $limit,
 	'total' => $count,
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/chooser/addform.php elefant-elefant_1_3_3_beta/apps/user/handlers/chooser/addform.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/chooser/addform.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/chooser/addform.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,17 @@
+<?php
+
+/**
+ * Renders the user add form HTML for the user chooser.
+ */
+
+$this->require_admin ();
+
+$u = new User;
+$u->type = 'admin';
+$u->types = preg_split ('/, ?/', $appconf['User']['user_types']);
+
+$page->layout = false;
+
+echo $tpl->render ('user/chooser/addform', $u);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/chooser/adduser.php elefant-elefant_1_3_3_beta/apps/user/handlers/chooser/adduser.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/chooser/adduser.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/chooser/adduser.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,52 @@
+<?php
+
+/**
+ * Adds a new user for the user chooser's new user form.
+ */
+
+$this->require_admin ();
+
+$page->layout = false;
+
+header ('Content-Type: application/json');
+
+$f = new Form ('post', 'user/add');
+$f->verify_csrf = false;
+if (! $f->submit ()) {
+	echo json_encode (array (
+		'success' => false,
+		'error' => __ ('Form validation failed. Please review and try again.')
+	));
+	return;
+}
+
+$_POST['password'] = User::encrypt_pass ($_POST['password']);
+$now = gmdate ('Y-m-d H:i:s');
+$_POST['expires'] = $now;
+$_POST['signed_up'] = $now;
+$_POST['updated'] = $now;
+$_POST['userdata'] = json_encode (array ());
+unset ($_POST['verify_pass']);
+$u = new User ($_POST);
+$u->put ();
+Versions::add ($u);
+if (! $u->error) {
+	$this->add_notification (__ ('User added.'));
+	$this->hook ('user/add', $_POST);
+	echo json_encode (array (
+		'success' => true,
+		'data' => array (
+			'id' => $u->id,
+			'name' => $u->name,
+			'email' => $u->email
+		)
+	));
+	return;
+}
+
+echo json_encode (array (
+	'success' => false,
+	'error' => __ ('An Error Occurred') . ': ' . $u->error
+));
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/chooser.php elefant-elefant_1_3_3_beta/apps/user/handlers/chooser.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/chooser.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/chooser.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,19 @@
+<?php
+
+/**
+ * Provides a JSON list of users to the user/util/userchooser dialog.
+ */
+
+$this->require_admin ();
+
+$page->layout = false;
+
+$users = User::query ('id, name, email')
+	->order ('name asc')
+	->fetch_orig ();
+
+header ('Content-Type: application/json');
+
+echo json_encode ($users);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/delete.php elefant-elefant_1_3_3_beta/apps/user/handlers/delete.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/delete.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/delete.php	2013-03-20 13:48:44.000000000 -0500
@@ -13,13 +13,13 @@
 $u = new User ($_GET['id']);
 
 if (! $u->remove ()) {
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $u->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $u->error;
 	return;
 }
 
 $this->hook ('user/delete', $_GET);
-$this->add_notification (i18n_get ('User deleted.'));
+$this->add_notification (__ ('User deleted.'));
 $this->redirect ('/user/admin');
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/edit.php elefant-elefant_1_3_3_beta/apps/user/handlers/edit.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/edit.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/edit.php	2013-03-20 13:48:44.000000000 -0500
@@ -21,22 +21,23 @@
 	if (! empty ($_POST['password'])) {
 		$u->password = User::encrypt_pass ($_POST['password']);
 	}
+	$u->update_extended ();
 	$u->put ();
 	Versions::add ($u);
 	if (! $u->error) {
-		$this->add_notification (i18n_get ('User saved.'));
+		$this->add_notification (__ ('User saved.'));
 		$this->hook ('user/edit', $_POST);
 		$this->redirect ('/user/admin');
 	}
-	$page->title = i18n_get ('An Error Occurred');
-	echo i18n_get ('Error Message') . ': ' . $u->error;
+	$page->title = __ ('An Error Occurred');
+	echo __ ('Error Message') . ': ' . $u->error;
 } else {
 	$u->password = '';
 	$u->types = preg_split ('/, ?/', $appconf['User']['user_types']);
 
 	$u->failed = $f->failed;
 	$u = $f->merge_values ($u);
-	$page->title = i18n_get ('Edit User') . ': ' . $u->name;
+	$page->title = __ ('Edit User') . ': ' . $u->name;
 	echo $tpl->render ('user/edit', $u);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/index.php elefant-elefant_1_3_3_beta/apps/user/handlers/index.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 if ($appconf['Custom Handlers']['user/index'] != 'user/index') {
 	if (! $appconf['Custom Handlers']['user/index']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	echo $this->run ($appconf['Custom Handlers']['user/index'], $data);
@@ -15,7 +15,7 @@
 
 if (! $this->params[0]) {
 	if (! User::require_login ()) {
-		$page->title = i18n_get ('Members');
+		$page->title = __ ('Members');
 		echo $this->run ('user/login');
 		return;
 	}
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/login/facebook.php elefant-elefant_1_3_3_beta/apps/user/handlers/login/facebook.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/login/facebook.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/login/facebook.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,7 +5,7 @@
  */
 
 if (! in_array ('facebook', $appconf['User']['login_methods'])) {
-	echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+	echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 	return;
 }
 
@@ -76,7 +76,47 @@
 
 	$this->redirect ($_GET['redirect']);
 } else {
-	// signup form to create a linked account, prefill name
+
+	//Check to see if they already signed in with the same email retreived from facebook
+	//If so link that email and Open_ID
+	$u = User::query ()
+		->where ('email', $user->email)
+		->single ();
+
+	if ($u) {
+		$oid = new User_OpenID (array (
+							'token' => $token,
+							'user_id' => $u->id
+						));
+						
+						$oid->put ();
+
+		$u->session_id = md5 (uniqid (mt_rand (), 1));
+		$u->expires = gmdate ('Y-m-d H:i:s', time () + 2592000);
+		$u->last_login = gmdate('Y-m-d H:i:s');
+		$try = 0;
+		
+		while (! $u->put ()) {
+			$u->session_id = md5 (uniqid (mt_rand (), 1));
+			$try++;
+			if ($try == 5) {
+				$this->redirect ($_GET['redirect']);
+			}
+		}
+		
+			$_SESSION['session_id'] = $u->session_id;
+
+			// save openid token
+			$oid = new User_OpenID (array (
+				'token' => $token,
+				'user_id' => $u->id
+			));
+		
+		$oid->put ();
+		$this->redirect ($_GET['redirect']);
+	}
+
+	//Otherwise signup form to create a linked account, prefill name
 	$_POST['name'] = $user->name;
 	$_POST['redirect'] = $_GET['redirect'];
 	$_POST['token'] = $token;
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/login/google.php elefant-elefant_1_3_3_beta/apps/user/handlers/login/google.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/login/google.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/login/google.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,7 +5,7 @@
  */
 
 if (! in_array ('google', $appconf['User']['login_methods'])) {
-	echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+	echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 	return;
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/login/newuser.php elefant-elefant_1_3_3_beta/apps/user/handlers/login/newuser.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/login/newuser.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/login/newuser.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,7 +5,7 @@
  */
 
 if (! $appconf['Custom Handlers']['user/signup']) {
-	echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+	echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 	return;
 }
 
@@ -39,12 +39,12 @@
 	@error_log ('Error creating profile: ' . $u->error);
 	$page->title = 'An Error Occurred';
 	echo '<p>Please try again later.</p>';
-	echo '<p><a href="/">' . i18n_get ('Back') . '</a></p>';
+	echo '<p><a href="/">' . __ ('Back') . '</a></p>';
 } else {
 	$u = new User;
 	$u = $f->merge_values ($u);
 	$u->failed = $f->failed;
-	$page->title = i18n_get ('New User');
+	$page->title = __ ('New User');
 	echo $tpl->render ('user/login/newuser', $u);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/login/openid.php elefant-elefant_1_3_3_beta/apps/user/handlers/login/openid.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/login/openid.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/login/openid.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,7 +5,7 @@
  */
 
 if (! in_array ('openid', $appconf['User']['login_methods'])) {
-	echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+	echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 	return;
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/login/twitter.php elefant-elefant_1_3_3_beta/apps/user/handlers/login/twitter.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/login/twitter.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/login/twitter.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,7 +5,7 @@
  */
 
 if (! in_array ('twitter', $appconf['User']['login_methods'])) {
-	echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+	echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 	return;
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/login.php elefant-elefant_1_3_3_beta/apps/user/handlers/login.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/login.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/login.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 
 if ($appconf['Custom Handlers']['user/login'] != 'user/login') {
 	if (! $appconf['Custom Handlers']['user/login']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	echo $this->run ($appconf['Custom Handlers']['user/login'], $data);
@@ -15,7 +15,7 @@
 }
 
 if (! $this->internal) {
-	$page->title = i18n_get ('Members');
+	$page->title = __ ('Members');
 }
 
 if (isset ($_GET['redirect'])) {
@@ -35,7 +35,7 @@
 
 if (! User::require_login ()) {
 	if (! $this->internal && ! empty ($_POST['username'])) {
-		echo '<p>' . i18n_get ('Incorrect email or password, please try again.') . '</p>';
+		echo '<p>' . __ ('Incorrect email or password, please try again.') . '</p>';
 	}
 	$_POST['signup_handler'] = $appconf['Custom Handlers']['user/signup'];
 	echo $tpl->render ('user/login', $_POST);
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/logout.php elefant-elefant_1_3_3_beta/apps/user/handlers/logout.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/logout.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/logout.php	2013-03-20 13:48:44.000000000 -0500
@@ -7,7 +7,7 @@
 
 if ($appconf['Custom Handlers']['user/logout'] != 'user/logout') {
 	if (! $appconf['Custom Handlers']['user/logout']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	echo $this->run ($appconf['Custom Handlers']['user/logout'], $data);
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/newpass.php elefant-elefant_1_3_3_beta/apps/user/handlers/newpass.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/newpass.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/newpass.php	2013-03-20 13:48:44.000000000 -0500
@@ -24,18 +24,18 @@
 		$_POST['username'] = $u->email;
 		User::require_login ();
 
-		$page->title = i18n_get ('Password updated');
-		echo '<p><a href="/user">' . i18n_get ('Continue') . '</a></p>';
+		$page->title = __ ('Password updated');
+		echo '<p><a href="/user">' . __ ('Continue') . '</a></p>';
 	} else {
 		$u = new StdClass;
 		$u = $f->merge_values ($u);
 		$u->failed = $f->failed;
-		$page->title = i18n_get ('Choose a new password');
+		$page->title = __ ('Choose a new password');
 		echo $tpl->render ('user/newpass', $u);
 	}
 } else {
-	$page->title = i18n_get ('Invalid or expired recovery link');
-	echo '<p><a href="/">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Invalid or expired recovery link');
+	echo '<p><a href="/">' . __ ('Continue') . '</a></p>';
 }
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/recover.php elefant-elefant_1_3_3_beta/apps/user/handlers/recover.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/recover.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/recover.php	2013-03-20 13:48:44.000000000 -0500
@@ -19,7 +19,7 @@
 	try {
 		Mailer::send (array (
 			'to' => array ($u->email, $u->name),
-			'subject' => i18n_get ('Password recovery'),
+			'subject' => __ ('Password recovery'),
 			'text' => $tpl->render ('user/email/recover', array (
 				'recover' => $data['recover'],
 				'email' => $u->email,
@@ -28,20 +28,20 @@
 		));
 	} catch (Exception $e) {
 		@error_log ('Email failed (user/recover): ' . $_POST['email']);
-		$page->title = i18n_get ('An Error Occurred');
-		echo '<p>' . i18n_get ('Please try again later.') . '</p>';
-		echo '<p><a href="/">' . i18n_get ('Back') . '</a></p>';
+		$page->title = __ ('An Error Occurred');
+		echo '<p>' . __ ('Please try again later.') . '</p>';
+		echo '<p><a href="/">' . __ ('Back') . '</a></p>';
 		return;
 	}
 
-	$page->title = i18n_get ('Check your inbox');
-	echo '<p>' . i18n_get ('An email has been sent with a link to reset your password.') . '</p>';
+	$page->title = __ ('Check your inbox');
+	echo '<p>' . __ ('An email has been sent with a link to reset your password.') . '</p>';
 } else {
 	$u = new StdClass;
 	$u->email = '';
 	$u = $f->merge_values ($u);
 	$u->failed = $f->failed;
-	$page->title = i18n_get ('Forgot your password?');
+	$page->title = __ ('Forgot your password?');
 	echo $tpl->render ('user/recover', $u);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/settings.php elefant-elefant_1_3_3_beta/apps/user/handlers/settings.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/settings.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/settings.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,73 @@
+<?php
+
+/**
+ * This is the settings form for the user app.
+ */
+
+$this->require_admin ();
+
+require_once ('apps/admin/lib/Functions.php');
+
+$page->layout = 'admin';
+$page->title = __ ('User Settings');
+
+$form = new Form ('post', $this);
+
+$appconf['User']['login_methods'] = is_array ($appconf['User']['login_methods'])
+	? $appconf['User']['login_methods']
+	: array ();
+
+$form->data = array (
+	'facebook_app_id' => $appconf['Facebook']['application_id'],
+	'facebook_app_secret' => $appconf['Facebook']['application_secret'],
+	'twitter_key' => $appconf['Twitter']['consumer_key'],
+	'twitter_secret' => $appconf['Twitter']['consumer_secret'],
+	'login_openid' => in_array ('openid', $appconf['User']['login_methods']),
+	'login_google' => in_array ('google', $appconf['User']['login_methods']),
+	'login_facebook' => in_array ('facebook', $appconf['User']['login_methods']),
+	'login_twitter' => in_array ('twitter', $appconf['User']['login_methods'])
+);
+
+echo $form->handle (function ($form) {
+	$login_methods = array ();
+	if ($_POST['login_openid'] === 'yes') {
+		$login_methods[] = 'openid';
+	}
+	if ($_POST['login_google'] === 'yes') {
+		$login_methods[] = 'google';
+	}
+	if ($_POST['login_facebook'] === 'yes') {
+		$login_methods[] = 'facebook';
+	}
+	if ($_POST['login_twitter'] === 'yes') {
+		$login_methods[] = 'twitter';
+	}
+	if (count ($login_methods) === 0) {
+		$login_methods = false;
+	}
+
+	if (! Ini::write (
+		array (
+			'User' => array (
+				'login_methods' => $login_methods
+			),
+			'Facebook' => array (
+				'application_id' => $_POST['facebook_app_id'],
+				'application_secret' => $_POST['facebook_app_secret']
+			),
+			'Twitter' => array (
+				'consumer_key' => $_POST['twitter_key'],
+				'consumer_secret' => $_POST['twitter_secret']
+			)
+		),
+		'conf/app.user.' . ELEFANT_ENV . '.php'
+	)) {
+		printf ('<p>%s</p>', __ ('Unable to save changes. Check your folder permissions and try again.'));
+		return;
+	}
+
+	$form->controller->add_notification (__ ('Settings saved.'));
+	$form->controller->redirect ('/user/admin');
+});
+
+?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/user/handlers/sidebar.php and elefant-elefant_1_3_3_beta/apps/user/handlers/sidebar.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/signup.php elefant-elefant_1_3_3_beta/apps/user/handlers/signup.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/signup.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/signup.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 if ($appconf['Custom Handlers']['user/signup'] != 'user/signup') {
 	if (! $appconf['Custom Handlers']['user/signup']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	echo $this->run ($appconf['Custom Handlers']['user/signup'], $data);
@@ -33,7 +33,7 @@
 		try {
 			Mailer::send (array (
 				'to' => array ($_POST['email'], $_POST['name']),
-				'subject' => i18n_get ('Please confirm your email address'),
+				'subject' => __ ('Please confirm your email address'),
 				'text' => $tpl->render ('user/email/verification', array (
 					'verifier' => $verifier,
 					'email' => $_POST['email'],
@@ -51,14 +51,14 @@
 		$this->redirect ('/user');
 	}
 	@error_log ('Error creating profile: ' . $u->error);
-	$page->title = i18n_get ('An Error Occurred');
-	echo '<p>' . i18n_get ('Please try again later.') . '</p>';
-	echo '<p><a href="/">' . i18n_get ('Back') . '</a></p>';
+	$page->title = __ ('An Error Occurred');
+	echo '<p>' . __ ('Please try again later.') . '</p>';
+	echo '<p><a href="/">' . __ ('Back') . '</a></p>';
 } else {
 	$u = new User;
 	$u = $f->merge_values ($u);
 	$u->failed = $f->failed;
-	$page->title = i18n_get ('Sign Up');
+	$page->title = __ ('Sign Up');
 	echo $tpl->render ('user/signup', $u);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/too-many-attempts.php elefant-elefant_1_3_3_beta/apps/user/handlers/too-many-attempts.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/too-many-attempts.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/too-many-attempts.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,10 +1,10 @@
 <?php
 
-$page->title = i18n_get ('Too many login attempts');
+$page->title = __ ('Too many login attempts');
 
 printf (
 	'<p>%s</p>',
-	i18n_getf (
+	__ (
 		'Your account has been locked temporarily as a security precaution. Please try again in %d minutes.',
 		($appconf['User']['block_attempts_for'] / 60)
 	)
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/update.php elefant-elefant_1_3_3_beta/apps/user/handlers/update.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/update.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/update.php	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 
 if ($appconf['Custom Handlers']['user/update'] != 'user/update') {
 	if (! $appconf['Custom Handlers']['user/update']) {
-		echo $this->error (404, i18n_get ('Not found'), i18n_get ('The page you requested could not be found.'));
+		echo $this->error (404, __ ('Not found'), __ ('The page you requested could not be found.'));
 		return;
 	}
 	echo $this->run ($appconf['Custom Handlers']['user/update'], $data);
@@ -14,7 +14,7 @@
 }
 
 if (! User::require_login ()) {
-	$page->title = i18n_get ('Members');
+	$page->title = __ ('Members');
 	echo $this->run ('user/login');
 	return;
 }
@@ -31,19 +31,19 @@
 	$u->put ();
 	Versions::add ($u);
 	if (! $u->error) {
-		$page->title = i18n_get ('Profile Updated');
-		echo '<p><a href="/user">' . i18n_get ('Continue') . '</a></p>';
+		$page->title = __ ('Profile Updated');
+		echo '<p><a href="/user">' . __ ('Continue') . '</a></p>';
 		return;
 	}
 	@error_log ('Error updating profile (#' . $u->id . '): ' . $u->error);
-	$page->title = i18n_get ('An Error Occurred');
-	echo '<p>' . i18n_get ('Please try again later.') . '</p>';
-	echo '<p><a href="/user">' . i18n_get ('Back') . '</a></p>';
+	$page->title = __ ('An Error Occurred');
+	echo '<p>' . __ ('Please try again later.') . '</p>';
+	echo '<p><a href="/user">' . __ ('Back') . '</a></p>';
 } else {
 	$u->password = '';
 	$u = $f->merge_values ($u);
 	$u->failed = $f->failed;
-	$page->title = i18n_get ('Update Profile');
+	$page->title = __ ('Update Profile');
 	echo $tpl->render ('user/update', $u);
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/upgrade.php elefant-elefant_1_3_3_beta/apps/user/handlers/upgrade.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/upgrade.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/upgrade.php	2013-03-20 13:48:44.000000000 -0500
@@ -5,26 +5,26 @@
 $this->require_admin ();
 
 if ($this->installed ('user', $appconf['Admin']['version']) === true) {
-	$page->title = i18n_get ('Upgrade completed');
-	echo '<p><a href="/user/admin">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Upgrade completed');
+	echo '<p><a href="/user/admin">' . __ ('Continue') . '</a></p>';
 	return;
 }
 
-$page->title = i18n_get ('Upgrading User App');
+$page->title = __ ('Upgrading User App');
 
 $db = DB::get_connection (1);
 $dbtype = $db->getAttribute (PDO::ATTR_DRIVER_NAME);
 switch ($dbtype) {
 	case 'pgsql':
-		DB::execute ('alter table "user" alter column "password" type varchar(128)');
+		DB::execute ('alter table "#prefix#user" alter column "password" type varchar(128)');
 		break;
 	case 'mysql':
-		DB::execute ('alter table `user` change column `password` `password` varchar(128) not null');
+		DB::execute ('alter table `#prefix#user` change column `password` `password` varchar(128) not null');
 		break;
 	case 'sqlite':
 		DB::execute ('begin transaction');
-		DB::execute ('alter table `user` rename to `tmp_user`');
-		DB::execute ('create table user (
+		DB::execute ('alter table `#prefix#user` rename to `tmp_user`');
+		DB::execute ('create table #prefix#user (
 			id integer primary key,
 			email char(72) unique not null,
 			password char(128) not null,
@@ -36,16 +36,16 @@
 			updated datetime not null,
 			userdata text not null
 		)');
-		DB::execute ('create index user_email_password on user (email, password)');
-		DB::execute ('create index user_session_id on user (session_id)');
-		DB::execute ('insert into `user` (id, email, password, session_id, expires, name, type, signed_up, updated, userdata)
+		DB::execute ('create index #prefix#user_email_password on #prefix#user (email, password)');
+		DB::execute ('create index #prefix#user_session_id on #prefix#user (session_id)');
+		DB::execute ('insert into `#prefix#user` (id, email, password, session_id, expires, name, type, signed_up, updated, userdata)
 			select id, email, password, session_id, expires, name, type, signed_up, updated, userdata from `tmp_user`');
 		DB::execute ('drop table `tmp_user`');
 		DB::execute ('commit');
 		break;
 }
 
-echo '<p>' . i18n_get ('Done.') . '</p>';
+echo '<p>' . __ ('Done.') . '</p>';
 
 $this->mark_installed ('user', $appconf['Admin']['version']);
 
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/util/userchooser.php elefant-elefant_1_3_3_beta/apps/user/handlers/util/userchooser.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/util/userchooser.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/util/userchooser.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,56 @@
+<?php
+
+/**
+ * Provides a modal dialog to browse for users.
+ *
+ * Usage:
+ *
+ * 1. Load this handler either in your handler:
+ *
+ *     $this->run ('user/util/userchooser');
+ *
+ * Or anywhere in your view:
+ *
+ *     {! user/util/userchooser !}
+ *
+ * 2. User the $.userchooser() function to open the dialog window:
+ *
+ *     $.userchooser ({
+ *         set_id_value: '#field-id',
+ *         set_name_value: '#display-name',
+ *         callback: function (id, name, email) {
+ *             console.log (id);
+ *             console.log (name);
+ *             console.log (email);
+ *         }
+ *     });
+ *
+ * Options:
+ *
+ * - callback:        A function to call with the user id, name, and email.
+ * - chosen:          A list of users that shouldn't be selectable.
+ * - chosen_visible:  Whether to display the disabled chosen users or hide them.
+ * - set_id_value:    The selector of an input or element to update with the user id.
+ * - set_name_value:  The selector of an input or element to update with the user name.
+ * - set_email_value: The selector of an input or element to update with the user email.
+ * - set_mailto:      The selector of a link to set the mailto: value for.
+ */
+
+$this->run ('admin/util/fontawesome');
+$this->run ('admin/util/modal');
+
+$page->add_style ('/apps/user/css/userchooser.css');
+$page->add_script ('/js/jquery.quickpager.js');
+$page->add_script ('/js/jquery.verify_values.js');
+$page->add_script ('/apps/user/js/jquery.adduser.js');
+$page->add_script ('/apps/user/js/jquery.userchooser.js');
+$page->add_script (
+	I18n::export (
+		'Add User',
+		'Choose a User',
+		'Search',
+		'Unable to load the user list. Please try again in a few seconds.'
+	)
+);
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/handlers/verify.php elefant-elefant_1_3_3_beta/apps/user/handlers/verify.php
--- elefant-elefant_1_3_2_beta/apps/user/handlers/verify.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/handlers/verify.php	2013-03-20 13:48:44.000000000 -0500
@@ -10,16 +10,16 @@
 
 $data = $row->userdata;
 
-if ($row && isset ($data->verifier) && $data->verifier == $_GET['verifier']) {
-	unset ($data->verifier);
+if ($row && isset ($data['verifier']) && $data['verifier'] == $_GET['verifier']) {
+	unset ($data['verifier']);
 	$row->userdata = $data;
 	$row->put ();
 
-	$page->title = i18n_get ('Account Verified');
-	echo '<p><a href="/user">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Account Verified');
+	echo '<p><a href="/user">' . __ ('Continue') . '</a></p>';
 } else {
-	$page->title = i18n_get ('Invalid Verifier');
-	echo '<p><a href="/">' . i18n_get ('Continue') . '</a></p>';
+	$page->title = __ ('Invalid Verifier');
+	echo '<p><a href="/">' . __ ('Continue') . '</a></p>';
 }
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/js/jquery.adduser.js elefant-elefant_1_3_3_beta/apps/user/js/jquery.adduser.js
--- elefant-elefant_1_3_2_beta/apps/user/js/jquery.adduser.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/js/jquery.adduser.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,71 @@
+/**
+ * Used by the user/util/userchooser handler to provide a
+ * user add form for adding users directly from the user
+ * chooser.
+ */
+;(function () {
+	var self = {};
+
+	// Current list of options
+	self.opts = {};
+
+	// The HTML for the add form
+	self.html = '';
+
+	// Initialized
+	self.initialized = false;
+
+	self.init = function () {
+		$.get (
+			'/user/chooser/addform',
+			function (res) {
+				self.html = res;
+				self.initialized = true;
+			}
+		);
+	};
+
+	self.add_user = function () {
+		$.post (
+			'/user/chooser/adduser',
+			$(this).serializeArray (),
+			function (res) {
+				if (! res.success) {
+					$('#adduser-error').html (res.error).show ();
+					$('#adduser-form').parent ('div').scrollTop (0);
+					return;
+				}
+
+				if (self.opts.callback) {
+					self.opts.callback (res.data.id, res.data.name, res.data.email);
+				}
+				$.close_dialog ();
+			}
+		);
+		return false;
+	};
+
+	$.add_user = function (opts) {
+		var defaults = {
+			callback: null,
+			title: $.i18n ('Add User')
+		}
+
+		self.opts = $.extend (defaults, opts);
+
+		if (! self.initialized) {
+			alert ($.i18n ('Unable to load the add user form. Please try again in a few seconds.'));
+			return;
+		}
+
+		$.open_dialog (self.opts.title, self.html, {height: 325});
+
+		$('#adduser-form').submit (self.add_user);
+		$('#adduser-cancel').click (function () {
+			$.close_dialog ();
+			return false;
+		});
+	};
+
+	self.init ();
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/js/jquery.userchooser.js elefant-elefant_1_3_3_beta/apps/user/js/jquery.userchooser.js
--- elefant-elefant_1_3_2_beta/apps/user/js/jquery.userchooser.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/js/jquery.userchooser.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,210 @@
+/**
+ * Used by the user/util/userchooser handler to provide a
+ * user chooser dialog for app developers.
+ */
+;(function () {
+	var self = {};
+
+	// Current list of options
+	self.opts = {};
+
+	// List of users
+	self.users = [];
+
+	// Initialized
+	self.initialized = false;
+
+	self.init = function () {
+		$.get (
+			'/user/chooser',
+			function (res) {
+				self.users = res;
+				self.initialized = true;
+			}
+		);
+	};
+
+	self.search_users = function () {
+		var q = $('#userchooser-input').val ().toLowerCase ();
+
+		$('.simplePagerNav, .simplePagerContainer').remove ();
+		var list = $('<ul id="userchooser-list" class="clearfix"></ul>');
+		
+		for (var i = 0; i < self.users.length; i++) {
+			if (q === '' || self.users[i].name.toLowerCase ().match (q)) {
+				if ($.inArray (parseInt (self.users[i].id), self.opts.chosen) > -1) {
+					if (self.opts.chosen_visible) {
+						list.append ('<li><span class="userchooser-disabled"><i class="icon-user"></i> ' + self.users[i].name + '</span></li>');
+					}
+				} else {
+					list.append (
+						$('<li></li>').append (
+							$('<a href="#"></a>')
+								.addClass ('userchooser-user')
+								.data ('id', self.users[i].id)
+								.data ('name', self.users[i].name)
+								.data ('email', self.users[i].email)
+								.html ('<i class="icon-user"></i> ' + self.users[i].name)
+						)
+					);
+				}
+			}
+		}
+
+		$('#userchooser-wrapper').append (list);
+		list.quickPager ();
+		
+		$('.userchooser-user').click (self.return_user);
+
+		return false;
+	};
+
+	self.open_add_user = function () {
+		$.add_user ({
+			callback: self.add_user
+		});
+		return false;
+	};
+
+	self.add_user = function (id, name, email) {
+		self.users.push ({id: id, name: name, email: email});
+		self.users.sort (function (a, b) {
+			if (typeof b === 'boolean') {
+				return -1;
+			}
+
+			var a_name = a.name.toLowerCase (),
+				b_name = b.name.toLowerCase ();
+
+			if (a_name < b_name) {
+				return -1;
+			} else if (a_name > b_name) {
+				return 1;
+			}
+			return 0;
+		});
+
+		self.search_users ();
+
+		// highlight the newly added user
+		var i = 0;
+		$('.userchooser-user, .userchooser-disabled').each (function () {
+			if ($(this).data ('id') === id) {
+				$(this).addClass ('user-added');
+				$('.simplePageNav' + Math.ceil ((i + 1) / 10) + ' a').click ();
+			} else {
+				$(this).removeClass ('user-added');
+			}
+			i++;
+		});
+	};
+
+	self.return_user = function () {
+		var id = $(this).data ('id'),
+			name = $(this).data ('name'),
+			email = $(this).data ('email');
+
+		if (self.opts.set_id_value) {
+			var el = $(self.opts.set_id_value),
+				tag = el.get (0).nodeName.toLowerCase ();
+			if (tag === 'input') {
+				$(el).val (id);
+			} else {
+				$(el).text (id);
+			}
+		}
+
+		if (self.opts.set_name_value) {
+			var el = $(self.opts.set_name_value),
+				tag = el.get (0).nodeName.toLowerCase ();
+			if (tag === 'input') {
+				$(el).val (name);
+			} else {
+				$(el).text (name);
+			}
+		}
+
+		if (self.opts.set_email_value) {
+			var el = $(self.opts.set_email_value),
+				tag = el.get (0).nodeName.toLowerCase ();
+			if (tag === 'input') {
+				$(el).val (email);
+			} else {
+				$(el).text (email);
+			}
+		}
+
+		if (self.opts.set_mailto) {
+			$(self.opts.set_mailto).attr ('href', 'mailto:' + email);
+		}
+
+		if (self.opts.callback) {
+			self.opts.callback (id, name, email);
+		}
+
+		$.close_dialog ();
+		return false;
+	};
+	
+	$.userchooser = function (opts) {
+		var defaults = {
+			callback: null,
+			set_id_value: null,
+			set_name_value: null,
+			set_email_value: null,
+			set_mailto: null,
+			title: $.i18n ('Choose a User'),
+			chosen: [],
+			chosen_visible: true
+		};
+	
+		self.opts = $.extend (defaults, opts);
+		
+		if (! self.initialized) {
+			alert ($.i18n ('Unable to load the user list. Please try again in a few seconds.'));
+			return;
+		}
+
+		var html = '<div id="userchooser-wrapper">' +
+			'<a href="#" id="userchooser-add-link" class="clearfix">' + $.i18n ('Add User') + '</a>' +
+			'<div id="userchooser-search">' +
+				'<form id="userchooser-form">' +
+					'<input type="text" name="userchooser-input" id="userchooser-input" size="30" />' +
+					'<input type="submit" value="' + $.i18n ('Search') + '" />' +
+				'</form>' +
+			'</div>' +
+			'<ul id="userchooser-list" class="clearfix"></ul>' +
+		'</div>';
+
+		$.open_dialog (self.opts.title, html, {height: 325});
+
+		var list = $('#userchooser-list');
+		
+		for (var i = 0; i < self.users.length; i++) {
+			if ($.inArray (parseInt (self.users[i].id), self.opts.chosen) > -1) {
+				if (self.opts.chosen_visible) {
+					list.append ('<li><span class="userchooser-disabled"><i class="icon-user"></i> ' + self.users[i].name + '</span></li>');
+				}
+			} else {
+				list.append (
+					$('<li></li>').append (
+						$('<a href="#"></a>')
+							.addClass ('userchooser-user')
+							.data ('id', self.users[i].id)
+							.data ('name', self.users[i].name)
+							.data ('email', self.users[i].email)
+							.html ('<i class="icon-user"></i> ' + self.users[i].name)
+					)
+				);
+			}
+		}
+
+		list.quickPager ();
+		
+		$('#userchooser-form').submit (self.search_users);
+		$('.userchooser-user').click (self.return_user);
+		$('#userchooser-add-link').click (self.open_add_user);
+	};
+
+	self.init ();
+})(jQuery);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/user/lib/Auth/Basic.php and elefant-elefant_1_3_3_beta/apps/user/lib/Auth/Basic.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/lib/Auth/HMAC.php and elefant-elefant_1_3_3_beta/apps/user/lib/Auth/HMAC.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/lib/LightOpenID.php and elefant-elefant_1_3_3_beta/apps/user/lib/LightOpenID.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/lib/tmhOAuth.php and elefant-elefant_1_3_3_beta/apps/user/lib/tmhOAuth.php are identical
Files elefant-elefant_1_3_2_beta/apps/user/lib/tmhUtilities.php and elefant-elefant_1_3_3_beta/apps/user/lib/tmhUtilities.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/models/User.php elefant-elefant_1_3_3_beta/apps/user/models/User.php
--- elefant-elefant_1_3_2_beta/apps/user/models/User.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/models/User.php	2013-03-20 13:48:44.000000000 -0500
@@ -54,7 +54,7 @@
  *
  *     // Send unauth users to myapp/login view
  *     if (! User::require_login ()) {
- *         $page->title = i18n_get ('Members');
+ *         $page->title = __ ('Members');
  *         echo $this->run ('user/login');
  *         return;
  *     }
@@ -89,6 +89,11 @@
  */
 class User extends ExtendedModel {
 	/**
+	 * The database table name.
+	 */
+	public $table = '#prefix#user';
+
+	/**
 	 * Tell the ExtendedModel which field should contain the extended properties.
 	 */
 	public $_extended_field = 'userdata';
@@ -116,6 +121,20 @@
 	}
 
 	/**
+	 * Takes a length and returns a random string of characters of that
+	 * length for use in passwords. String may contain any number, lower
+	 * or uppercase letters, or common symbols.
+	 */
+	public static function generate_pass ($length = 8) {
+		$list = '123467890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()_-+=~:;|<>[]{}?"\'';
+		$pass = '';
+		while (strlen ($pass) < $length) {
+			$pass .= substr ($list, mt_rand (0, strlen ($list)), 1);
+		}
+		return $pass;
+	}
+
+	/**
 	 * Verifies a username/password combo against the database.
 	 * Username is matched to the email field. If things check out,
 	 * a session_id is generated and initialized in the database
@@ -131,7 +150,7 @@
 		}
 
 		$u = DB::single (
-			'select * from `user` where email = ?',
+			'select * from `#prefix#user` where email = ?',
 			$user
 		);
 
@@ -196,7 +215,7 @@
 			return call_user_func ($callback, $_POST['username'], $_POST['password']);
 		} elseif (isset ($_SESSION['session_id'])) {
 			$u = DB::single (
-				'select * from `user` where session_id = ? and expires > ?',
+				'select * from `#prefix#user` where session_id = ? and expires > ?',
 				$_SESSION['session_id'],
 				gmdate ('Y-m-d H:i:s')
 			);
@@ -279,6 +298,16 @@
 	}
 
 	/**
+	 * Fetch or set the currently active user.
+	 */
+	public static function current (User $current = null) {
+		if ($current !== null) {
+			self::$user = $current;
+		}
+		return self::$user;
+	}
+
+	/**
 	 * Loads the access control list for the `access()` method.
 	 */
 	private static function load_acl () {
@@ -286,7 +315,7 @@
 			$appconf = parse_ini_file ('apps/user/conf/config.php', TRUE);
 			self::$acl = $appconf['Access'];
 			// make the default access levels translatable
-			i18n_get ('Public'); i18n_get ('Member'); i18n_get ('Private');
+			__ ('Public'); __ ('Member'); __ ('Private');
 		}
 	}
 
@@ -301,26 +330,36 @@
 			return FALSE;
 		}
 
-		if (self::$acl[$access] === 'all') {
-			return TRUE;
+		if (! is_array (self::$acl[$access])) {
+			if (strpos (self::$acl[$access], ',') !== false) {
+				self::$acl[$access] = preg_split ('/, ?/', self::$acl[$access]);
+			} else {
+				self::$acl[$access] = array (self::$acl[$access]);
+			}
 		}
 
-		if (self::$acl[$access] === 'login' && self::is_valid ()) {
-			return TRUE;
-		}
+		foreach (self::$acl[$access] as $access_level) {
+			if ($access_level === 'all') {
+				return TRUE;
+			}
 
-		if (self::$acl[$access] === 'admin' && self::is ('admin')) {
-			return TRUE;
-		}
+			if ($access_level === 'login' && self::is_valid ()) {
+				return TRUE;
+			}
 
-		if (strpos (self::$acl[$access], 'type:') === 0) {
-			$type = str_replace ('type:', '', self::$acl[$access]);
-		} else {
-			$type = self::$acl[$access];
-		}
+			if ($access_level === 'admin' && self::is ('admin')) {
+				return TRUE;
+			}
 
-		if (self::is ($type)) {
-			return TRUE;
+			if (strpos ($access_level, 'type:') === 0) {
+				$type = str_replace ('type:', '', $access_level);
+			} else {
+				$type = $access_level;
+			}
+
+			if (self::is ($type)) {
+				return TRUE;
+			}
 		}
 
 		return FALSE;
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/models/User_OpenID.php elefant-elefant_1_3_3_beta/apps/user/models/User_OpenID.php
--- elefant-elefant_1_3_2_beta/apps/user/models/User_OpenID.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/models/User_OpenID.php	2013-03-20 13:48:44.000000000 -0500
@@ -33,6 +33,14 @@
  * user_id
  */
 class User_OpenID extends Model {
+	/**
+	 * The database table name.
+	 */
+	public $table = '#prefix#user_openid';
+
+	/**
+	 * The default token name.
+	 */
 	public $key = 'token';
 
 	/**
Files elefant-elefant_1_3_2_beta/apps/user/pix/facebook.png and elefant-elefant_1_3_3_beta/apps/user/pix/facebook.png are identical
Files elefant-elefant_1_3_2_beta/apps/user/pix/google.png and elefant-elefant_1_3_3_beta/apps/user/pix/google.png are identical
Files elefant-elefant_1_3_2_beta/apps/user/pix/openid.png and elefant-elefant_1_3_3_beta/apps/user/pix/openid.png are identical
Files elefant-elefant_1_3_2_beta/apps/user/pix/twitter.png and elefant-elefant_1_3_3_beta/apps/user/pix/twitter.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/views/add.html elefant-elefant_1_3_3_beta/apps/user/views/add.html
--- elefant-elefant_1_3_2_beta/apps/user/views/add.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/views/add.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,3 +1,5 @@
+<div class="form">
+
 <form method="POST" id="add-form">
 <p>{"Name"}:<br /><input type="text" name="name" size="40" value="{{ name }}" />
 <span class="notice" id="name-notice">{"You must enter a name."}</span></p>
@@ -13,12 +15,17 @@
 	<option value="{{ loop_value }}"{% if type === $data->loop_value %} selected {% end %}>{{ loop_value|ucfirst }}</option>
 {% end %}
 </select></p>
+
+{! admin/util/extended?extends=User !}
+
 <p>
-	<input type="submit" value="Add User"}" />&nbsp;
+	<input type="submit" value="{"Add User"}" />&nbsp;
 	<a href="javascript:history.go(-1)" onclick="return $.cancel_autosave ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
 </p>
 </form>
 
+</div>
+
 <script type="text/javascript" src="/js/jquery.verify_values.js"></script>
 <script type="text/javascript">
 $(function () {
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/views/admin.html elefant-elefant_1_3_3_beta/apps/user/views/admin.html
--- elefant-elefant_1_3_2_beta/apps/user/views/admin.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/views/admin.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,4 +1,10 @@
-<p><a href="/user/add">{"Add User"}</a></p>
+<p>
+	<a href="/user/add">{"Add User"}</a>
+	&nbsp;|&nbsp;
+	<a href="/user/settings">{"Settings"}</a>
+	&nbsp;|&nbsp;
+	<a href="/admin/extended?extends=User&name=Users">{"Custom Fields"}</a>
+</p>
 
 <p style="float: left">
 {! navigation/pager?style=results&url=[url]&total=[total]&count=[count]&limit=[limit] !}
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/views/chooser/addform.html elefant-elefant_1_3_3_beta/apps/user/views/chooser/addform.html
--- elefant-elefant_1_3_2_beta/apps/user/views/chooser/addform.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/views/chooser/addform.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,47 @@
+<p class="notice" id="adduser-error" style="font-weight: bold"></p>
+
+<form method="POST" id="adduser-form">
+<p>{"Name"}:<br /><input type="text" name="name" size="40" value="{{ name }}" />
+<span class="notice" id="name-notice">{"You must enter a name."}</span></p>
+<p>{"Email"}:<br /><input type="text" name="email" size="40" value="{{ email }}" />
+<span class="notice" id="email-notice">{"You must enter an email address."}</span></p>
+<p>{"Password"}:<br /><input type="password" name="password" size="20" value="{{ password }}" />
+<span class="notice" id="password-notice">{"You must enter a password."}</span></p>
+<p>{"Verify password"}:<br /><input type="password" name="verify_pass" size="20" value="{{ verify_pass }}" />
+<span class="notice" id="verify_pass-notice">{"Your password doesn't match."}</span></p>
+<p>{"User type"}:<br />
+<select name="type">
+{% foreach types %}
+	<option value="{{ loop_value }}"{% if type === $data->loop_value %} selected {% end %}>{{ loop_value|ucfirst }}</option>
+{% end %}
+</select></p>
+
+{! admin/util/extended?extends=User !}
+
+<p>
+	<input type="submit" value="{"Add User"}" />&nbsp;
+	<a href="javascript:void(0)" id="adduser-cancel">{"Cancel"}</a>
+</p>
+</form>
+
+<script type="text/javascript">
+$(function () {
+	$('#adduser-form').verify_values ({
+		handler: 'user/add',
+		callback: function (failed) {
+			// highlight the failed elements
+			for (var i = 0; i < failed.length; i++) {
+				$('#' + failed[i] + '-notice').show ();
+			}
+		},
+		reset: function (fields) {
+			for (var i = 0; i < fields.length; i++) {
+				$('#' + fields[i] + '-notice').hide ();
+			}
+		}
+	});
+	{% foreach failed %}
+	$('#{{ loop_value }}-notice').show ();
+	{% end %}
+});
+</script>
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/views/edit.html elefant-elefant_1_3_3_beta/apps/user/views/edit.html
--- elefant-elefant_1_3_2_beta/apps/user/views/edit.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/apps/user/views/edit.html	2013-03-20 13:48:44.000000000 -0500
@@ -1,3 +1,5 @@
+<div class="form">
+
 <form method="POST" id="add-form">
 <p>{"Name"}:<br /><input type="text" name="name" size="40" value="{{ name|quotes }}" />
 <span class="notice" id="name-notice">{"You must enter a name."}</span></p>
@@ -13,9 +15,14 @@
 	<option value="{{ loop_value }}"{% if type === $data->loop_value %} selected {% end %}>{{ loop_value|ucfirst }}</option>
 {% end %}
 </select></p>
+
+{! admin/util/extended?extends=User&values=[userdata|none] !}
+
 <p><input type="submit" value="{"Save User"}" /></p>
 </form>
 
+</div>
+
 <script type="text/javascript" src="/js/jquery.verify_values.js"></script>
 <script type="text/javascript">
 $(function () {
Files elefant-elefant_1_3_2_beta/apps/user/views/email/recover.html and elefant-elefant_1_3_3_beta/apps/user/views/email/recover.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/email/verification.html and elefant-elefant_1_3_3_beta/apps/user/views/email/verification.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/index.html and elefant-elefant_1_3_3_beta/apps/user/views/index.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/login/newuser.html and elefant-elefant_1_3_3_beta/apps/user/views/login/newuser.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/login/openid.html and elefant-elefant_1_3_3_beta/apps/user/views/login/openid.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/login.html and elefant-elefant_1_3_3_beta/apps/user/views/login.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/newpass.html and elefant-elefant_1_3_3_beta/apps/user/views/newpass.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/recover.html and elefant-elefant_1_3_3_beta/apps/user/views/recover.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/apps/user/views/settings.html elefant-elefant_1_3_3_beta/apps/user/views/settings.html
--- elefant-elefant_1_3_2_beta/apps/user/views/settings.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/apps/user/views/settings.html	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,56 @@
+<div class="form">
+
+<form method="post" id="{{_form}}">
+
+<p>{"Login methods"}:<br />
+<input type="checkbox" name="login_facebook" id="login_facebook" value="yes"{% if login_facebook %} checked{% end %} /> {"Facebook"}<br />
+<input type="checkbox" name="login_google" id="login_google"value="yes"{% if login_google %} checked{% end %} /> {"Google"}<br />
+<input type="checkbox" name="login_openid" id="login_openid" value="yes"{% if login_openid %} checked{% end %} /> {"OpenID"}<br />
+<input type="checkbox" name="login_twitter" id="login_twitter" value="yes"{% if login_twitter %} checked{% end %} /> {"Twitter"}<br />
+
+<div id="facebook-info">
+<p><strong>{"Facebook"}</strong><br />
+<a href="https://developers.facebook.com/apps" target="_blank">{"Application ID"}</a>:<br />
+<input type="text" name="facebook_app_id" size="30" value="{{ facebook_app_id|quotes }}" />
+</p>
+
+<p>{"Application secret"}:<br />
+<input type="text" name="facebook_app_secret" size="30" value="{{ facebook_app_secret|quotes }}" />
+</p>
+</div>
+
+<div id="twitter-info">
+<p><strong>{"Twitter"}</strong><br />
+<a href="https://dev.twitter.com/apps/new" target="_blank">{"Consumer key"}</a>:<br />
+<input type="text" name="twitter_key" size="30" value="{{ twitter_key|quotes }}" />
+</p>
+
+<p>{"Consumer secret"}:<br />
+<input type="text" name="twitter_secret" size="30" value="{{ twitter_secret|quotes }}" />
+</p>
+</div>
+
+<p>
+	<input type="submit" value="{"Save Settings"}" />
+	&nbsp;
+	<a href="/user/admin" onclick="return confirm ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
+</p>
+
+</form>
+
+</div>
+
+<script>
+$(function () {
+	$('#facebook-info').toggle ($('#login_facebook').is (':checked'));
+	$('#twitter-info').toggle ($('#login_twitter').is (':checked'));
+
+	$('#login_facebook').click (function () {
+		$('#facebook-info').toggle (this.checked);
+	});
+
+	$('#login_twitter').click (function () {
+		$('#twitter-info').toggle (this.checked);
+	});
+});
+</script>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/apps/user/views/sidebar.html and elefant-elefant_1_3_3_beta/apps/user/views/sidebar.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/signup.html and elefant-elefant_1_3_3_beta/apps/user/views/signup.html are identical
Files elefant-elefant_1_3_2_beta/apps/user/views/update.html and elefant-elefant_1_3_3_beta/apps/user/views/update.html are identical
Files elefant-elefant_1_3_2_beta/cache/.htaccess and elefant-elefant_1_3_3_beta/cache/.htaccess are identical
Files elefant-elefant_1_3_2_beta/conf/.htaccess and elefant-elefant_1_3_3_beta/conf/.htaccess are identical
diff -urBNs elefant-elefant_1_3_2_beta/conf/config.php elefant-elefant_1_3_3_beta/conf/config.php
--- elefant-elefant_1_3_2_beta/conf/config.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/conf/config.php	2013-03-20 13:48:44.000000000 -0500
@@ -36,13 +36,32 @@
 
 compress_output = On
 
+; Set this to 'flat' to have all pages appear at the top-level,
+; for example /about-us, /products. Set this to 'nested' to have
+; page URLs appear as they are in your navigation tree, for
+; example /products/flowbee/benefits. Default is flat.
+
+page_url_style = flat
+
 ; For development, turn debugging on and Elefant will output
 ; helpful information on errors.
 
 debug = Off
 
+; For development, turn display_errors on and Elefant will
+; output fatal error messages in addition to the debugger.
+
+display_errors = Off
+
 [I18n]
 
+; Turn this on if your site is multilingual. This will change
+; the behaviour of the site navigation so that the appropriate
+; language's section of the site tree is shown, depending on
+; the user's language choice.
+
+multilingual = Off
+
 ; This is the method for determining which language to show the
 ; current visitor. Options are: url (e.g., /fr/), subdomain
 ; (e.g., fr.example.com), http (uses Accept-Language header),
@@ -57,6 +76,10 @@
 master[driver] = sqlite
 master[file] = "conf/site.db"
 
+; The database table name prefix.
+
+prefix = "elefant_"
+
 [Mongo]
 
 ; Settings to connect to MongoDB. Must have PHP Mongo extension
@@ -90,8 +113,9 @@
 ; is unavailable, it will emulate Memcache via the lib/Cache
 ; object, storing the cache in the `conf/datastore` folder.
 ; Alternately add `backend = redis` to use Redis as the cache
-; backend, or `backend = apc` to use APC as the cache backend.
-* Each of these cache options uses an identical API so you can
+; backend, `backend = apc` to use APC as the cache backend, or
+; `backend = xcache` to use XCache as the cache backend.
+; Each of these cache options uses an identical API so you can
 ; implement caching without worrying about the backend in
 ; development versus production.
 ;
diff -urBNs elefant-elefant_1_3_2_beta/conf/install_mysql.sql elefant-elefant_1_3_3_beta/conf/install_mysql.sql
--- elefant-elefant_1_3_2_beta/conf/install_mysql.sql	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/conf/install_mysql.sql	2013-03-20 13:48:44.000000000 -0500
@@ -1,6 +1,6 @@
 begin;
 
-create table webpage (
+create table #prefix#webpage (
 	id char(72) not null primary key,
 	title char(72) not null,
 	menu_title char(72) not null,
@@ -13,9 +13,9 @@
 	index (access)
 ) default charset=utf8;
 
-insert into webpage (id, title, menu_title, window_title, access, layout, description, keywords, body) values ('index', 'Welcome to Elefant', 'Home', '', 'public', 'default', '', '', '<table><tbody><tr><td><h3>Congratulations!</h3>You have successfully installed Elefant, the refreshingly simple new PHP web framework and CMS.</td><td><h3>Getting Started</h3>To log in as an administrator and edit pages, write a blog post, or upload files, go to <a href="/admin">/admin</a>.</td><td><h3>Developers</h3>Documentation, source code and issue tracking can be found at <a href="http://github.com/jbroadway/elefant">github.com/jbroadway/elefant</a></td></tr></tbody></table>');
+insert into #prefix#webpage (id, title, menu_title, window_title, access, layout, description, keywords, body) values ('index', 'Welcome to Elefant', 'Home', '', 'public', 'default', '', '', '<table><tbody><tr><td><h3>Congratulations!</h3>You have successfully installed Elefant, the refreshingly simple new PHP web framework and CMS.</td><td><h3>Getting Started</h3>To log in as an administrator and edit pages, write a blog post, or upload files, go to <a href="/admin">/admin</a>.</td><td><h3>Developers</h3>Documentation, source code and issue tracking can be found at <a href="http://github.com/jbroadway/elefant">github.com/jbroadway/elefant</a></td></tr></tbody></table>');
 
-create table block (
+create table #prefix#block (
 	id char(72) not null primary key,
 	title char(72) not null,
 	body text,
@@ -24,9 +24,9 @@
 	index (access)
 ) default charset=utf8;
 
-insert into block (id, title, access, body, show_title) values ('members', 'Members', 'public', '{! user/sidebar !}', 'no');
+insert into #prefix#block (id, title, access, body, show_title) values ('members', 'Members', 'public', '{! user/sidebar !}', 'no');
 
-create table user (
+create table #prefix#user (
 	id int not null auto_increment primary key,
 	email char(72) unique not null,
 	password char(128) not null,
@@ -41,14 +41,14 @@
 	index(session_id)
 ) default charset=utf8;
 
-insert into user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, now(), 'Admin User', 'admin', now(), now(), '[]');
+insert into #prefix#user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, now(), 'Admin User', 'admin', now(), now(), '[]');
 
-create table user_openid (
+create table #prefix#user_openid (
 	token char(200) primary key,
 	user_id int not null
 ) default charset=utf8;
 
-create table versions (
+create table #prefix#versions (
 	id int not null auto_increment primary key,
 	class char(72) not null,
 	pkey char(72) not null,
@@ -59,7 +59,7 @@
 	index (user, ts)
 ) default charset=utf8;
 
-create table api (
+create table #prefix#api (
 	token char(35) not null primary key,
 	api_key char(35) not null,
 	user_id int not null,
@@ -67,7 +67,7 @@
 	index (user_id)
 ) default charset=utf8;
 
-create table blog_post (
+create table #prefix#blog_post (
 	id int not null auto_increment primary key,
 	title char(72) not null,
 	ts datetime not null,
@@ -80,17 +80,17 @@
 	index (ts, published)
 ) default charset=utf8;
 
-create table blog_tag (
+create table #prefix#blog_tag (
 	id char(24) not null primary key
 ) default charset=utf8;
 
-create table blog_post_tag (
+create table #prefix#blog_post_tag (
 	tag_id char(24) not null,
 	post_id int not null,
 	primary key (tag_id, post_id)
 ) default charset=utf8;
 
-create table `lock` (
+create table `#prefix#lock` (
 	id int not null auto_increment primary key,
 	user int not null,
 	resource varchar(72) not null,
@@ -102,20 +102,32 @@
 	index (resource, resource_id, expires)
 ) default charset=utf8;
 
-create table filemanager_prop (
+create table #prefix#filemanager_prop (
 	file char(128) not null primary key,
 	prop char(32) not null,
 	value char(255) not null,
 	index (prop)
 ) default charset=utf8;
 
-create table apps (
+create table #prefix#apps (
 	name char(48) not null primary key,
 	version char(16) not null
 ) default charset=utf8;
 
-insert into apps (name, version) values ('blog', '1.1.3-stable');
-insert into apps (name, version) values ('user', '1.1.3-stable');
-insert into apps (name, version) values ('filemanager', '1.3.0-beta');
+insert into #prefix#apps (name, version) values ('blog', '1.1.3-stable');
+insert into #prefix#apps (name, version) values ('user', '1.1.3-stable');
+insert into #prefix#apps (name, version) values ('filemanager', '1.3.0-beta');
+
+create table #prefix#extended_fields (
+	id int not null primary key auto_increment,
+	class char(48) not null,
+	sort int not null,
+	name char(48) not null,
+	label char(48) not null,
+	type char(24) not null,
+	required int not null,
+	options char(255) not null,
+	index (class, sort)
+);
 
 commit;
diff -urBNs elefant-elefant_1_3_2_beta/conf/install_pgsql.sql elefant-elefant_1_3_3_beta/conf/install_pgsql.sql
--- elefant-elefant_1_3_2_beta/conf/install_pgsql.sql	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/conf/install_pgsql.sql	2013-03-20 13:48:44.000000000 -0500
@@ -1,6 +1,6 @@
 begin;
 
-create table webpage (
+create table #prefix#webpage (
 	id varchar(72) not null primary key,
 	title varchar(72) not null,
 	menu_title varchar(72) not null,
@@ -13,12 +13,12 @@
 	check (access in ('public','member','private'))
 );
 
-create index webpage_access on webpage (access);
+create index #prefix#webpage_access on #prefix#webpage (access);
 
-insert into webpage (id, title, menu_title, window_title, access, layout, description, keywords, body) values ('index', 'Welcome to Elefant', 'Home', '', 'public', 'default', '', '', '<table><tbody><tr><td><h3>Congratulations!</h3>You have successfully installed Elefant, the refreshingly simple new PHP web framework and CMS.</td><td><h3>Getting Started</h3>To log in as an administrator and edit pages, write a blog post, or upload files, go to <a href="/admin">/admin</a>.</td><td><h3>Developers</h3>Documentation, source code and issue tracking can be found at <a href="http://github.com/jbroadway/elefant">github.com/jbroadway/elefant</a></td></tr></tbody></table>');
+insert into #prefix#webpage (id, title, menu_title, window_title, access, layout, description, keywords, body) values ('index', 'Welcome to Elefant', 'Home', '', 'public', 'default', '', '', '<table><tbody><tr><td><h3>Congratulations!</h3>You have successfully installed Elefant, the refreshingly simple new PHP web framework and CMS.</td><td><h3>Getting Started</h3>To log in as an administrator and edit pages, write a blog post, or upload files, go to <a href="/admin">/admin</a>.</td><td><h3>Developers</h3>Documentation, source code and issue tracking can be found at <a href="http://github.com/jbroadway/elefant">github.com/jbroadway/elefant</a></td></tr></tbody></table>');
 
 
-create table block (
+create table #prefix#block (
 	id varchar(72) not null primary key,
 	title varchar(72) not null,
 	body text,
@@ -28,14 +28,14 @@
 	check (show_title in ('yes','no'))
 );
 
-create index block_access on block (id, access);
+create index #prefix#block_access on #prefix#block (id, access);
 
-insert into block (id, title, access, body, show_title) values ('members', 'Members', 'public', '{! user/sidebar !}', 'no');
+insert into #prefix#block (id, title, access, body, show_title) values ('members', 'Members', 'public', '{! user/sidebar !}', 'no');
 
-create sequence user_id_seq;
+create sequence #prefix#user_id_seq;
 
-create table "user" (
-	id integer not null default nextval('user_id_seq') primary key,
+create table #prefix#user (
+	id integer not null default nextval('#prefix#user_id_seq') primary key,
 	email varchar(72) unique not null,
 	password varchar(128) not null,
 	session_id varchar(32) unique,
@@ -47,20 +47,20 @@
 	userdata text not null
 );
 
-create index user_email_password on "user" (email, password);
-create index user_session_id on "user" (session_id);
+create index #prefix#user_email_password on #prefix#user (email, password);
+create index #prefix#user_session_id on #prefix#user (session_id);
 
-insert into "user" (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, now(), 'Admin User', 'admin', now(), now(), '[]');
+insert into #prefix#user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, now(), 'Admin User', 'admin', now(), now(), '[]');
 
-create table user_openid (
+create table #prefix#user_openid (
 	token varchar(200) primary key,
 	user_id integer not null
 );
 
-create sequence versions_id_seq;
+create sequence #prefix#versions_id_seq;
 
-create table versions (
-	id integer not null default nextval('versions_id_seq') primary key,
+create table #prefix#versions (
+	id integer not null default nextval('#prefix#versions_id_seq') primary key,
 	class varchar(72) not null,
 	pkey varchar(72) not null,
 	"user" integer not null,
@@ -68,22 +68,22 @@
 	serialized text not null
 );
 
-create index versions_class on versions (class, pkey, ts);
-create index versions_user on versions ("user", ts);
+create index #prefix#versions_class on #prefix#versions (class, pkey, ts);
+create index #prefix#versions_user on #prefix#versions ("user", ts);
 
-create table api (
+create table #prefix#api (
 	token varchar(35) not null primary key,
 	api_key varchar(35) not null,
 	user_id integer not null
 );
 
-create index api_token on api (token, api_key);
-create index api_user on api (user_id);
+create index #prefix#api_token on #prefix#api (token, api_key);
+create index #prefix#api_user on #prefix#api (user_id);
 
-create sequence blog_post_id_seq;
+create sequence #prefix#blog_post_id_seq;
 
-create table blog_post (
-	id integer not null default nextval('blog_post_id_seq') primary key,
+create table #prefix#blog_post (
+	id integer not null default nextval('#prefix#blog_post_id_seq') primary key,
 	title varchar(72) not null,
 	ts timestamp not null,
 	author varchar(32) not null,
@@ -94,23 +94,23 @@
 	check (published in ('yes', 'no'))
 );
 
-create index blog_post_ts on blog_post (ts);
-create index blog_post_pts on blog_post (ts, published);
+create index #prefix#blog_post_ts on #prefix#blog_post (ts);
+create index #prefix#blog_post_pts on #prefix#blog_post (ts, published);
 
-create table blog_tag (
+create table #prefix#blog_tag (
 	id varchar(24) not null primary key
 );
 
-create table blog_post_tag (
+create table #prefix#blog_post_tag (
 	tag_id varchar(24) not null,
 	post_id integer not null,
 	primary key (tag_id, post_id)
 );
 
-create sequence lock_id_seq;
+create sequence #prefix#lock_id_seq;
 
-create table lock (
-	id integer not null default nextval('lock_id_seq') primary key,
+create table #prefix#lock (
+	id integer not null default nextval('#prefix#lock_id_seq') primary key,
 	"user" integer not null,
 	resource varchar(72) not null,
 	resource_id varchar(72) not null,
@@ -119,24 +119,39 @@
 	modified timestamp not null
 );
 
-create index lock_resource on lock (resource, resource_id, expires);
-create index lock_user on lock ("user");
+create index #prefix#lock_resource on #prefix#lock (resource, resource_id, expires);
+create index #prefix#lock_user on #prefix#lock ("user");
 
-create table filemanager_prop (
+create table #prefix#filemanager_prop (
 	file char(128) not null primary key,
 	prop char(32) not null,
 	value char(255) not null
 );
 
-create index filemanager_prop_name on filemanager_prop (prop);
+create index #prefix#filemanager_prop_name on #prefix#filemanager_prop (prop);
 
-create table apps (
+create table #prefix#apps (
 	name varchar(48) not null primary key,
 	version varchar(16) not null
 );
 
-insert into apps (name, version) values ('blog', '1.1.3-stable');
-insert into apps (name, version) values ('user', '1.1.3-stable');
-insert into apps (name, version) values ('filemanager', '1.3.0-beta');
+insert into #prefix#apps (name, version) values ('blog', '1.1.3-stable');
+insert into #prefix#apps (name, version) values ('user', '1.1.3-stable');
+insert into #prefix#apps (name, version) values ('filemanager', '1.3.0-beta');
+
+create sequence #prefix#extended_fields_seq;
+
+create table #prefix#extended_fields (
+	id integer not null default nextval('#prefix#extended_fields_seq') primary key,
+	class char(48) not null,
+	sort int not null,
+	name char(48) not null,
+	label char(48) not null,
+	type char(24) not null,
+	required int not null,
+	options char(255) not null
+);
+
+create index #prefix#extended_fields_class on #prefix#extended_fields (class, sort);
 
 commit;
diff -urBNs elefant-elefant_1_3_2_beta/conf/install_sqlite.sql elefant-elefant_1_3_3_beta/conf/install_sqlite.sql
--- elefant-elefant_1_3_2_beta/conf/install_sqlite.sql	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/conf/install_sqlite.sql	2013-03-20 13:48:44.000000000 -0500
@@ -1,6 +1,6 @@
 begin;
 
-create table webpage (
+create table #prefix#webpage (
 	id char(72) not null primary key,
 	title char(72) not null,
 	menu_title char(72) not null,
@@ -12,11 +12,11 @@
 	body text
 );
 
-create index webpage_access on webpage (access);
+create index #prefix#webpage_access on #prefix#webpage (access);
 
-insert into webpage (id, title, menu_title, window_title, access, layout, description, keywords, body) values ('index', 'Welcome to Elefant', 'Home', '', 'public', 'default', '', '', '<table><tbody><tr><td><h3>Congratulations!</h3>You have successfully installed Elefant, the refreshingly simple new PHP web framework and CMS.</td><td><h3>Getting Started</h3>To log in as an administrator and edit pages, write a blog post, or upload files, go to <a href="/admin">/admin</a>.</td><td><h3>Developers</h3>Documentation, source code and issue tracking can be found at <a href="http://github.com/jbroadway/elefant">github.com/jbroadway/elefant</a></td></tr></tbody></table>');
+insert into #prefix#webpage (id, title, menu_title, window_title, access, layout, description, keywords, body) values ('index', 'Welcome to Elefant', 'Home', '', 'public', 'default', '', '', '<table><tbody><tr><td><h3>Congratulations!</h3>You have successfully installed Elefant, the refreshingly simple new PHP web framework and CMS.</td><td><h3>Getting Started</h3>To log in as an administrator and edit pages, write a blog post, or upload files, go to <a href="/admin">/admin</a>.</td><td><h3>Developers</h3>Documentation, source code and issue tracking can be found at <a href="http://github.com/jbroadway/elefant">github.com/jbroadway/elefant</a></td></tr></tbody></table>');
 
-create table block (
+create table #prefix#block (
 	id char(72) not null primary key,
 	title char(72) not null,
 	body text,
@@ -24,11 +24,11 @@
 	show_title char(3) not null
 );
 
-create index block_access on block (id, access);
+create index #prefix#block_access on #prefix#block (id, access);
 
-insert into block (id, title, access, body, show_title) values ('members', 'Members', 'public', '{! user/sidebar !}', 'no');
+insert into #prefix#block (id, title, access, body, show_title) values ('members', 'Members', 'public', '{! user/sidebar !}', 'no');
 
-create table user (
+create table #prefix#user (
 	id integer primary key,
 	email char(72) unique not null,
 	password char(128) not null,
@@ -41,17 +41,17 @@
 	userdata text not null
 );
 
-create index user_email_password on user (email, password);
-create index user_session_id on user (session_id);
+create index #prefix#user_email_password on #prefix#user (email, password);
+create index #prefix#user_session_id on #prefix#user (session_id);
 
-insert into user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, (DATETIME('now')), 'Admin User', 'admin', (DATETIME('now')), (DATETIME('now')), '[]');
+insert into #prefix#user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, (DATETIME('now')), 'Admin User', 'admin', (DATETIME('now')), (DATETIME('now')), '[]');
 
-create table user_openid (
+create table #prefix#user_openid (
 	token char(200) primary key,
 	user_id int not null
 );
 
-create table versions (
+create table #prefix#versions (
 	id integer primary key,
 	class char(72) not null,
 	pkey char(72) not null,
@@ -60,19 +60,19 @@
 	serialized text not null
 );
 
-create index versions_class on versions (class, pkey, ts);
-create index versions_user on versions (user, ts);
+create index #prefix#versions_class on #prefix#versions (class, pkey, ts);
+create index #prefix#versions_user on #prefix#versions (user, ts);
 
-create table api (
+create table #prefix#api (
 	token char(35) not null primary key,
 	api_key char(35) not null,
 	user_id int not null
 );
 
-create index api_token on api (token, api_key);
-create index api_user on api (user_id);
+create index #prefix#api_token on #prefix#api (token, api_key);
+create index #prefix#api_user on #prefix#api (user_id);
 
-create table blog_post (
+create table #prefix#blog_post (
 	id integer primary key,
 	title char(72) not null,
 	ts datetime not null,
@@ -83,21 +83,21 @@
 	extra text not null
 );
 
-create index blog_post_ts on blog_post (ts);
-create index blog_post_pts on blog_post (ts, published);
+create index #prefix#blog_post_ts on #prefix#blog_post (ts);
+create index #prefix#blog_post_pts on #prefix#blog_post (ts, published);
 
-create table blog_tag (
+create table #prefix#blog_tag (
 	id char(24) not null,
 	primary key (id)
 );
 
-create table blog_post_tag (
+create table #prefix#blog_post_tag (
 	tag_id char(24) not null,
 	post_id int not null,
 	primary key (tag_id, post_id)
 );
 
-create table `lock` (
+create table #prefix#lock (
 	id integer primary key,
 	user int not null,
 	resource varchar(72) not null,
@@ -107,24 +107,37 @@
 	modified datetime not null
 );
 
-create index lock_resource on lock (resource, resource_id, expires);
-create index lock_user on lock (user);
+create index #prefix#lock_resource on #prefix#lock (resource, resource_id, expires);
+create index #prefix#lock_user on #prefix#lock (user);
 
-create table filemanager_prop (
+create table #prefix#filemanager_prop (
 	file char(128) not null primary key,
 	prop char(32) not null,
 	value char(255) not null
 );
 
-create index filemanager_prop_name on filemanager_prop (prop);
+create index #prefix#filemanager_prop_name on #prefix#filemanager_prop (prop);
 
-create table apps (
+create table #prefix#apps (
 	name char(48) not null primary key,
 	version char(16) not null
 );
 
-insert into apps (name, version) values ('blog', '1.1.3-stable');
-insert into apps (name, version) values ('user', '1.1.3-stable');
-insert into apps (name, version) values ('filemanager', '1.3.0-beta');
+insert into #prefix#apps (name, version) values ('blog', '1.1.3-stable');
+insert into #prefix#apps (name, version) values ('user', '1.1.3-stable');
+insert into #prefix#apps (name, version) values ('filemanager', '1.3.0-beta');
+
+create table #prefix#extended_fields (
+	id integer primary key,
+	class char(48) not null,
+	sort int not null,
+	name char(48) not null,
+	label char(48) not null,
+	type char(24) not null,
+	required int not null,
+	options char(255) not null
+);
+
+create index #prefix#extended_fields_class on #prefix#extended_fields (class, sort);
 
 commit;
diff -urBNs elefant-elefant_1_3_2_beta/conf/navigation.json elefant-elefant_1_3_3_beta/conf/navigation.json
--- elefant-elefant_1_3_2_beta/conf/navigation.json	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/conf/navigation.json	2013-03-20 13:48:44.000000000 -0500
@@ -1 +1 @@
-[{"data":"Home","attr":{"id":"index","sort":0}}]
\ No newline at end of file
+[{"data":"Home","attr":{"id":"index","classname":""}}]
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/conf/package.xml and elefant-elefant_1_3_3_beta/conf/package.xml are identical
Files elefant-elefant_1_3_2_beta/conf/product.php and elefant-elefant_1_3_3_beta/conf/product.php are identical
Files elefant-elefant_1_3_2_beta/conf/site.db and elefant-elefant_1_3_3_beta/conf/site.db are identical
diff -urBNs elefant-elefant_1_3_2_beta/conf/test.php elefant-elefant_1_3_3_beta/conf/test.php
--- elefant-elefant_1_3_2_beta/conf/test.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/conf/test.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,168 @@
+; <?php /* Global configurations go here
+
+[General]
+
+; The name of your website.
+site_name = "Your Site Name"
+
+; Default outbound email address.
+email_from = "you@example.com"
+
+; Default character set for output.
+
+charset = UTF-8
+
+; Default timezone for date functions.
+
+timezone = GMT
+
+; Default handler for requests to / and /(.*) that don't match
+; any other handler.
+
+default_handler = "admin/page"
+
+; Default layout template (aka theme) to use for page rendering.
+
+default_layout = "default"
+
+; Handler for errors, to be called by other handlers via
+; $controller->error() with 'code', 'title' and an optional
+; 'message' parameters.
+
+error_handler = "admin/error"
+
+; Whether to gzip output for browsers that support it.
+; This usually gives a noticeable performance boost.
+
+compress_output = On
+
+; Set this to 'flat' to have all pages appear at the top-level,
+; for example /about-us, /products. Set this to 'nested' to have
+; page URLs appear as they are in your navigation tree, for
+; example /products/flowbee/benefits. Default is flat.
+
+page_url_style = flat
+
+; For development, turn debugging on and Elefant will output
+; helpful information on errors.
+
+debug = On
+
+; For development, turn display_errors on and Elefant will
+; output fatal error messages in addition to the debugger.
+
+display_errors = On
+
+[I18n]
+
+; Turn this on if your site is multilingual. This will change
+; the behaviour of the site navigation so that the appropriate
+; language's section of the site tree is shown, depending on
+; the user's language choice.
+
+multilingual = Off
+
+; This is the method for determining which language to show the
+; current visitor. Options are: url (e.g., /fr/), subdomain
+; (e.g., fr.example.com), http (uses Accept-Language header),
+; or cookie.
+
+negotiation_method = http
+
+[Database]
+
+; Database settings go here. Driver must be a valid PDO driver.
+
+master[driver] = sqlite
+master[file] = "conf/site.db"
+
+; The database table name prefix.
+
+prefix = "elefant_"
+
+[Mongo]
+
+; Settings to connect to MongoDB. Must have PHP Mongo extension
+; installed via `pecl install mongo`.
+
+;host = localhost:27017
+;user = username
+;pass = password
+;set_name = my_replica_set
+
+[Hooks]
+
+; This is a list of hooks in the system and associated handlers
+; to trigger when they occur. It's a good idea to name the hooks
+; you define after the handler they occur in, to make it easier
+; to look up the parameters they will receive.
+
+admin/edit[] = navigation/hook/edit
+admin/delete[] = navigation/hook/delete
+;admin/add[] = search/add
+;admin/edit[] = search/add
+;admin/delete[] = search/delete
+;blog/add[] = search/add
+;blog/edit[] = search/add
+;blog/delete[] = search/delete
+
+[Cache]
+
+; Configure your cache server list. This will be available in
+; your handlers via the $cache object. If blank, or cache
+; is unavailable, it will emulate Memcache via the lib/Cache
+; object, storing the cache in the `conf/datastore` folder.
+; Alternately add `backend = redis` to use Redis as the cache
+; backend, `backend = apc` to use APC as the cache backend, or
+; `backend = xcache` to use XCache as the cache backend.
+; Each of these cache options uses an identical API so you can
+; implement caching without worrying about the backend in
+; development versus production.
+;
+; Note: To use Redis auth, add the password after the port,
+; separated by a comma, e.g. "localhost:6379,PASSWORD"
+
+;backend = memcache
+;server[] = localhost:11211
+
+[Mailer]
+
+; This is where you configure your settings for sending emails.
+; Email sending is powered by the Zend Framework's Mail package.
+; For more info on the configuration options for the various
+; transport methods here, see:
+; http://framework.zend.com/manual/en/zend.mail.html
+
+; To override the default email from info in the
+; global config file, edit these:
+email_from = default
+email_name = default
+
+; To send using PHP's mail() function, use this:
+transport[type] = sendmail
+
+; To send using an SMTP server, use this:
+;transport[type] = smtp
+;transport[host] = 127.0.0.1
+;transport[name] = localhost
+
+; To add TLS-based encryption to the SMTP connection:
+;transport[ssl]  = tls
+;transport[port] = 25
+
+; To add SSL-based encryption to the SMTP connection:
+;transport[ssl]  = ssl
+;transport[port] = 465
+
+; To add authentication to the SMTP connection:
+;transport[auth] = plain
+;transport[auth] = login
+;transport[auth] = crammd5
+;transport[username] = username
+;transport[password] = password
+
+; To send to a file in conf/mailer, use this:
+;transport[type] = file
+;transport[folder] = cache/mailer
+
+; */ ?>
diff -urBNs elefant-elefant_1_3_2_beta/conf/version.php elefant-elefant_1_3_3_beta/conf/version.php
--- elefant-elefant_1_3_2_beta/conf/version.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/conf/version.php	2013-03-20 13:48:44.000000000 -0500
@@ -1 +1 @@
-<?php define ('ELEFANT_VERSION', '1.3.2'); ?>
\ No newline at end of file
+<?php define ('ELEFANT_VERSION', '1.3.3'); ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/css/960.css and elefant-elefant_1_3_3_beta/css/960.css are identical
diff -urBNs elefant-elefant_1_3_2_beta/css/960_compiled.css elefant-elefant_1_3_3_beta/css/960_compiled.css
--- elefant-elefant_1_3_2_beta/css/960_compiled.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/css/960_compiled.css	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,3 @@
+a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,dialog,div,dl,dt,em,embed,fieldset,figcaption,figure,font,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,meter,nav,object,ol,output,p,pre,progress,q,rp,rt,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video,xmp{border:0;font-size:100%;margin:0;padding:0}html,body{height:100%}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}b,strong{font-weight:bold}img{color:transparent;font-size:0;vertical-align:middle;-ms-interpolation-mode:bicubic}li{display:list-item}table{border-collapse:collapse;border-spacing:0}th,td,caption{font-weight:normal;vertical-align:top;text-align:left}svg{overflow:hidden}
+body{font:13px/1.5 'Helvetica Neue',Arial,'Liberation Sans',FreeSans,sans-serif}a:focus{outline:1px dotted}hr{border:0 #ccc solid;border-top-width:1px;clear:both;height:0}h1{font-size:25px}h2{font-size:23px}h3{font-size:21px}h4{font-size:19px}h5{font-size:17px}h6{font-size:15px}ol{list-style:decimal}ul{list-style:disc}li{margin-left:30px}p,dl,hr,h1,h2,h3,h4,h5,h6,ol,ul,pre,table,address,fieldset,figure{margin-bottom:20px}
+body{min-width:960px}.container_12,.container_16{margin-left:auto;margin-right:auto;width:960px}.grid_1,.grid_2,.grid_3,.grid_4,.grid_5,.grid_6,.grid_7,.grid_8,.grid_9,.grid_10,.grid_11,.grid_12,.grid_13,.grid_14,.grid_15,.grid_16{display:inline;float:left;margin-left:10px;margin-right:10px}.push_1,.pull_1,.push_2,.pull_2,.push_3,.pull_3,.push_4,.pull_4,.push_5,.pull_5,.push_6,.pull_6,.push_7,.pull_7,.push_8,.pull_8,.push_9,.pull_9,.push_10,.pull_10,.push_11,.pull_11,.push_12,.pull_12,.push_13,.pull_13,.push_14,.pull_14,.push_15,.pull_15{position:relative}.container_12 .grid_3,.container_16 .grid_4{width:220px}.container_12 .grid_6,.container_16 .grid_8{width:460px}.container_12 .grid_9,.container_16 .grid_12{width:700px}.container_12 .grid_12,.container_16 .grid_16{width:940px}.alpha{margin-left:0}.omega{margin-right:0}.container_12 .grid_1{width:60px}.container_12 .grid_2{width:140px}.container_12 .grid_4{width:300px}.container_12 .grid_5{width:380px}.container_12 .grid_7{width:540px}.container_12 .grid_8{width:620px}.container_12 .grid_10{width:780px}.container_12 .grid_11{width:860px}.container_16 .grid_1{width:40px}.container_16 .grid_2{width:100px}.container_16 .grid_3{width:160px}.container_16 .grid_5{width:280px}.container_16 .grid_6{width:340px}.container_16 .grid_7{width:400px}.container_16 .grid_9{width:520px}.container_16 .grid_10{width:580px}.container_16 .grid_11{width:640px}.container_16 .grid_13{width:760px}.container_16 .grid_14{width:820px}.container_16 .grid_15{width:880px}.container_12 .prefix_3,.container_16 .prefix_4{padding-left:240px}.container_12 .prefix_6,.container_16 .prefix_8{padding-left:480px}.container_12 .prefix_9,.container_16 .prefix_12{padding-left:720px}.container_12 .prefix_1{padding-left:80px}.container_12 .prefix_2{padding-left:160px}.container_12 .prefix_4{padding-left:320px}.container_12 .prefix_5{padding-left:400px}.container_12 .prefix_7{padding-left:560px}.container_12 .prefix_8{padding-left:640px}.container_12 .prefix_10{padding-left:800px}.container_12 .prefix_11{padding-left:880px}.container_16 .prefix_1{padding-left:60px}.container_16 .prefix_2{padding-left:120px}.container_16 .prefix_3{padding-left:180px}.container_16 .prefix_5{padding-left:300px}.container_16 .prefix_6{padding-left:360px}.container_16 .prefix_7{padding-left:420px}.container_16 .prefix_9{padding-left:540px}.container_16 .prefix_10{padding-left:600px}.container_16 .prefix_11{padding-left:660px}.container_16 .prefix_13{padding-left:780px}.container_16 .prefix_14{padding-left:840px}.container_16 .prefix_15{padding-left:900px}.container_12 .suffix_3,.container_16 .suffix_4{padding-right:240px}.container_12 .suffix_6,.container_16 .suffix_8{padding-right:480px}.container_12 .suffix_9,.container_16 .suffix_12{padding-right:720px}.container_12 .suffix_1{padding-right:80px}.container_12 .suffix_2{padding-right:160px}.container_12 .suffix_4{padding-right:320px}.container_12 .suffix_5{padding-right:400px}.container_12 .suffix_7{padding-right:560px}.container_12 .suffix_8{padding-right:640px}.container_12 .suffix_10{padding-right:800px}.container_12 .suffix_11{padding-right:880px}.container_16 .suffix_1{padding-right:60px}.container_16 .suffix_2{padding-right:120px}.container_16 .suffix_3{padding-right:180px}.container_16 .suffix_5{padding-right:300px}.container_16 .suffix_6{padding-right:360px}.container_16 .suffix_7{padding-right:420px}.container_16 .suffix_9{padding-right:540px}.container_16 .suffix_10{padding-right:600px}.container_16 .suffix_11{padding-right:660px}.container_16 .suffix_13{padding-right:780px}.container_16 .suffix_14{padding-right:840px}.container_16 .suffix_15{padding-right:900px}.container_12 .push_3,.container_16 .push_4{left:240px}.container_12 .push_6,.container_16 .push_8{left:480px}.container_12 .push_9,.container_16 .push_12{left:720px}.container_12 .push_1{left:80px}.container_12 .push_2{left:160px}.container_12 .push_4{left:320px}.container_12 .push_5{left:400px}.container_12 .push_7{left:560px}.container_12 .push_8{left:640px}.container_12 .push_10{left:800px}.container_12 .push_11{left:880px}.container_16 .push_1{left:60px}.container_16 .push_2{left:120px}.container_16 .push_3{left:180px}.container_16 .push_5{left:300px}.container_16 .push_6{left:360px}.container_16 .push_7{left:420px}.container_16 .push_9{left:540px}.container_16 .push_10{left:600px}.container_16 .push_11{left:660px}.container_16 .push_13{left:780px}.container_16 .push_14{left:840px}.container_16 .push_15{left:900px}.container_12 .pull_3,.container_16 .pull_4{left:-240px}.container_12 .pull_6,.container_16 .pull_8{left:-480px}.container_12 .pull_9,.container_16 .pull_12{left:-720px}.container_12 .pull_1{left:-80px}.container_12 .pull_2{left:-160px}.container_12 .pull_4{left:-320px}.container_12 .pull_5{left:-400px}.container_12 .pull_7{left:-560px}.container_12 .pull_8{left:-640px}.container_12 .pull_10{left:-800px}.container_12 .pull_11{left:-880px}.container_16 .pull_1{left:-60px}.container_16 .pull_2{left:-120px}.container_16 .pull_3{left:-180px}.container_16 .pull_5{left:-300px}.container_16 .pull_6{left:-360px}.container_16 .pull_7{left:-420px}.container_16 .pull_9{left:-540px}.container_16 .pull_10{left:-600px}.container_16 .pull_11{left:-660px}.container_16 .pull_13{left:-780px}.container_16 .pull_14{left:-840px}.container_16 .pull_15{left:-900px}.clear{clear:both;display:block;overflow:hidden;visibility:hidden;width:0;height:0}.clearfix:before,.clearfix:after{content:'\0020';display:block;overflow:hidden;visibility:hidden;width:0;height:0}.clearfix:after{clear:both}.clearfix{zoom:1}
\ No newline at end of file
Binary files elefant-elefant_1_3_2_beta/css/files/ajax-loader.gif and elefant-elefant_1_3_3_beta/css/files/ajax-loader.gif differ
Binary files elefant-elefant_1_3_2_beta/css/files/icon.png and elefant-elefant_1_3_3_beta/css/files/icon.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/application.png and elefant-elefant_1_3_3_beta/css/files/images/application.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/code.png and elefant-elefant_1_3_3_beta/css/files/images/code.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/css.png and elefant-elefant_1_3_3_beta/css/files/images/css.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/db.png and elefant-elefant_1_3_3_beta/css/files/images/db.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/directory.png and elefant-elefant_1_3_3_beta/css/files/images/directory.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/doc.png and elefant-elefant_1_3_3_beta/css/files/images/doc.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/file.png and elefant-elefant_1_3_3_beta/css/files/images/file.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/film.png and elefant-elefant_1_3_3_beta/css/files/images/film.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/flash.png and elefant-elefant_1_3_3_beta/css/files/images/flash.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/folder_open.png and elefant-elefant_1_3_3_beta/css/files/images/folder_open.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/html.png and elefant-elefant_1_3_3_beta/css/files/images/html.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/java.png and elefant-elefant_1_3_3_beta/css/files/images/java.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/linux.png and elefant-elefant_1_3_3_beta/css/files/images/linux.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/mkdir.png and elefant-elefant_1_3_3_beta/css/files/images/mkdir.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/music.png and elefant-elefant_1_3_3_beta/css/files/images/music.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/pdf.png and elefant-elefant_1_3_3_beta/css/files/images/pdf.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/php.png and elefant-elefant_1_3_3_beta/css/files/images/php.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/picture.png and elefant-elefant_1_3_3_beta/css/files/images/picture.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/ppt.png and elefant-elefant_1_3_3_beta/css/files/images/ppt.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/prev-directory.png and elefant-elefant_1_3_3_beta/css/files/images/prev-directory.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/psd.png and elefant-elefant_1_3_3_beta/css/files/images/psd.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/remove.png and elefant-elefant_1_3_3_beta/css/files/images/remove.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/rename.png and elefant-elefant_1_3_3_beta/css/files/images/rename.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/ruby.png and elefant-elefant_1_3_3_beta/css/files/images/ruby.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/script.png and elefant-elefant_1_3_3_beta/css/files/images/script.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/txt.png and elefant-elefant_1_3_3_beta/css/files/images/txt.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/upload.png and elefant-elefant_1_3_3_beta/css/files/images/upload.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/xls.png and elefant-elefant_1_3_3_beta/css/files/images/xls.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/images/zip.png and elefant-elefant_1_3_3_beta/css/files/images/zip.png differ
Binary files elefant-elefant_1_3_2_beta/css/files/spacer.gif and elefant-elefant_1_3_3_beta/css/files/spacer.gif differ
diff -urBNs elefant-elefant_1_3_2_beta/css/files/wysiwyg.fileManager.css elefant-elefant_1_3_3_beta/css/files/wysiwyg.fileManager.css
--- elefant-elefant_1_3_2_beta/css/files/wysiwyg.fileManager.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/css/files/wysiwyg.fileManager.css	1969-12-31 18:00:00.000000000 -0600
@@ -1,113 +0,0 @@
-/*
- * Style Sheet for the File Manager plugin for jWYSIWYG
- * 
- * Yotam Bar-On, 2011
- * 
- * Uses the Silk Icon Set: http://www.famfamfam.com/lab/icons/silk/
- * The Silk Icon Set is released under CC-3.0/2.5  and was created by FAMFAMFAM.
- */
- 
-div.wysiwyg ul.toolbar li.fileManager, div.wysiwyg-fileManager { background: url('icon.png'); }
-div.wysiwyg-fileManager { width:16px; height:16px; cursor: pointer; cursor: hand; }
-
-
-.wysiwyg-files-wrapper { padding:10px; }
-
-#wysiwyg-files-list-wrapper { min-height:50px; max-height:400px; overflow:auto; }
-* html #wysiwyg-files-list-wrapper { height: 600px; }
-
-.wysiwyg-files-ajax { background: url(../../ajax-loader.gif) left top no-repeat; }
-
-.wysiwyg-files-file-preview { position:absolute; background-position:center center; background-color:#fff; border:solid 1px; padding:2px; min-width:16px; min-height:16px; max-width:300px; z-index:200000; }
-* html .wysiwyg-files-file-preview { width:90px; }
-
-/* CSS3 for fun */
-.wysiwyg-files-wrapper li {
-	-moz-transition: all 0.5s ease-out;  /* FF4+ */
-	-o-transition: all 0.5s ease-out;  /* Opera 10.5+ */
-	-webkit-transition: all 0.5s ease-out;  /* Saf3.2+, Chrome */
-	-ms-transition: all 0.5s ease-out;  /* IE10? */
-	 transition: all 0.5s ease-out;
-}
-
-.wysiwyg-files-wrapper ul { padding:0px; margin:0px; }
-.wysiwyg-files-wrapper li { list-style:none; padding:0px; padding-left:20px; margin: 2px; }
-.wysiwyg-files-wrapper li a { display:inline-block; text-decoration:none; cursor: pointer; cursor: hand; }
-.wysiwyg-files-textfield { width:250px; border:solid 1px !important; }
-
-.wysiwyg-files-wrapper li.wysiwyg-files-hover { background-color: #BDF !important; }
-.wysiwyg-files-wrapper li.wysiwyg-files-dir { background: url(images/directory.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-dir-expanded { background: url(images/folder_open.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-file { background: url(images/file.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-dir-prev { background: url(images/prev-directory.png) left top no-repeat; }
-
-.wysiwyg-files-wrapper li .wysiwyg-files-action { float:right; width:16px; height:16px; margin:2px; cursor: pointer; cursor: hand; }
-.wysiwyg-files-wrapper li .wysiwyg-files-action-rename { background: url(images/rename.png) left top no-repeat; }
-.wysiwyg-files-wrapper li .wysiwyg-files-action-remove { background: url(images/remove.png) left top no-repeat; }
-.wysiwyg-files-wrapper .wysiwyg-files-action-upload, .wysiwyg-files-wrapper .wysiwyg-files-action-mkdir { float:right; width:16px; height:16px; margin:2px; cursor: pointer; cursor: hand; }
-.wysiwyg-files-wrapper .wysiwyg-files-action-upload { background: url(images/upload.png); }
-.wysiwyg-files-wrapper .wysiwyg-files-action-mkdir { background: url(images/mkdir.png);}
-
-/*
- * Below is the list of file-types classes.
- */
- 
- /* This REALLY needs to become a sprite */
-.wysiwyg-files-wrapper li.wysiwyg-files-3gp { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-afp { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-afpa { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-asp { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-aspx { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-avi { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-bat { background: url(images/application.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-bmp { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-c { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-cfm { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-cgi { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-com { background: url(images/application.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-cpp { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-css { background: url(images/css.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-doc { background: url(images/doc.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-exe { background: url(images/application.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-gif { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-fla { background: url(images/flash.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-h { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-htm { background: url(images/html.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-html { background: url(images/html.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-jar { background: url(images/java.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-jpg { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-jpeg { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-js { background: url(images/script.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-lasso { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-log { background: url(images/txt.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-m4p { background: url(images/music.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-mov { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-mp3 { background: url(images/music.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-mp4 { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-mpg { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-mpeg { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-ogg { background: url(images/music.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-pcx { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-pdf { background: url(images/pdf.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-php { background: url(images/php.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-png { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-ppt { background: url(images/ppt.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-psd { background: url(images/psd.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-pl { background: url(images/script.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-py { background: url(images/script.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-rb { background: url(images/ruby.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-rbx { background: url(images/ruby.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-rhtml { background: url(images/ruby.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-rpm { background: url(images/linux.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-ruby { background: url(images/ruby.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-sql { background: url(images/db.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-swf { background: url(images/flash.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-tif { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-tiff { background: url(images/picture.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-txt { background: url(images/txt.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-vb { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-wav { background: url(images/music.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-wmv { background: url(images/film.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-xls { background: url(images/xls.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-xml { background: url(images/code.png) left top no-repeat; }
-.wysiwyg-files-wrapper li.wysiwyg-files-zip { background: url(images/zip.png) left top no-repeat; }
Files elefant-elefant_1_3_2_beta/css/mobile.css and elefant-elefant_1_3_3_beta/css/mobile.css are identical
Files elefant-elefant_1_3_2_beta/css/reset.css and elefant-elefant_1_3_3_beta/css/reset.css are identical
diff -urBNs elefant-elefant_1_3_2_beta/css/style.css elefant-elefant_1_3_3_beta/css/style.css
--- elefant-elefant_1_3_2_beta/css/style.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/css/style.css	2013-03-20 13:48:44.000000000 -0500
@@ -4,11 +4,23 @@
 }
 
 h1, h2, h3, h4, h5, h6 {
-	color: #666;
+	color: #222;
+	margin-bottom: 8px;
+	font-family: 'Roboto', sans-serif;
+	font-weight: 300;
 }
 
+p, ul, ol {
+	margin-bottom: 8px;
+}
+
+h1 { font-size: 32px; }
+h2 { font-size: 26px; }
+h3 { font-size: 20px; }
+h4 { font-size: 16px; }
+
 a {
-	color: #E4426B;
+	color: #1C75BC;
 	text-decoration: none;
 }
 
@@ -21,24 +33,35 @@
 }
 
 #wrapper {
-	margin: 25px auto 25px auto;
+	margin: 0px auto 25px auto;
 	padding: 20px 15px 0px 15px;
+	border-top: 4px solid #1C75BC;
 	background-color: #fff;
-	-moz-box-shadow: 0px 0px 4px #aaa;
-	-webkit-box-shadow: 0px 0px 4px #aaa;
-	box-shadow: 0px 0px 4px #aaa;
+	-moz-box-shadow: 0px 0px 12px #aaa;
+	-webkit-box-shadow: 0px 0px 12px #aaa;
+	box-shadow: 0px 0px 12px #aaa;
 }
 
 #head {
-	border-bottom: 4px solid #ddd;
+	border-bottom: 3px solid #ddd;
 }
 
 	#head h1 {
+		font-family: 'Roboto', sans-serif;
+		font-weight: 400;
 		padding-bottom: 10px;
 		margin-bottom: 0px;
 		color: #444;
 	}
 
+		#head h1 a {
+			color: #444;
+		}
+
+		#head h1 a:hover {
+			text-decoration: none;
+		}
+
 	#head .menu {
 		text-align: right;
 	}
@@ -59,15 +82,20 @@
 	}
 
 	#head .menu ul li a {
+		border-top: 3px solid #ddd;
 		padding: 5px 12px 5px 12px;
-		font-weight: bold;
+		text-decoration: none;
+	}
+
+	#head .menu ul li.current a {
+		border-top: 3px solid #1C75BC;
 		text-decoration: none;
 	}
 
 	#head .menu ul li a:hover {
-		background: #E4426B;
+		border-top: 3px solid #1C75BC;
+		background: #1C75BC;
 		color: #fff;
-		font-weight: bold;
 		text-decoration: none;
 	}
 
@@ -75,6 +103,10 @@
 	padding-top: 15px;
 }
 
+	#body img {
+		max-width: 620px;
+	}
+
 	.block {
 		padding-bottom: 20px;
 	}
@@ -107,7 +139,8 @@
 		margin-bottom: -2px;
 	}
 
-.index-body #slideshow img {
+#body.index-body #slideshow-homepage img {
+	max-width: 940px;
 	width: 940px;
 }
 
@@ -124,10 +157,15 @@
 
 #sidebar {
 	padding-top: 15px;
+	padding-bottom: 15px;
 }
 
+	#sidebar img {
+		max-width: 300px;
+	}
+
 #footer {
-	border-top: 4px solid #ddd;
+	border-top: 3px solid #ddd;
 	padding-top: 5px;
 	margin-bottom: 0px;
 	padding-bottom: 0px;
Files elefant-elefant_1_3_2_beta/css/text.css and elefant-elefant_1_3_3_beta/css/text.css are identical
diff -urBNs elefant-elefant_1_3_2_beta/css/wysiwyg/default.css elefant-elefant_1_3_3_beta/css/wysiwyg/default.css
--- elefant-elefant_1_3_2_beta/css/wysiwyg/default.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/css/wysiwyg/default.css	1969-12-31 18:00:00.000000000 -0600
@@ -1,19 +0,0 @@
-body {
-	background: #fff;
-	color: #222;
-	font-family: Helvetica, Arial, sans-serif;
-	font-size: 13px;
-}
-
-.embedded {
-	padding: 5px;
-	background: #ddd;
-	border: 1px solid #bbb;
-	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#cccccc');
-	background: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#ccc));
-	background: -moz-linear-gradient(top,  #eee,  #ccc);
-	-webkit-border-radius: 9px;
-	-moz-border-radius: 9px;
-	border-radius: 9px;
-	white-space: nowrap;
-}
Binary files elefant-elefant_1_3_2_beta/css/wysiwyg/jquery.wysiwyg.bg.png and elefant-elefant_1_3_3_beta/css/wysiwyg/jquery.wysiwyg.bg.png differ
diff -urBNs elefant-elefant_1_3_2_beta/css/wysiwyg/jquery.wysiwyg.css elefant-elefant_1_3_3_beta/css/wysiwyg/jquery.wysiwyg.css
--- elefant-elefant_1_3_2_beta/css/wysiwyg/jquery.wysiwyg.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/css/wysiwyg/jquery.wysiwyg.css	1969-12-31 18:00:00.000000000 -0600
@@ -1,97 +0,0 @@
-
-div.wysiwyg { border: 1px solid #999; padding: 5px; background: #fff url("jquery.wysiwyg.bg.png") repeat-x top; }
-div.wysiwyg * { margin: 0; padding: 0; }
-
-div.wysiwyg ul.toolbar li.jwysiwyg-custom-command { overflow: hidden; }
-
-div.wysiwyg ul.toolbar { border-bottom: 1px solid #ccc; float: left; width: 100%; padding: 0; }
-div.wysiwyg ul.toolbar li { list-style: none; float: left; margin: 1px 2px 3px 0;  background: rgb(240, 240, 240); -moz-user-select: none; -webkit-user-select: none; user-select: none; clear: none; padding: 0 }
-div.wysiwyg ul.toolbar li.separator { width: 1px; height: 16px; margin: 0 4px; border-left: 1px solid #ccc; }
-div.wysiwyg ul.toolbar li { text-indent: -5000px; opacity: 0.85; filter: alpha(opacity=85); display: block; width: 16px; height: 16px; background: url('jquery.wysiwyg.gif') no-repeat -64px -80px; border: 1px dotted rgb(240, 240, 240); cursor: pointer; margin: 0px; }
-div.wysiwyg ul.toolbar li.wysiwyg-button-hover, div.wysiwyg ul.toolbar li.active { opacity: 1.00; filter:alpha(opacity=100); border: 1px outset rgb(224, 224, 224); }
-div.wysiwyg ul.toolbar li.active { background-color: rgb(255, 255, 64); border: 1px solid rgb(208, 208, 208); border-left-color: #aaa; border-top-color: #aaa; margin: 0; }
-
-div.wysiwyg ul.toolbar li.disabled, div.wysiwyg ul.toolbar li.wysiwyg-button-hover.disabled, div.wysiwyg ul.toolbar li.active.disabled { opacity: 0.5; filter:alpha(opacity=50); border: 0px none transparent; padding: 1px; cursor: auto; }
-
-
-div.wysiwyg ul.toolbar li.bold { background-position: 0 -16px; }
-div.wysiwyg ul.toolbar li.italic { background-position: -16px -16px; }
-div.wysiwyg ul.toolbar li.strikeThrough { background-position: -32px -16px; }
-div.wysiwyg ul.toolbar li.underline { background-position: -48px -16px; }
-div.wysiwyg ul.toolbar li.highlight { background-position: -48px -96px; }
-
-div.wysiwyg ul.toolbar li.justifyLeft { background-position: 0 0; }
-div.wysiwyg ul.toolbar li.justifyCenter { background-position: -16px 0; }
-div.wysiwyg ul.toolbar li.justifyRight { background-position: -32px 0; }
-div.wysiwyg ul.toolbar li.justifyFull { background-position: -48px 0; }
-
-div.wysiwyg ul.toolbar li.indent { background-position: -64px 0; }
-div.wysiwyg ul.toolbar li.outdent { background-position: -80px 0; }
-
-div.wysiwyg ul.toolbar li.subscript { background-position: -64px -16px; }
-div.wysiwyg ul.toolbar li.superscript { background-position: -80px -16px; }
-
-div.wysiwyg ul.toolbar li.undo { background-position: 0 -64px; }
-div.wysiwyg ul.toolbar li.redo { background-position: -16px -64px; }
-
-div.wysiwyg ul.toolbar li.insertOrderedList { background-position: -32px -48px; }
-div.wysiwyg ul.toolbar li.insertUnorderedList { background-position: -16px -48px; }
-div.wysiwyg ul.toolbar li.insertHorizontalRule { background-position: 0 -48px; }
-
-div.wysiwyg ul.toolbar li.h1 { background-position: 0 -32px; }
-div.wysiwyg ul.toolbar li.h2 { background-position: -16px -32px; }
-div.wysiwyg ul.toolbar li.h3 { background-position: -32px -32px; }
-div.wysiwyg ul.toolbar li.h4 { background-position: -48px -32px; }
-div.wysiwyg ul.toolbar li.h5 { background-position: -64px -32px; }
-div.wysiwyg ul.toolbar li.h6 { background-position: -80px -32px; }
-
-div.wysiwyg ul.toolbar li.paragraph { background-position: 0px -96px; }
-div.wysiwyg ul.toolbar li.colorpicker { background-position: -16px -96px; }
-div.wysiwyg ul.toolbar li.fullscreen { background-position: -32px -96px; }
-
-div.wysiwyg ul.toolbar li.cut { background-position: -32px -64px; }
-div.wysiwyg ul.toolbar li.copy { background-position: -48px -64px; }
-div.wysiwyg ul.toolbar li.paste { background-position: -64px -64px; }
-div.wysiwyg ul.toolbar li.insertTable { background-position: -64px -48px; }
-
-div.wysiwyg ul.toolbar li.increaseFontSize { background-position: -16px -80px; }
-div.wysiwyg ul.toolbar li.decreaseFontSize { background-position: -32px -80px; }
-
-div.wysiwyg ul.toolbar li.createLink { background-position: -80px -48px; }
-div.wysiwyg ul.toolbar li.insertImage { background-position: -80px -80px; }
-
-div.wysiwyg ul.toolbar li.html { background-position: -48px -48px; }
-div.wysiwyg ul.toolbar li.removeFormat { background-position: -80px -64px; }
-
-div.wysiwyg ul.toolbar li.empty { background-position: -64px -80px; }
-
-div.wysiwyg ul.toolbar li.code { background-position: -64px -96px; }
-div.wysiwyg ul.toolbar li.cssWrap { background-position: -80px -96px; }
-
-div.wysiwyg-dialogRow { float:left; width:100%; font-size: 16px; }
-
-div.wysiwyg ul.toolbar li.dynamic { background-image: url(/apps/admin/css/admin/dynamic-icon.png); background-position: 0px 0px; }
-
-div.wysiwyg iframe { border: 1px solid #999; clear: left;
--moz-box-shadow    :inset 0 0 10px rgba(0, 0, 0, 0.4);
--webkit-box-shadow :inset 0 0 10px rgba(0, 0, 0, 0.4);
-box-shadow         :inset 0 0 10px rgba(0, 0, 0, 0.4);
-background-color:white; padding:0px; margin:0; display:block; width: 100%; }
-
-/* dialog */
-.wysiwyg-dialog { position:fixed; top:50px; left:50px; width:450px; height:300px; background:transparent; font:14px "Helvetic Neue", Helvetica,Arial,sans-serif; }
-.wysiwyg-dialog .wysiwyg-dialog-topbar { background:#333; border:1px #111 solid; color:white; padding:10px; position:relative; }
-.wysiwyg-dialog .wysiwyg-dialog-topbar .wysiwyg-dialog-close-wrapper .wysiwyg-dialog-close-button { color:white; text-decoration:none; display:block; padding:6px 10px; position:absolute; right:12px; top:50%; height:14px; margin-top:-12px; }
-.wysiwyg-dialog .wysiwyg-dialog-topbar .wysiwyg-dialog-close-wrapper a.wysiwyg-dialog-close-button:hover { background:#666; }
-.wysiwyg-dialog .wysiwyg-dialog-topbar .wysiwyg-dialog-title { font-size:20px; font-weight:bold; padding:5px; }
-.wysiwyg-dialog .wysiwyg-dialog-content { border:1px #ccc solid; border-top:0; padding:15px; background:white; }
-.wysiwyg-dialog-modal-div { position:absolute; top:0px; left:0px; width:100%; height:100%; background-color:rgb(255,255,255); background-color:rgba(0,0,0,0.5); filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000); -ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";}
-.wysiwyg-dialog-content form.wysiwyg fieldset { border:1px #ccc solid; }
-.wysiwyg-dialog-content form.wysiwyg legend { padding:7px; }
-.wysiwyg-dialog-content form.wysiwyg .form-row { clear:both; padding:4px 0; }
-.wysiwyg-dialog-content form.wysiwyg .form-row label, .wysiwyg-dialog form.wysiwyg .form-row .form-row-key { display:block; float:left; width:35%; text-align:right; padding:4px 5px; }
-.wysiwyg-dialog-content form.wysiwyg .form-row .form-row-value { display:block; float:left; width:55%; }
-.wysiwyg-dialog-content form.wysiwyg .form-row input.width-auto { width:auto; }
-.wysiwyg-dialog-content form.wysiwyg input.width-small { width:50px; min-width:50px; max-width:50px; }
-.wysiwyg-dialog-content form.wysiwyg input, .wysiwyg-dialog form.wysiwyg select { padding:2px; width:95%; margin:2px; }
-.wysiwyg-dialog-content form.wysiwyg input[type=submit], .wysiwyg-dialog form.wysiwyg input[type=reset] { padding:2px 7px; width:auto; }
Binary files elefant-elefant_1_3_2_beta/css/wysiwyg/jquery.wysiwyg.gif and elefant-elefant_1_3_3_beta/css/wysiwyg/jquery.wysiwyg.gif differ
Binary files elefant-elefant_1_3_2_beta/css/wysiwyg/jquery.wysiwyg.no-alpha.gif and elefant-elefant_1_3_3_beta/css/wysiwyg/jquery.wysiwyg.no-alpha.gif differ
Files elefant-elefant_1_3_2_beta/elefant and elefant-elefant_1_3_3_beta/elefant are identical
Files elefant-elefant_1_3_2_beta/favicon.ico and elefant-elefant_1_3_3_beta/favicon.ico are identical
Files elefant-elefant_1_3_2_beta/files/.htaccess and elefant-elefant_1_3_3_beta/files/.htaccess are identical
Binary files elefant-elefant_1_3_2_beta/files/design/bg.png and elefant-elefant_1_3_3_beta/files/design/bg.png differ
Files elefant-elefant_1_3_2_beta/files/homepage/photo1.jpg and elefant-elefant_1_3_3_beta/files/homepage/photo1.jpg are identical
Files elefant-elefant_1_3_2_beta/files/homepage/photo2.jpg and elefant-elefant_1_3_3_beta/files/homepage/photo2.jpg are identical
Files elefant-elefant_1_3_2_beta/files/homepage/photo3.jpg and elefant-elefant_1_3_3_beta/files/homepage/photo3.jpg are identical
Files elefant-elefant_1_3_2_beta/files/homepage/photo4.jpg and elefant-elefant_1_3_3_beta/files/homepage/photo4.jpg are identical
diff -urBNs elefant-elefant_1_3_2_beta/index.php elefant-elefant_1_3_3_beta/index.php
--- elefant-elefant_1_3_2_beta/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -39,17 +39,6 @@
 }
 
 /**
- * Set the default error reporting level to All except Notices,
- * and turn off displaying errors. Error handling/debugging can
- * be done by setting conf[General][debug] to true, causing full
- * debug traces to be displayed with highlighted code in the
- * browser (*for development purposes only*), or by checking
- * the error log for errors.
- */
-error_reporting (E_ALL & ~E_NOTICE);
-ini_set ('display_errors', 'Off');
-
-/**
  * Normalize slashes for servers that are still poorly
  * configured...
  */
@@ -76,14 +65,27 @@
 date_default_timezone_set(conf ('General', 'timezone'));
 
 /**
- * Enable the debugger if conf[General][debug] is true.
+ * Set the default error reporting level to All except Notices,
+ * and turn off displaying errors. Error handling/debugging can
+ * be done by setting conf[General][debug] to true, causing full
+ * debug traces to be displayed with highlighted code in the
+ * browser (*for development purposes only*), or by checking
+ * the error log for errors.
  */
-if (conf ('General', 'debug')) {
-	require ('lib/Debugger.php');
-	Debugger::start ();
+error_reporting (E_ALL & ~E_NOTICE);
+if (conf ('General', 'display_errors')) {
+	ini_set ('display_errors', 'On');
+} else {
+	ini_set ('display_errors', 'Off');
 }
 
 /**
+ * Enable the debugger if conf[General][debug] is true.
+ */
+require ('lib/Debugger.php');
+Debugger::start (conf ('General', 'debug'));
+
+/**
  * Include the core libraries used by the front controller
  * to dispatch and respond to requests.
  */
@@ -112,6 +114,9 @@
 $page = new Page;
 $controller = new Controller (conf ('Hooks'));
 $tpl = new Template (conf ('General', 'charset'), $controller);
+$controller->page ($page);
+$controller->i18n ($i18n);
+$controller->template ($tpl);
 View::init ($tpl);
 
 /**
@@ -131,6 +136,7 @@
 if (! isset ($cache) || ! is_object ($cache)) {
 	$cache = Cache::init (conf ('Cache'));
 }
+$controller->cache ($cache);
 
 /**
  * Route the request to the appropriate handler and get
Files elefant-elefant_1_3_2_beta/install/cache/.htaccess and elefant-elefant_1_3_3_beta/install/cache/.htaccess are identical
Files elefant-elefant_1_3_2_beta/install/css/style.css and elefant-elefant_1_3_3_beta/install/css/style.css are identical
Files elefant-elefant_1_3_2_beta/install/css/title.png and elefant-elefant_1_3_3_beta/install/css/title.png are identical
diff -urBNs elefant-elefant_1_3_2_beta/install/index.php elefant-elefant_1_3_3_beta/install/index.php
--- elefant-elefant_1_3_2_beta/install/index.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/install/index.php	2013-03-20 13:48:44.000000000 -0500
@@ -101,17 +101,17 @@
 		$apache = ($_SERVER['SERVER_SOFTWARE'] == 'Apache') ? true : (strpos (php_sapi_name (), 'apache') === 0) ? true : false;
 		$data = array (
 			'req' => array (
-				i18n_get ('PHP version must be 5.3+') => PHP_VERSION > '5.3',
-				i18n_get ('.htaccess file is missing from the site root. Please save the following file to your server:') . '</p><p><a href="https://raw.github.com/jbroadway/elefant/master/.htaccess" target="_blank">https://raw.github.com/jbroadway/elefant/master/.htaccess</a>' => (! $apache || ($apache && @file_exists ('../.htaccess'))),
-				i18n_get ('apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>') => is_writeable ('../apps'),
-				i18n_get ('cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../cache'),
-				i18n_get ('conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../conf'),
-				i18n_get ('css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../css'),
-				i18n_get ('files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../files'),
-				i18n_get ('lang folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../lang'),
-				i18n_get ('layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../layouts'),
-				i18n_get ('PHP PDO extension is missing.') => extension_loaded ('pdo'),
-				i18n_get ('Apache mod_rewrite extension must be installed.') => (php_sapi_name () != 'apache2handler' || ! function_exists ('apache_get_modules') || in_array ('mod_rewrite', apache_get_modules ()))
+				__ ('PHP version must be 5.3+') => PHP_VERSION > '5.3',
+				__ ('.htaccess file is missing from the site root. Please save the following file to your server:') . '</p><p><a href="https://raw.github.com/jbroadway/elefant/master/.htaccess" target="_blank">https://raw.github.com/jbroadway/elefant/master/.htaccess</a>' => (! $apache || ($apache && @file_exists ('../.htaccess'))),
+				__ ('apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>') => is_writeable ('../apps'),
+				__ ('cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../cache'),
+				__ ('conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../conf'),
+				__ ('css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../css'),
+				__ ('files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../files'),
+				__ ('lang folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../lang'),
+				__ ('layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>') => is_writeable ('../layouts'),
+				__ ('PHP PDO extension is missing.') => extension_loaded ('pdo'),
+				__ ('Apache mod_rewrite extension must be installed.') => (php_sapi_name () != 'apache2handler' || ! function_exists ('apache_get_modules') || in_array ('mod_rewrite', apache_get_modules ()))
 			),
 			'passed' => 0
 		);
@@ -130,6 +130,9 @@
 			$_POST['name'] = $_POST[$_POST['driver'] . '_name'];
 			$_POST['user'] = $_POST[$_POST['driver'] . '_user'];
 			$_POST['pass'] = $_POST[$_POST['driver'] . '_pass'];
+			$_POST['prefix'] = $_POST[$_POST['driver'] . '_prefix'];
+
+			DB::$prefix = $_POST['prefix'];
 
 			if (! DB::open ($_POST)) {
 				$data['error'] = DB::error ();
@@ -153,13 +156,13 @@
 
 				// write the settings
 				if (! $data['error']) {
-					$conf = file_get_contents ('../conf/config.php');
+					$config = file_get_contents ('../conf/config.php');
 					// good to replace database settings
 					$_POST['pass'] = str_replace ('"', '\"', $_POST['pass']);
 					$dbinfo = $tpl->render ('dbinfo', $_POST);
-					$conf = preg_replace ('/\[Database\].*\[Mongo\]/s', $dbinfo, $conf);
-					if (! file_put_contents ('../conf/config.php', $conf)) {
-						$data['error'] = i18n_get ('Failed to write to conf/config.php');
+					$config = preg_replace ('/\[Database\].*\[Mongo\]/s', $dbinfo, $config);
+					if (! file_put_contents ('../conf/config.php', $config)) {
+						$data['error'] = __ ('Failed to write to conf/config.php');
 					} else {
 						$data['ready'] = true;
 					}
@@ -171,6 +174,9 @@
 			$_POST['pgsql_host'] = 'localhost';
 			$_POST['mysql_port'] = '3306';
 			$_POST['pgsql_port'] = '5432';
+			$_POST['sqlite_prefix'] = 'elefant_';
+			$_POST['mysql_prefix'] = 'elefant_';
+			$_POST['pgsql_prefix'] = 'elefant_';
 		}
 		break;
 
@@ -180,25 +186,27 @@
 		$data['error'] = false;
 		if ($_SERVER['REQUEST_METHOD'] == 'POST') {
 			// got the settings, save them
-			$conf = file_get_contents ('../conf/config.php');
-			$conf = preg_replace ('/site_name = .*/', 'site_name = "' . $_POST['site_name'] . '"', $conf, 1);
-			$conf = preg_replace ('/email_from = .*/', 'email_from = "' . $_POST['email_from'] . '"', $conf, 1);
-			if (! file_put_contents ('../conf/config.php', $conf)) {
-				$data['error'] = i18n_get ('Failed to write to conf/config.php');
+			$config = file_get_contents ('../conf/config.php');
+			$config = preg_replace ('/site_name = .*/', 'site_name = "' . $_POST['site_name'] . '"', $config, 1);
+			$config = preg_replace ('/email_from = .*/', 'email_from = "' . $_POST['email_from'] . '"', $config, 1);
+			if (! file_put_contents ('../conf/config.php', $config)) {
+				$data['error'] = __ ('Failed to write to conf/config.php');
 			} else {
 				// create the admin user now
-				$conf_ini = parse_ini_file ('../conf/config.php', true);
-				$conf_ini['Database']['master']['master'] = true;
-				if (isset ($conf_ini['Database']['master']['file'])) {
-					$conf_ini['Database']['master']['file'] = '../' . $conf_ini['Database']['master']['file'];
+				$conf = parse_ini_file ('../conf/config.php', true);
+				$conf['Database']['master']['master'] = true;
+				if (isset ($conf['Database']['master']['file'])) {
+					$conf['Database']['master']['file'] = '../' . $conf['Database']['master']['file'];
 				}
 
-				if (! DB::open ($conf_ini['Database']['master'])) {
+				DB::$prefix = $conf['Database']['prefix'];
+
+				if (! DB::open ($conf['Database']['master'])) {
 					$data['error'] = DB::error ();
 				} else {
 					$date = gmdate ('Y-m-d H:i:s');
 					if (! DB::execute (
-						"update `user` set `email` = ?, `password` = ?, `name` = ? where `id` = 1",
+						"update `#prefix#user` set `email` = ?, `password` = ?, `name` = ? where `id` = 1",
 						$_POST['email_from'],
 						encrypt_pass ($_POST['pass']),
 						$_POST['your_name']
diff -urBNs elefant-elefant_1_3_2_beta/install/layouts/database.html elefant-elefant_1_3_3_beta/install/layouts/database.html
--- elefant-elefant_1_3_2_beta/install/layouts/database.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/install/layouts/database.html	2013-03-20 13:48:44.000000000 -0500
@@ -70,6 +70,8 @@
 
 <div id="sqlite">
 <p>{"File:"}<br /><tt>conf/site.db</tt></p>
+<p>{"Table prefix:"}<br />
+<input type="text" name="sqlite_prefix" value="{{ $_POST.sqlite_prefix }}" default="elefant_" size="30" /></p>
 </div>
 
 <div id="mysql" style="display: none">
@@ -83,6 +85,8 @@
 <input type="text" name="mysql_user" value="{{ $_POST.mysql_user }}" size="25" /></p>
 <p>{"Password"}:<br />
 <input type="password" name="mysql_pass" value="{{ $_POST.mysql_pass }}" size="25" /></p>
+<p>{"Table prefix:"}<br />
+<input type="text" name="mysql_prefix" value="{{ $_POST.mysql_prefix }}" default="elefant_" size="30" /></p>
 </div>
 
 <div id="pgsql" style="display: none">
@@ -96,6 +100,8 @@
 <input type="text" name="pgsql_user" value="{{ $_POST.pgsql_user }}" size="25" /></p>
 <p>{"Password"}:<br />
 <input type="password" name="pgsql_pass" value="{{ $_POST.pgsql_pass }}" size="25" /></p>
+<p>{"Table prefix:"}<br />
+<input type="text" name="pgsql_prefix" value="{{ $_POST.pgsql_prefix }}" default="elefant_" size="30" /></p>
 </div>
 
 <p><input type="submit" value="{"Connect & Create Schema"}" /></p>
diff -urBNs elefant-elefant_1_3_2_beta/install/layouts/dbinfo.html elefant-elefant_1_3_3_beta/install/layouts/dbinfo.html
--- elefant-elefant_1_3_2_beta/install/layouts/dbinfo.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/install/layouts/dbinfo.html	2013-03-20 13:48:44.000000000 -0500
@@ -16,4 +16,8 @@
 master[pass] = "{{ pass|none }}"
 {% end %}
 
+; The database table name prefix.
+
+prefix = "{{ prefix }}"
+
 [Mongo]
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/install/layouts/finished.html and elefant-elefant_1_3_3_beta/install/layouts/finished.html are identical
Files elefant-elefant_1_3_2_beta/install/layouts/introduction.html and elefant-elefant_1_3_3_beta/install/layouts/introduction.html are identical
Files elefant-elefant_1_3_2_beta/install/layouts/license.html and elefant-elefant_1_3_3_beta/install/layouts/license.html are identical
Files elefant-elefant_1_3_2_beta/install/layouts/requirements.html and elefant-elefant_1_3_3_beta/install/layouts/requirements.html are identical
diff -urBNs elefant-elefant_1_3_2_beta/install/layouts/settings.html elefant-elefant_1_3_3_beta/install/layouts/settings.html
--- elefant-elefant_1_3_2_beta/install/layouts/settings.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/install/layouts/settings.html	2013-03-20 13:48:44.000000000 -0500
@@ -4,7 +4,7 @@
 	<title>{"Elefant Installer"}</title>
 	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
 	<link rel="stylesheet" type="text/css" href="css/style.css" />
-	<script src="/js/jquery-1.7.1.min.js"></script>
+	<script src="/js/jquery-1.8.3.min.js"></script>
 	<script src="/js/jquery.password_strength.js"></script>
 	<script>
 		function verify_password (f) {
diff -urBNs elefant-elefant_1_3_2_beta/js/jquery-1.7.1.min.js elefant-elefant_1_3_3_beta/js/jquery-1.7.1.min.js
--- elefant-elefant_1_3_2_beta/js/jquery-1.7.1.min.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/jquery-1.7.1.min.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,4 +0,0 @@
-/*! jQuery v1.7.1 jquery.com | jquery.org/license */
-(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};
-f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
-{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/jquery-1.8.3.min.js elefant-elefant_1_3_3_beta/js/jquery-1.8.3.min.js
--- elefant-elefant_1_3_2_beta/js/jquery-1.8.3.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/js/jquery-1.8.3.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,2 @@
+/*! jQuery v1.8.3 jquery.com | jquery.org/license */
+(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_flat_0_aaaaaa_40x100.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_flat_0_aaaaaa_40x100.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_flat_75_ffffff_40x100.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_flat_75_ffffff_40x100.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_glass_55_fbf9ee_1x400.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_glass_55_fbf9ee_1x400.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_glass_65_ffffff_1x400.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_glass_65_ffffff_1x400.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_glass_75_dadada_1x400.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_glass_75_dadada_1x400.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_glass_75_e6e6e6_1x400.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_glass_75_e6e6e6_1x400.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_glass_95_fef1ec_1x400.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_glass_95_fef1ec_1x400.png are identical
Files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-bg_highlight-soft_75_cccccc_1x100.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-bg_highlight-soft_75_cccccc_1x100.png are identical
Binary files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-icons_222222_256x240.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-icons_222222_256x240.png differ
Binary files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-icons_2e83ff_256x240.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-icons_2e83ff_256x240.png differ
Binary files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-icons_454545_256x240.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-icons_454545_256x240.png differ
Binary files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-icons_888888_256x240.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-icons_888888_256x240.png differ
Binary files elefant-elefant_1_3_2_beta/js/jquery-ui/images/ui-icons_cd0a0a_256x240.png and elefant-elefant_1_3_3_beta/js/jquery-ui/images/ui-icons_cd0a0a_256x240.png differ
diff -urBNs elefant-elefant_1_3_2_beta/js/jquery-ui/jquery-ui.css elefant-elefant_1_3_3_beta/js/jquery-ui/jquery-ui.css
--- elefant-elefant_1_3_2_beta/js/jquery-ui/jquery-ui.css	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/jquery-ui/jquery-ui.css	2013-03-20 13:48:44.000000000 -0500
@@ -1,571 +1,5 @@
-/*
- * jQuery UI CSS Framework 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Theming/API
- */
-
-/* Layout helpers
-----------------------------------*/
-.ui-helper-hidden { display: none; }
-.ui-helper-hidden-accessible { position: absolute !important; clip: rect(1px 1px 1px 1px); clip: rect(1px,1px,1px,1px); }
-.ui-helper-reset { margin: 0; padding: 0; border: 0; outline: 0; line-height: 1.3; text-decoration: none; font-size: 100%; list-style: none; }
-.ui-helper-clearfix:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
-.ui-helper-clearfix { display: inline-block; }
-/* required comment for clearfix to work in Opera \*/
-* html .ui-helper-clearfix { height:1%; }
-.ui-helper-clearfix { display:block; }
-/* end clearfix */
-.ui-helper-zfix { width: 100%; height: 100%; top: 0; left: 0; position: absolute; opacity: 0; filter:Alpha(Opacity=0); }
-
-
-/* Interaction Cues
-----------------------------------*/
-.ui-state-disabled { cursor: default !important; }
-
-
-/* Icons
-----------------------------------*/
-
-/* states and images */
-.ui-icon { display: block; text-indent: -99999px; overflow: hidden; background-repeat: no-repeat; }
-
-
-/* Misc visuals
-----------------------------------*/
-
-/* Overlays */
-.ui-widget-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
-/*
- * jQuery UI Accordion 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Accordion#theming
- */
-/* IE/Win - Fix animation bug - #4615 */
-.ui-accordion { width: 100%; }
-.ui-accordion .ui-accordion-header { cursor: pointer; position: relative; margin-top: 1px; zoom: 1; }
-.ui-accordion .ui-accordion-li-fix { display: inline; }
-.ui-accordion .ui-accordion-header-active { border-bottom: 0 !important; }
-.ui-accordion .ui-accordion-header a { display: block; font-size: 1em; padding: .5em .5em .5em .7em; }
-.ui-accordion-icons .ui-accordion-header a { padding-left: 2.2em; }
-.ui-accordion .ui-accordion-header .ui-icon { position: absolute; left: .5em; top: 50%; margin-top: -8px; }
-.ui-accordion .ui-accordion-content { padding: 1em 2.2em; border-top: 0; margin-top: -2px; position: relative; top: 1px; margin-bottom: 2px; overflow: auto; display: none; zoom: 1; }
-.ui-accordion .ui-accordion-content-active { display: block; }
-/*
- * jQuery UI Autocomplete 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Autocomplete#theming
- */
-.ui-autocomplete { position: absolute; cursor: default; }	
-
-/* workarounds */
-* html .ui-autocomplete { width:1px; } /* without this, the menu expands to 100% in IE6 */
-
-/*
- * jQuery UI Menu 1.8.10
- *
- * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Menu#theming
- */
-.ui-menu {
-	list-style:none;
-	padding: 2px;
-	margin: 0;
-	display:block;
-	float: left;
-}
-.ui-menu .ui-menu {
-	margin-top: -3px;
-}
-.ui-menu .ui-menu-item {
-	margin:0;
-	padding: 0;
-	zoom: 1;
-	float: left;
-	clear: left;
-	width: 100%;
-}
-.ui-menu .ui-menu-item a {
-	text-decoration:none;
-	display:block;
-	padding:.2em .4em;
-	line-height:1.5;
-	zoom:1;
-}
-.ui-menu .ui-menu-item a.ui-state-hover,
-.ui-menu .ui-menu-item a.ui-state-active {
-	font-weight: normal;
-	margin: -1px;
-}
-/*
- * jQuery UI Button 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Button#theming
- */
-.ui-button { display: inline-block; position: relative; padding: 0; margin-right: .1em; text-decoration: none !important; cursor: pointer; text-align: center; zoom: 1; overflow: visible; } /* the overflow property removes extra width in IE */
-.ui-button-icon-only { width: 2.2em; } /* to make room for the icon, a width needs to be set here */
-button.ui-button-icon-only { width: 2.4em; } /* button elements seem to need a little more width */
-.ui-button-icons-only { width: 3.4em; } 
-button.ui-button-icons-only { width: 3.7em; } 
-
-/*button text element */
-.ui-button .ui-button-text { display: block; line-height: 1.4;  }
-.ui-button-text-only .ui-button-text { padding: .4em 1em; }
-.ui-button-icon-only .ui-button-text, .ui-button-icons-only .ui-button-text { padding: .4em; text-indent: -9999999px; }
-.ui-button-text-icon-primary .ui-button-text, .ui-button-text-icons .ui-button-text { padding: .4em 1em .4em 2.1em; }
-.ui-button-text-icon-secondary .ui-button-text, .ui-button-text-icons .ui-button-text { padding: .4em 2.1em .4em 1em; }
-.ui-button-text-icons .ui-button-text { padding-left: 2.1em; padding-right: 2.1em; }
-/* no icon support for input elements, provide padding by default */
-input.ui-button { padding: .4em 1em; }
-
-/*button icon element(s) */
-.ui-button-icon-only .ui-icon, .ui-button-text-icon-primary .ui-icon, .ui-button-text-icon-secondary .ui-icon, .ui-button-text-icons .ui-icon, .ui-button-icons-only .ui-icon { position: absolute; top: 50%; margin-top: -8px; }
-.ui-button-icon-only .ui-icon { left: 50%; margin-left: -8px; }
-.ui-button-text-icon-primary .ui-button-icon-primary, .ui-button-text-icons .ui-button-icon-primary, .ui-button-icons-only .ui-button-icon-primary { left: .5em; }
-.ui-button-text-icon-secondary .ui-button-icon-secondary, .ui-button-text-icons .ui-button-icon-secondary, .ui-button-icons-only .ui-button-icon-secondary { right: .5em; }
-.ui-button-text-icons .ui-button-icon-secondary, .ui-button-icons-only .ui-button-icon-secondary { right: .5em; }
-
-/*button sets*/
-.ui-buttonset { margin-right: 7px; }
-.ui-buttonset .ui-button { margin-left: 0; margin-right: -.3em; }
-
-/* workarounds */
-button.ui-button::-moz-focus-inner { border: 0; padding: 0; } /* reset extra padding in Firefox */
-/*
- * jQuery UI Datepicker 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Datepicker#theming
- */
-.ui-datepicker { width: 17em; padding: .2em .2em 0; display: none; }
-.ui-datepicker .ui-datepicker-header { position:relative; padding:.2em 0; }
-.ui-datepicker .ui-datepicker-prev, .ui-datepicker .ui-datepicker-next { position:absolute; top: 2px; width: 1.8em; height: 1.8em; }
-.ui-datepicker .ui-datepicker-prev-hover, .ui-datepicker .ui-datepicker-next-hover { top: 1px; }
-.ui-datepicker .ui-datepicker-prev { left:2px; }
-.ui-datepicker .ui-datepicker-next { right:2px; }
-.ui-datepicker .ui-datepicker-prev-hover { left:1px; }
-.ui-datepicker .ui-datepicker-next-hover { right:1px; }
-.ui-datepicker .ui-datepicker-prev span, .ui-datepicker .ui-datepicker-next span { display: block; position: absolute; left: 50%; margin-left: -8px; top: 50%; margin-top: -8px;  }
-.ui-datepicker .ui-datepicker-title { margin: 0 2.3em; line-height: 1.8em; text-align: center; }
-.ui-datepicker .ui-datepicker-title select { font-size:1em; margin:1px 0; }
-.ui-datepicker select.ui-datepicker-month-year {width: 100%;}
-.ui-datepicker select.ui-datepicker-month, 
-.ui-datepicker select.ui-datepicker-year { width: 49%;}
-.ui-datepicker table {width: 100%; font-size: .9em; border-collapse: collapse; margin:0 0 .4em; }
-.ui-datepicker th { padding: .7em .3em; text-align: center; font-weight: bold; border: 0;  }
-.ui-datepicker td { border: 0; padding: 1px; }
-.ui-datepicker td span, .ui-datepicker td a { display: block; padding: .2em; text-align: right; text-decoration: none; }
-.ui-datepicker .ui-datepicker-buttonpane { background-image: none; margin: .7em 0 0 0; padding:0 .2em; border-left: 0; border-right: 0; border-bottom: 0; }
-.ui-datepicker .ui-datepicker-buttonpane button { float: right; margin: .5em .2em .4em; cursor: pointer; padding: .2em .6em .3em .6em; width:auto; overflow:visible; }
-.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current { float:left; }
-
-/* with multiple calendars */
-.ui-datepicker.ui-datepicker-multi { width:auto; }
-.ui-datepicker-multi .ui-datepicker-group { float:left; }
-.ui-datepicker-multi .ui-datepicker-group table { width:95%; margin:0 auto .4em; }
-.ui-datepicker-multi-2 .ui-datepicker-group { width:50%; }
-.ui-datepicker-multi-3 .ui-datepicker-group { width:33.3%; }
-.ui-datepicker-multi-4 .ui-datepicker-group { width:25%; }
-.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header { border-left-width:0; }
-.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header { border-left-width:0; }
-.ui-datepicker-multi .ui-datepicker-buttonpane { clear:left; }
-.ui-datepicker-row-break { clear:both; width:100%; }
-
-/* RTL support */
-.ui-datepicker-rtl { direction: rtl; }
-.ui-datepicker-rtl .ui-datepicker-prev { right: 2px; left: auto; }
-.ui-datepicker-rtl .ui-datepicker-next { left: 2px; right: auto; }
-.ui-datepicker-rtl .ui-datepicker-prev:hover { right: 1px; left: auto; }
-.ui-datepicker-rtl .ui-datepicker-next:hover { left: 1px; right: auto; }
-.ui-datepicker-rtl .ui-datepicker-buttonpane { clear:right; }
-.ui-datepicker-rtl .ui-datepicker-buttonpane button { float: left; }
-.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current { float:right; }
-.ui-datepicker-rtl .ui-datepicker-group { float:right; }
-.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header { border-right-width:0; border-left-width:1px; }
-.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header { border-right-width:0; border-left-width:1px; }
-
-/* IE6 IFRAME FIX (taken from datepicker 1.5.3 */
-.ui-datepicker-cover {
-    display: none; /*sorry for IE5*/
-    display/**/: block; /*sorry for IE5*/
-    position: absolute; /*must have*/
-    z-index: -1; /*must have*/
-    filter: mask(); /*must have*/
-    top: -4px; /*must have*/
-    left: -4px; /*must have*/
-    width: 200px; /*must have*/
-    height: 200px; /*must have*/
-}/*
- * jQuery UI Dialog 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Dialog#theming
- */
-.ui-dialog { position: absolute; padding: .2em; width: 300px; overflow: hidden; }
-.ui-dialog .ui-dialog-titlebar { padding: .4em 1em; position: relative;  }
-.ui-dialog .ui-dialog-title { float: left; margin: .1em 16px .1em 0; } 
-.ui-dialog .ui-dialog-titlebar-close { position: absolute; right: .3em; top: 50%; width: 19px; margin: -10px 0 0 0; padding: 1px; height: 18px; }
-.ui-dialog .ui-dialog-titlebar-close span { display: block; margin: 1px; }
-.ui-dialog .ui-dialog-titlebar-close:hover, .ui-dialog .ui-dialog-titlebar-close:focus { padding: 0; }
-.ui-dialog .ui-dialog-content { position: relative; border: 0; padding: .5em 1em; background: none; overflow: auto; zoom: 1; }
-.ui-dialog .ui-dialog-buttonpane { text-align: left; border-width: 1px 0 0 0; background-image: none; margin: .5em 0 0 0; padding: .3em 1em .5em .4em; }
-.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset { float: right; }
-.ui-dialog .ui-dialog-buttonpane button { margin: .5em .4em .5em 0; cursor: pointer; }
-.ui-dialog .ui-resizable-se { width: 14px; height: 14px; right: 3px; bottom: 3px; }
-.ui-draggable .ui-dialog-titlebar { cursor: move; }
-/*
- * jQuery UI Progressbar 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Progressbar#theming
- */
-.ui-progressbar { height:2em; text-align: left; }
-.ui-progressbar .ui-progressbar-value {margin: -1px; height:100%; }/*
- * jQuery UI Resizable 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Resizable#theming
- */
-.ui-resizable { position: relative;}
-.ui-resizable-handle { position: absolute;font-size: 0.1px;z-index: 99999; display: block;}
-.ui-resizable-disabled .ui-resizable-handle, .ui-resizable-autohide .ui-resizable-handle { display: none; }
-.ui-resizable-n { cursor: n-resize; height: 7px; width: 100%; top: -5px; left: 0; }
-.ui-resizable-s { cursor: s-resize; height: 7px; width: 100%; bottom: -5px; left: 0; }
-.ui-resizable-e { cursor: e-resize; width: 7px; right: -5px; top: 0; height: 100%; }
-.ui-resizable-w { cursor: w-resize; width: 7px; left: -5px; top: 0; height: 100%; }
-.ui-resizable-se { cursor: se-resize; width: 12px; height: 12px; right: 1px; bottom: 1px; }
-.ui-resizable-sw { cursor: sw-resize; width: 9px; height: 9px; left: -5px; bottom: -5px; }
-.ui-resizable-nw { cursor: nw-resize; width: 9px; height: 9px; left: -5px; top: -5px; }
-.ui-resizable-ne { cursor: ne-resize; width: 9px; height: 9px; right: -5px; top: -5px;}/*
- * jQuery UI Selectable 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Selectable#theming
- */
-.ui-selectable-helper { position: absolute; z-index: 100; border:1px dotted black; }
-/*
- * jQuery UI Slider 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Slider#theming
- */
-.ui-slider { position: relative; text-align: left; }
-.ui-slider .ui-slider-handle { position: absolute; z-index: 2; width: 1.2em; height: 1.2em; cursor: default; }
-.ui-slider .ui-slider-range { position: absolute; z-index: 1; font-size: .7em; display: block; border: 0; background-position: 0 0; }
-
-.ui-slider-horizontal { height: .8em; }
-.ui-slider-horizontal .ui-slider-handle { top: -.3em; margin-left: -.6em; }
-.ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; }
-.ui-slider-horizontal .ui-slider-range-min { left: 0; }
-.ui-slider-horizontal .ui-slider-range-max { right: 0; }
-
-.ui-slider-vertical { width: .8em; height: 100px; }
-.ui-slider-vertical .ui-slider-handle { left: -.3em; margin-left: 0; margin-bottom: -.6em; }
-.ui-slider-vertical .ui-slider-range { left: 0; width: 100%; }
-.ui-slider-vertical .ui-slider-range-min { bottom: 0; }
-.ui-slider-vertical .ui-slider-range-max { top: 0; }/*
- * jQuery UI Tabs 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Tabs#theming
- */
-.ui-tabs { position: relative; padding: .2em; zoom: 1; } /* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
-.ui-tabs .ui-tabs-nav { margin: 0; padding: .2em .2em 0; }
-.ui-tabs .ui-tabs-nav li { list-style: none; float: left; position: relative; top: 1px; margin: 0 .2em 1px 0; border-bottom: 0 !important; padding: 0; white-space: nowrap; }
-.ui-tabs .ui-tabs-nav li a { float: left; padding: .5em 1em; text-decoration: none; }
-.ui-tabs .ui-tabs-nav li.ui-tabs-selected { margin-bottom: 0; padding-bottom: 1px; }
-.ui-tabs .ui-tabs-nav li.ui-tabs-selected a, .ui-tabs .ui-tabs-nav li.ui-state-disabled a, .ui-tabs .ui-tabs-nav li.ui-state-processing a { cursor: text; }
-.ui-tabs .ui-tabs-nav li a, .ui-tabs.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-selected a { cursor: pointer; } /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
-.ui-tabs .ui-tabs-panel { display: block; border-width: 0; padding: 1em 1.4em; background: none; }
-.ui-tabs .ui-tabs-hide { display: none !important; }
-/*
- * jQuery UI CSS Framework 1.8.10
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI/Theming/API
- *
- * To view and modify this theme, visit http://jqueryui.com/themeroller/
- */
-
-
-/* Component containers
-----------------------------------*/
-.ui-widget { font-family: Verdana,Arial,sans-serif/*{ffDefault}*/; font-size: 1.1em/*{fsDefault}*/; }
-.ui-widget .ui-widget { font-size: 1em; }
-.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Verdana,Arial,sans-serif/*{ffDefault}*/; font-size: 1em; }
-.ui-widget-content { border: 1px solid #aaaaaa/*{borderColorContent}*/; background: #ffffff/*{bgColorContent}*/ url(images/ui-bg_flat_75_ffffff_40x100.png)/*{bgImgUrlContent}*/ 50%/*{bgContentXPos}*/ 50%/*{bgContentYPos}*/ repeat-x/*{bgContentRepeat}*/; color: #222222/*{fcContent}*/; }
-.ui-widget-content a { color: #222222/*{fcContent}*/; }
-.ui-widget-header { border: 1px solid #aaaaaa/*{borderColorHeader}*/; background: #cccccc/*{bgColorHeader}*/ url(images/ui-bg_highlight-soft_75_cccccc_1x100.png)/*{bgImgUrlHeader}*/ 50%/*{bgHeaderXPos}*/ 50%/*{bgHeaderYPos}*/ repeat-x/*{bgHeaderRepeat}*/; color: #222222/*{fcHeader}*/; font-weight: bold; }
-.ui-widget-header a { color: #222222/*{fcHeader}*/; }
-
-/* Interaction states
-----------------------------------*/
-.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { border: 1px solid #d3d3d3/*{borderColorDefault}*/; background: #e6e6e6/*{bgColorDefault}*/ url(images/ui-bg_glass_75_e6e6e6_1x400.png)/*{bgImgUrlDefault}*/ 50%/*{bgDefaultXPos}*/ 50%/*{bgDefaultYPos}*/ repeat-x/*{bgDefaultRepeat}*/; font-weight: normal/*{fwDefault}*/; color: #555555/*{fcDefault}*/; }
-.ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: #555555/*{fcDefault}*/; text-decoration: none; }
-.ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: 1px solid #999999/*{borderColorHover}*/; background: #dadada/*{bgColorHover}*/ url(images/ui-bg_glass_75_dadada_1x400.png)/*{bgImgUrlHover}*/ 50%/*{bgHoverXPos}*/ 50%/*{bgHoverYPos}*/ repeat-x/*{bgHoverRepeat}*/; font-weight: normal/*{fwDefault}*/; color: #212121/*{fcHover}*/; }
-.ui-state-hover a, .ui-state-hover a:hover { color: #212121/*{fcHover}*/; text-decoration: none; }
-.ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active { border: 1px solid #aaaaaa/*{borderColorActive}*/; background: #ffffff/*{bgColorActive}*/ url(images/ui-bg_glass_65_ffffff_1x400.png)/*{bgImgUrlActive}*/ 50%/*{bgActiveXPos}*/ 50%/*{bgActiveYPos}*/ repeat-x/*{bgActiveRepeat}*/; font-weight: normal/*{fwDefault}*/; color: #212121/*{fcActive}*/; }
-.ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { color: #212121/*{fcActive}*/; text-decoration: none; }
-.ui-widget :active { outline: none; }
-
-/* Interaction Cues
-----------------------------------*/
-.ui-state-highlight, .ui-widget-content .ui-state-highlight, .ui-widget-header .ui-state-highlight  {border: 1px solid #fcefa1/*{borderColorHighlight}*/; background: #fbf9ee/*{bgColorHighlight}*/ url(images/ui-bg_glass_55_fbf9ee_1x400.png)/*{bgImgUrlHighlight}*/ 50%/*{bgHighlightXPos}*/ 50%/*{bgHighlightYPos}*/ repeat-x/*{bgHighlightRepeat}*/; color: #363636/*{fcHighlight}*/; }
-.ui-state-highlight a, .ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a { color: #363636/*{fcHighlight}*/; }
-.ui-state-error, .ui-widget-content .ui-state-error, .ui-widget-header .ui-state-error {border: 1px solid #cd0a0a/*{borderColorError}*/; background: #fef1ec/*{bgColorError}*/ url(images/ui-bg_glass_95_fef1ec_1x400.png)/*{bgImgUrlError}*/ 50%/*{bgErrorXPos}*/ 50%/*{bgErrorYPos}*/ repeat-x/*{bgErrorRepeat}*/; color: #cd0a0a/*{fcError}*/; }
-.ui-state-error a, .ui-widget-content .ui-state-error a, .ui-widget-header .ui-state-error a { color: #cd0a0a/*{fcError}*/; }
-.ui-state-error-text, .ui-widget-content .ui-state-error-text, .ui-widget-header .ui-state-error-text { color: #cd0a0a/*{fcError}*/; }
-.ui-priority-primary, .ui-widget-content .ui-priority-primary, .ui-widget-header .ui-priority-primary { font-weight: bold; }
-.ui-priority-secondary, .ui-widget-content .ui-priority-secondary,  .ui-widget-header .ui-priority-secondary { opacity: .7; filter:Alpha(Opacity=70); font-weight: normal; }
-.ui-state-disabled, .ui-widget-content .ui-state-disabled, .ui-widget-header .ui-state-disabled { opacity: .35; filter:Alpha(Opacity=35); background-image: none; }
-
-/* Icons
-----------------------------------*/
-
-/* states and images */
-.ui-icon { width: 16px; height: 16px; background-image: url(images/ui-icons_222222_256x240.png)/*{iconsContent}*/; }
-.ui-widget-content .ui-icon {background-image: url(images/ui-icons_222222_256x240.png)/*{iconsContent}*/; }
-.ui-widget-header .ui-icon {background-image: url(images/ui-icons_222222_256x240.png)/*{iconsHeader}*/; }
-.ui-state-default .ui-icon { background-image: url(images/ui-icons_888888_256x240.png)/*{iconsDefault}*/; }
-.ui-state-hover .ui-icon, .ui-state-focus .ui-icon {background-image: url(images/ui-icons_454545_256x240.png)/*{iconsHover}*/; }
-.ui-state-active .ui-icon {background-image: url(images/ui-icons_454545_256x240.png)/*{iconsActive}*/; }
-.ui-state-highlight .ui-icon {background-image: url(images/ui-icons_2e83ff_256x240.png)/*{iconsHighlight}*/; }
-.ui-state-error .ui-icon, .ui-state-error-text .ui-icon {background-image: url(images/ui-icons_cd0a0a_256x240.png)/*{iconsError}*/; }
-
-/* positioning */
-.ui-icon-carat-1-n { background-position: 0 0; }
-.ui-icon-carat-1-ne { background-position: -16px 0; }
-.ui-icon-carat-1-e { background-position: -32px 0; }
-.ui-icon-carat-1-se { background-position: -48px 0; }
-.ui-icon-carat-1-s { background-position: -64px 0; }
-.ui-icon-carat-1-sw { background-position: -80px 0; }
-.ui-icon-carat-1-w { background-position: -96px 0; }
-.ui-icon-carat-1-nw { background-position: -112px 0; }
-.ui-icon-carat-2-n-s { background-position: -128px 0; }
-.ui-icon-carat-2-e-w { background-position: -144px 0; }
-.ui-icon-triangle-1-n { background-position: 0 -16px; }
-.ui-icon-triangle-1-ne { background-position: -16px -16px; }
-.ui-icon-triangle-1-e { background-position: -32px -16px; }
-.ui-icon-triangle-1-se { background-position: -48px -16px; }
-.ui-icon-triangle-1-s { background-position: -64px -16px; }
-.ui-icon-triangle-1-sw { background-position: -80px -16px; }
-.ui-icon-triangle-1-w { background-position: -96px -16px; }
-.ui-icon-triangle-1-nw { background-position: -112px -16px; }
-.ui-icon-triangle-2-n-s { background-position: -128px -16px; }
-.ui-icon-triangle-2-e-w { background-position: -144px -16px; }
-.ui-icon-arrow-1-n { background-position: 0 -32px; }
-.ui-icon-arrow-1-ne { background-position: -16px -32px; }
-.ui-icon-arrow-1-e { background-position: -32px -32px; }
-.ui-icon-arrow-1-se { background-position: -48px -32px; }
-.ui-icon-arrow-1-s { background-position: -64px -32px; }
-.ui-icon-arrow-1-sw { background-position: -80px -32px; }
-.ui-icon-arrow-1-w { background-position: -96px -32px; }
-.ui-icon-arrow-1-nw { background-position: -112px -32px; }
-.ui-icon-arrow-2-n-s { background-position: -128px -32px; }
-.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }
-.ui-icon-arrow-2-e-w { background-position: -160px -32px; }
-.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }
-.ui-icon-arrowstop-1-n { background-position: -192px -32px; }
-.ui-icon-arrowstop-1-e { background-position: -208px -32px; }
-.ui-icon-arrowstop-1-s { background-position: -224px -32px; }
-.ui-icon-arrowstop-1-w { background-position: -240px -32px; }
-.ui-icon-arrowthick-1-n { background-position: 0 -48px; }
-.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }
-.ui-icon-arrowthick-1-e { background-position: -32px -48px; }
-.ui-icon-arrowthick-1-se { background-position: -48px -48px; }
-.ui-icon-arrowthick-1-s { background-position: -64px -48px; }
-.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }
-.ui-icon-arrowthick-1-w { background-position: -96px -48px; }
-.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }
-.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }
-.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }
-.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }
-.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }
-.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }
-.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }
-.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }
-.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }
-.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }
-.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }
-.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }
-.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }
-.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }
-.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }
-.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }
-.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }
-.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }
-.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }
-.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }
-.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }
-.ui-icon-arrow-4 { background-position: 0 -80px; }
-.ui-icon-arrow-4-diag { background-position: -16px -80px; }
-.ui-icon-extlink { background-position: -32px -80px; }
-.ui-icon-newwin { background-position: -48px -80px; }
-.ui-icon-refresh { background-position: -64px -80px; }
-.ui-icon-shuffle { background-position: -80px -80px; }
-.ui-icon-transfer-e-w { background-position: -96px -80px; }
-.ui-icon-transferthick-e-w { background-position: -112px -80px; }
-.ui-icon-folder-collapsed { background-position: 0 -96px; }
-.ui-icon-folder-open { background-position: -16px -96px; }
-.ui-icon-document { background-position: -32px -96px; }
-.ui-icon-document-b { background-position: -48px -96px; }
-.ui-icon-note { background-position: -64px -96px; }
-.ui-icon-mail-closed { background-position: -80px -96px; }
-.ui-icon-mail-open { background-position: -96px -96px; }
-.ui-icon-suitcase { background-position: -112px -96px; }
-.ui-icon-comment { background-position: -128px -96px; }
-.ui-icon-person { background-position: -144px -96px; }
-.ui-icon-print { background-position: -160px -96px; }
-.ui-icon-trash { background-position: -176px -96px; }
-.ui-icon-locked { background-position: -192px -96px; }
-.ui-icon-unlocked { background-position: -208px -96px; }
-.ui-icon-bookmark { background-position: -224px -96px; }
-.ui-icon-tag { background-position: -240px -96px; }
-.ui-icon-home { background-position: 0 -112px; }
-.ui-icon-flag { background-position: -16px -112px; }
-.ui-icon-calendar { background-position: -32px -112px; }
-.ui-icon-cart { background-position: -48px -112px; }
-.ui-icon-pencil { background-position: -64px -112px; }
-.ui-icon-clock { background-position: -80px -112px; }
-.ui-icon-disk { background-position: -96px -112px; }
-.ui-icon-calculator { background-position: -112px -112px; }
-.ui-icon-zoomin { background-position: -128px -112px; }
-.ui-icon-zoomout { background-position: -144px -112px; }
-.ui-icon-search { background-position: -160px -112px; }
-.ui-icon-wrench { background-position: -176px -112px; }
-.ui-icon-gear { background-position: -192px -112px; }
-.ui-icon-heart { background-position: -208px -112px; }
-.ui-icon-star { background-position: -224px -112px; }
-.ui-icon-link { background-position: -240px -112px; }
-.ui-icon-cancel { background-position: 0 -128px; }
-.ui-icon-plus { background-position: -16px -128px; }
-.ui-icon-plusthick { background-position: -32px -128px; }
-.ui-icon-minus { background-position: -48px -128px; }
-.ui-icon-minusthick { background-position: -64px -128px; }
-.ui-icon-close { background-position: -80px -128px; }
-.ui-icon-closethick { background-position: -96px -128px; }
-.ui-icon-key { background-position: -112px -128px; }
-.ui-icon-lightbulb { background-position: -128px -128px; }
-.ui-icon-scissors { background-position: -144px -128px; }
-.ui-icon-clipboard { background-position: -160px -128px; }
-.ui-icon-copy { background-position: -176px -128px; }
-.ui-icon-contact { background-position: -192px -128px; }
-.ui-icon-image { background-position: -208px -128px; }
-.ui-icon-video { background-position: -224px -128px; }
-.ui-icon-script { background-position: -240px -128px; }
-.ui-icon-alert { background-position: 0 -144px; }
-.ui-icon-info { background-position: -16px -144px; }
-.ui-icon-notice { background-position: -32px -144px; }
-.ui-icon-help { background-position: -48px -144px; }
-.ui-icon-check { background-position: -64px -144px; }
-.ui-icon-bullet { background-position: -80px -144px; }
-.ui-icon-radio-off { background-position: -96px -144px; }
-.ui-icon-radio-on { background-position: -112px -144px; }
-.ui-icon-pin-w { background-position: -128px -144px; }
-.ui-icon-pin-s { background-position: -144px -144px; }
-.ui-icon-play { background-position: 0 -160px; }
-.ui-icon-pause { background-position: -16px -160px; }
-.ui-icon-seek-next { background-position: -32px -160px; }
-.ui-icon-seek-prev { background-position: -48px -160px; }
-.ui-icon-seek-end { background-position: -64px -160px; }
-.ui-icon-seek-start { background-position: -80px -160px; }
-/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */
-.ui-icon-seek-first { background-position: -80px -160px; }
-.ui-icon-stop { background-position: -96px -160px; }
-.ui-icon-eject { background-position: -112px -160px; }
-.ui-icon-volume-off { background-position: -128px -160px; }
-.ui-icon-volume-on { background-position: -144px -160px; }
-.ui-icon-power { background-position: 0 -176px; }
-.ui-icon-signal-diag { background-position: -16px -176px; }
-.ui-icon-signal { background-position: -32px -176px; }
-.ui-icon-battery-0 { background-position: -48px -176px; }
-.ui-icon-battery-1 { background-position: -64px -176px; }
-.ui-icon-battery-2 { background-position: -80px -176px; }
-.ui-icon-battery-3 { background-position: -96px -176px; }
-.ui-icon-circle-plus { background-position: 0 -192px; }
-.ui-icon-circle-minus { background-position: -16px -192px; }
-.ui-icon-circle-close { background-position: -32px -192px; }
-.ui-icon-circle-triangle-e { background-position: -48px -192px; }
-.ui-icon-circle-triangle-s { background-position: -64px -192px; }
-.ui-icon-circle-triangle-w { background-position: -80px -192px; }
-.ui-icon-circle-triangle-n { background-position: -96px -192px; }
-.ui-icon-circle-arrow-e { background-position: -112px -192px; }
-.ui-icon-circle-arrow-s { background-position: -128px -192px; }
-.ui-icon-circle-arrow-w { background-position: -144px -192px; }
-.ui-icon-circle-arrow-n { background-position: -160px -192px; }
-.ui-icon-circle-zoomin { background-position: -176px -192px; }
-.ui-icon-circle-zoomout { background-position: -192px -192px; }
-.ui-icon-circle-check { background-position: -208px -192px; }
-.ui-icon-circlesmall-plus { background-position: 0 -208px; }
-.ui-icon-circlesmall-minus { background-position: -16px -208px; }
-.ui-icon-circlesmall-close { background-position: -32px -208px; }
-.ui-icon-squaresmall-plus { background-position: -48px -208px; }
-.ui-icon-squaresmall-minus { background-position: -64px -208px; }
-.ui-icon-squaresmall-close { background-position: -80px -208px; }
-.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }
-.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }
-.ui-icon-grip-solid-vertical { background-position: -32px -224px; }
-.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }
-.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }
-.ui-icon-grip-diagonal-se { background-position: -80px -224px; }
-
-
-/* Misc visuals
-----------------------------------*/
-
-/* Corner radius */
-.ui-corner-tl { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; border-top-left-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-tr { -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; border-top-right-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-bl { -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; border-bottom-left-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-br { -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; border-bottom-right-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-top { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; border-top-left-radius: 4px/*{cornerRadius}*/; -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; border-top-right-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-bottom { -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; border-bottom-left-radius: 4px/*{cornerRadius}*/; -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; border-bottom-right-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-right {  -moz-border-radius-topright: 4px/*{cornerRadius}*/; -webkit-border-top-right-radius: 4px/*{cornerRadius}*/; border-top-right-radius: 4px/*{cornerRadius}*/; -moz-border-radius-bottomright: 4px/*{cornerRadius}*/; -webkit-border-bottom-right-radius: 4px/*{cornerRadius}*/; border-bottom-right-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-left { -moz-border-radius-topleft: 4px/*{cornerRadius}*/; -webkit-border-top-left-radius: 4px/*{cornerRadius}*/; border-top-left-radius: 4px/*{cornerRadius}*/; -moz-border-radius-bottomleft: 4px/*{cornerRadius}*/; -webkit-border-bottom-left-radius: 4px/*{cornerRadius}*/; border-bottom-left-radius: 4px/*{cornerRadius}*/; }
-.ui-corner-all { -moz-border-radius: 4px/*{cornerRadius}*/; -webkit-border-radius: 4px/*{cornerRadius}*/; border-radius: 4px/*{cornerRadius}*/; }
-
-/* Overlays */
-.ui-widget-overlay { background: #aaaaaa/*{bgColorOverlay}*/ url(images/ui-bg_flat_0_aaaaaa_40x100.png)/*{bgImgUrlOverlay}*/ 50%/*{bgOverlayXPos}*/ 50%/*{bgOverlayYPos}*/ repeat-x/*{bgOverlayRepeat}*/; opacity: .3;filter:Alpha(Opacity=30)/*{opacityOverlay}*/; }
-.ui-widget-shadow { margin: -8px/*{offsetTopShadow}*/ 0 0 -8px/*{offsetLeftShadow}*/; padding: 8px/*{thicknessShadow}*/; background: #aaaaaa/*{bgColorShadow}*/ url(images/ui-bg_flat_0_aaaaaa_40x100.png)/*{bgImgUrlShadow}*/ 50%/*{bgShadowXPos}*/ 50%/*{bgShadowYPos}*/ repeat-x/*{bgShadowRepeat}*/; opacity: .3;filter:Alpha(Opacity=30)/*{opacityShadow}*/; -moz-border-radius: 8px/*{cornerRadiusShadow}*/; -webkit-border-radius: 8px/*{cornerRadiusShadow}*/; border-radius: 8px/*{cornerRadiusShadow}*/; }
\ No newline at end of file
+/*! jQuery UI - v1.10.0 - 2013-01-17
+* http://jqueryui.com
+* Includes: jquery.ui.core.css, jquery.ui.accordion.css, jquery.ui.autocomplete.css, jquery.ui.button.css, jquery.ui.datepicker.css, jquery.ui.dialog.css, jquery.ui.menu.css, jquery.ui.progressbar.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.slider.css, jquery.ui.spinner.css, jquery.ui.tabs.css, jquery.ui.tooltip.css
+* To view and modify this theme, visit http://jqueryui.com/themeroller/
+* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-accordion .ui-accordion-header{display:block;cursor:pointer;position:relative;margin-top:2px;padding:.5em .5em .5em .7em;min-height:0}.ui-accordion .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-noicons{padding-left:.7em}.ui-accordion .ui-accordion-icons .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-header .ui-accordion-header-icon{position:absolute;left:.5em;top:50%;margin-top:-8px}.ui-accordion .ui-accordion-content{padding:1em 2.2em;border-top:0;overflow:auto}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.4em 1em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-datepicker{width:17em;padding:.2em .2em 0;display:none}.ui-datepicker .ui-datepicker-header{position:relative;padding:.2em 0}.ui-datepicker .ui-datepicker-prev,.ui-datepicker .ui-datepicker-next{position:absolute;top:2px;width:1.8em;height:1.8em}.ui-datepicker .ui-datepicker-prev-hover,.ui-datepicker .ui-datepicker-next-hover{top:1px}.ui-datepicker .ui-datepicker-prev{left:2px}.ui-datepicker .ui-datepicker-next{right:2px}.ui-datepicker .ui-datepicker-prev-hover{left:1px}.ui-datepicker .ui-datepicker-next-hover{right:1px}.ui-datepicker .ui-datepicker-prev span,.ui-datepicker .ui-datepicker-next span{display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.ui-datepicker .ui-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.ui-datepicker .ui-datepicker-title select{font-size:1em;margin:1px 0}.ui-datepicker select.ui-datepicker-month-year{width:100%}.ui-datepicker select.ui-datepicker-month,.ui-datepicker select.ui-datepicker-year{width:49%}.ui-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.ui-datepicker th{padding:.7em .3em;text-align:center;font-weight:bold;border:0}.ui-datepicker td{border:0;padding:1px}.ui-datepicker td span,.ui-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.ui-datepicker .ui-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.ui-datepicker .ui-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current{float:left}.ui-datepicker.ui-datepicker-multi{width:auto}.ui-datepicker-multi .ui-datepicker-group{float:left}.ui-datepicker-multi .ui-datepicker-group table{width:95%;margin:0 auto .4em}.ui-datepicker-multi-2 .ui-datepicker-group{width:50%}.ui-datepicker-multi-3 .ui-datepicker-group{width:33.3%}.ui-datepicker-multi-4 .ui-datepicker-group{width:25%}.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header{border-left-width:0}.ui-datepicker-multi .ui-datepicker-buttonpane{clear:left}.ui-datepicker-row-break{clear:both;width:100%;font-size:0}.ui-datepicker-rtl{direction:rtl}.ui-datepicker-rtl .ui-datepicker-prev{right:2px;left:auto}.ui-datepicker-rtl .ui-datepicker-next{left:2px;right:auto}.ui-datepicker-rtl .ui-datepicker-prev:hover{right:1px;left:auto}.ui-datepicker-rtl .ui-datepicker-next:hover{left:1px;right:auto}.ui-datepicker-rtl .ui-datepicker-buttonpane{clear:right}.ui-datepicker-rtl .ui-datepicker-buttonpane button{float:left}.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,.ui-datepicker-rtl .ui-datepicker-group{float:right}.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header{border-right-width:0;border-left-width:1px}.ui-dialog{position:absolute;top:0;left:0;padding:.2em;outline:0}.ui-dialog .ui-dialog-titlebar{padding:.4em 1em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:21px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em 1em;background:none;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-menu{list-style:none;padding:2px;margin:0;display:block;outline:none}.ui-menu .ui-menu{margin-top:-3px;position:absolute}.ui-menu .ui-menu-item{margin:0;padding:0;width:100%}.ui-menu .ui-menu-divider{margin:5px -2px 5px -2px;height:0;font-size:0;line-height:0;border-width:1px 0 0 0}.ui-menu .ui-menu-item a{text-decoration:none;display:block;padding:2px .4em;line-height:1.5;min-height:0;font-weight:normal}.ui-menu .ui-menu-item a.ui-state-focus,.ui-menu .ui-menu-item a.ui-state-active{font-weight:normal;margin:-1px}.ui-menu .ui-state-disabled{font-weight:normal;margin:.4em 0 .2em;line-height:1.5}.ui-menu .ui-state-disabled a{cursor:default}.ui-menu-icons{position:relative}.ui-menu-icons .ui-menu-item a{position:relative;padding-left:2em}.ui-menu .ui-icon{position:absolute;top:.2em;left:.2em}.ui-menu .ui-menu-icon{position:static;float:right}.ui-progressbar{height:2em;text-align:left;overflow:hidden}.ui-progressbar .ui-progressbar-value{margin:-1px;height:100%}.ui-progressbar .ui-progressbar-overlay{background:url("images/animated-overlay.gif");height:100%;filter:alpha(opacity=25);opacity:0.25}.ui-progressbar-indeterminate .ui-progressbar-value{background-image:none}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:0.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-selectable-helper{position:absolute;z-index:100;border:1px dotted black}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-spinner{position:relative;display:inline-block;overflow:hidden;padding:0;vertical-align:middle}.ui-spinner-input{border:none;background:none;color:inherit;padding:0;margin:.2em 0;vertical-align:middle;margin-left:.4em;margin-right:22px}.ui-spinner-button{width:16px;height:50%;font-size:.5em;padding:0;margin:0;text-align:center;position:absolute;cursor:default;display:block;overflow:hidden;right:0}.ui-spinner a.ui-spinner-button{border-top:none;border-bottom:none;border-right:none}.ui-spinner .ui-icon{position:absolute;margin-top:-8px;top:50%;left:0}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}.ui-spinner .ui-icon-triangle-1-s{background-position:-65px -16px}.ui-tabs{position:relative;padding:.2em}.ui-tabs .ui-tabs-nav{margin:0;padding:.2em .2em 0}.ui-tabs .ui-tabs-nav li{list-style:none;float:left;position:relative;top:0;margin:1px .2em 0 0;border-bottom:0;padding:0;white-space:nowrap}.ui-tabs .ui-tabs-nav li a{float:left;padding:.5em 1em;text-decoration:none}.ui-tabs .ui-tabs-nav li.ui-tabs-active{margin-bottom:-1px;padding-bottom:1px}.ui-tabs .ui-tabs-nav li.ui-tabs-active a,.ui-tabs .ui-tabs-nav li.ui-state-disabled a,.ui-tabs .ui-tabs-nav li.ui-tabs-loading a{cursor:text}.ui-tabs .ui-tabs-nav li a,.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active a{cursor:pointer}.ui-tabs .ui-tabs-panel{display:block;border-width:0;padding:1em 1.4em;background:none}.ui-tooltip{padding:8px;position:absolute;z-index:9999;max-width:300px;-webkit-box-shadow:0 0 5px #aaa;box-shadow:0 0 5px #aaa}body .ui-tooltip{border-width:2px}.ui-widget{font-family:Verdana,Arial,sans-serif;font-size:1.1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Verdana,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid #aaa;background:#fff url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x;color:#222}.ui-widget-content a{color:#222}.ui-widget-header{border:1px solid #aaa;background:#ccc url(images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x;color:#222;font-weight:bold}.ui-widget-header a{color:#222}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid #d3d3d3;background:#e6e6e6 url(images/ui-bg_glass_75_e6e6e6_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#555}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#555;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #999;background:#dadada url(images/ui-bg_glass_75_dadada_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#212121}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited{color:#212121;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid #aaa;background:#fff url(images/ui-bg_glass_65_ffffff_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#212121}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#212121;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #fcefa1;background:#fbf9ee url(images/ui-bg_glass_55_fbf9ee_1x400.png) 50% 50% repeat-x;color:#363636}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#363636}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#fef1ec url(images/ui-bg_glass_95_fef1ec_1x400.png) 50% 50% repeat-x;color:#cd0a0a}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#cd0a0a}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#cd0a0a}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px;background-position:16px 16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(images/ui-icons_222222_256x240.png)}.ui-widget-header .ui-icon{background-image:url(images/ui-icons_222222_256x240.png)}.ui-state-default .ui-icon{background-image:url(images/ui-icons_888888_256x240.png)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url(images/ui-icons_454545_256x240.png)}.ui-state-active .ui-icon{background-image:url(images/ui-icons_454545_256x240.png)}.ui-state-highlight .ui-icon{background-image:url(images/ui-icons_2e83ff_256x240.png)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(images/ui-icons_cd0a0a_256x240.png)}.ui-icon-carat-1-n{background-position:0 0}.ui-icon-carat-1-ne{background-position:-16px 0}.ui-icon-carat-1-e{background-position:-32px 0}.ui-icon-carat-1-se{background-position:-48px 0}.ui-icon-carat-1-s{background-position:-64px 0}.ui-icon-carat-1-sw{background-position:-80px 0}.ui-icon-carat-1-w{background-position:-96px 0}.ui-icon-carat-1-nw{background-position:-112px 0}.ui-icon-carat-2-n-s{background-position:-128px 0}.ui-icon-carat-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-64px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-64px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:0 -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:4px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:4px}.ui-widget-overlay{background:#aaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{margin:-8px 0 0 -8px;padding:8px;background:#aaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x;opacity:.3;filter:Alpha(Opacity=30);border-radius:8px}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/jquery-ui/jquery-ui.min.js elefant-elefant_1_3_3_beta/js/jquery-ui/jquery-ui.min.js
--- elefant-elefant_1_3_2_beta/js/jquery-ui/jquery-ui.min.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/jquery-ui/jquery-ui.min.js	2013-03-20 13:48:44.000000000 -0500
@@ -1,407 +1,6 @@
-/*!
- * jQuery UI 1.8.13
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI
- */
-(function(a,d){function c(g,e){var i=g.nodeName.toLowerCase();if("area"===i){e=g.parentNode;i=e.name;if(!g.href||!i||e.nodeName.toLowerCase()!=="map")return false;g=a("img[usemap=#"+i+"]")[0];return!!g&&f(g)}return(/input|select|textarea|button|object/.test(i)?!g.disabled:"a"==i?g.href||e:e)&&f(g)}function f(g){return!a(g).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.13",
-keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(g,e){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){a(i).focus();
-e&&e.call(i)},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;g=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,
-"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!g.length?a(document):g},zIndex:function(g){if(g!==d)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var e;g.length&&g[0]!==document;){e=g.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){e=parseInt(g.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}g=g.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",
-function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(g,e){function i(l,o,n,k){a.each(b,function(){o-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(n)o-=parseFloat(a.curCSS(l,"border"+this+"Width",true))||0;if(k)o-=parseFloat(a.curCSS(l,"margin"+this,true))||0});return o}var b=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
-outerHeight:a.fn.outerHeight};a.fn["inner"+e]=function(l){if(l===d)return j["inner"+e].call(this);return this.each(function(){a(this).css(h,i(this,l)+"px")})};a.fn["outer"+e]=function(l,o){if(typeof l!=="number")return j["outer"+e].call(this,l);return this.each(function(){a(this).css(h,i(this,l,true,o)+"px")})}});a.extend(a.expr[":"],{data:function(g,e,i){return!!a.data(g,i[3])},focusable:function(g){return c(g,!isNaN(a.attr(g,"tabindex")))},tabbable:function(g){var e=a.attr(g,"tabindex"),i=isNaN(e);
-return(i||e>=0)&&c(g,!i)}});a(function(){var g=document.body,e=g.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart"in e;g.removeChild(e).style.display="none"});a.extend(a.ui,{plugin:{add:function(g,e,i){g=a.ui[g].prototype;for(var b in i){g.plugins[b]=g.plugins[b]||[];g.plugins[b].push([e,i[b]])}},call:function(g,e,i){if((e=g.plugins[e])&&g.element[0].parentNode)for(var b=
-0;b<e.length;b++)g.options[e[b][0]]&&e[b][1].apply(g.element,i)}},contains:function(g,e){return document.compareDocumentPosition?g.compareDocumentPosition(e)&16:g!==e&&g.contains(e)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden")return false;e=e&&e==="left"?"scrollLeft":"scrollTop";var i=false;if(g[e]>0)return true;g[e]=1;i=g[e]>0;g[e]=0;return i},isOverAxis:function(g,e,i){return g>e&&g<e+i},isOver:function(g,e,i,b,h,j){return a.ui.isOverAxis(g,i,h)&&a.ui.isOverAxis(e,b,j)}})}})(jQuery);
-(function(a,d){if(a.cleanData){var c=a.cleanData;a.cleanData=function(g){for(var e=0,i;(i=g[e])!=null;e++)a(i).triggerHandler("remove");c(g)}}else{var f=a.fn.remove;a.fn.remove=function(g,e){return this.each(function(){if(!e)if(!g||a.filter(g,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return f.call(a(this),g,e)})}}a.widget=function(g,e,i){var b=g.split(".")[0],h;g=g.split(".")[1];h=b+"-"+g;if(!i){i=e;e=a.Widget}a.expr[":"][h]=function(j){return!!a.data(j,
-g)};a[b]=a[b]||{};a[b][g]=function(j,l){arguments.length&&this._createWidget(j,l)};e=new e;e.options=a.extend(true,{},e.options);a[b][g].prototype=a.extend(true,e,{namespace:b,widgetName:g,widgetEventPrefix:a[b][g].prototype.widgetEventPrefix||g,widgetBaseClass:h},i);a.widget.bridge(g,a[b][g])};a.widget.bridge=function(g,e){a.fn[g]=function(i){var b=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!b&&h.length?a.extend.apply(null,[true,i].concat(h)):i;if(b&&i.charAt(0)==="_")return j;
-b?this.each(function(){var l=a.data(this,g),o=l&&a.isFunction(l[i])?l[i].apply(l,h):l;if(o!==l&&o!==d){j=o;return false}}):this.each(function(){var l=a.data(this,g);l?l.option(i||{})._init():a.data(this,g,new e(i,this))});return j}};a.Widget=function(g,e){arguments.length&&this._createWidget(g,e)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(g,e){a.data(e,this.widgetName,this);this.element=a(e);this.options=a.extend(true,{},this.options,
-this._getCreateOptions(),g);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
-widget:function(){return this.element},option:function(g,e){var i=g;if(arguments.length===0)return a.extend({},this.options);if(typeof g==="string"){if(e===d)return this.options[g];i={};i[g]=e}this._setOptions(i);return this},_setOptions:function(g){var e=this;a.each(g,function(i,b){e._setOption(i,b)});return this},_setOption:function(g,e){this.options[g]=e;if(g==="disabled")this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e);return this},
-enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(g,e,i){var b=this.options[g];e=a.Event(e);e.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();i=i||{};if(e.originalEvent){g=a.event.props.length;for(var h;g;){h=a.event.props[--g];e[h]=e.originalEvent[h]}}this.element.trigger(e,i);return!(a.isFunction(b)&&b.call(this.element[0],e,i)===false||e.isDefaultPrevented())}}})(jQuery);
-(function(a){var d=false;a(document).mousedown(function(){d=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(f){return c._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===a.data(f.target,c.widgetName+".preventClickEvent")){a.removeData(f.target,c.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
-this.widgetName)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var f=this,g=c.which==1,e=typeof this.options.cancel=="string"?a(c.target).parents().add(c.target).filter(this.options.cancel).length:false;if(!g||e||!this._mouseCapture(c))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=
-this._mouseStart(c)!==false;if(!this._mouseStarted){c.preventDefault();return true}}true===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(i){return f._mouseMove(i)};this._mouseUpDelegate=function(i){return f._mouseUp(i)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=true}},_mouseMove:function(c){if(a.browser.msie&&
-!(document.documentMode>=9)&&!c.button)return this._mouseUp(c);if(this._mouseStarted){this._mouseDrag(c);return c.preventDefault()}if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==false)?this._mouseDrag(c):this._mouseUp(c);return!this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
-false;c.target==this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",true);this._mouseStop(c)}return false},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
-(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
-"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(d){var c=
-this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(d);if(!this.handle)return false;a(c.iframeFix===true?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(d){var c=this.options;this.helper=
-this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
-this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);
-this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(d){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)c=
-a.ui.ddmanager.drop(this,d);if(this.dropped){c=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",d)!==false&&f._clear()})}else this._trigger("stop",
-d)!==false&&this._clear();return false},_mouseUp:function(d){this.options.iframeFix===true&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});return a.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
-d.target)c=true});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d=
-{left:+d[0],top:+d[1]||0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&
-a.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=
-this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
-{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[(d.containment=="document"?0:a(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(d.containment=="document"?0:a(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(d.containment=="document"?0:a(window).scrollLeft())+
-a(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d.containment=="document"?0:a(window).scrollTop())+(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)&&d.containment.constructor!=Array){d=a(d.containment);var c=d[0];if(c){d.offset();var f=a(c).css("overflow")!="hidden";this.containment=[(parseInt(a(c).css("borderLeftWidth"),
-10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-
-this.margins.top-this.margins.bottom];this.relative_container=d}}else if(d.containment.constructor==Array)this.containment=d.containment},_convertPositionTo:function(d,c){if(!c)c=this.position;d=d=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&
-a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
-this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName),e=d.pageX,i=d.pageY;if(this.originalPosition){var b;if(this.containment){if(this.relative_container){b=this.relative_container.offset();b=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]}else b=this.containment;if(d.pageX-this.offset.click.left<b[0])e=b[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<b[1])i=b[1]+this.offset.click.top;
-if(d.pageX-this.offset.click.left>b[2])e=b[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>b[3])i=b[3]+this.offset.click.top}if(c.grid){i=this.originalPageY+Math.round((i-this.originalPageY)/c.grid[1])*c.grid[1];i=b?!(i-this.offset.click.top<b[1]||i-this.offset.click.top>b[3])?i:!(i-this.offset.click.top<b[1])?i-c.grid[1]:i+c.grid[1]:i;e=this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0];e=b?!(e-this.offset.click.left<b[0]||e-this.offset.click.left>b[2])?e:!(e-this.offset.click.left<
-b[0])?e-c.grid[0]:e+c.grid[0]:e}}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
-this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,c,f){f=f||this._uiHash();a.ui.plugin.call(this,d,[c,f]);if(d=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,d,c,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.13"});
-a.ui.plugin.add("draggable","connectToSortable",{start:function(d,c){var f=a(this).data("draggable"),g=f.options,e=a.extend({},c,{item:f.element});f.sortables=[];a(g.connectToSortable).each(function(){var i=a.data(this,"sortable");if(i&&!i.options.disabled){f.sortables.push({instance:i,shouldRevert:i.options.revert});i.refreshPositions();i._trigger("activate",d,e)}})},stop:function(d,c){var f=a(this).data("draggable"),g=a.extend({},c,{item:f.element});a.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=
-0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,g)}})},drag:function(d,c){var f=a(this).data("draggable"),g=this;a.each(f.sortables,function(){this.instance.positionAbs=
-f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,
-true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",d);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}this.instance.currentItem&&this.instance._mouseDrag(d)}else if(this.instance.isOver){this.instance.isOver=
-0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();f._trigger("fromSortable",d);f.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor"))c._cursor=
-d.css("cursor");d.css("cursor",c.cursor)},stop:function(){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity"))c._opacity=d.css("opacity");d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("draggable");
-if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML")d.overflowOffset=d.scrollParent.offset()},drag:function(d){var c=a(this).data("draggable"),f=c.options,g=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x")if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<f.scrollSensitivity)c.scrollParent[0].scrollTop=g=c.scrollParent[0].scrollTop+f.scrollSpeed;else if(d.pageY-c.overflowOffset.top<f.scrollSensitivity)c.scrollParent[0].scrollTop=
-g=c.scrollParent[0].scrollTop-f.scrollSpeed;if(!f.axis||f.axis!="y")if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<f.scrollSensitivity)c.scrollParent[0].scrollLeft=g=c.scrollParent[0].scrollLeft+f.scrollSpeed;else if(d.pageX-c.overflowOffset.left<f.scrollSensitivity)c.scrollParent[0].scrollLeft=g=c.scrollParent[0].scrollLeft-f.scrollSpeed}else{if(!f.axis||f.axis!="x")if(d.pageY-a(document).scrollTop()<f.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed);
-else if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed);if(!f.axis||f.axis!="y")if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}g!==false&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,
-d)}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var f=a(this),g=f.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})})},drag:function(d,c){for(var f=a(this).data("draggable"),g=f.options,e=g.snapTolerance,i=c.offset.left,b=i+f.helperProportions.width,h=c.offset.top,
-j=h+f.helperProportions.height,l=f.snapElements.length-1;l>=0;l--){var o=f.snapElements[l].left,n=o+f.snapElements[l].width,k=f.snapElements[l].top,m=k+f.snapElements[l].height;if(o-e<i&&i<n+e&&k-e<h&&h<m+e||o-e<i&&i<n+e&&k-e<j&&j<m+e||o-e<b&&b<n+e&&k-e<h&&h<m+e||o-e<b&&b<n+e&&k-e<j&&j<m+e){if(g.snapMode!="inner"){var p=Math.abs(k-j)<=e,q=Math.abs(m-h)<=e,s=Math.abs(o-b)<=e,r=Math.abs(n-i)<=e;if(p)c.position.top=f._convertPositionTo("relative",{top:k-f.helperProportions.height,left:0}).top-f.margins.top;
-if(q)c.position.top=f._convertPositionTo("relative",{top:m,left:0}).top-f.margins.top;if(s)c.position.left=f._convertPositionTo("relative",{top:0,left:o-f.helperProportions.width}).left-f.margins.left;if(r)c.position.left=f._convertPositionTo("relative",{top:0,left:n}).left-f.margins.left}var u=p||q||s||r;if(g.snapMode!="outer"){p=Math.abs(k-h)<=e;q=Math.abs(m-j)<=e;s=Math.abs(o-i)<=e;r=Math.abs(n-b)<=e;if(p)c.position.top=f._convertPositionTo("relative",{top:k,left:0}).top-f.margins.top;if(q)c.position.top=
-f._convertPositionTo("relative",{top:m-f.helperProportions.height,left:0}).top-f.margins.top;if(s)c.position.left=f._convertPositionTo("relative",{top:0,left:o}).left-f.margins.left;if(r)c.position.left=f._convertPositionTo("relative",{top:0,left:n-f.helperProportions.width}).left-f.margins.left}if(!f.snapElements[l].snapping&&(p||q||s||r||u))f.options.snap.snap&&f.options.snap.snap.call(f.element,d,a.extend(f._uiHash(),{snapItem:f.snapElements[l].item}));f.snapElements[l].snapping=p||q||s||r||u}else{f.snapElements[l].snapping&&
-f.options.snap.release&&f.options.snap.release.call(f.element,d,a.extend(f._uiHash(),{snapItem:f.snapElements[l].item}));f.snapElements[l].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(f,g){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(f){this.style.zIndex=c+f});this[0].style.zIndex=c+d.length}}});
-a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex"))c._zIndex=d.css("zIndex");d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
-(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(f){return f.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);
-d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;c<d.length;c++)d[c]==this&&d.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(d,c){if(d=="accept")this.accept=a.isFunction(c)?c:function(f){return f.is(c)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&
-this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
-this._trigger("over",d,this.ui(c))}},_out:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",d,this.ui(c))}},_drop:function(d,c){var f=c||a.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0])return false;var g=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=
-a.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==f.options.scope&&e.accept.call(e.element[0],f.currentItem||f.element)&&a.ui.intersect(f,a.extend(e,{offset:e.element.offset()}),e.options.tolerance)){g=true;return false}});if(g)return false;if(this.accept.call(this.element[0],f.currentItem||f.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
-d,this.ui(f));return this.element}return false},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.13"});a.ui.intersect=function(d,c,f){if(!c.offset)return false;var g=(d.positionAbs||d.position.absolute).left,e=g+d.helperProportions.width,i=(d.positionAbs||d.position.absolute).top,b=i+d.helperProportions.height,h=c.offset.left,j=h+c.proportions.width,l=c.offset.top,o=l+c.proportions.height;
-switch(f){case "fit":return h<=g&&e<=j&&l<=i&&b<=o;case "intersect":return h<g+d.helperProportions.width/2&&e-d.helperProportions.width/2<j&&l<i+d.helperProportions.height/2&&b-d.helperProportions.height/2<o;case "pointer":return a.ui.isOver((d.positionAbs||d.position.absolute).top+(d.clickOffset||d.offset.click).top,(d.positionAbs||d.position.absolute).left+(d.clickOffset||d.offset.click).left,l,h,c.proportions.height,c.proportions.width);case "touch":return(i>=l&&i<=o||b>=l&&b<=o||i<l&&b>o)&&(g>=
-h&&g<=j||e>=h&&e<=j||g<h&&e>j);default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,c){var f=a.ui.ddmanager.droppables[d.options.scope]||[],g=c?c.type:null,e=(d.currentItem||d.element).find(":data(droppable)").andSelf(),i=0;a:for(;i<f.length;i++)if(!(f[i].options.disabled||d&&!f[i].accept.call(f[i].element[0],d.currentItem||d.element))){for(var b=0;b<e.length;b++)if(e[b]==f[i].element[0]){f[i].proportions.height=0;continue a}f[i].visible=f[i].element.css("display")!=
-"none";if(f[i].visible){g=="mousedown"&&f[i]._activate.call(f[i],c);f[i].offset=f[i].element.offset();f[i].proportions={width:f[i].element[0].offsetWidth,height:f[i].element[0].offsetHeight}}}},drop:function(d,c){var f=false;a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(d,this,this.options.tolerance))f=f||this._drop.call(this,c);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||
-d.element)){this.isout=1;this.isover=0;this._deactivate.call(this,c)}}});return f},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var f=a.ui.intersect(d,this,this.options.tolerance);if(f=!f&&this.isover==1?"isout":f&&this.isover==0?"isover":null){var g;if(this.options.greedy){var e=this.element.parents(":data(droppable):eq(0)");if(e.length){g=
-a.data(e[0],"droppable");g.greedyChild=f=="isover"?1:0}}if(g&&f=="isover"){g.isover=0;g.isout=1;g._out.call(g,c)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,c);if(g&&f=="isout"){g.isout=0;g.isover=1;g._over.call(g,c)}}}})}}})(jQuery);
-(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,g=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,
-_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
-top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
-this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=g.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
-nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var e=this.handles.split(",");this.handles={};for(var i=0;i<e.length;i++){var b=a.trim(e[i]),h=a('<div class="ui-resizable-handle '+("ui-resizable-"+b)+'"></div>');/sw|se|ne|nw/.test(b)&&h.css({zIndex:++g.zIndex});"se"==b&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[b]=".ui-resizable-"+b;this.element.append(h)}}this._renderAxis=function(j){j=j||this.element;for(var l in this.handles){if(this.handles[l].constructor==
-String)this.handles[l]=a(this.handles[l],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var o=a(this.handles[l],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(l)?o.outerHeight():o.outerWidth();o=["padding",/ne|nw|n/.test(l)?"Top":/se|sw|s/.test(l)?"Bottom":/^e$/.test(l)?"Right":"Left"].join("");j.css(o,n);this._proportionallyResize()}a(this.handles[l])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
-this._handles.mouseover(function(){if(!f.resizing){if(this.className)var j=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=j&&j[1]?j[1]:"se"}});if(g.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){if(!g.disabled){a(this).removeClass("ui-resizable-autohide");f._handles.show()}},function(){if(!g.disabled)if(!f.resizing){a(this).addClass("ui-resizable-autohide");f._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
-var f=function(e){a(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);var g=this.element;g.after(this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(f){var g=
-false;for(var e in this.handles)if(a(this.handles[e])[0]==f.target)g=true;return!this.options.disabled&&g},_mouseStart:function(f){var g=this.options,e=this.element.position(),i=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(i.is(".ui-draggable")||/absolute/.test(i.css("position")))i.css({position:"absolute",top:e.top,left:e.left});a.browser.opera&&/relative/.test(i.css("position"))&&i.css({position:"relative",top:"auto",left:"auto"});
-this._renderProxy();e=d(this.helper.css("left"));var b=d(this.helper.css("top"));if(g.containment){e+=a(g.containment).scrollLeft()||0;b+=a(g.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:e,top:b};this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};this.originalPosition={left:e,top:b};this.sizeDiff=
-{width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;g=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",g=="auto"?this.axis+"-resize":g);i.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(f){var g=this.helper,e=this.originalMousePosition,i=this._change[this.axis];
-if(!i)return false;e=i.apply(this,[f,f.pageX-e.left||0,f.pageY-e.top||0]);if(this._aspectRatio||f.shiftKey)e=this._updateRatio(e,f);e=this._respectSize(e,f);this._propagate("resize",f);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(e);this._trigger("resize",f,this.ui());return false},_mouseStop:function(f){this.resizing=
-false;var g=this.options,e=this;if(this._helper){var i=this._proportionallyResizeElements,b=i.length&&/textarea/i.test(i[0].nodeName);i=b&&a.ui.hasScroll(i[0],"left")?0:e.sizeDiff.height;b=b?0:e.sizeDiff.width;b={width:e.helper.width()-b,height:e.helper.height()-i};i=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null;var h=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;g.animate||this.element.css(a.extend(b,{top:h,left:i}));e.helper.height(e.size.height);
-e.helper.width(e.size.width);this._helper&&!g.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",f);this._helper&&this.helper.remove();return false},_updateCache:function(f){this.offset=this.helper.offset();if(c(f.left))this.position.left=f.left;if(c(f.top))this.position.top=f.top;if(c(f.height))this.size.height=f.height;if(c(f.width))this.size.width=f.width},_updateRatio:function(f){var g=this.position,e=this.size,
-i=this.axis;if(f.height)f.width=e.height*this.aspectRatio;else if(f.width)f.height=e.width/this.aspectRatio;if(i=="sw"){f.left=g.left+(e.width-f.width);f.top=null}if(i=="nw"){f.top=g.top+(e.height-f.height);f.left=g.left+(e.width-f.width)}return f},_respectSize:function(f){var g=this.options,e=this.axis,i=c(f.width)&&g.maxWidth&&g.maxWidth<f.width,b=c(f.height)&&g.maxHeight&&g.maxHeight<f.height,h=c(f.width)&&g.minWidth&&g.minWidth>f.width,j=c(f.height)&&g.minHeight&&g.minHeight>f.height;if(h)f.width=
-g.minWidth;if(j)f.height=g.minHeight;if(i)f.width=g.maxWidth;if(b)f.height=g.maxHeight;var l=this.originalPosition.left+this.originalSize.width,o=this.position.top+this.size.height,n=/sw|nw|w/.test(e);e=/nw|ne|n/.test(e);if(h&&n)f.left=l-g.minWidth;if(i&&n)f.left=l-g.maxWidth;if(j&&e)f.top=o-g.minHeight;if(b&&e)f.top=o-g.maxHeight;if((g=!f.width&&!f.height)&&!f.left&&f.top)f.top=null;else if(g&&!f.top&&f.left)f.left=null;return f},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=
-this.helper||this.element,g=0;g<this._proportionallyResizeElements.length;g++){var e=this._proportionallyResizeElements[g];if(!this.borderDif){var i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],b=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(i,function(h,j){h=parseInt(h,10)||0;j=parseInt(b[j],10)||0;return h+j})}a.browser.msie&&(a(f).is(":hidden")||a(f).parents(":hidden").length)||
-e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var g=a.browser.msie&&a.browser.version<7,e=g?1:0;g=g?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-
-e+"px",top:this.elementOffset.top-e+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(f,g){return{width:this.originalSize.width+g}},w:function(f,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(f,g,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(f,g,e){return{height:this.originalSize.height+e}},se:function(f,g,e){return a.extend(this._change.s.apply(this,
-arguments),this._change.e.apply(this,[f,g,e]))},sw:function(f,g,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,g,e]))},ne:function(f,g,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,g,e]))},nw:function(f,g,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,g,e]))}},_propagate:function(f,g){a.ui.plugin.call(this,f,[g,this.ui()]);f!="resize"&&this._trigger(f,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
-element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.13"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var f=a(this).data("resizable").options,g=function(e){a(e).each(function(){var i=a(this);i.data("resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10),position:i.css("position")})})};
-if(typeof f.alsoResize=="object"&&!f.alsoResize.parentNode)if(f.alsoResize.length){f.alsoResize=f.alsoResize[0];g(f.alsoResize)}else a.each(f.alsoResize,function(e){g(e)});else g(f.alsoResize)},resize:function(f,g){var e=a(this).data("resizable");f=e.options;var i=e.originalSize,b=e.originalPosition,h={height:e.size.height-i.height||0,width:e.size.width-i.width||0,top:e.position.top-b.top||0,left:e.position.left-b.left||0},j=function(l,o){a(l).each(function(){var n=a(this),k=a(this).data("resizable-alsoresize"),
-m={},p=o&&o.length?o:n.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(p,function(q,s){if((q=(k[s]||0)+(h[s]||0))&&q>=0)m[s]=q||null});if(a.browser.opera&&/relative/.test(n.css("position"))){e._revertToRelativePosition=true;n.css({position:"absolute",top:"auto",left:"auto"})}n.css(m)})};typeof f.alsoResize=="object"&&!f.alsoResize.nodeType?a.each(f.alsoResize,function(l,o){j(l,o)}):j(f.alsoResize)},stop:function(){var f=a(this).data("resizable"),g=f.options,
-e=function(i){a(i).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};if(f._revertToRelativePosition){f._revertToRelativePosition=false;typeof g.alsoResize=="object"&&!g.alsoResize.nodeType?a.each(g.alsoResize,function(i){e(i)}):e(g.alsoResize)}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(f){var g=a(this).data("resizable"),e=g.options,i=g._proportionallyResizeElements,b=i.length&&/textarea/i.test(i[0].nodeName),
-h=b&&a.ui.hasScroll(i[0],"left")?0:g.sizeDiff.height;b={width:g.size.width-(b?0:g.sizeDiff.width),height:g.size.height-h};h=parseInt(g.element.css("left"),10)+(g.position.left-g.originalPosition.left)||null;var j=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(a.extend(b,j&&h?{top:j,left:h}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var l={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),
-10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};i&&i.length&&a(i[0]).css({width:l.width,height:l.height});g._updateCache(l);g._propagate("resize",f)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var f=a(this).data("resizable"),g=f.element,e=f.options.containment;if(g=e instanceof a?e.get(0):/parent/.test(e)?g.parent().get(0):e){f.containerElement=a(g);if(/document/.test(e)||e==document){f.containerOffset={left:0,top:0};f.containerPosition={left:0,
-top:0};f.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var i=a(g),b=[];a(["Top","Right","Left","Bottom"]).each(function(l,o){b[l]=d(i.css("padding"+o))});f.containerOffset=i.offset();f.containerPosition=i.position();f.containerSize={height:i.innerHeight()-b[3],width:i.innerWidth()-b[1]};e=f.containerOffset;var h=f.containerSize.height,j=f.containerSize.width;j=a.ui.hasScroll(g,"left")?g.scrollWidth:j;
-h=a.ui.hasScroll(g)?g.scrollHeight:h;f.parentData={element:g,left:e.left,top:e.top,width:j,height:h}}}},resize:function(f){var g=a(this).data("resizable"),e=g.options,i=g.containerOffset,b=g.position;f=g._aspectRatio||f.shiftKey;var h={top:0,left:0},j=g.containerElement;if(j[0]!=document&&/static/.test(j.css("position")))h=i;if(b.left<(g._helper?i.left:0)){g.size.width+=g._helper?g.position.left-i.left:g.position.left-h.left;if(f)g.size.height=g.size.width/e.aspectRatio;g.position.left=e.helper?i.left:
-0}if(b.top<(g._helper?i.top:0)){g.size.height+=g._helper?g.position.top-i.top:g.position.top;if(f)g.size.width=g.size.height*e.aspectRatio;g.position.top=g._helper?i.top:0}g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;e=Math.abs((g._helper?g.offset.left-h.left:g.offset.left-h.left)+g.sizeDiff.width);i=Math.abs((g._helper?g.offset.top-h.top:g.offset.top-i.top)+g.sizeDiff.height);b=g.containerElement.get(0)==g.element.parent().get(0);h=/relative|absolute/.test(g.containerElement.css("position"));
-if(b&&h)e-=g.parentData.left;if(e+g.size.width>=g.parentData.width){g.size.width=g.parentData.width-e;if(f)g.size.height=g.size.width/g.aspectRatio}if(i+g.size.height>=g.parentData.height){g.size.height=g.parentData.height-i;if(f)g.size.width=g.size.height*g.aspectRatio}},stop:function(){var f=a(this).data("resizable"),g=f.options,e=f.containerOffset,i=f.containerPosition,b=f.containerElement,h=a(f.helper),j=h.offset(),l=h.outerWidth()-f.sizeDiff.width;h=h.outerHeight()-f.sizeDiff.height;f._helper&&
-!g.animate&&/relative/.test(b.css("position"))&&a(this).css({left:j.left-i.left-e.left,width:l,height:h});f._helper&&!g.animate&&/static/.test(b.css("position"))&&a(this).css({left:j.left-i.left-e.left,width:l,height:h})}});a.ui.plugin.add("resizable","ghost",{start:function(){var f=a(this).data("resizable"),g=f.options,e=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost==
-"string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var f=a(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(){var f=a(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var f=a(this).data("resizable"),g=f.options,e=f.size,i=f.originalSize,b=f.originalPosition,h=f.axis;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;
-var j=Math.round((e.width-i.width)/(g.grid[0]||1))*(g.grid[0]||1);g=Math.round((e.height-i.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g}else if(/^(ne)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g;f.position.top=b.top-g}else{if(/^(sw)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g}else{f.size.width=i.width+j;f.size.height=i.height+g;f.position.top=b.top-g}f.position.left=b.left-j}}});var d=function(f){return parseInt(f,
-10)||0},c=function(f){return!isNaN(parseInt(f,10))}})(jQuery);
-(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var d=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(d.options.filter,d.element[0]);c.each(function(){var f=a(this),g=f.offset();a.data(this,"selectable-item",{element:this,$element:f,left:g.left,top:g.top,right:g.left+f.outerWidth(),bottom:g.top+f.outerHeight(),startselected:false,selected:f.hasClass("ui-selected"),
-selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(d){var c=this;this.opos=[d.pageX,
-d.pageY];if(!this.options.disabled){var f=this.options;this.selectees=a(f.filter,this.element[0]);this._trigger("start",d);a(f.appendTo).append(this.helper);this.helper.css({left:d.clientX,top:d.clientY,width:0,height:0});f.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var g=a.data(this,"selectable-item");g.startselected=true;if(!d.metaKey){g.$element.removeClass("ui-selected");g.selected=false;g.$element.addClass("ui-unselecting");g.unselecting=true;c._trigger("unselecting",
-d,{unselecting:g.element})}});a(d.target).parents().andSelf().each(function(){var g=a.data(this,"selectable-item");if(g){var e=!d.metaKey||!g.$element.hasClass("ui-selected");g.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");g.unselecting=!e;g.selecting=e;(g.selected=e)?c._trigger("selecting",d,{selecting:g.element}):c._trigger("unselecting",d,{unselecting:g.element});return false}})}},_mouseDrag:function(d){var c=this;this.dragged=true;if(!this.options.disabled){var f=
-this.options,g=this.opos[0],e=this.opos[1],i=d.pageX,b=d.pageY;if(g>i){var h=i;i=g;g=h}if(e>b){h=b;b=e;e=h}this.helper.css({left:g,top:e,width:i-g,height:b-e});this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!(!j||j.element==c.element[0])){var l=false;if(f.tolerance=="touch")l=!(j.left>i||j.right<g||j.top>b||j.bottom<e);else if(f.tolerance=="fit")l=j.left>g&&j.right<i&&j.top>e&&j.bottom<b;if(l){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");
-j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;c._trigger("selecting",d,{selecting:j.element})}}else{if(j.selecting)if(d.metaKey&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}c._trigger("unselecting",d,{unselecting:j.element})}if(j.selected)if(!d.metaKey&&
-!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;c._trigger("unselecting",d,{unselecting:j.element})}}}});return false}},_mouseStop:function(d){var c=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var f=a.data(this,"selectable-item");f.$element.removeClass("ui-unselecting");f.unselecting=false;f.startselected=false;c._trigger("unselected",d,{unselected:f.element})});a(".ui-selecting",this.element[0]).each(function(){var f=
-a.data(this,"selectable-item");f.$element.removeClass("ui-selecting").addClass("ui-selected");f.selecting=false;f.selected=true;f.startselected=true;c._trigger("selected",d,{selected:f.element})});this._trigger("stop",d);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.13"})})(jQuery);
-(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var d=this.options;this.containerCache={};this.element.addClass("ui-sortable");
-this.refresh();this.floating=this.items.length?d.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData("sortable-item");return this},_setOption:function(d,c){if(d===
-"disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,c){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(d);var f=null,g=this;a(d.target).parents().each(function(){if(a.data(this,"sortable-item")==g){f=a(this);return false}});if(a.data(d.target,"sortable-item")==g)f=a(d.target);if(!f)return false;if(this.options.handle&&
-!c){var e=false;a(this.options.handle,f).find("*").andSelf().each(function(){if(this==d.target)e=true});if(!e)return false}this.currentItem=f;this._removeCurrentsFromItems();return true},_mouseStart:function(d,c,f){c=this.options;var g=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(d);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,
-left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
-this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",c.cursor)}if(c.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",c.opacity)}if(c.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",c.zIndex)}if(this.scrollParent[0]!=
-document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",d,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!f)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",d,g._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(d);
-return true},_mouseDrag:function(d){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var c=this.options,f=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+c.scrollSpeed;else if(d.pageY-this.overflowOffset.top<
-c.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-c.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+c.scrollSpeed;else if(d.pageX-this.overflowOffset.left<c.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(d.pageY-a(document).scrollTop()<c.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()-
-c.scrollSpeed);else if(a(window).height()-(d.pageY-a(document).scrollTop())<c.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed);if(d.pageX-a(document).scrollLeft()<c.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<c.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)}f!==false&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,
-d)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;c>=0;c--){f=this.items[c];var g=f.item[0],e=this._intersectsWithPointer(f);if(e)if(g!=this.currentItem[0]&&this.placeholder[e==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],
-g):true)){this.direction=e==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(d,f);else break;this._trigger("change",d,this._uiHash());break}}this._contactContainers(d);a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);this._trigger("sort",d,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(d,c){if(d){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,d);if(this.options.revert){var f=this;c=f.placeholder.offset();
-f.reverting=true;a(this.helper).animate({left:c.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(d)})}else this._clear(d,c);return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
-this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,
-dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(d){var c=this._getItemsAsjQuery(d&&d.connected),f=[];d=d||{};a(c).each(function(){var g=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[-=_](.+)/);if(g)f.push((d.key||g[1]+"[]")+"="+(d.key&&d.expression?g[1]:g[2]))});!f.length&&d.key&&f.push(d.key+"=");return f.join("&")},
-toArray:function(d){var c=this._getItemsAsjQuery(d&&d.connected),f=[];d=d||{};c.each(function(){f.push(a(d.item||this).attr(d.attribute||"id")||"")});return f},_intersectsWith:function(d){var c=this.positionAbs.left,f=c+this.helperProportions.width,g=this.positionAbs.top,e=g+this.helperProportions.height,i=d.left,b=i+d.width,h=d.top,j=h+d.height,l=this.offset.click.top,o=this.offset.click.left;l=g+l>h&&g+l<j&&c+o>i&&c+o<b;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||
-this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?l:i<c+this.helperProportions.width/2&&f-this.helperProportions.width/2<b&&h<g+this.helperProportions.height/2&&e-this.helperProportions.height/2<j},_intersectsWithPointer:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width);c=c&&d;d=this._getDragVerticalDirection();
-var f=this._getDragHorizontalDirection();if(!c)return false;return this.floating?f&&f=="right"||d=="down"?2:1:d&&(d=="down"?2:1)},_intersectsWithSides:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width);var f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&d||g=="left"&&!d:f&&(f=="down"&&c||f=="up"&&!c)},
-_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!=0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!=0&&(d>0?"right":"left")},refresh:function(d){this._refreshItems(d);this.refreshPositions();return this},_connectWith:function(){var d=this.options;return d.connectWith.constructor==String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var c=[],f=[],g=this._connectWith();
-if(g&&d)for(d=g.length-1;d>=0;d--)for(var e=a(g[d]),i=e.length-1;i>=0;i--){var b=a.data(e[i],"sortable");if(b&&b!=this&&!b.options.disabled)f.push([a.isFunction(b.options.items)?b.options.items.call(b.element):a(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
-this]);for(d=f.length-1;d>=0;d--)f[d][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var d=this.currentItem.find(":data(sortable-item)"),c=0;c<this.items.length;c++)for(var f=0;f<d.length;f++)d[f]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(d){this.items=[];this.containers=[this];var c=this.items,f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):a(this.options.items,this.element),
-this]],g=this._connectWith();if(g)for(var e=g.length-1;e>=0;e--)for(var i=a(g[e]),b=i.length-1;b>=0;b--){var h=a.data(i[b],"sortable");if(h&&h!=this&&!h.options.disabled){f.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],d,{item:this.currentItem}):a(h.options.items,h.element),h]);this.containers.push(h)}}for(e=f.length-1;e>=0;e--){d=f[e][1];g=f[e][0];b=0;for(i=g.length;b<i;b++){h=a(g[b]);h.data("sortable-item",d);c.push({item:h,instance:d,width:0,height:0,left:0,top:0})}}},refreshPositions:function(d){if(this.offsetParent&&
-this.helper)this.offset.parent=this._getParentOffset();for(var c=this.items.length-1;c>=0;c--){var f=this.items[c];if(!(f.instance!=this.currentContainer&&this.currentContainer&&f.item[0]!=this.currentItem[0])){var g=this.options.toleranceElement?a(this.options.toleranceElement,f.item):f.item;if(!d){f.width=g.outerWidth();f.height=g.outerHeight()}g=g.offset();f.left=g.left;f.top=g.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=
-this.containers.length-1;c>=0;c--){g=this.containers[c].element.offset();this.containers[c].containerCache.left=g.left;this.containers[c].containerCache.top=g.top;this.containers[c].containerCache.width=this.containers[c].element.outerWidth();this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(d){var c=d||this,f=c.options;if(!f.placeholder||f.placeholder.constructor==String){var g=f.placeholder;f.placeholder={element:function(){var e=
-a(document.createElement(c.currentItem[0].nodeName)).addClass(g||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g)e.style.visibility="hidden";return e},update:function(e,i){if(!(g&&!f.forcePlaceholderSize)){i.height()||i.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10));i.width()||i.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||
-0,10))}}}}c.placeholder=a(f.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);f.placeholder.update(c,c.placeholder)},_contactContainers:function(d){for(var c=null,f=null,g=this.containers.length-1;g>=0;g--)if(!a.ui.contains(this.currentItem[0],this.containers[g].element[0]))if(this._intersectsWith(this.containers[g].containerCache)){if(!(c&&a.ui.contains(this.containers[g].element[0],c.element[0]))){c=this.containers[g];f=g}}else if(this.containers[g].containerCache.over){this.containers[g]._trigger("out",
-d,this._uiHash(this));this.containers[g].containerCache.over=0}if(c)if(this.containers.length===1){this.containers[f]._trigger("over",d,this._uiHash(this));this.containers[f].containerCache.over=1}else if(this.currentContainer!=this.containers[f]){c=1E4;g=null;for(var e=this.positionAbs[this.containers[f].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[f].element[0],this.items[i].item[0])){var b=this.items[i][this.containers[f].floating?"left":"top"];if(Math.abs(b-
-e)<c){c=Math.abs(b-e);g=this.items[i]}}if(g||this.options.dropOnEmpty){this.currentContainer=this.containers[f];g?this._rearrange(d,g,null,true):this._rearrange(d,null,this.containers[f].element,true);this._trigger("change",d,this._uiHash());this.containers[f]._trigger("change",d,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",d,this._uiHash(this));this.containers[f].containerCache.over=1}}},_createHelper:function(d){var c=
-this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(d[0].style.width==
-""||c.forceHelperSize)d.width(this.currentItem.width());if(d[0].style.height==""||c.forceHelperSize)d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d={left:+d[0],top:+d[1]||0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=
-this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d=
-{top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
-10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(d.containment=="document"?
-document:window).width()-this.helperProportions.width-this.margins.left,(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)){var c=a(d.containment)[0];d=a(d.containment).offset();var f=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),
-10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,c){if(!c)c=
-this.position;d=d=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&
-this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
-var e=d.pageX,i=d.pageY;if(this.originalPosition){if(this.containment){if(d.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<this.containment[1])i=this.containment[1]+this.offset.click.top;if(d.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>this.containment[3])i=this.containment[3]+this.offset.click.top}if(c.grid){i=this.originalPageY+Math.round((i-
-this.originalPageY)/c.grid[1])*c.grid[1];i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<this.containment[1])?i-c.grid[1]:i+c.grid[1]:i;e=this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-c.grid[0]:e+c.grid[0]:e}}return{top:i-
-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_rearrange:function(d,c,f,g){f?f[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],
-this.direction=="down"?c.item[0]:c.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var e=this,i=this.counter;window.setTimeout(function(){i==e.counter&&e.refreshPositions(!g)},0)},_clear:function(d,c){this.reverting=false;var f=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS)if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static")this._storedCSS[g]=
-"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&f.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c)f.push(function(e){this._trigger("update",e,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||f.push(function(e){this._trigger("remove",
-e,this._uiHash())});for(g=this.containers.length-1;g>=0;g--)if(a.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!c){f.push(function(e){return function(i){e._trigger("receive",i,this._uiHash(this))}}.call(this,this.containers[g]));f.push(function(e){return function(i){e._trigger("update",i,this._uiHash(this))}}.call(this,this.containers[g]))}}for(g=this.containers.length-1;g>=0;g--){c||f.push(function(e){return function(i){e._trigger("deactivate",i,this._uiHash(this))}}.call(this,
-this.containers[g]));if(this.containers[g].containerCache.over){f.push(function(e){return function(i){e._trigger("out",i,this._uiHash(this))}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",
-d,this._uiHash());for(g=0;g<f.length;g++)f[g].call(this,d);this._trigger("stop",d,this._uiHash())}return false}c||this._trigger("beforeStop",d,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(g=0;g<f.length;g++)f[g].call(this,d);this._trigger("stop",d,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
-_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.13"})})(jQuery);
-jQuery.effects||function(a,d){function c(n){var k;if(n&&n.constructor==Array&&n.length==3)return n;if(k=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)];if(k=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return[parseFloat(k[1])*2.55,parseFloat(k[2])*2.55,parseFloat(k[3])*2.55];if(k=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return[parseInt(k[1],
-16),parseInt(k[2],16),parseInt(k[3],16)];if(k=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return[parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(n))return j.transparent;return j[a.trim(n).toLowerCase()]}function f(n,k){var m;do{m=a.curCSS(n,k);if(m!=""&&m!="transparent"||a.nodeName(n,"body"))break;k="backgroundColor"}while(n=n.parentNode);return c(m)}function g(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,
-k={},m,p;if(n&&n.length&&n[0]&&n[n[0]])for(var q=n.length;q--;){m=n[q];if(typeof n[m]=="string"){p=m.replace(/\-(\w)/g,function(s,r){return r.toUpperCase()});k[p]=n[m]}}else for(m in n)if(typeof n[m]==="string")k[m]=n[m];return k}function e(n){var k,m;for(k in n){m=n[k];if(m==null||a.isFunction(m)||k in o||/scrollbar/.test(k)||!/color/i.test(k)&&isNaN(parseFloat(m)))delete n[k]}return n}function i(n,k){var m={_:0},p;for(p in k)if(n[p]!=k[p])m[p]=k[p];return m}function b(n,k,m,p){if(typeof n=="object"){p=
-k;m=null;k=n;n=k.effect}if(a.isFunction(k)){p=k;m=null;k={}}if(typeof k=="number"||a.fx.speeds[k]){p=m;m=k;k={}}if(a.isFunction(m)){p=m;m=null}k=k||{};m=m||k.duration;m=a.fx.off?0:typeof m=="number"?m:m in a.fx.speeds?a.fx.speeds[m]:a.fx.speeds._default;p=p||k.complete;return[n,k,m,p]}function h(n){if(!n||typeof n==="number"||a.fx.speeds[n])return true;if(typeof n==="string"&&!a.effects[n])return true;return false}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor",
-"borderTopColor","borderColor","color","outlineColor"],function(n,k){a.fx.step[k]=function(m){if(!m.colorInit){m.start=f(m.elem,k);m.end=c(m.end);m.colorInit=true}m.elem.style[k]="rgb("+Math.max(Math.min(parseInt(m.pos*(m.end[0]-m.start[0])+m.start[0],10),255),0)+","+Math.max(Math.min(parseInt(m.pos*(m.end[1]-m.start[1])+m.start[1],10),255),0)+","+Math.max(Math.min(parseInt(m.pos*(m.end[2]-m.start[2])+m.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
-0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
-211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},l=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(n,k,m,
-p){if(a.isFunction(m)){p=m;m=null}return this.queue(function(){var q=a(this),s=q.attr("style")||" ",r=e(g.call(this)),u,v=q.attr("class");a.each(l,function(w,x){n[x]&&q[x+"Class"](n[x])});u=e(g.call(this));q.attr("class",v);q.animate(i(r,u),{queue:false,duration:k,easding:m,complete:function(){a.each(l,function(w,x){n[x]&&q[x+"Class"](n[x])});if(typeof q.attr("style")=="object"){q.attr("style").cssText="";q.attr("style").cssText=s}else q.attr("style",s);p&&p.apply(this,arguments);a.dequeue(this)}})})};
-a.fn.extend({_addClass:a.fn.addClass,addClass:function(n,k,m,p){return k?a.effects.animateClass.apply(this,[{add:n},k,m,p]):this._addClass(n)},_removeClass:a.fn.removeClass,removeClass:function(n,k,m,p){return k?a.effects.animateClass.apply(this,[{remove:n},k,m,p]):this._removeClass(n)},_toggleClass:a.fn.toggleClass,toggleClass:function(n,k,m,p,q){return typeof k=="boolean"||k===d?m?a.effects.animateClass.apply(this,[k?{add:n}:{remove:n},m,p,q]):this._toggleClass(n,k):a.effects.animateClass.apply(this,
-[{toggle:n},k,m,p])},switchClass:function(n,k,m,p,q){return a.effects.animateClass.apply(this,[{add:k,remove:n},m,p,q])}});a.extend(a.effects,{version:"1.8.13",save:function(n,k){for(var m=0;m<k.length;m++)k[m]!==null&&n.data("ec.storage."+k[m],n[0].style[k[m]])},restore:function(n,k){for(var m=0;m<k.length;m++)k[m]!==null&&n.css(k[m],n.data("ec.storage."+k[m]))},setMode:function(n,k){if(k=="toggle")k=n.is(":hidden")?"show":"hide";return k},getBaseline:function(n,k){var m;switch(n[0]){case "top":m=
-0;break;case "middle":m=0.5;break;case "bottom":m=1;break;default:m=n[0]/k.height}switch(n[1]){case "left":n=0;break;case "center":n=0.5;break;case "right":n=1;break;default:n=n[1]/k.width}return{x:n,y:m}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var k={width:n.outerWidth(true),height:n.outerHeight(true),"float":n.css("float")},m=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});
-n.wrap(m);m=n.parent();if(n.css("position")=="static"){m.css({position:"relative"});n.css({position:"relative"})}else{a.extend(k,{position:n.css("position"),zIndex:n.css("z-index")});a.each(["top","left","bottom","right"],function(p,q){k[q]=n.css(q);if(isNaN(parseInt(k[q],10)))k[q]="auto"});n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return m.css(k).show()},removeWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent().replaceWith(n);return n},setTransition:function(n,
-k,m,p){p=p||{};a.each(k,function(q,s){unit=n.cssUnit(s);if(unit[0]>0)p[s]=unit[0]*m+unit[1]});return p}});a.fn.extend({effect:function(n){var k=b.apply(this,arguments),m={options:k[1],duration:k[2],callback:k[3]};k=m.options.mode;var p=a.effects[n];if(a.fx.off||!p)return k?this[k](m.duration,m.callback):this.each(function(){m.callback&&m.callback.call(this)});return p.call(this,m)},_show:a.fn.show,show:function(n){if(h(n))return this._show.apply(this,arguments);else{var k=b.apply(this,arguments);
-k[1].mode="show";return this.effect.apply(this,k)}},_hide:a.fn.hide,hide:function(n){if(h(n))return this._hide.apply(this,arguments);else{var k=b.apply(this,arguments);k[1].mode="hide";return this.effect.apply(this,k)}},__toggle:a.fn.toggle,toggle:function(n){if(h(n)||typeof n==="boolean"||a.isFunction(n))return this.__toggle.apply(this,arguments);else{var k=b.apply(this,arguments);k[1].mode="toggle";return this.effect.apply(this,k)}},cssUnit:function(n){var k=this.css(n),m=[];a.each(["em","px","%",
-"pt"],function(p,q){if(k.indexOf(q)>0)m=[parseFloat(k),q]});return m}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(n,k,m,p,q){return a.easing[a.easing.def](n,k,m,p,q)},easeInQuad:function(n,k,m,p,q){return p*(k/=q)*k+m},easeOutQuad:function(n,k,m,p,q){return-p*(k/=q)*(k-2)+m},easeInOutQuad:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k+m;return-p/2*(--k*(k-2)-1)+m},easeInCubic:function(n,k,m,p,q){return p*(k/=q)*k*k+m},easeOutCubic:function(n,k,m,p,q){return p*
-((k=k/q-1)*k*k+1)+m},easeInOutCubic:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k*k+m;return p/2*((k-=2)*k*k+2)+m},easeInQuart:function(n,k,m,p,q){return p*(k/=q)*k*k*k+m},easeOutQuart:function(n,k,m,p,q){return-p*((k=k/q-1)*k*k*k-1)+m},easeInOutQuart:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k*k*k+m;return-p/2*((k-=2)*k*k*k-2)+m},easeInQuint:function(n,k,m,p,q){return p*(k/=q)*k*k*k*k+m},easeOutQuint:function(n,k,m,p,q){return p*((k=k/q-1)*k*k*k*k+1)+m},easeInOutQuint:function(n,k,m,p,q){if((k/=
-q/2)<1)return p/2*k*k*k*k*k+m;return p/2*((k-=2)*k*k*k*k+2)+m},easeInSine:function(n,k,m,p,q){return-p*Math.cos(k/q*(Math.PI/2))+p+m},easeOutSine:function(n,k,m,p,q){return p*Math.sin(k/q*(Math.PI/2))+m},easeInOutSine:function(n,k,m,p,q){return-p/2*(Math.cos(Math.PI*k/q)-1)+m},easeInExpo:function(n,k,m,p,q){return k==0?m:p*Math.pow(2,10*(k/q-1))+m},easeOutExpo:function(n,k,m,p,q){return k==q?m+p:p*(-Math.pow(2,-10*k/q)+1)+m},easeInOutExpo:function(n,k,m,p,q){if(k==0)return m;if(k==q)return m+p;if((k/=
-q/2)<1)return p/2*Math.pow(2,10*(k-1))+m;return p/2*(-Math.pow(2,-10*--k)+2)+m},easeInCirc:function(n,k,m,p,q){return-p*(Math.sqrt(1-(k/=q)*k)-1)+m},easeOutCirc:function(n,k,m,p,q){return p*Math.sqrt(1-(k=k/q-1)*k)+m},easeInOutCirc:function(n,k,m,p,q){if((k/=q/2)<1)return-p/2*(Math.sqrt(1-k*k)-1)+m;return p/2*(Math.sqrt(1-(k-=2)*k)+1)+m},easeInElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q)==1)return m+p;s||(s=q*0.3);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/
-r);return-(r*Math.pow(2,10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s))+m},easeOutElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q)==1)return m+p;s||(s=q*0.3);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/r);return r*Math.pow(2,-10*k)*Math.sin((k*q-n)*2*Math.PI/s)+p+m},easeInOutElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q/2)==2)return m+p;s||(s=q*0.3*1.5);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/r);if(k<1)return-0.5*
-r*Math.pow(2,10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s)+m;return r*Math.pow(2,-10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s)*0.5+p+m},easeInBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;return p*(k/=q)*k*((s+1)*k-s)+m},easeOutBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;return p*((k=k/q-1)*k*((s+1)*k+s)+1)+m},easeInOutBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;if((k/=q/2)<1)return p/2*k*k*(((s*=1.525)+1)*k-s)+m;return p/2*((k-=2)*k*(((s*=1.525)+1)*k+s)+2)+m},easeInBounce:function(n,k,m,p,q){return p-a.easing.easeOutBounce(n,
-q-k,0,p,q)+m},easeOutBounce:function(n,k,m,p,q){return(k/=q)<1/2.75?p*7.5625*k*k+m:k<2/2.75?p*(7.5625*(k-=1.5/2.75)*k+0.75)+m:k<2.5/2.75?p*(7.5625*(k-=2.25/2.75)*k+0.9375)+m:p*(7.5625*(k-=2.625/2.75)*k+0.984375)+m},easeInOutBounce:function(n,k,m,p,q){if(k<q/2)return a.easing.easeInBounce(n,k*2,0,p,q)*0.5+m;return a.easing.easeOutBounce(n,k*2-q,0,p,q)*0.5+p*0.5+m}})}(jQuery);
-(function(a){a.effects.blind=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"vertical";a.effects.save(c,f);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),b=e=="vertical"?"height":"width";e=e=="vertical"?i.height():i.width();g=="show"&&i.css(b,0);var h={};h[b]=g=="show"?e:0;i.animate(h,d.duration,d.options.easing,function(){g=="hide"&&c.hide();a.effects.restore(c,
-f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
-(function(a){a.effects.bounce=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"effect"),e=d.options.direction||"up",i=d.options.distance||20,b=d.options.times||5,h=d.duration||250;/show|hide/.test(g)&&f.push("opacity");a.effects.save(c,f);c.show();a.effects.createWrapper(c);var j=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";i=d.options.distance||(j=="top"?c.outerHeight({margin:true})/3:c.outerWidth({margin:true})/
-3);if(g=="show")c.css("opacity",0).css(j,e=="pos"?-i:i);if(g=="hide")i/=b*2;g!="hide"&&b--;if(g=="show"){var l={opacity:1};l[j]=(e=="pos"?"+=":"-=")+i;c.animate(l,h/2,d.options.easing);i/=2;b--}for(l=0;l<b;l++){var o={},n={};o[j]=(e=="pos"?"-=":"+=")+i;n[j]=(e=="pos"?"+=":"-=")+i;c.animate(o,h/2,d.options.easing).animate(n,h/2,d.options.easing);i=g=="hide"?i*2:i/2}if(g=="hide"){l={opacity:0};l[j]=(e=="pos"?"-=":"+=")+i;c.animate(l,h/2,d.options.easing,function(){c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);
-d.callback&&d.callback.apply(this,arguments)})}else{o={};n={};o[j]=(e=="pos"?"-=":"+=")+i;n[j]=(e=="pos"?"+=":"-=")+i;c.animate(o,h/2,d.options.easing).animate(n,h/2,d.options.easing,function(){a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
-(function(a){a.effects.clip=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"vertical";a.effects.save(c,f);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"});i=c[0].tagName=="IMG"?i:c;var b={size:e=="vertical"?"height":"width",position:e=="vertical"?"top":"left"};e=e=="vertical"?i.height():i.width();if(g=="show"){i.css(b.size,0);i.css(b.position,
-e/2)}var h={};h[b.size]=g=="show"?e:0;h[b.position]=g=="show"?0:e/2;i.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.drop=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","opacity"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"left";a.effects.save(c,f);c.show();a.effects.createWrapper(c);var i=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";var b=d.options.distance||(i=="top"?c.outerHeight({margin:true})/2:c.outerWidth({margin:true})/2);if(g=="show")c.css("opacity",0).css(i,e=="pos"?-b:b);var h={opacity:g==
-"show"?1:0};h[i]=(g=="show"?e=="pos"?"+=":"-=":e=="pos"?"-=":"+=")+b;c.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.explode=function(d){return this.queue(function(){var c=d.options.pieces?Math.round(Math.sqrt(d.options.pieces)):3,f=d.options.pieces?Math.round(Math.sqrt(d.options.pieces)):3;d.options.mode=d.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":d.options.mode;var g=a(this).show().css("visibility","hidden"),e=g.offset();e.top-=parseInt(g.css("marginTop"),10)||0;e.left-=parseInt(g.css("marginLeft"),10)||0;for(var i=g.outerWidth(true),b=g.outerHeight(true),h=0;h<c;h++)for(var j=
-0;j<f;j++)g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(i/f),top:-h*(b/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:i/f,height:b/c,left:e.left+j*(i/f)+(d.options.mode=="show"?(j-Math.floor(f/2))*(i/f):0),top:e.top+h*(b/c)+(d.options.mode=="show"?(h-Math.floor(c/2))*(b/c):0),opacity:d.options.mode=="show"?0:1}).animate({left:e.left+j*(i/f)+(d.options.mode=="show"?0:(j-Math.floor(f/2))*(i/f)),top:e.top+
-h*(b/c)+(d.options.mode=="show"?0:(h-Math.floor(c/2))*(b/c)),opacity:d.options.mode=="show"?1:0},d.duration||500);setTimeout(function(){d.options.mode=="show"?g.css({visibility:"visible"}):g.css({visibility:"visible"}).hide();d.callback&&d.callback.apply(g[0]);g.dequeue();a("div.ui-effects-explode").remove()},d.duration||500)})}})(jQuery);
-(function(a){a.effects.fade=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"hide");c.animate({opacity:f},{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.fold=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.size||15,i=!!d.options.horizFirst,b=d.duration?d.duration/2:a.fx.speeds._default/2;a.effects.save(c,f);c.show();var h=a.effects.createWrapper(c).css({overflow:"hidden"}),j=g=="show"!=i,l=j?["width","height"]:["height","width"];j=j?[h.width(),h.height()]:[h.height(),h.width()];var o=/([0-9]+)%/.exec(e);if(o)e=parseInt(o[1],
-10)/100*j[g=="hide"?0:1];if(g=="show")h.css(i?{height:0,width:e}:{height:e,width:0});i={};o={};i[l[0]]=g=="show"?j[0]:e;o[l[1]]=g=="show"?j[1]:0;h.animate(i,b,d.options.easing).animate(o,b,d.options.easing,function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
-(function(a){a.effects.highlight=function(d){return this.queue(function(){var c=a(this),f=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(c,d.options.mode||"show"),e={backgroundColor:c.css("backgroundColor")};if(g=="hide")e.opacity=0;a.effects.save(c,f);c.show().css({backgroundImage:"none",backgroundColor:d.options.color||"#ffff99"}).animate(e,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);g=="show"&&!a.support.opacity&&
-this.style.removeAttribute("filter");d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.pulsate=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"show");times=(d.options.times||5)*2-1;duration=d.duration?d.duration/2:a.fx.speeds._default/2;isVisible=c.is(":visible");animateTo=0;if(!isVisible){c.css("opacity",0).show();animateTo=1}if(f=="hide"&&isVisible||f=="show"&&!isVisible)times--;for(f=0;f<times;f++){c.animate({opacity:animateTo},duration,d.options.easing);animateTo=(animateTo+1)%2}c.animate({opacity:animateTo},duration,
-d.options.easing,function(){animateTo==0&&c.hide();d.callback&&d.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);
-(function(a){a.effects.puff=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"hide"),g=parseInt(d.options.percent,10)||150,e=g/100,i={height:c.height(),width:c.width()};a.extend(d.options,{fade:true,mode:f,percent:f=="hide"?g:100,from:f=="hide"?i:{height:i.height*e,width:i.width*e}});c.effect("scale",d.options,d.duration,d.callback);c.dequeue()})};a.effects.scale=function(d){return this.queue(function(){var c=a(this),f=a.extend(true,{},d.options),g=a.effects.setMode(c,
-d.options.mode||"effect"),e=parseInt(d.options.percent,10)||(parseInt(d.options.percent,10)==0?0:g=="hide"?0:100),i=d.options.direction||"both",b=d.options.origin;if(g!="effect"){f.origin=b||["middle","center"];f.restore=true}b={height:c.height(),width:c.width()};c.from=d.options.from||(g=="show"?{height:0,width:0}:b);e={y:i!="horizontal"?e/100:1,x:i!="vertical"?e/100:1};c.to={height:b.height*e.y,width:b.width*e.x};if(d.options.fade){if(g=="show"){c.from.opacity=0;c.to.opacity=1}if(g=="hide"){c.from.opacity=
-1;c.to.opacity=0}}f.from=c.from;f.to=c.to;f.mode=g;c.effect("size",f,d.duration,d.callback);c.dequeue()})};a.effects.size=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","width","height","overflow","opacity"],g=["position","top","bottom","left","right","overflow","opacity"],e=["width","height","overflow"],i=["fontSize"],b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
-j=a.effects.setMode(c,d.options.mode||"effect"),l=d.options.restore||false,o=d.options.scale||"both",n=d.options.origin,k={height:c.height(),width:c.width()};c.from=d.options.from||k;c.to=d.options.to||k;if(n){n=a.effects.getBaseline(n,k);c.from.top=(k.height-c.from.height)*n.y;c.from.left=(k.width-c.from.width)*n.x;c.to.top=(k.height-c.to.height)*n.y;c.to.left=(k.width-c.to.width)*n.x}var m={from:{y:c.from.height/k.height,x:c.from.width/k.width},to:{y:c.to.height/k.height,x:c.to.width/k.width}};
-if(o=="box"||o=="both"){if(m.from.y!=m.to.y){f=f.concat(b);c.from=a.effects.setTransition(c,b,m.from.y,c.from);c.to=a.effects.setTransition(c,b,m.to.y,c.to)}if(m.from.x!=m.to.x){f=f.concat(h);c.from=a.effects.setTransition(c,h,m.from.x,c.from);c.to=a.effects.setTransition(c,h,m.to.x,c.to)}}if(o=="content"||o=="both")if(m.from.y!=m.to.y){f=f.concat(i);c.from=a.effects.setTransition(c,i,m.from.y,c.from);c.to=a.effects.setTransition(c,i,m.to.y,c.to)}a.effects.save(c,l?f:g);c.show();a.effects.createWrapper(c);
-c.css("overflow","hidden").css(c.from);if(o=="content"||o=="both"){b=b.concat(["marginTop","marginBottom"]).concat(i);h=h.concat(["marginLeft","marginRight"]);e=f.concat(b).concat(h);c.find("*[width]").each(function(){child=a(this);l&&a.effects.save(child,e);var p={height:child.height(),width:child.width()};child.from={height:p.height*m.from.y,width:p.width*m.from.x};child.to={height:p.height*m.to.y,width:p.width*m.to.x};if(m.from.y!=m.to.y){child.from=a.effects.setTransition(child,b,m.from.y,child.from);
-child.to=a.effects.setTransition(child,b,m.to.y,child.to)}if(m.from.x!=m.to.x){child.from=a.effects.setTransition(child,h,m.from.x,child.from);child.to=a.effects.setTransition(child,h,m.to.x,child.to)}child.css(child.from);child.animate(child.to,d.duration,d.options.easing,function(){l&&a.effects.restore(child,e)})})}c.animate(c.to,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity);j=="hide"&&c.hide();a.effects.restore(c,
-l?f:g);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.shake=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"];a.effects.setMode(c,d.options.mode||"effect");var g=d.options.direction||"left",e=d.options.distance||20,i=d.options.times||3,b=d.duration||d.options.duration||140;a.effects.save(c,f);c.show();a.effects.createWrapper(c);var h=g=="up"||g=="down"?"top":"left",j=g=="up"||g=="left"?"pos":"neg";g={};var l={},o={};g[h]=(j=="pos"?"-=":"+=")+e;l[h]=(j=="pos"?"+=":"-=")+e*2;o[h]=
-(j=="pos"?"-=":"+=")+e*2;c.animate(g,b,d.options.easing);for(e=1;e<i;e++)c.animate(l,b,d.options.easing).animate(o,b,d.options.easing);c.animate(l,b,d.options.easing).animate(g,b/2,d.options.easing,function(){a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
-(function(a){a.effects.slide=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"show"),e=d.options.direction||"left";a.effects.save(c,f);c.show();a.effects.createWrapper(c).css({overflow:"hidden"});var i=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";var b=d.options.distance||(i=="top"?c.outerHeight({margin:true}):c.outerWidth({margin:true}));if(g=="show")c.css(i,e=="pos"?isNaN(b)?"-"+b:-b:b);
-var h={};h[i]=(g=="show"?e=="pos"?"+=":"-=":e=="pos"?"-=":"+=")+b;c.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.transfer=function(d){return this.queue(function(){var c=a(this),f=a(d.options.to),g=f.offset();f={top:g.top,left:g.left,height:f.innerHeight(),width:f.innerWidth()};g=c.offset();var e=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(d.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,d.duration,d.options.easing,function(){e.remove();d.callback&&d.callback.apply(c[0],arguments);
-c.dequeue()})})}})(jQuery);
-(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var d=this,c=d.options;d.running=0;d.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");d.headers=
-d.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")});d.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
-if(c.navigation){var f=d.element.find("a").filter(c.navigationFilter).eq(0);if(f.length){var g=f.closest(".ui-accordion-header");d.active=g.length?g:f.closest(".ui-accordion-content").prev()}}d.active=d._findActive(d.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");d.active.next().addClass("ui-accordion-content-active");d._createIcons();d.resize();d.element.attr("role","tablist");d.headers.attr("role","tab").bind("keydown.accordion",
-function(e){return d._keydown(e)}).next().attr("role","tabpanel");d.headers.not(d.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();d.active.length?d.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):d.headers.eq(0).attr("tabIndex",0);a.browser.safari||d.headers.find("a").attr("tabIndex",-1);c.event&&d.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(e){d._clickHandler.call(d,e,this);e.preventDefault()})},_createIcons:function(){var d=
-this.options;if(d.icons){a("<span></span>").addClass("ui-icon "+d.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(d.icons.header).toggleClass(d.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var d=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
-this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(d.autoHeight||d.fillHeight)c.css("height","");return a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d=="active"&&this.activate(c);if(d=="icons"){this._destroyIcons();
-c&&this._createIcons()}if(d=="disabled")this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(d){if(!(this.options.disabled||d.altKey||d.ctrlKey)){var c=a.ui.keyCode,f=this.headers.length,g=this.headers.index(d.target),e=false;switch(d.keyCode){case c.RIGHT:case c.DOWN:e=this.headers[(g+1)%f];break;case c.LEFT:case c.UP:e=this.headers[(g-1+f)%f];break;case c.SPACE:case c.ENTER:this._clickHandler({target:d.target},d.target);
-d.preventDefault()}if(e){a(d.target).attr("tabIndex",-1);a(e).attr("tabIndex",0);e.focus();return false}return true}},resize:function(){var d=this.options,c;if(d.fillSpace){if(a.browser.msie){var f=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",f);this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+
-a(this).height()))}).css("overflow","auto")}else if(d.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c)}return this},activate:function(d){this.options.active=d;d=this._findActive(d)[0];this._clickHandler({target:d},d);return this},_findActive:function(d){return d?typeof d==="number"?this.headers.filter(":eq("+d+")"):this.headers.not(this.headers.not(d)):d===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(d,c){var f=this.options;
-if(!f.disabled)if(d.target){d=a(d.currentTarget||c);c=d[0]===this.active[0];f.active=f.collapsible&&c?false:this.headers.index(d);if(!(this.running||!f.collapsible&&c)){var g=this.active;h=d.next();i=this.active.next();b={options:f,newHeader:c&&f.collapsible?a([]):d,oldHeader:this.active,newContent:c&&f.collapsible?a([]):h,oldContent:i};var e=this.headers.index(this.active[0])>this.headers.index(d[0]);this.active=c?a([]):d;this._toggle(h,i,b,c,e);g.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(f.icons.headerSelected).addClass(f.icons.header);
-if(!c){d.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(f.icons.header).addClass(f.icons.headerSelected);d.next().addClass("ui-accordion-content-active")}}}else if(f.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(f.icons.headerSelected).addClass(f.icons.header);this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),
-b={options:f,newHeader:a([]),oldHeader:f.active,newContent:a([]),oldContent:i},h=this.active=a([]);this._toggle(h,i,b)}},_toggle:function(d,c,f,g,e){var i=this,b=i.options;i.toShow=d;i.toHide=c;i.data=f;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=c.size()===0?d.size():c.size();if(b.animated){f={};f=b.collapsible&&g?{toShow:a([]),toHide:c,complete:h,down:e,autoHeight:b.autoHeight||b.fillSpace}:{toShow:d,toHide:c,complete:h,down:e,autoHeight:b.autoHeight||
-b.fillSpace};if(!b.proxied)b.proxied=b.animated;if(!b.proxiedDuration)b.proxiedDuration=b.duration;b.animated=a.isFunction(b.proxied)?b.proxied(f):b.proxied;b.duration=a.isFunction(b.proxiedDuration)?b.proxiedDuration(f):b.proxiedDuration;g=a.ui.accordion.animations;var j=b.duration,l=b.animated;if(l&&!g[l]&&!a.easing[l])l="slide";g[l]||(g[l]=function(o){this.slide(o,{easing:l,duration:j||700})});g[l](f)}else{if(b.collapsible&&g)d.toggle();else{c.hide();d.show()}h(true)}c.prev().attr({"aria-expanded":"false",
-"aria-selected":"false",tabIndex:-1}).blur();d.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(d){this.running=d?0:--this.running;if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length)this.toHide.parent()[0].className=this.toHide.parent()[0].className;this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,{version:"1.8.13",
-animations:{slide:function(d,c){d=a.extend({easing:"swing",duration:300},d,c);if(d.toHide.size())if(d.toShow.size()){var f=d.toShow.css("overflow"),g=0,e={},i={},b;c=d.toShow;b=c[0].style.width;c.width(parseInt(c.parent().width(),10)-parseInt(c.css("paddingLeft"),10)-parseInt(c.css("paddingRight"),10)-(parseInt(c.css("borderLeftWidth"),10)||0)-(parseInt(c.css("borderRightWidth"),10)||0));a.each(["height","paddingTop","paddingBottom"],function(h,j){i[j]="hide";h=(""+a.css(d.toShow[0],j)).match(/^([\d+-.]+)(.*)$/);
-e[j]={value:h[1],unit:h[2]||"px"}});d.toShow.css({height:0,overflow:"hidden"}).show();d.toHide.filter(":hidden").each(d.complete).end().filter(":visible").animate(i,{step:function(h,j){if(j.prop=="height")g=j.end-j.start===0?0:(j.now-j.start)/(j.end-j.start);d.toShow[0].style[j.prop]=g*e[j.prop].value+e[j.prop].unit},duration:d.duration,easing:d.easing,complete:function(){d.autoHeight||d.toShow.css("height","");d.toShow.css({width:b,overflow:f});d.complete()}})}else d.toHide.animate({height:"hide",
-paddingTop:"hide",paddingBottom:"hide"},d);else d.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},d)},bounceslide:function(d){this.slide(d,{easing:d.down?"easeOutBounce":"swing",duration:d.down?1E3:200})}}})})(jQuery);
-(function(a){var d=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var c=this,f=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){if(!(c.options.disabled||c.element.attr("readonly"))){g=
-false;var i=a.ui.keyCode;switch(e.keyCode){case i.PAGE_UP:c._move("previousPage",e);break;case i.PAGE_DOWN:c._move("nextPage",e);break;case i.UP:c._move("previous",e);e.preventDefault();break;case i.DOWN:c._move("next",e);e.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:if(c.menu.active){g=true;e.preventDefault()}case i.TAB:if(!c.menu.active)return;c.menu.select(e);break;case i.ESCAPE:c.element.val(c.term);c.close(e);break;default:clearTimeout(c.searching);c.searching=setTimeout(function(){if(c.term!=
-c.element.val()){c.selectedItem=null;c.search(null,e)}},c.options.delay);break}}}).bind("keypress.autocomplete",function(e){if(g){g=false;e.preventDefault()}}).bind("focus.autocomplete",function(){if(!c.options.disabled){c.selectedItem=null;c.previous=c.element.val()}}).bind("blur.autocomplete",function(e){if(!c.options.disabled){clearTimeout(c.searching);c.closing=setTimeout(function(){c.close(e);c._change(e)},150)}});this._initSource();this.response=function(){return c._response.apply(c,arguments)};
-this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",f)[0]).mousedown(function(e){var i=c.menu.element[0];a(e.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==i&&!a.ui.contains(i,b.target)&&c.close()})},1);setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(e,i){i=i.item.data("item.autocomplete");false!==c._trigger("focus",e,{item:i})&&/^key/.test(e.originalEvent.type)&&
-c.element.val(i.value)},selected:function(e,i){var b=i.item.data("item.autocomplete"),h=c.previous;if(c.element[0]!==f.activeElement){c.element.focus();c.previous=h;setTimeout(function(){c.previous=h;c.selectedItem=b},1)}false!==c._trigger("select",e,{item:b})&&c.element.val(b.value);c.term=c.element.val();c.close(e);c.selectedItem=b},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
-a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(c,f){a.Widget.prototype._setOption.apply(this,arguments);c==="source"&&this._initSource();if(c==="appendTo")this.menu.element.appendTo(a(f||"body",this.element[0].ownerDocument)[0]);c==="disabled"&&
-f&&this.xhr&&this.xhr.abort()},_initSource:function(){var c=this,f,g;if(a.isArray(this.options.source)){f=this.options.source;this.source=function(e,i){i(a.ui.autocomplete.filter(f,e.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(e,i){c.xhr&&c.xhr.abort();c.xhr=a.ajax({url:g,data:e,dataType:"json",autocompleteRequest:++d,success:function(b){this.autocompleteRequest===d&&i(b)},error:function(){this.autocompleteRequest===d&&i([])}})}}else this.source=
-this.options.source},search:function(c,f){c=c!=null?c:this.element.val();this.term=this.element.val();if(c.length<this.options.minLength)return this.close(f);clearTimeout(this.closing);if(this._trigger("search",f)!==false)return this._search(c)},_search:function(c){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:c},this.response)},_response:function(c){if(!this.options.disabled&&c&&c.length){c=this._normalize(c);this._suggest(c);this._trigger("open")}else this.close();
-this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(c){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",c)}},_change:function(c){this.previous!==this.element.val()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){if(c.length&&c[0].label&&c[0].value)return c;return a.map(c,function(f){if(typeof f==="string")return{label:f,value:f};return a.extend({label:f.label||
-f.value,value:f.value||f.label},f)})},_suggest:function(c){var f=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(f,c);this.menu.deactivate();this.menu.refresh();f.show();this._resizeMenu();f.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(c,f){var g=this;
-a.each(f,function(e,i){g._renderItem(c,i)})},_renderItem:function(c,f){return a("<li></li>").data("item.autocomplete",f).append(a("<a></a>").text(f.label)).appendTo(c)},_move:function(c,f){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate()}else this.menu[c](f);else this.search(null,f)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
-"\\$&")},filter:function(c,f){var g=new RegExp(a.ui.autocomplete.escapeRegex(f),"i");return a.grep(c,function(e){return g.test(e.label||e.value||e)})}})})(jQuery);
-(function(a){a.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();d.select(c)}});this.refresh()},refresh:function(){var d=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
--1).mouseenter(function(c){d.activate(c,a(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(d,c){this.deactivate();if(this.hasScroll()){var f=c.offset().top-this.element.offset().top,g=this.element.scrollTop(),e=this.element.height();if(f<0)this.element.scrollTop(g+f);else f>=e&&this.element.scrollTop(g+f-e+c.height())}this.active=c.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",d,{item:c})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
-this._trigger("blur");this.active=null}},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(d,c,f){if(this.active){d=this.active[d+"All"](".ui-menu-item").eq(0);d.length?this.activate(f,d):this.activate(f,this.element.children(c))}else this.activate(f,
-this.element.children(c))},nextPage:function(d){if(this.hasScroll())if(!this.active||this.last())this.activate(d,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,f=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var e=a(this).offset().top-c-f+a(this).height();return e<10&&e>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(d,g)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||
-this.last()?":first":":last"))},previousPage:function(d){if(this.hasScroll())if(!this.active||this.first())this.activate(d,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=a(this).offset().top-c+f-a(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(d,result)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||
-this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})})(jQuery);
-(function(a){var d,c=function(g){a(":ui-button",g.target.form).each(function(){var e=a(this).data("button");setTimeout(function(){e.refresh()},1)})},f=function(g){var e=g.name,i=g.form,b=a([]);if(e)b=i?a(i).find("[name='"+e+"']"):a("[name='"+e+"']",g.ownerDocument).filter(function(){return!this.form});return b};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",
-c);if(typeof this.options.disabled!=="boolean")this.options.disabled=this.element.attr("disabled");this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var g=this,e=this.options,i=this.type==="checkbox"||this.type==="radio",b="ui-state-hover"+(!i?" ui-state-active":"");if(e.label===null)e.label=this.buttonElement.html();if(this.element.is(":disabled"))e.disabled=true;this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",
-function(){if(!e.disabled){a(this).addClass("ui-state-hover");this===d&&a(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){e.disabled||a(this).removeClass(b)}).bind("focus.button",function(){a(this).addClass("ui-state-focus")}).bind("blur.button",function(){a(this).removeClass("ui-state-focus")}).bind("click.button",function(h){e.disabled&&h.stopImmediatePropagation()});i&&this.element.bind("change.button",function(){g.refresh()});if(this.type==="checkbox")this.buttonElement.bind("click.button",
-function(){if(e.disabled)return false;a(this).toggleClass("ui-state-active");g.buttonElement.attr("aria-pressed",g.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(e.disabled)return false;a(this).addClass("ui-state-active");g.buttonElement.attr("aria-pressed",true);var h=g.element[0];f(h).not(h).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)});else{this.buttonElement.bind("mousedown.button",
-function(){if(e.disabled)return false;a(this).addClass("ui-state-active");d=this;a(document).one("mouseup",function(){d=null})}).bind("mouseup.button",function(){if(e.disabled)return false;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(e.disabled)return false;if(h.keyCode==a.ui.keyCode.SPACE||h.keyCode==a.ui.keyCode.ENTER)a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===
-a.ui.keyCode.SPACE&&a(this).click()})}this._setOption("disabled",e.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){var g=this.element.parents().filter(":last"),e="label[for="+this.element.attr("id")+"]";this.buttonElement=g.find(e);if(!this.buttonElement.length){g=g.length?g.siblings():this.element.siblings();this.buttonElement=g.filter(e);
-if(!this.buttonElement.length)this.buttonElement=g.find(e)}this.element.addClass("ui-helper-hidden-accessible");(g=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",g)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
-this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(g,e){a.Widget.prototype._setOption.apply(this,arguments);if(g==="disabled")e?this.element.attr("disabled",true):this.element.removeAttr("disabled");this._resetButton()},refresh:function(){var g=this.element.is(":disabled");g!==this.options.disabled&&this._setOption("disabled",g);if(this.type==="radio")f(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
-true):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var g=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
-e=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(g.empty()).text(),i=this.options.icons,b=i.primary&&i.secondary,h=[];if(i.primary||i.secondary){if(this.options.text)h.push("ui-button-text-icon"+(b?"s":i.primary?"-primary":"-secondary"));i.primary&&g.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>");i.secondary&&g.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>");if(!this.options.text){h.push(b?"ui-button-icons-only":
-"ui-button-icon-only");this.hasTitle||g.attr("title",e)}}else h.push("ui-button-text-only");g.addClass(h.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(g,e){g==="disabled"&&this.buttons.button("option",g,e);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},
-destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");a.Widget.prototype.destroy.call(this)}})})(jQuery);
-(function(a,d){function c(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
-"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
-"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
-minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=f(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function f(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
-"mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){if(!a.datepicker._isDisabledDatepicker(i.inline?b.parent()[0]:i.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
-a(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}})}function g(b,h){a.extend(b,h);for(var j in h)if(h[j]==null||h[j]==d)b[j]=h[j];return b}a.extend(a.ui,{datepicker:{version:"1.8.13"}});var e=(new Date).getTime(),i;a.extend(c.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},
-_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){g(this._defaults,b||{});return this},_attachDatepicker:function(b,h){var j=null;for(var l in this._defaults){var o=b.getAttribute("date:"+l);if(o){j=j||{};try{j[l]=eval(o)}catch(n){j[l]=o}}}l=b.nodeName.toLowerCase();o=l=="div"||l=="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}var k=this._newInst(a(b),o);k.settings=a.extend({},h||{},j||{});if(l=="input")this._connectDatepicker(b,k);else o&&this._inlineDatepicker(b,k)},_newInst:function(b,
-h){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:h,dpDiv:!h?this.dpDiv:f(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(b,h){var j=a(b);h.append=a([]);h.trigger=a([]);if(!j.hasClass(this.markerClassName)){this._attachments(j,h);j.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
-function(l,o,n){h.settings[o]=n}).bind("getData.datepicker",function(l,o){return this._get(h,o)});this._autoSize(h);a.data(b,"datepicker",h)}},_attachments:function(b,h){var j=this._get(h,"appendText"),l=this._get(h,"isRTL");h.append&&h.append.remove();if(j){h.append=a('<span class="'+this._appendClass+'">'+j+"</span>");b[l?"before":"after"](h.append)}b.unbind("focus",this._showDatepicker);h.trigger&&h.trigger.remove();j=this._get(h,"showOn");if(j=="focus"||j=="both")b.focus(this._showDatepicker);
-if(j=="button"||j=="both"){j=this._get(h,"buttonText");var o=this._get(h,"buttonImage");h.trigger=a(this._get(h,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:o,alt:j,title:j}):a('<button type="button"></button>').addClass(this._triggerClass).html(o==""?j:a("<img/>").attr({src:o,alt:j,title:j})));b[l?"before":"after"](h.trigger);h.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(b[0]);
-return false})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var h=new Date(2009,11,20),j=this._get(b,"dateFormat");if(j.match(/[DM]/)){var l=function(o){for(var n=0,k=0,m=0;m<o.length;m++)if(o[m].length>n){n=o[m].length;k=m}return k};h.setMonth(l(this._get(b,j.match(/MM/)?"monthNames":"monthNamesShort")));h.setDate(l(this._get(b,j.match(/DD/)?"dayNames":"dayNamesShort"))+20-h.getDay())}b.input.attr("size",this._formatDate(b,h).length)}},_inlineDatepicker:function(b,h){var j=a(b);
-if(!j.hasClass(this.markerClassName)){j.addClass(this.markerClassName).append(h.dpDiv).bind("setData.datepicker",function(l,o,n){h.settings[o]=n}).bind("getData.datepicker",function(l,o){return this._get(h,o)});a.data(b,"datepicker",h);this._setDate(h,this._getDefaultDate(h),true);this._updateDatepicker(h);this._updateAlternate(h);h.dpDiv.show()}},_dialogDatepicker:function(b,h,j,l,o){b=this._dialogInst;if(!b){this.uuid+=1;this._dialogInput=a('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');
-this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);b=this._dialogInst=this._newInst(this._dialogInput,false);b.settings={};a.data(this._dialogInput[0],"datepicker",b)}g(b.settings,l||{});h=h&&h.constructor==Date?this._formatDate(b,h):h;this._dialogInput.val(h);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/
-2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=j;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();a.removeData(b,
-"datepicker");if(l=="input"){j.append.remove();j.trigger.remove();h.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(l=="div"||l=="span")h.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();if(l=="input"){b.disabled=false;j.trigger.filter("button").each(function(){this.disabled=
-false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(l=="div"||l=="span"){h=h.children("."+this._inlineClass);h.children().removeClass("ui-state-disabled");h.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=a.map(this._disabledInputs,function(o){return o==b?null:o})}},_disableDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();if(l=="input"){b.disabled=
-true;j.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(l=="div"||l=="span"){h=h.children("."+this._inlineClass);h.children().addClass("ui-state-disabled");h.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=a.map(this._disabledInputs,function(o){return o==b?null:o});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return false;
-for(var h=0;h<this._disabledInputs.length;h++)if(this._disabledInputs[h]==b)return true;return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(h){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,h,j){var l=this._getInst(b);if(arguments.length==2&&typeof h=="string")return h=="defaults"?a.extend({},a.datepicker._defaults):l?h=="all"?a.extend({},l.settings):this._get(l,h):null;var o=h||{};if(typeof h=="string"){o={};o[h]=j}if(l){this._curInst==l&&
-this._hideDatepicker();var n=this._getDateDatepicker(b,true),k=this._getMinMaxDate(l,"min"),m=this._getMinMaxDate(l,"max");g(l.settings,o);if(k!==null&&o.dateFormat!==d&&o.minDate===d)l.settings.minDate=this._formatDate(l,k);if(m!==null&&o.dateFormat!==d&&o.maxDate===d)l.settings.maxDate=this._formatDate(l,m);this._attachments(a(b),l);this._autoSize(l);this._setDate(l,n);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(b,h,j){this._optionDatepicker(b,h,j)},_refreshDatepicker:function(b){(b=
-this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,h){if(b=this._getInst(b)){this._setDate(b,h);this._updateDatepicker(b);this._updateAlternate(b)}},_getDateDatepicker:function(b,h){(b=this._getInst(b))&&!b.inline&&this._setDateFromField(b,h);return b?this._getDate(b):null},_doKeyDown:function(b){var h=a.datepicker._getInst(b.target),j=true,l=h.dpDiv.is(".ui-datepicker-rtl");h._keyEvent=true;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();
-j=false;break;case 13:j=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",h.dpDiv);j[0]?a.datepicker._selectDay(b.target,h.selectedMonth,h.selectedYear,j[0]):a.datepicker._hideDatepicker();return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(h,"stepBigMonths"):-a.datepicker._get(h,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(h,"stepBigMonths"):+a.datepicker._get(h,
-"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey)a.datepicker._clearDate(b.target);j=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||b.metaKey)a.datepicker._gotoToday(b.target);j=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,l?+1:-1,"D");j=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(h,"stepBigMonths"):-a.datepicker._get(h,"stepMonths"),"M");break;case 38:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,
--7,"D");j=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,l?-1:+1,"D");j=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(h,"stepBigMonths"):+a.datepicker._get(h,"stepMonths"),"M");break;case 40:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,+7,"D");j=b.ctrlKey||b.metaKey;break;default:j=false}else if(b.keyCode==36&&b.ctrlKey)a.datepicker._showDatepicker(this);else j=false;if(j){b.preventDefault();
-b.stopPropagation()}},_doKeyPress:function(b){var h=a.datepicker._getInst(b.target);if(a.datepicker._get(h,"constrainInput")){h=a.datepicker._possibleChars(a.datepicker._get(h,"dateFormat"));var j=String.fromCharCode(b.charCode==d?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||j<" "||!h||h.indexOf(j)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))){a.datepicker._setDateFromField(b);
-a.datepicker._updateAlternate(b);a.datepicker._updateDatepicker(b)}}catch(h){a.datepicker.log(h)}return true},_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!="input")b=a("input",b.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var h=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=h&&a.datepicker._curInst.dpDiv.stop(true,true);var j=a.datepicker._get(h,"beforeShow");g(h.settings,j?j.apply(b,[b,h]):{});h.lastVal=
-null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(h);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}var l=false;a(b).parents().each(function(){l|=a(this).css("position")=="fixed";return!l});if(l&&a.browser.opera){a.datepicker._pos[0]-=document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}j={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=
-null;h.dpDiv.empty();h.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(h);j=a.datepicker._checkOffset(h,j,l);h.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":l?"fixed":"absolute",display:"none",left:j.left+"px",top:j.top+"px"});if(!h.inline){j=a.datepicker._get(h,"showAnim");var o=a.datepicker._get(h,"duration"),n=function(){var k=h.dpDiv.find("iframe.ui-datepicker-cover");if(k.length){var m=a.datepicker._getBorders(h.dpDiv);k.css({left:-m[0],
-top:-m[1],width:h.dpDiv.outerWidth(),height:h.dpDiv.outerHeight()})}};h.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=true;a.effects&&a.effects[j]?h.dpDiv.show(j,a.datepicker._get(h,"showOptions"),o,n):h.dpDiv[j||"show"](j?o:null,n);if(!j||!o)n();h.input.is(":visible")&&!h.input.is(":disabled")&&h.input.focus();a.datepicker._curInst=h}}},_updateDatepicker:function(b){var h=a.datepicker._getBorders(b.dpDiv);i=b;b.dpDiv.empty().append(this._generateHTML(b));var j=b.dpDiv.find("iframe.ui-datepicker-cover");
-j.length&&j.css({left:-h[0],top:-h[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();h=this._getNumberOfMonths(b);j=h[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");j>1&&b.dpDiv.addClass("ui-datepicker-multi-"+j).css("width",17*j+"em");b.dpDiv[(h[0]!=1||h[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");
-b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var l=b.yearshtml;setTimeout(function(){l===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);l=b.yearshtml=null},0)}},_getBorders:function(b){var h=function(j){return{thin:1,medium:2,thick:3}[j]||j};return[parseFloat(h(b.css("border-left-width"))),parseFloat(h(b.css("border-top-width")))]},
-_checkOffset:function(b,h,j){var l=b.dpDiv.outerWidth(),o=b.dpDiv.outerHeight(),n=b.input?b.input.outerWidth():0,k=b.input?b.input.outerHeight():0,m=document.documentElement.clientWidth+a(document).scrollLeft(),p=document.documentElement.clientHeight+a(document).scrollTop();h.left-=this._get(b,"isRTL")?l-n:0;h.left-=j&&h.left==b.input.offset().left?a(document).scrollLeft():0;h.top-=j&&h.top==b.input.offset().top+k?a(document).scrollTop():0;h.left-=Math.min(h.left,h.left+l>m&&m>l?Math.abs(h.left+l-
-m):0);h.top-=Math.min(h.top,h.top+o>p&&p>o?Math.abs(o+k):0);return h},_findPos:function(b){for(var h=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[h?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var h=this._curInst;if(!(!h||b&&h!=a.data(b,"datepicker")))if(this._datepickerShowing){b=this._get(h,"showAnim");var j=this._get(h,"duration"),l=function(){a.datepicker._tidyDialog(h);this._curInst=
-null};a.effects&&a.effects[b]?h.dpDiv.hide(b,a.datepicker._get(h,"showOptions"),j,l):h.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?j:null,l);b||l();if(b=this._get(h,"onClose"))b.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
-_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,h,j){b=a(b);var l=this._getInst(b[0]);if(!this._isDisabledDatepicker(b[0])){this._adjustInstDate(l,h+(j=="M"?this._get(l,"showCurrentAtPos"):
-0),j);this._updateDatepicker(l)}},_gotoToday:function(b){b=a(b);var h=this._getInst(b[0]);if(this._get(h,"gotoCurrent")&&h.currentDay){h.selectedDay=h.currentDay;h.drawMonth=h.selectedMonth=h.currentMonth;h.drawYear=h.selectedYear=h.currentYear}else{var j=new Date;h.selectedDay=j.getDate();h.drawMonth=h.selectedMonth=j.getMonth();h.drawYear=h.selectedYear=j.getFullYear()}this._notifyChange(h);this._adjustDate(b)},_selectMonthYear:function(b,h,j){b=a(b);var l=this._getInst(b[0]);l._selectingMonthYear=
-false;l["selected"+(j=="M"?"Month":"Year")]=l["draw"+(j=="M"?"Month":"Year")]=parseInt(h.options[h.selectedIndex].value,10);this._notifyChange(l);this._adjustDate(b)},_clickMonthYear:function(b){var h=this._getInst(a(b)[0]);h.input&&h._selectingMonthYear&&setTimeout(function(){h.input.focus()},0);h._selectingMonthYear=!h._selectingMonthYear},_selectDay:function(b,h,j,l){var o=a(b);if(!(a(l).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))){o=this._getInst(o[0]);o.selectedDay=o.currentDay=
-a("a",l).html();o.selectedMonth=o.currentMonth=h;o.selectedYear=o.currentYear=j;this._selectDate(b,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,h){b=this._getInst(a(b)[0]);h=h!=null?h:this._formatDate(b);b.input&&b.input.val(h);this._updateAlternate(b);var j=this._get(b,"onSelect");if(j)j.apply(b.input?b.input[0]:null,[h,b]);else b.input&&b.input.trigger("change");if(b.inline)this._updateDatepicker(b);
-else{this._hideDatepicker();this._lastInput=b.input[0];typeof b.input[0]!="object"&&b.input.focus();this._lastInput=null}},_updateAlternate:function(b){var h=this._get(b,"altField");if(h){var j=this._get(b,"altFormat")||this._get(b,"dateFormat"),l=this._getDate(b),o=this.formatDate(j,l,this._getFormatConfig(b));a(h).each(function(){a(this).val(o)})}},noWeekends:function(b){b=b.getDay();return[b>0&&b<6,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var h=
-b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((h-b)/864E5)/7)+1},parseDate:function(b,h,j){if(b==null||h==null)throw"Invalid arguments";h=typeof h=="object"?h.toString():h+"";if(h=="")return null;var l=(j?j.shortYearCutoff:null)||this._defaults.shortYearCutoff;l=typeof l!="string"?l:(new Date).getFullYear()%100+parseInt(l,10);for(var o=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,n=(j?j.dayNames:null)||this._defaults.dayNames,k=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort,
-m=(j?j.monthNames:null)||this._defaults.monthNames,p=j=-1,q=-1,s=-1,r=false,u=function(y){(y=G+1<b.length&&b.charAt(G+1)==y)&&G++;return y},v=function(y){var H=u(y);y=new RegExp("^\\d{1,"+(y=="@"?14:y=="!"?20:y=="y"&&H?4:y=="o"?3:2)+"}");y=h.substring(z).match(y);if(!y)throw"Missing number at position "+z;z+=y[0].length;return parseInt(y[0],10)},w=function(y,H,N){y=a.map(u(y)?N:H,function(D,E){return[[E,D]]}).sort(function(D,E){return-(D[1].length-E[1].length)});var J=-1;a.each(y,function(D,E){D=
-E[1];if(h.substr(z,D.length).toLowerCase()==D.toLowerCase()){J=E[0];z+=D.length;return false}});if(J!=-1)return J+1;else throw"Unknown name at position "+z;},x=function(){if(h.charAt(z)!=b.charAt(G))throw"Unexpected literal at position "+z;z++},z=0,G=0;G<b.length;G++)if(r)if(b.charAt(G)=="'"&&!u("'"))r=false;else x();else switch(b.charAt(G)){case "d":q=v("d");break;case "D":w("D",o,n);break;case "o":s=v("o");break;case "m":p=v("m");break;case "M":p=w("M",k,m);break;case "y":j=v("y");break;case "@":var C=
-new Date(v("@"));j=C.getFullYear();p=C.getMonth()+1;q=C.getDate();break;case "!":C=new Date((v("!")-this._ticksTo1970)/1E4);j=C.getFullYear();p=C.getMonth()+1;q=C.getDate();break;case "'":if(u("'"))x();else r=true;break;default:x()}if(j==-1)j=(new Date).getFullYear();else if(j<100)j+=(new Date).getFullYear()-(new Date).getFullYear()%100+(j<=l?0:-100);if(s>-1){p=1;q=s;do{l=this._getDaysInMonth(j,p-1);if(q<=l)break;p++;q-=l}while(1)}C=this._daylightSavingAdjust(new Date(j,p-1,q));if(C.getFullYear()!=
-j||C.getMonth()+1!=p||C.getDate()!=q)throw"Invalid date";return C},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(b,h,j){if(!h)return"";var l=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,o=(j?j.dayNames:null)||this._defaults.dayNames,
-n=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort;j=(j?j.monthNames:null)||this._defaults.monthNames;var k=function(u){(u=r+1<b.length&&b.charAt(r+1)==u)&&r++;return u},m=function(u,v,w){v=""+v;if(k(u))for(;v.length<w;)v="0"+v;return v},p=function(u,v,w,x){return k(u)?x[v]:w[v]},q="",s=false;if(h)for(var r=0;r<b.length;r++)if(s)if(b.charAt(r)=="'"&&!k("'"))s=false;else q+=b.charAt(r);else switch(b.charAt(r)){case "d":q+=m("d",h.getDate(),2);break;case "D":q+=p("D",h.getDay(),l,o);break;
-case "o":q+=m("o",(h.getTime()-(new Date(h.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":q+=m("m",h.getMonth()+1,2);break;case "M":q+=p("M",h.getMonth(),n,j);break;case "y":q+=k("y")?h.getFullYear():(h.getYear()%100<10?"0":"")+h.getYear()%100;break;case "@":q+=h.getTime();break;case "!":q+=h.getTime()*1E4+this._ticksTo1970;break;case "'":if(k("'"))q+="'";else s=true;break;default:q+=b.charAt(r)}return q},_possibleChars:function(b){for(var h="",j=false,l=function(n){(n=o+1<b.length&&b.charAt(o+
-1)==n)&&o++;return n},o=0;o<b.length;o++)if(j)if(b.charAt(o)=="'"&&!l("'"))j=false;else h+=b.charAt(o);else switch(b.charAt(o)){case "d":case "m":case "y":case "@":h+="0123456789";break;case "D":case "M":return null;case "'":if(l("'"))h+="'";else j=true;break;default:h+=b.charAt(o)}return h},_get:function(b,h){return b.settings[h]!==d?b.settings[h]:this._defaults[h]},_setDateFromField:function(b,h){if(b.input.val()!=b.lastVal){var j=this._get(b,"dateFormat"),l=b.lastVal=b.input?b.input.val():null,
-o,n;o=n=this._getDefaultDate(b);var k=this._getFormatConfig(b);try{o=this.parseDate(j,l,k)||n}catch(m){this.log(m);l=h?"":l}b.selectedDay=o.getDate();b.drawMonth=b.selectedMonth=o.getMonth();b.drawYear=b.selectedYear=o.getFullYear();b.currentDay=l?o.getDate():0;b.currentMonth=l?o.getMonth():0;b.currentYear=l?o.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,h,
-j){var l=function(n){var k=new Date;k.setDate(k.getDate()+n);return k},o=function(n){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),n,a.datepicker._getFormatConfig(b))}catch(k){}var m=(n.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,p=m.getFullYear(),q=m.getMonth();m=m.getDate();for(var s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=s.exec(n);r;){switch(r[2]||"d"){case "d":case "D":m+=parseInt(r[1],10);break;case "w":case "W":m+=parseInt(r[1],10)*7;break;case "m":case "M":q+=
-parseInt(r[1],10);m=Math.min(m,a.datepicker._getDaysInMonth(p,q));break;case "y":case "Y":p+=parseInt(r[1],10);m=Math.min(m,a.datepicker._getDaysInMonth(p,q));break}r=s.exec(n)}return new Date(p,q,m)};if(h=(h=h==null||h===""?j:typeof h=="string"?o(h):typeof h=="number"?isNaN(h)?j:l(h):new Date(h.getTime()))&&h.toString()=="Invalid Date"?j:h){h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0)}return this._daylightSavingAdjust(h)},_daylightSavingAdjust:function(b){if(!b)return null;
-b.setHours(b.getHours()>12?b.getHours()+2:0);return b},_setDate:function(b,h,j){var l=!h,o=b.selectedMonth,n=b.selectedYear;h=this._restrictMinMax(b,this._determineDate(b,h,new Date));b.selectedDay=b.currentDay=h.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=h.getMonth();b.drawYear=b.selectedYear=b.currentYear=h.getFullYear();if((o!=b.selectedMonth||n!=b.selectedYear)&&!j)this._notifyChange(b);this._adjustInstDate(b);if(b.input)b.input.val(l?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||
-b.input&&b.input.val()==""?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_generateHTML:function(b){var h=new Date;h=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth(),h.getDate()));var j=this._get(b,"isRTL"),l=this._get(b,"showButtonPanel"),o=this._get(b,"hideIfNoPrevNext"),n=this._get(b,"navigationAsDateFormat"),k=this._getNumberOfMonths(b),m=this._get(b,"showCurrentAtPos"),p=this._get(b,"stepMonths"),q=k[0]!=1||k[1]!=1,s=this._daylightSavingAdjust(!b.currentDay?
-new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),r=this._getMinMaxDate(b,"min"),u=this._getMinMaxDate(b,"max");m=b.drawMonth-m;var v=b.drawYear;if(m<0){m+=12;v--}if(u){var w=this._daylightSavingAdjust(new Date(u.getFullYear(),u.getMonth()-k[0]*k[1]+1,u.getDate()));for(w=r&&w<r?r:w;this._daylightSavingAdjust(new Date(v,m,1))>w;){m--;if(m<0){m=11;v--}}}b.drawMonth=m;b.drawYear=v;w=this._get(b,"prevText");w=!n?w:this.formatDate(w,this._daylightSavingAdjust(new Date(v,m-p,1)),this._getFormatConfig(b));
-w=this._canAdjustMonth(b,-1,v,m)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+b.id+"', -"+p+", 'M');\" title=\""+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"e":"w")+'">'+w+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"e":"w")+'">'+w+"</span></a>";var x=this._get(b,"nextText");x=!n?x:this.formatDate(x,this._daylightSavingAdjust(new Date(v,
-m+p,1)),this._getFormatConfig(b));o=this._canAdjustMonth(b,+1,v,m)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+b.id+"', +"+p+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"w":"e")+'">'+x+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"w":"e")+'">'+x+"</span></a>";p=this._get(b,"currentText");x=this._get(b,"gotoCurrent")&&
-b.currentDay?s:h;p=!n?p:this.formatDate(p,x,this._getFormatConfig(b));n=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+e+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"";l=l?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(j?n:"")+(this._isInRange(b,x)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
-e+".datepicker._gotoToday('#"+b.id+"');\">"+p+"</button>":"")+(j?"":n)+"</div>":"";n=parseInt(this._get(b,"firstDay"),10);n=isNaN(n)?0:n;p=this._get(b,"showWeek");x=this._get(b,"dayNames");this._get(b,"dayNamesShort");var z=this._get(b,"dayNamesMin"),G=this._get(b,"monthNames"),C=this._get(b,"monthNamesShort"),y=this._get(b,"beforeShowDay"),H=this._get(b,"showOtherMonths"),N=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var J=this._getDefaultDate(b),D="",E=0;E<k[0];E++){for(var P=
-"",L=0;L<k[1];L++){var Q=this._daylightSavingAdjust(new Date(v,m,b.selectedDay)),B=" ui-corner-all",F="";if(q){F+='<div class="ui-datepicker-group';if(k[1]>1)switch(L){case 0:F+=" ui-datepicker-group-first";B=" ui-corner-"+(j?"right":"left");break;case k[1]-1:F+=" ui-datepicker-group-last";B=" ui-corner-"+(j?"left":"right");break;default:F+=" ui-datepicker-group-middle";B="";break}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&E==0?j?
-o:w:"")+(/all|right/.test(B)&&E==0?j?w:o:"")+this._generateMonthYearHeader(b,m,v,r,u,E>0||L>0,G,C)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var I=p?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"";for(B=0;B<7;B++){var A=(B+n)%7;I+="<th"+((B+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+x[A]+'">'+z[A]+"</span></th>"}F+=I+"</tr></thead><tbody>";I=this._getDaysInMonth(v,m);if(v==b.selectedYear&&m==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,
-I);B=(this._getFirstDayOfMonth(v,m)-n+7)%7;I=q?6:Math.ceil((B+I)/7);A=this._daylightSavingAdjust(new Date(v,m,1-B));for(var R=0;R<I;R++){F+="<tr>";var S=!p?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(A)+"</td>";for(B=0;B<7;B++){var M=y?y.apply(b.input?b.input[0]:null,[A]):[true,""],K=A.getMonth()!=m,O=K&&!N||!M[0]||r&&A<r||u&&A>u;S+='<td class="'+((B+n+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(A.getTime()==Q.getTime()&&m==b.selectedMonth&&
-b._keyEvent||J.getTime()==A.getTime()&&J.getTime()==Q.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!H?"":" "+M[1]+(A.getTime()==s.getTime()?" "+this._currentClass:"")+(A.getTime()==h.getTime()?" ui-datepicker-today":""))+'"'+((!K||H)&&M[2]?' title="'+M[2]+'"':"")+(O?"":' onclick="DP_jQuery_'+e+".datepicker._selectDay('#"+b.id+"',"+A.getMonth()+","+A.getFullYear()+', this);return false;"')+">"+(K&&!H?"&#xa0;":O?'<span class="ui-state-default">'+A.getDate()+
-"</span>":'<a class="ui-state-default'+(A.getTime()==h.getTime()?" ui-state-highlight":"")+(A.getTime()==s.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+'" href="#">'+A.getDate()+"</a>")+"</td>";A.setDate(A.getDate()+1);A=this._daylightSavingAdjust(A)}F+=S+"</tr>"}m++;if(m>11){m=0;v++}F+="</tbody></table>"+(q?"</div>"+(k[0]>0&&L==k[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");P+=F}D+=P}D+=l+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
-"");b._keyEvent=false;return D},_generateMonthYearHeader:function(b,h,j,l,o,n,k,m){var p=this._get(b,"changeMonth"),q=this._get(b,"changeYear"),s=this._get(b,"showMonthAfterYear"),r='<div class="ui-datepicker-title">',u="";if(n||!p)u+='<span class="ui-datepicker-month">'+k[h]+"</span>";else{k=l&&l.getFullYear()==j;var v=o&&o.getFullYear()==j;u+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+
-b.id+"');\">";for(var w=0;w<12;w++)if((!k||w>=l.getMonth())&&(!v||w<=o.getMonth()))u+='<option value="'+w+'"'+(w==h?' selected="selected"':"")+">"+m[w]+"</option>";u+="</select>"}s||(r+=u+(n||!(p&&q)?"&#xa0;":""));if(!b.yearshtml){b.yearshtml="";if(n||!q)r+='<span class="ui-datepicker-year">'+j+"</span>";else{m=this._get(b,"yearRange").split(":");var x=(new Date).getFullYear();k=function(z){z=z.match(/c[+-].*/)?j+parseInt(z.substring(1),10):z.match(/[+-].*/)?x+parseInt(z,10):parseInt(z,10);return isNaN(z)?
-x:z};h=k(m[0]);m=Math.max(h,k(m[1]||""));h=l?Math.max(h,l.getFullYear()):h;m=o?Math.min(m,o.getFullYear()):m;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+b.id+"');\">";h<=m;h++)b.yearshtml+='<option value="'+h+'"'+(h==j?' selected="selected"':"")+">"+h+"</option>";b.yearshtml+="</select>";r+=b.yearshtml;b.yearshtml=null}}r+=this._get(b,"yearSuffix");if(s)r+=
-(n||!(p&&q)?"&#xa0;":"")+u;r+="</div>";return r},_adjustInstDate:function(b,h,j){var l=b.drawYear+(j=="Y"?h:0),o=b.drawMonth+(j=="M"?h:0);h=Math.min(b.selectedDay,this._getDaysInMonth(l,o))+(j=="D"?h:0);l=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(l,o,h)));b.selectedDay=l.getDate();b.drawMonth=b.selectedMonth=l.getMonth();b.drawYear=b.selectedYear=l.getFullYear();if(j=="M"||j=="Y")this._notifyChange(b)},_restrictMinMax:function(b,h){var j=this._getMinMaxDate(b,"min");b=this._getMinMaxDate(b,
-"max");h=j&&h<j?j:h;return h=b&&h>b?b:h},_notifyChange:function(b){var h=this._get(b,"onChangeMonthYear");if(h)h.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(b,h){return this._determineDate(b,this._get(b,h+"Date"),null)},_getDaysInMonth:function(b,h){return 32-this._daylightSavingAdjust(new Date(b,h,32)).getDate()},_getFirstDayOfMonth:function(b,
-h){return(new Date(b,h,1)).getDay()},_canAdjustMonth:function(b,h,j,l){var o=this._getNumberOfMonths(b);j=this._daylightSavingAdjust(new Date(j,l+(h<0?h:o[0]*o[1]),1));h<0&&j.setDate(this._getDaysInMonth(j.getFullYear(),j.getMonth()));return this._isInRange(b,j)},_isInRange:function(b,h){var j=this._getMinMaxDate(b,"min");b=this._getMinMaxDate(b,"max");return(!j||h.getTime()>=j.getTime())&&(!b||h.getTime()<=b.getTime())},_getFormatConfig:function(b){var h=this._get(b,"shortYearCutoff");h=typeof h!=
-"string"?h:(new Date).getFullYear()%100+parseInt(h,10);return{shortYearCutoff:h,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,h,j,l){if(!h){b.currentDay=b.selectedDay;b.currentMonth=b.selectedMonth;b.currentYear=b.selectedYear}h=h?typeof h=="object"?h:this._daylightSavingAdjust(new Date(l,j,h)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));
-return this.formatDate(this._get(b,"dateFormat"),h,this._getFormatConfig(b))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var h=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(h));if(b=="option"&&
-arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(h));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(h)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new c;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.13";window["DP_jQuery_"+e]=a})(jQuery);
-(function(a,d){var c={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},f={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},g=a.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,
-position:{my:"center",at:"center",collision:"fit",using:function(e){var i=a(this).css(e).offset().top;i<0&&a(this).css("top",e.top-i)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var e=this,i=e.options,b=i.title||"&#160;",h=a.ui.dialog.getTitleId(e.element),j=(e.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
-i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){if(i.closeOnEscape&&n.keyCode&&n.keyCode===a.ui.keyCode.ESCAPE){e.close(n);n.preventDefault()}}).attr({role:"dialog","aria-labelledby":h}).mousedown(function(n){e.moveToTop(false,n)});e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(j);var l=(e.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(j),
-o=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")}).click(function(n){e.close(n);return false}).appendTo(l);(e.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(o);a("<span></span>").addClass("ui-dialog-title").attr("id",
-h).html(b).prependTo(l);if(a.isFunction(i.beforeclose)&&!a.isFunction(i.beforeClose))i.beforeClose=i.beforeclose;l.find("*").add(l).disableSelection();i.draggable&&a.fn.draggable&&e._makeDraggable();i.resizable&&a.fn.resizable&&e._makeResizable();e._createButtons(i.buttons);e._isOpen=false;a.fn.bgiframe&&j.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;e.overlay&&e.overlay.destroy();e.uiDialog.hide();e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
-e.uiDialog.remove();e.originalTitle&&e.element.attr("title",e.originalTitle);return e},widget:function(){return this.uiDialog},close:function(e){var i=this,b,h;if(false!==i._trigger("beforeClose",e)){i.overlay&&i.overlay.destroy();i.uiDialog.unbind("keypress.ui-dialog");i._isOpen=false;if(i.options.hide)i.uiDialog.hide(i.options.hide,function(){i._trigger("close",e)});else{i.uiDialog.hide();i._trigger("close",e)}a.ui.dialog.overlay.resize();if(i.options.modal){b=0;a(".ui-dialog").each(function(){if(this!==
-i.uiDialog[0]){h=a(this).css("z-index");isNaN(h)||(b=Math.max(b,h))}});a.ui.dialog.maxZ=b}return i}},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var b=this,h=b.options;if(h.modal&&!e||!h.stack&&!h.modal)return b._trigger("focus",i);if(h.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=h.zIndex;if(b.overlay){a.ui.dialog.maxZ+=1;b.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}e={scrollTop:b.element.attr("scrollTop"),scrollLeft:b.element.attr("scrollLeft")};a.ui.dialog.maxZ+=
-1;b.uiDialog.css("z-index",a.ui.dialog.maxZ);b.element.attr(e);b._trigger("focus",i);return b},open:function(){if(!this._isOpen){var e=this,i=e.options,b=e.uiDialog;e.overlay=i.modal?new a.ui.dialog.overlay(e):null;e._size();e._position(i.position);b.show(i.show);e.moveToTop(true);i.modal&&b.bind("keypress.ui-dialog",function(h){if(h.keyCode===a.ui.keyCode.TAB){var j=a(":tabbable",this),l=j.filter(":first");j=j.filter(":last");if(h.target===j[0]&&!h.shiftKey){l.focus(1);return false}else if(h.target===
-l[0]&&h.shiftKey){j.focus(1);return false}}});a(e.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();e._isOpen=true;e._trigger("open");return e}},_createButtons:function(e){var i=this,b=false,h=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),j=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(h);i.uiDialog.find(".ui-dialog-buttonpane").remove();typeof e==="object"&&e!==null&&a.each(e,
-function(){return!(b=true)});if(b){a.each(e,function(l,o){o=a.isFunction(o)?{click:o,text:l}:o;var n=a('<button type="button"></button>').click(function(){o.click.apply(i.element[0],arguments)}).appendTo(j);a.each(o,function(k,m){if(k!=="click")k in g?n[k](m):n.attr(k,m)});a.fn.button&&n.button()});h.appendTo(i.uiDialog)}},_makeDraggable:function(){function e(l){return{position:l.position,offset:l.offset}}var i=this,b=i.options,h=a(document),j;i.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
-handle:".ui-dialog-titlebar",containment:"document",start:function(l,o){j=b.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");i._trigger("dragStart",l,e(o))},drag:function(l,o){i._trigger("drag",l,e(o))},stop:function(l,o){b.position=[o.position.left-h.scrollLeft(),o.position.top-h.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(j);i._trigger("dragStop",l,e(o));a.ui.dialog.overlay.resize()}})},_makeResizable:function(e){function i(l){return{originalPosition:l.originalPosition,
-originalSize:l.originalSize,position:l.position,size:l.size}}e=e===d?this.options.resizable:e;var b=this,h=b.options,j=b.uiDialog.css("position");e=typeof e==="string"?e:"n,e,s,w,se,sw,ne,nw";b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:b._minHeight(),handles:e,start:function(l,o){a(this).addClass("ui-dialog-resizing");b._trigger("resizeStart",l,i(o))},resize:function(l,o){b._trigger("resize",
-l,i(o))},stop:function(l,o){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();b._trigger("resizeStop",l,i(o));a.ui.dialog.overlay.resize()}}).css("position",j).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(e){var i=[],b=[0,0],h;if(e){if(typeof e==="string"||typeof e==="object"&&"0"in e){i=e.split?e.split(" "):
-[e[0],e[1]];if(i.length===1)i[1]=i[0];a.each(["left","top"],function(j,l){if(+i[j]===i[j]){b[j]=i[j];i[j]=l}});e={my:i.join(" "),at:i.join(" "),offset:b.join(" ")}}e=a.extend({},a.ui.dialog.prototype.options.position,e)}else e=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},e));h||this.uiDialog.hide()},_setOptions:function(e){var i=this,b={},h=false;a.each(e,function(j,l){i._setOption(j,l);
-if(j in c)h=true;if(j in f)b[j]=l});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(e,i){var b=this,h=b.uiDialog;switch(e){case "beforeclose":e="beforeClose";break;case "buttons":b._createButtons(i);break;case "closeText":b.uiDialogTitlebarCloseText.text(""+i);break;case "dialogClass":h.removeClass(b.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i);break;case "disabled":i?h.addClass("ui-dialog-disabled"):
-h.removeClass("ui-dialog-disabled");break;case "draggable":var j=h.is(":data(draggable)");j&&!i&&h.draggable("destroy");!j&&i&&b._makeDraggable();break;case "position":b._position(i);break;case "resizable":(j=h.is(":data(resizable)"))&&!i&&h.resizable("destroy");j&&typeof i==="string"&&h.resizable("option","handles",i);!j&&i!==false&&b._makeResizable(i);break;case "title":a(".ui-dialog-title",b.uiDialogTitlebar).html(""+(i||"&#160;"));break}a.Widget.prototype._setOption.apply(b,arguments)},_size:function(){var e=
-this.options,i,b,h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(e.minWidth>e.width)e.width=e.minWidth;i=this.uiDialog.css({height:"auto",width:e.width}).height();b=Math.max(0,e.minHeight-i);if(e.height==="auto")if(a.support.minHeight)this.element.css({minHeight:b,height:"auto"});else{this.uiDialog.show();e=this.element.css("height","auto").height();h||this.uiDialog.hide();this.element.height(Math.max(e,b))}else this.element.height(Math.max(e.height-
-i,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.13",uuid:0,maxZ:0,getTitleId:function(e){e=e.attr("id");if(!e){this.uuid+=1;e=this.uuid}return"ui-dialog-title-"+e},overlay:function(e){this.$el=a.ui.dialog.overlay.create(e)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),
-create:function(e){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1);a(document).bind("keydown.dialog-overlay",function(b){if(e.options.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){e.close(b);b.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var i=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
-height:this.height()});a.fn.bgiframe&&i.bgiframe();this.instances.push(i);return i},destroy:function(e){var i=a.inArray(e,this.instances);i!=-1&&this.oldInstances.push(this.instances.splice(i,1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");e.remove();var b=0;a.each(this.instances,function(){b=Math.max(b,this.css("z-index"))});this.maxZ=b},height:function(){var e,i;if(a.browser.msie&&a.browser.version<7){e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
-i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return e<i?a(window).height()+"px":e+"px"}else return a(document).height()+"px"},width:function(){var e,i;if(a.browser.msie&&a.browser.version<7){e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return e<i?a(window).width()+"px":e+"px"}else return a(document).width()+"px"},resize:function(){var e=a([]);a.each(a.ui.dialog.overlay.instances,
-function(){e=e.add(this)});e.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
-(function(a){a.ui=a.ui||{};var d=/left|center|right/,c=/top|center|bottom/,f=a.fn.position,g=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=a.extend({},e);var i=a(e.of),b=i[0],h=(e.collision||"flip").split(" "),j=e.offset?e.offset.split(" "):[0,0],l,o,n;if(b.nodeType===9){l=i.width();o=i.height();n={top:0,left:0}}else if(b.setTimeout){l=i.width();o=i.height();n={top:i.scrollTop(),left:i.scrollLeft()}}else if(b.preventDefault){e.at="left top";l=o=0;n={top:e.of.pageY,
-left:e.of.pageX}}else{l=i.outerWidth();o=i.outerHeight();n=i.offset()}a.each(["my","at"],function(){var k=(e[this]||"").split(" ");if(k.length===1)k=d.test(k[0])?k.concat(["center"]):c.test(k[0])?["center"].concat(k):["center","center"];k[0]=d.test(k[0])?k[0]:"center";k[1]=c.test(k[1])?k[1]:"center";e[this]=k});if(h.length===1)h[1]=h[0];j[0]=parseInt(j[0],10)||0;if(j.length===1)j[1]=j[0];j[1]=parseInt(j[1],10)||0;if(e.at[0]==="right")n.left+=l;else if(e.at[0]==="center")n.left+=l/2;if(e.at[1]==="bottom")n.top+=
-o;else if(e.at[1]==="center")n.top+=o/2;n.left+=j[0];n.top+=j[1];return this.each(function(){var k=a(this),m=k.outerWidth(),p=k.outerHeight(),q=parseInt(a.curCSS(this,"marginLeft",true))||0,s=parseInt(a.curCSS(this,"marginTop",true))||0,r=m+q+(parseInt(a.curCSS(this,"marginRight",true))||0),u=p+s+(parseInt(a.curCSS(this,"marginBottom",true))||0),v=a.extend({},n),w;if(e.my[0]==="right")v.left-=m;else if(e.my[0]==="center")v.left-=m/2;if(e.my[1]==="bottom")v.top-=p;else if(e.my[1]==="center")v.top-=
-p/2;v.left=Math.round(v.left);v.top=Math.round(v.top);w={left:v.left-q,top:v.top-s};a.each(["left","top"],function(x,z){a.ui.position[h[x]]&&a.ui.position[h[x]][z](v,{targetWidth:l,targetHeight:o,elemWidth:m,elemHeight:p,collisionPosition:w,collisionWidth:r,collisionHeight:u,offset:j,my:e.my,at:e.at})});a.fn.bgiframe&&k.bgiframe();k.offset(a.extend(v,{using:e.using}))})};a.ui.position={fit:{left:function(e,i){var b=a(window);b=i.collisionPosition.left+i.collisionWidth-b.width()-b.scrollLeft();e.left=
-b>0?e.left-b:Math.max(e.left-i.collisionPosition.left,e.left)},top:function(e,i){var b=a(window);b=i.collisionPosition.top+i.collisionHeight-b.height()-b.scrollTop();e.top=b>0?e.top-b:Math.max(e.top-i.collisionPosition.top,e.top)}},flip:{left:function(e,i){if(i.at[0]!=="center"){var b=a(window);b=i.collisionPosition.left+i.collisionWidth-b.width()-b.scrollLeft();var h=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,j=i.at[0]==="left"?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];e.left+=
-i.collisionPosition.left<0?h+j+l:b>0?h+j+l:0}},top:function(e,i){if(i.at[1]!=="center"){var b=a(window);b=i.collisionPosition.top+i.collisionHeight-b.height()-b.scrollTop();var h=i.my[1]==="top"?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,j=i.at[1]==="top"?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];e.top+=i.collisionPosition.top<0?h+j+l:b>0?h+j+l:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(e,i){if(/static/.test(a.curCSS(e,"position")))e.style.position="relative";var b=a(e),
-h=b.offset(),j=parseInt(a.curCSS(e,"top",true),10)||0,l=parseInt(a.curCSS(e,"left",true),10)||0;h={top:i.top-h.top+j,left:i.left-h.left+l};"using"in i?i.using.call(e,h):b.css(h)};a.fn.offset=function(e){var i=this[0];if(!i||!i.ownerDocument)return null;if(e)return this.each(function(){a.offset.setOffset(this,e)});return g.call(this)}}})(jQuery);
-(function(a,d){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
-this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(c){if(c===d)return this._value();this._setOption("value",c);return this},_setOption:function(c,f){if(c==="value"){this.options.value=f;this._refreshValue();this._value()===this.options.max&&this._trigger("complete")}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var c=this.options.value;if(typeof c!=="number")c=0;return Math.min(this.options.max,Math.max(this.min,c))},_percentage:function(){return 100*
-this._value()/this.options.max},_refreshValue:function(){var c=this.value(),f=this._percentage();if(this.oldValue!==c){this.oldValue=c;this._trigger("change")}this.valueDiv.toggle(c>this.min).toggleClass("ui-corner-right",c===this.options.max).width(f.toFixed(0)+"%");this.element.attr("aria-valuenow",c)}});a.extend(a.ui.progressbar,{version:"1.8.13"})})(jQuery);
-(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var d=this,c=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=c.values&&c.values.length||1,e=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
-this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);if(c.range){if(c.range===true){if(!c.values)c.values=[this._valueMin(),this._valueMin()];if(c.values.length&&c.values.length!==2)c.values=[c.values[0],c.values[0]]}this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(c.range==="min"||c.range==="max"?" ui-slider-range-"+c.range:""))}for(var i=f.length;i<g;i+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
-this.handles=f.add(a(e.join("")).appendTo(d.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(c.disabled)a(this).blur();else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",
-b)});this.handles.keydown(function(b){var h=true,j=a(this).data("index.ui-slider-handle"),l,o,n;if(!d.options.disabled){switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:h=false;if(!d._keySliding){d._keySliding=true;a(this).addClass("ui-state-active");l=d._start(b,j);if(l===false)return}break}n=d.options.step;l=d.options.values&&d.options.values.length?
-(o=d.values(j)):(o=d.value());switch(b.keyCode){case a.ui.keyCode.HOME:o=d._valueMin();break;case a.ui.keyCode.END:o=d._valueMax();break;case a.ui.keyCode.PAGE_UP:o=d._trimAlignValue(l+(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:o=d._trimAlignValue(l-(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(l===d._valueMax())return;o=d._trimAlignValue(l+n);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(l===d._valueMin())return;o=d._trimAlignValue(l-
-n);break}d._slide(b,j,o);return h}}).keyup(function(b){var h=a(this).data("index.ui-slider-handle");if(d._keySliding){d._keySliding=false;d._stop(b,h);d._change(b,h);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();
-return this},_mouseCapture:function(d){var c=this.options,f,g,e,i,b;if(c.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();f=this._normValueFromMouse({x:d.pageX,y:d.pageY});g=this._valueMax()-this._valueMin()+1;i=this;this.handles.each(function(h){var j=Math.abs(f-i.values(h));if(g>j){g=j;e=a(this);b=h}});if(c.range===true&&this.values(1)===c.min){b+=1;e=a(this.handles[b])}if(this._start(d,b)===false)return false;
-this._mouseSliding=true;i._handleIndex=b;e.addClass("ui-state-active").focus();c=e.offset();this._clickOffset=!a(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-c.left-e.width()/2,top:d.pageY-c.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(d,b,f);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(d){var c=
-this._normValueFromMouse({x:d.pageX,y:d.pageY});this._slide(d,this._handleIndex,c);return false},_mouseStop:function(d){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(d,this._handleIndex);this._change(d,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var c;if(this.orientation==="horizontal"){c=
-this.elementSize.width;d=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;d=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}c=d/c;if(c>1)c=1;if(c<0)c=0;if(this.orientation==="vertical")c=1-c;d=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+c*d)},_start:function(d,c){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);
-f.values=this.values()}return this._trigger("start",d,f)},_slide:function(d,c,f){var g;if(this.options.values&&this.options.values.length){g=this.values(c?0:1);if(this.options.values.length===2&&this.options.range===true&&(c===0&&f>g||c===1&&f<g))f=g;if(f!==this.values(c)){g=this.values();g[c]=f;d=this._trigger("slide",d,{handle:this.handles[c],value:f,values:g});this.values(c?0:1);d!==false&&this.values(c,f,true)}}else if(f!==this.value()){d=this._trigger("slide",d,{handle:this.handles[c],value:f});
-d!==false&&this.value(f)}},_stop:function(d,c){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);f.values=this.values()}this._trigger("stop",d,f)},_change:function(d,c){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);f.values=this.values()}this._trigger("change",d,f)}},value:function(d){if(arguments.length){this.options.value=
-this._trimAlignValue(d);this._refreshValue();this._change(null,0)}else return this._value()},values:function(d,c){var f,g,e;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(c);this._refreshValue();this._change(null,d)}else if(arguments.length)if(a.isArray(arguments[0])){f=this.options.values;g=arguments[0];for(e=0;e<f.length;e+=1){f[e]=this._trimAlignValue(g[e]);this._change(null,e)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(d):
-this.value();else return this._values()},_setOption:function(d,c){var f,g=0;if(a.isArray(this.options.values))g=this.options.values.length;a.Widget.prototype._setOption.apply(this,arguments);switch(d){case "disabled":if(c){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
-this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(f=0;f<g;f+=1)this._change(null,f);this._animateOff=false;break}},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d)},_values:function(d){var c,f;if(arguments.length){c=this.options.values[d];
-return c=this._trimAlignValue(c)}else{c=this.options.values.slice();for(f=0;f<c.length;f+=1)c[f]=this._trimAlignValue(c[f]);return c}},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var c=this.options.step>0?this.options.step:1,f=(d-this._valueMin())%c;alignValue=d-f;if(Math.abs(f)*2>=c)alignValue+=f>0?c:-c;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
-_refreshValue:function(){var d=this.options.range,c=this.options,f=this,g=!this._animateOff?c.animate:false,e,i={},b,h,j,l;if(this.options.values&&this.options.values.length)this.handles.each(function(o){e=(f.values(o)-f._valueMin())/(f._valueMax()-f._valueMin())*100;i[f.orientation==="horizontal"?"left":"bottom"]=e+"%";a(this).stop(1,1)[g?"animate":"css"](i,c.animate);if(f.options.range===true)if(f.orientation==="horizontal"){if(o===0)f.range.stop(1,1)[g?"animate":"css"]({left:e+"%"},c.animate);
-if(o===1)f.range[g?"animate":"css"]({width:e-b+"%"},{queue:false,duration:c.animate})}else{if(o===0)f.range.stop(1,1)[g?"animate":"css"]({bottom:e+"%"},c.animate);if(o===1)f.range[g?"animate":"css"]({height:e-b+"%"},{queue:false,duration:c.animate})}b=e});else{h=this.value();j=this._valueMin();l=this._valueMax();e=l!==j?(h-j)/(l-j)*100:0;i[f.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[g?"animate":"css"](i,c.animate);if(d==="min"&&this.orientation==="horizontal")this.range.stop(1,
-1)[g?"animate":"css"]({width:e+"%"},c.animate);if(d==="max"&&this.orientation==="horizontal")this.range[g?"animate":"css"]({width:100-e+"%"},{queue:false,duration:c.animate});if(d==="min"&&this.orientation==="vertical")this.range.stop(1,1)[g?"animate":"css"]({height:e+"%"},c.animate);if(d==="max"&&this.orientation==="vertical")this.range[g?"animate":"css"]({height:100-e+"%"},{queue:false,duration:c.animate})}}});a.extend(a.ui.slider,{version:"1.8.13"})})(jQuery);
-(function(a,d){function c(){return++g}function f(){return++e}var g=0,e=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(i,b){if(i=="selected")this.options.collapsible&&
-b==this.options.selected||this.select(b);else{this.options[i]=b;this._tabify()}},_tabId:function(i){return i.title&&i.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(i){return i.replace(/:/g,"\\:")},_cookie:function(){var i=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[i].concat(a.makeArray(arguments)))},_ui:function(i,b){return{tab:i,panel:b,index:this.anchors.index(i)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var i=
-a(this);i.html(i.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function b(r,u){r.css("display","");!a.support.opacity&&u.opacity&&r[0].style.removeAttribute("filter")}var h=this,j=this.options,l=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(r,u){var v=a(u).attr("href"),w=v.split("#")[0],x;if(w&&(w===location.toString().split("#")[0]||
-(x=a("base")[0])&&w===x.href)){v=u.hash;u.href=v}if(l.test(v))h.panels=h.panels.add(h.element.find(h._sanitizeSelector(v)));else if(v&&v!=="#"){a.data(u,"href.tabs",v);a.data(u,"load.tabs",v.replace(/#.*$/,""));v=h._tabId(u);u.href="#"+v;u=h.element.find("#"+v);if(!u.length){u=a(j.panelTemplate).attr("id",v).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(h.panels[r-1]||h.list);u.data("destroy.tabs",true)}h.panels=h.panels.add(u)}else j.disabled.push(r)});if(i){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
-this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(j.selected===d){location.hash&&this.anchors.each(function(r,u){if(u.hash==location.hash){j.selected=r;return false}});if(typeof j.selected!=="number"&&j.cookie)j.selected=parseInt(h._cookie(),10);if(typeof j.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)j.selected=
-this.lis.index(this.lis.filter(".ui-tabs-selected"));j.selected=j.selected||(this.lis.length?0:-1)}else if(j.selected===null)j.selected=-1;j.selected=j.selected>=0&&this.anchors[j.selected]||j.selected<0?j.selected:0;j.disabled=a.unique(j.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(r){return h.lis.index(r)}))).sort();a.inArray(j.selected,j.disabled)!=-1&&j.disabled.splice(a.inArray(j.selected,j.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
-if(j.selected>=0&&this.anchors.length){h.element.find(h._sanitizeSelector(h.anchors[j.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(j.selected).addClass("ui-tabs-selected ui-state-active");h.element.queue("tabs",function(){h._trigger("show",null,h._ui(h.anchors[j.selected],h.element.find(h._sanitizeSelector(h.anchors[j.selected].hash))[0]))});this.load(j.selected)}a(window).bind("unload",function(){h.lis.add(h.anchors).unbind(".tabs");h.lis=h.anchors=h.panels=null})}else j.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
-this.element[j.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");j.cookie&&this._cookie(j.selected,j.cookie);i=0;for(var o;o=this.lis[i];i++)a(o)[a.inArray(i,j.disabled)!=-1&&!a(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");j.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(j.event!=="mouseover"){var n=function(r,u){u.is(":not(.ui-state-disabled)")&&u.addClass("ui-state-"+r)},k=function(r,u){u.removeClass("ui-state-"+
-r)};this.lis.bind("mouseover.tabs",function(){n("hover",a(this))});this.lis.bind("mouseout.tabs",function(){k("hover",a(this))});this.anchors.bind("focus.tabs",function(){n("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var m,p;if(j.fx)if(a.isArray(j.fx)){m=j.fx[0];p=j.fx[1]}else m=p=j.fx;var q=p?function(r,u){a(r).closest("li").addClass("ui-tabs-selected ui-state-active");u.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",
-function(){b(u,p);h._trigger("show",null,h._ui(r,u[0]))})}:function(r,u){a(r).closest("li").addClass("ui-tabs-selected ui-state-active");u.removeClass("ui-tabs-hide");h._trigger("show",null,h._ui(r,u[0]))},s=m?function(r,u){u.animate(m,m.duration||"normal",function(){h.lis.removeClass("ui-tabs-selected ui-state-active");u.addClass("ui-tabs-hide");b(u,m);h.element.dequeue("tabs")})}:function(r,u){h.lis.removeClass("ui-tabs-selected ui-state-active");u.addClass("ui-tabs-hide");h.element.dequeue("tabs")};
-this.anchors.bind(j.event+".tabs",function(){var r=this,u=a(r).closest("li"),v=h.panels.filter(":not(.ui-tabs-hide)"),w=h.element.find(h._sanitizeSelector(r.hash));if(u.hasClass("ui-tabs-selected")&&!j.collapsible||u.hasClass("ui-state-disabled")||u.hasClass("ui-state-processing")||h.panels.filter(":animated").length||h._trigger("select",null,h._ui(this,w[0]))===false){this.blur();return false}j.selected=h.anchors.index(this);h.abort();if(j.collapsible)if(u.hasClass("ui-tabs-selected")){j.selected=
--1;j.cookie&&h._cookie(j.selected,j.cookie);h.element.queue("tabs",function(){s(r,v)}).dequeue("tabs");this.blur();return false}else if(!v.length){j.cookie&&h._cookie(j.selected,j.cookie);h.element.queue("tabs",function(){q(r,w)});h.load(h.anchors.index(this));this.blur();return false}j.cookie&&h._cookie(j.selected,j.cookie);if(w.length){v.length&&h.element.queue("tabs",function(){s(r,v)});h.element.queue("tabs",function(){q(r,w)});h.load(h.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
-a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(i){if(typeof i=="string")i=this.anchors.index(this.anchors.filter("[href$="+i+"]"));return i},destroy:function(){var i=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var b=
-a.data(this,"href.tabs");if(b)this.href=b;var h=a(this).unbind(".tabs");a.each(["href","load","cache"],function(j,l){h.removeData(l+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});i.cookie&&this._cookie(null,i.cookie);return this},add:function(i,
-b,h){if(h===d)h=this.anchors.length;var j=this,l=this.options;b=a(l.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,b));i=!i.indexOf("#")?i.replace("#",""):this._tabId(a("a",b)[0]);b.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var o=j.element.find("#"+i);o.length||(o=a(l.panelTemplate).attr("id",i).data("destroy.tabs",true));o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(h>=this.lis.length){b.appendTo(this.list);o.appendTo(this.list[0].parentNode)}else{b.insertBefore(this.lis[h]);
-o.insertBefore(this.panels[h])}l.disabled=a.map(l.disabled,function(n){return n>=h?++n:n});this._tabify();if(this.anchors.length==1){l.selected=0;b.addClass("ui-tabs-selected ui-state-active");o.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){j._trigger("show",null,j._ui(j.anchors[0],j.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[h],this.panels[h]));return this},remove:function(i){i=this._getIndex(i);var b=this.options,h=this.lis.eq(i).remove(),j=this.panels.eq(i).remove();
-if(h.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(i+(i+1<this.anchors.length?1:-1));b.disabled=a.map(a.grep(b.disabled,function(l){return l!=i}),function(l){return l>=i?--l:l});this._tabify();this._trigger("remove",null,this._ui(h.find("a")[0],j[0]));return this},enable:function(i){i=this._getIndex(i);var b=this.options;if(a.inArray(i,b.disabled)!=-1){this.lis.eq(i).removeClass("ui-state-disabled");b.disabled=a.grep(b.disabled,function(h){return h!=i});this._trigger("enable",null,
-this._ui(this.anchors[i],this.panels[i]));return this}},disable:function(i){i=this._getIndex(i);var b=this.options;if(i!=b.selected){this.lis.eq(i).addClass("ui-state-disabled");b.disabled.push(i);b.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[i],this.panels[i]))}return this},select:function(i){i=this._getIndex(i);if(i==-1)if(this.options.collapsible&&this.options.selected!=-1)i=this.options.selected;else return this;this.anchors.eq(i).trigger(this.options.event+".tabs");return this},
-load:function(i){i=this._getIndex(i);var b=this,h=this.options,j=this.anchors.eq(i)[0],l=a.data(j,"load.tabs");this.abort();if(!l||this.element.queue("tabs").length!==0&&a.data(j,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(i).addClass("ui-state-processing");if(h.spinner){var o=a("span",j);o.data("label.tabs",o.html()).html(h.spinner)}this.xhr=a.ajax(a.extend({},h.ajaxOptions,{url:l,success:function(n,k){b.element.find(b._sanitizeSelector(j.hash)).html(n);b._cleanup();h.cache&&a.data(j,
-"cache.tabs",true);b._trigger("load",null,b._ui(b.anchors[i],b.panels[i]));try{h.ajaxOptions.success(n,k)}catch(m){}},error:function(n,k){b._cleanup();b._trigger("load",null,b._ui(b.anchors[i],b.panels[i]));try{h.ajaxOptions.error(n,k,i,j)}catch(m){}}}));b.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
-url:function(i,b){this.anchors.eq(i).removeData("cache.tabs").data("load.tabs",b);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.13"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(i,b){var h=this,j=this.options,l=h._rotate||(h._rotate=function(o){clearTimeout(h.rotation);h.rotation=setTimeout(function(){var n=j.selected;h.select(++n<h.anchors.length?n:0)},i);o&&o.stopPropagation()});b=h._unrotate||(h._unrotate=!b?function(o){o.clientX&&
-h.rotate(null)}:function(){t=j.selected;l()});if(i){this.element.bind("tabsshow",l);this.anchors.bind(j.event+".tabs",b);l()}else{clearTimeout(h.rotation);this.element.unbind("tabsshow",l);this.anchors.unbind(j.event+".tabs",b);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
+/*! jQuery UI - v1.10.0 - 2013-01-17
+* http://jqueryui.com
+* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.slider.js, jquery.ui.sortable.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
+* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
+
+(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();if(t.active===!1&&t.collapsible===!0||!this.headers.length)t.active=!1,this.active=e();t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function u(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var n="datepicker",r=(new Date).getTime(),i;e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,o){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),u(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,o,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),u(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;u(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),s=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2]+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10)+r,u=parseInt(n[1],10)+r),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+r]=e})(jQuery);(function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove()}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];while(n&&(n=n.parentNode))n===document&&(i=!0);return!i&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[i.containment==="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment==="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment==="document"?0:e(window).scrollLeft())+e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?0:e(window).scrollTop())+(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(i.containment)&&i.containment.constructor!==Array){n=e(i.containment),r=n[0];if(!r)return;t=e(r).css("overflow")!=="hidden",this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else i.containment.constructor===Array&&(this.containment=i.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(!(u-v<m&&m<a+v&&f-v<y&&y<l+v||u-v<m&&m<a+v&&f-v<b&&b<l+v||u-v<g&&g<a+v&&f-v<y&&y<l+v||u-v<g&&g<a+v&&f-v<b&&b<l+v)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(r[0].style.zIndex,10)||0,e(r).each(function(e){this.style.zIndex=t+e}),this[0].style.zIndex=t+r.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);jQuery.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.0",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?u():s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);(function(e,t){e.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})})(jQuery);(function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this.range=e([]),r.range&&(r.range===!0&&(r.values?r.values.length&&r.values.length!==2?r.values=[r.values[0],r.values[0]]:e.isArray(r.values)&&(r.values=r.values.slice(0)):r.values=[this._valueMin(),this._valueMin()]),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1;for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._setOption("disabled",r.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o];for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[h].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")this._storedCSS[r]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/jquery.autosave.js elefant-elefant_1_3_3_beta/js/jquery.autosave.js
--- elefant-elefant_1_3_2_beta/js/jquery.autosave.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/jquery.autosave.js	2013-03-20 13:48:44.000000000 -0500
@@ -52,6 +52,7 @@
 (function ($) {
 	if ($.jStorage.get (autosave_key_name)) {
 		setTimeout (function () {
+			var vals = $.parseJSON (lzw_decode ($.jStorage.get (autosave_key_name)));
 			$('.autosave-notice').show ();
 		}, 100);
 	}
@@ -102,7 +103,8 @@
 
 						if (opts.form.elements[vals[i].name].getAttribute ('id') == 'webpage-body') {
 							// Set the contents of wysiwyg editor
-							$('#webpage-body').wysiwyg ('setContent', vals[i].value);
+							//$('#webpage-body').redactor ('code.set', vals[i].value);
+							$('#webpage-body').setCode (vals[i].value);
 						} else if (opts.form.elements[vals[i].name].getAttribute ('id') == 'code-body') {
 							// Set the contents of codemirror editor
 							_codemirror.setValue (vals[i].value);
@@ -152,7 +154,14 @@
 						// Unnamed fields can be ignored (submit buttons)
 						continue;
 					}
-					if (opts.form.elements[i].getAttribute ('id') == 'code-body') {
+					if (opts.form.elements[i].getAttribute ('id') == 'webpage-body') {
+						// Get the contents from Redactor editor
+						vals[i] = {
+							name: opts.form.elements[i].name,
+							//value: $('#webpage-body').redactor ('code.get')
+							value: $('#webpage-body').getCode ()
+						};
+					} else if (opts.form.elements[i].getAttribute ('id') == 'code-body') {
 						// Get the contents from codemirror editor
 						vals[i] = {
 							name: opts.form.elements[i].name,
Files elefant-elefant_1_3_2_beta/js/jquery.bgsave.js and elefant-elefant_1_3_3_beta/js/jquery.bgsave.js are identical
Files elefant-elefant_1_3_2_beta/js/jquery.cookie.js and elefant-elefant_1_3_3_beta/js/jquery.cookie.js are identical
Files elefant-elefant_1_3_2_beta/js/jquery.localize.min.js and elefant-elefant_1_3_3_beta/js/jquery.localize.min.js are identical
Files elefant-elefant_1_3_2_beta/js/jquery.password_strength.js and elefant-elefant_1_3_3_beta/js/jquery.password_strength.js are identical
Files elefant-elefant_1_3_2_beta/js/jquery.quickpager.js and elefant-elefant_1_3_3_beta/js/jquery.quickpager.js are identical
Files elefant-elefant_1_3_2_beta/js/jquery.verify_values.js and elefant-elefant_1_3_3_beta/js/jquery.verify_values.js are identical
Files elefant-elefant_1_3_2_beta/js/json2.js and elefant-elefant_1_3_3_beta/js/json2.js are identical
Files elefant-elefant_1_3_2_beta/js/jstorage.js and elefant-elefant_1_3_3_beta/js/jstorage.js are identical
Files elefant-elefant_1_3_2_beta/js/urlify.js and elefant-elefant_1_3_3_beta/js/urlify.js are identical
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.image.js elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.image.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.image.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.image.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,284 +0,0 @@
-/**
- * Controls: Image plugin
- *
- * Depends on jWYSIWYG
- */
-(function ($) {
-	"use strict";
-
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.image.js depends on $.wysiwyg";
-	}
-
-	if (!$.wysiwyg.controls) {
-		$.wysiwyg.controls = {};
-	}
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	$.wysiwyg.controls.image = {
-		groupIndex: 6,
-		visible: true,
-		exec: function () {
-			$.wysiwyg.controls.image.init(this);
-		},
-		tags: ["img"],
-		tooltip: "Insert image",	
-		init: function (Wysiwyg) {
-			var self = this, elements, adialog, dialog, formImageHtml, regexp, dialogReplacements, key, translation,
-				img = {
-					alt: "",
-					self: Wysiwyg.dom ? Wysiwyg.dom.getElement("img") : null, // link to element node
-					src: "http://",
-					title: ""
-				};
-
-			dialogReplacements = {
-				legend	: "Insert Image",
-				preview : "Preview",
-				url     : "URL",
-				title   : "Title",
-				description : "Description",
-				width   : "Width",
-				height  : "Height",
-				original : "Original W x H",
-				"float"	: "Float",
-				floatNone : "None",
-				floatLeft : "Left",
-				floatRight : "Right",
-				submit  : "Insert Image",
-				reset   : "Cancel",
-				fileManagerIcon : "Select file from server"
-			};
-
-			formImageHtml = '<form class="wysiwyg" id="wysiwyg-addImage"><fieldset>' +
-				'<div class="form-row"><span class="form-row-key">{preview}:</span><div class="form-row-value"><img src="" alt="{preview}" style="margin: 2px; padding:5px; max-width: 100%; overflow:hidden; max-height: 100px; border: 1px solid rgb(192, 192, 192);"/></div></div>' +
-				'<div class="form-row"><label for="name">{url}:</label><div class="form-row-value"><input type="text" name="src" value=""/>';
-			
-			if ($.wysiwyg.fileManager && $.wysiwyg.fileManager.ready) {
-				// Add the File Manager icon:
-				formImageHtml += '<div class="wysiwyg-fileManager" title="{fileManagerIcon}"/>';
-			}
-			
-			formImageHtml += '</div></div>' +
-				'<div class="form-row"><label for="name">{title}:</label><div class="form-row-value"><input type="text" name="imgtitle" value=""/></div></div>' +
-				'<div class="form-row"><label for="name">{description}:</label><div class="form-row-value"><input type="text" name="description" value=""/></div></div>' +
-				'<div class="form-row"><label for="name">{width} x {height}:</label><div class="form-row-value"><input type="text" name="width" value="" class="width-small"/> x <input type="text" name="height" value="" class="width-small"/></div></div>' +
-				'<div class="form-row"><label for="name">{original}:</label><div class="form-row-value"><input type="text" name="naturalWidth" value="" class="width-small" disabled="disabled"/> x ' +
-				'<input type="text" name="naturalHeight" value="" class="width-small" disabled="disabled"/></div></div>' +
-				'<div class="form-row"><label for="name">{float}:</label><div class="form-row-value"><select name="float">' + 
-				'<option value="">{floatNone}</option>' +
-				'<option value="left">{floatLeft}</option>' +
-				'<option value="right">{floatRight}</option></select></div></div>' +
-				'<div class="form-row form-row-last"><label for="name"></label><div class="form-row-value"><input type="submit" class="button" value="{submit}"/> ' +
-				'<input type="reset" value="{reset}"/></div></div></fieldset></form>';
-
-			for (key in dialogReplacements) {
-				if ($.wysiwyg.i18n) {
-					translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs.image");
-
-					if (translation === dialogReplacements[key]) { // if not translated search in dialogs 
-						translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs");
-					}
-
-					dialogReplacements[key] = translation;
-				}
-
-				regexp = new RegExp("{" + key + "}", "g");
-				formImageHtml = formImageHtml.replace(regexp, dialogReplacements[key]);
-			}
-
-			if (img.self) {
-				img.src    = img.self.src    ? img.self.src    : "";
-				img.alt    = img.self.alt    ? img.self.alt    : "";
-				img.title  = img.self.title  ? img.self.title  : "";
-				img.width  = img.self.width  ? img.self.width  : "";
-				img.height = img.self.height ? img.self.height : "";
-				img.styleFloat = $(img.self).css("float");
-			}
-			
-			adialog = new $.wysiwyg.dialog(Wysiwyg, {
-				"title"   : dialogReplacements.legend,
-				"content" : formImageHtml
-			});
-			
-			$(adialog).bind("afterOpen", function (e, dialog) {
-				dialog.find("form#wysiwyg-addImage").submit(function (e) {
-					e.preventDefault();
-					self.processInsert(dialog.container, Wysiwyg, img);
-					
-					adialog.close();
-					return false;
-				});
-				
-				// File Manager (select file):
-				if ($.wysiwyg.fileManager) {
-					$("div.wysiwyg-fileManager").bind("click", function () {
-						$.wysiwyg.fileManager.init(function (selected) {
-							dialog.find("input[name=src]").val(selected);
-							dialog.find("input[name=src]").trigger("change");
-						});
-					});
-				}
-
-				$("input:reset", dialog).click(function (e) {
-					adialog.close();
-					
-					return false;
-				});
-				
-				$("fieldset", dialog).click(function (e) {
-					e.stopPropagation();
-				});
-				
-				self.makeForm(dialog, img);
-			});
-			
-			adialog.open();
-			
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-		},
-
-		processInsert: function (context, Wysiwyg, img) {
-			var image,
-				url = $('input[name="src"]', context).val(),
-				title = $('input[name="imgtitle"]', context).val(),
-				description = $('input[name="description"]', context).val(),
-				width = $('input[name="width"]', context).val(),
-				height = $('input[name="height"]', context).val(),
-				styleFloat = $('select[name="float"]', context).val(),
-				styles = [],
-				style = "",
-				found,
-				baseUrl;
-
-			if (Wysiwyg.options.controlImage && Wysiwyg.options.controlImage.forceRelativeUrls) {
-				baseUrl = window.location.protocol + "//" + window.location.hostname;
-				if (0 === url.indexOf(baseUrl)) {
-					url = url.substr(baseUrl.length);
-				}
-			}
-
-			if (img.self) {
-				// to preserve all img attributes
-				$(img.self).attr("src", url)
-					.attr("title", title)
-					.attr("alt", description)
-					.css("float", styleFloat);
-
-				if (width.toString().match(/^[0-9]+(px|%)?$/)) {
-					$(img.self).css("width", width);
-				} else {
-					$(img.self).css("width", "");
-				}
-
-				if (height.toString().match(/^[0-9]+(px|%)?$/)) {
-					$(img.self).css("height", height);
-				} else {
-					$(img.self).css("height", "");
-				}
-				
-				Wysiwyg.saveContent();
-			} else {
-				found = width.toString().match(/^[0-9]+(px|%)?$/);
-				if (found) {
-					if (found[1]) {
-						styles.push("width: " + width + ";");
-					} else {
-						styles.push("width: " + width + "px;");
-					}
-				}
-
-				found = height.toString().match(/^[0-9]+(px|%)?$/);
-				if (found) {
-					if (found[1]) {
-						styles.push("height: " + height + ";");
-					} else {
-						styles.push("height: " + height + "px;");
-					}
-				}
-
-				if (styleFloat.length > 0) {
-					styles.push("float: " + styleFloat + ";");
-				}
-
-				if (styles.length > 0) {
-					style = ' style="' + styles.join(" ") + '"';
-				}
-
-				image = "<img src='" + url + "' title='" + title + "' alt='" + description + "'" + style + "/>";
-				Wysiwyg.insertHtml(image);
-			}
-		},
-
-		makeForm: function (form, img) {
-			form.find("input[name=src]").val(img.src);
-			form.find("input[name=imgtitle]").val(img.title);
-			form.find("input[name=description]").val(img.alt);
-			form.find('input[name="width"]').val(img.width);
-			form.find('input[name="height"]').val(img.height);
-			form.find('select[name="float"]').val(img.styleFloat);
-			form.find('img').attr("src", img.src);
-
-			form.find('img').bind("load", function () {
-				if (form.find('img').get(0).naturalWidth) {
-					form.find('input[name="naturalWidth"]').val(form.find('img').get(0).naturalWidth);
-					form.find('input[name="naturalHeight"]').val(form.find('img').get(0).naturalHeight);
-				} else if (form.find('img').attr("naturalWidth")) {
-					form.find('input[name="naturalWidth"]').val(form.find('img').attr("naturalWidth"));
-					form.find('input[name="naturalHeight"]').val(form.find('img').attr("naturalHeight"));
-				}
-			});
-
-			form.find("input[name=src]").bind("change", function () {
-				form.find('img').attr("src", this.value);
-			});
-
-			return form;
-		}
-	};
-
-	$.wysiwyg.insertImage = function (object, url, attributes) {
-		return object.each(function () {
-			var Wysiwyg = $(this).data("wysiwyg"),
-				image,
-				attribute;
-
-			if (!Wysiwyg) {
-				return this;
-			}
-
-			if (!url || url.length === 0) {
-				return this;
-			}
-
-			if ($.browser.msie) {
-				Wysiwyg.ui.focus();
-			}
-
-			if (attributes) {
-				Wysiwyg.editorDoc.execCommand("insertImage", false, "#jwysiwyg#");
-				image = Wysiwyg.getElementByAttributeValue("img", "src", "#jwysiwyg#");
-
-				if (image) {
-					image.src = url;
-
-					for (attribute in attributes) {
-						if (attributes.hasOwnProperty(attribute)) {
-							image.setAttribute(attribute, attributes[attribute]);
-						}
-					}
-				}
-			} else {
-				Wysiwyg.editorDoc.execCommand("insertImage", false, url);
-			}
-
-			Wysiwyg.saveContent();
-
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-
-			return this;
-		});
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.image2.js elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.image2.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.image2.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.image2.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,285 +0,0 @@
-/**
- * Controls: Image plugin
- *
- * Depends on jWYSIWYG
- */
-(function ($) {
-	"use strict";
-
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.image.js depends on $.wysiwyg";
-	}
-
-	if (!$.wysiwyg.controls) {
-		$.wysiwyg.controls = {};
-	}
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	$.wysiwyg.controls.image = {
-		groupIndex: 6,
-		visible: true,
-		exec: function () {
-			$.wysiwyg.controls.image.init(this);
-		},
-		tags: ["img"],
-		tooltip: "Insert image",
-		init: function (Wysiwyg) {
-			var self = this, elements, adialog, dialog, formImageHtml, regexp, dialogReplacements, key, translation,
-				img = {
-					alt: "",
-					self: Wysiwyg.dom ? Wysiwyg.dom.getElement("img") : null, // link to element node
-					src: "/css/files/spacer.gif",
-					title: ""
-				};
-
-			dialogReplacements = {
-				legend	: "Insert Image",
-				preview : "Preview",
-				url     : "URL",
-				title   : "Title",
-				description : "Alt text",
-				width   : "Width",
-				height  : "Height",
-				original : "Original W x H",
-				"float"	: "Align",
-				floatNone : "None",
-				floatLeft : "Left",
-				floatRight : "Right",
-				submit  : "Insert Image",
-				reset   : "Cancel",
-				fileManagerIcon : "Select file from server"
-			};
-
-			formImageHtml = '<form class="wysiwyg" id="wysiwyg-addImage"><!-- fieldset -->' +
-				'<div class="form-row"><span class="form-row-key">{preview}:</span><div class="form-row-value"><img src="" alt="{preview}" style="margin: 2px; padding:5px; max-width: 100%; overflow:hidden; max-height: 100px; border: 1px solid rgb(192, 192, 192);"/></div></div>' +
-				'<div class="form-row"><label for="name">{url}:</label><div class="form-row-value"><input type="text" name="src" value=""/>';
-			
-			if ($.wysiwyg.fileManager && $.wysiwyg.fileManager.ready) {
-				// Add the File Manager icon:
-				formImageHtml += '<div class="wysiwyg-fileManager" title="{fileManagerIcon}"/>';
-			}
-			
-			formImageHtml += '</div></div>' +
-				//'<div class="form-row"><label for="name">{title}:</label><div class="form-row-value"><input type="text" name="imgtitle" value=""/></div></div>' +
-				'<div class="form-row"><label for="name">{description}:</label><div class="form-row-value"><input type="text" name="description" value=""/></div></div>' +
-				'<div class="form-row"><label for="name">{width} x {height}:</label><div class="form-row-value"><input type="text" name="width" value="" class="width-small"/> x <input type="text" name="height" value="" class="width-small"/></div></div>' +
-				'<div class="form-row"><label for="name">{original}:</label><div class="form-row-value"><input type="text" name="naturalWidth" value="" class="width-small" disabled="disabled"/> x ' +
-				'<input type="text" name="naturalHeight" value="" class="width-small" disabled="disabled"/></div></div>' +
-				'<div class="form-row"><label for="name">{float}:</label><div class="form-row-value"><select name="float">' + 
-				'<option value="">{floatNone}</option>' +
-				'<option value="left">{floatLeft}</option>' +
-				'<option value="right">{floatRight}</option></select></div></div>' +
-				'<div class="form-row form-row-last"><label for="name"></label><div class="form-row-value"><input type="submit" class="button" value="{submit}"/> ' +
-				'<!-- input type="reset" value="{reset}"/ --></div></div><!-- /fieldset --><br /></form>';
-
-			for (key in dialogReplacements) {
-				if ($.wysiwyg.i18n) {
-					translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs.image");
-
-					if (translation === dialogReplacements[key]) { // if not translated search in dialogs 
-						translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs");
-					}
-
-					dialogReplacements[key] = translation;
-				}
-
-				regexp = new RegExp("{" + key + "}", "g");
-				formImageHtml = formImageHtml.replace(regexp, dialogReplacements[key]);
-			}
-
-			if (img.self) {
-				img.src    = img.self.src    ? img.self.src    : "";
-				img.alt    = img.self.alt    ? img.self.alt    : "";
-				img.title  = img.self.title  ? img.self.title  : "";
-				img.width  = img.self.width  ? img.self.width  : "";
-				img.height = img.self.height ? img.self.height : "";
-				img.styleFloat = $(img.self).css("float");
-			}
-			
-			adialog = new $.wysiwyg.dialog(Wysiwyg, {
-				"title"   : dialogReplacements.legend,
-				"content" : formImageHtml
-			});
-			
-			$(adialog).bind("afterOpen", function (e, dialog) {
-				dialog.find("form#wysiwyg-addImage").submit(function (e) {
-					e.preventDefault();
-					self.processInsert(dialog.container, Wysiwyg, img);
-					
-					adialog.close();
-					return false;
-				});
-				
-				// File Manager (select file):
-				if ($.wysiwyg.fileManager) {
-					$("div.wysiwyg-fileManager").bind("click", function () {
-						$.wysiwyg.fileManager.init(function (selected) {
-							dialog.find("input[name=src]").val(selected);
-							dialog.find("input[name=src]").trigger("change");
-						});
-					});
-				}
-
-				$("input:reset", dialog).click(function (e) {
-					adialog.close();
-					
-					return false;
-				});
-				
-				$("fieldset", dialog).click(function (e) {
-					e.stopPropagation();
-				});
-				
-				self.makeForm(dialog, img);
-			});
-			
-			adialog.open();
-			
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-		},
-
-		processInsert: function (context, Wysiwyg, img) {
-			var image,
-				url = $('input[name="src"]', context).val(),
-				//title = $('input[name="imgtitle"]', context).val(),
-				description = $('input[name="description"]', context).val(),
-				width = $('input[name="width"]', context).val(),
-				height = $('input[name="height"]', context).val(),
-				styleFloat = $('select[name="float"]', context).val(),
-				styles = [],
-				style = "",
-				found,
-				baseUrl;
-
-			if (Wysiwyg.options.controlImage && Wysiwyg.options.controlImage.forceRelativeUrls) {
-				baseUrl = window.location.protocol + "//" + window.location.hostname;
-				if (0 === url.indexOf(baseUrl)) {
-					url = url.substr(baseUrl.length);
-				}
-			}
-
-			if (img.self) {
-				// to preserve all img attributes
-				$(img.self).attr("src", url)
-					//.attr("title", title)
-					.attr("alt", description)
-					.css("float", styleFloat);
-
-				if (width.toString().match(/^[0-9]+(px|%)?$/)) {
-					$(img.self).css("width", width);
-				} else {
-					$(img.self).css("width", "");
-				}
-
-				if (height.toString().match(/^[0-9]+(px|%)?$/)) {
-					$(img.self).css("height", height);
-				} else {
-					$(img.self).css("height", "");
-				}
-				
-				Wysiwyg.saveContent();
-			} else {
-				found = width.toString().match(/^[0-9]+(px|%)?$/);
-				if (found) {
-					if (found[1]) {
-						styles.push("width: " + width + ";");
-					} else {
-						styles.push("width: " + width + "px;");
-					}
-				}
-
-				found = height.toString().match(/^[0-9]+(px|%)?$/);
-				if (found) {
-					if (found[1]) {
-						styles.push("height: " + height + ";");
-					} else {
-						styles.push("height: " + height + "px;");
-					}
-				}
-
-				if (styleFloat.length > 0) {
-					styles.push("float: " + styleFloat + ";");
-				}
-
-				if (styles.length > 0) {
-					style = ' style="' + styles.join(" ") + '"';
-				}
-
-				//image = "<img src='" + url + "' title='" + title + "' alt='" + description + "'" + style + "/>";
-				image = "<img src='" + url + "' alt='" + description + "'" + style + "/>";
-				Wysiwyg.insertHtml(image);
-			}
-		},
-
-		makeForm: function (form, img) {
-			form.find("input[name=src]").val(img.src);
-			//form.find("input[name=imgtitle]").val(img.title);
-			form.find("input[name=description]").val(img.alt);
-			form.find('input[name="width"]').val(img.width);
-			form.find('input[name="height"]').val(img.height);
-			form.find('select[name="float"]').val(img.styleFloat);
-			form.find('img').attr("src", img.src);
-
-			form.find('img').bind("load", function () {
-				if (form.find('img').get(0).naturalWidth) {
-					form.find('input[name="naturalWidth"]').val(form.find('img').get(0).naturalWidth);
-					form.find('input[name="naturalHeight"]').val(form.find('img').get(0).naturalHeight);
-				} else if (form.find('img').attr("naturalWidth")) {
-					form.find('input[name="naturalWidth"]').val(form.find('img').attr("naturalWidth"));
-					form.find('input[name="naturalHeight"]').val(form.find('img').attr("naturalHeight"));
-				}
-			});
-
-			form.find("input[name=src]").bind("change", function () {
-				form.find('img').attr("src", this.value);
-			});
-
-			return form;
-		}
-	};
-
-	$.wysiwyg.insertImage = function (object, url, attributes) {
-		return object.each(function () {
-			var Wysiwyg = $(this).data("wysiwyg"),
-				image,
-				attribute;
-
-			if (!Wysiwyg) {
-				return this;
-			}
-
-			if (!url || url.length === 0) {
-				return this;
-			}
-
-			if ($.browser.msie) {
-				Wysiwyg.ui.focus();
-			}
-
-			if (attributes) {
-				Wysiwyg.editorDoc.execCommand("insertImage", false, "#jwysiwyg#");
-				image = Wysiwyg.getElementByAttributeValue("img", "src", "#jwysiwyg#");
-
-				if (image) {
-					image.src = url;
-
-					for (attribute in attributes) {
-						if (attributes.hasOwnProperty(attribute)) {
-							image.setAttribute(attribute, attributes[attribute]);
-						}
-					}
-				}
-			} else {
-				Wysiwyg.editorDoc.execCommand("insertImage", false, url);
-			}
-
-			Wysiwyg.saveContent();
-
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-
-			return this;
-		});
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.link.js elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.link.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.link.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.link.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,249 +0,0 @@
-/**
- * Controls: Link plugin
- *
- * Depends on jWYSIWYG
- *
- * By: Esteban Beltran (academo) <sergies@gmail.com>
- */
-(function ($) {
-	"use strict";
-
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.link.js depends on $.wysiwyg";
-	}
-
-	if (!$.wysiwyg.controls) {
-		$.wysiwyg.controls = {};
-	}
-
-	/*
-	* Wysiwyg namespace: public properties and methods
-	*/
-	$.wysiwyg.controls.link = {
-		init: function (Wysiwyg) {
-			var self = this, elements, dialog, url, a, selection,
-				formLinkHtml, dialogReplacements, key, translation, regexp,
-				baseUrl, img;
-
-			dialogReplacements = {
-				legend: "Insert Link",
-				url   : "Link URL",
-				title : "Link Title",
-				target: "Link Target",
-				submit: "Insert Link",
-				reset: "Cancel"
-			};
-
-			formLinkHtml = '<form class="wysiwyg"><fieldset><legend>{legend}</legend>' +
-				'<label>{url}: <input type="text" name="linkhref" value=""/></label>' +
-				'<label>{title}: <input type="text" name="linktitle" value=""/></label>' +
-				'<label>{target}: <input type="text" name="linktarget" value=""/></label>' +
-				'<input type="submit" class="button" value="{submit}"/> ' +
-				'<input type="reset" value="{reset}"/></fieldset></form>';
-
-			for (key in dialogReplacements) {
-				if ($.wysiwyg.i18n) {
-					translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs.link");
-
-					if (translation === dialogReplacements[key]) { // if not translated search in dialogs 
-						translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs");
-					}
-
-					dialogReplacements[key] = translation;
-				}
-
-				regexp = new RegExp("{" + key + "}", "g");
-				formLinkHtml = formLinkHtml.replace(regexp, dialogReplacements[key]);
-			}
-
-			a = {
-				self: Wysiwyg.dom.getElement("a"), // link to element node
-				href: "http://",
-				title: "",
-				target: ""
-			};
-
-			if (a.self) {
-				a.href = a.self.href ? a.self.href : a.href;
-				a.title = a.self.title ? a.self.title : "";
-				a.target = a.self.target ? a.self.target : "";
-			}
-
-			if ($.fn.dialog) {
-				elements = $(formLinkHtml);
-				elements.find("input[name=linkhref]").val(a.href);
-				elements.find("input[name=linktitle]").val(a.title);
-				elements.find("input[name=linktarget]").val(a.target);
-
-				if ($.browser.msie) {
-					try {
-						dialog = elements.appendTo(Wysiwyg.editorDoc.body);
-					} catch (err) {
-						dialog = elements.appendTo("body");
-					}
-				} else {
-					dialog = elements.appendTo("body");
-				}
-
-				dialog.dialog({
-					modal: true,
-					open: function (ev, ui) {
-						$("input:submit", dialog).click(function (e) {
-							e.preventDefault();
-
-							var url = $('input[name="linkhref"]', dialog).val(),
-								title = $('input[name="linktitle"]', dialog).val(),
-								target = $('input[name="linktarget"]', dialog).val(),
-								baseUrl,
-								img;
-
-							if (Wysiwyg.options.controlLink.forceRelativeUrls) {
-								baseUrl = window.location.protocol + "//" + window.location.hostname;
-								if (0 === url.indexOf(baseUrl)) {
-									url = url.substr(baseUrl.length);
-								}
-							}
-
-							if (a.self) {
-								if ("string" === typeof (url)) {
-									if (url.length > 0) {
-										// to preserve all link attributes
-										$(a.self).attr("href", url).attr("title", title).attr("target", target);
-									} else {
-										$(a.self).replaceWith(a.self.innerHTML);
-									}
-								}
-							} else {
-								if ($.browser.msie) {
-									Wysiwyg.ui.returnRange();
-								}
-
-								//Do new link element
-								selection = Wysiwyg.getRangeText();
-								img = Wysiwyg.dom.getElement("img");
-
-								if ((selection && selection.length > 0) || img) {
-									if ($.browser.msie) {
-										Wysiwyg.ui.focus();
-									}
-
-									if ("string" === typeof (url)) {
-										if (url.length > 0) {
-											Wysiwyg.editorDoc.execCommand("createLink", false, url);
-										} else {
-											Wysiwyg.editorDoc.execCommand("unlink", false, null);
-										}
-									}
-
-									a.self = Wysiwyg.dom.getElement("a");
-
-									$(a.self).attr("href", url).attr("title", title);
-
-									/**
-									 * @url https://github.com/akzhan/jwysiwyg/issues/16
-									 */
-									$(a.self).attr("target", target);
-								} else if (Wysiwyg.options.messages.nonSelection) {
-									window.alert(Wysiwyg.options.messages.nonSelection);
-								}
-							}
-
-							Wysiwyg.saveContent();
-
-							$(dialog).dialog("close");
-						});
-						$("input:reset", dialog).click(function (e) {
-							e.preventDefault();
-							$(dialog).dialog("close");
-						});
-					},
-					close: function (ev, ui) {
-						dialog.dialog("destroy");
-						dialog.remove();
-					}
-				});
-			} else {
-				if (a.self) {
-					url = window.prompt("URL", a.href);
-
-					if (Wysiwyg.options.controlLink.forceRelativeUrls) {
-						baseUrl = window.location.protocol + "//" + window.location.hostname;
-						if (0 === url.indexOf(baseUrl)) {
-							url = url.substr(baseUrl.length);
-						}
-					}
-
-					if ("string" === typeof (url)) {
-						if (url.length > 0) {
-							$(a.self).attr("href", url);
-						} else {
-							$(a.self).replaceWith(a.self.innerHTML);
-						}
-					}
-				} else {
-					//Do new link element
-					selection = Wysiwyg.getRangeText();
-					img = Wysiwyg.dom.getElement("img");
-
-					if ((selection && selection.length > 0) || img) {
-						if ($.browser.msie) {
-							Wysiwyg.ui.focus();
-							Wysiwyg.editorDoc.execCommand("createLink", true, null);
-						} else {
-							url = window.prompt(dialogReplacements.url, a.href);
-
-							if (Wysiwyg.options.controlLink.forceRelativeUrls) {
-								baseUrl = window.location.protocol + "//" + window.location.hostname;
-								if (0 === url.indexOf(baseUrl)) {
-									url = url.substr(baseUrl.length);
-								}
-							}
-
-							if ("string" === typeof (url)) {
-								if (url.length > 0) {
-									Wysiwyg.editorDoc.execCommand("createLink", false, url);
-								} else {
-									Wysiwyg.editorDoc.execCommand("unlink", false, null);
-								}
-							}
-						}
-					} else if (Wysiwyg.options.messages.nonSelection) {
-						window.alert(Wysiwyg.options.messages.nonSelection);
-					}
-				}
-
-				Wysiwyg.saveContent();
-			}
-
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-		}
-	};
-
-	$.wysiwyg.createLink = function (object, url) {
-		return object.each(function () {
-			var oWysiwyg = $(this).data("wysiwyg"),
-				selection;
-
-			if (!oWysiwyg) {
-				return this;
-			}
-
-			if (!url || url.length === 0) {
-				return this;
-			}
-
-			selection = oWysiwyg.getRangeText();
-
-			if (selection && selection.length > 0) {
-				if ($.browser.msie) {
-					oWysiwyg.ui.focus();
-				}
-				oWysiwyg.editorDoc.execCommand("unlink", false, null);
-				oWysiwyg.editorDoc.execCommand("createLink", false, url);
-			} else if (oWysiwyg.options.messages.nonSelection) {
-				window.alert(oWysiwyg.options.messages.nonSelection);
-			}
-			return this;
-		});
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.link2.js elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.link2.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.link2.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.link2.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,206 +0,0 @@
-/**
- * Controls: Link plugin
- *
- * Depends on jWYSIWYG
- *
- * By: Esteban Beltran (academo) <sergies@gmail.com>
- */
-(function ($) {
-	"use strict";
-
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.link.js depends on $.wysiwyg";
-	}
-
-	if (!$.wysiwyg.controls) {
-		$.wysiwyg.controls = {};
-	}
-
-	/*
-	* Wysiwyg namespace: public properties and methods
-	*/
-	$.wysiwyg.controls.link = {
-		init: function (Wysiwyg) {
-			var self = this, elements, dialog, url, a, selection,
-				formLinkHtml, dialogReplacements, key, translation, regexp,
-				baseUrl, img;
-
-			dialogReplacements = {
-				legend: "Insert Link",
-				select: "Link to page",
-				url   : "Or paste link",
-				title : "Link Title",
-				target: "Link Target",
-				submit: "Insert",
-				reset: "Cancel"
-			};
-
-			formLinkHtml = '<form class="wysiwyg"><!-- <fieldset>legend>{legend}</legend -->' +
-				'<label>{select}: <select name="innerlink" id="innerlink"><option value="">- SELECT -</option></select></label>' +
-				'<br /><br /><label>{url}: <input type="text" name="linkhref" id="linkhref" value="" size="30" style="width: 270px" /></label>' +
-				'<div class="wysiwyg-fileManager" title="Browse..." style="float: left; margin-top: -20px; margin-left: 380px" />' +
-				//'<label>{title}: <input type="text" name="linktitle" value=""/></label>' +
-				//'<label>{target}: <input type="text" name="linktarget" value=""/></label>' +
-				'<br /><br /><input type="submit" class="button" value="{submit}" id="link-dialog-submit" /> ' +
-				'<!-- <input type="reset" value="{reset}"/></fieldset> --></form>';
-
-			for (key in dialogReplacements) {
-				if ($.wysiwyg.i18n) {
-					translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs.link");
-
-					if (translation === dialogReplacements[key]) { // if not translated search in dialogs 
-						translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs");
-					}
-
-					dialogReplacements[key] = translation;
-				}
-
-				regexp = new RegExp("{" + key + "}", "g");
-				formLinkHtml = formLinkHtml.replace(regexp, dialogReplacements[key]);
-			}
-
-			a = {
-				self: Wysiwyg.dom.getElement("a"), // link to element node
-				href: "http://"
-			};
-
-			if (a.self) {
-				a.href = a.self.href ? a.self.href : a.href;
-				baseUrl = window.location.protocol + "//" + window.location.hostname;
-				if (0 === a.href.indexOf(baseUrl)) {
-					a.href = a.href.substr(baseUrl.length);
-				}
-			}
-			
-			formLinkHtml = formLinkHtml.replace ('id="linkhref" value=""', 'id="linkhref" value="' + a.href + '"');
-
-			$.getJSON ('/admin/wysiwyg/links', function (res) {
-				var link, s = $('#innerlink');
-
-				s.change (function () {
-					var val = $(this).val (), l = $('#linkhref');
-					if (val.length != '' && l.val () == '') {
-						l.val (val);
-					}
-				});
-
-				for (var i = 0; i < res.length; i++) {
-					link = res[i];
-					s.append ('<option value="' + link.url + '">' + link.title + '</option>');
-				}
-			});
-
-			dialog = new $.wysiwyg.dialog (Wysiwyg, {
-				title: dialogReplacements.legend,
-				content: formLinkHtml,
-				open: function (ev, ui) {
-					$('div.wysiwyg-fileManager').bind('click', function () {
-						$.wysiwyg.fileManager.init(function (selected) {
-							$('#linkhref').val(selected);
-							$('#linkhref').trigger('change');
-						});
-					});
-
-					$("#link-dialog-submit").click(function (e) {
-						e.preventDefault();
-
-						var url = $('input[name="linkhref"]').val(),
-							inner = $('select[name="innerlink"]').val (),
-							baseUrl,
-							img;
-						
-						url = (inner.length > 0) ? inner : url;
-
-						if (Wysiwyg.options.controlLink.forceRelativeUrls) {
-							baseUrl = window.location.protocol + "//" + window.location.hostname;
-							if (0 === url.indexOf(baseUrl)) {
-								url = url.substr(baseUrl.length);
-							}
-						}
-
-						if (a.self) {
-							if ("string" === typeof (url)) {
-								if (url.length > 0) {
-									// to preserve all link attributes
-									$(a.self).attr("href", url);
-								} else {
-									$(a.self).replaceWith(a.self.innerHTML);
-								}
-							}
-						} else {
-							if ($.browser.msie) {
-								Wysiwyg.ui.returnRange();
-							}
-
-							//Do new link element
-							selection = Wysiwyg.getRangeText();
-							img = Wysiwyg.dom.getElement("img");
-
-							if ((selection && selection.length > 0) || img) {
-								if ($.browser.msie) {
-									Wysiwyg.ui.focus();
-								}
-
-								if ("string" === typeof (url)) {
-									if (url.length > 0) {
-										Wysiwyg.editorDoc.execCommand("createLink", false, url);
-									} else {
-										Wysiwyg.editorDoc.execCommand("unlink", false, null);
-									}
-								}
-
-								a.self = Wysiwyg.dom.getElement("a");
-
-								$(a.self).attr("href", url);
-							} else if (Wysiwyg.options.messages.nonSelection) {
-								window.alert(Wysiwyg.options.messages.nonSelection);
-							}
-						}
-
-						Wysiwyg.saveContent();
-
-						dialog.close ();
-					});
-					$("input:reset", dialog).click(function (e) {
-						e.preventDefault();
-						dialog.close ();
-					});
-				},
-				close: function (ev, ui) {
-					dialog = null;
-				}
-			});
-			dialog.open ();
-
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-		}
-	};
-
-	$.wysiwyg.createLink = function (object, url) {
-		return object.each(function () {
-			var oWysiwyg = $(this).data("wysiwyg"),
-				selection;
-
-			if (!oWysiwyg) {
-				return this;
-			}
-
-			if (!url || url.length === 0) {
-				return this;
-			}
-
-			selection = oWysiwyg.getRangeText();
-
-			if (selection && selection.length > 0) {
-				if ($.browser.msie) {
-					oWysiwyg.ui.focus();
-				}
-				oWysiwyg.editorDoc.execCommand("unlink", false, null);
-				oWysiwyg.editorDoc.execCommand("createLink", false, url);
-			} else if (oWysiwyg.options.messages.nonSelection) {
-				window.alert(oWysiwyg.options.messages.nonSelection);
-			}
-			return this;
-		});
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.table.js elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.table.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/controls/wysiwyg.table.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/controls/wysiwyg.table.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,129 +0,0 @@
-/**
- * Controls: Table plugin
- * 
- * Depends on jWYSIWYG
- */
-(function ($) {
-	"use strict";
-
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.table.js depends on $.wysiwyg";
-	}
-
-	if (!$.wysiwyg.controls) {
-		$.wysiwyg.controls = {};
-	}
-
-	var insertTable = function (colCount, rowCount, filler) {
-		if (isNaN(rowCount) || isNaN(colCount) || rowCount === null || colCount === null) {
-			return;
-		}
-
-		var i, j, html = ['<table border="1" style="width: 100%;"><tbody>'];
-
-		colCount = parseInt(colCount, 10);
-		rowCount = parseInt(rowCount, 10);
-
-		if (filler === null) {
-			filler = "&nbsp;";
-		}
-		filler = "<td>" + filler + "</td>";
-
-		for (i = rowCount; i > 0; i -= 1) {
-			html.push("<tr>");
-			for (j = colCount; j > 0; j -= 1) {
-				html.push(filler);
-			}
-			html.push("</tr>");
-		}
-		html.push("</tbody></table>");
-
-		return this.insertHtml(html.join(""));
-	};
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	$.wysiwyg.controls.table = function (Wysiwyg) {
-		var adialog, dialog, colCount, rowCount, formTableHtml, dialogReplacements, key, translation, regexp;
-
-		dialogReplacements = {
-			legend: "Insert table",
-			cols  : "Count of columns",
-			rows  : "Count of rows",
-			submit: "Insert table",
-			reset: "Cancel"
-		};
-
-		formTableHtml = '<form class="wysiwyg" id="wysiwyg-tableInsert"><fieldset><legend>{legend}</legend>' +
-			'<label>{cols}: <input type="text" name="colCount" value="3" /></label><br/>' +
-			'<label>{rows}: <input type="text" name="rowCount" value="3" /></label><br/>' +
-			'<input type="submit" class="button" value="{submit}"/> ' +
-			'<input type="reset" value="{reset}"/></fieldset></form>';
-		
-		for (key in dialogReplacements) {
-			if ($.wysiwyg.i18n) {
-				translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs.table");
-
-				if (translation === dialogReplacements[key]) { // if not translated search in dialogs 
-					translation = $.wysiwyg.i18n.t(dialogReplacements[key], "dialogs");
-				}
-
-				dialogReplacements[key] = translation;
-			}
-
-			regexp = new RegExp("{" + key + "}", "g");
-			formTableHtml = formTableHtml.replace(regexp, dialogReplacements[key]);
-		}
-
-		if (!Wysiwyg.insertTable) {
-			Wysiwyg.insertTable = insertTable;
-		}
-
-		adialog = new $.wysiwyg.dialog(Wysiwyg, {
-			"title"   : dialogReplacements.legend,
-			"content" : formTableHtml,
-			"open"    : function (e, dialog) {
-				dialog.find("form#wysiwyg-tableInsert").submit(function (e) {
-					e.preventDefault();
-					rowCount = dialog.find("input[name=rowCount]").val();
-					colCount = dialog.find("input[name=colCount]").val();
-
-					Wysiwyg.insertTable(colCount, rowCount, Wysiwyg.defaults.tableFiller);
-
-					adialog.close();
-					return false;
-				});
-
-				dialog.find("input:reset").click(function (e) {
-					e.preventDefault();
-					adialog.close();
-					return false;
-				});
-			}
-		});
-		
-		adialog.open();
-
-		$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-	};
-
-	$.wysiwyg.insertTable = function (object, colCount, rowCount, filler) {
-		return object.each(function () {
-			var Wysiwyg = $(this).data("wysiwyg");
-
-			if (!Wysiwyg.insertTable) {
-				Wysiwyg.insertTable = insertTable;
-			}
-
-			if (!Wysiwyg) {
-				return this;
-			}
-
-			Wysiwyg.insertTable(colCount, rowCount, filler);
-			$(Wysiwyg.editorDoc).trigger("editorRefresh.wysiwyg");
-
-			return this;
-		});
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.cs.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.cs.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.cs.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.cs.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,116 +0,0 @@
-/**
- * Internationalization: czech language
- *
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: deepj on github.com
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.cs.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.cs.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.cs = {
-		controls: {
-			"Bold": "Tučné",
-			"Colorpicker": "Výběr barvy",
-			"Copy": "Kopírovat",
-			"Create link": "Vytvořit odkaz",
-			"Cut": "Vyjmout",
-			"Decrease font size": "Zmenšit velikost písma",
-			"Fullscreen": "Celá obrazovka",
-			"Header 1": "Nadpis 1",
-			"Header 2": "Nadpis 2",
-			"Header 3": "Nadpis 3",
-			"View source code": "Zobrazit zdrojový kód",
-			"Increase font size": "Zvětšit velikost písma",
-			"Indent": "Zvětšit odsazení",
-			"Insert Horizontal Rule": "Vložit horizontální čáru",
-			"Insert image": "Vložit obrázek",
-			"Insert Ordered List": "Vložit číslovaný seznam",
-			"Insert table": "Vložit tabulku",
-			"Insert Unordered List": "Vložit odrážkový seznam",
-			"Italic": "Kurzíva",
-			"Justify Center": "Zarovnat na střed",
-			"Justify Full": "Zarovnat do bloku",
-			"Justify Left": "Zarovnat doleva",
-			"Justify Right": "Zarovnat doprava",
-			"Left to Right": "Zleva doprava",
-			"Outdent": "Zmenšit odsazení",
-			"Paste": "Vložit",
-			"Redo": "Znovu",
-			"Remove formatting": "Odstranit formátování",
-			"Right to Left": "Zprava doleva",
-			"Strike-through": "Přeškrnuté",
-			"Subscript": "Dolní index",
-			"Superscript": "Horní index",
-			"Underline": "Potržené",
-			"Undo": "Zpět"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Použij",
-			"Cancel": "Zrušit",
-
-			colorpicker: {
-				"Colorpicker": "Výběr barvy",
-				"Color": "Barva"
-			},
-
-			fileManager: {
-				"file_manager": "Správce souborů",
-				"upload_title": "Nahrát soubor",
-				"rename_title": "Přejmenovat soubor",
-				"remove_title": "Odstranit soubor",
-				"mkdir_title": "Vytvořit adresář",
-				"upload_action": "Nahrát nový soubor do aktualního adresáře",
-				"mkdir_action": "Vytvořit nový adresář",
-				"remove_action": "Odstranit tento soubor",
-				"rename_action": "Přejmenovat tento soubor" ,
-				"delete_message": "Jste si jist, že chcete smazat tento soubor?",
-				"new_directory": "Nový adresář",
-				"previous_directory": "Vrať se do přechozího adresáře",
-				"rename": "Přejmenovat",
-				"select": "Vybrat",
-				"create": "Vytvořit",
-				"submit": "Vložit",
-				"cancel": "Zrušit",
-				"yes": "Ano",
-				"no": "Ne"
-			},
-
-			image: {
-				"Insert Image": "Vložit obrázek",
-				"Preview": "Náhled",
-				"URL": "Odkaz",
-				"Title": "Název",
-				"Description": "Popis",
-				"Width": "Šířka",
-				"Height": "Výška",
-				"Original W x H": "Původní šířka a výška",
-				"Float": "Obtékání",
-				"None": "Žádné",
-				"Left": "Doleva",
-				"Right": "Doprava",
-				"Select file from server": "Vybrat soubor ze serveru"
-			},
-
-			link: {
-				"Insert Link": "Vložit odkaz",
-				"Link URL": "Odkaz",
-				"Link Title": "Název odkazu",
-				"Link Target": "Cíl odkazu"
-			},
-
-			table: {
-				"Insert table": "Vložit tabulku",
-				"Count of columns": "Počet sloupců",
-				"Count of rows": "Počet řádků"
-			}
-		}
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.de.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.de.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.de.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.de.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: German language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Markus Schirp (mbj) <mbj@seonic.net>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.de.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.de.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.de = {
-		controls: {
-			"Bold": "Fett",
-			"Colorpicker": "Farbe wählen",
-			"Copy": "Kopieren",
-			"Create link": "Link erstellen",
-			"Cut": "Ausschneiden",
-			"Decrease font size": "Schriftgröße verkleinern",
-			"Fullscreen": "Vollbild",
-			"Header 1": "Überschrift 1",
-			"Header 2": "Überschrift 2",
-			"Header 3": "Überschrift 3",
-			"View source code": "Quellcode anzeigen",
-			"Increase font size": "Schriftgröße vergrößern",
-			"Indent": "Einrücken",
-			"Insert Horizontal Rule": "Horizontalen Trennbalken einfügen",
-			"Insert image": "Bild einfügen",
-			"Insert Ordered List": "Nummerierte Liste einfügen",
-			"Insert table": "Tabelle einfügen",
-			"Insert Unordered List": "Unnummerierte Liste einfügen",
-			"Italic": "Kursiv",
-			"Justify Center": "Zentrieren",
-			"Justify Full": "Blocksatz",
-			"Justify Left": "Links ausrichten",
-			"Justify Right": "Rechts ausrichten",
-			"Left to Right": "Links nach Rechts",
-			"Outdent": "Einrückung zurücknehmen",
-			"Paste": "Einfügen",
-			"Redo": "Wiederherstellen",
-			"Remove formatting": "Formatierung entfernen",
-			"Right to Left": "Rechts nach Links",
-			"Strike-through": "Durchstreichen",
-			"Subscript": "Tiefstellen",
-			"Superscript": "Hochstellen",
-			"Underline": "Unterstreichen",
-			"Undo": "Rückgängig"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Anwenden",
-			"Cancel": "Abbrechen",
-
-			colorpicker: {
-				"Colorpicker": "Farbwähler",
-				"Color": "Farbe"
-			},
-
-			image: {
-				"Insert Image": "Bild einfügen",
-				"Preview": "Vorschau",
-				"URL": "URL",
-				"Title": "Titel",
-				"Description": "Beschreibung",
-				"Width": "Breite",
-				"Height": "Höhe",
-				"Original W x H": "Original W x H",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "Link einfügen",
-				"Link URL": "Link URL",
-				"Link Title": "Link Titel",
-				"Link Target": "Link Ziel"
-			},
-
-			table: {
-				"Insert table": "Tabelle einfügen",
-				"Count of columns": "Spaltenanzahl",
-				"Count of rows": "Zeilenanzahl"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.en.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.en.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.en.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.en.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,117 +0,0 @@
-/**
- * Internationalization: English language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- * 
- * By: frost-nzcr4 on github.com
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.ru.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.ru.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.ru = {
-		controls: {
-			"Bold": "",
-			"Colorpicker": "",
-			"Copy": "",
-			"Create link": "",
-			"Cut": "",
-			"Decrease font size": "",
-			"File Manager": "",
-			"Fullscreen": "",
-			"Header 1": "",
-			"Header 2": "",
-			"Header 3": "",
-			"View source code": "",
-			"Increase font size": "",
-			"Indent": "",
-			"Insert Horizontal Rule": "",
-			"Insert image": "",
-			"Insert Ordered List": "",
-			"Insert table": "",
-			"Insert Unordered List": "",
-			"Italic": "",
-			"Justify Center": "",
-			"Justify Full": "",
-			"Justify Left": "",
-			"Justify Right": "",
-			"Left to Right": "",
-			"Outdent": "",
-			"Paste": "",
-			"Redo": "",
-			"Remove formatting": "",
-			"Right to Left": "",
-			"Strike-through": "",
-			"Subscript": "",
-			"Superscript": "",
-			"Underline": "",
-			"Undo": ""
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "",
-			"Cancel": "",
-
-			colorpicker: {
-				"Colorpicker": "",
-				"Color": ""
-			},
-
-			fileManager: {
-				"file_manager": 		"File Manager",
-				"upload_title":			"Upload File",
-				"rename_title":			"Rename File",
-				"remove_title":			"Remove File",
-				"mkdir_title":			"Create Directory",
-				"upload_action": 		"Upload new file to current directory",
-				"mkdir_action": 		"Create new directory",
-				"remove_action": 		"Remove this file",
-				"rename_action": 		"Rename this file" ,	
-				"delete_message": 		"Are you sure you want to delete this file?",
-				"new_directory": 		"New Directory",
-				"previous_directory": 	"Go to previous directory",
-				"rename":				"Rename",
-				"select": 				"Select",
-				"create": 				"Create",
-				"submit": 				"Submit",
-				"cancel": 				"Cancel",
-				"yes":					"Yes",
-				"no":					"No"
-			},
-
-			image: {
-				"Insert Image": "",
-				"Preview": "",
-				"URL": "",
-				"Title": "",
-				"Description": "",
-				"Width": "",
-				"Height": "",
-				"Original W x H": "",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": "",
-				"Select file from server": ""
-			},
-
-			link: {
-				"Insert Link": "",
-				"Link URL": "",
-				"Link Title": "",
-				"Link Target": ""
-			},
-
-			table: {
-				"Insert table": "",
-				"Count of columns": "",
-				"Count of rows": ""
-			}
-		}
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.es.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.es.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.es.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.es.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: Spanish language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Esteban Beltran (academo) <sergies@gmail.com>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.es.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.es.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.es = {
-		controls: {
-			"Bold": "Negrilla",
-			"Colorpicker": "",
-			"Copy": "Copiar",
-			"Create link": "Crear Link",
-			"Cut": "Cortar",
-			"Decrease font size": "Disminuir tamaño fuente",
-			"Fullscreen": "",
-			"Header 1": "Titulo 1",
-			"Header 2": "Titulo 2",
-			"Header 3": "Titulo 3",
-			"View source code": "Ver fuente",
-			"Increase font size": "Aumentar tamaño fuente",
-			"Indent": "Agregar Sangría",
-			"Insert Horizontal Rule": "Insertar linea horizontal",
-			"Insert image": "Insertar Imagen",
-			"Insert Ordered List": "Insertar lista numérica",
-			"Insert table": "Insertar Tabla",
-			"Insert Unordered List": "Insertar Lista viñetas",
-			"Italic": "Cursiva",
-			"Justify Center": "Centrar",
-			"Justify Full": "Justificar",
-			"Justify Left": "Alinear a la Izquierda",
-			"Justify Right": "Alinear a la derecha",
-			"Left to Right": "Izquierda a derecha",
-			"Outdent": "Quitar Sangría",
-			"Paste": "Pegar",
-			"Redo": "Restaurar",
-			"Remove formatting": "Quitar Formato",
-			"Right to Left": "Derecha a izquierda",
-			"Strike-through": "Invertir",
-			"Subscript": "Subíndice",
-			"Superscript": "Superíndice",
-			"Underline": "Subrayar",
-			"Undo": "Deshacer"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "",
-			"Cancel": "",
-
-			colorpicker: {
-				"Colorpicker": "",
-				"Color": ""
-			},
-
-			image: {
-				"Insert Image": "",
-				"Preview": "",
-				"URL": "",
-				"Title": "",
-				"Description": "",
-				"Width": "",
-				"Height": "",
-				"Original W x H": "",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "",
-				"Link URL": "",
-				"Link Title": "",
-				"Link Target": ""
-			},
-
-			table: {
-				"Insert table": "",
-				"Count of columns": "",
-				"Count of rows": ""
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.fr.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.fr.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.fr.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.fr.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: french language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Tom Barbette <mappam0@gmail.com>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.fr.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.fr.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.fr = {
-		controls: {
-			"Bold": "Gras",
-			"Colorpicker": "Choisir une couleur",
-			"Copy": "Copier",
-			"Create link": "Créer un lien",
-			"Cut": "Couper",
-			"Decrease font size": "Diminuer la taille du texte",
-			"Fullscreen": "Plein écran",
-			"Header 1": "Titre 1",
-			"Header 2": "Titre 2",
-			"Header 3": "Titre 3",
-			"View source code": "Voir le code source",
-			"Increase font size": "Augmenter la taille du texte",
-			"Indent": "Augmenter le retrait",
-			"Insert Horizontal Rule": "Insérer une règle horyzontale",
-			"Insert image": "Insérer une image",
-			"Insert Ordered List": "Insérer une liste ordonnée",
-			"Insert table": "Insérer un tableau",
-			"Insert Unordered List": "Insérer une liste",
-			"Italic": "Italique",
-			"Justify Center": "Centré",
-			"Justify Full": "Justifié",
-			"Justify Left": "Aligné à gauche",
-			"Justify Right": "Aligné à droite",
-			"Left to Right": "Gauche à droite",
-			"Outdent": "Réduire le retrait",
-			"Paste": "Coller",
-			"Redo": "Restaurer",
-			"Remove formatting": "Supprimer le formatage",
-			"Right to Left": "Droite à gauche",
-			"Strike-through": "Barré",
-			"Subscript": "Indice",
-			"Superscript": "Exposant",
-			"Underline": "Souligné",
-			"Undo": "Annuler"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Appliquer",
-			"Cancel": "Annuler",
-
-			colorpicker: {
-				"Colorpicker": "Choisir une couleur",
-				"Color": "Couleur"
-			},
-
-			image: {
-				"Insert Image": "Insérer une image",
-				"Preview": "Prévisualiser",
-				"URL": "URL",
-				"Title": "Titre",
-				"Description": "Description",
-				"Width": "Largeur",
-				"Height": "Hauteur",
-				"Original W x H": "L x H originale",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "Insérer un lien",
-				"Link URL": "URL du lien",
-				"Link Title": "Titre du lien",
-				"Link Target": "Cible du lien"
-			},
-
-			table: {
-				"Insert table": "Insérer un tableau",
-				"Count of columns": "Nombre de colonnes",
-				"Count of rows": "Nombre de lignes"
-			}
-		}
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.he.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.he.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.he.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.he.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: English language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- * 
- * By: 	Tudmotu, frost-nzcr4 on github.com
- * 		Yotam Bar-On
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.he.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.he.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.he = {
-		controls: {
-			"Bold": "מודגש",
-			"Colorpicker": "פלטת צבעים",
-			"Copy": "העתק",
-			"Create link": "צור קישור",
-			"Cut": "חתוך",
-			"Decrease font size": "הקטן גופן",
-			"Fullscreen": "מסך מלא",
-			"Header 1": "כותרת 1",
-			"Header 2": "כותרת 2",
-			"Header 3": "כותרת 3",
-			"View source code": "הצג קוד מקור",
-			"Increase font size": "הגדל גופן",
-			"Indent": "הגדל הזחה",
-			"Insert Horizontal Rule": "הכנס קו אופקי",
-			"Insert image": "הוסף תמונה",
-			"Insert Ordered List": "הוספך רשימה ממוספרת",
-			"Insert table": "הוסף טבלה",
-			"Insert Unordered List": "הוספת רשימה בלתי ממוספרת",
-			"Italic": "נטוי",
-			"Justify Center": "מרכז",
-			"Justify Full": "יישור לשוליים",
-			"Justify Left": "הצמד לשמאל",
-			"Justify Right": "הצמד לימין",
-			"Left to Right": "שמאל לימין",
-			"Outdent": "הורד הזחה",
-			"Paste": "הדבק",
-			"Redo": "עשה שוב",
-			"Remove formatting": "הסר עיצוב",
-			"Right to Left": "ימין לשמאל",
-			"Strike-through": "כיתוב מחוק",
-			"Subscript": "כתיב עילי",
-			"Superscript": "כתיב תחתי",
-			"Underline": "קו תחתון",
-			"Undo": "בטל פעולה"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "החל",
-			"Cancel": "בטל",
-
-			colorpicker: {
-				"Colorpicker": "פלטת צבעים",
-				"Color": "צבע"
-			},
-
-			image: {
-				"Insert Image": "הכנס תמונה",
-				"Preview": "תצוגה מקדימה",
-				"URL": "כתובת רשת",
-				"Title": "כותרת",
-				"Description": "תיאור",
-				"Width": "רוחב",
-				"Height": "גובה",
-				"Original W x H": "מימדים מקוריים",
-				"Float": "צף",
-				"None": "שום כיוון",
-				"Left": "שמאל",
-				"Right": "ימין"
-			},
-
-			link: {
-				"Insert Link": "צור קישור",
-				"Link URL": "כתובת רשת",
-				"Link Title": "כותרת",
-				"Link Target": "מטרה"
-			},
-
-			table: {
-				"Insert table": "הוסף טבלה",
-				"Count of columns": "מספר עמודות",
-				"Count of rows": "מספר שורות"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.hr.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.hr.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.hr.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.hr.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,98 +0,0 @@
-/**
- * Internationalization: Croatian language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Boris Strahija (bstrahija) <boris@creolab.hr>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.hr.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.hr.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.hr = {
-		controls: {
-			"Bold": "Podebljano",
-			"Colorpicker": "Izbor boje",
-			"Copy": "Kopiraj",
-			"Create link": "Umetni link",
-			"Cut": "Izreži",
-			"Decrease font size": "Smanji font",
-			"Fullscreen": "Cijeli ekran",
-			"Header 1": "Naslov 1",
-			"Header 2": "Naslov 2",
-			"Header 3": "Naslov 3",
-			"Header 4": "Naslov 4",
-			"Header 5": "Naslov 5",
-			"Header 6": "Naslov 6",
-			"View source code": "Kod",
-			"Increase font size": "Povećaj font",
-			"Indent": "Uvuci",
-			"Insert Horizontal Rule": "Horizontalna linija",
-			"Insert image": "Umetni sliku",
-			"Insert Ordered List": "Numerirana lista",
-			"Insert table": "Umetni tabelu",
-			"Insert Unordered List": "Nenumerirana lista",
-			"Italic": "Ukošeno",
-			"Justify Center": "Centriraj",
-			"Justify Full": "Poravnaj obostrano",
-			"Justify Left": "Poravnaj lijevo",
-			"Justify Right": "Poravnaj desno",
-			"Left to Right": "Lijevo na desno",
-			"Outdent": "Izvuci",
-			"Paste": "Zalijepi",
-			"Redo": "Ponovi",
-			"Remove formatting": "Poništi oblikovanje",
-			"Right to Left": "Desno na lijevo",
-			"Strike-through": "Precrtano",
-			"Subscript": "Indeks",
-			"Superscript": "Eksponent",
-			"Underline": "Podcrtano",
-			"Undo": "Poništi",
-			"Code snippet": "Isječak koda"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Primjeni",
-			"Cancel": "Odustani",
-
-			colorpicker: {
-				"Colorpicker": "Izbor boje",
-				"Color": "Boja"
-			},
-
-			image: {
-				"Insert Image": "Umetni sliku",
-				"Preview": "Predprikaz",
-				"URL": "URL",
-				"Title": "Naslov",
-				"Description": "Opis",
-				"Width": "Širina",
-				"Height": "Visina",
-				"Original W x H": "Originalna Š x V",
-				"Float": "",
-				"None": "Nema",
-				"Left": "Lijevo",
-				"Right": "Desno"
-			},
-
-			link: {
-				"Insert Link": "Umetni link",
-				"Link URL": "URL linka",
-				"Link Title": "Naslov linka",
-				"Link Target": "Meta linka"
-			},
-
-			table: {
-				"Insert table": "Umetni tabelu",
-				"Count of columns": "Broj kolona",
-				"Count of rows": "Broj redova"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.it.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.it.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.it.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.it.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: italian language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Mauro Franceschini <mauro.franceschini@gmail.com>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.it.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.it.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.it = {
-		controls: {
-			"Bold": "Grassetto",
-			"Colorpicker": "Scegli un colore",
-			"Copy": "Copia",
-			"Create link": "Crea collegamento",
-			"Cut": "Taglia",
-			"Decrease font size": "Diminuisci dimensione testo",
-			"Fullscreen": "Schermo intero",
-			"Header 1": "Titolo 1",
-			"Header 2": "Titolo 2",
-			"Header 3": "Titolo 3",
-			"View source code": "Visualizza codice sorgente",
-			"Increase font size": "Aumenta dimensione testo",
-			"Indent": "Aumenta il rientro",
-			"Insert Horizontal Rule": "Inserisci separatore orizzontale",
-			"Insert image": "Inserisci immagine",
-			"Insert Ordered List": "Inserisci lista ordinata",
-			"Insert table": "Inserisci tabella",
-			"Insert Unordered List": "Inserisci lista non ordinata",
-			"Italic": "Corsivo",
-			"Justify Center": "Centrato",
-			"Justify Full": "Giustificato",
-			"Justify Left": "Allineato a sinistra",
-			"Justify Right": "Allineato a destra",
-			"Left to Right": "Da sinistra a destra",
-			"Outdent": "Riduci il rientro",
-			"Paste": "Incolla",
-			"Redo": "Ripristina",
-			"Remove formatting": "Cancella formattazione",
-			"Right to Left": "Da destra a sinistra",
-			"Strike-through": "Barrato",
-			"Subscript": "Pedice",
-			"Superscript": "Apice",
-			"Underline": "Sottolineato",
-			"Undo": "Annulla"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Applica",
-			"Cancel": "Annulla",
-
-			colorpicker: {
-				"Colorpicker": "Scegli un colore",
-				"Color": "Colore"
-			},
-
-			image: {
-				"Insert Image": "Inserisci immagine",
-				"Preview": "Anteprima",
-				"URL": "Indirizzo internet (URL)",
-				"Title": "Titolo",
-				"Description": "Descrizione",
-				"Width": "Larghezza",
-				"Height": "Altezza",
-				"Original W x H": "Dimensioni originali (L x A)",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "Inserisci collegamento",
-				"Link URL": "Indirizzo internet (URL)",
-				"Link Title": "Titolo",
-				"Link Target": "Destinazione"
-			},
-
-			table: {
-				"Insert table": "Inserisci tabella",
-				"Count of columns": "Numero di colonne",
-				"Count of rows": "Numero di righe"
-			}
-		}
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.ja.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.ja.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.ja.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.ja.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,95 +0,0 @@
-/**
- * Internationalization: japanese language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: https://github.com/rosiro
- *
- */
-
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.ja.js depends on $.wysiwyg";
-		return false;
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.ja.js depends on $.wysiwyg.i18n";
-		return false;
-	}
-
-	$.wysiwyg.i18n.lang.ja = {
-		controls: {
-			"Bold": "ボールド",
-			"Copy": "コピー",
-			"Create link": "リンク作成",
-			"Cut": "切り取り",
-			"Decrease font size": "フォントサイズを小さく",
-			"Header 1": "見出し１",
-			"Header 2": "見出し２",
-			"Header 3": "見出し３",
-			"View source code": "ソースコードを見る",
-			"Increase font size": "フォントサイズを大きく",
-			"Indent": "インデント",
-			"Insert Horizontal Rule": "水平線<HR>を挿入",
-			"Insert image": "画像を挿入",
-			"Insert Ordered List": "リストの追加",
-			"Insert table": "テーブルを挿入",
-			"Insert Unordered List": "下線を追加",
-			"Italic": "イタリック",
-			"Justify Center": "中央寄せ",
-			"Justify Full": "左右一杯に揃える",
-			"Justify Left": "左寄せ",
-			"Justify Right": "右寄せ",
-			"Left to Right": "左から右へ",
-			"Outdent": "インデント解除",
-			"Paste": "貼り付け",
-			"Redo": "やり直し",
-			"Remove formatting": "書式設定を削除",
-			"Right to Left": "右から左へ",
-			"Strike-through": "取り消し線",
-			"Subscript": "下付き文字",
-			"Superscript": "上付き文字",
-			"Underline": "下線",
-			"Undo": "元に戻す"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "適用",
-			"Cancel": "キャンセル",
-
-			colorpicker: {
-				"Colorpicker": "カラーピッカー",
-				"Color": "カラー"
-			},
-
-			image: {
-				"Insert Image": "画像を挿入",
-				"Preview": "プレビュー",
-				"URL": "URL",
-				"Title": "タイトル",
-				"Description": "概要",
-				"Width": "横幅",
-				"Height": "高さ",
-				"Original W x H": "オリジナル 横 x 高",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "リンクの挿入",
-				"Link URL": "リンク URL",
-				"Link Title": "リンク タイトル",
-				"Link Target": "リンク ターゲット"
-			},
-
-			table: {
-				"Insert table": "テーブルを挿入",
-				"Count of columns": "列数",
-				"Count of rows": "行数"
-			}
-		}
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.nl.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.nl.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.nl.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.nl.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: Dutch
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Erik van Dongen <dongen@connexys.com>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.nl.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.nl.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.nl = {
-		controls: {
-			"Bold": "Vet",
-			"Colorpicker": "Kleur kiezen",
-			"Copy": "Kopiëren",
-			"Create link": "Link maken",
-			"Cut": "Knippen",
-			"Decrease font size": "Lettergrootte verkleinen",
-			"Fullscreen": "Volledig scherm",
-			"Header 1": "Kop 1",
-			"Header 2": "Kop 2",
-			"Header 3": "Kop 3",
-			"View source code": "Broncode bekijken",
-			"Increase font size": "Lettergrootte vergroten",
-			"Indent": "Inspringen",
-			"Insert Horizontal Rule": "Horizontale lijn invoegen",
-			"Insert image": "Afbeelding invoegen",
-			"Insert Ordered List": "Genummerde lijst",
-			"Insert table": "Tabel invoegen",
-			"Insert Unordered List": "Lijst met opsommingstekens",
-			"Italic": "Cursief",
-			"Justify Center": "Centreren",
-			"Justify Full": "Uitvullen",
-			"Justify Left": "Links uitlijnen",
-			"Justify Right": "Rechts uitlijnen",
-			"Left to Right": "Links naar Rechts",
-			"Outdent": "Uitspringen",
-			"Paste": "Plakken",
-			"Redo": "Opnieuw uitvoeren",
-			"Remove formatting": "Opmaak verwijderen",
-			"Right to Left": "Rechts naar Links",
-			"Strike-through": "Doorstrepen",
-			"Subscript": "Subscript",
-			"Superscript": "Superscript",
-			"Underline": "Onderstrepen",
-			"Undo": "Ongedaan maken"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Toepassen",
-			"Cancel": "Annuleren",
-
-			colorpicker: {
-				"Colorpicker": "Kleur kiezen",
-				"Color": "Kleur"
-			},
-
-			image: {
-				"Insert Image": "Afbeeldingen invoegen",
-				"Preview": "Voorbeeld",
-				"URL": "URL",
-				"Title": "Titel",
-				"Description": "Beschrijving",
-				"Width": "Breedte",
-				"Height": "Hoogte",
-				"Original W x H": "Originele B x H",
-				"Float": "Float",
-				"None": "None",
-				"Left": "Left",
-				"Right": "Right"
-			},
-
-			link: {
-				"Insert Link": "Link invoegen",
-				"Link URL": "Link URL",
-				"Link Title": "Linktitel",
-				"Link Target": "Link target"
-			},
-
-			table: {
-				"Insert table": "Tabel invoegen",
-				"Count of columns": "Aantal kolommen",
-				"Count of rows": "Aantal rijen"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.pl.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.pl.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.pl.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.pl.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: Polish language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Andrzej Herok
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.pl.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.pl.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.pl = {
-		controls: {
-			"Bold": "Pogrubienie",
-			"Colorpicker": "Wybór koloru",
-			"Copy": "Kopiuj",
-			"Create link": "Utwórz łącze",
-			"Cut": "Wytnij",
-			"Decrease font size": "Zmniejsz rozmiar czcionki",
-			"Fullscreen": "Pełny ekran",
-			"Header 1": "Nagłówek 1",
-			"Header 2": "Nagłówek 2",
-			"Header 3": "Nagłówek 3",
-			"View source code": "Pokaż kod źródłowy",
-			"Increase font size": "Zwiększ rozmiar czcionki",
-			"Indent": "Zwiększ wcięcie",
-			"Insert Horizontal Rule": "Wstaw poziomą linię",
-			"Insert image": "Wstaw obrazek",
-			"Insert Ordered List": "Lista numerowana",
-			"Insert table": "Wstaw tabelę",
-			"Insert Unordered List": "Lista nienumerowana",
-			"Italic": "Kursywa",
-			"Justify Center": "Wyśrodkuj",
-			"Justify Full": "Justowanie",
-			"Justify Left": "Do lewej",
-			"Justify Right": "Do prawej",
-			"Left to Right": "Od lewej do prawej",
-			"Outdent": "Zmniejsz wcięcie",
-			"Paste": "Wklej",
-			"Redo": "Powtórz",
-			"Remove formatting": "Usuń formatowanie",
-			"Right to Left": "Od prawej do lewej",
-			"Strike-through": "Przekreślenie",
-			"Subscript": "Indeks dolny",
-			"Superscript": "Indeks górny",
-			"Underline": "Podkreślenie",
-			"Undo": "Cofnij"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Zastosuj",
-			"Cancel": "Anuluj",
-
-			colorpicker: {
-				"Colorpicker": "Próbnik koloru",
-				"Color": "Kolor"
-			},
-
-			image: {
-				"Insert Image": "Wstaw obrazek",
-				"Preview": "Podgląd",
-				"URL": "URL",
-				"Title": "Tytuł",
-				"Description": "Opis",
-				"Width": "Szerokość",
-				"Height": "Wysokość",
-				"Original W x H": "Oryginalne wymiary",
-				"Float": "Przyleganie",
-				"None": "Brak",
-				"Left": "Do lewej",
-				"Right": "Do prawej"
-			},
-
-			link: {
-				"Insert Link": "Wstaw łącze",
-				"Link URL": "URL łącza",
-				"Link Title": "Tytuł łącza",
-				"Link Target": "Target"
-			},
-
-			table: {
-				"Insert table": "Wstaw tabelę",
-				"Count of columns": "Liczba kolumn",
-				"Count of rows": "Liczba wierszy"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.pt_br.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.pt_br.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.pt_br.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.pt_br.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: Brazilian Portugese language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Marcelo Wergles <mwergles@gmail.com>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.pt_br.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.pt_br.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.pt_br = {
-		controls: {
-			"Bold": "Negrito",
-			"Colorpicker": "Escolher uma cor",
-			"Copy": "Copiar",
-			"Create link": "Criar link",
-			"Cut": "Recortar",
-			"Decrease font size": "Diminuir o tamanho da fonte",
-			"Fullscreen": "Tela cheia",
-			"Header 1": "Título 1",
-			"Header 2": "Título 2",
-			"Header 3": "Título 3",
-			"View source code": "Ver código fonte",
-			"Increase font size": "Aumentar o tamanho da fonte",
-			"Indent": "Aumentar recuo",
-			"Insert Horizontal Rule": "Inserir linha horizontal",
-			"Insert image": "Inserir imagem",
-			"Insert Ordered List": "Inserir numeração",
-			"Insert table": "Inserir tabela",
-			"Insert Unordered List": "Inserir marcadores",
-			"Italic": "Itálico",
-			"Justify Center": "Centralizar",
-			"Justify Full": "Justificar",
-			"Justify Left": "Alinhar à esquerda",
-			"Justify Right": "Alinhar à direita",
-			"Left to Right": "Esquerda à direita",
-			"Outdent": "Diminuir recuo",
-			"Paste": "Colar",
-			"Redo": "Refazer",
-			"Remove formatting": "Remover formatação",
-			"Right to Left": "Direita à esquerda",
-			"Strike-through": "Riscar",
-			"Subscript": "Subscrito",
-			"Superscript": "Sobrescrito",
-			"Underline": "Sublinhar",
-			"Undo": "Desfazer"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Aplicar",
-			"Cancel": "Cancelar",
-
-			colorpicker: {
-				"Colorpicker": "Escolher uma cor",
-				"Color": "Cor"
-			},
-
-			image: {
-				"Insert Image": "Inserir Imagem",
-				"Preview": "Pré-visualizar",
-				"URL": "URL",
-				"Title": "Título",
-				"Description": "Descrição",
-				"Width": "Largura",
-				"Height": "Altura",
-				"Original W x H": "L x A original",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "Inserir Link",
-				"Link URL": "URL do link",
-				"Link Title": "Título do link",
-				"Link Target": "Alvo do link"
-			},
-
-			table: {
-				"Insert table": "Inserir tabela",
-				"Count of columns": "Número de colunas",
-				"Count of rows": "Número de linhas"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.ru.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.ru.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.ru.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.ru.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,117 +0,0 @@
-/**
- * Internationalization: Russian language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- * 
- * By: frost-nzcr4 on github.com
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.ru.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.ru.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.ru = {
-		controls: {
-			"Bold": "Жирный",
-			"Colorpicker": "Выбор цвета",
-			"Copy": "Копировать",
-			"Create link": "Создать ссылку",
-			"Cut": "Вырезать",
-			"Decrease font size": "Уменьшить шрифт",
-			"File Manager": "Управление файлами",
-			"Fullscreen": "На весь экран",
-			"Header 1": "Заголовок 1",
-			"Header 2": "Заголовок 2",
-			"Header 3": "Заголовок 3",
-			"View source code": "Посмотреть исходный код",
-			"Increase font size": "Увеличить шрифт",
-			"Indent": "Отступ",
-			"Insert Horizontal Rule": "Вставить горизонтальную прямую",
-			"Insert image": "Вставить изображение",
-			"Insert Ordered List": "Вставить нумерованный список",
-			"Insert table": "Вставить таблицу",
-			"Insert Unordered List": "Вставить ненумерованный список",
-			"Italic": "Курсив",
-			"Justify Center": "Выровнять по центру",
-			"Justify Full": "Выровнять по ширине",
-			"Justify Left": "Выровнять по левой стороне",
-			"Justify Right": "Выровнять по правой стороне",
-			"Left to Right": "Слева направо",
-			"Outdent": "Убрать отступ",
-			"Paste": "Вставить",
-			"Redo": "Вернуть действие",
-			"Remove formatting": "Убрать форматирование",
-			"Right to Left": "Справа налево",
-			"Strike-through": "Зачёркнутый",
-			"Subscript": "Нижний регистр",
-			"Superscript": "Верхний регистр",
-			"Underline": "Подчёркнутый",
-			"Undo": "Отменить действие"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Применить",
-			"Cancel": "Отмена",
-
-			colorpicker: {
-				"Colorpicker": "Выбор цвета",
-				"Color": "Цвет"
-			},
-
-			fileManager: {
-				"file_manager": 		"Управление файлами",
-				"upload_title":			"Загрузить файл",
-				"rename_title":			"Переименовать файл",
-				"remove_title":			"Удалить файл",
-				"mkdir_title":			"Создать папку",
-				"upload_action": 		"Загружает новый файл в текущую папку",
-				"mkdir_action": 		"Создаёт новую папку",
-				"remove_action": 		"Удалить этот файл",
-				"rename_action": 		"Переименовать этот файл" ,	
-				"delete_message": 		"Хотите удалить этот файл?",
-				"new_directory": 		"Новая папка",
-				"previous_directory": 	"Вернуться к предыдущей папке",
-				"rename":				"Переименовать",
-				"select": 				"Выбрать",
-				"create": 				"Создать",
-				"submit": 				"Послать",
-				"cancel": 				"Отмена",
-				"yes":					"Да",
-				"no":					"Нет"
-			},
-
-			image: {
-				"Insert Image": "Вставить изображение",
-				"Preview": "Просмотр",
-				"URL": "URL адрес",
-				"Title": "Название",
-				"Description": "Альт. текст",
-				"Width": "Ширина",
-				"Height": "Высота",
-				"Original W x H": "Оригинальные Ш x В",
-				"Float": "Положение",
-				"None": "Не выбрано",
-				"Left": "Слева",
-				"Right": "Справа",
-				"Select file from server": "Выбрать файл с сервера"
-			},
-
-			link: {
-				"Insert Link": "Вставить ссылку",
-				"Link URL": "URL адрес",
-				"Link Title": "Название",
-				"Link Target": "Цель"
-			},
-
-			table: {
-				"Insert table": "Вставить таблицу",
-				"Count of columns": "Кол-во колонок",
-				"Count of rows": "Кол-во строк"
-			}
-		}
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.se.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.se.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.se.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.se.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: swedish language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: ippa@rubylicio.us
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.se.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.se.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.se = {
-		controls: {
-			"Bold": "Tjock",
-			"Colorpicker": "",
-			"Copy": "Kopiera",
-			"Create link": "Skapa länk",
-			"Cut": "Klipp",
-			"Decrease font size": "Minska storlek",
-			"Fullscreen": "",
-			"Header 1": "Rubrik 1",
-			"Header 2": "Rubrik 2",
-			"Header 3": "Rubrik 3",
-			"View source code": "Se källkod",
-			"Increase font size": "Öka fontstorlek",
-			"Indent": "Öka indrag",
-			"Insert Horizontal Rule": "Lägg in vertical avskiljare ",
-			"Insert image": "Infoga bild",
-			"Insert Ordered List": "Infoga numrerad lista",
-			"Insert table": "Infoga tabell",
-			"Insert Unordered List": "Infoga lista",
-			"Italic": "Kursiv",
-			"Justify Center": "Centrera",
-			"Justify Full": "Marginaljustera",
-			"Justify Left": "Vänsterjustera",
-			"Justify Right": "Högerjustera",
-			"Left to Right": "Vänster till höger",
-			"Outdent": "Minska indrag",
-			"Paste": "Klistra",
-			"Redo": "Gör om",
-			"Remove formatting": "Ta bort formatering",
-			"Right to Left": "Höger till vänster",
-			"Strike-through": "Genomstrykning",
-			"Subscript": "Subscript",
-			"Superscript": "Superscript",
-			"Underline": "Understruken",
-			"Undo": "Ångra"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Applicera",
-			"Cancel": "Avbryt",
-
-			colorpicker: {
-				"Colorpicker": "Färgval",
-				"Color": "Färg"
-			},
-
-			image: {
-				"Insert Image": "Lägg in bild",
-				"Preview": "Förhandsgranska",
-				"URL": "URL",
-				"Title": "Rubrik",
-				"Description": "Beskrivning",
-				"Width": "Bredd",
-				"Height": "Höjd",
-				"Original W x H": "Original Bredd x Höjd",
-				"Float": "Flytande",
-				"None": "Ingen",
-				"Left": "Vänster",
-				"Right": "Höger"
-			},
-
-			link: {
-				"Insert Link": "Skapa länk",
-				"Link URL": "LänkURL",
-				"Link Title": "Länkrubrik",
-				"Link Target": "Länkmål"
-			},
-
-			table: {
-				"Insert table": "Skapa tabell",
-				"Count of columns": "Antal kolumner",
-				"Count of rows": "Antal rader"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.sl.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.sl.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.sl.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.sl.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,94 +0,0 @@
-/**
- * Internationalization: Slovenian language
- *
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- *
- * By: Peter Zlatnar <peter.zlatnar@gmail.com>
- *
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.sl.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.sl.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang.sl = {
-		controls: {
-			"Bold": "Krepko",
-			"Colorpicker": "Izbirnik barv",
-			"Copy": "Kopiraj",
-			"Create link": "Dodaj povezavo",
-			"Cut": "Izreži",
-			"Decrease font size": "Zmanjšaj pisavo",
-			"Fullscreen": "Celozaslonski način",
-			"Header 1": "Naslov 1",
-			"Header 2": "Naslov 2",
-			"Header 3": "Naslov 3",
-			"View source code": "Prikaži izvorno kodo",
-			"Increase font size": "Povečaj pisavo",
-			"Indent": "Zamik v desno",
-			"Insert Horizontal Rule": "Vstavi vodoravno črto ",
-			"Insert image": "Vstavi sliko",
-			"Insert Ordered List": "Vstavi oštevilčen seznam",
-			"Insert table": "Vstavi tabelo",
-			"Insert Unordered List": "Vstavi označen seznam",
-			"Italic": "Ležeče",
-			"Justify Center": "Sredinska poravnava",
-			"Justify Full": "Obojestranska poravnava",
-			"Justify Left": "Leva poravnava",
-			"Justify Right": "Desna poravnava",
-			"Left to Right": "Od leve proti desni",
-			"Outdent": "Zamik v levo",
-			"Paste": "Prilepi",
-			"Redo": "Ponovi",
-			"Remove formatting": "Odstrani oblikovanje",
-			"Right to Left": "Od desne proti levi",
-			"Strike-through": "Prečrtano",
-			"Subscript": "Podpisano",
-			"Superscript": "Nadpisano",
-			"Underline": "Podčrtano",
-			"Undo": "Razveljavi"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "Uporabi",
-			"Cancel": "Prekliči",
-			
-			colorpicker: {
-				"Colorpicker": "Izbirnik barv",
-				"Color": "Barva"
-			},
-
-			image: {
-				"Insert Image": "Vstavi sliko",
-				"Preview": "Predogled",
-				"URL": "URL",
-				"Title": "Naslov",
-				"Description": "Opis",
-				"Width": "Širina",
-				"Height": "Višina",
-				"Original W x H": "Prvotna Š x V",
-				"Float": "",
-				"None": "",
-				"Left": "",
-				"Right": ""
-			},
-
-			link: {
-				"Insert Link": "Vstavi povezavo",
-				"Link URL": "URL povezave",
-				"Link Title": "Naslov povezave",
-				"Link Target": "Cilj povezave"
-			},
-
-			table: {
-				"Insert table": "Vstavi tabelo",
-				"Count of columns": "Število stolpcev",
-				"Count of rows": "Število vrstic"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.zh-cn.js elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.zh-cn.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/i18n/lang.zh-cn.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/i18n/lang.zh-cn.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,93 +0,0 @@
-/**
- * Internationalization: Chinese (Simplified) language
- * 
- * Depends on jWYSIWYG, $.wysiwyg.i18n
- * 
- * By: https://github.com/mengxy
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "lang.zh-cn.js depends on $.wysiwyg";
-	}
-	if (undefined === $.wysiwyg.i18n) {
-		throw "lang.zh-cn.js depends on $.wysiwyg.i18n";
-	}
-
-	$.wysiwyg.i18n.lang['zh-cn'] = {
-		controls: {
-			"Bold": "加粗",
-			"Colorpicker": "取色器",
-			"Copy": "复制",
-			"Create link": "创建链接",
-			"Cut": "剪切",
-			"Decrease font size": "减小字号",
-			"Fullscreen": "全屏",
-			"Header 1": "标题1",
-			"Header 2": "标题2",
-			"Header 3": "标题3",
-			"View source code": "查看源码",
-			"Increase font size": "增大字号",
-			"Indent": "缩进",
-			"Insert Horizontal Rule": "插入水平线",
-			"Insert image": "插入图片",
-			"Insert Ordered List": "插入有序列表",
-			"Insert table": "插入表格",
-			"Insert Unordered List": "插入无序列表",
-			"Italic": "斜体",
-			"Justify Center": "居中对齐",
-			"Justify Full": "填充整行",
-			"Justify Left": "左对齐",
-			"Justify Right": "右对齐",
-			"Left to Right": "从左到右",
-			"Outdent": "取消缩进",
-			"Paste": "粘贴",
-			"Redo": "前进",
-			"Remove formatting": "清除格式",
-			"Right to Left": "从右到左",
-			"Strike-through": "删除线",
-			"Subscript": "上角标",
-			"Superscript": "下角标",
-			"Underline": "下划线",
-			"Undo": "撤销"
-		},
-
-		dialogs: {
-			// for all
-			"Apply": "应用",
-			"Cancel": "取消",
-
-			colorpicker: {
-				"Colorpicker": "取色器",
-				"Color": "颜色"
-			},
-
-			image: {
-				"Insert Image": "插入图片",
-				"Preview": "预览",
-				"URL": "URL",
-				"Title": "标题",
-				"Description": "描述",
-				"Width": "宽度",
-				"Height": "高度",
-				"Original W x H": "原始宽高",
-				"Float": "浮动",
-				"None": "无",
-				"Left": "左",
-				"Right": "右"
-			},
-
-			link: {
-				"Insert Link": "插入链接",
-				"Link URL": "链接URL",
-				"Link Title": "链接Title",
-				"Link Target": "链接Target"
-			},
-
-			table: {
-				"Insert table": "插入表格",
-				"Count of columns": "列数",
-				"Count of rows": "行数"
-			}
-		}
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/jquery.wysiwyg.js elefant-elefant_1_3_3_beta/js/wysiwyg/jquery.wysiwyg.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/jquery.wysiwyg.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/jquery.wysiwyg.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,2377 +0,0 @@
-/**
- * WYSIWYG - jQuery plugin 0.97
- * (0.97.2 - From infinity)
- *
- * Copyright (c) 2008-2009 Juan M Martinez, 2010-2011 Akzhan Abdulin and all contributors
- * https://github.com/akzhan/jwysiwyg
- *
- * Dual licensed under the MIT and GPL licenses:
- *   http://www.opensource.org/licenses/mit-license.php
- *   http://www.gnu.org/licenses/gpl.html
- *
- */
-
-/*jslint browser: true, forin: true */
-
-(function ($) {
-	"use strict";
-	/* Wysiwyg namespace: private properties and methods */
-
-	var console = window.console ? window.console : {
-		log: $.noop,
-		error: function (msg) {
-			$.error(msg);
-		}
-	};
-	var supportsProp = (('prop' in $.fn) && ('removeProp' in $.fn));
-
-	function Wysiwyg() {
-		this.controls = {
-			bold: {
-				groupIndex: 0,
-				visible: true,
-				tags: ["b", "strong"],
-				css: {
-					fontWeight: "bold"
-				},
-				tooltip: "Bold",
-				hotkey: {"ctrl": 1, "key": 66}
-			},
-
-			copy: {
-				groupIndex: 8,
-				visible: false,
-				tooltip: "Copy"
-			},
-
-			createLink: {
-				groupIndex: 6,
-				visible: true,
-				exec: function () {
-					var self = this;
-					if ($.wysiwyg.controls && $.wysiwyg.controls.link) {
-						$.wysiwyg.controls.link.init(this);
-					} else if ($.wysiwyg.autoload) {
-						$.wysiwyg.autoload.control("wysiwyg.link.js", function () {
-							self.controls.createLink.exec.apply(self);
-						});
-					} else {
-						console.error("$.wysiwyg.controls.link not defined. You need to include wysiwyg.link.js file");
-					}
-				},
-				tags: ["a"],
-				tooltip: "Create link"
-			},
-
-			cut: {
-				groupIndex: 8,
-				visible: false,
-				tooltip: "Cut"
-			},
-
-			decreaseFontSize: {
-				groupIndex: 9,
-				visible: false,
-				tags: ["small"],
-				tooltip: "Decrease font size",
-				exec: function () {
-					this.decreaseFontSize();
-				}
-			},
-
-			h1: {
-				groupIndex: 7,
-				visible: true,
-				className: "h1",
-				command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
-				"arguments": ($.browser.msie || $.browser.safari) ? "<h1>" : "h1",
-				tags: ["h1"],
-				tooltip: "Header 1"
-			},
-
-			h2: {
-				groupIndex: 7,
-				visible: true,
-				className: "h2",
-				command: ($.browser.msie || $.browser.safari)	? "FormatBlock" : "heading",
-				"arguments": ($.browser.msie || $.browser.safari) ? "<h2>" : "h2",
-				tags: ["h2"],
-				tooltip: "Header 2"
-			},
-
-			h3: {
-				groupIndex: 7,
-				visible: true,
-				className: "h3",
-				command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
-				"arguments": ($.browser.msie || $.browser.safari) ? "<h3>" : "h3",
-				tags: ["h3"],
-				tooltip: "Header 3"
-			},
-
-			highlight: {
-				tooltip:     "Highlight",
-				className:   "highlight",
-				groupIndex:  1,
-				visible:     false,
-				css: {
-					backgroundColor: "rgb(255, 255, 102)"
-				},
-				exec: function () {
-					var command, node, selection, args;
-
-					if ($.browser.msie || $.browser.safari) {
-						command = "backcolor";
-					} else {
-						command = "hilitecolor";
-					}
-
-					if ($.browser.msie) {
-						node = this.getInternalRange().parentElement();
-					} else {
-						selection = this.getInternalSelection();
-						node = selection.extentNode || selection.focusNode;
-
-						while (node.style === undefined) {
-							node = node.parentNode;
-							if (node.tagName && node.tagName.toLowerCase() === "body") {
-								return;
-							}
-						}
-					}
-
-					if (node.style.backgroundColor === "rgb(255, 255, 102)" ||
-							node.style.backgroundColor === "#ffff66") {
-						args = "#ffffff";
-					} else {
-						args = "#ffff66";
-					}
-
-					this.editorDoc.execCommand(command, false, args);
-				}
-			},
-
-			html: {
-				groupIndex: 10,
-				visible: false,
-				exec: function () {
-					var elementHeight;
-
-					if (this.options.resizeOptions && $.fn.resizable) {
-						elementHeight = this.element.height();
-					}
-
-					if (this.viewHTML) {
-						this.setContent(this.original.value);
-
-						$(this.original).hide();
-						this.editor.show();
-
-						if (this.options.resizeOptions && $.fn.resizable) {
-							// if element.height still the same after frame was shown
-							if (elementHeight === this.element.height()) {
-								this.element.height(elementHeight + this.editor.height());
-							}
-
-							this.element.resizable($.extend(true, {
-								alsoResize: this.editor
-							}, this.options.resizeOptions));
-						}
-						
-						this.ui.toolbar.find("li").each(function () {
-							var li = $(this);
-
-							if (li.hasClass("html")) {
-								li.removeClass("active");
-							} else {
-								li.removeClass('disabled');
-							}
-						});
-					} else {
-						this.saveContent();
-
-						$(this.original).css({
-							width:	this.element.outerWidth() - 6,
-							height: this.element.height() - this.ui.toolbar.height() - 6,
-							resize: "none"
-						}).show();
-						this.editor.hide();
-						
-						if (this.options.resizeOptions && $.fn.resizable) {
-							// if element.height still the same after frame was hidden
-							if (elementHeight === this.element.height()) {
-								this.element.height(this.ui.toolbar.height());
-							}
-
-							this.element.resizable("destroy");
-						}
-
-						this.ui.toolbar.find("li").each(function () {
-							var li = $(this);
-
-							if (li.hasClass("html")) {
-								li.addClass("active");
-							} else {
-								if (false === li.hasClass("fullscreen")) {
-									li.removeClass("active").addClass('disabled');
-								}
-							}
-						});
-					}
-
-					this.viewHTML = !(this.viewHTML);
-				},
-				tooltip: "View source code"
-			},
-
-			increaseFontSize: {
-				groupIndex: 9,
-				visible: false,
-				tags: ["big"],
-				tooltip: "Increase font size",
-				exec: function () {
-					this.increaseFontSize();
-				}
-			},
-
-			indent: {
-				groupIndex: 2,
-				visible: true,
-				tooltip: "Indent"
-			},
-
-			insertHorizontalRule: {
-				groupIndex: 6,
-				visible: true,
-				tags: ["hr"],
-				tooltip: "Insert Horizontal Rule"
-			},
-
-			insertImage: {
-				groupIndex: 6,
-				visible: true,
-				exec: function () {
-					var self = this;
-
-					if ($.wysiwyg.controls && $.wysiwyg.controls.image) {
-						$.wysiwyg.controls.image.init(this);
-					} else if ($.wysiwyg.autoload) {
-						$.wysiwyg.autoload.control("wysiwyg.image.js", function () {
-							self.controls.insertImage.exec.apply(self);
-						});
-					} else {
-						console.error("$.wysiwyg.controls.image not defined. You need to include wysiwyg.image.js file");
-					}
-				},
-				tags: ["img"],
-				tooltip: "Insert image"
-			},
-
-			insertOrderedList: {
-				groupIndex: 5,
-				visible: true,
-				tags: ["ol"],
-				tooltip: "Insert Ordered List"
-			},
-
-			insertTable: {
-				groupIndex: 6,
-				visible: true,
-				exec: function () {
-					var self = this;
-
-					if ($.wysiwyg.controls && $.wysiwyg.controls.table) {
-						$.wysiwyg.controls.table(this);
-					} else if ($.wysiwyg.autoload) {
-						$.wysiwyg.autoload.control("wysiwyg.table.js", function () {
-							self.controls.insertTable.exec.apply(self);
-						});
-					} else {
-						console.error("$.wysiwyg.controls.table not defined. You need to include wysiwyg.table.js file");
-					}
-				},
-				tags: ["table"],
-				tooltip: "Insert table"
-			},
-
-			insertUnorderedList: {
-				groupIndex: 5,
-				visible: true,
-				tags: ["ul"],
-				tooltip: "Insert Unordered List"
-			},
-
-			italic: {
-				groupIndex: 0,
-				visible: true,
-				tags: ["i", "em"],
-				css: {
-					fontStyle: "italic"
-				},
-				tooltip: "Italic",
-				hotkey: {"ctrl": 1, "key": 73}
-			},
-
-			justifyCenter: {
-				groupIndex: 1,
-				visible: true,
-				tags: ["center"],
-				css: {
-					textAlign: "center"
-				},
-				tooltip: "Justify Center"
-			},
-
-			justifyFull: {
-				groupIndex: 1,
-				visible: true,
-				css: {
-					textAlign: "justify"
-				},
-				tooltip: "Justify Full"
-			},
-
-			justifyLeft: {
-				visible: true,
-				groupIndex: 1,
-				css: {
-					textAlign: "left"
-				},
-				tooltip: "Justify Left"
-			},
-
-			justifyRight: {
-				groupIndex: 1,
-				visible: true,
-				css: {
-					textAlign: "right"
-				},
-				tooltip: "Justify Right"
-			},
-
-			ltr: {
-				groupIndex: 10,
-				visible: false,
-				exec: function () {
-					var p = this.dom.getElement("p");
-
-					if (!p) {
-						return false;
-					}
-
-					$(p).attr("dir", "ltr");
-					return true;
-				},
-				tooltip : "Left to Right"
-			},
-
-			outdent: {
-				groupIndex: 2,
-				visible: true,
-				tooltip: "Outdent"
-			},
-
-			paragraph: {
-				groupIndex: 7,
-				visible: false,
-				className: "paragraph",
-				command: "FormatBlock",
-				"arguments": ($.browser.msie || $.browser.safari) ? "<p>" : "p",
-				tags: ["p"],
-				tooltip: "Paragraph"
-			},
-
-			paste: {
-				groupIndex: 8,
-				visible: false,
-				tooltip: "Paste"
-			},
-
-			redo: {
-				groupIndex: 4,
-				visible: true,
-				tooltip: "Redo"
-			},
-
-			removeFormat: {
-				groupIndex: 10,
-				visible: true,
-				exec: function () {
-					this.removeFormat();
-				},
-				tooltip: "Remove formatting"
-			},
-
-			rtl: {
-				groupIndex: 10,
-				visible: false,
-				exec: function () {
-					var p = this.dom.getElement("p");
-
-					if (!p) {
-						return false;
-					}
-
-					$(p).attr("dir", "rtl");
-					return true;
-				},
-				tooltip : "Right to Left"
-			},
-
-			strikeThrough: {
-				groupIndex: 0,
-				visible: true,
-				tags: ["s", "strike"],
-				css: {
-					textDecoration: "line-through"
-				},
-				tooltip: "Strike-through"
-			},
-
-			subscript: {
-				groupIndex: 3,
-				visible: true,
-				tags: ["sub"],
-				tooltip: "Subscript"
-			},
-
-			superscript: {
-				groupIndex: 3,
-				visible: true,
-				tags: ["sup"],
-				tooltip: "Superscript"
-			},
-
-			underline: {
-				groupIndex: 0,
-				visible: true,
-				tags: ["u"],
-				css: {
-					textDecoration: "underline"
-				},
-				tooltip: "Underline",
-				hotkey: {"ctrl": 1, "key": 85}
-			},
-
-			undo: {
-				groupIndex: 4,
-				visible: true,
-				tooltip: "Undo"
-			},
-
-			code: {
-				visible : true,
-				groupIndex: 6,
-				tooltip: "Code snippet",
-				exec: function () {
-					var range	= this.getInternalRange(),
-						common	= $(range.commonAncestorContainer),
-						$nodeName = range.commonAncestorContainer.nodeName.toLowerCase();
-					if (common.parent("code").length) {
-						common.unwrap();
-					} else {
-						if ($nodeName !== "body") {
-							common.wrap("<code/>");
-						}
-					}
-				}
-			},
-			
-			cssWrap: {
-				visible : false,
-				groupIndex: 6,
-				tooltip: "CSS Wrapper",
-				exec: function () { 
-					$.wysiwyg.controls.cssWrap.init(this);
-				}
-			}
-			
-		};
-
-		this.defaults = {
-			html: '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body style="margin: 3px;">INITIAL_CONTENT</body></html>',
-			debug: false,
-			controls: {},
-			css: {},
-			events: {},
-			autoGrow: false,
-			autoSave: true,
-			brIE: true,					// http://code.google.com/p/jwysiwyg/issues/detail?id=15
-			formHeight: 270,
-			formWidth: 440,
-			iFrameClass: null,
-			initialContent: "<p>Initial content</p>",
-			maxHeight: 10000,			// see autoGrow
-			maxLength: 0,
-			messages: {
-				nonSelection: "Select the text you wish to link"
-			},
-			toolbarHtml: '<ul role="menu" class="toolbar"></ul>',
-			removeHeadings: false,
-			replaceDivWithP: false,
-			resizeOptions: false,
-			rmUnusedControls: false,	// https://github.com/akzhan/jwysiwyg/issues/52
-			rmUnwantedBr: true,			// http://code.google.com/p/jwysiwyg/issues/detail?id=11
-			tableFiller: "Lorem ipsum",
-			initialMinHeight: null,
-
-			controlImage: {
-				forceRelativeUrls: false
-			},
-
-			controlLink: {
-				forceRelativeUrls: false
-			},
-
-			plugins: { // placeholder for plugins settings
-				autoload: false,
-				i18n: false,
-				rmFormat: {
-					rmMsWordMarkup: false
-				}
-			},
-			
-			dialog : "default"
-		};
-
-		this.availableControlProperties = [
-			"arguments",
-			"callback",
-			"className",
-			"command",
-			"css",
-			"custom",
-			"exec",
-			"groupIndex",
-			"hotkey",
-			"icon",
-			"tags",
-			"tooltip",
-			"visible"
-		];
-
-		this.editor			= null;
-		this.editorDoc		= null;
-		this.element		= null;
-		this.options		= {};
-		this.original		= null;
-		this.savedRange		= null;
-		this.timers			= [];
-		this.validKeyCodes	= [8, 9, 13, 16, 17, 18, 19, 20, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46];
-
-		this.isDestroyed	= false;
-
-		this.dom		= { // DOM related properties and methods
-			ie:		{
-				parent: null // link to dom
-			},
-			w3c:	{
-				parent: null // link to dom
-			}
-		};
-		this.dom.parent		= this;
-		this.dom.ie.parent	= this.dom;
-		this.dom.w3c.parent	= this.dom;
-
-		this.ui			= {};	// UI related properties and methods
-		this.ui.self	= this;
-		this.ui.toolbar	= null;
-		this.ui.initialHeight = null; // ui.grow
-
-		this.dom.getAncestor = function (element, filterTagName) {
-			filterTagName = filterTagName.toLowerCase();
-			
-			while (element && typeof element.tagName != "undefined" && "body" !== element.tagName.toLowerCase()) {
-				if (filterTagName === element.tagName.toLowerCase()) {
-					return element;
-				}
-
-				element = element.parentNode;
-			}
-			if(!element.tagName && (element.previousSibling || element.nextSibling)) {
-				if(element.previousSibling) {
-					if(element.previousSibling.tagName.toLowerCase() == filterTagName) {
-						return element.previousSibling;
-					}
-				}	
-				if(element.nextSibling) {
-					if(element.nextSibling.tagName.toLowerCase() == filterTagName) {
-						return element.nextSibling;
-					}
-				}	
-			}
-
-			return null;
-		};
-
-		this.dom.getElement = function (filterTagName) {
-			var dom = this;
-			
-			filterTagName = filterTagName.toLowerCase();			
-
-			if (window.getSelection) {
-				return dom.w3c.getElement(filterTagName);
-			} else {
-				return dom.ie.getElement(filterTagName);
-			}
-		};
-
-		this.dom.ie.getElement = function (filterTagName) {
-			var dom			= this.parent,
-				selection	= dom.parent.getInternalSelection(),
-				range		= selection.createRange(),
-				element;
-
-			if ("Control" === selection.type) {
-				// control selection
-				if (1 === range.length) {
-					element = range.item(0);
-				} else {
-					// multiple control selection
-					return null;
-				}
-			} else {
-				element = range.parentElement();
-			}
-
-			return dom.getAncestor(element, filterTagName);
-		};
-
-		this.dom.w3c.getElement = function (filterTagName) {
-			var dom		= this.parent,
-				range	= dom.parent.getInternalRange(),
-				element;
-				
-			if (!range) {
-				return null;
-			}
-
-			element	= range.commonAncestorContainer;
-
-			if (3 === element.nodeType) {
-				element = element.parentNode;
-			}
-
-			// if startContainer not Text, Comment, or CDATASection element then
-			// startOffset is the number of child nodes between the start of the
-			// startContainer and the boundary point of the Range
-			if (element === range.startContainer) {
-				element = element.childNodes[range.startOffset];
-			}
-			
-			if(!element.tagName && (element.previousSibiling || element.nextSibling)) {
-				if(element.previousSibiling) {
-					if(element.previousSibiling.tagName.toLowerCase() == filterTagName) {
-						return element.previousSibiling;
-					}
-				}	
-				if(element.nextSibling) {
-					if(element.nextSibling.tagName.toLowerCase() == filterTagName) {
-						return element.nextSibling;
-					}
-				}	
-			}
-
-			return dom.getAncestor(element, filterTagName);
-		};
-
-		this.ui.addHoverClass = function () {
-			$(this).addClass("wysiwyg-button-hover");
-		};
-
-		this.ui.appendControls = function () {
-			var ui = this,
-				self = this.self,
-				controls = self.parseControls(),
-				hasVisibleControls	= true, // to prevent separator before first item
-				groups = [],
-				controlsByGroup = {},
-				i,
-				currentGroupIndex, // jslint wants all vars at top of function
-				iterateGroup = function (controlName, control) {
-					if (control.groupIndex && currentGroupIndex !== control.groupIndex) {
-						currentGroupIndex = control.groupIndex;
-						hasVisibleControls = false;
-					}
-
-					if (!control.visible) {
-						return;
-					}
-
-					if (!hasVisibleControls) {
-						ui.appendItemSeparator();
-						hasVisibleControls = true;
-					}
-
-					if (control.custom) {
-						ui.appendItemCustom(controlName, control);
-					} else {
-						ui.appendItem(controlName, control);
-					}
-				};
-
-			$.each(controls, function (name, c) {
-				var index = "empty";
-
-				if (undefined !== c.groupIndex) {
-					if ("" === c.groupIndex) {
-						index = "empty";
-					} else {
-						index = c.groupIndex;
-					}
-				}
-
-				if (undefined === controlsByGroup[index]) {
-					groups.push(index);
-					controlsByGroup[index] = {};
-				}
-				controlsByGroup[index][name] = c;
-			});
-
-			groups.sort(function (a, b) {
-				if ("number" === typeof (a) && typeof (a) === typeof (b)) {
-					return (a - b);
-				} else {
-					a = a.toString();
-					b = b.toString();
-
-					if (a > b) {
-						return 1;
-					}
-
-					if (a === b) {
-						return 0;
-					}
-
-					return -1;
-				}
-			});
-
-			if (0 < groups.length) {
-				// set to first index in groups to proper placement of separator
-				currentGroupIndex = groups[0];
-			}
-
-			for (i = 0; i < groups.length; i += 1) {
-				$.each(controlsByGroup[groups[i]], iterateGroup);
-			}
-		};
-
-		this.ui.appendItem = function (name, control) {
-			var self = this.self,
-				className = control.className || control.command || name || "empty",
-				tooltip = control.tooltip || control.command || name || "";
-
-			return $('<li role="menuitem" unselectable="on">' + (className) + "</li>")
-				.addClass(className)
-				.attr("title", tooltip)
-				.hover(this.addHoverClass, this.removeHoverClass)
-				.click(function () {
-					if ($(this).hasClass("disabled")) {
-						return false;
-					}
-
-					self.triggerControl.apply(self, [name, control]);
-
-					this.blur();
-					self.ui.returnRange();
-					self.ui.focus();
-					return true;
-				})
-				.appendTo(self.ui.toolbar);
-		};
-
-		this.ui.appendItemCustom = function (name, control) {
-			var self = this.self,
-				tooltip = control.tooltip || control.command || name || "";
-
-			if (control.callback) {
-				$(window).bind("trigger-" + name + ".wysiwyg", control.callback);
-			}
-
-			return $('<li role="menuitem" unselectable="on" style="background: url(\'' + control.icon + '\') no-repeat;"></li>')
-				.addClass("custom-command-" + name)
-				.addClass("wysiwyg-custom-command")
-				.addClass(name)
-				.attr("title", tooltip)
-				.hover(this.addHoverClass, this.removeHoverClass)
-				.click(function () {
-					if ($(this).hasClass("disabled")) {
-						return false;
-					}
-
-					self.triggerControl.apply(self, [name, control]);
-
-					this.blur();
-					self.ui.returnRange();
-					self.ui.focus();
-
-					self.triggerControlCallback(name);
-					return true;
-				})
-				.appendTo(self.ui.toolbar);
-		};
-
-		this.ui.appendItemSeparator = function () {
-			var self = this.self;
-			return $('<li role="separator" class="separator"></li>').appendTo(self.ui.toolbar);
-		};
-
-		this.autoSaveFunction = function () {
-			this.saveContent();
-		};
-
-		this.ui.checkTargets = function (element) {
-			var self = this.self;
-
-			$.each(self.options.controls, function (name, control) {
-				var className = control.className || control.command || name || "empty",
-					tags,
-					elm,
-					css,
-					el,
-					checkActiveStatus = function (cssProperty, cssValue) {
-						var handler;
-
-						if ("function" === typeof (cssValue)) {
-							handler = cssValue;
-							if (handler(el.css(cssProperty).toString().toLowerCase(), self)) {
-								self.ui.toolbar.find("." + className).addClass("active");
-							}
-						} else {
-							if (el.css(cssProperty).toString().toLowerCase() === cssValue) {
-								self.ui.toolbar.find("." + className).addClass("active");
-							}
-						}
-					};
-
-				if ("fullscreen" !== className) {
-					self.ui.toolbar.find("." + className).removeClass("active");
-				}
-
-				if (control.tags || (control.options && control.options.tags)) {
-					tags = control.tags || (control.options && control.options.tags);
-
-					elm = element;
-					while (elm) {
-						if (elm.nodeType !== 1) {
-							break;
-						}
-
-						if ($.inArray(elm.tagName.toLowerCase(), tags) !== -1) {
-							self.ui.toolbar.find("." + className).addClass("active");
-						}
-
-						elm = elm.parentNode;
-					}
-				}
-
-				if (control.css || (control.options && control.options.css)) {
-					css = control.css || (control.options && control.options.css);
-					el = $(element);
-
-					while (el) {
-						if (el[0].nodeType !== 1) {
-							break;
-						}
-						$.each(css, checkActiveStatus);
-
-						el = el.parent();
-					}
-				}
-			});
-		};
-
-		this.ui.designMode = function () {
-			var attempts = 3,
-				self = this.self,
-				runner;
-				runner = function (attempts) {
-					if ("on" === self.editorDoc.designMode) {
-						if (self.timers.designMode) {
-							window.clearTimeout(self.timers.designMode);
-						}
-
-						// IE needs to reget the document element (this.editorDoc) after designMode was set
-						if (self.innerDocument() !== self.editorDoc) {
-							self.ui.initFrame();
-						}
-
-						return;
-					}
-
-					try {
-						self.editorDoc.designMode = "on";
-					} catch (e) {
-					}
-
-					attempts -= 1;
-					if (attempts > 0) {
-						self.timers.designMode = window.setTimeout(function () { runner(attempts); }, 100);
-					}
-				};
-
-			runner(attempts);
-		};
-
-		this.destroy = function () {
-			this.isDestroyed = true;
-
-			var i, $form = this.element.closest("form");
-
-			for (i = 0; i < this.timers.length; i += 1) {
-				window.clearTimeout(this.timers[i]);
-			}
-
-			// Remove bindings
-			$form.unbind(".wysiwyg");
-			this.element.remove();
-			$.removeData(this.original, "wysiwyg");
-			$(this.original).show();
-			return this;
-		};
-
-		this.getRangeText = function () {
-			var r = this.getInternalRange();
-
-			if (r.toString) {
-				r = r.toString();
-			} else if (r.text) {	// IE
-				r = r.text;
-			}
-
-			return r;
-		};
-		//not used?
-		this.execute = function (command, arg) {
-			if (typeof (arg) === "undefined") {
-				arg = null;
-			}
-			this.editorDoc.execCommand(command, false, arg);
-		};
-
-		this.extendOptions = function (options) {
-			var controls = {};
-
-			/**
-			 * If the user set custom controls, we catch it, and merge with the
-			 * defaults controls later.
-			 */
-			if ("object" === typeof options.controls) {
-				controls = options.controls;
-				delete options.controls;
-			}
-
-			options = $.extend(true, {}, this.defaults, options);
-			options.controls = $.extend(true, {}, controls, this.controls, controls);
-
-			if (options.rmUnusedControls) {
-				$.each(options.controls, function (controlName) {
-					if (!controls[controlName]) {
-						delete options.controls[controlName];
-					}
-				});
-			}
-
-			return options;
-		};
-
-		this.ui.focus = function () {
-			var self = this.self;
-
-			self.editor.get(0).contentWindow.focus();
-			return self;
-		};
-
-		this.ui.returnRange = function () {
-			var self = this.self, sel;
-
-			if (self.savedRange !== null) {
-				if (window.getSelection) { //non IE and there is already a selection
-					sel = window.getSelection();
-					if (sel.rangeCount > 0) {
-						sel.removeAllRanges();
-					}
-					try {
-						sel.addRange(self.savedRange);
-					} catch (e) {
-						console.error(e);
-					}
-				} else if (window.document.createRange) { // non IE and no selection
-					window.getSelection().addRange(self.savedRange);
-				} else if (window.document.selection) { //IE
-					self.savedRange.select();
-				}
-
-				self.savedRange = null;
-			}
-		};
-
-		this.increaseFontSize = function () {
-			if ($.browser.mozilla || $.browser.opera) {
-				this.editorDoc.execCommand("increaseFontSize", false, null);
-			} else if ($.browser.safari) {				
-				var Range = this.getInternalRange(),
-					Selection = this.getInternalSelection(),
-					newNode = this.editorDoc.createElement("big");
-
-				// If cursor placed on text node
-				if (true === Range.collapsed && 3 === Range.commonAncestorContainer.nodeType) {
-					var text = Range.commonAncestorContainer.nodeValue.toString(),
-						start = text.lastIndexOf(" ", Range.startOffset) + 1,
-						end = (-1 === text.indexOf(" ", Range.startOffset)) ? text : text.indexOf(" ", Range.startOffset);
-
-					Range.setStart(Range.commonAncestorContainer, start);
-					Range.setEnd(Range.commonAncestorContainer, end);
-
-					Range.surroundContents(newNode);
-					Selection.addRange(Range);
-				} else {
-					Range.surroundContents(newNode);
-					Selection.removeAllRanges();
-					Selection.addRange(Range);
-				}
-			} else {
-				console.error("Internet Explorer?");
-			}
-		};
-
-		this.decreaseFontSize = function () {
-			if ($.browser.mozilla || $.browser.opera) {
-				this.editorDoc.execCommand("decreaseFontSize", false, null);
-			} else if ($.browser.safari) {
-				var Range = this.getInternalRange(),
-					Selection = this.getInternalSelection(),
-					newNode = this.editorDoc.createElement("small");
-
-				// If cursor placed on text node
-				if (true === Range.collapsed && 3 === Range.commonAncestorContainer.nodeType) {
-					var text = Range.commonAncestorContainer.nodeValue.toString(),
-						start = text.lastIndexOf(" ", Range.startOffset) + 1,
-						end = (-1 === text.indexOf(" ", Range.startOffset)) ? text : text.indexOf(" ", Range.startOffset);
-	
-					Range.setStart(Range.commonAncestorContainer, start);
-					Range.setEnd(Range.commonAncestorContainer, end);
-	
-					Range.surroundContents(newNode);
-					Selection.addRange(Range);
-				} else {
-					Range.surroundContents(newNode);
-					Selection.removeAllRanges();
-					Selection.addRange(Range);
-				}
-			} else {
-				console.error("Internet Explorer?");
-			}
-		};
-
-		this.getContent = function () {
-			if (this.viewHTML) {
-				this.setContent(this.original.value);
-			}
-			return this.events.filter('getContent', this.editorDoc.body.innerHTML);
-		};
-		
-		/**
-		 * A jWysiwyg specific event system.
-		 *
-		 * Example:
-		 * 
-		 * $("#editor").getWysiwyg().events.bind("getContent", function (orig) {
-		 *     return "<div id='content'>"+orgi+"</div>";
-		 * });
-		 * 
-		 * This makes it so that when ever getContent is called, it is wrapped in a div#content.
-		 */
-		this.events = {
-			_events : {},
-			
-			/**
-			 * Similar to jQuery's bind, but for jWysiwyg only.
-			 */
-			bind : function (eventName, callback) {
-				if (typeof (this._events.eventName) !== "object") {
-					this._events[eventName] = [];
-				}
-				this._events[eventName].push(callback);
-			},
-			
-			/**
-			 * Similar to jQuery's trigger, but for jWysiwyg only.
-			 */
-			trigger : function (eventName, args) {
-				if (typeof (this._events.eventName) === "object") {
-					var editor = this.editor;
-					$.each(this._events[eventName], function (k, v) {
-						if (typeof (v) === "function") {
-							v.apply(editor, args);
-						}
-					});
-				}
-			},
-			
-			/**
-			 * This "filters" `originalText` by passing it as the first argument to every callback
-			 * with the name `eventName` and taking the return value and passing it to the next function.
-			 *
-			 * This function returns the result after all the callbacks have been applied to `originalText`.
-			 */
-			filter : function (eventName, originalText) {
-				if (typeof (this._events[eventName]) === "object") {
-					var editor = this.editor,
-						args = Array.prototype.slice.call(arguments, 1);
-
-					$.each(this._events[eventName], function (k, v) {
-						if (typeof (v) === "function") {
-							originalText = v.apply(editor, args);
-						}
-					});
-				}
-				return originalText;
-			}
-		};
-
-		this.getElementByAttributeValue = function (tagName, attributeName, attributeValue) {
-			var i, value, elements = this.editorDoc.getElementsByTagName(tagName);
-
-			for (i = 0; i < elements.length; i += 1) {
-				value = elements[i].getAttribute(attributeName);
-
-				if ($.browser.msie) {
-					/** IE add full path, so I check by the last chars. */
-					value = value.substr(value.length - attributeValue.length);
-				}
-
-				if (value === attributeValue) {
-					return elements[i];
-				}
-			}
-
-			return false;
-		};
-
-		this.getInternalRange = function () {
-			var selection = this.getInternalSelection();
-
-			if (!selection) {
-				return null;
-			}
-
-			if (selection.rangeCount && selection.rangeCount > 0) { // w3c
-				return selection.getRangeAt(0);
-			} else if (selection.createRange) { // ie
-				return selection.createRange();
-			}
-
-			return null;
-		};
-
-		this.getInternalSelection = function () {
-			// firefox: document.getSelection is deprecated
-			if (this.editor.get(0).contentWindow) {
-				if (this.editor.get(0).contentWindow.getSelection) {
-					return this.editor.get(0).contentWindow.getSelection();
-				}
-				if (this.editor.get(0).contentWindow.selection) {
-					return this.editor.get(0).contentWindow.selection;
-				}
-			}
-			if (this.editorDoc.getSelection) {
-				return this.editorDoc.getSelection();
-			}
-			if (this.editorDoc.selection) {
-				return this.editorDoc.selection;
-			}
-
-			return null;
-		};
-
-		this.getRange = function () {
-			var selection = this.getSelection();
-
-			if (!selection) {
-				return null;
-			}
-
-			if (selection.rangeCount && selection.rangeCount > 0) { // w3c
-				selection.getRangeAt(0);
-			} else if (selection.createRange) { // ie
-				return selection.createRange();
-			}
-
-			return null;
-		};
-
-		this.getSelection = function () {
-			return (window.getSelection) ? window.getSelection() : window.document.selection;
-		};
-
-		// :TODO: you can type long string and letters will be hidden because of overflow
-		this.ui.grow = function () {
-			var self = this.self,
-				innerBody = $(self.editorDoc.body),
-				innerHeight = $.browser.msie ? innerBody[0].scrollHeight : innerBody.height() + 2 + 20, // 2 - borders, 20 - to prevent content jumping on grow
-				minHeight = self.ui.initialHeight,
-				height = Math.max(innerHeight, minHeight);
-
-			height = Math.min(height, self.options.maxHeight);
-
-			self.editor.attr("scrolling", height < self.options.maxHeight ? "no" : "auto"); // hide scrollbar firefox
-			innerBody.css("overflow", height < self.options.maxHeight ? "hidden" : ""); // hide scrollbar chrome
-
-			self.editor.get(0).height = height;
-
-			return self;
-		};
-
-		this.init = function (element, options) {
-			var self = this,
-				$form = $(element).closest("form"),
-				newX = element.width || element.clientWidth || 0,
-				newY = element.height || element.clientHeight || 0
-				;
-
-			this.options	= this.extendOptions(options);
-			this.original	= element;
-			this.ui.toolbar	= $(this.options.toolbarHtml);
-
-			if ($.browser.msie && parseInt($.browser.version, 10) < 8) {
-				this.options.autoGrow = false;
-			}
-
-			if (newX === 0 && element.cols) {
-				newX = (element.cols * 8) + 21;
-			}
-			if (newY === 0 && element.rows) {
-				newY = (element.rows * 16) + 16;
-			}
-
-			this.editor = $(window.location.protocol === "https:" ? '<iframe src="javascript:false;"></iframe>' : "<iframe></iframe>").attr("frameborder", "0");
-
-			if (this.options.iFrameClass) {
-				this.editor.addClass(this.options.iFrameClass);
-			} else {
-				this.editor.css({
-					minHeight: (newY - 6).toString() + "px",
-					// fix for issue 12 ( http://github.com/akzhan/jwysiwyg/issues/issue/12 )
-					width: (newX > 50) ? (newX - 8).toString() + "px" : ""
-				});
-				if ($.browser.msie && parseInt($.browser.version, 10) < 7) {
-					this.editor.css("height", newY.toString() + "px");
-				}
-			}
-			/**
-			 * http://code.google.com/p/jwysiwyg/issues/detail?id=96
-			 */
-			this.editor.attr("tabindex", $(element).attr("tabindex"));
-
-			this.element = $("<div/>").addClass("wysiwyg");
-
-			if (!this.options.iFrameClass) {
-				this.element.css({
-					width: (newX > 0) ? newX.toString() + "px" : "100%"
-				});
-			}
-
-			$(element).hide().before(this.element);
-
-			this.viewHTML = false;
-
-			/**
-			 * @link http://code.google.com/p/jwysiwyg/issues/detail?id=52
-			 */
-			this.initialContent = $(element).val();
-			this.ui.initFrame();
-
-			if (this.options.resizeOptions && $.fn.resizable) {
-				this.element.resizable($.extend(true, {
-					alsoResize: this.editor
-				}, this.options.resizeOptions));
-			}
-
-			if (this.options.autoSave) {
-				$form.bind("submit.wysiwyg", function () { self.autoSaveFunction(); });
-			}
-
-			$form.bind("reset.wysiwyg", function () { self.resetFunction(); });
-		};
-
-		this.ui.initFrame = function () {
-			var self = this.self,
-				stylesheet,
-				growHandler,
-				saveHandler;
-
-			self.ui.appendControls();
-			self.element.append(self.ui.toolbar)
-				.append($("<div><!-- --></div>")
-					.css({
-						clear: "both"
-					}))
-				.append(self.editor);
-
-			self.editorDoc = self.innerDocument();
-
-			if (self.isDestroyed) {
-				return null;
-			}
-
-			self.ui.designMode();
-			self.editorDoc.open();
-			self.editorDoc.write(
-				self.options.html
-					/**
-					 * @link http://code.google.com/p/jwysiwyg/issues/detail?id=144
-					 */
-					.replace(/INITIAL_CONTENT/, function () { return self.wrapInitialContent(); })
-			);
-			self.editorDoc.close();
-
-			$.wysiwyg.plugin.bind(self);
-
-			$(self.editorDoc).trigger("initFrame.wysiwyg");
-
-			$(self.editorDoc).bind("click.wysiwyg", function (event) {
-				self.ui.checkTargets(event.target ? event.target : event.srcElement);
-			});
-
-			/**
-			 * @link http://code.google.com/p/jwysiwyg/issues/detail?id=20
-			 */
-			$(self.original).focus(function () {
-				if ($(this).filter(":visible").length === 0) {
-					return;
-				}
-				self.ui.focus();
-			});
-
-			$(self.editorDoc).keydown(function (event) {
-				var emptyContentRegex;
-				if (event.keyCode === 8) { // backspace
-					emptyContentRegex = /^<([\w]+)[^>]*>(<br\/?>)?<\/\1>$/;
-					if (emptyContentRegex.test(self.getContent())) { // if content is empty
-						event.stopPropagation(); // prevent remove single empty tag
-						return false;
-					}
-				}
-				return true;
-			});
-
-			if (!$.browser.msie) {
-				$(self.editorDoc).keydown(function (event) {
-					var controlName;
-
-					/* Meta for Macs. tom@punkave.com */
-					if (event.ctrlKey || event.metaKey) {
-						for (controlName in self.controls) {
-							if (self.controls[controlName].hotkey && self.controls[controlName].hotkey.ctrl) {
-								if (event.keyCode === self.controls[controlName].hotkey.key) {
-									self.triggerControl.apply(self, [controlName, self.controls[controlName]]);
-
-									return false;
-								}
-							}
-						}
-					}
-
-					return true;
-				});
-			} else if (self.options.brIE) {
-				$(self.editorDoc).keydown(function (event) {
-					if (event.keyCode === 13) {
-						var rng = self.getRange();
-						rng.pasteHTML("<br/>");
-						rng.collapse(false);
-						rng.select();
-
-						return false;
-					}
-
-					return true;
-				});
-			}
-
-			if (self.options.plugins.rmFormat.rmMsWordMarkup) {
-				$(self.editorDoc).bind("keyup.wysiwyg", function (event) {
-					if (event.ctrlKey || event.metaKey) {
-						// CTRL + V (paste)
-						if (86 === event.keyCode) {
-							if ($.wysiwyg.rmFormat) {
-								if ("object" === typeof (self.options.plugins.rmFormat.rmMsWordMarkup)) {
-									$.wysiwyg.rmFormat.run(self, {rules: { msWordMarkup: self.options.plugins.rmFormat.rmMsWordMarkup }});
-								} else {
-									$.wysiwyg.rmFormat.run(self, {rules: { msWordMarkup: { enabled: true }}});
-								}
-							}
-						}
-					}
-				});
-			}
-
-			if (self.options.autoSave) {
-				$(self.editorDoc).keydown(function () { self.autoSaveFunction(); })
-					.keyup(function () { self.autoSaveFunction(); })
-					.mousedown(function () { self.autoSaveFunction(); })
-					.bind($.support.noCloneEvent ? "input.wysiwyg" : "paste.wysiwyg", function () { self.autoSaveFunction(); });
-			}
-
-			if (self.options.autoGrow) {
-				if (self.options.initialMinHeight !== null) {
-					self.ui.initialHeight = self.options.initialMinHeight;
-				} else {
-					self.ui.initialHeight = $(self.editorDoc).height();
-				}
-				$(self.editorDoc.body).css("border", "1px solid white"); // cancel margin collapsing
-
-				growHandler = function () {
-					self.ui.grow();
-				};
-
-				$(self.editorDoc).keyup(growHandler);
-				$(self.editorDoc).bind("editorRefresh.wysiwyg", growHandler);
-
-				// fix when content height > textarea height
-				self.ui.grow();
-			}
-
-			if (self.options.css) {
-				if (String === self.options.css.constructor) {
-					if ($.browser.msie) {
-						stylesheet = self.editorDoc.createStyleSheet(self.options.css);
-						$(stylesheet).attr({
-							"media":	"all"
-						});
-					} else {
-						stylesheet = $("<link/>").attr({
-							"href":		self.options.css,
-							"media":	"all",
-							"rel":		"stylesheet",
-							"type":		"text/css"
-						});
-
-						$(self.editorDoc).find("head").append(stylesheet);
-					}
-				} else {
-					self.timers.initFrame_Css = window.setTimeout(function () {
-						$(self.editorDoc.body).css(self.options.css);
-					}, 0);
-				}
-			}
-
-			if (self.initialContent.length === 0) {
-				if ("function" === typeof (self.options.initialContent)) {
-					self.setContent(self.options.initialContent());
-				} else {
-					self.setContent(self.options.initialContent);
-				}
-			}
-
-			if (self.options.maxLength > 0) {
-				$(self.editorDoc).keydown(function (event) {
-					if ($(self.editorDoc).text().length >= self.options.maxLength && $.inArray(event.which, self.validKeyCodes) === -1) {
-						event.preventDefault();
-					}
-				});
-			}
-			
-			// Support event callbacks
-			$.each(self.options.events, function (key, handler) {
-				$(self.editorDoc).bind(key + ".wysiwyg", function (event) {
-					// Trigger event handler, providing the event and api to 
-					// support additional functionality.
-					handler.apply(self.editorDoc, [event, self]);
-				});
-			});
-
-			// restores selection properly on focus
-			if ($.browser.msie) {
-				// Event chain: beforedeactivate => focusout => blur.
-				// Focusout & blur fired too late to handle internalRange() in dialogs.
-				// When clicked on input boxes both got range = null
-				$(self.editorDoc).bind("beforedeactivate.wysiwyg", function () {
-					self.savedRange = self.getInternalRange();
-				});
-			} else {
-				$(self.editorDoc).bind("blur.wysiwyg", function () {
-					self.savedRange = self.getInternalRange();
-				});
-			}
-
-			$(self.editorDoc.body).addClass("wysiwyg");
-			if (self.options.events && self.options.events.save) {
-				saveHandler = self.options.events.save;
-
-				$(self.editorDoc).bind("keyup.wysiwyg", saveHandler);
-				$(self.editorDoc).bind("change.wysiwyg", saveHandler);
-
-				if ($.support.noCloneEvent) {
-					$(self.editorDoc).bind("input.wysiwyg", saveHandler);
-				} else {
-					$(self.editorDoc).bind("paste.wysiwyg", saveHandler);
-					$(self.editorDoc).bind("cut.wysiwyg", saveHandler);
-				}
-			}
-			
-			/**
-			 * XHTML5 {@link https://github.com/akzhan/jwysiwyg/issues/152}
-			 */
-			if (self.options.xhtml5 && self.options.unicode) {
-				var replacements = {ne:8800,le:8804,para:182,xi:958,darr:8595,nu:957,oacute:243,Uacute:218,omega:969,prime:8242,pound:163,igrave:236,thorn:254,forall:8704,emsp:8195,lowast:8727,brvbar:166,alefsym:8501,nbsp:160,delta:948,clubs:9827,lArr:8656,Omega:937,Auml:196,cedil:184,and:8743,plusmn:177,ge:8805,raquo:187,uml:168,equiv:8801,laquo:171,rdquo:8221,Epsilon:917,divide:247,fnof:402,chi:967,Dagger:8225,iacute:237,rceil:8969,sigma:963,Oslash:216,acute:180,frac34:190,lrm:8206,upsih:978,Scaron:352,part:8706,exist:8707,nabla:8711,image:8465,prop:8733,zwj:8205,omicron:959,aacute:225,Yuml:376,Yacute:221,weierp:8472,rsquo:8217,otimes:8855,kappa:954,thetasym:977,harr:8596,Ouml:214,Iota:921,ograve:242,sdot:8901,copy:169,oplus:8853,acirc:226,sup:8835,zeta:950,Iacute:205,Oacute:211,crarr:8629,Nu:925,bdquo:8222,lsquo:8216,apos:39,Beta:914,eacute:233,egrave:232,lceil:8968,Kappa:922,piv:982,Ccedil:199,ldquo:8220,Xi:926,cent:162,uarr:8593,hellip:8230,Aacute:193,ensp:8194,sect:167,Ugrave:217,aelig:230,ordf:170,curren:164,sbquo:8218,macr:175,Phi:934,Eta:919,rho:961,Omicron:927,sup2:178,euro:8364,aring:229,Theta:920,mdash:8212,uuml:252,otilde:245,eta:951,uacute:250,rArr:8658,nsub:8836,agrave:224,notin:8713,ndash:8211,Psi:936,Ocirc:212,sube:8838,szlig:223,micro:181,not:172,sup1:185,middot:183,iota:953,ecirc:234,lsaquo:8249,thinsp:8201,sum:8721,ntilde:241,scaron:353,cap:8745,atilde:227,lang:10216,__replacement:65533,isin:8712,gamma:947,Euml:203,ang:8736,upsilon:965,Ntilde:209,hearts:9829,Alpha:913,Tau:932,spades:9824,dagger:8224,THORN:222,"int":8747,lambda:955,Eacute:201,Uuml:220,infin:8734,rlm:8207,Aring:197,ugrave:249,Egrave:200,Acirc:194,rsaquo:8250,ETH:208,oslash:248,alpha:945,Ograve:210,Prime:8243,mu:956,ni:8715,real:8476,bull:8226,beta:946,icirc:238,eth:240,prod:8719,larr:8592,ordm:186,perp:8869,Gamma:915,reg:174,ucirc:251,Pi:928,psi:968,tilde:732,asymp:8776,zwnj:8204,Agrave:192,deg:176,AElig:198,times:215,Delta:916,sim:8764,Otilde:213,Mu:924,uArr:8657,circ:710,theta:952,Rho:929,sup3:179,diams:9830,tau:964,Chi:935,frac14:188,oelig:339,shy:173,or:8744,dArr:8659,phi:966,iuml:239,Lambda:923,rfloor:8971,iexcl:161,cong:8773,ccedil:231,Icirc:206,frac12:189,loz:9674,rarr:8594,cup:8746,radic:8730,frasl:8260,euml:235,OElig:338,hArr:8660,Atilde:195,Upsilon:933,there4:8756,ouml:246,oline:8254,Ecirc:202,yacute:253,auml:228,permil:8240,sigmaf:962,iquest:191,empty:8709,pi:960,Ucirc:219,supe:8839,Igrave:204,yen:165,rang:10217,trade:8482,lfloor:8970,minus:8722,Zeta:918,sub:8834,epsilon:949,yuml:255,Sigma:931,Iuml:207,ocirc:244};
-				self.events.bind("getContent", function (text) {
-					return text.replace(/&(?:amp;)?(?!amp|lt|gt|quot)([a-z][a-z0-9]*);/gi, function (str, p1) {
-						if (!replacements[p1]) {
-							p1 = p1.toLowerCase();
-							if (!replacements[p1]) {
-								p1 = "__replacement";
-							}
-						}
-						
-						var num = replacements[p1];
-						/* Numeric return if ever wanted: return replacements[p1] ? "&#"+num+";" : ""; */
-						return String.fromCharCode(num);
-					});
-				});
-			}
-			$(self.original).trigger('ready.jwysiwyg', [self.editorDoc, self]);
-		};
-
-		this.innerDocument = function () {
-			var element = this.editor.get(0);
-
-			if (element.nodeName.toLowerCase() === "iframe") {
-				if (element.contentDocument) {				// Gecko
-					return element.contentDocument;
-				} else if (element.contentWindow) {			// IE
-					return element.contentWindow.document;
-				}
-
-				if (this.isDestroyed) {
-					return null;
-				}
-
-				console.error("Unexpected error in innerDocument");
-
-				/*
-				 return ( $.browser.msie )
-				 ? document.frames[element.id].document
-				 : element.contentWindow.document // contentDocument;
-				 */
-			}
-
-			return element;
-		};
-
-		this.insertHtml = function (szHTML) {
-			var img, range;
-
-			if (!szHTML || szHTML.length === 0) {
-				return this;
-			}
-
-			if ($.browser.msie) {
-				this.ui.focus();
-				this.editorDoc.execCommand("insertImage", false, "#jwysiwyg#");
-				img = this.getElementByAttributeValue("img", "src", "#jwysiwyg#");
-				if (img) {
-					$(img).replaceWith(szHTML);
-				}
-			} else {
-				if ($.browser.mozilla) { // @link https://github.com/akzhan/jwysiwyg/issues/50
-					if (1 === $(szHTML).length) {
-						range = this.getInternalRange();
-						range.deleteContents();
-						range.insertNode($(szHTML).get(0));
-					} else {
-						this.editorDoc.execCommand("insertHTML", false, szHTML);
-					}
-				} else {
-					if (!this.editorDoc.execCommand("insertHTML", false, szHTML)) {
-						this.editor.focus();
-						/* :TODO: place caret at the end
-						if (window.getSelection) {
-						} else {
-						}
-						this.editor.focus();
-						*/
-						this.editorDoc.execCommand("insertHTML", false, szHTML);
-					}
-				}
-			}
-
-			this.saveContent();
-			
-			return this;
-		};
-
-		this.parseControls = function () {
-			var self = this;
-
-			$.each(this.options.controls, function (controlName, control) {
-				$.each(control, function (propertyName) {
-					if (-1 === $.inArray(propertyName, self.availableControlProperties)) {
-						throw controlName + '["' + propertyName + '"]: property "' + propertyName + '" not exists in Wysiwyg.availableControlProperties';
-					}
-				});
-			});
-
-			if (this.options.parseControls) {
-				return this.options.parseControls.call(this);
-			}
-
-			return this.options.controls;
-		};
-
-		this.removeFormat = function () {
-			if ($.browser.msie) {
-				this.ui.focus();
-			}
-
-			if (this.options.removeHeadings) {
-				this.editorDoc.execCommand("formatBlock", false, "<p>"); // remove headings
-			}
-
-			this.editorDoc.execCommand("removeFormat", false, null);
-			this.editorDoc.execCommand("unlink", false, null);
-
-			if ($.wysiwyg.rmFormat && $.wysiwyg.rmFormat.enabled) {
-				if ("object" === typeof (this.options.plugins.rmFormat.rmMsWordMarkup)) {
-					$.wysiwyg.rmFormat.run(this, {rules: { msWordMarkup: this.options.plugins.rmFormat.rmMsWordMarkup }});
-				} else {
-					$.wysiwyg.rmFormat.run(this, {rules: { msWordMarkup: { enabled: true }}});
-				}
-			}
-
-			return this;
-		};
-
-		this.ui.removeHoverClass = function () {
-			$(this).removeClass("wysiwyg-button-hover");
-		};
-
-		this.resetFunction = function () {
-			this.setContent(this.initialContent);
-		};
-
-		this.saveContent = function () {
-			if (this.viewHTML)
-			{
-				return; // no need
-			}
-			if (this.original) {
-				var content, newContent;
-
-				content = this.getContent();
-
-				if (this.options.rmUnwantedBr) {
-					content = content.replace(/<br\/?>$/, "");
-				}
-
-				if (this.options.replaceDivWithP) {
-					newContent = $("<div/>").addClass("temp").append(content);
-
-					newContent.children("div").each(function () {
-						var element = $(this), p = element.find("p"), i;
-
-						if (0 === p.length) {
-							p = $("<p></p>");
-
-							if (this.attributes.length > 0) {
-								for (i = 0; i < this.attributes.length; i += 1) {
-									p.attr(this.attributes[i].name, element.attr(this.attributes[i].name));
-								}
-							}
-
-							p.append(element.html());
-
-							element.replaceWith(p);
-						}
-					});
-					
-					content = newContent.html();
-				}
-
-				$(this.original).val(content);
-
-				if (this.options.events && this.options.events.save) {
-					this.options.events.save.call(this);
-				}
-			}
-
-			return this;
-		};
-
-		this.setContent = function (newContent) {
-			this.editorDoc.body.innerHTML = newContent;
-			this.saveContent();
-
-			return this;
-		};
-
-		this.triggerControl = function (name, control) {
-			var cmd = control.command || name,
-				args = control["arguments"] || [];
-
-			if (control.exec) {
-				control.exec.apply(this);
-			} else {
-				this.ui.focus();
-				this.ui.withoutCss();
-				// when click <Cut>, <Copy> or <Paste> got "Access to XPConnect service denied" code: "1011"
-				// in Firefox untrusted JavaScript is not allowed to access the clipboard
-				try {
-					this.editorDoc.execCommand(cmd, false, args);
-				} catch (e) {
-					console.error(e);
-				}
-			}
-
-			if (this.options.autoSave) {
-				this.autoSaveFunction();
-			}
-		};
-
-		this.triggerControlCallback = function (name) {
-			$(window).trigger("trigger-" + name + ".wysiwyg", [this]);
-		};
-
-		this.ui.withoutCss = function () {
-			var self = this.self;
-
-			if ($.browser.mozilla) {
-				try {
-					self.editorDoc.execCommand("styleWithCSS", false, false);
-				} catch (e) {
-					try {
-						self.editorDoc.execCommand("useCSS", false, true);
-					} catch (e2) {
-					}
-				}
-			}
-
-			return self;
-		};
-
-		this.wrapInitialContent = function () {
-			var content = this.initialContent,
-				found = content.match(/<\/?p>/gi);
-
-			if (!found) {
-				return "<p>" + content + "</p>";
-			} else {
-				// :TODO: checking/replacing
-			}
-
-			return content;
-		};
-	}
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	$.wysiwyg = {
-		messages: {
-			noObject: "Something goes wrong, check object"
-		},
-
-		/**
-		 * Custom control support by Alec Gorge ( http://github.com/alecgorge )
-		 */
-		addControl: function (object, name, settings) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg"),
-					customControl = {},
-					toolbar;
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				customControl[name] = $.extend(true, {visible: true, custom: true}, settings);
-				$.extend(true, oWysiwyg.options.controls, customControl);
-
-				// render new toolbar
-				toolbar = $(oWysiwyg.options.toolbarHtml);
-				oWysiwyg.ui.toolbar.replaceWith(toolbar);
-				oWysiwyg.ui.toolbar = toolbar;
-				oWysiwyg.ui.appendControls();
-			});
-		},
-
-		clear: function (object) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				oWysiwyg.setContent("");
-			});
-		},
-
-		console: console, // let our console be available for extensions
-
-		destroy: function (object) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				oWysiwyg.destroy();
-			});
-		},
-
-		"document": function (object) {
-			// no chains because of return
-			var oWysiwyg = object.data("wysiwyg");
-
-			if (!oWysiwyg) {
-				return undefined;
-			}
-
-			return $(oWysiwyg.editorDoc);
-		},
-
-		getContent: function (object) {
-			// no chains because of return
-			var oWysiwyg = object.data("wysiwyg");
-
-			if (!oWysiwyg) {
-				return undefined;
-			}
-
-			return oWysiwyg.getContent();
-		},
-
-		init: function (object, options) {
-			return object.each(function () {
-				var opts = $.extend(true, {}, options),
-					obj;
-
-				// :4fun:
-				// remove this textarea validation and change line in this.saveContent function
-				// $(this.original).val(content); to $(this.original).html(content);
-				// now you can make WYSIWYG editor on h1, p, and many more tags
-				if (("textarea" !== this.nodeName.toLowerCase()) || $(this).data("wysiwyg")) {
-					return;
-				}
-
-				obj = new Wysiwyg();
-				obj.init(this, opts);
-				$.data(this, "wysiwyg", obj);
-
-				$(obj.editorDoc).trigger("afterInit.wysiwyg");
-			});
-		},
-
-		insertHtml: function (object, szHTML) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				oWysiwyg.insertHtml(szHTML);
-			});
-		},
-
-		plugin: {
-			listeners: {},
-
-			bind: function (Wysiwyg) {
-				var self = this;
-
-				$.each(this.listeners, function (action, handlers) {
-					var i, plugin;
-
-					for (i = 0; i < handlers.length; i += 1) {
-						plugin = self.parseName(handlers[i]);
-
-						$(Wysiwyg.editorDoc).bind(action + ".wysiwyg", {plugin: plugin}, function (event) {
-							$.wysiwyg[event.data.plugin.name][event.data.plugin.method].apply($.wysiwyg[event.data.plugin.name], [Wysiwyg]);
-						});
-					}
-				});
-			},
-
-			exists: function (name) {
-				var plugin;
-
-				if ("string" !== typeof (name)) {
-					return false;
-				}
-
-				plugin = this.parseName(name);
-
-				if (!$.wysiwyg[plugin.name] || !$.wysiwyg[plugin.name][plugin.method]) {
-					return false;
-				}
-
-				return true;
-			},
-
-			listen: function (action, handler) {
-				var plugin;
-
-				plugin = this.parseName(handler);
-
-				if (!$.wysiwyg[plugin.name] || !$.wysiwyg[plugin.name][plugin.method]) {
-					return false;
-				}
-
-				if (!this.listeners[action]) {
-					this.listeners[action] = [];
-				}
-
-				this.listeners[action].push(handler);
-
-				return true;
-			},
-
-			parseName: function (name) {
-				var elements;
-
-				if ("string" !== typeof (name)) {
-					return false;
-				}
-
-				elements = name.split(".");
-
-				if (2 > elements.length) {
-					return false;
-				}
-
-				return {name: elements[0], method: elements[1]};
-			},
-
-			register: function (data) {
-				if (!data.name) {
-					console.error("Plugin name missing");
-				}
-
-				$.each($.wysiwyg, function (pluginName) {
-					if (pluginName === data.name) {
-						console.error("Plugin with name '" + data.name + "' was already registered");
-					}
-				});
-
-				$.wysiwyg[data.name] = data;
-
-				return true;
-			}
-		},
-
-		removeFormat: function (object) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				oWysiwyg.removeFormat();
-			});
-		},
-
-		save: function (object) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				oWysiwyg.saveContent();
-			});
-		},
-
-		selectAll: function (object) {
-			var oWysiwyg = object.data("wysiwyg"), oBody, oRange, selection;
-
-			if (!oWysiwyg) {
-				return this;
-			}
-
-			oBody = oWysiwyg.editorDoc.body;
-			if (window.getSelection) {
-				selection = oWysiwyg.getInternalSelection();
-				selection.selectAllChildren(oBody);
-			} else {
-				oRange = oBody.createTextRange();
-				oRange.moveToElementText(oBody);
-				oRange.select();
-			}
-		},
-
-		setContent: function (object, newContent) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				oWysiwyg.setContent(newContent);
-			});
-		},
-
-		triggerControl: function (object, controlName) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				if (!oWysiwyg.controls[controlName]) {
-					console.error("Control '" + controlName + "' not exists");
-				}
-
-				oWysiwyg.triggerControl.apply(oWysiwyg, [controlName, oWysiwyg.controls[controlName]]);
-			});
-		},
-
-		support: {
-			prop: supportsProp
-		},
-
-		utils: {
-			extraSafeEntities: [["<", ">", "'", '"', " "], [32]],
-
-			encodeEntities: function (str) {
-				var self = this, aStr, aRet = [];
-
-				if (this.extraSafeEntities[1].length === 0) {
-					$.each(this.extraSafeEntities[0], function (i, ch) {
-						self.extraSafeEntities[1].push(ch.charCodeAt(0));
-					});
-				}
-				aStr = str.split("");
-				$.each(aStr, function (i) {
-					var iC = aStr[i].charCodeAt(0);
-					if ($.inArray(iC, self.extraSafeEntities[1]) && (iC < 65 || iC > 127 || (iC > 90 && iC < 97))) {
-						aRet.push('&#' + iC + ';');
-					} else {
-						aRet.push(aStr[i]);
-					}
-				});
-
-				return aRet.join('');
-			}
-		}
-	};
-
-	/**
-	 * Unifies dialog methods to allow custom implementations
-	 * 
-	 * Events:
-	 *     * afterOpen
-	 *     * beforeShow
-	 *     * afterShow
-	 *     * beforeHide
-	 *     * afterHide
-	 *     * beforeClose
-	 *     * afterClose
-	 * 
-	 * Example:
-	 * var dialog = new ($.wysiwyg.dialog)($('#idToTextArea').data('wysiwyg'), {"title": "Test", "content": "form data, etc."});
-	 * 
-	 * dialog.bind("afterOpen", function () { alert('you should see a dialog behind this one!'); });
-	 * 
-	 * dialog.open();
-	 * 
-	 * 
-	 */
-	$.wysiwyg.dialog = function (jWysiwyg, opts) {
-		
-		var theme	= (jWysiwyg && jWysiwyg.options && jWysiwyg.options.dialog) ? jWysiwyg.options.dialog : (opts.theme ? opts.theme : "default"),
-			obj		= new $.wysiwyg.dialog.createDialog(theme),
-			that	= this,
-			$that	= $(that);
-				
-		this.options = {
-			"modal": true,
-			"draggable": true,
-			"title": "Title",
-			"content": "Content",
-			"width":"auto",
-			"height":"auto",
-			"open": false,
-			"close": false
-		};
-
-		this.isOpen = false;
-
-		$.extend(this.options, opts);
-
-		this.object = obj;
-
-		// Opens a dialog with the specified content
-		this.open = function () {
-			this.isOpen = true;
-
-			obj.init.apply(that, []);
-			var $dialog = obj.show.apply(that, []);
-
-			$that.trigger("afterOpen", [$dialog]);
-			
-		};
-
-		this.show = function () {
-			this.isOpen = true;
-			
-			$that.trigger("beforeShow");
-			
-			var $dialog = obj.show.apply(that, []);
-			
-			$that.trigger("afterShow");
-		};
-
-		this.hide = function () {
-			this.isOpen = false;
-			
-			$that.trigger("beforeHide");
-			
-			var $dialog = obj.hide.apply(that, []);
-			
-			$that.trigger("afterHide", [$dialog]);
-		};
-
-		// Closes the dialog window.
-		this.close = function () {
-			this.isOpen = false;
-						
-			var $dialog = obj.hide.apply(that, []);
-			
-			$that.trigger("beforeClose", [$dialog]);
-			
-			obj.destroy.apply(that, []);
-			
-			$that.trigger("afterClose", [$dialog]);
-			
-		};
-
-		if (this.options.open) {
-			$that.bind("afterOpen", this.options.open);
-		}
-		if (this.options.close) {
-			$that.bind("afterClose", this.options.close);
-		}
-
-		return this;
-	};
-
-	// "Static" Dialog methods.
-	$.extend(true, $.wysiwyg.dialog, {
-		_themes : {}, // sample {"Theme Name": object}
-		_theme : "", // the current theme
-
-		register : function(name, obj) {
-			$.wysiwyg.dialog._themes[name] = obj;
-		},
-
-		deregister : function (name) {
-			delete $.wysiwyg.dialog._themes[name];
-		},
-
-		createDialog : function (name) {
-			return new ($.wysiwyg.dialog._themes[name]);
-		}
-	});
-
-	$(function () { // need access to jQuery UI stuff.
-		if (jQuery.ui) {
-			$.wysiwyg.dialog.register("jqueryui", function () {
-				var that = this;
-
-				this._$dialog = null;
-
-				this.init = function() {
-					var abstractDialog	= this,
-						content 		= this.options.content;
-
-					if (typeof content === 'object') {
-						if (typeof content.html === 'function') {
-							content = content.html();
-						} else if(typeof content.toString === 'function') {
-							content = content.toString();
-						}
-					}
-
-					that._$dialog = $('<div></div>').attr('title', this.options.title).html(content);
-
-					var dialogHeight = this.options.height == 'auto' ? 300 : this.options.height,
-						dialogWidth = this.options.width == 'auto' ? 450 : this.options.width;
-
-					// console.log(that._$dialog);
-					
-					that._$dialog.dialog({
-						modal: this.options.modal,
-						draggable: this.options.draggable,
-						height: dialogHeight,
-						width: dialogWidth
-					});
-
-					return that._$dialog;
-				};
-
-				this.show = function () {
-					that._$dialog.dialog("open");
-					return that._$dialog;
-				};
-
-				this.hide = function () {
-					that._$dialog.dialog("close");
-					return that._$dialog;
-				};
-
-				this.destroy = function() {
-					that._$dialog.dialog("destroy");
-					return that._$dialog;
-				};
-			});
-		}
-
-		$.wysiwyg.dialog.register("default", function () {
-			var that = this;
-
-			this._$dialog = null;
-
-			this.init = function() {
-				var abstractDialog	= this,
-					content 		= this.options.content;
-
-				if (typeof content === 'object') {
-					if(typeof content.html === 'function') {
-						content = content.html();
-					}
-					else if(typeof content.toString === 'function') {
-						content = content.toString();
-					}
-				}
-
-				that._$dialog = $('<div class="wysiwyg-dialog"></div>');
-
-				var $topbar = $('<div class="wysiwyg-dialog-topbar"><div class="wysiwyg-dialog-close-wrapper"></div><div class="wysiwyg-dialog-title">'+this.options.title+'</div></div>');
-				var $link = $('<a href="#" class="wysiwyg-dialog-close-button">X</a>');
-
-				$link.click(function () {
-					abstractDialog.close(); // this is important it makes sure that is close from the abstract $.wysiwyg.dialog instace, not just locally 
-				});
-				
-				$topbar.find('.wysiwyg-dialog-close-wrapper').prepend($link);
-
-				var $dcontent = $('<div class="wysiwyg-dialog-content">'+content+'</div>');
-
-				that._$dialog.append($topbar).append($dcontent);
-				
-				// Set dialog's height & width, and position it correctly:
-				var dialogHeight = this.options.height == 'auto' ? 300 : this.options.height,
-					dialogWidth = this.options.width == 'auto' ? 450 : this.options.width;
-				that._$dialog.hide().css({
-					"width": dialogWidth,
-					"height": dialogHeight,
-					"left": (($(window).width() - dialogWidth) / 2),
-					"top": (($(window).height() - dialogHeight) / 3)
-				});
-
-				$("body").append(that._$dialog);
-
-				return that._$dialog;
-			};
-
-			this.show = function () {
-
-				// Modal feature:
-				if (this.options.modal) {
-					that._$dialog.wrap('<div class="wysiwyg-dialog-modal-div"></div>');
-				}
-				
-				// Draggable feature:
-				if (this.options.draggable) { 
-					
-					var mouseDown = false;
-					
-					that._$dialog.find("div.wysiwyg-dialog-topbar").bind("mousedown", function (e) {
-						e.preventDefault();
-						$(this).css({ "cursor": "move" });
-						var $topbar = $(this),
-							_dialog = $(this).parents(".wysiwyg-dialog"),
-							offsetX = (e.pageX - parseInt(_dialog.css("left"), 10)),
-							offsetY = (e.pageY - parseInt(_dialog.css("top"), 10));
-						mouseDown = true;
-						$(this).css({ "cursor": "move" });
-						
-						$(document).bind("mousemove", function (e) {
-							e.preventDefault();
-							if (mouseDown) {
-								_dialog.css({
-									"top": (e.pageY - offsetY),
-									"left": (e.pageX - offsetX)
-								});
-							}
-						}).bind("mouseup", function (e) {
-							e.preventDefault();
-							mouseDown = false;
-							$topbar.css({ "cursor": "auto" });
-							$(document).unbind("mousemove").unbind("mouseup");
-						});
-					
-					});
-				}
-				
-				that._$dialog.show();
-				return that._$dialog;
-
-			};
-
-			this.hide = function () {
-				that._$dialog.hide();
-				return that._$dialog;
-			};
-
-			this.destroy = function() {
-			
-				// Modal feature:
-				if (this.options.modal) { 
-					that._$dialog.unwrap();
-				}
-				
-				// Draggable feature:
-				if (this.options.draggable) { 
-					that._$dialog.find("div.wysiwyg-dialog-topbar").unbind("mousedown");
-				}
-				
-				that._$dialog.remove();
-				return that._$dialog;
-			};
-		});
-	});
-	// end Dialog
-
-	$.fn.wysiwyg = function (method) {
-		var args = arguments, plugin;
-
-		if ("undefined" !== typeof $.wysiwyg[method]) {
-			// set argument object to undefined
-			args = Array.prototype.concat.call([args[0]], [this], Array.prototype.slice.call(args, 1));
-			return $.wysiwyg[method].apply($.wysiwyg, Array.prototype.slice.call(args, 1));
-		} else if ("object" === typeof method || !method) {
-			Array.prototype.unshift.call(args, this);
-			return $.wysiwyg.init.apply($.wysiwyg, args);
-		} else if ($.wysiwyg.plugin.exists(method)) {
-			plugin = $.wysiwyg.plugin.parseName(method);
-			args = Array.prototype.concat.call([args[0]], [this], Array.prototype.slice.call(args, 1));
-			return $.wysiwyg[plugin.name][plugin.method].apply($.wysiwyg[plugin.name], Array.prototype.slice.call(args, 1));
-		} else {
-			console.error("Method '" +  method + "' does not exist on jQuery.wysiwyg.\nTry to include some extra controls or plugins");
-		}
-	};
-	
-	$.fn.getWysiwyg = function () {
-		return $.data(this, "wysiwyg");
-	};
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.embed.js elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.embed.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.embed.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.embed.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,323 +0,0 @@
-/**
- * Interfaces with /admin/embed to list embeddable objects.
- */
-(function ($) {
-	"use strict";
-	
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.embed.js depends on $.wysiwyg";
-	}
-	
-	var embed = {
-		name: "embed",
-		version: "0.98",
-		ajaxHandler: "/admin/embed",
-		embedList: [],
-		selected: null,
-		ready: true,
-		init: function (Wysiwyg, callback) {
-			$.get (this.ajaxHandler, function (res) {
-				this.embedList = res;
-				var embedder = new embedObj(this.embedList);
-				embedder.load (Wysiwyg, callback);
-			});
-		}
-	};
-	
-	$.wysiwyg.plugin.register (embed);
-	
-	function embedObj (_embed_list) {
-		this.loaded = false;
-		this.embed_list = _embed_list;
-		this.dialog = null;
-		
-		this.load = function (Wysiwyg, callback) {
-			var self = this;
-			self.loaded = true;
-			
-			var uiHtml = '<div id="wysiwyg-embed-content"><div class="wysiwyg-embed-objects"><ul class="wysiwyg-embed-object-list"></ul></div><div class="wysiwyg-embed-object-form"></div><br clear="both" /></div>';
-
-			self.embed_element = Wysiwyg.dom.getElement ('span');
-			if (self.embed_element && ! $(self.embed_element).hasClass ('embedded')) {
-				self.embed_element = null;
-			}
-			
-			if ($.wysiwyg.dialog) {
-				var embedUI = new $.wysiwyg.dialog(_embed_list, {
-					title: 'Dynamic Objects',
-					content: uiHtml,
-					width: 550,
-					close: function (e, dialog) {
-						self.dialog = null;
-					},
-					open: function (e, dialog) {
-						self.dialog = dialog;
-						
-						var uiHtml = '';
-						for (var i = 0; i < _embed_list.length; i++) {
-							uiHtml += '<li><a href="javascript:void(0)" class="wysiwyg-embed-object" id="wysiwyg-embed-object-' + i + '" data-handler="' + i + '">' + _embed_list[i].label + '</a></li>';
-						}
-						$('.wysiwyg-embed-object-list').html (uiHtml);
-						// enable pager for list
-						$('.wysiwyg-embed-object-list').quickPager ();
-						$('.wysiwyg-embed-object-form').html ('Select an object on the left.');
-						$('.wysiwyg-embed-object').click (function () {
-							var i = 0,
-								dia = self.dialog,
-								num = $(this).data ('handler'),
-								obj = _embed_list[num],
-								f = $('.wysiwyg-embed-object-form'),
-								uiHtml = '';
-
-							if (obj.fields.length === 0) {
-								callback (self.embed_element, obj.handler);
-								embedUI.close ();
-								return false;
-							}
-
-							//Added to allow easy two columning in forms
-							if(obj.columns==2){
-								var columnwidth = 150;
-								var inputsizer = 15;
-								var columner = 'left';
-							}
-							else
-							{
-								var columnwidth = 300;
-								var inputsizer = 30;
-								var columner = 'left';
-							}
-							
-							// generate a form screen
-							uiHtml = '<form id="wysiwyg-embed-form"><input type="hidden" name="handler" value="' + obj.handler + '" />';
-							uiHtml += '<p><strong>' + obj.label + '</strong></p>';
-
-							for (var i in obj.fields) {
-								if (! obj.fields[i].initial) {
-									obj.fields[i].initial = '';
-								}
-
-								//Flip flops for easy column tracking
-								if (obj.columns==2 && columner=='left') {
-									columner = 'right';
-								}
-								else
-								{
-									columner = 'left';
-								}
-								
-
-								if (obj.fields[i].type == 'select') {
-									uiHtml += '<p style="width:' + columnwidth + 'px;float:' + columner + '">' + obj.fields[i].label + ':<br /><select name="' + obj.fields[i].name + '">';
-									for (var o in obj.fields[i].values) {
-										if (obj.fields[i].values[o].hasOwnProperty ('key') && obj.fields[i].values[o].hasOwnProperty ('value')) {
-											if (obj.fields[i].initial == obj.fields[i].values[o].key) {
-												uiHtml += '<option value="' + obj.fields[i].values[o].key + '" selected>' + obj.fields[i].values[o].value + '</option>';
-											} else {
-												uiHtml += '<option value="' + obj.fields[i].values[o].key + '">' + obj.fields[i].values[o].value + '</option>';
-											}
-										} else {
-											if (obj.fields[i].initial == obj.fields[i].values[o]) {
-												uiHtml += '<option value="' + obj.fields[i].values[o] + '" selected>' + obj.fields[i].values[o] + '</option>';
-											} else {
-												uiHtml += '<option value="' + obj.fields[i].values[o] + '">' + obj.fields[i].values[o] + '</option>';
-											}
-										}
-									}
-									if (obj.fields[i].message) {
-										uiHtml += '</select><span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
-									} else {
-										uiHtml += '</select></p>';
-									}
-								} else if (obj.fields[i].type == 'textarea') {
-									uiHtml += '<p style="width:' + columnwidth + 'px;float:' + columner + '">' + obj.fields[i].label + ':<br /><textarea name="' + obj.fields[i].name + '" cols="' + inputsizer +'" rows="6">' + obj.fields[i].initial + '</textarea>';
-									if (obj.fields[i].message) {
-										uiHtml += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
-									} else {
-										uiHtml += '</p>';
-									}
-								} else if (obj.fields[i].type == 'file') {
-									uiHtml += '<p style="width:' + columnwidth + 'px;float:' + columner + '">' + obj.fields[i].label + ':<br /><input type="text" name="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" size="' + inputsizer +'" />';
-									if ($.wysiwyg.fileManager && $.wysiwyg.fileManager.ready) {
-										// Add the File Manager icon:
-										uiHtml += ' <div class="wysiwyg-fileManager" id="' + obj.fields[i].name + '-fileManager" title="Browse..." style="float: left; margin-top: -40px; margin-left: 200px" />';
-									}
-									if (obj.fields[i].message) {
-										uiHtml += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
-									} else {
-										uiHtml += '</p>';
-									}
-								} else {
-									uiHtml += '<p style="width:' + columnwidth + 'px;float:' + columner + '">' + obj.fields[i].label + ':<br /><input type="text" name="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" size="' + inputsizer +'" />';
-									if (obj.fields[i].message) {
-										uiHtml += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span></p>';
-										
-									} else {
-										uiHtml += '</p>';
-									}
-								}
-							}
-
-							uiHtml += '<p><input type="submit" class="wysiwyg-embed-object-form-submit" value="Embed" /></p>';
-							uiHtml += '</form>';
-							f.html (uiHtml);
-
-							// File Manager (select file):
-							if ($.wysiwyg.fileManager) {
-								for (var i in obj.fields) {
-									if (obj.fields[i].type == 'file') {
-										$('#' + obj.fields[i].name + '-fileManager').bind('click', function () {
-											$.wysiwyg.fileManager.init(function (selected) {
-												dialog.find('input[name=' + obj.fields[i].name + ']').val(selected);
-												dialog.find('input[name=' + obj.fields[i].name + ']').trigger('change');
-											});
-										});
-									}
-								}
-							}
-
-							$('.wysiwyg-embed-object-form-submit').click (function (evt) {
-								evt.preventDefault ();
-								var i = 0,
-									fields = obj.fields,
-									form = $(this)[0].form,
-									out = form.elements.handler.value,
-									key_list = ['name', 'label', 'type', 'initial', 'message', 'require', 'callback', 'values', 'filter'],
-									filters = false;
-
-								// validate form
-								for (var i in fields) {
-									var rules = [];
-									for (var r in fields[i]) {
-										var in_key_list = false;
-										for (var k = 0; k < key_list.length; k++) {
-											if (r == key_list[k]) {
-												in_key_list = true;
-												break;
-											}
-										}
-										if (! in_key_list) {
-											// it's a rule!
-											if (! $(form.elements[i]).verify_value ({form:form, type:r, validator: fields[i][r]})) {
-												$('#' + i + '-msg').show ();
-												return false;
-											}
-										}
-									}
-								}
-
-								// are there any filters?
-								for (var i in fields) {
-									if (fields[i].hasOwnProperty ('filter')) {
-										filters = true;
-										break;
-									}
-								}
-
-								// build an array of valid data from the fields
-								var unfiltered = {};
-								for (var i = 0; i < form.elements.length; i++) {
-									if (form.elements[i].name == 'handler' || ! form.elements[i].name) {
-										continue;
-									}
-									unfiltered[form.elements[i].name] = form.elements[i].value;
-								}
-
-								if (filters) {
-									// apply filters server-side then submit the form with the returned values
-									$.post ('/admin/embed/filters', {handler: out, data: unfiltered}, function (res) {
-										submit_form (embedUI, self.embed_element, callback, out, res.data);
-									});
-								} else {
-									// no filters, submit the form now
-									submit_form (embedUI, self.embed_element, callback, out, unfiltered);
-								}
-
-								return false;
-							});
-						});
-					},
-					modal: false
-				});
-				
-				embedUI.open ();
-				
-				// If we're editing an existing element, start the dynamic objects dialog
-				// with that element selected and its form pre-filled with the existing
-				// embedded data.
-				if (self.embed_element !== null) {
-					var emb = parse_embed_string ($(self.embed_element).text ());
-					for (var i = 0; i < _embed_list.length; i++) {
-						if (_embed_list[i].handler === emb.handler) {
-							$('#wysiwyg-embed-object-' + i).click ();
-							// Fill with original values
-							var f = $('#wysiwyg-embed-form')[0];
-							for (var k in emb.data) {
-								if (f.elements[k]) {
-									if (_embed_list[i].fields[k].hasOwnProperty ('filter')) {
-										var data = {};
-										data[k] = emb.data[k];
-										$.post ('/admin/embed/filters', {handler: emb.handler, data: data, reverse: 'yes'}, function (res) {
-											f.elements[k].value = res.data[k];
-										});
-									} else {
-										f.elements[k].value = emb.data[k];
-									}
-								}
-							}
-							break;
-						}
-					}
-				}
-			}
-		};
-	};
-
-	/**
-	 * Parse an embed string and return its handler name and a list of
-	 * field names and values.
-	 */
-	function parse_embed_string (str) {
-		str = str.replace ('{!', '').replace ('!}', '').trim ();
-		if (str.indexOf ('?') !== -1) {
-			var split = str.split ('?'),
-				handler = split[0],
-				params = (split[1].indexOf ('&') !== -1) ? split[1].split ('&') : [split[1]],
-				data = {};
-
-			for (var i = 0; i < params.length; i++) {
-				split = params[i].split ('=');
-				data[split[0]] = decodeURIComponent (split[1]);
-			}
-		} else {
-			var handler = str,
-				data = {};
-		}
-		return {
-			handler: handler,
-			data: data
-		};
-	}
-
-	/**
-	 * Inserts the data into the content and closes the dialog window.
-	 *
-	 * Parameters:
-	 *
-	 * - The UI object to be closed when finished
-	 * - The span element to embed into
-	 * - The callback function to call
-	 * - The initial string containing the handler name
-	 * - The array of field names and values
-	 */
-	function submit_form (ui, embed_element, callback, out, data) {
-		var i, sep = '?';
-		for (i in data) {
-			out += sep + i + '=' + escape (data[i]);
-			sep = '&';
-		}
-		callback (embed_element, out);
-		ui.close ();
-		return false;
-	}
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.fileManager.js elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.fileManager.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.fileManager.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.fileManager.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,581 +0,0 @@
-/**
- * File Manager plugin for jWYSIWYG
- * 
- * Yotam Bar-On, 2011
- * 
- * The file manager ui uses the Silk icon set from FAMFAMFAM
- * 
- */
-
-(function ($) {
-	"use strict";
-
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.fileManager.js depends on $.wysiwyg";
-	}
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	// Only for show
-	var fileManager = {
-		name: "fileManager",
-		version: "0.98", // Same as jwysiwyg
-		ajaxHandler: "",
-		selected: null,
-		setAjaxHandler: function (_handler) {
-			this.ajaxHandler = _handler;
-			this.ready = true;
-
-			return this;
-		},
-		ready: false,
-		init: function (callback) {
-			if (this.ready) {
-				var manager = new fileManagerObj(this.ajaxHandler);
-				manager.load(callback);
-			} else {
-				console.log("$.wysiwyg.fileManager: Must set ajax handler first, using $.wysiwyg.fileManager.setAjaxHandler()");
-				return false;
-			}
-		}
-	};
-
-	// Register:
-	$.wysiwyg.plugin.register(fileManager);
-
-	// Private object:
-	function fileManagerObj (_handler) {
-		this.handler = _handler;
-		this.loaded = false;
-		this.move = false;
-		this.rename = false;
-		this.remove = false;
-		this.upload = false;
-		this.mkdir = false;
-		this.selectedFile = "";
-		this.curDir = "/";
-		this.curListHtml = "";
-		this.dialog = null;
-
-		/**
-		 * Methods
-		 */
-		var console = $.wysiwyg.console;
-		console.log(this.handler);
-
-		this.load = function (callback) {
-			var self = this;
-			self.loaded = true;
-			self.authenticate(function (response) {
-				if (response !== "success") {
-					alert(response);
-					return false;
-				}
-				// Wrap the file list:
-				var uiHtml = 	'<div class="wysiwyg-files-wrapper">' +
-								'<input type="text" name="url" />' +
-								'<div id="wysiwyg-files-list-wrapper"></div>';
-
-				// If handler does not support upload, icon will not appear:
-				if (self.upload.enabled) {
-					uiHtml += 	'<div class="wysiwyg-files-action-upload" title="{{upload_action}}"></div>';
-				}
-
-				// If handler does not support mkdir, icon will not appear:
-				if (self.mkdir.enabled) {
-					uiHtml += 	'<div class="wysiwyg-files-action-mkdir" title="{{mkdir_action}}"></div>';
-				}
-
-				uiHtml += 	'<input style="display:none;" type="button" name="submit" value="{{select}}" />' +
-							'</div>';
-
-				uiHtml = self.i18n(uiHtml);
-				if ($.wysiwyg.dialog) { 
-					// Support for native $.wysiwyg.dialog()
-					var _title = self.i18n("{{file_manager}}");
-					var fileManagerUI = new $.wysiwyg.dialog(_handler, {
-						"title": _title,
-						"content": uiHtml,
-						"close": function (e, dialog) {
-							self.dialog = null;
-						},
-						"open": function (e, dialog) {
-
-							self.dialog = dialog;
-
-							self.loadDir();
-							self.bindHover();
-							self.bindBrowse();
-
-
-							// Select file bindings
-							dialog.find("input[name=submit]").bind("click", function () {
-								var file = dialog.find("input[name=url]").val();
-								fileManagerUI.close();
-								self.loaded = false;
-								callback(file);
-							});
-
-							// Create Directory
-							$(".wysiwyg-files-action-mkdir").bind("click", function (e) {
-								e.preventDefault();
-								var uiHtml =	'<div>' +
-												'<input type="text" class="wysiwyg-files-textfield" name="newName" value="{{new_directory}}" />' +
-												'<input type="button" name="cancel" value="{{cancel}}" />' +
-												'<input type="button" name="create" value="{{create}}" />' +
-												'</div>';
-								uiHtml = self.i18n(uiHtml);
-								var _mkdirTitle = self.i18n("{{mkdir_title}}");
-								var mkdirDialog = new $.wysiwyg.dialog(null, {
-									"title": _mkdirTitle,
-									"content": uiHtml,
-									"close": function () {
-
-									},
-									"open": function (e, _dialog) {
-
-										_dialog.find("input[name=create]").bind("click", function () {
-											self.mkDir(_dialog.find("input[name=newName]").val(), function (response) {
-												self.loadDir();
-												mkdirDialog.close();
-											});
-										});
-
-										_dialog.find("input[name=cancel]").bind("click", function () {
-											mkdirDialog.close();
-										});
-									}
-								});
-								mkdirDialog.open();								
-							});
-
-							// Upload File
-							$(".wysiwyg-files-action-upload").bind("click", function (e) {
-								self.loadUploadUI();
-							});
-
-						},
-						"modal": false
-						// "theme": "jqueryui"
-					});
-
-					fileManagerUI.open();
-
-				} else {
-					// If $.wysiwyg.dialog() does not work..
-					console.error("$.wysiwyg.fileManager: This plugin uses the native dialog system of jWYSIWYG. Make sure you are using version > 0.98");
-				}
-			});
-		};
-
-		this.authenticate = function (callback) {
-			if (!this.loaded) {
-				return false;
-			}
-			var self = this;
-			$.getJSON(self.handler, { "action": "auth", "auth": "jwysiwyg" }, function (json) {
-				if (json.success) {
-					self.move = json.data.move;
-					self.rename = json.data.rename;
-					self.remove = json.data.remove;
-					self.mkdir = json.data.mkdir;
-					self.upload = json.data.upload;
-					callback("success");
-				} else {
-					console.log("$.wysiwyg.fileManager: Unable to authenticate handler.");
-					callback(json.error);
-				}
-			});
-		};
-
-		this.loadDir = function () {
-			if (!this.loaded) {
-				return false;
-			}
-			var self = this;
-			self.curDir = self.curDir.replace(/\/$/, '') + '/';
-
-			// Retreives list of files inside a certain directory:
-			$.getJSON(self.handler, { "dir": self.curDir, "action": "list" }, function (json) {
-				if (json.success) {
-					self.dialog.find("#wysiwyg-files-list-wrapper").removeClass("wysiwyg-files-ajax").html(self.listDir(json));
-					self.bindHover();
-					self.bindBrowse();
-				} else {
-					alert(json.error);
-				}
-			});
-		};
-
-		/**
-		 * Ajax Methods.
-		 */
-
-		// List Directory
-		this.listDir = function (json) {
-			if (!this.loaded) {
-				return false;
-			}
-			var self = this;
-			var treeHtml = '<ul class="wysiwyg-files-list">';
-			if (self.curDir !== "/") {
-				var prevDir = self.curDir.replace(/[^\/]+\/?$/, '');
-				treeHtml += '<li class="wysiwyg-files-dir wysiwyg-files-dir-prev">' +
-							'<a href="#" rel="'+prevDir+'" title="{{previous_directory}}">' +
-							self.curDir +
-							'</a></li>';
-			}
-			$.each(json.data.directories, function(name, dirPath) {
-				treeHtml += '<li class="wysiwyg-files-dir">' +
-							'<a href="#" rel="'+dirPath+'">' +
-							name +
-							'</a></li>';
-			});			
-			$.each(json.data.files, function(name, url) {
-				var ext = name.replace(/^.*?\./, '').toLowerCase();
-				treeHtml += '<li class="wysiwyg-files-file wysiwyg-files-'+ext+'">' +
-							'<a href="#" rel="'+url+'">' +
-							name +
-							'</a></li>';
-			});			
-			treeHtml += '</ul>';
-
-			return self.i18n(treeHtml);
-		};
-
-/**
- * Should be remembered for future implementation:
- * If handler does not support certain actions - do not show their icons/button.
- * Only action a handler MUST support is "list" (list directory).
- * 
- * Implemented: 28-May-2011, Yotam Bar-On
- */
-
-		// Remove File Method:
-		this.removeFile = function (type, callback) {
-			if (!this.loaded) { return false; }
-			if (!this.remove.enabled) { console.log("$.wysiwyg.fileManager: handler: remove is disabled."); return false; }
-
-			var self = this;
-			$.getJSON(self.remove.handler, { "action": "remove", "type": type, "dir": self.curDir, "file": self.selectedFile  }, function (json) {
-				if (json.success) {
-					alert(json.data);
-				} else {
-					alert(json.error);
-				}
-				callback(json);
-			});
-		};
-
-		// Rename File Method
-		this.renameFile = function (type, newName, callback) {
-			if (!this.loaded) { return false; }
-			if (!this.rename.enabled) { console.log("$.wysiwyg.fileManager: handler: rename is disabled."); return false; }
-
-			var self = this;
-			$.getJSON(self.rename.handler, { "action": "rename", "type": type, "dir": self.curDir, "file": self.selectedFile, "newName": newName  }, function (json) {
-				if (json.success) {
-					alert(json.data);
-				} else {
-					alert(json.error);
-				}
-				callback(json);
-			});		
-		};	
-
-		// Make Directory Method
-		this.mkDir = function (newName, callback) {
-			if (!this.loaded) { return false; }
-			if (!this.mkdir.enabled) { console.log("$.wysiwyg.fileManager: handler: mkdir is disabled."); return false; }
-
-			var self = this;
-			$.getJSON(self.mkdir.handler, { "action": "mkdir", "dir": self.curDir, "newName": newName  }, function (json) {
-				if (json.success) {
-					alert(json.data);
-				} else {
-					alert(json.error);
-				}
-				callback(json);
-			});		
-		};
-
-		/**
-		 * Currently we will not support moving of files. This will be supported only when a more interactive interface will be introduced.
-		 */
-		this.moveFile = function () {
-			if (!this.loaded) { return false; }
-			if (!this.move.enabled) { console.log("$.wysiwyg.fileManager: handler: move is disabled."); return false; }	
-			var self = this;
-			return false;
-		};
-
-		// Upload:
-		this.loadUploadUI = function () {
-			if (!this.loaded) { return false; }
-			if (!this.upload.enabled) { console.log("$.wysiwyg.fileManager: handler: move is disabled."); return false; }	
-			var self = this;
-			var uiHtml = 	'<form enctype="multipart/form-data" method="post" action="' + self.upload.handler + '">' + 
-							'<p><input type="file" name="handle" /><br>' + 
-							'<input type="text" name="newName" style="width:250px; border:solid 1px !important;" /><br>' + 
-							'<input type="text" name="action" style="display:none;" value="upload" /><br></p>' + 
-							'<input type="text" name="dir" style="display:none;" value="' + self.curDir + '" /></p>' + 
-							'<input type="submit" name="submit" value="{{submit}}" />' +
-							'</form>';
-			uiHtml = self.i18n(uiHtml);
-
-			var _uploadTitle = self.i18n("{{upload_title}}");
-
-			var dialog = new $.wysiwyg.dialog(null, {
-				"title": _uploadTitle,
-				"content": "",
-				"open": function (e, _dialog) {
-
-					$("<iframe/>", { "class": "wysiwyg-files-upload" }).load(function () {
-						var $doc = $(this).contents();
-						$doc.find("body").append(uiHtml);
-						$doc.find("input[type=file]").change(function () {
-							var $val = $(this).val();
-							$val = $val.replace(/.*[\\\/]/, '');
-							// Should implement validation of extensions before submitting form
-							$doc.find("input[name=newName]").val($val);
-						});
-
-					}).appendTo(_dialog.find(".wysiwyg-dialog-content"));
-
-				},
-				"close": function () {
-					self.loadDir();
-				}
-			});
-
-			dialog.open();
-		};
-
-		/**
-		 * i18n Support.
-		 * The below methods will enable basic support for i18n
-		 */		
-
-		// Default translations (EN):
-		this.defaultTranslations = {
-			"file_manager": 		"File Manager",
-			"upload_title":			"Upload File",
-			"rename_title":			"Rename File",
-			"remove_title":			"Remove File",
-			"mkdir_title":			"Create Directory",
-			"upload_action": 		"Upload new file to current directory",
-			"mkdir_action": 		"Create new directory",
-			"remove_action": 		"Remove this file",
-			"rename_action": 		"Rename this file" ,	
-			"delete_message": 		"Are you sure you want to delete this file?",
-			"new_directory": 		"New Directory",
-			"previous_directory": 	"Go to previous directory",
-			"rename":				"Rename",
-			"select": 				"Select",
-			"create": 				"Create",
-			"submit": 				"Submit",
-			"cancel": 				"Cancel",
-			"yes":					"Yes",
-			"no":					"No"
-		};
-		/** 
-		 * Take an html string with placeholders: {{placeholder}} and translate it. 
-		 * It takes all labels and trys to translate them. 
-		 * If there is no translation (or i18n plugin is not loaded) it will use the defaults.
-		 */
-		this.i18n = function (tHtml) {
-			var map = this.defaultTranslations;
-			// If i18n plugin exists:
-			if ($.wysiwyg.i18n) {
-				$.each(map, function (key, val) {
-					map[key] = $.wysiwyg.i18n.t(key, "dialogs.fileManager");
-				});
-			}
-
-			$.each(map, function (key, val) {
-				tHtml = tHtml.replace("{{" + key + "}}", val);
-			});
-
-			return tHtml;
-		};
-
-		/**
-		 * BINDINGS FOR ELEMENTS
-		 * The below methods are bind methods for elements inside the File Manager's dialogs.
-		 * Their purpose is to enable simple coding of the dialog interfaces,
-		 * and to make the use of "live" deprecated.
-		 */
-
-		this.bindHover = function () {
-
-			var self = this,
-				dialog = self.dialog,
-				object = dialog.find("li");
-
-			/** 
-			 * HOVER + ACTIONS BINDINGS:
-			 */
-			object.bind("mouseenter", function () {
-				$(this).addClass("wysiwyg-files-hover");
-
-				if ($(this).hasClass("wysiwyg-files-dir")) {
-					$(this).addClass("wysiwyg-files-dir-expanded");
-				}
-
-				// Add action buttons:
-				if (!$(this).hasClass("wysiwyg-files-dir-prev")) {
-
-					$(".wysiwyg-files-action").remove();
-
-					// If handler does not support remove, icon will not appear:
-					if (self.remove.enabled) {
-						var rmText = self.i18n("{{remove_action}}");
-						$("<div/>", { "class": "wysiwyg-files-action wysiwyg-files-action-remove", "title": rmText }).appendTo(this);
-
-						// "Remove" binding:
-						$(".wysiwyg-files-action-remove").bind("click", function (e) {
-							e.preventDefault();
-							var entry = $(this).parent("li");
-							// What are we deleting?
-							var type = entry.hasClass("wysiwyg-files-file") ? "file" : "dir";
-							var uiHtml = 	"<p>{{delete_message}}</p>" + 
-											'<div class="">' + 
-											'<input type="button" name="cancel" value="{{no}}" />' +
-											'<input type="button" name="remove" value="{{yes}}" />' +
-											"</div>";
-							uiHtml = self.i18n(uiHtml);
-
-							var _removeTitle = self.i18n("{{remove_title}}");
-
-							var removeDialog = 	new $.wysiwyg.dialog(null, {
-								"title": _removeTitle,
-								"content": uiHtml,
-								"close": function () {
-
-								},
-								"open": function (e, _dialog) {
-									_dialog.find("input[name=remove]").bind("click", function () {
-										self.selectedFile = entry.find("a").text();
-										self.removeFile(type, function (response) {
-											self.loadDir();
-											removeDialog.close();
-										});
-									});
-
-									_dialog.find("input[name=cancel]").bind("click", function () {
-										removeDialog.close();
-									});
-								}
-							});
-
-							removeDialog.open();
-
-						});
-
-					}
-
-					// If handler does not support rename, icon will not appear:
-					if (self.rename.enabled) {
-						var rnText = self.i18n("{{rename_action}}");
-						$("<div/>", { "class": "wysiwyg-files-action wysiwyg-files-action-rename", "title": rnText }).appendTo(this);
-
-						// "Rename" binding:
-						$(".wysiwyg-files-action-rename").bind("click", function (e) {
-							e.preventDefault();
-							var entry = $(this).parent("li");
-							// What are we deleting?
-							var type = entry.hasClass("wysiwyg-files-file") ? "file" : "dir";
-							var uiHtml = 	'<div>' +
-											'<input type="text" class="wysiwyg-files-textfield" name="newName" value="' + entry.find("a").text() + '" />' +
-											'<input type="button" name="cancel" value="{{cancel}}" />' +
-											'<input type="button" name="rename" value="{{rename}}" />' +
-											'</div>';
-							uiHtml = self.i18n(uiHtml);
-							var _renameTitle = self.i18n("{{rename_title}}");
-
-							var renameDialog = new $.wysiwyg.dialog(null, {
-								"title": _renameTitle,
-								"content": uiHtml,
-								"close": function () {
-
-								},
-								"open": function (e, _dialog) {
-									_dialog.find("input[name=rename]").bind("click", function () {
-										self.selectedFile = entry.find("a").text();
-										self.renameFile(type, _dialog.find("input[name=newName]").val(), function (response) {
-											self.loadDir();
-											renameDialog.close();
-										});
-									});
-
-									_dialog.find("input[name=cancel]").bind("click", function () {
-										renameDialog.close();
-									});
-								}
-							});
-
-							renameDialog.open();
-
-						});					
-
-					}
-
-
-				}
-			}).bind("mouseleave", function () {
-				$(this).removeClass("wysiwyg-files-dir-expanded");
-				$(this).removeClass("wysiwyg-files-hover");
-
-				// Remove action buttons:
-				$(".wysiwyg-files-action").remove();
-			});
-
-		}
-
-		/**
-		 * BROWSING BINDINGS
-		 */
-		this.bindBrowse = function () {
-
-			var self = this,
-				dialog = self.dialog,
-				object = self.dialog.find("li").find("a");
-
-			// Browse:
-			object.bind("click", function (e) {
-
-				$(".wysiwyg-files-wrapper").find("li").css("backgroundColor", "#FFF");
-
-				// Browse Directory:
-				if ($(this).parent("li").hasClass("wysiwyg-files-dir")) {
-					self.selectedFile = $(this).attr("rel");
-					self.curDir = $(this).attr("rel");
-					dialog.find("input[name=submit]").hide();
-					$(".wysiwyg-files-wrapper").find("input[name=url]").val("");
-					$('#wysiwyg-files-list-wrapper').addClass("wysiwyg-files-ajax");
-					$('#wysiwyg-files-list-wrapper').html("");
-					self.loadDir();
-					dialog.find("input[name=submit]").hide();
-
-				// Select Entry:
-				} else {
-					self.selectedFile = $(this).text();
-					$(this).parent("li").css("backgroundColor", "#BDF");
-					$(".wysiwyg-files-wrapper").find("input[name=url]").val($(this).attr("rel"));
-					dialog.find("input[name=submit]").show();
-				}
-
-			});
-
-		}
-
-		this.bindPreview = function (object) {
-
-		var self = this;
-
-		}
-
-	}
-
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.fullscreen.js elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.fullscreen.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.fullscreen.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.fullscreen.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,141 +0,0 @@
-/**
- * Fullscreen plugin
- * 
- * Depends on jWYSIWYG
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.fullscreen.js depends on $.wysiwyg";
-	}
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	var fullscreen = {
-		name: "fullscreen",
-		version: "",
-		defaults: {
-			css: {
-				editor: {
-					width:	"100%",
-					height:	"100%"
-				},
-				element: {
-					width:	"100%",
-					height:	"100%",
-					position: "absolute",
-					left:	"0px",
-					top:	"0px",
-					background: "rgb(255, 255, 255)",
-					padding: "0px",
-					"border-bottom-color": "",
-					"border-bottom-style": "",
-					"border-bottom-width": "0px",
-					"border-left-color": "",
-					"border-left-style": "",
-					"border-left-width": "0px",
-					"border-right-color": "",
-					"border-right-style": "",
-					"border-right-width": "0px",
-					"border-top-color": "",
-					"border-top-style": "",
-					"border-top-width": "0px",
-					"z-index": 1000
-				},
-				original: {
-					width:	"100%",
-					height:	"100%",
-					position: "absolute",
-					left:	"0px",
-					top:	"0px",
-					background: "rgb(255, 255, 255)",
-					padding: "0px",
-					"border-bottom-color": "",
-					"border-bottom-style": "",
-					"border-bottom-width": "0px",
-					"border-left-color": "",
-					"border-left-style": "",
-					"border-left-width": "0px",
-					"border-right-color": "",
-					"border-right-style": "",
-					"border-right-width": "0px",
-					"border-top-color": "",
-					"border-top-style": "",
-					"border-top-width": "0px",
-					"z-index": 1000
-				}
-			}
-		},
-		options: {},
-		originalBoundary: {
-			editor: {},
-			element: {},
-			original: {}
-		},
-
-		init: function (Wysiwyg, options) {
-			options = options || {};
-			this.options = $.extend(true, this.defaults, options);
-
-			if (Wysiwyg.ui.toolbar.find(".fullscreen").hasClass("active")) {
-				this.restore(Wysiwyg);
-				Wysiwyg.ui.toolbar.find(".fullscreen").removeClass("active");
-			} else {
-				this.stretch(Wysiwyg);
-				Wysiwyg.ui.toolbar.find(".fullscreen").addClass("active");
-			}
-		},
-
-		restore: function (Wysiwyg) {
-			var propertyName;
-
-			for (propertyName in this.defaults.css.editor) {
-				Wysiwyg.editor.css(propertyName, this.originalBoundary.editor[propertyName]);
-				this.originalBoundary.editor[propertyName] = null;
-			}
-
-			for (propertyName in this.defaults.css.element) {
-				Wysiwyg.element.css(propertyName, this.originalBoundary.element[propertyName]);
-				this.originalBoundary.element[propertyName] = null;
-			}
-
-			for (propertyName in this.defaults.css.original) {
-				$(Wysiwyg.original).css(propertyName, this.originalBoundary.original[propertyName]);
-				this.originalBoundary.original[propertyName] = null;
-			}
-		},
-
-		stretch: function (Wysiwyg) {
-			var propertyName;
-
-			// save previous values
-			for (propertyName in this.defaults.css.editor) {
-				this.originalBoundary.editor[propertyName] = Wysiwyg.editor.css(propertyName);
-			}
-
-			for (propertyName in this.defaults.css.element) {
-				this.originalBoundary.element[propertyName] = Wysiwyg.element.css(propertyName);
-			}
-
-			for (propertyName in this.defaults.css.original) {
-				this.originalBoundary.original[propertyName] = $(Wysiwyg.original).css(propertyName);
-			}
-
-			// set new values
-			for (propertyName in this.defaults.css.editor) {
-				Wysiwyg.editor.css(propertyName, this.options.css.editor[propertyName]);
-			}
-
-			for (propertyName in this.defaults.css.element) {
-				Wysiwyg.element.css(propertyName, this.options.css.element[propertyName]);
-			}
-
-			this.options.css.original.top = Wysiwyg.ui.toolbar.css("height");
-			for (propertyName in this.defaults.css.original) {
-				$(Wysiwyg.original).css(propertyName, this.options.css.original[propertyName]);
-			}
-		}
-	};
-
-	$.wysiwyg.plugin.register(fullscreen);
-})(jQuery);
diff -urBNs elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.i18n.js elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.i18n.js
--- elefant-elefant_1_3_2_beta/js/wysiwyg/plugins/wysiwyg.i18n.js	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/js/wysiwyg/plugins/wysiwyg.i18n.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,99 +0,0 @@
-/**
- * Internationalization plugin
- * 
- * Depends on jWYSIWYG
- */
-(function ($) {
-	if (undefined === $.wysiwyg) {
-		throw "wysiwyg.i18n.js depends on $.wysiwyg";
-	}
-
-	/*
-	 * Wysiwyg namespace: public properties and methods
-	 */
-	var i18n = {
-		name: "i18n",
-		version: "",
-		defaults: {
-			lang: "en",			// change to your language by passing lang option
-			wysiwygLang: "en"	// default WYSIWYG language
-		},
-		lang: {},
-		options: {},
-
-		init: function (Wysiwyg, lang) {
-			if (!Wysiwyg.options.plugins[this.name]) {
-				return true;
-			}
-
-			this.options = $.extend(true, this.defaults, Wysiwyg.options.plugins[this.name]);
-
-			if (lang) {
-				this.options.lang = lang;
-			} else {
-				lang = this.options.lang;
-			}
-
-			if ((lang !== this.options.wysiwygLang) && (undefined === $.wysiwyg.i18n.lang[lang])) {
-				if ($.wysiwyg.autoload) {
-					$.wysiwyg.autoload.lang("lang." + lang + ".js", function () {
-						$.wysiwyg.i18n.init(Wysiwyg, lang);
-					});
-				} else {
-					throw 'Language "' + lang + '" not found in $.wysiwyg.i18n. You need to include this language file';
-				}
-			}
-
-			this.translateControls(Wysiwyg, lang);
-		},
-
-		translateControls: function (Wysiwyg, lang) {
-			Wysiwyg.ui.toolbar.find("li").each(function () {
-				if (Wysiwyg.options.controls[$(this).attr("class")] && Wysiwyg.options.controls[$(this).attr("class")].visible) {
-					$(this).attr("title", $.wysiwyg.i18n.t(Wysiwyg.options.controls[$(this).attr("class")].tooltip, "controls", lang));
-				}
-			});
-		},
-
-		run: function (object, lang) {
-			return object.each(function () {
-				var oWysiwyg = $(this).data("wysiwyg");
-
-				if (!oWysiwyg) {
-					return this;
-				}
-
-				$.wysiwyg.i18n.init(oWysiwyg, lang);
-			});
-		},
-
-		t: function (phrase, section, lang) {
-			var i, section_array, transObject;
-
-			if (!lang) {
-				lang = this.options.lang;
-			}
-
-			if ((lang === this.options.wysiwygLang) || (!this.lang[lang])) {
-				return phrase;
-			}
-
-			transObject = this.lang[lang];
-			section_array = section.split(".");
-			for (i = 0; i < section_array.length; i += 1) {
-				if (transObject[section_array[i]]) {
-					transObject = transObject[section_array[i]];
-				}
-			}
-
-			if (transObject[phrase]) {
-				return transObject[phrase];
-			}
-
-			return phrase;
-		}
-	};
-
-	$.wysiwyg.plugin.register(i18n);
-	$.wysiwyg.plugin.listen("initFrame", "i18n.init");
-})(jQuery);
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/lang/cs.php and elefant-elefant_1_3_3_beta/lang/cs.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lang/de.php elefant-elefant_1_3_3_beta/lang/de.php
--- elefant-elefant_1_3_2_beta/lang/de.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/lang/de.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,7 @@
+<?php
+
+$this->lang_hash['de'] = array (
+	'.htaccess file is missing from the site root. Please save the following file to your server:' => '.htaccess-Datei von der Website root fehlt. Bitte speichern Sie die Datei auf Ihrem Server',	'Cancel' => 'Abbrechen',	'Query executed.' => 'Abfrage ausgeführt.',	'Log Out' => 'Abmelden',	'Paragraph text' => 'Absatztext',	'Submit' => 'Abschicken',	'Drop' => 'Absetzen',	'Admin Email' => 'Admin E-Mail',	'Admin login' => 'Admin Login',	'Admin Password' => 'Admin Passwort',	'Admin access required.' => 'Admin-Zugang erforderlich',	'Updated image not found.' => 'Aktualisiertes Bild wurde nicht gefunden.',	'Current' => 'Aktuell',	'Current version' => 'Aktuelle Version',	'View current' => 'Aktuelle Version ansehen',	'Show all fields' => 'Alle Felder',	'All pages' => 'Alle Seiten',	'All Pages' => 'Alle Seiten',	'All tags' => 'Alle Tags',	'Alphabetical' => 'Alphabetisch',	'Make default' => 'Als Standard setzen',	'Alternate window title' => 'Alternativer Fenstertitel',	'Alternate menu title' => 'Alternativer Menütitel',	'Other versions' => 'Andere Versionen',	'Install another' => 'Andere installieren',	'Testing Requirements' => 'Anforderungen werden getestet',	'Sign in' => 'Anmeldung',	'Sign in with' => 'Anmeldung mit',	'Apps' => 'Anwendungs',	'Apps include plugins and libraries that extend the capabilities of the CMS and framework.' => 'Anwendungs sind Plugins und Bibliotheken, die die Fähigkeiten des CMS und Framework zu erweitern.',	'Application ID' => 'Anwendungs-ID',	'Apache mod_rewrite extension must be installed.' => 'Apache mod_rewrite muss installiert sein.',	'App Name' => 'App Namen',	'App added.' => 'App hinzugefügt',	'Install App/Theme' => 'App/Theme installieren ',	'apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>' => 'Apps Ordner ist nicht beschreibbar. Bitte ausführen: chmod 775 apps',	'Limit to source file' => 'Auf Quelldatei beschränken',	'Off' => 'Aus',	'Execute' => 'Ausführen',	'Log out' => 'Ausloggen',	'Author' => 'Autor',	'Authorization required.' => 'Autorisierung erforderlich.',	'Edit' => 'Bearbeiten',	'Editing Item' => 'Bearbeiten Stück',	'Done editing' => 'Bearbeiten beenden.',	'Editing Locked' => 'Bearbeitung gesperrt',	'Editing language' => 'Bearbeitungssprache',	'Requirements' => 'Bedarf',	'Users' => 'Benutzer',	'Edit User' => 'Benutzer bearbeiten',	'User deleted.' => 'Benutzer gelöscht.',	'User saved.' => 'Benutzer gespeichert.',	'Add User' => 'Benutzer hinzufügen',	'User added.' => 'Benutzer hinzugefügt.',	'Save User' => 'Benutzer speichern',	'Custom Fields' => 'Benutzerdefinierte Felder',	'User Settings' => 'Benutzereinstellungen',	'Username' => 'Benutzername',	'User type' => 'Benutzertyp',	'Already up-to-date' => 'Bereits auf dem neuesten Stand',	'Already installed' => 'Bereits installiert',	'Description' => 'Beschreibung',	'Visit your website.' => 'Besuchen Sie Ihre Website',	'Visit your new website' => 'Besuchen Sie Ihre neue Website',	'Screenshot' => 'Bild von Bildschirm',	'Images' => 'Bilder',	'Please confirm your email address' => 'Bitte bestätigen Sie Ihre E-Mail-Adresse',	'Please enter the name of the language.' => 'Bitte geben Sie den Namen der Sprache ein.',	'Please enter the language code.' => 'Bitte geben Sie den Sprachcode ein.',	'Please enter the character set.' => 'Bitte geben Sie den Zeichensatz ein.',	'Please enter a {{field}}.' => 'Bitte geben Sie ein {{feld}} ein.',	'Please enter a valid menu structure.' => 'Bitte geben Sie eine gültige Menüstruktur.',	'Please enter a link or upload a file.' => 'Bitte geben Sie einen Link oder eine Datei.',	'Please enter a name. Alphanumeric characters only.' => 'Bitte geben Sie einen Namen. Nur alphanumerische Zeichen.',	'Please enter a name for your layout.' => 'Bitte geben Sie ihrem Layout einen Namen.',	'Please enter a name for your stylesheet.' => 'Bitte geben Sie ihrem Stylesheet einen Namen.',	'Please correct the problem and try again.' => 'Bitte korrigieren Sie das Problem und versuchen Sie es erneut.',	'Please upload a zip file.' => 'Bitte laden Sie eine ZIP-Datei.',	'Please upload fewer files at a time.' => 'Bitte laden sie nicht so viele Dateien auf einmal hoch.',	'Please log in to continue.' => 'Bitte melden Sie sich an, um fortzufahren.',	'Please try again later.' => 'Bitte versuchen Sie es später erneut.',	'Please upload one of the following file types' => 'Bitte verwenden Sie einen der folgenden Dateitypen',	'Please wait, this may take a minute...' => 'Bitte warten, dies eine Minute dauern ...',	'Please select a file to upload.' => 'Bitte wählen Sie eine Datei zum Hochladen.',	'Block title' => 'Block Titel',	'Edit Block' => 'Block bearbeiten',	'Block deleted.' => 'Block gelöscht',	'Add Block' => 'Block hinzufügen',	'Delete Block' => 'Block löschen',	'Save Block' => 'Block speichern',	'Block ID' => 'Block-ID',	'Blog title' => 'Blog Titel',	'Blog Settings' => 'Blog-Einstellungen',	'Blogger importer' => 'Blogger Importer',	'Blogger export file' => 'Blogger-Exportdatei',	'Post page layout' => 'Blogpost Seitenlayout',	'Edit Blog Post' => 'Blogpost bearbeiten',	'Blog post deleted.' => 'Blogpost gelöscht',	'Blog post saved.' => 'Blogpost gespeichert.',	'Add Blog Post' => 'Blogpost hinzufügen',	'Blog post added.' => 'Blogpost hinzugefügt',	'Save Blog Post' => 'Blogpost speichern',	'Blog Posts' => 'Blogposts',	'Blocks' => 'Blöcke',	'CSV Importer' => 'CSV Importer',	'Code' => 'Code',	'Thanks for using Elefant!' => 'Danke, dass sie Elefant gewählt haben!',	'Field not found.' => 'Das Feld wurde nicht gefunden.',	'This installer will guide you through the process of installing and configuring your new website.' => 'Das Programm führt Sie durch den Prozess der Installation und Konfiguration Ihrer neuen Webseite.',	'The following theme has been installed:' => 'Das folgende Thema wurde installiert:',	'The layout you entered doesn\'t exist.' => 'Das von Ihnen eingegebene Layout existiert nicht.',	'File upload failed' => 'Datei Upload fehlgeschlagen',	'Edit file' => 'Datei bearbeiten',	'File deleted.' => 'Datei gelöscht.',	'File size is too large.' => 'Datei ist zu groß.',	'File not found' => 'Datei nicht gefunden',	'Save File' => 'Datei speichern',	'File renamed.' => 'Datei umbenannt.',	'File Manager' => 'Datei-Manager',	'File:' => 'Datei:',	'Files' => 'Dateien',	'Browse' => 'Dateien auswählen',	'Browse...' => 'Dateien auswählen...',	'File Size' => 'Dateigröße',	'File size' => 'Dateigröße',	'File link' => 'Dateiverlinkung',	'Failed to write to conf/config.php' => 'Daten konnten nicht in conf/config.php geschrieben werden.',	'Database' => 'Datenbank',	'Database Connection' => 'Datenbank-Verbindung',	'Database tables created and settings saved.' => 'Datenbanktabellen erstellt und Einstellungen gespeichert.',	'Date' => 'Datum',	'Date in ordinal form' => 'Datum mit Ordnungszahlen',	'Date, zero-padded' => 'Datum, mit Nullen aufgefüllt',	'Date/Time' => 'Datum/Zeit',	'Date formatting reference' => 'Datumsformatierung Referenz',	'Permanent (best for SEO)' => 'Dauerhaft (am besten für SEO)',	'Default' => 'Default',	'The file name contains invalid characters.' => 'Der Dateiname enthält ungültige Zeichen.',	'The link appears to be invalid.' => 'Der Link scheint ungültig zu sein.',	'Unable to create folder' => 'Der Ordner konnte nicht erstellt werden',	'Unable to delete folders' => 'Der Ordner konnte nicht gelöscht werden',	'The language code entered already exists.' => 'Der eingegebene Sprachecode existiert bereits.',	'Designer' => 'Designer',	'File Already Exists' => 'Die Datei existiert bereits',	'File already exists' => 'Die Datei existiert bereits',	'Unable to parse the uploaded file.' => 'Die Datei konnte nicht analysiert werden.',	'Failed to write the file to disk.' => 'Die Datei konnte nicht auf die Festplatte gespeichert werden.',	'Could not unzip the file.' => 'Die Datei konnte nicht entpackt werden.',	'Unable to Delete File' => 'Die Datei konnte nicht gelöscht werden',	'Unable to save the file' => 'Die Datei konnte nicht gespeichert werden',	'File save failed' => 'Die Datei konnte nicht gespeichert werden.',	'Unable to save the file.' => 'Die Datei konnte nicht gespeichert werden.',	'Failed to retrieve the file at the specified link.' => 'Die Datei konnte unter dem angegebenen Link nicht gefunden werden.',	'Unable to write to the file. Please check your folder permissions and try again.' => 'Die Datei konnten nicht gespeichert werden. Bitte versuchen Sie es noch einmal, nachdem sie Ihre Ordner-Berechtigungen überprüft haben.',	'File saved.' => 'Die Datei wurde gespeichert.',	'The file was only partially uploaded.' => 'Die Datei wurde nur teilweise hochgeladen.',	'The installation process has been completed. Here are some links you may want to bookmark:' => 'Die Installation ist abgeschlossen. Hier sind einige Links, die Sie vielleicht bookmarken wollen:',	'Unable to fetch configuration file.' => 'Die Konfigurationsdatei konnte nicht geholt werden.',	'The MIT License' => 'Die MIT-Lizenz',	'The following app has been installed:' => 'Die folgende App wurde installiert:',	'The following file is too large to upload' => 'Die folgende Datei ist zu groß um hochgeladen zu werden ',	'The page you requested could not be found.' => 'Die von Ihnen angeforderte Seite konnte nicht gefunden werden.',	'Unable to save changes. Check your folder permissions and try again.' => 'Die Änderungen konnten nicht gespeichert werden. Bitte versuchen Sie es noch einmal, nachdem sie Ihre Ordner-Berechtigungen überprüft haben.',	'Utilities include text editor bundles and other tools that complement the CMS and framework.' => 'Dienstprogrammen gehören Texteditor bündelt und andere Tools, die das CMS und Framework ergänzen.',	'This is a preview of how your layout will look.' => 'Dies ist die Vorschau für Ihr Layout.',	'This page forwards visitors to the following link' => 'Diese Seite leitet Besucher auf den folgenden Link',	'This object is already being edited by' => 'Dieses Objekt wird bereits bearbeitet von',	'Disqus' => 'Disqus',	'Disqus shortname' => 'Disqus kurzen Namen',	'Drop down' => 'Drop-Down',	'Drop down options (one per line)' => 'Drop-Down-Optionen (eine pro Zeile)',	'Dark' => 'Dunkel',	'Dynamic Objects' => 'Dynamische Objekte',	'Properties' => 'Eigenschaften',	'Properties saved.' => 'Eigenschaften gespeichert.',	'An Error Occurred' => 'Ein Fehler ist aufgetreten',	'A PHP extension stopped the file upload.' => 'Ein PHP-Erweiterung stoppte den Datei-Upload.',	'A theme by this name is already installed.' => 'Ein Thema mit diesem Namen ist bereits installiert.',	'One or more server requirements failed' => 'Ein oder mehrere Server-Anforderungen wurden nicht erfüllt',	'An unknown error occurred.' => 'Ein unbekannter Fehler ist aufgetreten.',	'An app by this name is already installed.' => 'Eine App mit diesem Namen ist bereits installiert.',	'A file by that name already exists.' => 'Eine Datei mit diesem Namen existiert bereits.',	'Introduction' => 'Einführung',	'Embedded' => 'Eingebettet',	'Embedded Audio (MP3)' => 'Eingebettetes Audio (MP3)',	'Embedded Video (MP4)' => 'Eingebettetes Video (MP4)',	'Settings' => 'Einstellungen',	'Settings saved and admin user created.' => 'Einstellungen gespeichert und Administrator erstellt.',	'Settings saved.' => 'Einstellungen gespeichert.',	'Save Settings' => 'Einstellungen speichern',	'Single-line text' => 'Einzeiligen Text',	'Elefant' => 'Elefant',	'Elefant\'s CMS was designed to run a complete website, and needs to be installed in the root of a site to function correctly. Please move Elefant to the root folder to continue, or use a sub-domain of your site to install it under.' => 'Elefant CMS läuft als vollständige Website und muss im Root-Verzeichnis installiert werden. Bitte verschieben Sie Elefant in das Root-Verzeichnis, um fortzufahren oder verwenden Sie eine Sub-Domain Ihrer Website, und installieren Elefant im entsprechenden Verzeichnis.',	'Elefant homepage' => 'Elefant Homepage',	'Elefant Installer' => 'Elefant installieren',	'Item updated.' => 'Element aktualisiert.',	'Item deleted.' => 'Element gelöscht.',	'Item added.' => 'Element hinzugefügt.',	'Save Item' => 'Element speichern',	'Email' => 'Email',	'Email address' => 'Email Adresse',	'Embedded Flash (SWF)' => 'Embedded Flash (SWF)',	'Drag pages here to remove them from the tree.' => 'Entfernen Sie die Seiten per Drag and Drop.',	'Contains text...' => 'Enthält Text...',	'Required' => 'Erforderlich',	'results' => 'Ergebnisse',	'Created' => 'Erstellt',	'Unable to write to apps folder.' => 'Es konnte nicht in den Apps Ordner geschrieben werden.',	'Unable to write to cache folder.' => 'Es konnte nicht in den Cache Ordner geschrieben werden.',	'Unable to write to layouts folder.' => 'Es konnte nicht in den Layouts Ordner geschrieben werden.',	'It looks like you\'re trying to install Elefant into a sub-folder.' => 'Es sieht aus, als wollten Sie Elefant in einem Unterordner installieren.',	'No file was uploaded.' => 'Es wurde keine Datei hochgeladen.',	'Auto-saved data found.' => 'Es wurden automatisch gespeicherte Daten gefunden.',	'Export' => 'Exportieren',	'Facebook' => 'Facebook',	'Fallback' => 'Fallback',	'False' => 'Falsch',	'Incorrect email or password, please try again.' => 'Falsche E-Mail oder Passwort, bitte versuchen Sie es erneut.',	'Missing property name' => 'Fehlende Eigenschaftsname',	'Missing parameter: label' => 'Fehlender Parameter: Etikett',	'Missing parameter: fields' => 'Fehlender Parameter: Felder',	'Missing parameter: id' => 'Fehlender Parameter: ID',	'Missing parameter: class' => 'Fehlender Parameter: Klasse',	'Missing parameter: options' => 'Fehlender Parameter: Optionen',	'Missing parameter: required' => 'Fehlender Parameter: erforderlich',	'Missing parameter: name' => 'Fehlender Parameter: name',	'Missing parameter: type' => 'Fehlender Parameter: type',	'Error' => 'Fehler',	'Error uploading file.' => 'Fehler beim Hochladen der Datei.',	'Error importing file' => 'Fehler beim Importieren der Datei',	'Error deleting menu. Check your permissions and try again.' => 'Fehler beim Löschen Menü. Überprüfen Sie Ihre Berechtigungen und versuchen Sie es erneut.',	'Failed to save...' => 'Fehler beim Speichern...',	'Error message' => 'Fehlermeldung',	'Error Message' => 'Fehlermeldung',	'Field' => 'Feld',	'Field updated.' => 'Feld aktualisiert.',	'Field deleted.' => 'Feld gelöscht.',	'Add Field' => 'Feld hinzufügen',	'Field added.' => 'Feld hinzugefügt.',	'Auto-incrementing field' => 'Feld mit automatischer Erhöhung',	'Field name' => 'Feldname',	'Field order has been updated.' => 'Feldreihenfolge wurde aktualisiert.',	'Finished' => 'Fertig',	'Done.' => 'Fertig.',	'formatting help' => 'Formatierung Hilfe',	'Continue' => 'Fortsetzen',	'Photos by' => 'Fotos von',	'Add Item' => 'Fügen Element',	'Drag pages to the site tree to include them in your navigation.' => 'Fügen Sie Seiten per Drag und Drop zur Navigation hinzu.',	'Auto-saved data found for this form.' => 'Für das Formular wurden automatisch gespeicherte Daten gefunden.',	'Gallery' => 'Galerie',	'Galleries' => 'Galerien',	'You must enter your name.' => 'Geben Sie bitte Ihren Namen ein.',	'Application secret' => 'Geheimcode',	'Saved!' => 'Gespeichert!',	'Changed on' => 'Geändert am',	'Github installation failed' => 'Github Installation fehlgeschlagen',	'Google' => 'Google',	'Note: Installing from links has been disabled because the PHP cURL extension is missing.' => 'Hinweis: Die Installation von Links wurde deaktiviert, da die PHP cURL Erweiterung fehlt.',	'Note: Pages that are not publicly visible will not be listed here.' => 'Hinweis: Seiten, die nicht öffentlich zugänglich sind, werden hier nicht aufgeführt.',	'Add' => 'Hinzufügen',	'Add App' => 'Hinzufügen Applikation',	'Add Gallery' => 'Hinzufügen Galerie',	'Add Theme' => 'Hinzufügen Thema',	'Hmm, we can\'t seem to find the page you wanted at the moment.' => 'Hmm, wir können die Seite, die Sie suchen im Moment nicht finden.',	'Uploaded CSV file not found.' => 'Hochgeladene CSV-Datei nicht gefunden.',	'ID' => 'ID',	'I Agree' => 'Ich stimme zu',	'Your browser does not support drag and drop file uploads.' => 'Ihr Browser unterstützt Dateiuploads per Drag and Drop leider nicht.',	'Your name' => 'Ihr Name',	'Your Name' => 'Ihr Name',	'Your password must be at least 6 characters.' => 'Ihr Passwort muss mindestens 6 Zeichen lang sein.',	'Your password doesn\'t match.' => 'Ihr Passwort stimmt nicht überein.',	'Your ID must be a lowercase alphanumeric value and can\'t already exist. It must also not share the name of an app.' => 'Ihre ID muss ein kleingeschriebener alphanumerischer Wert sein, der noch nicht vergeben ist. Sie darf außerdem nicht wie eine App benannt sein.',	'Your ID must be a lowercase alphanumeric value. It must also not share the name of an app.' => 'Ihre ID muss ein kleingeschriebener alphanumerischer Wert sein. Sie darf außerdem nicht wie eine App benannt sein.',	'Your ID must be a lowercase alphanumeric value and can\'t already exist.' => 'Ihre ID muss einen kleingeschriebenen alphanumerischen Wert haben, der noch nicht vergeben ist.',	'Your ID must be a lowercase alphanumeric value.' => 'Ihre ID muss einen kleingeschriebenen alphanumerischen Wert haben.',	'Your name must be alphanumeric and not a duplicate of an existing layout.' => 'Ihre Name muss einen alphanumerischen Wert haben und darf von keinem anderen Layout verwendet werden.',	'Your name must be alphanumeric and not a duplicate of an existing stylesheet.' => 'Ihre Name muss einen alphanumerischen Wert haben und darf von keinem anderen Stylesheet verwendet werden.',	'Your website' => 'Ihre Website',	'Finish importing' => 'Import abgschließen',	'Import as...' => 'Importieren als...',	'Mark imported posts as published?' => 'Importierte Posts als veröffentlicht markieren?',	'Rebuild index' => 'Index aktualisieren',	'Rebuilding index' => 'Index wird aktualisiert',	'Building index' => 'Index wird erstellt',	'Indexing completed' => 'Indizierung abgeschlossen',	'Info' => 'Informationen',	'Content' => 'Inhalt',	'Install completed' => 'Installation abgeschlossen',	'Install completed.' => 'Installation abgeschlossen',	'Installer' => 'Installer',	'Install' => 'Installieren',	'Installing SaaS Helpers' => 'Installieren SaaS Helpers',	'Yes' => 'Ja',	'Year in two digit form' => 'Jahr im zweistelligen Form',	'Year in full' => 'Jahr in voller Länge',	'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec' => 'Jan Feb Mär Apr Mai Jun Jul Aug Sep Okt Nov Dez',	'January February March April May June July August September October November December' => 'Januar Februar März April Mai Juni Juli August September Oktober November Dezember',	'Unable to fetch file' => 'Kann Datei nicht holen',	'No image url specified.' => 'Kein Bild url angegeben.',	'No name specified' => 'Kein Name angegeben',	'No video playback capabilities' => 'Kein Video-Wiedergabe-Funktionen',	'No apps available' => 'Keine Apps verfügbar',	'No audio playback capabilities' => 'Keine Audio-Wiedergabe-Funktionen',	'No posts yet... :(' => 'Keine Blogposts bisher... : (',	'No file specified.' => 'Keine Datei angegeben.',	'No file uploaded or file too large.' => 'Keine Datei hochgeladen oder Datei zu groß.',	'No results.' => 'Keine Ergebnisse.',	'No themes available' => 'Keine Themen zur Verfügung',	'None' => 'Keiner',	'Change password' => 'Kennwort ändern',	'Keywords (comma-separated)' => 'Keywords (durch Komma getrennt)',	'Click \'Next\' to continue.' => 'Klicken Sie auf "Weiter", um fortzufahren.',	'Click \'Next\' to continue whenever you\'re ready. Thanks for using Elefant!' => 'Klicken Sie auf "Weiter", um fortzufahren. Viel Spaß mit Elefant CMS.',	'Click here for instructions on configuring virtual hosts for development.' => 'Klicken Sie hier für Anleitungen zum Konfigurieren virtueller Hosts als Entwicklungsumgebung.',	'Click here for more information and translations of the MIT license.' => 'Klicken Sie hier für weitere Informationen und Übersetzungen der MIT-Lizenz.',	'Click here to restore.' => 'Klicken Sie hier um Wiederherzustellen.',	'Click to update photo' => 'Klicken Sie um das Foto zu aktualisieren',	'Click to restore.' => 'Klicken Sie um wiederherzustellen.',	'Click to edit.' => 'Klicken Sie zum Bearbeiten.',	'click to install' => 'Klicken Sie zum Installieren.',	'click to upgrade' => 'Klicken Sie zum Upgraden.',	'comments' => 'Kommentare',	'Comments' => 'Kommentare',	'Configuration file not found.' => 'Konfigurationsdatei wurde nicht gefunden.',	'Account Verified' => 'Konto überprüft',	'Short date format' => 'Kurzes Datumsformat',	'Layout' => 'Layout',	'Edit Layout' => 'Layout bearbeiten',	'Create Layout' => 'Layout erstellen',	'Layout saved.' => 'Layout gespeichert.',	'Layout added.' => 'Layout hinzugefügt.',	'Save Layout' => 'Layout speichern',	'Layouts' => 'Layouts',	'Last Modified' => 'Letzte Änderung',	'Lightbox' => 'Leuchtkasten',	'Light' => 'Licht',	'Link' => 'Link',	'Link to a zip file or Github repository' => 'Link zu einer ZIP-Datei oder einem Github-Repository',	'License' => 'Lizenz',	'Login methods' => 'Login Methoden',	'Login required' => 'Login erforderlich',	'Locale' => 'Lokal',	'Local date format' => 'Lokales Datumsformat',	'Local time format' => 'Lokales Zeitformat',	'Go' => 'Los',	'Length' => 'Länge',	'Delete' => 'Löschen',	'Clear' => 'Löschen',	'Unable to delete' => 'Löschen hat nicht geklappt',	'Menu' => 'Menü',	'Menu Builder' => 'Menü Baumeister',	'Edit Menu' => 'Menü bearbeiten',	'Menu deleted.' => 'Menü gelöscht.',	'Menu saved.' => 'Menü gespeichert.',	'Add Menu' => 'Menü hinzufügen',	'Menu name (no spaces)' => 'Menüname (keine Leerzeichen)',	'Menu structure' => 'Menüstruktur',	'Minutes' => 'Minuten',	'Minutes, zero-padded' => 'Minuten mit Nullen aufgefüllt',	'Compare to current' => 'Mit der aktuellen Version vergleichen',	'Member' => 'Mitglied',	'Members' => 'Mitglieder',	'Month in numeric form' => 'Monat in numerischer Form',	'Month in numeric form, zero-padded' => 'Monat in numerischer Form, mit Nullen aufgefüllt',	'Month name, abbreviated' => 'Monatsname, abgekürzt',	'Multi-file uploader' => 'Multi-Datei-Uploader',	'Are you sure you want to cancel?' => 'Möchten Sie wirklich abbrechen?',	'Name' => 'Name',	'Site Name' => 'Name der Website',	'Month name' => 'Name des Monats',	'Theme Name' => 'Name des Themas',	'Navigation' => 'Navigation',	'No' => 'Nein',	'New file' => 'Neue Datei',	'New page' => 'Neue Seite',	'New User' => 'Neuer Benutzer',	'New Post' => 'Neuer Blogpost ',	'New folder' => 'Neuer Ordner',	'Newer apps' => 'Neuere Apps',	'Newer posts' => 'Neuere Blogposts',	'Newer results' => 'Neuere Ergebnisse',	'Newer themes' => 'Neuere Themen',	'Verify new password' => 'Neues Kennwort bestätigen',	'New Layout' => 'Neues Layout',	'New password' => 'Neues Passwort',	'New Stylesheet' => 'Neues Stylesheet',	'Latest Posts' => 'Neueste Blogposts',	'Newest first' => 'Neueste zuerst',	'Not found' => 'Nicht gefunden',	'Nobody' => 'Niemand',	'Not a member?' => 'Noch kein Mitglied?',	'Normal strength' => 'Normale Stärke',	'Next' => 'Nächste',	'OpenID' => 'OpenID',	'Auto-post options' => 'Optionen für Auto-Posts',	'Folder' => 'Ordner',	'Folder created.' => 'Ordner erstellt.',	'Folder already exists' => 'Ordner existiert bereits',	'Missing a temporary folder, check your PHP setup.' => 'Ordner für temporäre Dateien fehlt, überprüfen Sie bitte Ihre PHP-Konfiguration.',	'Folder renamed.' => 'Ordner umbenannt.',	'Original text' => 'Originaltext',	'PHP PDO extension is missing.' => 'PHP PDO-Erweiterung fehlt.',	'PHP version must be 5.3+' => 'PHP-Version muss 5.3+ sein',	'Password' => 'Passwort',	'Password updated' => 'Passwort aktualisiert',	'Verify Password' => 'Passwort bestätigen',	'Verify password' => 'Passwort bestätigen',	'Password does not match.' => 'Passwort stimmt nicht überein.',	'Forgot your password?' => 'Passwort vergessen?',	'Password recovery' => 'Passwort wiederherstellen',	'Reset Password' => 'Passwort zurücksetzen',	'Port' => 'Port',	'Import Posts' => 'Posts importieren',	'Private' => 'Privat',	'Update Profile' => 'Profil aktualisieren',	'Profile Updated' => 'Profil aktualisiert',	'View profile' => 'Profil ansehen',	'Edit Profile' => 'Profil bearbeiten',	'Powered by' => 'Präsentiert von',	'Source' => 'Quelle',	'Sign Up' => 'Registrieren',	'Sign up here' => 'Registrieren Sie sich hier',	'SQL Shell' => 'SQL Shell',	'SQLite users can simply click \'Connect & Create Schema\'. MySQL users please select your driver and enter your server details to continue.' => 'SQLite Benutzer können klicken Sie einfach auf "Verbinden & Neues Schema erstellen". MySQL-Benutzer geben bitte Ihre Server-Daten ein, um fortzufahren.',	'SaaS Helpers' => 'SaaS Helpers',	'Key' => 'Schlüssel',	'Weak password' => 'Schwaches Passwort',	'Very strong password' => 'Sehr starkes Passwort',	'Page ID' => 'Seite ID',	'Edit Page' => 'Seite bearbeiten',	'Edit page' => 'Seite bearbeiten',	'Page created.' => 'Seite erstellt.',	'Page deleted.' => 'Seite gelöscht.',	'Page saved.' => 'Seite gespeichert.',	'Add Page' => 'Seite hinzufügen',	'Delete Page' => 'Seite löschen',	'Save Page' => 'Seite speichern',	'Page not found' => 'Seite wurde nicht gefunden',	'Body' => 'Seiteninhalt',	'Page layout' => 'Seitenlayout',	'Add Page-Specific Block' => 'Seitenspezifischen Block hinzufügen',	'Page title' => 'Seitentitel',	'Seconds' => 'Sekunden',	'Seconds with milliseconds' => 'Sekunden mit Millisekunden',	'Seconds, zero-padded' => 'Sekunden, mit Nullen aufgefüllt',	'Seconds, zero-padded, with milliseconds' => 'Sekunden, mit Nullen aufgefüllt, mit Millisekunden',	'Server' => 'Server',	'Server requirements have been verified.' => 'Server-Anforderungen wurden überprüft.',	'An email has been sent with a link to reset your password.' => 'Sie haben eine E-Mail erhalten, mit der Sie ihr Passwort zurücksetzen können.',	'You must enter body content.' => 'Sie müssen Seiteninhalt eingeben.',	'You must enter a field name.' => 'Sie müssen den Namen des Feldes eingeben.',	'You must select a date/time.' => 'Sie müssen ein Datum / Uhrzeit eingeben.',	'You must enter a password.' => 'Sie müssen ein Passwort eingeben.',	'You must enter a theme name.' => 'Sie müssen ein Thema Namen.',	'You must enter a description.' => 'Sie müssen eine Beschreibung eingeben.',	'You must enter an email address.' => 'Sie müssen eine E-Mail-Adresse eingeben.',	'You must enter options for a select field.' => 'Sie müssen eine Option für das Selectfeld ausgewählen.',	'You must enter a valid email, or email not found.' => 'Sie müssen eine gültige E-Mail eingeben oder E-Mail nicht gefunden.',	'You must enter a valid email, or your email may already be registered.' => 'Sie müssen eine gültige E-Mail eingeben oder Ihre E-Mail ist bereits registriert.',	'You must enter an author.' => 'Sie müssen einen Autor eingeben.',	'You must enter a screenshot.' => 'Sie müssen einen Bildschirm.',	'You must enter a block title.' => 'Sie müssen einen Block Titel eingeben.',	'You must enter a blog title.' => 'Sie müssen einen Blog-Titel eingeben.',	'You must enter a link.' => 'Sie müssen einen Link.',	'You must enter an app name.' => 'Sie müssen einen Namen der Anwendung.',	'You must enter a name.' => 'Sie müssen einen Namen eingeben.',	'You must enter a page title.' => 'Sie müssen einen Seitentitel eingeben.',	'You must enter a title.' => 'Sie müssen einen Titel eingeben.',	'You must enter a type.' => 'Sie müssen einen Typ.',	'You\'re done!' => 'Sie sind fertig!',	'Are you sure you want to permanently erase this table?' => 'Sind Sie sicher, dass Sie dauerhaft löschen diese Tabelle?',	'Are you sure you want to delete the default block? This will remove it from all pages using this block' => 'Sind Sie sicher, dass Sie den Standard-Block löschen möchten? Der Block wird von allen Seiten gelöscht.',	'Are you sure you want to cancel and lose any changes?' => 'Sind Sie sicher, dass Sie den Vorgang abbrechen möchten (Änderungen gehen verloren)?',	'Are you sure you want to delete the current block?' => 'Sind Sie sicher, dass Sie den aktuellen Block löschen wollen?',	'Are you sure you want to delete the current page?' => 'Sind Sie sicher, dass Sie die aktuelle Seite löschen wollen?',	'Are you sure you want to delete this app?' => 'Sind Sie sicher, dass Sie diese Anwendung löschen?',	'Are you sure you want to delete this {{appname}}?' => 'Sind Sie sicher, dass Sie diese App löschen möchten: {{appname}}?',	'Are you sure you want to delete this gallery?' => 'Sind Sie sicher, dass Sie diese Galerie löschen?',	'Are you sure you want to delete this page?' => 'Sind Sie sicher, dass Sie diese Seite löschen möchten?',	'Are you sure you want to delete this language?' => 'Sind Sie sicher, dass Sie diese Sprache löschen möchten?',	'Are you sure you want to delete this post?' => 'Sind Sie sicher, dass Sie diesen Beitrag löschen möchten?',	'Are you sure you want to delete this user?' => 'Sind Sie sicher, dass Sie diesen Benutzer löschen möchten?',	'Are you sure you want to delete this block?' => 'Sind Sie sicher, dass Sie diesen Block löschen möchten?',	'Are you sure you want to delete this field?' => 'Sind Sie sicher, dass Sie dieses Feld löschen möchten?',	'Are you sure you want to permanently delete this layout file?' => 'Sind Sie sicher, dass Sie dieses Layout löschen möchten?',	'Are you sure you want to permanently delete this stylesheet file?' => 'Sind Sie sicher, dass Sie dieses Stylesheet löschen möchten?',	'Are you sure you want to delete this theme?' => 'Sind Sie sicher, dass Sie dieses Thema löschen?',	'Are you sure you want to permanently delete this menu?' => 'Sind Sie sicher, dass Sie löschen möchten dieses Menü?',	'Social buttons' => 'Social Buttons',	'Column' => 'Spalte',	'Save' => 'Speichern',	'Saving Layout Failed' => 'Speichern Layout des Layouts fehlgeschlagen',	'Save Menu' => 'Speichern Menu',	'Saving Stylesheet Failed' => 'Speichern des Stylesheetdes Layouts fehlgeschlagen',	'Save &amp; Keep Editing' => 'Speichern und weiter bearbeiten',	'Saving...' => 'Speichert...',	'Language code' => 'Sprachcode',	'Language' => 'Sprache',	'Language updated.' => 'Sprache aktualisiert.',	'Language deleted.' => 'Sprache gelöscht.',	'Add language' => 'Sprache hinzufügen',	'Language added.' => 'Sprache hinzugefügt.',	'Language settings' => 'Spracheinstellungen',	'Languages' => 'Sprachen',	'Default layout updated.' => 'Standard Layout wurde aktualisiert.',	'Default language updated.' => 'Standard-Sprache aktualisiert.',	'Strong password' => 'Starkes Passwort',	'Home' => 'Startseite',	'Hours in 12-hour time' => 'Stunden in 12-Stunden-Schreibweise',	'Hours in 12-hour time, zero-padded' => 'Stunden in 12-Stunden-Schreibweise, mit Nullen aufgefüllt',	'Hours in 24-hour time' => 'Stunden in 24-Stunden-Schreibweise',	'Hours in 24-hour time, zero-padded' => 'Stunden in 24-Stunden-Schreibweise, mit Nullen aufgefüllt',	'Stylesheet' => 'Stylesheet',	'Edit Stylesheet' => 'Stylesheet bearbeiten',	'Create Stylesheet' => 'Stylesheet erstellen',	'Stylesheet saved.' => 'Stylesheet gespeichert.',	'Stylesheet added.' => 'Stylesheet hinzugefügt.',	'Save Stylesheet' => 'Stylesheet speichern',	'Stylesheets' => 'Stylesheets',	'Table' => 'Tabelle',	'Table Info' => 'Tabelle Informationen',	'Table prefix:' => 'Tabelle Präfix:',	'Table Dropped' => 'Tabelle gelöscht',	'Day of the week' => 'Tag der Woche',	'Day of the week, abbreviated' => 'Tag der Woche, abgekürzt',	'Period' => 'Tageszeit',	'Tags' => 'Tags',	'Tags (comma-separated)' => 'Tags (durch Komma getrennt)',	'Insert tag' => 'Tags einfügen',	'Theme added.' => 'Thema hinzugefügt.',	'Title' => 'Titel',	'Display title' => 'Titel anzeigen',	'Driver' => 'Treiber',	'Twitter' => 'Twitter',	'Type' => 'Typ',	'Rename' => 'Umbenennen',	'Unable to rename' => 'Umbenennen hat nicht geklappt',	'Unknown error' => 'Unbekannter Fehler',	'Invalid file.' => 'Ungültige Datei.',	'Invalid File Name' => 'Ungültige Dateiname',	'Invalid location' => 'Ungültige Position',	'Invalid class name.' => 'Ungültiger Classname',	'Invalid file name' => 'Ungültiger Dateiname',	'Invalid name' => 'Ungültiger Name',	'Invalid folder name' => 'Ungültiger Ordnername',	'Invalid Path' => 'Ungültiger Pfad',	'Invalid path' => 'Ungültiger Pfad',	'Invalid or expired recovery link' => 'Ungültiger oder abgelaufener Link',	'Invalid directory' => 'Ungültiges Verzeichnis',	'Upgrading User App' => 'Upgrade Benutzer App',	'Upgrading Blog App' => 'Upgrade Blog App',	'Upgrading Files App' => 'Upgrade Dateien App',	'Upgrade completed' => 'Upgrade abgeschlossen',	'Upload' => 'Upload',	'Upload the CSV file' => 'Upload CSV-Datei',	'Upload a zip file' => 'Upload ZIP-Datei',	'Uploading...' => 'Uploading...',	'Copyright' => 'Urheberrechte',	'Utilities' => 'Utilities',	'Upgrading SaaS Helpers' => 'Verbessem SaaS Helpers',	'Upgrade completed.' => 'Verbessem abgeschlossen.',	'Connect & Create Schema' => 'Verbinden & Neues Schema erstellen',	'Connection Error' => 'Verbindungsfehler',	'Consumer secret' => 'Verbraucher Geheimnis',	'Consumer key' => 'Verbraucher Schlüssel',	'Comparing' => 'Vergleiche',	'Versions' => 'Versionen',	'Show versions' => 'Versionen anzeigen',	'Versions of' => 'Versionen von',	'Version history' => 'Versionshistorie',	'Try Again' => 'Versuchen Sie es erneut',	'Published' => 'Veröffentlicht',	'Preview' => 'Vorschau',	'Preview with layout' => 'Vorschau mit Layout',	'Temporary' => 'Vorübergehend',	'True' => 'Wahr',	'Website' => 'Website',	'Site tree' => 'Website Struktur',	'Site Settings' => 'Website-Einstellungen',	'Other pages' => 'Weitere Seiten',	'Which columns should be imported?' => 'Welche Spalten sollen importiert werden?',	'Check your host for instructions on setting up sub-domains in production.' => 'Wenden sie sich zum Einrichten von Sub-Domains an Ihren Provider.',	'If you have any trouble during the install process, please visit the Elefant project at the following link to report it, and we\'ll do our best to help.' => 'Wenn Sie Probleme während der Installation haben, besuchen Sie bitte unsere Website unter dem folgendem Link. Wir werden unser Bestes tun, um zu helfen.',	'Tools' => 'Werkzeuge',	'Important: Only install apps or themes from trusted sources.' => 'Wichtig: Installieren Sie nur Anwendungen oder Themes aus vertrauenswürdigen Quellen.',	'Restore' => 'Wiederherstellen',	'Welcome to the Elefant CMS installer.' => 'Willkommen beim Elefant CMS Installer.',	'Wordpress export file' => 'Wordpress Exportdatei',	'Wordpress importer' => 'Wordpress Importer',	'Choose a password' => 'Wählen Sie ein Passwort',	'Choose a password for your new account.' => 'Wählen Sie ein Passwort für Ihr neues Konto.',	'Choose a new password' => 'Wählen Sie ein neues Passwort',	'Choose a file' => 'Wählen Sie eine Datei',	'Choose an importer' => 'Wählen Sie einen Importer',	'YAML Syntax Error' => 'YAML Syntax Fehler',	'Charset' => 'Zeichensatz',	'Character set' => 'Zeichensatz',	'Show empty fields' => 'Zeige leere Felder',	'Time zone offset' => 'Zeitzonenausgleich',	'Null' => 'Zero',	'Zip file installation failed' => 'Zip-Datei Installation fehlgeschlagen',	'Zip file was invalid or could not be installed.' => 'Zip-Datei war ungültig oder konnte nicht installiert werden.',	'Too weak' => 'Zu schwach',	'Too many login attempts' => 'Zu viele Login-Versuche',	'Access' => 'Zugriff',	'Last changed' => 'Zuletzt geändert',	'Last modified' => 'Zuletzt geändert',	'Must be logged in to upload' => 'Zum Upload müssen Sie sich einloggen ',	'Back' => 'Zurück',	'Back to posts' => 'Zurück zu Blogposts',	'Extra' => 'Zusätzliche',	'Extra Options' => 'Zusätzliche Optionen',	'Count' => 'Zählen',	'cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'cache Ordner ist nicht beschreibbar. Bitte ändern See die Schreibrechte (auch für alle Unterordner):</p><p><tt> chmod -R 775 cache conf css files lang layouts</tt>',	'conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'conf Ordner ist nicht beschreibbar. Bitte ändern See die Schreibrechte (auch für alle Unterordner):</p><p><tt> chmod -R 775 cache conf css files lang layouts</tt>',	'css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'css Ordner ist nicht beschreibbar. Bitte ändern See die Schreibrechte (auch für alle Unterordner):</p><p><tt> chmod -R 775 cache conf css files lang layouts</tt>',	'1 result:' => 'ein Ergebnis',	'files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'files Ordner ist nicht beschreibbar. Bitte führen Sie: chmod-R 775 cache conf css files lang Layouts',	'is required' => 'ist erforderlich',	'lang folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'lang Ordner ist nicht beschreibbar. Bitte ändern See die Schreibrechte (auch für alle Unterordner):</p><p><tt> chmod -R 775 cache conf css files lang layouts</tt>',	'layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'layouts Ordner ist nicht beschreibbar. Bitte ändern See die Schreibrechte (auch für alle Unterordner):</p><p><tt> chmod -R 775 cache conf css files lang layouts</tt>',	'max' => 'maximal',	'or' => 'oder',	'official blog' => 'offizieller Blog',	'optional' => 'optional',	'by' => 'von',	'- select -' => 'wählen',	'choose' => 'wählen',	'Save {{appname|ucfirst}}' => '{{appname | ucfirst}} speichern',	'Add {{appname|ucfirst}}' => '{{appname|ucfirst}} App hinzufügen',	'{{field|ucfirst}}' => '{{field|ucfirst}}',	'Older apps' => 'Ältere Apps',	'Older posts' => 'Ältere Blogposts',	'Older results' => 'Ältere Ergebnisse',	'Older themes' => 'Ältere Themen',	'Oldest first' => 'Älteste zuerst',	'Public' => 'Öffentlich',	'Check your inbox' => 'Überprüfen Sie Ihren Posteingang',	'Check that your permissions are correct and try again.' => 'Überprüfen Sie, ob Ihre Berechtigungen korrekt sind und versuchen Sie es erneut.',	'Verification failed: No name specified' => 'Überprüfung fehlgeschlagen: Kein Name angegeben',	'Verification failed: No folder specified' => 'Überprüfung fehlgeschlagen: Kein Ordner angegeben',	'Verification failed: No type specified.' => 'Überprüfung fehlgeschlagen: Kein Typ angegeben.',	'Verification failed: No configuration file found.' => 'Überprüfung fehlgeschlagen: Keine Konfigurationsdatei gefunden.',	'Verification failed: No version specified.' => 'Überprüfung fehlgeschlagen: Keine Version angegeben.',	'Verification failed: Repository or website required.' => 'Überprüfung fehlgeschlagen: Repository oder Website erforderlich.',	'Verification failed: Invalid configuration file.' => 'Überprüfung fehlgeschlagen: ungültige Konfigurationsdatei.',	'Verification failed: Invalid type.' => 'Überprüfung fehlgeschlagen: ungültiger Typ',	'Verification failed: Invalid folder name.' => 'Überprüfung fehlgeschlagen: ültiger Ordnername',	'Send verification' => 'Überprüfung senden',	'Invalid Verifier' => 'Überprüfung ungültig',	'Translated' => 'übersetzt'
+);
+
+?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/lang/en.php and elefant-elefant_1_3_3_beta/lang/en.php are identical
Files elefant-elefant_1_3_2_beta/lang/fr.php and elefant-elefant_1_3_3_beta/lang/fr.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lang/it.php elefant-elefant_1_3_3_beta/lang/it.php
--- elefant-elefant_1_3_2_beta/lang/it.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/lang/it.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,566 @@
+<?php
+
+$this->lang_hash['it'] = array (
+        '- select -' => '- seleziona -',
+	'Powered by' => 'Powered by',
+	'1 result:' => '1 risultato:',
+	'Sign in' => 'Accedi',
+	'Sign in with' => 'Accedi con',
+	'Access' => 'Accesso',
+	'Account Verified' => 'Account Verificato',
+	'Update Profile' => 'Aggiorna Profilo',
+	'Upgrading Blog App' => 'Aggiornamento Applicazione Blog',
+	'Upgrading Files App' => 'Aggiornamento Applicazione File',
+	'Upgrading User App' => 'Aggiornamento Applicazione Utente',
+	'Upgrade completed' => 'Aggiornamento completato',
+	'Add' => 'Aggiungi',
+	'Add Block' => 'Aggiungi Blocco',
+	'Add Page-Specific Block' => 'Aggiungi Blocco Specifico per la Pagina',
+	'Add Blog Post' => 'Aggiungi Blog Post',
+	'Add Field' => 'Aggiungi Campo',
+	'Add Page' => 'Aggiungi Pagina',
+	'Add User' => 'Aggiungi Utente',
+	'Add language' => 'Aggiungi lingua',
+	'Add {{appname|ucfirst}}' => 'Aggiungi {{appname|ucfirst}}',
+	'Site tree' => 'Albero Sito',
+	'Alphabetical' => 'Alfabetico',
+	'Other pages' => 'Altre pagine',
+	'Other versions' => 'Altre versioni',
+	'No posts yet... :(' => 'Ancora nessun post...:(',
+	'Year in two digit form' => 'Anno a due cifre',
+	'Year in full' => 'Anno completo',
+	'Cancel' => 'Annulla',
+	'Preview' => 'Anteprima',
+	'Preview with layout' => 'Anteprima con layout',
+	'Please wait, this may take a minute...' => 'Attendi per favore, potrebbe volerci un minuto...',
+	'Embedded Audio (MP3)' => 'Audio Incorporato (MP3)',
+	'Author' => 'Autore',
+	'Authorization required.' => 'Autorizzazione richiesta',
+	'Welcome to the Elefant CMS installer.' => 'Benvenuto nell\'installatore di Elefant CMS.',
+	'Blocks' => 'Blocchi',
+	'Block deleted.' => 'Blocco eliminato.',
+	'Blog post added.' => 'Blog post aggiunto.',
+	'Blog post deleted.' => 'Blog post eliminato.',
+	'Blog post saved.' => 'Blog post salvato.',
+	'official blog' => 'Blog ufficiale',
+	'Custom Fields' => 'Campi personalizzati',
+	'Field' => 'Campo',
+	'Field updated.' => 'Campo aggiornato.',
+	'Field added.' => 'Campo aggiunto.',
+	'Field deleted.' => 'Campo eliminato.',
+	'Field not found.' => 'Campo non trovato.',
+	'Upload' => 'Carica',
+	'Upload the CSV file' => 'Carica il file CSV',
+	'Upload a zip file' => 'Carica un file zip',
+	'File upload failed' => 'Caricamento del file fallito',
+	'Multi-file uploader' => 'Caricatore file multiplo',
+	'Folder' => 'Cartella',
+	'Folder created.' => 'Cartella creata.',
+	'Folder renamed.' => 'Cartella rinominata.',
+	'Charset' => 'Charset',
+	'Light' => 'Chiaro',
+	'Application secret' => 'Chiave segreta applicazione',
+	'Click \'Next\' to continue whenever you\'re ready. Thanks for using Elefant!' => 'Clicca "Successivo" per continuare quando se pronto. Grazie per utilizzare Elefant!',
+	'Click \'Next\' to continue.' => 'Clicca "Successivo" per continuare.',
+	'Click to update photo' => 'Clicca per aggiornare la foto',
+	'Click to edit.' => 'Clicca per modificare.',
+	'Click to restore.' => 'Clicca per recuperare.',
+	'Click here for instructions on configuring virtual hosts for development.' => 'Clicca qui per istruzioni su come configurare host virtuali di sviluppo.',
+	'Click here for more information and translations of the MIT license.' => 'Clicca qui per maggiori informazioni e traduzione della licenza MIT.',
+	'Click here to restore.' => 'Clicca qui per recuperare.',
+	'Code' => 'Codice',
+	'Language code' => 'Codice lingua',
+	'Comments' => 'Commenti',
+	'Compare to current' => 'Confronta con il corrente',
+	'Comparing' => 'Confronto',
+	'Database Connection' => 'Connessione Database',
+	'Connect & Create Schema' => 'Connetti % Crea lo Schema',
+	'Consumer key' => 'Consumer Key',
+	'Consumer secret' => 'Consumer Secret ',
+	'Content' => 'Contenuto',
+	'Contains text...' => 'Contiene testo...',
+	'Continue' => 'Continua',
+	'Check your inbox' => 'Controlla la tua casella in ingresso.',
+	'Copyright' => 'Copyright',
+	'Body' => 'Corpo (body)',
+	'Current' => 'Corrente',
+	'Designer' => 'Costruttore',
+	'Building index' => 'Costruzione indice...',
+	'Create Layout' => 'Crea Layout',
+	'Create Stylesheet' => 'Crea Stile',
+	'Date' => 'Data',
+	'Date in ordinal form' => 'Data in forma seriale',
+	'Date, zero-padded' => 'Data, riempita con zeri',
+	'Date/Time' => 'Data/Ora',
+	'Database' => 'Database',
+	'Auto-saved data found.' => 'Dati auto-salvati trovati.',
+	'Description' => 'Descrizione',
+	'You must enter your name.' => 'Devi inserire il tuo nome.',
+	'You must enter options for a select field.' => 'Devi inserire le opzioni per il campo di selezione.',
+	'You must enter an author.' => 'Devi inserire un autore.',
+	'You must enter body content.' => 'Devi inserire un contenuto per il corpo.',
+	'You must enter an email address.' => 'Devi inserire un indirizzo email.',
+	'You must enter a field name.' => 'Devi inserire un nome campo.',
+	'You must enter a name.' => 'Devi inserire un nome.',
+	'You must enter a block title.' => 'Devi inserire un titolo di blocco.',
+	'You must enter a blog title.' => 'Devi inserire un titolo di blog.',
+	'You must enter a page title.' => 'Devi inserire un titolo di pagina.',
+	'You must enter a title.' => 'Devi inserire un titolo.',
+	'You must enter a valid email, or email not found.' => 'Devi inserire una email valida e già registrata.',
+	'You must enter a valid email, or your email may already be registered.' => 'Devi inserire una email valida e non ancora registrata.',
+	'You must enter a password.' => 'Devi inserire una password.',
+	'You must select a date/time.' => 'Devi selezionare una data/ora.',
+	'File Size' => 'Dimensione File',
+	'File size' => 'Dimensione file',
+	'File size is too large.' => 'Dimensione file troppo grande.',
+	'Invalid directory' => 'Directory non valida',
+	'Disqus' => 'Disqus',
+	'Disqus shortname' => 'Disqus abbreviazione',
+	'Driver' => 'Driver',
+	'Elefant' => 'Elefant',
+	'Delete' => 'Elimina',
+	'Delete Block' => 'Elimina Blocco',
+	'Delete Page' => 'Elimina Pagina',
+	'Email' => 'Email',
+	'Admin Email' => 'Email amministratore',
+	'Incorrect email or password, please try again.' => 'Email o password non corretti, prova di nuovo.',
+	'Error' => 'Errore',
+	'Error uploading file.' => 'Errore caricando il file',
+	'Connection Error' => 'Errore di collegamento',
+	'Error importing file' => 'Errore importando il file',
+	'Unknown error' => 'Errore sconosciuto',
+	'A file by that name already exists.' => 'Esiste già un file con questo nome.',
+	'Blogger export file' => 'Esporta file blogger',
+	'PHP PDO extension is missing.' => 'Estensione PHP PDO mancante',
+	'Facebook' => 'Facebook',
+	'Fallback' => 'Fallback',
+	'Failed to retrieve the file at the specified link.' => 'Fallito il recupero del file al link specificato.',
+	'False' => 'Falso',
+	'You\'re done!' => 'Fatto!',
+	'Done.' => 'Fatto.',
+	'Files' => 'File',
+	'Uploaded CSV file not found.' => 'File CSV caricato non trovato.',
+	'Configuration file not found.' => 'File di configurazione non trovato.',
+	'Wordpress export file' => 'File di esportazione di Wordpress',
+	'File deleted.' => 'File eliminato.',
+	'File not found' => 'File non trovato',
+	'Invalid file.' => 'File non valido.',
+	'File renamed.' => 'File rinominato.',
+	'File saved.' => 'File salvato.',
+	'File:' => 'File:',
+	'Embedded Flash (SWF)' => 'Flash Incorporato (SWF)',
+	'Stylesheets' => 'Fogli di Stile',
+	'Stylesheet' => 'Foglio di Stile',
+	'Stylesheet added.' => 'Foglio di Stile aggiunto.',
+	'Stylesheet saved.' => 'Foglio di Stile salvato.',
+	'Source' => 'Fonte',
+	'Short date format' => 'Formato data corto',
+	'Local date format' => 'Formato data locale',
+	'Local time format' => 'Formato ora locale',
+	'Normal strength' => 'Forza normale',
+	'Photos by' => 'Foto da',
+	'Time zone offset' => 'Fuso orario (spostamento)',
+	'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec' => 'Gen Feb Mar Apr Mag Giu Lug Ago Set Ott Nov Dic',
+	'January February March April May June July August September October November December' => 'Gennaio Febbraio Marzo Aprile Maggio Giugno Luglio Agosto Settembre Ottobre Novembre Dicembre',
+	'File Manager' => 'Gestore File',
+	'Day of the week' => 'Giorno della settimana',
+	'Day of the week, abbreviated' => 'Giorno della settimana, abbreviato',
+	'SQLite users can simply click \'Connect & Create Schema\'. MySQL users please select your driver and enter your server details to continue.' => 'Gli utenti SQLite possono semplicemente fare clic su \'Connetti & Crea Schema\'. Gli utenti MySQL devono selezionare il driver e inserire i dati del server per continuare.',
+	'Google' => 'Google',
+	'Thanks for using Elefant!' => 'Grazie per utilizzare Elefant!',
+	'Hmm, we can\'t seem to find the page you wanted at the moment.' => 'Hmm, sembra che al momento non si trovi la pagina che cerchi.',
+	'Home' => 'Home',
+	'Elefant homepage' => 'Homepage di Elefant',
+	'Server requirements have been verified.' => 'I requisiti del server sono stati verificati.',
+	'ID' => 'ID',
+	'Page ID' => 'ID Ppagina',
+	'Application ID' => 'ID applicazione',
+	'Block ID' => 'ID blocco.',
+	'Elefant\'s CMS was designed to run a complete website, and needs to be installed in the root of a site to function correctly. Please move Elefant to the root folder to continue, or use a sub-domain of your site to install it under.' => 'Il CMS di Elefant è stato progettato per fornire un sito web completo, e necessita di essere installato nella cartella radice del sito per funzionare correttamente. Per favore sposta Elefant nella cartella radice per continuare oppure fai puntare un sub-dominio alla cartella in cui si trova Elefant.',
+	'File Already Exists' => 'Il File esiste già',
+	'The language code entered already exists.' => 'Il codice lingua inserito esiste già.',
+	'.htaccess file is missing from the site root. Please save the following file to your server:' => 'Il file .htaccess non è presente nella radice del sito. Per favore inserisci il file seguente net tuo server:',
+	'File already exists' => 'Il file esiste già',
+	'Zip file was invalid or could not be installed.' => 'Il file zip non è valido o non può essere installato.',
+	'The file was only partially uploaded.' => 'Il file è stato caricato solo parzialmente.',
+	'The layout you entered doesn\'t exist.' => 'Il layout inserito non esiste.',
+	'The link appears to be invalid.' => 'Il link sembra essere non valido.',
+	'The file name contains invalid characters.' => 'Il nome del file contiene caratteri non validi.',
+	'The installation process has been completed. Here are some links you may want to bookmark:' => 'Il processo di installazione è stato completato. Ecco alcuni link che potresti voler annotare.',
+	'The following theme has been installed:' => 'Il seguente tema è stato installato:',
+	'Your ID must be a lowercase alphanumeric value. It must also not share the name of an app.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve condividere il nome di una applicazione.',
+	'Your ID must be a lowercase alphanumeric value and can\'t already exist.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve esistere già.',
+	'Your ID must be a lowercase alphanumeric value and can\'t already exist. It must also not share the name of an app.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve esistere già. Non deve nemmeno condividere il nome di una applicazione.',
+	'Your ID must be a lowercase alphanumeric value.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo.',
+	'Your Name' => 'Il tuo Nome',
+	'Your name' => 'Il tuo nome',
+	'Your name must be alphanumeric and not a duplicate of an existing stylesheet.' => 'Il tuo nome deve essere alfanumerico e non un duplicato di un foglio di stile esistente.',
+	'Your name must be alphanumeric and not a duplicate of an existing layout.' => 'Il tuo nome deve essere alfanumerico e non un duplicato di un layout esistente.',
+	'Your website' => 'Il tuo sito web',
+	'Updated image not found.' => 'Immagine aggiornata non trovata.',
+	'CSV Importer' => 'Importa CSV',
+	'Blogger importer' => 'Importa blogger',
+	'Import as...' => 'Importa come...',
+	'Import Posts' => 'Importa i Post',
+	'Important: Only install apps or themes from trusted sources.' => 'Importante: installa soltanto applicazioni e temi da fonti fidate.',
+	'Wordpress importer' => 'Importatore Wordpress',
+	'Unable to parse the uploaded file.' => 'Impossibile analizzare il file caricato.',
+	'Unable to create folder' => 'Impossibile creare la cartella',
+	'Unable to delete' => 'Impossibile eliminare',
+	'Unable to Delete File' => 'Impossibile eliminare il file.',
+	'Unable to delete folders' => 'Impossibile eliminare le cartelle',
+	'Unable to fetch file' => 'Impossibile recuperare il file',
+	'Unable to fetch configuration file.' => 'Impossibile recuperare il file di configurazione.',
+	'Unable to rename' => 'Impossibile rinominare',
+	'Unable to save the file.' => 'Impossibile salvare il file.',
+	'Unable to save changes. Check your folder permissions and try again.' => 'Impossibile salvare le modifiche. Controllare le autorizzazioni della cartella e riprova.',
+	'Unable to write to the file. Please check your folder permissions and try again.' => 'Impossibile scrivere nel file. Controlla le autorizzazioni della cartella e riprova.',
+	'Unable to write to layouts folder.' => 'Impossibile scrivere nella cartella dei layout.',
+	'Unable to write to apps folder.' => 'Impossibile scrivere nella cartella dell\'applicazione.',
+	'Unable to write to cache folder.' => 'Impossibile scrivere nella cartella della cache.',
+	'Settings' => 'Impostazioni',
+	'Site Settings' => 'Impostazioni Sito',
+	'User Settings' => 'Impostazioni Utente',
+	'Blog Settings' => 'Impostazioni blog',
+	'Language settings' => 'Impostazioni lingua',
+	'Settings saved and admin user created.' => 'Impostazioni salvate e utente amministratore creato.',
+	'Settings saved.' => 'Impostazioni salvate.',
+	'Embedded' => 'Incorporato',
+	'Indexing completed' => 'Indicizzazione completata',
+	'Back' => 'Indietro',
+	'Email address' => 'Indirizzo email',
+	'Insert tag' => 'Inserisci Tag',
+	'Install' => 'Installa',
+	'Install App/Theme' => 'Installa Applicazione/Tema',
+	'Install another' => 'Installa un altro',
+	'Installer' => 'Installatore',
+	'Github installation failed' => 'Installazione Github fallita',
+	'Install completed' => 'Installazione completata',
+	'Zip file installation failed' => 'Installazione file zip fallita',
+	'Elefant Installer' => 'Installer di Elefant',
+	'Introduction' => 'Introduzione',
+	'Submit' => 'Invia',
+	'Send verification' => 'Invia verifica',
+	'Apache mod_rewrite extension must be installed.' => 'L\'estensione mod_rewrite di Apache deve essere installata.',
+	'Field order has been updated.' => 'L\'ordine del campo è stato aggiornato.',
+	'css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei css non è scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei file non è scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei layout non è scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella della cache non è scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>' => 'La cartella delle applicazioni non è scrivibile. Per favore esegui:</p><p><tt>chmod 775 apps</tt>',
+	'lang folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella delle lingue non è scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella di configurazione non è scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'Folder already exists' => 'La cartella esiste già',
+	'The MIT License' => 'La licenza MIT',
+	'The page you requested could not be found.' => 'La pagina richiesta non può essere trovata.',
+	'Password does not match.' => 'La password non corrisponde.',
+	'The following app has been installed:' => 'La seguente applicazione è stata installata:',
+	'Your password must be at least 6 characters.' => 'La tua password dev\'essere di almeno 6 caratteri.',
+	'Your password doesn\'t match.' => 'La tua password non corrisponde.',
+	'PHP version must be 5.3+' => 'La versione di PHP deve essere 5.3+',
+	'Layout' => 'Layout',
+	'Layout added.' => 'Layout aggiunto.',
+	'Page layout' => 'Layout della pagina',
+	'Post page layout' => 'Layout pagina post',
+	'Default layout updated.' => 'Layout predefinito aggiornato.',
+	'Layout saved.' => 'Layout salvato.',
+	'Layouts' => 'Layouts',
+	'License' => 'Licenza',
+	'Lightbox' => 'Lightbox',
+	'Limit to source file' => 'Limitare al file di origine',
+	'Language' => 'Lingua',
+	'Language updated.' => 'Lingua aggiornata.',
+	'Language added.' => 'Lingua aggiunta.',
+	'Language deleted.' => 'Lingua eliminata.',
+	'Default language updated.' => 'Lingua predefinita aggiornata.',
+	'Languages' => 'Lingue',
+	'Link to a zip file or Github repository' => 'Link al file zip o al repositoru Github',
+	'File link' => 'Link del file',
+	'Invalid or expired recovery link' => 'Link di recupero non valido o scaduto',
+	'Locale' => 'Locale',
+	'Admin login' => 'Login amministratore',
+	'Login required' => 'Login richiesto',
+	'Missing property name' => 'Manca il nome della proprietà',
+	'Missing parameter: class' => 'Manca il parametro: class',
+	'Missing parameter: fields' => 'Manca il parametro: fields',
+	'Missing parameter: id' => 'Manca il parametro: id',
+	'Missing parameter: label' => 'Manca il parametro: label',
+	'Missing parameter: name' => 'Manca il parametro: name',
+	'Missing parameter: options' => 'Manca il parametro: options',
+	'Missing parameter: required' => 'Manca il parametro: required',
+	'Missing parameter: type' => 'Manca il parametro: type',
+	'Missing a temporary folder, check your PHP setup.' => 'Manca una cartella temporanea, controllare la configurazione PHP.',
+	'Member' => 'Membro',
+	'Members' => 'Membri',
+	'Month in numeric form' => 'Mese in forma numerica',
+	'Month in numeric form, zero-padded' => 'Mese in forma numerica, con zero iniziale',
+	'Error Message' => 'Messaggio di Errore',
+	'Error message' => 'Messaggio di errore',
+	'Login methods' => 'Metodo di login',
+	'Minutes' => 'Minuti',
+	'Minutes, zero-padded' => 'Minuti, con zero iniziale',
+	'Edit' => 'Modifica',
+	'Editing Locked' => 'Modifica Bloccata',
+	'Edit Block' => 'Modifica Blocco',
+	'Edit file' => 'Modifica File',
+	'Edit Stylesheet' => 'Modifica Foglio di Stile',
+	'Edit Layout' => 'Modifica Layout',
+	'Editing language' => 'Modifica Lingua',
+	'Edit Page' => 'Modifica Pagina',
+	'Edit Blog Post' => 'Modifica Post del Blog',
+	'Edit Profile' => 'Modifica Profilo',
+	'Edit User' => 'Modifica Utente',
+	'Change password' => 'Modifica password',
+	'Done editing' => 'Modifica terminata',
+	'Changed on' => 'Modificata',
+	'View current' => 'Mostra attuale',
+	'Show empty fields' => 'Mostra i campi vuoti',
+	'Show versions' => 'Mostra le versioni',
+	'View profile' => 'Mostra profilo',
+	'Display title' => 'Mostra titolo',
+	'Show all fields' => 'Mostra tutti i campi',
+	'Navigation' => 'Navigazione',
+	'No image url specified.' => 'Nessun URL immagine specificato.',
+	'No file uploaded or file too large.' => 'Nessun file caricato o file troppo grande.',
+	'No file specified.' => 'Nessun file specificato.',
+	'No file was uploaded.' => 'Nessun file è stato caricato.',
+	'No name specified' => 'Nessun nome specificato',
+	'No results.' => 'Nessun risultato.',
+	'No audio playback capabilities' => 'Nessuna funzionalità di riproduzione audio',
+	'No video playback capabilities' => 'Nessuna funzionalità di riproduzione video',
+	'Nobody' => 'Nessuno',
+	'None' => 'Nessuno',
+	'No' => 'No',
+	'Name' => 'Nome',
+	'Field name' => 'Nome Campo',
+	'Invalid File Name' => 'Nome Campo Non Valido',
+	'Site Name' => 'Nome Sito',
+	'Invalid folder name' => 'Nome cartella non valido',
+	'Invalid class name.' => 'Nome classe non valido.',
+	'Month name' => 'Nome del mese',
+	'Month name, abbreviated' => 'Nome del mese abbreviato',
+	'Invalid file name' => 'Nome file non valido',
+	'Invalid name' => 'Nome non valido',
+	'Username' => 'Nome utente',
+	'Could not unzip the file.' => 'Non posso decomprimere il file.',
+	'Not a member?' => 'Non sei un membro?',
+	'Not found' => 'Non trovato',
+	'Note: Installing from links has been disabled because the PHP cURL extension is missing.' => 'Nota: L\'installazione dal link è stata disattivata perché manca l\'estensione PHP cURL.',
+	'Note: Pages that are not publicly visible will not be listed here.' => 'Nota: Pagine che non sono visibili pubblicamente non saranno elencate qui.',
+	'New folder' => 'Nuova cartella',
+	'New password' => 'Nuova password',
+	'New Stylesheet' => 'Nuovo Foglio di Stile',
+	'New Layout' => 'Nuovo Layout',
+	'New Post' => 'Nuovo Post',
+	'New User' => 'Nuovo Utente',
+	'New file' => 'Nuovo file',
+	'Required' => 'Obbligatorio',
+	'Dynamic Objects' => 'Oggetti Dinamici',
+	'OpenID' => 'OpenID',
+	'Extra Options' => 'Opzioni Extra',
+	'Auto-post options' => 'Opzioni auto-post',
+	'Hours in 12-hour time' => 'Ore in formato 12-ore',
+	'Hours in 12-hour time, zero-padded' => 'Ore in formato 12-ore, ccon zero iniziale',
+	'Hours in 24-hour time' => 'Ore in formato 24-ore',
+	'Hours in 24-hour time, zero-padded' => 'Ore in formato 24-ore, con zero iniziale',
+	'Page created.' => 'Pagina creata.',
+	'Page deleted.' => 'Pagina eliminata.',
+	'Page not found' => 'Pagina non trovata',
+	'Page saved.' => 'Pagina salvata.',
+	'Keywords (comma-separated)' => 'Parole chiave (separate da virgola)',
+	'Password' => 'Password',
+	'Password updated' => 'Password aggiornata',
+	'Admin Password' => 'Password amministratore',
+	'Weak password' => 'Password debole',
+	'Forgot your password?' => 'Password dimenticata?',
+	'Strong password' => 'Password forte',
+	'Very strong password' => 'Password molto forte',
+	'Please log in to continue.' => 'Per favore, accedi per continuare.',
+	'Please upload a zip file.' => 'Per favore, carica un file zip.',
+	'Please confirm your email address' => 'Per favore, conferma il tuo indirizzo email',
+	'Please correct the problem and try again.' => 'Per favore, correggi i problemi e riprova.',
+	'Please enter the language code.' => 'Per favore, inserisci il codice della lingua.',
+	'Please enter the name of the language.' => 'Per favore, inserisci il nome della lingua.',
+	'Please enter the character set.' => 'Per favore, inserisci il set di caratteri.',
+	'Please enter a link or upload a file.' => 'Per favore, inserisci un link o carica un file.',
+	'Please enter a name for your stylesheet.' => 'Per favore, inserisci un nome per il tuo foglio di stile.',
+	'Please enter a name for your layout.' => 'Per favore, inserisci un nome per il tuo layout.',
+	'Please enter a {{field}}.' => 'Per favore, inserisci un {{field}}.',
+	'Please try again later.' => 'Per favore, riprova più tardi.',
+	'Please select a file to upload.' => 'Per favore, scegli un file da caricare.',
+	'Auto-saved data found for this form.' => 'Per questo form sono presenti dati auto-salvati.',
+	'Invalid Path' => 'Percorso Non Valido',
+	'Period' => 'Periodo',
+	'Permanent (best for SEO)' => 'Permanente (migliore per SEO)',
+	'Port' => 'Porta',
+	'Invalid location' => 'Posizione non valida',
+	'Blog Posts' => 'Post del blog',
+	'Newer posts' => 'Post più recenti',
+	'Older posts' => 'Post più vecchi',
+	'Table prefix:' => 'Prefisso tabelle:',
+	'Newest first' => 'Prima i più recenti',
+	'Oldest first' => 'Prima i più vecchi',
+	'Private' => 'Privato',
+	'Profile Updated' => 'Profilo Aggiornato',
+	'Properties' => 'Proprietà',
+	'Properties saved.' => 'Proprietà salvate.',
+	'Next' => 'Prossimo',
+	'Published' => 'Pubblicato',
+	'Public' => 'Pubblico',
+	'Clear' => 'Pulisci',
+	'Social buttons' => 'Pulsanti Social',
+	'Which columns should be imported?' => 'Quali colonne devono essere importate?',
+	'This page forwards visitors to the following link' => 'Questa pagina manda i visitatori al seguente link',
+	'This is a preview of how your layout will look.' => 'Questa è un\'anteprima di come apparirà il tuo layout.',
+	'This object is already being edited by' => 'Questo oggetto è già in fase di modifica da',
+	'This installer will guide you through the process of installing and configuring your new website.' => 'Questo programma di installazione ti guiderà attraverso il processo di installazione e configurazione del tuo nuovo sito Web.',
+	'Password recovery' => 'Recupero password',
+	'Sign Up' => 'Registrati',
+	'Sign up here' => 'Registrati qui',
+	'Reset Password' => 'Reimpostare la Password',
+	'Make default' => 'Rendi predefinito',
+	'Requirements' => 'Requisiti',
+	'Rebuild index' => 'Ricostruisci indice',
+	'Rebuilding index' => 'Ricostruzione indice',
+	'Date formatting reference' => 'Riferimento formattazione data',
+	'Drop down' => 'Rilascia',
+	'Drop down options (one per line)' => 'Rilascia opzioni (una per riga)',
+	'Rename' => 'Rinomina',
+	'Restore' => 'Ripristino',
+	'Try Again' => 'Riprova',
+	'Newer results' => 'Risultati più recenti',
+	'Older results' => 'Risultati più vecchi',
+	'Save' => 'Salva',
+	'Save Block' => 'Salva Blocco',
+	'Save File' => 'Salva File',
+	'Save Stylesheet' => 'Salva Foglio di Stile',
+	'Save Settings' => 'Salva Impostazioni',
+	'Save Layout' => 'Salva Layout',
+	'Save Page' => 'Salva Pagina',
+	'Save Blog Post' => 'Salva Post',
+	'Save User' => 'Salva Utente',
+	'Save &amp; Keep Editing' => 'Salva e rimani in modifica',
+	'Save {{appname|ucfirst}}' => 'Salva {{appname|ucfirst}}',
+	'Saving Stylesheet Failed' => 'Salvataggio Foglio di Stile Fallito',
+	'Saving Layout Failed' => 'Salvataggio Layout Fallito',
+	'Failed to save...' => 'Salvataggio fallito...',
+	'File save failed' => 'Salvataggio file fallito',
+	'Saved!' => 'Salvato!',
+	'Choose an importer' => 'Scegli un importatore',
+	'Choose a new password' => 'Scegli una nuova password',
+	'Choose a password' => 'Scegli una password',
+	'Choose a password for your new account.' => 'Scegli una password per il tuo nuovo account.',
+	'Failed to write the file to disk.' => 'Scrittura del file su disco fallita.',
+	'Failed to write to conf/config.php' => 'Scrittura su conf/config.php fallita.',
+	'Dark' => 'Scuro',
+	'If you have any trouble during the install process, please visit the Elefant project at the following link to report it, and we\'ll do our best to help.' => 'Se hai problemi durante il processo di installazione, riportalo al progetto Elefant al link seguente e noi faremo del nostro meglio per aiutarti.',
+	'Seconds' => 'Secondi',
+	'Seconds with milliseconds' => 'Secondi con millisecondi',
+	'Seconds, zero-padded' => 'Secondi, con zero iniziale',
+	'Seconds, zero-padded, with milliseconds' => 'Secondi, con zero iniziale e millisecondi',
+	'Mark imported posts as published?' => 'Segna i post importati come pubblicati?',
+	'Are you sure you want to cancel and lose any changes?' => 'Sei sicuro di annullare perdendo le modifiche?',
+	'Are you sure you want to cancel?' => 'Sei sicuro di voler annullare?',
+	'Are you sure you want to delete the current block?' => 'Sei sicuro di voler eliminare il blocco corrente?',
+	'Are you sure you want to delete the default block? This will remove it from all pages using this block' => 'Sei sicuro di voler eliminare il blocco predefinito? Questo verrà rimosso da tutte le pagine in cui è utilizzato.',
+	'Are you sure you want to delete this {{appname}}?' => 'Sei sicuro di voler eliminare l\'applicazione {{appname}}?',
+	'Are you sure you want to delete the current page?' => 'Sei sicuro di voler eliminare la pagina corrente?',
+	'Are you sure you want to permanently delete this layout file?' => 'Sei sicuro di voler eliminare permanentemente questo layout?',
+	'Are you sure you want to permanently delete this stylesheet file?' => 'Sei sicuro di voler eliminare permanentemente questo stile?',
+	'Are you sure you want to delete this language?' => 'Sei sicuro di voler eliminare questa lingua?',
+	'Are you sure you want to delete this page?' => 'Sei sicuro di voler eliminare questa pagina?',
+	'Are you sure you want to delete this block?' => 'Sei sicuro di voler eliminare questo blocco?',
+	'Are you sure you want to delete this field?' => 'Sei sicuro di voler eliminare questo campo?',
+	'Are you sure you want to delete this post?' => 'Sei sicuro di voler eliminare questo post?',
+	'Are you sure you want to delete this user?' => 'Sei sicuro di voler eliminare questo utente?',
+	'It looks like you\'re trying to install Elefant into a sub-folder.' => 'Sembra che tu stia installando Elefant in una sottocartella.',
+	'Server' => 'Server',
+	'Character set' => 'Set di caratteri',
+	'Browse' => 'Sfoglia',
+	'Browse...' => 'Sfoglia...',
+	'Website' => 'Sito web',
+	'I Agree' => 'Sono d\'accordo',
+	'Off' => 'Spento',
+	'Saving...' => 'Sto salvando...',
+	'Tools' => 'Strumenti',
+	'Yes' => 'Sì',
+	'Database tables created and settings saved.' => 'Tabelle del database create e impostazioni salvate.',
+	'Tags' => 'Tags',
+	'Tags (comma-separated)' => 'Tags (separati da virgole)',
+	'Temporary' => 'Temporaneo',
+	'Finish importing' => 'Termina importazione',
+	'Finished' => 'Terminato',
+	'Single-line text' => 'Testo a linea singola',
+	'Original text' => 'Testo originale',
+	'Paragraph text' => 'Testo paragrafo',
+	'Type' => 'Tipo',
+	'User type' => 'Tipo utente',
+	'Title' => 'Titolo',
+	'Alternate window title' => 'Titolo alternativo finestra',
+	'Alternate menu title' => 'Titolo alternativo menu',
+	'Block title' => 'Titolo blocco.',
+	'Blog title' => 'Titolo blog',
+	'Page title' => 'Titolo pagina',
+	'Back to posts' => 'Torna al post.',
+	'Translated' => 'Tradotto',
+	'Drag pages to the site tree to include them in your navigation.' => 'Trascina le pagine nell\'albero del sito per includerle nella navigazione.',
+	'Drag pages here to remove them from the tree.' => 'Trascina le pagine qui per rimuoverle dall\'albero.',
+	'Too many login attempts' => 'Troppi tentativi di accesso',
+	'Too weak' => 'Troppo debole',
+	'All Pages' => 'Tutte le pagine',
+	'All tags' => 'Tutti i TAG',
+	'Twitter' => 'Twitter',
+	'Latest Posts' => 'Ultimi Post',
+	'Last Modified' => 'Ultimo Modificato',
+	'Last changed' => 'Ultimo cambiato',
+	'Last modified' => 'Ultimo modificato',
+	'A PHP extension stopped the file upload.' => 'Una estensione PHP ha bloccato il caricamento del file.',
+	'One or more server requirements failed' => 'Uno o più requisiti del server non soddisfatti',
+	'Log out' => 'Uscire',
+	'User added.' => 'Utente aggiunto.',
+	'User deleted.' => 'Utente eliminato',
+	'User saved.' => 'Utente salvato.',
+	'Users' => 'Utenti',
+	'Go' => 'Vai',
+	'Verify Password' => 'Verifica Password',
+	'Testing Requirements' => 'Verifica Requisiti',
+	'Verification failed: Invalid configuration file.' => 'Verifica fallita: file di configurazione non valido.',
+	'Verification failed: No configuration file found.' => 'Verifica fallita: nessun file di configurazione trovato.',
+	'Verification failed: No name specified' => 'Verifica fallita: nessun nome specificato.',
+	'Verification failed: No type specified.' => 'Verifica fallita: nessun tipo specificato.',
+	'Verification failed: No folder specified' => 'Verifica fallita: nessuna cartella specificata.',
+	'Verification failed: No version specified.' => 'Verifica fallita: nessuna versione specificata.',
+	'Verification failed: Invalid folder name.' => 'Verifica fallita: nome cartella non valido.',
+	'Verification failed: Repository or website required.' => 'Verifica fallita: sito o repository richiesto.',
+	'Verification failed: Invalid type.' => 'Verifica fallita: tipo non valido.',
+	'Check that your permissions are correct and try again.' => 'Verifica i tuoi permessi e riprova.',
+	'Check your host for instructions on setting up sub-domains in production.' => 'Verifica il tuo host per le istruzioni di configurazione di sub-dominio in produzione.',
+	'Verify new password' => 'Verifica nuova password',
+	'Verify password' => 'Verifica password',
+	'Invalid Verifier' => 'Verificatore Non Valido',
+	'True' => 'Vero',
+	'Current version' => 'Versione corrente',
+	'Versions' => 'Versioni',
+	'Versions of' => 'Versioni di',
+	'Embedded Video (MP4)' => 'Video Incorporato (MP4)',
+	'Visit your new website' => 'Visita il tuo nuovo sito web',
+	'Visit your website.' => 'Visita il tuo sito web',
+	'click to upgrade' => 'clicca per aggiornare',
+	'click to install' => 'clicca per installare',
+	'comments' => 'commenti',
+	'by' => 'da',
+	'max' => 'max',
+	'or' => 'o',
+	'optional' => 'opzionale',
+	'choose' => 'scegli',
+	'{{field|ucfirst}}' => '{{field|ucfirst}}',
+	'An Error Occurred' => 'È avvenuto un Errore',
+	'An unknown error occurred.' => 'È avvenuto un Errore sconosciuto',
+	'A theme by this name is already installed.' => 'È già installato un tema con questo nome.',
+	'An app by this name is already installed.' => 'È installata un\'app con questo nome.',
+	'Admin access required.' => 'È richiesto l\'accesso amministrativo ',
+	'An email has been sent with a link to reset your password.' => 'È stata inviata una email con un link per annullare la password.',
+	'is required' => 'è richiesto'
+);                                      
+
+?>
Files elefant-elefant_1_3_2_beta/lang/ja.php and elefant-elefant_1_3_3_beta/lang/ja.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lang/languages.php elefant-elefant_1_3_3_beta/lang/languages.php
--- elefant-elefant_1_3_2_beta/lang/languages.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lang/languages.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,83 +1,102 @@
-; <?php /*
-
-[en]
-
-name                    = English
-code                    = en
-locale                  = Off
-charset                 = UTF-8
-fallback                = Off
-default                 = On
-
-[fr]
-
-name                    = "Français"
-code                    = fr
-locale                  = Off
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-
-[nl]
-
-name                    = Nederlands
-code                    = nl
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-
-[cs]
-
-name                    = "Česky"
-code                    = cs
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-locale                  = Off
-date_format             = d.mmmm yyyy
-short_format            = dd.mm.yyyy
-time_format             = "HH:MM"
-
-[ru]
-
-name                    = "Русский"
-code                    = ru
-locale                  = Off
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-date_format             = dd mmmm yyyy
-short_format            = dd mmm
-time_format             = "HH:MM"
-
-[uk]
-
-name                    = "Українська"
-code                    = uk
-locale                  = Off
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-date_format             = dd mmmm yyyy
-short_format            = dd mmm
-time_format             = "HH:mm"
-
-[ja]
-
-name                    = "日本語"
-code                    = ja
-locale                  = Off
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-
-[zh]
-
-name                    = "简体中文"
-code                    = zh
-locale                  = Off
-charset                 = UTF-8
-fallback                = Off
-default                 = Off
-
+; <?php /*
+
+[en]
+
+name                    = English
+code                    = en
+locale                  = Off
+charset                 = UTF-8
+fallback                = Off
+default                 = On
+
+[fr]
+
+name                    = "Français"
+code                    = fr
+locale                  = Off
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+
+[de]
+
+name                    = Deutsch
+code                    = de
+locale                  = Off
+charset                 = UTF-8
+default                 = Off
+date_format             = d mmmm yyyy
+short_format            = d mmm
+time_format             = "HH:MM"
+
+[it]
+
+name                    = Italiano
+code                    = it
+locale                  = Off
+charset                 = UTF-8
+default                 = Off
+
+[nl]
+
+name                    = Nederlands
+code                    = nl
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+
+[cs]
+
+name                    = "Česky"
+code                    = cs
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+locale                  = Off
+date_format             = d.mmmm yyyy
+short_format            = dd.mm.yyyy
+time_format             = "HH:MM"
+
+[ru]
+
+name                    = "Русский"
+code                    = ru
+locale                  = Off
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+date_format             = dd mmmm yyyy
+short_format            = dd mmm
+time_format             = "HH:MM"
+
+[uk]
+
+name                    = "Українська"
+code                    = uk
+locale                  = Off
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+date_format             = dd mmmm yyyy
+short_format            = dd mmm
+time_format             = "HH:mm"
+
+[ja]
+
+name                    = "日本語"
+code                    = ja
+locale                  = Off
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+
+[zh]
+
+name                    = "简体中文"
+code                    = zh
+locale                  = Off
+charset                 = UTF-8
+fallback                = Off
+default                 = Off
+
 ; */ ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/lang/new_lang.php and elefant-elefant_1_3_3_beta/lang/new_lang.php are identical
Files elefant-elefant_1_3_2_beta/lang/nl.php and elefant-elefant_1_3_3_beta/lang/nl.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lang/ru.php elefant-elefant_1_3_3_beta/lang/ru.php
--- elefant-elefant_1_3_2_beta/lang/ru.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lang/ru.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,563 @@
-<?php
-
-$this->lang_hash['ru'] = array (
-	'Nobody' => '(никто)',	'Auto-saved data found for this form.' => 'Авто-сохраненные данные найдены для этой формы.',	'Author' => 'Автор',	'Email address' => 'Адрес электронной почты',	'Alternate menu title' => 'Альтернативное название меню',	'Alternate window title' => 'Альтернативное название окна',	'Drag these pages to the site tree to include them in your navigation.' => 'Берите эти страницы мышкой чтобы включить их в дерево сайта.',	'Blocks' => 'Блоки',	'Drag pages here to remove them from the tree.' => 'Бросте страницу сюда чтобы удалить из дерева.',	'Alphabetical' => 'В алфавитном порядке',	'Your password must be at least 6 characters.' => 'Ваш пароль должен быть не короче 6 символов.',	'Your password doesn\'t match.' => 'Ваш пароль не совпал.',	'Your name' => 'Ваше имя',	'Website' => 'Вебсайт',	'Versions' => 'Версии',	'Versions of' => 'Версии',	'Sign in' => 'Войти',	'Restore' => 'Востановить',	'Reset Password' => 'Востановить пароль',	'Password recovery' => 'Востановление пароля',	'Temporary' => 'Временный',	'All Pages' => 'Все страницы',	'Sign in with' => 'Вход с',	'You must enter an email address.' => 'Вы должны ввести адрес электронной почты.',	'You must enter a page title.' => 'Вы должны ввести заголовое страницы.',	'You must enter a name.' => 'Вы должны ввести имя.',	'You must enter your name.' => 'Вы должны ввести имя.',	'You must enter body content.' => 'Вы должны ввести контент страницы.',	'You must enter a block title.' => 'Вы должны ввести название блока.',	'You must enter a password.' => 'Вы должны ввести пароль.',	'You must enter a valid email, or email not found.' => 'Вы должны ввести рабочий адрес или адрес не найден.',	'You must enter a valid email, or your email may already be registered.' => 'Вы должны ввести рабочий адрес или адрес уже зарегистрирован.',	'Are you sure you want to cancel and lose any changes?' => 'Вы уверенны что хотите прервать и потерять изменения?',	'Are you sure you want to delete this block?' => 'Вы уверенны что хотите удалить этот блок?',	'Are you sure you want to delete the current page?' => 'Вы уверенны, что хотите удалить текущую страницу?',	'Are you sure you want to delete this page?' => 'Вы уверены что хотите удалить эту страницу?',	'Are you sure you want to delete the current block?' => 'Вы хотите удалить текущий блок?',	'Are you sure you want to delete this user?' => 'Вы хотите удалить этого пользователя?',	'Are you sure you want to delete this language?' => 'Вы хртите удалить язык?',	'Choose a new password' => 'Выберите новый пароль',	'Choose a password' => 'Выберите пароль',	'Choose a password for your new account.' => 'Выберите пароль для нового пользователя.',	'Log out' => 'Выход',	'Yes' => 'Да',	'Date' => 'Дата',	'Site tree' => 'Дерево вебсайта',	'Page layout' => 'Дизайн страницы',	'The layout you entered doesn\'t exist.' => 'Дизайн страницы не найден.',	'Dynamic Objects' => 'Динамические объекты',	'Add' => 'Добавить',	'Add Block' => 'Добавить блок',	'Add User' => 'Добавить пользователя',	'Add Page' => 'Добавить страницу',	'Add language' => 'Добавить язык',	'Extra Options' => 'Дополнительные опции',	'Access' => 'Доступ',	'Other versions' => 'Другие версии',	'Other pages' => 'Другие страницы',	'Forgot your password?' => 'Забыли пароль?',	'Page title' => 'Заголовок страницы',	'Upload' => 'Загрузить',	'Done editing' => 'Закончить редактирование',	'The page you requested could not be found.' => 'Запрашиваемая страница не найдена',	'ID' => 'Идентификатор',	'Block ID' => 'Идентификатор блока',	'Your ID must be a lowercase alphanumeric value and can\'t already exist.' => 'Идентификатор блока должен быть введен малыми буквами латыницы и не должен уже использоваться.',	'Your ID must be a lowercase alphanumeric value.' => 'Идентификатор блока должен быть введен малыми буквами латыницы.',	'Page ID' => 'Идентификатор страницы',	'Your ID must be a lowercase alphanumeric value and can\'t already exist. It must also not share the name of an app.' => 'Идентификатор страницы должен быть введен малыми буквами латыницы и не должен уже использоваться. Также он не должен совпадать с именем аппликации.',	'Your ID must be a lowercase alphanumeric value. It must also not share the name of an app.' => 'Идентификатор страницы должен быть введен малыми буквами латыницы. Также он не должен совпадать с именем аппликации.',	'Changed on' => 'Изменено',	'Name' => 'Имя',	'No name specified' => 'Имя не указано',	'Building index' => 'Индексация',	'Indexing completed' => 'Индексация закончена',	'Tools' => 'Инструменты',	'Go' => 'Искать',	'Source' => 'Источник',	'Keywords (comma-separated)' => 'Ключевые слова (разделенные запятой)',	'Code' => 'Код',	'Language code' => 'Код языка',	'Body' => 'Контент',	'File Manager' => 'Менежер файлов',	'Navigation' => 'Навигация',	'Click here to restore.' => 'Нажмите тут чтобы востановить.',	'Click to update photo' => 'Нажмите чтобы обновить фото',	'Back' => 'Назад',	'Title' => 'Название',	'Block title' => 'Название блока',	'Settings' => 'Настройки',	'Language settings' => 'Настройки языка',	'Home' => 'Начальная страница',	'Not a member?' => 'Не зарегистрированы?',	'Not found' => 'Не найден',	'Unable to rename' => 'Невожможно переименовать',	'Unable to create folder' => 'Невозможно создать папку',	'Unable to save the file.' => 'Невозможно сохранить файл.',	'Unable to delete' => 'Невозможно удалить',	'Unable to delete folders' => 'Невозможно удалить папку',	'Unknown error' => 'Неизвестная ошибка',	'Invalid directory' => 'Неправильна директория',	'Invalid location' => 'Неправильная локация',	'Invalid name' => 'Неправильное имя',	'Invalid folder name' => 'Неправильное имя папки',	'Invalid file name' => 'Неправильное имя файла',	'Invalid or expired recovery link' => 'Неправильный или прослоченый линк для востановления пароля',	'Incorrect email or password, please try again.' => 'Неправильный почтовый адрес или пароль. Попробуйте еще раз.',	'Invalid Path' => 'Неправильный путь',	'No' => 'Нет',	'No audio playback capabilities' => 'Нет возможности воспроизвести аудио-файл',	'No video playback capabilities' => 'Нет возможности воспроизвести видео-файл.',	'No file uploaded or file too large.' => 'Нет файла для загрузки или файл очень большой.',	'No file was uploaded.' => 'Никакой файл не был загружен.',	'New folder' => 'Новая папка',	'Newest first' => 'Новее сначала',	'New password' => 'Новый пароль',	'New User' => 'Новый пользователь',	'New file' => 'Новый файл',	'Change password' => 'Обновить пароль',	'Update Profile' => 'Обновить профиль',	'Upgrade completed' => 'Обновление завершено',	'Limit to source file' => 'Ограничить источником',	'Description' => 'Описание',	'Original text' => 'Оригинальный текст',	'Cancel' => 'Отмена',	'Submit' => 'Отправить',	'Too many login attempts' => 'Очень много попыток входа',	'Clear' => 'Очистить',	'Folder' => 'Папка',	'Folder renamed.' => 'Папка переименована.',	'Folder created.' => 'Папка создана.',	'Password' => 'Пароль',	'Password updated' => 'Пароль обновлен',	'Translated' => 'Переведено',	'Rename' => 'Переименовать',	'Rebuilding index' => 'Переиндексация',	'Rebuild index' => 'Переиндексировать',	'Please log in to continue.' => 'Пожалуйста войдите для продолжения.',	'Please confirm your email address' => 'Пожалуйста подтвердите ваш электронный адрес',	'Please try again later.' => 'Пожалуйста, попробуйте попозже.',	'Show versions' => 'Показать версии',	'Show all fields' => 'Показать все поля',	'Show empty fields' => 'Показать пустые поля',	'Display title' => 'Показывать название',	'Field' => 'Поле',	'Users' => 'Пользователи',	'User added.' => 'Пользователь добавлен.',	'User saved.' => 'Пользователь сохранен.',	'User deleted.' => 'Пользователь удален.',	'Send verification' => 'Послать верификацию',	'Last changed' => 'Последнее изменение',	'Last modified' => 'Последнее изменение',	'View current' => 'Посмотреть текущую',	'Oldest first' => 'Постарше сначала',	'Permanent (best for SEO)' => 'Постоянный',	'Email' => 'Почтовый адрес',	'Private' => 'Приватно',	'Note: Pages that are not publicly visible will not be listed here.' => 'Примечание: Отображены только страницы доступные публично.',	'Verify new password' => 'Проверить новый пароль',	'Verify password' => 'Проверить пароль',	'Check your inbox' => 'Проверьте Ваш почтовый ящик',	'Continue' => 'Продолжить',	'An Error Occurred' => 'Произошла ошибка',	'Missing property name' => 'Пропущено имя свойства',	'Browse' => 'Просмотр',	'Preview' => 'Просмотр',	'Visit your website.' => 'Просмотреть Ваш вебсайт.',	'View profile' => 'Просотреть профиль',	'Profile Updated' => 'Профиль обновлен',	'Public' => 'Публично',	'File size' => 'Размер файла',	'Sign Up' => 'Регистрация',	'Sign up here' => 'Регистрация здесь',	'Account Verified' => 'Регистрация проверена',	'Editing Locked' => 'Редактирование блокировано',	'Edit' => 'Редактировать',	'Edit Block' => 'Редактировать блок',	'Edit User' => 'Редактировать пользователя',	'Edit Profile' => 'Редактировать профиль',	'Edit Page' => 'Редактировать страницу',	'Editing language' => 'Редактировать язык',	'Drag and drop pages to organize your navigation.' => 'Реорганизуйте навигацию мышкой.',	'File upload failed' => 'Сбой загрузки файла',	'Failed to write the file to disk.' => 'Сбой при записи файла на диск.',	'Failed to save...' => 'Сбой при сохранении...',	'File save failed' => 'Сбой сохранения файла',	'Properties' => 'Свойства',	'Properties saved.' => 'Свойства сохранены.',	'Done.' => 'Сделано.',	'Make default' => 'Сделать по умолчанию',	'Contains text...' => 'Содержит текст....',	'Error message' => 'Сообщение ошибки',	'Error Message' => 'Сообщение ошибки',	'An email has been sent with a link to reset your password.' => 'Сообщение с линком для востановления пароля было послано.',	'Saving...' => 'Сохранение....',	'Saved!' => 'Сохранено!',	'Save' => 'Сохранить',	'Save Block' => 'Сохранить блок',	'Save &amp; Keep Editing' => 'Сохранить и продолжить редактировать',	'Save User' => 'Сохранить пользователя',	'Save Page' => 'Сохранить страницу',	'Comparing' => 'Сравнение',	'Compare to current' => 'Стравнить с текущей',	'Page not found' => 'Страница не найдена',	'Page created.' => 'Страница создана.',	'Page saved.' => 'Страница сохранена.',	'Page deleted.' => 'Страница удалена.',	'Current' => 'Текущая',	'Current version' => 'Текущая версия',	'Type' => 'Тип',	'User type' => 'Тип пользователя',	'Authorization required.' => 'Требуется авторизация.',	'Login required' => 'Требуется вход',	'Admin access required.' => 'Требуется доспуп администратора.',	'Delete' => 'Удалить',	'Delete Block' => 'Удалить блок',	'Delete Page' => 'Удалить страницу',	'Language deleted.' => 'Удалить язык.',	'Hmm, we can\'t seem to find the page you wanted at the moment.' => 'Ух... куда же вас занесло....',	'Member' => 'Участник',	'Members' => 'Участники',	'File already exists' => 'Файд уже существует',	'The file was only partially uploaded.' => 'Файл был загружен частично.',	'File not found' => 'Файл не найден',	'File size is too large.' => 'Файл очень большой.',	'File renamed.' => 'Файл переименован.',	'A file by that name already exists.' => 'Файл с таким именем уже существует.',	'File saved.' => 'Файл сохранен.',	'File deleted.' => 'Файл удален.',	'Folder already exists' => 'Файл уже существует',	'File Already Exists' => 'Файл уже существует',	'Files' => 'Файлы',	'This page forwards visitors to the following link' => 'Эта страница перенаправляет визиторов по ссылке',	'The language code entered already exists.' => 'Этот код языка уже существует.',	'This object is already being edited by' => 'Этот объект редактируется',	'Language' => 'Язык',	'Language added.' => 'Язык добавлен.',	'Language updated.' => 'Язык обновлен.',	'Default language updated.' => 'Язык по умолчанию обновлен.',	'Languages' => 'Языки',	'or' => 'или',	'click to install' => 'нажмите для инсталляции',	'click to upgrade' => 'нажмите для обновления',	'optional' => 'опционально'
-);
-
+<?php
+
+$this->lang_hash['ru'] = array (
+	'- select -' => '- Выберите -',
+	'.htaccess file is missing from the site root. Please save the following file to your server:' => 'Файл .htaccess отсутствует в корне сайта. Пожалуйста, сохраните следующий файл на Ваш сервер:',
+	'{{field|ucfirst}}' => '{{field|ucfirst}}',
+	'1 result:' => '1 результат:',
+	'A file by that name already exists.' => 'Файл с таким именем уже существует.',
+	'A PHP extension stopped the file upload.' => 'Расширение PHP остановило загрузку файла.',
+	'A theme by this name is already installed.' => 'Тема с таким названием уже установлена.',
+	'Access' => 'Доступ',
+	'Account Verified' => 'Регистрация проверена',
+	'Add {{appname|ucfirst}}' => 'Добавить {{appname|ucfirst}}',
+	'Add Block' => 'Добавить блок',
+	'Add Blog Post' => 'Добавить запись в блог',
+	'Add Field' => 'Добавить поле',
+	'Add language' => 'Добавить язык',
+	'Add Page-Specific Block' => 'Добавить блок с привязкой к странице',
+	'Add Page' => 'Добавить страницу',
+	'Add User' => 'Добавить пользователя',
+	'Add' => 'Добавить',
+	'Admin access required.' => 'Требуется доспуп администратора.',
+	'Admin Email' => 'Почтовый адрес администратора',
+	'Admin login' => 'Имя для входа администратора',
+	'Admin Password' => 'Пароль администратора',
+	'All Pages' => 'Все страницы',
+	'All tags' => 'Все метки',
+	'Alphabetical' => 'По алфавиту',
+	'Alternate menu title' => 'Альтернативное название меню',
+	'Alternate window title' => 'Альтернативное название окна',
+	'An app by this name is already installed.' => 'Приложение с таким названием уже установлено.',
+	'An email has been sent with a link to reset your password.' => 'Сообщение с линком для востановления пароля было послано.',
+	'An Error Occurred' => 'Произошла ошибка',
+	'An unknown error occurred.' => 'Произошла неизвестная ошибка.',
+	'Apache mod_rewrite extension must be installed.' => 'Должно быть установлено расширение Apache mod_rewrite.',
+	'Application ID' => 'Идентификатор приложения',
+	'Application secret' => 'Секретный код приложения',
+	'apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>' => 'Папка apps закрыта на запись. Выполните:</p><p><tt>chmod 775 apps</tt>',
+	'Are you sure you want to cancel and lose any changes?' => 'Вы уверены, что хотите прервать и потерять изменения?',
+	'Are you sure you want to cancel?' => 'Вы в самом деле хотите отменить?',
+	'Are you sure you want to delete the current block?' => 'Вы в самом деле хотите удалить текущий блок?',
+	'Are you sure you want to delete the current page?' => 'Вы уверены, что хотите удалить текущую страницу?',
+	'Are you sure you want to delete the default block? This will remove it from all pages using this block' => 'Вы в самом деле хотите удалить блок по умолчанию, даже, если он будет удалён со всех страниц, где он был?',
+	'Are you sure you want to delete this {{appname}}?' => 'Вы в самом деле считаете, что {{appname}} нужно удалить?',
+	'Are you sure you want to delete this block?' => 'Вы уверены, что хотите удалить этот блок?',
+	'Are you sure you want to delete this field?' => 'Вы действительно хотите удалить это поле?',
+	'Are you sure you want to delete this language?' => 'Вы не ошиблись и хотите удалить этот язык?',
+	'Are you sure you want to delete this page?' => 'Вы уверены, что Вам нужно удалить эту страницу?',
+	'Are you sure you want to delete this post?' => 'Вам абсолютно точно нужно удалить эту запись?',
+	'Are you sure you want to delete this user?' => 'Вы на самом деле желаете удалить этого пользователя?',
+	'Are you sure you want to permanently delete this layout file?' => 'Вы уверены, что хотите совсем удалить этот шаблон компоновки?',
+	'Are you sure you want to permanently delete this stylesheet file?' => 'Вы уверены, что стоит совсем удалить эту стилевую таблицу?',
+	'Author' => 'Автор',
+	'Authorization required.' => 'Требуется авторизация.',
+	'Auto-post options' => 'Настройка автопостинга',
+	'Auto-saved data found for this form.' => 'Для этой формы найдены автоматически сохранённые данные.',
+	'Auto-saved data found.' => 'Найдены автоматически сохранённые данные.',
+	'Back to posts' => 'Вернуться к записям',
+	'Back' => 'Назад',
+	'Block deleted.' => 'Блок удалён.',
+	'Block ID' => 'Идентификатор блока',
+	'Block title' => 'Название блока',
+	'Blocks' => 'Блоки',
+	'Blog post added.' => 'Добавлена запись в блог.',
+	'Blog post deleted.' => 'Удалена запись из блога.',
+	'Blog post saved.' => 'Сохранена запись блога.',
+	'Blog Posts' => 'Записи блога',
+	'Blog Settings' => 'Настрйки блога',
+	'Blog title' => 'Заголовок блога',
+	'Blogger export file' => 'Файл экспорта Blogger',
+	'Blogger importer' => 'Импорт из Blogger',
+	'Body' => 'Контент',
+	'Browse...' => 'Смотри...',
+	'Browse' => 'Просмотр',
+	'Building index' => 'Индексация',
+	'cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'Папка cache закрыта на запись. Выполните:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
+	'Cancel' => 'Отмена',
+	'Change password' => 'Обновить пароль',
+	'Changed on' => 'Изменено',
+	'Character set' => 'Набор символов',
+	'Charset' => 'Набор символов',
+	'Check that your permissions are correct and try again.' => 'Убедитесь, что обладаете нужными полномочиями, и попробуйте ещё раз.',
+	'Check your host for instructions on setting up sub-domains in production.' => 'Проверьте Ваш хост на наличие инструкций по установкам для использования поддоменов.',
+	'Check your inbox' => 'Проверьте Ваш почтовый ящик',
+	'Choose a new password' => 'Выберите новый пароль',
+	'Choose a password for your new account.' => 'Выберите пароль для нового пользователя.',
+	'Choose a password' => 'Выберите пароль',
+	'Choose an importer' => 'Выберите формат импорта',
+	'choose' => 'выберите',
+	'Clear' => 'Очистить',
+	'Click \'Next\' to continue whenever you\'re ready. Thanks for using Elefant!' => 'Нажмите \'Дальше\' для продолжения, когда будете готовы. Спасибо, что используете Elefant!',
+	'Click \'Next\' to continue.' => 'Нажмите \'Дальше\' для продолжения.',
+	'Click here for instructions on configuring virtual hosts for development.' => 'Для получения инструкций по настройке виртуальных хостов для разработки, нажмите здесь.',
+	'Click here for more information and translations of the MIT license.' => 'Если нужно больше информации о лицензии MIT или её перевод, нажмите здесь.',
+	'Click here to restore.' => 'Нажмите здесь для восстановления.',
+	'Click to edit.' => 'Нажмите для редактирования.',
+	'click to install' => 'нажмите для установки',
+	'Click to restore.' => 'Нажмите для восстановления.',
+	'Click to update photo' => 'Нажмите чтобы обновить фото',
+	'click to upgrade' => 'нажмите для обновления',
+	'Code' => 'Код',
+	'comments' => 'комментарии',
+	'Comments' => 'Комментарии',
+	'Compare to current' => 'Стравнить с текущей',
+	'Comparing' => 'Сравнение',
+	'conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'Папка conf закрыта на запись. Запустите </p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
+	'Configuration file not found.' => 'Не найден конфигурационный файл.',
+	'Connect & Create Schema' => 'Соединиться и создать схему',
+	'Connection Error' => 'Ошибка соединения',
+	'Consumer key' => 'Ключ потребителя',
+	'Consumer secret' => 'Секретный код потребителя',
+	'Contains text...' => 'Содержит текст....',
+	'Content' => 'Контент',
+	'Continue' => 'Продолжить',
+	'Copyright' => 'Copyright',
+	'Could not unzip the file.' => 'Невозможно разжать zip-файл.',
+	'Create Layout' => 'Создать шаблон дизайна',
+	'Create Stylesheet' => 'Создать стилевую таблицу',
+	'css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'Папка css закрыта на запись. Запустите </p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
+	'CSV Importer' => 'Импорт из CSV',
+	'Current version' => 'Текущая версия',
+	'Current' => 'Текущая',
+	'Custom Fields' => 'Пользовательские поля',
+	'Dark' => 'Тёмный (-ая, -ое)',
+	'Database Connection' => 'Соединение с базой данных',
+	'Database tables created and settings saved.' => 'База данных создана и настройки сохранены.',
+	'Database' => 'База данных',
+	'Date formatting reference' => 'Дата в обычной записи',
+	'Date in ordinal form' => 'Дата в обычной записи',
+	'Date, zero-padded' => 'Дата, дополненная нулями',
+	'Date' => 'Дата',
+	'Date/Time' => 'Дата/время',
+	'Day of the week, abbreviated' => 'День недели, в сокращении',
+	'Day of the week' => 'День недели',
+	'Default language updated.' => 'Язык по умолчанию обновлен.',
+	'Default layout updated.' => 'Обновлён шаблон дизайна по умолчанию.',
+	'Delete Block' => 'Удалить блок',
+	'Delete Page' => 'Удалить страницу',
+	'Delete' => 'Удалить',
+	'Description' => 'Описание',
+	'Designer' => 'Дизайнер',
+	'Display title' => 'Показывать заголовок',
+	'Disqus shortname' => 'Краткое имя Discus',
+	'Disqus' => 'Discus',
+	'Done editing' => 'Закончить редактирование',
+	'Done.' => 'Сделано.',
+	'Drag and drop pages to organize your navigation.' => 'Реорганизуйте навигацию мышкой.',
+	'Drag pages here to remove them from the tree.' => 'Бросьте страницу сюда, чтобы удалить из дерева.',
+	'Drag pages to the site tree to include them in your navigation.' => 'Перетащите страницы мышкой на дерево сайта для включения их в навигацию.',
+	'Drag these pages to the site tree to include them in your navigation.' => 'Берите эти страницы мышкой чтобы включить их в дерево сайта.',
+	'Driver' => 'Драйвер',
+	'Drop down options (one per line)' => 'Опции выпадающего списка (по одной на строку)',
+	'Drop down' => 'Выпадающий',
+	'Dynamic Objects' => 'Динамические объекты',
+	'Edit Block' => 'Редактировать блок',
+	'Edit Blog Post' => 'Редактировать запись блога',
+	'Edit file' => 'Редактировать файл',
+	'Edit Layout' => 'Редактировать шаблон',
+	'Edit Page' => 'Редактировать страницу',
+	'Edit Profile' => 'Редактировать профиль',
+	'Edit Stylesheet' => 'Редактировать стилевую таблицу',
+	'Edit User' => 'Редактировать пользователя',
+	'Edit' => 'Редактировать',
+	'Editing language' => 'Редактировать язык',
+	'Editing Locked' => 'Редактирование блокировано',
+	'Elefant homepage' => 'Домашняя страница Elefant',
+	'Elefant Installer' => 'Установщик Elefant',
+	'Elefant' => 'Elefant',
+	'Elefant\'s CMS was designed to run a complete website, and needs to be installed in the root of a site to function correctly. Please move Elefant to the root folder to continue, or use a sub-domain of your site to install it under.' => 'Elefant CMS разработана для запуска полного сайта и должна устанавливаться в его корень для безошибочной работы. Пожалуйста, переместите Elefant в корневую папку, или используйте поддомен Вашего сайта для установки системы.',
+	'Email address' => 'Адрес электронной почты',
+	'Email' => 'Электронная почта',
+	'Embedded Audio (MP3)' => 'Встроенное аудио (MP3)',
+	'Embedded Flash (SWF)' => 'Встроенный Flash (SWF)',
+	'Embedded Video (MP4)' => 'Встроенное видео (MP4)',
+	'Embedded' => 'Встроенный (-ая, -ое)',
+	'Error importing file' => 'Ошибка при импорте файла',
+	'Error message' => 'Сообщение об ошибке',
+	'Error Message' => 'Сообщение об ошибке',
+	'Error uploading file.' => 'Ошибка при выгрузке файла.',
+	'Error' => 'Ошибка',
+	'Extra Options' => 'Дополнительные опции',
+	'Facebook' => 'Facebook',
+	'Failed to retrieve the file at the specified link.' => 'По указанной ссылке нельзя взять файл.',
+	'Failed to save...' => 'Сбой при сохранении...',
+	'Failed to write the file to disk.' => 'Сбой при записи файла на диск.',
+	'Failed to write to conf/config.php' => 'Сбой при записи в conf/config.php',
+	'Field added.' => 'Поле добавлено.',
+	'Field deleted.' => 'Поле удалено.',
+	'Field name' => 'Название поля.',
+	'Field not found.' => 'Поле не найдено.',
+	'Field order has been updated.' => 'Порядок полей обновлён.',
+	'Field updated.' => 'Поле обновлено.',
+	'Field' => 'Поле',
+	'File already exists' => 'Файд уже существует',
+	'File Already Exists' => 'Файл уже существует',
+	'File deleted.' => 'Файл удален.',
+	'File link' => 'Ссылка на файл',
+	'File Manager' => 'Управление файлами',
+	'File not found' => 'Файл не найден',
+	'File renamed.' => 'Файл переименован.',
+	'File save failed' => 'Сбой сохранения файла',
+	'File saved.' => 'Файл сохранен.',
+	'File size is too large.' => 'Файл очень большой.',
+	'File size' => 'Размер файла',
+	'File Size' => 'Размер файла',
+	'File upload failed' => 'Сбой загрузки файла',
+	'File:' => 'Файл:',
+	'files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'Папка files закрыта на запись. Запустите </p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
+	'Files' => 'Файлы',
+	'Finish importing' => 'Импорт закончен',
+	'Finished' => 'Закончено',
+	'Folder already exists' => 'Файл уже существует',
+	'Folder created.' => 'Папка создана.',
+	'Folder renamed.' => 'Папка переименована.',
+	'Folder' => 'Папка',
+	'Forgot your password?' => 'Забыли пароль?',
+	'Github installation failed' => 'Сбой установки с Github',
+	'Go' => 'Искать',
+	'Google' => 'Google',
+	'Hmm, we can\'t seem to find the page you wanted at the moment.' => 'Ух... Куда же вас занесло.... Похоже, нам не удастся найти требуемую Вами страницу.',
+	'Home' => 'Начальная страница',
+	'Hours in 12-hour time, zero-padded' => 'Часы в 12-тичасовом формате, дополненные нулями',
+	'Hours in 12-hour time' => 'Часы в 12-ти часовом формате',
+	'Hours in 24-hour time, zero-padded' => 'Часы в 24-ёхчасовом формате, дополненные нулями',
+	'Hours in 24-hour time' => 'Часы в 24-ёхчасовом формате',
+	'I Agree' => 'Подтверждаю',
+	'ID' => 'Идентификатор',
+	'If you have any trouble during the install process, please visit the Elefant project at the following link to report it, and we\'ll do our best to help.' => 'Если при установке что-то пошло не так, зайдите на проект Elefant по следующей ссылке, сообщите об этом, и мы постараемся Вам помочь наилучшим образом.',
+	'Import as...' => 'Импортировать как...',
+	'Import Posts' => 'Импортировать записи',
+	'Important: Only install apps or themes from trusted sources.' => 'Важно: устанавливайте приложения и темы из надёжных источников.',
+	'Incorrect email or password, please try again.' => 'Неправильный почтовый адрес или пароль. Попробуйте еще раз.',
+	'Indexing completed' => 'Индексация закончена',
+	'Insert tag' => 'Вставьте метку (тэг)',
+	'Install another' => 'Установить ещё',
+	'Install App/Theme' => 'Установить Приложение/Тему',
+	'Install completed' => 'Установка завершена',
+	'Install' => 'Установить',
+	'Installer' => 'Установщик',
+	'Introduction' => 'Введение',
+	'Invalid class name.' => 'Неправильное название класса',
+	'Invalid directory' => 'Неправильный каталог',
+	'Invalid file name' => 'Неправильное название файла',
+	'Invalid File Name' => 'Неправильное название файла',
+	'Invalid file.' => 'Неправильный файл.',
+	'Invalid folder name' => 'Неправильное название папки',
+	'Invalid location' => 'Неправильное место',
+	'Invalid name' => 'Неправильное имя',
+	'Invalid or expired recovery link' => 'Неправильный или просроченный линк для востановления пароля',
+	'Invalid Path' => 'Неправильный путь',
+	'Invalid Verifier' => 'Неправильный верификатор',
+	'is required' => 'обязательное требование',
+	'It looks like you\'re trying to install Elefant into a sub-folder.' => 'Похоже, Вы пытаетесь поставить Elefant в подкаталог.',
+	'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec' => 'Янв Фев Мар Апр Май Июн Июл Авг Сен Окт Ноя Дек',
+	'January February March April May June July August September October November December' => 'Январь Февраль Март Апрель Май Июнь Июль Август Сентябрь Октябрь Ноябрь Декабрь',
+	'Keywords (comma-separated)' => 'Ключевые слова (через запятую)',
+	'lang folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'Папка lang закрыта на запись. Запустите </p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
+	'Language added.' => 'Язык добавлен.',
+	'Language code' => 'Код языка',
+	'Language deleted.' => 'Удалить язык.',
+	'Language settings' => 'Настройки языка',
+	'Language updated.' => 'Язык обновлен.',
+	'Language' => 'Язык',
+	'Languages' => 'Языки',
+	'Last changed' => 'Последнее изменение',
+	'Last modified' => 'Последнее изменение',
+	'Last Modified' => 'Последнее изменение',
+	'Latest Posts' => 'Свежие записи',
+	'Layout added.' => 'Шаблон добавлен.',
+	'Layout saved.' => 'Шаблон сохранён.',
+	'Layout' => 'Шаблон дизайна',
+	'layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'Папка layouts закрыта на запись. Запустите </p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
+	'Layouts' => 'Шаблоны дизайна',
+	'License' => 'Лицензия',
+	'Light' => 'Светлый (-ая, -ое, -о-)',
+	'Lightbox' => 'Lightbox',
+	'Limit to source file' => 'Ограничить источником',
+	'Link to a zip file or Github repository' => 'Ссылка на zip-архив или репозиторий Github',
+	'Local date format' => 'Местный формат даты',
+	'Local time format' => 'Местный формат времени',
+	'Locale' => 'Локаль',
+	'Log out' => 'Выход',
+	'Login methods' => 'Способы входа',
+	'Login required' => 'Нужно войти',
+	'Make default' => 'Сделать выбором по умолчанию',
+	'Mark imported posts as published?' => 'Отметить импортированные записи как публикуемые?',
+	'max' => 'максимум',
+	'Member' => 'Участник',
+	'Members' => 'Участники',
+	'Minutes, zero-padded' => 'Минуты, дополненные нулями',
+	'Minutes' => 'Минуты',
+	'Missing a temporary folder, check your PHP setup.' => 'Отсутствует временная папка, проверьте настройку PHP.',
+	'Missing parameter: class' => 'Отсутствует параметр: class',
+	'Missing parameter: fields' => 'Отсутствует параметр: fields',
+	'Missing parameter: id' => 'Отсутствует параметр: id',
+	'Missing parameter: label' => 'Отсутствует параметр: label',
+	'Missing parameter: name' => 'Отсутствует параметр: name',
+	'Missing parameter: options' => 'Отсутствует параметр: options',
+	'Missing parameter: required' => 'Отсутствует параметр: required',
+	'Missing parameter: type' => 'Отсутствует параметр: type',
+	'Missing property name' => 'Пропущено название свойства',
+	'Month in numeric form, zero-padded' => 'Месяц по номеру, дополненный нулём',
+	'Month in numeric form' => 'Месяц по номеру',
+	'Month name, abbreviated' => 'Название месяца в сокращении',
+	'Month name' => 'Название месяца',
+	'Multi-file uploader' => 'Многофайловый загрузчик',
+	'Name' => 'Имя',
+	'Navigation' => 'Навигация',
+	'New file' => 'Новый файл',
+	'New folder' => 'Новая папка',
+	'New Layout' => 'Новый шаблон',
+	'New password' => 'Новый пароль',
+	'New Post' => 'Новая запись',
+	'New Stylesheet' => 'Новая стилевая таблица',
+	'New User' => 'Новый пользователь',
+	'Newer posts' => 'Более свежие записи',
+	'Newer results' => 'Более свежие результаты',
+	'Newest first' => 'Сначала более свежие',
+	'Next' => 'Дальше',
+	'No audio playback capabilities' => 'Нет возможности воспроизвести аудио-файл',
+	'No file specified.' => 'Не указан файл.',
+	'No file uploaded or file too large.' => 'Файл не загружен или слишком велик.',
+	'No file was uploaded.' => 'Никакой файл не был загружен.',
+	'No image url specified.' => 'Не указан URL изображения.',
+	'No name specified' => 'Имя не указано',
+	'No posts yet... :(' => 'Пока записей нет... :(',
+	'No results.' => 'Результатов нет.',
+	'No video playback capabilities' => 'Нет возможности воспроизвести видео-файл.',
+	'No' => 'Нет',
+	'Nobody' => '(никто)',
+	'Normal strength' => 'Нормальная сила',
+	'Not a member?' => 'Не зарегистрированы?',
+	'Not found' => 'Не найден',
+	'Note: Installing from links has been disabled because the PHP cURL extension is missing.' => 'Примечание: Установка по ссылкам запрещена, так как отсутствует расширение PHP cURL.',
+	'Note: Pages that are not publicly visible will not be listed here.' => 'Примечание: Отображены только страницы, доступные публично.',
+	'Off' => 'Выкл.',
+	'official blog' => 'официальный блог',
+	'Older posts' => 'Более ранние записи',
+	'Older results' => 'Более ранние результаты',
+	'Oldest first' => 'Сначала более ранние',
+	'One or more server requirements failed' => 'Не удовлетворены одно или больше требований к серверу',
+	'OpenID' => 'OpenID',
+	'optional' => 'опционально',
+	'or' => 'или',
+	'Original text' => 'Оригинальный текст',
+	'Other pages' => 'Другие страницы',
+	'Other versions' => 'Другие версии',
+	'Page created.' => 'Страница создана.',
+	'Page deleted.' => 'Страница удалена.',
+	'Page ID' => 'Идентификатор страницы',
+	'Page layout' => 'Дизайн страницы',
+	'Page not found' => 'Страница не найдена',
+	'Page saved.' => 'Страница сохранена.',
+	'Page title' => 'Заголовок страницы',
+	'Paragraph text' => 'Текст параграфа',
+	'Password does not match.' => 'Пароль не подходит',
+	'Password recovery' => 'Востановление пароля',
+	'Password updated' => 'Пароль обновлен',
+	'Password' => 'Пароль',
+	'Period' => 'Период',
+	'Permanent (best for SEO)' => 'Постоянный (оптимально для SEO)',
+	'Photos by' => 'Фото:',
+	'PHP PDO extension is missing.' => 'Отсутствует расширение PHP PDO.',
+	'PHP version must be 5.3+' => 'Нужен PHP версии 5.3+',
+	'Please confirm your email address' => 'Подтвердите Ваш адрес электронной почты ',
+	'Please correct the problem and try again.' => 'Исправьте проблему и попробуйте ещё раз.',
+	'Please enter a {{field}}.' => 'Введите {{field}}.',
+	'Please enter a link or upload a file.' => 'Введите ссылку или загрузите файл.',
+	'Please enter a name for your layout.' => 'Введите название Вашего дизайна.',
+	'Please enter a name for your stylesheet.' => 'Введите название Вашей стилевой таблицы.',
+	'Please enter the character set.' => 'Введите набор символов.',
+	'Please enter the language code.' => 'Введите код языка.',
+	'Please enter the name of the language.' => 'Введите название языка.',
+	'Please log in to continue.' => 'Пожалуйста войдите для продолжения.',
+	'Please select a file to upload.' => 'Выберите файл для загрузки.',
+	'Please try again later.' => 'Пожалуйста, попробуйте ещё раз позже.',
+	'Please upload a zip file.' => 'Загрузите zip-файл.',
+	'Please wait, this may take a minute...' => 'Пожалуйста, подождите, это может занять около минуты.',
+	'Port' => 'Порт',
+	'Post page layout' => 'Шаблон страницы отправки',
+	'Powered by' => 'На базе ',
+	'Preview with layout' => 'Предпросмотр с дизайном',
+	'Preview' => 'Просмотр',
+	'Private' => 'Приватно',
+	'Profile Updated' => 'Профиль обновлен',
+	'Properties saved.' => 'Свойства сохранены.',
+	'Properties' => 'Свойства',
+	'Public' => 'Публично',
+	'Published' => 'Опубликовано',
+	'Rebuild index' => 'Переиндексировать',
+	'Rebuilding index' => 'Переиндексация',
+	'Rename' => 'Переименовать',
+	'Required' => 'Обязательное',
+	'Requirements' => 'Требования',
+	'Reset Password' => 'Восстановить пароль',
+	'Restore' => 'Восстановить',
+	'Save {{appname|ucfirst}}' => 'Сохранить {{appname|ucfirst}}',
+	'Save &amp; Keep Editing' => 'Сохранить и править дальше',
+	'Save Block' => 'Сохранить блок',
+	'Save Blog Post' => 'Сохранить запись в блог',
+	'Save File' => 'Сохранить файл',
+	'Save Layout' => 'Сохранить шаблон',
+	'Save Page' => 'Сохранить страницу',
+	'Save Settings' => 'Сохранить настройки',
+	'Save Stylesheet' => 'Сохранить стилевую таблицу',
+	'Save User' => 'Сохранить пользователя',
+	'Save' => 'Сохранить',
+	'Saved!' => 'Сохранено!',
+	'Saving Layout Failed' => 'Ошибка при сохранении шаблона',
+	'Saving Stylesheet Failed' => 'Ошибка при сохранении стилевой таблицы',
+	'Saving...' => 'Сохранение....',
+	'Seconds with milliseconds' => 'Секунды с миллисекундами',
+	'Seconds, zero-padded, with milliseconds' => 'Секунды, дополненные нулями, с миллисекундами',
+	'Seconds, zero-padded' => 'Секунды, дополненные нулями',
+	'Seconds' => 'Секунды',
+	'Send verification' => 'Послать верификацию',
+	'Server requirements have been verified.' => 'Требования к серверу подтверждены',
+	'Server' => 'Сервер',
+	'Settings saved and admin user created.' => 'Настройки сохранены и создан пользователь с административными полномочиями',
+	'Settings saved.' => 'Настройки сохранены.',
+	'Settings' => 'Настройки',
+	'Short date format' => 'Короткий формат даты',
+	'Show all fields' => 'Показать все поля',
+	'Show empty fields' => 'Показать пустые поля',
+	'Show versions' => 'Показать версии',
+	'Sign in with' => 'Вход с',
+	'Sign in' => 'Войти',
+	'Sign up here' => 'Регистрация здесь',
+	'Sign Up' => 'Регистрация',
+	'Single-line text' => 'Текст в одну строку',
+	'Site Name' => 'Название сайта',
+	'Site Settings' => 'Настройки сайта',
+	'Site tree' => 'Дерево вебсайта',
+	'Social buttons' => 'Социальные кнопки',
+	'Source' => 'Источник',
+	'SQLite users can simply click \'Connect & Create Schema\'. MySQL users please select your driver and enter your server details to continue.' => 'Пользователи SQLite могут просто нажать \'Соединиться и создать схему\'. Пользователям MySQL просьба выбрать драйвер и описать сервер для продолжения.',
+	'Strong password' => 'Сильный пароль',
+	'Stylesheet added.' => 'Добавлена стилевая таблица.',
+	'Stylesheet saved.' => 'Сохранена стилевая таблица.',
+	'Stylesheet' => 'Стилевая таблица',
+	'Stylesheets' => 'Стилевые таблицы',
+	'Submit' => 'Отправить',
+	'Table prefix:' => 'Префикс таблиц:',
+	'Tags (comma-separated)' => 'Метки (через запятую)',
+	'Tags' => 'Метки',
+	'Temporary' => 'Временный',
+	'Testing Requirements' => 'Проверка на удовлетворение требованиям',
+	'Thanks for using Elefant!' => 'Спасибо, что используете Elefant!',
+	'The file name contains invalid characters.' => 'Название файла содержит недопустимые символы.',
+	'The file was only partially uploaded.' => 'Файл был загружен частично.',
+	'The following app has been installed:' => 'Было установлено следующее приложение:',
+	'The following theme has been installed:' => 'Была установлена следующая тема:',
+	'The installation process has been completed. Here are some links you may want to bookmark:' => 'Установка завершена. Здесь несколько ссылок, которые Вам, возможно, захочется сохранить.',
+	'The language code entered already exists.' => 'Этот код языка уже существует.',
+	'The layout you entered doesn\'t exist.' => 'Дизайн страницы не найден.',
+	'The link appears to be invalid.' => 'Похоже, ссылка недействительна.',
+	'The MIT License' => 'Лицензия MIT',
+	'The page you requested could not be found.' => 'Запрашиваемая страница не найдена',
+	'This installer will guide you through the process of installing and configuring your new website.' => 'Установщик поможет Вам в установке и настройке Вашего нового сайта.',
+	'This is a preview of how your layout will look.' => 'Это эскиз внешнего вида Вашего дизайна.',
+	'This object is already being edited by' => 'Этот объект редактируется',
+	'This page forwards visitors to the following link' => 'Эта страница перенаправляет визиторов по ссылке',
+	'Time zone offset' => 'Часовой пояс',
+	'Title' => 'Заголовок',
+	'Too many login attempts' => 'Слишком много попыток входа',
+	'Too weak' => 'Слишком слабый',
+	'Tools' => 'Инструменты',
+	'Translated' => 'Переведено',
+	'Try Again' => 'Попробуйте ещё раз',
+	'Twitter' => 'Twitter',
+	'Type' => 'Тип',
+	'Unable to create folder' => 'Невозможно создать папку',
+	'Unable to Delete File' => 'Невозможно удалить файл',
+	'Unable to delete folders' => 'Невозможно удалить папки',
+	'Unable to delete' => 'Невозможно удалить',
+	'Unable to fetch configuration file.' => 'Невозможно взять настроечный файл.',
+	'Unable to fetch file' => 'Невозможно взять файл.',
+	'Unable to parse the uploaded file.' => 'Невозможно разобрать загруженный файл.',
+	'Unable to rename' => 'Невожможно переименовать',
+	'Unable to save changes. Check your folder permissions and try again.' => 'Нельзя сохранить изменения. Проверьте полномочия на Вашу папку и повторите попытку.',
+	'Unable to save the file.' => 'Невозможно сохранить файл.',
+	'Unable to write to apps folder.' => 'Запись в папку apps невозможна.',
+	'Unable to write to cache folder.' => 'Запись в папку cache невозможна.',
+	'Unable to write to layouts folder.' => 'Запись в папку layouts невозможна.',
+	'Unable to write to the file. Please check your folder permissions and try again.' => 'Невозможна запись в файл. Проверьте полномочия на Вашу папку и повторите попытку.',
+	'Unknown error' => 'Неизвестная ошибка',
+	'Update Profile' => 'Обновить профиль',
+	'Updated image not found.' => 'Не найдено обновлённое изображение',
+	'Upgrade completed' => 'Обновление завершено',
+	'Upgrading Blog App' => 'Обновление приложения Блог',
+	'Upgrading Files App' => 'Обновление приложения Файлы',
+	'Upgrading User App' => 'Обновление приложения Пользователи',
+	'Upload a zip file' => 'Загрузить zip-архив',
+	'Upload the CSV file' => 'Загрузить файл CSV',
+	'Upload' => 'Загрузить',
+	'Uploaded CSV file not found.' => 'Не найден загруженный файл CSV.',
+	'User added.' => 'Пользователь добавлен.',
+	'User deleted.' => 'Пользователь удален.',
+	'User saved.' => 'Пользователь сохранен.',
+	'User Settings' => 'Настройки пользователя',
+	'User type' => 'Тип пользователя',
+	'Username' => 'Имя пользователя',
+	'Users' => 'Пользователи',
+	'Verification failed: Invalid configuration file.' => 'Проверка неудачна: недействительный файл настроек.',
+	'Verification failed: Invalid folder name.' => 'Проверка неудачна: недействительное название папки.',
+	'Verification failed: Invalid type.' => 'Проверка неудачна: недействительный тип.',
+	'Verification failed: No configuration file found.' => 'Проверка неудачна: Не найден файл настроек.',
+	'Verification failed: No folder specified' => 'Проверка неудачна: не указана папка.',
+	'Verification failed: No name specified' => 'Проверка неудачна: не указано имя (название).',
+	'Verification failed: No type specified.' => 'Проверка неудачна: не указан тип.',
+	'Verification failed: No version specified.' => 'Проверка неудачна: не указана версия.',
+	'Verification failed: Repository or website required.' => 'Проверка неудачна: требуется репозиторий или сайт.',
+	'Verify new password' => 'Проверить новый пароль',
+	'Verify Password' => 'Подтвердите пароль',
+	'Verify password' => 'Проверить пароль',
+	'Versions of' => 'Версии',
+	'Versions' => 'Версии',
+	'Very strong password' => 'Очень сильный пароль',
+	'View current' => 'Посмотреть текущую',
+	'View profile' => 'Просотреть профиль',
+	'Visit your new website' => 'Посетите Ваш новый сайт',
+	'Visit your website.' => 'Зайдите на Ваш сайт.',
+	'Weak password' => 'Слабый пароль',
+	'Website' => 'Вебсайт',
+	'Welcome to the Elefant CMS installer.' => 'Добро пожаловать в установщик Elefant CMS!',
+	'Which columns should be imported?' => 'Какие колонки импортировать?',
+	'Wordpress export file' => 'Файл экспорта Wordpress',
+	'Wordpress importer' => 'Импорт из Wordpress',
+	'Year in full' => 'Год полностью',
+	'Year in two digit form' => 'Год двумя цифрами',
+	'Yes' => 'Да',
+	'You must enter a block title.' => 'Введите заголовок блока.',
+	'You must enter a blog title.' => 'Введите заголовок блога.',
+	'You must enter a field name.' => 'Введите название поля.',
+	'You must enter a name.' => 'Введите имя.',
+	'You must enter a page title.' => 'Введите заголовок страницы.',
+	'You must enter a password.' => 'Нужно ввести пароль.',
+	'You must enter a title.' => 'Нужно ввести заголовок.',
+	'You must enter a valid email, or email not found.' => 'Нужно ввести действующий почтовый адрес или адрес не найден.',
+	'You must enter a valid email, or your email may already be registered.' => 'Нужно ввести действующий адрес или адрес уже зарегистрирован.',
+	'You must enter an author.' => 'Введите автора.',
+	'You must enter an email address.' => 'Введите адрес электронной почты.',
+	'You must enter body content.' => 'Заполните тело страницы.',
+	'You must enter options for a select field.' => 'Нужно ввести варианты для поля выбора.',
+	'You must enter your name.' => 'Вы должны ввести имя.',
+	'You must select a date/time.' => 'Выберите дату/время.',
+	'You\'re done!' => 'Всё готово!',
+	'Your ID must be a lowercase alphanumeric value and can\'t already exist. It must also not share the name of an app.' => 'Идентификатор страницы должен быть уникальным и содержать только цифры и строчные латинские буквы. Кроме того, он не должен совпадать с именем приложения.',
+	'Your ID must be a lowercase alphanumeric value and can\'t already exist.' => 'Идентификатор блока должен быть уникальным и содержать только цифры и строчные латинские буквы.',
+	'Your ID must be a lowercase alphanumeric value. It must also not share the name of an app.' => 'Идентификатор страницы должен содержать только цифры и строчные латинские буквы. Кроме того, он не должен совпадать с именем приложения.',
+	'Your ID must be a lowercase alphanumeric value.' => 'Идентификатор блока должен содержать только цифры и строчные латинские буквы.',
+	'Your name must be alphanumeric and not a duplicate of an existing layout.' => 'Название может содержать цифры и латинские буквы и не должно повторять название существующего дизайна.',
+	'Your name must be alphanumeric and not a duplicate of an existing stylesheet.' => 'Название может содержать цифры и латинские буквы и не должно повторять название существующей стилевой таблицы.',
+	'Your name' => 'Ваше имя',
+	'Your Name' => 'Ваше имя',
+	'Your password doesn\'t match.' => 'Ваш пароль не совпал.',
+	'Your password must be at least 6 characters.' => 'Ваш пароль должен быть не короче 6 символов.',
+	'Your website' => 'Ваш сайт',
+	'Zip file installation failed' => 'Установка zip-архива не удалась',
+	'Zip file was invalid or could not be installed.' => 'Zip-архив бракованный и не может быть установлен.'
+);
+
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/lang/uk.php and elefant-elefant_1_3_3_beta/lang/uk.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lang/zh.php elefant-elefant_1_3_3_beta/lang/zh.php
--- elefant-elefant_1_3_2_beta/lang/zh.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lang/zh.php	2013-03-20 13:48:44.000000000 -0500
@@ -3,14 +3,20 @@
 $this->lang_hash['zh'] = array (
 	'- select -' => '选择',
 	'.htaccess file is missing from the site root. Please save the following file to your server:' => '.htaccess文件不存在（应该在网站根目录）。',
+	'{{field|ucfirst}}' => '{{field|ucfirst}}',
+	'1 result:' => '1个结果：',
 	'A file by that name already exists.' => '此文件名已经存在',
+	'A PHP extension stopped the file upload.' => '一个php扩展阻止了文件上传。',
 	'A theme by this name is already installed.' => '同名主题已经安装。',
 	'Access' => '权限',
 	'Account Verified' => '用户验证成功',
+	'Add {{appname|ucfirst}}' => '添加{{appname|ucfirst}}',
 	'Add Block' => '添加区块',
 	'Add Blog Post' => '添加博客文章',
+	'Add Field' => '添加字段',
 	'Add Item' => '添加节点',
 	'Add language' => '添加新的语言',
+	'Add Page-Specific Block' => '添加页面专用区块',
 	'Add Page' => '添加页面',
 	'Add User' => '添加用户',
 	'Add' => '添加',
@@ -27,13 +33,19 @@
 	'An app by this name is already installed.' => '同名模块已经存在。',
 	'An email has been sent with a link to reset your password.' => '系统已经给你发送了一封邮件，点里面链接可以重置密码',
 	'An Error Occurred' => '出现一个错误',
+	'An unknown error occurred.' => '遇到一个未知错误。',
 	'Apache mod_rewrite extension must be installed.' => 'Apache的mod_rewrite扩展必须安装。',
+	'Application ID' => 'Application ID',
+	'Application secret' => 'Application secret',
 	'apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>' => 'apps文件夹不能执行写操作。请运行：</p><p><tt>chmod 775 apps</tt>',
 	'Are you sure you want to cancel and lose any changes?' => '你确定要取消？这样将丢失所有的修改。',
 	'Are you sure you want to cancel?' => '你确定要取消吗？',
 	'Are you sure you want to delete the current block?' => '你确定要删除当前区块？',
 	'Are you sure you want to delete the current page?' => '你确定要删除当前页面？',
+	'Are you sure you want to delete the default block? This will remove it from all pages using this block' => '你确定要删除默认区块？这个操作将同时在所有使用了它的页面中进行删除。',
+	'Are you sure you want to delete this {{appname}}?' => '你确定要删除这个Application吗？',
 	'Are you sure you want to delete this block?' => '你确定要删除这个区块？',
+	'Are you sure you want to delete this field?' => '你确定要删除这个字段吗？',
 	'Are you sure you want to delete this language?' => '你确定你要删除这个语言文件？',
 	'Are you sure you want to delete this page?' => '你确定你要删除这个页面？',
 	'Are you sure you want to delete this post?' => '你确定要删除这个文章？',
@@ -50,6 +62,7 @@
 	'Auto-saved data found.' => '找到自动保存数据。',
 	'Back to posts' => '回到文章列表',
 	'Back' => '后退',
+	'Block deleted.' => '区块删除成功。',
 	'Block ID' => '区块ID',
 	'Block title' => '区块标题',
 	'Blocks' => '区块',
@@ -57,9 +70,12 @@
 	'Blog post deleted.' => '文章删除成功',
 	'Blog post saved.' => '文章已经保存。',
 	'Blog Posts' => '博客文章',
+	'Blog Settings' => '博客设置',
+	'Blog title' => '博客标题',
 	'Blogger export file' => '博客导出文件',
 	'Blogger importer' => '博客导入',
 	'Body' => '正文',
+	'Browse...' => '浏览',
 	'Browse' => '浏览',
 	'Building index' => '建立索引',
 	'by' => 'by',
@@ -77,12 +93,14 @@
 	'Choose a password for your new account.' => '输入新账户密码',
 	'Choose a password' => '输入密码',
 	'Choose an importer' => '选择导入方式',
+	'choose' => '选择',
 	'Clear' => '清空',
 	'Click \'Next\' to continue whenever you\'re ready. Thanks for using Elefant!' => '准备好以后请点击“下一步”。谢谢使用Elefant！',
 	'Click \'Next\' to continue.' => '点击“下一步”',
 	'Click here for instructions on configuring virtual hosts for development.' => '虚拟主机配置方法请点击这里。',
 	'Click here for more information and translations of the MIT license.' => '更多信息和MIT协议的翻译请点击这里。',
 	'Click here to restore.' => '点此恢复。',
+	'Click to edit.' => '点击进行修改。',
 	'click to install' => '点击安装',
 	'Click to restore.' => '点此恢复。',
 	'Click to update photo' => '点此更新图片',
@@ -90,12 +108,15 @@
 	'Code' => '代码',
 	'Column' => '列',
 	'comments' => '评论',
+	'Comments' => '评论',
 	'Compare to current' => '和当前版本比较',
 	'Comparing' => '比较',
 	'conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'conf文件夹不可写。请运行：</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
 	'Configuration file not found.' => '配置文件没有找到。',
 	'Connect & Create Schema' => '建立数据库',
 	'Connection Error' => '数据库连接错误',
+	'Consumer key' => 'Consumer key',
+	'Consumer secret' => 'Consumer secret',
 	'Contains text...' => '包含文字。。。',
 	'Content' => '内容',
 	'Continue' => '继续',
@@ -108,11 +129,18 @@
 	'CSV Importer' => 'CSV导入',
 	'Current version' => '当前版本',
 	'Current' => '当前',
+	'Custom Fields' => '自定义字段',
+	'Dark' => '深',
 	'Database Connection' => '数据库连接',
 	'Database tables created and settings saved.' => '数据库表成功建立，设置已经保存。',
 	'Database' => '数据库',
+	'Date formatting reference' => '日期格式',
+	'Date in ordinal form' => 'Date in ordinal form',
+	'Date, zero-padded' => '日期，补零格式',
 	'Date' => '日期',
 	'Date/Time' => '日期/时间',
+	'Day of the week, abbreviated' => '星期（缩写）',
+	'Day of the week' => '星期',
 	'Default language updated.' => '默认语言已经更新。',
 	'Default layout updated.' => '默认布局文件已经更新。',
 	'Default' => '默认',
@@ -122,16 +150,22 @@
 	'Description' => '描述',
 	'Designer' => '设计',
 	'Display title' => '显示标题',
+	'Disqus shortname' => 'Disqus用户名',
+	'Disqus' => 'Disqus',
 	'Done editing' => '修改完成',
 	'Done.' => '完成。',
 	'Drag and drop pages to organize your navigation.' => '拖拽页面构建菜单。',
 	'Drag pages here to remove them from the tree.' => '从导航中删除页面请拖拽页面到这里。',
+	'Drag pages to the site tree to include them in your navigation.' => '拖放页面到站点树来形成导航',
 	'Drag these pages to the site tree to include them in your navigation.' => '在导航中建立拖拽页面到左边的树',
 	'Driver' => '驱动',
+	'Drop down options (one per line)' => '放下选项（每个一行）',
+	'Drop down' => '放下',
 	'Drop' => '放',
 	'Dynamic Objects' => '动态对象',
 	'Edit Block' => '编辑区块',
 	'Edit Blog Post' => '编辑博客文章',
+	'Edit file' => '编辑文件',
 	'Edit Layout' => '编辑布局',
 	'Edit page' => '修改页面',
 	'Edit Page' => '编辑页面',
@@ -148,6 +182,9 @@
 	'Elefant\'s CMS was designed to run a complete website, and needs to be installed in the root of a site to function correctly. Please move Elefant to the root folder to continue, or use a sub-domain of your site to install it under.' => 'Elefant CMS考虑到运行一个完整的网站，需要安装到网站的根目录。请移动Elefant到根目录再继续，或者使用子域名。',
 	'Email address' => '电子邮件地址',
 	'Email' => '电子邮件',
+	'Embedded Audio (MP3)' => '整合音频（MP3）',
+	'Embedded Flash (SWF)' => '整合Flash（SWF）',
+	'Embedded Video (MP4)' => '整合视频（MP4）',
 	'Embedded' => '嵌入',
 	'Error importing file' => '导入文件出错',
 	'Error message' => '错误信息',
@@ -158,23 +195,36 @@
 	'Export' => '导出',
 	'Extra Options' => '附加选项',
 	'Extra' => '附加',
+	'Facebook' => 'Facebook',
 	'Failed to retrieve the file at the specified link.' => '通过指定链接获得文件失败。',
+	'Failed to save file' => '保存文件失败',
 	'Failed to save...' => '保存失败。。。',
+	'Failed to write the file to disk.' => '不能把文件写到磁盘。',
 	'Failed to write to conf/config.php' => '不能对conf/config.php执行写操作',
 	'Fallback' => '替补语言',
+	'False' => '失败',
+	'Field added.' => '字段添加成功。',
+	'Field deleted.' => '字段已删除。',
+	'Field name' => '字段名',
+	'Field not found.' => '没有发现此字段',
+	'Field order has been updated.' => '字段顺序已经更新。',
+	'Field updated.' => '字段已更新。',
 	'Field' => '字段',
 	'File already exists' => '文件已经存在',
 	'File Already Exists' => '文件已经存在',
 	'File deleted.' => '文件删除成功。',
+	'File link' => '文件链接',
 	'File Manager' => '文件管理器',
 	'File not found' => '文件未找到',
 	'File renamed.' => '文件重命名成功。',
 	'File save failed' => '文件保存失败',
 	'File saved.' => '文件保存成功。',
 	'File size (pre-gzip)' => '文件大小（经过gzip压缩）',
+	'File size is too large.' => '文件太大。',
 	'File size' => '文件大小',
 	'File Size' => '文件大小',
 	'File upload failed' => '文件上传失败',
+	'File upload field not set.' => '文件上传字段没有填写。',
 	'File:' => '文件：',
 	'files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'files文件夹不可写。请运行：</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>',
 	'Files' => '文件',
@@ -188,8 +238,13 @@
 	'Generated on' => 'Generated on',
 	'Github installation failed' => 'Github安装失败',
 	'Go' => '搜索',
+	'Google' => 'Google',
 	'Hmm, we can\'t seem to find the page you wanted at the moment.' => '呃，没有发现你要访问的页面。',
 	'Home' => '首页',
+	'Hours in 12-hour time, zero-padded' => '12小时制（补零）',
+	'Hours in 12-hour time' => '12小时制',
+	'Hours in 24-hour time, zero-padded' => '24小时制（补零）',
+	'Hours in 24-hour time' => '24小时制',
 	'I Agree' => '我同意',
 	'ID' => 'ID',
 	'If you have any trouble during the install process, please visit the Elefant project at the following link to report it, and we\'ll do our best to help.' => '如果安装时遇到问题，请访问elefant网址反映。我们将尽力帮助你。',
@@ -206,14 +261,18 @@
 	'Install' => '安装',
 	'Installer' => '安装器',
 	'Introduction' => '说明',
+	'Invalid class name.' => '无效的类名。',
 	'Invalid directory' => '无效的文件夹',
+	'Invalid File Name' => '无效的文件名',
 	'Invalid file name' => '无效的文件名称',
+	'Invalid file.' => '无效的文件。',
 	'Invalid folder name' => '无效的文件夹名称',
 	'Invalid location' => '无效的位置',
 	'Invalid name' => '无效的名字',
 	'Invalid or expired recovery link' => '无效或者过期的恢复链接',
 	'Invalid Path' => '无效的路径',
 	'Invalid Verifier' => '无效的验证',
+	'is required' => '是必须的',
 	'It looks like you\'re trying to install Elefant into a sub-folder.' => '看起来你正在安装Elefant到子目录。',
 	'Item Added' => '节点添加成功',
 	'Item Deleted' => '节点删除成功',
@@ -241,18 +300,37 @@
 	'Layouts' => '布局列表',
 	'Length' => '长度',
 	'License' => '授权',
+	'Light' => '浅',
 	'Lightbox' => 'Lightbox',
 	'Limit to source file' => '指定文件',
 	'Link to a zip file or Github repository' => '链接到zip文件或者Github库',
+	'Local date format' => '本地日期格式',
+	'Local time format' => '本地时间格式',
 	'Locale' => '语言环境',
 	'Log out' => '退出登录',
+	'Login methods' => '登录方法',
 	'Login required' => '需要登录',
 	'Make default' => '设置成默认',
 	'Mark imported posts as published?' => '设置导入的文章“已发布”？',
 	'max' => '最大',
 	'Member' => '注册用户',
 	'Members' => '注册用户',
+	'Minutes, zero-padded' => '分钟（补零）',
+	'Minutes' => '分钟',
+	'Missing a temporary folder, check your PHP setup.' => '没有临时文件夹，检查你的PHP安装',
+	'Missing parameter: class' => '缺少参数：class',
+	'Missing parameter: fields' => '缺少参数：fields',
+	'Missing parameter: id' => '缺少参数：ID',
+	'Missing parameter: label' => '缺少参数：label',
+	'Missing parameter: name' => '缺少参数：name',
+	'Missing parameter: options' => '缺少参数：options',
+	'Missing parameter: required' => '缺少参数：required',
+	'Missing parameter: type' => '缺少参数：type',
 	'Missing property name' => '缺少属性名',
+	'Month in numeric form, zero-padded' => '月份（数字形式，补零）',
+	'Month in numeric form' => '月份（数字形式）',
+	'Month name, abbreviated' => '月份（简写）',
+	'Month name' => '月份',
 	'Multi-file uploader' => '多文件上传',
 	'Name' => '姓名',
 	'Navigation' => '导航',
@@ -270,8 +348,13 @@
 	'Newest first' => '最新的',
 	'Next' => '下一个',
 	'No audio playback capabilities' => '不能播放声音',
+	'No file specified.' => '没指定文件。',
+	'No file uploaded or file too large.' => '没有文件上传或者文件太大。',
+	'No file was uploaded.' => '没有文件上传。',
+	'No image url specified.' => '没有指定图片路径。',
 	'No name specified' => '没有指定名称',
 	'No posts yet... :(' => '暂无文章。',
+	'No results.' => '没有结果。',
 	'No video playback capabilities' => '不能播放视频',
 	'No' => '不',
 	'Nobody' => '没有人',
@@ -279,14 +362,17 @@
 	'Normal strength' => '普通强度',
 	'Not a member?' => '还没注册？',
 	'Not found' => '没有发现',
+	'Note: Installing from links has been disabled because the PHP cURL extension is missing.' => '注意：从链接安装的功能已经被禁用，因为PHP的cURL扩展没有安装。',
 	'Note: Pages that are not publicly visible will not be listed here.' => '注意：没有公开访问权限的页面将在这里列出。',
 	'Null' => '没有',
+	'Off' => '关闭',
 	'official blog' => '官方博客',
 	'Older items' => '以前的节点',
 	'Older posts' => '以前的文章',
 	'Older results' => '较早的结果',
 	'Oldest first' => '最早的',
 	'One or more server requirements failed' => '服务器不符合安装要求',
+	'OpenID' => 'OpenID',
 	'optional' => '可选',
 	'or' => '或者',
 	'Original text' => '原文字',
@@ -300,16 +386,19 @@
 	'Page not found' => '页面未发现',
 	'Page saved.' => '页面保存成功。',
 	'Page title' => '页面标题',
+	'Paragraph text' => '段落',
 	'Password does not match.' => '密码不符合。',
 	'Password recovery' => '恢复密码',
 	'Password updated' => '密码更新成功',
 	'Password' => '密码',
+	'Period' => '时期',
 	'Permanent (best for SEO)' => '固定网址（有利于SEO）',
 	'Photos by' => '图片',
 	'PHP PDO extension is missing.' => 'PHP的PDO扩展没有安装。',
 	'PHP version must be 5.3+' => 'PHP版本必须5.3+',
 	'Please confirm your email address' => '请确认你的电子邮件地址。',
 	'Please correct the problem and try again.' => '请解决问题再试。',
+	'Please enter a {{field}}.' => '请输入{{field}}。',
 	'Please enter a link or upload a file.' => '请输入一个网址或上传一个文件。',
 	'Please enter a name for your layout.' => '请输入布局文件名称。',
 	'Please enter a name for your stylesheet.' => '请输入样式名称。',
@@ -317,10 +406,12 @@
 	'Please enter the language code.' => '请输入语言代码。',
 	'Please enter the name of the language.' => '请输入语言名称。',
 	'Please log in to continue.' => '请登录。',
+	'Please select a file to upload.' => '请选择一个文件上传。',
 	'Please try again later.' => '请稍候再次尝试。',
 	'Please upload a zip file.' => '请上传zip格式文件。',
 	'Please wait, this may take a minute...' => '请等待，可能需要一分钟。',
 	'Port' => '端口',
+	'Post page layout' => '日志布局',
 	'Powered by' => '作者：',
 	'Preview with layout' => '布局预览',
 	'Preview' => '预览',
@@ -333,14 +424,18 @@
 	'Published' => '发表的',
 	'Rebuild index' => '重建索引',
 	'Rebuilding index' => '正在重建索引',
+	'Redo' => '重做',
 	'Rename' => '重命名',
+	'Required' => '必需',
 	'Requirements' => '需求',
 	'Reset Password' => '重置密码',
 	'Restore' => '恢复',
 	'results' => '结果',
+	'Save {{appname|ucfirst}}' => '保存{{appname|ucfirst}}',
 	'Save &amp; Keep Editing' => '保存并继续编辑',
 	'Save Block' => '保存区块',
 	'Save Blog Post' => '保存博客文章',
+	'Save File' => '保存文件',
 	'Save Item' => '保存节点',
 	'Save Layout' => '保存布局文件',
 	'Save Page' => '保存页面',
@@ -352,19 +447,29 @@
 	'Saving Layout Failed' => '保存布局文件失败',
 	'Saving Stylesheet Failed' => '保存样式失败',
 	'Saving...' => '保存中...',
+	'Seconds with milliseconds' => '毫秒',
+	'Seconds, zero-padded, with milliseconds' => '毫秒（补零）',
+	'Seconds, zero-padded' => '秒（补零）',
+	'Seconds' => '秒',
 	'Send verification' => '发送验证',
 	'Server requirements have been verified.' => '服务器需求验证通过。',
 	'Server' => '服务器',
 	'Settings saved and admin user created.' => '设置保存成功，管理员用户已经创建。',
+	'Settings saved.' => '设置已保存。',
 	'Settings' => '设置',
+	'Short date format' => '短日期格式',
+	'Show all fields' => '显示所有项',
+	'Show empty fields' => '只显示空项',
 	'Show versions' => '显示历史版本',
 	'Sign in with' => '第三方登录',
 	'Sign in' => '登录',
 	'Sign up here' => '这里注册',
 	'Sign Up' => '注册',
+	'Single-line text' => '单行文本',
 	'Site Name' => '网站名称',
 	'Site Settings' => '网站设置',
 	'Site tree' => '网站导航',
+	'Social buttons' => '社会化按钮',
 	'Source' => '原',
 	'SQL Shell' => 'SQL Shell',
 	'SQLite users can simply click \'Connect & Create Schema\'. MySQL users please select your driver and enter your server details to continue.' => 'SQLite用户点击"Connect & Create Schema"。MySQL用户请选择你的驱动并完成设置。',
@@ -376,12 +481,15 @@
 	'Submit' => '提交',
 	'Table Dropped' => '删除表成功',
 	'Table Info' => '表信息',
+	'Table prefix:' => '数据表前缀：',
 	'Table' => '表',
 	'Tags (comma-separated)' => '标签（用逗号隔开）',
 	'Tags' => '标签',
 	'Temporary' => '临时',
 	'Testing Requirements' => '测试需求',
 	'Thanks for using Elefant!' => '谢谢使用Elefant',
+	'The file name contains invalid characters.' => '文件名包含无效字符。',
+	'The file was only partially uploaded.' => '文件只上传了一部分。',
 	'The following app has been installed:' => '下列模块已经安装：',
 	'The following theme has been installed:' => '下列主题已经安装：',
 	'The installation process has been completed. Here are some links you may want to bookmark:' => '安装流程结束。这里几个链接也许你感兴趣：',
@@ -394,12 +502,15 @@
 	'This is a preview of how your layout will look.' => '这里是页面预览。',
 	'This object is already being edited by' => '这个对象正在被编辑：',
 	'This page forwards visitors to the following link' => '即将跳转到',
+	'Time zone offset' => '时区',
 	'Title' => '标题',
 	'Too many login attempts' => '尝试登录次数过多。',
 	'Too weak' => '太弱',
 	'Tools' => '工具',
 	'Translated' => '翻译',
+	'True' => '真',
 	'Try Again' => '再试',
+	'Twitter' => 'Twitter',
 	'Type' => '种类',
 	'Unable to create folder' => '不能创建文件夹',
 	'Unable to Delete File' => '不能删除文件',
@@ -409,12 +520,16 @@
 	'Unable to fetch file' => '不能获得文件',
 	'Unable to parse the uploaded file.' => '不能处理提交的文件。',
 	'Unable to rename' => '不能重命名',
+	'Unable to save changes. Check your folder permissions and try again.' => '保存失败。请检查文件夹的权限并重试。',
 	'Unable to save the file.' => '不能保存文件。',
 	'Unable to write to apps folder.' => 'apps文件夹不能执行写操作。',
 	'Unable to write to cache folder.' => 'cache文件夹不能写。',
 	'Unable to write to layouts folder.' => 'layout文件夹不能写。',
+	'Unable to write to the file. Please check your folder permissions and try again.' => '不能写文件。请检查文件夹的权限并重试。',
+	'Undo' => '重做',
 	'Unknown error' => '未知错误',
 	'Update Profile' => '更新配置',
+	'Updated image not found.' => '更新的图片没有找到。',
 	'Upgrade completed' => '升级完成',
 	'Upgrading Blog App' => '正在升级博客模块',
 	'Upgrading Files App' => '正在升级文件管理器模块',
@@ -426,6 +541,7 @@
 	'User added.' => '新建用户成功。',
 	'User deleted.' => '用户删除成功。',
 	'User saved.' => '用户已经保存。',
+	'User Settings' => '用户设置',
 	'User type' => '用户种类',
 	'Username' => '用户名',
 	'Users' => '用户列表',
@@ -455,8 +571,12 @@
 	'Which columns should be imported?' => '你想导入哪些列？',
 	'Wordpress export file' => 'Wordpress导出文件',
 	'Wordpress importer' => 'Wordpress导入器',
+	'Year in full' => '年（全称）',
+	'Year in two digit form' => '年（两位数字格式）',
 	'Yes' => '确定',
 	'You must enter a block title.' => '你必须输入一个区块标题。',
+	'You must enter a blog title.' => '你必须输入一个日志标题。',
+	'You must enter a field name.' => '你必须输入一个字段名。',
 	'You must enter a name.' => '你必须输入一个姓名。',
 	'You must enter a page title.' => '你必须输入一个页面标题。',
 	'You must enter a password.' => '你必须输入一个密码。',
@@ -466,6 +586,7 @@
 	'You must enter an author.' => '你必须输入作者名。',
 	'You must enter an email address.' => '你必须输入一个电子邮件地址。',
 	'You must enter body content.' => '你必须输入正文。',
+	'You must enter options for a select field.' => '你必须在选择框做个选择。',
 	'You must enter your name.' => '你必须输入你的名字。',
 	'You must select a date/time.' => '你必须选择一个时间。',
 	'You\'re done!' => '你完成了！',
diff -urBNs elefant-elefant_1_3_2_beta/layouts/admin.html elefant-elefant_1_3_3_beta/layouts/admin.html
--- elefant-elefant_1_3_2_beta/layouts/admin.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/layouts/admin.html	2013-03-20 13:48:44.000000000 -0500
@@ -6,7 +6,7 @@
 	<link rel="stylesheet" type="text/css" href="/apps/admin/css/reset.css" />
 	<link rel="stylesheet" type="text/css" href="/apps/admin/css/text.css" />
 	<link rel="stylesheet" type="text/css" href="/apps/admin/css/960.css" />
-	<link rel="stylesheet" type="text/css" href="{{ Product::stylesheet() }}" />
+	<link rel="stylesheet" type="text/css" href="{{ Product::stylesheet() }}" />	
 	{! admin/head !}
 	{{ head|none }}
 </head>
diff -urBNs elefant-elefant_1_3_2_beta/layouts/default.html elefant-elefant_1_3_3_beta/layouts/default.html
--- elefant-elefant_1_3_2_beta/layouts/default.html	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/layouts/default.html	2013-03-20 13:48:44.000000000 -0500
@@ -3,13 +3,12 @@
 <head>
 	<title>{{ conf('General', 'site_name') }} - {{ window_title|none }}</title>
 	<meta charset="{{ i18n.charset }}" />
+	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,300" />
 	{% if detect('mobile') %}
 		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
 		<link rel="stylesheet" type="text/css" href="/css/mobile.css" />
 	{% else %}
-		<link rel="stylesheet" type="text/css" href="/css/reset.css" />
-		<link rel="stylesheet" type="text/css" href="/css/text.css" />
-		<link rel="stylesheet" type="text/css" href="/css/960.css" />
+		<link rel="stylesheet" type="text/css" href="/css/960_compiled.css" />
 		<link rel="stylesheet" type="text/css" href="/css/style.css" />
 	{% end %}
 	{! admin/head !}
@@ -19,7 +18,7 @@
 <div id="wrapper" class="container_12">
 	<div id="head" class="grid_12">
 		<div class="grid_6 alpha">
-			<h1>{{ conf('General', 'site_name') }}</h1>
+			<h1><a href="/">{{ conf('General', 'site_name') }}</a></h1>
 		</div>
 		<div class="grid_6 omega menu">
 			{! navigation/top !}
@@ -37,13 +36,13 @@
 	</div>
 {% else %}
 	<div id="body" class="grid_8">
-
+		
 {% if title != '' %}<h2>{{ title|none }}</h2>{% end %}
 {{ body|none }}
 
 	</div>
 	<div id="sidebar" class="grid_4">
-{! blocks/members !}
+{! blocks/index?id=sidebar-[id]&fallback=members !}
 	</div>
 {% end %}
 	<div class="clear"></div>
Files elefant-elefant_1_3_2_beta/lib/Acl.php and elefant-elefant_1_3_3_beta/lib/Acl.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lib/AppTest.php elefant-elefant_1_3_3_beta/lib/AppTest.php
--- elefant-elefant_1_3_2_beta/lib/AppTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/AppTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -164,6 +164,10 @@
 		self::$c = new Controller ();
 		$tpl = new Template ('utf-8', self::$c);
 		$cache = Cache::init (array ());
+		self::$c->template ($tpl);
+		self::$c->cache ($cache);
+		self::$c->page ($page);
+		self::$c->i18n ($i18n);
 	}
 
 	/**
diff -urBNs elefant-elefant_1_3_2_beta/lib/Autoloader.php elefant-elefant_1_3_3_beta/lib/Autoloader.php
--- elefant-elefant_1_3_2_beta/lib/Autoloader.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Autoloader.php	2013-03-20 13:48:44.000000000 -0500
@@ -38,6 +38,7 @@
  * For PSR-0 compatible frameworks, put them in `lib/vendors/`.
  */
 function elefant_autoloader ($class) {
+	$orig = $class;
 	if (strpos ($class, '\\') !== false) {
 		// Namespace is present
 		list ($app, $class) = explode ('\\', $class, 2);
@@ -61,14 +62,15 @@
 		$file = str_replace ('_', '/', $file);
 		if (file_exists ($file)) {
 			require_once ($file);
+			return true;
 		}
 	} elseif (file_exists ('lib/' . $class . '.php')) {
 		// No namespace, check in lib/ first
 		require_once ('lib/' . $class . '.php');
 		return true;
-	} elseif (file_exists ('lib/vendor/' . $class . '.php')) {
+	} elseif (file_exists ('lib/vendor/' . str_replace ('_', '/', $class) . '.php')) {
 		// No namespace, check in lib/vendor/ next
-		require_once ('lib/vendor/' . $class . '.php');
+		require_once ('lib/vendor/' . str_replace ('_', '/', $class) . '.php');
 		return true;
 	} else {
 		// No namespace, check in app lib and models folders
@@ -78,7 +80,11 @@
 			return true;
 		}
 	}
-	return false;
+	if (count (spl_autoload_functions ()) > 1) {
+		// Leave it to another autoloader
+		return false;
+	}
+	throw new LogicException ("Class '$orig' not found.");
 }
 
 spl_autoload_register ('elefant_autoloader');
diff -urBNs elefant-elefant_1_3_2_beta/lib/Cache.php elefant-elefant_1_3_3_beta/lib/Cache.php
--- elefant-elefant_1_3_2_beta/lib/Cache.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Cache.php	2013-03-20 13:48:44.000000000 -0500
@@ -53,7 +53,7 @@
 	/**
 	 * Initialize the correct cache based on the global configuration
 	 * and return the cache object (lib/MemcacheExt, lib/MemcacheAPC,
-	 * lib/MemcacheRedis, or lib/Cache).
+	 * lib/MemcacheXCache, lib/MemcacheRedis, or lib/Cache).
 	 */
 	public static function init ($conf) {
 		$server = isset ($conf['server']) ? $conf['server'] : false;
@@ -62,6 +62,8 @@
 
 		if ($backend === 'apc' && extension_loaded ('apc')) {
 			return new MemcacheAPC ();
+		} elseif ($backend === 'xcache' && extension_loaded ('xcache')) {
+			return new MemcacheXCache ();
 		} elseif ($server) {
 			// Determine the backend
 			if ($backend === 'redis' && extension_loaded ('redis')) {
diff -urBNs elefant-elefant_1_3_2_beta/lib/Controller.php elefant-elefant_1_3_3_beta/lib/Controller.php
--- elefant-elefant_1_3_2_beta/lib/Controller.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Controller.php	2013-03-20 13:48:44.000000000 -0500
@@ -243,7 +243,28 @@
 	public $cache = false;
 
 	/**
-	 * Constructor method.
+	 * Page object.
+	 */
+	private $_page;
+
+	/**
+	 * I18n object.
+	 */
+	private $_i18n;
+
+	/**
+	 * Cache object.
+	 */
+	private $_cache;
+
+	/**
+	 * Template object.
+	 */
+	private $_tpl;
+
+	/**
+	 * Constructor method. Receives a list of hooks as well
+	 * as a Page and I18n object.
 	 */
 	public function __construct ($hooks = array ()) {
 		if (defined ('STDIN')) {
@@ -253,10 +274,54 @@
 	}
 
 	/**
+	 * Get or set the template object.
+	 */
+	public function template ($tpl = false) {
+		if ($tpl) {
+			$this->_tpl = $tpl;
+		}
+		return $this->_tpl;
+	}
+
+	/**
+	 * Get or set the cache object.
+	 */
+	public function cache ($cache = false) {
+		if ($cache) {
+			$this->_cache = $cache;
+		}
+		return $this->_cache;
+	}
+
+	/**
+	 * Get or set the page object.
+	 */
+	public function page ($page = false) {
+		if ($page) {
+			$this->_page = $page;
+		}
+		return $this->_page;
+	}
+
+	/**
+	 * Get or set the i18n object.
+	 */
+	public function i18n ($i18n = false) {
+		if ($i18n) {
+			$this->_i18n = $i18n;
+		}
+		return $this->_i18n;
+	}
+
+	/**
 	 * Run an internal request from one handler to another.
 	 */
 	public function run ($uri, $data = array ()) {
 		$c = new Controller (conf ('Hooks'));
+		$c->page ($this->_page);
+		$c->i18n ($this->_i18n);
+		$c->template ($this->_tpl);
+		$c->cache ($this->_cache);
 		$handler = $c->route ($uri);
 
 		if (! isset (self::$called[$uri])) {
@@ -344,21 +409,12 @@
 	 * or externally from a browser request.
 	 */
 	public function handle ($handler, $internal = true, $data = array ()) {
-		// Note: We use three globals here. This may raise some flags in
-		// you as a developer, but hear me out. These are global singletons
-		// that the front controller creates for us, and I want to be able
-		// to use them in handlers directly without first instantiating them,
-		// through a `::getInstance()` call or otherwise. I know it's bad
-		// form in general, but this is *by design* to save typing in handlers
-		// and happens for these three objects only.
-		//
-		// I also could have simply added them as properties of `$this`, but
-		// that would add typing too (e.g., `$this->view->render` vs
-		// `$tpl->render`). I'm opting for conciseness. And as it is, I'm
-		// deliberately making an ordinary script act like a controller, minus
-		// the class wrapping it. It's a stylistic decision, and if it's not
-		// your cup of tea, that's cool. It is mine, however :)
-		global $page, $tpl, $cache;
+		// Create local references to the page, template, cache, and i18n objects
+		// for easier reference in handlers (e.g., simply `$tpl->render()`).
+		$page = $this->_page;
+		$tpl = $this->_tpl;
+		$cache = $this->_cache;
+		$i18n = $this->_i18n;
 
 		// Check for a cached copy of this handler's output
 		$cache_uri = '_c_' . str_replace ('/', '_', $this->uri);
@@ -395,6 +451,9 @@
 			} catch (Exception $e) {
 				// Do nothing because self::$appconf[$this->app] is already set
 			}
+
+			// Load app-specific language files now too
+			$i18n->initApp ($this->app);
 		}
 		$appconf = self::$appconf[$this->app];
 
@@ -461,12 +520,10 @@
 					$this->uri = $app . '/index';
 					return 'apps/' . $app . '/handlers/index.php';
 				}
-				$this->app = $app;
 				$this->uri = conf ('General', 'default_handler');
-				return vsprintf (
-					'apps/%s/handlers/%s.php',
-					explode ('/', conf ('General', 'default_handler'))
-				);
+				$this->add_param ($app);
+				list ($this->app, $handler) = explode ('/', $this->uri);
+				return sprintf ('apps/%s/handlers/%s.php', $this->app, $handler);
 			}
 		}
 		$this->app = $app;
@@ -495,11 +552,11 @@
 	 * for setting confirmation messages and other notices for the current
 	 * user to display on a subsequent screen.
 	 */
-	public function add_notification ($msg) {
-		if (isset ($_COOKIE['elefant_notification'])) {
-			$msg = $_COOKIE['elefant_notification'] . '|' . $msg;
+	public function add_notification ($msg, $cookie_name = 'elefant_notification') {
+		if (isset ($_COOKIE[$cookie_name])) {
+			$msg = $_COOKIE[$cookie_name] . '|' . $msg;
 		}
-		return setcookie ('elefant_notification', $msg, 0, '/');
+		return setcookie ($cookie_name, $msg, 0, '/');
 	}
 
 	/**
@@ -602,8 +659,7 @@
 	 */
 	public function restful ($obj) {
 		// Disable page layout and set JSON header.
-		global $page;
-		$page->layout = false;
+		$this->_page->layout = false;
 		header ('Content-Type: application/json');
 
 		// Verify an action has been specified.
@@ -621,8 +677,9 @@
 			return $obj->error ('Invalid action name');
 		}
 
-		// Assign the controller to the object.
+		// Assign the controller and cache to the object.
 		$obj->controller = $this;
+		$obj->cache = $this->_cache;
 
 		// Call the method with the extra URL parameters.
 		$params = $this->params;
@@ -756,7 +813,7 @@
 	 * should be performed.
 	 */
 	public function installed ($app, $version) {
-		$v = db_shift ('select version from apps where name = ?', $app);
+		$v = DB::shift ('select version from #prefix#apps where name = ?', $app);
 		if (! $v) {
 			return false;
 		}
@@ -770,11 +827,11 @@
 	 * Mark an app and version as installed.
 	 */
 	public function mark_installed ($app, $version) {
-		$v = db_shift ('select version from apps where name = ?', $app);
+		$v = DB::shift ('select version from #prefix#apps where name = ?', $app);
 		if ($v) {
-			return db_execute ('update apps set version = ? where name = ?', $version, $app);
+			return DB::execute ('update #prefix#apps set version = ? where name = ?', $version, $app);
 		}
-		return db_execute ('insert into apps (name, version) values (?, ?)', $app, $version);
+		return DB::execute ('insert into #prefix#apps (name, version) values (?, ?)', $app, $version);
 	}
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/lib/DB.php elefant-elefant_1_3_3_beta/lib/DB.php
--- elefant-elefant_1_3_2_beta/lib/DB.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/DB.php	2013-03-20 13:48:44.000000000 -0500
@@ -96,6 +96,11 @@
 	 * The arguments for the last SQL statement.
 	 */
 	public static $last_args = array ();
+	
+	/**
+	 * Table name prefix to replace `#prefix#` occurrences with.
+	 */
+	public static $prefix = '';
 
 	/**
 	 * Open a database connection and add it to the pool. Accepts
@@ -140,6 +145,8 @@
 	 */
 	public static function load_connections () {
 		$list = conf ('Database');
+		self::$prefix = isset ($list['prefix']) ? $list['prefix'] : '';
+		unset ($list['prefix']);
 		foreach ($list as $key => $conf) {
 			if ($key == 'master') {
 				$conf['master'] = true;
@@ -232,13 +239,16 @@
 	 * Prepares a statement from a list of arguments,
 	 * the first being the SQL query and the rest being
 	 * the parameters, and a `$master` flag to determine
-	 * which connection to use.
+	 * which connection to use. Also replaces `#query#`
+	 * with a database table name prefix set in the global
+	 * configuration.
 	 */
 	public static function prepare ($args, $master = 0) {
 		$db = self::get_connection ($master);
 		$sql = array_shift ($args);
 		$args = self::args ($args);
 		$sql = self::normalize_sql ($db, $sql);
+		$sql = str_replace ('#prefix#', self::$prefix, $sql);
 		self::$last_sql = $sql;
 		self::$last_args = $args;
 
diff -urBNs elefant-elefant_1_3_2_beta/lib/Debugger.php elefant-elefant_1_3_3_beta/lib/Debugger.php
--- elefant-elefant_1_3_2_beta/lib/Debugger.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Debugger.php	2013-03-20 13:48:44.000000000 -0500
@@ -44,9 +44,14 @@
 	/**
 	 * Set the error and exception handlers.
 	 */
-	public static function start () {
-		set_error_handler (array ('Debugger', 'handle_error'));
-		set_exception_handler (array ('Debugger', 'handle_exception'));
+	public static function start ($on = true) {
+		if ($on) {
+			set_error_handler (array ('Debugger', 'handle_error'));
+			set_exception_handler (array ('Debugger', 'handle_exception'));
+		} else {
+			set_error_handler (array ('Debugger', 'handle_error'));
+			set_exception_handler (array ('Debugger', 'log_exception'));
+		}
 	}
 
 	/**
@@ -63,6 +68,21 @@
 		);
 		Debugger::show_trace ($e->getTrace ());
 	}
+	
+	/**
+	 * Handles exceptions by logging them.
+	 */
+	public static function log_exception ($e) {
+		error_log (
+			sprintf (
+				'Error in %s on line %d: %s',
+				$e->getFile (),
+				$e->getLine (),
+				$e->getMessage ()
+			)
+		);
+		throw $e;
+	}
 
 	/**
 	 * Shows the trace output.
@@ -106,6 +126,9 @@
 		}
 		if (! isset ($trace['file'])) {
 			$trace['file'] = $trace['args'][2];
+			if (empty ($trace['file'])) {
+				return;
+			}
 		}
 		if (isset ($trace['class'])) {
 			printf (
diff -urBNs elefant-elefant_1_3_2_beta/lib/ExtendedModel.php elefant-elefant_1_3_3_beta/lib/ExtendedModel.php
--- elefant-elefant_1_3_2_beta/lib/ExtendedModel.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/ExtendedModel.php	2013-03-20 13:48:44.000000000 -0500
@@ -144,11 +144,26 @@
 			}
 		}
 
-		return parent::__construct ($vals, $is_new);
+		// `_extended` is a special field to auto-populate extended attributes
+		if (is_array ($vals) && isset ($vals['_extended'])) {
+			$extended = $vals['_extended'];
+			unset ($vals['_extended']);
+		}
+
+		parent::__construct ($vals, $is_new);
+
+		// Populate extended attributes after `parent::__construct()`
+		if (isset ($extended)) {
+			foreach ($extended as $k => $v) {
+				$this->ext ($k, $v);
+			}
+		}
 	}
 
 	/**
-	 * Need to verify extended fields, so we override the put() method.
+	 * Need to verify extended fields, so we override the `put()` method.
+	 * Note: On update forms, call `update_extended()` if the fields were
+	 * set by the `admin/util/extended` handler.
 	 */
 	public function put () {
 		$failed = Validator::validate_list ($this->ext (), $this->_extended_verify);
@@ -161,6 +176,28 @@
 	}
 
 	/**
+	 * Look for `_extended` field and auto-populate extended attributes.
+	 * Will unset `$_POST['_extended']` as a side-effect. Call this before
+	 * calling `put()` on update forms that use the `admin/util/extended`
+	 * handler.
+	 */
+	public function update_extended () {
+		if (isset ($_POST['_extended'])) {
+			foreach ($_POST['_extended'] as $k => $v) {
+				$this->ext ($k, $v);
+			}
+			unset ($_POST['_extended']);
+		}
+	}
+
+	/**
+	 * Return the original data as an object, including extended fields.
+	 */
+	public function orig () {
+		return (object) array_merge ($this->data, $this->ext ());
+	}
+
+	/**
 	 * Dynamic getter for user properties. If you get the field specified
 	 * in the child class's `$_extended_field` property, it will automatically
 	 * unserialize it into an array for you.
diff -urBNs elefant-elefant_1_3_2_beta/lib/Form.php elefant-elefant_1_3_3_beta/lib/Form.php
--- elefant-elefant_1_3_2_beta/lib/Form.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Form.php	2013-03-20 13:48:44.000000000 -0500
@@ -259,7 +259,8 @@
 		}
 
 		// Render the view and return its output
-		global $page, $tpl;
+		$page = $this->controller->page ();
+		$tpl = $this->controller->template ();
 
 		// Take the initial form data from $this->data or a new StdClass
 		if ($this->data === false) {
diff -urBNs elefant-elefant_1_3_2_beta/lib/Functions.php elefant-elefant_1_3_3_beta/lib/Functions.php
--- elefant-elefant_1_3_2_beta/lib/Functions.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Functions.php	2013-03-20 13:48:44.000000000 -0500
@@ -74,7 +74,7 @@
  *     // Enable debugging
  *     conf ('General', 'debug', true);
  */
-function conf ($section, $value = false, $update = false) {
+function conf ($section, $value = false, $update = null) {
 	static $conf;
 	if ($conf === null) {
 		if (isset ($GLOBALS['conf'])) {
@@ -84,7 +84,7 @@
 		}
 	}
 	if ($value) {
-		if ($update) {
+		if ($update !== null) {
 			$conf[$section][$value] = $update;
 		}
 		return $conf[$section][$value];
@@ -267,4 +267,25 @@
 		: array_map ('rmdir_recursive', glob ($path . '/{,.}*', GLOB_BRACE)) == rmdir ($path);
 }
 
+/**
+ * Fetch a remote URL using either cURL or fopen, depending
+ * on which is available.
+ */
+function fetch_url ($url) {
+	if (extension_loaded ('curl')) {
+		$ch = curl_init ();
+		curl_setopt ($ch, CURLOPT_HEADER, 0);
+		curl_setopt ($ch, CURLOPT_VERBOSE, 0);
+		curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
+		curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
+		curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
+		curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
+		curl_setopt ($ch, CURLOPT_URL, $url);
+		$res = curl_exec ($ch);
+		curl_close ($ch);
+		return $res;
+	}
+	return file_get_contents ($url);
+}
+
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/lib/I18n.php elefant-elefant_1_3_3_beta/lib/I18n.php
--- elefant-elefant_1_3_2_beta/lib/I18n.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/I18n.php	2013-03-20 13:48:44.000000000 -0500
@@ -205,6 +205,21 @@
 	}
 
 	/**
+	 * Includes the language index for an app.
+	 */
+	public function initApp ($app) {
+		if ((! empty ($this->language)) && (file_exists ('apps/' . $app . '/lang/' . $this->language . '.php'))) {
+			include_once ('apps/' . $app . '/lang/' . $this->language . '.php');
+		}
+
+		foreach ($this->hash_order as $curlang) {
+			if (file_exists ('apps/' . $app . '/lang/' . $curlang . '.php')) {
+				include_once ('apps/' . $app . '/lang/' . $curlang . '.php');
+			}
+		}
+	}
+
+	/**
 	 * Takes a string, serializes it to generate a key, and performs
 	 * a key/value lookup on the `$lang_hash` array.  Returns the value found,
 	 * or the original string if not found.  This is the method used in I18n
@@ -348,7 +363,14 @@
 			}
 
 		} elseif ($method === 'url') {
-			if (preg_match ('/^\/(' . join ('|', array_keys ($this->languages)) . ')\//', $_SERVER['REQUEST_URI'], $matches)) {
+			if (preg_match ('/^\/(' . join ('|', array_keys ($this->languages)) . ')\/?$/', $_SERVER['REQUEST_URI'], $matches)) {
+				// matched /lang or /lang/ -> /lang [language=lang]
+				$this->url_includes_lang = true;
+				$this->new_request_uri = rtrim ($_SERVER['REQUEST_URI'], '/');
+				$this->prefix = '/' . $matches[1];
+				return $matches[1];
+			} elseif (preg_match ('/^\/(' . join ('|', array_keys ($this->languages)) . ')\//', $_SERVER['REQUEST_URI'], $matches)) {
+				// matched /lang/page-id -> /page-id [language=lang]
 				$this->url_includes_lang = true;
 				$this->new_request_uri = preg_replace ('/^\/' . $matches[1] . '/', '', $_SERVER['REQUEST_URI']);
 				$this->prefix = '/' . $matches[1];
@@ -365,6 +387,30 @@
 	}
 
 	/**
+	 * Export an array of strings into a JavaScript block that calls
+	 * `$.i18n_add()` which can be passed to `$page->add_script()`.
+	 * Can also be called from a view template on an array of strings
+	 * like this: `{{ my_array|I18n::export }}`.
+	 *
+	 * Note that you may pass either a single array, or each string
+	 * as a separate parameter, which allows you to omit the `array()`
+	 * wrapper when calling it in PHP code.
+	 */
+	public static function export ($strings) {
+		if (func_num_args () > 1) {
+			$strings = func_get_args ();
+		}
+
+		$out = "<script>\$(function(){\$.i18n_append({\n";
+		$sep = '';
+		foreach ($strings as $string) {
+			$out .= $sep . "\t'" . str_replace ("'", "\\'", $string) . "': '" . str_replace ("'", "\\'", __ ($string)) . "'";
+			$sep = ",\n";
+		}
+		return $out . "\n});});</script>\n";
+	}
+
+	/**
 	 * Applies the specified class and format to a date for
 	 * the `date()`, `short_date()`, `time()`, `date_time()` and
 	 * `short_date_time()` methods.
diff -urBNs elefant-elefant_1_3_2_beta/lib/Ini.php elefant-elefant_1_3_3_beta/lib/Ini.php
--- elefant-elefant_1_3_2_beta/lib/Ini.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Ini.php	2013-03-20 13:48:44.000000000 -0500
@@ -68,10 +68,22 @@
 			if (is_array ($value)) {
 				$out .= "\n[$key]\n\n";
 				foreach ($value as $k => $v) {
-					$out .= str_pad ($k, 24) . '= ' . $write_value ($v) . "\n";
+					if (is_array ($v)) {
+						foreach ($v as $val) {
+							$out .= str_pad ($k . '[]', 24) . '= ' . $write_value ($val) . "\n";
+						}
+					} else {
+						$out .= str_pad ($k, 24) . '= ' . $write_value ($v) . "\n";
+					}
 				}
 			} else {
-				$out .= str_pad ($key, 24) . '= ' . $write_value ($value) . "\n";
+				if (is_array ($value)) {
+					foreach ($value as $val) {
+						$out .= str_pad ($key . '[]', 24) . '= ' . $write_value ($val) . "\n";
+					}
+				} else {
+					$out .= str_pad ($key, 24) . '= ' . $write_value ($value) . "\n";
+				}
 			}
 		}
 	
Files elefant-elefant_1_3_2_beta/lib/Mailer.php and elefant-elefant_1_3_3_beta/lib/Mailer.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lib/MemcacheAPC.php elefant-elefant_1_3_3_beta/lib/MemcacheAPC.php
--- elefant-elefant_1_3_2_beta/lib/MemcacheAPC.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/MemcacheAPC.php	2013-03-20 13:48:44.000000000 -0500
@@ -35,12 +35,28 @@
  */
 class MemcacheAPC {
 	/**
+	 * Unique per-site key prefix.
+	 */
+	public static $key_prefix = "";
+
+	/**
+	 * Constructor method
+	 */
+	public function __construct () {
+		// We need unique key prefix to avoid mixing values on shared hosting
+		if (isset ($_SERVER["SERVER_NAME"])) {
+			self::$key_prefix = md5 (strtolower ($_SERVER["SERVER_NAME"])) . ":";
+		}
+	}
+
+
+	/**
 	 * Emulates `MemcacheExt::cache`.
 	 */
 	public function cache ($key, $timeout, $function) {
-		if (($val = $this->get ($key)) === false) {
+		if (($val = $this->get (self::$key_prefix.$key)) === false) {
 			$val = $function ();
-			$this->set ($key, $val, 0, $timeout);
+			$this->set (self::$key_prefix.$key, $val, 0, $timeout);
 		}
 		return $val;
 	}
@@ -49,7 +65,7 @@
 	 * Emulates `Memcache::get`.
 	 */
 	public function get ($key) {
-		$value = apc_fetch ($key);
+		$value = apc_fetch (self::$key_prefix.$key);
 		if (preg_match ('/^(a|O):[0-9]+:/', $value)) {
 			return unserialize ($value);
 		}
@@ -63,10 +79,10 @@
 		if (is_array ($value) || is_object ($value)) {
 			$value = serialize ($value);
 		}
-		if (apc_exists ($key)) {
+		if (apc_exists (self::$key_prefix.$key)) {
 			return false;
 		}
-		apc_store ($key, $value, $expire);
+		apc_store (self::$key_prefix.$key, $value, $expire);
 	}
 
 	/**
@@ -77,9 +93,9 @@
 			$value = serialize ($value);
 		}
 		if ($expire) {
-			return apc_store ($key, $value, $expire);
+			return apc_store (self::$key_prefix.$key, $value, $expire);
 		}
-		return apc_store ($key, $value);
+		return apc_store (self::$key_prefix.$key, $value);
 	}
 
 	/**
@@ -89,31 +105,31 @@
 		if (is_array ($value) || is_object ($value)) {
 			$value = serialize ($value);
 		}
-		if (! apc_exists ($key)) {
+		if (! apc_exists (self::$key_prefix.$key)) {
 			return false;
 		}
-		return apc_store ($key, $value, $expire);
+		return apc_store (self::$key_prefix.$key, $value, $expire);
 	}
 
 	/**
 	 * Emulates `Memcache::delete`.
 	 */
 	public function delete ($key) {
-		return apc_delete ($key);
+		return apc_delete (self::$key_prefix.$key);
 	}
 
 	/**
 	 * Emulates `Memcache::increment`.
 	 */
 	public function increment ($key, $value = 1) {
-		return apc_inc ($key, $value);
+		return apc_inc (self::$key_prefix.$key, $value);
 	}
 
 	/**
 	 * Emulates `Memcache::decrement`.
 	 */
 	public function decrement ($key, $value = 1) {
-		return apc_dec ($key, $value);
+		return apc_dec (self::$key_prefix.$key, $value);
 	}
 
 	/**
Files elefant-elefant_1_3_2_beta/lib/MemcacheExt.php and elefant-elefant_1_3_3_beta/lib/MemcacheExt.php are identical
Files elefant-elefant_1_3_2_beta/lib/MemcacheRedis.php and elefant-elefant_1_3_3_beta/lib/MemcacheRedis.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lib/MemcacheXCache.php elefant-elefant_1_3_3_beta/lib/MemcacheXCache.php
--- elefant-elefant_1_3_2_beta/lib/MemcacheXCache.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/lib/MemcacheXCache.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,143 @@
+<?php
+
+/**
+ * Elefant CMS - http://www.elefantcms.com/
+ *
+ * Copyright (c) 2011 Johnny Broadway
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a copy
+ * of this software and associated documentation files (the "Software"), to deal
+ * in the Software without restriction, including without limitation the rights
+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+ * copies of the Software, and to permit persons to whom the Software is
+ * furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+ * THE SOFTWARE.
+ */
+
+/**
+ * Provides a Memcache-compatible wrapper for the PHP XCache extension.
+ *
+ * This allows you to use XCache as a drop-in replacement for Memcache as a cache
+ * store in Elefant.
+ *
+ * To enable, edit the `conf/config.php` file and find the `[Cache]` section.
+ * Change the `backend` value to `xcache`.
+ */
+class MemcacheXCache {
+	/**
+	 * Unique per-site key prefix.
+	 */
+	public static $key_prefix = "";
+
+	/**
+	 * Constructor method
+	 */
+	public function __construct () {
+		// We need unique key prefix to avoid mixing values on shared hosting
+		if (isset ($_SERVER["SERVER_NAME"])) {
+			self::$key_prefix = md5 (strtolower ($_SERVER["SERVER_NAME"])) . ":";
+		}
+	}
+
+
+	/**
+	 * Emulates `MemcacheExt::cache`.
+	 */
+	public function cache ($key, $timeout, $function) {
+		if (($val = $this->get (self::$key_prefix.$key)) === false) {
+			$val = $function ();
+			$this->set (self::$key_prefix.$key, $val, 0, $timeout);
+		}
+		return $val;
+	}
+
+	/**
+	 * Emulates `Memcache::get`.
+	 */
+	public function get ($key) {
+		$value = xcache_get (self::$key_prefix.$key);
+		if (preg_match ('/^(a|O):[0-9]+:/', $value)) {
+			return unserialize ($value);
+		}
+		return $value;
+	}
+
+	/**
+	 * Emulates `Memcache::add`.
+	 */
+	public function add ($key, $value, $flag = 0, $expire = false) {
+		if (is_array ($value) || is_object ($value)) {
+			$value = serialize ($value);
+		}
+		if (xcache_isset (self::$key_prefix.$key)) {
+			return false;
+		}
+		xcache_set (self::$key_prefix.$key, $value, $expire);
+	}
+
+	/**
+	 * Emulates `Memcache::set`.
+	 */
+	public function set ($key, $value, $flag = 0, $expire = false) {
+		if (is_array ($value) || is_object ($value)) {
+			$value = serialize ($value);
+		}
+		if ($expire) {
+			return xcache_set (self::$key_prefix.$key, $value, $expire);
+		}
+		return xcache_set (self::$key_prefix.$key, $value);
+	}
+
+	/**
+	 * Emulates `Memcache::replace`.
+	 */
+	public function replace ($key, $value, $flag = 0, $expire = false) {
+		if (is_array ($value) || is_object ($value)) {
+			$value = serialize ($value);
+		}
+		if (! xcache_isset (self::$key_prefix.$key)) {
+			return false;
+		}
+		return xcache_set (self::$key_prefix.$key, $value, $expire);
+	}
+
+	/**
+	 * Emulates `Memcache::delete`.
+	 */
+	public function delete ($key) {
+		return xcache_unset (self::$key_prefix.$key);
+	}
+
+	/**
+	 * Emulates `Memcache::increment`.
+	 */
+	public function increment ($key, $value = 1) {
+		return xcache_inc (self::$key_prefix.$key, $value);
+	}
+
+	/**
+	 * Emulates `Memcache::decrement`.
+	 */
+	public function decrement ($key, $value = 1) {
+		return xcache_dec (self::$key_prefix.$key, $value);
+	}
+
+	/**
+	 * Emulates `Memcache::flush`.
+	 */
+	public function flush () {
+		return xcache_unset_by_prefix (self::$key_prefix);
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/lib/Model.php elefant-elefant_1_3_3_beta/lib/Model.php
--- elefant-elefant_1_3_2_beta/lib/Model.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Model.php	2013-03-20 13:48:44.000000000 -0500
@@ -296,7 +296,7 @@
 			$join_table = $this->fields[$name]['join_table'];
 			$this_field = isset ($this->fields[$name]['this_field']) ? $this->fields[$name]['this_field'] : $this->table;
 			$that_field = isset ($this->fields[$name]['that_field']) ? $this->fields[$name]['that_field'] : $obj->table;
-			$order_by = isset ($this->fields[$name]['ordery_by']) ? $this->fields[$name]['ordery_by'] : false;
+			$order_by = isset ($this->fields[$name]['order_by']) ? $this->fields[$name]['order_by'] : false;
 
 			// we need this for the table and primary key fields
 			// of the other table
@@ -794,7 +794,9 @@
 			}
 
 			// Build the multi-row insert statement
-			$sql = 'insert into `' . $this->table . '` (';
+			$class = get_called_class ();
+			$o = new $class;
+			$sql = 'insert into `' . $o->table . '` (';
 			$data = array ();
 
 			// Figure out how many placeholders are needed per record
@@ -845,6 +847,24 @@
 		}
 		return $res;
 	}
+
+	/**
+	 * Get the table name for this model.
+	 */
+	public static function table () {
+		$class = get_called_class ();
+		$o = new $class;
+		return $o->table;
+	}
+
+	/**
+	 * Get the primary key field for this model.
+	 */
+	public static function key () {
+		$class = get_called_class ();
+		$o = new $class;
+		return $o->key;
+	}
 }
 
 ?>
\ No newline at end of file
Files elefant-elefant_1_3_2_beta/lib/MongoManager.php and elefant-elefant_1_3_3_beta/lib/MongoManager.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lib/MongoModel.php elefant-elefant_1_3_3_beta/lib/MongoModel.php
--- elefant-elefant_1_3_2_beta/lib/MongoModel.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/MongoModel.php	2013-03-20 13:48:44.000000000 -0500
@@ -464,7 +464,8 @@
 	 *       ok: 1
 	 *     }
 	 */
-	public function group ($keys, $initial, $reduce, $options = array ()) {
+	public function group ($keys, $initial, $reduce, $options = null) {
+		$options = is_null ($options) ? array ('condition' => array ()) : $options;
 		$cur = $this->collection->group (
 			$keys,
 			$initial,
Files elefant-elefant_1_3_2_beta/lib/Page.php and elefant-elefant_1_3_3_beta/lib/Page.php are identical
Files elefant-elefant_1_3_2_beta/lib/Product.php and elefant-elefant_1_3_3_beta/lib/Product.php are identical
diff -urBNs elefant-elefant_1_3_2_beta/lib/Restful.php elefant-elefant_1_3_3_beta/lib/Restful.php
--- elefant-elefant_1_3_2_beta/lib/Restful.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Restful.php	2013-03-20 13:48:44.000000000 -0500
@@ -91,6 +91,11 @@
 	public $controller = null;
 
 	/**
+	 * The cache object.
+	 */
+	public $cache = null;
+
+	/**
 	 * Whether `wrap()` should alter the output data to add
 	 * a `{"success":true,"data":"..."}` structure around it.
 	 */
diff -urBNs elefant-elefant_1_3_2_beta/lib/Template.php elefant-elefant_1_3_3_beta/lib/Template.php
--- elefant-elefant_1_3_2_beta/lib/Template.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Template.php	2013-03-20 13:48:44.000000000 -0500
@@ -193,7 +193,7 @@
  *
  * This will be replaced with a call to:
  *
- *     i18n_get('Text here')
+ *     __ ('Text here')
  */
 class Template {
 	/**
@@ -452,6 +452,14 @@
 					$this->replace_vars (substr ($v, 1, strlen ($v) - 2))
 				);
 				$arr .= sprintf ('%s\'%s\' => %s', $sep, $k, $v);
+			} elseif (preg_match ('/\[(.*)\]/', $v, $regs)) {
+				$r = str_replace (
+					array ('<?php echo ', '; ?>'),
+					array ('\' . ', ' . \''),
+					$this->replace_vars ($regs[1])
+				);
+				$v = preg_replace ('/\[(.*)\]/', $r, $v);
+				$arr .= sprintf ('%s\'%s\' => \'%s\'', $sep, $k, $v);
 			} else {
 				$arr .= sprintf ('%s\'%s\' => \'%s\'', $sep, $k, $v);
 			}
@@ -491,6 +499,9 @@
 		// remove spaces
 		$val = preg_replace ('/[\t\n ]+(\?|\&)/', '\1', trim ($val));
 
+		// normalize <span data-embed> tags to {! tags !}
+		$val = preg_replace ('/<[^>]*?data-embed="([^"]+)".*?>.*?<\/.*?>/', '{! \1 !}', $val);
+
 		$parts = preg_split ('/(\{\! ?.*? ?\!\})/e', $val, -1, PREG_SPLIT_DELIM_CAPTURE);
 		$out = '';
 		foreach ($parts as $part) {
@@ -514,7 +525,7 @@
 	}
 
 	/**
-	 * Replace strings with calls to `i18n_get()` for multilingual sites.
+	 * Replace strings with calls to `__ ()` for multilingual sites.
 	 * Translatable strings take the following form using either double
 	 * or single quotes:
 	 *
@@ -522,7 +533,7 @@
 	 *     {' some text here '}
 	 */
 	public function replace_strings ($val) {
-		return '<?php echo i18n_get (\'' . str_replace ('\'', '\\\'', $val) . '\'); ?>';
+		return '<?php echo __ (\'' . str_replace ('\'', '\\\'', $val) . '\'); ?>';
 	}
 
 	/**
diff -urBNs elefant-elefant_1_3_2_beta/lib/Validator.php elefant-elefant_1_3_3_beta/lib/Validator.php
--- elefant-elefant_1_3_2_beta/lib/Validator.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/Validator.php	2013-03-20 13:48:44.000000000 -0500
@@ -283,7 +283,7 @@
 					}
 				}
 				if ($type === 'filetype') {
-					$extensions = preg_split ('/, ?', trim (strtolower ($validator)));
+					$extensions = preg_split ('/, ?/', trim (strtolower ($validator)));
 					if ($extensions === false) {
 						$extensions = array ($validator);
 					}
Files elefant-elefant_1_3_2_beta/lib/View.php and elefant-elefant_1_3_3_beta/lib/View.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/.htaccess and elefant-elefant_1_3_3_beta/lib/vendor/.htaccess are identical
diff -urBNs elefant-elefant_1_3_2_beta/lib/vendor/ActiveResource.php elefant-elefant_1_3_3_beta/lib/vendor/ActiveResource.php
--- elefant-elefant_1_3_2_beta/lib/vendor/ActiveResource.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/lib/vendor/ActiveResource.php	2013-03-20 13:48:44.000000000 -0500
@@ -96,6 +96,11 @@
 	public $request_body = '';
 
 	/**
+	 * The request headers that was sent to the server.
+	 */
+	public $request_headers = array ();
+
+	/**
 	 * The complete URL that the request was sent to.
 	 */
 	public $request_uri = '';
@@ -234,14 +239,15 @@
 		if (! $id) {
 			$id = $this->_data['id'];
 		}
+		$options_string = '';
+		if (count ($options) > 0) {
+			$options_string = '?' . http_build_query ($options);
+		}
 		if ($id === 'all') {
 			$url = $this->site . $this->element_name_plural . '.xml';
-			if (count ($options) > 0) {
-				$url .= '?' . http_build_query ($options);
-			}
-			return $this->_send_and_receive ($url, 'GET');
+			return $this->_send_and_receive ($url . $options_string, 'GET');
 		}
-		return $this->_send_and_receive ($this->site . $this->element_name_plural . '/' . $id . '.xml', 'GET');
+		return $this->_send_and_receive ($this->site . $this->element_name_plural . '/' . $id . '.xml' . $options_string, 'GET');
 	}
 
 	/**
@@ -252,7 +258,7 @@
 	 */
 	public function get ($method, $options = array ()) {
 		$req = $this->site . $this->element_name_plural;
-        if ($this->_data['id']) { 
+        if (isset ($this->_data['id']) && $this->_data['id']) { 
           $req .= '/' . $this->_data['id'];
         }
         $req .= '/' . $method . '.xml';
@@ -267,13 +273,13 @@
 	 *
 	 *     POST /collection/id/method.xml
 	 */
-	public function post ($method, $options = array ()) {
+	function post ($method, $options = array (), $start_tag = false) {
 		$req = $this->site . $this->element_name_plural;
         if ($this->_data['id']) {
           $req .= '/' . $this->_data['id'];
         }
         $req .= '/' . $method . '.xml';
-		return $this->_send_and_receive ($req, 'POST', $options);
+		return $this->_send_and_receive ($req, 'POST', $options, $start_tag);
 	}
 
 	/**
@@ -281,12 +287,15 @@
 	 *
 	 *     PUT /collection/id/method.xml
 	 */
-	public function put ($method, $options = array ()) {
+	public function put ($method, $options = array (), $options_as_xml = false, $start_tag = false) {
 		$req = $this->site . $this->element_name_plural;
         if ($this->_data['id']) { 
-          $req .= '/' . $this->_data['id'];
+        	$req .= '/' . $this->_data['id'];
         }
         $req .= '/' . $method . '.xml';
+		if ($options_as_xml) {
+			return $this->_send_and_receive ($req, 'PUT', $options, $start_tag);
+		}
 		if (count ($options) > 0) {
 			$req .= '?' . http_build_query ($options);
 		}
@@ -356,7 +365,7 @@
 	 * @author Dom Hastings - modified to suit my needs
 	 * @see http://www.php.net/manual/en/function.ord.php#78032
 	 */
-	private function _unicode_ord(&$c, &$i = 0) {
+	private function _unicode_ord (&$c, &$i = 0) {
 		// get the character length
 		$l = strlen($c);
 		// copy the offset
@@ -414,6 +423,7 @@
 			// just return it
 			return $s;
 		}
+		$s = (string) $s;
 		
 		// create the return string
 		$r = '';
@@ -425,7 +435,7 @@
 			// get the value of the character
 			$o = $this->_unicode_ord($s, $i);
 			
-			// valid cahracters
+			// valid characters
 			$v = (
 				// \t \n <vertical tab> <form feed> \r
 				($o >= 9 && $o <= 13) || 
@@ -494,9 +504,9 @@
 	/**
 	 * Build the request, call `_fetch()` and parse the results.
 	 */
-	private function _send_and_receive ($url, $method, $data = array ()) {
+	private function _send_and_receive ($url, $method, $data = array (), $start_tag = false) {
 		$params = '';
-		$el = $this->element_name; // Singular this time
+		$el = $start_tag ? $start_tag : $this->element_name; // Singular this time
 		if ($this->request_format === 'url') {
 			foreach ($data as $k => $v) {
 				if ($k !== 'id' && $k !== 'created-at' && $k !== 'updated-at') {
@@ -514,8 +524,7 @@
 			$params .= '</' . $el . '>';
 		}
 
-		if ($this->extra_params !== false)
-		{
+		if ($this->extra_params !== false) {
 			$url = $url . $this->extra_params;
 		}
 
@@ -525,8 +534,7 @@
 
 		$res = $this->_fetch ($url, $method, $params);
 
-		if ($res === false)
-		{
+		if ($res === false) {
 			return $this;
 		}
 
@@ -614,7 +622,7 @@
 		}
 
 		if ($this->request_format === 'xml') {
-			curl_setopt ($ch, CURLOPT_HTTPHEADER, array ("Expect:", "Content-Type: text/xml", "Length: " . strlen ($params)));
+			$this->request_headers = array_merge ($this->request_headers, array ("Expect:", "Content-Type: text/xml", "Length: " . strlen ($params)));
 		}
 		switch ($method) {
 			case 'POST':
@@ -632,6 +640,11 @@
 			default:
 				break;
 		}
+
+		if (count ($this->request_headers)) {
+			curl_setopt ($ch, CURLOPT_HTTPHEADER, $this->request_headers);
+		}
+
 		$res = curl_exec ($ch);
 
 		// Check HTTP status code for denied access
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Analog.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Analog.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Amon.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Amon.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Buffer/Destructor.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Buffer/Destructor.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Buffer.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Buffer.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/File.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/File.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/FirePHP.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/FirePHP.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/LevelBuffer.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/LevelBuffer.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Mail.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Mail.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Mongo.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Mongo.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Multi.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Multi.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Null.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Null.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Post.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Post.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Stderr.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Stderr.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Syslog.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Syslog.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog/Handler/Variable.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog/Handler/Variable.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Analog.php and elefant-elefant_1_3_3_beta/lib/vendor/Analog.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Bench.php and elefant-elefant_1_3_3_beta/lib/vendor/Bench.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Pimple.php and elefant-elefant_1_3_3_beta/lib/vendor/Pimple.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/URLify.php and elefant-elefant_1_3_3_beta/lib/vendor/URLify.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Loader.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Loader.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Message/File.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Message/File.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Message/Interface.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Message/Interface.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Message.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Message.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Part/File.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Part/File.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Part/Interface.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Part/Interface.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Part.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Part.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Abstract.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Abstract.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Imap.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Imap.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Pop3.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Pop3.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Crammd5.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Crammd5.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Login.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Login.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Plain.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Plain.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Protocol/Smtp.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Protocol/Smtp.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Abstract.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Abstract.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Folder/Interface.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Folder/Interface.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Folder/Maildir.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Folder/Maildir.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Folder/Mbox.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Folder/Mbox.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Folder.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Folder.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Imap.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Imap.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Maildir.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Maildir.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Mbox.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Mbox.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Pop3.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Pop3.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Writable/Interface.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Writable/Interface.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage/Writable/Maildir.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage/Writable/Maildir.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Storage.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Storage.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Transport/Abstract.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Transport/Abstract.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Transport/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Transport/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Transport/File.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Transport/File.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Transport/Sendmail.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Transport/Sendmail.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail/Transport/Smtp.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail/Transport/Smtp.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mail.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mail.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mime/Decode.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mime/Decode.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mime/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mime/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mime/Message.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mime/Message.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mime/Part.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mime/Part.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Mime.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Mime.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Registry.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Registry.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Abstract.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Abstract.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Alnum.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Alnum.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Alpha.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Alpha.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/AdapterAbstract.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/AdapterAbstract.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/AdapterInterface.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/AdapterInterface.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Code25.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Code25.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Code25interleaved.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Code25interleaved.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Code39.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Code39.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Code39ext.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Code39ext.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Code93.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Code93.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Code93ext.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Code93ext.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean12.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean12.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean13.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean13.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean14.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean14.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean18.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean18.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean2.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean2.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean5.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean5.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Ean8.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Ean8.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Gtin12.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Gtin12.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Gtin13.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Gtin13.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Gtin14.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Gtin14.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Identcode.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Identcode.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Intelligentmail.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Intelligentmail.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Issn.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Issn.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Itf14.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Itf14.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Leitcode.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Leitcode.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Planet.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Planet.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Postnet.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Postnet.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Royalmail.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Royalmail.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Sscc.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Sscc.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Upca.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Upca.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode/Upce.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode/Upce.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Barcode.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Barcode.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Between.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Between.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Callback.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Callback.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Ccnum.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Ccnum.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/CreditCard.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/CreditCard.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Date.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Date.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Db/Abstract.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Db/Abstract.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Db/NoRecordExists.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Db/NoRecordExists.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Db/RecordExists.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Db/RecordExists.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Digits.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Digits.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/EmailAddress.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/EmailAddress.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Exception.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Exception.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Count.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Count.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Crc32.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Crc32.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/ExcludeExtension.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/ExcludeExtension.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/ExcludeMimeType.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/ExcludeMimeType.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Exists.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Exists.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Extension.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Extension.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/FilesSize.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/FilesSize.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Hash.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Hash.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/ImageSize.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/ImageSize.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/IsCompressed.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/IsCompressed.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/IsImage.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/IsImage.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Md5.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Md5.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/MimeType.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/MimeType.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/NotExists.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/NotExists.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Sha1.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Sha1.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Size.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Size.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/Upload.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/Upload.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/File/WordCount.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/File/WordCount.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Float.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Float.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/GreaterThan.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/GreaterThan.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Hex.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Hex.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Hostname/Biz.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Hostname/Biz.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Hostname/Cn.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Hostname/Cn.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Hostname/Com.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Hostname/Com.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Hostname/Jp.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Hostname/Jp.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Hostname.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Hostname.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Iban.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Iban.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Identical.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Identical.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/InArray.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/InArray.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Int.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Int.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Interface.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Interface.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Ip.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Ip.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Isbn.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Isbn.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/LessThan.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/LessThan.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/NotEmpty.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/NotEmpty.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/PostCode.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/PostCode.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Regex.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Regex.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Sitemap/Changefreq.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Sitemap/Changefreq.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Sitemap/Lastmod.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Sitemap/Lastmod.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Sitemap/Loc.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Sitemap/Loc.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/Sitemap/Priority.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/Sitemap/Priority.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate/StringLength.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate/StringLength.php are identical
Files elefant-elefant_1_3_2_beta/lib/vendor/Zend/Validate.php and elefant-elefant_1_3_3_beta/lib/vendor/Zend/Validate.php are identical
Files elefant-elefant_1_3_2_beta/nginx.conf and elefant-elefant_1_3_3_beta/nginx.conf are identical
diff -urBNs elefant-elefant_1_3_2_beta/phpunit.xml.dist elefant-elefant_1_3_3_beta/phpunit.xml.dist
--- elefant-elefant_1_3_2_beta/phpunit.xml.dist	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/phpunit.xml.dist	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,19 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<phpunit backupGlobals="false"
+         backupStaticAttributes="false"
+         bootstrap="./tests/bootstrap.php"
+         colors="true"
+         convertErrorsToExceptions="true"
+         convertNoticesToExceptions="true"
+         convertWarningsToExceptions="true"
+         processIsolation="false"
+         stopOnFailure="false"
+         syntaxCheck="false"
+>
+    <testsuites>
+        <testsuite name="Elefant Test Suite">
+            <directory suffix="Test.php" phpVersion="5.3.2" phpVersionOperator=">=">./tests</directory>
+        </testsuite>
+    </testsuites>
+</phpunit>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/robots.txt elefant-elefant_1_3_3_beta/robots.txt
--- elefant-elefant_1_3_2_beta/robots.txt	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/robots.txt	2013-03-20 13:48:44.000000000 -0500
@@ -1,33 +1,33 @@
-#
-# robots.txt
-#
-# This file is to prevent the crawling and indexing of certain parts
-# of your site by web crawlers and spiders run by sites like Yahoo!
-# and Google. By telling these "robots" where not to go on your site,
-# you save bandwidth and server resources.
-#
-# For more information about the robots.txt standard, see:
-# http://www.robotstxt.org/wc/robots.html
-#
-# For syntax checking, see:
-# http://www.sxw.org.uk/computing/robots/check.html
-
-User-agent: *
-Crawl-delay: 10
-# Directories
-Disallow: /apps/
-Disallow: /cache/
-Disallow: /conf/
-Disallow: /css/
-Disallow: /files/
-Disallow: /js/
-Disallow: /layouts/
-Disallow: /lib/
-Disallow: /tests/
-# Files
-Disallow: /LICENSE
-Disallow: /README.md
-Disallow: /elefant
-# Apps Paths
-Disallow: /admin/
-Disallow: /user/
+#
+# robots.txt
+#
+# This file is to prevent the crawling and indexing of certain parts
+# of your site by web crawlers and spiders run by sites like Yahoo!
+# and Google. By telling these "robots" where not to go on your site,
+# you save bandwidth and server resources.
+#
+# For more information about the robots.txt standard, see:
+# http://www.robotstxt.org/wc/robots.html
+#
+# For syntax checking, see:
+# http://www.sxw.org.uk/computing/robots/check.html
+
+User-agent: *
+Crawl-delay: 10
+# Directories
+Disallow: /apps/
+Disallow: /cache/
+Disallow: /conf/
+Disallow: /css/
+Disallow: /files/
+Disallow: /js/
+Disallow: /layouts/
+Disallow: /lib/
+Disallow: /tests/
+# Files
+Disallow: /LICENSE
+Disallow: /README.md
+Disallow: /elefant
+# Apps Paths
+Disallow: /admin/
+Disallow: /user/
Files elefant-elefant_1_3_2_beta/tests/.htaccess and elefant-elefant_1_3_3_beta/tests/.htaccess are identical
diff -urBNs elefant-elefant_1_3_2_beta/tests/AclTest.php elefant-elefant_1_3_3_beta/tests/AclTest.php
--- elefant-elefant_1_3_2_beta/tests/AclTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/AclTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class AclTest extends PHPUnit_Framework_TestCase {
 	protected static $acl;
 
diff -urBNs elefant-elefant_1_3_2_beta/tests/ActiveResourceTest.php elefant-elefant_1_3_3_beta/tests/ActiveResourceTest.php
--- elefant-elefant_1_3_2_beta/tests/ActiveResourceTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/ActiveResourceTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class Test extends ActiveResource {
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/tests/AdminAppTest.php elefant-elefant_1_3_3_beta/tests/AdminAppTest.php
--- elefant-elefant_1_3_2_beta/tests/AdminAppTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/AdminAppTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class AdminAppTest extends AppTest {
 	public function test_forward () {
 		$res = $this->get ('admin/forward', array ('to' => '/test'));
diff -urBNs elefant-elefant_1_3_2_beta/tests/AdminFunctionsTest.php elefant-elefant_1_3_3_beta/tests/AdminFunctionsTest.php
--- elefant-elefant_1_3_2_beta/tests/AdminFunctionsTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/AdminFunctionsTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Functions.php');
-require_once ('lib/Autoloader.php');
 require_once ('apps/admin/lib/Functions.php');
 
 class AdminFunctionsTest extends PHPUnit_Framework_TestCase {
diff -urBNs elefant-elefant_1_3_2_beta/tests/AnalogTest.php elefant-elefant_1_3_3_beta/tests/AnalogTest.php
--- elefant-elefant_1_3_2_beta/tests/AnalogTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/AnalogTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class AnalogTest extends PHPUnit_Framework_TestCase {
 	public static $log = '';
 
diff -urBNs elefant-elefant_1_3_2_beta/tests/BlogAppTest.php elefant-elefant_1_3_3_beta/tests/BlogAppTest.php
--- elefant-elefant_1_3_2_beta/tests/BlogAppTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/BlogAppTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class BlogAppTest extends AppTest {
 	function test_index () {
 		// Test the default output with no posts
diff -urBNs elefant-elefant_1_3_2_beta/tests/CacheTest.php elefant-elefant_1_3_3_beta/tests/CacheTest.php
--- elefant-elefant_1_3_2_beta/tests/CacheTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/CacheTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class CacheTest extends PHPUnit_Framework_TestCase {
 	function test_set_get () {
 		$c = new Cache ();
diff -urBNs elefant-elefant_1_3_2_beta/tests/ControllerTest.php elefant-elefant_1_3_3_beta/tests/ControllerTest.php
--- elefant-elefant_1_3_2_beta/tests/ControllerTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/ControllerTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,8 +1,5 @@
 <?php
 
-require_once ('lib/Functions.php');
-require_once ('lib/Autoloader.php');
-
 class ControllerTest extends PHPUnit_Framework_TestCase {
 	function setUp () {
 		$this->c = new Controller ();
@@ -47,6 +44,7 @@
 		$this->assertFalse ($this->c->is_https ());
 		$_SERVER['HTTPS'] = 'on';
 		$this->assertTrue ($this->c->is_https ());
+		$_SERVER['HTTPS'] = 'off';
 	}
 
 	function test_absolutize () {
diff -urBNs elefant-elefant_1_3_2_beta/tests/CsvParserTest.php elefant-elefant_1_3_3_beta/tests/CsvParserTest.php
--- elefant-elefant_1_3_2_beta/tests/CsvParserTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/CsvParserTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -2,8 +2,6 @@
 
 namespace blog;
 
-require_once ('lib/Autoloader.php');
-
 class CsvParserTest extends \PHPUnit_Framework_TestCase {
 	function test_determine_delimiter () {
 		$string = "One\tTwo\tThree";
diff -urBNs elefant-elefant_1_3_2_beta/tests/DBTest.php elefant-elefant_1_3_3_beta/tests/DBTest.php
--- elefant-elefant_1_3_2_beta/tests/DBTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/DBTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class DBTest extends PHPUnit_Framework_TestCase {
 	function setUp () {
 		$this->bad_conf = array (
@@ -42,9 +40,9 @@
 	function test_args () {
 		$cmp = array ('one', 'two');
 		$obj = (object) $cmp;
-		$this->assertEquals (DB::args (array ('one', 'two')), $cmp);
-		$this->assertEquals (DB::args (array (array ('one', 'two'))), $cmp);
-		$this->assertEquals (DB::args (array ($obj)), $cmp);
+		$this->assertEquals ($cmp, DB::args (array ('one', 'two')));
+		$this->assertEquals ($cmp, DB::args (array (array ('one', 'two'))));
+		$this->assertEquals ($cmp, DB::args (array ($obj)));
 	}
 
 	function test_execute () {
@@ -53,36 +51,36 @@
 	}
 
 	function test_last_sql () {
-		$this->assertEquals (DB::last_sql (), 'insert into test (foo) values (?)');
+		$this->assertEquals ('insert into test (foo) values (?)', DB::last_sql ());
 	}
 
 	function test_last_args () {
-		$this->assertEquals (DB::last_args (), array ('asdf'));
+		$this->assertEquals (array ('asdf'), DB::last_args ());
 	}
 
 	function test_fetch () {
 		$res = DB::fetch ('select * from test');
-		$this->assertEquals (count ($res), 1);
+		$this->assertEquals (1, count ($res));
 		$cmp = new StdClass;
 		$cmp->foo = 'asdf';
-		$this->assertEquals ($res[0], $cmp);
+		$this->assertEquals ($cmp, $res[0]);
 	}
 
 	function test_single () {
 		$cmp = new StdClass;
 		$cmp->foo = 'asdf';
 		$res = DB::single ('select * from test');
-		$this->assertEquals ($res, $cmp);
+		$this->assertEquals ($cmp, $res);
 	}
 
 	function test_shift () {
 		$res = DB::shift ('select foo from test');
-		$this->assertEquals ($res, 'asdf');
+		$this->assertEquals ('asdf', $res);
 	}
 
 	function test_shift_array () {		
 		$res = DB::shift_array ('select * from test');
-		$this->assertEquals ($res, array ('asdf'));
+		$this->assertEquals (array ('asdf'), $res);
 	}
 
 	function test_pairs () {
@@ -93,7 +91,7 @@
 		DB::execute ('insert into test2 (foo, bar) values (?, ?)', 'two', 'sam');
 		$res = DB::pairs ('select * from test2 order by foo asc');
 		$cmp = array ('one' => 'joe', 'two' => 'sam');
-		$this->assertEquals ($res, $cmp);
+		$this->assertEquals ($cmp, $res);
 	}
 
 	function test_transactions () {
diff -urBNs elefant-elefant_1_3_2_beta/tests/DiffTest.php elefant-elefant_1_3_3_beta/tests/DiffTest.php
--- elefant-elefant_1_3_2_beta/tests/DiffTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/DiffTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class DiffTest extends PHPUnit_Framework_TestCase {
 	function test_compare () {
 		$diff = new Diff (DIFF_SPACE);
diff -urBNs elefant-elefant_1_3_2_beta/tests/ExtendedModelTest.php elefant-elefant_1_3_3_beta/tests/ExtendedModelTest.php
--- elefant-elefant_1_3_2_beta/tests/ExtendedModelTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/ExtendedModelTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class MyModel extends ExtendedModel {
 	public $_extended_field = 'extra';
 	public $verify = array (
diff -urBNs elefant-elefant_1_3_2_beta/tests/FileManagerTest.php elefant-elefant_1_3_3_beta/tests/FileManagerTest.php
--- elefant-elefant_1_3_2_beta/tests/FileManagerTest.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/tests/FileManagerTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,174 @@
+<?php
+
+require_once ('lib/I18n.php');
+
+class FileManagerTest extends PHPUnit_Framework_TestCase {
+	static function setUpBeforeClass () {
+		$GLOBALS['i18n'] = new I18n;
+	}
+
+	static function tearDownAfterClass () {
+		unset ($GLOBALS['i18n']);
+
+		$files = array (
+			'files/touch_test.txt',
+			'files/rename_test.txt',
+			'files/renamed_test.txt',
+			'files/move_test.txt',
+			'files/design/move_test.txt'
+		);
+		foreach ($files as $file) {
+			if (file_exists ($file)) {
+				unlink ($file);
+			}
+		}
+
+		if (file_exists ('files/mkdir_test')) {
+			rmdir ('files/mkdir_test');
+		}
+
+		if (file_exists ('files/rmdir_recursive_test/test.txt')) {
+			unlink ('files/rmdir_recursive_test/test.txt');
+		}
+		if (file_exists ('files/rmdir_recursive_test')) {
+			rmdir ('files/rmdir_recursive_test');
+		}
+	}
+
+	function test_dir () {
+		$res = FileManager::dir ('');
+
+		// the root folder with two dirs and no files
+		$this->assertEquals (array ('dirs', 'files'), array_keys ($res));
+		$this->assertEquals (array (), $res['files']);
+		$this->assertEquals (2, count ($res['dirs']));
+		$this->assertEquals ('design', $res['dirs'][0]['name']);
+		$this->assertEquals ('design', $res['dirs'][0]['path']);
+		$this->assertEquals ('homepage', $res['dirs'][1]['name']);
+		$this->assertEquals ('homepage', $res['dirs'][1]['path']);
+
+		// a folder with files in it
+		$res = FileManager::dir ('homepage');
+		$this->assertEquals (0, count ($res['dirs']));
+		$this->assertEquals (4, count ($res['files']));
+		$this->assertEquals ('photo1.jpg', $res['files'][0]['name']);
+		$this->assertEquals ('homepage/photo1.jpg', $res['files'][0]['path']);
+		$this->assertEquals ('photo2.jpg', $res['files'][1]['name']);
+		$this->assertEquals ('homepage/photo2.jpg', $res['files'][1]['path']);
+		$this->assertEquals ('photo3.jpg', $res['files'][2]['name']);
+		$this->assertEquals ('homepage/photo3.jpg', $res['files'][2]['path']);
+		$this->assertEquals ('photo4.jpg', $res['files'][3]['name']);
+		$this->assertEquals ('homepage/photo4.jpg', $res['files'][3]['path']);
+
+		// check invalid folder
+		$res = FileManager::dir ('foooooo');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Invalid folder name', FileManager::error ());
+	}
+
+	function test_touch_and_unlink () {
+		$this->assertFalse (file_exists ('files/touch_test.txt'));
+
+		$res = FileManager::touch ('touch_test.txt');
+		$this->assertTrue ($res);
+		$this->assertTrue (file_exists ('files/touch_test.txt'));
+
+		$res = FileManager::touch ('../invalid');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Invalid folder', FileManager::error ());
+
+		$mtime = filemtime ('files/touch_test.txt');
+		sleep (1);
+		FileManager::touch ('touch_test.txt');
+		clearstatcache ('files/touch_test.txt');
+		$mtime2 = filemtime ('files/touch_test.txt');
+		$this->assertNotEquals ($mtime, $mtime2);
+
+		$res = FileManager::unlink ('touch_test.txt');
+		$this->assertTrue ($res);
+
+		$this->assertFalse (file_exists ('files/touch_test.txt'));
+	}
+
+	function test_rename () {
+		FileManager::touch ('rename_test.txt');
+		$this->assertTrue (file_exists ('files/rename_test.txt'));
+
+		$res = FileManager::rename ('rename_test.txt', 'renamed_test.txt');
+		$this->assertTrue ($res);
+
+		$this->assertFalse (file_exists ('files/rename_test.txt'));
+		$this->assertTrue (file_exists ('files/renamed_test.txt'));
+		
+		FileManager::unlink ('renamed_test.txt');
+	}
+
+	function test_move () {
+		FileManager::touch ('move_test.txt');
+		$this->assertTrue (file_exists ('files/move_test.txt'));
+		
+		$res = FileManager::move ('move_test.txt', 'design');
+		$this->assertTrue ($res);
+		
+		$this->assertFalse (file_exists ('files/move_test.txt'));
+		$this->assertTrue (file_exists ('files/design/move_test.txt'));
+
+		$res = FileManager::move ('design/move_test.txt', '..');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Invalid folder', FileManager::error ());
+
+		$res = FileManager::move ('design/move_test.txt', '');
+		$this->assertTrue ($res);
+		
+		$this->assertTrue (file_exists ('files/move_test.txt'));
+		$this->assertFalse (file_exists ('files/design/move_test.txt'));
+
+		FileManager::unlink ('move_test.txt');
+	}
+
+	function test_mkdir_and_rmdir () {
+		$res = FileManager::mkdir ('@#$%');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Invalid folder name', FileManager::error ());
+
+		$res = FileManager::mkdir ('../foo');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Invalid location', FileManager::error ());
+
+		$res = FileManager::mkdir ('design');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Folder already exists design', FileManager::error ());
+
+		$res = FileManager::mkdir ('mkdir_test');
+		$this->assertTrue ($res);
+		$this->assertTrue (is_dir ('files/mkdir_test'));
+
+		$res = FileManager::rmdir ('mkdir_fake_test');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Invalid folder name', FileManager::error ());
+
+		$res = FileManager::rmdir ('mkdir_test');
+		$this->assertTrue ($res);
+		$this->assertFalse (is_dir ('files/mkdir_test'));
+	}
+
+	function test_rmdir_recursive () {
+		$res = FileManager::mkdir ('rmdir_recursive_test');
+		$this->assertTrue ($res);
+		$this->assertTrue (is_dir ('files/rmdir_recursive_test'));
+		
+		$res = FileManager::touch ('rmdir_recursive_test/test.txt');
+		$this->assertTrue ($res);
+		$this->assertTrue (file_exists ('files/rmdir_recursive_test/test.txt'));
+
+		$res = FileManager::rmdir ('rmdir_recursive_test');
+		$this->assertFalse ($res);
+		$this->assertEquals ('Folder must be empty', FileManager::error ());
+		
+		$res = FileManager::rmdir ('rmdir_recursive_test', true);
+		$this->assertTrue ($res);
+		$this->assertFalse (is_dir ('files/rmdir_recursive_test'));
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/tests/FormTest.php elefant-elefant_1_3_3_beta/tests/FormTest.php
--- elefant-elefant_1_3_2_beta/tests/FormTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/FormTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class FormTest extends PHPUnit_Framework_TestCase {
 	function test_merge_values () {
 		$_POST['foo'] = 'bar';
diff -urBNs elefant-elefant_1_3_2_beta/tests/FunctionsTest.php elefant-elefant_1_3_3_beta/tests/FunctionsTest.php
--- elefant-elefant_1_3_2_beta/tests/FunctionsTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/FunctionsTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Functions.php');
-
 class FunctionsTest extends PHPUnit_Framework_TestCase {
 	function test_simple_auth () {
 		$verifier = function ($user, $pass) {
diff -urBNs elefant-elefant_1_3_2_beta/tests/I18nTest.php elefant-elefant_1_3_3_beta/tests/I18nTest.php
--- elefant-elefant_1_3_2_beta/tests/I18nTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/I18nTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class I18nTest extends PHPUnit_Framework_TestCase {
 	protected $backupGlobalsBlacklist = array ('i18n');
 
@@ -28,7 +26,7 @@
 		$i18n->lang_hash['en'] = array (
 			'Hello' => 'Bonjour',
 		);
-		$this->assertEquals (i18n_get ('Hello'), 'Bonjour');
+		$this->assertEquals (__ ('Hello'), 'Bonjour');
 	}
 
 	function test_getf () {
@@ -37,7 +35,7 @@
 		$i18n->lang_hash['en'] = array (
 			'Hello %s' => 'Bonjour %s'
 		);
-		$this->assertEquals (i18n_getf ('Hello %s', 'world'), 'Bonjour world');
+		$this->assertEquals (__ ('Hello %s', 'world'), 'Bonjour world');
 	}
 
 	function test_underscore () {
@@ -102,8 +100,21 @@
 			'Back' => 'Retournez'
 		);
 
-		$this->assertEquals ('Maison', i18n_get ('Home'));
-		$this->assertEquals ('Retournez', i18n_get ('Back'));
+		$this->assertEquals ('Maison', __ ('Home'));
+		$this->assertEquals ('Retournez', __ ('Back'));
+	}
+
+	function test_export () {
+		$expected = "<script>\$(function(){\$.i18n_append({\n\t'One': 'One',\n\t'Don\\'t': 'Don\\'t'\n});});</script>\n";
+		$this->assertEquals (
+			$expected,
+			I18n::export (array ('One', 'Don\'t'))
+		);
+
+		$this->assertEquals (
+			$expected,
+			I18n::export ('One', 'Don\'t')
+		);
 	}
 
 	function test_date () {
diff -urBNs elefant-elefant_1_3_2_beta/tests/IniTest.php elefant-elefant_1_3_3_beta/tests/IniTest.php
--- elefant-elefant_1_3_2_beta/tests/IniTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/IniTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class IniTest extends PHPUnit_Framework_TestCase {
 	function test_parse () {
 		$str = "one = two\nthree = four";
@@ -36,6 +34,12 @@
 		$ini = "; <?php /*\n;\n; Header test.\n;\n\none                     = two\nthree                   = four\n\n; */ ?>";
 		$this->assertEquals ($ini, Ini::write ($data, false, 'Header test.'));
 	}
+
+	function test_write_with_arrays () {
+		$data = array ('Section' => array ('one' => array ('one', 'two')));
+		$ini = "; <?php /*\n\n[Section]\n\none[]                   = one\none[]                   = two\n\n; */ ?>";
+		$this->assertEquals ($ini, Ini::write ($data));
+	}
 }
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/tests/LinkTest.php elefant-elefant_1_3_3_beta/tests/LinkTest.php
--- elefant-elefant_1_3_2_beta/tests/LinkTest.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/tests/LinkTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,183 @@
+<?php
+
+class LinkTest extends PHPUnit_Framework_TestCase {
+	function setUp () {
+		$nav = new Navigation;
+		$nav->tree = array (
+			(object) array (
+				'data' => 'Home',
+				'attr' => (object) array ('id' => 'index')
+			),
+			(object) array (
+				'data' => 'Other',
+				'attr' => (object) array ('id' => 'other')
+			),
+			(object) array (
+				'data' => 'English',
+				'attr' => (object) array ('id' => 'en'),
+				'children' => array (
+					(object) array (
+						'data' => 'About',
+						'attr' => (object) array ('id' => 'about'),
+						'children' => array (
+							(object) array (
+								'data' => 'News',
+								'attr' => (object) array ('id' => 'news')
+							)
+						)
+					),
+					(object) array (
+						'data' => 'Contact us',
+						'attr' => (object) array ('id' => 'contact-us')
+					)
+				)
+			),
+			(object) array (
+				'data' => 'Français',
+				'attr' => (object) array ('id' => 'fr'),
+				'children' => array (
+					(object) array (
+						'data' => 'À propos',
+						'attr' => (object) array ('id' => 'a-propos')
+					),
+					(object) array (
+						'data' => 'Contactez-nous',
+						'attr' => (object) array ('id' => 'contactez-nous')
+					)
+				)
+			)
+		);
+		Link::nav ($nav);
+	}
+
+	function test_single_with_http_and_flat () {
+		Link::negotiation_method ('http');
+		Link::url_style ('flat');
+		$i18n = new I18n;
+		Link::i18n ($i18n);
+
+		$i18n->prefix = '';
+		Link::current ('index');
+		$expected = "<li class=\"current\"><a href=\"/index\">Home</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+
+		$i18n->prefix = '/fr';
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+
+		$expected = "<li><a href=\"/news\">News</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('news', 'News'));
+
+		Link::current ('news');
+		$expected = "<li class=\"current\"><a href=\"/news\">News</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('news', 'News'));
+
+		$expected = "<li class=\"active\"><a href=\"/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+	}
+
+	function test_single_with_http_and_nested () {
+		Link::negotiation_method ('http');
+		Link::url_style ('nested');
+		$i18n = new I18n;
+		Link::i18n ($i18n);
+
+		$i18n->prefix = '';
+		Link::current ('index');
+		$expected = "<li class=\"current\"><a href=\"/index\">Home</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+
+		$i18n->prefix = '/fr';
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+
+		$expected = "<li><a href=\"/en/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+
+		Link::current ('about');
+		$expected = "<li class=\"current\"><a href=\"/en/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+
+		$expected = "<li><a href=\"/en/about/news\">News</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('news', 'News'));
+
+		Link::current ('news');
+		$expected = "<li class=\"current\"><a href=\"/en/about/news\">News</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('news', 'News'));
+
+		$expected = "<li class=\"active\"><a href=\"/en/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+	}
+
+	function test_single_with_url_and_flat () {
+		Link::negotiation_method ('url');
+		Link::url_style ('flat');
+		$i18n = new I18n;
+		Link::i18n ($i18n);
+
+		$i18n->prefix = '';
+		Link::current ('index');
+		$expected = "<li class=\"current\"><a href=\"/index\">Home</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+		
+		$i18n->prefix = '/en';
+		$expected = "<li class=\"current\"><a href=\"/en/index\">Home</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+		// Note: This would have presumably forwarded to /{$i18n->language} in any case
+
+		$i18n->prefix = '';
+		$expected = "<li><a href=\"/en\">English</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('en', 'English'));
+
+		$i18n->prefix = '/en';
+		$expected = "<li><a href=\"/en\">English</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('en', 'English'));
+
+		$i18n->prefix = '';
+		$expected = "<li><a href=\"/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+
+		$i18n->prefix = '/en';
+		$expected = "<li><a href=\"/en/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+
+		$expected = "<li><a href=\"/en/news\">News</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('news', 'News'));
+	}
+
+	function test_single_with_url_and_nested () {
+		Link::negotiation_method ('url');
+		Link::url_style ('nested');
+		$i18n = new I18n;
+		Link::i18n ($i18n);
+
+		$i18n->prefix = '';
+		Link::current ('index');
+		$expected = "<li class=\"current\"><a href=\"/index\">Home</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+		
+		$i18n->prefix = '/en';
+		$expected = "<li class=\"current\"><a href=\"/index\">Home</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('index', 'Home'));
+		// Note: This would have presumably forwarded to /{$i18n->language} in any case
+
+		$i18n->prefix = '';
+		$expected = "<li><a href=\"/en\">English</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('en', 'English'));
+
+		$i18n->prefix = '/en';
+		$expected = "<li><a href=\"/en\">English</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('en', 'English'));
+
+		$i18n->prefix = '';
+		$expected = "<li><a href=\"/en/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+
+		$i18n->prefix = '/en';
+		$expected = "<li><a href=\"/en/about\">About</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('about', 'About'));
+
+		$expected = "<li><a href=\"/en/about/news\">News</a></li>\n";
+		$this->assertEquals ($expected, Link::single ('news', 'News'));
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/tests/LockTest.php elefant-elefant_1_3_3_beta/tests/LockTest.php
--- elefant-elefant_1_3_2_beta/tests/LockTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/LockTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,15 +1,12 @@
 <?php
 
-define ('ELEFANT_ENV', 'config');
-require_once ('lib/Functions.php');
-require_once ('lib/Autoloader.php');
-
 class LockTest extends PHPUnit_Framework_TestCase {
 	protected static $lock;
 
 	static function setUpBeforeClass () {
 		DB::open (array ('master' => true, 'driver' => 'sqlite', 'file' => ':memory:'));
-		DB::execute ('create table `lock` (
+		DB::execute ('drop table #prefix#lock');
+		DB::execute ('create table `#prefix#lock` (
 			id integer primary key,
 			user int not null,
 			resource varchar(72) not null,
@@ -26,6 +23,7 @@
 
 	static function tearDownAfterClass () {
 		User::$user = false;
+		DB::execute ('drop table #prefix#lock');
 	}
 
 	function test_construct () {
@@ -44,7 +42,7 @@
 	 */
 	function test_info () {
 		// Check the lock info
-		$info = DB::single ('select * from lock');
+		$info = DB::single ('select * from #prefix#lock');
 		$this->assertEquals (self::$lock->info (), $info);
 		$this->assertEquals ($info->user, 1);
 	}
@@ -66,7 +64,7 @@
 	 */
 	function test_update () {
 		// Get the lock info
-		$info = DB::single ('select * from lock');
+		$info = DB::single ('select * from #prefix#lock');
 
 		// Back to original user id
 		User::$user = (object) array ('id' => 1);
@@ -93,7 +91,7 @@
 		// Add a lock
 		$this->assertEquals (self::$lock->add (), 1);
 		$this->assertTrue (self::$lock->clear ());
-		$this->assertEquals (0, DB::shift ('select count(*) from lock'));
+		$this->assertEquals (0, DB::shift ('select count(*) from #prefix#lock'));
 	}
 
 	/**
@@ -103,7 +101,7 @@
 		// Add a lock
 		$this->assertEquals (self::$lock->add (), 1);
 		$this->assertTrue (self::$lock->clear_all ());
-		$this->assertEquals (0, DB::shift ('select count(*) from lock'));
+		$this->assertEquals (0, DB::shift ('select count(*) from #prefix#lock'));
 	}
 
 	/**
diff -urBNs elefant-elefant_1_3_2_beta/tests/ModelTest.php elefant-elefant_1_3_3_beta/tests/ModelTest.php
--- elefant-elefant_1_3_2_beta/tests/ModelTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/ModelTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,8 +1,5 @@
 <?php
 
-require_once ('lib/Functions.php');
-require_once ('lib/Autoloader.php');
-
 class Qwerty extends Model {
 	var $key = 'foo';
 }
@@ -424,12 +421,20 @@
 		// get his books
 		$books = $author->books ();
 		$this->assertEquals (2, count ($books));
-		$this->assertEquals ('Jamaican Me Crazy', $books[1]->name);
+		$this->assertEquals ('Jamaican Me Crazy', $books[0]->name);
 
 		// now get all authors from a book
 		$authors = $books[1]->authors ();
 		$this->assertEquals (2, count ($authors));
-		$this->assertEquals ('Frankie Bazzar', $authors[1]->name);
+		$this->assertEquals ('Frankie Bazzar', $authors[0]->name);
+	}
+
+	function test_table () {
+		$this->assertEquals ('cover', Cover::table ());
+	}
+
+	function test_key () {
+		$this->assertEquals ('id', Cover::key ());
 	}
 }
 
diff -urBNs elefant-elefant_1_3_2_beta/tests/MongoModelTest.php elefant-elefant_1_3_3_beta/tests/MongoModelTest.php
--- elefant-elefant_1_3_2_beta/tests/MongoModelTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/MongoModelTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,8 +1,5 @@
 <?php
 
-require_once ('lib/Functions.php');
-require_once ('lib/Autoloader.php');
-
 if (extension_loaded ('mongo')) {
 	class MTest extends MongoModel {
 		var $name = 'foo';
diff -urBNs elefant-elefant_1_3_2_beta/tests/NavigationAppTest.php elefant-elefant_1_3_3_beta/tests/NavigationAppTest.php
--- elefant-elefant_1_3_2_beta/tests/NavigationAppTest.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/tests/NavigationAppTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,90 @@
+<?php
+
+class NavigationAppTest extends AppTest {
+	static function setUpBeforeClass () {
+		parent::setUpBeforeClass ();
+
+		// backup navigation file
+		copy ('conf/navigation.json', 'cache/navigation.json');
+
+		// create a test navigation structure
+		file_put_contents (
+			'conf/navigation.json',
+			json_encode (
+				array (
+					array (
+						'data' => 'Home',
+						'attr' => array ('id' => 'index')
+					),
+					array (
+						'data' => 'Other',
+						'attr' => array ('id' => 'other')
+					),
+					array (
+						'data' => 'English',
+						'attr' => array ('id' => 'en'),
+						'children' => array (
+							array (
+								'data' => 'About',
+								'attr' => array ('id' => 'about')
+							),
+							array (
+								'data' => 'Contact us',
+								'attr' => array ('id' => 'contact-us')
+							)
+						)
+					),
+					array (
+						'data' => 'Français',
+						'attr' => array ('id' => 'fr'),
+						'children' => array (
+							array (
+								'data' => 'À propos',
+								'attr' => array ('id' => 'a-propos')
+							),
+							array (
+								'data' => 'Contactez-nous',
+								'attr' => array ('id' => 'contactez-nous')
+							)
+						)
+					)
+				)
+			)
+		);
+	}
+
+	static function tearDownAfterClass () {
+		parent::tearDownAfterClass ();
+
+		// restore backed up navigation file
+		copy ('cache/navigation.json', 'conf/navigation.json');
+	}
+
+	public function test_top () {
+		Link::reset ();
+		Link::current ('index');
+		$res = $this->get ('navigation/top');
+		$this->assertContains ('<li class="current"><a href="/index">Home', $res);
+		$this->assertContains ('<li><a href="/other">Other', $res);
+		
+		Link::current ('other');
+		$res = $this->get ('navigation/top');
+		$this->assertContains ('<li><a href="/index">Home', $res);
+		$this->assertContains ('<li class="current"><a href="/other">Other', $res);
+	}
+
+	public function test_section () {
+		Link::reset ();
+		Link::current ('about');
+		$res = $this->get ('navigation/section', array ('section' => 'en'));
+		$this->assertContains ('<li class="current"><a href="/about">About', $res);
+		$this->assertContains ('<li><a href="/contact-us">Contact us', $res);
+		
+		Link::current ('a-propos');
+		$res = $this->get ('navigation/section', array ('section' => 'fr'));
+		$this->assertContains ('<li class="current"><a href="/a-propos">À propos', $res);
+		$this->assertContains ('<li><a href="/contactez-nous">Contactez-nous', $res);
+	}
+}
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/tests/NavigationTest.php elefant-elefant_1_3_3_beta/tests/NavigationTest.php
--- elefant-elefant_1_3_2_beta/tests/NavigationTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/NavigationTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class NavigationTest extends PHPUnit_Framework_TestCase {
 	protected static $n;
 	protected static $about_node;
diff -urBNs elefant-elefant_1_3_2_beta/tests/PageTest.php elefant-elefant_1_3_3_beta/tests/PageTest.php
--- elefant-elefant_1_3_2_beta/tests/PageTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/PageTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class PageTest extends PHPUnit_Framework_TestCase {
 	function test_titles () {
 		$p = new Page;
diff -urBNs elefant-elefant_1_3_2_beta/tests/RestfulTest.php elefant-elefant_1_3_3_beta/tests/RestfulTest.php
--- elefant-elefant_1_3_2_beta/tests/RestfulTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/RestfulTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class MockController {
 	public $data;
 
diff -urBNs elefant-elefant_1_3_2_beta/tests/TemplateTest.php elefant-elefant_1_3_3_beta/tests/TemplateTest.php
--- elefant-elefant_1_3_2_beta/tests/TemplateTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/TemplateTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class TemplateTest extends PHPUnit_Framework_TestCase {
 	function test_replace_vars () {
 		$t = new Template ('UTF-8');
@@ -22,7 +20,7 @@
 	function test_replace_strings () {
 		$t = new Template ('UTF-8');
 
-		$this->assertEquals ($t->replace_strings ('Don\'t'), '<?php echo i18n_get (\'Don\\\'t\'); ?>');
+		$this->assertEquals ($t->replace_strings ('Don\'t'), '<?php echo __ (\'Don\\\'t\'); ?>');
 	}
 
 	function test_replace_blocks () {
@@ -59,6 +57,10 @@
 
 		$this->assertEquals ($t->replace_includes ('app/handler'), '<?php echo $this->controller->run (\'app/handler\', array ()); ?>');
 		$this->assertEquals ($t->replace_includes ('app/handler?foo=bar&asdf=qwerty'), '<?php echo $this->controller->run (\'app/handler\', array (\'foo\' => \'bar\', \'asdf\' => \'qwerty\')); ?>');
+
+		// Test sub-expressions
+		$this->assertEquals ($t->replace_includes ('app/handler?foo=[bar]'), '<?php echo $this->controller->run (\'app/handler\', array (\'foo\' => Template::sanitize ($data->bar, \'UTF-8\'))); ?>');
+		$this->assertEquals ($t->replace_includes ('app/handler?foo=[bar]&bar=a[sd]f'), '<?php echo $this->controller->run (\'app/handler\', array (\'foo\' => Template::sanitize ($data->bar, \'UTF-8\'), \'bar\' => \'a\' . Template::sanitize ($data->sd, \'UTF-8\') . \'f\')); ?>');
 	}
 
 	function test_parse_template () {
@@ -69,7 +71,7 @@
 			. '<?php if ($data->loop_index == 1) { ?><?php echo $data->loop_value; ?>'
 			. '<?php } ?><?php } ?>';
 		$this->assertEquals ($t->parse_template ($data), $out);
-		$this->assertEquals ($t->parse_template ('{" Hello "}'), '<?php echo i18n_get (\'Hello\'); ?>');
+		$this->assertEquals ($t->parse_template ('{" Hello "}'), '<?php echo __ (\'Hello\'); ?>');
 	}
 
 	function test_sanitize () {
diff -urBNs elefant-elefant_1_3_2_beta/tests/URLifyTest.php elefant-elefant_1_3_3_beta/tests/URLifyTest.php
--- elefant-elefant_1_3_2_beta/tests/URLifyTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/URLifyTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class URLifyTest extends PHPUnit_Framework_TestCase {
 	function test_downcode () {
 		$this->assertEquals ('  J\'etudie le francais  ', URLify::downcode ('  J\'étudie le français  '));
diff -urBNs elefant-elefant_1_3_2_beta/tests/UserTest.php elefant-elefant_1_3_3_beta/tests/UserTest.php
--- elefant-elefant_1_3_2_beta/tests/UserTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/UserTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,11 +1,9 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class UserTest extends PHPUnit_Framework_TestCase {
 	static function setUpBeforeClass () {
 		DB::open (array ('master' => true, 'driver' => 'sqlite', 'file' => ':memory:'));
-		DB::execute ('create table user (
+		DB::execute ('create table #prefix#user (
 			id integer primary key,
 			email char(72) unique not null,
 			password char(128) not null,
@@ -71,6 +69,15 @@
 			User::$user->data['userdata']
 		);
 	}
+
+	function test_current () {
+		$user = User::$user;
+		$u2 = User::current ();
+		$this->assertEquals ($user, $u2);
+		User::current ($u2);
+		$u3 = User::current ();
+		$this->assertEquals ($user, $u3);
+	}
 }
 
 ?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/tests/ValidatorTest.php elefant-elefant_1_3_3_beta/tests/ValidatorTest.php
--- elefant-elefant_1_3_2_beta/tests/ValidatorTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/ValidatorTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class ValidatorTest extends PHPUnit_Framework_TestCase {
 	protected $backupGlobalsBlacklist = array ('user');
 
diff -urBNs elefant-elefant_1_3_2_beta/tests/VersionsTest.php elefant-elefant_1_3_3_beta/tests/VersionsTest.php
--- elefant-elefant_1_3_2_beta/tests/VersionsTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/VersionsTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class Foobar extends Model {}
 
 class VersionsTest extends PHPUnit_Framework_TestCase {
@@ -12,7 +10,7 @@
 	static function setUpBeforeClass () {
 		DB::open (array ('master' => true, 'driver' => 'sqlite', 'file' => ':memory:'));
 		DB::execute ('create table foobar (id int not null, name char(32) not null)');
-		if (! DB::execute ('create table versions (
+		if (! DB::execute ('create table #prefix#versions (
 			id integer primary key,
 			class char(72) not null,
 			pkey char(72) not null,
@@ -22,10 +20,10 @@
 		)')) {
 			die ('Failed to create versions table');
 		}
-		if (! DB::execute ('create index versions_class on versions (class, pkey, ts)')) {
+		if (! DB::execute ('create index #prefix#versions_class on #prefix#versions (class, pkey, ts)')) {
 			die ('Failed to create versions_class index');
 		}
-		if (! DB::execute ('create index versions_user on versions (user, ts)')) {
+		if (! DB::execute ('create index #prefix#versions_user on #prefix#versions (user, ts)')) {
 			die ('Failed to create versions_user index');
 		}
 		User::$user = false;
@@ -40,7 +38,7 @@
 		self::$foo->put ();
 
 		self::$v = Versions::add (self::$foo);
-		$this->assertEquals (DB::shift ('select count(*) from versions'), 1);
+		$this->assertEquals (DB::shift ('select count(*) from #prefix#versions'), 1);
 		$this->assertEquals (self::$v->class, 'Foobar');
 		$this->assertEquals (self::$v->pkey, 1);
 		$this->assertEquals (self::$v->user, 0);
@@ -63,7 +61,7 @@
 		self::$foo->put ();
 
 		$v = Versions::add (self::$foo);
-		$this->assertEquals (DB::shift ('select count(*) from versions'), 2);
+		$this->assertEquals (DB::shift ('select count(*) from #prefix#versions'), 2);
 
 		$modified = Versions::diff (self::$foo2, self::$foo);
 		$this->assertEquals ($modified[0], 'name');
@@ -130,7 +128,7 @@
 	 */
 	function test_recent_user () {
 		// recent with user
-		DB::execute ('update versions set user = 1');
+		DB::execute ('update #prefix#versions set user = 1');
 		$recent = Versions::recent (1);
 		$this->assertEquals (count ($recent), 2);
 	}
diff -urBNs elefant-elefant_1_3_2_beta/tests/ViewTest.php elefant-elefant_1_3_3_beta/tests/ViewTest.php
--- elefant-elefant_1_3_2_beta/tests/ViewTest.php	2012-09-13 08:58:34.000000000 -0500
+++ elefant-elefant_1_3_3_beta/tests/ViewTest.php	2013-03-20 13:48:44.000000000 -0500
@@ -1,7 +1,5 @@
 <?php
 
-require_once ('lib/Autoloader.php');
-
 class TemplateMock {
 	public function render ($template, $data = array ()) {
 		$data = is_object ($data) ? $data : (object) $data;
diff -urBNs elefant-elefant_1_3_2_beta/tests/bootstrap.php elefant-elefant_1_3_3_beta/tests/bootstrap.php
--- elefant-elefant_1_3_2_beta/tests/bootstrap.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/tests/bootstrap.php	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1,7 @@
+<?php
+
+define ('ELEFANT_ENV', 'test');
+require_once ('lib/Functions.php');
+require_once ('lib/Autoloader.php');
+
+?>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_2_beta/tests/travis_conf.ini elefant-elefant_1_3_3_beta/tests/travis_conf.ini
--- elefant-elefant_1_3_2_beta/tests/travis_conf.ini	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_3_beta/tests/travis_conf.ini	2013-03-20 13:48:44.000000000 -0500
@@ -0,0 +1 @@
+extension = "mongo.so"
Files elefant-elefant_1_3_2_beta/tests/zombie/admin-login-failure.coffee and elefant-elefant_1_3_3_beta/tests/zombie/admin-login-failure.coffee are identical
Files elefant-elefant_1_3_2_beta/tests/zombie/admin-login-failure.js and elefant-elefant_1_3_3_beta/tests/zombie/admin-login-failure.js are identical
Files elefant-elefant_1_3_2_beta/tests/zombie/admin-login-success.coffee and elefant-elefant_1_3_3_beta/tests/zombie/admin-login-success.coffee are identical
Files elefant-elefant_1_3_2_beta/tests/zombie/admin-login-success.js and elefant-elefant_1_3_3_beta/tests/zombie/admin-login-success.js are identical
Files elefant-elefant_1_3_2_beta/tests/zombie/homepage.coffee and elefant-elefant_1_3_3_beta/tests/zombie/homepage.coffee are identical
Files elefant-elefant_1_3_2_beta/tests/zombie/homepage.js and elefant-elefant_1_3_3_beta/tests/zombie/homepage.js are identical
