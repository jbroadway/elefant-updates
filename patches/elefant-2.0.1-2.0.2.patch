Files elefant-elefant_2_0_1_stable/.gitattributes and elefant-elefant_2_0_2_stable/.gitattributes are identical
Files elefant-elefant_2_0_1_stable/.gitignore and elefant-elefant_2_0_2_stable/.gitignore are identical
Files elefant-elefant_2_0_1_stable/.htaccess and elefant-elefant_2_0_2_stable/.htaccess are identical
Files elefant-elefant_2_0_1_stable/.travis.yml and elefant-elefant_2_0_2_stable/.travis.yml are identical
Files elefant-elefant_2_0_1_stable/LICENSE and elefant-elefant_2_0_2_stable/LICENSE are identical
Files elefant-elefant_2_0_1_stable/README.md and elefant-elefant_2_0_2_stable/README.md are identical
Files elefant-elefant_2_0_1_stable/apps/.htaccess and elefant-elefant_2_0_2_stable/apps/.htaccess are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/acl.php and elefant-elefant_2_0_2_stable/apps/admin/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/config.php and elefant-elefant_2_0_2_stable/apps/admin/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/embed.php and elefant-elefant_2_0_2_stable/apps/admin/conf/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/tools.php and elefant-elefant_2_0_2_stable/apps/admin/conf/tools.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/update/1.3.10_users_mysql.sql and elefant-elefant_2_0_2_stable/apps/admin/conf/update/1.3.10_users_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/update/1.3.10_users_pgsql.sql and elefant-elefant_2_0_2_stable/apps/admin/conf/update/1.3.10_users_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/update/1.3.10_users_sqlite.sql and elefant-elefant_2_0_2_stable/apps/admin/conf/update/1.3.10_users_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/update/extended_fields_mysql.sql and elefant-elefant_2_0_2_stable/apps/admin/conf/update/extended_fields_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/update/extended_fields_pgsql.sql and elefant-elefant_2_0_2_stable/apps/admin/conf/update/extended_fields_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/admin/conf/update/extended_fields_sqlite.sql and elefant-elefant_2_0_2_stable/apps/admin/conf/update/extended_fields_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/960.css and elefant-elefant_2_0_2_stable/apps/admin/css/960.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/add.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/add.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/arrow-down.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/arrow-down.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/arrow-right.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/arrow-right.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/blank.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/blank.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/delete.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/delete.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/drag_drop_up_down.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/drag_drop_up_down.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/dynamic-icon.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/dynamic-icon.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/edit.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/edit.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/editable-photo.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/editable-photo.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/editable-sprite-dark.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/editable-sprite-dark.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/editable-sprite-violett.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/editable-sprite-violett.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/editable-sprite.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/editable-sprite.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/elefant_logo.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/elefant_logo.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/elefant_logo_login.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/elefant_logo_login.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/file.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/file.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/folder.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/folder.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/lock.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/lock.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/pipe.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/pipe.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/spacer.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/spacer.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/tools-arrow-hover.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/tools-arrow-hover.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/tools-arrow.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/tools-arrow.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/tooltip-top.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/tooltip-top.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/undo-icon.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/undo-icon.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/user_profile.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/user_profile.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/admin/versions.png and elefant-elefant_2_0_2_stable/apps/admin/css/admin/versions.png are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/css/admin.css elefant-elefant_2_0_2_stable/apps/admin/css/admin.css
--- elefant-elefant_2_0_1_stable/apps/admin/css/admin.css	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/css/admin.css	2017-10-16 12:12:51.000000000 -0500
@@ -224,7 +224,7 @@
 	}
 
 .form {
-	width: 650px;
+	width: 720px;
 	margin: auto;
 }
 
Files elefant-elefant_2_0_1_stable/apps/admin/css/datewidget.css and elefant-elefant_2_0_2_stable/apps/admin/css/datewidget.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/debugger.css and elefant-elefant_2_0_2_stable/apps/admin/css/debugger.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/dynamicobjects.css and elefant-elefant_2_0_2_stable/apps/admin/css/dynamicobjects.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/editable.css and elefant-elefant_2_0_2_stable/apps/admin/css/editable.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/css/font-awesome.css and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/css/font-awesome.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/css/font-awesome.min.css and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/css/font-awesome.min.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/font/FontAwesome.otf and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/font/FontAwesome.otf are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.eot and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.eot are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.svg and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.svg are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.ttf and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.ttf are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.woff and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/font/fontawesome-webfont.woff are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/fonts/FontAwesome.otf and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/fonts/FontAwesome.otf are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.eot and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.eot are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.svg and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.svg are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.ttf and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.ttf are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.woff and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/fonts/fontawesome-webfont.woff are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/bordered-pulled.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/bordered-pulled.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/core.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/core.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/fixed-width.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/fixed-width.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/font-awesome.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/font-awesome.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/icons.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/icons.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/larger.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/larger.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/list.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/list.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/mixins.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/mixins.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/path.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/path.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/rotated-flipped.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/rotated-flipped.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/spinning.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/spinning.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/stacked.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/stacked.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/less/variables.less and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/less/variables.less are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_bordered-pulled.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_bordered-pulled.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_core.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_core.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_fixed-width.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_fixed-width.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_icons.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_icons.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_larger.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_larger.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_list.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_list.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_mixins.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_mixins.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_path.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_path.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_rotated-flipped.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_rotated-flipped.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_spinning.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_spinning.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_stacked.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_stacked.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/_variables.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/_variables.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/font-awesome/scss/font-awesome.scss and elefant-elefant_2_0_2_stable/apps/admin/css/font-awesome/scss/font-awesome.scss are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/icon-conditionalforward.png and elefant-elefant_2_0_2_stable/apps/admin/css/icon-conditionalforward.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/icon-html.png and elefant-elefant_2_0_2_stable/apps/admin/css/icon-html.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/jquery.grid.css and elefant-elefant_2_0_2_stable/apps/admin/css/jquery.grid.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/jquery.jgrowl.css and elefant-elefant_2_0_2_stable/apps/admin/css/jquery.jgrowl.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/jquery.notifier.css and elefant-elefant_2_0_2_stable/apps/admin/css/jquery.notifier.css are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/css/minimal-grid.css elefant-elefant_2_0_2_stable/apps/admin/css/minimal-grid.css
--- elefant-elefant_2_0_1_stable/apps/admin/css/minimal-grid.css	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/css/minimal-grid.css	2017-10-16 12:12:51.000000000 -0500
@@ -99,6 +99,17 @@
 .e-no-padding-left { padding-left: 0; }
 .e-no-padding-right { padding-right: 0; }
 
+/* redactor/plugins/alignment.css */
+.text-center {
+    text-align: center;
+}
+.text-right {
+    text-align: right;
+}
+.text-justify {
+    text-align: justify;
+}
+
 /* desktop */
 @media (min-width: 992px) {
 	.e-row {
Files elefant-elefant_2_0_1_stable/apps/admin/css/minimal-grid.html and elefant-elefant_2_0_2_stable/apps/admin/css/minimal-grid.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/modal.css and elefant-elefant_2_0_2_stable/apps/admin/css/modal.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/reset.css and elefant-elefant_2_0_2_stable/apps/admin/css/reset.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/text.css and elefant-elefant_2_0_2_stable/apps/admin/css/text.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/css/top-bar.css and elefant-elefant_2_0_2_stable/apps/admin/css/top-bar.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/forms/add.php and elefant-elefant_2_0_2_stable/apps/admin/forms/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/forms/edit.php and elefant-elefant_2_0_2_stable/apps/admin/forms/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/add.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/api.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/api.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/bgsave.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/bgsave.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/cancel.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/cancel.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/compare.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/compare.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/conditionalforward.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/conditionalforward.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/delete.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/edit.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/editable.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/editable.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/embed/filters.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/embed/filters.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/embed.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/error.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/error.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/extended/api.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/extended/api.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/extended.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/extended.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/forward.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/forward.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/head/links.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/head/links.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/head/updates.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/head/updates.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/head.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/head.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/html.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/html.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/index.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/page.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/page.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/pages.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/pages.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/preview.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/preview.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/restore.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/restore.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/settings.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/toolbar.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/toolbar.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/upgrade.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/upgrade.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/analytics.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/analytics.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/async.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/async.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/codemirror.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/codemirror.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/dates.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/dates.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/datewidget.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/datewidget.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/dynamicobjects.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/dynamicobjects.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/editable.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/editable.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/editbuttons.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/editbuttons.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/extended.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/extended.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/fontawesome.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/fontawesome.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/i18n.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/i18n.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/minimal-grid.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/minimal-grid.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/modal.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/modal.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/notifier.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/notifier.php are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/handlers/util/redactor.php elefant-elefant_2_0_2_stable/apps/admin/handlers/util/redactor.php
--- elefant-elefant_2_0_1_stable/apps/admin/handlers/util/redactor.php	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/handlers/util/redactor.php	2017-10-16 12:12:51.000000000 -0500
@@ -20,7 +20,7 @@
  *     });
  */
 
-$page->add_style ('/apps/admin/js/redactor/redactor.css');
+$page->add_style ('/apps/admin/js/redactor/redactor.min.css');
 $page->add_style ('/apps/admin/js/redactor/custom.css');
 
 $page->add_script ('/apps/admin/js/redactor/redactor.min.js');
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/util/search.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/util/search.php are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/handlers/util/wysiwyg.php elefant-elefant_2_0_2_stable/apps/admin/handlers/util/wysiwyg.php
--- elefant-elefant_2_0_1_stable/apps/admin/handlers/util/wysiwyg.php	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/handlers/util/wysiwyg.php	2017-10-16 12:12:51.000000000 -0500
@@ -29,14 +29,17 @@
 $this->run ('admin/util/redactor');
 
 $page->add_style ('/js/jquery-ui/jquery-ui.css');
+$page->add_style ('/apps/admin/js/redactor/plugins/alignment.css');
 
 $page->add_script ('/js/jquery-ui/jquery-ui.min.js');
 $page->add_script ('/js/jquery.quickpager.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/alignment.js');
+//$page->add_script ('/apps/admin/js/redactor/plugins/fullscreen.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/properties.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/source.js');
 $page->add_script ('/apps/admin/js/redactor/plugins/table.js');
-$page->add_script ('/apps/admin/js/redactor/plugins/filebrowser.js');
-$page->add_script ('/apps/admin/js/redactor/plugins/imagebrowser.js');
-$page->add_script ('/apps/admin/js/redactor/plugins/links.js');
-$page->add_script ('/apps/admin/js/redactor/plugins/dynamic.js');
+//$page->add_script ('/apps/admin/js/redactor/plugins/textdirection.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/undo.js');
 
 $page->add_script (I18n::export (
 	'Dynamic Objects',
@@ -76,15 +79,15 @@
 	$page->add_script ('/apps/admin/js/redactor/plugins/dynamic.js');
 
 	$data['buttons'] = array (
-		'formatting', 'bold', 'italic', 'deleted', 'alignment', 'horizontalrule',
-		'unorderedlist', 'orderedlist', 'outdent', 'indent', 'links', 'imagebrowser',
-		'filebrowser', 'table', 'undo', 'html', 'dynamic'
+		'format', 'bold', 'italic', 'deleted', 'alignment', 'horizontalrule',
+		'lists', 'outdent', 'indent', 'undo'/*, 'links', 'imagebrowser',
+		'filebrowser'*/, 'table', 'undo', 'source', 'dynamic'
 	);
 } else {
 	$data['buttons'] = array (
-		'formatting', 'bold', 'italic', 'deleted', 'alignment', 'horizontalrule',
-		'unorderedlist', 'orderedlist', 'outdent', 'indent', 'link',
-		'table', 'undo', 'html'
+		'format', 'bold', 'italic', 'deleted', 'alignment', 'horizontalrule',
+		'lists', 'outdent', 'indent', 'link',
+		'table', 'undo', 'source'
 	);
 }
 
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/validator.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/validator.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/versions.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/versions.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/handlers/wysiwyg/links.php and elefant-elefant_2_0_2_stable/apps/admin/handlers/wysiwyg/links.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/async/core.js and elefant-elefant_2_0_2_stable/apps/admin/js/async/core.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/async/helper.events.calendar.js and elefant-elefant_2_0_2_stable/apps/admin/js/async/helper.events.calendar.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/datewidget.js and elefant-elefant_2_0_2_stable/apps/admin/js/datewidget.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/editable.js and elefant-elefant_2_0_2_stable/apps/admin/js/editable.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/extended.js and elefant-elefant_2_0_2_stable/apps/admin/js/extended.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/handlebars-1.0.rc.1.js and elefant-elefant_2_0_2_stable/apps/admin/js/handlebars-1.0.rc.1.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery-ui.min.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery-ui.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.autogrow.min.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.autogrow.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.crud_api.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.crud_api.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.dynamicobjects.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.dynamicobjects.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.i18n.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.i18n.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.jeditable.autogrow.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.jeditable.autogrow.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.jeditable.deletable.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.jeditable.deletable.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.jeditable.min.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.jeditable.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.jgrowl.min.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.jgrowl.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.notifier.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.notifier.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.search.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.search.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.simplemodal.1.4.4.min.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.simplemodal.1.4.4.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/jquery.triggers.js and elefant-elefant_2_0_2_stable/apps/admin/js/jquery.triggers.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/modal.js and elefant-elefant_2_0_2_stable/apps/admin/js/modal.js are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_content.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_content.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_content.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_content.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,377 @@
+.redactor-styles {
+
+	font-family: $content-font-family;
+	font-size: $font-size;
+	line-height: $base-line;
+	color: $body-color;
+
+	&[dir="rtl"] {
+		direction: rtl;
+		unicode-bidi: embed;
+
+		& ul,
+		& ol {
+			& li {
+				text-align: right;
+			}
+		}
+		ul,
+		ol,
+		ul ul,
+		ol ol,
+		ul ol,
+		ol ul {
+			margin: 0 $base-line 0 0;
+		}
+	}
+
+	@media (max-width: $breakpoint-small) {
+	    font-size: 16px;
+	}
+
+	// links
+	a {
+		color: $link-color;
+		&:focus,
+		&:hover {
+			color: $link-hover-color;
+		}
+	}
+
+	// headings
+	h1,
+	h2,
+	h3,
+	h4,
+	h5,
+	h6 {
+		font-family: $headings-font-family;
+		font-weight: bold;
+		color: $headings-color;
+		text-rendering: optimizeLegibility;
+		margin: 0;
+		padding: 0;
+		margin-bottom: 12px;
+		&:empty {
+    		min-height: $base-line;
+		}
+	}
+	h1 {
+		font-size: $font-size-h1;
+		line-height: 44px;
+	}
+	h2 {
+		font-size: $font-size-h2;
+		line-height: 36px;
+	}
+	h3 {
+		font-size: $font-size-h3;
+		line-height: 32px;
+	}
+	h4 {
+		font-size: $font-size-h4;
+		line-height: $base-line;
+	}
+	h5 {
+		font-size: $font-size-h5;
+		line-height: $base-line;
+	}
+	h6 {
+		font-size: $font-size-h6;
+		line-height: $base-line;
+	}
+
+
+	// Line height and margin
+	p,
+	ul,
+	ol,
+	dl,
+	blockquote,
+	hr,
+	pre,
+	table,
+	figure,
+	address {
+		padding: 0;
+		margin: 0;
+	}
+	p,
+	blockquote {
+        &:empty {
+    		min-height: $base-line;
+		}
+	}
+    // Top Space
+    p,
+    ul,
+    ol,
+    dl,
+    blockquote,
+    hr,
+    pre,
+    table,
+    form,
+    figure {
+    	+ h2,
+    	+ h3,
+    	+ h4,
+    	+ h5,
+    	+ h6 {
+    		margin-top: $base-line;
+    	}
+    }
+	ul,
+	ol,
+	ul ul,
+	ol ol,
+	ul ol,
+	ol ul {
+		margin: 0 0 0 $base-line;
+	}
+	ul li,
+	ol li {
+		text-align: left;
+	}
+	ol ol li {
+		list-style-type: lower-alpha;
+	}
+	ol ol ol li {
+		list-style-type: lower-roman;
+	}
+	p,
+	ul,
+	ol,
+	dl,
+	blockquote,
+	hr,
+	pre,
+	table,
+	figure,
+	address {
+		margin-bottom: 16px;
+	}
+
+	// quote
+	blockquote {
+		position: relative;
+		font-style: italic;
+		color: rgba(0, 0, 0, .6);
+		& cite {
+			font-size: 80%;
+		}
+	}
+
+	@media (min-width: $breakpoint-small) {
+
+		blockquote {
+			padding-left: $base-line;
+			border-left: 1px solid rgba(0, 0, 0, .1);
+		}
+
+	}
+
+
+	// address
+	address {
+		font-style: normal;
+	}
+
+	// definition list
+	dl dt {
+		font-weight: bold;
+	}
+	dd {
+		margin-left: $base-line;
+	}
+
+	// text-level
+	cite {
+		color: rgba(0, 0, 0, .5);
+		font-style: italic;
+	}
+	s,
+	del {
+		text-decoration: line-through;
+	}
+	abbr[title],
+	dfn[title] {
+		border-bottom: 1px dotted #000;
+		cursor: help;
+	}
+	strong,
+	b {
+		font-weight: bold;
+	}
+	em,
+	i {
+		font-style: italic;
+	}
+	sub,
+	sup {
+		font-size: 10px;
+		line-height: 0;
+		position: relative;
+		margin-left: .2rem;
+	}
+	sup {
+		top: -.4rem;
+	}
+	sub {
+		bottom: -.2rem;
+	}
+	strong, b, em, i, sup, sub, u, ins {
+    	&:empty {
+            display: inline-block;
+            min-width: 1px;
+            min-height: 1rem;
+		}
+	}
+	figcaption {
+		margin: 4px 0;
+		font-size: 12px;
+		font-style: italic;
+		text-align: left;
+	}
+	ins,
+	u {
+		text-decoration: underline;
+	}
+	mark {
+		background-color: $mark-background-color;
+		color: #000;
+		text-decoration: none;
+	}
+
+	// сode
+	pre,
+	code,
+	kbd,
+	samp,
+	var,
+	output {
+		font-size: 90%;
+		font-style: normal;
+		font-family: $monospace-font-family;
+	}
+	pre {
+		margin-top: 16px;
+		font-size: 90%;
+		line-height: $base-line;
+		color: rgba(0, 0, 0, .75);
+		overflow: auto;
+		background: rgba(0, 0, 0, .03);
+		padding: 16px 20px;
+		word-wrap: normal;
+	}
+	mark,
+	code,
+	samp,
+	kbd {
+		padding: 2px 4px 1px 4px;
+		display: inline-block;
+		line-height: 1;
+		border-radius: 3px;
+	}
+	code {
+		background: $code-background-color;
+	}
+	pre code {
+		font-size: 100%;
+		border: none;
+		padding: 0;
+		background: none;
+		line-height: $base-line;
+	}
+	var {
+		color: rgba(0, 0, 0, .5);
+	}
+	samp {
+		background: #46a9fc;
+		color: rgba(255, 255, 255, .9);
+	}
+	kbd {
+		background: #000;
+		color: rgba(255, 255, 255, .85);
+		white-space: nowrap;
+	}
+
+
+	// Normalize horizontal line
+	hr {
+		display: block;
+		box-sizing: content-box;
+		height: 1px;
+		border: 0;
+		border-top: 1px solid rgba(0, 0, 0, .1);
+	}
+
+	// Responsive media
+	img,
+	video,
+	audio,
+	embed,
+	object {
+		max-width: 100%;
+	}
+	img,
+	video,
+	embed,
+	object {
+		height: auto;
+	}
+	embed,
+	object {
+	    height: 100%;
+	}
+	img {
+		vertical-align: middle;
+		-ms-interpolation-mode: bicubic;
+	}
+
+	// tables
+	table {
+		border-collapse: collapse;
+		max-width: 100%;
+		width: 100%;
+		empty-cells: show;
+
+		caption {
+			text-transform: uppercase;
+			padding: 0;
+			color: rgba(0, 0, 0, .5);
+			font-size: 11px;
+		}
+
+		th,
+		td {
+			border: 1px solid #eee;
+			padding: 16px;
+			padding-bottom: 15px;
+		}
+
+		tfoot th,
+		tfoot td {
+			color: rgba(0, 0, 0, .5);
+		}
+	}
+
+
+	// Responsive embedded objects
+	& .video-container {
+		height: 0;
+		padding-bottom: 56.25%; // ratio 16:9
+		position: relative;
+		margin-bottom: 16px;
+		& iframe,
+		& object,
+		& embed {
+			position: absolute;
+			top: 0;
+			left: 0;
+			width: 100% !important;
+			height: 100% !important;
+		}
+	}
+
+}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_dropdown.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_dropdown.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_dropdown.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_dropdown.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,161 @@
+// ------------------------------------------------------------------
+//
+// DROPDOWN
+//
+// 01. Base
+// 02. InlineFormat
+// 03. BlockFormat
+//
+// ------------------------------------------------------------------
+
+// =Base
+// ------------------------------------------------------------------
+.redactor-dropdown {
+
+    font-family: $ui-font-family;
+	min-width: 220px;
+	max-height: 254px;
+	color: #000;
+	margin: 0;
+	padding: 0;
+	font-size: 14px;
+	background: #fff;
+	box-shadow: 0 5px 20px rgba(0, 0, 0, .2);
+	overflow: auto;
+	list-style: none;
+}
+.redactor-dropdown li {
+
+	border-bottom: 1px solid rgba(0, 0, 0, .07);
+
+	&:last-child {
+		border-bottom: none;
+	}
+	&:hover {
+		background-color: #3d79f2;
+		& a {
+			color: #fff !important;
+			text-decoration: none;
+		}
+	}
+    &.redactor-dropdown-link-inactive {
+
+        background: none;
+
+    	& a,
+        & a:hover {
+            background: none;
+            cursor: default;
+            color: #000 !important;
+            opacity: 0.4;
+            background: none;
+        }
+    }
+}
+.redactor-dropdown a {
+
+	display: block;
+	padding: 12px 10px;
+	color: #000;
+	text-decoration: none;
+
+	& span {
+		padding: 2px 4px 1px 4px;
+		display: inline-block;
+		border-radius: 3px;
+		line-height: 1;
+	}
+	&:focus {
+		outline: none;
+	}
+	&.selected {
+		background-color: #000;
+		color: #fff;
+	}
+	&.redactor-dropdown-link-selected {
+		color:#fff;
+		background:#000;
+	}
+}
+
+
+// InlineFormat
+// ------------------------------------------------------------------
+.redactor-dropdown-box-inline {
+
+	& .redactor-dropdown-marked span {
+		background-color: $mark-background-color;
+		color: #000;
+		text-decoration: none;
+	}
+	& .redactor-dropdown-code span {
+		font-family: $monospace-font-family;
+		background: $code-background-color;
+	}
+	& .redactor-dropdown-sample span {
+		font-family: $monospace-font-family;
+		background: #46a9fc;
+		color: rgba(255, 255, 255, .9);
+	}
+	& .redactor-dropdown-variable span {
+		font-family: $monospace-font-family;
+		color: rgba(0, 0, 0, .5);
+	}
+	& .redactor-dropdown-shortcut span {
+		font-family: $monospace-font-family;
+		background: #000;
+		color: rgba(255, 255, 255, .85);
+		white-space: nowrap;
+	}
+	& .redactor-dropdown-cite span {
+		color: rgba(0, 0, 0, .5);
+		font-style: italic;
+	}
+	& .redactor-dropdown-sup span,
+	& .redactor-dropdown-sub span {
+		font-size: 12px;
+	}
+
+}
+
+
+// BlockFormat
+// ------------------------------------------------------------------
+.redactor-dropdown-box-format {
+	& .redactor-dropdown-blockquote {
+		color: rgba(0, 0, 0, .4);
+		font-style: italic;
+	}
+	& .redactor-dropdown-pre {
+		font-family: monospace, sans-serif;
+	}
+	& .redactor-dropdown-h1,
+	& .redactor-dropdown-h2,
+	& .redactor-dropdown-h3,
+	& .redactor-dropdown-h4,
+	& .redactor-dropdown-h5,
+	& .redactor-dropdown-h6 {
+		line-height: $base-line;
+		font-weight: bold
+	}
+	& .redactor-dropdown-h1 {
+		font-size: $font-size-h1;
+		line-height: 32px;
+	}
+	& .redactor-dropdown-h2 {
+		font-size: $font-size-h2;
+		line-height: 32px;
+	}
+	& .redactor-dropdown-h3 {
+		font-size: $font-size-h3;
+	}
+	& .redactor-dropdown-h4 {
+		font-size: $font-size-h4;
+	}
+	& .redactor-dropdown-h5 {
+		font-size: $font-size-h5;
+	}
+	& .redactor-dropdown-h6 {
+		font-size: $font-size-h6;
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_icons.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_icons.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_icons.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_icons.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,144 @@
+@font-face {
+  font-family: 'Redactor';
+  src: url("data:application/x-font-ttf;charset=utf-8;base64,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") format('truetype');
+  font-weight: normal;
+  font-style: normal;
+}
+
+[class^="re-icon-"], [class*=" re-icon-"] {
+  /* use !important to prevent issues with browser extensions that change fonts */
+  font-family: 'Redactor' !important;
+  speak: none;
+  font-style: normal;
+  font-weight: normal;
+  font-variant: normal;
+  text-transform: none;
+  line-height: 1;
+  -webkit-font-smoothing: antialiased;
+  -moz-osx-font-smoothing: grayscale;
+}
+
+.re-icon-aligncenter:before {
+  content: "\e900";
+}
+.re-icon-alignment:before,
+.re-icon-alignleft:before {
+  content: "\e901";
+}
+.re-icon-alignright:before {
+  content: "\e902";
+}
+.re-icon-bold:before {
+  content: "\e903";
+}
+.re-icon-bookmark:before {
+  content: "\e904";
+}
+.re-icon-clips:before {
+  content: "\e905";
+}
+.re-icon-codesnippets:before {
+  content: "\e906";
+}
+.re-icon-deleted:before {
+  content: "\e907";
+}
+.re-icon-expand:before {
+  content: "\e908";
+}
+.re-icon-file:before {
+  content: "\e909";
+}
+.re-icon-fontcolor:before {
+  content: "\e90a";
+}
+.re-icon-fontfamily:before {
+  content: "\e90b";
+}
+.re-icon-fontsize:before {
+  content: "\e90c";
+}
+.re-icon-format:before {
+  content: "\e90d";
+}
+.re-icon-html:before {
+  content: "\e90e";
+}
+.re-icon-imagecenter:before {
+  content: "\e90f";
+}
+.re-icon-imageleft:before {
+  content: "\e910";
+}
+.re-icon-imageright:before {
+  content: "\e911";
+}
+.re-icon-image:before {
+  content: "\e912";
+}
+.re-icon-indent:before {
+  content: "\e913";
+}
+.re-icon-inline:before {
+  content: "\e914";
+}
+.re-icon-italic:before {
+  content: "\e915";
+}
+.re-icon-horizontalrule:before {
+  content: "\e916";
+}
+.re-icon-link:before {
+  content: "\e917";
+}
+.re-icon-ol:before,
+.re-icon-ordered:before {
+  content: "\e918";
+}
+.re-icon-outdent:before {
+  content: "\e919";
+}
+.re-icon-properties:before {
+  content: "\e91a";
+}
+.re-icon-readmore:before {
+  content: "\e91b";
+}
+.re-icon-redo:before {
+  content: "\e91c";
+}
+.re-icon-retract:before {
+  content: "\e91d";
+}
+.re-icon-specialcharacters:before {
+  content: "\e91e";
+}
+.re-icon-sub:before {
+  content: "\e91f";
+}
+.re-icon-sup:before {
+  content: "\e920";
+}
+.re-icon-table:before {
+  content: "\e921";
+}
+.re-icon-textdirection:before {
+  content: "\e922";
+}
+.re-icon-toggle:before {
+  content: "\e923";
+}
+.re-icon-underline:before {
+  content: "\e924";
+}
+.re-icon-undo:before {
+  content: "\e925";
+}
+.re-icon-ul:before,
+.re-icon-lists:before,
+.re-icon-unordered:before {
+  content: "\e926";
+}
+.re-icon-video:before {
+  content: "\e927";
+}
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_mixins.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_mixins.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_mixins.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_mixins.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,38 @@
+// MIXINS
+
+@mixin clearfix {
+	&:after {
+		content: "";
+		display: table;
+		clear: both;
+	}
+}
+@mixin transition-redactor($transition: all linear .2s) {
+	-moz-transition: $transition;
+	transition: $transition;
+}
+@mixin box-sizing-redactor($box-model) {
+	-webkit-box-sizing: $box-model;
+	-moz-box-sizing: $box-model;
+	box-sizing: $box-model;
+}
+@mixin striped-redactor($color: rgba(255, 255, 255, .2), $angle: 45deg) {
+	background-image: -webkit-linear-gradient($angle, $color 25%, transparent 25%, transparent 50%, $color 50%, $color 75%, transparent 75%, transparent);
+	background-image: -o-linear-gradient($angle, $color 25%, transparent 25%, transparent 50%, $color 50%, $color 75%, transparent 75%, transparent);
+	background-image: linear-gradient($angle, $color 25%, transparent 25%, transparent 50%, $color 50%, $color 75%, transparent 75%, transparent);
+}
+@mixin animation-redactor($animation) {
+	-webkit-animation: $animation;
+	-o-animation: $animation;
+	animation: $animation;
+}
+// keyframe
+@mixin keyframe($animation) {
+	@-webkit-keyframes #{$animation} {
+		@content;
+	}
+
+	@keyframes #{$animation} {
+		@content;
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_modal.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_modal.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_modal.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_modal.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,259 @@
+// ------------------------------------------------------------------
+//
+// MODAL
+//
+// ------------------------------------------------------------------
+
+#redactor-modal-overlay {
+	position: fixed;
+	top: 0;
+	left: 0;
+	margin: auto;
+	overflow: auto;
+	width: 100%;
+	height: 100%;
+	background-color: rgba(255, 255, 255, .95);
+}
+#redactor-modal-box {
+	position: fixed;
+	top: 0;
+	left: 0;
+	bottom: 0;
+	right: 0;
+	overflow-x: hidden;
+	overflow-y: auto;
+}
+#redactor-modal {
+
+	position: relative;
+	margin: auto;
+	margin-top: 16px;
+	padding: 0;
+	background: #fff;
+	color: #000;
+	border-radius: 5px;
+	box-shadow: 0 4px 40px rgba(0, 0, 0, .15);
+	font-family: $ui-font-family;
+	font-size: 14px;
+
+	@media (max-width: 768px) {
+	    font-size: 16px !important;
+	}
+
+	& #redactor-modal-header {
+		border-top-right-radius: 5px;
+		border-top-left-radius: 5px;
+		padding: 20px;
+		font-size: 18px;
+		font-weight: bold;
+		color: #000;
+		border-bottom: 1px solid rgba(0, 0, 0, .05);
+	}
+	& #redactor-modal-close {
+		position: absolute;
+		top: 10px;
+		right: 4px;
+		width: 30px;
+		height: 40px;
+		text-align: center;
+		color: rgba(0, 0, 0, .3);
+		font-size: 30px;
+		font-weight: 300;
+		cursor: pointer;
+		-webkit-appearance: none;
+		padding: 0;
+		border: 0;
+		background: none;
+		outline: none;
+		&:hover {
+			color: #000;
+		}
+	}
+	& #redactor-modal-body {
+		overflow: auto;
+		padding: 40px 48px 24px 48px;
+
+		& section {
+			margin-bottom: 24px;
+		}
+		& label {
+			font-weight: normal;
+			font-size: 15px;
+			display: block;
+			margin-bottom: 4px;
+			color: rgba(0, 0, 0, .8);
+			& .desc {
+				color: rgba(0, 0, 0, .5);
+			}
+			&.checkbox {
+				font-size: inherit;
+			}
+		}
+
+		@media (max-width: 768px) {
+		    padding: 24px;
+		}
+	}
+
+	& select,
+	& input[type="text"],
+	& input[type="password"],
+	& input[type="email"],
+	& input[type="url"],
+	& input[type="number"],
+	& textarea {
+		box-sizing: border-box;
+		position: relative;
+		z-index: 2;
+		margin: 0;
+		padding: 8px;
+		height: 40px;
+		border: 1px solid #ddd;
+		border-radius: 3px;
+		background-color: white;
+		box-shadow: none;
+		color: #333;
+		width: 100%;
+		font-size: 16px;
+
+		font-family: $ui-font-family;
+
+		&:focus {
+			@include transition-redactor(border 0.3s ease-in);
+			outline: none;
+			border-color: rgba(31,120,216,1);
+
+		}
+	}
+	& textarea {
+		display: block;
+		line-height: 1.4em;
+	}
+
+	& button {
+		padding: 0 20px;
+		margin: 0;
+		margin-bottom: 8px;
+		margin-right: 8px;
+		height: 40px;
+		line-height: 38px;
+		outline: none;
+		border: 2px solid transparent;
+		border-radius: 3px;
+		background-color: #eee;
+		color: #000;
+		text-align: center;
+		text-decoration: none;
+		font-weight: normal;
+		font-size: 15px;
+		font-family: $ui-font-family;
+		cursor: pointer;
+		vertical-align: middle;
+        -webkit-appearance: none;
+
+		&:hover {
+			color: #777;
+			background: none;
+			background-color: #f5f5f5;
+			text-decoration: none;
+		}
+
+		&.redactor-modal-button-offset {
+			margin-left: 24px;
+		}
+
+		&#redactor-modal-button-delete {
+			background: none;
+			border-color: #f23d3d;
+			color: #f23d3d;
+			&:hover {
+				color: rgba(255, 255, 255, .6);
+				background-color: #f23d3d;
+			}
+		}
+		&#redactor-modal-button-action {
+			background: none;
+			color: #fff;
+			background-color: #1c86f2;
+			&:hover {
+				color: rgba(255, 255, 255, .6);
+				background-color: lighten(#1c86f2, 10%);
+			}
+		}
+	}
+
+	& .redactor-group {
+		@include clearfix;
+	}
+	& .redactor-modal-tab-side {
+		float: left;
+		width: 26%;
+		margin-right: 6%;
+	}
+	& .redactor-modal-tab-area {
+		float: left;
+		width: 66%;
+	}
+
+	@media (max-width: 768px) {
+		& .redactor-modal-tab-side {
+			float: none;
+			width: auto;
+			margin-right: 0;
+			margin-bottom: 24px;
+		}
+		& .redactor-modal-tab-area {
+			float: none;
+			width: auto;
+		}
+	}
+}
+
+#redactor-modal-tabber {
+	margin-bottom: 40px;
+	font-size: 12px;
+	& a {
+		border: 1px solid #ddd;
+		line-height: 1;
+		padding: 8px 15px;
+		margin-right: -1px;
+		text-decoration: none;
+		color: #000;
+		&:hover {
+			background-color: rgba(31,120,216,1);
+			border-color: rgba(31,120,216,1);
+			color: #fff;
+		}
+		&.active {
+			cursor: default;
+			background-color: rgba(0, 0, 0, .05);
+			border-color: #ddd;
+			color: rgba(0, 0, 0, .5);
+		}
+	}
+}
+
+#redactor-modal-list {
+	margin-left: 0;
+	padding-left: 0;
+	list-style: none;
+	max-height: 250px;
+	overflow-x: auto;
+	& li {
+		border-bottom: 1px solid rgba(0, 0, 0, .07);
+		&:last-child {
+			border-bottom: none;
+		}
+	}
+	& a {
+		padding: 16px 4px;
+		color: #000;
+		text-decoration: none;
+		font-size: 15px;
+		display: block;
+		position: relative;
+		&:hover {
+			background-color: #eee;
+		}
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_ui.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_ui.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_ui.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_ui.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,520 @@
+// ------------------------------------------------------------------
+//
+// UI
+//
+// 01. Base
+// 02. Zindex
+// 03. Fullscreen
+// 04. Placeholder
+// 05. Editor
+// 06. Utility
+// 07. Accessibility
+// 08. Toolbar
+// 09. Air
+// 10. Toolbar & Air
+// 11. Tooltip
+// 12. Structure
+// 13. Upload
+// 14. Progress
+// 15. Animation
+//
+// ------------------------------------------------------------------
+
+
+// =Base
+// ------------------------------------------------------------------
+.redactor-box {
+	position: relative;
+	overflow: visible;
+}
+.redactor-layer,
+.redactor-box {
+	background: #fff;
+}
+
+
+// =Zindex
+// ------------------------------------------------------------------
+.redactor-layer,
+.redactor-box,
+.redactor-box textarea {
+	z-index: auto;
+}
+.redactor-link-tooltip {
+    z-index: 1050;
+}
+.redactor-toolbar {
+	z-index: 100;
+}
+.redactor-box-fullscreen {
+	z-index: 1051;
+}
+.redactor-air,
+.redactor-dropdown {
+	z-index: 1052;
+}
+#redactor-modal-overlay,
+#redactor-modal-box,
+#redactor-modal {
+	z-index: 1053;
+}
+.redactor-body-fullscreen .redactor-link-tooltip {
+	z-index: 1099;
+}
+
+
+// =Fullscreen
+// ------------------------------------------------------------------
+.redactor-box-fullscreen {
+    position: fixed;
+    top: 0;
+    left: 0;
+    width: 100%;
+}
+
+
+// =Placeholder
+// ------------------------------------------------------------------
+.redactor-placeholder:after {
+	position: absolute;
+	top: 20px;
+	left: 20px;
+	content: attr(placeholder);
+	display: block;
+	color: rgba(0, 0, 0, .3);
+	font-weight: normal !important;
+}
+
+
+// =Editor
+// ------------------------------------------------------------------
+.redactor-layer {
+	position: relative;
+	overflow: auto;
+	margin: 0;
+	padding: 24px 20px;
+	padding-top: 20px;
+	outline: none;
+	white-space: normal;
+    border: 1px solid rgba(0, 0, 0, .07);
+}
+.redactor-relative {
+	position: relative;
+}
+.redactor-in {
+	cursor: text;
+}
+.redactor-layer:focus,
+.redactor-in:focus {
+    outline: none;
+}
+
+
+// =Utility
+// ------------------------------------------------------------------
+.redactor-scrollbar-measure {
+	position: absolute;
+	top: -9999px;
+	width: 50px;
+	height: 50px;
+	overflow: scroll;
+}
+.redactor-script-tag {
+	display: none;
+}
+.redactor-layer-img-edit img {
+	cursor: pointer;
+}
+
+// Accessibility
+// ------------------------------------------------------------------
+.redactor-voice-label {
+	display: none;
+}
+
+.redactor-voice-alert {
+	position: absolute;
+	left: -3000px;
+}
+
+
+// =Toolbar
+// ------------------------------------------------------------------
+.redactor-toolbar-box {
+    position: relative;
+
+	& .re-button-tooltip {
+    	display: none;
+    	position: absolute;
+    	white-space: nowrap;
+    	z-index: 101;
+        background: rgba(0, 0, 0, .9);
+        border-radius: 2px;
+        padding: 3px 8px;
+        color: rgba(255, 255, 255, .8);
+        font-size: 12px;
+        font-family: $monospace-font-family;
+	}
+}
+.redactor-toolbar {
+
+	@include clearfix;
+
+	position: relative;
+	padding: 0 !important;
+	background: #fff;
+	border: none;
+	box-shadow: 0 1px 2px rgba(0, 0, 0, .25);
+}
+.redactor-toolbar.redactor-toolbar-overflow {
+    overflow-y: auto;
+    white-space: nowrap;
+    height: 48px;
+}
+.redactor-toolbar li a {
+	color: rgba(0, 0, 0, .8);
+
+	&:hover {
+		outline: none;
+		background-color: #3d79f2;
+		color: #fff;
+	}
+	&:active,
+	&.redactor-act {
+		outline: none;
+		background-color: #eee;
+		color: #444;
+	}
+}
+.redactor-toolbar li a.redactor-button-disabled {
+	opacity: 0.3;
+	&:hover {
+		color: #333;
+		outline: none;
+		background-color: transparent !important;
+		cursor: default;
+	}
+}
+.redactor-toolbar li a.redactor-button-focus {
+	color: #fff;
+	background: #000;
+}
+.redactor-toolbar.redactor-toolbar-external {
+	z-index: 100;
+    border: 1px solid rgba(0, 0, 0, .1);
+    box-shadow: none;
+}
+
+
+// =Air
+// ------------------------------------------------------------------
+.redactor-air {
+
+	position: absolute;
+	background: rgba(0, 0, 0, .9);
+	padding: 0;
+	max-width: 576px;
+	min-width: 200px;
+	border-radius: 4px;
+	border: none;
+}
+.redactor-air li a {
+	color: rgba(255, 255, 255, .75);
+
+	&:hover {
+		outline: none;
+		background-color: rgba(31,120,216,1);
+		color: #fff;
+	}
+	&:active,
+	&.redactor-act {
+		outline: none;
+		background-color: #333;
+		color: rgba(255, 255, 255, .5);
+	}
+}
+.redactor-air li a.redactor-button-disabled {
+	opacity: .3;
+	&:hover {
+		color: rgba(255, 255, 255, .3);
+		outline: none;
+		background-color: transparent !important;
+		cursor: default;
+	}
+}
+.redactor-air li a.redactor-button-focus {
+	color: #333;
+	background: #eee;
+}
+
+
+// =Toolbar & Air
+// ------------------------------------------------------------------
+.redactor-air,
+.redactor-toolbar {
+	font-family: $ui-font-family;
+	margin: 0 !important;
+	list-style: none !important;
+	line-height: 1 !important;
+}
+.redactor-air li,
+.redactor-toolbar li {
+	vertical-align: top;
+	display: inline-block;
+	margin: 0 !important;
+	padding: 0 !important;
+	outline: none;
+	list-style: none !important;
+}
+.redactor-air li a,
+.redactor-toolbar li a {
+    box-sizing: border-box;
+	font-size: 14px;
+	display: block;
+	text-align: center;
+	line-height: 48px;
+	height: 48px;
+	padding: 16px;
+	padding-top: 17px;
+	padding-bottom: 15px;
+	cursor: pointer;
+	outline: none;
+	border: none;
+	line-height: 1;
+	text-decoration: none;
+	cursor: pointer;
+	zoom: 1;
+	position: relative;
+
+	&.re-button-icon {
+    	padding: 16px;
+    	font-size: 16px;
+	}
+}
+.redactor-toolbar li a {
+	border-right: 1px solid rgba(0, 0, 0, .05);
+}
+.redactor-toolbar li:last-child a {
+    border-right: none;
+}
+
+
+// =Tooltip
+// ------------------------------------------------------------------
+.redactor-link-tooltip {
+	border-radius: 3px;
+	font-family: $ui-font-family;
+	position: absolute;
+	padding: 16px;
+	line-height: 1;
+	display: inline-block;
+	background-color: rgba(#000, .95);
+	color: #555 !important;
+	font-size: 14px;
+}
+.redactor-link-tooltip a {
+	font-size: 14px;
+	color: #ccc;
+	margin: 0 8px;
+	text-decoration: none;
+
+	&:hover {
+		color: #fff;
+	}
+}
+
+
+// =Structure
+// ------------------------------------------------------------------
+.redactor-structure {
+
+	h1, h2, h3, h4, h5, h6, div {
+		position: relative;
+		&:before {
+			width: 24px;
+			position: absolute;
+			font-size: 10px;
+			font-weight: normal;
+			opacity: .3;
+			left: -28px;
+			text-align: right;
+		}
+	}
+	h1:before  { content: "h1";  }
+	h2:before  { content: "h2";  }
+	h3:before  { content: "h3";  }
+	h4:before  { content: "h4";  }
+	h5:before  { content: "h5";  }
+	h6:before  { content: "h6";  }
+	div:before { content: "div"; }
+
+}
+
+// =Image
+// ------------------------------------------------------------------
+#redactor-image-box {
+	position: relative;
+	max-width: 100%;
+	display: inline-block;
+	line-height: 0;
+	outline: 3px solid rgba(31,120,216,1);
+	box-shadow: 0 0 12px rgba(31,120,216,1);
+}
+#redactor-image-editter {
+	position: absolute;
+	z-index: 5;
+	top: 50%;
+	left: 50%;
+	margin-top: -11px;
+	margin-left: -18px;
+	line-height: 1;
+	background-color: rgba(#000, .9);
+	border-radius: 3px;
+	color: #fff;
+	font-size: 12px;
+	padding: 7px 10px;
+	cursor: pointer;
+}
+#redactor-image-resizer {
+    box-sizing: border-box;
+	position: absolute;
+	z-index: 2;
+	line-height: 1;
+	cursor: nw-resize;
+	bottom: -5px;
+	right: -6px;
+	border: 2px solid #000;
+	background-color: rgba(#fff, .9);
+	width: 10px;
+	height: 10px;
+}
+
+// =Upload
+// ------------------------------------------------------------------
+#redactor-droparea {
+	position: relative;
+	overflow: hidden;
+	padding: 64px 24px;
+	border: 3px dashed rgba(0, 0, 0, .1);
+}
+#redactor-droparea.drag-hover {
+	background: rgba(200, 222, 250, 0.75);
+}
+#redactor-droparea.drag-drop {
+	background: rgba(250, 248, 200, 0.5);
+}
+#redactor-droparea-placeholder {
+	text-align: center;
+	font-size: 12px;
+	margin-left: 64px;
+	color: rgba(0, 0, 0, .7);
+}
+.redactor-image-dragover {
+	outline: 2px solid #3d79f2;
+}
+
+
+// =Progress
+// ------------------------------------------------------------------
+#redactor-progress {
+	position: fixed;
+	top: 0;
+	left: 0;
+	width: 100%;
+	z-index: 1000000;
+	height: 10px;
+}
+#redactor-progress span {
+
+	@include striped-redactor;
+	@include animation-redactor(progress-bar-stripes 2s linear infinite);
+
+	display: block;
+	width: 100%;
+	height: 100%;
+	background-color: #3d58a8;
+	background-size: 40px 40px;
+}
+
+@-webkit-keyframes progress-bar-stripes {
+	from { background-position: 40px 0; }
+	to { background-position: 0 0; }
+}
+@-o-keyframes progress-bar-stripes {
+	from { background-position: 40px 0; }
+	to { background-position: 0 0; }
+}
+@keyframes progress-bar-stripes {
+	from { background-position: 40px 0; }
+	to { background-position: 0 0; }
+}
+
+
+// =Animation
+// ------------------------------------------------------------------
+.redactor-animated {
+	-webkit-animation-duration: 1s;
+	animation-duration: 1s;
+	-webkit-animation-fill-mode: both;
+	animation-fill-mode: both;
+}
+
+// slideUp
+@include keyframe(redactorSlideUp) {
+	to {
+		padding-top: 0;
+		padding-bottom: 0;
+		height: 0;
+	}
+}
+.redactor-slideUp {
+	overflow: hidden;
+	-webkit-animation-name: redactorSlideUp;
+	animation-name: redactorSlideUp;
+}
+
+// slideDown
+@include keyframe(redactorSlideDown) {
+	from {
+		height: 0;
+		padding-top: 0;
+		padding-bottom: 0;
+	}
+}
+
+.redactor-slideDown {
+	overflow: hidden;
+	-webkit-animation-name: redactorSlideDown;
+	animation-name: redactorSlideDown;
+}
+
+// fadeIn
+@include keyframe(redactorFadeIn) {
+	from {
+		opacity: 0;
+	}
+	to {
+		opacity: 1;
+	}
+}
+
+.redactor-fadeIn {
+	-webkit-animation-name: redactorFadeIn;
+	animation-name: redactorFadeIn;
+}
+
+
+// fadeOut
+@include keyframe(redactorFadeOut) {
+	from {
+		opacity: 1;
+	}
+	to {
+		opacity: 0;
+	}
+}
+
+.redactor-fadeOut {
+	-webkit-animation-name: redactorFadeOut;
+	animation-name: redactorFadeOut;
+}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_variables.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_variables.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/_variables.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/_variables.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,60 @@
+// ------------------------------------------------------------------
+//
+// VARIABLES
+//
+// 01. Breakpoints
+// 02. Baseline
+// 03. FontFamily
+// 04. FontSize
+// 05. Headings
+// 06. TextColors
+// 07. BackgroundColors
+//
+// ------------------------------------------------------------------
+
+
+// =Breakpoints
+// ------------------------------------------------------------------
+$breakpoint-small: 768px !default;
+
+
+// =Baseline
+// ------------------------------------------------------------------
+$base-line: 24px !default;
+
+// =FontFamily
+// ------------------------------------------------------------------
+$ui-font-family: "Trebuchet MS", 'Helvetica Neue', Helvetica, Tahoma, sans-serif !default;
+$content-font-family: $ui-font-family !default;
+$headings-font-family: $ui-font-family !default;
+$monospace-font-family: Consolas, Menlo, Monaco, "Courier New", monospace !default;
+
+
+// =FontSize
+// ------------------------------------------------------------------
+$font-size: 16px !default;
+
+
+// =Headings
+// ------------------------------------------------------------------
+$font-size-h1: 40px !default;
+$font-size-h2: 32px !default;
+$font-size-h3: 24px !default;
+$font-size-h4: 21px !default;
+$font-size-h5: 18px !default;
+$font-size-h6: 16px !default;
+
+
+// =TextColors
+// ------------------------------------------------------------------
+$body-color: #333 !default;
+$headings-color: #222 !default;
+$link-color: #256bc9 !default;
+$link-hover-color: #e21e3b !default;
+
+
+// =BackgroundColors
+// ------------------------------------------------------------------
+$body-background-color: #fff !default;
+$code-background-color: rgba(0, 0, 0, .05) !default;
+$mark-background-color: #ffd61e !default;
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/redactor.scss elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/redactor.scss
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/_scss/redactor.scss	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/_scss/redactor.scss	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,16 @@
+/*
+	Redactor II
+
+	http://imperavi.com/redactor/
+
+	Copyright (c) 2009-2017, Imperavi Oy.
+	License: http://imperavi.com/redactor/license/
+*/
+
+@import "variables";
+@import "mixins";
+@import "icons";
+@import "ui";
+@import "dropdown";
+@import "modal";
+@import "content";
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/custom.css elefant-elefant_2_0_2_stable/apps/admin/js/redactor/custom.css
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/custom.css	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/custom.css	2017-10-16 12:12:51.000000000 -0500
@@ -1,3 +1,21 @@
+.redactor-toolbar {
+	background-color: #f5f5f5;
+	box-shadow: none;
+}
+
+.redactor-toolbar li a {
+	height: auto;
+}
+
+.redactor-toolbar li a.re-button {
+	padding: 6px 8px 6px 8px;
+}
+
+#redactor-modal #redactor-modal-body input[type=text] {
+	height: 28px !important;
+	font-size: 1em !important;
+}
+
 .redactor-box {
 	border: 0;
 	padding: 0;
@@ -16,24 +34,23 @@
 	overflow: hidden;
 }
 
-.redactor-editor {
+.redactor-layer {
 	margin-top: 0px !important;
-	padding: 0;
+	padding: 0px;
 }
 
-.redactor-editor, .redactor-box textarea {
+.redactor-layer, .redactor-box textarea {
 	border: 1px solid #999;
 	-webkit-border-radius: 2px;
 	-moz-border-radius: 2px;
 	border-radius: 2px;
-	width: 654px !important;
-	height: 418px !important;
-	padding: 10px 5px 5px 5px !important;
+	height: 500px !important;
+	padding: 10px 10px 10px 10px !important;
 }
 
-.redactor-editor:focus {
-	height: 418px !important;
-	padding: 10px 5px 5px 5px !important;
+.redactor-layer:focus {
+	height: 500px !important;
+	padding: 10px 10px 10px 10px !important;
 	margin-top: 0px !important;
 }
 
@@ -55,7 +72,7 @@
 	color: #111 !important;
 }
 
-.redactor-editor .embedded {
+.redactor-layer .embedded {
 	background-color: #eee;
 	border: 1px solid #ccc;
 	-webkit-border-radius: 4px;
@@ -68,11 +85,11 @@
 	white-space: nowrap;
 }
 
-.redactor-editor .embedded:hover {
+.redactor-layer .embedded:hover {
 	cursor: pointer;
 }
 
-.redactor-editor .embedded:after {
+.redactor-layer .embedded:after {
 	content: attr(data-label);
 }
 
@@ -100,7 +117,7 @@
 }
 
 #redactor-modal-close {
-	color: #444;
+	/*color: #444;
 	border: 1px solid #aaa;
 	margin: -2px -2px 0px 0px;
 	padding: 3px 5px 5px 5px;
@@ -112,12 +129,17 @@
 	text-decoration: none;
 	font-weight: normal;
 	height: 10px;
-	width: 8px;
+	width: 8px;*/
+	top: -3px !important;
+	right: 0px !important;
+	width: 20px !important;
+	height: 20px !important;
 }
 
 #redactor-modal-close:hover {
 	background-color: #ccc;
 	color: #222;
+	box-shadow: none !important;
 }
 
 #redactor-modal-header, #redactor-modal header {
@@ -132,12 +154,14 @@
 	border-bottom: 1px solid #aaa;
 	border-top: 1px solid #aaa;
 	color: #444;
-	padding: 5px 10px 5px 10px;
-	font-size: 16px;
-	font-weight: normal;
+	padding: 5px 10px 5px 10px !important;
+	font-size: 16px !important;
+	font-weight: normal !important;
 	-webkit-border-radius: 0;
 	-moz-border-radius: 0;
 	border-radius: 0;
+	border-top-left-radius: 0 !important;
+	border-top-right-radius: 0 !important;
 }
 
 #redactor-modal-body {
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ar.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ar.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ar.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ar.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['ar'] = {
-	html: 'كود HTML',
-	video: 'إدراج فيديو...',
-	image: 'إدراج صورة...',
-	table: 'جدول',
-	link: 'رابط',
-	link_insert: 'إدراج رابط...',
-	link_edit: 'تحرير الرابط',
-	unlink: 'إزالة الرابط',
-	formatting: 'التنسيق',
-	paragraph: 'نص عادي',
-	quote: 'اقتباس',
-	code: 'كود',
-	header1: 'العنوان 1',
-	header2: 'العنوان 2',
-	header3: 'العنوان 3',
-	header4: 'العنوان 4',
-	header5: '5 العنوان',
-	bold:  'متين',
-	italic: 'مائل',
-	fontcolor: 'لون الخط',
-	backcolor: 'لون الخلفية',
-	unorderedlist: 'قائمة منقطة',
-	orderedlist: 'قائمة رقمية',
-	outdent: 'أزل المسافة البادئة',
-	indent: 'أضف المسافة البادئة',
-	cancel: 'إلغاء',
-	insert: 'إدراج',
-	save: 'حفظ',
-	_delete: 'حذف',
-	insert_table: 'إدراج جدول...',
-	insert_row_above: 'إضافة صف للأعلى',
-	insert_row_below: 'إضافة صف للأسفل',
-	insert_column_left: 'إضافة عمود لليسار',
-	insert_column_right: 'إضافة عمود لليمين',
-	delete_column: 'حذف العمود',
-	delete_row: 'حذف الصف',
-	delete_table: 'حذف الجدول',
-	rows: 'الصفوف',
-	columns: 'الأعمدة',
-	add_head: 'إضافة رأس',
-	delete_head: 'حذف رأس',
-	title: 'العنوان',
-	image_position: 'الموضع',
-	none: 'بدون',
-	left: 'يسار',
-	right: 'يمين',
-	image_web_link: 'رابط الصورة',
-	text: 'نص',
-	mailto: 'بريد الكتروني',
-	web: 'رابط',
-	video_html_code: 'كود الفيديو',
-	file: 'إدراج ملف...',
-	upload: 'تحميل',
-	download: 'تنزيل',
-	choose: 'اختيار',
-	or_choose: 'أو اختيار',
-	drop_file_here: 'اسحب الملف هنا',
-	align_left:	'محاذاة النص الى اليسار',
-	align_center: 'محاذاة النص الى الوسط',
-	align_right: 'محاذاة النص الى اليمين',
-	align_justify: 'ضبط النص',
-	horizontalrule: 'إدراج خط فاصل',
-	fullscreen: 'ملء الشاشة',
-	deleted: 'محذوف',
-	anchor: 'مرساة',
-	link_new_tab: 'فتح الرابط في تبويب جديد',
-	underline: 'مسطر',
-	alignment: 'محاذاة',
-	filename: 'الاسم (اختياري)',
-	edit: 'تحرير',
-	center: 'توسيط'
+(function ($)
+{
+	$.Redactor.opts.langs['ar'] = {
+    "format": "تنسيق",
+    "image": "صورة",
+    "file": "ملف",
+    "link": "رابط",
+    "bold": "متين",
+    "italic": "مائل",
+    "deleted": "مشطوب",
+    "underline": "مسطر",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "قوائم",
+    "link-insert": "إدراج رابط",
+    "link-edit": "تحرير الرابط",
+    "link-in-new-tab": "فتح الرابط في تبويب جديد",
+    "unlink": "إلغاء الرابط",
+    "cancel": "إلغاء",
+    "close": "إغلاق",
+    "insert": "إدراج",
+    "save": "حفظ",
+    "delete": "حذف",
+    "text": "النص",
+    "edit": "تحرير",
+    "title": "العنوان",
+    "paragraph": "نص عادي",
+    "quote": "اقتباس",
+    "code": "كود",
+    "heading1": "عنوان 1",
+    "heading2": "عنوان 2",
+    "heading3": "عنوان 3",
+    "heading4": "عنوان 4",
+    "heading5": "عنوان 5",
+    "heading6": "عنوان 6",
+    "filename": "الاسم",
+    "optional": "اختياري",
+    "unorderedlist": "قائمة نقطية",
+    "orderedlist": "قائمة رقمية",
+    "outdent": "زيادة المسافة البادئة",
+    "indent": "إنقاض المسافة البادئة",
+    "horizontalrule": "خط أفقي",
+    "upload-label": "أسقط الملف هنا أو ",
+    "accessibility-help-label": "محرر النص الغني",
+    "caption": "الشرح",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/az.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/az.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/az.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/az.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['az'] = {
-	html: 'HTML',
-	video: 'Video əlavə...',
-	image: 'Şəkil əlavə...',
-	table: 'Cədvəl',
-	link: 'Link',
-	link_insert: 'Link əlavə...',
-	link_edit: 'Edit link',
-	unlink: 'Linki sil',
-	formatting: 'Format',
-	paragraph: 'Paraqraf',
-	quote: 'Sitat',
-	code: 'Kod',
-	header1: 'Başlıq 1',
-	header2: 'Başlıq 2',
-	header3: 'Başlıq 3',
-	header4: 'Başlıq 4',
-	header5: 'Başlıq 5',
-	bold:  'Qalın',
-	italic: 'Kursiv',
-	fontcolor: 'Yazı Rəngi',
-	backcolor: 'Fon rəngi',
-	unorderedlist: 'Sırasız List',
-	orderedlist: 'Sıralı List',
-	outdent: 'Abzası geri al',
-	indent: 'Abzas',
-	cancel: 'Ləğv et',
-	insert: 'Əlavə et',
-	save: 'Yadda saxla',
-	_delete: 'Sil',
-	insert_table: 'Cədvəl əlavə et...',
-	insert_row_above: 'Yuxarıya sətir əlavə et',
-	insert_row_below: 'Aşağıya sətir əlavə et',
-	insert_column_left: 'Sola sütun əlavə et',
-	insert_column_right: 'Sağa sütun əlavə et',
-	delete_column: 'Sütunu sil',
-	delete_row: 'Sətiri sil',
-	delete_table: 'Cədvəli sil',
-	rows: 'Sətirlər',
-	columns: 'Sütunlar',
-	add_head: 'Başlıq əlavə et',
-	delete_head: 'Başlığı sil',
-	title: 'Başlıq',
-	image_position: 'Mövqe',
-	none: 'Heç biri',
-	left: 'Sol',
-	right: 'Sağ',
-	image_web_link: 'Şəklin Veb Link',
-	text: 'Yazı',
-	mailto: 'E-poçt',
-	web: 'URL',
-	video_html_code: 'Video Embed Kodu',
-	file: 'Fayl əlavə et...',
-	upload: 'Yüklə',
-	download: 'Endir',
-	choose: 'Seç',
-	or_choose: 'Vəya seç',
-	drop_file_here: 'Faylı buraya at',
-	align_left:	'Yazıyı sola yanaşdır',
-	align_center: 'Yazıyı ortala',
-	align_right: 'Yazıyı sağa yanaşdır',
-	align_justify: 'Yazının kənarlarını düzləşdir',
-	horizontalrule: 'Üfuqi xətt əlavə et',
-	deleted: 'Silindi',
-	anchor: 'Anchor',
-	link_new_tab: 'Linki yeni tabda aç',
-	underline: 'Altıxətli',
-	alignment: 'Düzləndirmə',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ba.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ba.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ba.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ba.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,78 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['ba'] = {
-	html: 'HTML',
-	video: 'Ubaci video',
-	image: 'Ubaci fotografiju',
-	table: 'Tabela',
-	link: 'Veza',
-	link_insert: 'Ubaci vezu ...',
-	link_edit: 'Edit link',
-	unlink: 'Ukloni vezu',
-	formatting: 'Stilovi',
-	paragraph: 'Paragraf',
-	quote: 'Citat',
-	code: 'Izvorni kod',
-	header1: 'Zaglavlje 1',
-	header2: 'Zaglavlje 2',
-	header3: 'Zaglavlje 3',
-	header4: 'Zaglavlje 4',
-	header5: 'Zaglavlje 5',
-	bold: 'Podebljaj',
-	italic: 'Nakosi',
-	fontcolor: 'Boja slova',
-	backcolor: 'Boja pozadine',
-	unorderedlist: 'Nesortirana lista',
-	orderedlist: 'Sortirana lista',
-	outdent: 'Izvuci',
-	indent: 'Uvuci',
-	redo: 'Korak naprijed',
-	undo: 'Korak nazad',
-	cut: 'Izreži',
-	cancel: 'Odustani',
-	insert: 'Ubaci',
-	save: 'Sačuvaj',
-	_delete: 'Izbriši',
-	insert_table: 'Ubaci tabelu',
-	insert_row_above: 'Dodaj red iznad',
-	insert_row_below: 'Dodaj red ispod',
-	insert_column_left: 'Dodaj kolonu lijevo',
-	insert_column_right: 'Dodaj kolonu desno',
-	delete_column: 'Izbriši kolonu',
-	delete_row: 'Izbriši red',
-	delete_table: 'Izbriši tabelu',
-	rows: 'Red',
-	columns: 'Kolona',
-	add_head: 'Dodaj zaglavlje',
-	delete_head: 'Ukloni zaglavlje',
-	title: 'Naslov',
-	image_position: 'Pozicija',
-	none: 'Bez',
-	left: 'Lijevo',
-	right: 'Desno',
-	image_web_link: 'Web adresa fotografije',
-	text: 'Tekst',
-	mailto: 'Email',
-	web: 'Web adresa',
-	video_html_code: 'Video kod',
-	file: 'Datoteka',
-	upload: 'Pošalji',
-	download: 'Preuzmi',
-	choose: 'Odaberi',
-	or_choose: 'Ili odaberi',
-	drop_file_here: 'Prevuci datoteku ovdje',
-	align_left:	'Poravnaj lijevo',
-	align_center: 'Centriraj',
-	align_right: 'Poravnaj desno',
-	align_justify: 'Od ruba do ruba',
-	horizontalrule: 'Ubaci horizontalnu liniju',
-	fullscreen: 'Prikaz preko čitavog ekrana',
-	deleted: 'Izbrisano',
-	anchor: 'Sidro',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/bg.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/bg.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/bg.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/bg.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,76 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['bg'] = {
-	html: 'HTML',
-	video: 'Видео',
-	image: 'Изображение',
-	table: 'Таблица',
-	link: 'Връзка',
-	link_insert: 'Вкарай връзка ...',
-	link_edit: 'Edit link',
-	unlink: 'Премахни връзка',
-	formatting: 'Стилове',
-	paragraph: 'Параграф',
-	quote: 'Цитат',
-	code: 'Код',
-	header1: 'Заглавие 1',
-	header2: 'Заглавие 2',
-	header3: 'Заглавие 3',
-	header4: 'Заглавие 4',
-	header5: 'Заглавие 5',
-	bold:  'Удебели',
-	italic: 'Наклони',
-	fontcolor: 'Цвят на текста',
-	backcolor: 'Цвят на фона',
-	unorderedlist: 'Неподреден списък',
-	orderedlist: 'Подреден списък',
-	outdent: 'Вкарай навътре',
-	indent: 'Изкарай навън',
-	cancel: 'Отказ',
-	insert: 'Вкарай',
-	save: 'Запази',
-	_delete: 'Премахни',
-	insert_table: 'Вкарай таблица',
-	insert_row_above: 'Добави ред отгоре',
-	insert_row_below: 'Добави ред отдолу',
-	insert_column_left: 'Добави колона отляво',
-	insert_column_right: 'Добави колона отдясно',
-	delete_column: 'Премахни колоната',
-	delete_row: 'Премахни реда',
-	delete_table: 'Премахни таблицата',
-	rows: 'Редове',
-	columns: 'Колони',
-	add_head: 'Добави заглавен ред',
-	delete_head: 'Премахни заглавен ред',
-	title: 'Заглавие',
-	image_view: 'Виж изображението',
-	image_position: 'Позиция',
-	left: 'Ляво',
-	right: 'Дясно',
-	image_web_link: 'Уеб връзка',
-	text: 'Текст',
-	mailto: 'Имейл',
-	web: 'Адрес',
-	video_html_code: 'Код за вграждане на видео',
-	file: 'Файл',
-	upload: 'Качи',
-	download: 'Свали',
-	choose: 'Избор',
-	or_choose: 'Или избери',
-	drop_file_here: 'Провлачете файлове тук',
-	align_left:	'Подравни в ляво',
-	align_center: 'Центрирай',
-	align_right: 'Подравни в дясно',
-	align_justify: 'Подравни двустранно',
-	horizontalrule: 'Хоризонтална линия',
-	fullscreen: 'Цял екран',
-	deleted: 'Зачеркни',
-	none: 'Няма',
-	anchor: 'Котва',
-	link_new_tab: 'Отваряне в нов таб',
-	underline: 'Подчертай',
-	alignment: 'Подравняване',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/by.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/by.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/by.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/by.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,76 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['by'] = {
-    html: 'Код',
-    video: 'Відэа',
-    image: 'Малюнак',
-    table: 'Табліца',
-    link: 'Спасылка',
-    link_insert: 'Уставіць спасылку ...',
-    link_edit: 'Edit link',
-    unlink: 'Выдаліць спасылку',
-    formatting: 'Стылі',
-    paragraph: 'Звычайны тэкст',
-    quote: 'Цытата',
-    code: 'Код',
-    header1: 'Загаловак 1',
-    header2: 'Загаловак 2',
-    header3: 'Загаловак 3',
-    header4: 'Загаловак 4',
-    header5: 'Загаловак 5',
-    bold: 'Паўтлусты',
-    italic: 'Нахільны',
-    fontcolor: 'Колер тэксту',
-    backcolor: 'Заліванне тэксту',
-    unorderedlist: 'Звычайны спіс',
-    orderedlist: 'Нумараваны спіс',
-    outdent: 'Паменьшыць водступ',
-    indent: 'Павялічыць водступ',
-    cancel: 'Адмяніць',
-    insert: 'Уставіць',
-    save: 'Захаваць',
-    _delete: 'Выдаліць',
-    insert_table: 'Уставіць табліцу',
-    insert_row_above: 'Дадаць радок зверху',
-    insert_row_below: 'Дадаць радок знізу',
-    insert_column_left: 'Дадаць слупок злева',
-    insert_column_right: 'Дадаць слупок справа',
-    delete_column: 'Выдаліць слупок',
-    delete_row: 'Выдаліць радок',
-    delete_table: 'Выдаліць табліцу',
-    rows: 'Радкі',
-    columns: 'Стаўбцы',
-    add_head: 'Дадаць загаловак',
-    delete_head: 'Выдаліць загаловак',
-    title: 'Падказка',
-    image_view: 'Запампаваць малюнак',
-    image_position: 'Абцяканне тэкстам',
-    none: 'Няма',
-    left: 'Злева',
-    right: 'Справа',
-    image_web_link: 'Спасылка на малюнак',
-    text: 'Тэкст',
-    mailto: 'Эл. пошта ',
-    web: 'URL',
-    video_html_code: 'Код відэа роліка',
-    file: 'Файл',
-    upload: 'Загрузіць',
-    download: 'Запампаваць',
-    choose: 'Выбраць',
-    or_choose: 'Ці іншае',
-    drop_file_here: 'Перацягніце файл сюды',
-    align_left: 'Па левым краі',
-    align_center: 'Па цэнтры',
-    align_right: 'Па правым краі',
-    align_justify: 'Выраўнаваць тэкст па шырыні',
-    horizontalrule: 'Гарызантальная лінейка',
-    fullscreen: 'Ва ўвесь экран',
-    deleted: 'Закрэслены',
-    anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ca.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ca.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ca.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ca.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['ca'] = {
-	html: 'HTML',
-	video: 'Inserta Vídeo...',
-	image: 'Inserta Imatge...',
-	table: 'Taula',
-	link: 'Enllaç',
-	link_insert: 'Inserta Enllaç ...',
-	link_edit: 'Edit link',
-	unlink: 'Elimina enllaç',
-	formatting: 'Formateja',
-	paragraph: 'Paràgraf',
-	quote: 'Cita',
-	code: 'Codi',
-	header1: 'Capçalera 1',
-	header2: 'Capçalera 2',
-	header3: 'Capçalera 3',
-	header4: 'Capçalera 4',
-	header5: 'Capçalera 5',
-	bold:  'Negreta',
-	italic: 'Cursiva',
-	fontcolor: 'Color de la lletra',
-	backcolor: 'Color del fons',
-	unorderedlist: 'Llista sense ordenar',
-	orderedlist: 'Llista ordenada',
-	outdent: 'Treure indentació',
-	indent: 'Indentar',
-	cancel: 'Cancel·lar',
-	insert: 'Insertar',
-	save: 'Desar',
-	_delete: 'Eliminar',
-	insert_table: 'Insertar Taula...',
-	insert_row_above: 'Insertar fila superior',
-	insert_row_below: 'Insertar fila inferior',
-	insert_column_left: 'Insertar columna a l\'esquerra',
-	insert_column_right: 'Insertar columna a la dreta',
-	delete_column: 'Eliminar Columna',
-	delete_row: 'Eliminar Fila',
-	delete_table: 'Eliminar Taula',
-	rows: 'Files',
-	columns: 'Columnes',
-	add_head: 'Incloure capçalera',
-	delete_head: 'Eliminar capçalera',
-	title: 'Títol',
-	image_position: 'Posició',
-	none: 'Cap',
-	left: 'Esquerra',
-	right: 'Dreta',
-	image_web_link: 'Enllaç web a imatge',
-	text: 'Text',
-	mailto: 'Direcció de correu',
-	web: 'URL',
-	video_html_code: 'Codi de vídeo inserit',
-	file: 'Insertar Fitxer...',
-	upload: 'Pujar',
-	download: 'Descarregar',
-	choose: 'Escull',
-	or_choose: 'O escull',
-	drop_file_here: 'Arrosega el fitxer fins aquí',
-	align_left:	'Alinear a l\'esquerra',
-	align_center: 'Alinear al centre',
-	align_right: 'Alinear a la dreta',
-	align_justify: 'Justificar',
-	horizontalrule: 'Insertar línia horitzontal',
-	deleted: 'Eliminar',
-	anchor: 'Àncora',
-	link_new_tab: 'Obrir enllaç en una nova pestanya',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/cs.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/cs.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/cs.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/cs.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,86 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['cs'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Obrázek',
-	table: 'Tabulka',
-	link: 'Odkaz',
-	link_insert: 'Vložit odkaz ...',
-	link_edit: 'Upravit odkaz',
-	unlink: 'Odstranit odkaz',
-	formatting: 'Styly',
-	paragraph: 'Odstavec',
-	quote: 'Citace',
-	code: 'Kód',
-	header1: 'Nadpis 1',
-	header2: 'Nadpis 2',
-	header3: 'Nadpis 3',
-	header4: 'Nadpis 4',
-	header5: 'Nadpis 5',
-	format: 'Formát',
-	bold:  'Tučné',
-	italic: 'Kurzíva',
-	superscript: 'Horní index',
-	strikethrough: 'Přeškrtnuté',
-	fontcolor: 'Barva písma',
-	backcolor: 'Barva pozadí',
-	removeformat: 'Odstranit formátování',
-	cleanformatting: 'Odstranit styly',
-	lists: 'Seznamy',
-	unorderedlist: 'Seznam s odrážkami',
-	orderedlist: 'Číslovaný seznam',
-	outdent: 'Zmenšit odsazení',
-	indent: 'Zvětšit odsazení',
-	redo: 'Vpřed',
-	undo: 'Zpět',
-	cut: 'Vyjmout',
-	cancel: 'Zrušit',
-	insert: 'Vložit',
-	save: 'Uložit',
-	_delete: 'Smazat',
-	insert_table: 'Vložit tabulku',
-	insert_row_above: 'Přidat řádek nahoru',
-	insert_row_below: 'Přidat řádek dolu',
-	insert_column_left: 'Přidat sloupec vlevo',
-	insert_column_right: 'Přidat sloupec vpravo',
-	delete_column: 'Smazat sloupec',
-	delete_row: 'Smazat řádek',
-	delete_table: 'Smazat tabulku',
-	rows: 'Řádky',
-	columns: 'Sloupce',
-	add_head: 'Přidat záhlaví',
-	delete_head: 'Smazat záhlaví',
-	title: 'Titulek',
-	image_view: 'Zobrazit obrázek',
-	image_position: 'Zarovnání',
-	none: 'Žádné',
-	left: 'Vlevo',
-	right: 'Vpravo',
-	image_web_link: 'Odkaz na obrázek',
-	text: 'Text',
-	mailto: 'Email',
-	web: 'URL adresa',
-	video_html_code: 'Zkopírujte kód pro vložení videa do stránky',
-	file: 'Soubor',
-	upload: 'Nahrát',
-	download: 'Stáhnout',
-	choose: 'Vybrat',
-	or_choose: 'nebo',
-	drop_file_here: 'Přetáhněte soubor do tohoto okna',
-	align_left:	'Zarovnat vlevo',
-	align_center: 'Zarovnat na střed',
-	align_right: 'Zarovnat vpravo',
-	align_justify: 'Zarovnat do bloku',
-	horizontalrule: 'Vodorovná čára',
-	fullscreen: 'Celá obrazovka',
-	deleted: 'Přeškrtnuté',
-	none: 'Žádná',
-	anchor: 'Záložka',
-	link_new_tab: 'Otevírat odkaz v novém okně',
-	underline: 'Podtržené',
-	alignment: 'Zarovnání',
-	filename: 'Název (volitelné)',
-	edit: 'Upravit',
-	center: 'Center'
-};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/da.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/da.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/da.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/da.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['da'] = {
-    html: 'HTML',
-    video: 'Indsæt Video...',
-    image: 'Indsæt Billede...',
-    table: 'Tabel',
-    link: 'Hyperlink',
-    link_insert: 'Indsæt Hyperlink ...',
-    link_edit: 'Edit link',
-    unlink: 'Fjern Hyperlink',
-    formatting: 'Formatering',
-    paragraph: 'Paragraf',
-    quote: 'Citat',
-    code: 'Kode',
-    header1: 'Overskrift 1',
-    header2: 'Overskrift 2',
-    header3: 'Overskrift 3',
-    header4: 'Overskrift 4',
-    header5: 'Overskrift 5',
-    bold:  'Fed',
-    italic: 'Kursiv',
-    fontcolor: 'Skriftfarve',
-    backcolor: 'Baggrundsfarve',
-    unorderedlist: 'Opstilling Med Punkttegn',
-    orderedlist: 'Opstilling Med Tal',
-    outdent: 'Formindsk Indrykning',
-    indent: 'Forøg Indrykning',
-    cancel: 'Fortryd',
-    insert: 'Indsæt',
-    save: 'Gem',
-    _delete: 'Slet',
-    insert_table: 'Indsæt Tabel...',
-    insert_row_above: 'Indsæt Række Over',
-    insert_row_below: 'Indsæt Række Under',
-    insert_column_left: 'Indsæt Kolonne Venstre',
-    insert_column_right: 'Indsæt Kolonne Højre',
-    delete_column: 'Slet Kolonne',
-    delete_row: 'Slet Række',
-    delete_table: 'Slet Tabel',
-    rows: 'Rækker',
-    columns: 'Kolonner',
-    add_head: 'Indsæt Hoved',
-    delete_head: 'Slet Hoved',
-    title: 'Titel',
-    image_position: 'Placering',
-    none: 'Ingen',
-    left: 'Venstre',
-    right: 'Højre',
-    image_web_link: 'Billede Web Hyperlink',
-    text: 'Tekst',
-    mailto: 'Email',
-    web: 'URL',
-    video_html_code: 'Video Indlejringskode',
-    file: 'Indsæt Fil...',
-    upload: 'Upload',
-    download: 'Download',
-    choose: 'Vælg',
-    or_choose: 'Eller vælg',
-    drop_file_here: 'Træk fil her',
-    align_left: 'Venstrejuster',
-    align_center: 'Centrer',
-    align_right: 'Højrejuster',
-    align_justify: 'Juster',
-    horizontalrule: 'Indsæt Vandret Linje',
-    fullscreen: 'Fuldskærm',
-    deleted: 'Slettet',
-    anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/de.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/de.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/de.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/de.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,79 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['de'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Bilder',
-	table: 'Tabelle',
-	link: 'Link',
-	link_insert: 'Link einfügen ...',
-	link_edit: 'Link bearbeiten',
-	unlink: 'Link entfernen',
-	formatting: 'Formatvorlagen',
-	paragraph: 'Absatz',
-	quote: 'Zitat',
-	code: 'Code',
-	header1: 'Überschrift 1',
-	header2: 'Überschrift 2',
-	header3: 'Überschrift 3',
-    header4: 'Überschrift 4',
-    header5: 'Überschrift 5',
-	bold:  'Fett',
-	italic: 'Kursiv',
-	fontcolor: 'Schriftfarbe',
-	backcolor: 'Texthervorhebungsfarbe',
-	unorderedlist: 'Aufzählungszeichen',
-	orderedlist: 'Nummerierung',
-	outdent: 'Einzug verkleinern',
-	indent: 'Einzug vergrößern',
-	redo: 'Wiederholen',
-	undo: 'Rückgängig',
-	cut: 'Ausschneiden',
-	cancel: 'Abbrechen',
-	insert: 'Einfügen',
-	save: 'Speichern',
-	_delete: 'Löschen',
-	insert_table: 'Tabelle einfügen',
-	insert_row_above: 'Zeile oberhalb einfügen',
-	insert_row_below: 'Zeile unterhalb einfügen',
-	insert_column_left: 'Spalte links einfügen',
-	insert_column_right: 'Spalte rechts einfügen',
-	delete_column: 'Spalte löschen',
-	delete_row: 'Zeile löschen',
-	delete_table: 'Tabelle löschen',
-	rows: 'Zeilen',
-	columns: 'Spalten',
-	add_head: 'Titel einfügen',
-	delete_head: 'Titel entfernen',
-	title: 'Title',
-	image_view: 'Bilder',
-	image_position: 'Textumbruch',
-	none: 'Keine',
-	left: 'Links',
-	right: 'Rechts',
-	image_web_link: 'Bilder-Link',
-	text: 'Text',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Video-Einbettungscode',
-	file: 'Datei',
-	upload: 'Hochladen',
-	download: 'Download',
-	choose: 'Auswählen',
-	or_choose: 'Oder, wählen Sie eine Datei aus',
-	drop_file_here: 'Ziehen Sie eine Datei hier hin',
-	align_left:	'Linksbündig',
-	align_center: 'Mitte',
-	align_right: 'Rechtsbündig',
-	align_justify: 'Blocksatz',
-	horizontalrule: 'Horizontale Linie',
-	fullscreen: 'Vollbild',
-	deleted: 'Durchgestrichen',
-	anchor: 'Anker',
-	link_new_tab: 'Link in neuem Tab öffnen',
-	underline: 'Unterstrichen',
-	alignment: 'Ausrichtung',
-	filename: 'Name (optional)',
-	edit: 'Bearbeiten',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['de'] = {
+    "format": "Format",
+    "image": "Bild",
+    "file": "Datei",
+    "link": "Link",
+    "bold": "Fett",
+    "italic": "Kursiv",
+    "deleted": "Durchgestrichen",
+    "underline": "Unterstrichen",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Listen",
+    "link-insert": "Verknüpfung einsetzen",
+    "link-edit": "Verknüpfung bearbeiten",
+    "link-in-new-tab": "Verknüpfung in neuer Registerkarte öffnen",
+    "unlink": "Verknüpfung aufheben",
+    "cancel": "Abbrechen",
+    "close": "Schließen",
+    "insert": "Einsetzen",
+    "save": "Speichern",
+    "delete": "löschen",
+    "text": "Text",
+    "edit": "Bearbeiten",
+    "title": "Titel",
+    "paragraph": "Normaler Text",
+    "quote": "Zitieren",
+    "code": "Code",
+    "heading1": "Überschrift 1",
+    "heading2": "Überschrift 2",
+    "heading3": "Überschrift 3",
+    "heading4": "Überschrift 4",
+    "heading5": "Überschrift 5",
+    "heading6": "Überschrift 6",
+    "filename": "Name",
+    "optional": "Optional",
+    "unorderedlist": "Unsortierte Liste",
+    "orderedlist": "Sortierte Liste",
+    "outdent": "Negativer einzug",
+    "indent": "Einzug",
+    "horizontalrule": "Linie",
+    "upload-label": "Datei hier ablegen oder ",
+    "accessibility-help-label": "Rich-Text-Editor",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/el.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/el.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/el.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/el.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['el'] = {
-	html: 'HTML',
-	video: 'Εισαγωγή βίντεο...',
-	image: 'Εισαγωγή εικόνας...',
-	table: 'Πίνακας',
-	link: 'Σύνδεσμος',
-	link_insert: 'Εισαγωγή συνδέσμου...',
-	link_edit: 'Τροποποίηση συνδέσμου',
-	unlink: 'Ακύρωση συνδέσμου',
-	formatting: 'Μορφοποίηση',
-	paragraph: 'Παράγραφος',
-	quote: 'Παράθεση',
-	code: 'Κώδικας',
-	header1: 'Κεφαλίδα 1',
-	header2: 'Κεφαλίδα 2',
-	header3: 'Κεφαλίδα 3',
-	header4: 'Κεφαλίδα 4',
-	header5: 'Κεφαλίδα 5',
-	bold:  'Έντονα',
-	italic: 'Πλάγια',
-	fontcolor: 'Χρώμα γραμματοσειράς',
-	backcolor: 'Χρώμα επισήμανσης κειμένου',
-	unorderedlist: 'Κουκκίδες',
-	orderedlist: 'Αρίθμηση',
-	outdent: 'Μείωση εσοχής',
-	indent: 'Αύξηση εσοχής',
-	cancel: 'Ακύρωση',
-	insert: 'Εισαγωγή',
-	save: 'Αποθήκευση',
-	_delete: 'Διαγραφή',
-	insert_table: 'Εισαγωγή πίνακα...',
-	insert_row_above: 'Προσθήκη γραμμής επάνω',
-	insert_row_below: 'Προσθήκη γραμμής κάτω',
-	insert_column_left: 'Προσθήκη στήλης αριστερά',
-	insert_column_right: 'Προσθήκη στήλης δεξιά',
-	delete_column: 'Διαγραφή στήλης',
-	delete_row: 'Διαγραφή σειράς',
-	delete_table: 'Διαγραφή πίνακα',
-	rows: 'Γραμμές',
-	columns: 'Στήλες',
-	add_head: 'Προσθήκη κεφαλίδας',
-	delete_head: 'Διαγραφή κεφαλίδας',
-	title: 'Τίτλος',
-	image_position: 'Θέση',
-	none: 'Καμία',
-	left: 'Αριστερά',
-	right: 'Δεξιά',
-	image_web_link: 'Υπερσύνδεσμος εικόνας',
-	text: 'Κείμενο',
-	mailto: 'Email',
-	web: 'Διεύθυνση URL',
-	video_html_code: 'Κώδικας ενσωμάτωσης βίντεο',
-	file: 'Εισαγωγή αρχείου...',
-	upload: 'Ανέβασμα',
-	download: 'Κατέβασμα',
-	choose: 'Επέλεξε',
-	or_choose: 'ή επέλεξε',
-	drop_file_here: 'Σύρατε αρχεία εδώ',
-	align_left:	'Στοίχιση αριστερά',
-	align_center: 'Στοίχιση στο κέντρο',
-	align_right: 'Στοίχιση δεξιά',
-	align_justify: 'Πλήρης στοίχιση',
-	horizontalrule: 'Εισαγωγή οριζόντιας γραμμής',
-	deleted: 'Διαγράφηκε',
-	anchor: 'Άγκυρα',
-	link_new_tab: 'Άνοιγμα συνδέσμου σε νέα καρτέλα',
-	underline: 'Υπογράμμιση',
-	alignment: 'Στοίχιση',
-	filename: 'Όνομα (προαιρετικό)',
-	edit: 'Τροποποίηση',
-	center: 'Κέντρο',
-};
-})( jQuery );
-
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/en.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/en.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/en.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/en.js	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,57 @@
+(function ($)
+{
+	$.Redactor.opts.langs['en'] = {
+    "format": "Format",
+    "image": "Image",
+    "file": "File",
+    "link": "Link",
+    "bold": "Bold",
+    "italic": "Italic",
+    "deleted": "Strikethrough",
+    "underline": "Underline",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Lists",
+    "link-insert": "Insert link",
+    "link-edit": "Edit link",
+    "link-in-new-tab": "Open link in new tab",
+    "unlink": "Unlink",
+    "cancel": "Cancel",
+    "close": "Close",
+    "insert": "Insert",
+    "save": "Save",
+    "delete": "Delete",
+    "text": "Text",
+    "edit": "Edit",
+    "title": "Title",
+    "paragraph": "Normal text",
+    "quote": "Quote",
+    "code": "Code",
+    "heading1": "Heading 1",
+    "heading2": "Heading 2",
+    "heading3": "Heading 3",
+    "heading4": "Heading 4",
+    "heading5": "Heading 5",
+    "heading6": "Heading 6",
+    "filename": "Name",
+    "optional": "optional",
+    "unorderedlist": "Unordered List",
+    "orderedlist": "Ordered List",
+    "outdent": "Outdent",
+    "indent": "Indent",
+    "horizontalrule": "Line",
+    "upload-label": "Drop file here or ",
+    "accessibility-help-label": "Rich text editor",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
+};
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/eo.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/eo.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/eo.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/eo.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['eo'] = {
-	html: 'HTML', // substantive
-	video: 'Enŝovu videon...', // imperative
-	image: 'Enŝovu bildon...', // imperative
-	table: 'Tabelo', // substantive
-	link: 'Ligu', // imperative
-	link_insert: 'Enŝovu ligilon ...', // imperative
-	link_edit: 'Edit link',
-	unlink: 'Malligu', // imperative
-	formatting: 'Tekstaranĝo', // substantive
-	paragraph: 'Paragrafo', // substantive
-	quote: 'Citaĵo', // substantive
-	code: 'Kodo', // substantive
-	header1: 'Kapo 1', // substantive
-	header2: 'Kapo 2', // substantive
-	header3: 'Kapo 3', // substantive
-	header4: 'Kapo 4', // substantive
-	header5: 'Kapo 5', // substantive
-	bold:  'Grasa', // adjective
-	italic: 'Kursiva', // adjective
-	fontcolor: 'Tipara koloro', // substantive
-	backcolor: 'Fona koloro', // substantive
-	unorderedlist: 'Malorda listo', // substantive
-	orderedlist: 'Orda listo', // substantive
-	outdent: 'Malkrommarĝenu', // imperative
-	indent: 'Krommarĝenu', // imperative
-	cancel: 'Rezignu', // imperative
-	insert: 'Enŝovu', // imperative
-	save: 'Konservu',	// imperative
-	_delete: 'Forigu', // imperative
-	insert_table: 'Enŝovu tabelon...', // imperative
-	insert_row_above: 'Enŝovu vicon supren', // imperative
-	insert_row_below: 'Enŝovu vicon malsupren', // imperative
-	insert_column_left: 'Enŝovu kolumnon maldekstren', // imperative
-	insert_column_right: 'Enŝovu kolumnon dekstren', // imperative
-	delete_column: 'Forigu kolumnon', // imperative
-	delete_row: 'Forigu vicon', // imperative
-	delete_table: 'Forigu tabelon', // imperative
-	rows: 'Vicoj', // substantive (plural)
-	columns: 'Kolumnoj', // substantive (plural)
-	add_head: 'Enŝovu kapon', // imperative
-	delete_head: 'Forigu kapon', // imperative
-	title: 'Titolo', // substantive
-	image_position: 'Bildloko', // substantive
-	none: 'Neniu', // determiner
-	left: 'Maldekstra', // adjective
-	right: 'Dekstra', // adjective
-	image_web_link: 'Bilda hiperligilo', // substantive
-	text: 'Teksto', // substantive
-	mailto: 'Retpoŝto', // substantive
-	web: 'URL', // substantive
-	video_html_code: 'Videa enkorpigita kodo', // substantive
-	file: 'Enŝovu dosieron...', // imperative
-	upload: 'Alŝutu', // imperative
-	download: 'Elŝutu', // imperative
-	choose: 'Elektu', // imperative
-	or_choose: 'Aŭ elektu', // imperative
-	drop_file_here: 'Demetu dosieron ĉi tien', // imperative
-	align_left:	'Ĝisrandigu maldekstren', // imperative
-	align_center: 'Centrigu', // imperative
-	align_right: 'Ĝisrandigu dekstren', // imperative
-	align_justify: 'Ĝisrandigu', // imperative
-	horizontalrule: 'Enŝovu horizontalan linion', // imperative
-	fullscreen: 'Plenekrana', // adjective
-	deleted: 'Foriga', // adjective
-	anchor: 'Ankro', // substantive
-	link_new_tab: 'Malfermu hiperligilon en novan langeton', // imperative
-	underline: 'Substrekita', // adjective
-	alignment: 'Ĝisrandigo', // substantive
-	filename: 'Dosiernomo (fakultativa)', // substantive
-	edit: 'Redaktu', // imperative
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/es.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/es.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/es.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/es.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,74 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['es'] = {
-	html: 'HTML',
-	video: 'Insertar video...',
-	image: 'Insertar imagen...',
-	table: 'Tabla',
-	link: 'Enlace',
-	link_insert: 'Insertar enlace ...',
-	link_edit: 'Editar enlace',
-	unlink: 'Desenlazar',
-	formatting: 'Estilos',
-	paragraph: 'Texto normal',
-	quote: 'Cita',
-	code: 'Código',
-	header1: 'Cabecera 1',
-	header2: 'Cabecera 2',
-	header3: 'Cabecera 3',
-	header4: 'Cabecera 4',
-	header5: 'Cabecera 5',
-	bold:  'Negrita',
-	italic: 'Itálica',
-	fontcolor: 'Color de fuente',
-	backcolor: 'Color de fondo',
-	unorderedlist: 'Lista desordenada',
-	orderedlist: 'Lista ordenada',
-	outdent: 'Disminuir sangrado',
-	indent: 'Aumentar sangrado',
-	cancel: 'Cancelar',
-	insert: 'Insertar',
-	save: 'Guardar',
-	_delete: 'Borrar',
-	insert_table: 'Insertar tabla...',
-	insert_row_above: 'Añadir fila encima',
-	insert_row_below: 'Añadir fila debajo',
-	insert_column_left: 'Añadir columna a la izquierda',
-	insert_column_right: 'Añadir column a la derecha',
-	delete_column: 'Borrar columna',
-	delete_row: 'Borrar fila',
-	delete_table: 'Borrar tabla',
-	rows: 'Filas',
-	columns: 'Columnas',
-	add_head: 'Añadir cabecera',
-	delete_head: 'Borrar cabecera',
-	title: 'Título',
-	image_position: 'Posición',
-	none: 'Ninguna',
-	left: 'Izquierda',
-	right: 'Derecha',
-	image_web_link: 'Enlace web de la imágen',
-	text: 'Texto',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Código de inserción de video',
-	file: 'Insertar archivo...',
-	upload: 'Cargar',
-	download: 'Descargar',
-	choose: 'Elegir',
-	or_choose: 'O elegir',
-	drop_file_here: 'Arrastra y suelta el archivo aqui',
-	align_left:	'Alinear texto a la izquierda',
-	align_center: 'Centrar texto',
-	align_right: 'Alinear texto a la derecha',
-	align_justify: 'Justificar texto',
-	horizontalrule: 'Insertar línea horizontal',
-	deleted: 'Borrado',
-	anchor: 'Anchor',
-	link_new_tab: 'Abrir enlace en una nueva pestaña',
-	underline: 'Subrayado',
-	alignment: 'Alineación',
-	filename: 'Nombre (opcional)',
-	edit: 'Editar',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['es'] = {
+    "format": "Formato",
+    "image": "Imagen",
+    "file": "Archivo",
+    "link": "Enlace",
+    "bold": "Negrita",
+    "italic": "Cursiva",
+    "deleted": "Tachado",
+    "underline": "Subrayado",
+    "bold-abbr": "N",
+    "italic-abbr": "C",
+    "deleted-abbr": "T",
+    "underline-abbr": "S",
+    "lists": "Listas",
+    "link-insert": "Insertar enlace",
+    "link-edit": "Editar enlace",
+    "link-in-new-tab": "Abrir enlace en nueva pestaña",
+    "unlink": "Quitar enlace",
+    "cancel": "Cancelar",
+    "close": "Cerrar",
+    "insert": "Insertar",
+    "save": "Guardar",
+    "delete": "Borrar",
+    "text": "Texto",
+    "edit": "Editar",
+    "title": "Título",
+    "paragraph": "Texto normal",
+    "quote": "Citar",
+    "code": "Código",
+    "heading1": "Cabecera 1",
+    "heading2": "Cabecera 2",
+    "heading3": "Cabecera 3",
+    "heading4": "Cabecera 4",
+    "heading5": "Cabecera 5",
+    "heading6": "Cabecera 6",
+    "filename": "Nombre",
+    "optional": "Opcional",
+    "unorderedlist": "Lista sin orden",
+    "orderedlist": "Lista ordenada",
+    "outdent": "Quitar sangría",
+    "indent": "Sangría",
+    "horizontalrule": "Línea",
+    "upload-label": "Suelta tu archivo aquí o ",
+    "accessibility-help-label": "Editor de texto enriquecido",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/es_ar.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/es_ar.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/es_ar.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/es_ar.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['es_ar'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Imágen',
-	table: 'Tabla',
-	link: 'Enlace',
-	link_insert: 'Insertar enlace ...',
-	link_edit: 'Edit link',
-	unlink: 'Eliminar enlace',
-	formatting: 'Estilos',
-	paragraph: 'Párrafo',
-	quote: 'Comillas',
-	code: 'Código',
-	header1: 'Cabecera 1',
-	header2: 'Cabecera 2',
-	header3: 'Cabecera 3',
-	header4: 'Cabecera 4',
-	header5: 'Cabecera 5',
-	bold:  'Negrita',
-	italic: 'Itálica',
-	fontcolor: 'Color fuente',
-	backcolor: 'Color fondo',
-	unorderedlist: 'Lista sin orden',
-	orderedlist: 'Lista ordenada',
-	outdent: 'Disminuir sangría',
-	indent: 'Aumentar sangría',
-	cancel: 'Cancelar',
-	insert: 'Agregar',
-	save: 'Guardar',
-	_delete: 'Eliminar',
-	insert_table: 'Agregar tabla',
-	insert_row_above: 'Agregar fila arriba',
-	insert_row_below: 'Agregar fila debajo',
-	insert_column_left: 'Agregar columna a la izquierda',
-	insert_column_right: 'Agregar column a la derecha',
-	delete_column: 'Eliminar columna',
-	delete_row: 'Eliminar fila',
-	delete_table: 'Eliminar tabla',
-	rows: 'Filas',
-	columns: 'Columnas',
-	add_head: 'Agregar encabezado',
-	delete_head: 'Eliminar encabezado',
-	title: 'Título',
-	image_position: 'Posición',
-	none: 'ninguna',
-	left: 'izquierda',
-	right: 'derecha',
-	image_web_link: 'Enlace de imagen web',
-	text: 'Texto',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Código embebido del video',
-	file: 'Archivo',
-	upload: 'Cargar',
-	download: 'Descargar',
-	choose: 'Seleccionar',
-	or_choose: 'O seleccionar',
-	drop_file_here: 'Soltar el archivo aquí',
-	align_left:	'Alinear a la izquierda',
-	align_center: 'Alinear al centro',
-	align_right: 'Alinear a la derecha',
-	align_justify: 'Justificar',
-	horizontalrule: 'Trazo horizontal',
-	fullscreen: 'Pantalla completa',
-	deleted: 'Eliminado',
-	anchor: 'Anclaje',
-	link_new_tab: 'Abrir enlace en otra pestaña',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/fa.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/fa.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/fa.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/fa.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['fa'] = {
-	html: 'اچ تی ام ال',
-	video: 'درج ویدیو...',
-	image: 'درج تصویر',
-	table: 'جدول',
-	link: 'پیوند',
-	link_insert: 'درج پیوند ...',
-	link_edit: 'Edit link',
-	unlink: 'از بین بردن پیوند',
-	formatting: 'فالب بندی',
-	paragraph: 'پراگراف',
-	quote: 'نقل قول',
-	code: 'کد',
-	header1: 'سرامد 1',
-	header2: 'سرامد 2',
-	header3: 'سرامد 3',
-	header4: 'سرامد 4',
-	header5: 'سرامد 5',
-	bold:  'درشت',
-	italic: 'خمیده',
-	fontcolor: 'رنگ قلم',
-	backcolor: 'رنگ ضمینه',
-	unorderedlist: 'فهرست نامرتب',
-	orderedlist: 'فهرست مرتب شده',
-	outdent: 'بیرو رفتگی',
-	indent: 'تو رفتگی',
-	cancel: 'انصراف',
-	insert: 'درج',
-	save: 'ذخیره',
-	_delete: 'حذف',
-	insert_table: 'درج جدول ..',
-	insert_row_above: 'سطر جدید در بالا',
-	insert_row_below: 'سطر جدید در پائین',
-	insert_column_left: 'ستون جدید در سمت چپ',
-	insert_column_right: 'ستون جدید در سمت راست',
-	delete_column: 'حذف ستون',
-	delete_row: 'حذف سطر',
-	delete_table: 'حذف جدول',
-	rows: 'سطرها',
-	columns: 'ستونها',
-	add_head: 'درج سر ستون ',
-	delete_head: 'حذف سرستون',
-	title: 'عنوان',
-	image_position: 'موقعیت',
-	none: 'هیچیک',
-	left: 'چپ',
-	right: 'راست',
-	image_web_link: 'آدرس تصویر در اینترنت',
-	text: 'متن',
-	mailto: 'ایمیل',
-	web: 'آدرس',
-	video_html_code: 'کد نمایش ویدئو',
-	file: 'درج فایل ....',
-	upload: 'بارگزاری',
-	download: 'بارگیری',
-	choose: 'انتخاب کنید',
-	or_choose: 'یا انتخاب کنید',
-	drop_file_here: 'این فایل ها حذف شوند',
-	align_left:	'چپ جین',
-	align_center: 'وسط چین',
-	align_right: 'راست چین',
-	align_justify: 'کشیده',
-	horizontalrule: 'درج خط جدا کننده',
-	fullscreen: 'نمایش کامل',
-	deleted: 'حذف شده',
-	anchor: 'قلاب',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['fa'] = {
+    "format": "فرمت",
+    "image": "تصویر",
+    "file": "فایل",
+    "link": "لینک",
+    "bold": "ضخیم",
+    "italic": "کج",
+    "deleted": "خط خورده",
+    "underline": "زیرخط دار",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "لیست",
+    "link-insert": "اضافه کردن لینک",
+    "link-edit": "ویرایش لینک",
+    "link-in-new-tab": "باز شدن لینک در صفحه جدید",
+    "unlink": "غیرفعال کردن لینک",
+    "cancel": "لغو",
+    "close": "بستن",
+    "insert": "اضافه",
+    "save": "ذخیره",
+    "delete": "حذف",
+    "text": "متن",
+    "edit": "ویرایش",
+    "title": "عنوان",
+    "paragraph": "متن معمولی",
+    "quote": "نقل قول",
+    "code": "کد",
+    "heading1": "سربرگ ۱",
+    "heading2": "سربرگ ۲",
+    "heading3": "سربرگ ۳",
+    "heading4": "سربرگ ۴",
+    "heading5": "سربرگ ۵",
+    "heading6": "سربرگ ۶",
+    "filename": "نام",
+    "optional": "اختیاری",
+    "unorderedlist": "لیست نامرتب",
+    "orderedlist": "لیست مرتب",
+    "outdent": "بیرون آمدگی",
+    "indent": "تورفتگی",
+    "horizontalrule": "خط",
+    "upload-label": "فایل مورد نظر را اینجا رها کنید یا",
+    "accessibility-help-label": "ویرایشگر متن پیشرفته",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/fi.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/fi.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/fi.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/fi.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,74 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['fi'] = {
-	html: 'HTML',
-	video: 'Lisää video',
-	image: 'Lisää kuva',
-	table: 'Taulukko',
-	link: 'Linkki',
-	link_insert: 'Lisää linkki',
-	link_edit: 'Muokkaa linkkiä',
-	unlink: 'Poista linkki',
-	formatting: 'Tyylit',
-	paragraph: 'Normaaliteksti',
-	quote: 'Lainaus',
-	code: 'Koodi',
-	header1: 'Otsikko 1',
-	header2: 'Otsikko 2',
-	header3: 'Otsikko 3',
-	header4: 'Otsikko 4',
-	header5: 'Otsikko 5',
-	bold:  'Lihavointi',
-	italic: 'Kursivointi',
-	fontcolor: 'Tekstin väri',
-	backcolor: 'Taustaväri',
-	unorderedlist: 'Luettelo luettelomerkein',
-	orderedlist: 'Numeroitu luettelo',
-	outdent: 'Vähennä sisennystä',
-	indent: 'Lisää sisennystä',
-	cancel: 'Peru',
-	insert: 'Lisää',
-	save: 'Tallenna',
-	_delete: 'Poista',
-	insert_table: 'Lisää taulukko',
-	insert_row_above: 'Lisää rivi ylle',
-	insert_row_below: 'Lisää rivi alle',
-	insert_column_left: 'Lisää sarake vasemmalle',
-	insert_column_right: 'Lisää sarake oikealle',
-	delete_column: 'Poista sarake',
-	delete_row: 'Poista rivi',
-	delete_table: 'Poista taulukko',
-	rows: 'Rivit',
-	columns: 'Sarakkeet',
-	add_head: 'Lisää otsikkorivi',
-	delete_head: 'Poista otsikkorivi',
-	title: 'Kuvateksti',
-	image_position: 'Kuvan sijainti',
-	none: 'oletus',
-	left: 'vasen',
-	right: 'oikea',
-	image_web_link: 'Kuvan URL-osoite',
-	text: 'Teksti',
-	mailto: 'Sähköposti',
-	web: 'URL-osoite',
-	video_html_code: 'Videon upotuskoodi',
-	file: 'Lisää tiedosto',
-	upload: 'Lähetä',
-	download: 'Lataa',
-	choose: 'Valitse',
-	or_choose: 'tai valitse',
-	drop_file_here: 'Vedä ja pudota kuva tähän',
-	align_left:	'Tasaa vasemmalle',
-	align_center: 'Keskitä',
-	align_right: 'Tasaa oikealle',
-	align_justify: 'Tasaa molemmat reunat',
-	horizontalrule: 'Lisää vaakaviiva',
-	deleted: 'Poistettu',
-	anchor: 'Ankkuri',
-	link_new_tab: 'Avaa linkki uudessa välilehdessä',
-	underline: 'Alleviivaa',
-	alignment: 'Tasaus',
-	filename: 'Nimi (valinnainen)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['fi'] = {
+    "format": "Muotoilut",
+    "image": "Kuva",
+    "file": "Tiedosto",
+    "link": "Linkki",
+    "bold": "Lihavointi",
+    "italic": "Kursivointi",
+    "deleted": "Poistettu",
+    "underline": "Alleviivaa",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Luettelot",
+    "link-insert": "Lisää linkki",
+    "link-edit": "Muokkaa linkkiä",
+    "link-in-new-tab": "Avaa linkki uudessa välilehdessä",
+    "unlink": "Poista linkki",
+    "cancel": "Peru",
+    "close": "Sulkea",
+    "insert": "Lisää",
+    "save": "Tallenna",
+    "delete": "Poista",
+    "text": "Teksti",
+    "edit": "Muokata",
+    "title": "Title",
+    "paragraph": "Normaaliteksti",
+    "quote": "Lainaus",
+    "code": "Koodi",
+    "heading1": "Otsikko 1",
+    "heading2": "Otsikko 2",
+    "heading3": "Otsikko 3",
+    "heading4": "Otsikko 4",
+    "heading5": "Otsikko 5",
+    "heading6": "Otsikko 6",
+    "filename": "Nimi (valinnainen)",
+    "optional": "valinnainen",
+    "unorderedlist": "Luettelo luettelomerkein",
+    "orderedlist": "Numeroitu luettelo",
+    "outdent": "Vähennä sisennystä",
+    "indent": "Lisää sisennystä",
+    "horizontalrule": "Viiva",
+    "upload-label": "Vedä ja pudota kuva tähän ",
+    "accessibility-help-label": "Rich text editor",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/fr.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/fr.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/fr.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/fr.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,74 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['fr'] = {
-	html: 'Code HTML',
-	video: 'Insérer une vidéo...',
-	image: 'Insérer une image...',
-	table: 'Tableau',
-	link: 'Lien',
-	link_insert: 'Insérer un lien...',
-	link_edit: 'Modifier le lien',
-	unlink: 'Supprimer le lien',
-	formatting: 'Styles',
-	paragraph: 'Paragraphe',
-	quote: 'Citation',
-	code: 'Code',
-	header1: 'Titre 1',
-	header2: 'Titre 2',
-	header3: 'Titre 3',
-	header4: 'Titre 4',
-	header5: 'Titre 5',
-	bold:  'Gras',
-	italic: 'Italique',
-	fontcolor: 'Couleur du texte',
-	backcolor: 'Couleur d\'arrière plan du texte',
-	unorderedlist: 'Liste à puces',
-	orderedlist: 'Liste numérotée',
-	outdent: 'Diminuer le retrait',
-	indent: 'Augmenter le retrait',
-	cancel: 'Annuler',
-	insert: 'Insérer',
-	save: 'Enregistrer',
-	_delete: 'Supprimer',
-	insert_table: 'Insérer un tableau...',
-	insert_row_above: 'Ajouter une rangée au-dessus',
-	insert_row_below: 'Ajouter une rangée en-dessous',
-	insert_column_left: 'Ajouter une colonne à gauche',
-	insert_column_right: 'Ajouter une colonne à droite',
-	delete_column: 'Supprimer la colonne',
-	delete_row: 'Supprimer la rangée',
-	delete_table: 'Supprimer le tableau',
-	rows: 'Rangées',
-	columns: 'Colonnes',
-	add_head: 'Ajouter un en-tête',
-	delete_head: 'Supprimer l\'en-tête',
-	title: 'Titre',
-	image_position: 'Position',
-	none: 'Aucun',
-	left: 'Gauche',
-	right: 'Droite',
-	image_web_link: 'Adresse URL de l\'image',
-	text: 'Texte',
-	mailto: 'Courriel',
-	web: 'Adresse URL',
-	video_html_code: 'Code d\'intégration du video',
-	file: 'Insérer un fichier...',
-	upload: 'Téléverser',
-	download: 'Télécharger',
-	choose: 'Choisir',
-	or_choose: 'Ou choisissez',
-	drop_file_here: 'Déposez le fichier ici',
-	align_left:	'Aligner à gauche',
-	align_center: 'Aligner au centre',
-	align_right: 'Aligner à droite',
-	align_justify: 'Justifier',
-	horizontalrule: 'Insérer une ligne horizontale',
-	deleted: 'Supprimé',
-	anchor: 'Ancre',
-	link_new_tab: 'Ouvrir le lien dans un nouvel onglet',
-	underline: 'Souligner',
-	alignment: 'Alignement',
-	filename: 'Nom de fichier (optionnel)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['fr'] = {
+    "format": "Format",
+    "image": "Image",
+    "file": "Fichier",
+    "link": "Lien",
+    "bold": "Gras",
+    "italic": "Italique",
+    "deleted": "Barré",
+    "underline": "Souligné",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Listes",
+    "link-insert": "Insérer un lien",
+    "link-edit": "Editer le lien",
+    "link-in-new-tab": "Ouvrir le lien dans un nouvel onglet",
+    "unlink": "Retirer le lien",
+    "cancel": "Annuler",
+    "close": "Fermer",
+    "insert": "Insérer",
+    "save": "Sauvegarder",
+    "delete": "Supprimer",
+    "text": "Texte",
+    "edit": "Editer",
+    "title": "Titre",
+    "paragraph": "Texte normal",
+    "quote": "Citation",
+    "code": "Code",
+    "heading1": "Titre 1",
+    "heading2": "Titre 2",
+    "heading3": "Titre 3",
+    "heading4": "Titre 4",
+    "heading5": "Titre 5",
+    "heading6": "Titre 6",
+    "filename": "Nom",
+    "optional": "Optionnel",
+    "unorderedlist": "Liste non-ordonnée",
+    "orderedlist": "Liste ordonnée",
+    "outdent": "Réduire le retrait",
+    "indent": "Augmenter le retrait",
+    "horizontalrule": "Ligne",
+    "upload-label": "Déposez un fichier ici ou ",
+    "accessibility-help-label": "Editeur de texte enrichi",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ge.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ge.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ge.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ge.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['ge'] = {
-	html: 'HTML კოდი',
-	video: 'ვიდეოს ჩასმა',
-	image: 'სურათის ჩასმა',
-	table: 'ცხრილი',
-	link: 'ბმული',
-	link_insert: 'ბმულის ჩასმა',
-	link_edit: 'ბმულის რედაქტირება',
-	unlink: 'ბმულის გაუქმება',
-	formatting: 'ტექსტის ფორმატირება',
-	paragraph: 'პარაგრაფი',
-	quote: 'ციტატა',
-	code: 'კოდი',
-	header1: 'სათაური 1',
-	header2: 'სათაური 2',
-	header3: 'სათაური 3',
-	header4: 'სათაური 4',
-	header5: 'სათაური 5',
-	bold:  'მსხვილი',
-	italic: 'დახრილი',
-	fontcolor: 'ტექსტის ფერი',
-	backcolor: 'ფონის ფერი',
-	unorderedlist: 'დაუნომრავი სია',
-	orderedlist: 'დანომრილი სია',
-	outdent: 'ტექსტის გამოწევა',
-	indent: 'ტექსტის შეწევა',
-	cancel: 'გაუქმება',
-	insert: 'ჩასმა',
-	save: 'შენახვა',
-	_delete: 'წაშლა',
-	insert_table: 'ცხრილის ჩასმა',
-	insert_row_above: 'რიგის ზემოდან დამატება',
-	insert_row_below: 'რიგის ქვემოდან დამატება',
-	insert_column_left: 'სვეტის მარცხნიდან დამატება',
-	insert_column_right: 'სვეტის მარჯვნიდან დამატება',
-	delete_column: 'სვეტის წაშლა',
-	delete_row: 'რიგის წაშლა',
-	delete_table: 'ცხრილის წაშლა',
-	rows: 'რიგი',
-	columns: 'სვეტი',
-	add_head: 'სათაურის დამატება',
-	delete_head: 'სათაურის წაშლა',
-	title: 'სათაური',
-	image_position: 'მდებარეობა',
-	none: 'არსად',
-	left: 'მარცხნივ',
-	right: 'მარჯვნივ',
-	image_web_link: 'სურათის ვებ-მისამართი',
-	text: 'ტექსტი',
-	mailto: 'ელ. მისამართი',
-	web: 'მისამართი',
-	video_html_code: 'ვიდეოს HTML Embed კოდი',
-	file: 'ფაილის ჩასმა',
-	upload: 'ატვირთვა',
-	download: 'ჩამოტვირთვა',
-	choose: 'არჩევა',
-	or_choose: 'ან აირჩიეთ',
-	drop_file_here: 'ჩააგდეთ ფაილი აქ',
-	align_left:	'მარცხენა მხრიდან',
-	align_center: 'ცენტრში',
-	align_right: 'მარჯვენა მხრიდან',
-	align_justify: 'ორივე მხრიდან',
-	horizontalrule: 'ჰორიზონტალური ხაზის ჩასმა',
-	deleted: 'ხაზგადასმული',
-	anchor: 'ბმული',
-	link_new_tab: 'ახალ ფანჯარაში გასხნა',
-	underline: 'ხაზგასმული',
-	alignment: 'ტექსტის გასწორება',
-	filename: 'სახელი (არასავალდებულო)',
-	edit: 'რედაქტირება',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/he.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/he.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/he.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/he.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,74 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['he'] = {
-	html: 'HTML',
-	video: 'הכנס וידאו...',
-	image: 'הכנס תמונה...',
-	table: 'טבלה',
-	link: 'קישור',
-	link_insert: 'הכנס קישור',
-	link_edit: 'Edit link',
-	unlink: 'הסרת קישור',
-	formatting: 'עיצוב',
-	paragraph: 'פסקה',
-	quote: 'ציטוט',
-	code: 'קוד',
-	header1: 'כותרת 1',
-	header2: 'כותרת 2',
-	header3: 'כותרת 3',
-	header4: 'כותרת 4',
-	header5: 'כותרת 5',
-	bold:  'מודגש',
-	italic: 'מוטה',
-	fontcolor: 'צבע גופן',
-	backcolor: 'צבע רקע',
-	unorderedlist: 'רשימת תבליטים',
-	orderedlist: 'רשימה ממוספרת',
-	outdent: 'הזחה החוצה',
-	indent: 'הזחה פנימה',
-	cancel: 'ביטול',
-	insert: 'הכנס',
-	save: 'שמור',
-	_delete: 'מחק',
-	insert_table: 'הכנס טבלה...',
-	insert_row_above: 'הוסף שורה מעל',
-	insert_row_below: 'הוסף שורה מתחת',
-	insert_column_left: 'הוסף עמודה משמאל',
-	insert_column_right: 'הוסף עמודה מימין',
-	delete_column: 'מחק עמודה',
-	delete_row: 'מחק שורה',
-	delete_table: 'מחק טבלה',
-	rows: 'שורות',
-	columns: 'עמודות',
-	add_head: 'הוסף Head',
-	delete_head: 'מחק Head',
-	title: 'כותרת',
-	image_position: 'מיקום',
-	none: 'ריק',
-	left: 'שמאל',
-	right: 'ימין',
-	image_web_link: 'קישור תמונה',
-	text: 'טקסט',
-	mailto: 'דואר אלקטרוני',
-	web: 'URL',
-	video_html_code: 'קוד הטבעת וידאו',
-	file: 'הכנס קובץ...',
-	upload: 'טען',
-	download: 'הורד',
-	choose: 'בחר',
-	or_choose: 'או בחר',
-	drop_file_here: 'שחרר קובץ כאן',
-	align_left:	'ישר טקסט לשמאל',
-	align_center: 'מרכז טקסט',
-	align_right: 'ישר טקסט לימין',
-	align_justify: 'ישור דו צידי',
-	horizontalrule: 'הכנס קו הפרדה אופקי',
-	deleted: 'נמחק',
-	anchor: 'עוגן',
-	link_new_tab: 'פתח קישור בלשונית חדשה',
-	underline: 'קו תחתון',
-	alignment: 'יישור',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['he'] = {
+    "format": "פורמט",
+    "image": "תמונה",
+    "file": "קובץ",
+    "link": "קישור",
+    "bold": "מודגש",
+    "italic": "נטוי",
+    "deleted": "מחוק",
+    "underline": "Underline",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "רשימות",
+    "link-insert": "הוסף קישור",
+    "link-edit": "ערוך קישור",
+    "link-in-new-tab": "פתח קישור בחלון חדש",
+    "unlink": "הסר קישור",
+    "cancel": "בטל",
+    "close": "סגור",
+    "insert": "הכנס",
+    "save": "שמור",
+    "delete": "מחק",
+    "text": "טקסט",
+    "edit": "ערוך",
+    "title": "כותרת",
+    "paragraph": "טקסט רגיל",
+    "quote": "ציטוט",
+    "code": "קוד",
+    "heading1": "כותרת 1",
+    "heading2": "כותרת 2",
+    "heading3": "כותרת 3",
+    "heading4": "כותרת 4",
+    "heading5": "כותרת 5",
+    "heading6": "כותרת 6",
+    "filename": "שם",
+    "optional": "אופציונאלי",
+    "unorderedlist": "רשימת נקודות",
+    "orderedlist": "רשימה ממוספרת",
+    "outdent": "קרב לשוליים",
+    "indent": "הרחק מהשוליים",
+    "horizontalrule": "קו אופקי",
+    "upload-label": "גרור קובץ לכאן או ",
+    "accessibility-help-label": "עורך טקסט עשיר",
+    "caption": "כיתוב",
+    "bulletslist": "נקודות",
+    "numberslist": "ממוספר",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/hr.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/hr.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/hr.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/hr.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function($) {
-	$.Redactor.opts.langs['hr'] = {
-		html: 'HTML',
-		video: 'Umetni video',
-		image: 'Umetni sliku',
-		table: 'Tablica',
-		link: 'Poveznica',
-		link_insert: 'Umetni poveznicu',
-		link_edit: 'Uredi poveznicu',
-		unlink: 'Ukloni poveznicu',
-		formatting: 'Ure&#273ivanje',
-		paragraph: 'Paragraf',
-		quote: 'Umetni citat',
-		code: 'Izvorni k&ocirc;d',
-		header1: 'Zaglavlje 1',
-		header2: 'Zaglavlje 2',
-		header3: 'Zaglavlje 3',
-		header4: 'Zaglavlje 4',
-		header5: 'Zaglavlje 5',
-		bold: 'Podebljaj',
-		italic: 'Nakosi',
-		fontcolor: 'Boja slova',
-		backcolor: 'Boja pozadine',
-		unorderedlist: 'Nesortirana lista',
-		orderedlist: 'Sortirana lista',
-		outdent: 'Izvuci',
-		indent: 'Uvuci',
-		cancel: 'Odustani',
-		insert: 'Umetni',
-		save: 'Spremi',
-		_delete: 'Izbri&scaron;i',
-		insert_table: 'Umetni tablicu',
-		insert_row_above: 'Dodaj redak iznad',
-		insert_row_below: 'Dodaj redak ispod',
-		insert_column_left: 'Dodaj stupac lijevo',
-		insert_column_right: 'Dodaj stupac desno',
-		delete_column: 'Ukloni stupac',
-		delete_row: 'Ukloni redak',
-		delete_table: 'Ukloni tablicu',
-		rows: 'Redaka',
-		columns: 'Stupaca',
-		add_head: 'Dodaj zaglavlje',
-		delete_head: 'Ukloni zaglavlje',
-		title: 'Naslov',
-		image_position: 'Poravnanje',
-		none: 'Nema',
-		left: 'lijevo',
-		right: 'desno',
-		center: 'centriraj',
-		image_web_link: 'Internet adresa slike',
-		text: 'Tekst',
-		mailto: 'Email',
-		web: 'Internet adresa',
-		video_html_code: 'Video k&ocirc;d',
-		file: 'Umetni datoteku',
-		upload: 'Po&scaron;alji datoteku',
-		download: 'Preuzmi datoteku',
-		choose: 'Odaberi',
-		or_choose: 'ili ru&#269no odaberi',
-		drop_file_here: 'Povuci datoteku ovdje',
-		align_left: 'Poravnaj lijevo',
-		align_center: 'Centriraj',
-		align_right: 'Poravnaj desno',
-		align_justify: 'Od ruba do ruba',
-		horizontalrule: 'Umetni horizontalnu crtu',
-		deleted: 'Precrtaj',
-		anchor: 'Sidro',
-		link_new_tab: 'Otvori u novom prozoru',
-		underline: 'Podvuci',
-		alignment: 'Poravnanje',
-		filename: 'Naziv (neobavezno)',
-		edit: 'Uredi',
-		fullscreen: 'Cijeli zaslon'
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/hu.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/hu.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/hu.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/hu.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,76 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['hu'] = {
-	html: 'HTML',
-	video: 'Videó',
-	image: 'Kép',
-	table: 'Tábla',
-	link: 'Link',
-	link_insert: 'Link beszúrás ...',
-	link_edit: 'Edit link',
-	unlink: 'Link megszüntetés',
-	formatting: 'Stílusok',
-	paragraph: 'Bekezdés',
-	quote: 'Idézet',
-	code: 'Kód',
-	header1: 'Címsor 1',
-	header2: 'Címsor 2',
-	header3: 'Címsor 3',
-	header4: 'Címsor 4',
-	header5: 'Címsor 5',
-	bold:  'Félkövér',
-	italic: 'Dőlt',
-	fontcolor: 'Szöveg szine',
-	backcolor: 'Szöveg hátterének szine',
-	unorderedlist: 'Nem számozott lista',
-	orderedlist: 'Számozott lista',
-	outdent: 'Outdent',
-	indent: 'Indent',
-	cancel: 'Mégsem',
-	insert: 'Beszurás',
-	save: 'Mentés',
-	_delete: 'Törlés',
-	insert_table: 'Táblázat beszúrása',
-	insert_row_above: 'Sor beszúrása az aktuális sor fölé',
-	insert_row_below: 'Sor beszúrása ez alá',
-	insert_column_left: 'Oszlop beszúrása ettöl balra',
-	insert_column_right: 'Oszlop hozzáadása ettöl jobbra',
-	delete_column: 'Oszlop törlése',
-	delete_row: 'Sor törlése',
-	delete_table: 'Táblázat törlése',
-	rows: 'Sorok',
-	columns: 'Oszlopok',
-	add_head: 'Fejrész hozzáadása',
-	delete_head: 'Fejrész törlése',
-	title: 'Felira',
-	image_view: 'Kép megnézése',
-	image_position: 'Pozició',
-	none: 'nincs',
-	left: 'bal',
-	right: 'jobb',
-	image_web_link: 'Link a képre',
-	text: 'Szöveg',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Videó embed code',
-	file: 'File',
-	upload: 'Feltöltés',
-	download: 'Letöltés',
-	choose: 'Válassz',
-	or_choose: 'Vagy válassz',
-	drop_file_here: 'Ide dobd a file-t',
-	align_left:	'Balra igazítás',
-	align_center: 'Középre igazítás',
-	align_right: 'Jobbra igazítás',
-	align_justify: 'Sorkizárt',
-	horizontalrule: 'Horizontális vonal',
-	fullscreen: 'Teljes képernyős',
-	deleted: 'Törölt',
-	anchor: 'Horgony',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['hu'] = {
+    "format": "Formázás",
+    "image": "Kép",
+    "file": "Fájl",
+    "link": "Hivatkozás",
+    "bold": "Félkövér",
+    "italic": "Dőlt",
+    "deleted": "Áthúzott",
+    "underline": "Aláhúzott",
+    "bold-abbr": "F",
+    "italic-abbr": "D",
+    "deleted-abbr": "H",
+    "underline-abbr": "A",
+    "lists": "Listák",
+    "link-insert": "Hivatkozás beszúrása",
+    "link-edit": "Hivatkozás módosítása",
+    "link-in-new-tab": "Megnyitás új lapon",
+    "unlink": "Hivatkozás törlése",
+    "cancel": "Mégsem",
+    "close": "Bezárás",
+    "insert": "Beillesztés",
+    "save": "Mentés",
+    "delete": "Törlés",
+    "text": "Szöveg",
+    "edit": "Szerkesztés",
+    "title": "Cím",
+    "paragraph": "Normál szöveg",
+    "quote": "Idézet",
+    "code": "Forráskód",
+    "heading1": "Címsor 1",
+    "heading2": "Címsor 2",
+    "heading3": "Címsor 3",
+    "heading4": "Címsor 4",
+    "heading5": "Címsor 5",
+    "heading6": "Címsor 6",
+    "filename": "Név",
+    "optional": "választható",
+    "unorderedlist": "Rendezett lista",
+    "orderedlist": "Számozott lista",
+    "outdent": "Behúzás csökkentése",
+    "indent": "Behúzás növelése",
+    "horizontalrule": "Vonal",
+    "upload-label": "Húzza ide a fájlt vagy ",
+    "accessibility-help-label": "Szövegszerkesztő",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/id.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/id.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/id.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/id.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['id'] = {
-    html: 'HTML',
-    video: 'Sisipkan Video...',
-    image: 'Sisipkan Gambar...',
-    table: 'Tabel',
-    link: 'Tautan',
-    link_insert: 'Sisipkan Tautan ...',
-    link_edit: 'Edit link',
-    unlink: 'Hapus Tautan',
-    formatting: 'Format',
-    paragraph: 'Paragraf',
-    quote: 'Kutipan',
-    code: 'Kode',
-    header1: 'Header 1',
-    header2: 'Header 2',
-    header3: 'Header 3',
-    header4: 'Header 4',
-    header5: 'Header 5',
-    bold:  'Tebal',
-    italic: 'Miring',
-    fontcolor: 'Warna Huruf',
-    backcolor: 'Warna Latar',
-    unorderedlist: 'Daftar tak berurutan',
-    orderedlist: 'Daftar berurutan',
-    outdent: 'Tulisan diluar',
-    indent: 'Tulisan masuk',
-    cancel: 'Batal',
-    insert: 'Sisipkan',
-    save: 'Simpan',
-    _delete: 'Hapus',
-    insert_table: 'Sisipkan Tabel...',
-    insert_row_above: 'Tambahkan Baris di atas',
-    insert_row_below: 'Tambahkan Baris di bawah',
-    insert_column_left: 'Tambahkan Kolom di kiri',
-    insert_column_right: 'Tambahkan Kolom di kanan',
-    delete_column: 'Hapus Kolom',
-    delete_row: 'Hapus Baris',
-    delete_table: 'Hapus Tabel',
-    rows: 'Baris',
-    columns: 'Kolom',
-    add_head: 'Tambahkan Head',
-    delete_head: 'Hapus Head',
-    title: 'Judul',
-    image_position: 'Posisi',
-    none: 'Kosong',
-    left: 'Kiri',
-    right: 'Kanan',
-    image_web_link: 'Tautan Gambar Web',
-    text: 'Teks',
-    mailto: 'Email',
-    web: 'URL',
-    video_html_code: 'Kode pelekatan video',
-    file: 'Sisipkan Berkas...',
-    upload: 'Unggah',
-    download: 'Unduh',
-    choose: 'Pilih',
-    or_choose: 'Atau pilih',
-    drop_file_here: 'Letakkan berkas disini',
-    align_left:	'Rata Kiri',
-    align_center: 'Rata Tengah',
-    align_right: 'Rata Kanan',
-    align_justify: 'Rata Kiri dan Kanan',
-    horizontalrule: 'Sisipkan garis horizontal',
-    fullscreen: 'Layar penuh',
-    deleted: 'Coret',
-    anchor: 'Jangkar',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/it.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/it.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/it.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/it.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,77 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['it'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Immagine',
-	table: 'Tabella',
-	link: 'Collegamento',
-	link_insert: 'Inserisci un collegamento ...',
-	link_edit: 'Modifica link',
-	unlink: 'Rimuovi il collegamento',
-	formatting: 'Stili',
-	paragraph: 'Paragrafo',
-	quote: 'Citazione',
-	code: 'Codice',
-	header1: 'H1',
-	header2: 'H2',
-	header3: 'H3',
-	header4: 'H4',
-	header5: 'H5',
-	bold:  'Grassetto',
-	italic: 'Corsivo',
-	superscript: 'Apice',
-	strikethrough: 'Barrato',
-	fontcolor: 'Colore del font',
-	backcolor: 'Colore di sfondo',
-	unorderedlist: 'Elenco puntato',
-	orderedlist: 'Elenco numerato',
-	outdent: 'Rimuovi rientro',
-	indent: 'Aumenta rientro',
-	cancel: 'Annulla',
-	insert: 'Inserisci',
-	save: 'Salva',
-	_delete: 'rimuovi',
-	insert_table: 'Inserisci tabella',
-	insert_row_above: 'Inserisci una riga sopra',
-	insert_row_below: 'Inserisci una riga sotto',
-	insert_column_left: 'Aggiungi una colonna a sinistra',
-	insert_column_right: 'Aggiungi una colonna a destra',
-	delete_column: 'Cancella colonna',
-	delete_row: 'Cancella riga',
-	delete_table: 'Cancella tabella',
-	rows: 'Righe',
-	columns: 'Colonne',
-	add_head: 'Aggiungi head',
-	delete_head: 'Cancella head',
-	title: 'Titolo',
-	image_position: 'Posizione',
-	none: 'Nessuno',
-	left: 'Sinistra',
-	right: 'Destra',
-	image_web_link: 'URL immagine',
-	text: 'Testo',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Codice da incorporare',
-	file: 'File',
-	upload: 'Upload',
-	download: 'Download',
-	choose: 'Scegli',
-	or_choose: 'O Scegli',
-	drop_file_here: 'Trascina il file qui',
-	align_left:	'Allinea a sinistra',
-	align_center: 'Allinea al centro',
-	align_right: 'Allinea a destra',
-	align_justify: 'Giustifica',
-	horizontalrule: 'Riga orizzonatale',
-	fullscreen: 'Schermo intero',
-	deleted: 'Cancellato',
-	anchor: 'Ancora',
-	link_new_tab: 'Apri link in una nuova tab',
-	underline: 'Sottolineato',
-	alignment: 'Allineamento',
-	filename: 'Nome (opzionale)',
-	edit: 'Modifica',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['it'] = {
+    "format": "Formato",
+    "image": "Immagine",
+    "file": "File",
+    "link": "Link",
+    "bold": "Grassetto",
+    "italic": "Corsivo",
+    "deleted": "Barrato",
+    "underline": "Sottolineato",
+    "bold-abbr": "G",
+    "italic-abbr": "C",
+    "deleted-abbr": "B",
+    "underline-abbr": "S",
+    "lists": "Liste",
+    "link-insert": "Inserisci link",
+    "link-edit": "Modifica link",
+    "link-in-new-tab": "Apri link in un nuovo tab",
+    "unlink": "Elimina link",
+    "cancel": "Annulla",
+    "close": "Chiudi",
+    "insert": "Inserisci",
+    "save": "Salva",
+    "delete": "Cancella",
+    "text": "Testo",
+    "edit": "Modifica",
+    "title": "Titolo",
+    "paragraph": "Testo Normale",
+    "quote": "Citazione",
+    "code": "Codice",
+    "heading1": "Titolo 1",
+    "heading2": "Titolo 2",
+    "heading3": "Titolo 3",
+    "heading4": "Titolo 4",
+    "heading5": "Titolo 5",
+    "heading6": "Titolo 6",
+    "filename": "Nome",
+    "optional": "opzionale",
+    "unorderedlist": "Lista non ordinata",
+    "orderedlist": "Lista ordinata",
+    "outdent": "De-indenta",
+    "indent": "Indenta",
+    "horizontalrule": "Linea",
+    "upload-label": "Trascina file qui oppure ",
+    "accessibility-help-label": "Editor di testo",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ja.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ja.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ja.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ja.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['ja'] = {
-	html: 'HTML',
-	video: 'ビデオ',
-	image: 'イメージ',
-	table: 'テーブル',
-	link: 'リンク',
-	link_insert: 'リンクの挿入 ...',
-	link_edit: 'Edit link',
-	unlink: 'リンクを外す',
-	formatting: 'スタイル',
-	paragraph: '段落',
-	quote: '引用',
-	code: 'コード',
-	header1: 'ヘッダー 1',
-	header2: 'ヘッダー 2',
-	header3: 'ヘッダー 3',
-	header4: 'ヘッダー 4',
-	header5: 'ヘッダー 5',
-	bold:  '太字',
-	italic: 'イタリック',
-	fontcolor: 'フォント色',
-	backcolor: '背景色',
-	unorderedlist: '番号なしリスト',
-	orderedlist: '番号つきリスト',
-	outdent: '字上げ（逆インデント）',
-	indent: '字下げ（インデント）',
-	cancel: 'キャンセル',
-	insert: '挿入',
-	save: '保存',
-	_delete: '削除',
-	insert_table: 'テーブルの挿入',
-	insert_row_above: '列を上に追加',
-	insert_row_below: '列を下に追加',
-	insert_column_left: '行を左に追加',
-	insert_column_right: '行を右に追加',
-	delete_column: '行を削除',
-	delete_row: '列を削除',
-	delete_table: 'テーブルを削除',
-	rows: '列',
-	columns: '行',
-	add_head: 'テーブルヘッダの追加',
-	delete_head: 'テーブルヘッダの削除',
-	title: 'タイトル',
-	image_position: 'イメージの位置',
-	none: '無し',
-	left: '左',
-	right: '右',
-	image_web_link: 'イメージへのリンク',
-	text: 'テキスト',
-	mailto: 'メール',
-	web: 'URL',
-	video_html_code: 'ビデオ埋め込みコード',
-	file: 'ファイル',
-	upload: 'アップロード',
-	download: 'ダウンロード',
-	choose: '選択',
-	or_choose: 'または選択',
-	drop_file_here: 'ファイルをここにドロップ',
-	align_left:	'左揃え',
-	align_center: '中央揃え',
-	align_right: '右揃え',
-	align_justify: '均等割り付け',
-	horizontalrule: '水平線',
-	fullscreen: '全画面',
-	deleted: '打消し',
-	anchor: 'アンカー',
-	link_new_tab: '新しいタブでリンクを開く',
-	underline: 'アンダーライン',
-	alignment: '行揃え',
-	filename: '名前（オプション）',
-	edit: '編集',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['ja'] = {
+    "format": "フォーマットする",
+    "image": "画像",
+    "file": "ファイル",
+    "link": "リンク",
+    "bold": "太字",
+    "italic": "イタリック体",
+    "deleted": "取り消し線",
+    "underline": "下線",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "リスト",
+    "link-insert": "リンクを挿入する",
+    "link-edit": "リンクを編集する",
+    "link-in-new-tab": "新しいタブでリンクを開く",
+    "unlink": "リンクを解除する",
+    "cancel": "取り消す",
+    "close": "閉じる",
+    "insert": "挿入する",
+    "save": "保存する",
+    "delete": "削除する",
+    "text": "テキスト",
+    "edit": "編集する",
+    "title": "タイトル",
+    "paragraph": "標準テキスト",
+    "quote": "引用",
+    "code": "コード",
+    "heading1": "見出し 1",
+    "heading2": "見出し 2",
+    "heading3": "見出し 3",
+    "heading4": "見出し 4",
+    "heading5": "見出し 5",
+    "heading6": "見出し 6",
+    "filename": "名前",
+    "optional": "任意",
+    "unorderedlist": "番号なしリスト",
+    "orderedlist": "番号付きリスト",
+    "outdent": "インデントを戻す",
+    "indent": "インデントする",
+    "horizontalrule": "線",
+    "upload-label": "ファイルをここにドロップまたは［選択する］をクリックする",
+    "accessibility-help-label": "リッチテキストエディタ",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ko.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ko.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ko.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ko.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['ko'] = {
-	html: 'HTML',
-	video: '비디오',
-	image: '이미지',
-	table: '표',
-	link: '링크',
-	link_insert: '링크 삽입',
-	link_edit: '링크 편집',
-	unlink: '링크 삭제',
-	formatting: '스타일',
-	paragraph: '단락',
-	quote: '인용',
-	code: '코드',
-	header1: '헤더 1',
-	header2: '헤더 2',
-	header3: '헤더 3',
-	header4: '헤더 4',
-	header5: '헤더 5',
-	bold:  '굵게',
-	italic: '기울임꼴',
-	fontcolor: '글자색',
-	backcolor: '배경색',
-	unorderedlist: '글머리기호',
-	orderedlist: '번호매기기',
-	outdent: '내어쓰기',
-	indent: '들여쓰기',
-	cancel: '취소',
-	insert: '삽입',
-	save: '저장',
-	_delete: '삭제',
-	insert_table: '표 삽입',
-	insert_row_above: '열을 위에 추가',
-	insert_row_below: '열을 아래에 추가',
-	insert_column_left: '행을 왼쪽에 추가',
-	insert_column_right: '행을 오른쪽에 추가',
-	delete_column: '컬럼 삭제',
-	delete_row: '행 삭제',
-	delete_table: '표 삭제',
-	rows: '행',
-	columns: '열',
-	add_head: '표 헤더 추가',
-	delete_head: '표 헤더 체거',
-	title: '제목',
-	image_position: '이미지 위치',
-	none: '없음',
-	left: '왼쪽',
-	right: '오른쪽',
-	image_web_link: '이미지 링크',
-	text: '텍스트',
-	mailto: '메일',
-	web: 'URL',
-	video_html_code: '비디오 삽입(embed) 코드',
-	file: '파일',
-	upload: '업로드',
-	download: '다운로드',
-	choose: '선택',
-	or_choose: '또는 선택',
-	drop_file_here: '파일을 여기에 떨굼',
-	align_left:	'왼쪽정렬',
-	align_center: '가운데정렬',
-	align_right: '오른쪽정렬',
-	align_justify: '가지런히정렬',
-	horizontalrule: '수평선',
-	fullscreen: '전체화면',
-	deleted: '취소선',
-	anchor: '링크',
-	link_new_tab: '새로운 탭에서 링크 열기',
-	underline: '밑줄',
-	alignment: '정렬',
-	filename: '파일명 (선택)',
-	edit: '편집',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['ko'] = {
+    "format": "포맷",
+    "image": "이미지",
+    "file": "파일",
+    "link": "링크",
+    "bold": "굵게",
+    "italic": "기울임꼴",
+    "deleted": "취소선",
+    "underline": "밑줄",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "목록",
+    "link-insert": "링크 삽입",
+    "link-edit": "링크 편집",
+    "link-in-new-tab": "새 탭에 링크 열기",
+    "unlink": "링크 끊기",
+    "cancel": "취소",
+    "close": "닫기",
+    "insert": "삽입",
+    "save": "저장",
+    "delete": "삭제",
+    "text": "글",
+    "edit": "편집",
+    "title": "제목",
+    "paragraph": "보통 글",
+    "quote": "인용",
+    "code": "코드",
+    "heading1": "제목 1",
+    "heading2": "제목 2",
+    "heading3": "제목 3",
+    "heading4": "제목 4",
+    "heading5": "제목 5",
+    "heading6": "제목 6",
+    "filename": "이름",
+    "optional": "선택",
+    "unorderedlist": "주문 안된 목록",
+    "orderedlist": "주문 목록",
+    "outdent": "내어쓰기",
+    "indent": "들여쓰기",
+    "horizontalrule": "행",
+    "upload-label": "파일을 여기 드롭 하거나 선택을 클릭",
+    "accessibility-help-label": "Rich text 편집기",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/lt.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/lt.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/lt.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/lt.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['lt'] = {
-	html: 'HTML',
-	video: 'Įkelti video...',
-	image: 'Įkelti paveiksliuką...',
-	table: 'Lentelė',
-	link: 'Nuoroda',
-	link_insert: 'Įtraukti nuorodą ...',
-	link_edit: 'Edit link',
-	unlink: 'Panaikinti nuorodą',
-	formatting: 'Formatavimas',
-	paragraph: 'Paragrafas',
-	quote: 'Citata',
-	code: 'Išnaša',
-	header1: 'Antraštė 1',
-	header2: 'Antraštė 2',
-	header3: 'Antraštė 3',
-	header4: 'Antraštė 4',
-	header5: 'Antraštė 5',
-	bold:  'Ryškus',
-	italic: 'Pasviras',
-	fontcolor: 'Teksto spalva',
-	backcolor: 'Fono spalva',
-	unorderedlist: 'Sąrašas',
-	orderedlist: 'Numeruotas sąrašas',
-	outdent: 'Pritraukti',
-	indent: 'Atitraukti',
-	cancel: 'Atšaukti',
-	insert: 'Įterpti',
-	save: 'Išsaugoti',
-	_delete: 'Ištrinti',
-	insert_table: 'Įtraukti lentelę...',
-	insert_row_above: 'Įterpti eilutę virš',
-	insert_row_below: 'Įterpti eilutę po',
-	insert_column_left: 'Įterpti stulpelį kairiau',
-	insert_column_right: 'Įterpti stulpelį dešiniau',
-	delete_column: 'Ištrinti stulpelį',
-	delete_row: 'Ištrinti eilutę',
-	delete_table: 'Ištrinti lentelę',
-	rows: 'Eilutės',
-	columns: 'Stulpeliai',
-	add_head: 'Įterpti rubriką',
-	delete_head: 'Ištrinti rubriką',
-	title: 'Pavadinimas',
-	image_position: 'Pozicija',
-	none: 'Nėra',
-	left: 'Kairė',
-	right: 'Dešinė',
-	image_web_link: 'Nuoroda į paveiksliuką',
-	text: 'Tekstas',
-	mailto: 'El. paštas',
-	web: 'Nuoroda',
-	video_html_code: 'Video įterpimo kodas',
-	file: 'Įterpti bylą...',
-	upload: 'Įkelti',
-	download: 'Parsisiųsti',
-	choose: 'Pasirinkti',
-	or_choose: 'Arba pasirinkti',
-	drop_file_here: 'Mesti failą čia',
-	align_left:	'Lygiuoti iš kairės',
-	align_center: 'Centruoti',
-	align_right: 'Lygiuoti iš dešinės',
-	align_justify: 'Išlyginti eilutes',
-	horizontalrule: 'Įterpti horizontalią liniją',
-	deleted: 'Ištrinta',
-	anchor: 'Žymė',
-	link_new_tab: 'Atidaryti nuorodą naujame lange',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/lv.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/lv.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/lv.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/lv.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['lv'] = {
-	html: 'HTML кods',
-	video: 'Video',
-	image: 'Attēls',
-	table: 'Tabula',
-	link: 'Saite',
-	link_insert: 'Iekļaut saiti ...',
-	link_edit: 'Edit link',
-	unlink: 'Noņemt saiti',
-	formatting: 'Stili',
-	paragraph: 'Vienkāršs teksts',
-	quote: 'Citāts',
-	code: 'Kods',
-	header1: 'Virsraksts 1',
-	header2: 'Virsraksts 2',
-	header3: 'Virsraksts 3',
-	header4: 'Virsraksts 4',
-	header5: 'Virsraksts 5',
-	bold:  'Pustrekns',
-	italic: 'Slīps',
-	fontcolor: 'Teksta krāsa',
-	backcolor: 'Fona krāsa',
-	unorderedlist: 'Parasts saraksts',
-	orderedlist: 'Numurēts saraksts',
-	outdent: 'Samazināt atkāpi',
-	indent: 'Palielināt atkāpi',
-	cancel: 'Atcelt',
-	insert: 'Iespraust',
-	save: 'Saglabāt',
-	_delete: 'Dzēst',
-	insert_table: 'Iespraust tabulu',
-	insert_row_above: 'Pievienot rindu no augšas',
-	insert_row_below: 'Pievienot rindu no apakšas',
-	insert_column_left: 'Pievienot stabiņu no kreisās puses',
-	insert_column_right: 'Pievienot stabiņu no labās puses',
-	delete_column: 'Dzēst stabiņu',
-	delete_row: 'Dzēst rindu',
-	delete_table: 'Dzēst tabulu',
-	rows: 'Rindas',
-	columns: 'Stabiņi',
-	add_head: 'Pievienot virsrakstu',
-	delete_head: 'Dzēst virsrakstu',
-	title: 'Uzvedne',
-	image_position: 'Аttēla apliece',
-	none: 'nav',
-	left: 'pa kreisi',
-	right: 'pa labi',
-	image_web_link: 'vai saite uz attēlu',
-	text: 'Teksts',
-	mailto: 'E-pasts',
-	web: 'URL',
-	video_html_code: 'Videoklipu kods',
-	file: 'Fails',
-	upload: 'Augšupielāde',
-	download: 'Lejupielāde',
-	choose: 'Izvēlieties',
-	or_choose: 'Vai izvēlieties',
-	drop_file_here: 'Vilkt failu uz šejieni',
-	align_left:	'Izlīdzināt pa labi',
-	align_center: 'Izlīdzināt pa kreisi',
-	align_right: 'Izlīdzināt pret centru',
-	align_justify: 'Izlīdzināt malas',
-	horizontalrule: 'Horizontāla līnija',
-	fullscreen: 'Pa visu ekrānu',
-    anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/mk.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/mk.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/mk.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/mk.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['mk'] = {
-	html: 'HTML',
-	video: 'Внеси видео...',
-	image: 'Внеси слика...',
-	table: 'Табела',
-	link: 'Линк',
-	link_insert: 'Внеси линк ...',
-	link_edit: 'Edit link',
-	unlink: 'Избриши линк',
-	formatting: 'Форматирање',
-	paragraph: 'Параграф',
-	quote: 'Цитат',
-	code: 'Код',
-	header1: 'Заглавие 1',
-	header2: 'Заглавие 2',
-	header3: 'Заглавие 3',
-	header4: 'Заглавие 4',
-	header5: 'Заглавие 5',
-	bold:  'Болдирано',
-	italic: 'Италик',
-	fontcolor: 'Боја на фонт',
-	backcolor: 'Боја на позадина',
-	unorderedlist: 'Неподредена листа',
-	orderedlist: 'Подредена листа',
-	outdent: 'Нанадвор',
-	indent: 'Навнатре',
-	cancel: 'Откажи',
-	insert: 'Внеси',
-	save: 'Зачувај',
-	_delete: 'Избриши',
-	insert_table: 'Внеси табела...',
-	insert_row_above: 'Додај ред над',
-	insert_row_below: 'Додај ред под',
-	insert_column_left: 'Додај колона лево',
-	insert_column_right: 'Додај колона десно',
-	delete_column: 'Избриши колона',
-	delete_row: 'Избриши ред',
-	delete_table: 'Избриши табела',
-	rows: 'Редови',
-	columns: 'Колони',
-	add_head: 'Додај наслов',
-	delete_head: 'Избриши наслов',
-	title: 'Наслов',
-	image_position: 'Позиција',
-	none: 'Не позиционирај',
-	left: 'Лево',
-	right: 'Десно',
-	image_web_link: 'Слика од линк',
-	text: 'Текст',
-	mailto: 'Е-маил',
-	web: 'URL',
-	video_html_code: 'Код за видео',
-	file: 'Внеси фајл...',
-	upload: 'Качи на сервер',
-	download: 'Симни',
-	choose: 'Одбери',
-	or_choose: 'Или одбери',
-	drop_file_here: 'Спушти фајл тука',
-	align_left:	'Порамни текст на лево',
-	align_center: 'Центрирај текст',
-	align_right: 'Порамни текст на десно',
-	align_justify: 'Израмни текси',
-	horizontalrule: 'Внеси хоризонтална линија',
-	deleted: 'Избришано',
-	anchor: 'Локален линк',
-	link_new_tab: 'Отвори линк во нов таб',
-	underline: 'Подвлечи',
-	alignment: 'Порамнување',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/nl.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/nl.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/nl.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/nl.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,79 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['nl'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Afbeelding',
-	table: 'Tabel',
-	link: 'Link',
-	link_insert: 'Link invoegen...',
-	link_edit: 'Edit link',
-	unlink: 'Link ontkoppelen',
-	formatting: 'Stijlen',
-	paragraph: 'Paragraaf',
-	quote: 'Citaat',
-	code: 'Code',
-	header1: 'Kop 1',
-	header2: 'Kop 2',
-	header3: 'Kop 3',
-	header4: 'Kop 4',
-	header5: 'Kop 5',
-	bold:  'Vet',
-	italic: 'Cursief',
-	fontcolor: 'Tekstkleur',
-	backcolor: 'Achtergrondkleur',
-	unorderedlist: 'Ongeordende lijst',
-	orderedlist: 'Geordende lijst',
-	outdent: 'Uitspringen',
-	indent: 'Inspringen',
-	redo: 'Opnieuw maken',
-	undo: 'Ongedaan maken',
-	cut: 'Knippen',
-	cancel: 'Annuleren',
-	insert: 'Invoegen',
-	save: 'Opslaan',
-	_delete: 'Verwijderen',
-	insert_table: 'Tabel invoegen',
-	insert_row_above: 'Rij hierboven invoegen',
-	insert_row_below: 'Rij hieronder invoegen',
-	insert_column_left: 'Kolom links toevoegen',
-	insert_column_right: 'Kolom rechts toevoegen',
-	delete_column: 'Verwijder kolom',
-	delete_row: 'Verwijder rij',
-	delete_table: 'Verwijder tabel',
-	rows: 'Rijen',
-	columns: 'Kolommen',
-	add_head: 'Titel toevoegen',
-	delete_head: 'Titel verwijderen',
-	title: 'Titel',
-	image_position: 'Positie',
-	none: 'geen',
-	left: 'links',
-	right: 'rechts',
-	image_web_link: 'Afbeelding link',
-	text: 'Tekst',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Video embed code',
-	file: 'Bestand',
-	upload: 'Uploaden',
-	download: 'Downloaden',
-	choose: 'Kies',
-	or_choose: 'Of kies',
-	drop_file_here: 'Sleep bestand hier',
-	align_left:	'Links uitlijnen',
-	align_center: 'Centreren',
-	align_right: 'Rechts uitlijnen',
-	align_justify: 'Uitvullen',
-	horizontalrule: 'Horizontale lijn',
-	fullscreen: 'Volledig scherm',
-	deleted: 'Verwijderd',
-	anchor: 'Anker',
-	link_new_tab: 'Open link in nieuw tabblad',
-	underline: 'Onderstrepen',
-	alignment: 'Uitlijning',
-	filename: 'Naam (optioneel)',
-	edit: 'Bewerk',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['nl'] = {
+    "format": "Format",
+    "image": "Afbeelding",
+    "file": "Bestand",
+    "link": "Link",
+    "bold": "Vet",
+    "italic": "Cursief",
+    "deleted": "Doorstreept",
+    "underline": "Onderstreept",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Lijsten",
+    "link-insert": "Link invoegen",
+    "link-edit": "Link Bewerken",
+    "link-in-new-tab": "Open link in nieuw tabblad",
+    "unlink": "Ontkoppelen",
+    "cancel": "Annuleren",
+    "close": "Afsluiten",
+    "insert": "Invoegen",
+    "save": "Opslaan",
+    "delete": "Verwijder",
+    "text": "Tekst",
+    "edit": "Bewerken",
+    "title": "Titel",
+    "paragraph": "Normale tekst",
+    "quote": "Citaat",
+    "code": "Code",
+    "heading1": "Koptekst 1",
+    "heading2": "Koptekst 2",
+    "heading3": "Koptekst 3",
+    "heading4": "Koptekst 4",
+    "heading5": "Koptekst 5",
+    "heading6": "Koptekst 6",
+    "filename": "Bestandsnaam",
+    "optional": "Optioneel",
+    "unorderedlist": "Ongeordende lijst",
+    "orderedlist": "Geordende lijst",
+    "outdent": "Uitspringen",
+    "indent": "Inspringen",
+    "horizontalrule": "Streep",
+    "upload-label": "Drop bestand hier of ",
+    "accessibility-help-label": "RTF editor",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
 
+})(jQuery);
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/no.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/no.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/no.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/no.js	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,57 @@
+(function ($)
+{
+	$.Redactor.opts.langs['no'] = {
+    "format": "Format",
+    "image": "Bilde",
+    "file": "Fil",
+    "link": "Link",
+    "bold": "Fet",
+    "italic": "Kursiv",
+    "deleted": "Gjennomstreking",
+    "underline": "Understreking",
+    "bold-abbr": "F",
+    "italic-abbr": "K",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Punkt",
+    "link-insert": "Sett inn link",
+    "link-edit": "Rediger link",
+    "link-in-new-tab": "Åpne link i ny fane",
+    "unlink": "Fjern Understreking",
+    "cancel": "Abryt",
+    "close": "Lukk",
+    "insert": "Sett inn",
+    "save": "Lagre",
+    "delete": "Slett",
+    "text": "Tekst",
+    "edit": "Rediger",
+    "title": "Tittel",
+    "paragraph": "Normal tekst",
+    "quote": "Sitat",
+    "code": "Kode",
+    "heading1": "Overskrift 1",
+    "heading2": "Overskrift 2",
+    "heading3": "Overskrift 3",
+    "heading4": "Overskrift 4",
+    "heading5": "Overskrift 5",
+    "heading6": "Overskrift 6",
+    "filename": "Navn",
+    "optional": "valgfri",
+    "unorderedlist": "Unordered List",
+    "orderedlist": "Punktliste",
+    "outdent": "Reduser innrykk",
+    "indent": "Øk innrykk",
+    "horizontalrule": "Linje",
+    "upload-label": "Dra fil her ",
+    "accessibility-help-label": "Rik-tekst behandler",
+    "caption": "Bildetekst",
+    "bulletslist": "Punkter",
+    "numberslist": "Nummerering",
+    "image-position": "Posisjon",
+    "none": "Ingen",
+    "left": "Venstre",
+    "right": "Høgre",
+    "center": "Senter"
+};
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/no_nb.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/no_nb.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/no_nb.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/no_nb.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-	$.Redactor.opts.langs['no_NB'] = {
-		html: 'HTML',
-		video: 'Sett inn video...',
-		image: 'Sett inn bilde...',
-		table: 'Tabell',
-		link: 'Link',
-		link_insert: 'Sett inn link...',
-		link_edit: 'Rediger link',
-		unlink: 'Fjern link',
-		formatting: 'Formatering',
-		paragraph: 'Avsnitt',
-		quote: 'Sitat',
-		code: 'Kode',
-		header1: 'Overskrift 1',
-		header2: 'Overskrift 2',
-		header3: 'Overskrift 3',
-		header4: 'Overskrift 4',
-		header5: 'Overskrift 5',
-		bold: 'Fet',
-		italic: 'Kursiv',
-		fontcolor: 'Tekstfarge',
-		backcolor: 'Bakgrunsfarge',
-		unorderedlist: 'Usortert liste',
-		orderedlist: 'Sortert liste',
-		outdent: 'Redusere innrykk',
-		indent: 'Innrykk',
-		cancel: 'Avbryt',
-		insert: 'Sett inn',
-		save: 'Lagre',
-		_delete: 'Slett',
-		insert_table: 'Sett inn tabell...',
-		insert_row_above: 'Legg til rad over',
-		insert_row_below: 'Legg til rad under',
-		insert_column_left: 'Legg til kolonne venstre',
-		insert_column_right: 'Legg til kolonne h&oslash;yre',
-		delete_column: 'Slett kolonne',
-		delete_row: 'Slett rad',
-		delete_table: 'Slett tabell',
-		rows: 'Rader',
-		columns: 'Kolonner',
-		add_head: 'Legg til tabellhode',
-		delete_head: 'Slett tabellhode',
-		title: 'Tittel',
-		image_position: 'Plassering',
-		none: 'Ingen',
-		left: 'Venstre',
-		right: 'H&oslash;yre',
-		image_web_link: 'Bildelink',
-		text: 'Tekst',
-		mailto: 'E-Post',
-		web: 'URL',
-		video_html_code: 'Kode for innbyggingsvideo eller Youtube/Vimeo link',
-		file: 'Sett inn fil...',
-		upload: 'Last opp',
-		download: 'Last ned',
-		choose: 'Velg',
-		or_choose: 'Eller velg',
-		drop_file_here: 'Slipp filen her',
-		align_left: 'Venstrejuster',
-		align_center: 'Midtjuster',
-		align_right: 'H&oslash;yrejuster',
-		align_justify: 'Balansert',
-		horizontalrule: 'Sett inn horisontal linje',
-		deleted: 'Slettet',
-		anchor: 'Anker',
-		link_new_tab: '&Aring;pne link i ny fane',
-		underline: 'Understreking',
-		alignment: 'Justering',
-		filename: 'Filnavn (valgfritt)',
-		edit: 'Endre',
-		center: 'Midten'
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/pl.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/pl.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/pl.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/pl.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['pl'] = {
-	html: 'Źródło',
-	video: 'Wideo',
-	image: 'Obrazek',
-	table: 'Tabela',
-	link: 'Link',
-	link_insert: 'Wstaw link ...',
-	link_edit: 'Edit link',
-	unlink: 'Usuń link',
-	formatting: 'Style',
-	paragraph: 'Zwykły tekst',
-	quote: 'Cytat',
-	code: 'Kod źródłowy',
-	header1: 'Nagłówek 1',
-	header2: 'Nagłówek 2',
-	header3: 'Nagłówek 3',
-	header4: 'Nagłówek 4',
-	header5: 'Nagłówek 5',
-	bold:  'Pogrubiony',
-	italic: 'Pochylony',
-	fontcolor: 'Kolor tekstu',
-	backcolor: 'Kolor tła',
-	unorderedlist: 'Wypunktowanie',
-	orderedlist: 'Numeracja',
-	outdent: 'Zwiększ wcięcie',
-	indent: 'Zmniejsz wcięcie',
-	cancel: 'Anuluj',
-	insert: 'Wstaw',
-	save: 'Zachowaj',
-	_delete: 'Usuń',
-	insert_table: 'Wstaw tabele',
-	insert_row_above: 'Dodaj wiersz na górze',
-	insert_row_below: 'Dodaj wiersz na dole',
-	insert_column_left: 'Dodaj kolumnę po lewej',
-	insert_column_right: 'Dodaj kolumnę po prawej',
-	delete_column: 'Usuń kolumnę',
-	delete_row: 'Usuń wiersz',
-	delete_table: 'Usuń tabele',
-	rows: 'Wiersze',
-	columns: 'Kolumny',
-	add_head: 'Dodaj nagłówek',
-	delete_head: 'Usuń nagłówek',
-	title: 'Wskazówka',
-	image_position: 'Obramowanie',
-	none: 'nie ma',
-	left: 'od lewej',
-	right: 'od prawej',
-	image_web_link: 'albo link do obrazku',
-	text: 'Tekst',
-	mailto: 'Poczta e-mail',
-	web: 'URL',
-	video_html_code: 'Kod źródłowy pliku wideo',
-	file: 'Plik',
-	upload: 'Wgraj na serwer',
-	download: 'Pobierz',
-	choose: 'Wybierz z listy',
-	or_choose: 'lub wybierz',
-	drop_file_here: 'Przenieś plik tutaj',
-	align_left:	'Tekst do lewej',
-	align_center: 'Wyśrodkuj',
-	align_right: 'Tekst do prawej',
-	align_justify: 'Wyjustuj',
-	horizontalrule: 'Linia pozioma',
-	fullscreen: 'Pełny ekran',
-	deleted: 'Usunięty',
-    anchor: 'Kotwica',
-	link_new_tab: 'Otwórz link w nowym oknie',
-	underline: 'Pokdreślony',
-	alignment: 'Wyrównanie',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['pl'] = {
+    "format": "Formatuj",
+    "image": "Obrazek",
+    "file": "Plik",
+    "link": "Link",
+    "bold": "Pogrubienie",
+    "italic": "Kursywa",
+    "deleted": "Przekreślenie",
+    "underline": "Podkreślenie",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Lista",
+    "link-insert": "Wstaw link",
+    "link-edit": "Edytuj link",
+    "link-in-new-tab": "Otwórz link w nowej karcie",
+    "unlink": "Usuń link",
+    "cancel": "Anuluj",
+    "close": "Zamknij",
+    "insert": "Wstaw",
+    "save": "Zapisz",
+    "delete": "Usuń",
+    "text": "Text",
+    "edit": "Edytuj",
+    "title": "Tytuł",
+    "paragraph": "Zwykły tekst",
+    "quote": "Cytat",
+    "code": "Kod",
+    "heading1": "Nagłówek 1",
+    "heading2": "Nagłówek 2",
+    "heading3": "Nagłówek 3",
+    "heading4": "Nagłówek 4",
+    "heading5": "Nagłówek 5",
+    "heading6": "Nagłówek 6",
+    "filename": "Nazwa",
+    "optional": "opcjonalnie",
+    "unorderedlist": "Lista punktowana",
+    "orderedlist": "Lista numerowana",
+    "outdent": "Zmniejsz wcięcie",
+    "indent": "Zwiększ wcięcie",
+    "horizontalrule": "Linia pozioma",
+    "upload-label": "Przenieś pliki tutaj lub... ",
+    "accessibility-help-label": "Edytor tekstu",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/pt_br.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/pt_br.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/pt_br.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/pt_br.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,74 +1,57 @@
-(function ($) {
+(function ($)
+{
 	$.Redactor.opts.langs['pt_br'] = {
-		html: 'HTML',
-		video: 'Inserir Vídeo...',
-		image: 'Inserir Imagem...',
-		table: 'Tabela',
-		link: 'Link',
-		link_insert: 'Inserir Link...',
-		link_edit: 'Editar Link',
-		unlink: 'Remover Link',
-		formatting: 'Formatação',
-		paragraph: 'Parágrafo',
-		quote: 'Citar',
-		code: 'Código',
-		header1: 'Cabeçalho 1',
-		header2: 'Cabeçalho 2',
-		header3: 'Cabeçalho 3',
-		header4: 'Cabeçalho 4',
-		header5: 'Cabeçalho 5',
-		bold:  'Negrito',
-		italic: 'Itálico',
-		fontcolor: 'Cor da Fonte',
-		backcolor: 'Cor de Fundo',
-		unorderedlist: 'Lista Não Ordenada',
-		orderedlist: 'Lista Ordenada',
-		outdent: 'Remover Identação',
-		indent: 'Identar',
-		cancel: 'Cancelar',
-		insert: 'Inserir',
-		save: 'Salvar',
-		_delete: 'Apagar',
-		insert_table: 'Inserir Tabela...',
-		insert_row_above: 'Adicionar Linha Acima',
-		insert_row_below: 'Adicionar Linha Abaixo',
-		insert_column_left: 'Adicionar Coluna à Esquerda',
-		insert_column_right: 'Adicionar Coluna à Direita',
-		delete_column: 'Eliminar Coluna',
-		delete_row: 'Eliminar Linha',
-		delete_table: 'Eliminar Tabela',
-		rows: 'Linhas',
-		columns: 'Colunas',
-		add_head: 'Adicionar Cabeçalho',
-		delete_head: 'Eliminar Cabeçalho',
-		title: 'Título',
-		image_position: 'Posição',
-		none: 'Nenhum',
-		left: 'Esquerda',
-		right: 'Direita',
-		image_web_link: 'URL de Imagem',
-		text: 'Texto',
-		mailto: 'Email',
-		web: 'URL',
-		video_html_code: 'Código de Incorporação de Vídeo',
-		file: 'Inserir Arquivo...',
-		upload: 'Upload',
-		download: 'Download',
-		choose: 'Escolha',
-		or_choose: 'Ou escolha',
-		drop_file_here: 'Solte o arquivo aqui',
-		align_left:	'Alinhar à esquerda',
-		align_center: 'Centrar',
-		align_right: 'Alinhar à direita',
-		align_justify: 'Justificar',
-		horizontalrule: 'Inserir Linha Horizontal',
-		deleted: 'Apagado',
-		anchor: 'Âncora',
-		link_new_tab: 'Abrir link em uma nova aba',
-		underline: 'Sublinhado',
-		alignment: 'Alinhamento',
-		filename: 'Nome (opcional)',
-		edit: 'Editar',
-		center: 'Centro'
-	};
-})( jQuery );
\ No newline at end of file
+    "format": "Formato",
+    "image": "Imagem",
+    "file": "Arquivo",
+    "link": "Link",
+    "bold": "Negrito",
+    "italic": "Itálico",
+    "deleted": "Tachado",
+    "underline": "Sublinhado",
+    "bold-abbr": "N",
+    "italic-abbr": "I",
+    "deleted-abbr": "T",
+    "underline-abbr": "S",
+    "lists": "Listas",
+    "link-insert": "Inserir link",
+    "link-edit": "Editar link",
+    "link-in-new-tab": "Abrir link em nova guia",
+    "unlink": "Desvincular",
+    "cancel": "Cancelar",
+    "close": "Fechar",
+    "insert": "Inserir",
+    "save": "Salvar",
+    "delete": "Excluir",
+    "text": "Texto",
+    "edit": "Editar",
+    "title": "Título",
+    "paragraph": "Texto normal",
+    "quote": "Citação",
+    "code": "Código",
+    "header1": "Cabeçalho 1",
+    "header2": "Cabeçalho 2",
+    "header3": "Cabeçalho 3",
+    "header4": "Cabeçalho 4",
+    "header5": "Cabeçalho 5",
+    "header6": "Cabeçalho 6",
+    "filename": "Nome",
+    "optional": "Opcional",
+    "unorderedlist": "Lista não ordenada",
+    "orderedlist": "Lista ordenada",
+    "outdent": "Diminuir recuo",
+    "indent": "Recuar",
+    "horizontalrule": "Linha",
+    "upload-label": "Solte o arquivo aqui ou ",
+    "accessibility-help-label": "Editor de Rich Text",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
+};
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/pt_pt.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/pt_pt.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/pt_pt.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/pt_pt.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['pt_pt'] = {
-	html: 'HTML',
-	video: 'Inserir Video...',
-	image: 'Inserir Imagem...',
-	table: 'Tabela',
-	link: 'Hiperligação',
-	link_insert: 'Inserir Hiperligação ...',
-	link_edit: 'Edit link',
-	unlink: 'Remover Hiperligação',
-	formatting: 'Formatação',
-	paragraph: 'Parágrafo',
-	quote: 'Citar',
-	code: 'Código',
-	header1: 'Cabeçalho 1',
-	header2: 'Cabeçalho 2',
-	header3: 'Cabeçalho 3',
-	header4: 'Cabeçalho 4',
-	header5: 'Cabeçalho 5',
-	bold:  'Negrito',
-	italic: 'Itálico',
-	fontcolor: 'Cor da Fonte',
-	backcolor: 'Cor de Fundo',
-	unorderedlist: 'Lista Não Ordenada',
-	orderedlist: 'Lista Ordenada',
-	outdent: 'Remover Identação',
-	indent: 'Identar',
-	cancel: 'Cancelar',
-	insert: 'Inserir',
-	save: 'Guardar',
-	_delete: 'Eliminar',
-	insert_table: 'Inserir Tabela...',
-	insert_row_above: 'Adicionar Linha Acima',
-	insert_row_below: 'Adicionar Linha Abaixo',
-	insert_column_left: 'Adicionar Coluna à Esquerda',
-	insert_column_right: 'Adicionar Coluna à Direita',
-	delete_column: 'Eliminar Coluna',
-	delete_row: 'Eliminar Linha',
-	delete_table: 'Eliminar Tabela',
-	rows: 'Linhas',
-	columns: 'Colunas',
-	add_head: 'Adicionar Cabeçalho',
-	delete_head: 'Eliminar Cabeçalho',
-	title: 'Título',
-	image_position: 'Posição',
-	none: 'Nenhum',
-	left: 'Esquerda',
-	right: 'Direita',
-	image_web_link: 'Url de Imagem',
-	text: 'Texto',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Código de Incorporação de Vídeo',
-	file: 'Inserir Ficheiro...',
-	upload: 'Upload',
-	download: 'Download',
-	choose: 'Escolha',
-	or_choose: 'Ou escolha',
-	drop_file_here: 'Largue o ficheiro aqui',
-	align_left:	'Alinhar à esquerda',
-	align_center: 'Centrar',
-	align_right: 'Alinhar à direita',
-	align_justify: 'Justificar',
-	horizontalrule: 'Inserir Linha Horizontal',
-	deleted: 'Eliminado',
-	anchor: 'Âncora',
-	link_new_tab: 'Abrir hiperligação em novo separador',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ro.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ro.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ro.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ro.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['ro'] = {
-	html: 'HTML',
-	video: 'Adauga video...',
-	image: 'Adauga imagine...',
-	table: 'Tabel',
-	link: 'Legatura web',
-	link_insert: 'Adauga legatura web...',
-	link_edit: 'Edit link',
-	unlink: 'Elimina legatura web',
-	formatting: 'Formatare',
-	paragraph: 'Paragraf',
-	quote: 'Citat',
-	code: 'Cod',
-	header1: 'Titlu 1',
-	header2: 'Titlu 2',
-	header3: 'Titlu 3',
-	header4: 'Titlu 4',
-	header5: 'Titlu 5',
-	bold:  'Aldin (Bold)',
-	italic: 'Cursiv (Italic)',
-	fontcolor: 'Culoare font',
-	backcolor: 'Culoare de fundal',
-	unorderedlist: 'Lista neordonata',
-	orderedlist: 'Lista ordonata',
-	outdent: 'Redu indentarea',
-	indent: 'Mareste indentarea',
-	cancel: 'Renunta',
-	insert: 'Adauga',
-	save: 'Salveaza',
-	_delete: 'Sterge',
-	insert_table: 'Adauga tabel...',
-	insert_row_above: 'Adauga linie deasupra',
-	insert_row_below: 'Adauga linie dedesupt',
-	insert_column_left: 'Adauga coloana la stanga',
-	insert_column_right: 'Adauga coloana la dreapta',
-	delete_column: 'Sterge coloana',
-	delete_row: 'Sterge linie',
-	delete_table: 'Sterge tabela',
-	rows: 'Linii',
-	columns: 'Coloane',
-	add_head: 'Adauga cap tabel',
-	delete_head: 'Sterge cap tabel',
-	title: 'Titlu',
-	image_position: 'Pozitie',
-	none: 'None',
-	left: 'Stanga',
-	right: 'Dreapta',
-	image_web_link: 'Legatura web imagine',
-	text: 'Text',
-	mailto: 'Adresa email',
-	web: 'Legatura web',
-	video_html_code: 'Cod adaugare video',
-	file: 'Adauga fisier...',
-	upload: 'Incarca',
-	download: 'Descarca',
-	choose: 'Alege',
-	or_choose: 'sau alege din computer',
-	drop_file_here: 'Trage fisierele aici',
-	align_left:	'Aliniere la stanga',
-	align_center: 'Centrat',
-	align_right: 'Aliniere la dreapta',
-	align_justify: 'Aliniere la margini',
-	horizontalrule: 'Adauga rigla orizontala',
-	fullscreen: 'Afisare pe tot ecranul',
-	deleted: 'Taiat (Sters)',
-	anchor: 'Ancora',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ru.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ru.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ru.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ru.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['ru'] = {
-	html: 'Код',
-	video: 'Видео',
-	image: 'Изображение',
-	table: 'Таблица',
-	link: 'Ссылка',
-	link_insert: 'Вставить ссылку ...',
-	link_edit: 'Изменить ссылку',
-	unlink: 'Удалить ссылку',
-	formatting: 'Форматирование',
-	paragraph: 'Обычный текст',
-	quote: 'Цитата',
-	code: 'Код',
-	header1: 'Заголовок 1',
-	header2: 'Заголовок 2',
-	header3: 'Заголовок 3',
-	header4: 'Заголовок 4',
-	header5: 'Заголовок 5',
-	bold:  'Полужирный',
-	italic: 'Наклонный',
-	fontcolor: 'Цвет текста',
-	backcolor: 'Заливка текста',
-	unorderedlist: 'Обычный список',
-	orderedlist: 'Нумерованный список',
-	outdent: 'Уменьшить отступ',
-	indent: 'Увеличить отступ',
-	cancel: 'Отменить',
-	insert: 'Вставить',
-	save: 'Сохранить',
-	_delete: 'Удалить',
-	insert_table: 'Вставить таблицу',
-	insert_row_above: 'Добавить строку сверху',
-	insert_row_below: 'Добавить строку снизу',
-	insert_column_left: 'Добавить столбец слева',
-	insert_column_right: 'Добавить столбец справа',
-	delete_column: 'Удалить столбец',
-	delete_row: 'Удалить строку',
-	delete_table: 'Удалить таблицу',
-	rows: 'Строки',
-	columns: 'Столбцы',
-	add_head: 'Добавить заголовок',
-	delete_head: 'Удалить заголовок',
-	title: 'Подсказка',
-	image_position: 'Обтекание текстом',
-	none: 'Нет',
-	left: 'Cлева',
-	right: 'Cправа',
-	image_web_link: 'Cсылка на изображение',
-	text: 'Текст',
-	mailto: 'Эл. почта',
-	web: 'URL',
-	video_html_code: 'Код видео ролика',
-	file: 'Файл',
-	upload: 'Загрузить',
-	download: 'Скачать',
-	choose: 'Выбрать',
-	or_choose: 'Или выберите',
-	drop_file_here: 'Перетащите файл сюда',
-	align_left:	'По левому краю',
-	align_center: 'По центру',
-	align_right: 'По правому краю',
-	align_justify: 'Выровнять текст по ширине',
-	horizontalrule: 'Горизонтальная линейка',
-	fullscreen: 'Во весь экран',
-	deleted: 'Зачеркнутый',
-	anchor: 'Якорь',
-	link_new_tab: 'Открывать в новой вкладке',
-	underline: 'Подчеркнутый',
-	alignment: 'Выравнивание',
-	filename: 'Название (необязательно)',
-	edit: 'Ред.',
-	center: 'По центру'
+(function ($)
+{
+	$.Redactor.opts.langs['ru'] = {
+    "format": "Формат",
+    "image": "Картинка",
+    "file": "Файл",
+    "link": "Ссылка",
+    "bold": "Полужирный",
+    "italic": "Курсив",
+    "deleted": "Зачеркнутый",
+    "underline": "Подчеркнутый",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Списки",
+    "link-insert": "Вставить ссылку",
+    "link-edit": "Редактировать ссылку",
+    "link-in-new-tab": "Открыть ссылку в новом табе",
+    "unlink": "Удалить ссылку",
+    "cancel": "Отменить",
+    "close": "Закрыть",
+    "insert": "Вставить",
+    "save": "Сохранить",
+    "delete": "Удалить",
+    "text": "Текст",
+    "edit": "Редактировать",
+    "title": "Title",
+    "paragraph": "Обычный текст",
+    "quote": "Цитата",
+    "code": "Код",
+    "heading1": "Заголовок 1",
+    "heading2": "Заголовок 2",
+    "heading3": "Заголовок 3",
+    "heading4": "Заголовок 4",
+    "heading5": "Заголовок 5",
+    "heading6": "Заголовок 6",
+    "filename": "Имя файла",
+    "optional": "необязательно",
+    "unorderedlist": "Ненумерованный список",
+    "orderedlist": "Нумерованный список",
+    "outdent": "Убрать отступ",
+    "indent": "Добавить отступ",
+    "horizontalrule": "Линия",
+    "upload-label": "Перетащите файл или ",
+    "accessibility-help-label": "Редактор форматированного текста",
+    "caption": "Подпись",
+    "bulletslist": "Маркеры",
+    "numberslist": "Нумерация",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sk.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sk.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sk.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sk.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,75 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['sk'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Obrázok',
-	table: 'Tabulka',
-	link: 'Odkaz',
-	link_insert: 'Vložiť odkaz ...',
-	link_edit: 'Edit link',
-	unlink: 'Odstrániť odkaz',
-	formatting: 'Štýl',
-	paragraph: 'Odstavec',
-	quote: 'Citácia',
-	code: 'Kód',
-	header1: 'Nadpis 1',
-	header2: 'Nadpis 2',
-	header3: 'Nadpis 3',
-	header4: 'Nadpis 4',
-	header5: 'Nadpis 5',
-	bold:  'Tučné',
-	italic: 'Kurzíva',
-	fontcolor: 'Farba písma',
-	backcolor: 'Farba pozadia',
-	unorderedlist: 'Zoznam s odrážkami',
-	orderedlist: 'Číslovaný zoznam',
-	outdent: 'Zmenšiť odsadenie',
-	indent: 'Zväčšiť odsadenie',
-	cancel: 'Zrušiť',
-	insert: 'Vložiť',
-	save: 'Uložiť',
-	_delete: 'Smazať',
-	insert_table: 'Vložiť tabulku',
-	insert_row_above: 'Pridať riadok hore',
-	insert_row_below: 'Pridať riadok dole',
-	insert_column_left: 'Pridať stĺpec vľavo',
-	insert_column_right: 'Pridať stľpec vpravo',
-	delete_column: 'Zmazať stľpec',
-	delete_row: 'Zmazať riadok',
-	delete_table: 'Zmazať tabulku',
-	rows: 'Riadky',
-	columns: 'Stľpce',
-	add_head: 'Pridať záhlavie',
-	delete_head: 'Zmazať záhlavie',
-	title: 'Titulok',
-	image_position: 'Pozícia',
-	none: 'žiadny',
-	left: 'vľavo',
-	right: 'vpravo',
-	image_web_link: 'Odkaz na obrázok',
-	text: 'Text',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Kód pre vloženie videa na stránku',
-	file: 'Súbor',
-	upload: 'Nahrát',
-	download: 'Stiahnúť',
-	choose: 'Vybrať',
-	or_choose: 'alebo',
-	drop_file_here: 'Pretiahnite súbor sem',
-	align_left:	'Zarovnať vľavo',
-	align_center: 'Zarovnať na stred',
-	align_right: 'Zarovnať vpravo',
-	align_justify: 'Zarovnať do bloku',
-	horizontalrule: 'Vodorovná  čiara',
-	fullscreen: 'Celá obrazovka',
-	deleted: 'Prečiarknuté',
-	anchor: 'Záložka',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sl.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sl.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sl.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sl.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,78 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['sl'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Slika',
-	table: 'Tabela',
-	link: 'Povezava',
-	link_insert: 'Vstavi povezavo...',
-	link_edit: 'Edit link',
-	unlink: 'Odstrani povezavo',
-	formatting: 'Stili',
-	paragraph: 'Odstavek',
-	quote: 'Citat',
-	code: 'HTML koda',
-	header1: 'Naslov 1',
-	header2: 'Naslov 2',
-	header3: 'Naslov 3',
-	header4: 'Naslov 4',
-	header5: 'Naslov 5',
-	bold: 'Odebeljeno',
-	italic: 'Poševno',
-	fontcolor: 'Barva pisave',
-	backcolor: 'Barva ozadja',
-	unorderedlist: 'Nesortirana lista',
-	orderedlist: 'Sortirana lista',
-	outdent: 'Pomik levo',
-	indent: 'Pomik desno',
-	redo: 'Naprej',
-	undo: 'Nazaj',
-	cut: 'Izreži',
-	cancel: 'Prekini',
-	insert: 'Vstavi',
-	save: 'Shrani',
-	_delete: 'Izbriši',
-	insert_table: 'Vstavi tabelo',
-	insert_row_above: 'Dodaj vrstico nad',
-	insert_row_below: 'Dodaj vrstico pod',
-	insert_column_left: 'Dodaj stolpec levo',
-	insert_column_right: 'Dodaj stolpec desno',
-	delete_column: 'Izbriši stolpec',
-	delete_row: 'Izbriši vrstivo',
-	delete_table: 'Izbriši tabelo',
-	rows: 'Vrstic',
-	columns: 'Stolpcev',
-	add_head: 'Dodaj naslov',
-	delete_head: 'Odstrani naslov',
-	title: 'Naslov',
-	image_position: 'Poravnava',
-	none: 'brez',
-	left: 'levo',
-	right: 'desno',
-	image_web_link: 'Povezava do slike',
-	text: 'Besedilo',
-	mailto: 'Email',
-	web: 'WEB povezava',
-	video_html_code: 'Koda videa',
-	file: 'Datoteka',
-	upload: 'Pošalji',
-	download: 'Prenesi',
-	choose: 'Izberi',
-	or_choose: 'ali izberi',
-	drop_file_here: 'Povleci datoteko sem',
-	align_left:	'Poravnaj levo',
-	align_center: 'Centriraj',
-	align_right: 'Poravnaj desno',
-	align_justify: 'Od roba do roba',
-	horizontalrule: 'Horizontalna crta',
-	fullscreen: 'Čez cel ekran',
-	deleted: 'Izbrisano',
-	anchor: 'Sidro',
-	link_new_tab: 'Odpri povezavo v novem oknu/tabu',
-	underline: 'Podčrtano',
-	alignment: 'Poravnava',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sq.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sq.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sq.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sq.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,78 +0,0 @@
-(function ($) {
-	$.Redactor.opts.langs['sq'] = {
-		html: 'HTML',
-		video: 'Video',
-		image: 'Fotografi',
-		table: 'Tabel&euml;',
-		link: 'Lidhje',
-		link_insert: 'Vendos Lidhje...',
-		link_edit: 'Ndrysho lidhjen',
-		unlink: 'Hiq lidhjen',
-		formatting: 'Stilet',
-		paragraph: 'Paragraf',
-		quote: 'Kuot&euml;',
-		code: 'Kod',
-		header1: 'Kok&euml; 1',
-		header2: 'Kok&euml; 2',
-		header3: 'Kok&euml; 3',
-		header4: 'Kok&euml; 4',
-		header5: 'Kok&euml; 5',
-		bold:  'I trash&euml;',
-		italic: 'Kursive',
-		fontcolor: 'Ngjyra e shkronjave',
-		backcolor: 'Ngjyra e sfondit t&euml; shkronjave',
-		unorderedlist: 'List&euml; pa renditje',
-		orderedlist: 'List&euml; me renditje',
-		outdent: 'Hiq kryeradh&euml;n',
-		indent: 'Kryeradh&euml;',
-		redo: 'Rib&euml;j',
-		undo: 'Zhb&euml;j',
-		cut: 'Prit',
-		cancel: 'Anulo',
-		insert: 'Fut',
-		save: 'Ruaje',
-		_delete: 'Fshije',
-		insert_table: 'Shto tabel&euml;',
-		insert_row_above: 'Shto rresht sip&euml;r',
-		insert_row_below: 'Shto rresht posht&euml;',
-		insert_column_left: 'Shto kolon&euml; majtas',
-		insert_column_right: 'Shto kolon&euml; djathtas',
-		delete_column: 'Fshije kolon&euml;n',
-		delete_row: 'Fshije rreshtin',
-		delete_table: 'Fshije tabel&euml;n',
-		rows: 'Rreshta',
-		columns: 'Kolona',
-		add_head: 'Shto titujt e tabel&euml;s',
-		delete_head: 'Fshiji titujt e tabel&euml;s',
-		title: 'Titulli',
-		image_position: 'Pozicioni',
-		none: 'Normale',
-		left: 'Majtas',
-		right: 'Djathtas',
-		image_web_link: 'Lidhja i fotografis&euml; n&euml; internet',
-		text: 'Teksti',
-		mailto: 'Email',
-		web: 'URL',
-		video_html_code: 'Kodi embed i videos',
-		file: 'Skedar',
-		upload: 'Ngarko',
-		download: 'Shkarko',
-		choose: 'Zgjidh',
-		or_choose: 'Ose zgjidh',
-		drop_file_here: 'L&euml;shoje skedarin k&euml;tu',
-		align_left:	'Rreshtoje majtas',
-		align_center: 'Rreshtoje n&euml; mes',
-		align_right: 'Rreshtoje djathtas',
-		align_justify: 'Rreshtoje t&euml; gjithin t&euml; nj&euml;jt&euml;',
-		horizontalrule: 'Viz&euml; horizontale',
-		fullscreen: 'Pamje e plot&euml;',
-		deleted: 'E fshir&euml;',
-		anchor: 'Lidhje lokale',
-		link_new_tab: 'Hape lidhjen n&euml; tab t&euml; ri',
-		underline: 'N&euml;nvizo',
-		alignment: 'Rreshtimi',
-		filename: 'Emri (opsional)',
-		edit: 'Ndrysho',
-		center: 'Qend&euml;r'
-	};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sr_cir.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sr_cir.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sr_cir.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sr_cir.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,78 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['sr-cir'] = {
-	html: 'ХТМЛ',
-	video: 'Убаци видео',
-	image: 'Убаци фотографију',
-	table: 'Табела',
-	link: 'Веза',
-	link_insert: 'Убаци везу ...',
-	link_edit: 'Edit link',
-	unlink: 'Уклони везу',
-	formatting: 'Стилови',
-	paragraph: 'Параграф',
-	quote: 'Цитат',
-	code: 'Изворни код',
-	header1: 'Заглавље 1',
-	header2: 'Заглавље 2',
-	header3: 'Заглавље 3',
-	header4: 'Заглавље 4',
-	header5: 'Заглавље 5',
-	bold: 'Подебљај',
-	italic: 'Накоси',
-	fontcolor: 'Боја слова',
-	backcolor: 'Боја позадине',
-	unorderedlist: 'Несортирана листа',
-	orderedlist: 'Сортирана листа',
-	outdent: 'Извуци',
-	indent: 'Увуци',
-	redo: 'Корак напред',
-	undo: 'Корак назад',
-	cut: 'Изрежи',
-	cancel: 'Одустани',
-	insert: 'Убаци',
-	save: 'Сачувај',
-	_delete: 'Избриши',
-	insert_table: 'Убаци табелу',
-	insert_row_above: 'Додај ред изнад',
-	insert_row_below: 'Додај ред испод',
-	insert_column_left: 'Додај колону лево',
-	insert_column_right: 'Додај колону десно',
-	delete_column: 'Избриши колону',
-	delete_row: 'Избриши ред',
-	delete_table: 'Избриши табелу',
-	rows: 'Ред',
-	columns: 'Колона',
-	add_head: 'Додај заглавље',
-	delete_head: 'Уклони заглавље',
-	title: 'Наслов',
-	image_position: 'Позиција',
-	none: 'Без',
-	left: 'Лево',
-	right: 'Десно',
-	image_web_link: 'Веб адреса фотографије',
-	text: 'Текст',
-	mailto: 'Емаил',
-	web: 'Веб адреса',
-	video_html_code: 'Видео код',
-	file: 'Датотека',
-	upload: 'Пошаљи',
-	download: 'Преузми',
-	choose: 'Одабери',
-	or_choose: 'Или одабери',
-	drop_file_here: 'Превуци датотеку овде',
-	align_left:	'Поравнај лево',
-	align_center: 'Центрирај',
-	align_right: 'Поравнај десно',
-	align_justify: 'Од руба до руба',
-	horizontalrule: 'Убаци хоризонталну линију',
-	fullscreen: 'Прикажи преко читавог екрана',
-	deleted: 'Избрисано',
-	anchor: 'Сидро',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sr_lat.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sr_lat.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sr_lat.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sr_lat.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,78 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['sr-lat'] = {
-	html: 'HTML',
-	video: 'Ubaci video',
-	image: 'Ubaci fotografiju',
-	table: 'Tabela',
-	link: 'Veza',
-	link_insert: 'Ubaci vezu ...',
-	link_edit: 'Edit link',
-	unlink: 'Ukloni vezu',
-	formatting: 'Stilovi',
-	paragraph: 'Paragraf',
-	quote: 'Citat',
-	code: 'Izvorni kod',
-	header1: 'Zaglavlje 1',
-	header2: 'Zaglavlje 2',
-	header3: 'Zaglavlje 3',
-	header4: 'Zaglavlje 4',
-	header5: 'Zaglavlje 5',
-	bold: 'Podebljaj',
-	italic: 'Nakosi',
-	fontcolor: 'Boja slova',
-	backcolor: 'Boja pozadine',
-	unorderedlist: 'Nesortirana lista',
-	orderedlist: 'Sortirana lista',
-	outdent: 'Izvuci',
-	indent: 'Uvuci',
-	redo: 'Korak napred',
-	undo: 'Korak nazad',
-	cut: 'Izreži',
-	cancel: 'Odustani',
-	insert: 'Ubaci',
-	save: 'Sačuvaj',
-	_delete: 'Izbriši',
-	insert_table: 'Ubaci tabelu',
-	insert_row_above: 'Dodaj red iznad',
-	insert_row_below: 'Dodaj red ispod',
-	insert_column_left: 'Dodaj kolonu levo',
-	insert_column_right: 'Dodaj kolonu desno',
-	delete_column: 'Izbriši kolonu',
-	delete_row: 'Izbriši red',
-	delete_table: 'Izbriši tabelu',
-	rows: 'Red',
-	columns: 'Kolona',
-	add_head: 'Dodaj zaglavlje',
-	delete_head: 'Ukloni zaglavlje',
-	title: 'Naslov',
-	image_position: 'Pozicija',
-	none: 'Bez',
-	left: 'Levo',
-	right: 'Desno',
-	image_web_link: 'Web adresa fotografije',
-	text: 'Tekst',
-	mailto: 'Email',
-	web: 'Web adresa',
-	video_html_code: 'Video kod',
-	file: 'Datoteka',
-	upload: 'Pošalji',
-	download: 'Preuzmi',
-	choose: 'Odaberi',
-	or_choose: 'Ili odaberi',
-	drop_file_here: 'Prevuci datoteku ovde',
-	align_left:	'Poravnaj levo',
-	align_center: 'Centriraj',
-	align_right: 'Poravnaj desno',
-	align_justify: 'Od ruba do ruba',
-	horizontalrule: 'Ubaci horizontalnu liniju',
-	fullscreen: 'Prikaz preko čitavog ekrana',
-	deleted: 'Izbrisano',
-	anchor: 'Sidro',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sv.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sv.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/sv.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/sv.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,76 +1,57 @@
-(function ($) {
-    $.Redactor.opts.langs['sv'] = {
-        _delete: 'Tag Bort',
-        add_head: 'Lägg Till Tabellhuvud',
-        align_center: 'Centerjustera',
-        align_justify: 'Marginaljustering',
-        align_left: 'Vänsterjustera',
-        align_right: 'Högerjustera',
-        alignment: 'Justering',
-        anchor: 'Ankare',
-        backcolor: 'Bakgrundsfärg',
-        bold:  'Fet',
-        cancel: 'Ångra',
-        choose: 'Välj',
-        code: 'Kod',
-        columns: 'Kolumner',
-        delete_column: 'Tag Bort Kolumn',
-        delete_head: 'Tag Bort Tabellhuvud',
-        delete_row: 'Tag Bort Rad',
-        delete_table: 'Tag Bort Tabell',
-        deleted: 'Överstruken',
-        download: 'Nedladdning',
-        drop_file_here: 'Släpp Fil Här',
-        edit: 'Ändra',
-        file: 'Infoga Fil...',
-        filename: 'Namn (valfritt)',
-        fontcolor: 'Typsnittsfärg',
-        formatting: 'Formatering',
-        fullscreen: 'Fullskärm',
-        header1: 'Rubrik 1',
-        header2: 'Rubrik 2',
-        header3: 'Rubrik 3',
-        header4: 'Rubrik 4',
-        header5: 'Rubrik 5',
-        horizontalrule: 'Infoga Horisontell Linje',
-        html: 'HTML',
-        image: 'Infoga Bild...',
-        image_position: 'Position',
-        image_web_link: 'Bildlänk',
-        indent: 'Öka indentering',
-        insert: 'Infoga',
-        insert_column_left: 'Lägg Till Vänsterkolumn',
-        insert_column_right: 'Lägg Till Högerkolumn',
-        insert_row_above: 'Lägg Till Rad Ovanför',
-        insert_row_below: 'Lägg Till Rad Under',
-        insert_table: 'Infoga Tabell...',
-        italic: 'Kursiv',
-        left: 'Vänster',
-        link: 'Länk',
-        link_edit: 'Ändra länk',
-        link_insert: 'Infoga Länk...',
-        link_new_tab: 'Öppna länk i ny flik',
-        mailto: 'E-post',
-        none: 'Ingen',
-        or_choose: 'Eller Välj',
-        orderedlist: 'Ordnad Lista',
-        outdent: 'Minska Indentering',
-        paragraph: 'Paragraf',
-        quote: 'Citat',
-        right: 'Höger',
-        rows: 'Rader',
-        save: 'Spara',
-        table: 'Tabell',
-        text: 'Text',
-        title: 'Titel',
-        underline: 'Understryk',
-        unlink: 'Tag Bort Länk',
-        unorderedlist: 'Oordnad Lista',
-        upload: 'Uppladdning',
-        video: 'Infoga Video...',
-        video_html_code: 'Kod För Inbäddad Video',
-        web: 'Webbadress',
-		center: 'Center'
-    };
-})( jQuery );
+(function ($)
+{
+	$.Redactor.opts.langs['sv'] = {
+    "format": "Format",
+    "image": "Bild",
+    "file": "Fil",
+    "link": "Länk",
+    "bold": "Fet",
+    "italic": "Kursiv",
+    "deleted": "Överstruken",
+    "underline": "Understruken",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Lista",
+    "link-insert": "Infoga länk",
+    "link-edit": "Redigera länk",
+    "link-in-new-tab": "Öppna länk i nytt fönster",
+    "unlink": "Radera länk",
+    "cancel": "Avbryt",
+    "close": "Stäng",
+    "insert": "Infoga",
+    "save": "Spara",
+    "delete": "Radera",
+    "text": "Text",
+    "edit": "Redigera",
+    "title": "Titel",
+    "paragraph": "Normal text",
+    "quote": "Citat",
+    "code": "Kod",
+    "heading1": "Titel 1",
+    "heading2": "Titel 2",
+    "heading3": "Titel 3",
+    "heading4": "Titel 4",
+    "heading5": "Titel 5",
+    "heading6": "Titel 6",
+    "filename": "Namn",
+    "optional": "valfritt",
+    "unorderedlist": "Osorterad lista",
+    "orderedlist": "Sorterad lista",
+    "outdent": "Minska utdrag",
+    "indent": "Öka utdrag",
+    "horizontalrule": "Linje",
+    "upload-label": "Släpp filen här eller ",
+    "accessibility-help-label": "Textredigerare",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
+};
 
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/th.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/th.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/th.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/th.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['th'] = {
-	html: 'HTML',
-	video: 'ใส่วีดีโอ...',
-	image: 'แนบรูป...',
-	table: 'ตาราง',
-	link: 'ลิงค์',
-	link_insert: 'ใส่ลิงค์ ...',
-	link_edit: 'Edit link',
-	unlink: 'ลบลิงค์',
-	formatting: 'รูปแบบ',
-	paragraph: 'ย่อหน้า',
-	quote: 'ข้อความ',
-	code: 'โค้ด',
-	header1: 'หัวข้อ 1',
-	header2: 'หัวข้อ 2',
-	header3: 'หัวข้อ 3',
-	header4: 'หัวข้อ 4',
-	header5: 'หัวข้อ 5',
-	bold:  'ตัวหน้า',
-	italic: 'ตัวเอียง',
-	fontcolor: 'สีตัวอักษร',
-	backcolor: 'สีพื้นหลัง',
-	unorderedlist: 'รายการแบบไม่มีลำดับ',
-	orderedlist: 'รายการแบบมีลำดับ',
-	outdent: 'เลื่อนออก',
-	indent: 'เลื่อนเข้า',
-	cancel: 'ยกเลิก',
-	insert: 'แนบ',
-	save: 'บันทึก',
-	_delete: 'ลบ',
-	insert_table: 'ใส่ตาราง...',
-	insert_row_above: 'แทรกแถวใหม่ด้านบน',
-	insert_row_below: 'แทรกแถวใหม่ด้านล่าง',
-	insert_column_left: 'แทรกคอลัมน์ทางซ้าย',
-	insert_column_right: 'แทรกคอลัมน์ทางขวา',
-	delete_column: 'ลบคอลัมน์',
-	delete_row: 'ลบแถว',
-	delete_table: 'ลบตาราง',
-	rows: 'แถว',
-	columns: 'คอลัมน์',
-	add_head: 'ใส่หัวข้อ',
-	delete_head: 'ลบหัวข้อ',
-	title: 'หัวเรื่อง',
-	image_position: 'ตำแหน่งรูป',
-	none: 'ปรกติ',
-	left: 'ซ้าย',
-	right: 'ขวา',
-	image_web_link: 'ลิงค์รูปภาพ',
-	text: 'ตัวอักษร',
-	mailto: 'อีเมล',
-	web: 'เว็บไซต์',
-	video_html_code: 'โค้ดวีดีโอ',
-	file: 'แนบไฟล์...',
-	upload: 'อัพโหลด',
-	download: 'ดาวน์โหลด',
-	choose: 'เลือก',
-	or_choose: 'หรือเลือกไฟล์',
-	drop_file_here: 'ลากไฟล์มาวางที่นี่',
-	align_left:	'จัดตัวอักษรชิดซ้าย',
-	align_center: 'จัดตัวอักษรกึ่งกลาง',
-	align_right: 'จัดตัวอักษรชิดขวา',
-	align_justify: 'จัดตัวอักษรแบบพอดีกรอบ',
-	horizontalrule: 'ใส่เส้นแบ่งหน้า',
-	deleted: 'ขีดออก',
-	anchor: 'เชื่อมโยง',
-	link_new_tab: 'เปิดลิงค์ในแทปใหม่',
-	underline: 'เส้นใต้',
-	alignment: 'การจัดวาง',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/tr.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/tr.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/tr.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/tr.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['tr'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Görsel',
-	table: 'Tablo',
-	link: 'Bağlantı',
-	link_insert: 'Bağlantı Ekle ...',
-	link_edit: 'Bağlantıyı Düzenle',
-	unlink: 'Bağlantı Kaldır',
-	formatting: 'Biçimlendirme',
-	paragraph: 'Paragraf',
-	quote: 'Alıntı',
-	code: 'Kod',
-	header1: 'Başlık 1',
-	header2: 'Başlık 2',
-	header3: 'Başlık 3',
-	header4: 'Başlık 4',
-	header5: 'Başlık 5',
-	bold:  'Kalın',
-	italic: 'Eğik',
-	fontcolor: 'Yazı rengi',
-	backcolor: 'Arkaplan rengi',
-	unorderedlist: 'Sırasız liste',
-	orderedlist: 'Sıralı liste',
-	outdent: 'Girintiyi azalt',
-	indent: 'Girintiyi artır',
-	cancel: 'İptal',
-	insert: 'Ekle',
-	save: 'Kaydet',
-	_delete: 'Sil',
-	insert_table: 'Tablo ekle',
-	insert_row_above: 'Üste satır ekle',
-	insert_row_below: 'Alta satır ekle',
-	insert_column_left: 'Sola sütun ekle',
-	insert_column_right: 'Sağa sütun ekle',
-	delete_column: 'Sütun sil',
-	delete_row: 'Satır sil',
-	delete_table: 'Tablo sil',
-	rows: 'Satırlar',
-	columns: 'Sütunlar',
-	add_head: 'Başlık ekle',
-	delete_head: 'Başlık sil',
-	title: 'Başlık',
-	image_position: 'Pozisyon',
-	none: 'hiçbiri',
-	left: 'sol',
-	right: 'sağ',
-	image_web_link: 'Görselin web bağlantısı',
-	text: 'Metin',
-	mailto: 'E-Posta',
-	web: 'URL',
-	video_html_code: 'Video embed kodu',
-	file: 'Dosya',
-	upload: 'Yükle',
-	download: 'İndir',
-	choose: 'Seç',
-	or_choose: 'Veya seç',
-	drop_file_here: 'Dosyayı buraya bırak',
-	align_left:	'Sola hizala',
-	align_center: 'Ortala',
-	align_right: 'Sağa hizala',
-	align_justify: 'Satır uzunluğuna ayarla',
-	horizontalrule: 'Yatay çizgi',
-	fullscreen: 'Tam ekran',
-	deleted: 'Silindi',
-	anchor: 'Çapa',
-	link_new_tab: 'Bağlantıyı yeni pencerede aç',
-	underline: 'Altı çizili',
-	alignment: 'Hizalama',
-	filename: 'Dosya Adı (isteğe bağlı)',
-	edit: 'Düzenle',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['tr'] = {
+    "format": "Format",
+    "image": "Görsel",
+    "file": "Dosya",
+    "link": "Link",
+    "bold": "Kalın",
+    "italic": "İtalik",
+    "deleted": "Üzeri çizgili",
+    "underline": "Altı çizgili",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "Listeleme",
+    "link-insert": "Link ekle",
+    "link-edit": "Linki düzenle",
+    "link-in-new-tab": "Yeni bir pencerede aç",
+    "unlink": "Linki Kaldır",
+    "cancel": "Vazgeç",
+    "close": "Kapat",
+    "insert": "Ekle",
+    "save": "Kaydet",
+    "delete": "Sil",
+    "text": "Metin",
+    "edit": "Düzenle",
+    "title": "Başlık",
+    "paragraph": "Normal yazı",
+    "quote": "Alıntı",
+    "code": "Kod",
+    "heading1": "Başlık 1",
+    "heading2": "Başlık 2",
+    "heading3": "Başlık 3",
+    "heading4": "Başlık 4",
+    "heading5": "Başlık 5",
+    "heading6": "Başlık 6",
+    "filename": "İsim",
+    "optional": "opsiyonel",
+    "unorderedlist": "Sırasız Liste",
+    "orderedlist": "Sıralı Liste",
+    "outdent": "Dışarı Doğru",
+    "indent": "İçeri Doğru",
+    "horizontalrule": "Çizgi",
+    "upload-label": "Dosyayı buraya sürukle veya ",
+    "accessibility-help-label": "Zenginleştirilmiş yazı editorü",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ua.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ua.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/ua.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/ua.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,76 +0,0 @@
-(function ($) {
-$.Redactor.opts.langs['ua'] = {
-	html: 'Код',
-	video: 'Відео',
-	image: 'Зображення',
-	table: 'Таблиця',
-	link: 'Посилання',
-	link_insert: 'Вставити посилання ...',
-	link_edit: 'Edit link',
-	unlink: 'Видалити посилання',
-	formatting: 'Стилі',
-	paragraph: 'Звичайний текст',
-	quote: 'Цитата',
-	code: 'Код',
-	header1: 'Заголовок 1',
-	header2: 'Заголовок 2',
-	header3: 'Заголовок 3',
-	header4: 'Заголовок 4',
-	header5: 'Заголовок 5',
-	bold:  'Жирний',
-	italic: 'Похилий',
-	fontcolor: 'Колір тексту',
-	backcolor: 'Заливка тексту',
-	unorderedlist: 'Звичайний список',
-	orderedlist: 'Нумерований список',
-	outdent: 'Зменшити відступ',
-	indent: 'Збільшити відступ',
-	cancel: 'Скасувати',
-	insert: 'Вставити',
-	save: 'Зберегти',
-	_delete: 'Видалити',
-	insert_table: 'Вставити таблицю',
-	insert_row_above: 'Додати рядок зверху',
-	insert_row_below: 'Додати рядок знизу',
-	insert_column_left: 'Додати стовпець ліворуч',
-	insert_column_right: 'Додати стовпець праворуч',
-	delete_column: 'Видалити стовпець',
-	delete_row: 'Видалити рядок',
-	delete_table: 'Видалити таблицю',
-	rows: 'Рядки',
-	columns: 'Стовпці',
-	add_head: 'Додати заголовок',
-	delete_head: 'Видалити заголовок',
-	title: 'Підказка',
-	image_view: 'Завантажити зображення',
-	image_position: 'Обтікання текстом',
-	none: 'ні',
-	left: 'ліворуч',
-	right: 'праворуч',
-	image_web_link: 'Посилання на зображення',
-	text: 'Текст',
-	mailto: 'Ел. пошта',
-	web: 'URL',
-	video_html_code: 'Код відео ролика',
-	file: 'Файл',
-	upload: 'Завантажити',
-	download: 'Завантажити',
-	choose: 'Вибрати',
-	or_choose: 'Або виберіть',
-	drop_file_here: 'Перетягніть файл сюди',
-	align_left:	'По лівому краю',
-	align_center: 'По центру',
-	align_right: 'По правому краю',
-	align_justify: 'Вирівняти текст по ширині',
-	horizontalrule: 'Горизонтальная лінійка',
-	fullscreen: 'На весь екран',
-	deleted: 'Закреслений',
-    anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/vi.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/vi.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/vi.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/vi.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,74 +0,0 @@
-﻿(function ($) {
-$.Redactor.opts.langs['vi'] = {
-	html: 'Xem HTML',
-	video: 'Chèn Video...',
-	image: 'Chèn hình ảnh...',
-	table: 'Tạo bảng',
-	link: 'Đường dẫn',
-	link_insert: 'Thêm đường dẫn ...',
-	link_edit: 'Edit link',
-	unlink: 'Loại bỏ đường dẫn',
-	formatting: 'Định dạng văn bản',
-	paragraph: 'Đoạn văn',
-	quote: 'Trích dẫn',
-	code: 'Chèn mã',
-	header1: 'Tiêu đề 1',
-	header2: 'Tiêu đề 2',
-	header3: 'Tiêu đề 3',
-	header4: 'Tiêu đề 4',
-	header5: 'Tiêu đề 5',
-	bold:  'In đậm',
-	italic: 'In nghiêng',
-	fontcolor: 'Màu chữ',
-	backcolor: 'Đánh dấu đoạn văn',
-	unorderedlist: 'Sắp xếp theo danh sách',
-	orderedlist: 'Sắp xếp theo thứ tự',
-	outdent: 'Bỏ thụt đầu dòng',
-	indent: 'Thụt đầu dòng',
-	cancel: 'Hủy bỏ',
-	insert: 'Chèn',
-	save: 'Lưu lại',
-	_delete: 'Xóa',
-	insert_table: 'Chèn bảng...',
-	insert_row_above: 'Thêm hàng bên trên',
-	insert_row_below: 'Thêm hàng bên dưới',
-	insert_column_left: 'Thêm cột trái',
-	insert_column_right: 'Thêm cột phải',
-	delete_column: 'Xóa cột',
-	delete_row: 'Xóa hàng',
-	delete_table: 'Xóa bảng',
-	rows: 'Hàng',
-	columns: 'Cột',
-	add_head: 'Thêm tiêu đề bảng',
-	delete_head: 'Xóa tiêu đề bảng',
-	title: 'Tiêu đề',
-	image_position: 'Vị trí',
-	none: 'Không thay đổi',
-	left: 'Trái',
-	right: 'Phải',
-	image_web_link: 'Đường dẫn link ảnh',
-	text: 'Văn bản',
-	mailto: 'Email',
-	web: 'Đường dẫn',
-	video_html_code: 'Mã nhúng video',
-	file: 'Tập tin đính kèm...',
-	upload: 'Tải lên',
-	download: 'Tải xuống',
-	choose: 'Lựa Chọn',
-	or_choose: 'Chọn từ máy tính',
-	drop_file_here: 'Kéo thả hình ảnh vào đây',
-	align_left:	'Căn trái',
-	align_center: 'Căn giữa',
-	align_right: 'Căn phải',
-	align_justify: 'Dàn đều trang',
-	horizontalrule: 'Chèn thanh ngang',
-	deleted: 'Xóa',
-	anchor: 'Liên kết',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
-};
-})( jQuery );
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/zh_cn.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/zh_cn.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/zh_cn.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/zh_cn.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,59 @@
-(function ($) {
-$.Redactor.opts.langs['zh_cn'] = {
-	html: 'HTML代码',
-	video: '视频',
-	image: '图片',
-	table: '表格',
-	link: '链接',
-	link_insert: '插入链接',
-	link_edit: 'Edit link',
-	unlink: '取消链接',
-	formatting: '样式',
-	paragraph: '段落',
-	quote: '引用',
-	code: '代码',
-	header1: '一级标题',
-	header2: '二级标题',
-	header3: '三级标题',
-	header4: '四级标题',
-	header5: 'Header 5',
-	bold:  '粗体',
-	italic: '斜体',
-	fontcolor: '字体颜色',
-	backcolor: '背景颜色',
-	unorderedlist: '项目编号',
-	orderedlist: '数字编号',
-	outdent: '减少缩进',
-	indent: '增加缩进',
-	cancel: '取消',
-	insert: '插入',
-	save: '保存',
-	_delete: '删除',
-	insert_table: '插入表格',
-	insert_row_above: '在上方插入',
-	insert_row_below: '在下方插入',
-	insert_column_left: '在左侧插入',
-	insert_column_right: '在右侧插入',
-	delete_column: '删除整列',
-	delete_row: '删除整行',
-	delete_table: '删除表格',
-	rows: '行',
-	columns: '列',
-	add_head: '添加标题',
-	delete_head: '删除标题',
-	title: '标题',
-	image_position: '位置',
-	none: '无',
-	left: '左',
-	right: '右',
-	image_web_link: '图片网页链接',
-	text: '文本',
-	mailto: '邮箱',
-	web: '网址',
-	video_html_code: '视频嵌入代码',
-	file: '文件',
-	upload: '上传',
-	download: '下载',
-	choose: '选择',
-	or_choose: '或选择',
-	drop_file_here: '将文件拖拽至此区域',
-	align_left:	'左对齐',
-	align_center: '居中',
-	align_right: '右对齐',
-	align_justify: '两端对齐',
-	horizontalrule: '水平线',
-	fullscreen: '全屏',
-	deleted: '删除',
-	anchor: '锚点',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['zh_cn'] = {
+    "format": "格式",
+    "image": "图片",
+    "file": "文件",
+    "link": "链接",
+    "bold": "加粗",
+    "italic": "斜体",
+    "deleted": "删除线",
+    "underline": "底线",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "列表",
+    "link-insert": "插入链接",
+    "link-edit": "编辑链接",
+    "link-in-new-tab": "在新页面中打开",
+    "unlink": "取消链接",
+    "cancel": "取消",
+    "close": "关闭",
+    "insert": "插入",
+    "save": "保存",
+    "delete": "删除",
+    "text": "文本",
+    "edit": "编辑",
+    "title": "标题",
+    "paragraph": "段落",
+    "quote": "引用",
+    "code": "代码",
+    "heading1": "标题 1",
+    "heading2": "标题 2",
+    "heading3": "标题 3",
+    "heading4": "标题 4",
+    "heading5": "标题 5",
+    "heading6": "标题 6",
+    "filename": "文件名",
+    "optional": "optional",
+    "unorderedlist": "无序列表",
+    "orderedlist": "有序列表",
+    "outdent": "向左缩进",
+    "indent": "向右缩进",
+    "horizontalrule": "水平分隔线",
+    "upload-label": "上传文件",
+    "table": "表格",
+    "video": "视频",
+    "accessibility-help-label": "富文本编辑器",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/zh_tw.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/zh_tw.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/lang/zh_tw.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/lang/zh_tw.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,75 +1,57 @@
-(function ($) {
-$.Redactor.opts.langs['zh_tw'] = {
-	html: 'HTML',
-	video: '插入影片',
-	image: '插入圖片',
-	table: '表格',
-	link: '連結',
-	link_insert: '插入連結',
-	link_edit: 'Edit link',
-	unlink: '移除連結',
-	formatting: '樣式',
-	paragraph: '段落',
-	quote: '引用',
-	code: '原始碼',
-	header1: '標題 1',
-	header2: '標題 2',
-	header3: '標題 3',
-	header4: '標題 4',
-	header5: '標題 5',
-	bold:  '將文字變成粗體',
-	italic: '將文字變成斜體',
-	fontcolor: '選擇文字顏色',
-	backcolor: '選擇文字底色',
-	unorderedlist: '項目列表',
-	orderedlist: '編號列表',
-	outdent: '減少縮排',
-	indent: '增加縮排',
-	cancel: '取消',
-	insert: '插入',
-	save: '儲存',
-	_delete: '刪除',
-	insert_table: '插入表格',
-	insert_row_above: '加入上方橫列',
-	insert_row_below: '加入下方橫列',
-	insert_column_left: '加入左方直欄',
-	insert_column_right: '加入右方直欄',
-	delete_column: '刪除整欄',
-	delete_row: '刪除整列',
-	delete_table: '刪除表格',
-	rows: '橫列',
-	columns: '直欄',
-	add_head: '加入表格標題',
-	delete_head: '刪除表格標題',
-	title: '標題',
-	image_position: '位置',
-	none: '無',
-	left: '靠左',
-	right: '靠右',
-	image_web_link: '連結',
-	text: '內文',
-	mailto: 'Email',
-	web: '網址',
-	video_html_code: '嵌入影片的原始碼',
-	file: '插入文件',
-	upload: '上傳',
-	download: '下載',
-	choose: '選擇',
-	or_choose: '或選擇',
-	drop_file_here: '將文件拖曳至此',
-	align_left:	'將文字對齊至左側',
-	align_center: '將文字置中',
-	align_right: '將文字對齊至右側',
-	align_justify: '對齊至兩側',
-	horizontalrule: '插入水平線',
-	fullscreen: '全銀幕',
-	deleted: '刪除線',
-	anchor: '錨點',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit',
-	center: 'Center'
+(function ($)
+{
+	$.Redactor.opts.langs['zh_tw'] = {
+    "format": "樣式",
+    "image": "插入圖片",
+    "file": "插入文件",
+    "link": "連結",
+    "bold": "將文字變成粗體",
+    "italic": "將文字變成斜體",
+    "deleted": "刪除線",
+    "underline": "底線",
+    "bold-abbr": "B",
+    "italic-abbr": "I",
+    "deleted-abbr": "S",
+    "underline-abbr": "U",
+    "lists": "列表",
+    "link-insert": "插入連結",
+    "link-edit": "編輯連結",
+    "link-in-new-tab": "開啟新分頁",
+    "unlink": "移除連結",
+    "cancel": "取消",
+    "close": "關閉",
+    "insert": "插入",
+    "save": "儲存",
+    "delete": "刪除",
+    "text": "內文",
+    "edit": "編輯",
+    "title": "標題",
+    "paragraph": "段落",
+    "quote": "引用",
+    "code": "原始碼",
+    "heading1": "標題 1",
+    "heading2": "標題 2",
+    "heading3": "標題 3",
+    "heading4": "標題 4",
+    "heading5": "標題 5",
+    "heading6": "標題 6",
+    "filename": "檔案名稱",
+    "optional": "optional",
+    "unorderedlist": "項目列表",
+    "orderedlist": "編號列表",
+    "outdent": "減少縮排",
+    "indent": "增加縮排",
+    "horizontalrule": "插入水平線",
+    "upload-label": "拖曳檔案",
+    "accessibility-help-label": "Rich text editor",
+    "caption": "Caption",
+    "bulletslist": "Bullets",
+    "numberslist": "Numbers",
+    "image-position": "Position",
+    "none": "None",
+    "left": "Left",
+    "right": "Right",
+    "center": "Center"
 };
-})( jQuery );
\ No newline at end of file
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/alignment.css elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/alignment.css
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/alignment.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/alignment.css	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,9 @@
+.text-center {
+    text-align: center;
+}
+.text-right {
+    text-align: right;
+}
+.text-justify {
+    text-align: justify;
+}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/alignment.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/alignment.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/alignment.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/alignment.js	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,63 @@
+(function($)
+{
+	$.Redactor.prototype.alignment = function()
+	{
+		return {
+			langs: {
+				en: {
+    				"align": "Align",
+					"align-left": "Align Left",
+					"align-center": "Align Center",
+					"align-right": "Align Right",
+					"align-justify": "Align Justify",
+				}
+			},
+			init: function()
+			{
+				var that = this;
+				var dropdown = {};
+
+				dropdown.left = { title: that.lang.get('align-left'), func: that.alignment.setLeft };
+				dropdown.center = { title: that.lang.get('align-center'), func: that.alignment.setCenter };
+				dropdown.right = { title: that.lang.get('align-right'), func: that.alignment.setRight };
+				dropdown.justify = { title: that.lang.get('align-justify'), func: that.alignment.setJustify };
+
+				var button = this.button.add('alignment', this.lang.get('align'));
+                this.button.setIcon(button, '<i class="re-icon-alignment"></i>');
+				this.button.addDropdown(button, dropdown);
+			},
+			removeAlign: function()
+			{
+    		    this.block.removeClass('text-center');
+    		    this.block.removeClass('text-right');
+    		    this.block.removeClass('text-justify');
+			},
+			setLeft: function()
+			{
+				this.buffer.set();
+				this.alignment.removeAlign();
+			},
+			setCenter: function()
+			{
+				this.buffer.set();
+				this.alignment.removeAlign();
+				this.block.addClass('text-center');
+				this.core.editor().focus()
+			},
+			setRight: function()
+			{
+				this.buffer.set();
+				this.alignment.removeAlign();
+				this.block.addClass('text-right');
+				this.core.editor().focus()
+			},
+			setJustify: function()
+			{
+				this.buffer.set();
+				this.alignment.removeAlign();
+				this.block.addClass('text-justify');
+				this.core.editor().focus()
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/dynamic.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/dynamic.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/dynamic.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/dynamic.js	2017-10-16 12:12:51.000000000 -0500
@@ -4,16 +4,14 @@
  * capability.
  */
 
-if (! RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.dynamic = function () {
+$.Redactor.prototype.dynamic = function () {
 	return {
 		// Initialize the plugin
 		init: function () {
 			var button = this.button.add ('dynamic', $.i18n ('Dynamic Objects'));
-			this.button.setAwesome ('dynamic', 'fa-cog');
+			this.button.setIcon (button, '<i class="fa fa-cog"></i>');
 			this.button.addCallback (button, this.dynamic.add_handler);
-			$('.redactor-editor').on ('click', '.embedded', $.proxy (this.dynamic.edit_handler, this));
+			$('.redactor-layer').on ('click', '.embedded', $.proxy (this.dynamic.edit_handler, this));
 		},
 
 		// Open the dialog when the button is clicked
@@ -47,7 +45,7 @@
 				this.code.sync();
 			} else {
 				// enter a new embed
-				this.insert.htmlWithoutClean (
+				this.insert.raw (
 					'<span class="embedded" data-embed="' + embed_code + '" data-label="' + label + '" title="Click to edit."></span>'
 				);
 			}
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/filebrowser.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/filebrowser.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/filebrowser.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/filebrowser.js	2017-10-16 12:12:51.000000000 -0500
@@ -3,19 +3,17 @@
  * Requires Elefant's filemanager/util/browser handler.
  */
 
-if (! RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.filebrowser = function () {
+$.Redactor.prototype.filebrowser = function () {
 	return {
 		// Initialize the plugin
 		init: function () {
 			var button = this.button.addAfter ('imagebrowser', 'filebrowser', $.i18n ('Insert File'));
-			this.button.setAwesome ('filebrowser', 'fa-paperclip');
+			this.button.setIcon (button, '<i class="re-icon-file"></i>');
 			this.button.addCallback (button, this.filebrowser.open_dialog);
 		},
 	
 		open_dialog: function (button, el, self, evt) {
-			this.filebrowser.text = this.selection.getText ();
+			this.filebrowser.text = this.selection.text ();
 			this.selection.save ();
 			$.filebrowser ({
 				callback: $.proxy (this.filebrowser.insert_file, this)
@@ -29,11 +27,11 @@
 			if (file.match (/\.(jpg|png|gif)$/i)) {
 				this.insert.html ('<img src="' + file + '" alt="" style="" />');
 			} else if (file.match (/\.swf$/i)) {
-				this.insert.htmlWithoutClean ('<span class="embedded" data-embed="filemanager/swf?file=' + file + '" data-label="Embedded Flash (SWF)" title="Click to edit."></span>');
+				this.insert.raw ('<span class="embedded" data-embed="filemanager/swf?file=' + file + '" data-label="Embedded Flash (SWF)" title="Click to edit."></span>');
 			} else if (file.match (/\.(mp4|m4v|flv|f4v)$/i)) {
-				this.insert.htmlWithoutClean ('<span class="embedded" data-embed="filemanager/video?file=' + file + '" data-label="Embedded Video (MP4)" title="Click to edit."></span>');
+				this.insert.raw ('<span class="embedded" data-embed="filemanager/video?file=' + file + '" data-label="Embedded Video (MP4)" title="Click to edit."></span>');
 			} else if (file.match (/\.mp3$/i)) {
-				this.insert.htmlWithoutClean ('<span class="embedded" data-embed="filemanager/audio?file=' + file + '" data-label="Embedded Audio (MP3)" title="Click to edit."></span>');
+				this.insert.raw ('<span class="embedded" data-embed="filemanager/audio?file=' + file + '" data-label="Embedded Audio (MP3)" title="Click to edit."></span>');
 			} else {
 				if (this.filebrowser.text !== undefined && this.filebrowser.text !== '') {
 					var basename = this.filebrowser.text;
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/fontfamily.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/fontfamily.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/fontfamily.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/fontfamily.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,33 +0,0 @@
-(function($)
-{
-	$.Redactor.prototype.fontfamily = function()
-	{
-		return {
-			init: function ()
-			{
-				var fonts = [ 'Arial', 'Helvetica', 'Georgia', 'Times New Roman', 'Monospace' ];
-				var that = this;
-				var dropdown = {};
-
-				$.each(fonts, function(i, s)
-				{
-					dropdown['s' + i] = { title: s, func: function() { that.fontfamily.set(s); }};
-				});
-
-				dropdown.remove = { title: 'Remove Font Family', func: that.fontfamily.reset };
-
-				var button = this.button.add('fontfamily', 'Change Font Family');
-				this.button.addDropdown(button, dropdown);
-
-			},
-			set: function (value)
-			{
-				this.inline.format('span', 'style', 'font-family:' + value + ';');
-			},
-			reset: function()
-			{
-				this.inline.removeStyleRule('font-family');
-			}
-		};
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/fontsize.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/fontsize.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/fontsize.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/fontsize.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,32 +0,0 @@
-(function($)
-{
-	$.Redactor.prototype.fontsize = function()
-	{
-		return {
-			init: function()
-			{
-				var fonts = [10, 11, 12, 14, 16, 18, 20, 24, 28, 30];
-				var that = this;
-				var dropdown = {};
-
-				$.each(fonts, function(i, s)
-				{
-					dropdown['s' + i] = { title: s + 'px', func: function() { that.fontsize.set(s); } };
-				});
-
-				dropdown.remove = { title: 'Remove Font Size', func: that.fontsize.reset };
-
-				var button = this.button.add('fontsize', 'Change Font Size');
-				this.button.addDropdown(button, dropdown);
-			},
-			set: function(size)
-			{
-				this.inline.format('span', 'style', 'font-size: ' + size + 'px;');
-			},
-			reset: function()
-			{
-				this.inline.removeStyleRule('font-size');
-			}
-		};
-	};
-})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/fullscreen.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/fullscreen.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/fullscreen.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/fullscreen.js	2017-10-16 12:12:51.000000000 -0500
@@ -3,21 +3,36 @@
 	$.Redactor.prototype.fullscreen = function()
 	{
 		return {
+			langs: {
+				en: {
+					"fullscreen": "Fullscreen"
+				}
+			},
 			init: function()
 			{
 				this.fullscreen.isOpen = false;
 
-				var button = this.button.add('fullscreen', 'Fullscreen');
+				var button = this.button.add('fullscreen', this.lang.get('fullscreen'));
+				this.button.setIcon(button, '<i class="re-icon-expand"></i>');
 				this.button.addCallback(button, this.fullscreen.toggle);
 
-				if (this.opts.fullscreen) this.fullscreen.toggle();
+				if (this.opts.fullscreen)
+				{
+					this.fullscreen.toggle();
+				}
+
 			},
 			enable: function()
 			{
-				this.button.changeIcon('fullscreen', 'normalscreen');
-				this.button.setActive('fullscreen');
+				this.fullscreen.isOpened = false;
+				this.button.changeIcon('fullscreen', 'retract');
 				this.fullscreen.isOpen = true;
 
+				if (!this.opts.fullscreen)
+				{
+					this.selection.save();
+				}
+
 				if (this.opts.toolbarExternal)
 				{
 					this.fullscreen.toolcss = {};
@@ -28,93 +43,111 @@
 					this.fullscreen.boxcss.top = this.$box.css('top');
 				}
 
-				this.fullscreen.height = this.$editor.height();
-
-				if (this.opts.maxHeight) this.$editor.css('max-height', '');
-				if (this.opts.minHeight) this.$editor.css('min-height', '');
+				this.fullscreen.height = this.core.editor().height();
 
+				if (this.opts.maxHeight) this.core.editor().css('max-height', '');
+				if (this.opts.minHeight) this.core.editor().css('min-height', '');
 				if (!this.$fullscreenPlaceholder) this.$fullscreenPlaceholder = $('<div/>');
+
+                if (this.opts.toolbarExternal)
+                {
+                    $(this.opts.toolbarExternal).css({ 'position': 'absolute', 'top': 0, 'left': 0, 'width': '100%' });
+                }
+
 				this.$fullscreenPlaceholder.insertAfter(this.$box);
 
-				this.$box.appendTo(document.body);
+				this.core.box().appendTo(document.body);
+				this.core.box().addClass('redactor-box-fullscreen');
 
-				this.$box.addClass('redactor-box-fullscreen');
+				$('body').addClass('redactor-body-fullscreen');
 				$('body, html').css('overflow', 'hidden');
 
 				this.fullscreen.resize();
-				$(window).on('resize.redactor.fullscreen', $.proxy(this.fullscreen.resize, this));
+
+				if (!this.opts.fullscreen)
+				{
+					this.selection.restore();
+				}
+
+				this.toolbar.observeScrollDisable();
+				$(window).on('resize.redactor-plugin-fullscreen', $.proxy(this.fullscreen.resize, this));
 				$(document).scrollTop(0, 0);
 
-				$('.redactor-toolbar-tooltip').hide();
-				this.$editor.focus();
-				this.observe.load();
+				var self = this;
+				setTimeout(function()
+				{
+					self.fullscreen.isOpened = true;
+				}, 10);
+
 			},
 			disable: function()
 			{
-				this.button.removeIcon('fullscreen', 'normalscreen');
-				this.button.setInactive('fullscreen');
+				this.button.changeIcon('fullscreen', 'expand');
+				this.fullscreen.isOpened = undefined;
 				this.fullscreen.isOpen = false;
+				this.selection.save();
 
-				$(window).off('resize.redactor.fullscreen');
+				$(window).off('resize.redactor-plugin-fullscreen');
 				$('body, html').css('overflow', '');
 
-				this.$box.insertBefore(this.$fullscreenPlaceholder);
+				this.core.box().insertBefore(this.$fullscreenPlaceholder);
 				this.$fullscreenPlaceholder.remove();
 
-				this.$box.removeClass('redactor-box-fullscreen').css({ width: 'auto', height: 'auto' });
-
-				this.code.sync();
+				this.core.box().removeClass('redactor-box-fullscreen').css({ width: 'auto', height: 'auto' });
+				this.core.box().removeClass('redactor-box-fullscreen');
 
 				if (this.opts.toolbarExternal)
 				{
-					this.$box.css('top', this.fullscreen.boxcss.top);
-					this.$toolbar.css({
+					this.core.box().css('top', this.fullscreen.boxcss.top);
+					$(this.opts.toolbarExternal).css({
 						'width': this.fullscreen.toolcss.width,
 						'top': this.fullscreen.toolcss.top,
 						'position': this.fullscreen.toolcss.position
 					});
 				}
 
-				if (this.opts.minHeight) this.$editor.css('minHeight', this.opts.minHeight);
-				if (this.opts.maxHeight) this.$editor.css('maxHeight', this.opts.maxHeight);
-
-				$('.redactor-toolbar-tooltip').hide();
-				this.$editor.css('height', 'auto');
-				this.$editor.focus();
-				this.observe.load();
-			},
-			toggle: function()
-			{
-				if (this.fullscreen.isOpen)
+				if (this.opts.minHeight)
 				{
-					this.fullscreen.disable();
+					this.core.editor().css('minHeight', this.opts.minHeight);
 				}
-				else
+
+				if (this.opts.maxHeight)
 				{
-					this.fullscreen.enable();
+					this.core.editor().css('maxHeight', this.opts.maxHeight);
 				}
+
+				this.core.editor().css('height', 'auto');
+				this.selection.restore();
+			},
+			toggle: function()
+			{
+				return (this.fullscreen.isOpen) ? this.fullscreen.disable() : this.fullscreen.enable();
 			},
 			resize: function()
 			{
-				if (!this.fullscreen.isOpen) return;
+				if (!this.fullscreen.isOpen)
+				{
+					return;
+				}
 
-				var toolbarHeight = this.$toolbar.height();
+				var toolbarHeight = this.button.toolbar().height();
+				var padding = parseInt(this.core.editor().css('padding-top')) + parseInt(this.core.editor().css('padding-bottom'));
+				var height = $(window).height() - toolbarHeight - padding;
 
-				var height = $(window).height() - toolbarHeight - this.utils.normalize(this.$editor.css('padding-top')) - this.utils.normalize(this.$editor.css('padding-bottom'));
-				this.$box.width($(window).width()).height(height);
+				this.core.box().width($(window).width()).height(height);
 
 				if (this.opts.toolbarExternal)
 				{
-					this.$toolbar.css({
+					this.core.toolbar().css({
 						'top': '0px',
 						'position': 'absolute',
 						'width': '100%'
 					});
 
-					this.$box.css('top', toolbarHeight + 'px');
+					this.core.box().css('top', toolbarHeight + 'px');
 				}
 
-				this.$editor.height(height);
+				this.core.editor().height(height);
 			}
 		};
 	};
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/imagebrowser.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/imagebrowser.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/imagebrowser.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/imagebrowser.js	2017-10-16 12:12:51.000000000 -0500
@@ -3,14 +3,12 @@
  * Requires Elefant's filemanager/util/browser handler.
  */
 
-if (! RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.imagebrowser = function () {
+$.Redactor.prototype.imagebrowser = function () {
 	return {
 		// Initialize the plugin
 		init: function () {
 			var button = this.button.addAfter ('links', 'imagebrowser', $.i18n ('Insert Image'));
-			this.button.setAwesome ('imagebrowser', 'fa-picture-o');
+			this.button.setIcon (button, '<i class="re-icon-image"></i>');
 			this.button.addCallback (button, this.imagebrowser.open_image_dialog);
 		},
 	
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/links.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/links.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/links.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/links.js	2017-10-16 12:12:51.000000000 -0500
@@ -5,9 +5,7 @@
  * their own site.
  */
 
-if (! RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.links = function () {
+$.Redactor.prototype.links = function () {
 	return {
 		// Initialize the plugin
 		init: function () {
@@ -26,8 +24,8 @@
 			dropdown.point1 = { title: $.i18n ('Insert Link'), func: this.links.insert };
 			dropdown.point2 = { title: $.i18n ('Unlink'), func: this.link.unlink };
 			
-			var button = this.button.addBefore ('html', 'links', $.i18n ('Links'));
-			this.button.setAwesome ('links', 'fa-link');
+			var button = this.button.addBefore ('source', 'links', $.i18n ('Links'));
+			this.button.setIcon (button, '<i class="re-icon-link"></i>');
 			this.button.addDropdown (button, dropdown);
 		},
 	
@@ -35,7 +33,7 @@
 		insert: function (self, evt, button) {
 			this.links.insert_link_node = false;
 			this.links.has_selected_text = false;
-			var sel = this.selection.getCurrent (),
+			var sel = this.selection.get (),
 				url = '', text = '', target = '',
 				page_matched = false,
 				base = window.location.origin
@@ -53,14 +51,14 @@
 				text = sel.text;
 				target = sel.target;
 			} else {
-				var parent = this.selection.getParent ();
+				var parent = this.selection.parent ();
 				if (parent.nodeName === 'A') {
 					this.links.insert_link_node = $(parent);
 					text = this.links.insert_link_node.text ();
 					url = this.links.insert_link_node.attr ('href');
 					target = this.links.insert_link_node.attr ('target');
 				} else {
-					text = this.selection.getText ();
+					text = this.selection.text ();
 				}
 			}
 		
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/properties.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/properties.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/properties.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/properties.js	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,256 @@
+(function($)
+{
+	$.Redactor.prototype.properties = function()
+	{
+		return {
+			langs: {
+				en: {
+					"properties": "Properties"
+				}
+			},
+			block: false,
+			labelStyle: {
+				'position': 'absolute',
+				'padding': '2px 5px',
+				'line-height': 1,
+				'border-radius': '5px',
+				'font-size': '10px',
+				'color': 'rgba(255, 255, 255, .9)',
+				'z-index': 99
+			},
+			getTemplate: function()
+			{
+				 return String()
+				 + '<div class="modal-section" id="redactor-modal-properties">'
+				 	+ '<section>'
+				 		+ '<label id="modal-properties-id-label">Id</label>'
+				 		+ '<input type="text" id="modal-properties-id" />'
+				 	+ '</section>'
+				 	+ '<section>'
+					 	+ '<label id="modal-properties-class-label">Class</label>'
+					 	+ '<input type="text" id="modal-properties-class" />'
+					 + '</section>'
+					+ '<section>'
+						+ '<button id="redactor-modal-button-action">Save</button>'
+						+ '<button id="redactor-modal-button-cancel">Cancel</button>'
+					+ '</section>'
+				 + '</div>';
+			},
+			setup: function()
+			{
+				this.opts.properties = (typeof this.opts.properties === 'undefined') ? {} : this.opts.properties;
+				this.opts.properties.id = (typeof this.opts.properties.id === 'undefined') ? true : this.opts.properties.id;
+				this.opts.properties.classname = (typeof this.opts.properties.classname === 'undefined') ? true : this.opts.properties.classname;
+				this.opts.properties.show = (typeof this.opts.properties.show === 'undefined') ? false : this.opts.properties.show;
+
+			},
+			init: function()
+			{
+				if (this.opts.type === 'pre' || this.opts.type === 'inline')
+				{
+					return;
+				}
+
+				this.properties.setup();
+
+				this.properties.createLabelId(this.properties.labelStyle);
+				this.properties.createLabelClass(this.properties.labelStyle);
+
+				this.properties.setEvents();
+
+				var button = this.button.add('properties', this.lang.get('properties'));
+				this.button.setIcon(button, '<i class="re-icon-properties"></i>');
+				this.button.addCallback(button, this.properties.show);
+
+			},
+			show: function()
+			{
+				this.modal.addTemplate('properties', this.properties.getTemplate());
+				this.modal.load('properties', 'Properties', 600);
+
+				var button = this.modal.getActionButton().text('Save');
+				button.on('click', this.properties.save);
+
+				this.properties.showId();
+				this.properties.showClass();
+
+				this.modal.show();
+
+			},
+			createLabelId: function(css)
+			{
+				if (!this.opts.properties.show && !this.opts.properties.id)
+				{
+					return;
+				}
+
+				this.properties.labelId = $('<span />').attr('id', 'redactor-properties-label-id-' + this.uuid).attr('title', 'ID').hide();
+				this.properties.labelId.css(css).css('background', 'rgba(229, 57, 143, .7)');
+				$('body').append(this.properties.labelId);
+
+			},
+			createLabelClass: function(css)
+			{
+				if (!this.opts.properties.show && !this.opts.properties.classname)
+				{
+					return;
+				}
+
+				this.properties.labelClass = $('<span />').attr('id', 'redactor-properties-label-class-' + this.uuid).attr('title', 'class').hide();
+				this.properties.labelClass.css(css).css('background', 'rgba(61, 121, 242, .7)');
+				$('body').append(this.properties.labelClass);
+
+			},
+			setEvents: function()
+			{
+				this.core.element().on('click.callback.redactor', this.properties.showOnClick);
+				$(document).on('mousedown.redactor-properties', $.proxy(this.properties.hideOnBlur, this));
+
+				this.core.element().on('destroy.callback.redactor', $.proxy(function()
+				{
+					$(document).off('.redactor-properties');
+
+				}, this));
+			},
+			showId: function()
+			{
+				if (this.opts.properties.id)
+				{
+					$('#modal-properties-id-label').show();
+					$('#modal-properties-id').show().val($(this.properties.block).attr('id'));
+				}
+				else
+				{
+					$('#modal-properties-id, #modal-properties-id-label').hide();
+				}
+			},
+			showClass: function()
+			{
+				if (this.opts.properties.classname)
+				{
+					$('#modal-properties-class-label').show();
+					$('#modal-properties-class').show().val($(this.properties.block).attr('class'));
+				}
+				else
+				{
+					$('#modal-properties-class, #modal-properties-class-label').hide();
+				}
+			},
+			save: function()
+			{
+				// id
+				if (this.opts.properties.id)
+				{
+					var id = $('#modal-properties-id').val();
+					if (typeof id === 'undefined' || id === '')
+					{
+						this.block.removeAttr('id', this.properties.block);
+					}
+					else
+					{
+						this.block.replaceAttr('id', id, this.properties.block);
+					}
+				}
+
+				// class
+				if (this.opts.properties.classname)
+				{
+					var classname = $('#modal-properties-class').val();
+					if (typeof classname === 'undefined' || classname === '')
+					{
+						this.block.removeAttr('class', this.properties.block);
+					}
+					else
+					{
+						this.block.replaceClass(classname, this.properties.block);
+					}
+				}
+
+				this.modal.close();
+				this.properties.showOnClick(false);
+
+			},
+			showOnClick: function(e)
+			{
+				if (e !== false)
+				{
+					e.preventDefault();
+				}
+
+				var zindex = (typeof this.fullscreen !== 'undefined' && this.fullscreen.isOpen) ? 1052 : 99;
+
+				this.properties.block = this.selection.block();
+				if (!this.properties.block || !this.utils.isRedactorParent(this.properties.block) || this.utils.isCurrentOrParent(['figure', 'li']))
+				{
+					return;
+				}
+
+				var pos = $(this.properties.block).offset();
+
+				var classname = this.properties.showOnClickClass(pos, zindex);
+				this.properties.showOnClickId(pos, zindex, classname);
+
+			},
+			showOnClickId: function(pos, zindex, classname)
+			{
+				var id = $(this.properties.block).attr('id');
+				if (this.opts.properties.show && this.opts.properties.id && typeof id !== 'undefined' && id !== '')
+				{
+					setTimeout($.proxy(function()
+					{
+						var width = (this.opts.properties.classname && typeof classname !== 'undefined' && classname !== '') ? this.properties.labelClass.innerWidth() : -3;
+						this.properties.labelId.css({
+
+							zIndex: zindex,
+							top: pos.top - 13,
+							left: pos.left + width
+
+						}).show().text('#' + id);
+
+					}, this), 10);
+				}
+			},
+			showOnClickClass: function(pos, zindex)
+			{
+				var classname = $(this.properties.block).attr('class');
+				if (this.opts.properties.show && this.opts.properties.classname && typeof classname !== 'undefined' && classname !== '')
+				{
+					this.properties.labelClass.css({
+
+						zIndex: zindex,
+						top: pos.top - 13,
+						left: pos.left - 3
+
+					}).show().text(classname);
+				}
+
+				return classname;
+			},
+			hideOnBlur: function(e)
+			{
+				if (e.target === this.properties.block)
+				{
+					return;
+				}
+
+				this.properties.hideOnBlurId();
+				this.properties.hideOnBlurClass();
+
+			},
+			hideOnBlurId: function()
+			{
+				if (this.opts.properties.show && this.opts.properties.id)
+				{
+					this.properties.labelId.css('z-index', 99).hide();
+				}
+			},
+			hideOnBlurClass: function()
+			{
+				if (this.opts.properties.show && this.opts.properties.classname)
+				{
+					this.properties.labelClass.css('z-index', 99).hide();
+				}
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/source.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/source.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/source.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/source.js	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1,213 @@
+(function($)
+{
+	$.Redactor.prototype.source = function()
+	{
+		return {
+			init: function()
+			{
+				var button = this.button.addFirst('html', 'HTML');
+				this.button.setIcon(button, '<i class="re-icon-html"></i>');
+				this.button.addCallback(button, this.source.toggle);
+
+				var style = {
+					'width': '100%',
+					'margin': '0',
+					'background': '#1d1d1d',
+					'box-sizing': 'border-box',
+					'color': '#ccc',
+					'font-size': '15px',
+					'outline': 'none',
+					'padding': '20px',
+					'line-height': '24px',
+					'font-family': 'Consolas, Menlo, Monaco, "Courier New", monospace'
+				};
+
+				this.source.$textarea = $('<textarea />');
+				this.source.$textarea.css(style).hide();
+
+				if (this.opts.type === 'textarea')
+				{
+					this.core.box().append(this.source.$textarea);
+				}
+				else
+				{
+					this.core.box().after(this.source.$textarea);
+				}
+
+				this.core.element().on('destroy.callback.redactor', $.proxy(function()
+				{
+					this.source.$textarea.remove();
+
+				}, this));
+
+			},
+			toggle: function()
+			{
+				if (this.source.$textarea.hasClass('open'))
+				{
+    				this.source.hide();
+                }
+                else
+                {
+                    this.source.show();
+                    this.source.$textarea.on('keyup.redactor-source', $.proxy(function()
+                    {
+                        var html = this.source.$textarea.val();
+                        this.core.callback('change', html);
+
+                    }, this));
+                }
+			},
+			setCaretOnShow: function()
+			{
+				this.source.offset = this.offset.get();
+				var scroll = $(window).scrollTop();
+
+				var	width = this.core.editor().innerWidth();
+				var height = this.core.editor().innerHeight();
+
+				// caret position sync
+				this.source.start = 0;
+				this.source.end = 0;
+				var $editorDiv = $("<div/>").append($.parseHTML(this.core.editor().html(), document, true));
+				var $selectionMarkers = $editorDiv.find("span.redactor-selection-marker");
+
+				if ($selectionMarkers.length > 0)
+				{
+					var editorHtml = $editorDiv.html().replace(/&amp;/g, '&');
+
+					if ($selectionMarkers.length === 1)
+					{
+						this.source.start = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-1").prop("outerHTML"));
+						this.source.end = this.source.start;
+					}
+					else if ($selectionMarkers.length === 2)
+					{
+						this.source.start = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-1").prop("outerHTML"));
+						this.source.end = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-2").prop("outerHTML")) - $editorDiv.find("#selection-marker-1").prop("outerHTML").toString().length;
+					}
+				}
+			},
+			setCaretOnHide: function(html)
+			{
+			    this.source.start = this.source.$textarea.get(0).selectionStart;
+				this.source.end = this.source.$textarea.get(0).selectionEnd;
+
+				// if selection starts from end
+				if (this.source.start > this.source.end && this.source.end > 0)
+				{
+					var tempStart = this.source.end;
+					var tempEnd = this.source.start;
+
+					this.source.start = tempStart;
+					this.source.end = tempEnd;
+				}
+
+				this.source.start = this.source.enlargeOffset(html, this.source.start);
+				this.source.end = this.source.enlargeOffset(html, this.source.end);
+
+				html = html.substr(0, this.source.start) + this.marker.html(1) + html.substr(this.source.start);
+
+				if (this.source.end > this.source.start)
+				{
+					var markerLength = this.marker.html(1).toString().length;
+
+					html = html.substr(0, this.source.end + markerLength) + this.marker.html(2) + html.substr(this.source.end + markerLength);
+				}
+
+
+				return html;
+
+			},
+			hide: function()
+			{
+				this.source.$textarea.removeClass('open').hide();
+				this.source.$textarea.off('.redactor-source');
+
+				var code = this.source.$textarea.val();
+
+				code = this.paragraphize.load(code);
+				code = this.source.setCaretOnHide(code);
+				code = code.replace('&amp;<span id="selection-marker-1" class="redactor-selection-marker">​</span>', '<span id="selection-marker-1" class="redactor-selection-marker">​</span>&amp;');
+
+				this.code.start(code);
+				this.button.enableAll();
+				this.core.editor().show().focus();
+				this.selection.restore();
+				this.placeholder.enable();
+
+                this.core.callback('visual');
+			},
+			show: function()
+			{
+				this.selection.save();
+				this.source.setCaretOnShow();
+
+				var height = this.core.editor().height();
+				var code = this.code.get();
+
+                // callback
+                code = this.core.callback('source', code);
+
+				this.core.editor().hide();
+				this.button.disableAll('html');
+
+				this.source.$textarea.val(code).height(height).addClass('open').show();
+				this.source.$textarea.on('keyup.redactor-source', $.proxy(function()
+				{
+					if (this.opts.type === 'textarea')
+					{
+						this.core.textarea().val(this.source.$textarea.val());
+					}
+
+				}, this));
+
+				this.marker.remove();
+
+				$(window).scrollTop(scroll);
+
+				if (this.source.$textarea[0].setSelectionRange)
+				{
+					this.source.$textarea[0].setSelectionRange(this.source.start, this.source.end);
+				}
+
+				this.source.$textarea[0].scrollTop = 0;
+
+				setTimeout($.proxy(function()
+				{
+					this.source.$textarea.focus();
+
+				}, this), 0);
+			},
+			enlargeOffset: function(html, offset)
+			{
+				var htmlLength = html.length;
+				var c = 0;
+
+				if (html[offset] === '>')
+				{
+					c++;
+				}
+				else
+				{
+					for(var i = offset; i <= htmlLength; i++)
+					{
+						c++;
+
+						if (html[i] === '>')
+						{
+							break;
+						}
+						else if (html[i] === '<' || i === htmlLength)
+						{
+							c = 0;
+							break;
+						}
+					}
+				}
+
+				return offset + c;
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/table.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/table.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/table.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/table.js	2017-10-16 12:12:51.000000000 -0500
@@ -3,219 +3,196 @@
 	$.Redactor.prototype.table = function()
 	{
 		return {
-			getTemplate: function()
-			{
-				return String()
-				+ '<section id="redactor-modal-table-insert">'
-					+ '<label>' + this.lang.get('rows') + '</label>'
-					+ '<input type="text" size="5" value="2" id="redactor-table-rows" />'
-					+ '<label>' + this.lang.get('columns') + '</label>'
-					+ '<input type="text" size="5" value="3" id="redactor-table-columns" />'
-				+ '</section>';
+			langs: {
+				en: {
+					"table": "Table",
+					"insert-table": "Insert table",
+					"insert-row-above": "Insert row above",
+					"insert-row-below": "Insert row below",
+					"insert-column-left": "Insert column left",
+					"insert-column-right": "Insert column right",
+					"add-head": "Add head",
+					"delete-head": "Delete head",
+					"delete-column": "Delete column",
+					"delete-row": "Delete row",
+					"delete-table": "Delete table"
+				}
 			},
 			init: function()
 			{
 				var dropdown = {};
 
 				dropdown.insert_table = {
-									title: this.lang.get('insert_table'),
-									func: this.table.show,
-									observe: {
-										element: 'table',
-										in: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('insert-table'),
+					func: this.table.insert,
+					observe: {
+						element: 'table',
+						in: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.insert_row_above = {
-									title: this.lang.get('insert_row_above'),
-									func: this.table.addRowAbove,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
-
-				dropdown.insert_row_below = {
-									title: this.lang.get('insert_row_below'),
-									func: this.table.addRowBelow,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('insert-row-above'),
+					func: this.table.addRowAbove,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.insert_row_below = {
-									title: this.lang.get('insert_row_below'),
-									func: this.table.addRowBelow,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('insert-row-below'),
+					func: this.table.addRowBelow,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.insert_column_left = {
-									title: this.lang.get('insert_column_left'),
-									func: this.table.addColumnLeft,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('insert-column-left'),
+					func: this.table.addColumnLeft,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.insert_column_right = {
-									title: this.lang.get('insert_column_right'),
-									func: this.table.addColumnRight,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('insert-column-right'),
+					func: this.table.addColumnRight,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.add_head = {
-									title: this.lang.get('add_head'),
-									func: this.table.addHead,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('add-head'),
+					func: this.table.addHead,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.delete_head = {
-									title: this.lang.get('delete_head'),
-									func: this.table.deleteHead,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('delete-head'),
+					func: this.table.deleteHead,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.delete_column = {
-									title: this.lang.get('delete_column'),
-									func: this.table.deleteColumn,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+    				title: this.lang.get('delete-column'),
+    				func: this.table.deleteColumn,
+    				observe: {
+    					element: 'table',
+    					out: {
+    						attr: {
+    							'class': 'redactor-dropdown-link-inactive',
+    							'aria-disabled': true,
+    						}
+    					}
+    				}
+    			};
 
 				dropdown.delete_row = {
-									title: this.lang.get('delete_row'),
-									func: this.table.deleteRow,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('delete-row'),
+					func: this.table.deleteRow,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
 				dropdown.delete_table = {
-									title: this.lang.get('delete_table'),
-									func: this.table.deleteTable,
-									observe: {
-										element: 'table',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true,
-											}
-										}
-									}
-								};
+					title: this.lang.get('delete-table'),
+					func: this.table.deleteTable,
+					observe: {
+						element: 'table',
+						out: {
+							attr: {
+								'class': 'redactor-dropdown-link-inactive',
+								'aria-disabled': true,
+							}
+						}
+					}
+				};
 
-				this.observe.addButton('td', 'table');
-				this.observe.addButton('th', 'table');
 
 				var button = this.button.addBefore('link', 'table', this.lang.get('table'));
+				this.button.setIcon(button, '<i class="re-icon-table"></i>');
 				this.button.addDropdown(button, dropdown);
 			},
-			show: function()
-			{
-				this.modal.addTemplate('table', this.table.getTemplate());
-
-				this.modal.load('table', this.lang.get('insert_table'), 300);
-				this.modal.createCancelButton();
-
-				var button = this.modal.createActionButton(this.lang.get('insert'));
-				button.on('click', this.table.insert);
-
-				this.selection.save();
-				this.modal.show();
-
-				$('#redactor-table-rows').focus();
-
-			},
 			insert: function()
 			{
-				this.placeholder.remove();
+				if (this.table.getTable())
+				{
+					return;
+				}
+
+				this.placeholder.hide();
 
-				var rows = $('#redactor-table-rows').val(),
-					columns = $('#redactor-table-columns').val(),
-					$tableBox = $('<div>'),
-					tableId = Math.floor(Math.random() * 99999),
-					$table = $('<table id="table' + tableId + '"><tbody></tbody></table>'),
-					i, $row, z, $column;
+				var rows = 2;
+				var columns = 3;
+				var $tableBox = $('<div>');
+				var $table = $('<table />');
 
-				for (i = 0; i < rows; i++)
+				for (var i = 0; i < rows; i++)
 				{
-					$row = $('<tr>');
+					var $row = $('<tr>');
 
-					for (z = 0; z < columns; z++)
+					for (var z = 0; z < columns; z++)
 					{
-						$column = $('<td>' + this.opts.invisibleSpace + '</td>');
+						var $column = $('<td>' + this.opts.invisibleSpace + '</td>');
 
 						// set the focus to the first td
 						if (i === 0 && z === 0)
 						{
-							$column.append(this.selection.getMarker());
+							$column.append(this.marker.get());
 						}
 
 						$($row).append($column);
@@ -227,71 +204,51 @@
 				$tableBox.append($table);
 				var html = $tableBox.html();
 
-				this.modal.close();
-				this.selection.restore();
-
-				if (this.table.getTable()) return;
-
 				this.buffer.set();
 
-				var current = this.selection.getBlock() || this.selection.getCurrent();
-				if (current && current.tagName != 'BODY')
+				var current = this.selection.current();
+				if ($(current).closest('li', this.core.editor()[0]).length !== 0)
 				{
-					if (current.tagName == 'LI') current = $(current).closest('ul, ol');
-					$(current).after(html);
+					$(current).closest('ul, ol').first().after(html);
 				}
 				else
 				{
-					this.insert.html(html, false);
+					this.air.collapsed();
+					this.insert.html(html);
 				}
 
 				this.selection.restore();
+				this.core.callback('insertedTable', $table);
+			},
+			getTable: function()
+			{
+				var $table = $(this.selection.current()).closest('table');
 
-				var table = this.$editor.find('#table' + tableId);
-
-				var p = table.prev("p");
-
-				if (p.length > 0 && this.utils.isEmpty(p.html()))
+				if (!this.utils.isRedactorParent($table))
 				{
-					p.remove();
+					return false;
 				}
 
-				if (!this.opts.linebreaks && (this.utils.browser('mozilla') || this.utils.browser('msie')))
+				if ($table.length === 0)
 				{
-					var $next = table.next();
-					if ($next.length === 0)
-					{
-						 table.after(this.opts.emptyHtml);
-					}
+					return false;
 				}
 
-				this.observe.buttons();
-
-				table.find('span.redactor-selection-marker').remove();
-				table.removeAttr('id');
-
-				this.code.sync();
-				this.core.setCallback('insertedTable', table);
-			},
-			getTable: function()
-			{
-				var $table = $(this.selection.getParent()).closest('table');
-
-				if (!this.utils.isRedactorParent($table)) return false;
-				if ($table.size() === 0) return false;
-
 				return $table;
 			},
 			restoreAfterDelete: function($table)
 			{
 				this.selection.restore();
 				$table.find('span.redactor-selection-marker').remove();
-				this.code.sync();
+
 			},
 			deleteTable: function()
 			{
 				var $table = this.table.getTable();
-				if (!$table) return;
+				if (!$table)
+				{
+					return;
+				}
 
 				this.buffer.set();
 
@@ -299,69 +256,84 @@
 				var $next = $table.next();
 				if (!this.opts.linebreaks && $next.length !== 0)
 				{
-					this.caret.setStart($next);
+					this.caret.start($next);
 				}
 				else
 				{
-					this.caret.setAfter($table);
+					this.caret.after($table);
 				}
 
 
 				$table.remove();
 
-				this.code.sync();
+
 			},
 			deleteRow: function()
 			{
-			var $table = this.table.getTable();
-			if (!$table) return;
+				var $table = this.table.getTable();
+				if (!$table)
+				{
+					return;
+				}
 
-			var $current = $(this.selection.getCurrent());
+				var $current = $(this.selection.current());
 
-			this.buffer.set();
+				this.buffer.set();
 
-			var $current_tr = $current.closest('tr');
-			var $focus_tr = $current_tr.prev().length ? $current_tr.prev() : $current_tr.next();
-			if ($focus_tr.length)
-			{
-				var $focus_td = $focus_tr.children('td, th').first();
-				if ($focus_td.length) $focus_td.prepend(this.selection.getMarker());
-			}
+				var $current_tr = $current.closest('tr');
+				var $focus_tr = $current_tr.prev().length ? $current_tr.prev() : $current_tr.next();
+				if ($focus_tr.length)
+				{
+					var $focus_td = $focus_tr.children('td, th').first();
+					if ($focus_td.length)
+					{
+						$focus_td.prepend(this.marker.get());
+					}
+				}
 
-			$current_tr.remove();
-			this.table.restoreAfterDelete($table);
-		},
+				$current_tr.remove();
+				this.table.restoreAfterDelete($table);
+			},
 			deleteColumn: function()
 			{
-			var $table = this.table.getTable();
-			if (!$table) return;
+				var $table = this.table.getTable();
+				if (!$table)
+				{
+					return;
+				}
 
-			this.buffer.set();
+				this.buffer.set();
 
-			var $current = $(this.selection.getCurrent());
-			var $current_td = $current.closest('td, th');
-			var index = $current_td[0].cellIndex;
+				var $current = $(this.selection.current());
+				var $current_td = $current.closest('td, th');
+				var index = $current_td[0].cellIndex;
 
-			$table.find('tr').each($.proxy(function(i, elem)
-			{
-				var $elem = $(elem);
-				var focusIndex = index - 1 < 0 ? index + 1 : index - 1;
-				if (i === 0) $elem.find('td, th').eq(focusIndex).prepend(this.selection.getMarker());
+				$table.find('tr').each($.proxy(function(i, elem)
+				{
+					var $elem = $(elem);
+					var focusIndex = index - 1 < 0 ? index + 1 : index - 1;
+					if (i === 0)
+					{
+						$elem.find('td, th').eq(focusIndex).prepend(this.marker.get());
+					}
 
-				$elem.find('td, th').eq(index).remove();
+					$elem.find('td, th').eq(index).remove();
 
-			}, this));
+				}, this));
 
-			this.table.restoreAfterDelete($table);
-		},
+				this.table.restoreAfterDelete($table);
+			},
 			addHead: function()
 			{
 				var $table = this.table.getTable();
-				if (!$table) return;
+				if (!$table)
+				{
+					return;
+				}
 
 				this.buffer.set();
 
-				if ($table.find('thead').size() !== 0)
+				if ($table.find('thead').length !== 0)
 				{
 					this.table.deleteHead();
 					return;
@@ -376,21 +348,27 @@
 				$thead = $('<thead></thead>').append(tr);
 				$table.prepend($thead);
 
-				this.code.sync();
+
 
 			},
 			deleteHead: function()
 			{
 				var $table = this.table.getTable();
-				if (!$table) return;
+				if (!$table)
+				{
+					return;
+				}
 
 				var $thead = $table.find('thead');
-				if ($thead.size() === 0) return;
+				if ($thead.length === 0)
+				{
+					return;
+				}
 
 				this.buffer.set();
 
 				$thead.remove();
-				this.code.sync();
+
 			},
 			addRowAbove: function()
 			{
@@ -411,11 +389,14 @@
 			addRow: function(type)
 			{
 				var $table = this.table.getTable();
-				if (!$table) return;
+				if (!$table)
+				{
+					return;
+				}
 
 				this.buffer.set();
 
-				var $current = $(this.selection.getCurrent());
+				var $current = $(this.selection.current());
 				var $current_tr = $current.closest('tr');
 				var new_tr = $current_tr.clone();
 
@@ -429,7 +410,7 @@
 
 				new_tr.find('td').html(this.opts.invisibleSpace);
 
-				if (type == 'after')
+				if (type === 'after')
 				{
 					$current_tr.after(new_tr);
 				}
@@ -438,15 +419,18 @@
 					$current_tr.before(new_tr);
 				}
 
-				this.code.sync();
+
 			},
 			addColumn: function (type)
 			{
 				var $table = this.table.getTable();
-				if (!$table) return;
+				if (!$table)
+				{
+					return;
+				}
 
 				var index = 0;
-				var current = $(this.selection.getCurrent());
+				var current = $(this.selection.current());
 
 				this.buffer.set();
 
@@ -455,7 +439,10 @@
 
 				$current_tr.find('td, th').each($.proxy(function(i, elem)
 				{
-					if ($(elem)[0] === $current_td[0]) index = i;
+					if ($(elem)[0] === $current_td[0])
+					{
+						index = i;
+					}
 
 				}, this));
 
@@ -466,7 +453,7 @@
 					var td = $current.clone();
 					td.html(this.opts.invisibleSpace);
 
-					if (type == 'after')
+					if (type === 'after')
 					{
 						$current.after(td);
 					}
@@ -477,8 +464,8 @@
 
 				}, this));
 
-				this.code.sync();
+
 			}
 		};
 	};
-})(jQuery);
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/textdirection.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/textdirection.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/textdirection.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/textdirection.js	2017-10-16 12:12:51.000000000 -0500
@@ -3,21 +3,29 @@
 	$.Redactor.prototype.textdirection = function()
 	{
 		return {
+			langs: {
+				en: {
+					"change-text-direction": "RTL-LTR",
+					"left-to-right": "Left to Right",
+					"right-to-left": "Right to Left"
+				}
+			},
 			init: function()
 			{
 				var that = this;
 				var dropdown = {};
 
-				dropdown.ltr = { title: 'Left to Right', func: that.textdirection.setLtr };
-				dropdown.rtl = { title: 'Right to Left', func: that.textdirection.setRtl};
+				dropdown.ltr = { title: that.lang.get('left-to-right'), func: that.textdirection.setLtr };
+				dropdown.rtl = { title: that.lang.get('right-to-left'), func: that.textdirection.setRtl };
 
-				var button = this.button.add('textdirection', 'Change Text Direction');
+				var button = this.button.add('textdirection', this.lang.get('change-text-direction'));
+				this.button.setIcon(button, '<i class="re-icon-textdirection"></i>');
 				this.button.addDropdown(button, dropdown);
 			},
 			setRtl: function()
 			{
 				this.buffer.set();
-				this.block.setAttr('dir', 'rtl');
+				this.block.addAttr('dir', 'rtl');
 			},
 			setLtr: function()
 			{
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/undo.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/undo.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/plugins/undo.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/plugins/undo.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,6 +1,4 @@
-if (! RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.undo = function () {
+$.Redactor.prototype.undo = function () {
 	return {
 		init: function () {
 			var dropdown = {};
@@ -9,6 +7,7 @@
 			dropdown.point2 = { title: $.i18n ('Redo'), func: this.buffer.redo };
 			
 			var button = this.button.add ('undo', $.i18n ('Undo'));
+			this.button.setIcon (button, '<i class="re-icon-undo"></i>');
 			this.button.addDropdown (button, dropdown);
 		}
 	};
Binary files elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor-font.eot and elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor-font.eot differ
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor-iframe.css elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor-iframe.css
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor-iframe.css	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor-iframe.css	1969-12-31 18:00:00.000000000 -0600
@@ -1,203 +0,0 @@
-html {
-	margin: 0;
-	padding: 0;
-}
-body {
-	margin: 0;
-	padding: 10px;
-	font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif;
-}
-
-code,
-pre {
-	font-family: Menlo, Monaco, monospace, sans-serif;
-}
-
-div,
-p,
-ul,
-ol,
-table,
-dl,
-blockquote,
-pre {
-	font-size: 15px;
-	line-height: 1.5rem;
-}
-div {
-	border: 1px dashed #bbb !important;
-}
-a {
-	color: #15c;
-	text-decoration: underline;
-}
-.redactor_placeholder {
-	color: #999 !important;
-	display: block !important;
-	margin-bottom: 10px !important;
-}
-
-object,
-embed,
-video,
-img {
-	max-width: 100%;
-	width: auto;
-}
-video,
-img {
-	height: auto;
-}
-
-div,
-p,
-ul,
-ol,
-table,
-dl,
-blockquote,
-pre {
-	margin: 0;
-	margin-bottom: 15px;
-	border: none;
-	background: none;
-	box-shadow: none;
-}
-iframe,
-object,
-hr {
-	margin-bottom: 15px;
-}
-blockquote {
-	margin-left: 1.5em !important;
-	padding-left: 0;
-	color: #777;
-	font-style: italic;
-}
-ul,
-ol {
-	padding-left: 2em;
-}
-ul ul,
-ol ol,
-ul ol,
-ol ul {
-	margin: 2px;
-	padding: 0;
-	padding-left: 2em;
-	border: none;
-}
-dl dt { font-weight: bold; }
-dd { margin-left: 1em;}
-
-table {
-	border-collapse: collapse;
-	font-size: 1em;
-}
-table td {
-	padding: 5px;
-	border: 1px solid #ddd;
-	vertical-align: top;
-}
-table thead td {
-	border-bottom: 2px solid #000;
-	font-weight: bold;
-}
-code {
-	background-color: #d8d7d7;
-}
-pre {
-	overflow: auto;
-	padding: 1em;
-	border: 1px solid #ddd;
-	border-radius: 3px;
-	background: #f8f8f8;
-	white-space: pre;
-	font-size: 90%;
-}
-hr {
-  display: block;
-  height: 1px;
-  border: 0;
-  border-top: 1px solid #ccc;
-}
-
-h1,
-h2,
-h3,
-h4,
-h5 {
-	margin: 0;
-	padding: 0;
-	background: none;
-	color: #000;
-	font-weight: bold;
-}
-
-h1 {
-	margin-bottom: 10px;
-	font-size: 36px;
-	line-height: 40px;
-}
-h2 {
-	margin-bottom: 15px;
-	font-size: 30px;
-	line-height: 38px;
-}
-h3 {
-	margin-bottom: 10px;
-	font-size: 24px;
-	line-height: 30px;
-}
-h4 {
-	margin-bottom: 10px;
-	font-size: 18px;
-	line-height: 24px;
-}
-h5 {
-	margin-bottom: 10px;
-	font-size: 1em;
-}
-
-body.redactor_editor_wym {
-	background: #f4f4f4;
-}
-.redactor_editor_wym div,
-.redactor_editor_wym p,
-.redactor_editor_wym ul,
-.redactor_editor_wym ol,
-.redactor_editor_wym table,
-.redactor_editor_wym dl,
-.redactor_editor_wym pre,
-.redactor_editor_wym h1,
-.redactor_editor_wym h2,
-.redactor_editor_wym h3,
-.redactor_editor_wym h4,
-.redactor_editor_wym h5,
-.redactor_editor_wym blockquote {
-	margin: 0 0 10px 0;
-	padding: 7px 10px;
-	border: 1px solid #e4e4e4;
-	background-color: #fff;
-}
-.redactor_editor_wym div {
-	border: 1px dashed #bbb !important;
-}
-.redactor_editor_wym pre {
-	border: 2px dashed #e4e4e4 !important;
-	background-color: #fafafa !important;
-}
-.redactor_editor_wym code {
-	background-color: #f4f4f4 !important;
-}
-.redactor_editor_wym ul,
-.redactor_editor_wym ol {
-	padding-left: 2em !important;
-}
-.redactor_editor_wym ul li ul,
-.redactor_editor_wym ul li ol,
-.redactor_editor_wym ol li ol,
-.redactor_editor_wym ol li ul {
-	border: none !important;
-}
-
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.css elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.css
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.css	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.css	2017-10-16 12:12:51.000000000 -0500
@@ -1,412 +1,437 @@
 /*
-	Icon font
+	Redactor II
+
+	http://imperavi.com/redactor/
+
+	Copyright (c) 2009-2017, Imperavi Oy.
+	License: http://imperavi.com/redactor/license/
 */
 @font-face {
-  font-family: 'RedactorFont';
-  src: url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMggi/NUAAAC8AAAAYGNtYXAaVcx2AAABHAAAAExnYXNwAAAAEAAAAWgAAAAIZ2x5Zm8dIFkAAAFwAAATSGhlYWQACVb9AAAUuAAAADZoaGVhA+ECBQAAFPAAAAAkaG10eEEBA94AABUUAAAAkGxvY2FVlFE8AAAVpAAAAEptYXhwAC8AkgAAFfAAAAAgbmFtZRHEcG0AABYQAAABZnBvc3QAAwAAAAAXeAAAACAAAwIAAZAABQAAAUwBZgAAAEcBTAFmAAAA9QAZAIQAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmHwHg/+D/4AHgACAAAAABAAAAAAAAAAAAAAAgAAAAAAACAAAAAwAAABQAAwABAAAAFAAEADgAAAAKAAgAAgACAAEAIOYf//3//wAAAAAAIOYA//3//wAB/+MaBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwAAACUCAAGSAAQACQANAAA3EQURBQEFEQURATUXBwACAP4AAdv+SgG2/tySkiUBbgH+lAEBSgH+3AEBJv7/3G9sAAAGAAAASQIAAW4ABAAJAA4AEwAYAB0AABMhFSE1FSEVITUVIRUhNSczFSM1FTMVIzUVMxUjNZIBbv6SAW7+kgFu/pKSSUlJSUlJAW5JSW5JSW5JSdxJSW5JSW5JSQAAAAACAAAAJQH3AZIAFgAuAAAlLgMnBzIuAic+AyMXNh4CByUnMg4CBx4DIxcnHgMXNi4CBwH3Dik/XUABAR04Vjg+WDUYAQFNeEcZEv7MAQENHDMlHzIfEQEBASZUTDYHCSBIZj4lGCQaEARqFi5HLzJFKhJqDC1RZSzVPQoWIxkbJBQID0wCCQ4VDxo4KA8PAAACAG4AJQGSAZIABAAzAAA3IQchJzceAzMyPgI3PgMnNyMXDgMHDgMjIi4CJy4DNycjBx4DF24BJQH+3QFABRIUGg0QGBUQCAYKBgQBAUABAQEEBAQCCAgKBQYJCQcEAgUCAwEBPwEBAwcJCEkkJD8HCgYEBAYKBwcRFRkPtcMGCQkHAwMFAwEBAwUDAwcJCQbDtQ8ZFREHAAUAAP//AgABtwAGAA4AFgBHAF8AAAEzFTMVIzUfAQc1IzUzNS8BNxUzFSMVFx4DFRwBDgEHDgMHMh4CFx4DHwEjJzwBJjQjLgMrARUjNTMyHgIXBzMyPgI3PgM1NC4CJy4DKwEVAUkjS24mkZFvb96RkW9vDAMFAwECAwICBQUGBAECAgIBAQICAgEbIBMBAQIEBQUCCh0qCAwKCQM3DgMFBQMCAQIBAQEBAgECAwQGAw4BtpYgtv9cXEolSUhcXEklSlUDCAoNBwQJBwcCAwUDAgEBAQIBAQMEBANCLgEBAQIGBwYCSLYBAwUDRAECAgECBAQGAwQFBQQBAgIBATIAAAAAAwBtAAABkgGTAAMADAARAAAlIzcXBzM3MxczAyMDFyEVITUBI0YjI7ZKF2MXSmVbZQEBJP7c5nh4eUlJASb+2iRJSQAKAAAAJQIAAZIABAAJAA4AEwAYAB0AIgAnACwAMQAANxEFEQU3FzUHFTU3NScVJwcVFzUVJxU3NRUHFRc1NxUXNQclBxUXNRUnFTc1FQcVFzUAAgD+ALeSkpKSJW1tbW1tbSWSkgEkbW1tbW1tJQFuAf6UASUBSgFIbQFIAUq4AUgBSm8BSgFIbQFIAUrbSAFKAQEBSAFKbwFKAUhtAUgBSgAAAAIACQAlAgABkgAWAC4AACUOAxU1DgMHJj4CFzU0HgIXBT4DNxU1FD4CNy4DNRUmDgIXAgA5VTkcQVxAKA8RGEh3Thc2Vz/+PAY3S1UlECAxICYyHQw9Z0chCt8wRi8VAWsFDxsjGS1kUiwLaQETKUYxYBAUDwgDTRABCRMlGhoiFwkBPhAQJzkZAAAAAgBJAEkBtwFuAEcAjwAAAQ4DFRQeAhceAxc+Azc+AzU0LgInLgMHJg4CBwYiBiYHNAYmIicwLgE0NTQ+Ajc+Azc1DgMHJw4DFRQeAhceAxc+Azc+AzU0LgInLgMHJg4CBwYiBiYVJgYmIjUiJjQmNTQ+Ajc+Azc1DgMHATkJDQkEAwYKBgcOEBAJCA4NDAUGCAUDAwQHBQUKCgwGBQoICAMBAgIBAQEBAQEBAQMGCgYGDxITCxMhHBYJzQkNCQQDBwkHBg4QEQgIDg0MBgUIBQMCBQcFBAoLDAYFCQkIAwECAgEBAQEBAQEBAwcJBgcPERQLEyEcFwkBIgwYHBsQCxgUEgcICwgDAQECBggGBQ0MDwYIDA0KBgUIBAQBAQICBQECAgEBAQECAQQCBQEKEhQRCggQDAwDFwgQFBQNAQwYHBsQCxgUEgcICwgDAQECBggGBQ0MDwYIDA0KBgUIBAQBAQICBQECAgEBAQECAQQCBQEKEhQRCggQDAwDFwgQFBQNAAT//wBJAgABbgAEAAkADgASAAATIRUhNRchFSE1FSEVITUHNQcXAAIA/gC3AUn+twFJ/rclk5MBbklJbklJbklJSbdcWwAAAAUAAABJAgABbgAEAAkADgAaAG0AABMhFSE1FSEVITUVIRUhNSczNSM1IwcVNxUjFRc+Azc+Azc0PgE0NTQuAicuAyMiBioBByIOAiMVPgM3Mj4BMjM6AR4BFx4CFBUcAQYUBw4DBw4DDwEVMzUjPgM3MZIBbv6SAW7+kgFu/pKNRBgUFhYYIAUHBQMBAgICAQEBAQEDBAICBgcHBQEEAwQCAgMEBAICBAQDAgIDAwMCAgMDAwEBAgEBAQEBAgICAQQGCQULRC0BAwQEAgFuSUluSUluSUlrFF0GFAZJFJEFBwYEAQIDBAMBAgMDAwIDBwUFAgIEAgEBAQEBAhUBAgIBAQEBAQIBAQIDBAIBAgMCAQICAwMCAQUHCQYNExQBBAMFAgADAAAASQIAAW4ALAAxAGwAACUiLgInNTMeAzMyPgI1NC4CIyIOAgcjNT4DMzIeAhUUDgIjJzMVIzUnIg4CByMVDgMVFB4CFxUzHgMzMj4CNzMVDgMjIi4CNTQ+AjMyHgIXFSMuAyMBbgoUEhEIHgUKCwsGEyEZDg4ZIRMGCwsKBR4IERIUCh41KBcXKDUet5KSJQYLCwoFHgQHBQICBQcEHgUKCwsGBgsLCgUeCBESFAoeNSgXFyg1HgoUEhEIHgUKCwsGSQMGBwU0AgQDAQ0XHhESHhcNAQMEAjQFBwYDFyg1Hx41KBe3SUkvAQMEAhgFCw0OBwcNDQsGFwIEAwEBAwQCNAUHBgMXKDUeHzUoFwMGBwU0AgQDAQAAAAEAAAC3AgABAAAEAAATIRUhNQACAP4AAQBJSQABAJIASQGSAZIADAAAAQ8CFzcHNxc3DwEXAQcpQQvBC0ApQAvBC0EBWdYBOAE6AdgBOgE4AQAAAAQAAABJAgABbgAEAAkADgASAAATIRUhNRchFSE1FSEVITUHNRcHAAIA/gC3AUn+twFJ/re3k5MBbklJbklJbklJSbdcWwAAAAMAAAAlAgABkgAEAAkAEgAANxEFEQUBBREFEQc/ARcVJTU3FwACAP4AAdv+SgG2tiQwPv6Sbm4lAW4B/pQBAUoB/twBASa4AV5eSgFIk5MABAAlAAAB2wG3AAMAGgAeADUAAAEVJzMHHgIGDwEOAS4BJy4BNDY/AT4BHgEXARcnFTceATI2PwE+AS4BJy4CBg8BDgEeARcB29vbKgMDAQICcwIGBgYCAwMBAnQCBQYGAv5029sqAwYGBQJzAgEBAgMCBgYGAnICAgEDAgG33NwrAgYGBgJzAgEBAgMDBQYGAnMCAQECA/51AdvaKgMDAQJzAgUGBgMCAwECAnMCBQYGAgAABAAA/9sCAAHbAAMAGgAeADUAACU1Fwc3LgI2PwE+AR4BFx4BFAYPAQ4BIiYnBycXNQcuASIGDwEOAR4BFx4CNj8BPgEuAScBJdvbKgMDAQICcwIGBgYCAwMBAnQCBQYGAnTb2yoDBgYFAnMCAQECAwIGBgYCcgICAQMC/9zbASwCBgYGAnICAgEDAgMGBgUCcwIBAwN1AdzbKgMDAQJzAgUGBgMCAwECAnICBgYGAgABAG4AJQFuAZIAEgAAJREjESM1Ii4CNTQ+AjsBESMBSSRKFigeEREeKBaTJSUBSf63khEeKBcWKB4R/pMAAAAAAwAlAAEB3AG2AAoAVwB4AAAlMwcnMzUjNxcjFQcOAwcOAyMiLgInLgM1ND4CNz4DOwE1NC4CJy4DIyIOAgcOAwc1PgM3PgIyMzIeAhceAx0BIzU1IyIOAgcOAxUUHgIXHgMzMj4CNz4DPQEBkkpcXEpKXFxK6wIGBgcEAwgICQUIDw4LBQUHBQIDBQkGBQ8SFAwlAQMDAgMFBwgFBAoJCQQFCQkJBQQJCQkEBQkKCQUNFRENBQUIBQI0FQgMCggDAwUDAQECAwICBQUHAwUJCQcCAwUCApKRkZORkZMHBAYFBQECAwIBAgUHBQULDQ8JCRANCwQFBgUCCQMGBQQCAgICAQEBAgEBAwQFAy8CAwMCAQEBAQIFCAUGDhIXDXgYSwECAwICBgYIBQQGBgUCAgMCAQIEBgQECgsOBwQAAAAEACUASgHbAW4AAwAMAC0AegAANyM3FwczNzMXMwMjAyUVFA4CBw4DIyIuAicuAzU0PgI3PgM7ATcuAyMqAQ4BBw4DBxU+Azc+AzMyHgIXHgMdASMiDgIHDgMVFB4CFx4DMzI+Ajc+AzcVMzU0LgInrjUbGok4EUsSOE1ETQF/AQMFAwMHCQoFBAYGBQIDAwIBAgMEAwMJCw0IFiIFDhIWDQYKCgoFBAoJCgQFCgoJBQUJCgoFBAkHBgIDAwMBJg0WEw8GBgkGAwIFCAUFDA4QCQUJCQgEBAcHBgI3AgUIBsV1dXZHRwEf/uFlBAcOCwsEBAYEAwICAwICBQYHAwUJBwUCAgMCAWIFCAYCAQEBAQMCBAIwAwUEAwIBAgEBAQIDAQIEBgYDCQMEBwQFCw4QCgkPDgsFBQcFAgEBAwICBQUHAxh7DhcTDwUAAAIASQBJAbcBkwAEAIEAABMhFSE1Fx4DFx4DFRQOAgcOAyMiLgInLgMnFR4DFx4DMzI+Ajc+AzU0LgInLgMvAS4DJy4DNTQ+Ajc+AzMyHgIXHgMXNS4DJy4DIyIOAgcOAxUUHgIXHgMfAUkBbv6SvwQIBgYCAgMDAQIDBQQDCAkLBgYNDAwGBg0NDQYGCwwNBgYNDAwHDxoXEggHCwgDAgUHBAUMDxIKHAcNCQcDAgMDAQIDBQMDCAkKBgYLCgsGBQsLCgYGCwwLBgYLDAsGDBcUEQcICwcDAgQHBAUMERUNIAEAJSUxAgMFBAMDBgYHAwUICAYDAgQDAQECAwMCBQcIBEEDBAUDAgECAQEDBgkGBQ8SFQwJEA8NBgYKCggDCwIFBQQDAgUFBgMFBwcFAwIDAwEBAgMCAgQGBgM9AgUDBAEBAgEBAwcJBgYPERMLCA8ODAQFCgoJBQsAAAQAAABJAgABbgAEAAkADgATAAA/ARcHJxc3FwcnJScHFzcXJwcXNwAltiO4AbYluCMB/yO4JbYBuCO2Jdsdkh6TAZQekhwBHZIekwGUHpIcAAAAAAUAAP/bAgAB2wAEAAkADgATABgAABcRIREhASERIREHITUhFRUhNSEVFSE1IRUAAgD+AAHb/koBtkn+3AEk/twBJP7cASQlAgD+AAHc/kkBt5JJSW5JSW5JSQAAAwCTAEkBbQGSABcALwBbAAA3Mh4CFx4DFwYUDgEHDgMrATczNzIeAhceAhQXBhQOAQcOAysBNzMDMzI+Ajc+Ayc2LgInLgMnPgM3PgMnNi4CJy4DKwED+AcNCQkDBAMEAQEBBAQEAgkKDQcqASgBBQsIBwIDAwQBAQQCBAEICAsFKgEoZGQRGRgRCAYLBgQBAQMEBwQGCg8OCggMDQgFAwcDAwEBBAYLBgcQFBcOZAHeAQMEAwMICQwHBgsJCAIDBAMBYYECAgMDAgYHCQUFCQcGAgIEAgFN/uoDBQgGBQ4RFQsKEQ8NBgUJBgQBAQMFBwUECwwOCAsSDw0FBggFAv63AAADACUAAAHbAbcABAANABEAADcRIREhEyMDMzczFzMDBxcjNyUBtv5K/URMOBBLETdLIho0GgABt/5JAW7+20hIASU1eHgAAAACAEIAHwG8AZkAIQBLAAAlBycOAS4BJwcXBw4BIiYvAS4BNDY/AT4BMhYfAR4BFAYHJy4BIgYPAQ4BFBYXHgE+AT8BLgMnLgI2PwE+AhYXBxc3PgE0JicBvJQEBQsMCwYhHg8PJygnDw8PDw8P1w8nKCcPDw8QEA8lCxscHAvFCwwLCgsbHRsLJwMFBgUCCgwDBQhSBg8QEgl+JoYLCwoL9pQEAQECAwMgHg8PDw8PDxAmKCcP1w8QEA8PDycoJw9+CwoLC8YLGx0bCwoLAQsLJgIDBAUCChcXFQhSBgYBBAV9JYYLHBwbCwAAAAMAAABJAgABbgAEAAkADgAAEyEVITUXIRUhNRczFSM1AAIA/gCSAW7+kpPb2wFuSUluSUluSUkAAwAAAEkCAAFuAAQACQAOAAATIRUhNRUhFSE1FTMVIzUAAgD+AAFt/pPc3AFuSUluSUluSUkAAAADAAAASQIAAW4ABAAJAA4AABMhFSE1FSEVITUVIRUhNQAB//4BAf/+AQIA/gABbklJbklJbklJAAMAAABJAgABbgAEAAkADgAAEyEHIScHIRchNxchByEnbgElAf7dAW0B/wH9/wFtASUB/t0BAW5JSW5JSW5JSQAGAAAAJwIAAZUACAANABQAGAAdACEAADc1IxEhFTMRIQEhFSE1FyMVIRUhNQcjNxcXITUhFScXIzdJSQG3Sf5JAUn+kwFtSiX+twFu27hcXG3+2wElKSlJICdJASVK/twBSdzcSbcl3EltbSUlJW5JSQAAAAEAAAABAADCHXSvXw889QALAgAAAAAAz3WLJQAAAADPdYsl////2wIAAdsAAAAIAAIAAAAAAAAAAQAAAeD/4AAAAgD//wAAAgAAAQAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAbgIAAAACAABtAgAAAAIAAAkCAABJAgD//wIAAAACAAAAAgAAAAIAAJICAAAAAgAAAAIAACUCAAAAAgAAbgIAACUCAAAlAgAASQIAAAACAAAAAgAAkwIAACUCAABCAgAAAAIAAAACAAAAAgAAAAIAAAAAAAAAAAoAFAAeAEAAcAC4AQQBhgGoAfoCQAMCAyYDuARGBFQEcASUBLwFFgVuBY4GLgbUB4IHrAfaCFwIgAj2CRIJLglKCWoJpAAAAAEAAAAkAJAACgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAYAAAAAQAAAAAAAgAOAGoAAQAAAAAAAwAYAC4AAQAAAAAABAAYAHgAAQAAAAAABQAWABgAAQAAAAAABgAMAEYAAQAAAAAACgAoAJAAAwABBAkAAQAYAAAAAwABBAkAAgAOAGoAAwABBAkAAwAYAC4AAwABBAkABAAYAHgAAwABBAkABQAWABgAAwABBAkABgAYAFIAAwABBAkACgAoAJAAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQAVgBlAHIAcwBpAG8AbgAgADEALgAwAFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0UmVkYWN0b3JGb250AFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0AFIAZQBnAHUAbABhAHIAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('truetype'), url(data:application/font-woff;charset=utf-8;base64,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) format('woff');
+  font-family: 'Redactor';
+  src: url("data:application/x-font-ttf;charset=utf-8;base64,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") format("truetype");
   font-weight: normal;
+  font-style: normal; }
+
+[class^="re-icon-"], [class*=" re-icon-"] {
+  /* use !important to prevent issues with browser extensions that change fonts */
+  font-family: 'Redactor' !important;
+  speak: none;
   font-style: normal;
-}
-/*
-	Box
-*/
+  font-weight: normal;
+  font-variant: normal;
+  text-transform: none;
+  line-height: 1;
+  -webkit-font-smoothing: antialiased;
+  -moz-osx-font-smoothing: grayscale; }
+
+.re-icon-aligncenter:before {
+  content: "\e900"; }
+
+.re-icon-alignment:before,
+.re-icon-alignleft:before {
+  content: "\e901"; }
+
+.re-icon-alignright:before {
+  content: "\e902"; }
+
+.re-icon-bold:before {
+  content: "\e903"; }
+
+.re-icon-bookmark:before {
+  content: "\e904"; }
+
+.re-icon-clips:before {
+  content: "\e905"; }
+
+.re-icon-codesnippets:before {
+  content: "\e906"; }
+
+.re-icon-deleted:before {
+  content: "\e907"; }
+
+.re-icon-expand:before {
+  content: "\e908"; }
+
+.re-icon-file:before {
+  content: "\e909"; }
+
+.re-icon-fontcolor:before {
+  content: "\e90a"; }
+
+.re-icon-fontfamily:before {
+  content: "\e90b"; }
+
+.re-icon-fontsize:before {
+  content: "\e90c"; }
+
+.re-icon-format:before {
+  content: "\e90d"; }
+
+.re-icon-html:before {
+  content: "\e90e"; }
+
+.re-icon-imagecenter:before {
+  content: "\e90f"; }
+
+.re-icon-imageleft:before {
+  content: "\e910"; }
+
+.re-icon-imageright:before {
+  content: "\e911"; }
+
+.re-icon-image:before {
+  content: "\e912"; }
+
+.re-icon-indent:before {
+  content: "\e913"; }
+
+.re-icon-inline:before {
+  content: "\e914"; }
+
+.re-icon-italic:before {
+  content: "\e915"; }
+
+.re-icon-horizontalrule:before {
+  content: "\e916"; }
+
+.re-icon-link:before {
+  content: "\e917"; }
+
+.re-icon-ol:before,
+.re-icon-ordered:before {
+  content: "\e918"; }
+
+.re-icon-outdent:before {
+  content: "\e919"; }
+
+.re-icon-properties:before {
+  content: "\e91a"; }
+
+.re-icon-readmore:before {
+  content: "\e91b"; }
+
+.re-icon-redo:before {
+  content: "\e91c"; }
+
+.re-icon-retract:before {
+  content: "\e91d"; }
+
+.re-icon-specialcharacters:before {
+  content: "\e91e"; }
+
+.re-icon-sub:before {
+  content: "\e91f"; }
+
+.re-icon-sup:before {
+  content: "\e920"; }
+
+.re-icon-table:before {
+  content: "\e921"; }
+
+.re-icon-textdirection:before {
+  content: "\e922"; }
+
+.re-icon-toggle:before {
+  content: "\e923"; }
+
+.re-icon-underline:before {
+  content: "\e924"; }
+
+.re-icon-undo:before {
+  content: "\e925"; }
+
+.re-icon-ul:before,
+.re-icon-lists:before,
+.re-icon-unordered:before {
+  content: "\e926"; }
+
+.re-icon-video:before {
+  content: "\e927"; }
+
 .redactor-box {
   position: relative;
-  overflow: visible;
-  margin-bottom: 24px;
-}
-.redactor-box textarea {
-  display: block;
-  position: relative;
-  margin: 0;
-  padding: 0;
-  width: 100%;
-  overflow: auto;
-  outline: none;
-  border: none;
-  background-color: #111;
-  box-shadow: none;
-  color: #ccc;
-  font-size: 13px;
-  font-family: Menlo, Monaco, monospace, sans-serif !important;
-  resize: none;
-}
-.redactor-box textarea:focus {
-  outline: none;
-}
-.redactor-editor,
+  overflow: visible; }
+
+.redactor-layer,
 .redactor-box {
-  background: #fff;
-}
-/*
-	Z-index setup
-*/
-.redactor-editor,
+  background: #fff; }
+
+.redactor-layer,
 .redactor-box,
 .redactor-box textarea {
-  z-index: auto;
-}
-.redactor-box-fullscreen {
-  z-index: 1051;
-}
+  z-index: auto; }
+
+.redactor-link-tooltip {
+  z-index: 1050; }
+
 .redactor-toolbar {
-  z-index: 100;
-}
+  z-index: 100; }
+
+.redactor-box-fullscreen {
+  z-index: 1051; }
+
+.redactor-air,
 .redactor-dropdown {
-  z-index: 1052;
-}
+  z-index: 1052; }
+
 #redactor-modal-overlay,
 #redactor-modal-box,
 #redactor-modal {
-  z-index: 1053;
-}
-/*
-	Fullscreen
-*/
-body .redactor-box-fullscreen {
+  z-index: 1053; }
+
+.redactor-body-fullscreen .redactor-link-tooltip {
+  z-index: 1099; }
+
+.redactor-box-fullscreen {
   position: fixed;
   top: 0;
   left: 0;
-  width: 100%;
-}
-/*
-	Utils
-*/
-.redactor-scrollbar-measure {
-  position: absolute;
-  top: -9999px;
-  width: 50px;
-  height: 50px;
-  overflow: scroll;
-}
-/*
-	Editor
-*/
-.redactor-editor {
-  position: relative;
-  overflow: auto;
-  margin: 0 !important;
-  padding: 20px;
-  min-height: 80px;
-  outline: none;
-  white-space: normal;
-  border: 1px solid #eee;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-  font-size: 14px;
-  line-height: 1.6em;
-}
-.redactor-editor:focus {
-  outline: none;
-}
-.toolbar-fixed-box + .redactor-editor {
-  padding-top: 32px !important;
-}
-/*
-	Placeholder
-*/
+  width: 100%; }
+
 .redactor-placeholder:after {
   position: absolute;
   top: 20px;
   left: 20px;
   content: attr(placeholder);
   display: block;
-  /* For Firefox */
-  color: #999 !important;
-  font-weight: normal !important;
-}
-/*
-	Toolbar
-*/
+  color: rgba(0, 0, 0, 0.3);
+  font-weight: normal !important; }
+
+.redactor-layer {
+  position: relative;
+  overflow: auto;
+  margin: 0;
+  padding: 24px 20px;
+  padding-top: 20px;
+  outline: none;
+  white-space: normal;
+  border: 1px solid rgba(0, 0, 0, 0.07); }
+
+.redactor-relative {
+  position: relative; }
+
+.redactor-in {
+  cursor: text; }
+
+.redactor-layer:focus,
+.redactor-in:focus {
+  outline: none; }
+
+.redactor-scrollbar-measure {
+  position: absolute;
+  top: -9999px;
+  width: 50px;
+  height: 50px;
+  overflow: scroll; }
+
+.redactor-script-tag {
+  display: none; }
+
+.redactor-layer-img-edit img {
+  cursor: pointer; }
+
+.redactor-voice-label {
+  display: none; }
+
+.redactor-voice-alert {
+  position: absolute;
+  left: -3000px; }
+
+.redactor-toolbar-box {
+  position: relative; }
+  .redactor-toolbar-box .re-button-tooltip {
+    display: none;
+    position: absolute;
+    white-space: nowrap;
+    z-index: 101;
+    background: rgba(0, 0, 0, 0.9);
+    border-radius: 2px;
+    padding: 3px 8px;
+    color: rgba(255, 255, 255, 0.8);
+    font-size: 12px;
+    font-family: Consolas, Menlo, Monaco, "Courier New", monospace; }
+
 .redactor-toolbar {
   position: relative;
-  top: 0;
-  left: 0;
-  margin: 0 !important;
   padding: 0 !important;
-  list-style: none !important;
-  font-size: 14px !important;
-  line-height: 1 !important;
   background: #fff;
   border: none;
-  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
-}
-.redactor-toolbar:after {
-  content: "";
-  display: table;
-  clear: both;
-}
+  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25); }
+  .redactor-toolbar:after {
+    content: "";
+    display: table;
+    clear: both; }
+
 .redactor-toolbar.redactor-toolbar-overflow {
   overflow-y: auto;
-  height: 29px;
   white-space: nowrap;
-}
+  height: 48px; }
+
+.redactor-toolbar li a {
+  color: rgba(0, 0, 0, 0.8); }
+  .redactor-toolbar li a:hover {
+    outline: none;
+    background-color: #3d79f2;
+    color: #fff; }
+  .redactor-toolbar li a:active, .redactor-toolbar li a.redactor-act {
+    outline: none;
+    background-color: #eee;
+    color: #444; }
+
+.redactor-toolbar li a.redactor-button-disabled {
+  opacity: 0.3; }
+  .redactor-toolbar li a.redactor-button-disabled:hover {
+    color: #333;
+    outline: none;
+    background-color: transparent !important;
+    cursor: default; }
+
+.redactor-toolbar li a.redactor-button-focus {
+  color: #fff;
+  background: #000; }
+
 .redactor-toolbar.redactor-toolbar-external {
-  z-index: 999;
-  box-shadow: none;
+  z-index: 100;
   border: 1px solid rgba(0, 0, 0, 0.1);
-}
+  box-shadow: none; }
+
+.redactor-air {
+  position: absolute;
+  background: rgba(0, 0, 0, 0.9);
+  padding: 0;
+  max-width: 576px;
+  min-width: 200px;
+  border-radius: 4px;
+  border: none; }
+
+.redactor-air li a {
+  color: rgba(255, 255, 255, 0.75); }
+  .redactor-air li a:hover {
+    outline: none;
+    background-color: #1f78d8;
+    color: #fff; }
+  .redactor-air li a:active, .redactor-air li a.redactor-act {
+    outline: none;
+    background-color: #333;
+    color: rgba(255, 255, 255, 0.5); }
+
+.redactor-air li a.redactor-button-disabled {
+  opacity: .3; }
+  .redactor-air li a.redactor-button-disabled:hover {
+    color: rgba(255, 255, 255, 0.3);
+    outline: none;
+    background-color: transparent !important;
+    cursor: default; }
+
+.redactor-air li a.redactor-button-focus {
+  color: #333;
+  background: #eee; }
+
+.redactor-air,
+.redactor-toolbar {
+  font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
+  margin: 0 !important;
+  list-style: none !important;
+  line-height: 1 !important; }
+
+.redactor-air li,
 .redactor-toolbar li {
   vertical-align: top;
   display: inline-block;
   margin: 0 !important;
   padding: 0 !important;
   outline: none;
-  list-style: none !important;
-  -webkit-box-sizing: content-box;
-  -moz-box-sizing: content-box;
-  box-sizing: content-box;
-}
+  list-style: none !important; }
+
+.redactor-air li a,
 .redactor-toolbar li a {
+  box-sizing: border-box;
+  font-size: 14px;
   display: block;
-  color: #333;
   text-align: center;
-  padding: 9px 10px;
+  line-height: 48px;
+  height: 48px;
+  padding: 16px;
+  padding-top: 17px;
+  padding-bottom: 15px;
+  cursor: pointer;
   outline: none;
   border: none;
+  line-height: 1;
   text-decoration: none;
   cursor: pointer;
   zoom: 1;
-  -webkit-box-sizing: content-box;
-  -moz-box-sizing: content-box;
-  box-sizing: content-box;
-}
-.redactor-toolbar li a:hover {
-  outline: none;
-  background-color: #1f78d8;
-  color: #fff;
-}
-.redactor-toolbar li a:hover i:before {
-  color: #fff;
-}
-.redactor-toolbar li a:active,
-.redactor-toolbar li a.redactor-act {
-  outline: none;
-  background-color: #ccc;
-  color: #444;
-}
-.redactor-toolbar li a.redactor-btn-image {
-  width: 14px;
-  height: 14px;
-  background-position: center center;
-  background-repeat: no-repeat;
-}
-.redactor-toolbar li a.fa-redactor-btn {
-  display: inline-block;
-  padding: 9px 10px 8px 10px;
-  line-height: 1;
-}
-.redactor-toolbar li a.redactor-button-disabled {
-  filter: alpha(opacity=30);
-  -moz-opacity: 0.3;
-  opacity: 0.3;
-}
-.redactor-toolbar li a.redactor-button-disabled:hover {
-  color: #333;
-  outline: none;
-  background-color: transparent !important;
-  cursor: default;
-}
-.redactor-toolbar li a.redactor-button-focus {
-  color: #fff;
-  background: #000;
-}
-/*
-	CodeMirror
-*/
-.redactor-box .CodeMirror {
-  display: none;
-}
-/*
-	Icons
-*/
-.re-icon {
-  font-family: 'RedactorFont';
-  speak: none;
-  font-style: normal;
-  font-weight: normal;
-  font-variant: normal;
-  text-transform: none;
-  line-height: 1;
-  -webkit-font-smoothing: antialiased;
-  -moz-osx-font-smoothing: grayscale;
-}
-.re-icon i:before {
-  position: relative;
-  font-size: 14px;
-}
-.re-video:before {
-  content: "\e600";
-}
-.re-unorderedlist:before {
-  content: "\e601";
-}
-.re-undo:before {
-  content: "\e602";
-}
-.re-underline:before {
-  content: "\e603";
-}
-.re-textdirection:before {
-  content: "\e604";
-}
-.re-fontcolor:before {
-  content: "\e605";
-}
-.re-table:before {
-  content: "\e606";
-}
-.re-redo:before {
-  content: "\e607";
-}
-.re-quote:before {
-  content: "\e608";
-}
-.re-outdent:before {
-  content: "\e609";
-}
-.re-orderedlist:before {
-  content: "\e60a";
-}
-.re-link:before {
-  content: "\e60b";
-}
-.re-horizontalrule:before {
-  content: "\e60c";
-}
-.re-italic:before {
-  content: "\e60d";
-}
-.re-indent:before {
-  content: "\e60e";
-}
-.re-image:before {
-  content: "\e60f";
-}
-.re-fullscreen:before {
-  content: "\e610";
-}
-.re-normalscreen:before {
-  content: "\e611";
-}
-.re-formatting:before {
-  content: "\e612";
-}
-.re-fontsize:before {
-  content: "\e613";
-}
-.re-fontfamily:before {
-  content: "\e614";
-}
-.re-deleted:before {
-  content: "\e615";
-}
-.re-html:before {
-  content: "\e616";
-}
-.re-clips:before {
-  content: "\e617";
-}
-.re-bold:before {
-  content: "\e618";
-}
-.re-backcolor:before {
-  content: "\e619";
-}
-.re-file:before {
-  content: "\e61a";
-}
-.re-alignright:before {
-  content: "\e61b";
-}
-.re-alignment:before,
-.re-alignleft:before {
-  content: "\e61c";
-}
-.re-alignjustify:before {
-  content: "\e61d";
-}
-.re-aligncenter:before {
-  content: "\e61e";
-}
-.re-gallery:before {
-  content: "\e61f";
-}
-/*
-	Toolbar tooltip
-*/
-.redactor-toolbar-tooltip {
+  position: relative; }
+  .redactor-air li a.re-button-icon,
+  .redactor-toolbar li a.re-button-icon {
+    padding: 16px;
+    font-size: 16px; }
+
+.redactor-toolbar li a {
+  border-right: 1px solid rgba(0, 0, 0, 0.05); }
+
+.redactor-toolbar li:last-child a {
+  border-right: none; }
+
+.redactor-link-tooltip {
+  border-radius: 3px;
+  font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
   position: absolute;
-  z-index: 1054;
-  text-align: center;
-  top: 0;
-  left: 0;
-  background: #000;
-  color: #fff;
-  padding: 5px 8px;
+  padding: 16px;
   line-height: 1;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-  font-size: 12px;
-  border-radius: 2px;
-}
-/*
-	Dropdown
-*/
-.redactor-dropdown {
-  position: absolute;
-  top: 28px;
-  left: 0;
-  padding: 0;
-  min-width: 220px;
-  max-height: 254px;
-  overflow: auto;
-  background-color: #fff;
-  box-shadow: 0 1px 7px rgba(0, 0, 0, 0.25);
+  display: inline-block;
+  background-color: rgba(0, 0, 0, 0.95);
+  color: #555 !important;
+  font-size: 14px; }
+
+.redactor-link-tooltip a {
   font-size: 14px;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-  line-height: 1.6em;
-}
-.redactor-dropdown a {
-  display: block;
-  padding: 10px 15px;
-  color: #000;
-  text-decoration: none;
-  border-bottom: 1px solid rgba(0, 0, 0, 0.07);
-}
-.redactor-dropdown a:last-child {
-  border-bottom: none;
-}
-.redactor-dropdown a:hover {
-  background-color: #1f78d8;
-  color: #fff !important;
-  text-decoration: none;
-}
-.redactor-dropdown a.selected {
-  background-color: #000;
-  color: #fff;
-}
-.redactor-dropdown a.redactor-dropdown-link-inactive,
-.redactor-dropdown a.redactor-dropdown-link-inactive:hover {
-  background: none;
-  cursor: default;
-  color: #000 !important;
-  filter: alpha(opacity=40);
-  -moz-opacity: 0.4;
-  opacity: 0.4;
-}
-.redactor-dropdown a.redactor-dropdown-link-selected {
-  color: #fff;
-  background: #000;
-}
-/*
-	IMAGE BOX
-*/
+  color: #ccc;
+  margin: 0 8px;
+  text-decoration: none; }
+  .redactor-link-tooltip a:hover {
+    color: #fff; }
+
+.redactor-structure h1, .redactor-structure h2, .redactor-structure h3, .redactor-structure h4, .redactor-structure h5, .redactor-structure h6, .redactor-structure div {
+  position: relative; }
+  .redactor-structure h1:before, .redactor-structure h2:before, .redactor-structure h3:before, .redactor-structure h4:before, .redactor-structure h5:before, .redactor-structure h6:before, .redactor-structure div:before {
+    width: 24px;
+    position: absolute;
+    font-size: 10px;
+    font-weight: normal;
+    opacity: .3;
+    left: -28px;
+    text-align: right; }
+
+.redactor-structure h1:before {
+  content: "h1"; }
+
+.redactor-structure h2:before {
+  content: "h2"; }
+
+.redactor-structure h3:before {
+  content: "h3"; }
+
+.redactor-structure h4:before {
+  content: "h4"; }
+
+.redactor-structure h5:before {
+  content: "h5"; }
+
+.redactor-structure h6:before {
+  content: "h6"; }
+
+.redactor-structure div:before {
+  content: "div"; }
+
 #redactor-image-box {
   position: relative;
   max-width: 100%;
   display: inline-block;
   line-height: 0;
-  outline: 1px dashed rgba(0, 0, 0, 0.6);
-}
+  outline: 3px solid #1f78d8;
+  box-shadow: 0 0 12px #1f78d8; }
+
 #redactor-image-editter {
   position: absolute;
   z-index: 5;
@@ -415,120 +440,277 @@
   margin-top: -11px;
   margin-left: -18px;
   line-height: 1;
-  background-color: #000;
+  background-color: rgba(0, 0, 0, 0.9);
+  border-radius: 3px;
   color: #fff;
-  font-size: 11px;
+  font-size: 12px;
   padding: 7px 10px;
-  cursor: pointer;
-}
+  cursor: pointer; }
+
 #redactor-image-resizer {
+  box-sizing: border-box;
   position: absolute;
   z-index: 2;
   line-height: 1;
   cursor: nw-resize;
-  bottom: -4px;
-  right: -5px;
-  border: 1px solid #fff;
-  background-color: #000;
-  width: 8px;
-  height: 8px;
-}
-/*
-	LINK TOOLTIP
-*/
-.redactor-link-tooltip {
-  position: absolute;
-  z-index: 99;
-  padding: 10px;
-  line-height: 1;
-  display: inline-block;
-  background-color: #000;
-  color: #555 !important;
-}
-.redactor-link-tooltip,
-.redactor-link-tooltip a {
-  font-size: 12px;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-}
-.redactor-link-tooltip a {
-  color: #ccc;
-  margin: 0 5px;
-  text-decoration: none;
-}
-.redactor-link-tooltip a:hover {
-  color: #fff;
-}
-/*
-	DROPAREA
-*/
+  bottom: -5px;
+  right: -6px;
+  border: 2px solid #000;
+  background-color: rgba(255, 255, 255, 0.9);
+  width: 10px;
+  height: 10px; }
+
 #redactor-droparea {
   position: relative;
   overflow: hidden;
-  padding: 140px 20px;
-  border: 3px dashed rgba(0, 0, 0, 0.1);
-}
+  padding: 64px 24px;
+  border: 3px dashed rgba(0, 0, 0, 0.1); }
+
 #redactor-droparea.drag-hover {
-  background: rgba(200, 222, 250, 0.75);
-}
+  background: rgba(200, 222, 250, 0.75); }
+
 #redactor-droparea.drag-drop {
-  background: rgba(250, 248, 200, 0.5);
-}
+  background: rgba(250, 248, 200, 0.5); }
+
 #redactor-droparea-placeholder {
   text-align: center;
   font-size: 12px;
-  color: rgba(0, 0, 0, 0.7);
-}
-/*
-	PROGRESS
-*/
+  margin-left: 64px;
+  color: rgba(0, 0, 0, 0.7); }
+
+.redactor-image-dragover {
+  outline: 2px solid #3d79f2; }
+
 #redactor-progress {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   z-index: 1000000;
-  height: 10px;
-}
+  height: 10px; }
+
 #redactor-progress span {
-  display: block;
-  width: 100%;
-  height: 100%;
-  background-color: #3d58a8;
   background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
   background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
   background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
   -webkit-animation: progress-bar-stripes 2s linear infinite;
   -o-animation: progress-bar-stripes 2s linear infinite;
   animation: progress-bar-stripes 2s linear infinite;
-  background-size: 40px 40px;
-}
+  display: block;
+  width: 100%;
+  height: 100%;
+  background-color: #3d58a8;
+  background-size: 40px 40px; }
+
 @-webkit-keyframes progress-bar-stripes {
   from {
-    background-position: 40px 0;
-  }
+    background-position: 40px 0; }
   to {
-    background-position: 0 0;
-  }
-}
+    background-position: 0 0; } }
+
 @-o-keyframes progress-bar-stripes {
   from {
-    background-position: 40px 0;
-  }
+    background-position: 40px 0; }
   to {
-    background-position: 0 0;
-  }
-}
+    background-position: 0 0; } }
+
 @keyframes progress-bar-stripes {
   from {
-    background-position: 40px 0;
-  }
+    background-position: 40px 0; }
   to {
-    background-position: 0 0;
-  }
-}
-/*
-	MODAL
-*/
+    background-position: 0 0; } }
+
+.redactor-animated {
+  -webkit-animation-duration: 1s;
+  animation-duration: 1s;
+  -webkit-animation-fill-mode: both;
+  animation-fill-mode: both; }
+
+@-webkit-keyframes redactorSlideUp {
+  to {
+    padding-top: 0;
+    padding-bottom: 0;
+    height: 0; } }
+
+@keyframes redactorSlideUp {
+  to {
+    padding-top: 0;
+    padding-bottom: 0;
+    height: 0; } }
+
+.redactor-slideUp {
+  overflow: hidden;
+  -webkit-animation-name: redactorSlideUp;
+  animation-name: redactorSlideUp; }
+
+@-webkit-keyframes redactorSlideDown {
+  from {
+    height: 0;
+    padding-top: 0;
+    padding-bottom: 0; } }
+
+@keyframes redactorSlideDown {
+  from {
+    height: 0;
+    padding-top: 0;
+    padding-bottom: 0; } }
+
+.redactor-slideDown {
+  overflow: hidden;
+  -webkit-animation-name: redactorSlideDown;
+  animation-name: redactorSlideDown; }
+
+@-webkit-keyframes redactorFadeIn {
+  from {
+    opacity: 0; }
+  to {
+    opacity: 1; } }
+
+@keyframes redactorFadeIn {
+  from {
+    opacity: 0; }
+  to {
+    opacity: 1; } }
+
+.redactor-fadeIn {
+  -webkit-animation-name: redactorFadeIn;
+  animation-name: redactorFadeIn; }
+
+@-webkit-keyframes redactorFadeOut {
+  from {
+    opacity: 1; }
+  to {
+    opacity: 0; } }
+
+@keyframes redactorFadeOut {
+  from {
+    opacity: 1; }
+  to {
+    opacity: 0; } }
+
+.redactor-fadeOut {
+  -webkit-animation-name: redactorFadeOut;
+  animation-name: redactorFadeOut; }
+
+.redactor-dropdown {
+  font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
+  min-width: 220px;
+  max-height: 254px;
+  color: #000;
+  margin: 0;
+  padding: 0;
+  font-size: 14px;
+  background: #fff;
+  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
+  overflow: auto;
+  list-style: none; }
+
+.redactor-dropdown li {
+  border-bottom: 1px solid rgba(0, 0, 0, 0.07); }
+  .redactor-dropdown li:last-child {
+    border-bottom: none; }
+  .redactor-dropdown li:hover {
+    background-color: #3d79f2; }
+    .redactor-dropdown li:hover a {
+      color: #fff !important;
+      text-decoration: none; }
+  .redactor-dropdown li.redactor-dropdown-link-inactive {
+    background: none; }
+    .redactor-dropdown li.redactor-dropdown-link-inactive a,
+    .redactor-dropdown li.redactor-dropdown-link-inactive a:hover {
+      background: none;
+      cursor: default;
+      color: #000 !important;
+      opacity: 0.4;
+      background: none; }
+
+.redactor-dropdown a {
+  display: block;
+  padding: 12px 10px;
+  color: #000;
+  text-decoration: none; }
+  .redactor-dropdown a span {
+    padding: 2px 4px 1px 4px;
+    display: inline-block;
+    border-radius: 3px;
+    line-height: 1; }
+  .redactor-dropdown a:focus {
+    outline: none; }
+  .redactor-dropdown a.selected {
+    background-color: #000;
+    color: #fff; }
+  .redactor-dropdown a.redactor-dropdown-link-selected {
+    color: #fff;
+    background: #000; }
+
+.redactor-dropdown-box-inline .redactor-dropdown-marked span {
+  background-color: #ffd61e;
+  color: #000;
+  text-decoration: none; }
+
+.redactor-dropdown-box-inline .redactor-dropdown-code span {
+  font-family: Consolas, Menlo, Monaco, "Courier New", monospace;
+  background: rgba(0, 0, 0, 0.05); }
+
+.redactor-dropdown-box-inline .redactor-dropdown-sample span {
+  font-family: Consolas, Menlo, Monaco, "Courier New", monospace;
+  background: #46a9fc;
+  color: rgba(255, 255, 255, 0.9); }
+
+.redactor-dropdown-box-inline .redactor-dropdown-variable span {
+  font-family: Consolas, Menlo, Monaco, "Courier New", monospace;
+  color: rgba(0, 0, 0, 0.5); }
+
+.redactor-dropdown-box-inline .redactor-dropdown-shortcut span {
+  font-family: Consolas, Menlo, Monaco, "Courier New", monospace;
+  background: #000;
+  color: rgba(255, 255, 255, 0.85);
+  white-space: nowrap; }
+
+.redactor-dropdown-box-inline .redactor-dropdown-cite span {
+  color: rgba(0, 0, 0, 0.5);
+  font-style: italic; }
+
+.redactor-dropdown-box-inline .redactor-dropdown-sup span,
+.redactor-dropdown-box-inline .redactor-dropdown-sub span {
+  font-size: 12px; }
+
+.redactor-dropdown-box-format .redactor-dropdown-blockquote {
+  color: rgba(0, 0, 0, 0.4);
+  font-style: italic; }
+
+.redactor-dropdown-box-format .redactor-dropdown-pre {
+  font-family: monospace, sans-serif; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h1,
+.redactor-dropdown-box-format .redactor-dropdown-h2,
+.redactor-dropdown-box-format .redactor-dropdown-h3,
+.redactor-dropdown-box-format .redactor-dropdown-h4,
+.redactor-dropdown-box-format .redactor-dropdown-h5,
+.redactor-dropdown-box-format .redactor-dropdown-h6 {
+  line-height: 24px;
+  font-weight: bold; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h1 {
+  font-size: 40px;
+  line-height: 32px; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h2 {
+  font-size: 32px;
+  line-height: 32px; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h3 {
+  font-size: 24px; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h4 {
+  font-size: 21px; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h5 {
+  font-size: 18px; }
+
+.redactor-dropdown-box-format .redactor-dropdown-h6 {
+  font-size: 16px; }
+
 #redactor-modal-overlay {
   position: fixed;
   top: 0;
@@ -537,11 +719,8 @@
   overflow: auto;
   width: 100%;
   height: 100%;
-  background-color: #000 !important;
-  filter: alpha(opacity=30);
-  -moz-opacity: 0.3;
-  opacity: 0.3;
-}
+  background-color: rgba(255, 255, 255, 0.95); }
+
 #redactor-modal-box {
   position: fixed;
   top: 0;
@@ -549,400 +728,509 @@
   bottom: 0;
   right: 0;
   overflow-x: hidden;
-  overflow-y: auto;
-}
+  overflow-y: auto; }
+
 #redactor-modal {
-  outline: 0;
   position: relative;
   margin: auto;
-  margin-bottom: 20px;
+  margin-top: 16px;
   padding: 0;
   background: #fff;
   color: #000;
-  font-size: 14px !important;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-  box-shadow: 0 1px 70px rgba(0, 0, 0, 0.5);
-}
-#redactor-modal header {
-  padding: 30px 40px 5px 40px;
-  font-size: 18px;
-  font-weight: bold;
-}
-#redactor-modal section {
-  padding: 30px 40px 50px 40px;
-}
-#redactor-modal label {
-  display: block;
-  float: none !important;
-  margin: 15px 0 3px 0 !important;
-  padding: 0;
-}
-#redactor-modal input[type="radio"],
-#redactor-modal input[type="checkbox"] {
-  position: relative;
-  top: -1px;
-}
-#redactor-modal select {
-  width: 100%;
-}
-#redactor-modal input[type="text"],
-#redactor-modal input[type="password"],
-#redactor-modal input[type="email"],
-#redactor-modal input[type="url"],
-#redactor-modal textarea {
-  position: relative;
-  z-index: 2;
-  margin: 0;
-  padding: 5px 4px;
-  height: 28px;
-  border: 1px solid #ccc;
-  border-radius: 1px;
-  background-color: white;
-  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;
-  color: #333;
-  width: 100%;
-  font-size: 14px;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-  -moz-transition: border 0.3s ease-in;
-  transition: border 0.3s ease-in;
-}
-#redactor-modal input[type="text"]:focus,
-#redactor-modal input[type="password"]:focus,
-#redactor-modal input[type="email"]:focus,
-#redactor-modal input[type="url"]:focus,
-#redactor-modal textarea:focus {
-  outline: none;
-  border-color: #5ca9e4;
-  box-shadow: 0 0 0 2px rgba(70, 161, 231, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) inset;
-}
-#redactor-modal input[type="text"].redactor-input-error,
-#redactor-modal input[type="password"].redactor-input-error,
-#redactor-modal input[type="email"].redactor-input-error,
-#redactor-modal input[type="url"].redactor-input-error,
-#redactor-modal textarea.redactor-input-error {
-  border-color: #e82f2f;
-  box-shadow: 0 0 0 2px rgba(232, 47, 47, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) inset;
-}
-#redactor-modal textarea {
-  display: block;
-  margin-top: 4px;
-  line-height: 1.4em;
-}
-/*
-	Tabs in Modal
-*/
+  border-radius: 5px;
+  box-shadow: 0 4px 40px rgba(0, 0, 0, 0.15);
+  font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
+  font-size: 14px; }
+  @media (max-width: 768px) {
+    #redactor-modal {
+      font-size: 16px !important; } }
+  #redactor-modal #redactor-modal-header {
+    border-top-right-radius: 5px;
+    border-top-left-radius: 5px;
+    padding: 20px;
+    font-size: 18px;
+    font-weight: bold;
+    color: #000;
+    border-bottom: 1px solid rgba(0, 0, 0, 0.05); }
+  #redactor-modal #redactor-modal-close {
+    position: absolute;
+    top: 10px;
+    right: 4px;
+    width: 30px;
+    height: 40px;
+    text-align: center;
+    color: rgba(0, 0, 0, 0.3);
+    font-size: 30px;
+    font-weight: 300;
+    cursor: pointer;
+    -webkit-appearance: none;
+    padding: 0;
+    border: 0;
+    background: none;
+    outline: none; }
+    #redactor-modal #redactor-modal-close:hover {
+      color: #000; }
+  #redactor-modal #redactor-modal-body {
+    overflow: auto;
+    padding: 40px 48px 24px 48px; }
+    #redactor-modal #redactor-modal-body section {
+      margin-bottom: 24px; }
+    #redactor-modal #redactor-modal-body label {
+      font-weight: normal;
+      font-size: 15px;
+      display: block;
+      margin-bottom: 4px;
+      color: rgba(0, 0, 0, 0.8); }
+      #redactor-modal #redactor-modal-body label .desc {
+        color: rgba(0, 0, 0, 0.5); }
+      #redactor-modal #redactor-modal-body label.checkbox {
+        font-size: inherit; }
+    @media (max-width: 768px) {
+      #redactor-modal #redactor-modal-body {
+        padding: 24px; } }
+  #redactor-modal select,
+  #redactor-modal input[type="text"],
+  #redactor-modal input[type="password"],
+  #redactor-modal input[type="email"],
+  #redactor-modal input[type="url"],
+  #redactor-modal input[type="number"],
+  #redactor-modal textarea {
+    box-sizing: border-box;
+    position: relative;
+    z-index: 2;
+    margin: 0;
+    padding: 8px;
+    height: 40px;
+    border: 1px solid #ddd;
+    border-radius: 3px;
+    background-color: white;
+    box-shadow: none;
+    color: #333;
+    width: 100%;
+    font-size: 16px;
+    font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif; }
+    #redactor-modal select:focus,
+    #redactor-modal input[type="text"]:focus,
+    #redactor-modal input[type="password"]:focus,
+    #redactor-modal input[type="email"]:focus,
+    #redactor-modal input[type="url"]:focus,
+    #redactor-modal input[type="number"]:focus,
+    #redactor-modal textarea:focus {
+      -moz-transition: border 0.3s ease-in;
+      transition: border 0.3s ease-in;
+      outline: none;
+      border-color: #1f78d8; }
+  #redactor-modal textarea {
+    display: block;
+    line-height: 1.4em; }
+  #redactor-modal button {
+    padding: 0 20px;
+    margin: 0;
+    margin-bottom: 8px;
+    margin-right: 8px;
+    height: 40px;
+    line-height: 38px;
+    outline: none;
+    border: 2px solid transparent;
+    border-radius: 3px;
+    background-color: #eee;
+    color: #000;
+    text-align: center;
+    text-decoration: none;
+    font-weight: normal;
+    font-size: 15px;
+    font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
+    cursor: pointer;
+    vertical-align: middle;
+    -webkit-appearance: none; }
+    #redactor-modal button:hover {
+      color: #777;
+      background: none;
+      background-color: #f5f5f5;
+      text-decoration: none; }
+    #redactor-modal button.redactor-modal-button-offset {
+      margin-left: 24px; }
+    #redactor-modal button#redactor-modal-button-delete {
+      background: none;
+      border-color: #f23d3d;
+      color: #f23d3d; }
+      #redactor-modal button#redactor-modal-button-delete:hover {
+        color: rgba(255, 255, 255, 0.6);
+        background-color: #f23d3d; }
+    #redactor-modal button#redactor-modal-button-action {
+      background: none;
+      color: #fff;
+      background-color: #1c86f2; }
+      #redactor-modal button#redactor-modal-button-action:hover {
+        color: rgba(255, 255, 255, 0.6);
+        background-color: #4ca0f5; }
+  #redactor-modal .redactor-group:after {
+    content: "";
+    display: table;
+    clear: both; }
+  #redactor-modal .redactor-modal-tab-side {
+    float: left;
+    width: 26%;
+    margin-right: 6%; }
+  #redactor-modal .redactor-modal-tab-area {
+    float: left;
+    width: 66%; }
+  @media (max-width: 768px) {
+    #redactor-modal .redactor-modal-tab-side {
+      float: none;
+      width: auto;
+      margin-right: 0;
+      margin-bottom: 24px; }
+    #redactor-modal .redactor-modal-tab-area {
+      float: none;
+      width: auto; } }
+
 #redactor-modal-tabber {
-  margin-bottom: 15px;
-  font-size: 12px;
-}
-#redactor-modal-tabber a {
-  border: 1px solid #ddd;
-  line-height: 1;
-  padding: 8px 15px;
-  margin-right: -1px;
-  text-decoration: none;
-  color: #000;
-}
-#redactor-modal-tabber a:hover {
-  background-color: #1f78d8;
-  border-color: #1f78d8;
-  color: #fff;
-}
-#redactor-modal-tabber a.active {
-  cursor: default;
-  background-color: #ddd;
-  border-color: #ddd;
-  color: rgba(0, 0, 0, 0.6);
-}
-/*
-	List in Modal
-*/
-#redactor-modal #redactor-modal-list {
+  margin-bottom: 40px;
+  font-size: 12px; }
+  #redactor-modal-tabber a {
+    border: 1px solid #ddd;
+    line-height: 1;
+    padding: 8px 15px;
+    margin-right: -1px;
+    text-decoration: none;
+    color: #000; }
+    #redactor-modal-tabber a:hover {
+      background-color: #1f78d8;
+      border-color: #1f78d8;
+      color: #fff; }
+    #redactor-modal-tabber a.active {
+      cursor: default;
+      background-color: rgba(0, 0, 0, 0.05);
+      border-color: #ddd;
+      color: rgba(0, 0, 0, 0.5); }
+
+#redactor-modal-list {
   margin-left: 0;
   padding-left: 0;
   list-style: none;
   max-height: 250px;
-  overflow-x: auto;
-}
-#redactor-modal #redactor-modal-list li {
-  border-bottom: 1px solid #ddd;
-}
-#redactor-modal #redactor-modal-list li:last-child {
-  border-bottom: none;
-}
-#redactor-modal #redactor-modal-list a {
-  padding: 10px 5px;
-  color: #000;
-  text-decoration: none;
-  font-size: 13px;
-  display: block;
-  position: relative;
-}
-#redactor-modal #redactor-modal-list a:hover {
-  background-color: #eee;
-}
-#redactor-modal-close {
-  position: absolute;
-  top: 10px;
-  right: 10px;
-  width: 30px;
-  height: 30px;
-  text-align: right;
-  color: #bbb;
-  font-size: 30px;
-  font-weight: 300;
-  cursor: pointer;
-  -webkit-appearance: none;
-  padding: 0;
-  border: 0;
-  background: 0;
-  outline: none;
-}
-#redactor-modal-close:hover {
-  color: #000;
-}
-#redactor-modal footer button {
-  position: relative;
-  width: 100%;
-  padding: 14px 16px;
-  margin: 0;
-  outline: none;
-  border: none;
-  background-color: #ddd;
-  color: #000;
-  text-align: center;
-  text-decoration: none;
-  font-weight: normal;
-  font-size: 12px;
-  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-  line-height: 1;
-  cursor: pointer;
-}
-#redactor-modal footer button:hover {
-  color: #777;
-  background: none;
-  background: #bbb;
-  text-decoration: none;
-}
-#redactor-modal footer button.redactor-modal-delete-btn {
-  background: none;
-  color: #fff;
-  background-color: #b52525;
-}
-#redactor-modal footer button.redactor-modal-delete-btn:hover {
-  color: rgba(255, 255, 255, 0.6);
-  background-color: #881b1b;
-}
-#redactor-modal footer button.redactor-modal-action-btn {
-  background: none;
-  color: #fff;
-  background-color: #2461b5;
-}
-#redactor-modal footer button.redactor-modal-action-btn:hover {
-  color: rgba(255, 255, 255, 0.6);
-  background-color: #1a4580;
-}
-/*
-	##############################################
-
-	DROPDOWN FORMATTING
+  overflow-x: auto; }
+  #redactor-modal-list li {
+    border-bottom: 1px solid rgba(0, 0, 0, 0.07); }
+    #redactor-modal-list li:last-child {
+      border-bottom: none; }
+  #redactor-modal-list a {
+    padding: 16px 4px;
+    color: #000;
+    text-decoration: none;
+    font-size: 15px;
+    display: block;
+    position: relative; }
+    #redactor-modal-list a:hover {
+      background-color: #eee; }
 
-	##############################################
-*/
-.redactor-dropdown .redactor-formatting-blockquote {
-  color: rgba(0, 0, 0, 0.4);
-  font-style: italic;
-}
-.redactor-dropdown .redactor-formatting-pre {
-  font-family: monospace, sans-serif;
-}
-.redactor-dropdown .redactor-formatting-h1 {
-  font-size: 36px;
-  line-height: 36px;
-  font-weight: bold;
-}
-.redactor-dropdown .redactor-formatting-h2 {
-  font-size: 24px;
-  line-height: 36px;
-  font-weight: bold;
-}
-.redactor-dropdown .redactor-formatting-h3 {
-  font-size: 21px;
-  line-height: 30px;
-  font-weight: bold;
-}
-.redactor-dropdown .redactor-formatting-h4 {
-  font-size: 18px;
-  line-height: 26px;
-  font-weight: bold;
-}
-.redactor-dropdown .redactor-formatting-h5 {
+.redactor-styles {
+  font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
   font-size: 16px;
-  line-height: 23px;
-  font-weight: bold;
-}
-/*
-	##############################################
-
-	 CONTENT STYLES
-
-	##############################################
-*/
-.redactor-editor code,
-.redactor-editor pre {
-  font-family: Menlo, Monaco, monospace, sans-serif !important;
-  cursor: text;
-}
-.redactor-editor div,
-.redactor-editor p,
-.redactor-editor ul,
-.redactor-editor ol,
-.redactor-editor table,
-.redactor-editor dl,
-.redactor-editor blockquote,
-.redactor-editor pre {
-  font-size: 14px;
-  line-height: 1.6em;
-}
-.redactor-editor a {
-  color: #15c;
-  text-decoration: underline;
-}
-.redactor-editor object,
-.redactor-editor embed,
-.redactor-editor video,
-.redactor-editor img {
-  max-width: 100%;
-  width: auto;
-}
-.redactor-editor video,
-.redactor-editor img {
-  height: auto;
-}
-.redactor-editor div,
-.redactor-editor p,
-.redactor-editor ul,
-.redactor-editor ol,
-.redactor-editor table,
-.redactor-editor dl,
-.redactor-editor figure,
-.redactor-editor blockquote,
-.redactor-editor pre {
-  margin: 0;
-  margin-bottom: 15px;
-  border: none;
-  background: none;
-  box-shadow: none;
-}
-.redactor-editor iframe,
-.redactor-editor object,
-.redactor-editor hr {
-  margin-bottom: 15px;
-}
-.redactor-editor blockquote {
-  margin-left: 1.6em !important;
-  padding: 0;
-  text-align: left;
-  color: #777;
-  font-style: italic;
-}
-.redactor-editor blockquote:before,
-.redactor-editor blockquote:after {
-  content: '';
-}
-.redactor-editor ul,
-.redactor-editor ol {
-  padding-left: 2em;
-}
-.redactor-editor ul ul,
-.redactor-editor ol ol,
-.redactor-editor ul ol,
-.redactor-editor ol ul {
-  margin: 2px;
-  padding: 0;
-  padding-left: 2em;
-  border: none;
-}
-.redactor-editor ol ol li {
-  list-style-type: lower-alpha;
-}
-.redactor-editor ol ol ol li {
-  list-style-type: lower-roman;
-}
-.redactor-editor dl dt {
-  font-weight: bold;
-}
-.redactor-editor dd {
-  margin-left: 1em;
-}
-.redactor-editor table {
-  border-collapse: collapse;
-  font-size: 1em;
-  width: 100%;
-}
-.redactor-editor table td,
-.redactor-editor table th {
-  padding: 5px;
-  border: 1px solid #ddd;
-  vertical-align: top;
-}
-.redactor-editor table thead td,
-.redactor-editor table th {
-  font-weight: bold;
-  border-bottom-color: #888;
-}
-.redactor-editor code {
-  background-color: #d8d7d7;
-}
-.redactor-editor pre {
-  padding: 1em;
-  border: 1px solid #ddd;
-  border-radius: 3px;
-  background: #f8f8f8;
-  font-size: 90%;
-}
-.redactor-editor hr {
-  display: block;
-  height: 1px;
-  border: 0;
-  border-top: 1px solid #ccc;
-}
-.redactor-editor h1,
-.redactor-editor h2,
-.redactor-editor h3,
-.redactor-editor h4,
-.redactor-editor h5,
-.redactor-editor h6 {
-  font-weight: bold;
-  color: #000;
-  padding: 0;
-  background: none;
-  text-rendering: optimizeLegibility;
-  margin: 0 0 .5em 0;
-}
-.redactor-editor h1,
-.redactor-editor h2,
-.redactor-editor h3,
-.redactor-editor h4 {
-  line-height: 1.3;
-}
-.redactor-editor h1 {
-  font-size: 36px;
-}
-.redactor-editor h2 {
-  font-size: 24px;
-  margin-bottom: .7em;
-}
-.redactor-editor h3 {
-  font-size: 21px;
-}
-.redactor-editor h4 {
-  font-size: 18px;
-}
-.redactor-editor h5 {
-  font-size: 16px;
-}
-.redactor-editor h6 {
-  font-size: 12px;
-  text-transform: uppercase;
-}
+  line-height: 24px;
+  color: #333; }
+  .redactor-styles[dir="rtl"] {
+    direction: rtl;
+    unicode-bidi: embed; }
+    .redactor-styles[dir="rtl"] ul li,
+    .redactor-styles[dir="rtl"] ol li {
+      text-align: right; }
+    .redactor-styles[dir="rtl"] ul,
+    .redactor-styles[dir="rtl"] ol,
+    .redactor-styles[dir="rtl"] ul ul,
+    .redactor-styles[dir="rtl"] ol ol,
+    .redactor-styles[dir="rtl"] ul ol,
+    .redactor-styles[dir="rtl"] ol ul {
+      margin: 0 24px 0 0; }
+  @media (max-width: 768px) {
+    .redactor-styles {
+      font-size: 16px; } }
+  .redactor-styles a {
+    color: #256bc9; }
+    .redactor-styles a:focus, .redactor-styles a:hover {
+      color: #e21e3b; }
+  .redactor-styles h1,
+  .redactor-styles h2,
+  .redactor-styles h3,
+  .redactor-styles h4,
+  .redactor-styles h5,
+  .redactor-styles h6 {
+    font-family: "Trebuchet MS", "Helvetica Neue", Helvetica, Tahoma, sans-serif;
+    font-weight: bold;
+    color: #222;
+    text-rendering: optimizeLegibility;
+    margin: 0;
+    padding: 0;
+    margin-bottom: 12px; }
+    .redactor-styles h1:empty,
+    .redactor-styles h2:empty,
+    .redactor-styles h3:empty,
+    .redactor-styles h4:empty,
+    .redactor-styles h5:empty,
+    .redactor-styles h6:empty {
+      min-height: 24px; }
+  .redactor-styles h1 {
+    font-size: 40px;
+    line-height: 44px; }
+  .redactor-styles h2 {
+    font-size: 32px;
+    line-height: 36px; }
+  .redactor-styles h3 {
+    font-size: 24px;
+    line-height: 32px; }
+  .redactor-styles h4 {
+    font-size: 21px;
+    line-height: 24px; }
+  .redactor-styles h5 {
+    font-size: 18px;
+    line-height: 24px; }
+  .redactor-styles h6 {
+    font-size: 16px;
+    line-height: 24px; }
+  .redactor-styles p,
+  .redactor-styles ul,
+  .redactor-styles ol,
+  .redactor-styles dl,
+  .redactor-styles blockquote,
+  .redactor-styles hr,
+  .redactor-styles pre,
+  .redactor-styles table,
+  .redactor-styles figure,
+  .redactor-styles address {
+    padding: 0;
+    margin: 0; }
+  .redactor-styles p:empty,
+  .redactor-styles blockquote:empty {
+    min-height: 24px; }
+  .redactor-styles p + h2,
+  .redactor-styles p + h3,
+  .redactor-styles p + h4,
+  .redactor-styles p + h5,
+  .redactor-styles p + h6,
+  .redactor-styles ul + h2,
+  .redactor-styles ul + h3,
+  .redactor-styles ul + h4,
+  .redactor-styles ul + h5,
+  .redactor-styles ul + h6,
+  .redactor-styles ol + h2,
+  .redactor-styles ol + h3,
+  .redactor-styles ol + h4,
+  .redactor-styles ol + h5,
+  .redactor-styles ol + h6,
+  .redactor-styles dl + h2,
+  .redactor-styles dl + h3,
+  .redactor-styles dl + h4,
+  .redactor-styles dl + h5,
+  .redactor-styles dl + h6,
+  .redactor-styles blockquote + h2,
+  .redactor-styles blockquote + h3,
+  .redactor-styles blockquote + h4,
+  .redactor-styles blockquote + h5,
+  .redactor-styles blockquote + h6,
+  .redactor-styles hr + h2,
+  .redactor-styles hr + h3,
+  .redactor-styles hr + h4,
+  .redactor-styles hr + h5,
+  .redactor-styles hr + h6,
+  .redactor-styles pre + h2,
+  .redactor-styles pre + h3,
+  .redactor-styles pre + h4,
+  .redactor-styles pre + h5,
+  .redactor-styles pre + h6,
+  .redactor-styles table + h2,
+  .redactor-styles table + h3,
+  .redactor-styles table + h4,
+  .redactor-styles table + h5,
+  .redactor-styles table + h6,
+  .redactor-styles form + h2,
+  .redactor-styles form + h3,
+  .redactor-styles form + h4,
+  .redactor-styles form + h5,
+  .redactor-styles form + h6,
+  .redactor-styles figure + h2,
+  .redactor-styles figure + h3,
+  .redactor-styles figure + h4,
+  .redactor-styles figure + h5,
+  .redactor-styles figure + h6 {
+    margin-top: 24px; }
+  .redactor-styles ul,
+  .redactor-styles ol,
+  .redactor-styles ul ul,
+  .redactor-styles ol ol,
+  .redactor-styles ul ol,
+  .redactor-styles ol ul {
+    margin: 0 0 0 24px; }
+  .redactor-styles ul li,
+  .redactor-styles ol li {
+    text-align: left; }
+  .redactor-styles ol ol li {
+    list-style-type: lower-alpha; }
+  .redactor-styles ol ol ol li {
+    list-style-type: lower-roman; }
+  .redactor-styles p,
+  .redactor-styles ul,
+  .redactor-styles ol,
+  .redactor-styles dl,
+  .redactor-styles blockquote,
+  .redactor-styles hr,
+  .redactor-styles pre,
+  .redactor-styles table,
+  .redactor-styles figure,
+  .redactor-styles address {
+    margin-bottom: 16px; }
+  .redactor-styles blockquote {
+    position: relative;
+    font-style: italic;
+    color: rgba(0, 0, 0, 0.6); }
+    .redactor-styles blockquote cite {
+      font-size: 80%; }
+  @media (min-width: 768px) {
+    .redactor-styles blockquote {
+      padding-left: 24px;
+      border-left: 1px solid rgba(0, 0, 0, 0.1); } }
+  .redactor-styles address {
+    font-style: normal; }
+  .redactor-styles dl dt {
+    font-weight: bold; }
+  .redactor-styles dd {
+    margin-left: 24px; }
+  .redactor-styles cite {
+    color: rgba(0, 0, 0, 0.5);
+    font-style: italic; }
+  .redactor-styles s,
+  .redactor-styles del {
+    text-decoration: line-through; }
+  .redactor-styles abbr[title],
+  .redactor-styles dfn[title] {
+    border-bottom: 1px dotted #000;
+    cursor: help; }
+  .redactor-styles strong,
+  .redactor-styles b {
+    font-weight: bold; }
+  .redactor-styles em,
+  .redactor-styles i {
+    font-style: italic; }
+  .redactor-styles sub,
+  .redactor-styles sup {
+    font-size: 10px;
+    line-height: 0;
+    position: relative;
+    margin-left: .2rem; }
+  .redactor-styles sup {
+    top: -.4rem; }
+  .redactor-styles sub {
+    bottom: -.2rem; }
+  .redactor-styles strong:empty, .redactor-styles b:empty, .redactor-styles em:empty, .redactor-styles i:empty, .redactor-styles sup:empty, .redactor-styles sub:empty, .redactor-styles u:empty, .redactor-styles ins:empty {
+    display: inline-block;
+    min-width: 1px;
+    min-height: 1rem; }
+  .redactor-styles figcaption {
+    margin: 4px 0;
+    font-size: 12px;
+    font-style: italic;
+    text-align: left; }
+  .redactor-styles ins,
+  .redactor-styles u {
+    text-decoration: underline; }
+  .redactor-styles mark {
+    background-color: #ffd61e;
+    color: #000;
+    text-decoration: none; }
+  .redactor-styles pre,
+  .redactor-styles code,
+  .redactor-styles kbd,
+  .redactor-styles samp,
+  .redactor-styles var,
+  .redactor-styles output {
+    font-size: 90%;
+    font-style: normal;
+    font-family: Consolas, Menlo, Monaco, "Courier New", monospace; }
+  .redactor-styles pre {
+    margin-top: 16px;
+    font-size: 90%;
+    line-height: 24px;
+    color: rgba(0, 0, 0, 0.75);
+    overflow: auto;
+    background: rgba(0, 0, 0, 0.03);
+    padding: 16px 20px;
+    word-wrap: normal; }
+  .redactor-styles mark,
+  .redactor-styles code,
+  .redactor-styles samp,
+  .redactor-styles kbd {
+    padding: 2px 4px 1px 4px;
+    display: inline-block;
+    line-height: 1;
+    border-radius: 3px; }
+  .redactor-styles code {
+    background: rgba(0, 0, 0, 0.05); }
+  .redactor-styles pre code {
+    font-size: 100%;
+    border: none;
+    padding: 0;
+    background: none;
+    line-height: 24px; }
+  .redactor-styles var {
+    color: rgba(0, 0, 0, 0.5); }
+  .redactor-styles samp {
+    background: #46a9fc;
+    color: rgba(255, 255, 255, 0.9); }
+  .redactor-styles kbd {
+    background: #000;
+    color: rgba(255, 255, 255, 0.85);
+    white-space: nowrap; }
+  .redactor-styles hr {
+    display: block;
+    box-sizing: content-box;
+    height: 1px;
+    border: 0;
+    border-top: 1px solid rgba(0, 0, 0, 0.1); }
+  .redactor-styles img,
+  .redactor-styles video,
+  .redactor-styles audio,
+  .redactor-styles embed,
+  .redactor-styles object {
+    max-width: 100%; }
+  .redactor-styles img,
+  .redactor-styles video,
+  .redactor-styles embed,
+  .redactor-styles object {
+    height: auto; }
+  .redactor-styles embed,
+  .redactor-styles object {
+    height: 100%; }
+  .redactor-styles img {
+    vertical-align: middle;
+    -ms-interpolation-mode: bicubic; }
+  .redactor-styles table {
+    border-collapse: collapse;
+    max-width: 100%;
+    width: 100%;
+    empty-cells: show; }
+    .redactor-styles table caption {
+      text-transform: uppercase;
+      padding: 0;
+      color: rgba(0, 0, 0, 0.5);
+      font-size: 11px; }
+    .redactor-styles table th,
+    .redactor-styles table td {
+      border: 1px solid #eee;
+      padding: 16px;
+      padding-bottom: 15px; }
+    .redactor-styles table tfoot th,
+    .redactor-styles table tfoot td {
+      color: rgba(0, 0, 0, 0.5); }
+  .redactor-styles .video-container {
+    height: 0;
+    padding-bottom: 56.25%;
+    position: relative;
+    margin-bottom: 16px; }
+    .redactor-styles .video-container iframe,
+    .redactor-styles .video-container object,
+    .redactor-styles .video-container embed {
+      position: absolute;
+      top: 0;
+      left: 0;
+      width: 100% !important;
+      height: 100% !important; }
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,10 +1,11 @@
 /*
-	Redactor 10.2.5
-	Updated: October 1, 2015
+	Redactor II
+	Version 2.11
+	Updated: September 20, 2017
 
 	http://imperavi.com/redactor/
 
-	Copyright (c) 2009-2015, Imperavi LLC.
+	Copyright (c) 2009-2017, Imperavi LLC.
 	License: http://imperavi.com/redactor/license/
 
 	Usage: $('#content').redactor();
@@ -42,10 +42,10 @@
 				var instance = $.data(this, 'redactor');
 				var func;
 
-				if (options.search(/\./) != '-1')
+				if (options.search(/\./) !== '-1')
 				{
 					func = options.split('.');
-					if (typeof instance[func[0]] != 'undefined')
+					if (typeof instance[func[0]] !== 'undefined')
 					{
 						func = instance[func[0]][func[1]];
 					}
@@ -78,9 +78,18 @@
 			});
 		}
 
-		if (val.length === 0) return this;
-		else if (val.length === 1) return val[0];
-		else return val;
+		if (val.length === 0)
+		{
+			return this;
+		}
+		else if (val.length === 1)
+		{
+			return val[0];
+		}
+		else
+		{
+			return val;
+		}
 
 	};
 
@@ -90,86 +99,97 @@
 		return new Redactor.prototype.init(el, options);
 	}
 
-	// Functionality
+	// Options
 	$.Redactor = Redactor;
-	$.Redactor.VERSION = '10.2.5';
-	$.Redactor.modules = ['alignment', 'autosave', 'block', 'buffer', 'build', 'button',
-						  'caret', 'clean', 'code', 'core', 'dropdown', 'file', 'focus',
-						  'image', 'indent', 'inline', 'insert', 'keydown', 'keyup',
-						  'lang', 'line', 'link', 'linkify', 'list', 'modal', 'observe', 'paragraphize',
-						  'paste', 'placeholder', 'progress', 'selection', 'shortcuts',
-						  'tabifier', 'tidy',  'toolbar', 'upload', 'utils'];
+	$.Redactor.VERSION = '2.11';
+	$.Redactor.modules = ['air', 'autosave', 'block', 'buffer', 'build', 'button', 'caret', 'clean', 'code', 'core', 'detect', 'dropdown',
+						  'events', 'file', 'focus', 'image', 'indent', 'inline', 'insert', 'keydown', 'keyup',
+						  'lang', 'line', 'link', 'linkify', 'list', 'marker', 'modal', 'observe', 'offset', 'paragraphize', 'paste', 'placeholder',
+						  'progress', 'selection', 'shortcuts', 'storage', 'toolbar', 'upload', 'uploads3', 'utils',
+
+						  'browser' // deprecated
+						  ];
 
+	$.Redactor.settings = {};
 	$.Redactor.opts = {
 
 		// settings
+		animation: false,
 		lang: 'en',
-		direction: 'ltr', // ltr or rtl
-
-		plugins: false, // array
+		direction: 'ltr',
+		spellcheck: true,
+		overrideStyles: true,
+		stylesClass: false,
+		scrollTarget: document,
 
 		focus: false,
 		focusEnd: false,
 
-		placeholder: false,
+		clickToEdit: false,
+		structure: false,
 
-		visual: true,
 		tabindex: false,
 
-		minHeight: false,
-		maxHeight: false,
+		minHeight: false, // string
+		maxHeight: false, // string
 
-		linebreaks: false,
-		replaceDivs: true,
-		paragraphize: true,
-		cleanStyleOnEnter: false,
+		maxWidth: false, // string
+
+		plugins: false, // array
+		callbacks: {},
+
+		placeholder: false,
+
+		linkify: true,
 		enterKey: true,
 
-		cleanOnPaste: true,
-		cleanSpaces: true,
 		pastePlainText: false,
+		pasteImages: true,
+		pasteLinks: true,
+		pasteBlockTags: ['pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'table', 'tbody', 'thead', 'tfoot', 'th', 'tr', 'td', 'ul', 'ol', 'li', 'blockquote', 'p', 'figure', 'figcaption'],
+		pasteInlineTags: ['br', 'strong', 'ins', 'code', 'del', 'span', 'samp', 'kbd', 'sup', 'sub', 'mark', 'var', 'cite', 'small', 'b', 'u', 'em', 'i'],
+
+		preClass: false, // string
+		preSpaces: 4, // or false
+		tabAsSpaces: false, // true or number of spaces
+		tabKey: true,
 
 		autosave: false, // false or url
 		autosaveName: false,
-		autosaveInterval: 60, // seconds
-		autosaveOnChange: false,
 		autosaveFields: false,
 
-		linkTooltip: true,
-		linkProtocol: 'http',
-		linkNofollow: false,
-		linkSize: 50,
-
-		imageEditable: true,
-		imageLink: true,
-		imagePosition: true,
-		imageFloatMargin: '10px',
-		imageResizable: true,
-
 		imageUpload: null,
 		imageUploadParam: 'file',
+		imageUploadFields: false,
+		imageUploadForms: false,
+        imageTag: 'figure',
+        imageEditable: true,
+		imageCaption: true,
 
-		uploadImageField: false,
+		imagePosition: false,
+		imageResizable: false,
+		imageFloatMargin: '10px',
 
 		dragImageUpload: true,
+		multipleImageUpload: true,
+		clipboardImageUpload: true,
 
 		fileUpload: null,
 		fileUploadParam: 'file',
-
+		fileUploadFields: false,
+		fileUploadForms: false,
 		dragFileUpload: true,
 
 		s3: false,
 
-		convertLinks: true,
-		convertUrlLinks: true,
-		convertImageLinks: true,
-		convertVideoLinks: true,
-
-		preSpaces: 4, // or false
-		tabAsSpaces: false, // true or number of spaces
-		tabKey: true,
+        linkNewTab: false,
+		linkTooltip: true,
+		linkNofollow: false,
+		linkSize: 30,
+		linkValidation: true,
+		pasteLinkTarget: false,
 
-		scrollTarget: false,
+		videoContainerClass: 'video-container',
 
 		toolbar: true,
 		toolbarFixed: true,
@@ -178,58 +198,30 @@
 		toolbarExternal: false, // ID selector
 		toolbarOverflow: false,
 
-		source: true,
-		buttons: ['html', 'formatting', 'bold', 'italic', 'deleted', 'unorderedlist', 'orderedlist',
-				  'outdent', 'indent', 'image', 'file', 'link', 'alignment', 'horizontalrule'], // + 'underline'
-
-		buttonsHide: [],
-		buttonsHideOnMobile: [],
+		air: false,
+		airWidth: false,
 
 		formatting: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],
 		formattingAdd: false,
 
-		tabifier: true,
-
-		deniedTags: ['script', 'style'],
-		allowedTags: false, // or array
-
-		paragraphizeBlocks: ['table', 'div', 'pre', 'form', 'ul', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'dl', 'blockquote', 'figcaption',
-							'address', 'section', 'header', 'footer', 'aside', 'article', 'object', 'style', 'script', 'iframe', 'select', 'input', 'textarea',
-							'button', 'option', 'map', 'area', 'math', 'hr', 'fieldset', 'legend', 'hgroup', 'nav', 'figure', 'details', 'menu', 'summary', 'p'],
-
-		removeComments: false,
-		replaceTags: [
-			['strike', 'del'],
-			['b', 'strong']
-		],
-		replaceStyles: [
-            ['font-weight:\\s?bold', "strong"],
-            ['font-style:\\s?italic', "em"],
-            ['text-decoration:\\s?underline', "u"],
-            ['text-decoration:\\s?line-through', 'del']
-        ],
-        removeDataAttr: false,
-
-		removeAttr: false, // or multi array
-		allowedAttr: false, // or multi array
-
-		removeWithoutAttr: ['span'], // or false
-		removeEmpty: ['p'], // or false;
+		buttons: ['format', 'bold', 'italic', 'deleted', 'lists', 'image', 'file', 'link', 'horizontalrule'], // + 'horizontalrule', 'underline', 'ol', 'ul', 'indent', 'outdent'
+        buttonsTextLabeled: false,
+		buttonsHide: [],
+		buttonsHideOnMobile: [],
 
-		activeButtons: ['deleted', 'italic', 'bold', 'underline', 'unorderedlist', 'orderedlist',
-						'alignleft', 'aligncenter', 'alignright', 'justify'],
-		activeButtonsStates: {
-			b: 'bold',
-			strong: 'bold',
-			i: 'italic',
-			em: 'italic',
-			del: 'deleted',
-			strike: 'deleted',
-			ul: 'unorderedlist',
-			ol: 'orderedlist',
-			u: 'underline'
+		script: true,
+		removeNewlines: false,
+		removeComments: true,
+		replaceTags: {
+			'b': 'strong',
+			'i': 'em',
+			'strike': 'del'
 		},
 
+        keepStyleAttr: [], // tag name array
+        keepInlineOnEnter: false,
+
+		// shortcuts
 		shortcuts: {
 			'ctrl+shift+m, meta+shift+m': { func: 'inline.removeFormat' },
 			'ctrl+b, meta+b': { func: 'inline.format', params: ['bold'] },
@@ -242,109 +234,101 @@
 		},
 		shortcutsAdd: false,
 
-		// private
-		buffer: [],
-		rebuffer: [],
-		emptyHtml: '<p>&#x200b;</p>',
-		invisibleSpace: '&#x200b;',
-		imageTypes: ['image/png', 'image/jpeg', 'image/gif'],
-		indentValue: 20,
-		verifiedTags: 		['a', 'img', 'b', 'strong', 'sub', 'sup', 'i', 'em', 'u', 'small', 'strike', 'del', 'cite', 'ul', 'ol', 'li'], // and for span tag special rule
-		inlineTags: 		['strong', 'b', 'u', 'em', 'i', 'code', 'del', 'ins', 'samp', 'kbd', 'sup', 'sub', 'mark', 'var', 'cite', 'small'],
-		alignmentTags: 		['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6',  'DL', 'DT', 'DD', 'DIV', 'TD', 'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'ADDRESS', 'SECTION', 'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE'],
-		blockLevelElements: ['PRE', 'UL', 'OL', 'LI'],
-		highContrast: false,
-		observe: {
-			dropdowns: []
+		activeButtons: ['deleted', 'italic', 'bold'],
+		activeButtonsStates: {
+			b: 'bold',
+			strong: 'bold',
+			i: 'italic',
+			em: 'italic',
+			del: 'deleted',
+			strike: 'deleted'
 		},
 
-		// lang
+		// private lang
 		langs: {
 			en: {
-				html: 'HTML',
-				video: 'Insert Video',
-				image: 'Insert Image',
-				table: 'Table',
-				link: 'Link',
-				link_insert: 'Insert link',
-				link_edit: 'Edit link',
-				unlink: 'Unlink',
-				formatting: 'Formatting',
-				paragraph: 'Normal text',
-				quote: 'Quote',
-				code: 'Code',
-				header1: 'Header 1',
-				header2: 'Header 2',
-				header3: 'Header 3',
-				header4: 'Header 4',
-				header5: 'Header 5',
-				bold: 'Bold',
-				italic: 'Italic',
-				fontcolor: 'Font Color',
-				backcolor: 'Back Color',
-				unorderedlist: 'Unordered List',
-				orderedlist: 'Ordered List',
-				outdent: 'Outdent',
-				indent: 'Indent',
-				cancel: 'Cancel',
-				insert: 'Insert',
-				save: 'Save',
-				_delete: 'Delete',
-				insert_table: 'Insert Table',
-				insert_row_above: 'Add Row Above',
-				insert_row_below: 'Add Row Below',
-				insert_column_left: 'Add Column Left',
-				insert_column_right: 'Add Column Right',
-				delete_column: 'Delete Column',
-				delete_row: 'Delete Row',
-				delete_table: 'Delete Table',
-				rows: 'Rows',
-				columns: 'Columns',
-				add_head: 'Add Head',
-				delete_head: 'Delete Head',
-				title: 'Title',
-				image_position: 'Position',
-				none: 'None',
-				left: 'Left',
-				right: 'Right',
-				center: 'Center',
-				image_web_link: 'Image Web Link',
-				text: 'Text',
-				mailto: 'Email',
-				web: 'URL',
-				video_html_code: 'Video Embed Code or Youtube/Vimeo Link',
-				file: 'Insert File',
-				upload: 'Upload',
-				download: 'Download',
-				choose: 'Choose',
-				or_choose: 'Or choose',
-				drop_file_here: 'Drop file here',
-				align_left: 'Align text to the left',
-				align_center: 'Center text',
-				align_right: 'Align text to the right',
-				align_justify: 'Justify text',
-				horizontalrule: 'Insert Horizontal Rule',
-				deleted: 'Deleted',
-				anchor: 'Anchor',
-				link_new_tab: 'Open link in new tab',
-				underline: 'Underline',
-				alignment: 'Alignment',
-				filename: 'Name (optional)',
-				edit: 'Edit',
-				upload_label: 'Drop file here or '
+
+				"format": "Format",
+				"image": "Image",
+				"file": "File",
+				"link": "Link",
+				"bold": "Bold",
+				"italic": "Italic",
+				"deleted": "Strikethrough",
+				"underline": "Underline",
+				"bold-abbr": "B",
+				"italic-abbr": "I",
+				"deleted-abbr": "S",
+				"underline-abbr": "U",
+				"lists": "Lists",
+				"link-insert": "Insert link",
+				"link-edit": "Edit link",
+				"link-in-new-tab": "Open link in new tab",
+				"unlink": "Unlink",
+				"cancel": "Cancel",
+				"close": "Close",
+				"insert": "Insert",
+				"save": "Save",
+				"delete": "Delete",
+				"text": "Text",
+				"edit": "Edit",
+				"title": "Title",
+				"paragraph": "Normal text",
+				"quote": "Quote",
+				"code": "Code",
+				"heading1": "Heading 1",
+				"heading2": "Heading 2",
+				"heading3": "Heading 3",
+				"heading4": "Heading 4",
+				"heading5": "Heading 5",
+				"heading6": "Heading 6",
+				"filename": "Name",
+				"optional": "optional",
+				"unorderedlist": "Unordered List",
+				"orderedlist": "Ordered List",
+				"outdent": "Outdent",
+				"indent": "Indent",
+				"horizontalrule": "Line",
+				"upload-label": "Drop file here or ",
+				"caption": "Caption",
+
+				"bulletslist": "Bullets",
+				"numberslist": "Numbers",
+
+				"image-position": "Position",
+				"none": "None",
+				"left": "Left",
+				"right": "Right",
+				"center": "Center",
+
+				"accessibility-help-label": "Rich text editor"
 			}
 		},
 
-		linkify: {
-			regexps: {
-				youtube: /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig,
-				vimeo: /https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,
-				image: /((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/ig,
-				url: /(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/ig,
-			}
+		// private
+		type: 'textarea', // textarea, div, inline, pre
+		inline: false,
+		inlineTags: ['a', 'span', 'strong', 'strike', 'b', 'u', 'em', 'i', 'code', 'del', 'ins', 'samp', 'kbd', 'sup', 'sub', 'mark', 'var', 'cite', 'small'],
+		blockTags: ['pre', 'ul', 'ol', 'li', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',  'dl', 'dt', 'dd', 'div', 'td', 'blockquote', 'output', 'figcaption', 'figure', 'address', 'section', 'header', 'footer', 'aside', 'article', 'iframe'],
+		paragraphize: true,
+		paragraphizeBlocks: ['table', 'div', 'pre', 'form', 'ul', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'dl', 'blockquote', 'figcaption',
+							'address', 'section', 'header', 'footer', 'aside', 'article', 'object', 'style', 'script', 'iframe', 'select', 'input', 'textarea',
+							'button', 'option', 'map', 'area', 'math', 'hr', 'fieldset', 'legend', 'hgroup', 'nav', 'figure', 'details', 'menu', 'summary', 'p'],
+		emptyHtml: '<p>&#x200b;</p>',
+		invisibleSpace: '&#x200b;',
+		emptyHtmlRendered: $('').html('​').html(),
+		imageTypes: ['image/png', 'image/jpeg', 'image/gif'],
+		userAgent: navigator.userAgent.toLowerCase(),
+		observe: {
+			dropdowns: []
 		},
+		regexps: {
+			linkyoutube: /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig,
+			linkvimeo: /https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,
+			linkimage: /((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/ig,
+			url: /(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/ig
+		}
 
-		codemirror: false
 	};
 
 	// Functionality
@@ -368,67 +352,180 @@
 			LEFT_WIN: 91
 		},
 
-		// Initialization
+		// =init
 		init: function(el, options)
 		{
 			this.$element = $(el);
 			this.uuid = uuid++;
-
-			// if paste event detected = true
-			this.rtePaste = false;
-			this.$pasteBox = false;
+			this.sBuffer = [];
+            this.sRebuffer = [];
 
 			this.loadOptions(options);
 			this.loadModules();
 
-			// formatting storage
-			this.formatting = {};
-
-			// block level tags
-			$.merge(this.opts.blockLevelElements, this.opts.alignmentTags);
-			this.reIsBlock = new RegExp('^(' + this.opts.blockLevelElements.join('|' ) + ')$', 'i');
-
-			// setup allowed and denied tags
-			this.tidy.setupAllowed();
-
-			// setup denied tags
-			if (this.opts.deniedTags !== false)
+			// click to edit
+			if (this.opts.clickToEdit && !this.$element.hasClass('redactor-click-to-edit'))
 			{
-				var tags = ['html', 'head', 'link', 'body', 'meta', 'applet'];
-				for (var i = 0; i < tags.length; i++)
-				{
-					this.opts.deniedTags.push(tags[i]);
-				}
+				return this.loadToEdit(options);
+			}
+			else if (this.$element.hasClass('redactor-click-to-edit'))
+			{
+				this.$element.removeClass('redactor-click-to-edit');
 			}
 
+			// block & inline test tag regexp
+			this.reIsBlock = new RegExp('^(' + this.opts.blockTags.join('|' ).toUpperCase() + ')$', 'i');
+			this.reIsInline = new RegExp('^(' + this.opts.inlineTags.join('|' ).toUpperCase() + ')$', 'i');
+
+			// set up drag upload
+			this.opts.dragImageUpload = (this.opts.imageUpload === null) ? false : this.opts.dragImageUpload;
+			this.opts.dragFileUpload = (this.opts.fileUpload === null) ? false : this.opts.dragFileUpload;
+
+			// formatting storage
+			this.formatting = {};
+
 			// load lang
 			this.lang.load();
 
 			// extend shortcuts
 			$.extend(this.opts.shortcuts, this.opts.shortcutsAdd);
 
+			// set editor
+			this.$editor = this.$element;
+
+			// detect type of editor
+			this.detectType();
+
 			// start callback
-			this.core.setCallback('start');
+			this.core.callback('start');
+			this.core.callback('startToEdit');
 
 			// build
 			this.start = true;
-			this.build.run();
+			this.build.start();
+
+		},
+		detectType: function()
+		{
+			if (this.build.isInline() || this.opts.inline)
+			{
+				this.opts.type = 'inline';
+			}
+			else if (this.build.isTag('DIV'))
+			{
+				this.opts.type = 'div';
+			}
+			else if (this.build.isTag('PRE'))
+			{
+				this.opts.type = 'pre';
+			}
+		},
+		loadToEdit: function(options)
+		{
+
+			this.$element.on('click.redactor-click-to-edit', $.proxy(function()
+			{
+				this.initToEdit(options);
+
+			}, this));
+
+			this.$element.addClass('redactor-click-to-edit');
+
+			return;
 		},
+		initToEdit: function(options)
+		{
+			$.extend(options.callbacks,  {
+				startToEdit: function()
+				{
+					this.insert.node(this.marker.get(), false);
+				},
+				initToEdit: function()
+				{
+					this.selection.restore();
+					this.clickToCancelStorage = this.code.get();
+
+					// cancel
+					$(this.opts.clickToCancel).off('.redactor-click-to-edit');
+					$(this.opts.clickToCancel).show().on('click.redactor-click-to-edit', $.proxy(function(e)
+					{
+						e.preventDefault();
+
+						this.core.destroy();
+						this.events.syncFire = false;
+						this.$element.html(this.clickToCancelStorage);
+						this.core.callback('cancel', this.clickToCancelStorage);
+						this.events.syncFire = true;
+						this.clickToCancelStorage = '';
+						$(this.opts.clickToCancel).hide();
+						$(this.opts.clickToSave).hide();
+
+						this.$element.on('click.redactor-click-to-edit', $.proxy(function()
+						{
+							this.initToEdit(options);
+						}, this));
+
+						this.$element.addClass('redactor-click-to-edit');
+
+					}, this));
+
+					// save
+					$(this.opts.clickToSave).off('.redactor-click-to-edit');
+					$(this.opts.clickToSave).show().on('click.redactor-click-to-edit', $.proxy(function(e)
+					{
+						e.preventDefault();
+
+						this.core.destroy();
+						this.core.callback('save', this.code.get());
+						$(this.opts.clickToCancel).hide();
+						$(this.opts.clickToSave).hide();
+						this.$element.on('click.redactor-click-to-edit', $.proxy(function()
+						{
+							this.initToEdit(options);
+						}, this));
+						this.$element.addClass('redactor-click-to-edit');
+
+					}, this));
+				}
+
+			});
 
+			this.$element.redactor(options);
+			this.$element.off('.redactor-click-to-edit');
+
+		},
 		loadOptions: function(options)
 		{
+			var settings = {};
+
+			// check namespace
+			if (typeof $.Redactor.settings.namespace !== 'undefined')
+			{
+				 if (this.$element.hasClass($.Redactor.settings.namespace))
+				 {
+					 settings = $.Redactor.settings;
+				 }
+			}
+			else
+			{
+				settings = $.Redactor.settings;
+			}
+
 			this.opts = $.extend(
 				{},
-				$.extend(true, {}, $.Redactor.opts),
+				$.Redactor.opts,
 				this.$element.data(),
 				options
 			);
+
+			this.opts = $.extend({}, this.opts, settings);
+
 		},
 		getModuleMethods: function(object)
 		{
 			return Object.getOwnPropertyNames(object).filter(function(property)
 			{
-				return typeof object[property] == 'function';
+				return typeof object[property] === 'function';
 			});
 		},
 		loadModules: function()
@@ -441,7 +538,10 @@
 		},
 		bindModuleMethods: function(module)
 		{
-			if (typeof this[module] == 'undefined') return;
+			if (typeof this[module] === 'undefined')
+			{
+				return;
+			}
 
 			// init module
 			this[module] = this[module]();
@@ -455,125 +555,204 @@
 				this[module][methods[z]] = this[module][methods[z]].bind(this);
 			}
 		},
-		alignment: function()
+
+		// =air
+		air: function()
 		{
 			return {
-				left: function()
-				{
-					this.alignment.set('');
-				},
-				right: function()
-				{
-					this.alignment.set('right');
-				},
-				center: function()
+				enabled: false,
+				collapsed: function()
 				{
-					this.alignment.set('center');
+					if (this.opts.air)
+					{
+						this.selection.get().collapseToStart();
+					}
 				},
-				justify: function()
+				collapsedEnd: function()
 				{
-					this.alignment.set('justify');
+					if (this.opts.air)
+					{
+						this.selection.get().collapseToEnd();
+					}
 				},
-				set: function(type)
+				build: function()
 				{
-					// focus
-					if (!this.utils.browser('msie') && !this.opts.linebreaks)
+					if (this.detect.isMobile())
 					{
-						this.$editor.focus();
+						return;
 					}
 
-					// get blocks
-					this.alignment.blocks = this.selection.getBlocks();
-					this.alignment.type = type;
-
-					this.buffer.set();
-					this.selection.save();
+					this.button.hideButtons();
+					this.button.hideButtonsOnMobile();
 
-					// set alignment
-					if (this.alignment.isLinebreaksOrNoBlocks())
+					if (this.opts.buttons.length === 0)
 					{
-						this.alignment.setText();
+						return;
 					}
-					else
+
+					this.$air = this.air.createContainer();
+
+					if (this.opts.airWidth !== false)
 					{
-						this.alignment.setBlocks();
+						this.$air.css('width', this.opts.airWidth);
 					}
 
-					// sync
-					this.selection.restore();
-					this.code.sync();
+					this.air.append();
+					this.button.$toolbar = this.$air;
+					this.button.setFormatting();
+					this.button.load(this.$air);
+
+					this.core.editor().on('mouseup.redactor', this, $.proxy(function(e)
+					{
+						if (this.selection.text() !== '')
+						{
+							this.air.show(e);
+						}
+					}, this));
+
+				},
+				append: function()
+				{
+					this.$air.appendTo('body');
+				},
+				createContainer: function()
+				{
+					return $('<ul>').addClass('redactor-air').attr({ 'id': 'redactor-air-' + this.uuid, 'role': 'toolbar' }).hide();
 				},
-				setText: function()
+				show: function (e)
 				{
-					var wrapper = this.selection.wrap('div');
-					$(wrapper).attr('data-tagblock', 'redactor').css('text-align', this.alignment.type);
+					//this.marker.remove();
+					this.selection.saveInstant();
+					//this.selection.restore(false);
+
+					$('.redactor-air').hide();
+
+					var leftFix = 0;
+					var width = this.$air.innerWidth();
+
+					if ($(window).width() < (e.clientX + width))
+					{
+						leftFix = 200;
+					}
+
+					this.$air.css({
+						left: (e.clientX - leftFix) + 'px',
+						top: (e.clientY + 10 + $(document).scrollTop()) + 'px'
+					}).show();
+
+					this.air.enabled = true;
+					this.air.bindHide();
 				},
-				setBlocks: function()
+				bindHide: function()
 				{
-					$.each(this.alignment.blocks, $.proxy(function(i, el)
+					$(document).on('mousedown.redactor-air.' + this.uuid, $.proxy(function(e)
+					{
+						var dropdown = $(e.target).closest('.redactor-dropdown').length;
+
+						if ($(e.target).closest(this.$air).length === 0 && dropdown === 0)
+						{
+							var hide = this.air.hide(e);
+							if (hide !== false)
+							{
+								this.marker.remove();
+							}
+						}
+
+					}, this)).on('keydown.redactor-air.' + this.uuid, $.proxy(function(e)
 					{
-						var $el = this.utils.getAlignmentElement(el);
-						if (!$el) return;
+						var key = e.which;
+						if ((!this.utils.isRedactorParent(e.target) && !$(e.target).hasClass('redactor-in')) || $(e.target).closest('#redactor-modal').length !== 0)
+						{
+							return;
+						}
+
+						if (key === this.keyCode.ESC)
+						{
+							this.selection.get().collapseToStart();
+							//this.marker.remove();
+						}
+						else if (key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE)
+						{
+							var sel = this.selection.get();
+							var range = this.selection.range(sel);
+							range.deleteContents();
+							//this.marker.remove();
+						}
+						else if (key === this.keyCode.ENTER)
+						{
+							this.selection.get().collapseToEnd();
+							//this.marker.remove();
+						}
 
-						if (this.alignment.isNeedReplaceElement($el))
+						if (this.air.enabled)
 						{
-							this.alignment.replaceElement($el);
+							this.air.hide(e);
 						}
 						else
 						{
-							this.alignment.alignElement($el);
+							this.selection.get().collapseToStart();
+							//this.marker.remove();
 						}
 
+
 					}, this));
 				},
-				isLinebreaksOrNoBlocks: function()
-				{
-					return (this.opts.linebreaks && this.alignment.blocks[0] === false);
-				},
-				isNeedReplaceElement: function($el)
-				{
-					return (this.alignment.type === '' && typeof($el.data('tagblock')) !== 'undefined');
-				},
-				replaceElement: function($el)
-				{
-					$el.replaceWith($el.html());
-				},
-				alignElement: function($el)
+				hide: function(e)
 				{
-					$el.css('text-align', this.alignment.type);
-					this.utils.removeEmptyAttr($el, 'style');
+					var ctrl = e.ctrlKey || e.metaKey || (e.shiftKey && e.altKey);
+					if (ctrl)
+					{
+						return false;
+					}
+
+					this.button.setInactiveAll();
+					this.$air.fadeOut(100);
+					this.air.enabled = false;
+					$(document).off('mousedown.redactor-air.' + this.uuid);
+					$(document).off('keydown.redactor-air.' + this.uuid);
+
 				}
 			};
 		},
+
+		// =autosave
 		autosave: function()
 		{
 			return {
+				enabled: false,
 				html: false,
-				enable: function()
+				init: function()
 				{
-					if (!this.opts.autosave) return;
+					if (!this.opts.autosave)
+					{
+						return;
+					}
 
+					this.autosave.enabled = true;
 					this.autosave.name = (this.opts.autosaveName) ? this.opts.autosaveName : this.$textarea.attr('name');
 
-					if (this.opts.autosaveOnChange) return;
-					this.autosaveInterval = setInterval(this.autosave.load, this.opts.autosaveInterval * 1000);
 				},
-				onChange: function()
+				is: function()
 				{
-					if (!this.opts.autosaveOnChange) return;
-					this.autosave.load();
+					return this.autosave.enabled;
 				},
-				load: function()
+				send: function()
 				{
-					if (!this.opts.autosave) return;
+					if (!this.opts.autosave)
+					{
+						return;
+					}
 
 					this.autosave.source = this.code.get();
 
-					if (this.autosave.html === this.autosave.source) return;
+					if (this.autosave.html === this.autosave.source)
+					{
+						return;
+					}
 
 					// data
 					var data = {};
-					data['name'] = this.autosave.name;
+					data.name = this.autosave.name;
 					data[this.autosave.name] = this.autosave.source;
 					data = this.autosave.getHiddenFields(data);
 
@@ -595,7 +774,11 @@
 
 					$.each(this.opts.autosaveFields, $.proxy(function(k, v)
 					{
-						if (v !== null && v.toString().indexOf('#') === 0) v = $(v).val();
+						if (v !== null && v.toString().indexOf('#') === 0)
+						{
+							v = $(v).val();
+						}
+
 						data[k] = v;
 
 					}, this));
@@ -608,7 +791,7 @@
 					var json;
 					try
 					{
-						json = $.parseJSON(data);
+						json = JSON.parse(data);
 					}
 					catch(e)
 					{
@@ -616,572 +799,344 @@
 						json = data;
 					}
 
-					var callbackName = (typeof json.error == 'undefined') ? 'autosave' :  'autosaveError';
+					var callbackName = (typeof json.error === 'undefined') ? 'autosave' :  'autosaveError';
 
-					this.core.setCallback(callbackName, this.autosave.name, json);
+					this.core.callback(callbackName, this.autosave.name, json);
 					this.autosave.html = this.autosave.source;
 				},
 				disable: function()
 				{
-					clearInterval(this.autosaveInterval);
+					this.autosave.enabled = false;
+
+					clearInterval(this.autosaveTimeout);
 				}
 			};
 		},
+
+		// =block
 		block: function()
 		{
 			return {
-				formatting: function(name)
+				format: function(tag, attr, value, type)
 				{
-					this.block.clearStyle = false;
-					var type, value;
-
-					if (typeof this.formatting[name].data != 'undefined') type = 'data';
-					else if (typeof this.formatting[name].attr != 'undefined') type = 'attr';
-					else if (typeof this.formatting[name]['class'] != 'undefined') type = 'class';
+					tag = (tag === 'quote') ? 'blockquote' : tag;
 
-					if (typeof this.formatting[name].clear != 'undefined')
+					this.block.tags = ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'div', 'figure'];
+					if ($.inArray(tag, this.block.tags) === -1)
 					{
-						this.block.clearStyle = true;
+						return;
 					}
 
-					if (type) value = this.formatting[name][type];
+					if (tag === 'p' && typeof attr === 'undefined')
+					{
+						// remove all
+						attr = 'class';
+					}
 
-					this.block.format(this.formatting[name].tag, type, value);
+					this.placeholder.hide();
+					this.buffer.set();
 
+					return (this.utils.isCollapsed()) ? this.block.formatCollapsed(tag, attr, value, type) : this.block.formatUncollapsed(tag, attr, value, type);
 				},
-				format: function(tag, type, value)
+				formatCollapsed: function(tag, attr, value, type)
 				{
-					if (tag == 'quote') tag = 'blockquote';
+					this.selection.save();
 
-					var formatTags = ['p', 'pre', 'blockquote', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
-					if ($.inArray(tag, formatTags) == -1) return;
+					var block = this.selection.block();
+					var currentTag = block.tagName.toLowerCase();
+					if ($.inArray(currentTag, this.block.tags) === -1)
+					{
+						this.selection.restore();
+						return;
+					}
 
-					this.block.isRemoveInline = (tag == 'pre' || tag.search(/h[1-6]/i) != -1);
+                    var clearAllAttrs = false;
+					if (currentTag === tag && attr === undefined)
+					{
+						tag = 'p';
+						clearAllAttrs = true;
+					}
 
-					// focus
-					if (!this.utils.browser('msie')) this.$editor.focus();
 
-					var html = $.trim(this.$editor.html());
-					this.block.isEmpty = this.utils.isEmpty(html);
+                    if (clearAllAttrs)
+                    {
+                        this.block.removeAllClass();
+                        this.block.removeAllAttr();
+                    }
 
-					// FF focus
-					if (this.utils.browser('mozilla') && !this.focus.isFocused())
-					{
-						if (this.block.isEmpty)
-						{
-							var $first;
-							if (!this.opts.linebreaks)
-							{
-								$first = this.$editor.children().first();
-								this.caret.setEnd($first);
-							}
-						}
-					}
 
-					this.block.blocks = this.selection.getBlocks();
-
-					this.block.blocksSize = this.block.blocks.length;
-					this.block.type = type;
-					this.block.value = value;
-
-					this.buffer.set();
-					this.selection.save();
+                    var replaced;
+                    if (currentTag === 'blockquote' && this.utils.isEndOfElement(block))
+                    {
+                        this.marker.remove();
 
-					this.block.set(tag);
+                        replaced = document.createElement('p');
+                        replaced.innerHTML = this.opts.invisibleSpace;
 
-					this.selection.restore();
-					this.code.sync();
-					this.observe.load();
+                        $(block).after(replaced);
+                        this.caret.start(replaced);
+                        var $last = $(block).children().last();
 
-				},
-				set: function(tag)
-				{
+                        if ($last.length !== 0 && $last[0].tagName === 'BR')
+                        {
+                            $last.remove();
+                        }
+                    }
+                    else
+                    {
+					    replaced = this.utils.replaceToTag(block, tag);
+                    }
 
-					this.selection.get();
-					this.block.containerTag = this.range.commonAncestorContainer.tagName;
 
-					if (this.range.collapsed)
+					if (typeof attr === 'object')
 					{
-						this.block.setCollapsed(tag);
+						type = value;
+						for (var key in attr)
+						{
+							replaced = this.block.setAttr(replaced, key, attr[key], type);
+						}
 					}
 					else
 					{
-						this.block.setMultiple(tag);
-					}
-				},
-				setCollapsed: function(tag)
-				{
-					if (this.opts.linebreaks && this.block.isEmpty && tag != 'p')
-					{
-						var node = document.createElement(tag);
-						this.$editor.html(node);
-						this.caret.setEnd(node);
-
-						return;
-					}
-
-					var block = this.block.blocks[0];
-					if (block === false) return;
-
-					if (block.tagName == 'LI')
-					{
-						if (tag != 'blockquote') return;
-
-						this.block.formatListToBlockquote();
-						return;
-					}
-
-					var isContainerTable = (this.block.containerTag  == 'TD' || this.block.containerTag  == 'TH');
-					if (isContainerTable && !this.opts.linebreaks)
-					{
-						document.execCommand('formatblock', false, '<' + tag + '>');
-
-						block = this.selection.getBlock();
-						this.block.toggle($(block));
-
+						replaced = this.block.setAttr(replaced, attr, value, type);
 					}
-					else if (block.tagName.toLowerCase() != tag)
-					{
-						if (this.opts.linebreaks && tag == 'p')
-						{
-							$(block).append('<br>');
-							this.utils.replaceWithContents(block);
-						}
-						else
-						{
-							var $formatted = this.utils.replaceToTag(block, tag);
-
-							this.block.toggle($formatted);
 
-							if (tag != 'p' && tag != 'blockquote') $formatted.find('img').remove();
-							if (this.block.isRemoveInline) this.utils.removeInlineTags($formatted);
-							if (tag == 'p' || this.block.headTag) $formatted.find('p').contents().unwrap();
 
-							this.block.formatTableWrapping($formatted);
-						}
-					}
-					else if (tag == 'blockquote' && block.tagName.toLowerCase() == tag)
+					// trim pre
+					if (tag === 'pre' && replaced.length === 1)
 					{
-						// blockquote off
-						if (this.opts.linebreaks)
-						{
-							$(block).append('<br>');
-							this.utils.replaceWithContents(block);
-						}
-						else
-						{
-							var $el = this.utils.replaceToTag(block, 'p');
-							this.block.toggle($el);
-						}
-					}
-					else if (block.tagName.toLowerCase() == tag)
-					{
-						this.block.toggle($(block));
+						$(replaced).html($.trim($(replaced).html()));
 					}
 
+					this.selection.restore();
+					this.block.removeInlineTags(replaced);
 
-					if (typeof this.block.type == 'undefined' && typeof this.block.value == 'undefined')
-					{
-						$(block).removeAttr('class').removeAttr('style');
-					}
+					return replaced;
 				},
-				setMultiple: function(tag)
+				formatUncollapsed: function(tag, attr, value, type)
 				{
-					var block = this.block.blocks[0];
+					this.selection.save();
+
+					var replaced = [];
+					var blocks = this.selection.blocks();
 
-					var isContainerTable = (this.block.containerTag  == 'TD' || this.block.containerTag  == 'TH');
+                    if (blocks[0] && ($(blocks[0]).hasClass('redactor-in') || $(blocks[0]).hasClass('redactor-box')))
+                    {
+                        blocks = this.core.editor().find(this.opts.blockTags.join(', '));
+					}
 
-					if (block !== false && this.block.blocksSize === 1)
+					var len = blocks.length;
+					for (var i = 0; i < len; i++)
 					{
-						if (block.tagName.toLowerCase() == tag &&  tag == 'blockquote')
-						{
-							// blockquote off
-							if (this.opts.linebreaks)
-							{
-								$(block).append('<br>');
-								this.utils.replaceWithContents(block);
-							}
-							else
-							{
-								var $el = this.utils.replaceToTag(block, 'p');
-								this.block.toggle($el);
-							}
-						}
-						else if (block.tagName == 'LI')
+						var currentTag = blocks[i].tagName.toLowerCase();
+						if ($.inArray(currentTag, this.block.tags) !== -1 && currentTag !== 'figure')
 						{
-							if (tag != 'blockquote') return;
+							var block = this.utils.replaceToTag(blocks[i], tag);
 
-							this.block.formatListToBlockquote();
-						}
-						else if (this.block.containerTag == 'BLOCKQUOTE')
-						{
-							this.block.formatBlockquote(tag);
-						}
-						else if (this.opts.linebreaks && ((isContainerTable) || (this.range.commonAncestorContainer != block)))
-						{
-							this.block.formatWrap(tag);
-						}
-						else
-						{
-							if (this.opts.linebreaks && tag == 'p')
+							if (typeof attr === 'object')
 							{
-								$(block).prepend('<br>').append('<br>');
-								this.utils.replaceWithContents(block);
-							}
-							else if (block.tagName === 'TD')
-							{
-								this.block.formatWrap(tag);
+								type = value;
+								for (var key in attr)
+								{
+									block = this.block.setAttr(block, key, attr[key], type);
+								}
 							}
 							else
 							{
-								var $formatted = this.utils.replaceToTag(block, tag);
-
-								this.block.toggle($formatted);
-
-								if (this.block.isRemoveInline) this.utils.removeInlineTags($formatted);
-								if (tag == 'p' || this.block.headTag) $formatted.find('p').contents().unwrap();
+								block = this.block.setAttr(block, attr, value, type);
 							}
+
+							replaced.push(block);
+							this.block.removeInlineTags(block);
 						}
 					}
-					else
-					{
-						if (this.opts.linebreaks || tag != 'p')
-						{
-							if (tag == 'blockquote')
-							{
-								var count = 0;
-								for (var i = 0; i < this.block.blocksSize; i++)
-								{
-									if (this.block.blocks[i].tagName == 'BLOCKQUOTE') count++;
-								}
-
-								// only blockquote selected
-								if (count == this.block.blocksSize)
-								{
-									$.each(this.block.blocks, $.proxy(function(i,s)
-									{
-										var $formatted = false;
-										if (this.opts.linebreaks)
-										{
-											$(s).prepend('<br>').append('<br>');
-											$formatted = this.utils.replaceWithContents(s);
-										}
-										else
-										{
-											$formatted = this.utils.replaceToTag(s, 'p');
-										}
-
-										if ($formatted && typeof this.block.type == 'undefined' && typeof this.block.value == 'undefined')
-										{
-											$formatted.removeAttr('class').removeAttr('style');
-										}
 
-									}, this));
-
-									return;
-								}
-
-							}
+					this.selection.restore();
 
-							this.block.formatWrap(tag);
-						}
-						else
+					// combine pre
+					if (tag === 'pre' && replaced.length !== 0)
+					{
+						var first = replaced[0];
+						$.each(replaced, function(i,s)
 						{
-							var classSize = 0;
-							var toggleType = false;
-							if (this.block.type == 'class')
+							if (i !== 0)
 							{
-								toggleType = 'toggle';
-								classSize = $(this.block.blocks).filter('.' + this.block.value).length;
-
-								if (this.block.blocksSize == classSize) toggleType = 'toggle';
-								else if (this.block.blocksSize > classSize) toggleType = 'set';
-								else if (classSize === 0) toggleType = 'set';
-
+								$(first).append("\n" + $.trim(s.html()));
+								$(s).remove();
 							}
+						});
 
-							var exceptTags = ['ul', 'ol', 'li', 'td', 'th', 'dl', 'dt', 'dd'];
-							$.each(this.block.blocks, $.proxy(function(i,s)
-							{
-								if ($.inArray(s.tagName.toLowerCase(), exceptTags) != -1) return;
-
-								var $formatted = this.utils.replaceToTag(s, tag);
-
-								if (toggleType)
-								{
-									if (toggleType == 'toggle') this.block.toggle($formatted);
-									else if (toggleType == 'remove') this.block.remove($formatted);
-									else if (toggleType == 'set') this.block.setForce($formatted);
-								}
-								else this.block.toggle($formatted);
-
-								if (tag != 'p' && tag != 'blockquote') $formatted.find('img').remove();
-								if (this.block.isRemoveInline) this.utils.removeInlineTags($formatted);
-								if (tag == 'p' || this.block.headTag) $formatted.find('p').contents().unwrap();
-
-								if (typeof this.block.type == 'undefined' && typeof this.block.value == 'undefined')
-								{
-									$formatted.removeAttr('class').removeAttr('style');
-								}
-
-
-							}, this));
-						}
-					}
-				},
-				setForce: function($el)
-				{
-					// remove style and class if the specified setting
-					if (this.block.clearStyle)
-					{
-						$el.removeAttr('class').removeAttr('style');
+						replaced = [];
+						replaced.push(first);
 					}
 
-					if (this.block.type == 'class')
-					{
-						$el.addClass(this.block.value);
-						return;
-					}
-					else if (this.block.type == 'attr' || this.block.type == 'data')
-					{
-						$el.attr(this.block.value.name, this.block.value.value);
-						return;
-					}
+					return replaced;
 				},
-				toggle: function($el)
+				removeInlineTags: function(node)
 				{
-					// remove style and class if the specified setting
-					if (this.block.clearStyle)
-					{
-						$el.removeAttr('class').removeAttr('style');
-					}
+					node = node[0] || node;
+
+					var tags = this.opts.inlineTags;
+					var blocks = ['PRE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6'];
 
-					if (this.block.type == 'class')
+					if ($.inArray(node.tagName, blocks) === - 1)
 					{
-						$el.toggleClass(this.block.value);
 						return;
 					}
-					else if (this.block.type == 'attr' || this.block.type == 'data')
-					{
-						if ($el.attr(this.block.value.name) == this.block.value.value)
-						{
-							$el.removeAttr(this.block.value.name);
-						}
-						else
-						{
-							$el.attr(this.block.value.name, this.block.value.value);
-						}
 
-						return;
-					}
-					else
+					if (node.tagName !== 'PRE')
 					{
-						$el.removeAttr('style class');
-						return;
+						var index = tags.indexOf('a');
+						tags.splice(index, 1);
 					}
-				},
-				remove: function($el)
-				{
-					$el.removeClass(this.block.value);
-				},
-				formatListToBlockquote: function()
-				{
-					var block = $(this.block.blocks[0]).closest('ul, ol', this.$editor[0]);
-
-					$(block).find('ul, ol').contents().unwrap();
-					$(block).find('li').append($('<br>')).contents().unwrap();
 
-					var $el = this.utils.replaceToTag(block, 'blockquote');
-					this.block.toggle($el);
+					$(node).find(tags.join(',')).not('.redactor-selection-marker').contents().unwrap();
 				},
-				formatBlockquote: function(tag)
+				setAttr: function(block, attr, value, type)
 				{
-					document.execCommand('outdent');
-					document.execCommand('formatblock', false, tag);
-
-					this.clean.clearUnverified();
-					this.$editor.find('p:empty').remove();
-
-					var formatted = this.selection.getBlock();
-
-					if (tag != 'p')
-					{
-						$(formatted).find('img').remove();
-					}
-
-					if (!this.opts.linebreaks)
+					if (typeof attr === 'undefined')
 					{
-						this.block.toggle($(formatted));
+						return block;
 					}
 
-					this.$editor.find('ul, ol, tr, blockquote, p').each($.proxy(this.utils.removeEmpty, this));
+					var func = (typeof type === 'undefined') ? 'replace' : type;
 
-					if (this.opts.linebreaks && tag == 'p')
+					if (attr === 'class')
 					{
-						this.utils.replaceWithContents(formatted);
+						block = this.block[func + 'Class'](value, block);
 					}
-
-				},
-				formatWrap: function(tag)
-				{
-					if (this.block.containerTag == 'UL' || this.block.containerTag == 'OL')
+					else
 					{
-						if (tag == 'blockquote')
+						if (func === 'remove')
+						{
+							block = this.block[func + 'Attr'](attr, block);
+						}
+						else if (func === 'removeAll')
 						{
-							this.block.formatListToBlockquote();
+							block = this.block[func + 'Attr'](attr, block);
 						}
 						else
 						{
-							return;
+							block = this.block[func + 'Attr'](attr, value, block);
 						}
 					}
 
-					var formatted = this.selection.wrap(tag);
-					if (formatted === false) return;
-
-					var $formatted = $(formatted);
-
-					this.block.formatTableWrapping($formatted);
-
-					var $elements = $formatted.find(this.opts.blockLevelElements.join(',') + ', td, table, thead, tbody, tfoot, th, tr');
-
-					$elements.contents().unwrap();
-
-					if (tag != 'p' && tag != 'blockquote') $formatted.find('img').remove();
-
-					$.each(this.block.blocks, $.proxy(this.utils.removeEmpty, this));
-
-					$formatted.append(this.selection.getMarker(2));
-
-					if (!this.opts.linebreaks)
-					{
-						this.block.toggle($formatted);
-					}
-
-					this.$editor.find('ul, ol, tr, blockquote, p').each($.proxy(this.utils.removeEmpty, this));
-					$formatted.find('blockquote:empty').remove();
-
-					if (this.block.isRemoveInline)
-					{
-						this.utils.removeInlineTags($formatted);
-					}
+					return block;
 
-					if (this.opts.linebreaks && tag == 'p')
-					{
-						this.utils.replaceWithContents($formatted);
-					}
+				},
+				getBlocks: function(block)
+				{
+					block = (typeof block === 'undefined') ? this.selection.blocks() : block;
 
-					if (this.opts.linebreaks)
-					{
-						var $next = $formatted.next().next();
-						if ($next.size() != 0 && $next[0].tagName === 'BR')
-						{
-							$next.remove();
-						}
-					}
+    				if ($(block).hasClass('redactor-box'))
+    				{
+        				var blocks = [];
+        				var nodes = this.core.editor().children();
+        			    $.each(nodes, $.proxy(function(i,node)
+    					{
+    						if (this.utils.isBlock(node))
+    						{
+    							blocks.push(node);
+    						}
 
+    					}, this));
 
+    					return blocks;
+    				}
 
+    				return block
 				},
-				formatTableWrapping: function($formatted)
+				replaceClass: function(value, block)
 				{
-					if ($formatted.closest('table', this.$editor[0]).length === 0) return;
-
-					if ($formatted.closest('tr', this.$editor[0]).length === 0) $formatted.wrap('<tr>');
-					if ($formatted.closest('td', this.$editor[0]).length === 0 && $formatted.closest('th').length === 0)
-					{
-						$formatted.wrap('<td>');
-					}
+					return $(this.block.getBlocks(block)).removeAttr('class').addClass(value)[0];
 				},
-				removeData: function(name, value)
+				toggleClass: function(value, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).removeAttr('data-' + name);
-
-					this.code.sync();
+					return $(this.block.getBlocks(block)).toggleClass(value)[0];
 				},
-				setData: function(name, value)
+				addClass: function(value, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).attr('data-' + name, value);
-
-					this.code.sync();
+					return $(this.block.getBlocks(block)).addClass(value)[0];
 				},
-				toggleData: function(name, value)
+				removeClass: function(value, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$.each(blocks, function()
-					{
-						if ($(this).attr('data-' + name))
-						{
-							$(this).removeAttr('data-' + name);
-						}
-						else
-						{
-							$(this).attr('data-' + name, value);
-						}
-					});
+					return $(this.block.getBlocks(block)).removeClass(value)[0];
 				},
-				removeAttr: function(attr, value)
+				removeAllClass: function(block)
 				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).removeAttr(attr);
-
-					this.code.sync();
+					return $(this.block.getBlocks(block)).removeAttr('class')[0];
 				},
-				setAttr: function(attr, value)
+				replaceAttr: function(attr, value, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).attr(attr, value);
+					block = this.block.removeAttr(attr, block);
 
-					this.code.sync();
+					return $(block).attr(attr, value)[0];
 				},
-				toggleAttr: function(attr, value)
+				toggleAttr: function(attr, value, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$.each(blocks, function()
+					block = this.block.getBlocks(block);
+
+					var self = this;
+					var returned = [];
+					$.each(block, function(i,s)
 					{
-						if ($(this).attr(name))
+						var $el = $(s);
+						if ($el.attr(attr))
 						{
-							$(this).removeAttr(name);
+							returned.push(self.block.removeAttr(attr, s));
 						}
 						else
 						{
-							$(this).attr(name, value);
+							returned.push(self.block.addAttr(attr, value, s));
 						}
 					});
-				},
-				removeClass: function(className)
-				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).removeClass(className);
 
-					this.utils.removeEmptyAttr(blocks, 'class');
+					return returned;
 
-					this.code.sync();
 				},
-				setClass: function(className)
+				addAttr: function(attr, value, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).addClass(className);
-
-					this.code.sync();
+					return $(this.block.getBlocks(block)).attr(attr, value)[0];
 				},
-				toggleClass: function(className)
+				removeAttr: function(attr, block)
 				{
-					var blocks = this.selection.getBlocks();
-					$(blocks).toggleClass(className);
+					return $(this.block.getBlocks(block)).removeAttr(attr)[0];
+				},
+				removeAllAttr: function(block)
+				{
+					block = this.block.getBlocks(block);
 
-					this.code.sync();
+					var returned = [];
+					$.each(block, function(i,s)
+					{
+						if (typeof s.attributes !== 'undefined')
+                        {
+    						while (s.attributes.length)
+    						{
+                                s.removeAttribute(s.attributes[0].name);
+                            }
+                        }
+
+						returned.push(s);
+					});
+
+					return returned;
 				}
 			};
 		},
+
+		// buffer
 		buffer: function()
 		{
 			return {
 				set: function(type)
 				{
-					if (typeof type == 'undefined' || type == 'undo')
+    				if (typeof type === 'undefined')
+                    {
+                        this.buffer.clear();
+                    }
+
+					if (typeof type === 'undefined' || type === 'undo')
 					{
 						this.buffer.setUndo();
 					}
@@ -1192,310 +1147,364 @@
 				},
 				setUndo: function()
 				{
-					this.selection.save();
-					this.opts.buffer.push(this.$editor.html());
-					this.selection.restore();
+                    var saved = this.selection.saveInstant();
+
+					var last = this.sBuffer[this.sBuffer.length-1];
+					var current = this.core.editor().html();
+
+					var save = (typeof last !== 'undefined' && (last[0] === current)) ? false : true;
+    				if (save)
+    				{
+						this.sBuffer.push([current, saved]);
+					}
+
+					//this.selection.restore();
 				},
 				setRedo: function()
 				{
-					this.selection.save();
-					this.opts.rebuffer.push(this.$editor.html());
-					this.selection.restore();
-				},
-				getUndo: function()
-				{
-					this.$editor.html(this.opts.buffer.pop());
-				},
-				getRedo: function()
-				{
-					this.$editor.html(this.opts.rebuffer.pop());
+					var saved = this.selection.saveInstant();
+					this.sRebuffer.push([this.core.editor().html(), saved]);
+					//this.selection.restore();
 				},
 				add: function()
 				{
-					this.opts.buffer.push(this.$editor.html());
+					this.sBuffer.push([this.core.editor().html(), 0]);
 				},
 				undo: function()
 				{
-					if (this.opts.buffer.length === 0) return;
+					if (this.sBuffer.length === 0)
+					{
+						return;
+					}
+
+					var buffer = this.sBuffer.pop();
 
 					this.buffer.set('redo');
-					this.buffer.getUndo();
+					this.core.editor().html(buffer[0]);
 
+					this.selection.restoreInstant(buffer[1]);
 					this.selection.restore();
-
-					setTimeout($.proxy(this.observe.load, this), 50);
+					this.observe.load();
 				},
 				redo: function()
 				{
-					if (this.opts.rebuffer.length === 0) return;
+					if (this.sRebuffer.length === 0)
+					{
+						return;
+					}
+
+					var buffer = this.sRebuffer.pop();
 
 					this.buffer.set('undo');
-					this.buffer.getRedo();
+					this.core.editor().html(buffer[0]);
 
+					this.selection.restoreInstant(buffer[1]);
 					this.selection.restore();
-
-					setTimeout($.proxy(this.observe.load, this), 50);
+					this.observe.load();
+				},
+				clear: function()
+				{
+    				this.sRebuffer = [];
 				}
 			};
 		},
+
+		// =build
 		build: function()
 		{
 			return {
-				focused: false,
-				blured: true,
-				run: function()
+				start: function()
 				{
-					this.build.createContainerBox();
-					this.build.loadContent();
-					this.build.loadEditor();
+					if (this.opts.type === 'inline')
+					{
+						this.opts.type = 'inline';
+					}
+					else if (this.opts.type === 'div')
+					{
+						// empty
+						var html = $.trim(this.$editor.html());
+						if (html === '')
+						{
+							this.$editor.html(this.opts.emptyHtml);
+						}
+
+						this.build.buildTextarea();
+					}
+					else if (this.opts.type === 'textarea')
+					{
+						this.build.startTextarea();
+					}
+
+					// set in
+					this.build.setIn();
+
+					// set id
+					this.build.setId();
+
+					// enable
 					this.build.enableEditor();
-					this.build.setCodeAndCall();
-				},
-				isTextarea: function()
-				{
-					return (this.$element[0].tagName === 'TEXTAREA');
+
+					// options
+					this.build.setOptions();
+
+					// call
+					this.build.callEditor();
+
+
 				},
 				createContainerBox: function()
 				{
 					this.$box = $('<div class="redactor-box" role="application" />');
 				},
-				createTextarea: function()
+				setIn: function()
 				{
-					this.$textarea = $('<textarea />').attr('name', this.build.getTextareaName());
+					this.core.editor().addClass('redactor-in');
 				},
-				getTextareaName: function()
+				setId: function()
 				{
-					return ((typeof(name) == 'undefined')) ? 'content-' + this.uuid : this.$element.attr('id');
-				},
-				loadContent: function()
-				{
-					var func = (this.build.isTextarea()) ? 'val' : 'html';
-					this.content = $.trim(this.$element[func]());
+					var id = (this.opts.type === 'textarea') ? 'redactor-uuid-' + this.uuid : this.$element.attr('id');
+
+					this.core.editor().attr('id', (typeof id === 'undefined') ? 'redactor-uuid-' + this.uuid : id);
 				},
-				enableEditor: function()
+				getName: function()
 				{
-					this.$editor.attr({ 'contenteditable': true, 'dir': this.opts.direction });
+					var name = this.$element.attr('name');
+
+					return (typeof name === 'undefined') ? 'content-' + this.uuid : name;
 				},
-				loadEditor: function()
+				buildTextarea: function()
 				{
-					var func = (this.build.isTextarea()) ? 'fromTextarea' : 'fromElement';
-					this.build[func]();
+    				this.$textarea = $('<textarea>');
+    				this.$textarea.attr('name', this.build.getName());
+    				this.$textarea.hide();
+    				this.$element.after(this.$textarea);
+
+    				this.build.setStartAttrs();
 				},
-				fromTextarea: function()
+				loadFromTextarea: function()
 				{
 					this.$editor = $('<div />');
+
+					// textarea
 					this.$textarea = this.$element;
+					this.$element.attr('name', this.build.getName());
+
+					// place
 					this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element);
-					this.$editor.addClass('redactor-editor');
+
+                    this.build.setStartAttrs();
+
+                    // styles
+                    this.$editor.addClass('redactor-layer');
+                    if (this.opts.overrideStyles) this.$editor.addClass('redactor-styles');
 
 					this.$element.hide();
-				},
-				fromElement: function()
-				{
-					this.$editor = this.$element;
-					this.build.createTextarea();
-					this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea);
-					this.$editor.addClass('redactor-editor');
 
-					this.$textarea.hide();
+					this.$box.prepend('<span class="redactor-voice-label" id="redactor-voice-' + this.uuid +'" aria-hidden="false">' + this.lang.get('accessibility-help-label') + '</span>');
+
 				},
-				setCodeAndCall: function()
+				setStartAttrs: function()
 				{
-					// set code
-					this.code.set(this.content);
-
-					this.build.setOptions();
-					this.build.callEditor();
-
-					// code mode
-					if (this.opts.visual) return;
-					setTimeout($.proxy(this.code.showCode, this), 200);
+                    this.$editor.attr({ 'aria-labelledby': 'redactor-voice-' + this.uuid, 'role': 'presentation' });
 				},
-				callEditor: function()
+				startTextarea: function()
 				{
-					this.build.disableMozillaEditing();
-					this.build.disableIeLinks();
-					this.build.setEvents();
-					this.build.setHelpers();
-
-					// load toolbar
-					if (this.opts.toolbar)
-					{
-						this.opts.toolbar = this.toolbar.init();
-						this.toolbar.build();
-					}
-
-					// modal templates init
-					this.modal.loadTemplates();
+					this.build.createContainerBox();
 
-					// plugins
-					this.build.plugins();
+					// load
+					this.build.loadFromTextarea();
 
-					// observers
-					setTimeout($.proxy(this.observe.load, this), 4);
+					// set code
+					this.code.start(this.core.textarea().val());
 
-					// init callback
-					this.core.setCallback('init');
+					// set value
+					this.core.textarea().val(this.clean.onSync(this.$editor.html()));
 				},
-				setOptions: function()
+				isTag: function(tag)
 				{
-					// textarea direction
-					$(this.$textarea).attr('dir', this.opts.direction);
-
-					if (this.opts.linebreaks) this.$editor.addClass('redactor-linebreaks');
-
-					if (this.opts.tabindex) this.$editor.attr('tabindex', this.opts.tabindex);
-
-					if (this.opts.minHeight) this.$editor.css('minHeight', this.opts.minHeight);
-					if (this.opts.maxHeight) this.$editor.css('maxHeight', this.opts.maxHeight);
-
+					return (this.$element[0].tagName === tag);
 				},
-				setEventDropUpload: function(e)
+				isInline: function()
 				{
-					e.preventDefault();
-
-					if (!this.opts.dragImageUpload || !this.opts.dragFileUpload) return;
-
-					var files = e.dataTransfer.files;
-					this.upload.directUpload(files[0], e);
+					return (!this.build.isTag('TEXTAREA') && !this.build.isTag('DIV') && !this.build.isTag('PRE'));
 				},
-				setEventDrop: function(e)
+				enableEditor: function()
 				{
-					this.code.sync();
-					setTimeout(this.clean.clearUnverified, 1);
-					this.core.setCallback('drop', e);
+					this.core.editor().attr({ 'contenteditable': true });
 				},
-				setEvents: function()
+				setOptions: function()
 				{
-					// drop
-					this.$editor.on('dragover.redactor dragenter.redactor', function(e)
+					// inline
+					if (this.opts.type === 'inline')
 					{
-						e.preventDefault();
-						e.stopPropagation();
-				    });
+						this.opts.enterKey = false;
+					}
 
-					this.$editor.on('drop.redactor', $.proxy(function(e)
+					// inline & pre
+					if (this.opts.type === 'inline' || this.opts.type === 'pre')
 					{
-						e = e.originalEvent || e;
+						this.opts.toolbarMobile = false;
+						this.opts.toolbar = false;
+						this.opts.air = false;
+						this.opts.linkify = false;
 
-						if (window.FormData === undefined || !e.dataTransfer) return true;
-
-						if (e.dataTransfer.files.length === 0)
-						{
-							return this.build.setEventDrop(e);
-						}
-						else
-						{
-							this.build.setEventDropUpload(e);
-						}
+					}
 
-						setTimeout(this.clean.clearUnverified, 1);
-						this.core.setCallback('drop', e);
+					// spellcheck
+					this.core.editor().attr('spellcheck', this.opts.spellcheck);
 
-					}, this));
+					// structure
+					if (this.opts.structure)
+					{
+						this.core.editor().addClass('redactor-structure');
+					}
 
+					// styles class
+					if (this.opts.stylesClass)
+					{
+						this.core.editor().addClass(this.opts.stylesClass);
+					}
 
-					// click
-					this.$editor.on('click.redactor', $.proxy(function(e)
+					// options sets only in textarea mode
+					if (this.opts.type !== 'textarea')
 					{
-						var event = this.core.getEvent();
-						var type = (event == 'click' || event == 'arrow') ? false : 'click';
+						return;
+					}
 
-						this.core.addEvent(type);
-						this.utils.disableSelectAll();
-						this.core.setCallback('click', e);
+					// direction
+					this.core.box().attr('dir', this.opts.direction);
+					this.core.editor().attr('dir', this.opts.direction);
 
-					}, this));
+					// tabindex
+					if (this.opts.tabindex)
+					{
+						this.core.editor().attr('tabindex', this.opts.tabindex);
+					}
+
+					// min height
+					if (this.opts.minHeight)
+					{
+						this.core.editor().css('min-height', this.opts.minHeight);
+					}
+					else
+					{
+						this.core.editor().css('min-height', '40px');
+					}
 
-					// paste
-					this.$editor.on('paste.redactor', $.proxy(this.paste.init, this));
+					// max height
+					if (this.opts.maxHeight)
+					{
+						this.core.editor().css('max-height', this.opts.maxHeight);
+					}
 
-					// cut
-					this.$editor.on('cut.redactor', $.proxy(this.code.sync, this));
+					// max width
+					if (this.opts.maxWidth)
+					{
+						this.core.editor().css({ 'max-width': this.opts.maxWidth, 'margin': 'auto' });
+					}
 
-					// keydown
-					this.$editor.on('keydown.redactor', $.proxy(this.keydown.init, this));
+				},
+				callEditor: function()
+				{
+					this.build.disableBrowsersEditing();
 
-					// keyup
-					this.$editor.on('keyup.redactor', $.proxy(this.keyup.init, this));
+					this.events.init();
+					this.build.setHelpers();
 
-					// textarea keydown
-					if ($.isFunction(this.opts.codeKeydownCallback))
+					// init buttons
+					if (this.opts.toolbar || this.opts.air)
 					{
-						this.$textarea.on('keydown.redactor-textarea', $.proxy(this.opts.codeKeydownCallback, this));
+						this.toolbarsButtons = this.button.init();
 					}
 
-					// textarea keyup
-					if ($.isFunction(this.opts.codeKeyupCallback))
+					// load toolbar
+					if (this.opts.air)
 					{
-						this.$textarea.on('keyup.redactor-textarea', $.proxy(this.opts.codeKeyupCallback, this));
+						this.air.build();
 					}
-
-					// focus
-					this.$editor.on('focus.redactor', $.proxy(function(e)
+					else if (this.opts.toolbar)
 					{
-						if ($.isFunction(this.opts.focusCallback))
-						{
-							this.core.setCallback('focus', e);
-						}
+						this.toolbar.build();
+					}
 
-						this.build.focused = true;
-						this.build.blured = false;
+					if (this.detect.isMobile() && this.opts.toolbarMobile && this.opts.air)
+					{
+						this.opts.toolbar = true;
+						this.toolbar.build();
+					}
 
-						if (this.selection.getCurrent() === false)
+					// observe dropdowns
+					if (this.opts.air || this.opts.toolbar)
+					{
+						this.core.editor().on('mouseup.redactor-observe.' + this.uuid + ' keyup.redactor-observe.' + this.uuid + ' focus.redactor-observe.' + this.uuid + ' touchstart.redactor-observe.' + this.uuid, $.proxy(this.observe.toolbar, this));
+						this.core.element().on('blur.callback.redactor', $.proxy(function()
 						{
-							this.selection.get();
-							this.range.setStart(this.$editor[0], 0);
-							this.range.setEnd(this.$editor[0], 0);
-							this.selection.addRange();
-						}
+							this.button.setInactiveAll();
 
+						}, this));
+					}
 
-					}, this));
+					// modal templates init
+					this.modal.templates();
 
+					// plugins
+					this.build.plugins();
 
-					// blur
-					$(document).on('mousedown.redactor-blur.' + this.uuid, $.proxy(function(e)
-					{
-						if (this.start) return;
-						if (this.rtePaste) return;
+					// autosave
+					this.autosave.init();
 
-						if ($(e.target).closest('.redactor-editor, .redactor-toolbar, .redactor-dropdown').size() !== 0)
-						{
-							return;
-						}
+					// sync code
+					this.code.html = this.code.cleaned(this.core.editor().html());
 
-						this.utils.disableSelectAll();
-						if (!this.build.blured && $.isFunction(this.opts.blurCallback))
-						{
-							this.core.setCallback('blur', e);
-						}
+					// init callback
+					this.core.callback('init');
+					this.core.callback('initToEdit');
 
-						this.build.focused = false;
-						this.build.blured = true;
+					// get images & files list
+					this.storage.observe();
 
-					}, this));
+					// started
+					this.start = false;
 
 				},
 				setHelpers: function()
 				{
 					// linkify
-					if (this.linkify.isEnabled())
+					if (this.opts.linkify)
 					{
 						this.linkify.format();
 					}
 
 					// placeholder
-					this.placeholder.enable();
+					this.placeholder.init();
 
 					// focus
-					if (this.opts.focus) setTimeout(this.focus.setStart, 100);
-					if (this.opts.focusEnd) setTimeout(this.focus.setEnd, 100);
+					if (this.opts.focus)
+					{
+						setTimeout(this.focus.start, 100);
+					}
+					else if (this.opts.focusEnd)
+					{
+						setTimeout(this.focus.end, 100);
+					}
 
 				},
+				disableBrowsersEditing: function()
+				{
+					try {
+						// FF fix
+						document.execCommand('enableObjectResizing', false, false);
+						document.execCommand('enableInlineTableEditing', false, false);
+						// IE prevent converting links
+						document.execCommand("AutoUrlDetect", false, false);
+					} catch (e) {}
+				},
 				plugins: function()
 				{
-					if (!this.opts.plugins) return;
+					if (!this.opts.plugins)
+					{
+						return;
+					}
 
 					$.each(this.opts.plugins, $.proxy(function(i, s)
 					{
@@ -1518,6 +1527,31 @@
 							this[s][methods[z]] = this[s][methods[z]].bind(this);
 						}
 
+						// append lang
+						if (typeof this[s].langs !== 'undefined')
+						{
+							var lang = {};
+							if (typeof this[s].langs[this.opts.lang] !== 'undefined')
+							{
+								lang = this[s].langs[this.opts.lang];
+							}
+							else if (typeof this[s].langs[this.opts.lang] === 'undefined' && typeof this[s].langs.en !== 'undefined')
+							{
+								lang = this[s].langs.en;
+							}
+
+							// extend
+							var self = this;
+							$.each(lang, function(i,s)
+							{
+								if (typeof self.opts.curLang[i] === 'undefined')
+								{
+									self.opts.curLang[i] = s;
+								}
+							});
+						}
+
+						// init
 						if ($.isFunction(this[s].init))
 						{
 							this[s].init();
@@ -1526,142 +1560,656 @@
 
 					}, this));
 
-				},
-				disableMozillaEditing: function()
-				{
-					if (!this.utils.browser('mozilla')) return;
-
-					// FF fix
-					try {
-						document.execCommand('enableObjectResizing', false, false);
-						document.execCommand('enableInlineTableEditing', false, false);
-					} catch (e) {}
-				},
-				disableIeLinks: function()
-				{
-					if (!this.utils.browser('msie')) return;
-
-					// IE prevent converting links
-					document.execCommand("AutoUrlDetect", false, false);
 				}
 			};
 		},
+
+		// =button
 		button: function()
 		{
 			return {
-				build: function(btnName, btnObject)
+				toolbar: function()
 				{
-					var $button = $('<a href="#" class="re-icon re-' + btnName + '" rel="' + btnName + '" />').attr({'role': 'button', 'aria-label': btnObject.title, 'tabindex': '-1'});
-
-					// click
-					if (btnObject.func || btnObject.command || btnObject.dropdown)
-					{
-						this.button.setEvent($button, btnName, btnObject);
-					}
-
-					// dropdown
-					if (btnObject.dropdown)
-					{
-						$button.addClass('redactor-toolbar-link-dropdown').attr('aria-haspopup', true);
-
-						var $dropdown = $('<div class="redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-box-' + btnName + '" style="display: none;">');
-						$button.data('dropdown', $dropdown);
-						this.dropdown.build(btnName, $dropdown, btnObject.dropdown);
-					}
-
-					// tooltip
-					if (this.utils.isDesktop())
-					{
-						this.button.createTooltip($button, btnName, btnObject.title);
-					}
-
-					return $button;
+					return (typeof this.button.$toolbar === 'undefined' || !this.button.$toolbar) ? this.$toolbar : this.button.$toolbar;
 				},
-				setEvent: function($button, btnName, btnObject)
+				init: function()
 				{
-					$button.on('touchstart click', $.proxy(function(e)
-					{
-						if ($button.hasClass('redactor-button-disabled')) return false;
-
-						var type = 'func';
-						var callback = btnObject.func;
-
-						if (btnObject.command)
+					return {
+						format:
 						{
-							type = 'command';
-							callback = btnObject.command;
-						}
-						else if (btnObject.dropdown)
+							title: this.lang.get('format'),
+							icon: true,
+							dropdown:
+							{
+								p:
+								{
+									title: this.lang.get('paragraph'),
+									func: 'block.format'
+								},
+								blockquote:
+								{
+									title: this.lang.get('quote'),
+									func: 'block.format'
+								},
+								pre:
+								{
+									title: this.lang.get('code'),
+									func: 'block.format'
+								},
+								h1:
+								{
+									title: this.lang.get('heading1'),
+									func: 'block.format'
+								},
+								h2:
+								{
+									title: this.lang.get('heading2'),
+									func: 'block.format'
+								},
+								h3:
+								{
+									title: this.lang.get('heading3'),
+									func: 'block.format'
+								},
+								h4:
+								{
+									title: this.lang.get('heading4'),
+									func: 'block.format'
+								},
+								h5:
+								{
+									title: this.lang.get('heading5'),
+									func: 'block.format'
+								},
+								h6:
+								{
+									title: this.lang.get('heading6'),
+									func: 'block.format'
+								}
+							}
+						},
+						bold:
 						{
-							type = 'dropdown';
-							callback = false;
-						}
-
-						this.button.onClick(e, btnName, type, callback);
-
-					}, this));
-				},
-				createTooltip: function($button, name, title)
-				{
-					var $tooltip = $('<span>').addClass('redactor-toolbar-tooltip redactor-toolbar-tooltip-' + this.uuid + ' redactor-toolbar-tooltip-' + name).hide().html(title);
-					$tooltip.appendTo('body');
-
-					$button.on('mouseover', function()
-					{
-						if ($(this).hasClass('redactor-button-disabled'))
+							title: this.lang.get('bold-abbr'),
+							icon: true,
+							label: this.lang.get('bold'),
+							func: 'inline.format'
+						},
+						italic:
 						{
-							return;
-						}
-
-						var pos = $button.offset();
-
-						$tooltip.css({
-							top: (pos.top + $button.innerHeight()) + 'px',
-							left: (pos.left + $button.innerWidth()/2 - $tooltip.innerWidth()/2) + 'px'
-						});
-						$tooltip.show();
-
-					});
-
-					$button.on('mouseout', function()
-					{
-						$tooltip.hide();
-					});
-
-				},
-				onClick: function(e, btnName, type, callback)
+							title: this.lang.get('italic-abbr'),
+							icon: true,
+							label: this.lang.get('italic'),
+							func: 'inline.format'
+						},
+						deleted:
+						{
+							title: this.lang.get('deleted-abbr'),
+							icon: true,
+							label: this.lang.get('deleted'),
+							func: 'inline.format'
+						},
+						underline:
+						{
+							title: this.lang.get('underline-abbr'),
+							icon: true,
+							label: this.lang.get('underline'),
+							func: 'inline.format'
+						},
+						lists:
+						{
+							title: this.lang.get('lists'),
+							icon: true,
+							dropdown:
+							{
+								unorderedlist:
+								{
+									title: '&bull; ' + this.lang.get('unorderedlist'),
+									func: 'list.toggle'
+								},
+								orderedlist:
+								{
+									title: '1. ' + this.lang.get('orderedlist'),
+									func: 'list.toggle'
+								},
+								outdent:
+								{
+									title: '< ' + this.lang.get('outdent'),
+									func: 'indent.decrease',
+									observe: {
+										element: 'li',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true
+											}
+										}
+									}
+								},
+								indent:
+								{
+									title: '> ' + this.lang.get('indent'),
+									func: 'indent.increase',
+									observe: {
+										element: 'li',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true
+											}
+										}
+									}
+								}
+							}
+						},
+						ul:
+						{
+							title: '&bull; ' + this.lang.get('bulletslist'),
+							icon: true,
+							func: 'list.toggle'
+						},
+						ol:
+						{
+							title: '1. ' + this.lang.get('numberslist'),
+							icon: true,
+							func: 'list.toggle'
+						},
+						outdent:
+						{
+							title: this.lang.get('outdent'),
+							icon: true,
+							func: 'indent.decrease'
+						},
+						indent:
+						{
+							title: this.lang.get('indent'),
+							icon: true,
+							func: 'indent.increase'
+						},
+						image:
+						{
+							title: this.lang.get('image'),
+							icon: true,
+							func: 'image.show'
+						},
+						file:
+						{
+							title: this.lang.get('file'),
+							icon: true,
+							func: 'file.show'
+						},
+						link:
+						{
+							title: this.lang.get('link'),
+							icon: true,
+							dropdown:
+							{
+								link:
+								{
+									title: this.lang.get('link-insert'),
+									func: 'link.show',
+									observe: {
+										element: 'a',
+										'in': {
+											title: this.lang.get('link-edit')
+										},
+										out: {
+											title: this.lang.get('link-insert')
+										}
+									}
+								},
+								unlink:
+								{
+									title: this.lang.get('unlink'),
+									func: 'link.unlink',
+									observe: {
+										element: 'a',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true
+											}
+										}
+									}
+								}
+							}
+						},
+						horizontalrule:
+						{
+							title: this.lang.get('horizontalrule'),
+							icon: true,
+							func: 'line.insert'
+						}
+					};
+				},
+				setFormatting: function()
 				{
-					this.button.caretOffset = this.caret.getOffset();
+					$.each(this.toolbarsButtons.format.dropdown, $.proxy(function (i, s)
+					{
+						if ($.inArray(i, this.opts.formatting) === -1)
+						{
+							delete this.toolbarsButtons.format.dropdown[i];
+						}
 
-					e.preventDefault();
+					}, this));
+
+				},
+				hideButtons: function()
+				{
+					if (this.opts.buttonsHide.length !== 0)
+					{
+						this.button.hideButtonsSlicer(this.opts.buttonsHide);
+					}
+				},
+				hideButtonsOnMobile: function()
+				{
+					if (this.detect.isMobile() && this.opts.buttonsHideOnMobile.length !== 0)
+					{
+						this.button.hideButtonsSlicer(this.opts.buttonsHideOnMobile);
+					}
+				},
+				hideButtonsSlicer: function(buttons)
+				{
+					$.each(buttons, $.proxy(function(i, s)
+					{
+						var index = this.opts.buttons.indexOf(s);
+						if (index !== -1)
+						{
+						    this.opts.buttons.splice(index, 1);
+						}
 
-					$(document).find('.redactor-toolbar-tooltip').hide();
+					}, this));
+				},
+				load: function($toolbar)
+				{
+					this.button.buttons = [];
 
-					if (this.utils.browser('msie')) e.returnValue = false;
+					$.each(this.opts.buttons, $.proxy(function(i, btnName)
+					{
+						if (!this.toolbarsButtons[btnName]
+							|| (btnName === 'file' && !this.file.is())
+							|| (btnName === 'image' && !this.image.is()))
+						{
+							return;
+						}
+
+						$toolbar.append($('<li>').append(this.button.build(btnName, this.toolbarsButtons[btnName])));
+
+					}, this));
+				},
+				buildButtonTooltip: function($btn, title)
+				{
+    				if (this.opts.air || this.detect.isMobile())
+    				{
+        				return;
+    				}
+
+                    var $tooltip = $('<span>');
+				    $tooltip.addClass('re-button-tooltip');
+				    $tooltip.html(title);
+
+                    var self = this;
+                    var $toolbar = this.button.toolbar();
+                    var $box = $toolbar.closest('.redactor-toolbar-box');
+                    $box = ($box.length === 0) ? $toolbar : $box;
+                    $box.prepend($tooltip);
+                    $btn.on('mouseover', function()
+                    {
+                        if ($(this).hasClass('redactor-button-disabled'))
+                        {
+                            return;
+                        }
+
+                        var pos = ($toolbar.hasClass('toolbar-fixed-box')) ? $btn.offset() : $btn.position();
+                        pos = (self.opts.toolbarFixedTarget !== document) ? $btn.position() : pos;
+                        var top = ($toolbar.hasClass('toolbar-fixed-box')) ? $btn.position().top : pos.top;
+                        var height = $btn.innerHeight();
+                        var width = $btn.innerWidth();
+                        var posBox = ($toolbar.hasClass('toolbar-fixed-box')) ? 'fixed' : 'absolute';
+                        posBox = (self.opts.toolbarFixedTarget !== document) ? 'absolute' : posBox;
+                        var scrollFix = (self.opts.toolbarFixedTarget !== document) ? $toolbar.position().top : 0;
+
+                        $tooltip.show();
+                        $tooltip.css({
+                            top: (top + height + scrollFix) + 'px',
+                            left: (pos.left + width/2 - $tooltip.innerWidth()/2) + 'px',
+                            position: posBox
+                        });
+
+                    }).on('mouseout', function()
+                    {
+                        $tooltip.hide();
+                    });
+				},
+				build: function(btnName, btnObject)
+				{
+					if (this.opts.toolbar === false)
+					{
+						return;
+					}
 
-					if (type == 'command') this.inline.format(callback);
-					else if (type == 'dropdown') this.dropdown.show(e, btnName);
-					else this.button.onClickCallback(e, callback, btnName);
+                    var title = (typeof btnObject.label !== 'undefined') ? btnObject.label : btnObject.title;
+					var $button = $('<a href="javascript:void(null);" alt="' + title + '" rel="' + btnName + '" />')
+
+                    $button.addClass('re-button re-' + btnName);
+					$button.attr({ 'role': 'button', 'aria-label': title, 'tabindex': '-1' });
+
+                    if (typeof btnObject.icon !== 'undefined' && !this.opts.buttonsTextLabeled)
+                    {
+    					var $icon = $('<i>');
+					    $icon.addClass('re-icon-' + btnName);
+
+					    $button.append($icon);
+					    $button.addClass('re-button-icon');
+
+                        this.button.buildButtonTooltip($button, title);
+					}
+					else
+					{
+    					$button.html(btnObject.title);
+					}
+
+					// click
+					if (btnObject.func || btnObject.command || btnObject.dropdown)
+					{
+						this.button.setEvent($button, btnName, btnObject);
+					}
+
+					// dropdown
+					if (btnObject.dropdown)
+					{
+						$button.addClass('redactor-toolbar-link-dropdown').attr('aria-haspopup', true);
+
+						var $dropdown = $('<ul class="redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-box-' + btnName + '" style="display: none;">');
+						$button.data('dropdown', $dropdown);
+						this.dropdown.build(btnName, $dropdown, btnObject.dropdown);
+					}
+
+					this.button.buttons.push($button);
+
+					return $button;
+				},
+				getButtons: function()
+				{
+					return this.button.toolbar().find('a.re-button');
 				},
-				onClickCallback: function(e, callback, btnName)
+				getButtonsKeys: function()
+				{
+					return this.button.buttons;
+				},
+				setEvent: function($button, btnName, btnObject)
+				{
+					$button.on('mousedown', $.proxy(function(e)
+					{
+						e.preventDefault();
+
+						if ($button.hasClass('redactor-button-disabled'))
+						{
+							return false;
+						}
+
+						var type = 'func';
+						var callback = btnObject.func;
+
+						if (btnObject.command)
+						{
+							type = 'command';
+							callback = btnObject.command;
+						}
+						else if (btnObject.dropdown)
+						{
+							type = 'dropdown';
+							callback = false;
+						}
+
+						this.button.toggle(e, btnName, type, callback);
+
+						return false;
+
+					}, this));
+				},
+				toggle: function(e, btnName, type, callback, args)
+				{
+
+					if (this.detect.isIe() || !this.detect.isDesktop())
+					{
+						this.utils.freezeScroll();
+						e.returnValue = false;
+					}
+
+					if (type === 'command')
+					{
+						this.inline.format(callback);
+					}
+					else if (type === 'dropdown')
+					{
+						this.dropdown.show(e, btnName);
+					}
+					else
+					{
+						this.button.clickCallback(e, callback, btnName, args);
+					}
+
+					if (type !== 'dropdown')
+					{
+						this.dropdown.hideAll(false);
+					}
+
+					if (this.opts.air && type !== 'dropdown')
+					{
+						this.air.hide(e);
+					}
+
+					if (this.detect.isIe() || !this.detect.isDesktop())
+					{
+						this.utils.unfreezeScroll();
+					}
+				},
+				clickCallback: function(e, callback, btnName, args)
 				{
 					var func;
 
-					if ($.isFunction(callback)) callback.call(this, btnName);
-					else if (callback.search(/\./) != '-1')
+					args = (typeof args === 'undefined') ? btnName : args;
+
+					if ($.isFunction(callback))
+					{
+						callback.call(this, btnName);
+					}
+					else if (callback.search(/\./) !== '-1')
 					{
 						func = callback.split('.');
-						if (typeof this[func[0]] == 'undefined') return;
+						if (typeof this[func[0]] === 'undefined')
+						{
+							return;
+						}
 
-						this[func[0]][func[1]](btnName);
+						if (typeof args === 'object')
+						{
+							this[func[0]][func[1]].apply(this, args);
+						}
+						else
+						{
+							this[func[0]][func[1]].call(this, args);
+						}
+					}
+					else
+					{
+
+						if (typeof args === 'object')
+						{
+							this[callback].apply(this, args);
+						}
+						else
+						{
+							this[callback].call(this, args);
+						}
 					}
-					else this[callback](btnName);
 
 					this.observe.buttons(e, btnName);
+
+				},
+				all: function()
+				{
+					return this.button.buttons;
 				},
 				get: function(key)
 				{
-					return this.$toolbar.find('a.re-' + key);
+					if (this.opts.toolbar === false)
+					{
+						return;
+					}
+
+					return this.button.toolbar().find('a.re-' + key);
+				},
+				set: function(key, title)
+				{
+					if (this.opts.toolbar === false)
+					{
+						return;
+					}
+
+					var $btn = this.button.toolbar().find('a.re-' + key);
+
+					$btn.html(title).attr('aria-label', title);
+
+					return $btn;
+				},
+				add: function(key, title)
+				{
+					if (this.button.isAdded(key) !== true)
+					{
+						return $();
+					}
+
+					var btn = this.button.build(key, { title: title });
+
+					this.button.toolbar().append($('<li>').append(btn));
+
+					return btn;
+				},
+				addFirst: function(key, title)
+				{
+					if (this.button.isAdded(key) !== true)
+					{
+						return $();
+					}
+
+					var btn = this.button.build(key, { title: title });
+
+					this.button.toolbar().prepend($('<li>').append(btn));
+
+					return btn;
+				},
+				addAfter: function(afterkey, key, title)
+				{
+					if (this.button.isAdded(key) !== true)
+					{
+						return $();
+					}
+
+					var btn = this.button.build(key, { title: title });
+					var $btn = this.button.get(afterkey);
+
+					if ($btn.length !== 0)
+					{
+						$btn.parent().after($('<li>').append(btn));
+					}
+					else
+					{
+						this.button.toolbar().append($('<li>').append(btn));
+					}
+
+					return btn;
+				},
+				addBefore: function(beforekey, key, title)
+				{
+					if (this.button.isAdded(key) !== true)
+					{
+						return $();
+					}
+
+					var btn = this.button.build(key, { title: title });
+					var $btn = this.button.get(beforekey);
+
+					if ($btn.length !== 0)
+					{
+						$btn.parent().before($('<li>').append(btn));
+					}
+					else
+					{
+						this.button.toolbar().append($('<li>').append(btn));
+					}
+
+					return btn;
+				},
+				isAdded: function(key)
+				{
+	                var index = this.opts.buttonsHideOnMobile.indexOf(key);
+                    if (this.opts.toolbar === false || (index !== -1 && this.detect.isMobile()))
+                    {
+					    return false;
+					}
+
+					return true;
+				},
+				setIcon: function($btn, icon)
+				{
+    				if (!this.opts.buttonsTextLabeled)
+    				{
+    					$btn.html(icon).addClass('re-button-icon');
+					    this.button.buildButtonTooltip($btn, $btn.attr('alt'));
+					}
+				},
+				changeIcon: function(key, newIconClass)
+				{
+                    var $btn = this.button.get(key);
+                    if ($btn.length !== 0)
+					{
+    					$btn.find('i').removeAttr('class').addClass('re-icon-' + newIconClass);
+    				}
+				},
+				addCallback: function($btn, callback)
+				{
+					if (typeof $btn === 'undefined' || this.opts.toolbar === false)
+					{
+						return;
+					}
+
+					var type = (callback === 'dropdown') ? 'dropdown' : 'func';
+					var key = $btn.attr('rel');
+					$btn.on('mousedown', $.proxy(function(e)
+					{
+						if ($btn.hasClass('redactor-button-disabled'))
+						{
+							return false;
+						}
+
+						this.button.toggle(e, key, type, callback);
+
+					}, this));
+				},
+				addDropdown: function($btn, dropdown)
+				{
+					if (this.opts.toolbar === false)
+					{
+						return;
+					}
+
+					$btn.addClass('redactor-toolbar-link-dropdown').attr('aria-haspopup', true);
+
+					var key = $btn.attr('rel');
+					this.button.addCallback($btn, 'dropdown');
+
+					var $dropdown = $('<div class="redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-box-' + key + '" style="display: none;">');
+					$btn.data('dropdown', $dropdown);
+
+					// build dropdown
+					if (dropdown)
+					{
+						this.dropdown.build(key, $dropdown, dropdown);
+					}
+
+					return $dropdown;
 				},
 				setActive: function(key)
 				{
@@ -1673,2158 +2221,2579 @@
 				},
 				setInactiveAll: function(key)
 				{
-					if (typeof key === 'undefined')
+					var $btns = this.button.toolbar().find('a.re-button');
+
+					if (typeof key !== 'undefined')
 					{
-						this.$toolbar.find('a.re-icon').removeClass('redactor-act');
+						$btns = $btns.not('.re-' + key);
 					}
-					else
+
+					$btns.removeClass('redactor-act');
+				},
+				disable: function(key)
+				{
+					this.button.get(key).addClass('redactor-button-disabled');
+				},
+				enable: function(key)
+				{
+					this.button.get(key).removeClass('redactor-button-disabled');
+				},
+				disableAll: function(key)
+				{
+					var $btns = this.button.toolbar().find('a.re-button');
+					if (typeof key !== 'undefined')
 					{
-						this.$toolbar.find('a.re-icon').not('.re-' + key).removeClass('redactor-act');
+						$btns = $btns.not('.re-' + key);
 					}
+
+					$btns.addClass('redactor-button-disabled');
 				},
-				setActiveInVisual: function()
+				enableAll: function()
 				{
-					this.$toolbar.find('a.re-icon').not('a.re-html, a.re-fullscreen').removeClass('redactor-button-disabled');
+					this.button.toolbar().find('a.re-button').removeClass('redactor-button-disabled');
 				},
-				setInactiveInCode: function()
+				remove: function(key)
+				{
+					this.button.get(key).remove();
+				}
+			};
+		},
+
+		// =caret
+		caret: function()
+		{
+			return {
+				set: function(node1, node2, end)
 				{
-					this.$toolbar.find('a.re-icon').not('a.re-html, a.re-fullscreen').addClass('redactor-button-disabled');
+                    var cs = this.core.editor().scrollTop();
+                    this.core.editor().focus();
+                    this.core.editor().scrollTop(cs);
+
+					end = (typeof end === 'undefined') ? 0 : 1;
+
+					node1 = node1[0] || node1;
+					node2 = node2[0] || node2;
+
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+
+					try
+					{
+						range.setStart(node1, 0);
+						range.setEnd(node2, end);
+					}
+					catch (e) {}
+
+					this.selection.update(sel, range);
 				},
-				changeIcon: function(key, classname)
+				prepare: function(node)
 				{
-					this.button.get(key).addClass('re-' + classname);
+					// firefox focus
+					if (this.detect.isFirefox() && typeof this.start !== 'undefined')
+					{
+						this.core.editor().focus();
+					}
+
+					return node[0] || node;
 				},
-				removeIcon: function(key, classname)
+				start: function(node)
 				{
-					this.button.get(key).removeClass('re-' + classname);
+					var sel, range;
+					node = this.caret.prepare(node);
+
+					if (!node)
+					{
+						return;
+					}
+
+					if (node.tagName === 'BR')
+					{
+						return this.caret.before(node);
+					}
+
+					var $first = $(node).children().first();
+
+					// empty or inline tag
+					var inline = this.utils.isInlineTag(node.tagName);
+					if (node.innerHTML === '' || inline)
+					{
+                        this.caret.setStartEmptyOrInline(node, inline);
+					}
+					// empty inline inside
+                    else if ($first && $first.length !== 0 && this.utils.isInlineTag($first[0].tagName) && $first.text() === '')
+                    {
+                       this.caret.setStartEmptyOrInline($first[0], true);
+                    }
+                    // block tag
+					else
+					{
+                        sel = window.getSelection();
+                        sel.removeAllRanges();
+
+                        range = document.createRange();
+                        range.selectNodeContents(node);
+                        range.collapse(true);
+                        sel.addRange(range);
+					}
+
+
 				},
-				setAwesome: function(key, name)
+				setStartEmptyOrInline: function(node, inline)
 				{
-					var $button = this.button.get(key);
-					$button.removeClass('redactor-btn-image').addClass('fa-redactor-btn');
-					$button.html('<i class="fa ' + name + '"></i>');
+                    var sel = window.getSelection();
+				    var range = document.createRange();
+					var textNode = document.createTextNode('\u200B');
+
+					range.setStart(node, 0);
+					range.insertNode(textNode);
+					range.setStartAfter(textNode);
+					range.collapse(true);
+
+					sel.removeAllRanges();
+					sel.addRange(range);
+
+					// remove invisible text node
+					if (!inline)
+					{
+						this.core.editor().on('keydown.redactor-remove-textnode', function()
+						{
+							$(textNode).remove();
+							$(this).off('keydown.redactor-remove-textnode');
+						});
+					}
 				},
-				addCallback: function($btn, callback)
+				end: function(node)
 				{
-					if ($btn == "buffer") return;
+					var sel, range;
+					node = this.caret.prepare(node);
 
-					var type = (callback == 'dropdown') ? 'dropdown' : 'func';
-					var key = $btn.attr('rel');
-					$btn.on('touchstart click', $.proxy(function(e)
+					if (!node)
+					{
+						return;
+					}
+
+					// empty node
+					if (node.tagName !== 'BR' && node.innerHTML === '')
 					{
-						if ($btn.hasClass('redactor-button-disabled')) return false;
-						this.button.onClick(e, key, type, callback);
+						return this.caret.start(node);
+					}
 
-					}, this));
+					// br
+					if (node.tagName === 'BR')
+					{
+						var space = document.createElement('span');
+						space.className = 'redactor-invisible-space';
+						space.innerHTML = '&#x200b;';
+
+						$(node).after(space);
+
+						sel = window.getSelection();
+						sel.removeAllRanges();
+
+						range = document.createRange();
+
+						range.setStartBefore(space);
+						range.setEndBefore(space);
+						sel.addRange(range);
+
+						$(space).replaceWith(function()
+						{
+							return $(this).contents();
+						});
+
+						return;
+					}
+
+					if (node.lastChild && node.lastChild.nodeType === 1)
+					{
+						return this.caret.after(node.lastChild);
+					}
+
+                    var sel = window.getSelection();
+                    if (sel.getRangeAt || sel.rangeCount)
+                    {
+                        try {
+                            var range = sel.getRangeAt(0);
+                            range.selectNodeContents(node);
+                            range.collapse(false);
+
+                            sel.removeAllRanges();
+                            sel.addRange(range);
+                        }
+                        catch(e) {}
+                    }
 				},
-				addDropdown: function($btn, dropdown)
+				after: function(node)
 				{
-					$btn.addClass('redactor-toolbar-link-dropdown').attr('aria-haspopup', true);
+					var sel, range;
+					node = this.caret.prepare(node);
+
+
+					if (!node)
+					{
+						return;
+					}
+
+					if (node.tagName === 'BR')
+					{
+						return this.caret.end(node);
+					}
+
+					// block tag
+					if (this.utils.isBlockTag(node.tagName))
+					{
+						var next = this.caret.next(node);
 
-					var key = $btn.attr('rel');
-					this.button.addCallback($btn, 'dropdown');
+						if (typeof next === 'undefined')
+						{
+							this.caret.end(node);
+						}
+						else
+						{
+							// table
+							if (next.tagName === 'TABLE')
+							{
+								next = $(next).find('th, td').first()[0];
+							}
+							// list
+							else if (next.tagName === 'UL' || next.tagName === 'OL')
+							{
+								next = $(next).find('li').first()[0];
+							}
 
-					var $dropdown = $('<div class="redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-box-' + key + '" style="display: none;">');
-					$btn.data('dropdown', $dropdown);
+							this.caret.start(next);
+						}
 
-					// build dropdown
-					if (dropdown) this.dropdown.build(key, $dropdown, dropdown);
+						return;
+					}
 
-					return $dropdown;
-				},
-				add: function(key, title)
-				{
-					if (!this.opts.toolbar) return;
+					// inline tag
+					var textNode = document.createTextNode('\u200B');
 
-					if (this.button.isMobileUndoRedo(key)) return "buffer";
+					sel = window.getSelection();
+					sel.removeAllRanges();
 
-					var btn = this.button.build(key, { title: title });
-					btn.addClass('redactor-btn-image');
+					range = document.createRange();
+					range.setStartAfter(node);
+					range.insertNode(textNode);
+					range.setStartAfter(textNode);
+					range.collapse(true);
 
-					this.$toolbar.append($('<li>').append(btn));
+					sel.addRange(range);
 
-					return btn;
 				},
-				addFirst: function(key, title)
+				before: function(node)
 				{
-					if (!this.opts.toolbar) return;
-
-					if (this.button.isMobileUndoRedo(key)) return "buffer";
+					var sel, range;
+					node = this.caret.prepare(node);
 
-					var btn = this.button.build(key, { title: title });
-					btn.addClass('redactor-btn-image');
-					this.$toolbar.prepend($('<li>').append(btn));
 
-					return btn;
-				},
-				addAfter: function(afterkey, key, title)
-				{
-					if (!this.opts.toolbar) return;
+					if (!node)
+					{
+						return;
+					}
 
-					if (this.button.isMobileUndoRedo(key)) return "buffer";
+					// block tag
+					if (this.utils.isBlockTag(node.tagName))
+					{
+						var prev = this.caret.prev(node);
 
-					var btn = this.button.build(key, { title: title });
-					btn.addClass('redactor-btn-image');
-					var $btn = this.button.get(afterkey);
+						if (typeof prev === 'undefined')
+						{
+							this.caret.start(node);
+						}
+						else
+						{
+							// table
+							if (prev.tagName === 'TABLE')
+							{
+								prev = $(prev).find('th, td').last()[0];
+							}
+							// list
+							else if (prev.tagName === 'UL' || prev.tagName === 'OL')
+							{
+								prev = $(prev).find('li').last()[0];
+							}
 
-					if ($btn.length !== 0) $btn.parent().after($('<li>').append(btn));
-					else this.$toolbar.append($('<li>').append(btn));
+							this.caret.end(prev);
+						}
 
-					return btn;
-				},
-				addBefore: function(beforekey, key, title)
-				{
-					if (!this.opts.toolbar) return;
+						return;
+					}
 
-					if (this.button.isMobileUndoRedo(key)) return "buffer";
+					// inline tag
+					sel = window.getSelection();
+					sel.removeAllRanges();
 
-					var btn = this.button.build(key, { title: title });
-					btn.addClass('redactor-btn-image');
-					var $btn = this.button.get(beforekey);
+					range = document.createRange();
 
-					if ($btn.length !== 0) $btn.parent().before($('<li>').append(btn));
-					else this.$toolbar.append($('<li>').append(btn));
+			        range.setStartBefore(node);
+			        range.collapse(true);
 
-					return btn;
+			        sel.addRange(range);
 				},
-				remove: function(key)
+				next: function(node)
 				{
-					this.button.get(key).remove();
+					var $next = $(node).next();
+					if ($next.hasClass('redactor-script-tag, redactor-selection-marker'))
+					{
+						return $next.next()[0];
+					}
+					else
+					{
+						return $next[0];
+					}
 				},
-				isMobileUndoRedo: function(key)
+				prev: function(node)
 				{
-					return (key == "undo" || key == "redo") && !this.utils.isDesktop();
+					var $prev = $(node).prev();
+					if ($prev.hasClass('redactor-script-tag, redactor-selection-marker'))
+					{
+						return $prev.prev()[0];
+					}
+					else
+					{
+						return $prev[0];
+					}
+				},
+
+				// #backward
+				offset: function(node)
+				{
+					return this.offset.get(node);
 				}
+
 			};
 		},
-		caret: function()
+
+		// =clean
+		clean: function()
 		{
 			return {
-				setStart: function(node)
+				onSet: function(html)
 				{
-					// inline tag
-					if (!this.utils.isBlock(node))
-					{
-						var space = this.utils.createSpaceElement();
+					html = this.clean.savePreCode(html);
+					html = this.clean.saveFormTags(html);
 
-						$(node).prepend(space);
-						this.caret.setEnd(space);
-					}
-					else
+					// convert script tag
+					if (this.opts.script)
 					{
-						this.caret.set(node, 0, node, 0);
+						html = html.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi, '<pre class="redactor-script-tag" $1>$2</pre>');
 					}
-				},
-				setEnd: function(node)
-				{
-					node = node[0] || node;
-					if (node.lastChild.nodeType == 1)
+
+					// converting entity
+					html = html.replace(/\$/g, '&#36;');
+					html = html.replace(/&amp;/g, '&');
+
+					// replace special characters in links
+					html = html.replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi, '<a href="$1&reg$2">');
+
+					// save markers
+					html = html.replace(/<span id="selection-marker-1"(.*?[^>]?)>​<\/span>/gi, '###marker1###');
+					html = html.replace(/<span id="selection-marker-2"(.*?[^>]?)>​<\/span>/gi, '###marker2###');
+
+					// replace tags
+					var self = this;
+					var $div = $("<div/>").html($.parseHTML(html, document, true));
+
+					var replacement = this.opts.replaceTags;
+					if (replacement)
 					{
-						return this.caret.setAfter(node.lastChild);
+                        var keys = Object.keys(this.opts.replaceTags);
+    					$div.find(keys.join(',')).each(function(i,s)
+    					{
+    						self.utils.replaceToTag(s, replacement[s.tagName.toLowerCase()]);
+    					});
 					}
 
-					this.caret.set(node, 1, node, 1);
+					// add span marker
+					$div.find('span, a').attr('data-redactor-span', true);
 
-				},
-				set: function(orgn, orgo, focn, foco)
-				{
-					// focus
-					// disabled in 10.0.7
-					// if (!this.utils.browser('msie')) this.$editor.focus();
+					// add style cache
+					$div.find(this.opts.inlineTags.join(',')).each(function()
+					{
+    					// add style cache
+    					var $el = $(this);
+
+    					if ($el.attr('style'))
+    					{
+        					$el.attr('data-redactor-style-cache', $el.attr('style'));
+    					}
+					});
 
-					orgn = orgn[0] || orgn;
-					focn = focn[0] || focn;
+					html = $div.html();
 
-					if (this.utils.isBlockTag(orgn.tagName) && orgn.innerHTML === '')
+					// remove tags
+					var tags = ['font', 'html', 'head', 'link', 'body', 'meta', 'applet'];
+					if (!this.opts.script)
 					{
-						orgn.innerHTML = this.opts.invisibleSpace;
+						tags.push('script');
 					}
 
-					if (orgn.tagName == 'BR' && this.opts.linebreaks === false)
+					html = this.clean.stripTags(html, tags);
+
+					// remove html comments
+					if (this.opts.removeComments)
 					{
-						var parent = $(this.opts.emptyHtml)[0];
-						$(orgn).replaceWith(parent);
-						orgn = parent;
-						focn = orgn;
+					    html = html.replace(/<!--[\s\S]*?-->/gi, '');
 					}
 
-					this.selection.get();
+					// paragraphize
+					html = this.paragraphize.load(html);
 
-					try
+					// restore markers
+					html = html.replace('###marker1###', '<span id="selection-marker-1" class="redactor-selection-marker">​</span>');
+					html = html.replace('###marker2###', '<span id="selection-marker-2" class="redactor-selection-marker">​</span>');
+
+					// empty
+					if (html.search(/^(||\s||<br\s?\/?>||&nbsp;)$/i) !== -1)
 					{
-						this.range.setStart(orgn, orgo);
-						this.range.setEnd(focn, foco);
+						return this.opts.emptyHtml;
 					}
-					catch (e) {}
 
-					this.selection.addRange();
+					return html;
 				},
-				setAfter: function(node)
+				onGet: function(html)
 				{
-					try
+					return this.clean.onSync(html);
+				},
+				onSync: function(html)
+				{
+					// remove invisible spaces
+					html = html.replace(/\u200B/g, '');
+					html = html.replace(/&#x200b;/gi, '');
+					//html = html.replace(/&nbsp;&nbsp;/gi, '&nbsp;');
+
+					if (html.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i) !== -1)
 					{
-						var tag = $(node)[0].tagName;
+						return '';
+					}
 
-						// inline tag
-						if (tag != 'BR' && !this.utils.isBlock(node))
-						{
-							var space = this.utils.createSpaceElement();
+					// remove image resize
+					html = html.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi, '$3<img$4>');
+					html = html.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi, '');
+					html = html.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi, '');
+					html = html.replace(/<img(.*?)style="(.*?)opacity: 0\.5;(.*?)"(.*?)>/gi, '<img$1style="$2$3"$4>');
 
-							$(node).after(space);
-							this.caret.setEnd(space);
-						}
-						else
-						{
-							if (tag != 'BR' && this.utils.browser('msie'))
-							{
-								this.caret.setStart($(node).next());
-							}
-							else
-							{
-								this.caret.setAfterOrBefore(node, 'after');
-							}
-						}
-					}
-					catch (e)
+					var $div = $("<div/>").html($.parseHTML(html, document, true));
+
+					// remove empty atributes
+					$div.find('*[style=""]').removeAttr('style');
+					$div.find('*[class=""]').removeAttr('class');
+					$div.find('*[rel=""]').removeAttr('rel');
+					$div.find('*[data-image=""]').removeAttr('data-image');
+					$div.find('*[alt=""]').removeAttr('alt');
+					$div.find('*[title=""]').removeAttr('title');
+					$div.find('*[data-redactor-style-cache]').removeAttr('data-redactor-style-cache');
+
+					// remove markers
+					$div.find('.redactor-invisible-space, .redactor-unlink').each(function()
 					{
-						var space = this.utils.createSpaceElement();
-						$(node).after(space);
-						this.caret.setEnd(space);
-					}
-				},
-				setBefore: function(node)
-				{
-					// block tag
-					if (this.utils.isBlock(node))
+						$(this).contents().unwrap();
+					});
+
+					// remove span without attributes & span marker
+				    $div.find('span, a').removeAttr('data-redactor-span data-redactor-style-cache').each(function()
 					{
-						this.caret.setEnd($(node).prev());
-					}
-					else
+    					if (this.attributes.length === 0)
+    					{
+						    $(this).contents().unwrap();
+						}
+					});
+
+					// remove rel attribute from img
+					$div.find('img').removeAttr('rel');
+
+					$div.find('.redactor-selection-marker, #redactor-insert-marker').remove();
+
+					html = $div.html();
+
+					// reconvert script tag
+					if (this.opts.script)
 					{
-						this.caret.setAfterOrBefore(node, 'before');
+						html = html.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi, '<script$1>$2</script>');
 					}
-				},
-				setAfterOrBefore: function(node, type)
-				{
-					// focus
-					if (!this.utils.browser('msie')) this.$editor.focus();
 
-					node = node[0] || node;
+					// restore form tag
+					html = this.clean.restoreFormTags(html);
 
-					this.selection.get();
+					// remove br in|of li/header tags
+					html = html.replace(new RegExp('<br\\s?/?></h', 'gi'), '</h');
+					html = html.replace(new RegExp('<br\\s?/?></li>', 'gi'), '</li>');
+					html = html.replace(new RegExp('</li><br\\s?/?>', 'gi'), '</li>');
 
-					if (type == 'after')
+					// pre class
+					html = html.replace(/<pre>/gi, "<pre>\n");
+					if (this.opts.preClass)
 					{
-						try {
-
-							this.range.setStartAfter(node);
-							this.range.setEndAfter(node);
-						}
-						catch (e) {}
+						html = html.replace(/<pre>/gi, '<pre class="' + this.opts.preClass + '">');
 					}
-					else
+
+					// link nofollow
+					if (this.opts.linkNofollow)
 					{
-						try {
-							this.range.setStartBefore(node);
-							this.range.setEndBefore(node);
-						}
-						catch (e) {}
+						html = html.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi, '<a$1$2>');
+						html = html.replace(/<a(.*?[^>])>/gi, '<a$1 rel="nofollow">');
 					}
 
+					// replace special characters
+					var chars = {
+						'\u2122': '&trade;',
+						'\u00a9': '&copy;',
+						'\u2026': '&hellip;',
+						'\u2014': '&mdash;',
+						'\u2010': '&dash;'
+					};
 
-					this.range.collapse(false);
-					this.selection.addRange();
-				},
-				getOffsetOfElement: function(node)
-				{
-					node = node[0] || node;
+					$.each(chars, function(i,s)
+					{
+						html = html.replace(new RegExp(i, 'g'), s);
+					});
 
-					this.selection.get();
+					html = html.replace(/&amp;/g, '&');
 
-					var cloned = this.range.cloneRange();
-					cloned.selectNodeContents(node);
-					cloned.setEnd(this.range.endContainer, this.range.endOffset);
+					// remove empty paragpraphs
+					//html = html.replace(/<p><\/p>/gi, "");
 
-					return $.trim(cloned.toString()).length;
-				},
-				getOffset: function()
-				{
-					var offset = 0;
-				    var sel = window.getSelection();
+					// remove new lines
+                    html = html.replace(/\n{2,}/g, "\n");
 
-				    if (sel.rangeCount > 0)
-				    {
-				        var range = window.getSelection().getRangeAt(0);
-				        var caretRange = range.cloneRange();
-				        caretRange.selectNodeContents(this.$editor[0]);
-				        caretRange.setEnd(range.endContainer, range.endOffset);
-				        offset = caretRange.toString().length;
-				    }
+                    // remove all newlines
+                    if (this.opts.removeNewlines)
+                    {
+                        html = html.replace(/\r?\n/g, "");
+                    }
 
-					return offset;
+					return html;
 				},
-				setOffset: function(start, end)
+				onPaste: function(html, data, insert)
 				{
-					if (typeof end == 'undefined') end = start;
-					if (!this.focus.isFocused()) this.focus.setStart();
-
-					var sel = this.selection.get();
-					var node, offset = 0;
-					var walker = document.createTreeWalker(this.$editor[0], NodeFilter.SHOW_TEXT, null, null);
-
-					while (node = walker.nextNode())
+					// if paste event
+					if (insert !== true)
 					{
-						offset += node.nodeValue.length;
-						if (offset > start)
-						{
-							this.range.setStart(node, node.nodeValue.length + start - offset);
-							start = Infinity;
-						}
+    					// remove google docs markers
+                        html = html.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi, "$2");
+    					html = html.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi, "$3");
+
+                        // google docs styles
+                        html = html.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi, '<b><i>$2</i></b>');
+                        html = html.replace(/<span[^>]*(font-style: italic; font-weight: 700|font-weight: 700; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi, '<b><i>$2</i></b>');
+                        html = html.replace(/<span[^>]*font-style: italic[^>]*>([\w\W]*?)<\/span>/gi, '<i>$1</i>');
+                        html = html.replace(/<span[^>]*font-weight: bold[^>]*>([\w\W]*?)<\/span>/gi, '<b>$1</b>');
+                        html = html.replace(/<span[^>]*font-weight: 700[^>]*>([\w\W]*?)<\/span>/gi, '<b>$1</b>');
+
+                        // op tag
+                        html = html.replace(/<o:p[^>]*>/gi, '');
+                        html = html.replace(/<\/o:p>/gi, '');
 
-						if (offset >= end)
+						var msword = this.clean.isHtmlMsWord(html);
+						if (msword)
 						{
-							this.range.setEnd(node, node.nodeValue.length + end - offset);
-							break;
+							html = this.clean.cleanMsWord(html);
 						}
 					}
 
-					this.range.collapse(false);
-					this.selection.addRange();
-				},
-				// deprecated
-				setToPoint: function(start, end)
-				{
-					this.caret.setOffset(start, end);
-				},
-				getCoords: function()
-				{
-					return this.caret.getOffset();
-				}
-			};
-		},
-		clean: function()
-		{
-			return {
-				onSet: function(html)
-				{
-					html = this.clean.savePreCode(html);
-
-					// convert script tag
-					html = html.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi, '<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>');
-
-					// replace dollar sign to entity
-					html = html.replace(/\$/g, '&#36;');
-
-					// replace special characters in links
-					html = html.replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi, '<a href="$1&reg$2">');
+					html = $.trim(html);
 
-					if (this.opts.replaceDivs && !this.opts.linebreaks) html = this.clean.replaceDivs(html);
-					if (this.opts.linebreaks)  html = this.clean.replaceParagraphsToBr(html);
+					if (data.pre)
+					{
+						if (this.opts.preSpaces)
+						{
+							html = html.replace(/\t/g, new Array(this.opts.preSpaces + 1).join(' '));
+						}
+					}
+					else
+					{
 
-					// save form tag
-					html = this.clean.saveFormTags(html);
+						html = this.clean.replaceBrToNl(html);
+						html = this.clean.removeTagsInsidePre(html);
+					}
 
-					// convert font tag to span
-					var $div = $('<div>');
-					$div.html(html);
-					var fonts = $div.find('font[style]');
-					if (fonts.length !== 0)
+					// if paste event
+					if (insert !== true)
 					{
-						fonts.replaceWith(function()
+						html = this.clean.removeEmptyInlineTags(html);
+
+						if (data.encode === false)
 						{
-							var $el = $(this);
-							var $span = $('<span>').attr('style', $el.attr('style'));
-							return $span.append($el.contents());
-						});
+							html = html.replace(/&/g, '&amp;');
+							html = this.clean.convertTags(html, data);
+							html = this.clean.getPlainText(html);
+							html = this.clean.reconvertTags(html, data);
+						}
 
-						html = $div.html();
 					}
 
-					$div.remove();
+					if (data.text)
+					{
+						html = this.clean.replaceNbspToSpaces(html);
+						html = this.clean.getPlainText(html);
+					}
 
-					// remove font tag
-					html = html.replace(/<font(.*?)>/gi, '');
-					html = html.replace(/<\/font>/gi, '');
+					if (data.lists)
+					{
+    					html = html.replace("\n", '<br>');
+    				}
 
-					// tidy html
-					html = this.tidy.load(html);
+					if (data.encode)
+					{
+						html = this.clean.encodeHtml(html);
+					}
 
-					// paragraphize
-					if (this.opts.paragraphize) html = this.paragraphize.load(html);
+					if (data.paragraphize)
+					{
+    					// ff bugfix
+                        html = html.replace(/ \n/g, ' ');
+                        html = html.replace(/\n /g, ' ');
 
-					// verified
-					html = this.clean.setVerified(html);
+						html = this.paragraphize.load(html);
 
-					// convert inline tags
-					html = this.clean.convertInline(html);
+						// remove empty p
+						html = html.replace(/<p><\/p>/g, '');
+					}
 
-					html = html.replace(/&amp;/g, '&');
+					// remove paragraphs form lists (google docs bug)
+					html = html.replace(/<li><p>/g, '<li>');
+					html = html.replace(/<\/p><\/li>/g, '</li>');
 
 					return html;
+
 				},
-				onSync: function(html)
+				getCurrentType: function(html, insert)
 				{
-					// remove spaces
-					html = html.replace(/\u200B/g, '');
-					html = html.replace(/&#x200b;/gi, '');
+					var blocks = this.selection.blocks();
+
+					var data = {
+						text: false,
+						encode: false,
+						paragraphize: true,
+						line: this.clean.isHtmlLine(html),
+						blocks: this.clean.isHtmlBlocked(html),
+						pre: false,
+						lists: false,
+						block: true,
+						inline: true,
+						links: true,
+						images: true
+					};
 
-					if (this.opts.cleanSpaces)
+					if (blocks.length === 1 && this.utils.isCurrentOrParent(['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'a', 'figcaption']))
 					{
-						html = html.replace(/&nbsp;/gi, ' ');
+						data.text = true;
+						data.paragraphize = false;
+						data.inline = false;
+						data.images = false;
+						data.links = false;
+						data.line = true;
 					}
-
-					if (html.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i) != -1)
+					else if (this.opts.type === 'inline' || this.opts.enterKey === false)
 					{
-						return '';
+						data.paragraphize = false;
+						data.block = false;
+						data.line = true;
 					}
+					else if (blocks.length === 1 && this.utils.isCurrentOrParent(['li']))
+					{
+						data.lists = true;
+						data.block = false;
+						data.paragraphize = false;
+						data.images = false;
+					}
+					else if (blocks.length === 1 && this.utils.isCurrentOrParent(['th', 'td', 'blockquote']))
+					{
+						data.block = false;
+						data.paragraphize = false;
 
-					// reconvert script tag
-					html = html.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi, '<script$1>$2</script>');
-
-					// restore form tag
-					html = this.clean.restoreFormTags(html);
-
-					var chars = {
-						'\u2122': '&trade;',
-						'\u00a9': '&copy;',
-						'\u2026': '&hellip;',
-						'\u2014': '&mdash;',
-						'\u2010': '&dash;'
-					};
-					// replace special characters
-					$.each(chars, function(i,s)
+					}
+					else if (this.opts.type === 'pre' || (blocks.length === 1 && this.utils.isCurrentOrParent('pre')))
 					{
-						html = html.replace(new RegExp(i, 'g'), s);
-					});
+						data.inline = false;
+						data.block = false;
+						data.encode = true;
+						data.pre = true;
+						data.paragraphize = false;
+						data.images = false;
+						data.links = false;
+					}
 
-					// remove last br in FF
-					if (this.utils.browser('mozilla'))
+					if (data.line === true)
 					{
-						html = html.replace(/<br\s?\/?>$/gi, '');
+						data.paragraphize = false;
 					}
 
-					// remove br in|of li tags
-					html = html.replace(new RegExp('<br\\s?/?></li>', 'gi'), '</li>');
-					html = html.replace(new RegExp('</li><br\\s?/?>', 'gi'), '</li>');
+					if (insert === true)
+					{
+						data.text = false;
+					}
 
-					// remove empty attributes
-					html = html.replace(/<(.*?)rel="\s*?"(.*?[^>]?)>/gi, '<$1$2">');
-					html = html.replace(/<(.*?)style="\s*?"(.*?[^>]?)>/gi, '<$1$2">');
-					html = html.replace(/="">/gi, '>');
-					html = html.replace(/""">/gi, '">');
-					html = html.replace(/"">/gi, '">');
-
-					// remove verified
-					html = html.replace(/<div(.*?)data-tagblock="redactor"(.*?[^>])>/gi, '<div$1$2>');
-					html = html.replace(/<(.*?) data-verified="redactor"(.*?[^>])>/gi, '<$1$2>');
+					return data;
 
-					var $div = $("<div/>").html($.parseHTML(html, document, true));
-					$div.find("span").removeAttr("rel");
+				},
+				isHtmlBlocked: function(html)
+				{
+					var match1 = html.match(new RegExp('</(' + this.opts.blockTags.join('|' ).toUpperCase() + ')>', 'gi'));
+					var match2 = html.match(new RegExp('<hr(.*?[^>])>', 'gi'));
 
-					$div.find('pre .redactor-invisible-space').each(function()
+					return (match1 === null && match2 === null) ? false : true;
+				},
+				isHtmlLine: function(html)
+				{
+					if (this.clean.isHtmlBlocked(html))
 					{
-						$(this).contents().unwrap();
-					});
-
-					html = $div.html();
+						return false;
+					}
 
-					// remove rel attribute from img
-					html = html.replace(/<img(.*?[^>])rel="(.*?[^>])"(.*?[^>])>/gi, '<img$1$3>');
-					html = html.replace(/<span class="redactor-invisible-space">(.*?)<\/span>/gi, '$1');
+					var matchBR = html.match(/<br\s?\/?>/gi);
+					var matchNL = html.match(/\n/gi);
 
-					html = html.replace(/ data-save-url="(.*?[^>])"/gi, '');
+					return (!matchBR && !matchNL) ? true : false;
+				},
+				isHtmlMsWord: function(html)
+				{
+					return html.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i);
+				},
+				removeEmptyInlineTags: function(html)
+				{
+					var tags = this.opts.inlineTags;
+    				var $div = $("<div/>").html($.parseHTML(html, document, true));
+                    var self = this;
 
-					// remove image resize
-					html = html.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi, '$3<img$4>');
-					html = html.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi, '');
-					html = html.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi, '');
+					var $spans = $div.find('span');
+					var $tags = $div.find(tags.join(','));
 
-					// remove font tag
-					html = html.replace(/<font(.*?)>/gi, '');
-					html = html.replace(/<\/font>/gi, '');
+					$tags.removeAttr('style');
 
-					// tidy html
-					html = this.tidy.load(html);
+					$tags.each(function()
+					{
+    					var tagHtml = $(this).html();
+    					if (this.attributes.length === 0 && self.utils.isEmpty(tagHtml))
+    					{
+        					$(this).replaceWith(function()
+        					{
+        						return $(this).contents();
+        					});
+    					}
+					});
 
-					// link nofollow
-					if (this.opts.linkNofollow)
+                    $spans.each(function()
 					{
-						html = html.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi, '<a$1$2>');
-						html = html.replace(/<a(.*?[^>])>/gi, '<a$1 rel="nofollow">');
-					}
+    					var tagHtml = $(this).html();
+    					if (this.attributes.length === 0)
+    					{
+        					$(this).replaceWith(function()
+        					{
+        						return $(this).contents();
+        					});
+    					}
+					});
 
-					// reconvert inline
-					html = html.replace(/\sdata-redactor-(tag|class|style)="(.*?[^>])"/gi, '');
-					html = html.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>', 'gi'), '<$1$2>');
-					html = html.replace(new RegExp('<(.*?) data-verified="redactor">', 'gi'), '<$1>');
+					html = $div.html();
 
-					html = html.replace(/&amp;/g, '&');
+					// convert php tags
+					html = html.replace('<!--?php', '<?php');
+					html = html.replace('<!--?', '<?');
+					html = html.replace('?-->', '?>');
+
+					$div.remove();
 
 					return html;
 				},
-				onPaste: function(html, setMode)
+				cleanMsWord: function(html)
 				{
-					html = $.trim(html);
-					html = html.replace(/\$/g, '&#36;');
+    				html = html.replace(/<!--[\s\S]*?-->/g, "");
+    				html = html.replace(/<o:p>[\s\S]*?<\/o:p>/gi, '');
+					html = html.replace(/\n/g, " ");
+					html = html.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi, '\n\n');
 
-					// convert dirty spaces
-					html = html.replace(/<span class="s[0-9]">/gi, '<span>');
-					html = html.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi, ' ');
-					html = html.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi, '\t');
-					html = html.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi, ' ');
+					// lists
+					var $div = $("<div/>").html(html);
 
-					if (this.opts.pastePlainText)
-					{
-						return this.clean.getPlainText(html);
-					}
+					var lastList = false;
+					var lastLevel = 1;
+					var listsIds = [];
 
-					if (!this.utils.isSelectAll() && typeof setMode == 'undefined')
+					$div.find("p[style]").each(function()
 					{
-						if (this.utils.isCurrentOrParent(['FIGCAPTION', 'A']))
-						{
-							return this.clean.getPlainText(html, false);
-						}
+						var matches = $(this).attr('style').match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);
 
-						if (this.utils.isCurrentOrParent('PRE'))
+						if (matches)
 						{
-							html = html.replace(/”/g, '"');
-							html = html.replace(/“/g, '"');
-							html = html.replace(/‘/g, '\'');
-							html = html.replace(/’/g, '\'');
+							var currentList = parseInt(matches[1]);
+							var currentLevel = parseInt(matches[2]);
+							var listType = $(this).html().match(/^[\w]+\./) ? "ol" : "ul";
 
-							return this.clean.getPreCode(html);
-						}
+							var $li = $("<li/>").html($(this).html());
 
-						if (this.utils.isCurrentOrParent(['BLOCKQUOTE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6']))
-						{
-							html = this.clean.getOnlyImages(html);
+							$li.html($li.html().replace(/^([\w\.]+)</, '<'));
+							$li.find("span:first").remove();
 
-							if (!this.utils.browser('msie'))
+							if (currentLevel == 1 && $.inArray(currentList, listsIds) == -1)
 							{
-								var block = this.selection.getBlock();
-								if (block && block.tagName == 'P')
-								{
-									html = html.replace(/<img(.*?)>/gi, '<p><img$1></p>');
-								}
+								var $list = $("<" + listType + "/>").attr({"data-level": currentLevel, "data-list": currentList}).html($li);
+								$(this).replaceWith($list);
+
+								lastList = currentList;
+								listsIds.push(currentList);
 							}
+							else
+							{
+								if (currentLevel > lastLevel)
+								{
+									var $prevList = $div.find('[data-level="' + lastLevel + '"][data-list="' + lastList + '"]');
+									var $lastList = $prevList;
 
-							return html;
-						}
+									for(var i = lastLevel; i < currentLevel; i++)
+									{
+										$list = $("<" + listType + "/>");
+										$list.appendTo($lastList.find("li").last());
 
-						if (this.utils.isCurrentOrParent(['TD']))
-						{
-							html = this.clean.onPasteTidy(html, 'td');
+										$lastList = $list;
+									}
 
-							if (this.opts.linebreaks) html = this.clean.replaceParagraphsToBr(html);
+									$lastList.attr({"data-level": currentLevel, "data-list": currentList}).html($li);
 
-							html = this.clean.replaceDivsToBr(html);
+								}
+								else
+								{
+									var $prevList = $div.find('[data-level="' + currentLevel + '"][data-list="' + currentList + '"]').last();
 
-							return html;
-						}
+									$prevList.append($li);
+								}
 
+								lastLevel = currentLevel;
+								lastList = currentList;
 
-						if (this.utils.isCurrentOrParent(['LI']))
-						{
-							return this.clean.onPasteTidy(html, 'li');
+								$(this).remove();
+							}
 						}
-					}
+					});
 
+					$div.find('[data-level][data-list]').removeAttr('data-level data-list');
+					html = $div.html();
+
+					return html;
+				},
+				replaceNbspToSpaces: function(html)
+				{
+					return html.replace('&nbsp;', ' ');
+				},
+				replaceBrToNl: function(html)
+				{
+					return html.replace(/<br\s?\/?>/gi, '\n');
+				},
+				replaceNlToBr: function(html)
+				{
+					return html.replace(/\n/g, '<br />');
+				},
+				convertTags: function(html, data)
+				{
+                    var $div = $('<div>').html(html);
 
-					html = this.clean.isSingleLine(html, setMode);
+                    // remove iframe
+					$div.find('iframe').remove();
 
-					if (!this.clean.singleLine)
+					// link target & attrs
+					var $links = $div.find('a');
+					$links.removeAttr('style');
+					if (this.opts.pasteLinkTarget !== false)
 					{
-						if (this.opts.linebreaks)  html = this.clean.replaceParagraphsToBr(html);
-						if (this.opts.replaceDivs) html = this.clean.replaceDivs(html);
-
-						html = this.clean.saveFormTags(html);
+    					$links.attr('target', this.opts.pasteLinkTarget);
 					}
 
+                    // links
+                    if (data.links && this.opts.pasteLinks)
+                    {
+                    	$div.find('a').each(function(i, link)
+                    	{
+                    		if (link.href)
+                    		{
+                    			var tmp = '#####[a href="' + link.href + '"';
+                    			var attr;
+                    			for (var j = 0, length = link.attributes.length; j < length; j++)
+                    			{
+                    				attr = link.attributes.item(j);
+                    				if (attr.name !== 'href')
+                    				{
+                    					tmp += ' ' + attr.name + '="' + attr.value + '"';
+                    				}
+                    			}
 
-					html = this.clean.onPasteWord(html);
-					html = this.clean.onPasteExtra(html);
+                    			link.outerHTML = tmp + ']#####' + link.innerHTML + '#####[/a]#####';
+                    		}
+                    	});
+                    }
 
-					html = this.clean.onPasteTidy(html, 'all');
+                    html = $div.html();
 
+                    // images
+					if (data.images && this.opts.pasteImages)
+					{
+						html = html.replace(/<img(.*?)src="(.*?)"(.*?[^>])>/gi, '#####[img$1src="$2"$3]#####');
+					}
 
-					// paragraphize
-					if (!this.clean.singleLine && this.opts.paragraphize)
+					// plain text
+					if (this.opts.pastePlainText)
 					{
-						html = this.paragraphize.load(html);
+						return html;
 					}
 
-					html = this.clean.removeDirtyStyles(html);
-					html = this.clean.onPasteRemoveSpans(html);
-					html = this.clean.onPasteRemoveEmpty(html);
+					// all tags
+					var blockTags = (data.lists) ? ['ul', 'ol', 'li'] : this.opts.pasteBlockTags;
+
+					var tags;
+					if (data.block || data.lists)
+					{
+						tags = (data.inline) ? blockTags.concat(this.opts.pasteInlineTags) : blockTags;
+					}
+					else
+					{
+						tags = (data.inline) ? this.opts.pasteInlineTags : [];
+					}
 
+					var len = tags.length;
+					for (var i = 0; i < len; i++)
+					{
+						html = html.replace(new RegExp('<\/' + tags[i] + '>', 'gi'), '###/' + tags[i] + '###');
 
-					html = this.clean.convertInline(html);
+						if (tags[i] === 'td' || tags[i] === 'th')
+						{
+							html = html.replace(new RegExp('<' + tags[i] + '(.*?[^>])((colspan|rowspan)="(.*?[^>])")?(.*?[^>])>', 'gi'), '###' + tags[i] + ' $2###');
+						}
+						else if (this.utils.isInlineTag(tags[i]))
+						{
+    						html = html.replace(new RegExp('<' + tags[i] + '([^>]*)class="([^>]*)"[^>]*>', 'gi'), '###' + tags[i] + ' class="$2"###');
+                            html = html.replace(new RegExp('<' + tags[i] + '([^>]*)data-redactor-style-cache="([^>]*)"[^>]*>', 'gi'), '###' + tags[i] + ' cache="$2"###');
+                            html = html.replace(new RegExp('<' + tags[i] + '[^>]*>', 'gi'), '###' + tags[i] + '###');
+						}
+						else
+						{
+							html = html.replace(new RegExp('<' + tags[i] + '[^>]*>', 'gi'), '###' + tags[i] + '###');
+						}
+					}
 
 					return html;
+
 				},
-				onPasteWord: function(html)
+				reconvertTags: function(html, data)
 				{
-					// comments
-					html = html.replace(/<!--[\s\S]*?-->/gi, '');
-
-					// style
-					html = html.replace(/<style[^>]*>[\s\S]*?<\/style>/gi, '');
-
-					// op
-					html = html.replace(/<o\:p[^>]*>[\s\S]*?<\/o\:p>/gi, '');
-
-					if (html.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i))
+					// links & images
+					if ((data.links && this.opts.pasteLinks) || (data.images && this.opts.pasteImages))
 					{
-						// comments
-						html = html.replace(/<!--[\s\S]+?-->/gi, '');
-
-						// scripts
-						html = html.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi, '');
+						html = html.replace(new RegExp('#####\\[', 'gi'), '<');
+						html = html.replace(new RegExp('\\]#####', 'gi'), '>');
+                    }
 
-						// Convert <s> into <strike>
-						html = html.replace(/<(\/?)s>/gi, "<$1strike>");
+					// plain text
+					if (this.opts.pastePlainText)
+					{
+						return html;
+					}
 
-						// Replace nbsp entites to char since it's easier to handle
-						html = html.replace(/ /gi, ' ');
+					var blockTags = (data.lists) ? ['ul', 'ol', 'li'] : this.opts.pasteBlockTags;
 
-						// Convert <span style="mso-spacerun:yes">___</span> to string of alternating
-						// breaking/non-breaking spaces of same length
-						html = html.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi, function(str, spaces) {
-							return (spaces.length > 0) ? spaces.replace(/./, " ").slice(Math.floor(spaces.length/2)).split("").join("\u00a0") : '';
-						});
+					var tags;
+					if (data.block || data.lists)
+					{
+						tags = (data.inline) ? blockTags.concat(this.opts.pasteInlineTags) : blockTags;
+					}
+					else
+					{
+						tags = (data.inline) ? this.opts.pasteInlineTags : [];
+					}
 
-						html = this.clean.onPasteIeFixLinks(html);
+					var len = tags.length;
+					for (var i = 0; i < len; i++)
+					{
+						html = html.replace(new RegExp('###\/' + tags[i] + '###', 'gi'), '</' + tags[i] + '>');
+                    }
 
-						// shapes
-						html = html.replace(/<img(.*?)v:shapes=(.*?)>/gi, '');
-						html = html.replace(/src="file\:\/\/(.*?)"/, 'src=""');
+                    for (var i = 0; i < len; i++)
+					{
+    					html = html.replace(new RegExp('###' + tags[i] + '###', 'gi'), '<' + tags[i] + '>');
+    				}
 
-						// lists
-						var $div = $("<div/>").html(html);
+					for (var i = 0; i < len; i++)
+					{
+                        if (tags[i] === 'td' || tags[i] === 'th')
+                        {
+						    html = html.replace(new RegExp('###' + tags[i] + '\s?(.*?[^#])###', 'gi'), '<' + tags[i] + '$1>');
+                        }
+                        else if (this.utils.isInlineTag(tags[i]))
+                        {
+
+                            var spanMarker = (tags[i] === 'span') ? ' data-redactor-span="true"' : '';
+
+                            html = html.replace(new RegExp('###' + tags[i] + ' cache="(.*?[^#])"###', 'gi'), '<' + tags[i] + ' style="$1"' + spanMarker + ' data-redactor-style-cache="$1">');
+                            html = html.replace(new RegExp('###' + tags[i] + '\s?(.*?[^#])###', 'gi'), '<' + tags[i] + '$1>');
+                        }
+                    }
 
-						var lastList = false;
-						var lastLevel = 1;
-						var listsIds = [];
+					return html;
 
-						$div.find("p[style]").each(function()
-						{
-							var matches = $(this).attr('style').match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);
+				},
+				cleanPre: function(block)
+				{
+					block = (typeof block === 'undefined') ? $(this.selection.block()).closest('pre', this.core.editor()[0]) : block;
 
-							if (matches)
-							{
-								var currentList = parseInt(matches[1]);
-								var currentLevel = parseInt(matches[2]);
-								var listType = $(this).html().match(/^[\w]+\./) ? "ol" : "ul";
+					$(block).find('br').replaceWith(function()
+					{
+						return document.createTextNode('\n');
+					});
 
-								var $li = $("<li/>").html($(this).html());
+					$(block).find('p').replaceWith(function()
+					{
+						return $(this).contents();
+					});
 
-								$li.html($li.html().replace(/^([\w\.]+)</, '<'));
-								$li.find("span:first").remove();
+				},
+				removeTagsInsidePre: function(html)
+				{
+					var $div = $('<div />').append(html);
+					$div.find('pre').replaceWith(function()
+					{
+						var str = $(this).html();
+						str = str.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi, '\n');
+						str = str.replace(/(<([^>]+)>)/gi, '');
 
-								if (currentLevel == 1 && $.inArray(currentList, listsIds) == -1)
-								{
-									var $list = $("<" + listType + "/>").attr({"data-level": currentLevel,
-																			   "data-list": currentList})
-																	  .html($li);
+						return $('<pre />').append(str);
+					});
 
-									$(this).replaceWith($list);
+					html = $div.html();
+					$div.remove();
 
-									lastList = currentList;
-									listsIds.push(currentList);
-								}
-								else
-								{
-									if (currentLevel > lastLevel)
-									{
-										var $prevList = $div.find('[data-level="' + lastLevel + '"][data-list="' + lastList + '"]');
+					return html;
 
-										var $lastList = $prevList;
+				},
+				getPlainText: function(html)
+				{
+					html = html.replace(/<!--[\s\S]*?-->/gi, '');
+					html = html.replace(/<style[\s\S]*?style>/gi, '');
+                    html = html.replace(/<p><\/p>/g, '');
+					html = html.replace(/<\/div>|<\/li>|<\/td>/gi, '\n');
+					html = html.replace(/<\/p>/gi, '\n\n');
+					html = html.replace(/<\/H[1-6]>/gi, '\n\n');
 
-										for(var i = lastLevel; i < currentLevel; i++)
-										{
-											$list = $("<" + listType + "/>");
+					var tmp = document.createElement('div');
+					tmp.innerHTML = html;
+					html = tmp.textContent || tmp.innerText;
 
-											$list.appendTo($lastList.find("li").last());
+					return $.trim(html);
+				},
+				savePreCode: function(html)
+				{
+					html = this.clean.savePreFormatting(html);
+					html = this.clean.saveCodeFormatting(html);
+					html = this.clean.restoreSelectionMarkers(html);
 
-											$lastList = $list;
-										}
+					return html;
+				},
+				savePreFormatting: function(html)
+				{
+					var pre = html.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);
+					if (pre === null)
+					{
+						return html;
+					}
 
-										$lastList.attr({"data-level": currentLevel,
-														"data-list": currentList})
-												 .html($li);
+					$.each(pre, $.proxy(function(i,s)
+					{
+    					var arr = [];
+    					var codeTag = false;
+    					var contents, attr1, attr2;
 
-									}
-									else
-									{
-										var $prevList = $div.find('[data-level="' + currentLevel + '"][data-list="' + currentList + '"]').last();
+    					if (s.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>/i))
+    					{
+        					arr = s.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>([\w\W]*?)<\/code>(([\n\r\s]+)?)<\/pre>/i);
+        					codeTag = true;
 
-										$prevList.append($li);
-									}
+                            contents = arr[5];
+                            attr1 = arr[1];
+                            attr2 = arr[4];
+    					}
+                        else
+						{
+    						arr = s.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);
 
-									lastLevel = currentLevel;
-									lastList = currentList;
+                            contents = arr[2];
+                            attr1 = arr[1];
+                        }
 
-									$(this).remove();
-								}
-							}
-						});
+						contents = contents.replace(/<br\s?\/?>/g, '\n');
+						contents = contents.replace(/&nbsp;/g, ' ');
 
-						$div.find('[data-level][data-list]').removeAttr('data-level data-list');
-						html = $div.html();
+						if (this.opts.preSpaces)
+						{
+							contents = contents.replace(/\t/g, new Array(this.opts.preSpaces + 1).join(' '));
+						}
 
-						// remove ms word's bullet
-						html = html.replace(/·/g, '');
-						html = html.replace(/<p class="Mso(.*?)"/gi, '<p');
+                        contents = this.clean.encodeEntities(contents);
 
-						// classes
-						html = html.replace(/ class=\"(mso[^\"]*)\"/gi,	"");
-						html = html.replace(/ class=(mso\w+)/gi, "");
+						// $ fix
+						contents = contents.replace(/\$/g, '&#36;');
 
-						// remove ms word tags
-						html = html.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi, '$2');
+                        if (codeTag)
+                        {
+                            html = html.replace(s, '<pre' + attr1 + '><code' + attr2 + '>' + contents + '</code></pre>');
+                        }
+                        else
+                        {
+                            html = html.replace(s, '<pre' + attr1 + '>' + contents + '</pre>');
+                        }
 
-						// ms word break lines
-						html = html.replace(/\n/g, ' ');
 
-						// ms word lists break lines
-						html = html.replace(/<p>\n?<li>/gi, '<li>');
-					}
+					}, this));
 
 					return html;
 				},
-				onPasteExtra: function(html)
+				saveCodeFormatting: function(html)
 				{
-					// remove google docs markers
-					html = html.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi, "$2");
-					html = html.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi, "$3");
+					var code = html.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);
+					if (code === null)
+					{
+						return html;
+					}
+
+					$.each(code, $.proxy(function(i,s)
+					{
+						var arr = s.match(/<code(.*?)>([\w\W]*?)<\/code>/i);
 
-					// google docs styles
-			 		html = html.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi, '<span style="font-weight: bold;"><span style="font-style: italic;">');
-			 		html = html.replace(/<span[^>]*font-style: italic[^>]*>/gi, '<span style="font-style: italic;">');
-					html = html.replace(/<span[^>]*font-weight: bold[^>]*>/gi, '<span style="font-weight: bold;">');
-					html = html.replace(/<span[^>]*text-decoration: underline[^>]*>/gi, '<span style="text-decoration: underline;">');
+						arr[2] = arr[2].replace(/&nbsp;/g, ' ');
+						arr[2] = this.clean.encodeEntities(arr[2]);
+						arr[2] = arr[2].replace(/\$/g, '&#36;');
 
-					html = html.replace(/<img>/gi, '');
-					html = html.replace(/\n{3,}/gi, '\n');
-					html = html.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi, '$2');
+						html = html.replace(s, '<code' + arr[1] + '>' + arr[2] + '</code>');
 
-					// remove dirty p
-					html = html.replace(/<p><p>/gi, '<p>');
-					html = html.replace(/<\/p><\/p>/gi, '</p>');
-					html = html.replace(/<li>(\s*|\t*|\n*)<p>/gi, '<li>');
-					html = html.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi, '</li>');
+					}, this));
 
-					// remove space between paragraphs
-					html = html.replace(/<\/p>\s<p/gi, '<\/p><p');
+					return html;
+				},
+				restoreSelectionMarkers: function(html)
+				{
+					html = html.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot;&gt;​&lt;\/span&gt;/g, '<span id="selection-marker-$1" class="redactor-selection-marker">​</span>');
 
-					// remove safari local images
-					html = html.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi, '');
+					return html;
+				},
+				saveFormTags: function(html)
+				{
+					return html.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi, '<section$1 rel="redactor-form-tag">$2</section>');
+				},
+				restoreFormTags: function(html)
+				{
+					return html.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi, '<form$1$2>$3</form>');
+				},
+				encodeHtml: function(html)
+				{
+					html = html.replace(/”/g, '"');
+					html = html.replace(/“/g, '"');
+					html = html.replace(/‘/g, '\'');
+					html = html.replace(/’/g, '\'');
+					html = this.clean.encodeEntities(html);
 
-					// bullets
-					html = html.replace(/<p>•([\w\W]*?)<\/p>/gi, '<li>$1</li>');
+					return html;
+				},
+				encodeEntities: function(str)
+				{
+					str = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"');
+					str = str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
 
-					// FF fix
-					if (this.utils.browser('mozilla'))
+					return str;
+				},
+				stripTags: function(input, denied)
+				{
+					if (typeof denied === 'undefined')
 					{
-						html = html.replace(/<br\s?\/?>$/gi, '');
+						return input.replace(/(<([^>]+)>)/gi, '');
 					}
 
-					return html;
+				    var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;
+
+				    return input.replace(tags, function ($0, $1)
+				    {
+				        return denied.indexOf($1.toLowerCase()) === -1 ? $0 : '';
+				    });
 				},
-				onPasteTidy: function(html, type)
+				removeMarkers: function(html)
 				{
-					// remove all tags except these
-					var tags = ['span', 'a', 'pre', 'blockquote', 'small', 'em', 'strong', 'code', 'kbd', 'mark', 'address', 'cite', 'var', 'samp', 'dfn', 'sup', 'sub', 'b', 'i', 'u', 'del',
-								'ol', 'ul', 'li', 'dl', 'dt', 'dd', 'p', 'br', 'video', 'audio', 'iframe', 'embed', 'param', 'object', 'img', 'table',
-								'td', 'th', 'tr', 'tbody', 'tfoot', 'thead', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
-					var tagsEmpty = false;
-					var attrAllowed =  [
-							['a', '*'],
-							['img', ['src', 'alt']],
-							['span', ['class', 'rel', 'data-verified']],
-							['iframe', '*'],
-							['video', '*'],
-							['audio', '*'],
-							['embed', '*'],
-							['object', '*'],
-							['param', '*'],
-							['source', '*']
-						];
-
-					if (type == 'all')
-					{
-						tagsEmpty = ['p', 'span', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
-						attrAllowed =  [
-							['table', 'class'],
-							['td', ['colspan', 'rowspan']],
-							['a', '*'],
-							['img', ['src', 'alt', 'data-redactor-inserted-image']],
-							['span', ['class', 'rel', 'data-verified']],
-							['iframe', '*'],
-							['video', '*'],
-							['audio', '*'],
-							['embed', '*'],
-							['object', '*'],
-							['param', '*'],
-							['source', '*']
-						];
-					}
-					else if (type == 'td')
-					{
-						// remove all tags except these and remove all table tags: tr, td etc
-						tags = ['ul', 'ol', 'li', 'span', 'a', 'small', 'em', 'strong', 'code', 'kbd', 'mark', 'cite', 'var', 'samp', 'dfn', 'sup', 'sub', 'b', 'i', 'u', 'del',
-								'ol', 'ul', 'li', 'dl', 'dt', 'dd', 'br', 'iframe', 'video', 'audio', 'embed', 'param', 'object', 'img', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
-
-					}
-					else if (type == 'li')
-					{
-						// only inline tags and ul, ol, li
-						tags = ['ul', 'ol', 'li', 'span', 'a', 'small', 'em', 'strong', 'code', 'kbd', 'mark', 'cite', 'var', 'samp', 'dfn', 'sup', 'sub', 'b', 'i', 'u', 'del', 'br',
-								'iframe', 'video', 'audio', 'embed', 'param', 'object', 'img'];
-					}
-
-					var options = {
-						deniedTags: (this.opts.deniedTags) ? this.opts.deniedTags : false,
-						allowedTags: (this.opts.allowedTags) ? this.opts.allowedTags : tags,
-						removeComments: true,
-						removePhp: true,
-						removeAttr: (this.opts.removeAttr) ? this.opts.removeAttr : false,
-						allowedAttr: (this.opts.allowedAttr) ? this.opts.allowedAttr : attrAllowed,
-						removeEmpty: tagsEmpty
-					};
-
-					return this.tidy.load(html, options);
+					return html.replace(/<span(.*?[^>]?)class="redactor-selection-marker"(.*?[^>]?)>([\w\W]*?)<\/span>/gi, '');
 				},
-				onPasteRemoveEmpty: function(html)
+				removeSpaces: function(html)
 				{
-					html = html.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi, '');
+					html = $.trim(html);
+					html = html.replace(/\n/g, '');
+					html = html.replace(/[\t]*/g, '');
+					html = html.replace(/\n\s*\n/g, "\n");
+					html = html.replace(/^[\s\n]*/g, ' ');
+					html = html.replace(/[\s\n]*$/g, ' ');
+					html = html.replace( />\s{2,}</g, '> <'); // between inline tags can be only one space
+					html = html.replace(/\n\n/g, "\n");
+					html = html.replace(/\u200B/g, '');
 
-					// remove br in the end
-					if (!this.opts.linebreaks) html = html.replace(/<br>$/i, '');
+					return html;
+				},
+				removeSpacesHard: function(html)
+				{
+					html = $.trim(html);
+					html = html.replace(/\n/g, '');
+					html = html.replace(/[\t]*/g, '');
+					html = html.replace(/\n\s*\n/g, "\n");
+					html = html.replace(/^[\s\n]*/g, '');
+					html = html.replace(/[\s\n]*$/g, '');
+					html = html.replace( />\s{2,}</g, '><');
+					html = html.replace(/\n\n/g, "\n");
+					html = html.replace(/\u200B/g, '');
 
 					return html;
 				},
-				onPasteRemoveSpans: function(html)
+				normalizeCurrentHeading: function()
 				{
-					html = html.replace(/<span>(.*?)<\/span>/gi, '$1');
-					html = html.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi, ' ');
+					var heading = this.selection.block();
+					if (this.utils.isCurrentOrParentHeader() && heading)
+					{
+						heading.normalize();
+					}
+				}
+			};
+		},
 
-					return html;
-				},
-				onPasteIeFixLinks: function(html)
+		// =code
+		code: function()
+		{
+			return {
+				syncFire: true,
+				html: false,
+				start: function(html)
 				{
-					if (!this.utils.browser('msie')) return html;
+					html = $.trim(html);
+					html = html.replace(/^(<span id="selection-marker-1" class="redactor-selection-marker">​<\/span>)/, '');
 
-					var tmp = $.trim(html);
-					if (tmp.search(/^<a(.*?)>(.*?)<\/a>$/i) === 0)
+					// clean
+					if (this.opts.type === 'textarea')
+					{
+						html = this.clean.onSet(html);
+					}
+					else if (this.opts.type === 'div' && html === '')
 					{
-						html = html.replace(/^<a(.*?)>(.*?)<\/a>$/i, "$2");
+						html = this.opts.emptyHtml;
 					}
 
-					return html;
+					html = html.replace(/<p><span id="selection-marker-1" class="redactor-selection-marker">​<\/span><\/p>/, '');
+
+					this.events.stopDetectChanges();
+					this.core.editor().html(html);
+					this.observe.load();
+					this.events.startDetectChanges();
 				},
-				isSingleLine: function(html, setMode)
+				set: function(html, options)
 				{
-					this.clean.singleLine = false;
+					html = $.trim(html);
 
-					if (!this.utils.isSelectAll() && typeof setMode == 'undefined')
-					{
-						var blocks = this.opts.blockLevelElements.join('|').replace('P|', '').replace('DIV|', '');
+                    options = options || {};
 
-						var matchBlocks = html.match(new RegExp('</(' + blocks + ')>', 'gi'));
-						var matchContainers = html.match(/<\/(p|div)>/gi);
+                    // start
+                    if (options.start)
+                    {
+                        this.start = options.start;
+                    }
 
-						if (!matchBlocks && (matchContainers === null || (matchContainers && matchContainers.length <= 1)))
-						{
-							var matchBR = html.match(/<br\s?\/?>/gi);
-							//var matchIMG = html.match(/<img(.*?[^>])>/gi);
-							if (!matchBR)
-							{
-								this.clean.singleLine = true;
-								html = html.replace(/<\/?(p|div)(.*?)>/gi, '');
-							}
-						}
+					// clean
+					if (this.opts.type === 'textarea')
+					{
+						html = this.clean.onSet(html);
+					}
+					else if (this.opts.type === 'div' && html === '')
+					{
+						html = this.opts.emptyHtml;
 					}
 
-					return html;
-				},
-				stripTags: function(input, allowed)
-				{
-				    allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');
-				    var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;
+					this.core.editor().html(html);
 
-				    return input.replace(tags, function ($0, $1) {
-				        return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';
-				    });
+					if (this.opts.type === 'textarea')
+					{
+    					this.code.sync();
+					}
+
+					this.placeholder.enable();
 				},
-				savePreCode: function(html)
+				get: function()
 				{
-					html = this.clean.savePreFormatting(html);
-					html = this.clean.saveCodeFormatting(html);
+					if (this.opts.type === 'textarea')
+					{
+						return this.core.textarea().val();
+                    }
+					else
+					{
+						var html = this.core.editor().html();
 
-					html = this.clean.restoreSelectionMarker(html);
+						// clean
+						html = this.clean.onGet(html);
 
-					return html;
+						return html;
+					}
 				},
-				savePreFormatting: function(html)
+				sync: function()
 				{
-					var pre = html.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);
-
-					if (pre !== null)
+					if (!this.code.syncFire)
 					{
-						$.each(pre, $.proxy(function(i,s)
-						{
-							var arr = s.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);
+						return;
+					}
 
-							arr[2] = arr[2].replace(/<br\s?\/?>/g, '\n');
-							arr[2] = arr[2].replace(/&nbsp;/g, ' ');
+					var html = this.core.editor().html();
+					var htmlCleaned = this.code.cleaned(html);
 
-							if (this.opts.preSpaces)
-							{
-								arr[2] = arr[2].replace(/\t/g, Array(this.opts.preSpaces + 1).join(' '));
-							}
+					// is there a need to synchronize
+					if (this.code.isSync(htmlCleaned))
+					{
+						// do not sync
+						return;
+					}
 
-							arr[2] = this.clean.encodeEntities(arr[2]);
+					// save code
+					this.code.html = htmlCleaned;
 
-							// $ fix
-							arr[2] = arr[2].replace(/\$/g, '&#36;');
+					if (this.opts.type !== 'textarea')
+					{
+						this.core.callback('sync', html);
+						this.core.callback('change', html);
+						return;
+					}
 
-							html = html.replace(s, '<pre' + arr[1] + '>' + arr[2] + '</pre>');
+					if (this.opts.type === 'textarea')
+					{
+						setTimeout($.proxy(function()
+						{
+							this.code.startSync(html);
 
-						}, this));
+						}, this), 10);
 					}
-
-					return html;
 				},
-				saveCodeFormatting: function(html)
+				startSync: function(html)
 				{
-					var code = html.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);
+					// before clean callback
+					html = this.core.callback('syncBefore', html);
 
-					if (code !== null)
-					{
-						$.each(code, $.proxy(function(i,s)
-						{
-							var arr = s.match(/<code(.*?)>([\w\W]*?)<\/code>/i);
+					// clean
+					html = this.clean.onSync(html);
 
-							arr[2] = arr[2].replace(/&nbsp;/g, ' ');
-							arr[2] = this.clean.encodeEntities(arr[2]);
-							arr[2] = arr[2].replace(/\$/g, '&#36;');
+					// set code
+					this.core.textarea().val(html);
 
-							html = html.replace(s, '<code' + arr[1] + '>' + arr[2] + '</code>');
-						}, this));
+					// after sync callback
+					this.core.callback('sync', html);
+
+					// change callback
+					if (this.start === false)
+					{
+						this.core.callback('change', html);
 					}
 
-					return html;
+					this.start = false;
 				},
-				restoreSelectionMarker: function(html)
+				isSync: function(htmlCleaned)
 				{
-					html = html.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot; data-verified=&quot;redactor&quot;&gt;​&lt;\/span&gt;/g, '<span id="selection-marker-$1" class="redactor-selection-marker" data-verified="redactor">​</span>');
+					var html = (this.code.html !== false) ? this.code.html : false;
 
-					return html;
+					return (html !== false && html === htmlCleaned);
 				},
-				getTextFromHtml: function(html)
+				cleaned: function(html)
 				{
-					html = html.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi, '\n');
+					html = html.replace(/\u200B/g, '');
+					return this.clean.removeMarkers(html);
+				}
+			};
+		},
 
-					var tmp = document.createElement('div');
-					tmp.innerHTML = html;
-					html = tmp.textContent || tmp.innerText;
+		// =core
+		core: function()
+		{
+			return {
 
-					return $.trim(html);
+				id: function()
+				{
+					return this.$editor.attr('id');
 				},
-				getPlainText: function(html, paragraphize)
+				element: function()
 				{
-					html = this.clean.getTextFromHtml(html);
-					html = html.replace(/\n\s*\n/g, "\n");
-					html = html.replace(/\n\n/g, "\n");
-					html = html.replace(/\n/g, '<br />');
-
-					if (this.opts.paragraphize && typeof paragraphize == 'undefined' && !this.utils.browser('mozilla'))
-					{
-						html = this.paragraphize.load(html);
-					}
-
-					return html;
+					return this.$element;
 				},
-				getPreCode: function(html)
+				editor: function()
 				{
-					html = html.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi, '<img$1$3>');
-					html = html.replace(/<img(.*?)>/gi, '&lt;img$1&gt;');
-					html = this.clean.getTextFromHtml(html);
-
-					if (this.opts.preSpaces)
-					{
-						html = html.replace(/\t/g, Array(this.opts.preSpaces + 1).join(' '));
-					}
-
-					html = this.clean.encodeEntities(html);
-
-					return html;
+					return (typeof this.$editor === 'undefined') ? $() : this.$editor;
 				},
-				getOnlyImages: function(html)
+				textarea: function()
 				{
-					html = html.replace(/<img(.*?)>/gi, '[img$1]');
-
-					// remove all tags
-					html = html.replace(/<([Ss]*?)>/gi, '');
-
-					html = html.replace(/\[img(.*?)\]/gi, '<img$1>');
-
-					return html;
+					return this.$textarea;
 				},
-				getOnlyLinksAndImages: function(html)
+				box: function()
 				{
-					html = html.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi, '[a href="$2"]$4[/a]');
-					html = html.replace(/<img(.*?)>/gi, '[img$1]');
-
-					// remove all tags
-					html = html.replace(/<(.*?)>/gi, '');
-
-					html = html.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi, '<a href="$1">$2</a>');
-					html = html.replace(/\[img(.*?)\]/gi, '<img$1>');
-
-					return html;
+					return (this.opts.type === 'textarea') ? this.$box : this.$element;
 				},
-				encodeEntities: function(str)
+				toolbar: function()
 				{
-					str = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"');
-					return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
+					return (this.$toolbar) ? this.$toolbar : false;
 				},
-				removeDirtyStyles: function(html)
+				air: function()
 				{
-					if (this.utils.browser('msie')) return html;
-
-					var div = document.createElement('div');
-					div.innerHTML = html;
-
-					this.clean.clearUnverifiedRemove($(div));
-
-					html = div.innerHTML;
-					$(div).remove();
-
-					return html;
+					return (this.$air) ? this.$air : false;
 				},
-				clearUnverified: function()
+				object: function()
 				{
-					if (this.utils.browser('msie')) return;
-
-					this.clean.clearUnverifiedRemove(this.$editor);
-
-					var headers = this.$editor.find('h1, h2, h3, h4, h5, h6');
-					headers.find('span').removeAttr('style');
-					headers.find(this.opts.verifiedTags.join(', ')).removeAttr('style');
-
-					this.code.sync();
+					return $.extend({}, this);
 				},
-				clearUnverifiedRemove: function($editor)
+				structure: function()
 				{
-					$editor.find(this.opts.verifiedTags.join(', ')).removeAttr('style');
-					$editor.find('span').not('[data-verified="redactor"]').removeAttr('style');
-
-					$editor.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(i, s)
-					{
-						var $s = $(s);
-						$s.attr('style', $s.attr('rel'));
-					});
-
+					this.core.editor().toggleClass('redactor-structure');
 				},
-				cleanEmptyParagraph: function()
+				addEvent: function(name)
 				{
-
+					this.core.event = name;
 				},
-				setVerified: function(html)
+				getEvent: function()
 				{
-					if (this.utils.browser('msie')) return html;
-
-					html = html.replace(new RegExp('<img(.*?[^>])>', 'gi'), '<img$1 data-verified="redactor">');
-					html = html.replace(new RegExp('<span(.*?[^>])>', 'gi'), '<span$1 data-verified="redactor">');
-
-					var matches = html.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>', 'gi'));
+					return this.core.event;
+				},
+				callback: function(type, e, data)
+				{
+					var eventNamespace = 'redactor';
+					var returnValue = false;
+					var events = $._data(this.core.element()[0], 'events');
 
-					if (matches)
+					// on callback
+					if (typeof events !== 'undefined' && typeof events[type] !== 'undefined')
 					{
-						var len = matches.length;
+						var len = events[type].length;
 						for (var i = 0; i < len; i++)
 						{
-							try {
-
-								var newTag = matches[i].replace(/style="(.*?)"/i, 'style="$1" rel="$1"');
-								html = html.replace(matches[i], newTag);
-
+							var namespace = events[type][i].namespace;
+							if (namespace === 'callback.' + eventNamespace)
+							{
+								var handler = events[type][i].handler;
+								var args = (typeof data === 'undefined') ? [e] : [e, data];
+								returnValue = (typeof args === 'undefined') ? handler.call(this, e) : handler.call(this, e, args);
 							}
-							catch (e) {}
 						}
 					}
 
-					return html;
+					if (returnValue)
+					{
+						return returnValue;
+					}
+
+					// no callback
+					if (typeof this.opts.callbacks[type] === 'undefined')
+					{
+						return (typeof data === 'undefined') ? e : data;
+					}
+
+					// callback
+					var callback = this.opts.callbacks[type];
+
+					if ($.isFunction(callback))
+					{
+						return (typeof data === 'undefined') ? callback.call(this, e) : callback.call(this, e, data);
+					}
+					else
+					{
+						return (typeof data === 'undefined') ? e : data;
+					}
 				},
-				convertInline: function(html)
+				destroy: function()
 				{
-					var $div = $('<div />').html(html);
+					this.opts.destroyed = true;
 
-					var tags = this.opts.inlineTags;
-					tags.push('span');
+					this.core.callback('destroy');
 
-					$div.find(tags.join(',')).each(function()
-					{
-						var $el = $(this);
-						var tag = this.tagName.toLowerCase();
-						$el.attr('data-redactor-tag', tag);
+					// placeholder
+					this.placeholder.destroy();
+
+					// progress
+					this.progress.destroy();
 
-						if (tag == 'span')
+					// help label
+					$('#redactor-voice-' + this.uuid).remove();
+
+					this.core.editor().removeClass('redactor-in redactor-styles redactor-structure redactor-layer-img-edit');
+
+					// caret service
+					this.core.editor().off('keydown.redactor-remove-textnode');
+
+					// observer
+					this.core.editor().off('.redactor-observe.' + this.uuid);
+
+					// off events and remove data
+					this.$element.off('.redactor').removeData('redactor');
+					this.core.editor().off('.redactor');
+
+					$(document).off('.redactor-dropdown');
+					$(document).off('.redactor-air.' + this.uuid);
+					$(document).off('mousedown.redactor-blur.' + this.uuid);
+					$(document).off('mousedown.redactor.' + this.uuid);
+					$(document).off('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid);
+					$(window).off('.redactor-toolbar.' + this.uuid);
+					$(window).off('touchmove.redactor.' + this.uuid);
+					$("body").off('scroll.redactor.' + this.uuid);
+
+					$(this.opts.toolbarFixedTarget).off('scroll.redactor.' + this.uuid);
+
+					// plugins events
+					var self = this;
+					if (this.opts.plugins !== false)
+					{
+						$.each(this.opts.plugins, function(i,s)
 						{
-							if ($el.attr('style')) $el.attr('data-redactor-style', $el.attr('style'));
-							else if ($el.attr('class')) $el.attr('data-redactor-class', $el.attr('class'));
-						}
+							$(window).off('.redactor-plugin-' + s);
+							$(document).off('.redactor-plugin-' + s);
+							$("body").off('.redactor-plugin-' + s);
+							self.core.editor().off('.redactor-plugin-' + s);
+						});
+					}
 
-					});
+					// click to edit
+					this.$element.off('click.redactor-click-to-edit');
+					this.$element.removeClass('redactor-click-to-edit');
 
-					html = $div.html();
-					$div.remove();
+					// common
+					this.core.editor().removeClass('redactor-layer');
+					this.core.editor().removeAttr('contenteditable');
 
-					return html;
-				},
-				normalizeLists: function()
-				{
-					this.$editor.find('li').each(function(i,s)
+					var html = this.code.get();
+
+					if (this.opts.toolbar && this.$toolbar)
 					{
-						var $next = $(s).next();
-						if ($next.length !== 0 && ($next[0].tagName == 'UL' || $next[0].tagName == 'OL'))
+						// dropdowns off
+						this.$toolbar.find('a').each(function()
 						{
-							$(s).append($next);
-						}
+							var $el = $(this);
+							if ($el.data('dropdown'))
+							{
+								$el.data('dropdown').remove();
+								$el.data('dropdown', {});
+							}
+						});
+					}
 
-					});
-				},
-				removeSpaces: function(html)
-				{
-					html = html.replace(/\n/g, '');
-					html = html.replace(/[\t]*/g, '');
-					html = html.replace(/\n\s*\n/g, "\n");
-					html = html.replace(/^[\s\n]*/g, ' ');
-					html = html.replace(/[\s\n]*$/g, ' ');
-					html = html.replace( />\s{2,}</g, '> <'); // between inline tags can be only one space
-					html = html.replace(/\n\n/g, "\n");
-					html = html.replace(/\u200B/g, '');
+					if (this.opts.type === 'textarea')
+					{
+						this.$box.after(this.$element);
+						this.$box.remove();
+						this.$element.val(html).show();
+					}
 
-					return html;
-				},
-				replaceDivs: function(html)
-				{
-					if (this.opts.linebreaks)
+					// air
+					if (this.opts.air)
 					{
-						html = html.replace(/<div><br\s?\/?><\/div>/gi, '<br />');
-						html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '$2<br />');
+						this.$air.remove();
 					}
-					else
+
+					if (this.opts.toolbar && this.$toolbar)
+					{
+						this.$toolbar.remove();
+					}
+
+					// modal
+					if (this.$modalBox)
+					{
+						this.$modalBox.remove();
+					}
+
+					if (this.$modalOverlay)
 					{
-						html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '<p$1>$2</p>');
+						this.$modalOverlay.remove();
 					}
 
-					html = html.replace(/<div(.*?[^>])>/gi, '');
-					html = html.replace(/<\/div>/gi, '');
+					// hide link's tooltip
+					$('.redactor-link-tooltip').remove();
 
-					return html;
+					// autosave
+					clearInterval(this.autosaveTimeout);
+				}
+			};
+		},
+
+		// =detect
+		detect: function()
+		{
+			return {
+
+				// public
+				isWebkit: function()
+				{
+					return /webkit/.test(this.opts.userAgent);
 				},
-				replaceDivsToBr: function(html)
+				isFirefox: function()
 				{
-					html = html.replace(/<div\s(.*?)>/gi, '<p>');
-					html = html.replace(/<div><br\s?\/?><\/div>/gi, '<br /><br />');
-					html = html.replace(/<div>([\w\W]*?)<\/div>/gi, '$1<br /><br />');
-
-					return html;
+					return this.opts.userAgent.indexOf('firefox') > -1;
 				},
-				replaceParagraphsToBr: function(html)
+				isIe: function(v)
 				{
-					html = html.replace(/<p\s(.*?)>/gi, '<p>');
-					html = html.replace(/<p><br\s?\/?><\/p>/gi, '<br />');
-					html = html.replace(/<p>([\w\W]*?)<\/p>/gi, '$1<br /><br />');
-					html = html.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi, '</blockquote>');
+                    if (document.documentMode || /Edge/.test(navigator.userAgent))
+                    {
+                        return 'edge';
+                    }
 
-					return html;
+					var ie;
+					ie = RegExp('msie' + (!isNaN(v)?('\\s'+v):''), 'i').test(navigator.userAgent);
+
+					if (!ie)
+					{
+						ie = !!navigator.userAgent.match(/Trident.*rv[ :]*11\./);
+					}
+
+					return ie;
 				},
-				saveFormTags: function(html)
+				isMobile: function()
 				{
-					return html.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi, '<section$1 rel="redactor-form-tag">$2</section>');
+					return /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);
 				},
-				restoreFormTags: function(html)
+				isDesktop: function()
 				{
-					return html.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi, '<form$1$2>$3</form>');
+					return !/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent);
+				},
+				isIpad: function()
+				{
+					return /iPad/.test(navigator.userAgent);
 				}
+
 			};
 		},
-		code: function()
+
+		// =dropdown
+		dropdown: function()
 		{
 			return {
-				set: function(html)
+				active: false,
+				button: false,
+				key: false,
+				position: [],
+				getDropdown: function()
 				{
-					html = $.trim(html.toString());
+					return this.dropdown.active;
+				},
+				build: function(name, $dropdown, dropdownObject)
+				{
+					dropdownObject = this.dropdown.buildFormatting(name, dropdownObject);
 
-					// clean
-					html = this.clean.onSet(html);
+					$.each(dropdownObject, $.proxy(function(btnName, btnObject)
+					{
+						var $item = this.dropdown.buildItem(btnName, btnObject);
 
+						this.observe.addDropdown($item, btnName, btnObject);
+						$dropdown.attr('rel', name).append($item);
 
-					if (this.utils.browser('msie'))
+					}, this));
+				},
+				buildFormatting: function(name, dropdownObject)
+				{
+					if (name !== 'format' || this.opts.formattingAdd === false)
 					{
-						html = html.replace(/<span(.*?)id="selection-marker-(1|2)"(.*?)><\/span>/gi, '');
+						return dropdownObject;
 					}
 
-					this.$editor.html(html);
-					this.code.sync();
+					$.each(this.opts.formattingAdd, $.proxy(function(i,s)
+					{
+						var type = (this.utils.isBlockTag(s.args[0])) ? 'block' : 'inline';
 
-					if (html !== '') this.placeholder.remove();
+						dropdownObject[i] = {
+							func: (type === 'block') ? 'block.format' : 'inline.format',
+							args: s.args,
+							title: s.title
+						};
 
-					setTimeout($.proxy(this.buffer.add, this), 15);
-					if (this.start === false) this.observe.load();
+					}, this));
 
+					return dropdownObject;
 				},
-				get: function()
+				buildItem: function(btnName, btnObject)
 				{
-					var code = this.$textarea.val();
+					var $itemContainer = $('<li />');
+					if (typeof btnObject.classname !== 'undefined')
+					{
+    					$itemContainer.addClass(btnObject.classname);
+					}
 
-					if (this.opts.replaceDivs) code = this.clean.replaceDivs(code);
-					if (this.opts.linebreaks) code = this.clean.replaceParagraphsToBr(code);
+					if (btnName.search(/^divider/i) !== -1)
+					{
+    					$itemContainer.addClass('redactor-dropdown-divider');
 
-					// indent code
-					code = this.tabifier.get(code);
+    					return $itemContainer;
+					}
 
-					return code;
-				},
-				sync: function()
-				{
-					setTimeout($.proxy(this.code.startSync, this), 10);
-				},
-				startSync: function()
-				{
-					var html = this.$editor.html();
+					var $item = $('<a href="#" class="redactor-dropdown-' + btnName + '" role="button" />');
+					var $itemSpan = $('<span />').html(btnObject.title);
 
-					// is there a need to synchronize
-					if (this.code.syncCode && this.code.syncCode == html || (this.start && html == '' ))
+					$item.append($itemSpan);
+					$item.on('mousedown', $.proxy(function(e)
 					{
-						// do not sync
-						return;
-					}
-
-					// save code
-					this.code.syncCode = html;
+						e.preventDefault();
 
-					// before clean callback
-					html = this.core.setCallback('syncBefore', html);
+						this.dropdown.buildClick(e, btnName, btnObject);
 
-					// clean
-					html = this.clean.onSync(html);
+					}, this));
 
-					// set code
-					this.$textarea.val(html);
+					$itemContainer.append($item);
 
-					// after sync callback
-					this.core.setCallback('sync', html);
+					return $itemContainer;
 
-					if (this.start === false)
+				},
+				buildClick: function(e, btnName, btnObject)
+				{
+					if ($(e.target).hasClass('redactor-dropdown-link-inactive'))
 					{
-						this.core.setCallback('change', html);
+						return;
 					}
 
-					this.start = false;
+					var command = this.dropdown.buildCommand(btnObject);
 
-					if (this.autosave.html == false)
+					if (typeof btnObject.args !== 'undefined')
 					{
-						this.autosave.html = this.code.get();
+						this.button.toggle(e, btnName, command.type, command.callback, btnObject.args);
 					}
-
-					if (this.opts.codemirror)
+					else
 					{
-						this.$textarea.next('.CodeMirror').each(function(i, el)
-						{
-							el.CodeMirror.setValue(html);
-						});
+						this.button.toggle(e, btnName, command.type, command.callback);
 					}
-
-					//autosave
-					this.autosave.onChange();
-					this.autosave.enable();
 				},
-				toggle: function()
+				buildCommand: function(btnObject)
 				{
-					if (this.opts.visual)
+					var command = {};
+					command.type = 'func';
+					command.callback = btnObject.func;
+
+					if (btnObject.command)
 					{
-						this.code.showCode();
+						command.type = 'command';
+						command.callback = btnObject.command;
 					}
-					else
+					else if (btnObject.dropdown)
 					{
-						this.code.showVisual();
+						command.type = 'dropdown';
+						command.callback = btnObject.dropdown;
 					}
+
+					return command;
 				},
-				showCode: function()
+				show: function(e, key)
 				{
-					this.selection.save();
-
-					this.code.offset = this.caret.getOffset();
-					var scroll = $(window).scrollTop();
-
-					var	width = this.$editor.innerWidth(),
-						height = this.$editor.innerHeight();
-
-					this.$editor.hide();
-
-					var html = this.$textarea.val();
-
-					this.modified = this.clean.removeSpaces(html);
-
-					// indent code
-					html = this.tabifier.get(html);
-
-					// caret position sync
-					var start = 0, end = 0;
-					var $editorDiv = $("<div/>").append($.parseHTML(this.clean.onSync(this.$editor.html()), document, true));
-					var $selectionMarkers = $editorDiv.find("span.redactor-selection-marker");
-
-					if ($selectionMarkers.length > 0)
+					if (this.detect.isDesktop())
 					{
-						var editorHtml = this.tabifier.get($editorDiv.html()).replace(/&amp;/g, '&');
-
-						if ($selectionMarkers.length == 1)
-						{
-							start = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-1").prop("outerHTML"));
-							end   = start;
-						}
-						else if ($selectionMarkers.length == 2)
-						{
-							start = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-1").prop("outerHTML"));
-							end	 = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-2").prop("outerHTML")) - $editorDiv.find("#selection-marker-1").prop("outerHTML").toString().length;
-						}
+						this.core.editor().focus();
 					}
 
-					this.selection.removeMarkers();
-					this.$textarea.val(html);
+					this.dropdown.hideAll(false, key);
 
-					if (this.opts.codemirror)
-					{
-						this.$textarea.next('.CodeMirror').each(function(i, el)
-						{
-							$(el).show();
-							el.CodeMirror.setValue(html);
-							el.CodeMirror.setSize('100%', height);
-							el.CodeMirror.refresh();
-
-							if (start == end)
-							{
-								el.CodeMirror.setCursor(el.CodeMirror.posFromIndex(start).line, el.CodeMirror.posFromIndex(end).ch);
-							}
-							else
-							{
-								el.CodeMirror.setSelection({line: el.CodeMirror.posFromIndex(start).line,
-															ch: el.CodeMirror.posFromIndex(start).ch},
-														  {line: el.CodeMirror.posFromIndex(end).line,
-														   ch:  el.CodeMirror.posFromIndex(end).ch});
-							}
+					this.dropdown.key = key;
+					this.dropdown.button = this.button.get(this.dropdown.key);
 
-							el.CodeMirror.focus();
-						});
-					}
-					else
+					if (this.dropdown.button.hasClass('dropact'))
 					{
-						this.$textarea.height(height).show().focus();
-						this.$textarea.on('keydown.redactor-textarea-indenting', this.code.textareaIndenting);
-
-						$(window).scrollTop(scroll);
-
-						if (this.$textarea[0].setSelectionRange)
-						{
-							this.$textarea[0].setSelectionRange(start, end);
-						}
-
-						this.$textarea[0].scrollTop = 0;
+						this.dropdown.hide();
+						return;
 					}
 
-					this.opts.visual = false;
+					// re append
+					this.dropdown.active = this.dropdown.button.data('dropdown').appendTo(document.body);
 
-					this.button.setInactiveInCode();
-					this.button.setActive('html');
-					this.core.setCallback('source', html);
-				},
-				showVisual: function()
-				{
-					var html;
+					// callback
+					this.core.callback('dropdownShow', { dropdown: this.dropdown.active, key: this.dropdown.key, button: this.dropdown.button });
 
-					if (this.opts.visual) return;
+					// set button
+					this.button.setActive(this.dropdown.key);
+					this.dropdown.button.addClass('dropact');
 
-					var start = 0, end = 0;
+					// position
+					this.dropdown.getButtonPosition();
 
-					if (this.opts.codemirror)
+					// show
+					if (this.button.toolbar().hasClass('toolbar-fixed-box') && this.detect.isDesktop())
 					{
-						var selection;
-
-						this.$textarea.next('.CodeMirror').each(function(i, el)
-						{
-							selection = el.CodeMirror.listSelections();
-
-							start = el.CodeMirror.indexFromPos(selection[0].anchor);
-							end = el.CodeMirror.indexFromPos(selection[0].head);
-
-							html = el.CodeMirror.getValue();
-						});
+						this.dropdown.showIsFixedToolbar();
 					}
 					else
 					{
-						start = this.$textarea.get(0).selectionStart;
-						end = this.$textarea.get(0).selectionEnd;
-
-						html = this.$textarea.hide().val();
+						this.dropdown.showIsUnFixedToolbar();
 					}
 
-					// if selection starts from end
-					if (start > end && end > 0)
+					// disable scroll whan dropdown scroll
+					if (this.detect.isDesktop() && !this.detect.isFirefox())
 					{
-						var tempStart = end;
-						var tempEnd = start;
-
-						start = tempStart;
-						end = tempEnd;
+						this.dropdown.active.on('mouseover.redactor-dropdown', $.proxy(this.utils.disableBodyScroll, this));
+						this.dropdown.active.on('mouseout.redactor-dropdown mousedown.redactor-dropdown', $.proxy(this.utils.enableBodyScroll, this));
 					}
 
-					start = this.code.enlargeOffset(html, start);
-					end = this.code.enlargeOffset(html, end);
+					e.stopPropagation();
 
-					html = html.substr(0, start) + this.selection.getMarkerAsHtml(1) + html.substr(start);
+				},
+				showIsFixedToolbar: function()
+				{
+					var top = this.dropdown.button.position().top + this.dropdown.button.innerHeight() + this.opts.toolbarFixedTopOffset;
 
-					if (end > start)
+					var position = 'fixed';
+					if (this.opts.toolbarFixedTarget !== document)
 					{
-						var markerLength = this.selection.getMarkerAsHtml(1).toString().length;
-
-						html = html.substr(0, end + markerLength) + this.selection.getMarkerAsHtml(2) + html.substr(end + markerLength);
+						top = (this.dropdown.button.innerHeight() + this.$toolbar.offset().top) + this.opts.toolbarFixedTopOffset;
+						position = 'absolute';
 					}
 
+					this.dropdown.active.css({
 
+						position: position,
+						left: this.dropdown.position.left + 'px',
+						top: top + 'px'
 
-					if (this.modified !== this.clean.removeSpaces(html))
-					{
-						this.code.set(html);
-
-					}
-
-					if (this.opts.codemirror)
-					{
-						this.$textarea.next('.CodeMirror').hide();
-					}
-
-					this.$editor.show();
+					}).show();
 
-					if (!this.utils.isEmpty(html))
+					// animate
+					this.dropdown.active.redactorAnimation('slideDown', { duration: 0.2 }, $.proxy(function()
 					{
-						this.placeholder.remove();
-					}
+						this.dropdown.enableCallback();
+						this.dropdown.enableEvents();
 
-					this.selection.restore();
-
-					this.$textarea.off('keydown.redactor-textarea-indenting');
-
-					this.button.setActiveInVisual();
-					this.button.setInactive('html');
-					this.observe.load();
-					this.opts.visual = true;
-					this.core.setCallback('visual', html);
+					}, this));
 				},
-				textareaIndenting: function(e)
+				showIsUnFixedToolbar: function()
 				{
-					if (e.keyCode !== 9) return true;
+					this.dropdown.active.css({
 
-					var $el = this.$textarea;
-					var start = $el.get(0).selectionStart;
-					$el.val($el.val().substring(0, start) + "\t" + $el.val().substring($el.get(0).selectionEnd));
-					$el.get(0).selectionStart = $el.get(0).selectionEnd = start + 1;
+						position: 'absolute',
+						left: this.dropdown.position.left + 'px',
+						top: (this.dropdown.button.innerHeight() + this.dropdown.position.top) + 'px'
 
-					return false;
-				},
-				enlargeOffset: function(html, offset)
-				{
-					var htmlLength = html.length;
-					var c = 0;
+					}).show();
 
-					if (html[offset] == '>')
-					{
-						c++;
-					}
-					else
+					// animate
+					this.dropdown.active.redactorAnimation(((this.opts.animation) ? 'slideDown' : 'show'), { duration: 0.2 }, $.proxy(function()
 					{
-						for(var i = offset; i <= htmlLength; i++)
-						{
-							c++;
-
-							if (html[i] == '>')
-							{
-								break;
-							}
-							else if (html[i] == '<' || i == htmlLength)
-							{
-								c = 0;
-								break;
-							}
-						}
-					}
+						this.dropdown.enableCallback();
+						this.dropdown.enableEvents();
 
-					return offset + c;
-				}
-			};
-		},
-		core: function()
-		{
-			return {
-				getObject: function()
-				{
-					return $.extend({}, this);
-				},
-				getEditor: function()
-				{
-					return this.$editor;
-				},
-				getBox: function()
-				{
-					return this.$box;
-				},
-				getElement: function()
-				{
-					return this.$element;
+					}, this));
 				},
-				getTextarea: function()
+				enableEvents: function()
 				{
-					return this.$textarea;
+					$(document).on('mousedown.redactor-dropdown', $.proxy(this.dropdown.hideAll, this));
+					this.core.editor().on('touchstart.redactor-dropdown', $.proxy(this.dropdown.hideAll, this));
+					$(document).on('keyup.redactor-dropdown', $.proxy(this.dropdown.closeHandler, this));
 				},
-				getToolbar: function()
+				enableCallback: function()
 				{
-					return (this.$toolbar) ? this.$toolbar : false;
+					this.core.callback('dropdownShown', { dropdown: this.dropdown.active, key: this.dropdown.key, button: this.dropdown.button });
 				},
-				addEvent: function(name)
+				getButtonPosition: function()
 				{
-					this.core.event = name;
+					this.dropdown.position = this.dropdown.button.offset();
+
+					// fix right placement
+					var dropdownWidth = this.dropdown.active.width();
+					if ((this.dropdown.position.left + dropdownWidth) > $(document).width())
+					{
+						this.dropdown.position.left = Math.max(0, this.dropdown.position.left - dropdownWidth + parseInt(this.dropdown.button.innerWidth()));
+					}
+
 				},
-				getEvent: function()
+				closeHandler: function(e)
 				{
-					return this.core.event;
+					if (e.which !== this.keyCode.ESC)
+					{
+						return;
+					}
+
+					this.dropdown.hideAll(e);
+					this.core.editor().focus();
 				},
-				setCallback: function(type, e, data)
+				hideAll: function(e, key)
 				{
-					var eventName = type + 'Callback';
-					var eventNamespace = 'redactor';
-					var callback = this.opts[eventName];
-
-					if (this.$textarea)
+					if (this.detect.isDesktop())
 					{
-						var returnValue = false;
-						var events = $._data(this.$textarea[0], 'events');
-
-						if (typeof events != 'undefined' && typeof events[eventName] != 'undefined')
-						{
-							$.each(events[eventName], $.proxy(function(key, value)
-							{
-								if (value['namespace'] == eventNamespace)
-								{
-									var data = (typeof data == 'undefined') ? [e] : [e, data];
-
-									returnValue = (typeof data == 'undefined') ? value.handler.call(this, e) : value.handler.call(this, e, data);
-								}
-							}, this));
-						}
-
-						if (returnValue) return returnValue;
+						this.utils.enableBodyScroll();
 					}
 
-					if ($.isFunction(callback))
+					if (e !== false && $(e.target).closest('.redactor-dropdown').length !== 0)
 					{
-						return (typeof data == 'undefined') ? callback.call(this, e) : callback.call(this, e, data);
+						return;
 					}
-					else
+
+					var $buttons = (typeof key === 'undefined') ? this.button.toolbar().find('a.dropact') : this.button.toolbar().find('a.dropact').not('.re-' + key);
+					var $elements = (typeof key === 'undefined') ? $('.redactor-dropdown-' + this.uuid) : $('.redactor-dropdown-' + this.uuid).not('.redactor-dropdown-box-' + key);
+
+					if ($elements.length !== 0)
 					{
-						return (typeof data == 'undefined') ? e : data;
-					}
-				},
-				destroy: function()
-				{
-					this.opts.destroyed = true;
+						$(document).off('.redactor-dropdown');
+						this.core.editor().off('.redactor-dropdown');
 
-					this.core.setCallback('destroy');
+						$.each($elements, $.proxy(function(i,s)
+						{
+							var $el = $(s);
 
-					// off events and remove data
-					this.$element.off('.redactor').removeData('redactor');
-					this.$editor.off('.redactor');
+							this.core.callback('dropdownHide', $el);
 
-					$(document).off('mousedown.redactor-blur.' + this.uuid);
-					$(document).off('mousedown.redactor.' + this.uuid);
-					$(document).off('click.redactor-image-delete.' + this.uuid);
-					$(document).off('click.redactor-image-resize-hide.' + this.uuid);
-					$(document).off('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid);
-					$("body").off('scroll.redactor.' + this.uuid);
-					$(this.opts.toolbarFixedTarget).off('scroll.redactor.' + this.uuid);
+							$el.hide();
+							$el.off('mouseover mouseout').off('.redactor-dropdown');
 
-					// common
-					this.$editor.removeClass('redactor-editor redactor-linebreaks redactor-placeholder');
-					this.$editor.removeAttr('contenteditable');
+						}, this));
 
-					var html = this.code.get();
+						$buttons .removeClass('redactor-act dropact');
+					}
 
-					if (this.opts.toolbar)
+				},
+				hide: function ()
+				{
+					if (this.dropdown.active === false)
 					{
-						// dropdowns off
-						this.$toolbar.find('a').each(function()
-						{
-							var $el = $(this);
-							if ($el.data('dropdown'))
-							{
-								$el.data('dropdown').remove();
-								$el.data('dropdown', {});
-							}
-						});
+						return;
 					}
 
-					if (this.build.isTextarea())
+					if (this.detect.isDesktop())
 					{
-						this.$box.after(this.$element);
-						this.$box.remove();
-						this.$element.val(html).show();
+						this.utils.enableBodyScroll();
 					}
-					else
+
+					this.dropdown.active.redactorAnimation(((this.opts.animation) ? 'slideUp' : 'hide'), { duration: 0.2 }, $.proxy(function()
 					{
-						this.$box.after(this.$editor);
-						this.$box.remove();
-						this.$element.html(html).show();
-					}
+						$(document).off('.redactor-dropdown');
+						this.core.editor().off('.redactor-dropdown');
 
-					// paste box
-					if (this.$pasteBox) this.$pasteBox.remove();
+						this.dropdown.hideOut();
 
-					// modal
-					if (this.$modalBox) this.$modalBox.remove();
-					if (this.$modalOverlay) this.$modalOverlay.remove();
 
-					// buttons tooltip
-					$('.redactor-toolbar-tooltip-' + this.uuid).remove();
+					}, this));
+				},
+				hideOut: function()
+				{
+					this.core.callback('dropdownHide', this.dropdown.active);
 
-					// autosave
-					clearInterval(this.autosaveInterval);
+					this.dropdown.button.removeClass('redactor-act dropact');
+					this.dropdown.active.off('mouseover mouseout').off('.redactor-dropdown');
+					this.dropdown.button = false;
+					this.dropdown.key = false;
+					this.dropdown.active = false;
 				}
 			};
 		},
-		dropdown: function()
+
+		// =events
+		events: function()
 		{
 			return {
-				build: function(name, $dropdown, dropdownObject)
+				focused: false,
+				blured: true,
+				dropImage: false,
+				stopChanges: false,
+				stopDetectChanges: function()
+				{
+					this.events.stopChanges = true;
+				},
+				startDetectChanges: function()
 				{
-					if (name == 'formatting' && this.opts.formattingAdd)
+					var self = this;
+					setTimeout(function()
 					{
-						$.each(this.opts.formattingAdd, $.proxy(function(i,s)
-						{
-							var name = s.tag,
-								func;
-
-							if (typeof s['class'] != 'undefined')
-							{
-								name = name + '-' + s['class'];
-							}
+						self.events.stopChanges = false;
+					}, 1);
+				},
+				dragover: function(e)
+				{
+					e.preventDefault();
+					e.stopPropagation();
 
-							s.type = (this.utils.isBlockTag(s.tag)) ? 'block' : 'inline';
+					if (e.target.tagName === 'IMG')
+					{
+						$(e.target).addClass('redactor-image-dragover');
+					}
 
-							if (typeof s.func !== "undefined")
-							{
-								func = s.func;
-							}
-							else
-							{
-								func = (s.type == 'inline') ? 'inline.formatting' : 'block.formatting';
-							}
+				},
+				dragleave: function(e)
+				{
+					// remove image dragover
+					this.core.editor().find('img').removeClass('redactor-image-dragover');
+				},
+				drop: function(e)
+				{
+					e = e.originalEvent || e;
 
-							if (this.opts.linebreaks && s.type == 'block' && s.tag == 'p') return;
+					// remove image dragover
+					this.core.editor().find('img').removeClass('redactor-image-dragover');
 
-							this.formatting[name] = {
-								tag: s.tag,
-								style: s.style,
-								'class': s['class'],
-								attr: s.attr,
-								data: s.data,
-								clear: s.clear
-							};
-
-							dropdownObject[name] = {
-								func: func,
-								title: s.title
-							};
+					if (this.opts.type === 'inline' || this.opts.type === 'pre')
+					{
+						e.preventDefault();
+						return false;
+					}
 
-						}, this));
+					if (window.FormData === undefined || !e.dataTransfer)
+					{
+						return true;
 					}
 
-					$.each(dropdownObject, $.proxy(function(btnName, btnObject)
+					if (e.dataTransfer.files.length === 0)
+					{
+						return this.events.onDrop(e);
+					}
+					else
 					{
-						var $item = $('<a href="#" class="redactor-dropdown-' + btnName + '" role="button">' + btnObject.title + '</a>');
-						if (name == 'formatting') $item.addClass('redactor-formatting-' + btnName);
+						this.events.onDropUpload(e);
+					}
 
-						$item.on('click', $.proxy(function(e)
-						{
-							e.preventDefault();
+					this.core.callback('drop', e);
 
-							var type = 'func';
-							var callback = btnObject.func;
-							if (btnObject.command)
-							{
-								type = 'command';
-								callback = btnObject.command;
-							}
-							else if (btnObject.dropdown)
-							{
-								type = 'dropdown';
-								callback = btnObject.dropdown;
-							}
+				},
+				click: function(e)
+				{
+					var event = this.core.getEvent();
+					var type = (event === 'click' || event === 'arrow') ? false : 'click';
 
-							if ($(e.target).hasClass('redactor-dropdown-link-inactive')) return;
+                    this.core.addEvent(type);
+					this.utils.disableSelectAll();
+					this.core.callback('click', e);
+				},
+				focus: function(e)
+				{
+					if (this.rtePaste)
+					{
+						return;
+					}
 
-							this.button.onClick(e, btnName, type, callback);
-							this.dropdown.hideAll();
+					if (this.events.isCallback('focus'))
+					{
+						this.core.callback('focus', e);
+					}
 
-						}, this));
+					this.events.focused = true;
+					this.events.blured = false;
 
-						this.observe.addDropdown($item, btnName, btnObject);
+					// tab
+					if (this.selection.current() === false)
+					{
+						var sel = this.selection.get();
+						var range = this.selection.range(sel);
 
-						$dropdown.append($item);
+						range.setStart(this.core.editor()[0], 0);
+						range.setEnd(this.core.editor()[0], 0);
+						this.selection.update(sel, range);
+					}
 
-					}, this));
 				},
-				show: function(e, key)
+				blur: function(e)
 				{
-					if (!this.opts.visual)
+					if (this.start || this.rtePaste)
 					{
-						e.preventDefault();
-						return false;
+						return;
 					}
 
-					var $button = this.button.get(key);
-
-					// Always re-append it to the end of <body> so it always has the highest sub-z-index.
-					var $dropdown = $button.data('dropdown').appendTo(document.body);
-
-					if (this.opts.highContrast)
+					if ($(e.target).closest('#' + this.core.id() + ', .redactor-toolbar, .redactor-dropdown, #redactor-modal-box').length !== 0)
 					{
-						$dropdown.addClass("redactor-dropdown-contrast");
+						return;
 					}
 
-					if ($button.hasClass('dropact'))
+					if (!this.events.blured && this.events.isCallback('blur'))
 					{
-						this.dropdown.hideAll();
+						this.core.callback('blur', e);
 					}
-					else
-					{
-						this.dropdown.hideAll();
-						this.observe.dropdowns();
 
-						this.core.setCallback('dropdownShow', { dropdown: $dropdown, key: key, button: $button });
-
-						this.button.setActive(key);
-
-						$button.addClass('dropact');
-
-						var keyPosition = $button.offset();
-
-						// fix right placement
-						var dropdownWidth = $dropdown.width();
-						if ((keyPosition.left + dropdownWidth) > $(document).width())
+					this.events.focused = false;
+					this.events.blured = true;
+				},
+				touchImageEditing: function()
+				{
+					var scrollTimer = -1;
+					this.events.imageEditing = false;
+					$(window).on('touchmove.redactor.' + this.uuid, $.proxy(function()
+					{
+						this.events.imageEditing = true;
+						if (scrollTimer !== -1)
 						{
-							keyPosition.left = Math.max(0, keyPosition.left - dropdownWidth);
+							clearTimeout(scrollTimer);
 						}
 
-						var left = keyPosition.left + 'px';
-						if (this.$toolbar.hasClass('toolbar-fixed-box'))
-						{
-							var top = this.$toolbar.innerHeight() + this.opts.toolbarFixedTopOffset;
-							var position = 'fixed';
-							if (this.opts.toolbarFixedTarget !== document)
-							{
-								top = (this.$toolbar.innerHeight() + this.$toolbar.offset().top) + this.opts.toolbarFixedTopOffset;
-								position = 'absolute';
-							}
-
-							$dropdown.css({ position: position, left: left, top: top + 'px' }).show();
-						}
-						else
+						scrollTimer = setTimeout($.proxy(function()
 						{
-							var top = ($button.innerHeight() + keyPosition.top) + 'px';
-
-							$dropdown.css({ position: 'absolute', left: left, top: top }).show();
-						}
+							this.events.imageEditing = false;
 
-						this.core.setCallback('dropdownShown', { dropdown: $dropdown, key: key, button: $button });
+						}, this), 500);
 
-						this.$dropdown = $dropdown;
-					}
+					}, this));
+				},
+				init: function()
+				{
+					this.core.editor().on('dragover.redactor dragenter.redactor', $.proxy(this.events.dragover, this));
+					this.core.editor().on('dragleave.redactor', $.proxy(this.events.dragleave, this));
+					this.core.editor().on('drop.redactor', $.proxy(this.events.drop, this));
+					this.core.editor().on('click.redactor', $.proxy(this.events.click, this));
+					this.core.editor().on('paste.redactor', $.proxy(this.paste.init, this));
+					this.core.editor().on('keydown.redactor', $.proxy(this.keydown.init, this));
+					this.core.editor().on('keyup.redactor', $.proxy(this.keyup.init, this));
+					this.core.editor().on('focus.redactor', $.proxy(this.events.focus, this));
 
+					$(document).on('mousedown.redactor-blur.' + this.uuid, $.proxy(this.events.blur, this));
 
-					$(document).one('click.redactor-dropdown', $.proxy(this.dropdown.hide, this));
-					this.$editor.one('click.redactor-dropdown', $.proxy(this.dropdown.hide, this));
-					$(document).one('keyup.redactor-dropdown', $.proxy(this.dropdown.closeHandler, this));
+					this.events.touchImageEditing();
 
-					// disable scroll whan dropdown scroll
-					$dropdown.on('mouseover.redactor-dropdown', $.proxy(this.utils.disableBodyScroll, this)).on('mouseout.redactor-dropdown', $.proxy(this.utils.enableBodyScroll, this));
+					this.events.createObserver();
+					this.events.setupObserver();
 
-					e.stopPropagation();
 				},
-				closeHandler: function(e)
+				createObserver: function()
 				{
-					if (e.which != this.keyCode.ESC) return;
+					var self = this;
+					this.events.observer = new MutationObserver(function(mutations)
+					{
+						mutations.forEach($.proxy(self.events.iterateObserver, self));
+					});
 
-					this.dropdown.hideAll();
-					this.$editor.focus();
 				},
-				hideAll: function()
+				iterateObserver: function(mutation)
 				{
-					this.$toolbar.find('a.dropact').removeClass('redactor-act').removeClass('dropact');
 
-					this.utils.enableBodyScroll();
+					var stop = false;
+
+					// target
+					if (((this.opts.type === 'textarea' || this.opts.type === 'div')
+					    && (!this.detect.isFirefox() && mutation.target === this.core.editor()[0]))
+					    || (mutation.attributeName === 'class' && mutation.target === this.core.editor()[0])
+					    || (mutation.attributeName == 'data-vivaldi-spatnav-clickable')
+                    )
+					{
+						stop = true;
+					}
 
-					$('.redactor-dropdown-' + this.uuid).hide();
-					$('.redactor-dropdown-link-selected').removeClass('redactor-dropdown-link-selected');
+					if (!stop)
+					{
+    					this.observe.load();
+						this.events.changeHandler();
+					}
+				},
+				setupObserver: function()
+				{
+					this.events.observer.observe(this.core.editor()[0], {
+						 attributes: true,
+						 subtree: true,
+						 childList: true,
+						 characterData: true,
+						 characterDataOldValue: true
+					});
+				},
+				changeHandler: function()
+				{
+					if (this.events.stopChanges)
+					{
+						return;
+					}
 
+					this.code.sync();
 
-					if (this.$dropdown)
+					// autosave
+					if (this.autosave.is())
 					{
-						this.$dropdown.off('.redactor-dropdown');
-						this.core.setCallback('dropdownHide', this.$dropdown);
 
-						this.$dropdown = false;
+						clearTimeout(this.autosaveTimeout);
+						this.autosaveTimeout = setTimeout($.proxy(this.autosave.send, this), 300);
 					}
+
 				},
-				hide: function (e)
+				onDropUpload: function(e)
 				{
-					var $dropdown = $(e.target);
+					e.preventDefault();
+					e.stopPropagation();
 
-					if (!$dropdown.hasClass('dropact') && !$dropdown.hasClass('redactor-dropdown-link-inactive'))
+					if ((!this.opts.dragImageUpload && !this.opts.dragFileUpload) || (this.opts.imageUpload === null && this.opts.fileUpload === null))
 					{
-						if ($dropdown.hasClass('redactor-dropdown'))
-						{
-							$dropdown.removeClass('dropact');
-							$dropdown.off('mouseover mouseout');
-						}
+						return;
+					}
 
-						this.dropdown.hideAll();
+					if (e.target.tagName === 'IMG')
+					{
+						this.events.dropImage = e.target;
 					}
+
+					var files = e.dataTransfer.files;
+                    var len = files.length;
+					for (var i = 0; i < len; i++)
+					{
+    					this.upload.directUpload(files[i], e);
+    				}
+				},
+				onDrop: function(e)
+				{
+					this.core.callback('drop', e);
+				},
+				isCallback: function(name)
+				{
+					return (typeof this.opts.callbacks[name] !== 'undefined' && $.isFunction(this.opts.callbacks[name]));
+				},
+
+				// #backward
+				stopDetect: function()
+				{
+					this.events.stopDetectChanges();
+				},
+				startDetect: function()
+				{
+					this.events.startDetectChanges();
 				}
+
 			};
 		},
+
+		// =file
 		file: function()
 		{
 			return {
+				is: function()
+				{
+					return !(!this.opts.fileUpload || !this.opts.fileUpload && !this.opts.s3);
+				},
 				show: function()
 				{
+					// build modal
 					this.modal.load('file', this.lang.get('file'), 700);
-					this.upload.init('#redactor-modal-file-upload', this.opts.fileUpload, this.file.insert);
-
-					this.selection.save();
 
-					this.selection.get();
-					var text = this.sel.toString();
+					// build upload
+					this.upload.init('#redactor-modal-file-upload', this.opts.fileUpload, this.file.insert);
 
-					$('#redactor-filename').val(text);
+					// set selected text
+					$('#redactor-filename').val(this.selection.get().toString());
 
+					// show
 					this.modal.show();
 				},
 				insert: function(json, direct, e)
 				{
 					// error callback
-					if (typeof json.error != 'undefined')
+					if (typeof json.error !== 'undefined')
 					{
 						this.modal.close();
-						this.selection.restore();
-						this.core.setCallback('fileUploadError', json);
+						this.core.callback('fileUploadError', json);
 						return;
 					}
 
-					var link;
-					if (typeof json == 'string')
-					{
-						link = json;
-					}
-					else
-					{
-						var text = $('#redactor-filename').val();
-						if (typeof text == 'undefined' || text === '') text = json.filename;
+					this.file.release(e, direct);
+
+					// prepare
+					this.buffer.set();
+					this.air.collapsed();
 
-						link = '<a href="' + json.filelink + '" id="filelink-marker">' + text + '</a>';
+					// get
+					var text = this.file.text(json);
+					var $link = $('<a />').attr('href', json.url).text(text);
+					var id = (typeof json.id === 'undefined') ? '' : json.id;
+					var type = (typeof json.s3 === 'undefined') ? 'file' : 's3';
+
+					// set id
+					$link.attr('data-' + type, id);
+
+					// insert
+					$link = $(this.insert.node($link));
+
+					// focus
+					this.caret.after($link);
+
+					// callback
+					this.storage.add({ type: type, node: $link[0], url: json.url, id: id });
+
+					if (direct !== null)
+					{
+						this.core.callback('fileUpload', $link, json);
 					}
 
+				},
+				release: function(e, direct)
+				{
 					if (direct)
 					{
-						this.selection.removeMarkers();
-						var marker = this.selection.getMarker();
-						this.insert.nodeToCaretPositionFromPoint(e, marker);
+						// drag and drop upload
+						this.marker.remove();
+						this.insert.nodeToPoint(e, this.marker.get());
+						this.selection.restore();
 					}
 					else
 					{
+						// upload from modal
 						this.modal.close();
 					}
+				},
+				text: function(json)
+				{
+					var text = $('#redactor-filename').val();
 
-					this.selection.restore();
-					this.buffer.set();
-
-					this.insert.htmlWithoutClean(link);
-
-					if (typeof json == 'string') return;
-
-					var linkmarker = $(this.$editor.find('a#filelink-marker'));
-					if (linkmarker.length !== 0)
-					{
-						linkmarker.removeAttr('id').removeAttr('style');
-					}
-					else linkmarker = false;
-
-					this.core.setCallback('fileUpload', linkmarker, json);
-
+					return (typeof text === 'undefined' || text === '') ? json.name : text;
 				}
 			};
 		},
+
+		// =focus
 		focus: function()
 		{
 			return {
-				setStart: function()
+				start: function()
 				{
-					this.$editor.focus();
-
-					var first = this.$editor.children().first();
+					this.core.editor().focus();
 
-					if (first.length === 0) return;
-					if (first[0].length === 0 || first[0].tagName == 'BR' || first[0].nodeType == 3)
+					if (this.opts.type === 'inline')
 					{
 						return;
 					}
 
-					if (first[0].tagName == 'UL' || first[0].tagName == 'OL')
+					var $first = this.focus.first();
+					if ($first !== false)
 					{
-						var child = first.find('li').first();
-						if (!this.utils.isBlock(child) && child.text() === '')
-						{
-							// empty inline tag in li
-							this.caret.setStart(child);
-							return;
-						}
+						this.caret.start($first);
 					}
+				},
+				end: function()
+				{
+					this.core.editor().focus();
 
-					if (this.opts.linebreaks && !this.utils.isBlockTag(first[0].tagName))
+					var last = (this.opts.inline) ? this.core.editor() : this.focus.last();
+					if (last.length === 0)
 					{
-						this.selection.get();
-						this.range.setStart(this.$editor[0], 0);
-						this.range.setEnd(this.$editor[0], 0);
-						this.selection.addRange();
-
 						return;
 					}
 
-					// if node is tag
-					this.caret.setStart(first);
-				},
-				setEnd: function()
-				{
-					var last = this.$editor.children().last();
-					this.$editor.focus();
-
-					if (last.size() === 0) return;
-					if (this.utils.isEmpty(this.$editor.html()))
+					// get inline last node
+					var lastNode = this.focus.lastChild(last);
+					if (!this.detect.isWebkit() && lastNode !== false)
 					{
-
-						this.selection.get();
-						this.range.collapse(true);
-						this.range.setStartAfter(last[0]);
-						this.range.setEnd(last[0], 0);
-						this.selection.addRange();
+						this.caret.end(lastNode);
 					}
 					else
 					{
-						this.selection.get();
-						this.range.selectNodeContents(last[0]);
-						this.range.collapse(false);
-						this.selection.addRange();
+						var sel = this.selection.get();
+						var range = this.selection.range(sel);
+
+						if (range !== null)
+						{
+							range.selectNodeContents(last[0]);
+							range.collapse(false);
+
+							this.selection.update(sel, range);
+						}
+						else
+						{
+							this.caret.end(last);
+						}
+					}
+
+				},
+				first: function()
+				{
+					var $first = this.core.editor().children().first();
+					if ($first.length === 0 && ($first[0].length === 0 || $first[0].tagName === 'BR' || $first[0].tagName === 'HR' || $first[0].nodeType === 3))
+					{
+						return false;
+					}
 
+					if ($first[0].tagName === 'UL' || $first[0].tagName === 'OL')
+					{
+						return $first.find('li').first();
 					}
+
+					return $first;
+
+				},
+				last: function()
+				{
+					return this.core.editor().children().last();
+				},
+				lastChild: function(last)
+				{
+					var lastNode = last[0].lastChild;
+
+					return (lastNode !== null && this.utils.isInlineTag(lastNode.tagName)) ? lastNode : false;
 				},
-				isFocused: function()
+				is: function()
 				{
-					return this.$editor[0] === document.activeElement;
+					return (this.core.editor()[0] === document.activeElement);
 				}
 			};
 		},
+
+		// =image
 		image: function()
 		{
 			return {
-				show: function()
+				is: function()
 				{
-					this.modal.load('image', this.lang.get('image'), 700);
-					this.upload.init('#redactor-modal-image-droparea', this.opts.imageUpload, this.image.insert);
-
-					this.selection.save();
-					this.modal.show();
-
+					return !(!this.opts.imageUpload || !this.opts.imageUpload && !this.opts.s3);
 				},
-				showEdit: function($image)
+				show: function()
 				{
-					var $link = $image.closest('a', this.$editor[0]);
-
-					this.modal.load('imageEdit', this.lang.get('edit'), 705);
-
-					this.modal.createCancelButton();
-					this.image.buttonDelete = this.modal.createDeleteButton(this.lang.get('_delete'));
-					this.image.buttonSave = this.modal.createActionButton(this.lang.get('save'));
-
-					this.image.buttonDelete.on('click', $.proxy(function()
-					{
-						this.image.remove($image);
-
-					}, this));
-
-					this.image.buttonSave.on('click', $.proxy(function()
-					{
-						this.image.update($image);
-
-					}, this));
-
-					// hide link's tooltip
-					$('.redactor-link-tooltip').remove();
-
-					$('#redactor-image-title').val($image.attr('alt'));
-
-					if (!this.opts.imageLink) $('.redactor-image-link-option').hide();
-					else
-					{
-						var $redactorImageLink = $('#redactor-image-link');
-
-						$redactorImageLink.attr('href', $image.attr('src'));
-						if ($link.length !== 0)
-						{
-							$redactorImageLink.val($link.attr('href'));
-							if ($link.attr('target') == '_blank') $('#redactor-image-link-blank').prop('checked', true);
-						}
-					}
-
-					if (!this.opts.imagePosition) $('.redactor-image-position-option').hide();
-					else
-					{
-						var floatValue = ($image.css('display') == 'block' && $image.css('float') == 'none') ? 'center' : $image.css('float');
-						$('#redactor-image-align').val(floatValue);
-					}
+					// build modal
+					this.modal.load('image', this.lang.get('image'), 700);
 
+					// build upload
+					this.upload.init('#redactor-modal-image-droparea', this.opts.imageUpload, this.image.insert);
 					this.modal.show();
-					$('#redactor-image-title').focus();
 
 				},
-				setFloating: function($image)
+				insert: function(json, direct, e)
 				{
-					var floating = $('#redactor-image-align').val();
-
-					var imageFloat = '';
-					var imageDisplay = '';
-					var imageMargin = '';
+					var $img;
 
-					switch (floating)
+					// error callback
+					if (typeof json.error !== 'undefined')
 					{
-						case 'left':
-							imageFloat = 'left';
-							imageMargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';
-						break;
-						case 'right':
-							imageFloat = 'right';
-							imageMargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin;
-						break;
-						case 'center':
-							imageDisplay = 'block';
-							imageMargin = 'auto';
-						break;
+						this.modal.close();
+						this.events.dropImage = false;
+						this.core.callback('imageUploadError', json, e);
+						return;
 					}
 
-					$image.css({ 'float': imageFloat, display: imageDisplay, margin: imageMargin });
-					$image.attr('rel', $image.attr('style'));
-				},
-				update: function($image)
-				{
-					this.image.hideResize();
-					this.buffer.set();
+					// change image
+					if (this.events.dropImage !== false)
+					{
+						$img = $(this.events.dropImage);
 
-					var $link = $image.closest('a', this.$editor[0]);
+						this.core.callback('imageDelete', $img[0].src, $img);
 
-					var title = $('#redactor-image-title').val().replace(/(<([^>]+)>)/ig,"");
-					$image.attr('alt', title);
+						$img.attr('src', json.url);
+
+						this.events.dropImage = false;
+						this.core.callback('imageUpload', $img, json);
+						return;
+					}
 
-					this.image.setFloating($image);
+					this.placeholder.hide();
+					var $figure = $('<' + this.opts.imageTag + '>');
 
-					// as link
-					var link = $.trim($('#redactor-image-link').val());
-					var link = link.replace(/(<([^>]+)>)/ig,"");
-					if (link !== '')
+					$img = $('<img>');
+					$img.attr('src', json.url);
+
+					// set id
+					var id = (typeof json.id === 'undefined') ? '' : json.id;
+					var type = (typeof json.s3 === 'undefined') ? 'image' : 's3';
+					$img.attr('data-' + type, id);
+
+					$figure.append($img);
+
+					var pre = this.utils.isTag(this.selection.current(), 'pre');
+
+					if (direct)
 					{
-						// test url (add protocol)
-						var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';
-						var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');
-						var re2 = new RegExp('^' + pattern, 'i');
+						this.air.collapsed();
+						this.marker.remove();
 
-						if (link.search(re) == -1 && link.search(re2) === 0 && this.opts.linkProtocol)
-						{
-							link = this.opts.linkProtocol + '://' + link;
-						}
+						var node = this.insert.nodeToPoint(e, this.marker.get());
+						var $next = $(node).next();
 
-						var target = ($('#redactor-image-link-blank').prop('checked')) ? true : false;
+						this.selection.restore();
 
-						if ($link.length === 0)
+						// buffer
+						this.buffer.set();
+
+						// insert
+						if (typeof $next !== 'undefined' && $next.length !== 0 && $next[0].tagName === 'IMG')
 						{
-							var a = $('<a href="' + link + '">' + this.utils.getOuterHtml($image) + '</a>');
-							if (target) a.attr('target', '_blank');
+							// delete callback
+							this.core.callback('imageDelete', $next[0].src, $next);
 
-							$image.replaceWith(a);
+							// replace
+							$next.closest('figure, p', this.core.editor()[0]).replaceWith($figure);
+							this.caret.after($figure);
 						}
 						else
 						{
-							$link.attr('href', link);
-							if (target)
+							if (pre)
 							{
-								$link.attr('target', '_blank');
+								$(pre).after($figure);
 							}
 							else
 							{
-								$link.removeAttr('target');
+								this.insert.node($figure);
 							}
+
+							this.caret.after($figure);
 						}
+
 					}
-					else if ($link.length !== 0)
+					else
 					{
-						$link.replaceWith(this.utils.getOuterHtml($image));
+						this.modal.close();
 
-					}
+						// buffer
+						this.buffer.set();
 
-					this.modal.close();
-					this.observe.images();
-					this.code.sync();
+						// insert
+						this.air.collapsed();
 
+						if (pre)
+						{
+							$(pre).after($figure);
+						}
+						else
+						{
+							this.insert.node($figure);
+						}
 
-				},
-				setEditable: function($image)
-				{
-					if (this.opts.imageEditable)
-					{
-						$image.on('dragstart', $.proxy(this.image.onDrag, this));
+						this.caret.after($figure);
 					}
 
-					var handler = $.proxy(function(e)
-					{
+					this.events.dropImage = false;
+					this.storage.add({ type: type, node: $img[0], url: json.url, id: id });
 
-						this.observe.image = $image;
+					var nextNode = $img[0].nextSibling;
+					var $nextFigure = $figure.next();
+					var isNextEmpty = $(nextNode).text().replace(/\u200B/g, '');
+					var isNextFigureEmpty = $nextFigure.text().replace(/\u200B/g, '');
 
-						this.image.resizer = this.image.loadEditableControls($image);
+					if (isNextEmpty === '')
+					{
+    					$(nextNode).remove();
+					}
 
-						$(document).on('mousedown.redactor-image-resize-hide.' + this.uuid, $.proxy(this.image.hideResize, this));
+					if ($nextFigure.length === 1 && $nextFigure[0].tagName === 'FIGURE' && isNextFigureEmpty === '')
+					{
+    					$nextFigure.remove();
+					}
 
-						// resize
-						if (!this.opts.imageResizable) return;
+					if (direct !== null)
+					{
+						this.core.callback('imageUpload', $img, json);
+					}
+					else
+					{
+    					this.core.callback('imageInserted', $img, json);
+					}
+				},
+				setEditable: function($image)
+				{
+					$image.on('dragstart', function(e)
+					{
+						e.preventDefault();
+					});
 
-						this.image.resizer.on('mousedown.redactor touchstart.redactor', $.proxy(function(e)
-						{
-							this.image.setResizable(e, $image);
-						}, this));
+                    if (this.opts.imageResizable)
+                    {
+    					var handler = $.proxy(function(e)
+    					{
+    						this.observe.image = $image;
+    						this.image.resizer = this.image.loadEditableControls($image);
+
+    						$(document).on('mousedown.redactor-image-resize-hide.' + this.uuid, $.proxy(this.image.hideResize, this));
+
+    						if (this.image.resizer)
+    						{
+                                this.image.resizer.on('mousedown.redactor touchstart.redactor', $.proxy(function(e)
+        						{
+        							this.image.setResizable(e, $image);
+        						}, this));
+    						}
+
+    					}, this);
+
+    					$image.off('mousedown.redactor').on('mousedown.redactor', $.proxy(this.image.hideResize, this));
+    					$image.off('click.redactor touchstart.redactor').on('click.redactor touchstart.redactor', handler);
+                    }
+                    else
+                    {
+    					$image.off('click.redactor touchstart.redactor').on('click.redactor touchstart.redactor', $.proxy(function(e)
+    					{
+    						setTimeout($.proxy(function()
+    						{
+    							this.image.showEdit($image);
 
-					}, this);
+    						}, this), 200);
 
+    					}, this));
+                    }
 
-					$image.off('mousedown.redactor').on('mousedown.redactor', $.proxy(this.image.hideResize, this));
-					$image.off('click.redactor touchstart.redactor').on('click.redactor touchstart.redactor', handler);
 				},
 				setResizable: function(e, $image)
 				{
@@ -3870,8 +4837,6 @@
 
 					if (height < 50 || width < 100) return;
 
-					var height = Math.round(this.image.resizeHandle.el.width() / this.image.resizeHandle.ratio);
-
 					this.image.resizeHandle.el.attr({width: width, height: height});
 		            this.image.resizeHandle.el.width(width);
 		            this.image.resizeHandle.el.height(height);
@@ -3885,44 +4850,12 @@
 
 					this.image.hideResize();
 				},
-				onDrag: function(e)
-				{
-					if (this.$editor.find('#redactor-image-box').length !== 0)
-					{
-						e.preventDefault();
-						return false;
-					}
-
-					this.$editor.on('drop.redactor-image-inside-drop', $.proxy(function()
-					{
-						setTimeout($.proxy(this.image.onDrop, this), 1);
-
-					}, this));
-				},
-				onDrop: function()
-				{
-					this.image.fixImageSourceAfterDrop();
-					this.observe.images();
-					this.$editor.off('drop.redactor-image-inside-drop');
-					this.clean.clearUnverified();
-					this.code.sync();
-				},
-				fixImageSourceAfterDrop: function()
-				{
-					this.$editor.find('img[data-save-url]').each(function()
-					{
-						var $el = $(this);
-						$el.attr('src', $el.attr('data-save-url'));
-						$el.removeAttr('data-save-url');
-					});
-				},
-				hideResize: function(e)
+                hideResize: function(e)
 				{
 					if (e && $(e.target).closest('#redactor-image-box', this.$editor[0]).length !== 0) return;
 					if (e && e.target.tagName == 'IMG')
 					{
 						var $image = $(e.target);
-						$image.attr('data-save-url', $image.attr('src'));
 					}
 
 					var imageBox = this.$editor.find('#redactor-image-box');
@@ -3945,98 +4878,320 @@
 						return $(this).contents();
 					});
 
-					$(document).off('mousedown.redactor-image-resize-hide.' + this.uuid);
+					$(document).off('mousedown.redactor-image-resize-hide.' + this.uuid);
+
+					if (typeof this.image.resizeHandle !== 'undefined')
+					{
+						this.image.resizeHandle.el.attr('rel', this.image.resizeHandle.el.attr('style'));
+					}
+				},
+				loadResizableControls: function($image, imageBox)
+				{
+					if (this.opts.imageResizable && !this.detect.isMobile())
+					{
+						var imageResizer = $('<span id="redactor-image-resizer" data-redactor="verified"></span>');
+
+						if (!this.detect.isDesktop())
+						{
+							imageResizer.css({ width: '15px', height: '15px' });
+						}
+
+						imageResizer.attr('contenteditable', false);
+						imageBox.append(imageResizer);
+						imageBox.append($image);
+
+						return imageResizer;
+					}
+					else
+					{
+						imageBox.append($image);
+						return false;
+					}
+				},
+				loadEditableControls: function($image)
+				{
+    				if ($('#redactor-image-box').length !== 0)
+    				{
+        				return;
+    				}
+
+					var imageBox = $('<span id="redactor-image-box" data-redactor="verified">');
+					imageBox.css('float', $image.css('float')).attr('contenteditable', false);
+
+					if ($image[0].style.margin != 'auto')
+					{
+						imageBox.css({
+							marginTop: $image[0].style.marginTop,
+							marginBottom: $image[0].style.marginBottom,
+							marginLeft: $image[0].style.marginLeft,
+							marginRight: $image[0].style.marginRight
+						});
+
+						$image.css('margin', '');
+					}
+					else
+					{
+						imageBox.css({ 'display': 'block', 'margin': 'auto' });
+					}
+
+					$image.css('opacity', '.5').after(imageBox);
+
+
+					if (this.opts.imageEditable)
+					{
+						// editter
+						this.image.editter = $('<span id="redactor-image-editter" data-redactor="verified">' + this.lang.get('edit') + '</span>');
+						this.image.editter.attr('contenteditable', false);
+						this.image.editter.on('click', $.proxy(function()
+						{
+							this.image.showEdit($image);
+						}, this));
+
+						imageBox.append(this.image.editter);
+
+						// position correction
+						var editerWidth = this.image.editter.innerWidth();
+						this.image.editter.css('margin-left', '-' + editerWidth/2 + 'px');
+					}
+
+					return this.image.loadResizableControls($image, imageBox);
+
+				},
+				showEdit: function($image)
+				{
+					if (this.events.imageEditing)
+					{
+						return;
+					}
+
+					this.observe.image = $image;
+
+					var $link = $image.closest('a', this.$editor[0]);
+    				var $figure = $image.closest('figure', this.$editor[0]);
+    				var $container = ($figure.length !== 0) ? $figure : $image;
+
+					this.modal.load('image-edit', this.lang.get('edit'), 705);
+
+					this.image.buttonDelete = this.modal.getDeleteButton().text(this.lang.get('delete'));
+					this.image.buttonSave = this.modal.getActionButton().text(this.lang.get('save'));
+
+					this.image.buttonDelete.on('click', $.proxy(this.image.remove, this));
+					this.image.buttonSave.on('click', $.proxy(this.image.update, this));
+
+					if (this.opts.imageCaption === false)
+					{
+						$('#redactor-image-caption').val('').hide().prev().hide();
+					}
+					else
+					{
+						var $parent = $image.closest(this.opts.imageTag, this.$editor[0]);
+						var $ficaption = $parent.find('figcaption');
+						if ($ficaption !== 0)
+						{
+
+							$('#redactor-image-caption').val($ficaption.text()).show();
+						}
+					}
+
+					if (!this.opts.imagePosition)
+					{
+    					$('.redactor-image-position-option').hide();
+    				}
+					else
+					{
+    					var isCentered = ($figure.length !== 0) ? ($container.css('text-align') === 'center') : ($container.css('display') == 'block' && $container.css('float') == 'none');
+						var floatValue = (isCentered) ? 'center' : $container.css('float');
+						$('#redactor-image-align').val(floatValue);
+					}
+
+					$('#redactor-image-preview').html($('<img src="' + $image.attr('src') + '" style="max-width: 100%;">'));
+					$('#redactor-image-title').val($image.attr('alt'));
+
+					if ($link.length !== 0)
+					{
+						$('#redactor-image-link').val($link.attr('href'));
+						if ($link.attr('target') === '_blank')
+						{
+							$('#redactor-image-link-blank').prop('checked', true);
+						}
+					}
+
+					// hide link's tooltip
+					$('.redactor-link-tooltip').remove();
+
+					this.modal.show();
+
+					// focus
+					if (this.detect.isDesktop())
+					{
+						$('#redactor-image-title').focus();
+					}
+
+				},
+				update: function()
+				{
+					var $image = this.observe.image;
+					var $link = $image.closest('a', this.core.editor()[0]);
+
+					var title = $('#redactor-image-title').val().replace(/(<([^>]+)>)/ig,"");
+					$image.attr('alt', title).attr('title', title);
+
+                    this.image.setFloating($image);
+
+					// as link
+					var link = $.trim($('#redactor-image-link').val()).replace(/(<([^>]+)>)/ig,"");
+					if (link !== '')
+					{
+						// test url (add protocol)
+						var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';
+						var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');
+						var re2 = new RegExp('^' + pattern, 'i');
+
+						if (link.search(re) === -1 && link.search(re2) === 0 && this.opts.linkProtocol)
+						{
+							link = this.opts.linkProtocol + '://' + link;
+						}
+
+						var target = ($('#redactor-image-link-blank').prop('checked')) ? true : false;
+
+						if ($link.length === 0)
+						{
+							var a = $('<a href="' + link + '" id="redactor-img-tmp">' + this.utils.getOuterHtml($image) + '</a>');
+							if (target)
+							{
+								a.attr('target', '_blank');
+							}
+
+							$image = $image.replaceWith(a);
+							$link = this.core.editor().find('#redactor-img-tmp');
+							$link.removeAttr('id');
+						}
+						else
+						{
+							$link.attr('href', link);
+							if (target)
+							{
+								$link.attr('target', '_blank');
+							}
+							else
+							{
+								$link.removeAttr('target');
+							}
+						}
+					}
+					else if ($link.length !== 0)
+					{
+						$link.replaceWith(this.utils.getOuterHtml($image));
+					}
+
+                    this.image.addCaption($image, $link);
+					this.modal.close();
 
+					// buffer
+					this.buffer.set();
 
-					if (typeof this.image.resizeHandle !== 'undefined')
+				},
+				setFloating: function($image)
+				{
+    				var $figure = $image.closest('figure', this.$editor[0]);
+    				var $container = ($figure.length !== 0) ? $figure : $image;
+					var floating = $('#redactor-image-align').val();
+
+					var imageFloat = '';
+					var imageDisplay = '';
+					var imageMargin = '';
+					var textAlign = '';
+
+					switch (floating)
 					{
-						this.image.resizeHandle.el.attr('rel', this.image.resizeHandle.el.attr('style'));
-					}
+						case 'left':
+							imageFloat = 'left';
+							imageMargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';
+						break;
+						case 'right':
+							imageFloat = 'right';
+							imageMargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin;
+						break;
+						case 'center':
 
-					this.code.sync();
+                            if ($figure.length !== 0)
+                            {
+                                textAlign = 'center';
+                            }
+                            else
+                            {
+	    						imageDisplay = 'block';
+    							imageMargin = 'auto';
+							}
 
+						break;
+					}
+
+					$container.css({ 'float': imageFloat, 'display': imageDisplay, 'margin': imageMargin, 'text-align': textAlign });
+					$container.attr('rel', $image.attr('style'));
 				},
-				loadResizableControls: function($image, imageBox)
+				addCaption: function($image, $link)
 				{
-					if (this.opts.imageResizable && !this.utils.isMobile())
+                    var caption = $('#redactor-image-caption').val();
+
+                    var $target = ($link.length !== 0) ? $link : $image;
+					var $figcaption = $target.next();
+
+					if ($figcaption.length === 0 || $figcaption[0].tagName !== 'FIGCAPTION')
 					{
-						var imageResizer = $('<span id="redactor-image-resizer" data-redactor="verified"></span>');
+						$figcaption = false;
+					}
 
-						if (!this.utils.isDesktop())
+					if (caption !== '')
+					{
+						if ($figcaption === false)
 						{
-							imageResizer.css({ width: '15px', height: '15px' });
+							$figcaption = $('<figcaption />').text(caption);
+							$target.after($figcaption);
+						}
+						else
+						{
+							$figcaption.text(caption);
 						}
-
-						imageResizer.attr('contenteditable', false);
-						imageBox.append(imageResizer);
-						imageBox.append($image);
-
-						return imageResizer;
 					}
-					else
+					else if ($figcaption !== false)
 					{
-						imageBox.append($image);
-						return false;
+						$figcaption.remove();
 					}
 				},
-				loadEditableControls: function($image)
+				remove: function(e, $image, index)
 				{
-					var imageBox = $('<span id="redactor-image-box" data-redactor="verified">');
-					imageBox.css('float', $image.css('float')).attr('contenteditable', false);
-
-					if ($image[0].style.margin != 'auto')
-					{
-						imageBox.css({
-							marginTop: $image[0].style.marginTop,
-							marginBottom: $image[0].style.marginBottom,
-							marginLeft: $image[0].style.marginLeft,
-							marginRight: $image[0].style.marginRight
-						});
+					$image = (typeof $image === 'undefined') ? $(this.observe.image) : $image;
 
-						$image.css('margin', '');
-					}
-					else
+					// delete from modal
+					if (typeof e !== 'boolean')
 					{
-						imageBox.css({ 'display': 'block', 'margin': 'auto' });
+						this.buffer.set();
 					}
 
-					$image.css('opacity', '.5').after(imageBox);
+					this.events.stopDetectChanges();
 
+					var $link = $image.closest('a', this.core.editor()[0]);
+					var $figure = $image.closest(this.opts.imageTag, this.core.editor()[0]);
+					var $parent = $image.parent();
 
-					if (this.opts.imageEditable)
+					// callback
+                    var imageDeleteStop = this.core.callback('imageDelete', e, $image[0]);
+					if (imageDeleteStop === false)
 					{
-						// editter
-						this.image.editter = $('<span id="redactor-image-editter" data-redactor="verified">' + this.lang.get('edit') + '</span>');
-						this.image.editter.attr('contenteditable', false);
-						this.image.editter.on('click', $.proxy(function()
-						{
-							this.image.showEdit($image);
-						}, this));
-
-						imageBox.append(this.image.editter);
-
-						// position correction
-						var editerWidth = this.image.editter.innerWidth();
-						this.image.editter.css('margin-left', '-' + editerWidth/2 + 'px');
+						if (e) e.preventDefault();
+						return false;
 					}
 
-					return this.image.loadResizableControls($image, imageBox);
-
-				},
-				remove: function(image)
-				{
-					var $image = $(image);
-					var $link = $image.closest('a', this.$editor[0]);
-					var $figure = $image.closest('figure', this.$editor[0]);
-					var $parent = $image.parent();
 					if ($('#redactor-image-box').length !== 0)
 					{
 						$parent = $('#redactor-image-box').parent();
 					}
 
-					var $next;
+					var $next, $prev;
 					if ($figure.length !== 0)
 					{
+						$prev = $figure.prev();
 						$next = $figure.next();
 						$figure.remove();
 					}
@@ -4052,877 +5207,1296 @@
 
 					$('#redactor-image-box').remove();
 
-					if ($figure.length !== 0)
+					if (e !== false)
 					{
-						this.caret.setStart($next);
+						if ($next && $next.length !== 0)
+						{
+							this.caret.start($next);
+						}
+						else if ($prev && $prev.length !== 0)
+						{
+                            this.caret.end($prev);
+						}
 					}
-					else
+
+					if (typeof e !== 'boolean')
 					{
-						this.caret.setStart($parent);
+						this.modal.close();
 					}
 
-					// delete callback
-					this.core.setCallback('imageDelete', $image[0].src, $image);
-
-					this.modal.close();
+					this.utils.restoreScroll();
+					this.observe.image = false;
+					this.events.startDetectChanges();
+					this.placeholder.enable();
 					this.code.sync();
-				},
-				insert: function(json, direct, e)
+
+				}
+			};
+		},
+
+		// =indent
+		indent: function()
+		{
+			return {
+				increase: function()
 				{
-					// error callback
-					if (typeof json.error != 'undefined')
+					if (!this.list.get())
 					{
-						this.modal.close();
-						this.selection.restore();
-						this.core.setCallback('imageUploadError', json);
 						return;
 					}
 
-					var $img;
-					if (typeof json == 'string')
-					{
-						$img = $(json).attr('data-redactor-inserted-image', 'true');
-					}
-					else
+					var $current = $(this.selection.current()).closest('li');
+					var $list = $current.closest('ul, ol', this.core.editor()[0]);
+
+					var $li = $current.closest('li');
+					var $prev = $li.prev();
+					if ($prev.length === 0 || $prev[0].tagName !== 'LI')
 					{
-						$img = $('<img>');
-						$img.attr('src', json.filelink).attr('data-redactor-inserted-image', 'true');
+						return;
 					}
 
+					this.buffer.set();
 
-					var node = $img;
-					var isP = this.utils.isCurrentOrParent('P');
-					if (isP)
-					{
-						// will replace
-						node = $('<blockquote />').append($img);
-					}
 
-					if (direct)
+					if (this.utils.isCollapsed())
 					{
-						this.selection.removeMarkers();
-						var marker = this.selection.getMarker();
-						this.insert.nodeToCaretPositionFromPoint(e, marker);
-					}
-					else
-					{
-						this.modal.close();
-					}
-
-					this.selection.restore();
-					this.buffer.set();
+						var listTag = $list[0].tagName;
+						var $newList = $('<' + listTag + ' />');
 
-					this.insert.html(this.utils.getOuterHtml(node), false);
+						this.selection.save();
 
-					var $image = this.$editor.find('img[data-redactor-inserted-image=true]').removeAttr('data-redactor-inserted-image');
+                        var $ol = $prev.find('ol').first();
+                        if ($ol.length === 1)
+                        {
+                            $ol.append($current);
+                        }
+                        else
+                        {
+                            var listTag = $list[0].tagName;
+                            var $newList = $('<' + listTag + ' />');
+                            $newList.append($current);
+                            $prev.append($newList);
+                        }
 
-					if (isP)
-					{
-						$image.parent().contents().unwrap().wrap('<p />');
+						this.selection.restore();
 					}
-					else if (this.opts.linebreaks)
+					else
 					{
-						if (!this.utils.isEmpty(this.code.get()))
-						{
-							$image.before('<br>');
-						}
+						document.execCommand('indent');
 
-						$image.after('<br>');
+						// normalize
+						this.selection.save();
+						this.indent.removeEmpty();
+						this.indent.normalize();
+						this.selection.restore();
 					}
-
-					if (typeof json == 'string') return;
-
-					this.core.setCallback('imageUpload', $image, json);
-
-				}
-			};
-		},
-		indent: function()
-		{
-			return {
-				increase: function()
+				},
+				decrease: function()
 				{
-					// focus
-					if (!this.utils.browser('msie')) this.$editor.focus();
+					if (!this.list.get())
+					{
+						return;
+					}
+
+					var $current = $(this.selection.current()).closest('li');
+					var $list = $current.closest('ul, ol', this.core.editor()[0]);
 
 					this.buffer.set();
-					this.selection.save();
 
-					var block = this.selection.getBlock();
+					document.execCommand('outdent');
 
-					if (block && block.tagName == 'LI')
-					{
-						this.indent.increaseLists();
-					}
-					else if (block === false && this.opts.linebreaks)
+					var $item = $(this.selection.current()).closest('li', this.core.editor()[0]);
+
+					if (this.utils.isCollapsed())
 					{
-						this.indent.increaseText();
+						this.indent.repositionItem($item);
 					}
-					else
+
+					if ($item.length === 0)
 					{
-						this.indent.increaseBlocks();
+						document.execCommand('formatblock', false, 'p');
+						$item = $(this.selection.current());
+						var $next = $item.next();
+						if ($next.length !== 0 && $next[0].tagName === 'BR')
+						{
+							$next.remove();
+						}
 					}
 
+					// normalize
+					this.selection.save();
+					this.indent.removeEmpty();
+					this.indent.normalize();
 					this.selection.restore();
-					this.code.sync();
+
 				},
-				increaseLists: function()
+				repositionItem: function($item)
 				{
-					document.execCommand('indent');
-
-					this.indent.fixEmptyIndent();
-					this.clean.normalizeLists();
-					this.clean.clearUnverified();
+    				var $next = $item.next();
+    				if ($next.length !== 0 && ($next[0].tagName !== 'UL' || $next[0].tagName !== 'OL'))
+    				{
+        				$item.append($next);
+    				}
+
+					var $prev = $item.prev();
+					if ($prev.length !== 0 && $prev[0].tagName !== 'LI')
+					{
+						this.selection.save();
+						var $li = $item.parents('li', this.core.editor()[0]);
+						$li.after($item);
+						this.selection.restore();
+					}
 				},
-				increaseBlocks: function()
+				normalize: function()
 				{
-					$.each(this.selection.getBlocks(), $.proxy(function(i, elem)
+					this.core.editor().find('li').each($.proxy(function(i,s)
 					{
-						if (elem.tagName === 'TD' || elem.tagName === 'TH') return;
+						var $el = $(s);
 
-						var $el = this.utils.getAlignmentElement(elem);
+						// remove style
+                        var filter = '';
+                        if (this.opts.keepStyleAttr.length !== 0)
+                        {
+                            filter = ',' + this.opts.keepStyleAttr.join(',');
+                        }
 
-						var left = this.utils.normalize($el.css('margin-left')) + this.opts.indentValue;
-						$el.css('margin-left', left + 'px');
+						$el.find(this.opts.inlineTags.join(',')).not('img' + filter).removeAttr('style');
 
-					}, this));
-				},
-				increaseText: function()
-				{
-					var wrapper = this.selection.wrap('div');
-					$(wrapper).attr('data-tagblock', 'redactor');
-					$(wrapper).css('margin-left', this.opts.indentValue + 'px');
-				},
-				decrease: function()
-				{
-					this.buffer.set();
-					this.selection.save();
+						var $parent = $el.parent();
+						if ($parent.length !== 0 && $parent[0].tagName === 'LI')
+						{
+							$parent.after($el);
+							return;
+						}
 
-					var block = this.selection.getBlock();
-					if (block && block.tagName == 'LI')
-					{
-						this.indent.decreaseLists();
-					}
-					else
-					{
-						this.indent.decreaseBlocks();
-					}
+						var $next = $el.next();
+						if ($next.length !== 0 && ($next[0].tagName === 'UL' || $next[0].tagName === 'OL'))
+						{
+							$el.append($next);
+						}
+
+					}, this));
 
-					this.selection.restore();
-					this.code.sync();
 				},
-				decreaseLists: function()
+				removeEmpty: function($list)
 				{
-					document.execCommand('outdent');
+					var $lists = this.core.editor().find('ul, ol');
+					var $items = this.core.editor().find('li');
 
-					var current = this.selection.getCurrent();
-					var $item = $(current).closest('li', this.$editor[0]);
+					$items.each($.proxy(function(i, s)
+					{
+						this.indent.removeItemEmpty(s);
 
-					this.indent.fixEmptyIndent();
+					}, this));
 
-					if (!this.opts.linebreaks && $item.length === 0)
+					$lists.each($.proxy(function(i, s)
 					{
-						document.execCommand('formatblock', false, 'p');
-						this.$editor.find('ul, ol, blockquote, p').each($.proxy(this.utils.removeEmpty, this));
-					}
+						this.indent.removeItemEmpty(s);
 
-					this.clean.clearUnverified();
-				},
-				decreaseBlocks: function()
-				{
-					$.each(this.selection.getBlocks(), $.proxy(function(i, elem)
-					{
-						var $el = this.utils.getAlignmentElement(elem);
-						var left = this.utils.normalize($el.css('margin-left')) - this.opts.indentValue;
+					}, this));
 
-						if (left <= 0)
-						{
-							if (this.opts.linebreaks && typeof($el.data('tagblock')) !== 'undefined')
-							{
-								$el.replaceWith($el.html() + '<br />');
-							}
-							else
-							{
-								$el.css('margin-left', '');
-								this.utils.removeEmptyAttr($el, 'style');
-							}
-						}
-						else
-						{
-							$el.css('margin-left', left + 'px');
-						}
+					$items.each($.proxy(function(i, s)
+					{
+						this.indent.removeItemEmpty(s);
 
 					}, this));
 				},
-				fixEmptyIndent: function()
+				removeItemEmpty: function(s)
 				{
-					var block = this.selection.getBlock();
+					var html = s.innerHTML.replace(/[\t\s\n]/g, '');
+					html = html.replace(/<span><\/span>/g, '');
 
-					if (this.range.collapsed && block && block.tagName == 'LI' && this.utils.isEmpty($(block).text()))
+					if (html === '')
 					{
-						var $block = $(block);
-						$block.find('span').not('.redactor-selection-marker').contents().unwrap();
-						$block.append('<br>');
+						$(s).remove();
 					}
 				}
 			};
 		},
+
+		// =inline
 		inline: function()
 		{
 			return {
-				formatting: function(name)
+                format: function(tag, attr, value, type)
 				{
-					var type, value;
+    				// Stop formatting pre/code
+					if (this.utils.isCurrentOrParent(['PRE', 'CODE'])) return;
 
-					if (typeof this.formatting[name].style != 'undefined') type = 'style';
-					else if (typeof this.formatting[name]['class'] != 'undefined') type = 'class';
+					// Get params
+					var params = this.inline.getParams(attr, value, type);
 
-					if (type) value = this.formatting[name][type];
+                    // Arrange tag
+                    tag = this.inline.arrangeTag(tag);
 
-					this.inline.format(this.formatting[name].tag, type, value);
+                    this.placeholder.hide();
+					this.buffer.set();
 
+					(this.utils.isCollapsed()) ? this.inline.formatCollapsed(tag, params) : this.inline.formatUncollapsed(tag, params);
 				},
-				format: function(tag, type, value)
+				formatCollapsed: function(tag, params)
 				{
-					var current = this.selection.getCurrent();
-					if (current && current.tagName === 'TR') return;
-
-					// Stop formatting pre and headers
-					if (this.utils.isCurrentOrParent('PRE') || this.utils.isCurrentOrParentHeader()) return;
-
-					var tags = ['b', 'bold', 'i', 'italic', 'underline', 'strikethrough', 'deleted', 'superscript', 'subscript'];
-					var replaced = ['strong', 'strong', 'em', 'em', 'u', 'del', 'del', 'sup', 'sub'];
-
-					for (var i = 0; i < tags.length; i++)
-					{
-						if (tag == tags[i]) tag = replaced[i];
-					}
-
-
-					if (this.opts.allowedTags)
-					{
-						if ($.inArray(tag, this.opts.allowedTags) == -1) return;
-					}
-					else
-					{
-						if ($.inArray(tag, this.opts.deniedTags) !== -1) return;
-					}
-
-					this.inline.type = type || false;
-					this.inline.value = value || false;
-
-					this.buffer.set();
-
-					if (!this.utils.browser('msie') && !this.opts.linebreaks)
-					{
-						this.$editor.focus();
-					}
+    				var newInline;
+    				var inline = this.selection.inline();
 
-					this.selection.get();
-
-					if (this.range.collapsed)
+    				if (inline)
 					{
-						this.inline.formatCollapsed(tag);
-					}
-					else
+                        var currentTag = inline.tagName.toLowerCase();
+                        if (currentTag === tag)
+						{
+							// empty = remove
+							if (this.utils.isEmpty(inline.innerHTML))
+							{
+								this.caret.after(inline);
+								$(inline).remove();
+							}
+							// not empty = break
+							else
+							{
+								var $first = this.inline.insertBreakpoint(inline, currentTag);
+								this.caret.after($first);
+							}
+						}
+                        else if ($(inline).closest(tag).length === 0)
+                        {
+							newInline = this.inline.insertInline(tag);
+							newInline = this.inline.setParams(newInline, params);
+						}
+						else
+						{
+    						var $first = this.inline.insertBreakpoint(inline, currentTag);
+                            this.caret.after($first);
+						}
+    				}
+    				else
+    				{
+                        newInline = this.inline.insertInline(tag);
+                        newInline = this.inline.setParams(newInline, params);
+    				}
+				},
+				formatUncollapsed: function(tag, params)
+				{
+    				this.selection.save();
+
+                    var nodes = this.inline.getClearedNodes();
+                    this.inline.setNodesStriked(nodes, tag, params);
+
+                    this.selection.restore();
+
+                    document.execCommand('strikethrough');
+
+                    this.selection.saveInstant();
+
+                    var self = this;
+                    this.core.editor().find('strike').each(function()
+    				{
+                        var $el = self.utils.replaceToTag(this, tag);
+        				self.inline.setParams($el[0], params);
+
+        				var $inside = $el.find(tag);
+        				var $parent = $el.parent();
+        				var $parentAround = $parent.parent();
+
+                        // revert formatting (safari bug)
+                        if ($parentAround.length !== 0 && $parentAround[0].tagName.toLowerCase() === tag && $parentAround.html() == $parent[0].outerHTML)
+                        {
+                            $el.replaceWith(function() { return $(this).contents(); });
+                            $parentAround.replaceWith(function() { return $(this).contents(); });
+
+                            return;
+                        }
+
+        				// remove inside
+        				if ($inside.length !== 0) self.inline.cleanInsideOrParent($inside, params);
+
+                        // same parent
+                        if ($parent.html() == $el[0].outerHTML) self.inline.cleanInsideOrParent($parent, params);
+
+                        // bugfix: remove empty inline tags after selection
+                        if (self.detect.isFirefox())
+                        {
+                            self.core.editor().find(tag + ':empty').remove();
+                        }
+    				});
+
+    				this.selection.restoreInstant();
+				},
+				cleanInsideOrParent: function($el, params)
+				{
+                    if (params)
+                    {
+                        for (var key in params.data)
+                        {
+        				    this.inline.removeSpecificAttr($el, key, params.data[key]);
+        				}
+    				}
+				},
+    			getClearedNodes: function()
+    			{
+                    var nodes = this.selection.nodes();
+        			var newNodes = [];
+        			var len = nodes.length;
+                    var started = 0;
+
+                    // find array slice
+                    for (var i = 0; i < len; i++)
+					{
+						if ($(nodes[i]).hasClass('redactor-selection-marker'))
+						{
+    						started = i + 2;
+    						break;
+						}
+					}
+
+                    // find selected inline & text nodes
+                    for (var i = 0; i < len; i++)
+					{
+						if (i >= started && !this.utils.isBlockTag(nodes[i].tagName))
+						{
+                            newNodes.push(nodes[i]);
+						}
+					}
+
+					return newNodes;
+    			},
+                isConvertableAttr: function(node, name, value)
+                {
+                    var nodeAttrValue = $(node).attr(name);
+                    if (nodeAttrValue)
+                    {
+                        if (name === 'style')
+                        {
+                            value = $.trim(value).replace(/;$/, '')
+
+                            var rules = value.split(';');
+                            var count = 0;
+                            for (var i = 0; i < rules.length; i++)
+                            {
+                                var arr = rules[i].split(':');
+                                var ruleName = $.trim(arr[0]);
+                                var ruleValue = $.trim(arr[1]);
+
+                                if (ruleName.search(/color/) !== -1)
+                                {
+                                    var val = $(node).css(ruleName);
+                                    if (val && (val === ruleValue || this.utils.rgb2hex(val) === ruleValue))
+                                    {
+                                        count++;
+                                    }
+                                }
+                                else if ($(node).css(ruleName) === ruleValue)
+                                {
+                                    count++;
+                                }
+                            }
+
+                            if (count === rules.length)
+                            {
+                                return 1;
+                            }
+                        }
+                        else if (nodeAttrValue === value)
+                        {
+                            return 1;
+                        }
+                    }
+
+                    return 0;
+
+                },
+    			isConvertable: function(node, nodeTag, tag, params)
+    			{
+                    if (nodeTag === tag)
+                    {
+                        if (params)
+                        {
+                            var count = 0;
+                            for (var key in params.data)
+                            {
+                                count += this.inline.isConvertableAttr(node, key, params.data[key]);
+                            }
+
+                            if (count === Object.keys(params.data).length)
+                            {
+                                return true;
+                            }
+                        }
+                        else
+                        {
+                            return true;
+                        }
+                    }
+
+                    return false;
+    			},
+    			setNodesStriked: function(nodes, tag, params)
+    			{
+                    for (var i = 0; i < nodes.length; i++)
+					{
+                        var nodeTag = (nodes[i].tagName) ? nodes[i].tagName.toLowerCase() : undefined;
+
+                        var parent = nodes[i].parentNode;
+                        var parentTag = (parent && parent.tagName) ? parent.tagName.toLowerCase() : undefined;
+
+                        var convertable = this.inline.isConvertable(parent, parentTag, tag, params);
+                        if (convertable)
+                        {
+                            var $el = $(parent).replaceWith(function()
+                            {
+                                return $('<strike>').append($(this).contents());
+                            });
+
+                            $el.attr('data-redactor-inline-converted');
+                        }
+
+                        var convertable = this.inline.isConvertable(nodes[i], nodeTag, tag, params);
+                        if (convertable)
+                        {
+                            var $el = $(nodes[i]).replaceWith(function()
+                            {
+                                return $('<strike>').append($(this).contents());
+                            });
+                        }
+    				}
+    			},
+                insertBreakpoint: function(inline, currentTag)
+				{
+					var breakpoint = document.createElement('span');
+					breakpoint.id = 'redactor-inline-breakpoint';
+					breakpoint = this.insert.node(breakpoint);
+
+					var end = this.utils.isEndOfElement(inline);
+					var code = this.utils.getOuterHtml(inline);
+					var endTag = (end) ? '' : '<' + currentTag + '>';
+
+                    code = code.replace(/<span id="redactor-inline-breakpoint"><\/span>/i, "</" + currentTag + ">" + endTag);
+
+					var $code = $(code);
+					$(inline).replaceWith($code);
+
+					if (endTag !== '')
 					{
-						this.inline.formatMultiple(tag);
+    					this.utils.cloneAttributes(inline, $code.last());
 					}
+
+					return $code.first();
+				},
+                insertInline: function(tag)
+				{
+					var node = document.createElement(tag);
+
+					this.insert.node(node);
+					this.caret.start(node);
+
+					return node;
 				},
-				formatCollapsed: function(tag)
+				arrangeTag: function(tag)
 				{
-					var current = this.selection.getCurrent();
-					var $parent = $(current).closest(tag + '[data-redactor-tag=' + tag + ']', this.$editor[0]);
+                    var tags = ['b', 'bold', 'i', 'italic', 'underline', 'strikethrough', 'deleted', 'superscript', 'subscript'];
+					var replaced = ['strong', 'strong', 'em', 'em', 'u', 'del', 'del', 'sup', 'sub'];
 
-					// inline there is
-					if ($parent.length !== 0 && (this.inline.type != 'style' && $parent[0].tagName != 'SPAN'))
+    				tag = tag.toLowerCase();
+
+					for (var i = 0; i < tags.length; i++)
 					{
-						// remove empty
-						if (this.utils.isEmpty($parent.text()))
+						if (tag === tags[i])
 						{
-							this.caret.setAfter($parent[0]);
-
-							$parent.remove();
-							this.code.sync();
+							tag = replaced[i];
 						}
-						else if (this.utils.isEndOfElement($parent))
+					}
+
+					return tag;
+				},
+				getStyleParams: function(params)
+				{
+                    var result = {};
+    				var rules = params.trim().replace(/;$/, '').split(';');
+    				for (var i = 0; i < rules.length; i++)
+    				{
+        				var rule = rules[i].split(':');
+        				if (rule)
+        				{
+                            result[rule[0].trim()] = rule[1].trim();
+                        }
+    				}
+
+    				return result;
+				},
+				getParams: function(attr, value, type)
+				{
+ 				    var data = false;
+    				var func = 'toggle';
+    				if (typeof attr === 'object')
+    				{
+        				data = attr;
+        				func = (value !== undefined) ? value : func;
+    				}
+    				else if (attr !== undefined && value !== undefined)
+    				{
+        				data = {};
+        				data[attr] = value;
+        				func = (type !== undefined) ? type : func;
+    				}
+
+    				return (data) ? { 'func': func, 'data': data } : false;
+				},
+				setParams: function(node, params)
+				{
+                    if (params)
+                    {
+                        for (var key in params.data)
+                        {
+                            var $node = $(node);
+                            if (key === 'style')
+                            {
+                                node = this.inline[params.func + 'Style'](params.data[key], node);
+                                $node.attr('data-redactor-style-cache', $node.attr('style'));
+                            }
+                            else if (key === 'class')
+                            {
+                                node = this.inline[params.func + 'Class'](params.data[key], node);
+                            }
+                            // attr
+                            else
+                            {
+                                node = (params.func === 'remove') ? this.inline[params.func + 'Attr'](key, node) : this.inline[params.func + 'Attr'](key, params.data[key], node);
+                            }
+
+                            if (key === 'style' && node.tagName === 'SPAN')
+                            {
+                                $node.attr('data-redactor-span', true);
+                            }
+                        }
+                    }
+
+                    return node;
+				},
+
+                // Each
+                eachInline: function(node, callback)
+                {
+                    var lastNode;
+                    var nodes = (node === undefined) ? this.selection.inlines() : [node];
+    				if (nodes)
+    				{
+        				for (var i = 0; i < nodes.length; i++)
+        				{
+            				lastNode = callback(nodes[i])[0];
+        				}
+    				}
+
+    				return lastNode;
+                },
+
+                // Class
+                replaceClass: function(value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).removeAttr('class').addClass(value);
+    				});
+				},
+				toggleClass: function(value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).toggleClass(value);
+    				});
+				},
+				addClass: function(value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).addClass(value);
+    				});
+				},
+				removeClass: function(value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).removeClass(value);
+    				});
+				},
+				removeAllClass: function(node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).removeAttr('class');
+    				});
+				},
+
+				// Attr
+				replaceAttr: function(name, value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).removeAttr(name).attr(name. value);
+    				});
+				},
+				toggleAttr: function(name, value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+        				var attr = $(el).attr(name);
+
+        				return (attr) ? $(el).removeAttr(name) : $(el).attr(name. value);
+    				});
+				},
+				addAttr: function(name, value, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).attr(name, value);
+    				});
+				},
+				removeAttr: function(name, node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+        				var $el = $(el);
+
+                        $el.removeAttr(name);
+                        if (name === 'style')
+                        {
+        				    $el.removeAttr('data-redactor-style-cache');
+        				}
+
+                        return $el;
+    				});
+				},
+				removeAllAttr: function(node)
+				{
+    				return this.inline.eachInline(node, function(el)
+    				{
+        				var $el = $(el);
+                        var len = el.attributes.length;
+						for (var z = 0; z < len; z++)
 						{
-							this.caret.setAfter($parent[0]);
+							$el.removeAttr(el.attributes[z].name);
 						}
 
-						return;
-					}
-
-					// create empty inline
-					var node = $('<' + tag + '>').attr('data-verified', 'redactor').attr('data-redactor-tag', tag);
-					node.html(this.opts.invisibleSpace);
+                        return $el;
+    				});
+				},
+				removeSpecificAttr: function(node, key, value)
+				{
+    				var $el = $(node);
+    				if (key === 'style')
+    				{
+        				var arr = value.split(':');
+        				var name = arr[0].trim();
+                        $el.css(name, '');
 
-					node = this.inline.setFormat(node);
+                        if (this.utils.removeEmptyAttr(node, 'style'))
+                        {
+                            $el.removeAttr('data-redactor-style-cache');
+                        }
+    				}
+    				else
+    				{
+        				$el.removeAttr(key)[0];
+    				}
+				},
 
-					var node = this.insert.node(node);
-					this.caret.setEnd(node);
+				// Style
+				hasParentStyle: function($el)
+				{
+                    var $parent = $el.parent();
 
-					this.code.sync();
+                    return ($parent.length === 1 && $parent[0].tagName === $el[0].tagName && $parent.html() === $el[0].outerHTML) ? $parent : false;
 				},
-				formatMultiple: function(tag)
+				addParentStyle: function($el)
 				{
-					this.inline.formatConvert(tag);
-
-					this.selection.save();
-					document.execCommand('strikethrough');
+                    var $parent = this.inline.hasParentStyle($el);
+                    if ($parent)
+                    {
+                        var style = this.inline.getStyleParams($el.attr('style'));
+                        $parent.css(style);
+                        $parent.attr('data-redactor-style-cache', $parent.attr('style'));
 
-					this.$editor.find('strike').each($.proxy(function(i,s)
-					{
-						var $el = $(s);
+                        $el.replaceWith(function()
+                        {
+                            return $(this).contents();
+                        });
+                    }
+                    else
+                    {
+                        $el.attr('data-redactor-style-cache', $el.attr('style'));
+                    }
 
-						this.inline.formatRemoveSameChildren($el, tag);
+                    return $el;
+				},
+				replaceStyle: function(params, node)
+				{
+    				params = this.inline.getStyleParams(params);
 
-						var $span;
-						if (this.inline.type)
-						{
-							$span = $('<span>').attr('data-redactor-tag', tag).attr('data-verified', 'redactor');
-							$span = this.inline.setFormat($span);
-						}
-						else
-						{
-							$span = $('<' + tag + '>').attr('data-redactor-tag', tag).attr('data-verified', 'redactor');
-						}
+                    var self = this;
+    				return this.inline.eachInline(node, function(el)
+    				{
+        				var $el = $(el);
+                        $el.removeAttr('style').css(params);
 
-						$el.replaceWith($span.html($el.contents()));
-						var $parent = $span.parent();
+                        var style = $el.attr('style');
+                        if (style) $el.attr('style', style.replace(/"/g, '\''));
 
-						// remove U tag if selected link + node
-						if ($span[0].tagName === 'A' && $parent && $parent[0].tagName === 'U')
-						{
-							$span.parent().replaceWith($span);
-						}
+                        $el = self.inline.addParentStyle($el);
 
-						if (tag == 'span')
-						{
-							if ($parent && $parent[0].tagName === 'SPAN' && this.inline.type === 'style')
-							{
-								var arr = this.inline.value.split(';');
+                        return $el;
+    				});
+				},
+				toggleStyle: function(params, node)
+				{
+    				params = this.inline.getStyleParams(params);
 
-								for (var z = 0; z < arr.length; z++)
-								{
-									if (arr[z] === '') return;
-									var style = arr[z].split(':');
-									$parent.css(style[0], '');
+                    var self = this;
+    				return this.inline.eachInline(node, function(el)
+    				{
+        				var $el = $(el);
 
-									if (this.utils.removeEmptyAttr($parent, 'style'))
-									{
-										$parent.replaceWith($parent.contents());
-									}
+                        for (var key in params)
+                        {
+                            var newVal = params[key];
+                            var oldVal = $el.css(key);
 
-								}
+                            oldVal = (self.utils.isRgb(oldVal)) ? self.utils.rgb2hex(oldVal) : oldVal.replace(/"/g, '');
+                            newVal = (self.utils.isRgb(newVal)) ? self.utils.rgb2hex(newVal) : newVal.replace(/"/g, '');
 
-							}
-						}
+                            if (oldVal === newVal)
+                            {
+                                $el.css(key, '');
+                            }
+                            else
+                            {
+                                $el.css(key, newVal);
+                            }
+                        }
 
-					}, this));
+                        var style = $el.attr('style');
+                        if (style) $el.attr('style', style.replace(/"/g, '\''));
 
-					// clear text decoration
-					if (tag != 'span')
-					{
-						this.$editor.find(this.opts.inlineTags.join(', ')).each($.proxy(function(i,s)
-						{
-							var $el = $(s);
+                        if (!self.utils.removeEmptyAttr(el, 'style'))
+                        {
+                            $el = self.inline.addParentStyle($el);
+                        }
+                        else
+                        {
+                            $el.removeAttr('data-redactor-style-cache');
+                        }
 
 
-							if (s.tagName === 'U' && s.attributes.length === 0)
-							{
-								$el.replaceWith($el.contents());
-								return;
-							}
+                        return $el;
+    				});
+				},
+				addStyle: function(params, node)
+				{
+                    params = this.inline.getStyleParams(params);
 
-							var property = $el.css('text-decoration');
-							if (property === 'line-through')
-							{
-								$el.css('text-decoration', '');
-								this.utils.removeEmptyAttr($el, 'style');
-							}
-						}, this));
-					}
+                    var self = this;
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        var $el = $(el);
 
-					if (tag != 'del')
-					{
-						var _this = this;
-						this.$editor.find('inline').each(function(i,s)
-						{
-							_this.utils.replaceToTag(s, 'del');
-						});
-					}
+                        $el.css(params);
 
-					if (tag != 'u')
-					{
-						var _this = this;
-						this.$editor.find('unline').each(function(i,s)
-						{
-							_this.utils.replaceToTag(s, 'u');
-						});
-					}
+                        var style = $el.attr('style');
+                        if (style) $el.attr('style', style.replace(/"/g, '\''));
 
-					this.selection.restore();
-					this.code.sync();
+                        $el = self.inline.addParentStyle($el);
 
+                        return $el;
+    				});
 				},
-				formatRemoveSameChildren: function($el, tag)
+				removeStyle: function(params, node)
 				{
-					var self = this;
-					$el.children(tag).each(function()
-					{
-						var $child = $(this);
-
-						if (!$child.hasClass('redactor-selection-marker'))
-						{
-							if (self.inline.type == 'style')
-							{
-								var arr = self.inline.value.split(';');
-
-								for (var z = 0; z < arr.length; z++)
-								{
-									if (arr[z] === '') return;
+    				params = this.inline.getStyleParams(params);
 
-									var style = arr[z].split(':');
-									$child.css(style[0], '');
+                    var self = this;
+    				return this.inline.eachInline(node, function(el)
+    				{
+        				var $el = $(el);
 
-									if (self.utils.removeEmptyAttr($child , 'style'))
-									{
-										$child.replaceWith($child.contents());
-									}
+                        for (var key in params)
+                        {
+                            $el.css(key, '');
+                        }
 
-								}
-							}
-							else
-							{
-								$child.contents().unwrap();
-							}
-						}
+                        if (self.utils.removeEmptyAttr(el, 'style'))
+                        {
+                            $el.removeAttr('data-redactor-style-cache');
+                        }
+                        else
+                        {
+                            $el.attr('data-redactor-style-cache', $el.attr('style'));
+                        }
 
-					});
+                        return $el;
+    				});
 				},
-				formatConvert: function(tag)
+				removeAllStyle: function(node)
 				{
-					this.selection.save();
+    				return this.inline.eachInline(node, function(el)
+    				{
+                        return $(el).removeAttr('style').removeAttr('data-redactor-style-cache');
+    				});
+				},
+                removeStyleRule: function(name)
+				{
+					var parent = this.selection.parent();
+					var nodes = this.selection.inlines();
 
-					var find = '';
-					if (this.inline.type == 'class') find = '[data-redactor-class=' + this.inline.value + ']';
-					else if (this.inline.type == 'style')
+                    this.buffer.set();
+
+					if (parent && parent.tagName === 'SPAN')
 					{
-						find = '[data-redactor-style="' + this.inline.value + '"]';
+						this.inline.removeStyleRuleAttr($(parent), name);
 					}
 
-					var self = this;
-					if (tag != 'del')
+                    for (var i = 0; i < nodes.length; i++)
 					{
-						this.$editor.find('del').each(function(i,s)
+    					var el = nodes[i];
+						var $el = $(el);
+						if ($.inArray(el.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$el.hasClass('redactor-selection-marker'))
 						{
-							self.utils.replaceToTag(s, 'inline');
-						});
+                            this.inline.removeStyleRuleAttr($el, name);
+						}
 					}
 
-					if (tag != 'u')
+				},
+				removeStyleRuleAttr: function($el, name)
+				{
+                    $el.css(name, '');
+					if (this.utils.removeEmptyAttr($el, 'style'))
 					{
-						this.$editor.find('u').each(function(i,s)
-						{
-							self.utils.replaceToTag(s, 'unline');
-						});
+						$el.removeAttr('data-redactor-style-cache');
 					}
-
-					if (tag != 'span')
+					else
 					{
-						this.$editor.find(tag).each(function()
-						{
-							var $el = $(this);
-							$el.replaceWith($('<strike />').html($el.contents()));
-
-						});
+    					$el.attr('data-redactor-style-cache', $el.attr('style'));
 					}
+				},
 
-					this.$editor.find('[data-redactor-tag="' + tag + '"]' + find).each(function()
-					{
-						if (find === '' && tag == 'span' && this.tagName.toLowerCase() == tag) return;
+				// Update
+				update: function(tag, attr, value, type)
+				{
+                    tag = this.inline.arrangeTag(tag);
 
-						var $el = $(this);
-						$el.replaceWith($('<strike />').html($el.contents()));
+					var params = this.inline.getParams(attr, value, type);
+					var nodes = this.selection.inlines();
+					var result = [];
 
-					});
+                    if (nodes)
+                    {
+                        for (var i = 0; i < nodes.length; i++)
+                        {
+                            var el = nodes[i];
+                            if (tag === '*' || el.tagName.toLowerCase() === tag)
+                            {
+    						    result.push(this.inline.setParams(el, params));
+    						}
+                        }
+                    }
 
-					this.selection.restore();
+                    return result;
 				},
-				setFormat: function(node)
+
+                // All
+				removeFormat: function()
 				{
-					switch (this.inline.type)
-					{
-						case 'class':
+    				this.selection.save();
 
-							if (node.hasClass(this.inline.value))
-							{
-								node.removeClass(this.inline.value);
-								node.removeAttr('data-redactor-class');
-							}
-							else
-							{
-								node.addClass(this.inline.value);
-								node.attr('data-redactor-class', this.inline.value);
-							}
+    				var nodes = this.inline.getClearedNodes();
+    				for (var i = 0; i < nodes.length; i++)
+    				{
+        				if (nodes[i].nodeType === 1)
+        				{
+            				$(nodes[i]).replaceWith(function()
+                            {
+                                return $(this).contents();
+                            });
+        				}
+    				}
 
+    				this.selection.restore();
+				}
 
-						break;
-						case 'style':
+			};
+		},
 
-							node[0].style.cssText = this.inline.value;
-							node.attr('data-redactor-style', this.inline.value);
+		// =insert
+		insert: function()
+		{
+			return {
+				set: function(html)
+				{
+					this.placeholder.hide();
 
-						break;
-					}
+					this.code.set(html);
+					this.focus.end();
 
-					return node;
+					this.placeholder.enable();
 				},
-				removeStyle: function()
+				html: function(html, data)
 				{
-					this.buffer.set();
-					var current = this.selection.getCurrent();
-					var nodes = this.selection.getInlines();
+					this.placeholder.hide();
+					this.core.editor().focus();
 
-					this.selection.save();
+					var block = this.selection.block();
+					var inline = this.selection.inline();
 
-					if (current && current.tagName === 'SPAN')
+					// clean
+					if (typeof data === 'undefined')
 					{
-						var $s = $(current);
-
-						$s.removeAttr('style');
-						if ($s[0].attributes.length === 0)
-						{
-							$s.replaceWith($s.contents());
-						}
+						data = this.clean.getCurrentType(html, true);
+						html = this.clean.onPaste(html, data, true);
 					}
 
-					$.each(nodes, $.proxy(function(i,s)
-					{
-						var $s = $(s);
-						if ($.inArray(s.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$s.hasClass('redactor-selection-marker'))
-						{
-							$s.removeAttr('style');
-							if ($s[0].attributes.length === 0)
-							{
-								$s.replaceWith($s.contents());
-							}
-						}
-					}, this));
+					html = $.parseHTML(html);
 
-					this.selection.restore();
-					this.code.sync();
+                    // end node
+                    var endNode = $(html).last();
 
-				},
-				removeStyleRule: function(name)
-				{
-					this.buffer.set();
-					var parent = this.selection.getParent();
-					var nodes = this.selection.getInlines();
+					// delete selected content
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+					range.deleteContents();
 
-					this.selection.save();
+					this.selection.update(sel, range);
 
-					if (parent && parent.tagName === 'SPAN')
+					// insert list in list
+					if (data.lists)
 					{
-						var $s = $(parent);
-
-						$s.css(name, '');
-						this.utils.removeEmptyAttr($s, 'style');
-						if ($s[0].attributes.length === 0)
+						var $list = $(html);
+						if ($list.length !== 0 && ($list[0].tagName === 'UL' || $list[0].tagName === 'OL'))
 						{
-							$s.replaceWith($s.contents());
+
+							this.insert.appendLists(block, $list);
+							return;
 						}
 					}
 
-					$.each(nodes, $.proxy(function(i,s)
+					if (data.blocks && block)
 					{
-						var $s = $(s);
-						if ($.inArray(s.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$s.hasClass('redactor-selection-marker'))
+						if (this.utils.isSelectAll())
+						{
+							this.core.editor().html(html);
+							this.focus.end();
+						}
+						else
 						{
-							$s.css(name, '');
-							this.utils.removeEmptyAttr($s, 'style');
-							if ($s[0].attributes.length === 0)
+							var breaked = this.utils.breakBlockTag();
+							if (breaked === false)
 							{
-								$s.replaceWith($s.contents());
+								this.insert.placeHtml(html);
 							}
-						}
-					}, this));
+							else
+							{
+    							var $last = $(html).children().last();
+								$last.append(this.marker.get());
 
-					this.selection.restore();
-					this.code.sync();
-				},
-				removeFormat: function()
-				{
-					this.buffer.set();
-					var current = this.selection.getCurrent();
+								if (breaked.type === 'start')
+								{
+									breaked.$block.before(html);
+								}
+								else
+								{
+									breaked.$block.after(html);
+								}
 
-					this.selection.save();
+								this.selection.restore();
+								this.core.editor().find('p').each(function()
+								{
+									if ($.trim(this.innerHTML) === '')
+									{
+										$(this).remove();
+									}
+								});
+							}
+						}
+					}
+					else
+					{
+						if (inline)
+						{
+							// remove same tag inside
+							var $div = $("<div/>").html(html);
+							$div.find(inline.tagName.toLowerCase()).each(function()
+							{
+								$(this).contents().unwrap();
+							});
 
-					document.execCommand('removeFormat');
+							html = $div.html();
+							html = $.parseHTML(html);
 
-					if (current && current.tagName === 'SPAN')
-					{
-						$(current).replaceWith($(current).contents());
-					}
+							endNode = $(html).last();
 
 
-					$.each(this.selection.getNodes(), $.proxy(function(i,s)
-					{
-						var $s = $(s);
-						if ($.inArray(s.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$s.hasClass('redactor-selection-marker'))
+						}
+
+						if (this.utils.isSelectAll())
 						{
-							$s.replaceWith($s.contents());
+							var $node = $(this.opts.emptyHtml);
+							this.core.editor().html('').append($node);
+							$node.html(html);
+							this.caret.end($node);
 						}
-					}, this));
+						else
+						{
+							this.insert.placeHtml(html);
+						}
+					}
 
-					this.selection.restore();
-					this.code.sync();
+					this.utils.disableSelectAll();
 
+					if (data.pre) this.clean.cleanPre();
+
+                    this.caret.end(endNode);
+                    this.linkify.format();
 				},
-				toggleClass: function(className)
-				{
-					this.inline.format('span', 'class', className);
-				},
-				toggleStyle: function(value)
-				{
-					this.inline.format('span', 'style', value);
-				}
-			};
-		},
-		insert: function()
-		{
-			return {
-				set: function(html, clean)
+				text: function(text)
 				{
-					this.placeholder.remove();
+					text = text.toString();
+					text = $.trim(text);
 
-					html = this.clean.setVerified(html);
+					var tmp = document.createElement('div');
+					tmp.innerHTML = text;
+					text = tmp.textContent || tmp.innerText;
 
-					if (typeof clean == 'undefined')
+					if (typeof text === 'undefined')
 					{
-						html = this.clean.onPaste(html, false);
+						return;
 					}
 
-					this.$editor.html(html);
-					this.selection.remove();
-					this.focus.setEnd();
-					this.clean.normalizeLists();
-					this.code.sync();
-					this.observe.load();
-
-					if (typeof clean == 'undefined')
-					{
-						setTimeout($.proxy(this.clean.clearUnverified, this), 10);
-					}
-				},
-				text: function(text)
-				{
-					this.placeholder.remove();
+					this.placeholder.hide();
+					this.core.editor().focus();
 
-					text = text.toString();
-					text = $.trim(text);
-					text = this.clean.getPlainText(text, false);
+					// blocks
+					var blocks = this.selection.blocks();
 
-					this.$editor.focus();
+					// nl to spaces
+					text = text.replace(/\n/g, ' ');
 
-					if (this.utils.browser('msie'))
+					// select all
+					if (this.utils.isSelectAll())
 					{
-						this.insert.htmlIe(text);
+						var $node = $(this.opts.emptyHtml);
+						this.core.editor().html('').append($node);
+						$node.html(text);
+						this.caret.end($node);
 					}
 					else
 					{
-						this.selection.get();
+						// insert
+						var sel = this.selection.get();
+						var node = document.createTextNode(text);
 
-						this.range.deleteContents();
-						var el = document.createElement("div");
-						el.innerHTML = text;
-						var frag = document.createDocumentFragment(), node, lastNode;
-						while ((node = el.firstChild))
+						if (sel.getRangeAt && sel.rangeCount)
 						{
-							lastNode = frag.appendChild(node);
-						}
+							var range = sel.getRangeAt(0);
+							range.deleteContents();
+							range.insertNode(node);
+							range.setStartAfter(node);
+							range.collapse(true);
 
-						this.range.insertNode(frag);
+							this.selection.update(sel, range);
+						}
 
-						if (lastNode)
+						// wrap node if selected two or more block tags
+						if (blocks.length > 1)
 						{
-							var range = this.range.cloneRange();
-							range.setStartAfter(lastNode);
-							range.collapse(true);
-							this.sel.removeAllRanges();
-							this.sel.addRange(range);
+							$(node).wrap('<p>');
+							this.caret.after(node);
 						}
 					}
 
-					this.code.sync();
-					this.clean.clearUnverified();
+					this.utils.disableSelectAll();
+					this.linkify.format();
+					this.clean.normalizeCurrentHeading();
+
 				},
-				htmlWithoutClean: function(html)
+				raw: function(html)
 				{
-					this.insert.html(html, false);
+					this.placeholder.hide();
+					this.core.editor().focus();
+
+					var sel = this.selection.get();
+
+					var range = this.selection.range(sel);
+					range.deleteContents();
+
+		            var el = document.createElement("div");
+		            el.innerHTML = html;
+
+		            var frag = document.createDocumentFragment(), node, lastNode;
+		            while ((node = el.firstChild))
+		            {
+		                lastNode = frag.appendChild(node);
+		            }
+
+		            range.insertNode(frag);
+
+					if (lastNode)
+					{
+						range = range.cloneRange();
+						range.setStartAfter(lastNode);
+						range.collapse(true);
+						sel.removeAllRanges();
+						sel.addRange(range);
+					}
 				},
-				html: function(html, clean)
+				node: function(node, deleteContent)
 				{
-					this.placeholder.remove();
+					this.placeholder.hide();
 
-					if (typeof clean == 'undefined') clean = true;
-
-					if (!this.opts.linebreaks)
+					if (typeof this.start !== 'undefined')
 					{
-						this.$editor.focus();
+						this.core.editor().focus();
 					}
 
-					html = this.clean.setVerified(html);
+					node = node[0] || node;
+
+					var block = this.selection.block();
+					var gap = this.utils.isBlockTag(node.tagName);
+					var result = true;
 
-					if (clean)
+					if (this.utils.isSelectAll())
 					{
-						html = this.clean.onPaste(html);
+						if (gap)
+						{
+							this.core.editor().html(node);
+						}
+						else
+						{
+							this.core.editor().html($('<p>').html(node));
+						}
+
+						this.code.sync();
 					}
+					else if (gap && block)
+					{
+						var breaked = this.utils.breakBlockTag();
+						if (breaked === false)
+						{
+							this.insert.placeNode(node, deleteContent);
+						}
+						else
+						{
+							if (breaked.type === 'start')
+							{
+								breaked.$block.before(node);
+							}
+							else
+							{
+								breaked.$block.after(node);
+							}
 
-					if (this.utils.browser('msie'))
-					{
-						this.insert.htmlIe(html);
+							this.core.editor().find('p:empty').remove();
+						}
 					}
 					else
 					{
-						if (this.clean.singleLine) this.insert.execHtml(html);
-						else document.execCommand('insertHTML', false, html);
-
-						this.insert.htmlFixMozilla();
-
+						result = this.insert.placeNode(node, deleteContent);
 					}
 
-					this.clean.normalizeLists();
+					this.utils.disableSelectAll();
 
-					// remove empty paragraphs finaly
-					if (!this.opts.linebreaks)
+					if (result)
 					{
-						this.$editor.find('p').each($.proxy(this.utils.removeEmpty, this));
+					    this.caret.end(node);
 					}
 
-					this.code.sync();
-					this.observe.load();
-
-					if (clean)
-					{
-						this.clean.clearUnverified();
-					}
+					return node;
 
 				},
-				htmlFixMozilla: function()
+				appendLists: function(block, $list)
 				{
-					// FF inserts empty p when content was selected dblclick
-					if (!this.utils.browser('mozilla')) return;
+					var $block = $(block);
+					var last;
+					var isEmpty = this.utils.isEmpty(block.innerHTML);
 
-					var $next = $(this.selection.getBlock()).next();
-					if ($next.length > 0 && $next[0].tagName == 'P' && $next.html() === '')
+					if (isEmpty || this.utils.isEndOfElement(block))
 					{
-						$next.remove();
-					}
+						last = $block;
+						$list.find('li').each(function()
+						{
+							last.after(this);
+							last = $(this);
+						});
 
-				},
-				htmlIe: function(html)
-				{
-					if (this.utils.isIe11())
+						if (isEmpty)
+						{
+							$block.remove();
+						}
+					}
+					else if (this.utils.isStartOfElement(block))
 					{
-						var parent = this.utils.isCurrentOrParent('P');
-						var $html = $('<div>').append(html);
-						var blocksMatch = $html.contents().is('p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article');
-
-						if (parent && blocksMatch) this.insert.ie11FixInserting(parent, html);
-						else this.insert.ie11PasteFrag(html);
-
-						return;
+						$list.find('li').each(function()
+						{
+							$block.before(this);
+							last = $(this);
+						});
 					}
+					else
+					{
+				        var endOfNode = this.selection.extractEndOfNode(block);
 
-					document.selection.createRange().pasteHTML(html);
-
-				},
-				execHtml: function(html)
-				{
-					html = this.clean.setVerified(html);
-
-					this.selection.get();
-
-					this.range.deleteContents();
+				        $block.after($('<li>').append(endOfNode));
+				        $block.append($list);
+						last = $list;
+					}
 
-					var el = document.createElement('div');
-					el.innerHTML = html;
+					this.marker.remove();
 
-					var frag = document.createDocumentFragment(), node, lastNode;
-					while ((node = el.firstChild))
+					if (last)
 					{
-						lastNode = frag.appendChild(node);
+						this.caret.end(last);
 					}
 
-					this.range.insertNode(frag);
-
-					this.range.collapse(true);
-					this.caret.setAfter(lastNode);
-
+					this.linkify.format();
 				},
-				node: function(node, deleteContents)
+				placeHtml: function(html)
 				{
-					node = node[0] || node;
+					var marker = document.createElement('span');
+					marker.id = 'redactor-insert-marker';
+					marker = this.insert.node(marker);
 
-					var offset = this.caret.getOffset();
-					var html = this.utils.getOuterHtml(node);
-					html = this.clean.setVerified(html);
-
-					if (html.match(/</g) !== null)
+					$(marker).before(html);
+					this.selection.restore();
+					this.caret.after(marker);
+					$(marker).remove();
+				},
+				placeNode: function(node, deleteContent)
+				{
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+					if (range == null)
 					{
-						node = $(html)[0];
+    					return false;
 					}
 
-					this.selection.get();
-
-					if (deleteContents !== false)
+					if (deleteContent !== false)
 					{
-						this.range.deleteContents();
+						range.deleteContents();
 					}
 
-					this.range.insertNode(node);
-					this.range.collapse(false);
-					this.selection.addRange();
+					range.insertNode(node);
+					range.collapse(false);
 
-					this.caret.setOffset(offset);
-
-					return node;
+					this.selection.update(sel, range);
 				},
-				nodeToPoint: function(node, x, y)
+				nodeToPoint: function(e, node)
 				{
-					node = node[0] || node;
+					this.placeholder.hide();
 
-					this.selection.get();
+					node = node[0] || node;
 
-					var range;
-					if (document.caretPositionFromPoint)
+					if (this.utils.isEmpty())
 					{
-					    var pos = document.caretPositionFromPoint(x, y);
+						node = (this.utils.isBlock(node)) ? node : $('<p />').append(node);
 
-					    this.range.setStart(pos.offsetNode, pos.offset);
-					    this.range.collapse(true);
-					    this.range.insertNode(node);
-					}
-					else if (document.caretRangeFromPoint)
-					{
-					    range = document.caretRangeFromPoint(x, y);
-					    range.insertNode(node);
-					}
-					else if (typeof document.body.createTextRange != "undefined")
-					{
-				        range = document.body.createTextRange();
-				        range.moveToPoint(x, y);
-				        var endRange = range.duplicate();
-				        endRange.moveToPoint(x, y);
-				        range.setEndPoint("EndToEnd", endRange);
-				        range.select();
+						this.core.editor().html(node);
+
+						return node;
 					}
-				},
-				nodeToCaretPositionFromPoint: function(e, node)
-				{
-					node = node[0] || node;
 
 					var range;
 					var x = e.clientX, y = e.clientY;
@@ -4940,7 +6514,7 @@
 					    range = document.caretRangeFromPoint(x, y);
 					    range.insertNode(node);
 					}
-					else if (typeof document.body.createTextRange != "undefined")
+					else if (typeof document.body.createTextRange !== "undefined")
 					{
 				        range = document.body.createTextRange();
 				        range.moveToPoint(x, y);
@@ -4950,100 +6524,89 @@
 				        range.select();
 					}
 
-				},
-				ie11FixInserting: function(parent, html)
-				{
-					var node = document.createElement('span');
-					node.className = 'redactor-ie-paste';
-					this.insert.node(node);
+					return node;
 
-					var parHtml = $(parent).html();
+				},
 
-					parHtml = '<p>' + parHtml.replace(/<span class="redactor-ie-paste"><\/span>/gi, '</p>' + html + '<p>') + '</p>';
-					parHtml = parHtml.replace(/<p><\/p>/gi, '');
-					$(parent).replaceWith(parHtml);
+				// #backward
+				nodeToCaretPositionFromPoint: function(e, node)
+				{
+					this.insert.nodeToPoint(e, node);
 				},
-				ie11PasteFrag: function(html)
+				marker: function()
 				{
-					this.selection.get();
-					this.range.deleteContents();
-
-					var el = document.createElement("div");
-					el.innerHTML = html;
-
-					var frag = document.createDocumentFragment(), node, lastNode;
-					while ((node = el.firstChild))
-					{
-						lastNode = frag.appendChild(node);
-					}
-
-					this.range.insertNode(frag);
-					this.range.collapse(false);
-					this.selection.addRange();
+					this.marker.insert();
 				}
 			};
 		},
+
+		// =keydown
 		keydown: function()
 		{
 			return {
 				init: function(e)
 				{
-					if (this.rtePaste) return;
+					if (this.rtePaste)
+					{
+						return;
+					}
 
 					var key = e.which;
 					var arrow = (key >= 37 && key <= 40);
 
 					this.keydown.ctrl = e.ctrlKey || e.metaKey;
-					this.keydown.current = this.selection.getCurrent();
-					this.keydown.parent = this.selection.getParent();
-					this.keydown.block = this.selection.getBlock();
+					this.keydown.parent = this.selection.parent();
+					this.keydown.current = this.selection.current();
+					this.keydown.block = this.selection.block();
 
 			        // detect tags
 					this.keydown.pre = this.utils.isTag(this.keydown.current, 'pre');
 					this.keydown.blockquote = this.utils.isTag(this.keydown.current, 'blockquote');
 					this.keydown.figcaption = this.utils.isTag(this.keydown.current, 'figcaption');
+					this.keydown.figure = this.utils.isTag(this.keydown.current, 'figure');
+
+					// callback
+					var keydownStop = this.core.callback('keydown', e);
+					if (keydownStop === false)
+					{
+						e.preventDefault();
+						return false;
+					}
 
 					// shortcuts setup
 					this.shortcuts.init(e, key);
 
-					if (this.utils.isDesktop())
+					// buffer
+					this.keydown.checkEvents(arrow, key);
+                    this.keydown.setupBuffer(e, key);
+
+					if (this.utils.isSelectAll() && ( key === this.keyCode.ENTER || key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE))
 					{
-						this.keydown.checkEvents(arrow, key);
-						this.keydown.setupBuffer(e, key);
+						e.preventDefault();
+
+						this.code.set(this.opts.emptyHtml);
+                        this.events.changeHandler();
+						return;
 					}
 
 					this.keydown.addArrowsEvent(arrow);
 					this.keydown.setupSelectAll(e, key);
 
-					// callback
-					var keydownStop = this.core.setCallback('keydown', e);
-					if (keydownStop === false)
+					// turn off enter key
+					if (!this.opts.enterKey && key === this.keyCode.ENTER)
 					{
 						e.preventDefault();
-						return false;
-					}
 
-					// ie and ff exit from table
-					if (this.opts.enterKey && (this.utils.browser('msie') || this.utils.browser('mozilla')) && (key === this.keyCode.DOWN || key === this.keyCode.RIGHT))
-					{
-						var isEndOfTable = false;
-						var $table = false;
-						if (this.keydown.block && this.keydown.block.tagName === 'TD')
-						{
-							$table = $(this.keydown.block).closest('table', this.$editor[0]);
-						}
+						// remove selected
+						var sel = this.selection.get();
+						var range = this.selection.range(sel);
 
-						if ($table && $table.find('td').last()[0] === this.keydown.block)
+						if (!range.collapsed)
 						{
-							isEndOfTable = true;
+							range.deleteContents();
 						}
 
-						if (this.utils.isEndOfElement() && isEndOfTable)
-						{
-							var node = $(this.opts.emptyHtml);
-							$table.after(node);
-							this.caret.setStart(node);
-						}
+						return;
 					}
 
 					// down
@@ -5052,199 +6615,333 @@
 						this.keydown.onArrowDown();
 					}
 
-					// turn off enter key
-					if (!this.opts.enterKey && key === this.keyCode.ENTER)
+					// up
+					if (this.opts.enterKey && key === this.keyCode.UP)
+					{
+						this.keydown.onArrowUp();
+					}
+
+
+					// replace to p before / after the table or into body
+					if ((this.opts.type === 'textarea' || this.opts.type === 'div') && this.keydown.current && this.keydown.current.nodeType === 3 && $(this.keydown.parent).hasClass('redactor-in'))
+					{
+						this.keydown.wrapToParagraph();
+					}
+
+					// on Shift+Space or Ctrl+Space
+					if (!this.keyup.lastShiftKey && key === this.keyCode.SPACE && (e.ctrlKey || e.shiftKey))
 					{
 						e.preventDefault();
-						// remove selected
-						if (!this.range.collapsed) this.range.deleteContents();
-						return;
+
+						return this.keydown.onShiftSpace();
+					}
+
+					// on Shift+Enter or Ctrl+Enter
+					if (key === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey))
+					{
+						e.preventDefault();
+
+						return this.keydown.onShiftEnter(e);
 					}
 
 					// on enter
-					if (key == this.keyCode.ENTER && !e.shiftKey && !e.ctrlKey && !e.metaKey)
+					if (key === this.keyCode.ENTER && !e.shiftKey && !e.ctrlKey && !e.metaKey)
 					{
-						var stop = this.core.setCallback('enter', e);
-						if (stop === false)
-						{
-							e.preventDefault();
-							return false;
-						}
+						return this.keydown.onEnter(e);
+					}
 
-						if (this.keydown.blockquote && this.keydown.exitFromBlockquote(e) === true)
-						{
-							return false;
-						}
+					// tab or cmd + [
+					if (key === this.keyCode.TAB || e.metaKey && key === 221 || e.metaKey && key === 219)
+					{
+						return this.keydown.onTab(e, key);
+					}
+
+                    // firefox bugfix
+					if (this.detect.isFirefox() && key === this.keyCode.BACKSPACE && this.keydown.block && this.keydown.block.tagName === 'P' && this.utils.isStartOfElement(this.keydown.block))
+					{
+    					var $prev = $(this.keydown.block).prev();
+    					if ($prev.length !== 0)
+    					{
+        					e.preventDefault();
+
+        					$prev.append(this.marker.get());
+        					$prev.append($(this.keydown.block).html());
+        					$(this.keydown.block).remove();
 
-						var current, $next;
-						if (this.keydown.pre)
+                            this.selection.restore();
+
+        					return;
+    					}
+					}
+
+					// backspace & delete
+					if (key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE)
+					{
+    					if (this.observe.image && typeof this.observe.image !== 'undefined' && $('#redactor-image-box').length !== 0)
+    					{
+        					e.preventDefault();
+
+        					var $prev = this.observe.image.closest('figure, p').prev()
+        					this.image.remove(false);
+                            this.observe.image = false;
+
+        					if ($prev && $prev.length !== 0)
+        					{
+            					this.caret.end($prev);
+        					}
+        					else
+        					{
+            					this.core.editor().focus();
+        					}
+
+        					return;
+    					}
+
+						this.keydown.onBackspaceAndDeleteBefore();
+					}
+
+					if (key === this.keyCode.DELETE)
+					{
+						var $next = $(this.keydown.block).next();
+
+						// delete figure
+						if (this.utils.isEndOfElement(this.keydown.block) && $next.length !== 0 && $next[0].tagName === 'FIGURE')
 						{
-							return this.keydown.insertNewLine(e);
+							$next.remove();
+							return false;
 						}
-						else if (this.keydown.blockquote || this.keydown.figcaption)
-						{
-							current = this.selection.getCurrent();
-							$next = $(current).next();
 
-							if ($next.length !== 0 && $next[0].tagName == 'BR')
-							{
-								return this.keydown.insertBreakLine(e);
-							}
-							else if (this.utils.isEndOfElement() && (current && current != 'SPAN'))
-							{
-								return this.keydown.insertDblBreakLine(e);
-							}
-							else
-							{
-								return this.keydown.insertBreakLine(e);
-							}
-						}
-						else if (this.opts.linebreaks && !this.keydown.block)
+						// append list (safari bug)
+						var tagLi = (this.keydown.block && this.keydown.block.tagName === 'LI') ? this.keydown.block : false;
+						if (tagLi)
 						{
-							current = this.selection.getCurrent();
-							$next = $(this.keydown.current).next();
+							var $list = $(this.keydown.block).parents('ul, ol').last();
+							var $nextList = $list.next();
 
-							if ($next.length !== 0 && $next[0].tagName == 'BR')
+							if (this.utils.isRedactorParent($list) && this.utils.isEndOfElement($list) && $nextList.length !== 0
+								&& ($nextList[0].tagName === 'UL' || $nextList[0].tagName === 'OL'))
 							{
-								return this.keydown.insertBreakLine(e);
-							}
-							else if (current !== false && $(current).hasClass('redactor-invisible-space'))
-							{
-								this.caret.setAfter(current);
-								$(current).contents().unwrap();
+								e.preventDefault();
 
-								return this.keydown.insertDblBreakLine(e);
-							}
-							else
-							{
-								if (this.utils.isEndOfEditor())
-								{
-									return this.keydown.insertDblBreakLine(e);
-								}
-								else if ($next.length === 0 && current === false && typeof $next.context != 'undefined')
-								{
-									return this.keydown.insertBreakLine(e);
-								}
+								$list.append($nextList.contents());
+								$nextList.remove();
 
-								return this.keydown.insertBreakLine(e);
+								return false;
 							}
-
 						}
-						else if (this.opts.linebreaks && this.keydown.block)
+
+						// append pre
+						if (this.utils.isEndOfElement(this.keydown.block) && $next.length !== 0 && $next[0].tagName === 'PRE')
 						{
-							setTimeout($.proxy(this.keydown.replaceDivToBreakLine, this), 1);
+							$(this.keydown.block).append($next.text());
+							$next.remove();
+							return false;
 						}
-						// paragraphs
-						else if (!this.opts.linebreaks && this.keydown.block)
-						{
-							setTimeout($.proxy(this.keydown.replaceDivToParagraph, this), 1);
 
-							if (this.keydown.block.tagName === 'LI')
-							{
-								current = this.selection.getCurrent();
-								var $parent = $(current).closest('li', this.$editor[0]);
-								var $list = $parent.closest('ul,ol', this.$editor[0]);
-
-								if ($parent.length !== 0 && this.utils.isEmpty($parent.html()) && $list.next().length === 0 && this.utils.isEmpty($list.find("li").last().html()))
-								{
-									$list.find("li").last().remove();
+					}
 
-									var node = $(this.opts.emptyHtml);
-									$list.after(node);
-									this.caret.setStart(node);
+					// image delete
+					if (key === this.keyCode.DELETE && $('#redactor-image-box').length !== 0)
+					{
+						this.image.remove();
+					}
 
-									return false;
-								}
-							}
+					// backspace
+					if (key === this.keyCode.BACKSPACE)
+					{
+						if (this.detect.isFirefox())
+						{
+							this.line.removeOnBackspace(e);
 						}
-						else if (!this.opts.linebreaks && !this.keydown.block)
+
+                        // combine list after and before if paragraph is empty
+                        if (this.list.combineAfterAndBefore(this.keydown.block))
+                        {
+                            e.preventDefault();
+                            return;
+                        }
+
+						// backspace as outdent
+						var block = this.selection.block();
+						if (block && block.tagName === 'LI' && this.utils.isCollapsed() && this.utils.isStartOfElement())
 						{
-							return this.keydown.insertParagraph(e);
+							this.indent.decrease();
+							e.preventDefault();
+							return;
 						}
+
+						this.keydown.removeInvisibleSpace();
+						this.keydown.removeEmptyListInTable(e);
+
 					}
 
-					// Shift+Enter or Ctrl+Enter
-					if (key === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey))
+					if (key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE)
 					{
-						return this.keydown.onShiftEnter(e);
+						this.keydown.onBackspaceAndDeleteAfter(e);
 					}
 
+				},
+				onShiftSpace: function()
+				{
+					this.buffer.set();
+					this.insert.raw('&nbsp;');
 
-					// tab or cmd + [
-					if (key === this.keyCode.TAB || e.metaKey && key === 221 || e.metaKey && key === 219)
+					return false;
+				},
+				onShiftEnter: function(e)
+				{
+					this.buffer.set();
+
+					return (this.keydown.pre) ? this.keydown.insertNewLine(e) : this.insert.raw('<br>');
+				},
+				onBackspaceAndDeleteBefore: function()
+				{
+					this.utils.saveScroll();
+				},
+				onBackspaceAndDeleteAfter: function(e)
+				{
+					// remove style tag
+					setTimeout($.proxy(function()
 					{
-						return this.keydown.onTab(e, key);
+						this.code.syncFire = false;
+						this.keydown.removeEmptyLists();
+
+                        var filter = '';
+                        if (this.opts.keepStyleAttr.length !== 0)
+                        {
+                            filter = ',' + this.opts.keepStyleAttr.join(',');
+                        }
+
+						var $styleTags = this.core.editor().find('*[style]');
+						$styleTags.not('img, figure, iframe, #redactor-image-box, #redactor-image-editter, [data-redactor-style-cache], [data-redactor-span]' + filter).removeAttr('style');
+
+						this.keydown.formatEmpty(e);
+						this.code.syncFire = true;
+
+					}, this), 1);
+				},
+				onEnter: function(e)
+				{
+					var stop = this.core.callback('enter', e);
+					if (stop === false)
+					{
+						e.preventDefault();
+						return false;
 					}
 
-					// image delete and backspace
-					if (key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE)
+					// blockquote exit
+					if (this.keydown.blockquote && this.keydown.exitFromBlockquote(e) === true)
+					{
+						return false;
+					}
+
+					// pre
+					if (this.keydown.pre)
+					{
+						return this.keydown.insertNewLine(e);
+					}
+					// blockquote & figcaption
+					else if (this.keydown.blockquote || this.keydown.figcaption)
+					{
+						return this.keydown.insertBreakLine(e);
+					}
+					// figure
+					else if (this.keydown.figure)
+					{
+						setTimeout($.proxy(function()
+						{
+							this.keydown.replaceToParagraph('FIGURE');
+
+						}, this), 1);
+					}
+					// paragraphs
+					else if (this.keydown.block)
 					{
-						var nodes = this.selection.getNodes();
+						setTimeout($.proxy(function()
+						{
+							this.keydown.replaceToParagraph('DIV');
+
+						}, this), 1);
 
-						if (nodes)
+						// empty list exit
+						if (this.keydown.block.tagName === 'LI')
 						{
-							var len = nodes.length;
-							var last;
-							for (var i = 0; i < len; i++)
+							var current = this.selection.current();
+							var $parent = $(current).closest('li', this.$editor[0]);
+							var $list = $parent.parents('ul,ol', this.$editor[0]).last();
+
+							if ($parent.length !== 0 && this.utils.isEmpty($parent.html()) && $list.next().length === 0 && this.utils.isEmpty($list.find("li").last().html()))
 							{
-								var children = $(nodes[i]).children('img');
-								if (children.length !== 0)
-								{
-									var self = this;
-									$.each(children, function(z,s)
-									{
-										var $s = $(s);
-										if ($s.css('float') != 'none') return;
+								$list.find("li").last().remove();
+
+								var node = $(this.opts.emptyHtml);
+								$list.after(node);
+								this.caret.start(node);
 
-										// image delete callback
-										self.core.setCallback('imageDelete', s.src, $s);
-										last = s;
-									});
-								}
-								else if (nodes[i].tagName == 'IMG')
-								{
-									if (last != nodes[i])
-									{
-										// image delete callback
-										this.core.setCallback('imageDelete', nodes[i].src, $(nodes[i]));
-										last = nodes[i];
-									}
-								}
+								return false;
 							}
 						}
+
+					}
+					// outside
+					else if (!this.keydown.block)
+					{
+						return this.keydown.insertParagraph(e);
 					}
 
-					// backspace
-					if (key === this.keyCode.BACKSPACE)
+                    // firefox enter into inline element
+					if (this.detect.isFirefox() && this.utils.isInline(this.keydown.parent))
 					{
-						// backspace as outdent
-						var block = this.selection.getBlock();
-						var indented = ($(block).css('margin-left') !== '0px');
-						if (block && indented && this.range.collapsed && this.utils.isStartOfElement())
-						{
-							this.indent.decrease();
-							e.preventDefault();
-							return;
-						}
+                        this.keydown.insertBreakLine(e);
+                        return;
+                    }
 
-						// remove hr in FF
-						if (this.utils.browser('mozilla'))
-						{
-							var prev = this.selection.getPrev();
-							var prev2 = $(prev).prev()[0];
-							if (prev && prev.tagName === 'HR') $(prev).remove();
-							if (prev2 && prev2.tagName === 'HR') $(prev2).remove();
-						}
+					// remove inline tags in new-empty paragraph
+                    if (!this.opts.keepInlineOnEnter)
+                    {
+    					setTimeout($.proxy(function()
+    					{
+    						var inline = this.selection.inline();
+    						if (inline && this.utils.isEmpty(inline.innerHTML))
+    						{
+    							var parent = this.selection.block();
+    							$(inline).remove();
+    							//this.caret.start(parent);
 
-						this.keydown.removeInvisibleSpace();
-						this.keydown.removeEmptyListInTable(e);
+                                var range = document.createRange();
+                                range.setStart(parent, 0);
+
+                                var textNode = document.createTextNode('\u200B');
+
+                                range.insertNode(textNode);
+                                range.setStartAfter(textNode);
+                                range.collapse(true);
+
+                                var sel = window.getSelection();
+                				sel.removeAllRanges();
+                				sel.addRange(range);
+    						}
+
+
+    					}, this), 1);
 					}
 
-					this.code.sync();
+                    // remove last br
+                    setTimeout($.proxy(function()
+    				{
+                        var block = this.selection.block();
+                        var nodes = block.childNodes;
+                        var last = nodes[nodes.length-1];
+                        if (last && last.nodeType !== 3 && last.tagName === 'BR')
+                        {
+                            $(last).remove();
+                        }
+
+                    }, this), 1);
 				},
 				checkEvents: function(arrow, key)
 				{
-					if (!arrow && (this.core.getEvent() == 'click' || this.core.getEvent() == 'arrow'))
+					if (!arrow && (this.core.getEvent() === 'click' || this.core.getEvent() === 'arrow'))
 					{
 						this.core.addEvent(false);
 
@@ -5259,14 +6956,17 @@
 					var k = this.keyCode;
 					var keys = [k.BACKSPACE, k.DELETE, k.ENTER, k.ESC, k.TAB, k.CTRL, k.META, k.ALT, k.SHIFT];
 
-					return ($.inArray(key, keys) == -1) ? true : false;
+					return ($.inArray(key, keys) === -1) ? true : false;
 
 				},
 				addArrowsEvent: function(arrow)
 				{
-					if (!arrow) return;
+					if (!arrow)
+					{
+						return;
+					}
 
-					if ((this.core.getEvent() == 'click' || this.core.getEvent() == 'arrow'))
+					if ((this.core.getEvent() === 'click' || this.core.getEvent() === 'arrow'))
 					{
 						this.core.addEvent(false);
 						return;
@@ -5276,14 +6976,14 @@
 				},
 				setupBuffer: function(e, key)
 				{
-					if (this.keydown.ctrl && key === 90 && !e.shiftKey && !e.altKey && this.opts.buffer.length) // z key
+					if (this.keydown.ctrl && key === 90 && !e.shiftKey && !e.altKey && this.sBuffer.length) // z key
 					{
 						e.preventDefault();
 						this.buffer.undo();
 						return;
 					}
-					// undo
-					else if (this.keydown.ctrl && key === 90 && e.shiftKey && !e.altKey && this.opts.rebuffer.length !== 0)
+					// redo
+					else if (this.keydown.ctrl && key === 90 && e.shiftKey && !e.altKey && this.sRebuffer.length !== 0)
 					{
 						e.preventDefault();
 						this.buffer.redo();
@@ -5291,22 +6991,38 @@
 					}
 					else if (!this.keydown.ctrl)
 					{
-						if (key == this.keyCode.BACKSPACE || key == this.keyCode.DELETE || (key == this.keyCode.ENTER && !e.ctrlKey && !e.shiftKey))
+						if (key === this.keyCode.SPACE || key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE || (key === this.keyCode.ENTER && !e.ctrlKey && !e.shiftKey))
 						{
 							this.buffer.set();
 						}
 					}
 				},
-				setupSelectAll: function(e, key)
+				exitFromBlockquote: function(e)
 				{
-					if (this.keydown.ctrl && key === 65)
+					if (!this.utils.isEndOfElement(this.keydown.blockquote))
 					{
-						this.utils.enableSelectAll();
+						return;
 					}
-					else if (key != this.keyCode.LEFT_WIN && !this.keydown.ctrl)
+
+					var tmp = this.clean.removeSpacesHard($(this.keydown.blockquote).html());
+					if (tmp.search(/(<br\s?\/?>){1}$/i) !== -1)
 					{
-						this.utils.disableSelectAll();
+						e.preventDefault();
+
+						var $last = $(this.keydown.blockquote).children().last();
+
+						$last.filter('br').remove();
+						$(this.keydown.blockquote).children().last().filter('span').remove();
+
+						var node = $(this.opts.emptyHtml);
+						$(this.keydown.blockquote).after(node);
+						this.caret.start(node);
+
+						return true;
+
 					}
+
+					return;
 				},
 				onArrowDown: function()
 				{
@@ -5321,162 +7037,132 @@
 						}
 					}
 				},
-				onShiftEnter: function(e)
+				onArrowUp: function()
 				{
-					this.buffer.set();
+					var tags = [this.keydown.blockquote, this.keydown.pre, this.keydown.figcaption];
 
-					if (this.utils.isEndOfElement())
+					for (var i = 0; i < tags.length; i++)
 					{
-						return this.keydown.insertDblBreakLine(e);
+						if (tags[i])
+						{
+							this.keydown.insertBeforeFirstElement(tags[i]);
+							return false;
+						}
 					}
-
-					return this.keydown.insertBreakLine(e);
 				},
-				onTab: function(e, key)
+				insertAfterLastElement: function(element)
 				{
-					if (!this.opts.tabKey) return true;
-					if (this.utils.isEmpty(this.code.get()) && this.opts.tabAsSpaces === false) return true;
+					if (!this.utils.isEndOfElement(element))
+					{
+						return;
+					}
 
-					e.preventDefault();
+					var last = this.core.editor().contents().last();
+					var $next = (element.tagName === 'FIGCAPTION') ? $(this.keydown.block).parent().next() : $(this.keydown.block).next();
 
-					var node;
-					if (this.keydown.pre && !e.shiftKey)
+					if ($next.length !== 0)
 					{
-						node = (this.opts.preSpaces) ? document.createTextNode(Array(this.opts.preSpaces + 1).join('\u00a0')) : document.createTextNode('\t');
-						this.insert.node(node);
-						this.code.sync();
+						return;
 					}
-					else if (this.opts.tabAsSpaces !== false)
+					else if (last.length === 0 && last[0] !== element)
 					{
-						node = document.createTextNode(Array(this.opts.tabAsSpaces + 1).join('\u00a0'));
-						this.insert.node(node);
-						this.code.sync();
+						this.caret.start(last);
+						return;
 					}
 					else
 					{
-						if (e.metaKey && key === 219) this.indent.decrease();
-						else if (e.metaKey && key === 221) this.indent.increase();
-						else if (!e.shiftKey) this.indent.increase();
-						else this.indent.decrease();
+						var node = $(this.opts.emptyHtml);
+
+						if (element.tagName === 'FIGCAPTION')
+						{
+						    $(element).parent().after(node);
+						}
+						else
+						{
+    						$(element).after(node);
+						}
+
+						this.caret.start(node);
 					}
 
-					return false;
 				},
-				replaceDivToBreakLine: function()
+				insertBeforeFirstElement: function(element)
 				{
-					var blockElem = this.selection.getBlock();
-					var blockHtml = blockElem.innerHTML.replace(/<br\s?\/?>/gi, '');
-					if ((blockElem.tagName === 'DIV' || blockElem.tagName === 'P') && blockHtml === '' && !$(blockElem).hasClass('redactor-editor'))
+					if (!this.utils.isStartOfElement())
 					{
-						var br = document.createElement('br');
+						return;
+					}
 
-						$(blockElem).replaceWith(br);
-						this.caret.setBefore(br);
+					if (this.core.editor().contents().length > 1 && this.core.editor().contents().first()[0] !== element)
+					{
+						return;
+					}
 
-						this.code.sync();
+					var node = $(this.opts.emptyHtml);
+					$(element).before(node);
+					this.caret.start(node);
 
-						return false;
-					}
 				},
-				replaceDivToParagraph: function()
+				onTab: function(e, key)
 				{
-					var blockElem = this.selection.getBlock();
-					var blockHtml = blockElem.innerHTML.replace(/<br\s?\/?>/gi, '');
-					if (blockElem.tagName === 'DIV' && this.utils.isEmpty(blockHtml) && !$(blockElem).hasClass('redactor-editor'))
+					if (!this.opts.tabKey)
 					{
-						var p = document.createElement('p');
-						p.innerHTML = this.opts.invisibleSpace;
-
-						$(blockElem).replaceWith(p);
-						this.caret.setStart(p);
-
-						this.code.sync();
-
-						return false;
+						return true;
 					}
-					else if (this.opts.cleanStyleOnEnter && blockElem.tagName == 'P')
+
+					var isList = (this.keydown.block && this.keydown.block.tagName === 'LI')
+					if (this.utils.isEmpty(this.code.get()) || (!isList && !this.keydown.pre && this.opts.tabAsSpaces === false))
 					{
-						$(blockElem).removeAttr('class').removeAttr('style');
+						return true;
 					}
-				},
-				insertParagraph: function(e)
-				{
-					e.preventDefault();
-
-					this.selection.get();
-
-					var p = document.createElement('p');
-					p.innerHTML = this.opts.invisibleSpace;
-
-					this.range.deleteContents();
-					this.range.insertNode(p);
 
-					this.caret.setStart(p);
-
-					this.code.sync();
+					e.preventDefault();
+					this.buffer.set();
 
-					return false;
-				},
-				exitFromBlockquote: function(e)
-				{
-					if (!this.utils.isEndOfElement()) return;
+                    var isListStart = (isList && this.utils.isStartOfElement(this.keydown.block));
+					var node;
 
-					var tmp = $.trim($(this.keydown.block).html());
-					if (tmp.search(/(<br\s?\/?>){2}$/i) != -1)
+					if (this.keydown.pre && !e.shiftKey)
 					{
-						e.preventDefault();
-
-						if (this.opts.linebreaks)
+						node = (this.opts.preSpaces) ? document.createTextNode(Array(this.opts.preSpaces + 1).join('\u00a0')) : document.createTextNode('\t');
+						this.insert.node(node);
+					}
+					else if (this.opts.tabAsSpaces !== false && !isListStart)
+					{
+						node = document.createTextNode(Array(this.opts.tabAsSpaces + 1).join('\u00a0'));
+						this.insert.node(node);
+					}
+					else
+					{
+						if (e.metaKey && key === 219)
 						{
-							var br = document.createElement('br');
-							$(this.keydown.blockquote).after(br);
-
-							this.caret.setBefore(br);
-							$(this.keydown.block).html(tmp.replace(/<br\s?\/?>$/i, ''));
+							this.indent.decrease();
+						}
+						else if (e.metaKey && key === 221)
+						{
+							this.indent.increase();
+						}
+						else if (!e.shiftKey)
+						{
+							this.indent.increase();
 						}
 						else
 						{
-							var node = $(this.opts.emptyHtml);
-							$(this.keydown.blockquote).after(node);
-							this.caret.setStart(node);
+							this.indent.decrease();
 						}
-
-						return true;
-
 					}
 
-					return;
-
+					return false;
 				},
-				insertAfterLastElement: function(element)
+				setupSelectAll: function(e, key)
 				{
-					if (!this.utils.isEndOfElement()) return;
-
-					this.buffer.set();
-
-					if (this.opts.linebreaks)
+					if (this.keydown.ctrl && key === 65)
 					{
-						var contents = $('<div>').append($.trim(this.$editor.html())).contents();
-						var last = contents.last()[0];
-						if (last.tagName == 'SPAN' && last.innerHTML === '')
-						{
-							last = contents.prev()[0];
-						}
-
-						if (this.utils.getOuterHtml(last) != this.utils.getOuterHtml(element)) return;
-
-						var br = document.createElement('br');
-						$(element).after(br);
-						this.caret.setAfter(br);
-
+						this.utils.enableSelectAll();
 					}
-					else
+					else if (key !== this.keyCode.LEFT_WIN && !this.keydown.ctrl)
 					{
-						if (this.$editor.contents().last()[0] !== element) return;
-
-						var node = $(this.opts.emptyHtml);
-						$(element).after(node);
-						this.caret.setStart(node);
+						this.utils.disableSelectAll();
 					}
 				},
 				insertNewLine: function(e)
@@ -5485,14 +7171,31 @@
 
 					var node = document.createTextNode('\n');
 
-					this.selection.get();
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
 
-					this.range.deleteContents();
-					this.range.insertNode(node);
+					range.deleteContents();
+					range.insertNode(node);
 
-					this.caret.setAfter(node);
+					this.caret.after(node);
 
-					this.code.sync();
+					return false;
+				},
+				insertParagraph: function(e)
+				{
+					e.preventDefault();
+
+					var p = document.createElement('p');
+					//p.innerHTML = this.opts.invisibleSpace;
+					p.innerHTML = '<br>';
+
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+
+					range.deleteContents();
+					range.insertNode(p);
+
+					this.caret.start(p);
 
 					return false;
 				},
@@ -5508,73 +7211,103 @@
 				{
 					e.stopPropagation();
 
-					this.selection.get();
-
 					var br1 = document.createElement('br');
+					this.insert.node(br1);
 
-					if (this.utils.browser('msie'))
+					if (dbl === true)
 					{
-						this.range.collapse(false);
-						this.range.setEnd(this.range.endContainer, this.range.endOffset);
+						var br2 = document.createElement('br');
+						this.insert.node(br2);
+						this.caret.after(br2);
 					}
 					else
 					{
-						this.range.deleteContents();
+    					this.caret.after(br1);
 					}
 
-					this.range.insertNode(br1);
+					return false;
 
-					// move br outside A tag
-					var $parentA = $(br1).parent("a");
+				},
+				wrapToParagraph: function()
+				{
+					var $current = $(this.keydown.current);
+					var	node = $('<p>').append($current.clone());
+					$current.replaceWith(node);
 
-					if ($parentA.length > 0)
+					var next = $(node).next();
+					if (typeof(next[0]) !== 'undefined' && next[0].tagName === 'BR')
 					{
-						$parentA.find(br1).remove();
-						$parentA.after(br1);
+						next.remove();
 					}
 
-					if (dbl === true)
+					this.caret.end(node);
+
+				},
+				replaceToParagraph: function(tag)
+				{
+					var blockElem = this.selection.block();
+					var $prev = $(blockElem).prev();
+
+					var blockHtml = blockElem.innerHTML.replace(/<br\s?\/?>/gi, '');
+					if (blockElem.tagName === tag && this.utils.isEmpty(blockHtml) && !$(blockElem).hasClass('redactor-in'))
 					{
-						var $next = $(br1).next();
-						if ($next.length !== 0 && $next[0].tagName === 'BR' && this.utils.isEndOfEditor())
-						{
-							this.caret.setAfter(br1);
-							this.code.sync();
-							return false;
-						}
+						var p = document.createElement('p');
+						$(blockElem).replaceWith(p);
 
-						var br2 = document.createElement('br');
+                        this.keydown.setCaretToParagraph(p);
 
-						this.range.insertNode(br2);
-						this.caret.setAfter(br2);
+						return false;
 					}
-					else
+					else if (blockElem.tagName === 'P')
 					{
-						// caret does not move after the br visual
-						if (this.utils.browser('msie'))
-						{
-							var space = document.createElement('span');
-							space.innerHTML = '&#x200b;';
+						$(blockElem).removeAttr('class').removeAttr('style');
 
-							$(br1).after(space);
+						// fix #227
+						if (this.detect.isIe() && this.utils.isEmpty(blockHtml) && this.utils.isInline(this.keydown.parent))
+                        {
+                            $(blockElem).on('input', $.proxy(function()
+                            {
+                                var parent = this.selection.parent();
+                                if (this.utils.isInline(parent))
+                                {
+                                    var html = $(parent).html();
+                                    $(blockElem).html(html);
+                                    this.caret.end(blockElem);
+                                }
 
-							this.range.setStartAfter(space);
-							this.range.setEndAfter(space);
-							$(space).remove();
-						}
-						else
-						{
-							var range = document.createRange();
-							range.setStartAfter(br1);
-							range.collapse(true);
-							var selection = window.getSelection();
-							selection.removeAllRanges();
-							selection.addRange(range);
+                                $(blockElem).off('keyup');
+
+                            }, this));
 						}
+
+						return false;
 					}
+					else if ($prev.hasClass(this.opts.videoContainerClass))
+					{
+    					$prev.removeAttr('class');
 
-					this.code.sync();
-					return false;
+    					var p = document.createElement('p');
+						$prev.replaceWith(p);
+
+						this.keydown.setCaretToParagraph(p);
+
+						return false;
+					}
+				},
+				setCaretToParagraph: function(p)
+				{
+                    var range = document.createRange();
+                    range.setStart(p, 0);
+
+                    var textNode = document.createTextNode('\u200B');
+
+                    range.insertNode(textNode);
+                    range.setStartAfter(textNode);
+                    range.collapse(true);
+
+                    var sel = window.getSelection();
+    				sel.removeAllRanges();
+    				sel.addRange(range);
 				},
 				removeInvisibleSpace: function()
 				{
@@ -5592,172 +7325,165 @@
 
 					if (td.length !== 0 && $current.closest('li', this.$editor[0]) && $parent.children('li').length === 1)
 					{
-						if (!this.utils.isEmpty($current.text())) return;
+						if (!this.utils.isEmpty($current.text()))
+						{
+							return;
+						}
 
 						e.preventDefault();
 
 						$current.remove();
 						$parent.remove();
 
-						this.caret.setStart(td);
-					}
+						this.caret.start(td);
+					}
+				},
+				removeEmptyLists: function()
+				{
+					var removeIt = function()
+					{
+						var html = $.trim(this.innerHTML).replace(/\/t\/n/g, '');
+						if (html === '')
+						{
+							$(this).remove();
+						}
+					};
+
+					this.core.editor().find('li').each(removeIt);
+					this.core.editor().find('ul, ol').each(removeIt);
+				},
+				formatEmpty: function(e)
+				{
+					var html = $.trim(this.core.editor().html());
+
+					if (!this.utils.isEmpty(html))
+					{
+						return;
+					}
+
+					e.preventDefault();
+
+					if (this.opts.type === 'inline' || this.opts.type === 'pre')
+					{
+						this.core.editor().html(this.marker.html());
+						this.selection.restore();
+					}
+					else
+					{
+						this.core.editor().html(this.opts.emptyHtml);
+						this.focus.start();
+					}
+
+					return false;
+
 				}
 			};
 		},
+
+		// =keyup
 		keyup: function()
 		{
 			return {
 				init: function(e)
 				{
-
-					if (this.rtePaste) return;
+					if (this.rtePaste)
+					{
+						return;
+					}
 
 					var key = e.which;
+					this.keyup.block = this.selection.block();
+					this.keyup.current = this.selection.current();
+					this.keyup.parent = this.selection.parent();
+					this.keyup.lastShiftKey = e.shiftKey;
 
-					this.keyup.current = this.selection.getCurrent();
-					this.keyup.parent = this.selection.getParent();
-					var $parent = this.utils.isRedactorParent($(this.keyup.parent).parent());
 
 					// callback
-					var keyupStop = this.core.setCallback('keyup', e);
-					if (keyupStop === false)
+					var stop = this.core.callback('keyup', e);
+					if (stop === false)
 					{
 						e.preventDefault();
 						return false;
 					}
 
-					// replace to p before / after the table or body
-					if (!this.opts.linebreaks && this.keyup.current.nodeType === 3 && this.keyup.current.length <= 1 && (this.keyup.parent === false || this.keyup.parent.tagName == 'BODY'))
-					{
-						this.keyup.replaceToParagraph();
-					}
-
-					// replace div after lists
-					if (!this.opts.linebreaks && this.utils.isRedactorParent(this.keyup.current) && this.keyup.current.tagName === 'DIV')
-					{
-						this.keyup.replaceToParagraph(false);
-					}
-
-
-					if (!this.opts.linebreaks && $(this.keyup.parent).hasClass('redactor-invisible-space') && ($parent === false || $parent[0].tagName == 'BODY'))
-					{
-						$(this.keyup.parent).contents().unwrap();
-						this.keyup.replaceToParagraph();
-					}
-
-					// linkify
-					if (this.linkify.isEnabled() && this.linkify.isKey(key)) this.linkify.format();
+                    // replace a prev figure to paragraph if caret is before image
+                    if (key === this.keyCode.ENTER)
+                    {
+                        if (this.keyup.block && this.keyup.block.tagName === 'FIGURE')
+                        {
+                            var $prev = $(this.keyup.block).prev();
+                            if ($prev.length !== 0 && $prev[0].tagName === 'FIGURE')
+                            {
+                                var $newTag = this.utils.replaceToTag($prev, 'p');
+                                this.caret.start($newTag);
+                                return;
+                            }
+                        }
+                    }
 
-					if (key === this.keyCode.DELETE || key === this.keyCode.BACKSPACE)
+					// replace figure to paragraph
+					if (key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE)
 					{
-						if (this.utils.browser('mozilla'))
+						if (this.utils.isSelectAll())
 						{
-							var td = $(this.keydown.current).closest('td', this.$editor[0]);
-							if (td.size() !== 0 && td.text() !== '')
-							{
-								e.preventDefault();
-								return false;
-							}
-						}
+							this.focus.start();
+                            this.toolbar.setUnfixed();
 
-						// clear unverified
-						this.clean.clearUnverified();
+							return;
+						}
 
-						if (this.observe.image)
+						// if caret before figure - delete image
+						if (this.keyup.block && this.keydown.block && this.keyup.block.tagName === 'FIGURE' && this.utils.isStartOfElement(this.keydown.block))
 						{
-							e.preventDefault();
+    						e.preventDefault();
 
-							this.image.hideResize();
+                            this.selection.save();
+                            $(this.keyup.block).find('figcaption').remove();
+    						$(this.keyup.block).find('img').first().remove();
+    						this.utils.replaceToTag(this.keyup.block, 'p');
 
-							this.buffer.set();
-							this.image.remove(this.observe.image);
-							this.observe.image = false;
+    						var $marker = this.marker.find();
+    						$('html, body').animate({ scrollTop: $marker.position().top + 20 }, 500);
 
-							return false;
+    						this.selection.restore();
+    						return;
 						}
 
-						// remove empty paragraphs
-						this.$editor.find('p').each($.proxy(function(i, s)
-						{
-							this.utils.removeEmpty(i, $(s).html());
-						}, this));
 
-						// remove invisible space
-						if (this.opts.linebreaks && this.keyup.current && this.keyup.current.tagName == 'DIV' && this.utils.isEmpty(this.keyup.current.innerHTML))
+						// if paragraph does contain only image replace to figure
+						if (this.keyup.block && this.keyup.block.tagName === 'P')
 						{
-							$(this.keyup.current).after(this.selection.getMarkerAsHtml());
-							this.selection.restore();
-							$(this.keyup.current).remove();
+							var isContainImage = $(this.keyup.block).find('img').length;
+							var text = $(this.keyup.block).text().replace(/\u200B/g, '');
+							if (text === '' && isContainImage !== 0)
+							{
+								this.utils.replaceToTag(this.keyup.block, 'figure');
+							}
 						}
 
-						this.keyup.removeEmptyLists();
-
-						// if empty
-						return this.keyup.formatEmpty(e);
-					}
-				},
-				replaceToParagraph: function(clone)
-				{
-					var $current = $(this.keyup.current);
-
-					var node;
-					if (clone === false)
-					{
-						node = $('<p>').append($current.html());
-					}
-					else
-					{
-						node = $('<p>').append($current.clone());
-					}
-
-					$current.replaceWith(node);
-					var next = $(node).next();
-					if (typeof(next[0]) !== 'undefined' && next[0].tagName == 'BR')
-					{
-						next.remove();
-					}
-
-					this.caret.setEnd(node);
-				},
-				removeEmptyLists: function()
-				{
-					var removeIt = function()
-					{
-						var html = $.trim(this.innerHTML).replace(/\/t\/n/g, '');
-						if (html === '')
+						// if figure does not contain image - replace to paragraph
+						if (this.keyup.block && this.keyup.block.tagName === 'FIGURE' && $(this.keyup.block).find('img').length === 0)
 						{
-							$(this).remove();
+							this.selection.save();
+							this.utils.replaceToTag(this.keyup.block, 'p');
+							this.selection.restore();
 						}
-					};
-
-					this.$editor.find('li').each(removeIt);
-					this.$editor.find('ul, ol').each(removeIt);
-				},
-				formatEmpty: function(e)
-				{
-					var html = $.trim(this.$editor.html());
-
-					if (!this.utils.isEmpty(html)) return;
-
-					e.preventDefault();
-
-					if (this.opts.linebreaks)
-					{
-						this.$editor.html(this.selection.getMarkerAsHtml());
-						this.selection.restore();
 					}
-					else
+
+					// linkify
+					if (this.linkify.isKey(key))
 					{
-						this.$editor.html(this.opts.emptyHtml);
-						this.focus.setStart();
+    					this.selection.save();
+						this.linkify.format();
+    					this.selection.restore();
 					}
 
-					this.code.sync();
-
-					return false;
 				}
+
 			};
 		},
+
+		// =lang
 		lang: function()
 		{
 			return {
@@ -5767,10 +7493,12 @@
 				},
 				get: function(name)
 				{
-					return (typeof this.opts.curLang[name] != 'undefined') ? this.opts.curLang[name] : '';
+					return (typeof this.opts.curLang[name] !== 'undefined') ? this.opts.curLang[name] : '';
 				}
 			};
 		},
+
+		// =line
 		line: function()
 		{
 			return {
@@ -5778,797 +7506,876 @@
 				{
 					this.buffer.set();
 
-					var blocks = this.selection.getBlocks();
- 					if (blocks[0] !== false && this.line.isExceptLastOrFirst(blocks))
-	 				{
-	 					if (!this.utils.browser('msie')) this.$editor.focus();
-	 					return;
-					}
-
-					if (this.utils.browser('msie'))
-					{
-						this.line.insertInIe();
-					}
-					else
-					{
-						this.line.insertInOthersBrowsers();
-					}
-				},
-				isExceptLastOrFirst: function(blocks)
-				{
-					var exceptTags = ['li', 'td', 'th', 'blockquote', 'figcaption', 'pre', 'dl', 'dt', 'dd'];
-
-					var first = blocks[0].tagName.toLowerCase();
-					var last = this.selection.getLastBlock();
-
-					last = (typeof last == 'undefined') ? first : last.tagName.toLowerCase();
+					// insert
+					this.insert.html(this.line.getLineHtml());
 
-					var firstFound = $.inArray(first, exceptTags) != -1;
-					var lastFound = $.inArray(last, exceptTags) != -1;
-
-					if ((firstFound && lastFound) || firstFound)
-					{
-						return true;
-					}
-				},
-				insertInIe: function()
-				{
-					this.utils.saveScroll();
-					this.buffer.set();
+					// find
+					var $hr = this.core.editor().find('#redactor-hr-tmp-id');
+					$hr.removeAttr('id');
 
-					this.insert.node(document.createElement('hr'));
+					this.core.callback('insertedLine', $hr);
 
-					this.utils.restoreScroll();
-					this.code.sync();
+					return $hr;
 				},
-				insertInOthersBrowsers: function()
+				getLineHtml: function()
 				{
-					this.buffer.set();
-
-					var extra = '<p id="redactor-insert-line"><br /></p>';
-					if (this.opts.linebreaks) extra = '<br id="redactor-insert-line">';
-
-					document.execCommand('insertHtml', false, '<hr>' + extra);
+					var html = '<hr id="redactor-hr-tmp-id" />';
+					if (!this.detect.isFirefox() && this.utils.isEmpty())
+					{
+						html += '<p>' + this.opts.emptyHtml + '</p>';
+					}
 
-					this.line.setFocus();
-					this.code.sync();
+					return html;
 				},
-				setFocus: function()
+				// ff only
+				removeOnBackspace: function(e)
 				{
-					var node = this.$editor.find('#redactor-insert-line');
-					var next = $(node).next()[0];
-					var target = next;
-					if (this.utils.browser('mozilla') && next && next.innerHTML === '')
+					if (!this.utils.isCollapsed())
 					{
-						target = $(next).next()[0];
-						$(next).remove();
+						return;
 					}
 
-					if (target)
+					var $block = $(this.selection.block());
+					if ($block.length === 0 || !this.utils.isStartOfElement($block))
 					{
-						node.remove();
-
-						if (!this.opts.linebreaks)
-						{
-							this.$editor.focus();
-							this.line.setStart(target);
-						}
-
+						return;
 					}
-					else
-					{
 
-						node.removeAttr('id');
-						this.line.setStart(node[0]);
+					// if hr is previous element
+					var $prev = $block.prev();
+					if ($prev && $prev.length !== 0 && $prev[0].tagName === 'HR')
+					{
+						e.preventDefault();
+						$prev.remove();
 					}
-				},
-				setStart: function(node)
-				{
-					if (typeof node === 'undefined') return;
-
-					var textNode = document.createTextNode('\u200B');
-
-					this.selection.get();
-					this.range.setStart(node, 0);
-					this.range.insertNode(textNode);
-					this.range.collapse(true);
-					this.selection.addRange();
-
 				}
 			};
 		},
+
+		// =link
 		link: function()
 		{
 			return {
-				show: function(e)
+
+				// public
+				get: function()
+				{
+					return $(this.selection.inlines('a'));
+				},
+				is: function()
 				{
-					if (typeof e != 'undefined' && e.preventDefault) e.preventDefault();
+					var nodes = this.selection.nodes() ;
+					var $link = $(this.selection.current()).closest('a', this.core.editor()[0]);
 
-					if (!this.observe.isCurrent('a'))
-					{
-						this.modal.load('link', this.lang.get('link_insert'), 600);
-					}
-					else
+					return ($link.length === 0 || nodes.length > 1) ? false : $link;
+				},
+				unlink: function(e)
+				{
+					// if call from clickable element
+					if (typeof e !== 'undefined' && e.preventDefault)
 					{
-						this.modal.load('link', this.lang.get('link_edit'), 600);
+						e.preventDefault();
 					}
 
-					this.modal.createCancelButton();
-
-					var buttonText = !this.observe.isCurrent('a') ? this.lang.get('insert') : this.lang.get('edit');
-
-					this.link.buttonInsert = this.modal.createActionButton(buttonText);
-
-					this.selection.get();
-
-					this.link.getData();
-					this.link.cleanUrl();
-
-					if (this.link.target == '_blank') $('#redactor-link-blank').prop('checked', true);
-
-					this.link.$inputUrl = $('#redactor-link-url');
-					this.link.$inputText = $('#redactor-link-url-text');
+					// buffer
+					this.buffer.set();
 
-					this.link.$inputText.val(this.link.text);
-					this.link.$inputUrl.val(this.link.url);
+					var links = this.selection.inlines('a');
+					if (links.length === 0)
+					{
+						return;
+					}
 
-					this.link.buttonInsert.on('click', $.proxy(this.link.insert, this));
+					var $links = this.link.replaceLinksToText(links);
 
-					// hide link's tooltip
-					$('.redactor-link-tooltip').remove();
+					this.observe.closeAllTooltip();
+					this.core.callback('deletedLink', $links);
 
-					// show modal
-					this.selection.save();
-					this.modal.show();
-					this.link.$inputUrl.focus();
 				},
-				cleanUrl: function()
+				insert: function(link, cleaned)
 				{
-					var thref = self.location.href.replace(/\/$/i, '');
+					var $el = this.link.is();
 
-					if (typeof this.link.url !== "undefined")
+					if (cleaned !== true)
 					{
-						this.link.url = this.link.url.replace(thref, '');
-						this.link.url = this.link.url.replace(/^\/#/, '#');
-						this.link.url = this.link.url.replace('mailto:', '');
-
-						// remove host from href
-						if (!this.opts.linkProtocol)
+						link = this.link.buildLinkFromObject($el, link);
+						if (link === false)
 						{
-							var re = new RegExp('^(http|ftp|https)://' + self.location.host, 'i');
-							this.link.url = this.link.url.replace(re, '');
+							return false;
 						}
 					}
-				},
-				getData: function()
-				{
-					this.link.$node = false;
-
-					var $el = $(this.selection.getCurrent()).closest('a', this.$editor[0]);
-					if ($el.length !== 0 && $el[0].tagName === 'A')
-					{
-						this.link.$node = $el;
-
-						this.link.url = $el.attr('href');
-						this.link.text = $el.text();
-						this.link.target = $el.attr('target');
-					}
-					else
-					{
-						this.link.text = this.sel.toString();
-						this.link.url = '';
-						this.link.target = '';
-					}
 
-				},
-				insert: function()
-				{
-					this.placeholder.remove();
+					// buffer
+					this.buffer.set();
 
-					var target = '';
-					var link = this.link.$inputUrl.val();
-					var text = this.link.$inputText.val().replace(/(<([^>]+)>)/ig,"");
+					// callback
+					link = this.core.callback('beforeInsertingLink', link);
 
-					if ($.trim(link) === '')
+					if ($el === false)
 					{
-						this.link.$inputUrl.addClass('redactor-input-error').on('keyup', function()
-						{
-							$(this).removeClass('redactor-input-error');
-							$(this).off('keyup');
-
-						});
-
-						return;
-					}
+						// insert
+						$el = $('<a />');
+						$el = this.link.update($el, link);
+						$el = $(this.insert.node($el));
 
-					// mailto
-					if (link.search('@') != -1 && /(http|ftp|https):\/\//i.test(link) === false)
-					{
-						link = link.replace('mailto:', '');
-						link = 'mailto:' + link;
-					}
-					// url, not anchor
-					else if (link.search('#') !== 0)
-					{
-						if ($('#redactor-link-blank').prop('checked'))
+						var $parent = $el.parent();
+						if (this.utils.isRedactorParent($parent) === false)
 						{
-							target = '_blank';
+							$el.wrap('<p>');
 						}
 
-						// test url (add protocol)
-						var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';
-						var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');
-						var re2 = new RegExp('^' + pattern, 'i');
-						var re3 = new RegExp('\.(html|php)$', 'i');
-						if (link.search(re) == -1 && link.search(re3) == -1 && link.search(re2) === 0 && this.opts.linkProtocol)
+						// remove unlink wrapper
+						if ($parent.hasClass('redactor-unlink'))
 						{
-							link = this.opts.linkProtocol + '://' + link;
+							$parent.replaceWith(function(){
+								return $(this).contents();
+							});
 						}
+
+						this.caret.after($el);
+						this.core.callback('insertedLink', $el);
+					}
+					else
+					{
+						// update
+						$el = this.link.update($el, link);
+						this.caret.after($el);
 					}
 
-					this.link.set(text, link, target);
-					this.modal.close();
+					return $el;
+
 				},
-				set: function(text, link, target)
+				update: function($el, link)
 				{
-					text = $.trim(text.replace(/<|>/g, ''));
+					$el.text(link.text);
+					$el.attr('href', link.url);
 
-					this.selection.restore();
-					var blocks = this.selection.getBlocks();
+					this.link.target($el, link.target);
 
-					if (text === '' && link === '') return;
-					if (text === '' && link !== '') text = link;
+					return $el;
 
-					if (this.link.$node)
+				},
+				target: function($el, target)
+				{
+					return (target) ? $el.attr('target', '_blank') : $el.removeAttr('target');
+				},
+				show: function(e)
+				{
+					// if call from clickable element
+					if (typeof e !== 'undefined' && e.preventDefault)
 					{
-						this.buffer.set();
-
-						var $link = this.link.$node,
-							$el   = $link.children();
+						e.preventDefault();
+					}
 
-						if ($el.length > 0)
-						{
-							while ($el.length)
-							{
-								$el = $el.children();
-							}
+					// close tooltip
+					this.observe.closeAllTooltip();
 
-							$el = $el.end();
-						}
-						else
-						{
-							$el = $link;
-						}
+					// is link
+					var $el = this.link.is();
 
-						$link.attr('href', link);
-						$el.text(text);
+					// build modal
+					this.link.buildModal($el);
 
-						if (target !== '')
-						{
-							$link.attr('target', target);
-						}
-						else
-						{
-							$link.removeAttr('target');
-						}
+					// build link
+					var link = this.link.buildLinkFromElement($el);
 
-						this.selection.selectElement($link);
+					// if link cut & paste inside editor browser added self host to a link
+					link.url = this.link.removeSelfHostFromUrl(link.url);
 
-						this.code.sync();
-					}
-					else
+                    // new tab target
+					if (this.opts.linkNewTab && !$el)
 					{
-						if (this.utils.browser('mozilla') && this.link.text === '')
-						{
-							var $a = $('<a />').attr('href', link).text(text);
-							if (target !== '') $a.attr('target', target);
-
-							$a = $(this.insert.node($a));
-
-							if (this.opts.linebreaks)
-							{
-								$a.after('&nbsp;');
-							}
-
-							this.selection.selectElement($a);
-						}
-						else
-						{
-							var $a;
-							if (this.utils.browser('msie'))
-							{
-								$a = $('<a href="' + link + '">').text(text);
-								if (target !== '') $a.attr('target', target);
-
-								$a = $(this.insert.node($a));
+    					link.target = true;
+					}
 
-								if (this.selection.getText().match(/\s$/))
-								{
-									$a.after(" ");
-								}
+					// set modal values
+					this.link.setModalValues(link);
 
-								this.selection.selectElement($a);
-							}
-							else
-							{
-								document.execCommand('createLink', false, link);
+					// show modal
+					this.modal.show();
 
-								$a = $(this.selection.getCurrent()).closest('a', this.$editor[0]);
-								if (this.utils.browser('mozilla'))
-								{
-									$a = $('a[_moz_dirty=""]');
-								}
+					// focus
+					if (this.detect.isDesktop())
+					{
+						$('#redactor-link-url').focus();
+					}
+				},
 
-								if (target !== '') $a.attr('target', target);
-								$a.removeAttr('style').removeAttr('_moz_dirty');
+				// private
+				setModalValues: function(link)
+				{
+					$('#redactor-link-blank').prop('checked', link.target);
+					$('#redactor-link-url').val(link.url);
+					$('#redactor-link-url-text').val(link.text);
+				},
+				buildModal: function($el)
+				{
+					this.modal.load('link', this.lang.get(($el === false) ? 'link-insert' : 'link-edit'), 600);
 
-								if (this.selection.getText().match(/\s$/))
-								{
-									$a.after(" ");
-								}
+					// button insert
+					var $btn = this.modal.getActionButton();
+					$btn.text(this.lang.get(($el === false) ? 'insert' : 'save')).on('click', $.proxy(this.link.callback, this));
 
-								if (this.link.text !== '' || this.link.text != text)
-								{
-									if (!this.opts.linebreaks && blocks && blocks.length <= 1)
-									{
-										$a.text(text);
-									}
-									else if (this.opts.linebreaks)
-									{
-										$a.text(text);
-									}
+				},
+				callback: function()
+				{
+					// build link
+					var link = this.link.buildLinkFromModal();
+					if (link === false)
+					{
+						return false;
+					}
 
-									this.selection.selectElement($a);
-								}
-							}
-						}
+					// close
+					this.modal.close();
 
-						this.code.sync();
-						this.core.setCallback('insertedLink', $a);
+					// insert or update
+					this.link.insert(link, true);
+				},
+				cleanUrl: function(url)
+				{
+					return (typeof url === 'undefined') ? '' : $.trim(url.replace(/[^\W\w\D\d+&\'@#/%?=~_|!:,.;\(\)]/gi, ''));
+				},
+				cleanText: function(text)
+				{
+					return (typeof text === 'undefined') ? '' : $.trim(text.replace(/(<([^>]+)>)/gi, ''));
+				},
+				getText: function(link)
+				{
+					return (link.text === '' && link.url !== '') ? this.link.truncateUrl(link.url.replace(/<|>/g, '')) : link.text;
+				},
+				isUrl: function(url)
+				{
+					var pattern = '((xn--)?[\\W\\w\\D\\d]+(-[\\W\\w\\D\\d]+)*\\.)+[\\W\\w]{2,}';
 
+					var re1 = new RegExp('^(http|ftp|https)://' + pattern, 'i');
+					var re2 = new RegExp('^' + pattern, 'i');
+					var re3 = new RegExp('\.(html|php)$', 'i');
+					var re4 = new RegExp('^/', 'i');
+					var re5 = new RegExp('^tel:(.*?)', 'i');
+
+					// add protocol
+					if (url.search(re1) === -1 && url.search(re2) !== -1 && url.search(re3) === -1 && url.substring(0, 1) !== '/')
+					{
+						url = 'http://' + url;
 					}
 
-					// link tooltip
-					setTimeout($.proxy(function()
+					if (url.search(re1) !== -1 || url.search(re3) !== -1 || url.search(re4) !== -1 || url.search(re5) !== -1)
 					{
-						this.observe.links();
+						return url;
+					}
 
-					}, this), 5);
+					return false;
 				},
-				unlink: function(e)
+				isMailto: function(url)
+				{
+					return (url.search('@') !== -1 && /(http|ftp|https):\/\//i.test(url) === false);
+				},
+				isEmpty: function(link)
+				{
+					return (link.url === '' || (link.text === '' && link.url === ''));
+				},
+				truncateUrl: function(url)
+				{
+					return (url.length > this.opts.linkSize) ? url.substring(0, this.opts.linkSize) + '...' : url;
+				},
+				parse: function(link)
 				{
-					if (typeof e != 'undefined' && e.preventDefault)
+					// mailto
+					if (this.link.isMailto(link.url))
 					{
-						e.preventDefault();
+						link.url = 'mailto:' + link.url.replace('mailto:', '');
+					}
+					// url
+					else if (link.url.search('#') !== 0)
+					{
+    					if (this.opts.linkValidation)
+    					{
+						    link.url = this.link.isUrl(link.url);
+						}
 					}
 
-					var nodes = this.selection.getNodes();
-					if (!nodes) return;
+					// empty url or text or isn't url
+					return (this.link.isEmpty(link) || link.url === false) ? false : link;
 
-					this.buffer.set();
+				},
+				buildLinkFromModal: function()
+				{
+					var link = {};
 
-					var len = nodes.length;
-					var links = [];
-					for (var i = 0; i < len; i++)
-					{
-						if (nodes[i].tagName === 'A')
-						{
-							links.push(nodes[i]);
-						}
+					// url
+					link.url = this.link.cleanUrl($('#redactor-link-url').val());
 
-						var $node = $(nodes[i]).closest('a', this.$editor[0]);
-						$node.replaceWith($node.contents());
-					}
+					// text
+					link.text = this.link.cleanText($('#redactor-link-url-text').val());
+					link.text = this.link.getText(link);
 
-					this.core.setCallback('deletedLink', links);
+					// target
+					link.target = ($('#redactor-link-blank').prop('checked')) ? true : false;
 
-					// hide link's tooltip
-					$('.redactor-link-tooltip').remove();
+					// parse
+					return this.link.parse(link);
 
-					this.code.sync();
+				},
+				buildLinkFromObject: function($el, link)
+				{
+					// url
+					link.url = this.link.cleanUrl(link.url);
+
+					// text
+					link.text = (typeof link.text === 'undefined' && this.selection.is()) ? this.selection.text() : this.link.cleanText(link.text);
+					link.text = this.link.getText(link);
+
+					// target
+					link.target = ($el === false) ? link.target : this.link.buildTarget($el);
+
+					// parse
+					return this.link.parse(link);
 
 				},
-				toggleClass: function(className)
+				buildLinkFromElement: function($el)
 				{
-					this.link.setClass(className, 'toggleClass');
+					var link = {
+						url: '',
+						text: (this.selection.is()) ? this.selection.text() : '',
+						target: false
+					};
+
+					if ($el !== false)
+					{
+						link.url = $el.attr('href');
+						link.text = $el.text();
+						link.target = this.link.buildTarget($el);
+					}
+
+					return link;
 				},
-				addClass: function(className)
+				buildTarget: function($el)
 				{
-					this.link.setClass(className, 'addClass');
+					return (typeof $el.attr('target') !== 'undefined' && $el.attr('target') === '_blank') ? true : false;
 				},
-				removeClass: function(className)
+				removeSelfHostFromUrl: function(url)
 				{
-					this.link.setClass(className, 'removeClass');
+					var href = self.location.href.replace('#', '').replace(/\/$/i, '');
+					return url.replace(/^\/\#/, '#').replace(href, '').replace('mailto:', '');
 				},
-				setClass: function(className, func)
+				replaceLinksToText: function(links)
 				{
-					var links = this.selection.getInlinesTags(['a']);
-					if (links === false) return;
-
-					$.each(links, function()
+					var $first;
+					var $links = $.each(links, function(i,s)
 					{
-						$(this)[func](className);
+						var $el = $(s);
+						var $unlinked = $('<span class="redactor-unlink" />').append($el.contents());
+						$el.replaceWith($unlinked);
+
+						if (i === 0)
+						{
+							$first = $unlinked;
+						}
+
+						return $el;
 					});
+
+					// set caret after unlinked node
+					if (links.length === 1 && this.selection.isCollapsed())
+					{
+						this.caret.after($first);
+					}
+
+					return $links;
 				}
 			};
 		},
+
+		// =linkify
 		linkify: function()
 		{
 			return {
 				isKey: function(key)
 				{
-					return key == this.keyCode.ENTER || key == this.keyCode.SPACE;
+					return key === this.keyCode.ENTER || key === this.keyCode.SPACE;
 				},
-				isEnabled: function()
+				isLink: function(node)
 				{
-					return this.opts.convertLinks && (this.opts.convertUrlLinks || this.opts.convertImageLinks || this.opts.convertVideoLinks) && !this.utils.isCurrentOrParent('PRE');
+					return (node.nodeValue.match(this.opts.regexps.linkyoutube) || node.nodeValue.match(this.opts.regexps.linkvimeo) || node.nodeValue.match(this.opts.regexps.linkimage) || node.nodeValue.match(this.opts.regexps.url));
 				},
-				format: function()
+				isFiltered: function(i, node)
 				{
-					var linkify = this.linkify,
-						opts    = this.opts;
-
-					this.$editor
-						.find(":not(iframe,img,a,pre)")
-						.addBack()
-						.contents()
-						.filter(function()
-						{
-							return this.nodeType === 3 && $.trim(this.nodeValue) != "" && !$(this).parent().is("pre") && (this.nodeValue.match(opts.linkify.regexps.youtube) || this.nodeValue.match(opts.linkify.regexps.vimeo) || this.nodeValue.match(opts.linkify.regexps.image) || this.nodeValue.match(opts.linkify.regexps.url));
-						})
-						.each(function()
-						{
-							var text = $(this).text(),
-								html = text;
+					return node.nodeType === 3 && $.trim(node.nodeValue) !== "" && !$(node).parent().is("pre") && (this.linkify.isLink(node));
+				},
+				handler: function(i, node)
+				{
+					var $el = $(node);
+					var text = $el.text();
+					var html = text;
 
-							if (opts.convertVideoLinks && (html.match(opts.linkify.regexps.youtube) || html.match(opts.linkify.regexps.vimeo)) )
-							{
-								html = linkify.convertVideoLinks(html);
-							}
-							else if (opts.convertImageLinks && html.match(opts.linkify.regexps.image))
-							{
-								html = linkify.convertImages(html);
-							}
-							else if (opts.convertUrlLinks)
-							{
-								html = linkify.convertLinks(html);
-							}
+					if (html.match(this.opts.regexps.linkyoutube) || html.match(this.opts.regexps.linkvimeo))
+					{
+						html = this.linkify.convertVideoLinks(html);
+					}
+					else if (html.match(this.opts.regexps.linkimage))
+					{
+						html = this.linkify.convertImages(html);
+					}
+					else
+					{
+						html = this.linkify.convertLinks(html);
+					}
 
-							$(this).before(text.replace(text, html))
-								   .remove();
-						});
+					$el.before(text.replace(text, html)).remove();
+				},
+				format: function()
+				{
+					if (!this.opts.linkify || this.utils.isCurrentOrParent('pre'))
+					{
+						return;
+					}
 
+					this.core.editor().find(":not(iframe,img,a,pre,code,.redactor-unlink)").addBack().contents().filter($.proxy(this.linkify.isFiltered, this)).each($.proxy(this.linkify.handler, this));
 
-					var objects = this.$editor.find('.redactor-linkify-object').each(function()
+					// collect
+					var $el;
+					var $objects = this.core.editor().find('.redactor-linkify-object').each($.proxy(function(i,s)
 					{
-						var $el = $(this);
+						$el = $(s);
 						$el.removeClass('redactor-linkify-object');
-						if ($el.attr('class') === '') $el.removeAttr('class');
+						if ($el.attr('class') === '')
+						{
+							$el.removeAttr('class');
+						}
+
+						if (s.tagName === 'DIV') // video container
+						{
+							this.linkify.breakBlockTag($el, 'video');
+						}
+						else if (s.tagName === 'IMG') // image
+						{
+							this.linkify.breakBlockTag($el, 'image');
+						}
+						else if (s.tagName === 'A')
+						{
+							this.core.callback('insertedLink', $el);
+						}
 
-						return $el[0];
+						return $el;
 
-					});
+					}, this));
 
 					// callback
 					setTimeout($.proxy(function()
 					{
-						this.observe.load();
-						this.core.setCallback('linkify', objects);
+						this.code.sync();
+						this.core.callback('linkify', $objects);
+
 					}, this), 100);
 
-					// sync
-					this.code.sync();
 				},
-				convertVideoLinks: function(html)
+				breakBlockTag: function($el, type)
 				{
-					var iframeStart = '<iframe class="redactor-linkify-object" width="500" height="281" src="',
-						iframeEnd = '" frameborder="0" allowfullscreen></iframe>';
+					var breaked = this.utils.breakBlockTag();
+					if (breaked === false)
+					{
+						return;
+					}
+
+					var $newBlock = $el;
+					if (type === 'image')
+					{
+						$newBlock = $('<figure />').append($el);
+					}
 
-					if (html.match(this.opts.linkify.regexps.youtube))
+					if (breaked.type === 'start')
 					{
-						html = html.replace(this.opts.linkify.regexps.youtube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);
+						breaked.$block.before($newBlock);
 					}
+					else
+					{
+						breaked.$block.after($newBlock);
+					}
+
 
-					if (html.match(this.opts.linkify.regexps.vimeo))
+					if (type === 'image')
 					{
-						html = html.replace(this.opts.linkify.regexps.vimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);
+						this.caret.after($newBlock);
 					}
 
-					return html;
 				},
-				convertImages: function(html)
+				convertVideoLinks: function(html)
 				{
-					var matches = html.match(this.opts.linkify.regexps.image);
+					var iframeStart = '<div class="' + this.opts.videoContainerClass + ' redactor-linkify-object"><iframe class="redactor-linkify-object" width="500" height="281" src="';
+					var iframeEnd = '" frameborder="0" allowfullscreen></iframe></div>';
 
-					if (matches)
+					if (html.match(this.opts.regexps.linkyoutube))
 					{
-						html = html.replace(html, '<img src="' + matches + '" class="redactor-linkify-object" />');
-
-						if (this.opts.linebreaks)
-						{
-							if (!this.utils.isEmpty(this.code.get()))
-							{
-								html = '<br>' + html;
-							}
-						}
+						html = html.replace(this.opts.regexps.linkyoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);
+					}
 
-						html += '<br>';
+					if (html.match(this.opts.regexps.linkvimeo))
+					{
+						html = html.replace(this.opts.regexps.linkvimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);
 					}
 
 					return html;
 				},
-				convertLinks: function(html)
+				convertImages: function(html)
 				{
-					var matches = html.match(this.opts.linkify.regexps.url);
+					var matches = html.match(this.opts.regexps.linkimage);
+					if (!matches)
+					{
+						return html;
+					}
 
-					if (matches)
+					return html.replace(html, '<img src="' + matches + '" class="redactor-linkify-object" />');
+				},
+				convertLinks: function(html)
+				{
+					var matches = html.match(this.opts.regexps.url);
+					if (!matches)
 					{
-						matches = $.grep(matches, function(v, k) { return $.inArray(v, matches) === k; });
+						return html;
+					}
 
-						var length = matches.length;
+					matches = $.grep(matches, function(v, k) { return $.inArray(v, matches) === k; });
 
-						for (var i = 0; i < length; i++)
-						{
-							var href = matches[i],
-								text = href,
-								linkProtocol = this.opts.linkProtocol + '://';
+					var length = matches.length;
 
-							if (href.match(/(https?|ftp):\/\//i) !== null)
-							{
-								linkProtocol = "";
-							}
+					for (var i = 0; i < length; i++)
+					{
+						var href = matches[i], text = href;
+						var linkProtocol = (href.match(/(https?|ftp):\/\//i) !== null) ? '' : 'http://';
 
-							if (text.length > this.opts.linkSize)
-							{
-								text = text.substring(0, this.opts.linkSize) + '...';
-							}
+						if (text.length > this.opts.linkSize)
+						{
+							text = text.substring(0, this.opts.linkSize) + '...';
+						}
 
-							if (text.search('%') === -1)
-							{
-								text = decodeURIComponent(text);
-							}
+						if (text.search('%') === -1)
+						{
+							text = decodeURIComponent(text);
+						}
 
-							var regexB = "\\b";
+						var regexB = "\\b";
 
-							if ($.inArray(href.slice(-1), ["/", "&", "="]) != -1)
-							{
-								regexB = "";
-							}
+						if ($.inArray(href.slice(-1), ["/", "&", "="]) !== -1)
+						{
+							regexB = "";
+						}
 
-							// escaping url
-							var regexp = new RegExp('(' + href.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + regexB + ')', 'g');
+						// escaping url
+						var regexp = new RegExp('(' + href.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + regexB + ')', 'g');
 
-							html = html.replace(regexp, '<a href="' + linkProtocol + $.trim(href) + '" class="redactor-linkify-object">' + $.trim(text) + '</a>');
-						}
+						// target
+						var target = '';
+						if (this.opts.pasteLinkTarget !== false)
+                        {
+    					    target = ' target="' + this.opts.pasteLinkTarget + '"';
+                        }
+
+						html = html.replace(regexp, '<a href="' + linkProtocol + $.trim(href) + '"' + target + ' class="redactor-linkify-object">' + $.trim(text) + '</a>');
 					}
 
 					return html;
 				}
 			};
 		},
+
+		// =list
 		list: function()
 		{
 			return {
 				toggle: function(cmd)
 				{
-					this.placeholder.remove();
-
-					if (!this.utils.browser('msie') && !this.opts.linebreaks)
+					if (this.utils.inBlocks(['table', 'td', 'th', 'tr']))
 					{
-						this.$editor.focus();
+						return;
 					}
 
-					this.buffer.set();
-					this.selection.save();
+					var tag = (cmd === 'orderedlist' || cmd === 'ol') ? 'OL' : 'UL';
+					cmd = (tag === 'OL') ? 'orderedlist' : 'unorderedlist'
 
-					var parent = this.selection.getParent();
-					var $list = $(parent).closest('ol, ul', this.$editor[0]);
+					var $list = $(this.selection.current()).parentsUntil('.redactor-in', 'ul, ol').first();
 
-					if (!this.utils.isRedactorParent($list) && $list.length !== 0)
-					{
-						$list = false;
-					}
+					this.placeholder.hide();
+					this.buffer.set();
 
-					var isUnorderedCmdOrdered, isOrderedCmdUnordered;
-					var remove = false;
-					if ($list && $list.length)
+
+					if ($list.length !== 0 && $list[0].tagName === tag && this.utils.isRedactorParent($list))
 					{
-						remove = true;
-						var listTag = $list[0].tagName;
+						this.selection.save();
 
-						isUnorderedCmdOrdered = (cmd === 'orderedlist' && listTag === 'UL');
-						isOrderedCmdUnordered = (cmd === 'unorderedlist' && listTag === 'OL');
-					}
+						// remove list
+						$list.find('ul, ol').each(function()
+						{
+							var parent = $(this).closest('li');
+							$(this).find('li').each(function()
+							{
+								$(parent).after(this);
+							});
+						});
 
-					if (isUnorderedCmdOrdered)
-					{
-						this.utils.replaceToTag($list, 'ol');
-					}
-					else if (isOrderedCmdUnordered)
-					{
-						this.utils.replaceToTag($list, 'ul');
-					}
-					else
-					{
-						if (remove)
+						$list.find('ul, ol').remove();
+						$list.find('li').each(function()
 						{
-							this.list.remove(cmd, $list);
-						}
-						else
+							return $(this).replaceWith(function()
+							{
+								return $('<p />').append($(this).contents());
+							});
+						});
+
+
+						$list.replaceWith(function()
 						{
-							this.list.insert(cmd);
-						}
+							return $(this).contents();
+						});
+
+						this.selection.restore();
+						return;
 					}
 
-					this.selection.restore();
-					this.code.sync();
 
-				},
-				insert: function(cmd)
-				{
-					var current = this.selection.getCurrent();
-					var $td = $(current).closest('td, th', this.$editor[0]);
+					this.selection.save();
 
-					if (this.utils.browser('msie') && this.opts.linebreaks)
+					if ($list.length !== 0 && $list[0].tagName !== tag)
 					{
-						this.list.insertInIe(cmd);
+                        $list.each($.proxy(function(i,s)
+                        {
+                            this.utils.replaceToTag(s, tag);
+
+                        }, this));
 					}
 					else
 					{
-						document.execCommand('insert' + cmd);
-					}
-
-					var parent = this.selection.getParent();
-					var $list = $(parent).closest('ol, ul', this.$editor[0]);
-					if ($td.length !== 0)
-					{
-						var newTd = $td.clone();
-						$td.after(newTd).remove('');
+					    document.execCommand('insert' + cmd);
 					}
 
+					this.selection.restore();
 
-					if (this.utils.isEmpty($list.find('li').text()))
+					var $insertedList = this.list.get();
+					if (!$insertedList)
 					{
-						var $children = $list.children('li');
-						$children.find('br').remove();
-						$children.append(this.selection.getMarkerAsHtml());
-
-						if (this.opts.linebreaks && this.utils.browser('mozilla') && $children.size() == 2 && this.utils.isEmpty($children.eq(1).text()))
+						if (!this.selection.block())
 						{
-							$children.eq(1).remove();
+							document.execCommand('formatblock', false, 'p');
 						}
+
+						return;
 					}
 
-					if ($list.length)
+					// clear span
+					$insertedList.find('span').replaceWith(function()
 					{
-						// remove block-element list wrapper
-						var $listParent = $list.parent();
-						if (this.utils.isRedactorParent($listParent) && $listParent[0].tagName != 'LI' && this.utils.isBlock($listParent[0]))
-						{
-							$listParent.replaceWith($listParent.contents());
-						}
-					}
+						return $(this).contents();
+					});
+
+					// remove style
+					$insertedList.find(this.opts.inlineTags.join(',')).each(function()
+					{
+						$(this).removeAttr('style');
+					});
 
-					if (!this.utils.browser('msie'))
+					// remove block-element list wrapper
+					var $listParent = $insertedList.parent();
+					if (this.utils.isRedactorParent($listParent) && $listParent[0].tagName !== 'LI' && this.utils.isBlock($listParent))
 					{
-						this.$editor.focus();
+						this.selection.save();
+
+						$listParent.replaceWith($listParent.contents());
+
+						this.selection.restore();
 					}
 
+				},
+				get: function()
+				{
+					var current = this.selection.current();
+					var $list = $(current).closest('ul, ol', this.core.editor()[0]);
+
+					return ($list.length === 0) ? false : $list;
+				},
+				combineAfterAndBefore: function(block)
+				{
+    				var $prev = $(block).prev();
+    				var $next = $(block).next();
+                    var isEmptyBlock = (block && block.tagName === 'P' && (block.innerHTML === '<br>' || block.innerHTML === ''));
+                    var isBlockWrapped = ($prev.closest('ol, ul', this.core.editor()[0]).length === 1 && $next.closest('ol, ul', this.core.editor()[0]).length === 1);
+
+                    if (isEmptyBlock && isBlockWrapped)
+                    {
+                        $prev.children('li').last().append(this.marker.get());
+                        $prev.append($next.contents());
+                        this.selection.restore();
+
+                        return true;
+                    }
+
+                    return false;
+
+				}
+			};
+		},
+
+		// =marker
+		marker: function()
+		{
+			return {
+
+				// public
+				get: function(num)
+				{
+					num = (typeof num === 'undefined') ? 1 : num;
+
+					var marker = document.createElement('span');
 
-					this.clean.clearUnverified();
+					marker.id = 'selection-marker-' + num;
+					marker.className = 'redactor-selection-marker';
+					marker.innerHTML = this.opts.invisibleSpace;
+
+					return marker;
+				},
+				html: function(num)
+				{
+					return this.utils.getOuterHtml(this.marker.get(num));
 				},
-				insertInIe: function(cmd)
+				find: function(num)
 				{
-					var wrapper = this.selection.wrap('div');
-					var wrapperHtml = $(wrapper).html();
+					num = (typeof num === 'undefined') ? 1 : num;
 
-					var tmpList = (cmd == 'orderedlist') ? $('<ol>') : $('<ul>');
-					var tmpLi = $('<li>');
+					return this.core.editor().find('span#selection-marker-' + num);
+				},
+				insert: function()
+				{
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
 
-					if ($.trim(wrapperHtml) === '')
+					this.marker.insertNode(range, this.marker.get(1), true);
+					if (range && range.collapsed === false)
 					{
-						tmpLi.append(this.selection.getMarkerAsHtml());
-						tmpList.append(tmpLi);
-						this.$editor.find('#selection-marker-1').replaceWith(tmpList);
+						this.marker.insertNode(range, this.marker.get(2), false);
 					}
-					else
-					{
-						var items = wrapperHtml.split(/<br\s?\/?>/gi);
-						if (items)
-						{
-							for (var i = 0; i < items.length; i++)
-							{
-								if ($.trim(items[i]) !== '')
-								{
-									tmpList.append($('<li>').html(items[i]));
-								}
-							}
-						}
-						else
-						{
-							tmpLi.append(wrapperHtml);
-							tmpList.append(tmpLi);
-						}
 
-						$(wrapper).replaceWith(tmpList);
-					}
 				},
-				remove: function(cmd, $list)
+				remove: function()
 				{
-					if ($.inArray('ul', this.selection.getBlocks())) cmd = 'unorderedlist';
+					this.core.editor().find('.redactor-selection-marker').each(this.marker.iterateRemove);
+				},
 
-					document.execCommand('insert' + cmd);
+				// private
+				insertNode: function(range, node, collapse)
+				{
+					var parent = this.selection.parent();
+					if (range === null || $(parent).closest('.redactor-in').length === 0)
+					{
+						return;
+					}
 
-					var $current = $(this.selection.getCurrent());
-					this.indent.fixEmptyIndent();
+					range = range.cloneRange();
 
-					if (!this.opts.linebreaks && $current.closest('li, th, td', this.$editor[0]).length === 0)
-					{
-						document.execCommand('formatblock', false, 'p');
-						this.$editor.find('ul, ol, blockquote').each($.proxy(this.utils.removeEmpty, this));
+					try {
+						range.collapse(collapse);
+						range.insertNode(node);
 					}
-
-					var $table = $(this.selection.getCurrent()).closest('table', this.$editor[0]);
-					var $prev = $table.prev();
-					if (!this.opts.linebreaks && $table.length !== 0 && $prev.length !== 0 && $prev[0].tagName == 'BR')
+					catch (e)
 					{
-						$prev.remove();
+						this.focus.start();
 					}
+				},
+				iterateRemove: function(i, el)
+				{
+					var $el = $(el);
+					var text = $el.text().replace(/\u200B/g, '');
+					var parent = $el.parent()[0];
 
-					this.clean.clearUnverified();
-
+                    if (text === '') $el.remove();
+                    else $el.replaceWith(function() { return $(this).contents(); });
 
+                    // if (parent && parent.normalize) parent.normalize();
 				}
 			};
 		},
+
+		// =modal
 		modal: function()
 		{
 			return {
 				callbacks: {},
-				loadTemplates: function()
+				templates: function()
 				{
 					this.opts.modal = {
-						imageEdit: String()
-						+ '<section id="redactor-modal-image-edit">'
-							+ '<label>' + this.lang.get('title') + '</label>'
-							+ '<input type="text" id="redactor-image-title" />'
-							+ '<label class="redactor-image-link-option">' + this.lang.get('link') + '</label>'
-							+ '<input type="text" id="redactor-image-link" class="redactor-image-link-option" aria-label="' + this.lang.get('link') + '" />'
-							+ '<label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank" aria-label="' + this.lang.get('link_new_tab') + '"> ' + this.lang.get('link_new_tab') + '</label>'
-							+ '<label class="redactor-image-position-option">' + this.lang.get('image_position') + '</label>'
-							+ '<select class="redactor-image-position-option" id="redactor-image-align" aria-label="' + this.lang.get('image_position') + '">'
-								+ '<option value="none">' + this.lang.get('none') + '</option>'
-								+ '<option value="left">' + this.lang.get('left') + '</option>'
-								+ '<option value="center">' + this.lang.get('center') + '</option>'
-								+ '<option value="right">' + this.lang.get('right') + '</option>'
-							+ '</select>'
-						+ '</section>',
-
-						image: String()
-						+ '<section id="redactor-modal-image-insert">'
-							+ '<div id="redactor-modal-image-droparea"></div>'
- 						+ '</section>',
-
-						file: String()
-						+ '<section id="redactor-modal-file-insert">'
-							+ '<div id="redactor-modal-file-upload-box">'
-								+ '<label>' + this.lang.get('filename') + '</label>'
+						'image-edit': String()
+						+ '<div class="redactor-modal-tab redactor-group" data-title="General">'
+							+ '<div id="redactor-image-preview" class="redactor-modal-tab-side">'
+							+ '</div>'
+							+ '<div class="redactor-modal-tab-area">'
+								+ '<section>'
+									+ '<label>' + this.lang.get('title') + '</label>'
+									+ '<input type="text" id="redactor-image-title" />'
+								+ '</section>'
+								+ '<section>'
+									+ '<label>' + this.lang.get('caption') + '</label>'
+									+ '<input type="text" id="redactor-image-caption" aria-label="' + this.lang.get('caption') + '" />'
+								+ '</section>'
+								+ '<section>'
+									+ '<label>' + this.lang.get('link') + '</label>'
+									+ '<input type="text" id="redactor-image-link" aria-label="' + this.lang.get('link') + '" />'
+								+ '</section>'
+								+ '<section>'
+        							+ '<label class="redactor-image-position-option">' + this.lang.get('image-position') + '</label>'
+        							+ '<select class="redactor-image-position-option" id="redactor-image-align" aria-label="' + this.lang.get('image-position') + '">'
+        								+ '<option value="none">' + this.lang.get('none') + '</option>'
+        								+ '<option value="left">' + this.lang.get('left') + '</option>'
+        								+ '<option value="center">' + this.lang.get('center') + '</option>'
+        								+ '<option value="right">' + this.lang.get('right') + '</option>'
+        							+ '</select>'
+								+ '</section>'
+								+ '<section>'
+									+ '<label class="checkbox"><input type="checkbox" id="redactor-image-link-blank" aria-label="' + this.lang.get('link-in-new-tab') + '"> ' + this.lang.get('link-in-new-tab') + '</label>'
+								+ '</section>'
+								+ '<section>'
+									+ '<button id="redactor-modal-button-action">' + this.lang.get('insert') + '</button>'
+									+ '<button id="redactor-modal-button-cancel">' + this.lang.get('cancel') + '</button>'
+									+ '<button id="redactor-modal-button-delete" class="redactor-modal-button-offset">' + this.lang.get('delete') + '</button>'
+								+ '</section>'
+							+ '</div>'
+						+ '</div>',
+
+						'image': String()
+						+ '<div class="redactor-modal-tab" data-title="Upload">'
+							+ '<section>'
+								+ '<div id="redactor-modal-image-droparea"></div>'
+	 						+ '</section>'
+ 						+ '</div>',
+
+						'file': String()
+						+ '<div class="redactor-modal-tab" data-title="Upload">'
+							+ '<section>'
+								+ '<label>' + this.lang.get('filename') + ' <span class="desc">(' + this.lang.get('optional') + ')</span></label>'
 								+ '<input type="text" id="redactor-filename" aria-label="' + this.lang.get('filename') + '" /><br><br>'
+							+ '</section>'
+							+ '<section>'
 								+ '<div id="redactor-modal-file-upload"></div>'
-							+ '</div>'
-						+ '</section>',
+							+ '</section>'
+						+ '</div>',
 
-						link: String()
-						+ '<section id="redactor-modal-link-insert">'
-							+ '<label>URL</label>'
-							+ '<input type="url" id="redactor-link-url" aria-label="URL" />'
-							+ '<label>' + this.lang.get('text') + '</label>'
-							+ '<input type="text" id="redactor-link-url-text" aria-label="' + this.lang.get('text') + '" />'
-							+ '<label><input type="checkbox" id="redactor-link-blank"> ' + this.lang.get('link_new_tab') + '</label>'
-						+ '</section>'
+						'link': String()
+						+ '<div class="redactor-modal-tab" data-title="General">'
+							+ '<section>'
+								+ '<label>URL</label>'
+								+ '<input type="url" id="redactor-link-url" aria-label="URL" />'
+							+ '</section>'
+							+ '<section>'
+								+ '<label>' + this.lang.get('text') + '</label>'
+								+ '<input type="text" id="redactor-link-url-text" aria-label="' + this.lang.get('text') + '" />'
+							+ '</section>'
+							+ '<section>'
+								+ '<label class="checkbox"><input type="checkbox" id="redactor-link-blank"> ' + this.lang.get('link-in-new-tab') + '</label>'
+							+ '</section>'
+							+ '<section>'
+								+ '<button id="redactor-modal-button-action">' + this.lang.get('insert') + '</button>'
+								+ '<button id="redactor-modal-button-cancel">' + this.lang.get('cancel') + '</button>'
+							+ '</section>'
+						+ '</div>'
 					};
 
-
 					$.extend(this.opts, this.opts.modal);
 
 				},
@@ -6576,34 +8383,6 @@
 				{
 					this.modal.callbacks[name] = callback;
 				},
-				createTabber: function($modal)
-				{
-					this.modal.$tabber = $('<div>').attr('id', 'redactor-modal-tabber');
-
-					$modal.prepend(this.modal.$tabber);
-				},
-				addTab: function(id, name, active)
-				{
-					var $tab = $('<a href="#" rel="tab' + id + '">').text(name);
-					if (active)
-					{
-						$tab.addClass('active');
-					}
-
-					var self = this;
-					$tab.on('click', function(e)
-					{
-						e.preventDefault();
-						$('.redactor-tab').hide();
-						$('.redactor-' + $(this).attr('rel')).show();
-
-						self.modal.$tabber.find('a').removeClass('active');
-						$(this).addClass('active');
-
-					});
-
-					this.modal.$tabber.append($tab);
-				},
 				addTemplate: function(name, template)
 				{
 					this.opts.modal[name] = template;
@@ -6614,10 +8393,27 @@
 				},
 				getModal: function()
 				{
-					return this.$modalBody.find('section');
+					return this.$modalBody;
+				},
+				getActionButton: function()
+				{
+					return this.$modalBody.find('#redactor-modal-button-action');
+				},
+				getCancelButton: function()
+				{
+					return this.$modalBody.find('#redactor-modal-button-cancel');
+				},
+				getDeleteButton: function()
+				{
+					return this.$modalBody.find('#redactor-modal-button-delete');
 				},
 				load: function(templateName, title, width)
 				{
+					if (typeof this.$modalBox !== 'undefined' && this.$modalBox.hasClass('open'))
+					{
+						return;
+					}
+
 					this.modal.templateName = templateName;
 					this.modal.width = width;
 
@@ -6628,7 +8424,7 @@
 					this.modal.setContent();
 
 					// callbacks
-					if (typeof this.modal.callbacks[templateName] != 'undefined')
+					if (typeof this.modal.callbacks[templateName] !== 'undefined')
 					{
 						this.modal.callbacks[templateName].call(this);
 					}
@@ -6636,96 +8432,137 @@
 				},
 				show: function()
 				{
-					this.utils.disableBodyScroll();
 
-					if (this.utils.isMobile())
-					{
-						this.modal.showOnMobile();
-					}
-					else
+					if (!this.detect.isDesktop())
 					{
-						this.modal.showOnDesktop();
+						document.activeElement.blur();
 					}
 
-					if (this.opts.highContrast)
+					this.selection.save();
+					this.modal.buildTabber();
+
+					if (this.detect.isMobile())
 					{
-						this.$modalBox.addClass("redactor-modal-contrast");
+						this.modal.width = '96%';
 					}
 
-					this.$modalOverlay.show();
-					this.$modalBox.show();
+					// resize
+					setTimeout($.proxy(this.modal.buildWidth, this), 0);
+					$(window).on('resize.redactor-modal', $.proxy(this.modal.buildWidth, this));
 
-					this.$modal.attr('tabindex', '-1');
-					this.$modal.focus();
 
-					this.modal.setButtonsWidth();
+					this.$modalOverlay.redactorAnimation('fadeIn', {
+						duration: 0.25
+					});
 
-					this.utils.saveScroll();
+					this.$modalBox.addClass('open').show();
+					this.$modal.redactorAnimation('fadeIn', {
+							timing: 'cubic-bezier(0.175, 0.885, 0.320, 1.105)'
+						},
+						$.proxy(function()
+						{
 
-					// resize
-					if (!this.utils.isMobile())
-					{
-						setTimeout($.proxy(this.modal.showOnDesktop, this), 0);
-						$(window).on('resize.redactor-modal', $.proxy(this.modal.resize, this));
-					}
+							this.utils.saveScroll();
+							this.utils.disableBodyScroll();
+
+							// modal shown callback
+							this.core.callback('modalOpened', this.modal.templateName, this.$modal);
 
-					// modal shown callback
-					this.core.setCallback('modalOpened', this.modal.templateName, this.$modal);
+							// fix bootstrap modal focus
+							$(document).off('focusin.modal');
 
-					// fix bootstrap modal focus
-					$(document).off('focusin.modal');
+							// enter
+							var $elements = this.$modal.find('input[type=text],input[type=url],input[type=email]');
+							$elements.on('keydown.redactor-modal', $.proxy(this.modal.setEnter, this));
+
+						}, this)
+					);
 
-					// enter
-					this.$modal.find('input[type=text],input[type=url],input[type=email]').on('keydown.redactor-modal', $.proxy(this.modal.setEnter, this));
 				},
-				showOnDesktop: function()
+				buildWidth: function()
 				{
-					var height = this.$modal.outerHeight();
 					var windowHeight = $(window).height();
 					var windowWidth = $(window).width();
 
-					if (this.modal.width > windowWidth)
+					var number = (typeof this.modal.width === 'number');
+
+					if (!number && this.modal.width.match(/%$/))
 					{
-						this.$modal.css({
-							width: '96%',
-							marginTop: (windowHeight/2 - height/2) + 'px'
-						});
-						return;
+						this.$modal.css({ 'width': this.modal.width, 'margin-bottom': '16px' });
 					}
-
-					if (height > windowHeight)
+					else if (parseInt(this.modal.width) > windowWidth)
 					{
-						this.$modal.css({
-							width: this.modal.width + 'px',
-							marginTop: '20px'
-						});
+						this.$modal.css({ 'width': '96%', 'margin-bottom': '2%' });
 					}
 					else
 					{
-						this.$modal.css({
-							width: this.modal.width + 'px',
-							marginTop: (windowHeight/2 - height/2) + 'px'
-						});
+						if (number)
+						{
+							this.modal.width += 'px';
+						}
+
+						this.$modal.css({ 'width': this.modal.width, 'margin-bottom': '16px' });
 					}
-				},
-				showOnMobile: function()
-				{
-					this.$modal.css({
-						width: '96%',
-						marginTop: '2%'
-					});
 
+					// margin top
+					var height = this.$modal.outerHeight();
+					var top = (windowHeight/2 - height/2) + 'px';
+
+					if (this.detect.isMobile())
+					{
+						top = '2%';
+					}
+					else if (height > windowHeight)
+					{
+						top = '16px';
+
+					}
+
+					this.$modal.css('margin-top', top);
 				},
-				resize: function()
+				buildTabber: function()
 				{
-					if (this.utils.isMobile())
+					this.modal.tabs = this.$modal.find('.redactor-modal-tab');
+
+					if (this.modal.tabs.length < 2)
 					{
-						this.modal.showOnMobile();
+						return;
 					}
-					else
+
+					this.modal.$tabsBox = $('<div id="redactor-modal-tabber" />');
+					$.each(this.modal.tabs, $.proxy(function(i,s)
 					{
-						this.modal.showOnDesktop();
-					}
+						var a = $('<a href="#" rel="' + i + '" />').text($(s).attr('data-title'));
+
+						a.on('click', $.proxy(this.modal.showTab, this));
+
+						if (i === 0)
+						{
+							a.addClass('active');
+						}
+
+						this.modal.$tabsBox.append(a);
+
+					}, this));
+
+					this.$modalBody.prepend(this.modal.$tabsBox);
+
+				},
+				showTab: function(e)
+				{
+					e.preventDefault();
+
+					var $el = $(e.target);
+					var index = $el.attr('rel');
+
+					this.modal.tabs.hide();
+					this.modal.tabs.eq(index).show();
+
+					$('#redactor-modal-tabber').find('a').removeClass('active');
+					$el.addClass('active');
+
+					return false;
+
 				},
 				setTitle: function(title)
 				{
@@ -6734,68 +8571,45 @@
 				setContent: function()
 				{
 					this.$modalBody.html(this.modal.getTemplate(this.modal.templateName));
+
+					this.modal.getCancelButton().on('mousedown', $.proxy(this.modal.close, this));
 				},
 				setDraggable: function()
 				{
-					if (typeof $.fn.draggable === 'undefined') return;
+					if (typeof $.fn.draggable === 'undefined')
+					{
+						return;
+					}
 
 					this.$modal.draggable({ handle: this.$modalHeader });
 					this.$modalHeader.css('cursor', 'move');
 				},
 				setEnter: function(e)
 				{
-					if (e.which != 13) return;
+					if (e.which !== 13)
+					{
+						return;
+					}
 
 					e.preventDefault();
-					this.$modal.find('button.redactor-modal-action-btn').click();
-				},
-				createCancelButton: function()
-				{
-					var button = $('<button>').addClass('redactor-modal-btn redactor-modal-close-btn').html(this.lang.get('cancel'));
-					button.on('click', $.proxy(this.modal.close, this));
-
-					this.$modalFooter.append(button);
-				},
-				createDeleteButton: function(label)
-				{
-					return this.modal.createButton(label, 'delete');
-				},
-				createActionButton: function(label)
-				{
-					return this.modal.createButton(label, 'action');
-				},
-				createButton: function(label, className)
-				{
-					var button = $('<button>').addClass('redactor-modal-btn').addClass('redactor-modal-' + className + '-btn').html(label);
-					this.$modalFooter.append(button);
-
-					return button;
-				},
-				setButtonsWidth: function()
-				{
-					var buttons = this.$modalFooter.find('button');
-					var buttonsSize = buttons.length;
-					if (buttonsSize === 0) return;
-
-					buttons.css('width', (100/buttonsSize) + '%');
+					this.modal.getActionButton().click();
 				},
 				build: function()
 				{
 					this.modal.buildOverlay();
 
 					this.$modalBox = $('<div id="redactor-modal-box"/>').hide();
-					this.$modal = $('<div id="redactor-modal" role="dialog" aria-labelledby="redactor-modal-header" />');
-					this.$modalHeader = $('<header id="redactor-modal-header"/>');
-					this.$modalClose = $('<button type="button" id="redactor-modal-close" tabindex="1" aria-label="Close" />').html('&times;');
+					this.$modal = $('<div id="redactor-modal" role="dialog" />');
+					this.$modalHeader = $('<div id="redactor-modal-header" />');
+					this.$modalClose = $('<button type="button" id="redactor-modal-close" aria-label="' + this.lang.get('close') + '" />').html('&times;');
 					this.$modalBody = $('<div id="redactor-modal-body" />');
-					this.$modalFooter = $('<footer />');
 
 					this.$modal.append(this.$modalHeader);
-					this.$modal.append(this.$modalClose);
 					this.$modal.append(this.$modalBody);
-					this.$modal.append(this.$modalFooter);
+					this.$modal.append(this.$modalClose);
 					this.$modalBox.append(this.$modal);
 					this.$modalBox.appendTo(document.body);
+
 				},
 				buildOverlay: function()
 				{
@@ -6804,22 +8618,25 @@
 				},
 				enableEvents: function()
 				{
-					this.$modalClose.on('click.redactor-modal', $.proxy(this.modal.close, this));
+					this.$modalClose.on('mousedown.redactor-modal', $.proxy(this.modal.close, this));
 					$(document).on('keyup.redactor-modal', $.proxy(this.modal.closeHandler, this));
-					this.$editor.on('keyup.redactor-modal', $.proxy(this.modal.closeHandler, this));
+					this.core.editor().on('keyup.redactor-modal', $.proxy(this.modal.closeHandler, this));
 					this.$modalBox.on('click.redactor-modal', $.proxy(this.modal.close, this));
 				},
 				disableEvents: function()
 				{
-					this.$modalClose.off('click.redactor-modal');
+					this.$modalClose.off('mousedown.redactor-modal');
 					$(document).off('keyup.redactor-modal');
-					this.$editor.off('keyup.redactor-modal');
-					this.$modalBox.off('click.redactor-modal');
+					this.core.editor().off('keyup.redactor-modal');
+					this.$modalBox.off('click§.redactor-modal');
 					$(window).off('resize.redactor-modal');
 				},
 				closeHandler: function(e)
 				{
-					if (e.which != this.keyCode.ESC) return;
+					if (e.which !== this.keyCode.ESC)
+					{
+						return;
+					}
 
 					this.modal.close(false);
 				},
@@ -6827,7 +8644,7 @@
 				{
 					if (e)
 					{
-						if (!$(e.target).hasClass('redactor-modal-close-btn') && e.target != this.$modalClose[0] && e.target != this.$modalBox[0])
+						if ($(e.target).attr('id') !== 'redactor-modal-button-cancel' && e.target !== this.$modalClose[0] && e.target !== this.$modalBox[0])
 						{
 							return;
 						}
@@ -6835,226 +8652,238 @@
 						e.preventDefault();
 					}
 
-					if (!this.$modalBox) return;
+					if (!this.$modalBox)
+					{
+						return;
+					}
+
+					// restore selection
+					this.selection.restore();
 
 					this.modal.disableEvents();
 					this.utils.enableBodyScroll();
+					this.utils.restoreScroll();
 
-					this.$modalOverlay.remove();
-
-					this.$modalBox.fadeOut('fast', $.proxy(function()
+					this.$modalOverlay.redactorAnimation('fadeOut', { duration: 0.4 }, $.proxy(function()
 					{
-						this.$modalBox.remove();
+						this.$modalOverlay.remove();
 
-						setTimeout($.proxy(this.utils.restoreScroll, this), 0);
+					}, this));
+
+					this.$modal.redactorAnimation('fadeOut', {
 
-						if (e !== undefined) this.selection.restore();
+						duration: 0.3,
+						timing: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'
+
+					}, $.proxy(function()
+					{
+						if (typeof this.$modalBox !== 'undefined')
+						{
+							this.$modalBox.remove();
+							this.$modalBox = undefined;
+						}
 
-						$(document.body).css('overflow', this.modal.bodyOveflow);
-						this.core.setCallback('modalClosed', this.modal.templateName);
+						this.core.callback('modalClosed', this.modal.templateName);
 
 					}, this));
 
 				}
 			};
 		},
+
+		// =observe
 		observe: function()
 		{
 			return {
 				load: function()
 				{
-					if (typeof this.opts.destroyed != "undefined") return;
-
-					if (this.utils.browser('msie'))
+					if (typeof this.opts.destroyed !== 'undefined')
 					{
-						var self = this;
-						this.$editor.find('pre, code').on('mouseover',function()
-						{
-							self.$editor.attr('contenteditable', false);
-							$(this).attr('contenteditable', true);
-
-						}).on('mouseout',function()
-						{
-							self.$editor.attr('contenteditable', true);
-							$(this).removeAttr('contenteditable');
-
-						});
+						return;
 					}
 
-					this.observe.images();
 					this.observe.links();
-				},
-				toolbar: function(e, btnName)
-				{
-					this.observe.buttons(e, btnName);
-					this.observe.dropdowns();
+					this.observe.images();
+
 				},
 				isCurrent: function($el, $current)
 				{
-					if (typeof $current == 'undefined')
+					if (typeof $current === 'undefined')
 					{
-						var $current = $(this.selection.getCurrent());
+						$current = $(this.selection.current());
 					}
 
 					return $current.is($el) || $current.parents($el).length > 0;
 				},
-				dropdowns: function()
+				toolbar: function()
 				{
-					var $current = $(this.selection.getCurrent());
-
-					$.each(this.opts.observe.dropdowns, $.proxy(function(key, value)
-					{
-						var observe = value.observe,
-							element = observe.element,
-							$item   = value.item,
-							inValues = typeof observe['in'] != 'undefined' ? observe['in'] : false,
-							outValues = typeof observe['out'] != 'undefined' ? observe['out'] : false;
-
-						if ($current.closest(element).size() > 0)
-						{
-							this.observe.setDropdownProperties($item, inValues, outValues);
-						}
-						else
-						{
-							this.observe.setDropdownProperties($item, outValues, inValues);
-						}
-					}, this));
+    				this.observe.buttons();
+	    			this.observe.dropdowns();
 				},
-				setDropdownProperties: function($item, addProperties, deleteProperties)
+				buttons: function(e, btnName)
 				{
-					if (deleteProperties && typeof deleteProperties['attr'] != 'undefined')
+					var current = this.selection.current();
+					var parent = this.selection.parent();
+
+					if (e !== false) this.button.setInactiveAll();
+					else             this.button.setInactiveAll(btnName);
+
+
+					if (e === false && btnName !== 'html')
 					{
-						this.observe.setDropdownAttr($item, deleteProperties.attr, true);
+						if ($.inArray(btnName, this.opts.activeButtons) !== -1) this.button.toggleActive(btnName);
+						return;
 					}
 
-					if (typeof addProperties['attr'] != 'undefined')
+					if (!this.utils.isRedactorParent(current))
 					{
-						this.observe.setDropdownAttr($item, addProperties.attr);
+						return;
 					}
 
-					if (typeof addProperties['title'] != 'undefined')
+					// disable line
+					if (this.core.editor().css('display') !== 'none')
 					{
-						$item.text(addProperties['title']);
+	    				if (this.utils.isCurrentOrParentHeader() || this.utils.isCurrentOrParent(['table', 'pre', 'blockquote', 'li'])) this.button.disable('horizontalrule');
+    					else this.button.enable('horizontalrule');
 					}
-				},
-				setDropdownAttr: function($item, properties, isDelete)
-				{
-					$.each(properties, function(key, value)
+
+					$.each(this.opts.activeButtonsStates, $.proxy(function(key, value)
 					{
-						if (key == 'class')
+						var parentEl = $(parent).closest(key, this.$editor[0]);
+						var currentEl = $(current).closest(key, this.$editor[0]);
+
+						if (parentEl.length !== 0 && !this.utils.isRedactorParent(parentEl))
 						{
-							if (!isDelete)
-							{
-								$item.addClass(value);
-							}
-							else
-							{
-								$item.removeClass(value);
-							}
+							return;
 						}
-						else
+
+						if (!this.utils.isRedactorParent(currentEl))
 						{
-							if (!isDelete)
-							{
-								$item.attr(key, value);
-							}
-							else
-							{
-								$item.removeAttr(key);
-							}
+							return;
 						}
-					});
-				},
-				addDropdown: function($item, btnName, btnObject)
-				{
-					if (typeof btnObject.observe == "undefined") return;
 
-					btnObject.item = $item;
+						if (parentEl.length !== 0 || currentEl.closest(key, this.$editor[0]).length !== 0)
+						{
+							this.button.setActive(value);
+						}
+
+					}, this));
 
-					this.opts.observe.dropdowns.push(btnObject);
 				},
-				buttons: function(e, btnName)
+				dropdowns: function()
 				{
-					var current = this.selection.getCurrent();
-					var parent = this.selection.getParent();
-
-					if (e !== false)
-					{
-						this.button.setInactiveAll();
-					}
-					else
-					{
-						this.button.setInactiveAll(btnName);
-					}
-
-					if (e === false && btnName !== 'html')
-					{
-						if ($.inArray(btnName, this.opts.activeButtons) != -1) this.button.toggleActive(btnName);
-						return;
-					}
-
-					//var linkButtonName = (this.utils.isCurrentOrParent('A')) ? this.lang.get('link_edit') : this.lang.get('link_insert');
-					//$('body').find('a.redactor-dropdown-link').text(linkButtonName);
+    				var finded = $('<div />').html(this.selection.html()).find('a').length;
+					var $current = $(this.selection.current());
+					var isRedactor = this.utils.isRedactorParent($current);
 
-					$.each(this.opts.activeButtonsStates, $.proxy(function(key, value)
+					$.each(this.opts.observe.dropdowns, $.proxy(function(key, value)
 					{
-						var parentEl = $(parent).closest(key, this.$editor[0]);
-						var currentEl = $(current).closest(key, this.$editor[0]);
+						var observe = value.observe,
+							element = observe.element,
+							$item   = value.item,
+							inValues = typeof observe['in'] !== 'undefined' ? observe['in'] : false,
+							outValues = typeof observe.out !== 'undefined' ? observe.out : false;
 
-						if (parentEl.length !== 0 && !this.utils.isRedactorParent(parentEl)) return;
-						if (!this.utils.isRedactorParent(currentEl)) return;
-						if (parentEl.length !== 0 || currentEl.closest(key, this.$editor[0]).length !== 0)
+						if (($current.closest(element).length > 0 && isRedactor) || (element === 'a' && finded !== 0))
 						{
-							this.button.setActive(value);
+							this.observe.setDropdownProperties($item, inValues, outValues);
+						}
+						else
+						{
+							this.observe.setDropdownProperties($item, outValues, inValues);
 						}
 
 					}, this));
+				},
+				setDropdownProperties: function($item, addProperties, deleteProperties)
+				{
+					if (deleteProperties && typeof deleteProperties.attr !== 'undefined')
+					{
+						this.observe.setDropdownAttr($item, deleteProperties.attr, true);
+					}
+
+					if (typeof addProperties.attr !== 'undefined')
+					{
+						this.observe.setDropdownAttr($item, addProperties.attr);
+					}
 
-					var $parent = $(parent).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
-					if (this.utils.isRedactorParent(parent) && $parent.length)
+					if (typeof addProperties.title !== 'undefined')
 					{
-						var align = ($parent.css('text-align') === '') ? 'left' : $parent.css('text-align');
-						this.button.setActive('align' + align);
+						$item.find('span').text(addProperties.title);
 					}
 				},
-				addButton: function(tag, btnName)
+				setDropdownAttr: function($item, properties, isDelete)
 				{
-					this.opts.activeButtons.push(btnName);
-					this.opts.activeButtonsStates[tag] = btnName;
+					$.each(properties, function(key, value)
+					{
+						if (key === 'class')
+						{
+							if (!isDelete)
+							{
+								$item.addClass(value);
+							}
+							else
+							{
+								$item.removeClass(value);
+							}
+						}
+						else
+						{
+							if (!isDelete)
+							{
+								$item.attr(key, value);
+							}
+							else
+							{
+								$item.removeAttr(key);
+							}
+						}
+					});
 				},
-				images: function()
+				addDropdown: function($item, btnName, btnObject)
 				{
-					this.$editor.find('img').each($.proxy(function(i, img)
+					if (typeof btnObject.observe === "undefined")
 					{
-						var $img = $(img);
-
-						// IE fix (when we clicked on an image and then press backspace IE does goes to image's url)
-						$img.closest('a', this.$editor[0]).on('click', function(e) { e.preventDefault(); });
+						return;
+					}
 
-						if (this.utils.browser('msie')) $img.attr('unselectable', 'on');
+					btnObject.item = $item;
 
-						this.image.setEditable($img);
+					this.opts.observe.dropdowns.push(btnObject);
+				},
+				images: function()
+				{
+                    if (this.opts.imageEditable)
+                    {
+                        this.core.editor().addClass('redactor-layer-img-edit');
+    					this.core.editor().find('img').each($.proxy(function(i, img)
+    					{
+    						var $img = $(img);
 
-					}, this));
+    						// IE fix (when we clicked on an image and then press backspace IE does goes to image's url)
+    						$img.closest('a', this.$editor[0]).on('click', function(e) { e.preventDefault(); });
 
-					$(document).on('click.redactor-image-delete.' + this.uuid, $.proxy(function(e)
-					{
-						this.observe.image = false;
-						if (e.target.tagName == 'IMG' && this.utils.isRedactorParent(e.target))
-						{
-							this.observe.image = (this.observe.image && this.observe.image == e.target) ? false : e.target;
-						}
+    						this.image.setEditable($img);
 
-					}, this));
 
+    					}, this));
+                    }
 				},
 				links: function()
 				{
-					if (!this.opts.linkTooltip) return;
+					if (this.opts.linkTooltip)
+					{
+    					this.core.editor().find('a').each($.proxy(function(i, s)
+    					{
+        					var $link = $(s);
+        					if ($link.data('cached') !== true)
+        					{
+            					$link.data('cached', true);
+            					$link.on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.showTooltip, this));
+        					}
 
-					this.$editor.find('a').on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.showTooltip, this));
-					this.$editor.on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
-					$(document).on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
+    					}, this));
+					}
 				},
 				getTooltipPosition: function($link)
 				{
@@ -7064,14 +8893,20 @@
 				{
 					var $el = $(e.target);
 
-					if ($el[0].tagName == 'IMG')
+					if ($el[0].tagName === 'IMG')
+					{
 						return;
+					}
 
 					if ($el[0].tagName !== 'A')
+					{
 						$el = $el.closest('a', this.$editor[0]);
+					}
 
 					if ($el[0].tagName !== 'A')
+					{
 						return;
+					}
 
 					var $link = $el;
 
@@ -7084,20 +8919,35 @@
 						href = '';
 					}
 
-					if (href.length > 24) href = href.substring(0, 24) + '...';
+					if (href.length > 24)
+					{
+						href = href.substring(0, 24) + '...';
+					}
 
 					var aLink = $('<a href="' + $link.attr('href') + '" target="_blank" />').html(href).addClass('redactor-link-tooltip-action');
 					var aEdit = $('<a href="#" />').html(this.lang.get('edit')).on('click', $.proxy(this.link.show, this)).addClass('redactor-link-tooltip-action');
 					var aUnlink = $('<a href="#" />').html(this.lang.get('unlink')).on('click', $.proxy(this.link.unlink, this)).addClass('redactor-link-tooltip-action');
 
 					tooltip.append(aLink).append(' | ').append(aEdit).append(' | ').append(aUnlink);
+
+					var lineHeight = parseInt($link.css('line-height'), 10);
+                    var lineClicked = Math.ceil((e.pageY - pos.top)/lineHeight);
+                    var top = pos.top + lineClicked * lineHeight;
+
 					tooltip.css({
-						top: (pos.top + parseInt($link.css('line-height'), 10)) + 'px',
+						top: top + 'px',
 						left: pos.left + 'px'
 					});
 
 					$('.redactor-link-tooltip').remove();
 					$('body').append(tooltip);
+
+					this.core.editor().on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
+					$(document).on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
+				},
+				closeAllTooltip: function()
+				{
+					$('.redactor-link-tooltip').remove();
 				},
 				closeTooltip: function(e)
 				{
@@ -7114,33 +8964,131 @@
 						return;
 					}
 
-					$('.redactor-link-tooltip').remove();
+					this.observe.closeAllTooltip();
+
+					this.core.editor().off('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
+					$(document).off('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
 				}
 
 			};
 		},
+
+		// =offset
+		offset: function()
+		{
+			return {
+				get: function(node)
+				{
+					var cloned = this.offset.clone(node);
+					if (cloned === false)
+					{
+						return 0;
+					}
+
+					var div = document.createElement('div');
+					div.appendChild(cloned.cloneContents());
+					div.innerHTML = div.innerHTML.replace(/<img(.*?[^>])>$/gi, 'i');
+
+			        var text = $.trim($(div).text()).replace(/[\t\n\r\n]/g, '').replace(/\u200B/g, '');
+
+					return text.length;
+
+				},
+				clone: function(node)
+				{
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+
+					if (range === null && typeof node === 'undefined')
+					{
+						return false;
+					}
+
+					node = (typeof node === 'undefined') ? this.$editor : node;
+					if (node === false)
+					{
+						return false;
+					}
+
+					node = node[0] || node;
+
+					var cloned = range.cloneRange();
+					cloned.selectNodeContents(node);
+					cloned.setEnd(range.endContainer, range.endOffset);
+
+					return cloned;
+				},
+				set: function(start, end)
+				{
+					end = (typeof end === 'undefined') ? start : end;
+
+					if (!this.focus.is())
+					{
+						this.focus.start();
+					}
+
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+					var node, offset = 0;
+					var walker = document.createTreeWalker(this.$editor[0], NodeFilter.SHOW_TEXT, null, null);
+
+					while ((node = walker.nextNode()) !== null)
+					{
+						offset += node.nodeValue.length;
+						if (offset > start)
+						{
+							range.setStart(node, node.nodeValue.length + start - offset);
+							start = Infinity;
+						}
+
+						if (offset >= end)
+						{
+							range.setEnd(node, node.nodeValue.length + end - offset);
+							break;
+						}
+					}
+
+					range.collapse(false);
+					this.selection.update(sel, range);
+				}
+			};
+		},
+
+		// =paragraphize
 		paragraphize: function()
 		{
 			return {
 				load: function(html)
 				{
-					if (this.opts.linebreaks) return html;
-					if (html === '' || html === '<p></p>') return this.opts.emptyHtml;
+					if (this.opts.paragraphize === false || this.opts.type === 'inline' || this.opts.type === 'pre')
+					{
+						return html;
+					}
+
+					if (html === '' || html === '<p></p>')
+					{
+						return this.opts.emptyHtml;
+					}
 
 					html = html + "\n";
 
 					this.paragraphize.safes = [];
 					this.paragraphize.z = 0;
 
+					// before
 					html = html.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi, '</blockquote>');
+					html = html.replace(/<\/pre>/gi, "</pre>\n\n");
+					html = html.replace(/<p>\s<br><\/p>/gi, '<p></p>');
 
 					html = this.paragraphize.getSafes(html);
-					html = this.paragraphize.getSafesComments(html);
-					html = this.paragraphize.replaceBreaksToNewLines(html);
-					html = this.paragraphize.replaceBreaksToParagraphs(html);
+
+					html = html.replace('<br>', "\n");
+					html = this.paragraphize.convert(html);
+
 					html = this.paragraphize.clear(html);
 					html = this.paragraphize.restoreSafes(html);
 
+					// after
 					html = html.replace(new RegExp('<br\\s?/?>\n?<(' + this.opts.paragraphizeBlocks.join('|') + ')(.*?[^>])>', 'gi'), '<p><br /></p>\n<$1$2>');
 
 					return $.trim(html);
@@ -7155,85 +9103,75 @@
 						return $(this).append('<br />').contents();
 					});
 
-					html = $div.html();
-
-					$div.find(this.opts.paragraphizeBlocks.join(', ')).each($.proxy(function(i,s)
+                    $div.find(this.opts.paragraphizeBlocks.join(', ')).each($.proxy(function(i,s)
 					{
 						this.paragraphize.z++;
 						this.paragraphize.safes[this.paragraphize.z] = s.outerHTML;
-						html = html.replace(s.outerHTML, '\n{replace' + this.paragraphize.z + '}');
-
-					}, this));
 
-					return html;
-				},
-				getSafesComments: function(html)
-				{
-					var commentsMatches = html.match(/<!--([\w\W]*?)-->/gi);
+						return $(s).replaceWith("\n#####replace" + this.paragraphize.z + "#####\n\n");
 
-					if (!commentsMatches) return html;
 
-					$.each(commentsMatches, $.proxy(function(i,s)
-					{
-						this.paragraphize.z++;
-						this.paragraphize.safes[this.paragraphize.z] = s;
-						html = html.replace(s, '\n{replace' + this.paragraphize.z + '}');
 					}, this));
 
-					return html;
+                    // deal with redactor selection markers
+                    $div.find('span.redactor-selection-marker').each($.proxy(function(i,s)
+                    {
+                        this.paragraphize.z++;
+                        this.paragraphize.safes[this.paragraphize.z] = s.outerHTML;
+
+                        return $(s).replaceWith("\n#####replace" + this.paragraphize.z + "#####\n\n");
+                    }, this));
+
+					return $div.html();
 				},
 				restoreSafes: function(html)
 				{
 					$.each(this.paragraphize.safes, function(i,s)
 					{
 						s = (typeof s !== 'undefined') ? s.replace(/\$/g, '&#36;') : s;
-						html = html.replace('{replace' + i + '}', s);
+						html = html.replace('#####replace' + i + '#####', s);
 
 					});
 
 					return html;
 				},
-				replaceBreaksToParagraphs: function(html)
+				convert: function(html)
 				{
-					var htmls = html.split(new RegExp('\n', 'g'), -1);
+					html = html.replace(/\r\n/g, "xparagraphmarkerz");
+					html = html.replace(/\n/g, "xparagraphmarkerz");
+					html = html.replace(/\r/g, "xparagraphmarkerz");
 
-					html = '';
-					if (htmls)
-					{
-						var len = htmls.length;
-						for (var i = 0; i < len; i++)
-						{
-							if (!htmls.hasOwnProperty(i)) return;
+					var re1 = /\s+/g;
+					html = html.replace(re1, " ");
+					html = $.trim(html);
 
-							if (htmls[i].search('{replace') == -1)
-							{
-								htmls[i] = htmls[i].replace(/<p>\n\t?<\/p>/gi, '');
-								htmls[i] = htmls[i].replace(/<p><\/p>/gi, '');
+					var re2 = /xparagraphmarkerzxparagraphmarkerz/gi;
+					html = html.replace(re2, "</p><p>");
 
-								if (htmls[i] !== '')
-								{
-									html += '<p>' +  htmls[i].replace(/^\n+|\n+$/g, "") + "</p>";
-								}
-							}
-							else html += htmls[i];
-						}
-					}
+					var re3 = /xparagraphmarkerz/gi;
+					html = html.replace(re3, "<br>");
 
-					return html;
-				},
-				replaceBreaksToNewLines: function(html)
-				{
-					html = html.replace(/<br \/>\s*<br \/>/gi, "\n\n");
-					html = html.replace(/<br\s?\/?>\n?<br\s?\/?>/gi, "\n<br /><br />");
+					html = '<p>' + html + '</p>';
 
-					html = html.replace(new RegExp("\r\n", 'g'), "\n");
-					html = html.replace(new RegExp("\r", 'g'), "\n");
-					html = html.replace(new RegExp("/\n\n+/"), 'g', "\n\n");
+					html = html.replace("<p></p>", "");
+					html = html.replace("\r\n\r\n", "");
+					html = html.replace(/<\/p><p>/g, "</p>\r\n\r\n<p>");
+					html = html.replace(new RegExp("<br\\s?/?></p>", "g"), "</p>");
+					html = html.replace(new RegExp("<p><br\\s?/?>", "g"), "<p>");
+					html = html.replace(new RegExp("<p><br\\s?/?>", "g"), "<p>");
+					html = html.replace(new RegExp("<br\\s?/?></p>", "g"), "</p>");
+					html = html.replace(/<p>&nbsp;<\/p>/gi, "");
+					html = html.replace(/<p>\s?<br>&nbsp;<\/p>/gi, '');
+					html = html.replace(/<p>\s?<br>/gi, '<p>');
 
 					return html;
 				},
 				clear: function(html)
 				{
+
+					html = html.replace(/<p>(.*?)#####replace(.*?)#####\s?<\/p>/gi, '<p>$1</p>#####replace$2#####');
+					html = html.replace(/(<br\s?\/?>){2,}<\/p>/gi, '</p>');
+
 					html = html.replace(new RegExp('</blockquote></p>', 'gi'), '</blockquote>');
 					html = html.replace(new RegExp('<p></blockquote>', 'gi'), '</blockquote>');
 					html = html.replace(new RegExp('<p><blockquote>', 'gi'), '<blockquote>');
@@ -7251,24 +9189,34 @@
 				}
 			};
 		},
+
+		// =paste
 		paste: function()
 		{
 			return {
 				init: function(e)
 				{
-					if (!this.opts.cleanOnPaste)
+					this.rtePaste = true;
+					var pre = (this.opts.type === 'pre' || this.utils.isCurrentOrParent('pre')) ? true : false;
+
+					// clipboard event
+					if (this.detect.isDesktop())
 					{
-						setTimeout($.proxy(this.code.sync, this), 1);
-						return;
-					}
 
-					this.rtePaste = true;
+    					if (!this.paste.pre && this.opts.clipboardImageUpload && this.opts.imageUpload && this.paste.detectClipboardUpload(e))
+    					{
+    						if (this.detect.isIe())
+    						{
+    							setTimeout($.proxy(this.paste.clipboardUpload, this), 100);
+    						}
 
-					this.buffer.set();
-					this.selection.save();
-					this.utils.saveScroll();
+    						return;
+    					}
+					}
 
-					this.paste.createPasteBox();
+					this.utils.saveScroll();
+					this.selection.save();
+					this.paste.createPasteBox(pre);
 
 					$(window).on('scroll.redactor-freeze', $.proxy(function()
 					{
@@ -7278,1489 +9226,1184 @@
 
 					setTimeout($.proxy(function()
 					{
-						var html = this.$pasteBox.html();
-
-						this.$pasteBox.remove();
+						var html = this.paste.getPasteBoxCode(pre);
 
+						// buffer
+						this.buffer.set();
 						this.selection.restore();
-						this.utils.restoreScroll();
-
-						this.paste.insert(html);
-
-						$(window).off('scroll.redactor-freeze');
-
-						if (this.linkify.isEnabled())
-						{
-							this.linkify.format();
-						}
-
-					}, this), 1);
-				},
-				createPasteBox: function()
-				{
-					this.$pasteBox = $('<div>').html('').attr('contenteditable', 'true').css({ position: 'fixed', width: 0, top: 0, left: '-9999px' });
-
-					if (this.utils.browser('msie'))
-					{
-						this.$box.append(this.$pasteBox);
-					}
-					else
-					{
-						// bootstrap modal
-						var $visibleModals = $('.modal-body:visible');
-						if ($visibleModals.length > 0)
-						{
-							$visibleModals.append(this.$pasteBox);
-						}
-						else
-						{
-							$('body').append(this.$pasteBox);
-						}
-					}
-
-					this.$pasteBox.get(0).focus();
-				},
-				insert: function(html)
-				{
-					html = this.core.setCallback('pasteBefore', html);
-
-					// clean
-					html = (this.utils.isSelectAll()) ? this.clean.onPaste(html, false) : this.clean.onPaste(html);
-
-					html = this.core.setCallback('paste', html);
-
-					if (this.utils.isSelectAll())
-					{
-						this.insert.set(html, false);
-					}
-					else
-					{
-						this.insert.html(html, false);
-					}
-
-					this.utils.disableSelectAll();
-					this.rtePaste = false;
-
-					setTimeout($.proxy(this.clean.clearUnverified, this), 10);
-
-					// clean empty spans
-					setTimeout($.proxy(function()
-					{
-						var spans = this.$editor.find('span');
-						$.each(spans, function(i,s)
-						{
-							var html = s.innerHTML.replace(/\u200B/, '');
-							if (html === '' && s.attributes.length === 0) $(s).remove();
-
-						});
-
-					}, this), 10);
-
-				}
-			};
-		},
-		placeholder: function()
-		{
-			return {
-				enable: function()
-				{
-					if (!this.placeholder.is()) return;
 
-					this.$editor.attr('placeholder', this.$element.attr('placeholder'));
-
-					this.placeholder.toggle();
-					this.$editor.on('keydown.redactor-placeholder', $.proxy(this.placeholder.toggle, this));
-				},
-				toggle: function()
-				{
-					setTimeout($.proxy(function()
-					{
-						var func = this.utils.isEmpty(this.$editor.html(), false) ? 'addClass' : 'removeClass';
-						this.$editor[func]('redactor-placeholder');
+						this.utils.restoreScroll();
 
-					}, this), 5);
-				},
-				remove: function()
-				{
-					this.$editor.removeClass('redactor-placeholder');
-				},
-				is: function()
-				{
-					if (this.opts.placeholder)
-					{
-						return this.$element.attr('placeholder', this.opts.placeholder);
-					}
-					else
-					{
-						return !(typeof this.$element.attr('placeholder') == 'undefined' || this.$element.attr('placeholder') === '');
-					}
-				}
-			};
-		},
-		progress: function()
-		{
-			return {
-				show: function()
-				{
-					$(document.body).append($('<div id="redactor-progress"><span></span></div>'));
-					$('#redactor-progress').fadeIn();
-				},
-				hide: function()
-				{
-					$('#redactor-progress').fadeOut(1500, function()
-					{
-						$(this).remove();
-					});
-				}
+						// paste info
+						var data = this.clean.getCurrentType(html);
 
-			};
-		},
-		selection: function()
-		{
-			return {
-				get: function()
-				{
-					this.sel = document.getSelection();
+						// clean
+						html = this.clean.onPaste(html, data);
 
-					if (document.getSelection && this.sel.getRangeAt && this.sel.rangeCount)
-					{
-						this.range = this.sel.getRangeAt(0);
-					}
-					else
-					{
-						this.range = document.createRange();
-					}
-				},
-				addRange: function()
-				{
-					try {
-						this.sel.removeAllRanges();
-					} catch (e) {}
+						// callback
+						var returned = this.core.callback('paste', html);
+						html = (typeof returned === 'undefined') ? html : returned;
 
-					this.sel.addRange(this.range);
-				},
-				getCurrent: function()
-				{
-					var el = false;
+						this.paste.insert(html, data);
+						this.rtePaste = false;
 
-					this.selection.get();
+						// clean pre breaklines
+						if (pre)
+						{
+							this.clean.cleanPre();
+						}
 
-					if (this.sel && this.sel.rangeCount > 0)
-					{
-						el = this.sel.getRangeAt(0).startContainer;
-					}
+						$(window).off('scroll.redactor-freeze');
 
-					return this.utils.isRedactorParent(el);
-				},
-				getParent: function(elem)
-				{
-					elem = elem || this.selection.getCurrent();
-					if (elem)
-					{
-						return this.utils.isRedactorParent($(elem).parent()[0]);
-					}
+					}, this), 1);
 
-					return false;
 				},
-				getPrev: function()
+				getPasteBoxCode: function(pre)
 				{
-					return  window.getSelection().anchorNode.previousSibling;
+					var html = (pre) ? this.$pasteBox.val() : this.$pasteBox.html();
+					this.$pasteBox.remove();
+
+					return html;
 				},
-				getNext: function()
+				createPasteBox: function(pre)
 				{
-					return window.getSelection().anchorNode.nextSibling;
+					var css = { position: 'fixed', width: '1px', top: 0, left: '-9999px' };
+
+					this.$pasteBox = (pre) ? $('<textarea>').css(css) : $('<div>').attr('contenteditable', 'true').css(css);
+					this.paste.appendPasteBox();
+					this.$pasteBox.focus();
 				},
-				getBlock: function(node)
+				appendPasteBox: function()
 				{
-					node = node || this.selection.getCurrent();
-
-					while (node)
+					if (this.detect.isIe())
 					{
-						if (this.utils.isBlockTag(node.tagName))
+						this.core.box().append(this.$pasteBox);
+					}
+					else
+					{
+						// bootstrap modal
+						var $visibleModals = $('.modal-body:visible');
+						if ($visibleModals.length > 0)
 						{
-							return ($(node).hasClass('redactor-editor')) ? false : node;
+							$visibleModals.append(this.$pasteBox);
+						}
+						else
+						{
+							$('body').prepend(this.$pasteBox);
 						}
-
-						node = node.parentNode;
 					}
-
-					return false;
 				},
-				getInlines: function(nodes, tags)
+				detectClipboardUpload: function(e)
 				{
-					this.selection.get();
+					e = e.originalEvent || e;
 
-					if (this.range && this.range.collapsed)
+					var clipboard = e.clipboardData;
+					if (this.detect.isIe() || this.detect.isFirefox())
 					{
 						return false;
 					}
 
-					var inlines = [];
-					nodes = (typeof nodes == 'undefined' || nodes === false) ? this.selection.getNodes() : nodes;
-					var inlineTags = this.opts.inlineTags;
-					inlineTags.push('span');
+					// prevent safari fake url
+					var types = clipboard.types;
+					if (types.indexOf('public.tiff') !== -1)
+					{
+						e.preventDefault();
+						return false;
+					}
 
-					if (typeof tags !== 'undefined')
+					if (!clipboard.items || !clipboard.items.length)
 					{
-						for (var i = 0; i < tags.length; i++)
-						{
-							inlineTags.push(tags[i]);
-						}
+						return;
 					}
 
-					$.each(nodes, $.proxy(function(i,node)
+					var file = clipboard.items[0].getAsFile();
+					if (file === null)
 					{
-						if ($.inArray(node.tagName.toLowerCase(), inlineTags) != -1)
-						{
-							inlines.push(node);
-						}
+						return false;
+					}
 
-					}, this));
+					var reader = new FileReader();
+					reader.readAsDataURL(file);
+					reader.onload = $.proxy(this.paste.insertFromClipboard, this);
 
-					return (inlines.length === 0) ? false : inlines;
+					return true;
 				},
-				getInlinesTags: function(tags)
+				clipboardUpload: function()
 				{
-					this.selection.get();
-
-					if (this.range && this.range.collapsed)
+					var imgs = this.$editor.find('img');
+					$.each(imgs, $.proxy(function(i,s)
 					{
-						return false;
-					}
+						if (s.src.search(/^data\:image/i) === -1)
+						{
+							return;
+						}
 
-					var inlines = [];
-					var nodes =  this.selection.getNodes();
-					$.each(nodes, $.proxy(function(i,node)
-					{
-						if ($.inArray(node.tagName.toLowerCase(), tags) != -1)
+						var formData = !!window.FormData ? new FormData() : null;
+						if (!window.FormData)
 						{
-							inlines.push(node);
+							return;
 						}
 
-					}, this));
+						this.upload.direct = true;
+						this.upload.type = 'image';
+						this.upload.url = this.opts.imageUpload;
+						this.upload.callback = $.proxy(function(data)
+						{
+							if (this.detect.isIe())
+							{
+								$(s).wrap($('<figure />'));
+							}
 
-					return (inlines.length === 0) ? false : inlines;
-				},
-				getBlocks: function(nodes)
-				{
-					this.selection.get();
+							else
+							{
+								var $parent = $(s).parent();
+								this.utils.replaceToTag($parent, 'figure');
+							}
 
-					if (this.range && this.range.collapsed)
-					{
-						return [this.selection.getBlock()];
-					}
+							s.src = data.url;
+							this.core.callback('imageUpload', $(s), data);
 
-					var blocks = [];
-					nodes = (typeof nodes == 'undefined') ? this.selection.getNodes() : nodes;
+						}, this);
 
-					$.each(nodes, $.proxy(function(i,node)
-					{
-						if (this.utils.isBlock(node))
-						{
-							blocks.push(node);
-						}
+						var blob = this.utils.dataURItoBlob(s.src);
 
-					}, this));
+						formData.append('clipboard', 1);
+						formData.append(this.opts.imageUploadParam, blob);
 
-					return (blocks.length === 0) ? [this.selection.getBlock()] : blocks;
-				},
-				getLastBlock: function()
-				{
-					return this.selection.lastBlock;
+						this.progress.show();
+						this.upload.send(formData, false);
+						this.code.sync();
+						this.rtePaste = false;
+
+					}, this));
 				},
-				getNodes: function()
+				insertFromClipboard: function(e)
 				{
-					this.selection.get();
-
-					var startNode = this.selection.getNodesMarker(1);
-					var endNode = this.selection.getNodesMarker(2);
-
-					if (this.range.collapsed === false)
+					var formData = !!window.FormData ? new FormData() : null;
+					if (!window.FormData)
 					{
-					   if (window.getSelection) {
-					        var sel = window.getSelection();
-					        if (sel.rangeCount > 0) {
+						return;
+					}
+
+					this.upload.direct = true;
+					this.upload.type = 'image';
+					this.upload.url = this.opts.imageUpload;
+					this.upload.callback = this.image.insert;
 
-					            var range = sel.getRangeAt(0);
-					            var startPointNode = range.startContainer, startOffset = range.startOffset;
+					var blob = this.utils.dataURItoBlob(e.target.result);
 
-					            var boundaryRange = range.cloneRange();
-					            boundaryRange.collapse(false);
-					            boundaryRange.insertNode(endNode);
-					            boundaryRange.setStart(startPointNode, startOffset);
-					            boundaryRange.collapse(true);
-					            boundaryRange.insertNode(startNode);
+					formData.append('clipboard', 1);
+					formData.append(this.opts.imageUploadParam, blob);
 
-					            // Reselect the original text
-					            range.setStartAfter(startNode);
-					            range.setEndBefore(endNode);
-					            sel.removeAllRanges();
-					            sel.addRange(range);
-					        }
-					    }
+					this.progress.show();
+					this.upload.send(formData, e);
+					this.rtePaste = false;
+				},
+				insert: function(html, data)
+				{
+					if (data.pre)
+					{
+						this.insert.raw(html);
+					}
+					else if (data.text)
+					{
+						this.insert.text(html);
 					}
 					else
 					{
-						this.selection.setNodesMarker(this.range, startNode, true);
-						endNode = startNode;
+						this.insert.html(html, data);
 					}
 
-					var nodes = [];
-					var counter = 0;
-
-					var self = this;
-					this.$editor.find('*').each(function()
+					// Firefox Clipboard Observe
+					if (this.detect.isFirefox() && this.opts.imageUpload && this.opts.clipboardImageUpload)
 					{
-						if (this == startNode)
-						{
-							var parent = $(this).parent();
-							if (parent.length !== 0 && parent[0].tagName != 'BODY' && self.utils.isRedactorParent(parent[0]))
-							{
-								nodes.push(parent[0]);
-							}
+						setTimeout($.proxy(this.paste.clipboardUpload, this), 100);
+					}
 
-							nodes.push(this);
-							counter = 1;
-						}
-						else
-						{
-							if (counter > 0)
-							{
-								nodes.push(this);
-								counter = counter + 1;
-							}
-						}
+				}
+			};
+		},
 
-						if (this == endNode)
-						{
-							return false;
-						}
+		// =placeholder
+		placeholder: function()
+		{
+			return {
 
-					});
+				// public
+				enable: function()
+				{
+					setTimeout($.proxy(function()
+					{
+						return (this.placeholder.isEditorEmpty()) ? this.placeholder.show() : this.placeholder.hide();
 
-					var finalNodes = [];
-					var len = nodes.length;
-					for (var i = 0; i < len; i++)
+					}, this), 5);
+				},
+				show: function()
+				{
+					this.core.editor().addClass('redactor-placeholder');
+				},
+				update: function(text)
+				{
+					this.opts.placeholder = text;
+					this.core.editor().attr('placeholder', text);
+				},
+				hide: function()
+				{
+					this.core.editor().removeClass('redactor-placeholder');
+				},
+				is: function()
+				{
+					return this.core.editor().hasClass('redactor-placeholder');
+				},
+
+
+				// private
+				init: function()
+				{
+					if (!this.placeholder.enabled())
 					{
-						if (nodes[i].id != 'nodes-marker-1' && nodes[i].id != 'nodes-marker-2')
-						{
-							finalNodes.push(nodes[i]);
-						}
+						return;
 					}
 
-					this.selection.removeNodesMarkers();
+					if (!this.utils.isEditorRelative())
+					{
+						this.utils.setEditorRelative();
+					}
 
-					return finalNodes;
+					this.placeholder.build();
+					this.placeholder.buildPosition();
+					this.placeholder.enable();
+					this.placeholder.enableEvents();
 
 				},
-				getNodesMarker: function(num)
+				enabled: function()
+				{
+					return (this.opts.placeholder) ? this.core.element().attr('placeholder', this.opts.placeholder) : this.placeholder.isAttr();
+				},
+				enableEvents: function()
+				{
+					this.core.editor().on('keydown.redactor-placeholder.' + this.uuid, $.proxy(this.placeholder.enable, this));
+				},
+				disableEvents: function()
+				{
+					this.core.editor().off('.redactor-placeholder.' + this.uuid);
+				},
+				build: function()
 				{
-					return $('<span id="nodes-marker-' + num + '" class="redactor-nodes-marker" data-verified="redactor">' + this.opts.invisibleSpace + '</span>')[0];
+					this.core.editor().attr('placeholder', this.core.element().attr('placeholder'));
 				},
-				setNodesMarker: function(range, node, type)
+				buildPosition: function()
 				{
-					var range = range.cloneRange();
+					var $style = $('<style />');
+					$style.addClass('redactor-placeholder-style-tag');
+					$style.html('#' + this.core.id() + '.redactor-placeholder::after ' + this.placeholder.getPosition());
 
-					try {
-						range.collapse(type);
-						range.insertNode(node);
-					}
-					catch (e) {}
+					$('head').append($style);
 				},
-				removeNodesMarkers: function()
+				getPosition: function()
 				{
-					$(document).find('span.redactor-nodes-marker').remove();
-					this.$editor.find('span.redactor-nodes-marker').remove();
+					return '{ top: ' + this.core.editor().css('padding-top') + '; left: ' + this.core.editor().css('padding-left') + '; }';
 				},
-				fromPoint: function(start, end)
+				isEditorEmpty: function()
 				{
-					this.caret.setOffset(start, end);
+					var html = $.trim(this.core.editor().html()).replace(/[\t\n]/g, '');
+					var states = ['', '<p>​</p>', '<p>​<br></p>', this.opts.emptyHtmlRendered];
+
+					return ($.inArray(html, states) !== -1);
+				},
+				isAttr: function()
+				{
+					return (typeof this.core.element().attr('placeholder') !== 'undefined' && this.core.element().attr('placeholder') !== '');
 				},
-				wrap: function(tag)
+				destroy: function()
 				{
-					this.selection.get();
+					this.core.editor().removeAttr('placeholder');
 
-					if (this.range.collapsed) return false;
+					this.placeholder.hide();
+					this.placeholder.disableEvents();
 
-					var wrapper = document.createElement(tag);
-					wrapper.appendChild(this.range.extractContents());
-					this.range.insertNode(wrapper);
+					$('.redactor-placeholder-style-tag').remove();
+				}
+			};
+		},
 
-					return wrapper;
-				},
-				selectElement: function(node)
+		// =progress
+		progress: function()
+		{
+			return {
+				$box: null,
+				$bar: null,
+				target: document.body,  // or id selector
+
+				// public
+				show: function()
 				{
-					if (this.utils.browser('mozilla'))
+					if (!this.progress.is())
 					{
-						node = node[0] || node;
-
-						var range = document.createRange();
-						range.selectNodeContents(node);
+						this.progress.build();
+						this.progress.$box.redactorAnimation('fadeIn');
 					}
 					else
 					{
-						this.caret.set(node, 0, node, 1);
+						this.progress.$box.show();
 					}
 				},
-				selectAll: function()
+				hide: function()
 				{
-					this.selection.get();
-					this.range.selectNodeContents(this.$editor[0]);
-					this.selection.addRange();
+					if (this.progress.is())
+					{
+						this.progress.$box.redactorAnimation('fadeOut', { duration: 0.35 }, $.proxy(this.progress.destroy, this));
+					}
 				},
-				remove: function()
+				update: function(value)
 				{
-					this.selection.get();
-					this.sel.removeAllRanges();
+					this.progress.show();
+					this.progress.$bar.css('width', value + '%');
 				},
-				save: function()
+				is: function()
 				{
-					this.selection.createMarkers();
+					return (this.progress.$box === null) ? false : true;
 				},
-				createMarkers: function()
-				{
-					this.selection.get();
-
-					var node1 = this.selection.getMarker(1);
-
-					this.selection.setMarker(this.range, node1, true);
-					if (this.range.collapsed === false)
-					{
-						var node2 = this.selection.getMarker(2);
-						this.selection.setMarker(this.range, node2, false);
-					}
 
-					this.savedSel = this.$editor.html();
-				},
-				getMarker: function(num)
+				// private
+				build: function()
 				{
-					if (typeof num == 'undefined') num = 1;
+					this.progress.$bar = $('<span />');
+					this.progress.$box = $('<div id="redactor-progress" />');
 
-					return $('<span id="selection-marker-' + num + '" class="redactor-selection-marker"  data-verified="redactor">' + this.opts.invisibleSpace + '</span>')[0];
+					this.progress.$box.append(this.progress.$bar);
+					$(this.progress.target).append(this.progress.$box);
 				},
-				getMarkerAsHtml: function(num)
-				{
-					return this.utils.getOuterHtml(this.selection.getMarker(num));
-				},
-				setMarker: function(range, node, type)
+				destroy: function()
 				{
-					range = range.cloneRange();
+					if (this.progress.is())
+					{
+						this.progress.$box.remove();
+					}
 
-					try {
-						range.collapse(type);
-						range.insertNode(node);
+					this.progress.$box = null;
+					this.progress.$bar = null;
+				}
+			};
+		},
 
+		// =selection
+		selection: function()
+		{
+			return {
+				get: function()
+				{
+					if (window.getSelection)
+					{
+						return window.getSelection();
 					}
-					catch (e)
+					else if (document.selection && document.selection.type !== "Control")
 					{
-						this.focus.setStart();
+						return document.selection;
 					}
 
+					return null;
 				},
-				restore: function()
+				range: function(sel)
 				{
-					var node1 = this.$editor.find('span#selection-marker-1');
-					var node2 = this.$editor.find('span#selection-marker-2');
-
-					if (this.utils.browser('mozilla'))
+					if (typeof sel === 'undefined')
 					{
-						this.$editor.focus();
+						sel = this.selection.get();
 					}
 
-					if (node1.length !== 0 && node2.length !== 0)
+					if (sel.getRangeAt && sel.rangeCount)
 					{
-						this.caret.set(node1, 0, node2, 0);
+						return sel.getRangeAt(0);
 					}
-					else if (node1.length !== 0)
-					{
-						this.caret.set(node1, 0, node1, 0);
-					}
-					else
+
+					return null;
+				},
+				is: function()
+				{
+					return (this.selection.isCollapsed()) ? false : true;
+				},
+				isRedactor: function()
+				{
+					var range = this.selection.range();
+
+					if (range !== null)
 					{
-						this.$editor.focus();
+						var el = range.startContainer.parentNode;
+
+						if ($(el).hasClass('redactor-in') || $(el).parents('.redactor-in').length !== 0)
+						{
+							return true;
+						}
 					}
 
-					this.selection.removeMarkers();
-					this.savedSel = false;
+					return false;
+				},
+				isCollapsed: function()
+				{
+					var sel = this.selection.get();
 
+					return (sel === null) ? false : sel.isCollapsed;
 				},
-				removeMarkers: function()
+				update: function(sel, range)
 				{
-					this.$editor.find('span.redactor-selection-marker').each(function(i,s)
+					if (range === null)
 					{
-						var text = $(s).text().replace(/\u200B/g, '');
-						if (text === '') $(s).remove();
-						else $(s).replaceWith(function() { return $(this).contents(); });
-					});
+						return;
+					}
+
+					sel.removeAllRanges();
+					sel.addRange(range);
+				},
+				current: function()
+				{
+					var sel = this.selection.get();
+
+					return (sel === null) ? false : sel.anchorNode;
 				},
-				getText: function()
+				parent: function()
 				{
-					this.selection.get();
+					var current = this.selection.current();
 
-					return this.sel.toString();
+					return (current === null) ? false : current.parentNode;
 				},
-				getHtml: function()
+				block: function(node)
 				{
-					var html = '';
+					node = node || this.selection.current();
 
-					this.selection.get();
-					if (this.sel.rangeCount)
+					while (node)
 					{
-						var container = document.createElement('div');
-						var len = this.sel.rangeCount;
-						for (var i = 0; i < len; ++i)
+						if (this.utils.isBlockTag(node.tagName))
 						{
-							container.appendChild(this.sel.getRangeAt(i).cloneContents());
+							return ($(node).hasClass('redactor-in')) ? false : node;
 						}
 
-						html = container.innerHTML;
-					}
-
-					return this.clean.onSync(html);
-				},
-				replaceSelection: function(html)
-				{
-					this.selection.get();
-					this.range.deleteContents();
-					var div = document.createElement("div");
-					div.innerHTML = html;
-					var frag = document.createDocumentFragment(), child;
-					while ((child = div.firstChild)) {
-						frag.appendChild(child);
+						node = node.parentNode;
 					}
 
-					this.range.insertNode(frag);
+					return false;
 				},
-				replaceWithHtml: function(html)
+				inline: function(node)
 				{
-					html = this.selection.getMarkerAsHtml(1) + html + this.selection.getMarkerAsHtml(2);
-
-					this.selection.get();
+					node = node || this.selection.current();
 
-					if (window.getSelection && window.getSelection().getRangeAt)
-					{
-						this.selection.replaceSelection(html);
-					}
-					else if (document.selection && document.selection.createRange)
+					while (node)
 					{
-						this.range.pasteHTML(html);
+						if (this.utils.isInlineTag(node.tagName))
+						{
+							return ($(node).hasClass('redactor-in')) ? false : node;
+						}
+
+						node = node.parentNode;
 					}
 
-					this.selection.restore();
-					this.code.sync();
-				}
-			};
-		},
-		shortcuts: function()
-		{
-			return {
-				init: function(e, key)
+					return false;
+				},
+				element: function(node)
 				{
-					// disable browser's hot keys for bold and italic
-					if (!this.opts.shortcuts)
+					if (!node)
 					{
-						if ((e.ctrlKey || e.metaKey) && (key === 66 || key === 73)) e.preventDefault();
-						return false;
+						node = this.selection.current();
 					}
 
-					$.each(this.opts.shortcuts, $.proxy(function(str, command)
+					while (node)
 					{
-						var keys = str.split(',');
-						var len = keys.length;
-						for (var i = 0; i < len; i++)
+						if (node.nodeType === 1)
 						{
-							if (typeof keys[i] === 'string')
+							if ($(node).hasClass('redactor-in'))
 							{
-								this.shortcuts.handler(e, $.trim(keys[i]), $.proxy(function()
-								{
-									var func;
-									if (command.func.search(/\./) != '-1')
-									{
-										func = command.func.split('.');
-										if (typeof this[func[0]] != 'undefined')
-										{
-											this[func[0]][func[1]].apply(this, command.params);
-										}
-									}
-									else
-									{
-										this[command.func].apply(this, command.params);
-									}
-
-								}, this));
+								return false;
 							}
 
+							return node;
 						}
 
-					}, this));
+						node = node.parentNode;
+					}
+
+					return false;
 				},
-				handler: function(e, keys, origHandler)
+				prev: function()
 				{
-					// based on https://github.com/jeresig/jquery.hotkeys
-					var hotkeysSpecialKeys =
-					{
-						8: "backspace", 9: "tab", 10: "return", 13: "return", 16: "shift", 17: "ctrl", 18: "alt", 19: "pause",
-						20: "capslock", 27: "esc", 32: "space", 33: "pageup", 34: "pagedown", 35: "end", 36: "home",
-						37: "left", 38: "up", 39: "right", 40: "down", 45: "insert", 46: "del", 59: ";", 61: "=",
-						96: "0", 97: "1", 98: "2", 99: "3", 100: "4", 101: "5", 102: "6", 103: "7",
-						104: "8", 105: "9", 106: "*", 107: "+", 109: "-", 110: ".", 111 : "/",
-						112: "f1", 113: "f2", 114: "f3", 115: "f4", 116: "f5", 117: "f6", 118: "f7", 119: "f8",
-						120: "f9", 121: "f10", 122: "f11", 123: "f12", 144: "numlock", 145: "scroll", 173: "-", 186: ";", 187: "=",
-						188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\", 221: "]", 222: "'"
-					};
-
+					var current = this.selection.current();
 
-					var hotkeysShiftNums =
-					{
-						"`": "~", "1": "!", "2": "@", "3": "#", "4": "$", "5": "%", "6": "^", "7": "&",
-						"8": "*", "9": "(", "0": ")", "-": "_", "=": "+", ";": ": ", "'": "\"", ",": "<",
-						".": ">",  "/": "?",  "\\": "|"
-					};
+					return (current === null) ? false : this.selection.current().previousSibling;
+				},
+				next: function()
+				{
+					var current = this.selection.current();
 
-					keys = keys.toLowerCase().split(" ");
-					var special = hotkeysSpecialKeys[e.keyCode],
-						character = String.fromCharCode( e.which ).toLowerCase(),
-						modif = "", possible = {};
+					return (current === null) ? false : this.selection.current().nextSibling;
+				},
+				blocks: function(tag)
+				{
+					var blocks = [];
+					var nodes = this.selection.nodes(tag);
 
-					$.each([ "alt", "ctrl", "meta", "shift"], function(index, specialKey)
+					$.each(nodes, $.proxy(function(i,node)
 					{
-						if (e[specialKey + 'Key'] && special !== specialKey)
+						if (this.utils.isBlock(node))
 						{
-							modif += specialKey + '+';
+							blocks.push(node);
 						}
-					});
 
+					}, this));
 
-					if (special) possible[modif + special] = true;
-					if (character)
+					var block = this.selection.block();
+					if (blocks.length === 0 && block === false)
 					{
-						possible[modif + character] = true;
-						possible[modif + hotkeysShiftNums[character]] = true;
-
-						// "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
-						if (modif === "shift+")
-						{
-							possible[hotkeysShiftNums[character]] = true;
-						}
+						return [];
 					}
-
-					for (var i = 0, len = keys.length; i < len; i++)
+					else if (blocks.length === 0 && block !== false)
 					{
-						if (possible[keys[i]])
-						{
-							e.preventDefault();
-							return origHandler.apply(this, arguments);
-						}
+						return [block];
 					}
-				}
-			};
-		},
-		tabifier: function()
-		{
-			return {
-				get: function(code)
+					else
+					{
+						return blocks;
+					}
+
+				},
+				inlines: function(tag)
 				{
-					if (!this.opts.tabifier) return code;
+					var inlines = [];
+					var nodes = this.selection.nodes(tag);
 
-					// clean setup
-					var ownLine = ['area', 'body', 'head', 'hr', 'i?frame', 'link', 'meta', 'noscript', 'style', 'script', 'table', 'tbody', 'thead', 'tfoot'];
-					var contOwnLine = ['li', 'dt', 'dt', 'h[1-6]', 'option', 'script'];
-					var newLevel = ['p', 'blockquote', 'div', 'dl', 'fieldset', 'form', 'frameset', 'map', 'ol', 'pre', 'select', 'td', 'th', 'tr', 'ul'];
+					$.each(nodes, $.proxy(function(i,node)
+					{
+						if (this.utils.isInline(node))
+						{
+							inlines.push(node);
+						}
 
-					this.tabifier.lineBefore = new RegExp('^<(/?' + ownLine.join('|/?' ) + '|' + contOwnLine.join('|') + ')[ >]');
-					this.tabifier.lineAfter = new RegExp('^<(br|/?' + ownLine.join('|/?' ) + '|/' + contOwnLine.join('|/') + ')[ >]');
-					this.tabifier.newLevel = new RegExp('^</?(' + newLevel.join('|' ) + ')[ >]');
+					}, this));
 
-					var i = 0,
-					codeLength = code.length,
-					point = 0,
-					start = null,
-					end = null,
-					tag = '',
-					out = '',
-					cont = '';
+					var inline = this.selection.inline();
+					if (inlines.length === 0 && inline === false)
+					{
+						return [];
+					}
+					else if (inlines.length === 0 && inline !== false)
+					{
+						return [inline];
+					}
+					else
+					{
+						return inlines;
+					}
+				},
+				nodes: function(tag)
+				{
+                    var filter = (typeof tag === 'undefined') ? [] : (($.isArray(tag)) ? tag : [tag]);
 
-					this.tabifier.cleanlevel = 0;
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
+                    var nodes = [];
+                    var resultNodes = [];
 
-					for (; i < codeLength; i++)
+					if (this.utils.isCollapsed())
+					{
+						nodes = [this.selection.current()];
+					}
+					else
 					{
-						point = i;
+						var node = range.startContainer;
+						var endNode = range.endContainer;
 
-						// if no more tags, copy and exit
-						if (-1 == code.substr(i).indexOf( '<' ))
+						// single node
+						if (node === endNode)
 						{
-							out += code.substr(i);
-
-							return this.tabifier.finish(out);
+							return [this.selection.parent()];
 						}
 
-						// copy verbatim until a tag
-						while (point < codeLength && code.charAt(point) != '<')
+						// iterate
+						while (node && node !== endNode)
 						{
-							point++;
+							nodes.push(node = this.selection.nextNode(node));
 						}
 
-						if (i != point)
+						// partially selected nodes
+						node = range.startContainer;
+						while (node && node !== range.commonAncestorContainer)
 						{
-							cont = code.substr(i, point - i);
-							if (!cont.match(/^\s{2,}$/g))
-							{
-								if ('\n' == out.charAt(out.length - 1)) out += this.tabifier.getTabs();
-								else if ('\n' == cont.charAt(0))
-								{
-									out += '\n' + this.tabifier.getTabs();
-									cont = cont.replace(/^\s+/, '');
-								}
-
-								out += cont;
-							}
-
-							if (cont.match(/\n/)) out += '\n' + this.tabifier.getTabs();
+							nodes.unshift(node);
+							node = node.parentNode;
 						}
+					}
 
-						start = point;
-
-						// find the end of the tag
-						while (point < codeLength && '>' != code.charAt(point))
+					// remove service nodes
+					$.each(nodes, function(i,s)
+					{
+						if (s)
 						{
-							point++;
-						}
+							var tagName = (s.nodeType !== 1) ? false : s.tagName.toLowerCase();
 
-						tag = code.substr(start, point - start);
-						i = point;
-
-						var t;
-
-						if ('!--' == tag.substr(1, 3))
-						{
-							if (!tag.match(/--$/))
+							if ($(s).hasClass('redactor-script-tag') || $(s).hasClass('redactor-selection-marker'))
 							{
-								while ('-->' != code.substr(point, 3))
-								{
-									point++;
-								}
-								point += 2;
-								tag = code.substr(start, point - start);
-								i = point;
+								return;
 							}
-
-							if ('\n' != out.charAt(out.length - 1)) out += '\n';
-
-							out += this.tabifier.getTabs();
-							out += tag + '>\n';
-						}
-						else if ('!' == tag[1])
-						{
-							out = this.tabifier.placeTag(tag + '>', out);
-						}
-						else if ('?' == tag[1])
-						{
-							out += tag + '>\n';
-						}
-						else if (t = tag.match(/^<(script|style|pre)/i))
-						{
-							t[1] = t[1].toLowerCase();
-							tag = this.tabifier.cleanTag(tag);
-							out = this.tabifier.placeTag(tag, out);
-							end = String(code.substr(i + 1)).toLowerCase().indexOf('</' + t[1]);
-
-							if (end)
+							else if (tagName && filter.length !== 0 && $.inArray(tagName, filter) === -1)
+							{
+								return;
+							}
+							else
 							{
-								cont = code.substr(i + 1, end);
-								i += end;
-								out += cont;
+								resultNodes.push(s);
 							}
 						}
-						else
-						{
-							tag = this.tabifier.cleanTag(tag);
-							out = this.tabifier.placeTag(tag, out);
-						}
-					}
+					});
 
-					return this.tabifier.finish(out);
+					return (resultNodes.length === 0) ? [] : resultNodes;
 				},
-				getTabs: function()
+				nextNode: function(node)
 				{
-					var s = '';
-					for ( var j = 0; j < this.tabifier.cleanlevel; j++ )
+					if (node.hasChildNodes())
 					{
-						s += '\t';
+						return node.firstChild;
 					}
+					else
+					{
+						while (node && !node.nextSibling)
+						{
+							node = node.parentNode;
+						}
 
-					return s;
+						if (!node)
+						{
+							return null;
+						}
+
+						return node.nextSibling;
+					}
 				},
-				finish: function(code)
+				save: function()
 				{
-					code = code.replace(/\n\s*\n/g, '\n');
-					code = code.replace(/^[\s\n]*/, '');
-					code = code.replace(/[\s\n]*$/, '');
-					code = code.replace(/<script(.*?)>\n<\/script>/gi, '<script$1></script>');
-
-					this.tabifier.cleanlevel = 0;
-
-					return code;
+ 					this.marker.insert();
+					this.savedSel = this.core.editor().html();
 				},
-				cleanTag: function (tag)
+				restore: function(removeMarkers)
 				{
-					var tagout = '';
-					tag = tag.replace(/\n/g, ' ');
-					tag = tag.replace(/\s{2,}/g, ' ');
-					tag = tag.replace(/^\s+|\s+$/g, ' ');
+                    var node1 = this.marker.find(1);
+					var node2 = this.marker.find(2);
 
-					var suffix = '';
-					if (tag.match(/\/$/))
+					if (this.detect.isFirefox())
 					{
-						suffix = '/';
-						tag = tag.replace(/\/+$/, '');
+						this.core.editor().focus();
 					}
 
-					var m;
-					while (m = /\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(tag))
+					if (node1.length !== 0 && node2.length !== 0)
 					{
-						if (m[2]) tagout += m[1].toLowerCase() + '=' + m[2];
-						else if (m[1]) tagout += m[1].toLowerCase();
-
-						tagout += ' ';
-						tag = tag.substr(m[0].length);
+						this.caret.set(node1, node2);
 					}
-
-					return tagout.replace(/\s*$/, '') + suffix + '>';
-				},
-				placeTag: function (tag, out)
-				{
-					var nl = tag.match(this.tabifier.newLevel);
-
-					if (tag.match(this.tabifier.lineBefore) || nl)
+					else if (node1.length !== 0)
 					{
-						out = out.replace(/\s*$/, '');
-						out += '\n';
+						this.caret.start(node1);
 					}
-
-					if (nl && '/' == tag.charAt(1)) this.tabifier.cleanlevel--;
-					if ('\n' == out.charAt(out.length - 1)) out += this.tabifier.getTabs();
-					if (nl && '/' != tag.charAt(1)) this.tabifier.cleanlevel++;
-
-					out += tag;
-
-					if (tag.match(this.tabifier.lineAfter) || tag.match(this.tabifier.newLevel))
+					else
 					{
-						out = out.replace(/ *$/, '');
-						//out += '\n';
+						this.core.editor().focus();
 					}
 
-					return out;
-				}
-			};
-		},
-		tidy: function()
-		{
-			return {
-				setupAllowed: function()
-				{
-					var index = $.inArray('span', this.opts.removeEmpty);
-					if (index !== -1)
+					if (removeMarkers !== false)
 					{
-						this.opts.removeEmpty.splice(index, 1);
-					}
+						this.marker.remove();
+						this.savedSel = false;
+					}
+				},
+                saveInstant: function()
+                {
+                    var el = this.core.editor()[0];
+                    var doc = el.ownerDocument, win = doc.defaultView;
+                    var sel = win.getSelection();
+
+                    if (!sel.getRangeAt || !sel.rangeCount)
+                    {
+                        return;
+                    }
+
+                    var range = sel.getRangeAt(0);
+                    var selectionRange = range.cloneRange();
+
+                    selectionRange.selectNodeContents(el);
+                    selectionRange.setEnd(range.startContainer, range.startOffset);
+
+                    var start = selectionRange.toString().length;
+
+                    this.saved = {
+                        start: start,
+                        end: start + range.toString().length,
+                        node: range.startContainer
+                    };
+
+                    return this.saved;
+                },
+                restoreInstant: function(saved)
+                {
+                    if (typeof saved === 'undefined' && !this.saved)
+                    {
+                        return;
+                    }
+
+                    this.saved = (typeof saved !== 'undefined') ? saved : this.saved;
+
+                    var $node = this.core.editor().find(this.saved.node);
+                    if ($node.length !== 0 && $node.text().trim().replace(/\u200B/g, '').length === 0)
+                    {
+                       try {
+                            var range = document.createRange();
+                            range.setStart($node[0], 0);
+
+                            var sel = window.getSelection();
+                            sel.removeAllRanges();
+                            sel.addRange(range);
+                        }
+                        catch(e) {}
+
+                        return;
+                    }
+
+                    var el = this.core.editor()[0];
+                    var doc = el.ownerDocument, win = doc.defaultView;
+                    var charIndex = 0, range = doc.createRange();
+
+                    range.setStart(el, 0);
+                    range.collapse(true);
+
+                    var nodeStack = [el], node, foundStart = false, stop = false;
+                    while (!stop && (node = nodeStack.pop()))
+                    {
+                        if (node.nodeType == 3)
+                        {
+                            var nextCharIndex = charIndex + node.length;
+                            if (!foundStart && this.saved.start >= charIndex && this.saved.start <= nextCharIndex)
+                            {
+                                range.setStart(node, this.saved.start - charIndex);
+                                foundStart = true;
+                            }
+
+                            if (foundStart && this.saved.end >= charIndex && this.saved.end <= nextCharIndex)
+                            {
+                                range.setEnd(node, this.saved.end - charIndex);
+                                stop = true;
+                            }
+                            charIndex = nextCharIndex;
+                        }
+                        else
+                        {
+                            var i = node.childNodes.length;
+                            while (i--)
+                            {
+                                nodeStack.push(node.childNodes[i]);
+                            }
+                        }
+                    }
+
+                    var sel = win.getSelection();
+                    sel.removeAllRanges();
+                    sel.addRange(range);
+                },
+				node: function(node)
+				{
+					$(node).prepend(this.marker.get(1));
+					$(node).append(this.marker.get(2));
 
-					if (this.opts.allowedTags) this.opts.deniedTags = false;
-					if (this.opts.allowedAttr) this.opts.removeAttr = false;
+					this.selection.restore();
+				},
+				all: function()
+				{
+					this.core.editor().focus();
 
-					if (this.opts.linebreaks) return;
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
 
-					var tags = ['p', 'section'];
-					if (this.opts.allowedTags) this.tidy.addToAllowed(tags);
-					if (this.opts.deniedTags) this.tidy.removeFromDenied(tags);
+					range.selectNodeContents(this.core.editor()[0]);
 
+					this.selection.update(sel, range);
 				},
-				addToAllowed: function(tags)
-				{
-					var len = tags.length;
-					for (var i = 0; i < len; i++)
-					{
-						if ($.inArray(tags[i], this.opts.allowedTags) == -1)
-						{
-							this.opts.allowedTags.push(tags[i]);
-						}
-					}
-				},
-				removeFromDenied: function(tags)
+				remove: function()
 				{
-					var len = tags.length;
-					for (var i = 0; i < len; i++)
-					{
-						var pos = $.inArray(tags[i], this.opts.deniedTags);
-						if (pos != -1)
-						{
-							this.opts.deniedTags.splice(pos, 1);
-						}
-					}
+					this.selection.get().removeAllRanges();
 				},
-				load: function(html, options)
+				replace: function(html)
 				{
-					this.tidy.settings = {
-						deniedTags: this.opts.deniedTags,
-						allowedTags: this.opts.allowedTags,
-						removeComments: this.opts.removeComments,
-						replaceTags: this.opts.replaceTags,
-						replaceStyles: this.opts.replaceStyles,
-						removeDataAttr: this.opts.removeDataAttr,
-						removeAttr: this.opts.removeAttr,
-						allowedAttr: this.opts.allowedAttr,
-						removeWithoutAttr: this.opts.removeWithoutAttr,
-						removeEmpty: this.opts.removeEmpty
-					};
-
-					$.extend(this.tidy.settings, options);
-
-					html = this.tidy.removeComments(html);
-
-					// create container
-					this.tidy.$div = $('<div />').append(html);
-
-					// clean
-					this.tidy.replaceTags();
-					this.tidy.replaceStyles();
-					this.tidy.removeTags();
-
-					this.tidy.removeAttr();
-					this.tidy.removeEmpty();
-					this.tidy.removeParagraphsInLists();
-					this.tidy.removeDataAttr();
-					this.tidy.removeWithoutAttr();
-
-					html = this.tidy.$div.html();
-					this.tidy.$div.remove();
-
-					return html;
+					this.insert.html(html);
 				},
-				removeComments: function(html)
+				text: function()
 				{
-					if (!this.tidy.settings.removeComments) return html;
-
-					return html.replace(/<!--[\s\S]*?-->/gi, '');
+					return this.selection.get().toString();
 				},
-				replaceTags: function(html)
+				html: function()
 				{
-					if (!this.tidy.settings.replaceTags) return html;
+					var html = '';
+					var sel = this.selection.get();
 
-					var len = this.tidy.settings.replaceTags.length;
-					var replacement = [], rTags = [];
-					for (var i = 0; i < len; i++)
+					if (sel.rangeCount)
 					{
-						rTags.push(this.tidy.settings.replaceTags[i][1]);
-						replacement.push(this.tidy.settings.replaceTags[i][0]);
+						var container = document.createElement('div');
+						var len = sel.rangeCount;
+						for (var i = 0; i < len; ++i)
+						{
+							container.appendChild(sel.getRangeAt(i).cloneContents());
+						}
+
+						html = this.clean.onGet(container.innerHTML);
 					}
 
-					$.each(replacement, $.proxy(function(key, value)
-					{
-						this.tidy.$div.find(value).replaceWith(function()
-						{
-							return $("<" + rTags[key] + " />", {html: $(this).html()});
-						});
-					}, this));
+					return html;
 				},
-				replaceStyles: function()
+				extractEndOfNode: function(node)
 				{
-					if (!this.tidy.settings.replaceStyles) return;
+					var sel = this.selection.get();
+					var range = this.selection.range(sel);
 
-					var len = this.tidy.settings.replaceStyles.length;
-					this.tidy.$div.find('span').each($.proxy(function(n,s)
-					{
-						var $el = $(s);
-						var style = $el.attr('style');
-						for (var i = 0; i < len; i++)
-						{
-							if (style && style.match(new RegExp('^' + this.tidy.settings.replaceStyles[i][0], 'i')))
-							{
-								var tagName = this.tidy.settings.replaceStyles[i][1];
-								$el.replaceWith(function()
-								{
-									var tag = document.createElement(tagName);
-									return $(tag).append($(this).contents());
-								});
-							}
-						}
+			        var clonedRange = range.cloneRange();
+			        clonedRange.selectNodeContents(node);
+			        clonedRange.setStart(range.endContainer, range.endOffset);
 
-					}, this));
+			        return clonedRange.extractContents();
+				},
 
+				// #backward
+				removeMarkers: function()
+				{
+					this.marker.remove();
 				},
-				removeTags: function()
+				marker: function(num)
 				{
-					if (!this.tidy.settings.deniedTags && this.tidy.settings.allowedTags)
-					{
-						this.tidy.$div.find('*').not(this.tidy.settings.allowedTags.join(',')).each(function(i, s)
-						{
-							if (s.innerHTML === '') $(s).remove();
-							else $(s).contents().unwrap();
-						});
-					}
+					return this.marker.get(num);
+				},
+				markerHtml: function(num)
+				{
+					return this.marker.html(num);
+				}
 
-					if (this.tidy.settings.deniedTags)
-					{
-						this.tidy.$div.find(this.tidy.settings.deniedTags.join(',')).each(function(i, s)
-						{
-							if ($(s).hasClass('redactor-script-tag') || $(s).hasClass('redactor-selection-marker')) return;
+			};
+		},
 
-							if (s.innerHTML === '') $(s).remove();
-							else $(s).contents().unwrap();
-						});
-					}
+		// =shortcuts
+		shortcuts: function()
+		{
+			return {
+				// based on https://github.com/jeresig/jquery.hotkeys
+				hotkeysSpecialKeys: {
+					8: "backspace", 9: "tab", 10: "return", 13: "return", 16: "shift", 17: "ctrl", 18: "alt", 19: "pause",
+					20: "capslock", 27: "esc", 32: "space", 33: "pageup", 34: "pagedown", 35: "end", 36: "home",
+					37: "left", 38: "up", 39: "right", 40: "down", 45: "insert", 46: "del", 59: ";", 61: "=",
+					96: "0", 97: "1", 98: "2", 99: "3", 100: "4", 101: "5", 102: "6", 103: "7",
+					104: "8", 105: "9", 106: "*", 107: "+", 109: "-", 110: ".", 111 : "/",
+					112: "f1", 113: "f2", 114: "f3", 115: "f4", 116: "f5", 117: "f6", 118: "f7", 119: "f8",
+					120: "f9", 121: "f10", 122: "f11", 123: "f12", 144: "numlock", 145: "scroll", 173: "-", 186: ";", 187: "=",
+					188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\", 221: "]", 222: "'"
+				},
+				hotkeysShiftNums: {
+					"`": "~", "1": "!", "2": "@", "3": "#", "4": "$", "5": "%", "6": "^", "7": "&",
+					"8": "*", "9": "(", "0": ")", "-": "_", "=": "+", ";": ": ", "'": "\"", ",": "<",
+					".": ">",  "/": "?",  "\\": "|"
 				},
-				removeAttr: function()
+				init: function(e, key)
 				{
-					var len;
-					if (!this.tidy.settings.removeAttr && this.tidy.settings.allowedAttr)
+					// disable browser's hot keys for bold and italic if shortcuts off
+					if (this.opts.shortcuts === false)
 					{
-
-						var allowedAttrTags = [], allowedAttrData = [];
-						len = this.tidy.settings.allowedAttr.length;
-						for (var i = 0; i < len; i++)
+						if ((e.ctrlKey || e.metaKey) && (key === 66 || key === 73))
 						{
-							allowedAttrTags.push(this.tidy.settings.allowedAttr[i][0]);
-							allowedAttrData.push(this.tidy.settings.allowedAttr[i][1]);
+							e.preventDefault();
 						}
 
-
-						this.tidy.$div.find('*').each($.proxy(function(n,s)
+						return false;
+					}
+					else
+					{
+						// build
+						$.each(this.opts.shortcuts, $.proxy(function(str, command)
 						{
-							var $el = $(s);
-							var pos = $.inArray($el[0].tagName.toLowerCase(), allowedAttrTags);
-							var attributesRemove = this.tidy.removeAttrGetRemoves(pos, allowedAttrData, $el);
+							this.shortcuts.build(e, str, command);
 
-							if (attributesRemove)
-							{
-								$.each(attributesRemove, function(z,f) {
-									$el.removeAttr(f);
-								});
-							}
 						}, this));
 					}
+				},
+				build: function(e, str, command)
+				{
+					var handler = $.proxy(function()
+					{
+						this.shortcuts.buildHandler(command);
+
+					}, this);
 
-					if (this.tidy.settings.removeAttr)
+					var keys = str.split(',');
+					var len = keys.length;
+					for (var i = 0; i < len; i++)
 					{
-						len = this.tidy.settings.removeAttr.length;
-						for (var i = 0; i < len; i++)
+						if (typeof keys[i] === 'string')
 						{
-							var attrs = this.tidy.settings.removeAttr[i][1];
-							if ($.isArray(attrs)) attrs = attrs.join(' ');
-
-							this.tidy.$div.find(this.tidy.settings.removeAttr[i][0]).removeAttr(attrs);
+							this.shortcuts.handler(e, $.trim(keys[i]), handler);
 						}
 					}
 
 				},
-				removeAttrGetRemoves: function(pos, allowed, $el)
+				buildHandler: function(command)
 				{
-					var attributesRemove = [];
-
-					// remove all attrs
-					if (pos == -1)
+					var func;
+					if (command.func.search(/\./) !== '-1')
 					{
-						$.each($el[0].attributes, function(i, item)
+						func = command.func.split('.');
+						if (typeof this[func[0]] !== 'undefined')
 						{
-							attributesRemove.push(item.name);
-						});
-
-					}
-					// allow all attrs
-					else if (allowed[pos] == '*')
-					{
-						attributesRemove = [];
+							this[func[0]][func[1]].apply(this, command.params);
+						}
 					}
-					// allow specific attrs
 					else
 					{
-						$.each($el[0].attributes, function(i, item)
-						{
-							if ($.isArray(allowed[pos]))
-							{
-								if ($.inArray(item.name, allowed[pos]) == -1)
-								{
-									attributesRemove.push(item.name);
-								}
-							}
-							else if (allowed[pos] != item.name)
-							{
-								attributesRemove.push(item.name);
-							}
-
-						});
+						this[command.func].apply(this, command.params);
 					}
-
-					return attributesRemove;
 				},
-				removeAttrs: function (el, regex)
+				handler: function(e, keys, origHandler)
 				{
-					regex = new RegExp(regex, "g");
-					return el.each(function()
+					keys = keys.toLowerCase().split(" ");
+
+					var special = this.shortcuts.hotkeysSpecialKeys[e.keyCode];
+					var character = String.fromCharCode(e.which).toLowerCase();
+					var modif = "", possible = {};
+
+					$.each([ "alt", "ctrl", "meta", "shift"], function(index, specialKey)
 					{
-						var self = $(this);
-						var len = this.attributes.length - 1;
-						for (var i = len; i >= 0; i--)
+						if (e[specialKey + 'Key'] && special !== specialKey)
 						{
-							var item = this.attributes[i];
-							if (item && item.specified && item.name.search(regex)>=0)
-							{
-								self.removeAttr(item.name);
-							}
+							modif += specialKey + '+';
 						}
 					});
-				},
-				removeEmpty: function()
-				{
-					if (!this.tidy.settings.removeEmpty) return;
 
-					this.tidy.$div.find(this.tidy.settings.removeEmpty.join(',')).each(function()
-					{
-						var $el = $(this);
-						var text = $el.text();
-						text = text.replace(/\u200B/g, '');
-						text = text.replace(/&nbsp;/gi, '');
-						text = text.replace(/\s/g, '');
-
-		    	    	if (text === '' && $el.children().length === 0)
-		    	    	{
-			    	    	$el.remove();
-		    	    	}
-					});
-				},
-				removeParagraphsInLists: function()
-				{
-					this.tidy.$div.find('li p').contents().unwrap();
-				},
-				removeDataAttr: function()
-				{
-					if (!this.tidy.settings.removeDataAttr) return;
 
-					var tags = this.tidy.settings.removeDataAttr;
-					if ($.isArray(this.tidy.settings.removeDataAttr)) tags = this.tidy.settings.removeDataAttr.join(',');
+					if (special)
+					{
+						possible[modif + special] = true;
+					}
 
-					this.tidy.removeAttrs(this.tidy.$div.find(tags), '^(data-)');
+					if (character)
+					{
+						possible[modif + character] = true;
+						possible[modif + this.shortcuts.hotkeysShiftNums[character]] = true;
 
-				},
-				removeWithoutAttr: function()
-				{
-					if (!this.tidy.settings.removeWithoutAttr) return;
+						// "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
+						if (modif === "shift+")
+						{
+							possible[this.shortcuts.hotkeysShiftNums[character]] = true;
+						}
+					}
 
-					this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(',')).each(function()
+					var len = keys.length;
+					for (var i = 0; i < len; i++)
 					{
-						if (this.attributes.length === 0)
+						if (possible[keys[i]])
 						{
-							$(this).contents().unwrap();
+							e.preventDefault();
+							return origHandler.apply(this, arguments);
 						}
-					});
+					}
 				}
 			};
 		},
-		toolbar: function()
+
+		// =storage
+		storage: function()
 		{
 			return {
-				init: function()
+				data: [],
+				add: function(data)
 				{
-					return {
-						html:
-						{
-							title: this.lang.get('html'),
-							func: 'code.toggle'
-						},
-						formatting:
-						{
-							title: this.lang.get('formatting'),
-							dropdown:
-							{
-								p:
-								{
-									title: this.lang.get('paragraph'),
-									func: 'block.format'
-								},
-								blockquote:
-								{
-									title: this.lang.get('quote'),
-									func: 'block.format'
-								},
-								pre:
-								{
-									title: this.lang.get('code'),
-									func: 'block.format'
-								},
-								h1:
-								{
-									title: this.lang.get('header1'),
-									func: 'block.format'
-								},
-								h2:
-								{
-									title: this.lang.get('header2'),
-									func: 'block.format'
-								},
-								h3:
-								{
-									title: this.lang.get('header3'),
-									func: 'block.format'
-								},
-								h4:
-								{
-									title: this.lang.get('header4'),
-									func: 'block.format'
-								},
-								h5:
-								{
-									title: this.lang.get('header5'),
-									func: 'block.format'
-								}
-							}
-						},
-						bold:
-						{
-							title: this.lang.get('bold'),
-							func: 'inline.format'
-						},
-						italic:
-						{
-							title: this.lang.get('italic'),
-							func: 'inline.format'
-						},
-						deleted:
-						{
-							title: this.lang.get('deleted'),
-							func: 'inline.format'
-						},
-						underline:
-						{
-							title: this.lang.get('underline'),
-							func: 'inline.format'
-						},
-						unorderedlist:
-						{
-							title: '&bull; ' + this.lang.get('unorderedlist'),
-							func: 'list.toggle'
-						},
-						orderedlist:
-						{
-							title: '1. ' + this.lang.get('orderedlist'),
-							func: 'list.toggle'
-						},
-						outdent:
-						{
-							title: '< ' + this.lang.get('outdent'),
-							func: 'indent.decrease'
-						},
-						indent:
-						{
-							title: '> ' + this.lang.get('indent'),
-							func: 'indent.increase'
-						},
-						image:
-						{
-							title: this.lang.get('image'),
-							func: 'image.show'
-						},
-						file:
-						{
-							title: this.lang.get('file'),
-							func: 'file.show'
-						},
-						link:
-						{
-							title: this.lang.get('link'),
-							dropdown:
-							{
-								link:
-								{
-									title: this.lang.get('link_insert'),
-									func: 'link.show',
-									observe: {
-										element: 'a',
-										in: {
-											title: this.lang.get('link_edit'),
-										},
-										out: {
-											title: this.lang.get('link_insert')
-										}
-									}
-								},
-								unlink:
-								{
-									title: this.lang.get('unlink'),
-									func: 'link.unlink',
-									observe: {
-										element: 'a',
-										out: {
-											attr: {
-												'class': 'redactor-dropdown-link-inactive',
-												'aria-disabled': true
-											}
-										}
-									}
-								}
-							}
-						},
-						alignment:
-						{
-							title: this.lang.get('alignment'),
-							dropdown:
-							{
-								left:
-								{
-									title: this.lang.get('align_left'),
-									func: 'alignment.left'
-								},
-								center:
-								{
-									title: this.lang.get('align_center'),
-									func: 'alignment.center'
-								},
-								right:
-								{
-									title: this.lang.get('align_right'),
-									func: 'alignment.right'
-								},
-								justify:
-								{
-									title: this.lang.get('align_justify'),
-									func: 'alignment.justify'
-								}
-							}
-						},
-						horizontalrule:
-						{
-							title: this.lang.get('horizontalrule'),
-							func: 'line.insert'
-						}
-					};
+					// type, node, url, id
+					data.status = true;
+					data.url = decodeURI(data.url);
+
+					this.storage.data[data.url] = data;
 				},
-				build: function()
+				status: function(url, status)
 				{
-					this.toolbar.hideButtons();
-					this.toolbar.hideButtonsOnMobile();
-					this.toolbar.isButtonSourceNeeded();
-
-					if (this.opts.buttons.length === 0) return;
-
-					this.$toolbar = this.toolbar.createContainer();
+					this.storage.data[decodeURI(url)].status = status;
+				},
+				observe: function()
+				{
+					var _this = this;
 
-					this.toolbar.setOverflow();
-					this.toolbar.append();
-					this.toolbar.setFormattingTags();
-					this.toolbar.loadButtons();
-					this.toolbar.setFixed();
+					var $images = this.core.editor().find('[data-image]');
+					$images.each(function(i, s)
+					{
+						_this.storage.add({ type: 'image', node: s, url: s.src, id: $(s).attr('data-image') });
+					});
 
-					// buttons response
-					if (this.opts.activeButtons)
+					var $files = this.core.editor().find('[data-file]');
+					$files.each(function(i, s)
 					{
-						this.$editor.on('mouseup.redactor keyup.redactor focus.redactor', $.proxy(this.observe.toolbar, this));
-					}
+						_this.storage.add({ type: 'file', node: s, url: s.href, id: $(s).attr('data-file') });
+					});
 
-				},
-				createContainer: function()
-				{
-					return $('<ul>').addClass('redactor-toolbar').attr({'id': 'redactor-toolbar-' + this.uuid, 'role': 'toolbar'});
-				},
-				setFormattingTags: function()
-				{
-					$.each(this.opts.toolbar.formatting.dropdown, $.proxy(function (i, s)
+					var $s3 = this.core.editor().find('[data-s3]');
+					$s3.each(function(i, s)
 					{
-						if ($.inArray(i, this.opts.formatting) == -1) delete this.opts.toolbar.formatting.dropdown[i];
-					}, this));
+						var url = (s.tagName === 'IMG') ? s.src : s.href;
+						_this.storage.add({ type: 's3', node: s, url: url, id: $(s).attr('data-s3') });
+					});
 
 				},
-				loadButtons: function()
+				changes: function()
 				{
-					$.each(this.opts.buttons, $.proxy(function(i, btnName)
+					for (var key in this.storage.data)
 					{
-						if (!this.opts.toolbar[btnName]) return;
+						var data = this.storage.data[key];
+						var attr = (data.node.tagName === 'IMG') ? 'src' : 'href';
+						var $el = this.core.editor().find('[data-' + data.type + '][' + attr + '="' + data.url + '"]');
 
-						if (btnName === 'file')
+						if ($el.length === 0)
 						{
-							 if (this.opts.fileUpload === false) return;
-							 else if (!this.opts.fileUpload && this.opts.s3 === false) return;
+							this.storage.status(data.url, false);
 						}
-
-						if (btnName === 'image')
+						else
 						{
-							 if (this.opts.imageUpload === false) return;
-							 else if (!this.opts.imageUpload && this.opts.s3 === false) return;
+							this.storage.status(data.url, true);
 						}
+					}
 
-						var btnObject = this.opts.toolbar[btnName];
-						this.$toolbar.append($('<li>').append(this.button.build(btnName, btnObject)));
 
-					}, this));
+					return this.storage.data;
+				}
+
+			};
+		},
+
+		// =toolbar
+		toolbar: function()
+		{
+			return {
+				build: function()
+				{
+					this.button.hideButtons();
+					this.button.hideButtonsOnMobile();
+
+                    this.$toolbarBox = $('<div />').addClass('redactor-toolbar-box');
+					this.$toolbar = this.toolbar.createContainer();
+					this.$toolbarBox.append(this.$toolbar);
+
+					this.toolbar.append();
+					this.button.$toolbar = this.$toolbar;
+					this.button.setFormatting();
+					this.button.load(this.$toolbar);
+
+					this.toolbar.setOverflow();
+					this.toolbar.setFixed();
+
+				},
+				createContainer: function()
+				{
+					return $('<ul>').addClass('redactor-toolbar').attr({ 'id': 'redactor-toolbar-' + this.uuid, 'role': 'toolbar' });
 				},
 				append: function()
 				{
 					if (this.opts.toolbarExternal)
 					{
 						this.$toolbar.addClass('redactor-toolbar-external');
-						$(this.opts.toolbarExternal).html(this.$toolbar);
+						$(this.opts.toolbarExternal).html(this.$toolbarBox);
 					}
 					else
 					{
-						this.$box.prepend(this.$toolbar);
-					}
-				},
-				setFixed: function()
-				{
-					if (!this.utils.isDesktop()) return;
-					if (this.opts.toolbarExternal) return;
-					if (!this.opts.toolbarFixed) return;
-
-					this.toolbar.observeScroll();
-					$(this.opts.toolbarFixedTarget).on('scroll.redactor.' + this.uuid, $.proxy(this.toolbar.observeScroll, this));
+						if (this.opts.type === 'textarea')
+						{
+							this.$box.prepend(this.$toolbarBox);
+						}
+						else
+						{
+							this.$element.before(this.$toolbarBox);
+						}
 
+					}
 				},
 				setOverflow: function()
 				{
-					if (this.utils.isMobile() && this.opts.toolbarOverflow)
+    				if (this.opts.toolbarOverflow)
 					{
-						this.$toolbar.addClass('redactor-toolbar-overflow');
-					}
+    					this.$toolbar.addClass('redactor-toolbar-overflow');
+    				}
 				},
-				isButtonSourceNeeded: function()
+				setFixed: function()
 				{
-					if (this.opts.source) return;
-
-					var index = this.opts.buttons.indexOf('html');
-					if (index !== -1)
+					if (!this.opts.toolbarFixed || this.opts.toolbarExternal)
 					{
-						this.opts.buttons.splice(index, 1);
+						return;
 					}
-				},
-				hideButtons: function()
-				{
-					if (this.opts.buttonsHide.length === 0) return;
 
-					$.each(this.opts.buttonsHide, $.proxy(function(i, s)
+					if (this.opts.toolbarFixedTarget !== document)
 					{
-						var index = this.opts.buttons.indexOf(s);
-						this.opts.buttons.splice(index, 1);
+						var $el = $(this.opts.toolbarFixedTarget);
+						this.toolbar.toolbarOffsetTop = ($el.length === 0) ? 0 : this.core.box().offset().top - $el.offset().top;
+					}
 
-					}, this));
-				},
-				hideButtonsOnMobile: function()
-				{
-					if (!this.utils.isMobile() || this.opts.buttonsHideOnMobile.length === 0) return;
+					// bootstrap modal fix
+					var late = (this.core.box().closest('.modal-body').length !== 0) ? 1000 : 0;
 
-					$.each(this.opts.buttonsHideOnMobile, $.proxy(function(i, s)
+					setTimeout($.proxy(function()
 					{
-						var index = this.opts.buttons.indexOf(s);
-						this.opts.buttons.splice(index, 1);
+    					var self = this;
+						this.toolbar.observeScroll(false);
+						if (this.detect.isDesktop())
+						{
+							$(this.opts.toolbarFixedTarget).on('scroll.redactor.' + this.uuid, function()
+							{
+                                if (self.core.editor().height() < 100 || self.placeholder.isEditorEmpty())
+            					{
+                					return;
+            					}
+
+    							self.toolbar.observeScroll();
+                            });
+						}
+						else
+						{
+							$(this.opts.toolbarFixedTarget).on('scroll.redactor.' + this.uuid, function()
+							{
+                                if (self.core.editor().height() < 100 || self.placeholder.isEditorEmpty())
+            					{
+                					return;
+            					}
+
+								self.core.toolbar().hide();
+								clearTimeout($.data(this, "scrollCheck"));
+								$.data(this, "scrollCheck", setTimeout(function()
+								{
+									self.core.toolbar().show();
+									self.toolbar.observeScroll();
+								}, 250) );
+
+							});
+						}
+
+					}, this), late);
 
-					}, this));
 				},
-				observeScroll: function()
+				setUnfixed: function()
 				{
-					var scrollTop = $(this.opts.toolbarFixedTarget).scrollTop();
-					var boxTop = 1;
+    				this.toolbar.observeScrollDisable();
+				},
+				getBoxTop: function()
+				{
+					return (this.opts.toolbarFixedTarget === document) ? this.core.box().offset().top : this.toolbar.toolbarOffsetTop;
+				},
+				observeScroll: function(start)
+				{
+					// tolerance 0 if redactor in the hidden layer
+					var tolerance = 0;
 
-					if (this.opts.toolbarFixedTarget === document)
+					if (start !== false)
 					{
-						boxTop = this.$box.offset().top;
+						tolerance = (this.opts.toolbarFixedTarget === document) ? 20 : 0;
 					}
 
-					if ((scrollTop + this.opts.toolbarFixedTopOffset) > boxTop)
+					var scrollTop = $(this.opts.toolbarFixedTarget).scrollTop();
+					var boxTop = this.toolbar.getBoxTop();
+
+                    if (scrollTop === boxTop)
+                    {
+                        return;
+                    }
+
+					if ((scrollTop + this.opts.toolbarFixedTopOffset + tolerance) > boxTop)
 					{
 						this.toolbar.observeScrollEnable(scrollTop, boxTop);
 					}
@@ -8769,18 +10412,44 @@
 						this.toolbar.observeScrollDisable();
 					}
 				},
+				observeScrollResize: function()
+				{
+					this.$toolbar.css({
+
+						width: this.core.box().innerWidth(),
+						left: this.core.box().offset().left
+
+					});
+				},
 				observeScrollEnable: function(scrollTop, boxTop)
 				{
-					var top = this.opts.toolbarFixedTopOffset + scrollTop - boxTop;
-					var left = 0;
-					var end = boxTop + this.$box.height() - 32;
-					var width = this.$box.innerWidth();
+					if (typeof this.fullscreen !== 'undefined' && this.fullscreen.isOpened === false)
+					{
+						this.toolbar.observeScrollDisable();
+						return;
+					}
+
+					var end = boxTop + this.core.box().outerHeight() - 32;
+					var width = this.core.box().innerWidth();
+
+					var position = (this.detect.isDesktop()) ? 'fixed' : 'absolute';
+					var top = (this.detect.isDesktop()) ? this.opts.toolbarFixedTopOffset : ($(this.opts.toolbarFixedTarget).scrollTop() - boxTop + this.opts.toolbarFixedTopOffset);
+					var left = (this.detect.isDesktop()) ? this.core.box().offset().left : 0;
+
+
+					if (this.opts.toolbarFixedTarget !== document)
+					{
+						 position = 'absolute';
+						 top = this.opts.toolbarFixedTopOffset + $(this.opts.toolbarFixedTarget).scrollTop() - boxTop;
+						 left = 0;
+					}
 
 					this.$toolbar.addClass('toolbar-fixed-box');
+
 					this.$toolbar.css({
-						position: 'absolute',
+						position: position,
 						width: width,
-						top: top + 'px',
+						top: top,
 						left: left
 					});
 
@@ -8784,11 +10453,16 @@
 						left: left
 					});
 
+
 					if (scrollTop > end)
+					{
 						$('.redactor-dropdown-' + this.uuid + ':visible').hide();
+					}
 
 					this.toolbar.setDropdownsFixed();
+
 					this.$toolbar.css('visibility', (scrollTop < end) ? 'visible' : 'hidden');
+					$(window).on('resize.redactor-toolbar.' + this.uuid, $.proxy(this.toolbar.observeScrollResize, this));
 				},
 				observeScrollDisable: function()
 				{
@@ -8802,32 +10476,33 @@
 
 					this.toolbar.unsetDropdownsFixed();
 					this.$toolbar.removeClass('toolbar-fixed-box');
+					$(window).off('resize.redactor-toolbar.' + this.uuid);
 				},
 				setDropdownsFixed: function()
 				{
-					var top = this.$toolbar.innerHeight() + this.opts.toolbarFixedTopOffset;
-					var position = 'fixed';
-					if (this.opts.toolbarFixedTarget !== document)
-					{
-						top = (this.$toolbar.innerHeight() + this.$toolbar.offset().top) + this.opts.toolbarFixedTopOffset;
-						position = 'absolute';
-					}
-
-					$('.redactor-dropdown-' + this.uuid).each(function()
-					{
-						$(this).css({ position: position, top: top + 'px' });
-					});
+					var position = (this.opts.toolbarFixedTarget === document && this.detect.isDesktop()) ? 'fixed' : 'absolute';
+					this.toolbar.setDropdownPosition(position);
 				},
 				unsetDropdownsFixed: function()
 				{
-					var top = (this.$toolbar.innerHeight() + this.$toolbar.offset().top);
+					this.toolbar.setDropdownPosition('absolute');
+				},
+				setDropdownPosition: function(position)
+				{
+					var self = this;
 					$('.redactor-dropdown-' + this.uuid).each(function()
 					{
-						$(this).css({ position: 'absolute', top: top + 'px' });
+						var $el = $(this);
+						var $button = self.button.get($el.attr('rel'));
+						var top = (position === 'fixed') ? self.opts.toolbarFixedTopOffset : $button.offset().top;
+
+						$el.css({ position: position, top: ($button.innerHeight() + top) + 'px' });
 					});
 				}
 			};
 		},
+
+		// =upload
 		upload: function()
 		{
 			return {
@@ -8839,8 +10514,8 @@
 					this.upload.$el = $(id);
 					this.upload.$droparea = $('<div id="redactor-droparea" />');
 
-					this.upload.$placeholdler = $('<div id="redactor-droparea-placeholder" />').text(this.lang.get('upload_label'));
-					this.upload.$input = $('<input type="file" name="file" />');
+					this.upload.$placeholdler = $('<div id="redactor-droparea-placeholder" />').text(this.lang.get('upload-label'));
+					this.upload.$input = $('<input type="file" name="file" multiple />');
 
 					this.upload.$placeholdler.append(this.upload.$input);
 					this.upload.$droparea.append(this.upload.$placeholdler);
@@ -8855,8 +10530,14 @@
 					// change
 					this.upload.$input.on('change.redactor.upload', $.proxy(function(e)
 					{
-						e = e.originalEvent || e;
-						this.upload.traverseFile(this.upload.$input[0].files[0], e);
+                        e = e.originalEvent || e;
+                        var len = this.upload.$input[0].files.length;
+
+                        for (var i = 0; i < len; i++)
+                        {
+                            var index = (len - 1) - i;
+                            this.upload.traverseFile(this.upload.$input[0].files[index], e);
+                        }
 					}, this));
 
 					// drop
@@ -8879,14 +10560,25 @@
 					e = e.originalEvent || e;
 					var files = e.dataTransfer.files;
 
-					this.upload.traverseFile(files[0], e);
+					if (this.opts.multipleImageUpload)
+					{
+						var len = files.length;
+						for (var i = 0; i < len; i++)
+						{
+							this.upload.traverseFile(files[i], e);
+						}
+					}
+					else
+					{
+						this.upload.traverseFile(files[0], e);
+					}
 				},
 				traverseFile: function(file, e)
 				{
 					if (this.opts.s3)
 					{
 						this.upload.setConfig(file);
-						this.upload.s3uploadFile(file);
+						this.uploads3.send(file, e);
 						return;
 					}
 
@@ -8895,13 +10587,16 @@
 					{
 						this.upload.setConfig(file);
 
-						var name = (this.upload.type == 'image') ? this.opts.imageUploadParam : this.opts.fileUploadParam;
+						var name = (this.upload.type === 'image') ? this.opts.imageUploadParam : this.opts.fileUploadParam;
 						formData.append(name, file);
 					}
 
 					this.progress.show();
-					this.core.setCallback('uploadStart', e, formData);
-					this.upload.sendData(formData, e);
+					var stop = this.core.callback('uploadStart', e, formData);
+					if (stop !== false)
+					{
+				    	this.upload.send(formData, e);
+					}
 				},
 				setConfig: function(file)
 				{
@@ -8909,25 +10604,33 @@
 
 					if (this.upload.direct)
 					{
-						this.upload.url = (this.upload.type == 'image') ? this.opts.imageUpload : this.opts.fileUpload;
-						this.upload.callback = (this.upload.type == 'image') ? this.image.insert : this.file.insert;
+						this.upload.url = (this.upload.type === 'image') ? this.opts.imageUpload : this.opts.fileUpload;
+						this.upload.callback = (this.upload.type === 'image') ? this.image.insert : this.file.insert;
 					}
 				},
 				getType: function(file)
 				{
-					this.upload.type = 'image';
-					if (this.opts.imageTypes.indexOf(file.type) == -1)
+					this.upload.type = (this.opts.imageTypes.indexOf(file.type) === -1) ? 'file' : 'image';
+
+					if (this.opts.imageUpload === null && this.opts.fileUpload !== null)
 					{
 						this.upload.type = 'file';
 					}
 				},
 				getHiddenFields: function(obj, fd)
 				{
-					if (obj === false || typeof obj !== 'object') return fd;
+					if (obj === false || typeof obj !== 'object')
+					{
+						return fd;
+					}
 
 					$.each(obj, $.proxy(function(k, v)
 					{
-						if (v !== null && v.toString().indexOf('#') === 0) v = $(v).val();
+						if (v !== null && v.toString().indexOf('#') === 0)
+						{
+							v = $(v).val();
+						}
+
 						fd.append(k, v);
 
 					}, this));
@@ -8935,17 +10638,19 @@
 					return fd;
 
 				},
-				sendData: function(formData, e)
+				send: function(formData, e)
 				{
 					// append hidden fields
-					if (this.upload.type == 'image')
+					if (this.upload.type === 'image')
 					{
-						formData = this.upload.getHiddenFields(this.opts.uploadImageFields, formData);
+						formData = this.utils.appendFields(this.opts.imageUploadFields, formData);
+						formData = this.utils.appendForms(this.opts.imageUploadForms, formData);
 						formData = this.upload.getHiddenFields(this.upload.imageFields, formData);
 					}
 					else
 					{
-						formData = this.upload.getHiddenFields(this.opts.uploadFileFields, formData);
+						formData = this.utils.appendFields(this.opts.fileUploadFields, formData);
+						formData = this.utils.appendForms(this.opts.fileUploadForms, formData);
 						formData = this.upload.getHiddenFields(this.upload.fileFields, formData);
 					}
 
@@ -8956,7 +10661,7 @@
 					// complete
 					xhr.onreadystatechange = $.proxy(function()
 					{
-					    if (xhr.readyState == 4)
+					    if (xhr.readyState === 4)
 					    {
 					        var data = xhr.responseText;
 
@@ -8966,13 +10671,11 @@
 							var json;
 							try
 							{
-								json = (typeof data === 'string' ? $.parseJSON(data) : data);
+								json = (typeof data === 'string' ? JSON.parse(data) : data);
 							}
 							catch(err)
 							{
-								json = {
-									error: true
-								};
+								json = { error: true };
 							}
 
 
@@ -8987,21 +10690,12 @@
 					    }
 					}, this);
 
-
-					/*
-					xhr.upload.onprogress = $.proxy(function(e)
-					{
-						if (e.lengthComputable)
-						{
-							var complete = (e.loaded / e.total * 100 | 0);
-							//progress.value = progress.innerHTML = complete;
-						}
-
-					}, this);
-					*/
-
-
-					xhr.send(formData);
+                    // before send
+                    var stop = this.core.callback('uploadBeforeSend', xhr);
+                    if (stop !== false)
+                    {
+                        xhr.send(formData);
+					}
 				},
 				onDrag: function(e)
 				{
@@ -9036,51 +10730,54 @@
 				removeFileFields: function(name)
 				{
 					delete this.upload.fileFields[name];
-				},
-
+				}
+			};
+		},
 
-				// S3
-				s3uploadFile: function(file)
+		// =s3
+		uploads3: function()
+		{
+			return {
+				send: function(file, e)
 				{
-					this.upload.s3executeOnSignedUrl(file, $.proxy(function(signedURL)
+					this.uploads3.executeOnSignedUrl(file, $.proxy(function(signedURL)
 					{
-						this.upload.s3uploadToS3(file, signedURL);
+						this.uploads3.sendToS3(file, signedURL, e);
 					}, this));
 				},
-				s3executeOnSignedUrl: function(file, callback)
+				executeOnSignedUrl: function(file, callback)
 				{
 					var xhr = new XMLHttpRequest();
-					var mark = (this.opts.s3.search(/\?/) !== '-1') ? '?' : '&';
+					var mark = (this.opts.s3.search(/\?/) === -1) ? '?' : '&';
 
 					xhr.open('GET', this.opts.s3 + mark + 'name=' + file.name + '&type=' + file.type, true);
 
-					// Hack to pass bytes through unprocessed.
-					if (xhr.overrideMimeType) xhr.overrideMimeType('text/plain; charset=x-user-defined');
+					// hack to pass bytes through unprocessed.
+					if (xhr.overrideMimeType)
+					{
+						xhr.overrideMimeType('text/plain; charset=x-user-defined');
+					}
 
 					var that = this;
 					xhr.onreadystatechange = function(e)
 					{
-						if (this.readyState == 4 && this.status == 200)
+						if (this.readyState === 4 && this.status === 200)
 						{
 							that.progress.show();
 							callback(decodeURIComponent(this.responseText));
 						}
-						else if (this.readyState == 4 && this.status != 200)
-						{
-							//setProgress(0, 'Could not contact signing script. Status = ' + this.status);
-						}
 					};
 
 					xhr.send();
 				},
-				s3createCORSRequest: function(method, url)
+				createCORSRequest: function(method, url)
 				{
 					var xhr = new XMLHttpRequest();
 					if ("withCredentials" in xhr)
 					{
 						xhr.open(method, url, true);
 					}
-					else if (typeof XDomainRequest != "undefined")
+					else if (typeof XDomainRequest !== "undefined")
 					{
 						xhr = new XDomainRequest();
 						xhr.open(method, url);
@@ -9092,83 +10789,74 @@
 
 					return xhr;
 				},
-				s3uploadToS3: function(file, url)
-				{
-					var xhr = this.upload.s3createCORSRequest('PUT', url);
-					if (!xhr)
-					{
-						//setProgress(0, 'CORS not supported');
-					}
-					else
-					{
-						xhr.onload = $.proxy(function()
-						{
-							if (xhr.status == 200)
-							{
-								//setProgress(100, 'Upload completed.');
-
-								this.progress.hide();
-
-								var s3file = url.split('?');
-
-								if (!s3file[0])
-								{
-									 // url parsing is fail
-									 return false;
-								}
-
-
-								if (!this.upload.direct)
-								{
-									this.upload.$droparea.removeClass('drag-drop');
-								}
-
-								var json = { filelink: s3file[0] };
-								if (this.upload.type == 'file')
-								{
-									var arr = s3file[0].split('/');
-									json.filename = arr[arr.length-1];
-								}
-
-								this.upload.callback(json, this.upload.direct, false);
-
-
-							}
-							else
-							{
-								//setProgress(0, 'Upload error: ' + xhr.status);
-							}
-						}, this);
 
-						xhr.onerror = function() {};
+                sendToS3: function(file, url, e)
+                {
+                    var xhr = this.uploads3.createCORSRequest('PUT', url);
+                    if (!xhr)
+                    {
+                        return;
+                    }
+
+                    xhr.onload = $.proxy(function()
+                    {
+                        var json;
+                        this.progress.hide();
+
+                        if (xhr.status !== 200)
+                        {
+                            // error
+                            json = { error: true };
+                            this.upload.callback(json, this.upload.direct, xhr);
+
+                            return;
+                        }
+
+                        var s3file = url.split('?');
+                        if (!s3file[0])
+                        {
+                            // url parsing is fail
+                            return false;
+                        }
+
+
+                        if (!this.upload.direct)
+                        {
+                            this.upload.$droparea.removeClass('drag-drop');
+                        }
+
+                        json = { url: s3file[0], id: s3file[0], s3: true };
+                        if (this.upload.type === 'file')
+                        {
+                            var arr = s3file[0].split('/');
+                            json.name = arr[arr.length-1];
+                        }
+
+                        this.upload.callback(json, this.upload.direct, e);
+
+
+                    }, this);
+
+                    xhr.onerror = function() {};
+                    xhr.upload.onprogress = function(e) {};
 
-						xhr.upload.onprogress = function(e) {};
+                    xhr.setRequestHeader('Content-Type', file.type);
+                    xhr.setRequestHeader('x-amz-acl', 'public-read');
 
-						xhr.setRequestHeader('Content-Type', file.type);
-						xhr.setRequestHeader('x-amz-acl', 'public-read');
+                    xhr.send(file);
 
-						xhr.send(file);
-					}
-				}
+                }
 			};
 		},
+
+		// =utils
 		utils: function()
 		{
 			return {
-				isMobile: function()
-				{
-					return /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);
-				},
-				isDesktop: function()
-				{
-					return !/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent);
-				},
-				isString: function(obj)
-				{
-					return Object.prototype.toString.call(obj) == '[object String]';
-				},
-				isEmpty: function(html, removeEmptyTags)
+				isEmpty: function(html)
 				{
+					html = (typeof html === 'undefined') ? this.core.editor().html() : html;
+
 					html = html.replace(/[\u200B-\u200D\uFEFF]/g, '');
 					html = html.replace(/&nbsp;/gi, '');
 					html = html.replace(/<\/?br\s?\/?>/g, '');
@@ -9178,231 +10866,185 @@
 					html = html.replace(/<source(.*?[^>])>$/i, 'source');
 
 					// remove empty tags
-					if (removeEmptyTags !== false)
-					{
-						html = html.replace(/<[^\/>][^>]*><\/[^>]+>/gi, '');
-						html = html.replace(/<[^\/>][^>]*><\/[^>]+>/gi, '');
-					}
+					html = html.replace(/<[^\/>][^>]*><\/[^>]+>/gi, '');
+					html = html.replace(/<[^\/>][^>]*><\/[^>]+>/gi, '');
 
 					html = $.trim(html);
 
 					return html === '';
 				},
-				normalize: function(str)
-				{
-					if (typeof(str) === 'undefined') return 0;
-					return parseInt(str.replace('px',''), 10);
-				},
-				hexToRgb: function(hex)
+				isElement: function(obj)
 				{
-					if (typeof hex == 'undefined') return;
-					if (hex.search(/^#/) == -1) return hex;
-
-					var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
-					hex = hex.replace(shorthandRegex, function(m, r, g, b)
+					try {
+						// Using W3 DOM2 (works for FF, Opera and Chrome)
+						return obj instanceof HTMLElement;
+					}
+					catch(e)
 					{
-						return r + r + g + g + b + b;
-					});
-
-					var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
-					return 'rgb(' + parseInt(result[1], 16) + ', ' + parseInt(result[2], 16) + ', ' + parseInt(result[3], 16) + ')';
+						return (typeof obj === "object") && (obj.nodeType === 1) && (typeof obj.style === "object") && (typeof obj.ownerDocument === "object");
+					}
 				},
-				getOuterHtml: function(el)
+				strpos: function(haystack, needle, offset)
 				{
-					return $('<div>').append($(el).eq(0).clone()).html();
+					var i = haystack.indexOf(needle, offset);
+					return i >= 0 ? i : false;
 				},
-				getAlignmentElement: function(el)
+				dataURItoBlob: function(dataURI)
 				{
-					if ($.inArray(el.tagName, this.opts.alignmentTags) !== -1)
+					var byteString;
+					if (dataURI.split(',')[0].indexOf('base64') >= 0)
 					{
-						return $(el);
+						byteString = atob(dataURI.split(',')[1]);
 					}
 					else
 					{
-						return $(el).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
-					}
-				},
-				removeEmptyAttr: function(el, attr)
-				{
-					var $el = $(el);
-					if (typeof $el.attr(attr) == 'undefined')
-					{
-						return true;
-					}
-
-					if ($el.attr(attr) === '')
-					{
-						$el.removeAttr(attr);
-						return true;
+						byteString = unescape(dataURI.split(',')[1]);
 					}
 
-					return false;
-				},
-				removeEmpty: function(i, s)
-				{
-					var $s = $($.parseHTML(s));
-
-					$s.find('.redactor-invisible-space').removeAttr('style').removeAttr('class');
+					var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
 
-					if ($s.find('hr, br, img, iframe, source').length !== 0) return;
-					var text = $.trim($s.text());
-
-					if (this.utils.isEmpty(text, false))
+					var ia = new Uint8Array(byteString.length);
+					for (var i = 0; i < byteString.length; i++)
 					{
-						$s.remove();
+						ia[i] = byteString.charCodeAt(i);
 					}
-				},
-
-				// save and restore scroll
-				saveScroll: function()
-				{
-					this.saveEditorScroll = this.$editor.scrollTop();
-					this.saveBodyScroll = $(window).scrollTop();
-
-					if (this.opts.scrollTarget) this.saveTargetScroll = $(this.opts.scrollTarget).scrollTop();
-				},
-				restoreScroll: function()
-				{
-					if (typeof this.saveScroll === 'undefined' && typeof this.saveBodyScroll === 'undefined') return;
-
-					$(window).scrollTop(this.saveBodyScroll);
-					this.$editor.scrollTop(this.saveEditorScroll);
 
-					if (this.opts.scrollTarget) $(this.opts.scrollTarget).scrollTop(this.saveTargetScroll);
+					return new Blob([ia], { type:mimeString });
 				},
-
-				// get invisible space element
-				createSpaceElement: function()
+				getOuterHtml: function(el)
 				{
-					var space = document.createElement('span');
-					space.className = 'redactor-invisible-space';
-					space.innerHTML = this.opts.invisibleSpace;
-
-					return space;
+					return $('<div>').append($(el).eq(0).clone()).html();
 				},
-
-				// replace
-				removeInlineTags: function(node)
+				cloneAttributes: function(from, to)
 				{
-					var tags = this.opts.inlineTags;
-					tags.push('span');
+					from = from[0] || from;
+					to = $(to);
 
-					if (node.tagName == 'PRE') tags.push('a');
+					var attrs = from.attributes;
+					var len = attrs.length;
+					while (len--)
+					{
+					    var attr = attrs[len];
+					    to.attr(attr.name, attr.value);
+					}
 
-					$(node).find(tags.join(',')).not('span.redactor-selection-marker').contents().unwrap();
+					return to;
 				},
-				replaceWithContents: function(node, removeInlineTags)
+				breakBlockTag: function()
 				{
-					var self = this;
-					$(node).replaceWith(function()
+					var block = this.selection.block();
+					if (!block)
 					{
-						if (removeInlineTags === true) self.utils.removeInlineTags(this);
+    					return false;
+					}
 
-						return $(this).contents();
-					});
+					var isEmpty = this.utils.isEmpty(block.innerHTML);
 
-					return $(node);
-				},
-				replaceToTag: function(node, tag, removeInlineTags)
-				{
-					var replacement;
-					var self = this;
-					$(node).replaceWith(function()
+					var tag = block.tagName.toLowerCase();
+					if (tag === 'pre' || tag === 'li' || tag === 'td' || tag === 'th')
 					{
-						replacement = $('<' + tag + ' />').append($(this).contents());
+						return false;
+					}
 
-						for (var i = 0; i < this.attributes.length; i++)
-						{
-							replacement.attr(this.attributes[i].name, this.attributes[i].value);
-						}
 
-						if (removeInlineTags === true) self.utils.removeInlineTags(replacement);
+					if (!isEmpty && this.utils.isStartOfElement(block))
+					{
+						return { $block: $(block), $next: $(block).next(), type: 'start' };
+					}
+					else if (!isEmpty && this.utils.isEndOfElement(block))
+					{
+						return { $block: $(block), $next: $(block).next(), type: 'end' };
+					}
+					else
+					{
+						var endOfNode = this.selection.extractEndOfNode(block);
+						var $nextPart = $('<' + tag + ' />').append(endOfNode);
 
-						return replacement;
-					});
+						$nextPart = this.utils.cloneAttributes(block, $nextPart);
+						$(block).after($nextPart);
 
-					return replacement;
+						return { $block: $(block), $next: $nextPart, type: 'break' };
+					}
 				},
-
-				// start and end of element
-				isStartOfElement: function()
+				// tag detection
+				inBlocks: function(tags)
 				{
-					var block = this.selection.getBlock();
-					if (!block) return false;
+					tags = ($.isArray(tags)) ? tags : [tags];
 
-					var offset = this.caret.getOffsetOfElement(block);
-
-					return (offset === 0) ? true : false;
-				},
-				isEndOfElement: function(element)
-				{
-					if (typeof element == 'undefined')
+					var blocks = this.selection.blocks();
+					var len = blocks.length;
+					var contains = false;
+					for (var i = 0; i < len; i++)
 					{
-						var element = this.selection.getBlock();
-						if (!element) return false;
-					}
+						if (blocks[i] !== false)
+						{
+							var tag = blocks[i].tagName.toLowerCase();
 
-					var offset = this.caret.getOffsetOfElement(element);
-					var text = $.trim($(element).text()).replace(/\n\r\n/g, '');
+							if ($.inArray(tag, tags) !== -1)
+							{
+								contains = true;
+							}
+						}
+					}
 
-					return (offset == text.length) ? true : false;
-				},
-				isStartOfEditor: function()
-				{
-					var offset = this.caret.getOffsetOfElement(this.$editor[0]);
+					return contains;
 
-					return (offset === 0) ? true : false;
 				},
-				isEndOfEditor: function()
+				inInlines: function(tags)
 				{
-					var block = this.$editor[0];
-
-					var offset = this.caret.getOffsetOfElement(block);
-					var text = $.trim($(block).html().replace(/(<([^>]+)>)/gi,''));
+					tags = ($.isArray(tags)) ? tags : [tags];
 
-					return (offset == text.length) ? true : false;
-				},
+					var inlines = this.selection.inlines();
+					var len = inlines.length;
+					var contains = false;
+					for (var i = 0; i < len; i++)
+					{
+						var tag = inlines[i].tagName.toLowerCase();
 
-				// test blocks
-				isBlock: function(block)
-				{
-					block = block[0] || block;
+						if ($.inArray(tag, tags) !== -1)
+						{
+							contains = true;
+						}
+					}
 
-					return block && this.utils.isBlockTag(block.tagName);
-				},
-				isBlockTag: function(tag)
-				{
-					if (typeof tag == 'undefined') return false;
+					return contains;
 
-					return this.reIsBlock.test(tag);
 				},
-
-				// tag detection
 				isTag: function(current, tag)
 				{
-					var element = $(current).closest(tag, this.$editor[0]);
-					if (element.length == 1)
+					var element = $(current).closest(tag, this.core.editor()[0]);
+					if (element.length === 1)
 					{
 						return element[0];
 					}
 
 					return false;
 				},
+				isBlock: function(block)
+				{
+					if (block === null)
+					{
+						return false;
+					}
 
-				// select all
-				isSelectAll: function()
+					block = block[0] || block;
+
+					return block && this.utils.isBlockTag(block.tagName);
+				},
+				isBlockTag: function(tag)
 				{
-					return this.selectAll;
+					return (typeof tag === 'undefined') ? false : this.reIsBlock.test(tag);
 				},
-				enableSelectAll: function()
+				isInline: function(inline)
 				{
-					this.selectAll = true;
+					inline = inline[0] || inline;
+
+					return inline && this.utils.isInlineTag(inline.tagName);
 				},
-				disableSelectAll: function()
+				isInlineTag: function(tag)
 				{
-					this.selectAll = false;
+					return (typeof tag === 'undefined') ? false : this.reIsInline.test(tag);
 				},
-
 				// parents detection
 				isRedactorParent: function(el)
 				{
@@ -9411,7 +11053,7 @@
 						return false;
 					}
 
-					if ($(el).parents('.redactor-editor').length === 0 || $(el).hasClass('redactor-editor'))
+					if ($(el).parents('.redactor-in').length === 0 || $(el).hasClass('redactor-in'))
 					{
 						return false;
 					}
@@ -9424,8 +11066,8 @@
 				},
 				isCurrentOrParent: function(tagName)
 				{
-					var parent = this.selection.getParent();
-					var current = this.selection.getCurrent();
+					var parent = this.selection.parent();
+					var current = this.selection.current();
 
 					if ($.isArray(tagName))
 					{
@@ -9451,50 +11093,128 @@
 
 					return parent && parent.tagName === tagName ? parent : current && current.tagName === tagName ? current : false;
 				},
+				isEditorRelative: function()
+				{
+					var position = this.core.editor().css('position');
+					var arr = ['absolute', 'fixed', 'relative'];
 
+					return ($.inArray(arr, position) !== -1);
+				},
+				setEditorRelative: function()
+				{
+					this.core.editor().addClass('redactor-relative');
+				},
+				// scroll
+				getScrollTarget: function()
+				{
+    				var $scrollTarget = $(this.opts.scrollTarget);
 
-				// browsers detection
-				isOldIe: function()
+    				return ($scrollTarget.length !== 0) ? $scrollTarget : $(document);
+				},
+				freezeScroll: function()
 				{
-					return (this.utils.browser('msie') && parseInt(this.utils.browser('version'), 10) < 9) ? true : false;
+					this.freezeScrollTop = this.utils.getScrollTarget().scrollTop();
+					this.utils.getScrollTarget().scrollTop(this.freezeScrollTop);
 				},
-				isLessIe10: function()
+				unfreezeScroll: function()
 				{
-					return (this.utils.browser('msie') && parseInt(this.utils.browser('version'), 10) < 10) ? true : false;
+					if (typeof this.freezeScrollTop === 'undefined')
+					{
+						return;
+					}
+
+					this.utils.getScrollTarget().scrollTop(this.freezeScrollTop);
 				},
-				isIe11: function()
+				saveScroll: function()
 				{
-					return !!navigator.userAgent.match(/Trident\/7\./);
+					this.tmpScrollTop = this.utils.getScrollTarget().scrollTop();
 				},
-				browser: function(browser)
+				restoreScroll: function()
 				{
-					var ua = navigator.userAgent.toLowerCase();
-					var match = /(opr)[\/]([\w.]+)/.exec( ua ) ||
-		            /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
-		            /(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua) ||
-		            /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
-		            /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
-		            /(msie) ([\w.]+)/.exec( ua ) ||
-		            ua.indexOf("trident") >= 0 && /(rv)(?::| )([\w.]+)/.exec( ua ) ||
-		            ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
-		            [];
+					if (typeof this.tmpScrollTop === 'undefined')
+					{
+						return;
+					}
 
-					if (browser == 'safari') return (typeof match[3] != 'undefined') ? match[3] == 'safari' : false;
-					if (browser == 'version') return match[2];
-					if (browser == 'webkit') return (match[1] == 'chrome' || match[1] == 'opr' || match[1] == 'webkit');
-					if (match[1] == 'rv') return browser == 'msie';
-					if (match[1] == 'opr') return browser == 'webkit';
+					this.utils.getScrollTarget().scrollTop(this.tmpScrollTop);
+				},
+				isStartOfElement: function(element)
+				{
+					if (typeof element === 'undefined')
+					{
+						element = this.selection.block();
+						if (!element)
+						{
+							return false;
+						}
+					}
 
-					return browser == match[1];
+					return (this.offset.get(element) === 0) ? true : false;
 				},
-				strpos: function(haystack, needle, offset)
+				isEndOfElement: function(element)
 				{
-					var i = haystack.indexOf(needle, offset);
-					return i >= 0 ? i : false;
+					if (typeof element === 'undefined')
+					{
+						element = this.selection.block();
+						if (!element)
+						{
+							return false;
+						}
+					}
+
+					var text = $.trim($(element).text()).replace(/[\t\n\r\n]/g, '').replace(/\u200B/g, '');
+					var offset = this.offset.get(element);
+
+					return (offset === text.length) ? true : false;
 				},
-				disableBodyScroll: function()
+				removeEmptyAttr: function(el, attr)
+				{
+					var $el = $(el);
+					if (typeof $el.attr(attr) === 'undefined')
+					{
+						return true;
+					}
+
+					if ($el.attr(attr) === '')
+					{
+						$el.removeAttr(attr);
+						return true;
+					}
+
+					return false;
+				},
+				replaceToTag: function(node, tag)
 				{
+					var replacement;
+					$(node).replaceWith(function()
+					{
+						replacement = $('<' + tag + ' />').append($(this).contents());
+
+						for (var i = 0; i < this.attributes.length; i++)
+						{
+							replacement.attr(this.attributes[i].name, this.attributes[i].value);
+						}
+
+						return replacement;
+					});
 
+					return replacement;
+				},
+				// select all
+				isSelectAll: function()
+				{
+					return this.selectAll;
+				},
+				enableSelectAll: function()
+				{
+					this.selectAll = true;
+				},
+				disableSelectAll: function()
+				{
+					this.selectAll = false;
+				},
+				disableBodyScroll: function()
+				{
 					var $body = $('html');
 					var windowWidth = window.innerWidth;
 					if (!windowWidth)
@@ -9507,9 +11227,10 @@
 					var scrollbarWidth = this.utils.measureScrollbar();
 
 					$body.css('overflow', 'hidden');
-					if (isOverflowing) $body.css('padding-right', scrollbarWidth);
-
-
+					if (isOverflowing)
+					{
+						$body.css('padding-right', scrollbarWidth);
+					}
 				},
 				measureScrollbar: function()
 				{
@@ -9526,6 +11247,119 @@
 				{
 					$('html').css({ 'overflow': '', 'padding-right': '' });
 					$('body').remove('redactor-scrollbar-measure');
+				},
+				appendFields: function(appendFields, data)
+				{
+					if (!appendFields)
+					{
+						return data;
+					}
+					else if (typeof appendFields === 'object')
+					{
+    					$.each(appendFields, function(k, v)
+    					{
+    						if (v !== null && v.toString().indexOf('#') === 0)
+    						{
+        						v = $(v).val();
+                            }
+
+    						data.append(k, v);
+
+    					});
+
+    					return data;
+					}
+
+					var $fields = $(appendFields);
+					if ($fields.length === 0)
+					{
+						return data;
+					}
+					else
+					{
+						var str = '';
+						$fields.each(function()
+						{
+							data.append($(this).attr('name'), $(this).val());
+						});
+
+						return data;
+					}
+				},
+				appendForms: function(appendForms, data)
+				{
+					if (!appendForms)
+					{
+						return data;
+					}
+
+					var $forms = $(appendForms);
+					if ($forms.length === 0)
+					{
+						return data;
+					}
+					else
+					{
+						var formData = $forms.serializeArray();
+
+						$.each(formData, function(z,f)
+						{
+							data.append(f.name, f.value);
+						});
+
+						return data;
+					}
+				},
+				isRgb: function(str)
+				{
+                    return (str.search(/^rgb/i) === 0);
+				},
+				rgb2hex: function(rgb)
+				{
+                    rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
+
+                    return (rgb && rgb.length === 4) ? "#" +
+                    ("0" + parseInt(rgb[1],10).toString(16)).slice(-2) +
+                    ("0" + parseInt(rgb[2],10).toString(16)).slice(-2) +
+                    ("0" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';
+                },
+
+				// #backward
+				isCollapsed: function()
+				{
+					return this.selection.isCollapsed();
+				},
+				isMobile: function()
+				{
+					return this.detect.isMobile();
+				},
+				isDesktop: function()
+				{
+					return this.detect.isDesktop();
+				},
+				isPad: function()
+				{
+					return this.detect.isIpad();
+				}
+
+			};
+		},
+
+		// #backward
+		browser: function()
+		{
+			return {
+				webkit: function()
+				{
+					return this.detect.isWebkit();
+				},
+				ff: function()
+				{
+					return this.detect.isFirefox();
+				},
+				ie: function()
+				{
+					return this.detect.isIe();
 				}
 			};
 		}
@@ -9539,4 +11373,165 @@
 	// constructor
 	Redactor.prototype.init.prototype = Redactor.prototype;
 
+})(jQuery);
+
+(function($)
+{
+	$.fn.redactorAnimation = function(animation, options, callback)
+	{
+		return this.each(function()
+		{
+			new redactorAnimation(this, animation, options, callback);
+		});
+	};
+
+	function redactorAnimation(element, animation, options, callback)
+	{
+		// default
+		var opts = {
+			duration: 0.5,
+			iterate: 1,
+			delay: 0,
+			prefix: 'redactor-',
+			timing: 'linear'
+		};
+
+		this.animation = animation;
+		this.slide = (this.animation === 'slideDown' || this.animation === 'slideUp');
+		this.$element = $(element);
+		this.prefixes = ['', '-moz-', '-o-animation-', '-webkit-'];
+		this.queue = [];
+
+		// options or callback
+		if (typeof options === 'function')
+		{
+			callback = options;
+			this.opts = opts;
+		}
+		else
+		{
+			this.opts = $.extend(opts, options);
+		}
+
+		// slide
+		if (this.slide)
+		{
+			this.$element.height(this.$element.height());
+		}
+
+		// init
+		this.init(callback);
+
+	}
+
+	redactorAnimation.prototype = {
+
+		init: function(callback)
+		{
+			this.queue.push(this.animation);
+
+			this.clean();
+
+			if (this.animation === 'show')
+			{
+				this.opts.timing = 'linear';
+				this.$element.removeClass('hide').show();
+
+				if (typeof callback === 'function')
+				{
+					callback(this);
+				}
+			}
+			else if (this.animation === 'hide')
+			{
+				this.opts.timing = 'linear';
+				this.$element.hide();
+
+				if (typeof callback === 'function')
+				{
+					callback(this);
+				}
+			}
+			else
+			{
+				this.animate(callback);
+			}
+
+		},
+		animate: function(callback)
+		{
+			this.$element.addClass('redactor-animated').css('display', '').removeClass('hide');
+			this.$element.addClass(this.opts.prefix + this.queue[0]);
+
+			this.set(this.opts.duration + 's', this.opts.delay + 's', this.opts.iterate, this.opts.timing);
+
+			var _callback = (this.queue.length > 1) ? null : callback;
+			this.complete('AnimationEnd', $.proxy(function()
+			{
+				if (this.$element.hasClass(this.opts.prefix + this.queue[0]))
+				{
+					this.clean();
+					this.queue.shift();
+
+					if (this.queue.length)
+					{
+						this.animate(callback);
+					}
+				}
+
+			}, this), _callback);
+		},
+		set: function(duration, delay, iterate, timing)
+		{
+			var len = this.prefixes.length;
+
+			while (len--)
+			{
+				this.$element.css(this.prefixes[len] + 'animation-duration', duration);
+				this.$element.css(this.prefixes[len] + 'animation-delay', delay);
+				this.$element.css(this.prefixes[len] + 'animation-iteration-count', iterate);
+				this.$element.css(this.prefixes[len] + 'animation-timing-function', timing);
+			}
+
+		},
+		clean: function()
+		{
+			this.$element.removeClass('redactor-animated');
+			this.$element.removeClass(this.opts.prefix + this.queue[0]);
+
+			this.set('', '', '', '');
+
+		},
+		complete: function(type, make, callback)
+		{
+			this.$element.one(type.toLowerCase() + ' webkit' + type + ' o' + type + ' MS' + type, $.proxy(function()
+			{
+				if (typeof make === 'function')
+				{
+					make();
+				}
+
+				if (typeof callback === 'function')
+				{
+					callback(this);
+				}
+
+				// hide
+				var effects = ['fadeOut', 'slideUp', 'zoomOut', 'slideOutUp', 'slideOutRight', 'slideOutLeft'];
+				if ($.inArray(this.animation, effects) !== -1)
+				{
+					this.$element.css('display', 'none');
+				}
+
+				// slide
+				if (this.slide)
+				{
+					this.$element.css('height', '');
+				}
+
+			}, this));
+
+		}
+	};
+
 })(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.less elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.less
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.less	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.less	1969-12-31 18:00:00.000000000 -0600
@@ -1,1006 +0,0 @@
-.clearfix() {
-	&:after {
-		content: "";
-		display: table;
-		clear: both;
-	}
-}
-.transition-redactor(@transition: all linear .2s) {
-	-moz-transition: @transition;
-	transition: @transition;
-}
-
-.opacity-redactor(@opacity: 100) {
-	filter: e(%("alpha(opacity=%d)", @opacity));
-	-moz-opacity: @opacity / 100;
-	opacity: @opacity / 100;
-}
-.box-sizing-redactor(@box-model) {
-	-webkit-box-sizing: @box-model;
-	-moz-box-sizing: @box-model;
-	box-sizing: @box-model;
-}
-.striped-redactor(@color: rgba(255, 255, 255, .2); @angle: 45deg) {
-	background-image: -webkit-linear-gradient(@angle, @color 25%, transparent 25%, transparent 50%, @color 50%, @color 75%, transparent 75%, transparent);
-	background-image: -o-linear-gradient(@angle, @color 25%, transparent 25%, transparent 50%, @color 50%, @color 75%, transparent 75%, transparent);
-	background-image: linear-gradient(@angle, @color 25%, transparent 25%, transparent 50%, @color 50%, @color 75%, transparent 75%, transparent);
-}
-
-.animation-redactor(@animation) {
-	-webkit-animation: @animation;
-	-o-animation: @animation;
-	animation: @animation;
-}
-
-// VARIABLES
-@redactorFontFamily: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
-@redactorCodeFontFamily: Menlo, Monaco, monospace, sans-serif !important;
-
-@redactorFontSize: 14px;
-@redactorLineHeight: 1.6em;
-
-/*
-	Icon font
-*/
-@font-face {
-	font-family: 'RedactorFont';
-	src: url(data:application/x-font-ttf;charset=utf-8;base64,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) format('truetype'),
-		 url(data:application/font-woff;charset=utf-8;base64,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) format('woff');
-	font-weight: normal;
-	font-style: normal;
-}
-
-
-/*
-	Box
-*/
-.redactor-box {
-	position: relative;
-	overflow: visible;
-	margin-bottom: 24px;
-
-	& textarea {
-		display: block;
-		position: relative;
-		margin: 0;
-		padding: 0;
-		width: 100%;
-		overflow: auto;
-		outline: none;
-		border: none;
-		background-color: #111;
-		box-shadow: none;
-		color: #ccc;
-		font-size: 13px;
-		font-family: @redactorCodeFontFamily;
-		resize: none;
-		&:focus {
-			outline: none;
-		}
-	}
-}
-.redactor-editor,
-.redactor-box {
-	background: #fff;
-}
-
-/*
-	Z-index setup
-*/
-.redactor-editor,
-.redactor-box,
-.redactor-box textarea {
-	z-index: auto;
-}
-.redactor-box-fullscreen {
-	z-index: 1051;
-}
-.redactor-toolbar {
-	z-index: 100;
-}
-.redactor-dropdown {
-	z-index: 1052;
-}
-#redactor-modal-overlay,
-#redactor-modal-box,
-#redactor-modal {
-	z-index: 1053;
-}
-
-/*
-	Fullscreen
-*/
-body .redactor-box-fullscreen {
-    position: fixed;
-    top: 0;
-    left: 0;
-    width: 100%;
-}
-
-/*
-	Utils
-*/
-.redactor-scrollbar-measure {
-	position: absolute;
-	top: -9999px;
-	width: 50px;
-	height: 50px;
-	overflow: scroll;
-}
-
-/*
-	Editor
-*/
-.redactor-editor {
-	position: relative;
-	overflow: auto;
-	margin: 0 !important;
-	padding: 20px;
-	min-height: 80px;
-	outline: none;
-	white-space: normal;
-	border: 1px solid #eee;
-	font-family: @redactorFontFamily;
-	font-size: @redactorFontSize;
-	line-height: @redactorLineHeight;
-	&:focus {
-		outline: none;
-	}
-}
-.toolbar-fixed-box + .redactor-editor {
-	padding-top: 32px !important;
-}
-
-/*
-	Placeholder
-*/
-.redactor-placeholder:after {
-	position: absolute;
-	top: 20px;
-	left: 20px;
-	content: attr(placeholder);
-	display: block; /* For Firefox */
-	color: #999 !important;
-	font-weight: normal !important;
-}
-
-
-/*
-	Toolbar
-*/
-.redactor-toolbar {
-	position: relative;
-	top: 0;
-	left: 0;
-	margin: 0 !important;
-	padding: 0 !important;
-	list-style: none !important;
-	font-size: 14px !important;
-	line-height: 1 !important;
-
-	background: #fff;
-	border: none;
-	box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
-
-	.clearfix;
-
-	&.redactor-toolbar-overflow {
-		overflow-y: auto;
-		height: 29px;
-		white-space: nowrap;
-	}
-	&.redactor-toolbar-external {
-		z-index: 999;
-		box-shadow: none;
-		border: 1px solid rgba(0, 0, 0, .1);
-	}
-	& li {
-		vertical-align: top;
-		display: inline-block;
-		margin: 0 !important;
-		padding: 0 !important;
-		outline: none;
-		list-style: none !important;
-		.box-sizing-redactor(content-box);
-	}
-	& li a {
-		display: block;
-		color: #333;
-		text-align: center;
-		padding: 9px 10px;
-		cursor: pointer;
-		outline: none;
-		border: none;
-		text-decoration: none;
-		cursor: pointer;
-		zoom: 1;
-		.box-sizing-redactor(content-box);
-	}
-	& li a {
-		&:hover {
-			outline: none;
-			background-color: rgba(31,120,216,1);
-			color: #fff;
-		}
-		&:hover i:before {
-			color: #fff;
-		}
-		&:active,
-		&.redactor-act {
-			outline: none;
-			background-color: #ccc;
-			color: #444;
-		}
-	}
-	& li a.redactor-btn-image {
-		width: 14px;
-	    height: 14px;
-	    background-position: center center;
-	    background-repeat: no-repeat;
-	}
-	& li a.fa-redactor-btn {
-		display: inline-block;
-		padding: 9px 10px 8px 10px;
-		line-height: 1;
-	}
-	& li a.redactor-button-disabled {
-		.opacity-redactor(30);
-		&:hover {
-			color: #333;
-			outline: none;
-			background-color: transparent !important;
-			cursor: default;
-		}
-	}
-	& li a.redactor-button-focus {
-		color:#fff;
-		background:#000;
-	}
-}
-
-/*
-	CodeMirror
-*/
-.redactor-box .CodeMirror {
-	display: none;
-}
-
-/*
-	Icons
-*/
-.re-icon {
-	font-family: 'RedactorFont';
-	speak: none;
-	font-style: normal;
-	font-weight: normal;
-	font-variant: normal;
-	text-transform: none;
-	line-height: 1;
-	-webkit-font-smoothing: antialiased;
-	-moz-osx-font-smoothing: grayscale;
-}
-.re-icon i:before {
-	position: relative;
-	font-size: 14px;
-}
-
-
-.re-video:before {
-	content: "\e600";
-}
-.re-unorderedlist:before {
-	content: "\e601";
-}
-.re-undo:before {
-	content: "\e602";
-}
-.re-underline:before {
-	content: "\e603";
-}
-.re-textdirection:before {
-	content: "\e604";
-}
-.re-fontcolor:before {
-	content: "\e605";
-}
-.re-table:before {
-	content: "\e606";
-}
-.re-redo:before {
-	content: "\e607";
-}
-.re-quote:before {
-	content: "\e608";
-}
-.re-outdent:before {
-	content: "\e609";
-}
-.re-orderedlist:before {
-	content: "\e60a";
-}
-.re-link:before {
-	content: "\e60b";
-}
-.re-horizontalrule:before {
-	content: "\e60c";
-}
-.re-italic:before {
-	content: "\e60d";
-}
-.re-indent:before {
-	content: "\e60e";
-}
-.re-image:before {
-	content: "\e60f";
-}
-.re-fullscreen:before {
-	content: "\e610";
-}
-.re-normalscreen:before {
-	content: "\e611";
-}
-.re-formatting:before {
-	content: "\e612";
-}
-.re-fontsize:before {
-	content: "\e613";
-}
-.re-fontfamily:before {
-	content: "\e614";
-}
-.re-deleted:before {
-	content: "\e615";
-}
-.re-html:before {
-	content: "\e616";
-}
-.re-clips:before {
-	content: "\e617";
-}
-.re-bold:before {
-	content: "\e618";
-}
-.re-backcolor:before {
-	content: "\e619";
-}
-.re-file:before {
-	content: "\e61a";
-}
-.re-alignright:before {
-	content: "\e61b";
-}
-.re-alignment:before,
-.re-alignleft:before {
-	content: "\e61c";
-}
-.re-alignjustify:before {
-	content: "\e61d";
-}
-.re-aligncenter:before {
-	content: "\e61e";
-}
-.re-gallery:before {
-	content: "\e61f";
-}
-
-
-/*
-	Toolbar tooltip
-*/
-.redactor-toolbar-tooltip {
-	position: absolute;
-	z-index: 1054;
-	text-align: center;
-	top: 0;
-	left: 0;
-	background: #000;
-	color: #fff;
-	padding: 5px 8px;
-	line-height: 1;
-	font-family: @redactorFontFamily;
-	font-size: 12px;
-	border-radius: 2px;
-}
-
-
-/*
-	Dropdown
-*/
-.redactor-dropdown {
-	position: absolute;
-	top: 28px;
-	left: 0;
-	padding: 0;
-	min-width: 220px;
-	max-height: 254px;
-	overflow: auto;
-	background-color: #fff;
-	box-shadow: 0 1px 7px rgba(0, 0, 0, .25);
-	font-size: @redactorFontSize;
-	font-family: @redactorFontFamily;
-	line-height: @redactorLineHeight;
-	& a {
-		display: block;
-		padding: 10px 15px;
-		color: #000;
-		text-decoration: none;
-		border-bottom: 1px solid rgba(0, 0, 0, .07);
-		&:last-child {
-			border-bottom: none;
-		}
-		&:hover {
-			background-color: rgba(31, 120, 216, 1);
-			color: #fff !important;
-			text-decoration: none;
-		}
-		&.selected {
-			background-color: #000;
-			color: #fff;
-		}
-        &.redactor-dropdown-link-inactive,
-        &.redactor-dropdown-link-inactive:hover {
-            background: none;
-            cursor: default;
-            color: #000 !important;
-            .opacity-redactor(40);
-        }
-		&.redactor-dropdown-link-selected {
-			color:#fff;
-			background:#000;
-		}
-	}
-}
-
-
-/*
-	IMAGE BOX
-*/
-#redactor-image-box {
-	position: relative;
-	max-width: 100%;
-	display: inline-block;
-	line-height: 0;
-	outline: 1px dashed rgba(0, 0, 0, .6),
-}
-#redactor-image-editter {
-	position: absolute;
-	z-index: 5;
-	top: 50%;
-	left: 50%;
-	margin-top: -11px;
-	margin-left: -18px;
-	line-height: 1;
-	background-color: #000;
-	color: #fff;
-	font-size: 11px;
-	padding: 7px 10px;
-	cursor: pointer;
-}
-#redactor-image-resizer {
-	position: absolute;
-	z-index: 2;
-	line-height: 1;
-	cursor: nw-resize;
-	bottom: -4px;
-	right: -5px;
-	border: 1px solid #fff;
-	background-color: #000;
-	width: 8px;
-	height: 8px;
-}
-
-
-
-/*
-	LINK TOOLTIP
-*/
-.redactor-link-tooltip {
-	position: absolute;
-	z-index: 99;
-	padding: 10px;
-	line-height: 1;
-	display: inline-block;
-	background-color: #000;
-	color: #555 !important;
-}
-.redactor-link-tooltip,
-.redactor-link-tooltip a {
-	font-size: 12px;
-	font-family: @redactorFontFamily;
-}
-.redactor-link-tooltip a {
-	color: #ccc;
-	margin: 0 5px;
-	text-decoration: none;
-	&:hover {
-		color: #fff;
-	}
-}
-
-/*
-	DROPAREA
-*/
-#redactor-droparea {
-	position: relative;
-	overflow: hidden;
-	padding: 140px 20px;
-	border: 3px dashed rgba(0, 0, 0, .1);
-	&.drag-hover {
-		background: rgba(200, 222, 250, 0.75);
-	}
-	&.drag-drop {
-		background: rgba(250, 248, 200, 0.5);
-	}
-}
-#redactor-droparea-placeholder {
-	text-align: center;
-	font-size: 12px;
-	color: rgba(0, 0, 0, .7);
-}
-
-
-/*
-	PROGRESS
-*/
-#redactor-progress {
-	position: fixed;
-	top: 0;
-	left: 0;
-	width: 100%;
-	z-index: 1000000;
-	height: 10px;
-}
-#redactor-progress span {
-	display: block;
-	width: 100%;
-	height: 100%;
-	background-color: #3d58a8;
-	.striped-redactor();
-	.animation-redactor(progress-bar-stripes 2s linear infinite);
-	background-size: 40px 40px;
-}
-
-@-webkit-keyframes progress-bar-stripes {
-	from { background-position: 40px 0; }
-	to { background-position: 0 0; }
-}
-@-o-keyframes progress-bar-stripes {
-	from { background-position: 40px 0; }
-	to { background-position: 0 0; }
-}
-@keyframes progress-bar-stripes {
-	from { background-position: 40px 0; }
-	to { background-position: 0 0; }
-}
-
-
-/*
-	MODAL
-*/
-#redactor-modal-overlay {
-	position: fixed;
-	top: 0;
-	left: 0;
-	margin: auto;
-	overflow: auto;
-	width: 100%;
-	height: 100%;
-	background-color: #000 !important;
-	.opacity-redactor(30);
-}
-#redactor-modal-box {
-	position: fixed;
-	top: 0;
-	left: 0;
-	bottom: 0;
-	right: 0;
-	overflow-x: hidden;
-	overflow-y: auto;
-}
-#redactor-modal {
-	outline:0;
-	position: relative;
-	margin: auto;
-	margin-bottom: 20px;
-	padding: 0;
-	background: #fff;
-	color: #000;
-	font-size: 14px !important;
-	font-family: @redactorFontFamily;
-	box-shadow: 0 1px 70px rgba(0, 0, 0, .5);
-
-	& header {
-		padding: 30px 40px 5px 40px;
-		font-size: 18px;
-		font-weight: bold;
-	}
-	& section {
-		padding: 30px 40px 50px 40px;
-	}
-	& label {
-		display: block;
-		float: none !important;
-		margin: 15px 0 3px 0 !important;
-		padding: 0;
-	}
-	& input[type="radio"],
-	& input[type="checkbox"] {
-		position: relative;
-		top: -1px;
-	}
-	& select {
-		width: 100%;
-	}
-	& input[type="text"],
-	& input[type="password"],
-	& input[type="email"],
-	& input[type="url"],
-	& textarea {
-		position: relative;
-		z-index: 2;
-		margin: 0;
-		padding: 5px 4px;
-		height: 28px;
-		border: 1px solid #ccc;
-		border-radius: 1px;
-		background-color: white;
-		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;
-		color: #333;
-		width: 100%;
-		font-size: 14px;
-		font-family: @redactorFontFamily;
-		.transition-redactor(border 0.3s ease-in);
-		&:focus {
-			outline: none;
-			border-color: #5ca9e4;
-			box-shadow: 0 0 0 2px rgba(70, 161, 231, .3), 0 1px 2px rgba(0, 0, 0, .2) inset;
-		}
-		&.redactor-input-error {
-			border-color: #e82f2f;
-			box-shadow: 0 0 0 2px rgba(232, 47, 47, .3), 0 1px 2px rgba(0, 0, 0, .2) inset;
-		}
-	}
-	& textarea {
-		display: block;
-		margin-top: 4px;
-		line-height: 1.4em;
-	}
-
-}
-
-/*
-	Tabs in Modal
-*/
-#redactor-modal-tabber {
-	margin-bottom: 15px;
-	font-size: 12px;
-	& a {
-		border: 1px solid #ddd;
-		line-height: 1;
-		padding: 8px 15px;
-		margin-right: -1px;
-		text-decoration: none;
-		color: #000;
-		&:hover {
-			background-color: rgba(31,120,216,1);
-			border-color: rgba(31,120,216,1);
-			color: #fff;
-		}
-		&.active {
-			cursor: default;
-			background-color: #ddd;
-			border-color: #ddd;
-			color: rgba(0, 0, 0, .6);
-		}
-	}
-}
-
-
-/*
-	List in Modal
-*/
-#redactor-modal {
-	#redactor-modal-list {
-		margin-left: 0;
-		padding-left: 0;
-		list-style: none;
-		max-height: 250px;
-		overflow-x: auto;
-		& li {
-			border-bottom: 1px solid #ddd;
-			&:last-child {
-				border-bottom: none;
-			}
-		}
-
-		& a {
-			padding: 10px 5px;
-			color: #000;
-			text-decoration: none;
-			font-size: 13px;
-			display: block;
-			position: relative;
-			&:hover {
-				background-color: #eee;
-			}
-		}
-	}
-}
-
-#redactor-modal-close {
-	position: absolute;
-	top: 10px;
-	right: 10px;
-	width: 30px;
-	height: 30px;
-	text-align: right;
-	color: #bbb;
-	font-size: 30px;
-	font-weight: 300;
-	cursor: pointer;
-	-webkit-appearance: none;
-	padding:0;
-	border:0;
-	background:0;
-	outline:none;
-	&:hover {
-		color: #000;
-	}
-
-}
-#redactor-modal footer button {
-	position: relative;
-	width: 100%;
-	padding: 14px 16px;
-	margin: 0;
-	outline: none;
-	border: none;
-	background-color: #ddd;
-	color: #000;
-	text-align: center;
-	text-decoration: none;
-	font-weight: normal;
-	font-size: 12px;
-	font-family: @redactorFontFamily;
-	line-height: 1;
-	cursor: pointer;
-
-	&:hover {
-		color: #777;
-		background: none;
-		background: #bbb;
-		text-decoration: none;
-	}
-
-	&.redactor-modal-delete-btn {
-		background: none;
-		color: #fff;
-		background-color: #b52525;
-		&:hover {
-			color: rgba(255, 255, 255, .6);
-			background-color: #881b1b;
-		}
-	}
-	&.redactor-modal-action-btn {
-		background: none;
-		color: #fff;
-		background-color: #2461b5;
-		&:hover {
-			color: rgba(255, 255, 255, .6);
-			background-color: #1a4580;
-		}
-	}
-}
-
-
-/*
-	##############################################
-
-	DROPDOWN FORMATTING
-
-	##############################################
-*/
-.redactor-dropdown {
-	& .redactor-formatting-blockquote {
-		color: rgba(0, 0, 0, .4);
-		font-style: italic;
-	}
-	& .redactor-formatting-pre {
-		font-family: monospace, sans-serif;
-	}
-	& .redactor-formatting-h1 {
-		font-size: 36px;
-		line-height: 36px;
-		font-weight: bold;
-	}
-	& .redactor-formatting-h2 {
-		font-size: 24px;
-		line-height: 36px;
-		font-weight: bold;
-	}
-	& .redactor-formatting-h3 {
-		font-size: 21px;
-		line-height: 30px;
-		font-weight: bold;
-	}
-	& .redactor-formatting-h4 {
-		font-size: 18px;
-		line-height: 26px;
-		font-weight: bold;
-	}
-	& .redactor-formatting-h5 {
-		font-size: 16px;
-		line-height: 23px;
-		font-weight: bold;
-	}
-}
-
-
-/*
-	##############################################
-
-	 CONTENT STYLES
-
-	##############################################
-*/
-.redactor-editor {
-	code,
-	pre {
-		font-family: @redactorCodeFontFamily;
-		cursor: text;
-	}
-	div,
-	p,
-	ul,
-	ol,
-	table,
-	dl,
-	blockquote,
-	pre {
-		font-size: @redactorFontSize;
-		line-height: @redactorLineHeight;
-	}
-	a {
-		color: #15c;
-		text-decoration: underline;
-	}
-
-	object,
-	embed,
-	video,
-	img {
-		max-width: 100%;
-		width: auto;
-	}
-	video,
-	img {
-		height: auto;
-	}
-	div,
-	p,
-	ul,
-	ol,
-	table,
-	dl,
-	figure,
-	blockquote,
-	pre {
-	  margin: 0;
-	  margin-bottom: 15px;
-	  border: none;
-	  background: none;
-	  box-shadow: none;
-	}
-	iframe,
-	object,
-	hr {
-	  margin-bottom: 15px;
-	}
-	blockquote {
-	  margin-left: 1.6em !important;
-	  padding: 0;
-	  text-align: left;
-	  color: #777;
-	  font-style: italic;
-	  &:before,
-	  &:after {
-		  content: '';
-	  }
-	}
-	ul,
-	ol {
-	  padding-left: 2em;
-	}
-	ul ul,
-	ol ol,
-	ul ol,
-	ol ul {
-	  margin: 2px;
-	  padding: 0;
-	  padding-left: 2em;
-	  border: none;
-	}
-	ol ol li {
-		list-style-type: lower-alpha;
-	}
-	ol ol ol li {
-		list-style-type: lower-roman;
-	}
-	dl dt {
-	  font-weight: bold;
-	}
-	dd {
-	  margin-left: 1em;
-	}
-	table {
-	  border-collapse: collapse;
-	  font-size: 1em;
-	  width: 100%;
-	  & td,
-	  & th {
-		  padding: 5px;
-		  border: 1px solid #ddd;
-		  vertical-align: top;
-	  }
-	}
-	table thead td,
-	table th {
-	  font-weight: bold;
-	  border-bottom-color: #888;
-	}
-	code {
-	  background-color: #d8d7d7;
-	}
-	pre {
-	  padding: 1em;
-	  border: 1px solid #ddd;
-	  border-radius: 3px;
-	  background: #f8f8f8;
-	  font-size: 90%;
-	}
-	hr {
-	  display: block;
-	  height: 1px;
-	  border: 0;
-	  border-top: 1px solid #ccc;
-	}
-	h1,
-	h2,
-	h3,
-	h4,
-	h5,
-	h6 {
-		font-weight: bold;
-		color: #000;
-		padding: 0;
-		background: none;
-		text-rendering: optimizeLegibility;
-		margin: 0 0 .5em 0;
-	}
-	h1,
-	h2,
-	h3,
-	h4 {
-	  line-height: 1.3;
-	}
-	h1 {
-	  font-size: 36px;
-	}
-	h2 {
-	  font-size: 24px;
-	  margin-bottom: .7em;
-	}
-	h3 {
-	  font-size: 21px;
-	}
-	h4 {
-	  font-size: 18px;
-	}
-	h5 {
-	  font-size: 16px;
-	}
-	h6 {
-	  font-size: 12px;
-	  text-transform: uppercase;
-	}
-}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.min.css elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.min.css
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.min.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.min.css	2017-10-16 12:12:51.000000000 -0500
@@ -0,0 +1 @@
+.redactor-air li a.redactor-button-disabled,.redactor-toolbar li a.redactor-button-disabled{opacity:.3}@font-face{font-family:Redactor;src:url(data:application/x-font-ttf;charset=utf-8;base64,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) format("truetype");font-weight:400;font-style:normal}[class*=" re-icon-"],[class^=re-icon-]{font-family:Redactor!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.re-icon-aligncenter:before{content:"\e900"}.re-icon-alignleft:before,.re-icon-alignment:before{content:"\e901"}.re-icon-alignright:before{content:"\e902"}.re-icon-bold:before{content:"\e903"}.re-icon-bookmark:before{content:"\e904"}.re-icon-clips:before{content:"\e905"}.re-icon-codesnippets:before{content:"\e906"}.re-icon-deleted:before{content:"\e907"}.re-icon-expand:before{content:"\e908"}.re-icon-file:before{content:"\e909"}.re-icon-fontcolor:before{content:"\e90a"}.re-icon-fontfamily:before{content:"\e90b"}.re-icon-fontsize:before{content:"\e90c"}.re-icon-format:before{content:"\e90d"}.re-icon-html:before{content:"\e90e"}.re-icon-imagecenter:before{content:"\e90f"}.re-icon-imageleft:before{content:"\e910"}.re-icon-imageright:before{content:"\e911"}.re-icon-image:before{content:"\e912"}.re-icon-indent:before{content:"\e913"}.re-icon-inline:before{content:"\e914"}.re-icon-italic:before{content:"\e915"}.re-icon-horizontalrule:before{content:"\e916"}.re-icon-link:before{content:"\e917"}.re-icon-ol:before,.re-icon-ordered:before{content:"\e918"}.re-icon-outdent:before{content:"\e919"}.re-icon-properties:before{content:"\e91a"}.re-icon-readmore:before{content:"\e91b"}.re-icon-redo:before{content:"\e91c"}.re-icon-retract:before{content:"\e91d"}.re-icon-specialcharacters:before{content:"\e91e"}.re-icon-sub:before{content:"\e91f"}.re-icon-sup:before{content:"\e920"}.re-icon-table:before{content:"\e921"}.re-icon-textdirection:before{content:"\e922"}.re-icon-toggle:before{content:"\e923"}.re-icon-underline:before{content:"\e924"}.re-icon-undo:before{content:"\e925"}.re-icon-lists:before,.re-icon-ul:before,.re-icon-unordered:before{content:"\e926"}.re-icon-video:before{content:"\e927"}.redactor-box{position:relative;overflow:visible}.redactor-box,.redactor-layer{background:#fff}.redactor-box,.redactor-box textarea,.redactor-layer{z-index:auto}.redactor-link-tooltip{z-index:1050}.redactor-toolbar{z-index:100}.redactor-box-fullscreen{z-index:1051;position:fixed;top:0;left:0;width:100%}.redactor-air,.redactor-dropdown{z-index:1052}#redactor-modal,#redactor-modal-box,#redactor-modal-overlay{z-index:1053}.redactor-body-fullscreen .redactor-link-tooltip{z-index:1099}.redactor-placeholder:after{position:absolute;top:20px;left:20px;content:attr(placeholder);display:block;color:rgba(0,0,0,.3);font-weight:400!important}.redactor-layer,.redactor-relative{position:relative}.redactor-script-tag,.redactor-voice-label{display:none}.redactor-layer{overflow:auto;margin:0;padding:20px 20px 24px;outline:0;white-space:normal;border:1px solid rgba(0,0,0,.07)}.redactor-in{cursor:text}.redactor-in:focus,.redactor-layer:focus{outline:0}.redactor-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.redactor-layer-img-edit img{cursor:pointer}.redactor-voice-alert{position:absolute;left:-3000px}.redactor-toolbar-box{position:relative}.redactor-toolbar-box .re-button-tooltip{display:none;position:absolute;white-space:nowrap;z-index:101;background:rgba(0,0,0,.9);border-radius:2px;padding:3px 8px;color:rgba(255,255,255,.8);font-size:12px;font-family:Consolas,Menlo,Monaco,"Courier New",monospace}.redactor-air,.redactor-dropdown,.redactor-link-tooltip,.redactor-toolbar{font-family:"Trebuchet MS","Helvetica Neue",Helvetica,Tahoma,sans-serif}.redactor-toolbar{position:relative;padding:0!important;background:#fff;border:none;box-shadow:0 1px 2px rgba(0,0,0,.25)}.redactor-toolbar:after{content:"";display:table;clear:both}.redactor-toolbar.redactor-toolbar-overflow{overflow-y:auto;white-space:nowrap;height:48px}.redactor-toolbar li a{color:rgba(0,0,0,.8)}.redactor-toolbar li a:hover{outline:0;background-color:#3d79f2;color:#fff}.redactor-toolbar li a.redactor-act,.redactor-toolbar li a:active{outline:0;background-color:#eee;color:#444}.redactor-toolbar li a.redactor-button-disabled:hover{color:#333;outline:0;background-color:transparent!important;cursor:default}.redactor-toolbar li a.redactor-button-focus{color:#fff;background:#000}.redactor-toolbar.redactor-toolbar-external{z-index:100;border:1px solid rgba(0,0,0,.1);box-shadow:none}.redactor-air{position:absolute;background:rgba(0,0,0,.9);padding:0;max-width:576px;min-width:200px;border-radius:4px;border:none}.redactor-air li a{color:rgba(255,255,255,.75)}.redactor-air li a:hover{outline:0;background-color:#1f78d8;color:#fff}.redactor-air li a.redactor-act,.redactor-air li a:active{outline:0;background-color:#333;color:rgba(255,255,255,.5)}.redactor-air li a.redactor-button-disabled:hover{color:rgba(255,255,255,.3);outline:0;background-color:transparent!important;cursor:default}.redactor-air li a.redactor-button-focus{color:#333;background:#eee}.redactor-air,.redactor-toolbar{margin:0!important;list-style:none!important;line-height:1!important}.redactor-air li,.redactor-toolbar li{vertical-align:top;display:inline-block;margin:0!important;padding:0!important;outline:0;list-style:none!important}.redactor-air li a,.redactor-toolbar li a{box-sizing:border-box;font-size:14px;display:block;text-align:center;height:48px;padding:17px 16px 15px;outline:0;border:none;line-height:1;text-decoration:none;cursor:pointer;zoom:1;position:relative}.redactor-air li a.re-button-icon,.redactor-toolbar li a.re-button-icon{padding:16px;font-size:16px}.redactor-toolbar li a{border-right:1px solid rgba(0,0,0,.05)}.redactor-toolbar li:last-child a{border-right:none}.redactor-link-tooltip{border-radius:3px;position:absolute;padding:16px;line-height:1;display:inline-block;background-color:rgba(0,0,0,.95);color:#555!important;font-size:14px}.redactor-link-tooltip a{font-size:14px;color:#ccc;margin:0 8px;text-decoration:none}.redactor-link-tooltip a:hover{color:#fff}.redactor-structure div,.redactor-structure h1,.redactor-structure h2,.redactor-structure h3,.redactor-structure h4,.redactor-structure h5,.redactor-structure h6{position:relative}.redactor-structure div:before,.redactor-structure h1:before,.redactor-structure h2:before,.redactor-structure h3:before,.redactor-structure h4:before,.redactor-structure h5:before,.redactor-structure h6:before{width:24px;position:absolute;font-size:10px;font-weight:400;opacity:.3;left:-28px;text-align:right}.redactor-structure h1:before{content:"h1"}.redactor-structure h2:before{content:"h2"}.redactor-structure h3:before{content:"h3"}.redactor-structure h4:before{content:"h4"}.redactor-structure h5:before{content:"h5"}.redactor-structure h6:before{content:"h6"}.redactor-structure div:before{content:"div"}#redactor-image-box{position:relative;max-width:100%;display:inline-block;line-height:0;outline:#1f78d8 solid 3px;box-shadow:0 0 12px #1f78d8}#redactor-image-editter{position:absolute;z-index:5;top:50%;left:50%;margin-top:-11px;margin-left:-18px;line-height:1;background-color:rgba(0,0,0,.9);border-radius:3px;color:#fff;font-size:12px;padding:7px 10px;cursor:pointer}#redactor-image-resizer{box-sizing:border-box;position:absolute;z-index:2;line-height:1;cursor:nw-resize;bottom:-5px;right:-6px;border:2px solid #000;background-color:rgba(255,255,255,.9);width:10px;height:10px}#redactor-droparea{position:relative;overflow:hidden;padding:64px 24px;border:3px dashed rgba(0,0,0,.1)}#redactor-droparea.drag-hover{background:rgba(200,222,250,.75)}#redactor-droparea.drag-drop{background:rgba(250,248,200,.5)}#redactor-droparea-placeholder{text-align:center;font-size:12px;margin-left:64px;color:rgba(0,0,0,.7)}.redactor-image-dragover{outline:#3d79f2 solid 2px}#redactor-progress{position:fixed;top:0;left:0;width:100%;z-index:1000000;height:10px}#redactor-progress span{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);-webkit-animation:progress-bar-stripes 2s linear infinite;-o-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite;display:block;width:100%;height:100%;background-color:#3d58a8;background-size:40px 40px}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@-o-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.redactor-animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes redactorSlideUp{to{padding-top:0;padding-bottom:0;height:0}}@keyframes redactorSlideUp{to{padding-top:0;padding-bottom:0;height:0}}.redactor-slideUp{overflow:hidden;-webkit-animation-name:redactorSlideUp;animation-name:redactorSlideUp}@-webkit-keyframes redactorSlideDown{from{height:0;padding-top:0;padding-bottom:0}}@keyframes redactorSlideDown{from{height:0;padding-top:0;padding-bottom:0}}.redactor-slideDown{overflow:hidden;-webkit-animation-name:redactorSlideDown;animation-name:redactorSlideDown}@-webkit-keyframes redactorFadeIn{from{opacity:0}to{opacity:1}}@keyframes redactorFadeIn{from{opacity:0}to{opacity:1}}.redactor-fadeIn{-webkit-animation-name:redactorFadeIn;animation-name:redactorFadeIn}@-webkit-keyframes redactorFadeOut{from{opacity:1}to{opacity:0}}@keyframes redactorFadeOut{from{opacity:1}to{opacity:0}}.redactor-fadeOut{-webkit-animation-name:redactorFadeOut;animation-name:redactorFadeOut}.redactor-dropdown{min-width:220px;max-height:254px;color:#000;margin:0;padding:0;font-size:14px;background:#fff;box-shadow:0 5px 20px rgba(0,0,0,.2);overflow:auto;list-style:none}.redactor-dropdown li{border-bottom:1px solid rgba(0,0,0,.07)}.redactor-dropdown li:last-child{border-bottom:none}.redactor-dropdown li:hover{background-color:#3d79f2}.redactor-dropdown li:hover a{color:#fff!important;text-decoration:none}.redactor-dropdown li.redactor-dropdown-link-inactive{background:0 0}.redactor-dropdown li.redactor-dropdown-link-inactive a,.redactor-dropdown li.redactor-dropdown-link-inactive a:hover{cursor:default;color:#000!important;opacity:.4;background:0 0}.redactor-dropdown a{display:block;padding:12px 10px;color:#000;text-decoration:none}.redactor-dropdown a span{padding:2px 4px 1px;display:inline-block;border-radius:3px;line-height:1}.redactor-dropdown a:focus{outline:0}.redactor-dropdown a.selected{background-color:#000;color:#fff}.redactor-dropdown a.redactor-dropdown-link-selected{color:#fff;background:#000}.redactor-dropdown-box-inline .redactor-dropdown-marked span{background-color:#ffd61e;color:#000;text-decoration:none}.redactor-dropdown-box-inline .redactor-dropdown-code span{font-family:Consolas,Menlo,Monaco,"Courier New",monospace;background:rgba(0,0,0,.05)}.redactor-dropdown-box-inline .redactor-dropdown-sample span{font-family:Consolas,Menlo,Monaco,"Courier New",monospace;background:#46a9fc;color:rgba(255,255,255,.9)}.redactor-dropdown-box-inline .redactor-dropdown-variable span{font-family:Consolas,Menlo,Monaco,"Courier New",monospace;color:rgba(0,0,0,.5)}.redactor-dropdown-box-inline .redactor-dropdown-shortcut span{font-family:Consolas,Menlo,Monaco,"Courier New",monospace;background:#000;color:rgba(255,255,255,.85);white-space:nowrap}.redactor-dropdown-box-inline .redactor-dropdown-cite span{color:rgba(0,0,0,.5);font-style:italic}.redactor-dropdown-box-inline .redactor-dropdown-sub span,.redactor-dropdown-box-inline .redactor-dropdown-sup span{font-size:12px}.redactor-dropdown-box-format .redactor-dropdown-blockquote{color:rgba(0,0,0,.4);font-style:italic}.redactor-dropdown-box-format .redactor-dropdown-pre{font-family:monospace,sans-serif}#redactor-modal,#redactor-modal button,.redactor-styles,.redactor-styles h1,.redactor-styles h2,.redactor-styles h3,.redactor-styles h4,.redactor-styles h5,.redactor-styles h6{font-family:"Trebuchet MS","Helvetica Neue",Helvetica,Tahoma,sans-serif}.redactor-dropdown-box-format .redactor-dropdown-h1,.redactor-dropdown-box-format .redactor-dropdown-h2,.redactor-dropdown-box-format .redactor-dropdown-h3,.redactor-dropdown-box-format .redactor-dropdown-h4,.redactor-dropdown-box-format .redactor-dropdown-h5,.redactor-dropdown-box-format .redactor-dropdown-h6{line-height:24px;font-weight:700}.redactor-dropdown-box-format .redactor-dropdown-h1{font-size:40px;line-height:32px}.redactor-dropdown-box-format .redactor-dropdown-h2{font-size:32px;line-height:32px}.redactor-dropdown-box-format .redactor-dropdown-h3{font-size:24px}.redactor-dropdown-box-format .redactor-dropdown-h4{font-size:21px}.redactor-dropdown-box-format .redactor-dropdown-h5{font-size:18px}.redactor-dropdown-box-format .redactor-dropdown-h6{font-size:16px}#redactor-modal-overlay{position:fixed;top:0;left:0;margin:auto;overflow:auto;width:100%;height:100%;background-color:rgba(255,255,255,.95)}#redactor-modal-box{position:fixed;top:0;left:0;bottom:0;right:0;overflow-x:hidden;overflow-y:auto}#redactor-modal{position:relative;margin:16px auto auto;padding:0;background:#fff;color:#000;border-radius:5px;box-shadow:0 4px 40px rgba(0,0,0,.15);font-size:14px}@media (max-width:768px){#redactor-modal{font-size:16px!important}}#redactor-modal #redactor-modal-header{border-top-right-radius:5px;border-top-left-radius:5px;padding:20px;font-size:18px;font-weight:700;color:#000;border-bottom:1px solid rgba(0,0,0,.05)}#redactor-modal #redactor-modal-close{position:absolute;top:10px;right:4px;width:30px;height:40px;text-align:center;color:rgba(0,0,0,.3);font-size:30px;font-weight:300;cursor:pointer;-webkit-appearance:none;padding:0;border:0;background:0 0;outline:0}#redactor-modal #redactor-modal-close:hover{color:#000}#redactor-modal #redactor-modal-body{overflow:auto;padding:40px 48px 24px}#redactor-modal #redactor-modal-body section{margin-bottom:24px}#redactor-modal #redactor-modal-body label{font-weight:400;font-size:15px;display:block;margin-bottom:4px;color:rgba(0,0,0,.8)}#redactor-modal #redactor-modal-body label .desc{color:rgba(0,0,0,.5)}#redactor-modal #redactor-modal-body label.checkbox{font-size:inherit}#redactor-modal input[type=text],#redactor-modal input[type=password],#redactor-modal input[type=email],#redactor-modal input[type=url],#redactor-modal input[type=number],#redactor-modal select,#redactor-modal textarea{box-sizing:border-box;position:relative;z-index:2;margin:0;padding:8px;height:40px;border:1px solid #ddd;border-radius:3px;background-color:#fff;box-shadow:none;color:#333;width:100%;font-size:16px;font-family:"Trebuchet MS","Helvetica Neue",Helvetica,Tahoma,sans-serif}#redactor-modal input[type=text]:focus,#redactor-modal input[type=password]:focus,#redactor-modal input[type=email]:focus,#redactor-modal input[type=url]:focus,#redactor-modal input[type=number]:focus,#redactor-modal select:focus,#redactor-modal textarea:focus{-moz-transition:border .3s ease-in;transition:border .3s ease-in;outline:0;border-color:#1f78d8}#redactor-modal textarea{display:block;line-height:1.4em}#redactor-modal button{padding:0 20px;margin:0 8px 8px 0;height:40px;line-height:38px;outline:0;border:2px solid transparent;border-radius:3px;background-color:#eee;color:#000;text-align:center;text-decoration:none;font-weight:400;font-size:15px;cursor:pointer;vertical-align:middle;-webkit-appearance:none}.redactor-styles b,.redactor-styles dl dt,.redactor-styles strong{font-weight:700}#redactor-modal button:hover{color:#777;background:#f5f5f5;text-decoration:none}#redactor-modal button.redactor-modal-button-offset{margin-left:24px}#redactor-modal button#redactor-modal-button-delete{background:0 0;border-color:#f23d3d;color:#f23d3d}#redactor-modal button#redactor-modal-button-delete:hover{color:rgba(255,255,255,.6);background-color:#f23d3d}#redactor-modal button#redactor-modal-button-action{background:#1c86f2;color:#fff}#redactor-modal button#redactor-modal-button-action:hover{color:rgba(255,255,255,.6);background-color:#4ca0f5}#redactor-modal .redactor-group:after{content:"";display:table;clear:both}#redactor-modal .redactor-modal-tab-side{float:left;width:26%;margin-right:6%}#redactor-modal .redactor-modal-tab-area{float:left;width:66%}@media (max-width:768px){#redactor-modal #redactor-modal-body{padding:24px}#redactor-modal .redactor-modal-tab-side{float:none;width:auto;margin-right:0;margin-bottom:24px}#redactor-modal .redactor-modal-tab-area{float:none;width:auto}}#redactor-modal-tabber{margin-bottom:40px;font-size:12px}#redactor-modal-tabber a{border:1px solid #ddd;line-height:1;padding:8px 15px;margin-right:-1px;text-decoration:none;color:#000}#redactor-modal-tabber a:hover{background-color:#1f78d8;border-color:#1f78d8;color:#fff}#redactor-modal-tabber a.active{cursor:default;background-color:rgba(0,0,0,.05);border-color:#ddd;color:rgba(0,0,0,.5)}#redactor-modal-list{margin-left:0;padding-left:0;list-style:none;max-height:250px;overflow-x:auto}#redactor-modal-list li{border-bottom:1px solid rgba(0,0,0,.07)}#redactor-modal-list li:last-child{border-bottom:none}#redactor-modal-list a{padding:16px 4px;color:#000;text-decoration:none;font-size:15px;display:block;position:relative}#redactor-modal-list a:hover{background-color:#eee}.redactor-styles{font-size:16px;line-height:24px;color:#333}.redactor-styles[dir=rtl]{direction:rtl;unicode-bidi:embed}.redactor-styles[dir=rtl] ol li,.redactor-styles[dir=rtl] ul li{text-align:right}.redactor-styles[dir=rtl] ol,.redactor-styles[dir=rtl] ol ol,.redactor-styles[dir=rtl] ol ul,.redactor-styles[dir=rtl] ul,.redactor-styles[dir=rtl] ul ol,.redactor-styles[dir=rtl] ul ul{margin:0 24px 0 0}@media (max-width:768px){.redactor-styles{font-size:16px}}.redactor-styles a{color:#256bc9}.redactor-styles a:focus,.redactor-styles a:hover{color:#e21e3b}.redactor-styles h1,.redactor-styles h2,.redactor-styles h3,.redactor-styles h4,.redactor-styles h5,.redactor-styles h6{font-weight:700;color:#222;text-rendering:optimizeLegibility;margin:0 0 12px;padding:0}.redactor-styles h1:empty,.redactor-styles h2:empty,.redactor-styles h3:empty,.redactor-styles h4:empty,.redactor-styles h5:empty,.redactor-styles h6:empty{min-height:24px}.redactor-styles h1{font-size:40px;line-height:44px}.redactor-styles h2{font-size:32px;line-height:36px}.redactor-styles h3{font-size:24px;line-height:32px}.redactor-styles h4{font-size:21px;line-height:24px}.redactor-styles h5{font-size:18px;line-height:24px}.redactor-styles h6{font-size:16px;line-height:24px}.redactor-styles address,.redactor-styles blockquote,.redactor-styles dl,.redactor-styles figure,.redactor-styles hr,.redactor-styles ol,.redactor-styles p,.redactor-styles pre,.redactor-styles table,.redactor-styles ul{padding:0;margin:0}.redactor-styles blockquote:empty,.redactor-styles p:empty{min-height:24px}.redactor-styles blockquote+h2,.redactor-styles blockquote+h3,.redactor-styles blockquote+h4,.redactor-styles blockquote+h5,.redactor-styles blockquote+h6,.redactor-styles dl+h2,.redactor-styles dl+h3,.redactor-styles dl+h4,.redactor-styles dl+h5,.redactor-styles dl+h6,.redactor-styles figure+h2,.redactor-styles figure+h3,.redactor-styles figure+h4,.redactor-styles figure+h5,.redactor-styles figure+h6,.redactor-styles form+h2,.redactor-styles form+h3,.redactor-styles form+h4,.redactor-styles form+h5,.redactor-styles form+h6,.redactor-styles hr+h2,.redactor-styles hr+h3,.redactor-styles hr+h4,.redactor-styles hr+h5,.redactor-styles hr+h6,.redactor-styles ol+h2,.redactor-styles ol+h3,.redactor-styles ol+h4,.redactor-styles ol+h5,.redactor-styles ol+h6,.redactor-styles p+h2,.redactor-styles p+h3,.redactor-styles p+h4,.redactor-styles p+h5,.redactor-styles p+h6,.redactor-styles pre+h2,.redactor-styles pre+h3,.redactor-styles pre+h4,.redactor-styles pre+h5,.redactor-styles pre+h6,.redactor-styles table+h2,.redactor-styles table+h3,.redactor-styles table+h4,.redactor-styles table+h5,.redactor-styles table+h6,.redactor-styles ul+h2,.redactor-styles ul+h3,.redactor-styles ul+h4,.redactor-styles ul+h5,.redactor-styles ul+h6{margin-top:24px}.redactor-styles ol,.redactor-styles ol ol,.redactor-styles ol ul,.redactor-styles ul,.redactor-styles ul ol,.redactor-styles ul ul{margin:0 0 0 24px}.redactor-styles ol li,.redactor-styles ul li{text-align:left}.redactor-styles ol ol li{list-style-type:lower-alpha}.redactor-styles ol ol ol li{list-style-type:lower-roman}.redactor-styles address,.redactor-styles blockquote,.redactor-styles dl,.redactor-styles figure,.redactor-styles hr,.redactor-styles ol,.redactor-styles p,.redactor-styles pre,.redactor-styles table,.redactor-styles ul{margin-bottom:16px}.redactor-styles blockquote{position:relative;font-style:italic;color:rgba(0,0,0,.6)}.redactor-styles blockquote cite{font-size:80%}@media (min-width:768px){.redactor-styles blockquote{padding-left:24px;border-left:1px solid rgba(0,0,0,.1)}}.redactor-styles address{font-style:normal}.redactor-styles dd{margin-left:24px}.redactor-styles cite{color:rgba(0,0,0,.5);font-style:italic}.redactor-styles del,.redactor-styles s{text-decoration:line-through}.redactor-styles abbr[title],.redactor-styles dfn[title]{border-bottom:1px dotted #000;cursor:help}.redactor-styles em,.redactor-styles i{font-style:italic}.redactor-styles sub,.redactor-styles sup{font-size:10px;line-height:0;position:relative;margin-left:.2rem}.redactor-styles sup{top:-.4rem}.redactor-styles sub{bottom:-.2rem}.redactor-styles b:empty,.redactor-styles em:empty,.redactor-styles i:empty,.redactor-styles ins:empty,.redactor-styles strong:empty,.redactor-styles sub:empty,.redactor-styles sup:empty,.redactor-styles u:empty{display:inline-block;min-width:1px;min-height:1rem}.redactor-styles figcaption{margin:4px 0;font-size:12px;font-style:italic;text-align:left}.redactor-styles ins,.redactor-styles u{text-decoration:underline}.redactor-styles mark{background-color:#ffd61e;color:#000;text-decoration:none}.redactor-styles code,.redactor-styles kbd,.redactor-styles output,.redactor-styles pre,.redactor-styles samp,.redactor-styles var{font-size:90%;font-style:normal;font-family:Consolas,Menlo,Monaco,"Courier New",monospace}.redactor-styles pre{margin-top:16px;font-size:90%;line-height:24px;color:rgba(0,0,0,.75);overflow:auto;background:rgba(0,0,0,.03);padding:16px 20px;word-wrap:normal}.redactor-styles code,.redactor-styles kbd,.redactor-styles mark,.redactor-styles samp{padding:2px 4px 1px;display:inline-block;line-height:1;border-radius:3px}.redactor-styles code{background:rgba(0,0,0,.05)}.redactor-styles pre code{font-size:100%;border:none;padding:0;background:0 0;line-height:24px}.redactor-styles var{color:rgba(0,0,0,.5)}.redactor-styles samp{background:#46a9fc;color:rgba(255,255,255,.9)}.redactor-styles kbd{background:#000;color:rgba(255,255,255,.85);white-space:nowrap}.redactor-styles hr{display:block;box-sizing:content-box;height:1px;border:0;border-top:1px solid rgba(0,0,0,.1)}.redactor-styles audio,.redactor-styles embed,.redactor-styles img,.redactor-styles object,.redactor-styles video{max-width:100%}.redactor-styles embed,.redactor-styles img,.redactor-styles object,.redactor-styles video{height:auto}.redactor-styles embed,.redactor-styles object{height:100%}.redactor-styles img{vertical-align:middle;-ms-interpolation-mode:bicubic}.redactor-styles table{border-collapse:collapse;max-width:100%;width:100%;empty-cells:show}.redactor-styles table caption{text-transform:uppercase;padding:0;color:rgba(0,0,0,.5);font-size:11px}.redactor-styles table td,.redactor-styles table th{border:1px solid #eee;padding:16px 16px 15px}.redactor-styles table tfoot td,.redactor-styles table tfoot th{color:rgba(0,0,0,.5)}.redactor-styles .video-container{height:0;padding-bottom:56.25%;position:relative;margin-bottom:16px}.redactor-styles .video-container embed,.redactor-styles .video-container iframe,.redactor-styles .video-container object{position:absolute;top:0;left:0;width:100%!important;height:100%!important}
\ No newline at end of file
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.min.js elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.min.js
--- elefant-elefant_2_0_1_stable/apps/admin/js/redactor/redactor.min.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/js/redactor/redactor.min.js	2017-10-16 12:12:51.000000000 -0500
@@ -1,12 +1,6 @@
-/*
-	Redactor 10.2.5
-	Updated: October 1, 2015
-
-	http://imperavi.com/redactor/
-
-	Copyright (c) 2009-2015, Imperavi LLC.
-	License: http://imperavi.com/redactor/license/
-
-	Usage: $('#content').redactor();
-*/
-eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('(C($){\'lC lA\';if(!gz.5n.a4){gz.5n.a4=C(gy){E fn=q;F C(){F fn.8n(gy)}}}E 2H=0;$.fn.I=C(47){E 2L=[];E gx=8Q.5n.dn.64(iY,1);if(1s 47===\'70\'){q.1u(C(){E 6E=$.1f(q,\'I\');E 1C;if(47.3J(/\\./)!=\'-1\'){1C=47.4A(\'.\');if(1s 6E[1C[0]]!=\'1z\'){1C=6E[1C[0]][1C[1]]}}O{1C=6E[47]}if(1s 6E!==\'1z\'&&$.5K(1C)){E 9X=1C.8n(6E,gx);if(9X!==1z&&9X!==6E){2L.2N(9X)}}O{$.6N(\'lX m1 9V "\'+47+\'" 2D 3Y\')}})}O{q.1u(C(){$.1f(q,\'I\',{});$.1f(q,\'I\',3Y(q,47))})}if(2L.12===0)F q;O if(2L.12===1)F 2L[0];O F 2L};C 3Y(el,47){F 2a 3Y.5n.3Q(el,47)}$.3Y=3Y;$.3Y.m0=\'10.2.5\';$.3Y.d5=[\'2Z\',\'3n\',\'Q\',\'28\',\'2f\',\'1v\',\'1S\',\'1x\',\'1e\',\'1W\',\'1n\',\'1Z\',\'2p\',\'M\',\'3A\',\'26\',\'1Y\',\'1D\',\'2s\',\'1H\',\'3L\',\'V\',\'2A\',\'2d\',\'1b\',\'1R\',\'2X\',\'5o\',\'3i\',\'5F\',\'K\',\'6a\',\'2I\',\'1I\',\'1A\',\'1w\',\'L\'];$.3Y.G={1H:\'en\',dc:\'lZ\',92:N,2p:N,g0:N,3i:N,5W:1q,6G:N,ae:N,b3:N,1K:N,6q:1q,2X:1q,eE:N,aP:1q,k2:1q,hY:1q,hO:N,3n:N,d4:N,9a:60,cZ:N,bi:N,iW:1q,5a:\'9n\',hR:N,ec:50,ca:1q,hI:1q,hL:1q,8C:\'lQ\',cO:1q,7R:4m,jU:\'1Z\',lI:N,ge:1q,7N:4m,jS:\'1Z\',gh:1q,86:N,ax:1q,ek:1q,e9:1q,9q:1q,72:4,b7:N,et:1q,9w:N,1A:1q,jD:1q,6F:1k,6L:0,aI:N,jr:N,4D:1q,4i:[\'B\',\'30\',\'4n\',\'4h\',\'5S\',\'5q\',\'5u\',\'7n\',\'3A\',\'M\',\'1Z\',\'V\',\'2Z\',\'aO\'],dQ:[],e8:[],30:[\'p\',\'29\',\'2F\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'],cv:N,2I:1q,4c:[\'3W\',\'1p\'],4s:N,co:[\'3V\',\'1j\',\'2F\',\'6k\',\'3k\',\'ol\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\',\'dl\',\'29\',\'80\',\'dW\',\'4d\',\'75\',\'cc\',\'eS\',\'fo\',\'43\',\'1p\',\'3W\',\'4J\',\'7a\',\'3G\',\'2y\',\'1v\',\'41\',\'kh\',\'iZ\',\'lL\',\'hr\',\'j1\',\'mh\',\'mk\',\'mo\',\'6t\',\'me\',\'m8\',\'ma\',\'p\'],6v:N,5w:[[\'7b\',\'4l\'],[\'b\',\'5d\']],5x:[[\'3O-7W:\\\\s?4n\',"5d"],[\'3O-1p:\\\\s?4h\',"em"],[\'1g-7e:\\\\s?5r\',"u"],[\'1g-7e:\\\\s?3L-eB\',\'4l\']],5s:N,1L:N,52:N,6U:[\'1i\'],3T:[\'p\'],aN:[\'5S\',\'4h\',\'4n\',\'5r\',\'5q\',\'5u\',\'l8\',\'la\',\'lv\',\'9B\'],cj:{b:\'4n\',5d:\'4n\',i:\'4h\',em:\'4h\',4l:\'5S\',7b:\'5S\',3k:\'5q\',ol:\'5u\',u:\'5r\'},6a:{\'4a+6P+m, 5c+6P+m\':{1C:\'26.e1\'},\'4a+b, 5c+b\':{1C:\'26.3a\',6d:[\'4n\']},\'4a+i, 5c+i\':{1C:\'26.3a\',6d:[\'4h\']},\'4a+h, 5c+h\':{1C:\'26.3a\',6d:[\'eZ\']},\'4a+l, 5c+l\':{1C:\'26.3a\',6d:[\'fc\']},\'4a+k, 5c+k\':{1C:\'V.2R\'},\'4a+6P+7\':{1C:\'2d.3j\',6d:[\'5u\']},\'4a+6P+8\':{1C:\'2d.3j\',6d:[\'5q\']}},gV:N,28:[],8M:[],5V:\'<p>&#bL;</p>\',5Z:\'&#bL;\',jX:[\'M/gR\',\'M/lu\',\'M/gU\'],9M:20,c7:[\'a\',\'1M\',\'b\',\'5d\',\'7j\',\'7i\',\'i\',\'em\',\'u\',\'95\',\'7b\',\'4l\',\'9d\',\'3k\',\'ol\',\'li\'],4M:[\'5d\',\'b\',\'u\',\'em\',\'i\',\'1e\',\'4l\',\'lj\',\'az\',\'ay\',\'7i\',\'7j\',\'85\',\'E\',\'9d\',\'95\'],9y:[\'P\',\'cJ\',\'cs\',\'c8\',\'c3\',\'c6\',\'bM\',\'ml\',\'nH\',\'mr\',\'8a\',\'6u\',\'aL\',\'nK\',\'hS\',\'nO\',\'nt\',\'nR\',\'o7\',\'o8\',\'oi\'],8E:[\'9J\',\'8B\',\'8h\',\'5L\'],bO:N,1R:{7H:[]},kv:{en:{B:\'og\',6S:\'6K gm\',M:\'6K gn\',3V:\'dC\',V:\'dN\',b2:\'6K V\',e6:\'gG V\',6J:\'of\',30:\'nU\',iB:\'nZ 1g\',dp:\'o4\',1e:\'gl\',iC:\'8i 1\',iL:\'8i 2\',iM:\'8i 3\',kd:\'8i 4\',jt:\'8i 5\',4n:\'o3\',4h:\'mL\',mH:\'mI gB\',mN:\'mQ gB\',5q:\'mP gE\',5u:\'mF gE\',7n:\'mu\',3A:\'mz\',jf:\'mE\',1Y:\'6K\',3o:\'mD\',hF:\'9g\',mC:\'6K dC\',mT:\'9s dr mU\',nd:\'9s dr nc\',na:\'9s dx gv\',nb:\'9s dx go\',ni:\'9g dx\',mZ:\'9g dr\',mY:\'9g dC\',mV:\'mW\',n1:\'n2\',n7:\'9s gw\',nJ:\'9g gw\',1J:\'n3\',ck:\'n5\',5p:\'n6\',2c:\'gv\',4t:\'go\',5m:\'gq\',mX:\'gn n0 dN\',1g:\'n8\',aa:\'n9\',nh:\'cg\',nj:\'gm nm gl or ng/nf dN\',1Z:\'6K ne\',1w:\'mB\',mA:\'my\',gp:\'mt\',ms:\'mv gp\',mx:\'gT 1Z gS\',jO:\'gu 1g gs gr 2c\',jJ:\'gq 1g\',jH:\'gu 1g gs gr 4t\',jF:\'mO 1g\',aO:\'6K mR mS\',5S:\'mM\',ho:\'mJ\',a9:\'mK V in 2a 5t\',5r:\'nn\',2Z:\'no\',6f:\'o1 (o0)\',7F:\'gG\',k8:\'gT 1Z gS or \'}},2A:{4p:{6Q:/5E?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:nY\\.be\\/|6Q\\.aK\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.\\-]*(?:[\'"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig,6T:/5E?:\\/\\/(7S\\.)?6T.aK\\/(\\d+)($|\\/)/,M:/((5E?|7S)[^\\s]+\\.)(nT?g|gR|gU)(\\?[^\\s-]+)?/ig,2i:/(5E?:\\/\\/(?:7S\\.|(?!7S))[^\\s\\.]+\\.[^\\s]{2,}|7S\\.[^\\s]+\\.[^\\s]{2,})/ig,}},9r:N};3Y.fn=$.3Y.5n={3r:{83:8,8S:46,nS:38,dm:40,6z:13,kk:32,bG:27,da:9,fB:17,fA:91,ft:16,fu:18,eW:39,nV:37,er:91},3Q:C(el,47){q.$2m=$(el);q.2H=2H++;q.7T=N;q.$5h=N;q.gY(47);q.gX();q.30={};$.nX(q.G.8E,q.G.9y);q.fk=2a 2n(\'^(\'+q.G.8E.31(\'|\')+\')$\',\'i\');q.1I.kU();if(q.G.4c!==N){E 2e=[\'B\',\'dG\',\'V\',\'3f\',\'5c\',\'nW\'];2D(E i=0;i<2e.12;i++){q.G.4c.2N(2e[i])}}q.1H.2K();$.7h(q.G.6a,q.G.gV);q.1W.2r(\'2b\');q.2b=1q;q.2f.fG()},gY:C(47){q.G=$.7h({},$.7h(1q,{},$.3Y.G),q.$2m.1f(),47)},dg:C(43){F kD.o6(43).dO(C(aD){F 1s 43[aD]==\'C\'})},gX:C(){E 2q=$.3Y.d5.12;2D(E i=0;i<2q;i++){q.gW($.3Y.d5[i])}},gW:C(6H){if(1s q[6H]==\'1z\')F;q[6H]=q[6H]();E 6h=q.dg(q[6H]);E 2q=6h.12;2D(E z=0;z<2q;z++){q[6H][6h[z]]=q[6H][6h[z]].a4(q)}},2Z:C(){F{2c:C(){q.2Z.1U(\'\')},4t:C(){q.2Z.1U(\'4t\')},5m:C(){q.2Z.1U(\'5m\')},9B:C(){q.2Z.1U(\'9B\')},1U:C(1m){if(!q.L.1P(\'2G\')&&!q.G.1K){q.$T.2p()}q.2Z.21=q.K.44();q.2Z.1m=1m;q.28.1U();q.K.3o();if(q.2Z.gJ()){q.2Z.gQ()}O{q.2Z.gP()}q.K.3e();q.1e.1T()},gQ:C(){E 4N=q.K.6e(\'1j\');$(4N).1c(\'1f-8u\',\'I\').1O(\'1g-5f\',q.2Z.1m)},gP:C(){$.1u(q.2Z.21,$.1d(C(i,el){E $el=q.L.aS(el);if(!$el)F;if(q.2Z.gI($el)){q.2Z.gH($el)}O{q.2Z.gK($el)}},q))},gJ:C(){F(q.G.1K&&q.2Z.21[0]===N)},gI:C($el){F(q.2Z.1m===\'\'&&1s($el.1f(\'8u\'))!==\'1z\')},gH:C($el){$el.2x($el.B())},gK:C($el){$el.1O(\'1g-5f\',q.2Z.1m);q.L.5C($el,\'1p\')}}},3n:C(){F{B:N,aT:C(){if(!q.G.3n)F;q.3n.1y=(q.G.d4)?q.G.d4:q.$2y.1c(\'1y\');if(q.G.cZ)F;q.9a=o9(q.3n.2K,q.G.9a*oa)},hj:C(){if(!q.G.cZ)F;q.3n.2K()},2K:C(){if(!q.G.3n)F;q.3n.4D=q.1e.1a();if(q.3n.B===q.3n.4D)F;E 1f={};1f[\'1y\']=q.3n.1y;1f[q.3n.1y]=q.3n.4D;1f=q.3n.6A(1f);E gL=$.nQ({2i:q.G.3n,1m:\'ny\',1f:1f});gL.nz(q.3n.gO)},6A:C(1f){if(q.G.bi===N||1s q.G.bi!==\'43\'){F 1f}$.1u(q.G.bi,$.1d(C(k,v){if(v!==4m&&v.4o().4L(\'#\')===0)v=$(v).2L();1f[k]=v},q));F 1f},gO:C(1f){E 2S;4U{2S=$.iO(1f)}56(e){2S=1f}E gN=(1s 2S.6N==\'1z\')?\'3n\':\'nw\';q.1W.2r(gN,q.3n.1y,2S);q.3n.B=q.3n.4D},nq:C(){hq(q.9a)}}},Q:C(){F{30:C(1y){q.Q.bp=N;E 1m,1F;if(1s q.30[1y].1f!=\'1z\')1m=\'1f\';O if(1s q.30[1y].1c!=\'1z\')1m=\'1c\';O if(1s q.30[1y][\'1G\']!=\'1z\')1m=\'1G\';if(1s q.30[1y].9e!=\'1z\'){q.Q.bp=1q}if(1m)1F=q.30[1y][1m];q.Q.3a(q.30[1y].Y,1m,1F)},3a:C(Y,1m,1F){if(Y==\'dp\')Y=\'29\';E gM=[\'p\',\'2F\',\'29\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'];if($.3t(Y,gM)==-1)F;q.Q.8K=(Y==\'2F\'||Y.3J(/h[1-6]/i)!=-1);if(!q.L.1P(\'2G\'))q.$T.2p();E B=$.3h(q.$T.B());q.Q.3z=q.L.3z(B);if(q.L.1P(\'4b\')&&!q.2p.cI()){if(q.Q.3z){E $3I;if(!q.G.1K){$3I=q.$T.3R().3I();q.1S.3H($3I)}}}q.Q.21=q.K.44();q.Q.7q=q.Q.21.12;q.Q.1m=1m;q.Q.1F=1F;q.28.1U();q.K.3o();q.Q.1U(Y);q.K.3e();q.1e.1T();q.1R.2K()},1U:C(Y){q.K.1a();q.Q.6g=q.14.fR.1o;if(q.14.4X){q.Q.gk(Y)}O{q.Q.gj(Y)}},gk:C(Y){if(q.G.1K&&q.Q.3z&&Y!=\'p\'){E R=1k.3B(Y);q.$T.B(R);q.1S.3H(R);F}E Q=q.Q.21[0];if(Q===N)F;if(Q.1o==\'5L\'){if(Y!=\'29\')F;q.Q.bE();F}E bf=(q.Q.6g==\'6u\'||q.Q.6g==\'cr\');if(bf&&!q.G.1K){1k.3Z(\'9S\',N,\'<\'+Y+\'>\');Q=q.K.49();q.Q.3j($(Q))}O if(Q.1o.3g()!=Y){if(q.G.1K&&Y==\'p\'){$(Q).1E(\'<br>\');q.L.5T(Q)}O{E $1X=q.L.4x(Q,Y);q.Q.3j($1X);if(Y!=\'p\'&&Y!=\'29\')$1X.1h(\'1M\').1t();if(q.Q.8K)q.L.4V($1X);if(Y==\'p\'||q.Q.d2)$1X.1h(\'p\').25().48();q.Q.dj($1X)}}O if(Y==\'29\'&&Q.1o.3g()==Y){if(q.G.1K){$(Q).1E(\'<br>\');q.L.5T(Q)}O{E $el=q.L.4x(Q,\'p\');q.Q.3j($el)}}O if(Q.1o.3g()==Y){q.Q.3j($(Q))}if(1s q.Q.1m==\'1z\'&&1s q.Q.1F==\'1z\'){$(Q).1L(\'1G\').1L(\'1p\')}},gj:C(Y){E Q=q.Q.21[0];E bf=(q.Q.6g==\'6u\'||q.Q.6g==\'cr\');if(Q!==N&&q.Q.7q===1){if(Q.1o.3g()==Y&&Y==\'29\'){if(q.G.1K){$(Q).1E(\'<br>\');q.L.5T(Q)}O{E $el=q.L.4x(Q,\'p\');q.Q.3j($el)}}O if(Q.1o==\'5L\'){if(Y!=\'29\')F;q.Q.bE()}O if(q.Q.6g==\'aL\'){q.Q.fP(Y)}O if(q.G.1K&&((bf)||(q.14.fR!=Q))){q.Q.bF(Y)}O{if(q.G.1K&&Y==\'p\'){$(Q).6C(\'<br>\').1E(\'<br>\');q.L.5T(Q)}O if(Q.1o===\'6u\'){q.Q.bF(Y)}O{E $1X=q.L.4x(Q,Y);q.Q.3j($1X);if(q.Q.8K)q.L.4V($1X);if(Y==\'p\'||q.Q.d2)$1X.1h(\'p\').25().48()}}}O{if(q.G.1K||Y!=\'p\'){if(Y==\'29\'){E d1=0;2D(E i=0;i<q.Q.7q;i++){if(q.Q.21[i].1o==\'aL\')d1++}if(d1==q.Q.7q){$.1u(q.Q.21,$.1d(C(i,s){E $1X=N;if(q.G.1K){$(s).6C(\'<br>\').1E(\'<br>\');$1X=q.L.5T(s)}O{$1X=q.L.4x(s,\'p\')}if($1X&&1s q.Q.1m==\'1z\'&&1s q.Q.1F==\'1z\'){$1X.1L(\'1G\').1L(\'1p\')}},q));F}}q.Q.bF(Y)}O{E 8N=0;E 5y=N;if(q.Q.1m==\'1G\'){5y=\'3j\';8N=$(q.Q.21).dO(\'.\'+q.Q.1F).12;if(q.Q.7q==8N)5y=\'3j\';O if(q.Q.7q>8N)5y=\'1U\';O if(8N===0)5y=\'1U\'}E 8Z=[\'3k\',\'ol\',\'li\',\'2Y\',\'6s\',\'dl\',\'dt\',\'dd\'];$.1u(q.Q.21,$.1d(C(i,s){if($.3t(s.1o.3g(),8Z)!=-1)F;E $1X=q.L.4x(s,Y);if(5y){if(5y==\'3j\')q.Q.3j($1X);O if(5y==\'1t\')q.Q.1t($1X);O if(5y==\'1U\')q.Q.fQ($1X)}O q.Q.3j($1X);if(Y!=\'p\'&&Y!=\'29\')$1X.1h(\'1M\').1t();if(q.Q.8K)q.L.4V($1X);if(Y==\'p\'||q.Q.d2)$1X.1h(\'p\').25().48();if(1s q.Q.1m==\'1z\'&&1s q.Q.1F==\'1z\'){$1X.1L(\'1G\').1L(\'1p\')}},q))}}},fQ:C($el){if(q.Q.bp){$el.1L(\'1G\').1L(\'1p\')}if(q.Q.1m==\'1G\'){$el.2g(q.Q.1F);F}O if(q.Q.1m==\'1c\'||q.Q.1m==\'1f\'){$el.1c(q.Q.1F.1y,q.Q.1F.1F);F}},3j:C($el){if(q.Q.bp){$el.1L(\'1G\').1L(\'1p\')}if(q.Q.1m==\'1G\'){$el.7C(q.Q.1F);F}O if(q.Q.1m==\'1c\'||q.Q.1m==\'1f\'){if($el.1c(q.Q.1F.1y)==q.Q.1F.1F){$el.1L(q.Q.1F.1y)}O{$el.1c(q.Q.1F.1y,q.Q.1F.1F)}F}O{$el.1L(\'1p 1G\');F}},1t:C($el){$el.2W(q.Q.1F)},bE:C(){E Q=$(q.Q.21[0]).2o(\'3k, ol\',q.$T[0]);$(Q).1h(\'3k, ol\').25().48();$(Q).1h(\'li\').1E($(\'<br>\')).25().48();E $el=q.L.4x(Q,\'29\');q.Q.3j($el)},fP:C(Y){1k.3Z(\'7n\');1k.3Z(\'9S\',N,Y);q.1x.4r();q.$T.1h(\'p:fT\').1t();E 1X=q.K.49();if(Y!=\'p\'){$(1X).1h(\'1M\').1t()}if(!q.G.1K){q.Q.3j($(1X))}q.$T.1h(\'3k, ol, 6W, 29, p\').1u($.1d(q.L.3T,q));if(q.G.1K&&Y==\'p\'){q.L.5T(1X)}},bF:C(Y){if(q.Q.6g==\'8B\'||q.Q.6g==\'8h\'){if(Y==\'29\'){q.Q.bE()}O{F}}E 1X=q.K.6e(Y);if(1X===N)F;E $1X=$(1X);q.Q.dj($1X);E $fS=$1X.1h(q.G.8E.31(\',\')+\', 2Y, 3V, dE, dF, dI, 6s, 6W\');$fS.25().48();if(Y!=\'p\'&&Y!=\'29\')$1X.1h(\'1M\').1t();$.1u(q.Q.21,$.1d(q.L.3T,q));$1X.1E(q.K.71(2));if(!q.G.1K){q.Q.3j($1X)}q.$T.1h(\'3k, ol, 6W, 29, p\').1u($.1d(q.L.3T,q));$1X.1h(\'29:fT\').1t();if(q.Q.8K){q.L.4V($1X)}if(q.G.1K&&Y==\'p\'){q.L.5T($1X)}if(q.G.1K){E $1N=$1X.1N().1N();if($1N.8b()!=0&&$1N[0].1o===\'5i\'){$1N.1t()}}},dj:C($1X){if($1X.2o(\'3V\',q.$T[0]).12===0)F;if($1X.2o(\'6W\',q.$T[0]).12===0)$1X.6e(\'<6W>\');if($1X.2o(\'2Y\',q.$T[0]).12===0&&$1X.2o(\'6s\').12===0){$1X.6e(\'<2Y>\')}},hd:C(1y,1F){E 21=q.K.44();$(21).1L(\'1f-\'+1y);q.1e.1T()},lq:C(1y,1F){E 21=q.K.44();$(21).1c(\'1f-\'+1y,1F);q.1e.1T()},lr:C(1y,1F){E 21=q.K.44();$.1u(21,C(){if($(q).1c(\'1f-\'+1y)){$(q).1L(\'1f-\'+1y)}O{$(q).1c(\'1f-\'+1y,1F)}})},1L:C(1c,1F){E 21=q.K.44();$(21).1L(1c);q.1e.1T()},ln:C(1c,1F){E 21=q.K.44();$(21).1c(1c,1F);q.1e.1T()},lm:C(1c,1F){E 21=q.K.44();$.1u(21,C(){if($(q).1c(1y)){$(q).1L(1y)}O{$(q).1c(1y,1F)}})},2W:C(3E){E 21=q.K.44();$(21).2W(3E);q.L.5C(21,\'1G\');q.1e.1T()},9o:C(3E){E 21=q.K.44();$(21).2g(3E);q.1e.1T()},7C:C(3E){E 21=q.K.44();$(21).7C(3E);q.1e.1T()}}},28:C(){F{1U:C(1m){if(1s 1m==\'1z\'||1m==\'8P\'){q.28.fV()}O{q.28.fU()}},fV:C(){q.K.3o();q.G.28.2N(q.$T.B());q.K.3e()},fU:C(){q.K.3o();q.G.8M.2N(q.$T.B());q.K.3e()},fN:C(){q.$T.B(q.G.28.fO())},fH:C(){q.$T.B(q.G.8M.fO())},cK:C(){q.G.28.2N(q.$T.B())},8P:C(){if(q.G.28.12===0)F;q.28.1U(\'bC\');q.28.fN();q.K.3e();3w($.1d(q.1R.2K,q),50)},bC:C(){if(q.G.8M.12===0)F;q.28.1U(\'8P\');q.28.fH();q.K.3e();3w($.1d(q.1R.2K,q),50)}}},2f:C(){F{db:N,ag:1q,fG:C(){q.2f.fF();q.2f.fI();q.2f.fM();q.2f.fJ();q.2f.gc()},bA:C(){F(q.$2m[0].1o===\'ls\')},fF:C(){q.$2P=$(\'<1j 1G="I-2P" 9C="lB" />\')},fX:C(){q.$2y=$(\'<2y />\').1c(\'1y\',q.2f.fE())},fE:C(){F((1s(1y)==\'1z\'))?\'dh-\'+q.2H:q.$2m.1c(\'id\')},fI:C(){E 1C=(q.2f.bA())?\'2L\':\'B\';q.dh=$.3h(q.$2m[1C]())},fJ:C(){q.$T.1c({\'5j\':1q,\'gd\':q.G.dc})},fM:C(){E 1C=(q.2f.bA())?\'fL\':\'fK\';q.2f[1C]()},fL:C(){q.$T=$(\'<1j />\');q.$2y=q.$2m;q.$2P.fY(q.$2m).1E(q.$T).1E(q.$2m);q.$T.2g(\'I-T\');q.$2m.3s()},fK:C(){q.$T=q.$2m;q.2f.fX();q.$2P.fY(q.$T).1E(q.$T).1E(q.$2y);q.$T.2g(\'I-T\');q.$2y.3s()},gc:C(){q.1e.1U(q.dh);q.2f.ga();q.2f.gb();if(q.G.5W)F;3w($.1d(q.1e.cF,q),aE)},gb:C(){q.2f.g4();q.2f.g7();q.2f.gg();q.2f.g1();if(q.G.1A){q.G.1A=q.1A.3Q();q.1A.2f()}q.1b.ja();q.2f.92();3w($.1d(q.1R.2K,q),4);q.1W.2r(\'3Q\')},ga:C(){$(q.$2y).1c(\'gd\',q.G.dc);if(q.G.1K)q.$T.2g(\'I-1K\');if(q.G.6G)q.$T.1c(\'6G\',q.G.6G);if(q.G.ae)q.$T.1O(\'ae\',q.G.ae);if(q.G.b3)q.$T.1O(\'b3\',q.G.b3)},g9:C(e){e.2t();if(!q.G.ge||!q.G.gh)F;E 5R=e.aU.5R;q.1w.kf(5R[0],e)},gf:C(e){q.1e.1T();3w(q.1x.4r,1);q.1W.2r(\'4Z\',e)},gg:C(){q.$T.on(\'kb.I lc.I\',C(e){e.2t();e.dK()});q.$T.on(\'4Z.I\',$.1d(C(e){e=e.7L||e;if(3p.aR===1z||!e.aU)F 1q;if(e.aU.5R.12===0){F q.2f.gf(e)}O{q.2f.g9(e)}3w(q.1x.4r,1);q.1W.2r(\'4Z\',e)},q));q.$T.on(\'2z.I\',$.1d(C(e){E 9p=q.1W.7x();E 1m=(9p==\'2z\'||9p==\'54\')?N:\'2z\';q.1W.93(1m);q.L.9z();q.1W.2r(\'2z\',e)},q));q.$T.on(\'5o.I\',$.1d(q.5o.3Q,q));q.$T.on(\'l9.I\',$.1d(q.1e.1T,q));q.$T.on(\'1D.I\',$.1d(q.1D.3Q,q));q.$T.on(\'2s.I\',$.1d(q.2s.3Q,q));if($.5K(q.G.g8)){q.$2y.on(\'1D.I-2y\',$.1d(q.G.g8,q))}if($.5K(q.G.g2)){q.$2y.on(\'2s.I-2y\',$.1d(q.G.g2,q))}q.$T.on(\'2p.I\',$.1d(C(e){if($.5K(q.G.l5)){q.1W.2r(\'2p\',e)}q.2f.db=1q;q.2f.ag=N;if(q.K.3x()===N){q.K.1a();q.14.2O(q.$T[0],0);q.14.3H(q.$T[0],0);q.K.4f()}},q));$(1k).on(\'6j.I-cC.\'+q.2H,$.1d(C(e){if(q.2b)F;if(q.7T)F;if($(e.1Q).2o(\'.I-T, .I-1A, .I-1n\').8b()!==0){F}q.L.9z();if(!q.2f.ag&&$.5K(q.G.l1)){q.1W.2r(\'cC\',e)}q.2f.db=N;q.2f.ag=1q},q))},g1:C(){if(q.2A.a1()){q.2A.3a()}q.3i.aT();if(q.G.2p)3w(q.2p.2O,6O);if(q.G.g0)3w(q.2p.3H,6O)},92:C(){if(!q.G.92)F;$.1u(q.G.92,$.1d(C(i,s){E 1C=(1s df!==\'1z\'&&1s df[s]!==\'1z\')?df:3Y.fn;if(!$.5K(1C[s])){F}q[s]=1C[s]();E 6h=q.dg(q[s]);E 2q=6h.12;2D(E z=0;z<2q;z++){q[s][6h[z]]=q[s][6h[z]].a4(q)}if($.5K(q[s].3Q)){q[s].3Q()}},q))},g4:C(){if(!q.L.1P(\'4b\'))F;4U{1k.3Z(\'md\',N,N);1k.3Z(\'m9\',N,N)}56(e){}},g7:C(){if(!q.L.1P(\'2G\'))F;1k.3Z("m5",N,N)}}},1v:C(){F{2f:C(2h,2U){E $1v=$(\'<a 2l="#" 1G="3K-8X 3K-\'+2h+\'" 3X="\'+2h+\'" />\').1c({\'9C\':\'1v\',\'4O-2M\':2U.1J,\'6G\':\'-1\'});if(2U.1C||2U.4y||2U.1n){q.1v.g6($1v,2h,2U)}if(2U.1n){$1v.2g(\'I-1A-V-1n\').1c(\'4O-i1\',1q);E $1n=$(\'<1j 1G="I-1n I-1n-\'+q.2H+\' I-1n-2P-\'+2h+\'" 1p="6D: 5p;">\');$1v.1f(\'1n\',$1n);q.1n.2f(2h,$1n,2U.1n)}if(q.L.7K()){q.1v.g5($1v,2h,2U.1J)}F $1v},g6:C($1v,2h,2U){$1v.on(\'5B 2z\',$.1d(C(e){if($1v.3u(\'I-1v-7p\'))F N;E 1m=\'1C\';E 2B=2U.1C;if(2U.4y){1m=\'4y\';2B=2U.4y}O if(2U.1n){1m=\'1n\';2B=N}q.1v.bq(e,2h,1m,2B)},q))},g5:C($1v,1y,1J){E $3m=$(\'<1i>\').2g(\'I-1A-3m I-1A-3m-\'+q.2H+\' I-1A-3m-\'+1y).3s().B(1J);$3m.bl(\'3f\');$1v.on(\'ba\',C(){if($(q).3u(\'I-1v-7p\')){F}E 3y=$1v.2v();$3m.1O({2V:(3y.2V+$1v.68())+\'px\',2c:(3y.2c+$1v.7D()/2-$3m.7D()/2)+\'px\'});$3m.2R()});$1v.on(\'b4\',C(){$3m.3s()})},bq:C(e,2h,1m,2B){q.1v.mn=q.1S.8c();e.2t();$(1k).1h(\'.I-1A-3m\').3s();if(q.L.1P(\'2G\'))e.9i=N;if(1m==\'4y\')q.26.3a(2B);O if(1m==\'1n\')q.1n.2R(e,2h);O q.1v.gZ(e,2B,2h)},gZ:C(e,2B,2h){E 1C;if($.5K(2B))2B.64(q,2h);O if(2B.3J(/\\./)!=\'-1\'){1C=2B.4A(\'.\');if(1s q[1C[0]]==\'1z\')F;q[1C[0]][1C[1]](2h)}O q[2B](2h);q.1R.4i(e,2h)},1a:C(1l){F q.$1A.1h(\'a.3K-\'+1l)},8j:C(1l){q.1v.1a(1l).2g(\'I-8x\')},h7:C(1l){q.1v.1a(1l).2W(\'I-8x\')},cP:C(1l){if(1s 1l===\'1z\'){q.$1A.1h(\'a.3K-8X\').2W(\'I-8x\')}O{q.$1A.1h(\'a.3K-8X\').5O(\'.3K-\'+1l).2W(\'I-8x\')}},h8:C(){q.$1A.1h(\'a.3K-8X\').5O(\'a.3K-B, a.3K-h0\').2W(\'I-1v-7p\')},hm:C(){q.$1A.1h(\'a.3K-8X\').5O(\'a.3K-B, a.3K-h0\').2g(\'I-1v-7p\')},mj:C(1l,9Q){q.1v.1a(1l).2g(\'3K-\'+9Q)},m3:C(1l,9Q){q.1v.1a(1l).2W(\'3K-\'+9Q)},lN:C(1l,1y){E $1v=q.1v.1a(1l);$1v.2W(\'I-23-M\').2g(\'fa-I-23\');$1v.B(\'<i 1G="fa \'+1y+\'"></i>\')},ct:C($23,2B){if($23=="28")F;E 1m=(2B==\'1n\')?\'1n\':\'1C\';E 1l=$23.1c(\'3X\');$23.on(\'5B 2z\',$.1d(C(e){if($23.3u(\'I-1v-7p\'))F N;q.1v.bq(e,1l,1m,2B)},q))},cN:C($23,1n){$23.2g(\'I-1A-V-1n\').1c(\'4O-i1\',1q);E 1l=$23.1c(\'3X\');q.1v.ct($23,\'1n\');E $1n=$(\'<1j 1G="I-1n I-1n-\'+q.2H+\' I-1n-2P-\'+1l+\'" 1p="6D: 5p;">\');$23.1f(\'1n\',$1n);if(1n)q.1n.2f(1l,$1n,1n);F $1n},cK:C(1l,1J){if(!q.G.1A)F;if(q.1v.9c(1l))F"28";E 23=q.1v.2f(1l,{1J:1J});23.2g(\'I-23-M\');q.$1A.1E($(\'<li>\').1E(23));F 23},lO:C(1l,1J){if(!q.G.1A)F;if(q.1v.9c(1l))F"28";E 23=q.1v.2f(1l,{1J:1J});23.2g(\'I-23-M\');q.$1A.6C($(\'<li>\').1E(23));F 23},lP:C(i0,1l,1J){if(!q.G.1A)F;if(q.1v.9c(1l))F"28";E 23=q.1v.2f(1l,{1J:1J});23.2g(\'I-23-M\');E $23=q.1v.1a(i0);if($23.12!==0)$23.1r().3C($(\'<li>\').1E(23));O q.$1A.1E($(\'<li>\').1E(23));F 23},lG:C(hZ,1l,1J){if(!q.G.1A)F;if(q.1v.9c(1l))F"28";E 23=q.1v.2f(1l,{1J:1J});23.2g(\'I-23-M\');E $23=q.1v.1a(hZ);if($23.12!==0)$23.1r().9N($(\'<li>\').1E(23));O q.$1A.1E($(\'<li>\').1E(23));F 23},1t:C(1l){q.1v.1a(1l).1t()},9c:C(1l){F(1l=="8P"||1l=="bC")&&!q.L.7K()}}},1S:C(){F{2O:C(R){if(!q.L.6X(R)){E 3b=q.L.ad();$(R).6C(3b);q.1S.3H(3b)}O{q.1S.1U(R,0,R,0)}},3H:C(R){R=R[0]||R;if(R.i3.9R==1){F q.1S.58(R.i3)}q.1S.1U(R,1,R,1)},1U:C(4P,i6,7I,i5){4P=4P[0]||4P;7I=7I[0]||7I;if(q.L.7f(4P.1o)&&4P.3v===\'\'){4P.3v=q.G.5Z}if(4P.1o==\'5i\'&&q.G.1K===N){E 1r=$(q.G.5V)[0];$(4P).2x(1r);4P=1r;7I=4P}q.K.1a();4U{q.14.2O(4P,i6);q.14.3H(7I,i5)}56(e){}q.K.4f()},58:C(R){4U{E Y=$(R)[0].1o;if(Y!=\'5i\'&&!q.L.6X(R)){E 3b=q.L.ad();$(R).3C(3b);q.1S.3H(3b)}O{if(Y!=\'5i\'&&q.L.1P(\'2G\')){q.1S.2O($(R).1N())}O{q.1S.dZ(R,\'3C\')}}}56(e){E 3b=q.L.ad();$(R).3C(3b);q.1S.3H(3b)}},dy:C(R){if(q.L.6X(R)){q.1S.3H($(R).4B())}O{q.1S.dZ(R,\'9N\')}},dZ:C(R,1m){if(!q.L.1P(\'2G\'))q.$T.2p();R=R[0]||R;q.K.1a();if(1m==\'3C\'){4U{q.14.7z(R);q.14.kZ(R)}56(e){}}O{4U{q.14.lW(R);q.14.k9(R)}56(e){}}q.14.42(N);q.K.4f()},9G:C(R){R=R[0]||R;q.K.1a();E 9Z=q.14.84();9Z.8H(R);9Z.3H(q.14.dL,q.14.dM);F $.3h(9Z.4o()).12},8c:C(){E 2v=0;E 2T=3p.4K();if(2T.7y>0){E 14=3p.4K().67(0);E 9W=14.84();9W.8H(q.$T[0]);9W.3H(14.dL,14.dM);2v=9W.4o().12}F 2v},aH:C(2b,2j){if(1s 2j==\'1z\')2j=2b;if(!q.2p.cI())q.2p.2O();E 2T=q.K.1a();E R,2v=0;E i4=1k.lV(q.$T[0],mb.lS,4m,4m);55(R=i4.lR()){2v+=R.5P.12;if(2v>2b){q.14.2O(R,R.5P.12+2b-2v);2b=lH}if(2v>=2j){q.14.3H(R,R.5P.12+2j-2v);5U}}q.14.42(N);q.K.4f()},lM:C(2b,2j){q.1S.aH(2b,2j)},mi:C(){F q.1S.8c()}}},1x:C(){F{hM:C(B){B=q.1x.il(B);B=B.J(/<3W(.*?[^>]?)>([\\w\\W]*?)<\\/3W>/gi,\'<2F 1G="I-3W-Y" 1p="6D: 5p;" $1>$2</2F>\');B=B.J(/\\$/g,\'&#36;\');B=B.J(/<a 2l="(.*?[^>]?)®(.*?[^>]?)">/gi,\'<a 2l="$1&mg$2">\');if(q.G.6q&&!q.G.1K)B=q.1x.6q(B);if(q.G.1K)B=q.1x.8s(B);B=q.1x.bP(B);E $1j=$(\'<1j>\');$1j.B(B);E e4=$1j.1h(\'3O[1p]\');if(e4.12!==0){e4.2x(C(){E $el=$(q);E $1i=$(\'<1i>\').1c(\'1p\',$el.1c(\'1p\'));F $1i.1E($el.25())});B=$1j.B()}$1j.1t();B=B.J(/<3O(.*?)>/gi,\'\');B=B.J(/<\\/3O>/gi,\'\');B=q.1I.2K(B);if(q.G.2X)B=q.2X.2K(B);B=q.1x.7d(B);B=q.1x.bQ(B);B=B.J(/&8J;/g,\'&\');F B},aY:C(B){B=B.J(/\\6c/g,\'\');B=B.J(/&#bL;/gi,\'\');if(q.G.hY){B=B.J(/&5k;/gi,\' \')}if(B.3J(/^<p>(||\\s||<br\\s?\\/?>||&5k;)<\\/p>$/i)!=-1){F\'\'}B=B.J(/<2F 1G="I-3W-Y" 1p="6D: 5p;"(.*?[^>]?)>([\\w\\W]*?)<\\/2F>/gi,\'<3W$1>$2</3W>\');B=q.1x.hN(B);E hX={\'\\mm\':\'&mf;\',\'\\m6\':\'&m4;\',\'\\mq\':\'&ld;\',\'\\l0\':\'&lE;\',\'\\o2\':\'&p4;\'};$.1u(hX,C(i,s){B=B.J(2a 2n(i,\'g\'),s)});if(q.L.1P(\'4b\')){B=B.J(/<br\\s?\\/?>$/gi,\'\')}B=B.J(2a 2n(\'<br\\\\s?/?></li>\',\'gi\'),\'</li>\');B=B.J(2a 2n(\'</li><br\\\\s?/?>\',\'gi\'),\'</li>\');B=B.J(/<(.*?)3X="\\s*?"(.*?[^>]?)>/gi,\'<$1$2">\');B=B.J(/<(.*?)1p="\\s*?"(.*?[^>]?)>/gi,\'<$1$2">\');B=B.J(/="">/gi,\'>\');B=B.J(/""">/gi,\'">\');B=B.J(/"">/gi,\'">\');B=B.J(/<1j(.*?)1f-8u="I"(.*?[^>])>/gi,\'<1j$1$2>\');B=B.J(/<(.*?) 1f-3M="I"(.*?[^>])>/gi,\'<$1$2>\');E $1j=$("<1j/>").B($.dH(B,1k,1q));$1j.1h("1i").1L("3X");$1j.1h(\'2F .I-7m-3b\').1u(C(){$(q).25().48()});B=$1j.B();B=B.J(/<1M(.*?[^>])3X="(.*?[^>])"(.*?[^>])>/gi,\'<1M$1$3>\');B=B.J(/<1i 1G="I-7m-3b">(.*?)<\\/1i>/gi,\'$1\');B=B.J(/ 1f-3o-2i="(.*?[^>])"/gi,\'\');B=B.J(/<1i(.*?)id="I-M-2P"(.*?[^>])>([\\w\\W]*?)<1M(.*?)><\\/1i>/gi,\'$3<1M$4>\');B=B.J(/<1i(.*?)id="I-M-8m"(.*?[^>])>(.*?)<\\/1i>/gi,\'\');B=B.J(/<1i(.*?)id="I-M-5I"(.*?[^>])>(.*?)<\\/1i>/gi,\'\');B=B.J(/<3O(.*?)>/gi,\'\');B=B.J(/<\\/3O>/gi,\'\');B=q.1I.2K(B);if(q.G.hR){B=B.J(/<a(.*?)3X="hQ"(.*?[^>])>/gi,\'<a$1$2>\');B=B.J(/<a(.*?[^>])>/gi,\'<a$1 3X="hQ">\')}B=B.J(/\\qH-I-(Y|1G|1p)="(.*?[^>])"/gi,\'\');B=B.J(2a 2n(\'<(.*?) 1f-3M="I"(.*?[^>])>\',\'gi\'),\'<$1$2>\');B=B.J(2a 2n(\'<(.*?) 1f-3M="I">\',\'gi\'),\'<$1>\');B=B.J(/&8J;/g,\'&\');F B},8G:C(B,8v){B=$.3h(B);B=B.J(/\\$/g,\'&#36;\');B=B.J(/<1i 1G="s[0-9]">/gi,\'<1i>\');B=B.J(/<1i 1G="hP-qJ-3b">&5k;<\\/1i>/gi,\' \');B=B.J(/<1i 1G="hP-5t-1i"[^>]*>\\t<\\/1i>/gi,\'\\t\');B=B.J(/<1i[^>]*>(\\s|&5k;)<\\/1i>/gi,\' \');if(q.G.hO){F q.1x.ap(B)}if(!q.L.9u()&&1s 8v==\'1z\'){if(q.L.4Y([\'hS\',\'A\'])){F q.1x.ap(B,N)}if(q.L.4Y(\'9J\')){B=B.J(/”/g,\'"\');B=B.J(/“/g,\'"\');B=B.J(/‘/g,\'\\\'\');B=B.J(/’/g,\'\\\'\');F q.1x.ic(B)}if(q.L.4Y([\'aL\',\'cJ\',\'cs\',\'c8\',\'c3\',\'c6\',\'bM\'])){B=q.1x.ih(B);if(!q.L.1P(\'2G\')){E Q=q.K.49();if(Q&&Q.1o==\'P\'){B=B.J(/<1M(.*?)>/gi,\'<p><1M$1></p>\')}}F B}if(q.L.4Y([\'6u\'])){B=q.1x.aq(B,\'2Y\');if(q.G.1K)B=q.1x.8s(B);B=q.1x.ii(B);F B}if(q.L.4Y([\'5L\'])){F q.1x.aq(B,\'li\')}}B=q.1x.iw(B,8v);if(!q.1x.8g){if(q.G.1K)B=q.1x.8s(B);if(q.G.6q)B=q.1x.6q(B);B=q.1x.bP(B)}B=q.1x.hT(B);B=q.1x.hU(B);B=q.1x.aq(B,\'ip\');if(!q.1x.8g&&q.G.2X){B=q.2X.2K(B)}B=q.1x.ik(B);B=q.1x.ir(B);B=q.1x.io(B);B=q.1x.bQ(B);F B},hT:C(B){B=B.J(/<!--[\\s\\S]*?-->/gi,\'\');B=B.J(/<1p[^>]*>[\\s\\S]*?<\\/1p>/gi,\'\');B=B.J(/<o\\:p[^>]*>[\\s\\S]*?<\\/o\\:p>/gi,\'\');if(B.1V(/1G="?hV|1p="[^"]*\\hW-|1p=\'[^\'\']*\\hW-|w:qL/i)){B=B.J(/<!--[\\s\\S]+?-->/gi,\'\');B=B.J(/<(!|3W[^>]*>.*?<\\/3W(?=[>\\s])|\\/?(\\?qF(:\\w+)?|1M|5c|V|1p|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\'\');B=B.J(/<(\\/?)s>/gi,"<$qj>");B=B.J(/ /gi,\' \');B=B.J(/<1i\\s+1p\\s*=\\s*"\\s*aw-qG\\s*:\\s*qo\\s*;?\\s*"\\s*>([\\s\\bm]*)<\\/1i>/gi,C(5b,b1){F(b1.12>0)?b1.J(/./," ").dn(9H.qi(b1.12/2)).4A("").31("\\bm"):\'\'});B=q.1x.it(B);B=B.J(/<1M(.*?)v:qd=(.*?)>/gi,\'\');B=B.J(/4q="1Z\\:\\/\\/(.*?)"/,\'4q=""\');E $1j=$("<1j/>").B(B);E 69=N;E 9m=1;E e7=[];$1j.1h("p[1p]").1u(C(){E 3N=$(q).1c(\'1p\').1V(/aw\\-2d\\:l([0-9]+)\\qe([0-9]+)/);if(3N){E 5Q=5H(3N[1]);E 63=5H(3N[2]);E eg=$(q).B().1V(/^[\\w]+\\./)?"ol":"3k";E $li=$("<li/>").B($(q).B());$li.B($li.B().J(/^([\\w\\.]+)</,\'<\'));$li.1h("1i:3I").1t();if(63==1&&$.3t(5Q,e7)==-1){E $2d=$("<"+eg+"/>").1c({"1f-7V":63,"1f-2d":5Q}).B($li);$(q).2x($2d);69=5Q;e7.2N(5Q)}O{if(63>9m){E $aV=$1j.1h(\'[1f-7V="\'+9m+\'"][1f-2d="\'+69+\'"]\');E $69=$aV;2D(E i=9m;i<63;i++){$2d=$("<"+eg+"/>");$2d.bl($69.1h("li").3c());$69=$2d}$69.1c({"1f-7V":63,"1f-2d":5Q}).B($li)}O{E $aV=$1j.1h(\'[1f-7V="\'+63+\'"][1f-2d="\'+5Q+\'"]\').3c();$aV.1E($li)}9m=63;69=5Q;$(q).1t()}}});$1j.1h(\'[1f-7V][1f-2d]\').1L(\'1f-7V 1f-2d\');B=$1j.B();B=B.J(/·/g,\'\');B=B.J(/<p 1G="hV(.*?)"/gi,\'<p\');B=B.J(/ 1G=\\"(aw[^\\"]*)\\"/gi,"");B=B.J(/ 1G=(aw\\w+)/gi,"");B=B.J(/<o:p(.*?)>([\\w\\W]*?)<\\/o:p>/gi,\'$2\');B=B.J(/\\n/g,\' \');B=B.J(/<p>\\n?<li>/gi,\'<li>\')}F B},hU:C(B){B=B.J(/<b\\ok="i7-4D-2u(.*?)">([\\w\\W]*?)<\\/b>/gi,"$2");B=B.J(/<b(.*?)id="qv-i7-qx(.*?)">([\\w\\W]*?)<\\/b>/gi,"$3");B=B.J(/<1i[^>]*(3O-1p: 4h; 3O-7W: 4n|3O-7W: 4n; 3O-1p: 4h)[^>]*>/gi,\'<1i 1p="3O-7W: 4n;"><1i 1p="3O-1p: 4h;">\');B=B.J(/<1i[^>]*3O-1p: 4h[^>]*>/gi,\'<1i 1p="3O-1p: 4h;">\');B=B.J(/<1i[^>]*3O-7W: 4n[^>]*>/gi,\'<1i 1p="3O-7W: 4n;">\');B=B.J(/<1i[^>]*1g-7e: 5r[^>]*>/gi,\'<1i 1p="1g-7e: 5r;">\');B=B.J(/<1M>/gi,\'\');B=B.J(/\\n{3,}/gi,\'\\n\');B=B.J(/<3O(.*?)>([\\w\\W]*?)<\\/3O>/gi,\'$2\');B=B.J(/<p><p>/gi,\'<p>\');B=B.J(/<\\/p><\\/p>/gi,\'</p>\');B=B.J(/<li>(\\s*|\\t*|\\n*)<p>/gi,\'<li>\');B=B.J(/<\\/p>(\\s*|\\t*|\\n*)<\\/li>/gi,\'</li>\');B=B.J(/<\\/p>\\s<p/gi,\'<\\/p><p\');B=B.J(/<1M 4q="7Q-qb-2i\\:\\/\\/(.*?)"(.*?)>/gi,\'\');B=B.J(/<p>•([\\w\\W]*?)<\\/p>/gi,\'<li>$1</li>\');if(q.L.1P(\'4b\')){B=B.J(/<br\\s?\\/?>$/gi,\'\')}F B},aq:C(B,1m){E 2e=[\'1i\',\'a\',\'2F\',\'29\',\'95\',\'em\',\'5d\',\'1e\',\'ay\',\'85\',\'dW\',\'9d\',\'E\',\'az\',\'eo\',\'7i\',\'7j\',\'b\',\'i\',\'u\',\'4l\',\'ol\',\'3k\',\'li\',\'dl\',\'dt\',\'dd\',\'p\',\'br\',\'6S\',\'8p\',\'4J\',\'7M\',\'8y\',\'43\',\'1M\',\'3V\',\'2Y\',\'6s\',\'6W\',\'dF\',\'dI\',\'dE\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'];E ep=N;E eh=[[\'a\',\'*\'],[\'1M\',[\'4q\',\'7v\']],[\'1i\',[\'1G\',\'3X\',\'1f-3M\']],[\'4J\',\'*\'],[\'6S\',\'*\'],[\'8p\',\'*\'],[\'7M\',\'*\'],[\'43\',\'*\'],[\'8y\',\'*\'],[\'4D\',\'*\']];if(1m==\'ip\'){ep=[\'p\',\'1i\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'];eh=[[\'3V\',\'1G\'],[\'2Y\',[\'qh\',\'qV\']],[\'a\',\'*\'],[\'1M\',[\'4q\',\'7v\',\'1f-I-8F-M\']],[\'1i\',[\'1G\',\'3X\',\'1f-3M\']],[\'4J\',\'*\'],[\'6S\',\'*\'],[\'8p\',\'*\'],[\'7M\',\'*\'],[\'43\',\'*\'],[\'8y\',\'*\'],[\'4D\',\'*\']]}O if(1m==\'2Y\'){2e=[\'3k\',\'ol\',\'li\',\'1i\',\'a\',\'95\',\'em\',\'5d\',\'1e\',\'ay\',\'85\',\'9d\',\'E\',\'az\',\'eo\',\'7i\',\'7j\',\'b\',\'i\',\'u\',\'4l\',\'ol\',\'3k\',\'li\',\'dl\',\'dt\',\'dd\',\'br\',\'4J\',\'6S\',\'8p\',\'7M\',\'8y\',\'43\',\'1M\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\']}O if(1m==\'li\'){2e=[\'3k\',\'ol\',\'li\',\'1i\',\'a\',\'95\',\'em\',\'5d\',\'1e\',\'ay\',\'85\',\'9d\',\'E\',\'az\',\'eo\',\'7i\',\'7j\',\'b\',\'i\',\'u\',\'4l\',\'br\',\'4J\',\'6S\',\'8p\',\'7M\',\'8y\',\'43\',\'1M\']}E 47={4c:(q.G.4c)?q.G.4c:N,4s:(q.G.4s)?q.G.4s:2e,6v:1q,qf:1q,1L:(q.G.1L)?q.G.1L:N,52:(q.G.52)?q.G.52:eh,3T:ep};F q.1I.2K(B,47)},io:C(B){B=B.J(/<(p|h[1-6])>(|\\s|\\n|\\t|<br\\s?\\/?>)<\\/(p|h[1-6])>/gi,\'\');if(!q.G.1K)B=B.J(/<br>$/i,\'\');F B},ir:C(B){B=B.J(/<1i>(.*?)<\\/1i>/gi,\'$1\');B=B.J(/<1i[^>]*>\\s|&5k;<\\/1i>/gi,\' \');F B},it:C(B){if(!q.L.1P(\'2G\'))F B;E 5D=$.3h(B);if(5D.3J(/^<a(.*?)>(.*?)<\\/a>$/i)===0){B=B.J(/^<a(.*?)>(.*?)<\\/a>$/i,"$2")}F B},iw:C(B,8v){q.1x.8g=N;if(!q.L.9u()&&1s 8v==\'1z\'){E 21=q.G.8E.31(\'|\').J(\'P|\',\'\').J(\'8a|\',\'\');E iu=B.1V(2a 2n(\'</(\'+21+\')>\',\'gi\'));E aB=B.1V(/<\\/(p|1j)>/gi);if(!iu&&(aB===4m||(aB&&aB.12<=1))){E im=B.1V(/<br\\s?\\/?>/gi);if(!im){q.1x.8g=1q;B=B.J(/<\\/?(p|1j)(.*?)>/gi,\'\')}}}F B},qY:C(3G,5z){5z=(((5z||\'\')+\'\').3g().1V(/<[a-z][a-7Y-9]*>/g)||[]).31(\'\');E 2e=/<\\/?([a-z][a-7Y-9]*)\\b[^>]*>/gi;F 3G.J(2e,C($0,$1){F 5z.4L(\'<\'+$1.3g()+\'>\')>-1?$0:\'\'})},il:C(B){B=q.1x.ib(B);B=q.1x.ia(B);B=q.1x.i9(B);F B},ib:C(B){E 2F=B.1V(/<2F(.*?)>([\\w\\W]*?)<\\/2F>/gi);if(2F!==4m){$.1u(2F,$.1d(C(i,s){E 2E=s.1V(/<2F(.*?)>([\\w\\W]*?)<\\/2F>/i);2E[2]=2E[2].J(/<br\\s?\\/?>/g,\'\\n\');2E[2]=2E[2].J(/&5k;/g,\' \');if(q.G.72){2E[2]=2E[2].J(/\\t/g,8Q(q.G.72+1).31(\' \'))}2E[2]=q.1x.at(2E[2]);2E[2]=2E[2].J(/\\$/g,\'&#36;\');B=B.J(s,\'<2F\'+2E[1]+\'>\'+2E[2]+\'</2F>\')},q))}F B},ia:C(B){E 1e=B.1V(/<1e(.*?)>([\\w\\W]*?)<\\/1e>/gi);if(1e!==4m){$.1u(1e,$.1d(C(i,s){E 2E=s.1V(/<1e(.*?)>([\\w\\W]*?)<\\/1e>/i);2E[2]=2E[2].J(/&5k;/g,\' \');2E[2]=q.1x.at(2E[2]);2E[2]=2E[2].J(/\\$/g,\'&#36;\');B=B.J(s,\'<1e\'+2E[1]+\'>\'+2E[2]+\'</1e>\')},q))}F B},i9:C(B){B=B.J(/&lt;1i id=&6p;K-2u-([0-9])&6p; 1G=&6p;I-K-2u&6p; 1f-3M=&6p;I&6p;&gt;​&lt;\\/1i&gt;/g,\'<1i id="K-2u-$1" 1G="I-K-2u" 1f-3M="I">​</1i>\');F B},c2:C(B){B=B.J(/<br\\s?\\/?>|<\\/H[1-6]>|<\\/p>|<\\/1j>|<\\/li>|<\\/2Y>/gi,\'\\n\');E 5D=1k.3B(\'1j\');5D.3v=B;B=5D.qm||5D.qC;F $.3h(B)},ap:C(B,2X){B=q.1x.c2(B);B=B.J(/\\n\\s*\\n/g,"\\n");B=B.J(/\\n\\n/g,"\\n");B=B.J(/\\n/g,\'<br />\');if(q.G.2X&&1s 2X==\'1z\'&&!q.L.1P(\'4b\')){B=q.2X.2K(B)}F B},ic:C(B){B=B.J(/<1M(.*?) 1p="(.*?)"(.*?[^>])>/gi,\'<1M$1$3>\');B=B.J(/<1M(.*?)>/gi,\'&lt;1M$1&gt;\');B=q.1x.c2(B);if(q.G.72){B=B.J(/\\t/g,8Q(q.G.72+1).31(\' \'))}B=q.1x.at(B);F B},ih:C(B){B=B.J(/<1M(.*?)>/gi,\'[1M$1]\');B=B.J(/<([qt]*?)>/gi,\'\');B=B.J(/\\[1M(.*?)\\]/gi,\'<1M$1>\');F B},qw:C(B){B=B.J(/<a(.*?)2l="(.*?)"(.*?)>([\\w\\W]*?)<\\/a>/gi,\'[a 2l="$2"]$4[/a]\');B=B.J(/<1M(.*?)>/gi,\'[1M$1]\');B=B.J(/<(.*?)>/gi,\'\');B=B.J(/\\[a 2l="(.*?)"\\]([\\w\\W]*?)\\[\\/a\\]/gi,\'<a 2l="$1">$2</a>\');B=B.J(/\\[1M(.*?)\\]/gi,\'<1M$1>\');F B},at:C(5b){5b=62(5b).J(/&8J;/g,\'&\').J(/&lt;/g,\'<\').J(/&gt;/g,\'>\').J(/&6p;/g,\'"\');F 5b.J(/&/g,\'&8J;\').J(/</g,\'&lt;\').J(/>/g,\'&gt;\').J(/"/g,\'&6p;\')},ik:C(B){if(q.L.1P(\'2G\'))F B;E 1j=1k.3B(\'1j\');1j.3v=B;q.1x.c5($(1j));B=1j.3v;$(1j).1t();F B},4r:C(){if(q.L.1P(\'2G\'))F;q.1x.c5(q.$T);E c4=q.$T.1h(\'h1, h2, h3, h4, h5, h6\');c4.1h(\'1i\').1L(\'1p\');c4.1h(q.G.c7.31(\', \')).1L(\'1p\');q.1e.1T()},c5:C($T){$T.1h(q.G.c7.31(\', \')).1L(\'1p\');$T.1h(\'1i\').5O(\'[1f-3M="I"]\').1L(\'1p\');$T.1h(\'1i[1f-3M="I"], 1M[1f-3M="I"]\').1u(C(i,s){E $s=$(s);$s.1c(\'1p\',$s.1c(\'3X\'))})},qA:C(){},7d:C(B){if(q.L.1P(\'2G\'))F B;B=B.J(2a 2n(\'<1M(.*?[^>])>\',\'gi\'),\'<1M$1 1f-3M="I">\');B=B.J(2a 2n(\'<1i(.*?[^>])>\',\'gi\'),\'<1i$1 1f-3M="I">\');E 3N=B.1V(2a 2n(\'<(1i|1M)(.*?)1p="(.*?)"(.*?[^>])>\',\'gi\'));if(3N){E 2q=3N.12;2D(E i=0;i<2q;i++){4U{E ij=3N[i].J(/1p="(.*?)"/i,\'1p="$1" 3X="$1"\');B=B.J(3N[i],ij)}56(e){}}}F B},bQ:C(B){E $1j=$(\'<1j />\').B(B);E 2e=q.G.4M;2e.2N(\'1i\');$1j.1h(2e.31(\',\')).1u(C(){E $el=$(q);E Y=q.1o.3g();$el.1c(\'1f-I-Y\',Y);if(Y==\'1i\'){if($el.1c(\'1p\'))$el.1c(\'1f-I-1p\',$el.1c(\'1p\'));O if($el.1c(\'1G\'))$el.1c(\'1f-I-1G\',$el.1c(\'1G\'))}});B=$1j.B();$1j.1t();F B},a3:C(){q.$T.1h(\'li\').1u(C(i,s){E $1N=$(s).1N();if($1N.12!==0&&($1N[0].1o==\'8B\'||$1N[0].1o==\'8h\')){$(s).1E($1N)}})},cm:C(B){B=B.J(/\\n/g,\'\');B=B.J(/[\\t]*/g,\'\');B=B.J(/\\n\\s*\\n/g,"\\n");B=B.J(/^[\\s\\n]*/g,\' \');B=B.J(/[\\s\\n]*$/g,\' \');B=B.J(/>\\s{2,}</g,\'> <\');B=B.J(/\\n\\n/g,"\\n");B=B.J(/\\6c/g,\'\');F B},6q:C(B){if(q.G.1K){B=B.J(/<1j><br\\s?\\/?><\\/1j>/gi,\'<br />\');B=B.J(/<1j(.*?)>([\\w\\W]*?)<\\/1j>/gi,\'$2<br />\')}O{B=B.J(/<1j(.*?)>([\\w\\W]*?)<\\/1j>/gi,\'<p$1>$2</p>\')}B=B.J(/<1j(.*?[^>])>/gi,\'\');B=B.J(/<\\/1j>/gi,\'\');F B},ii:C(B){B=B.J(/<1j\\s(.*?)>/gi,\'<p>\');B=B.J(/<1j><br\\s?\\/?><\\/1j>/gi,\'<br /><br />\');B=B.J(/<1j>([\\w\\W]*?)<\\/1j>/gi,\'$1<br /><br />\');F B},8s:C(B){B=B.J(/<p\\s(.*?)>/gi,\'<p>\');B=B.J(/<p><br\\s?\\/?><\\/p>/gi,\'<br />\');B=B.J(/<p>([\\w\\W]*?)<\\/p>/gi,\'$1<br /><br />\');B=B.J(/(<br\\s?\\/?>){1,}\\n?<\\/29>/gi,\'</29>\');F B},bP:C(B){F B.J(/<6k(.*?)>([\\w\\W]*?)<\\/6k>/gi,\'<4d$1 3X="I-6k-Y">$2</4d>\')},hN:C(B){F B.J(/<4d(.*?) 3X="I-6k-Y"(.*?)>([\\w\\W]*?)<\\/4d>/gi,\'<6k$1$2>$3</6k>\')}}},1e:C(){F{1U:C(B){B=$.3h(B.4o());B=q.1x.hM(B);if(q.L.1P(\'2G\')){B=B.J(/<1i(.*?)id="K-2u-(1|2)"(.*?)><\\/1i>/gi,\'\')}q.$T.B(B);q.1e.1T();if(B!==\'\')q.3i.1t();3w($.1d(q.28.cK,q),15);if(q.2b===N)q.1R.2K()},1a:C(){E 1e=q.$2y.2L();if(q.G.6q)1e=q.1x.6q(1e);if(q.G.1K)1e=q.1x.8s(1e);1e=q.2I.1a(1e);F 1e},1T:C(){3w($.1d(q.1e.hk,q),10)},hk:C(){E B=q.$T.B();if(q.1e.cE&&q.1e.cE==B||(q.2b&&B==\'\')){F}q.1e.cE=B;B=q.1W.2r(\'ql\',B);B=q.1x.aY(B);q.$2y.2L(B);q.1W.2r(\'1T\',B);if(q.2b===N){q.1W.2r(\'kg\',B)}q.2b=N;if(q.3n.B==N){q.3n.B=q.1e.1a()}if(q.G.9r){q.$2y.1N(\'.3F\').1u(C(i,el){el.3F.hi(B)})}q.3n.hj();q.3n.aT()},3j:C(){if(q.G.5W){q.1e.cF()}O{q.1e.hp()}},cF:C(){q.K.3o();q.1e.2v=q.1S.8c();E 5N=$(3p).3S();E 2J=q.$T.7D(),3l=q.$T.68();q.$T.3s();E B=q.$2y.2L();q.ha=q.1x.cm(B);B=q.2I.1a(B);E 2b=0,2j=0;E $6R=$("<1j/>").1E($.dH(q.1x.aY(q.$T.B()),1k,1q));E $a0=$6R.1h("1i.I-K-2u");if($a0.12>0){E a2=q.2I.1a($6R.B()).J(/&8J;/g,\'&\');if($a0.12==1){2b=q.L.as(a2,$6R.1h("#K-2u-1").5X("7P"));2j=2b}O if($a0.12==2){2b=q.L.as(a2,$6R.1h("#K-2u-1").5X("7P"));2j=q.L.as(a2,$6R.1h("#K-2u-2").5X("7P"))-$6R.1h("#K-2u-1").5X("7P").4o().12}}q.K.8U();q.$2y.2L(B);if(q.G.9r){q.$2y.1N(\'.3F\').1u(C(i,el){$(el).2R();el.3F.hi(B);el.3F.qI(\'6O%\',3l);el.3F.qM();if(2b==2j){el.3F.qP(el.3F.76(2b).3L,el.3F.76(2j).ch)}O{el.3F.qO({3L:el.3F.76(2b).3L,ch:el.3F.76(2b).ch},{3L:el.3F.76(2j).3L,ch:el.3F.76(2j).ch})}el.3F.2p()})}O{q.$2y.3l(3l).2R().2p();q.$2y.on(\'1D.I-2y-h9\',q.1e.hb);$(3p).3S(5N);if(q.$2y[0].hl){q.$2y[0].hl(2b,2j)}q.$2y[0].3S=0}q.G.5W=N;q.1v.hm();q.1v.8j(\'B\');q.1W.2r(\'4D\',B)},hp:C(){E B;if(q.G.5W)F;E 2b=0,2j=0;if(q.G.9r){E K;q.$2y.1N(\'.3F\').1u(C(i,el){K=el.3F.r0();2b=el.3F.hn(K[0].ho);2j=el.3F.hn(K[0].dG);B=el.3F.qW()})}O{2b=q.$2y.1a(0).ci;2j=q.$2y.1a(0).cq;B=q.$2y.3s().2L()}if(2b>2j&&2j>0){E hh=2j;E fD=2b;2b=hh;2j=fD}2b=q.1e.cx(B,2b);2j=q.1e.cx(B,2j);B=B.4w(0,2b)+q.K.5e(1)+B.4w(2b);if(2j>2b){E cB=q.K.5e(1).4o().12;B=B.4w(0,2j+cB)+q.K.5e(2)+B.4w(2j+cB)}if(q.ha!==q.1x.cm(B)){q.1e.1U(B)}if(q.G.9r){q.$2y.1N(\'.3F\').3s()}q.$T.2R();if(!q.L.3z(B)){q.3i.1t()}q.K.3e();q.$2y.3d(\'1D.I-2y-h9\');q.1v.h8();q.1v.h7(\'B\');q.1R.2K();q.G.5W=1q;q.1W.2r(\'5W\',B)},hb:C(e){if(e.3r!==9)F 1q;E $el=q.$2y;E 2b=$el.1a(0).ci;$el.2L($el.2L().ac(0,2b)+"\\t"+$el.2L().ac($el.1a(0).cq));$el.1a(0).ci=$el.1a(0).cq=2b+1;F N},cx:C(B,2v){E cy=B.12;E c=0;if(B[2v]==\'>\'){c++}O{2D(E i=2v;i<=cy;i++){c++;if(B[i]==\'>\'){5U}O if(B[i]==\'<\'||i==cy){c=0;5U}}}F 2v+c}}},1W:C(){F{oW:C(){F $.7h({},q)},oV:C(){F q.$T},oR:C(){F q.$2P},oQ:C(){F q.$2m},oS:C(){F q.$2y},oT:C(){F(q.$1A)?q.$1A:N},93:C(1y){q.1W.9p=1y},7x:C(){F q.1W.9p},2r:C(1m,e,1f){E a8=1m+\'oU\';E hf=\'I\';E 2B=q.G[a8];if(q.$2y){E 9i=N;E 9j=$.p2(q.$2y[0],\'9j\');if(1s 9j!=\'1z\'&&1s 9j[a8]!=\'1z\'){$.1u(9j[a8],$.1d(C(1l,1F){if(1F[\'pc\']==hf){E 1f=(1s 1f==\'1z\')?[e]:[e,1f];9i=(1s 1f==\'1z\')?1F.7r.64(q,e):1F.7r.64(q,e,1f)}},q))}if(9i)F 9i}if($.5K(2B)){F(1s 1f==\'1z\')?2B.64(q,e):2B.64(q,e,1f)}O{F(1s 1f==\'1z\')?e:1f}},he:C(){q.G.iz=1q;q.1W.2r(\'he\');q.$2m.3d(\'.I\').hd(\'I\');q.$T.3d(\'.I\');$(1k).3d(\'6j.I-cC.\'+q.2H);$(1k).3d(\'6j.I.\'+q.2H);$(1k).3d(\'2z.I-M-82.\'+q.2H);$(1k).3d(\'2z.I-M-4R-3s.\'+q.2H);$(1k).3d(\'5B.I.\'+q.2H+\' 2z.I.\'+q.2H);$("3f").3d(\'5N.I.\'+q.2H);$(q.G.6F).3d(\'5N.I.\'+q.2H);q.$T.2W(\'I-T I-1K I-3i\');q.$T.1L(\'5j\');E B=q.1e.1a();if(q.G.1A){q.$1A.1h(\'a\').1u(C(){E $el=$(q);if($el.1f(\'1n\')){$el.1f(\'1n\').1t();$el.1f(\'1n\',{})}})}if(q.2f.bA()){q.$2P.3C(q.$2m);q.$2P.1t();q.$2m.2L(B).2R()}O{q.$2P.3C(q.$T);q.$2P.1t();q.$2m.B(B).2R()}if(q.$5h)q.$5h.1t();if(q.$4C)q.$4C.1t();if(q.$81)q.$81.1t();$(\'.I-1A-3m-\'+q.2H).1t();hq(q.9a)}}},1n:C(){F{2f:C(1y,$1n,cw){if(1y==\'30\'&&q.G.cv){$.1u(q.G.cv,$.1d(C(i,s){E 1y=s.Y,1C;if(1s s[\'1G\']!=\'1z\'){1y=1y+\'-\'+s[\'1G\']}s.1m=(q.L.7f(s.Y))?\'Q\':\'26\';if(1s s.1C!=="1z"){1C=s.1C}O{1C=(s.1m==\'26\')?\'26.30\':\'Q.30\'}if(q.G.1K&&s.1m==\'Q\'&&s.Y==\'p\')F;q.30[1y]={Y:s.Y,1p:s.1p,\'1G\':s[\'1G\'],1c:s.1c,1f:s.1f,9e:s.9e};cw[1y]={1C:1C,1J:s.1J}},q))}$.1u(cw,$.1d(C(2h,2U){E $2w=$(\'<a 2l="#" 1G="I-1n-\'+2h+\'" 9C="1v">\'+2U.1J+\'</a>\');if(1y==\'30\')$2w.2g(\'I-30-\'+2h);$2w.on(\'2z\',$.1d(C(e){e.2t();E 1m=\'1C\';E 2B=2U.1C;if(2U.4y){1m=\'4y\';2B=2U.4y}O if(2U.1n){1m=\'1n\';2B=2U.1n}if($(e.1Q).3u(\'I-1n-V-e3\'))F;q.1v.bq(e,2h,1m,2B);q.1n.79()},q));q.1R.cN($2w,2h,2U);$1n.1E($2w)},q))},2R:C(e,1l){if(!q.G.5W){e.2t();F N}E $1v=q.1v.1a(1l);E $1n=$1v.1f(\'1n\').bl(1k.3f);if(q.G.bO){$1n.2g("I-1n-j4")}if($1v.3u(\'7c\')){q.1n.79()}O{q.1n.79();q.1R.7H();q.1W.2r(\'qa\',{1n:$1n,1l:1l,1v:$1v});q.1v.8j(1l);$1v.2g(\'7c\');E 7t=$1v.2v();E cf=$1n.2J();if((7t.2c+cf)>$(1k).2J()){7t.2c=9H.p6(0,7t.2c-cf)}E 2c=7t.2c+\'px\';if(q.$1A.3u(\'1A-7G-2P\')){E 2V=q.$1A.68()+q.G.6L;E 4g=\'7G\';if(q.G.6F!==1k){2V=(q.$1A.68()+q.$1A.2v().2V)+q.G.6L;4g=\'9E\'}$1n.1O({4g:4g,2c:2c,2V:2V+\'px\'}).2R()}O{E 2V=($1v.68()+7t.2V)+\'px\';$1n.1O({4g:\'9E\',2c:2c,2V:2V}).2R()}q.1W.2r(\'oP\',{1n:$1n,1l:1l,1v:$1v});q.$1n=$1n}$(1k).cl(\'2z.I-1n\',$.1d(q.1n.3s,q));q.$T.cl(\'2z.I-1n\',$.1d(q.1n.3s,q));$(1k).cl(\'2s.I-1n\',$.1d(q.1n.9t,q));$1n.on(\'ba.I-1n\',$.1d(q.L.dV,q)).on(\'b4.I-1n\',$.1d(q.L.b8,q));e.dK()},9t:C(e){if(e.7w!=q.3r.bG)F;q.1n.79();q.$T.2p()},79:C(){q.$1A.1h(\'a.7c\').2W(\'I-8x\').2W(\'7c\');q.L.b8();$(\'.I-1n-\'+q.2H).3s();$(\'.I-1n-V-hs\').2W(\'I-1n-V-hs\');if(q.$1n){q.$1n.3d(\'.I-1n\');q.1W.2r(\'ov\',q.$1n);q.$1n=N}},3s:C(e){E $1n=$(e.1Q);if(!$1n.3u(\'7c\')&&!$1n.3u(\'I-1n-V-e3\')){if($1n.3u(\'I-1n\')){$1n.2W(\'7c\');$1n.3d(\'ba b4\')}q.1n.79()}}}},1Z:C(){F{2R:C(){q.1b.2K(\'1Z\',q.1H.1a(\'1Z\'),hG);q.1w.3Q(\'#I-1b-1Z-1w\',q.G.7N,q.1Z.1Y);q.K.3o();q.K.1a();E 1g=q.2T.4o();$(\'#I-6f\').2L(1g);q.1b.2R()},1Y:C(2S,4W,e){if(1s 2S.6N!=\'1z\'){q.1b.4j();q.K.3e();q.1W.2r(\'oy\',2S);F}E V;if(1s 2S==\'70\'){V=2S}O{E 1g=$(\'#I-6f\').2L();if(1s 1g==\'1z\'||1g===\'\')1g=2S.6f;V=\'<a 2l="\'+2S.9D+\'" id="9D-2u">\'+1g+\'</a>\'}if(4W){q.K.8U();E 2u=q.K.71();q.1Y.de(e,2u)}O{q.1b.4j()}q.K.3e();q.28.1U();q.1Y.fz(V);if(1s 2S==\'70\')F;E 8f=$(q.$T.1h(\'a#9D-2u\'));if(8f.12!==0){8f.1L(\'id\').1L(\'1p\')}O 8f=N;q.1W.2r(\'7N\',8f,2S)}}},2p:C(){F{2O:C(){q.$T.2p();E 3I=q.$T.3R().3I();if(3I.12===0)F;if(3I[0].12===0||3I[0].1o==\'5i\'||3I[0].9R==3){F}if(3I[0].1o==\'8B\'||3I[0].1o==\'8h\'){E 4v=3I.1h(\'li\').3I();if(!q.L.6X(4v)&&4v.1g()===\'\'){q.1S.2O(4v);F}}if(q.G.1K&&!q.L.7f(3I[0].1o)){q.K.1a();q.14.2O(q.$T[0],0);q.14.3H(q.$T[0],0);q.K.4f();F}q.1S.2O(3I)},3H:C(){E 3c=q.$T.3R().3c();q.$T.2p();if(3c.8b()===0)F;if(q.L.3z(q.$T.B())){q.K.1a();q.14.42(1q);q.14.7z(3c[0]);q.14.3H(3c[0],0);q.K.4f()}O{q.K.1a();q.14.8H(3c[0]);q.14.42(N);q.K.4f()}},cI:C(){F q.$T[0]===1k.ou}}},M:C(){F{2R:C(){q.1b.2K(\'M\',q.1H.1a(\'M\'),hG);q.1w.3Q(\'#I-1b-M-4e\',q.G.7R,q.M.1Y);q.K.3o();q.1b.2R()},eF:C($M){E $V=$M.2o(\'a\',q.$T[0]);q.1b.2K(\'jb\',q.1H.1a(\'7F\'),oo);q.1b.bR();q.M.hE=q.1b.je(q.1H.1a(\'hF\'));q.M.hH=q.1b.c0(q.1H.1a(\'3o\'));q.M.hE.on(\'2z\',$.1d(C(){q.M.1t($M)},q));q.M.hH.on(\'2z\',$.1d(C(){q.M.hD($M)},q));$(\'.I-V-3m\').1t();$(\'#I-M-1J\').2L($M.1c(\'7v\'));if(!q.G.hI)$(\'.I-M-V-41\').3s();O{E $bN=$(\'#I-M-V\');$bN.1c(\'2l\',$M.1c(\'4q\'));if($V.12!==0){$bN.2L($V.1c(\'2l\'));if($V.1c(\'1Q\')==\'7J\')$(\'#I-M-V-87\').5X(\'a6\',1q)}}if(!q.G.hL)$(\'.I-M-4g-41\').3s();O{E hK=($M.1O(\'6D\')==\'Q\'&&$M.1O(\'7o\')==\'5p\')?\'5m\':$M.1O(\'7o\');$(\'#I-M-5f\').2L(hK)}q.1b.2R();$(\'#I-M-1J\').2p()},hC:C($M){E hJ=$(\'#I-M-5f\').2L();E bB=\'\';E cd=\'\';E 8r=\'\';fl(hJ){8A\'2c\':bB=\'2c\';8r=\'0 \'+q.G.8C+\' \'+q.G.8C+\' 0\';5U;8A\'4t\':bB=\'4t\';8r=\'0 0 \'+q.G.8C+\' \'+q.G.8C;5U;8A\'5m\':cd=\'Q\';8r=\'aF\';5U}$M.1O({\'7o\':bB,6D:cd,4G:8r});$M.1c(\'3X\',$M.1c(\'1p\'))},hD:C($M){q.M.7Z();q.28.1U();E $V=$M.2o(\'a\',q.$T[0]);E 1J=$(\'#I-M-1J\').2L().J(/(<([^>]+)>)/ig,"");$M.1c(\'7v\',1J);q.M.hC($M);E V=$.3h($(\'#I-M-V\').2L());E V=V.J(/(<([^>]+)>)/ig,"");if(V!==\'\'){E 7A=\'((kC--)?[a-7Y-9]+(-[a-7Y-9]+)*\\\\.)+[a-z]{2,}\';E 3K=2a 2n(\'^(9n|8l|5E)://\'+7A,\'i\');E al=2a 2n(\'^\'+7A,\'i\');if(V.3J(3K)==-1&&V.3J(al)===0&&q.G.5a){V=q.G.5a+\'://\'+V}E 1Q=($(\'#I-M-V-87\').5X(\'a6\'))?1q:N;if($V.12===0){E a=$(\'<a 2l="\'+V+\'">\'+q.L.6r($M)+\'</a>\');if(1Q)a.1c(\'1Q\',\'7J\');$M.2x(a)}O{$V.1c(\'2l\',V);if(1Q){$V.1c(\'1Q\',\'7J\')}O{$V.1L(\'1Q\')}}}O if($V.12!==0){$V.2x(q.L.6r($M))}q.1b.4j();q.1R.bK();q.1e.1T()},iV:C($M){if(q.G.ca){$M.on(\'oJ\',$.1d(q.M.a7,q))}E 7r=$.1d(C(e){q.1R.M=$M;q.M.8m=q.M.eI($M);$(1k).on(\'6j.I-M-4R-3s.\'+q.2H,$.1d(q.M.7Z,q));if(!q.G.cO)F;q.M.8m.on(\'6j.I 5B.I\',$.1d(C(e){q.M.hw(e,$M)},q))},q);$M.3d(\'6j.I\').on(\'6j.I\',$.1d(q.M.7Z,q));$M.3d(\'2z.I 5B.I\').on(\'2z.I 5B.I\',7r)},hw:C(e,$M){e.2t();q.M.4k={x:e.hv,y:e.bD,el:$M,bT:$M.2J()/$M.3l(),h:$M.3l()};e=e.7L||e;if(e.8z){q.M.4k.x=e.8z[0].hv;q.M.4k.y=e.8z[0].bD}q.M.hu()},hu:C(){$(1k).on(\'oI.I-M-4R oH.I-M-4R\',$.1d(q.M.ht,q));$(1k).on(\'jK.I-M-4R oD.I-M-4R\',$.1d(q.M.hy,q))},ht:C(e){e.2t();e=e.7L||e;E 3l=q.M.4k.h;if(e.8z)3l+=(e.8z[0].bD-q.M.4k.y);O 3l+=(e.bD-q.M.4k.y);E 2J=9H.hx(3l*q.M.4k.bT);if(3l<50||2J<6O)F;E 3l=9H.hx(q.M.4k.el.2J()/q.M.4k.bT);q.M.4k.el.1c({2J:2J,3l:3l});q.M.4k.el.2J(2J);q.M.4k.el.3l(3l);q.1e.1T()},hy:C(){q.jk=N;$(1k).3d(\'.I-M-4R\');q.M.7Z()},a7:C(e){if(q.$T.1h(\'#I-M-2P\').12!==0){e.2t();F N}q.$T.on(\'4Z.I-M-hB-4Z\',$.1d(C(){3w($.1d(q.M.aJ,q),1)},q))},aJ:C(){q.M.hA();q.1R.bK();q.$T.3d(\'4Z.I-M-hB-4Z\');q.1x.4r();q.1e.1T()},hA:C(){q.$T.1h(\'1M[1f-3o-2i]\').1u(C(){E $el=$(q);$el.1c(\'4q\',$el.1c(\'1f-3o-2i\'));$el.1L(\'1f-3o-2i\')})},7Z:C(e){if(e&&$(e.1Q).2o(\'#I-M-2P\',q.$T[0]).12!==0)F;if(e&&e.1Q.1o==\'ab\'){E $M=$(e.1Q);$M.1c(\'1f-3o-2i\',$M.1c(\'4q\'))}E 3D=q.$T.1h(\'#I-M-2P\');if(3D.12===0)F;$(\'#I-M-5I\').1t();$(\'#I-M-8m\').1t();3D.1h(\'1M\').1O({5Y:3D[0].1p.5Y,aC:3D[0].1p.aC,aW:3D[0].1p.aW,bI:3D[0].1p.bI});3D.1O(\'4G\',\'\');3D.1h(\'1M\').1O(\'ez\',\'\');3D.2x(C(){F $(q).25()});$(1k).3d(\'6j.I-M-4R-3s.\'+q.2H);if(1s q.M.4k!==\'1z\'){q.M.4k.el.1c(\'3X\',q.M.4k.el.1c(\'1p\'))}q.1e.1T()},eJ:C($M,3D){if(q.G.cO&&!q.L.6Y()){E 8e=$(\'<1i id="I-M-8m" 1f-I="3M"></1i>\');if(!q.L.7K()){8e.1O({2J:\'hz\',3l:\'hz\'})}8e.1c(\'5j\',N);3D.1E(8e);3D.1E($M);F 8e}O{3D.1E($M);F N}},eI:C($M){E 3D=$(\'<1i id="I-M-2P" 1f-I="3M">\');3D.1O(\'7o\',$M.1O(\'7o\')).1c(\'5j\',N);if($M[0].1p.4G!=\'aF\'){3D.1O({5Y:$M[0].1p.5Y,aC:$M[0].1p.aC,aW:$M[0].1p.aW,bI:$M[0].1p.bI});$M.1O(\'4G\',\'\')}O{3D.1O({\'6D\':\'Q\',\'4G\':\'aF\'})}$M.1O(\'ez\',\'.5\').3C(3D);if(q.G.ca){q.M.5I=$(\'<1i id="I-M-5I" 1f-I="3M">\'+q.1H.1a(\'7F\')+\'</1i>\');q.M.5I.1c(\'5j\',N);q.M.5I.on(\'2z\',$.1d(C(){q.M.eF($M)},q));3D.1E(q.M.5I);E eM=q.M.5I.7D();q.M.5I.1O(\'4G-2c\',\'-\'+eM/2+\'px\')}F q.M.eJ($M,3D)},1t:C(M){E $M=$(M);E $V=$M.2o(\'a\',q.$T[0]);E $6t=$M.2o(\'6t\',q.$T[0]);E $1r=$M.1r();if($(\'#I-M-2P\').12!==0){$1r=$(\'#I-M-2P\').1r()}E $1N;if($6t.12!==0){$1N=$6t.1N();$6t.1t()}O if($V.12!==0){$1r=$V.1r();$V.1t()}O{$M.1t()}$(\'#I-M-2P\').1t();if($6t.12!==0){q.1S.2O($1N)}O{q.1S.2O($1r)}q.1W.2r(\'dk\',$M[0].4q,$M);q.1b.4j();q.1e.1T()},1Y:C(2S,4W,e){if(1s 2S.6N!=\'1z\'){q.1b.4j();q.K.3e();q.1W.2r(\'pP\',2S);F}E $1M;if(1s 2S==\'70\'){$1M=$(2S).1c(\'1f-I-8F-M\',\'1q\')}O{$1M=$(\'<1M>\');$1M.1c(\'4q\',2S.9D).1c(\'1f-I-8F-M\',\'1q\')}E R=$1M;E cW=q.L.4Y(\'P\');if(cW){R=$(\'<29 />\').1E($1M)}if(4W){q.K.8U();E 2u=q.K.71();q.1Y.de(e,2u)}O{q.1b.4j()}q.K.3e();q.28.1U();q.1Y.B(q.L.6r(R),N);E $M=q.$T.1h(\'1M[1f-I-8F-M=1q]\').1L(\'1f-I-8F-M\');if(cW){$M.1r().25().48().6e(\'<p />\')}O if(q.G.1K){if(!q.L.3z(q.1e.1a())){$M.9N(\'<br>\')}$M.3C(\'<br>\')}if(1s 2S==\'70\')F;q.1W.2r(\'7R\',$M,2S)}}},3A:C(){F{9Y:C(){if(!q.L.1P(\'2G\'))q.$T.2p();q.28.1U();q.K.3o();E Q=q.K.49();if(Q&&Q.1o==\'5L\'){q.3A.fC()}O if(Q===N&&q.G.1K){q.3A.eV()}O{q.3A.fq()}q.K.3e();q.1e.1T()},fC:C(){1k.3Z(\'3A\');q.3A.9O();q.1x.a3();q.1x.4r()},fq:C(){$.1u(q.K.44(),$.1d(C(i,53){if(53.1o===\'6u\'||53.1o===\'cr\')F;E $el=q.L.aS(53);E 2c=q.L.cY($el.1O(\'4G-2c\'))+q.G.9M;$el.1O(\'4G-2c\',2c+\'px\')},q))},eV:C(){E 4N=q.K.6e(\'1j\');$(4N).1c(\'1f-8u\',\'I\');$(4N).1O(\'4G-2c\',q.G.9M+\'px\')},9v:C(){q.28.1U();q.K.3o();E Q=q.K.49();if(Q&&Q.1o==\'5L\'){q.3A.eP()}O{q.3A.ff()}q.K.3e();q.1e.1T()},eP:C(){1k.3Z(\'7n\');E 1B=q.K.3x();E $2w=$(1B).2o(\'li\',q.$T[0]);q.3A.9O();if(!q.G.1K&&$2w.12===0){1k.3Z(\'9S\',N,\'p\');q.$T.1h(\'3k, ol, 29, p\').1u($.1d(q.L.3T,q))}q.1x.4r()},ff:C(){$.1u(q.K.44(),$.1d(C(i,53){E $el=q.L.aS(53);E 2c=q.L.cY($el.1O(\'4G-2c\'))-q.G.9M;if(2c<=0){if(q.G.1K&&1s($el.1f(\'8u\'))!==\'1z\'){$el.2x($el.B()+\'<br />\')}O{$el.1O(\'4G-2c\',\'\');q.L.5C($el,\'1p\')}}O{$el.1O(\'4G-2c\',2c+\'px\')}},q))},9O:C(){E Q=q.K.49();if(q.14.4X&&Q&&Q.1o==\'5L\'&&q.L.3z($(Q).1g())){E $Q=$(Q);$Q.1h(\'1i\').5O(\'.I-K-2u\').25().48();$Q.1E(\'<br>\')}}}},26:C(){F{30:C(1y){E 1m,1F;if(1s q.30[1y].1p!=\'1z\')1m=\'1p\';O if(1s q.30[1y][\'1G\']!=\'1z\')1m=\'1G\';if(1m)1F=q.30[1y][1m];q.26.3a(q.30[1y].Y,1m,1F)},3a:C(Y,1m,1F){E 1B=q.K.3x();if(1B&&1B.1o===\'pN\')F;if(q.L.4Y(\'9J\')||q.L.ix())F;E 2e=[\'b\',\'4n\',\'i\',\'4h\',\'5r\',\'eD\',\'5S\',\'eZ\',\'fc\'];E es=[\'5d\',\'5d\',\'em\',\'em\',\'u\',\'4l\',\'4l\',\'7i\',\'7j\'];2D(E i=0;i<2e.12;i++){if(Y==2e[i])Y=es[i]}if(q.G.4s){if($.3t(Y,q.G.4s)==-1)F}O{if($.3t(Y,q.G.4c)!==-1)F}q.26.1m=1m||N;q.26.1F=1F||N;q.28.1U();if(!q.L.1P(\'2G\')&&!q.G.1K){q.$T.2p()}q.K.1a();if(q.14.4X){q.26.eN(Y)}O{q.26.eA(Y)}},eN:C(Y){E 1B=q.K.3x();E $1r=$(1B).2o(Y+\'[1f-I-Y=\'+Y+\']\',q.$T[0]);if($1r.12!==0&&(q.26.1m!=\'1p\'&&$1r[0].1o!=\'6x\')){if(q.L.3z($1r.1g())){q.1S.58($1r[0]);$1r.1t();q.1e.1T()}O if(q.L.6B($1r)){q.1S.58($1r[0])}F}E R=$(\'<\'+Y+\'>\').1c(\'1f-3M\',\'I\').1c(\'1f-I-Y\',Y);R.B(q.G.5Z);R=q.26.e5(R);E R=q.1Y.R(R);q.1S.3H(R);q.1e.1T()},eA:C(Y){q.26.eK(Y);q.K.3o();1k.3Z(\'eD\');q.$T.1h(\'7b\').1u($.1d(C(i,s){E $el=$(s);q.26.eL($el,Y);E $1i;if(q.26.1m){$1i=$(\'<1i>\').1c(\'1f-I-Y\',Y).1c(\'1f-3M\',\'I\');$1i=q.26.e5($1i)}O{$1i=$(\'<\'+Y+\'>\').1c(\'1f-I-Y\',Y).1c(\'1f-3M\',\'I\')}$el.2x($1i.B($el.25()));E $1r=$1i.1r();if($1i[0].1o===\'A\'&&$1r&&$1r[0].1o===\'U\'){$1i.1r().2x($1i)}if(Y==\'1i\'){if($1r&&$1r[0].1o===\'6x\'&&q.26.1m===\'1p\'){E 2E=q.26.1F.4A(\';\');2D(E z=0;z<2E.12;z++){if(2E[z]===\'\')F;E 1p=2E[z].4A(\':\');$1r.1O(1p[0],\'\');if(q.L.5C($1r,\'1p\')){$1r.2x($1r.25())}}}}},q));if(Y!=\'1i\'){q.$T.1h(q.G.4M.31(\', \')).1u($.1d(C(i,s){E $el=$(s);if(s.1o===\'U\'&&s.4z.12===0){$el.2x($el.25());F}E aD=$el.1O(\'1g-7e\');if(aD===\'3L-eB\'){$el.1O(\'1g-7e\',\'\');q.L.5C($el,\'1p\')}},q))}if(Y!=\'4l\'){E ar=q;q.$T.1h(\'26\').1u(C(i,s){ar.L.4x(s,\'4l\')})}if(Y!=\'u\'){E ar=q;q.$T.1h(\'eH\').1u(C(i,s){ar.L.4x(s,\'u\')})}q.K.3e();q.1e.1T()},eL:C($el,Y){E 3q=q;$el.3R(Y).1u(C(){E $4v=$(q);if(!$4v.3u(\'I-K-2u\')){if(3q.26.1m==\'1p\'){E 2E=3q.26.1F.4A(\';\');2D(E z=0;z<2E.12;z++){if(2E[z]===\'\')F;E 1p=2E[z].4A(\':\');$4v.1O(1p[0],\'\');if(3q.L.5C($4v,\'1p\')){$4v.2x($4v.25())}}}O{$4v.25().48()}}})},eK:C(Y){q.K.3o();E 1h=\'\';if(q.26.1m==\'1G\')1h=\'[1f-I-1G=\'+q.26.1F+\']\';O if(q.26.1m==\'1p\'){1h=\'[1f-I-1p="\'+q.26.1F+\'"]\'}E 3q=q;if(Y!=\'4l\'){q.$T.1h(\'4l\').1u(C(i,s){3q.L.4x(s,\'26\')})}if(Y!=\'u\'){q.$T.1h(\'u\').1u(C(i,s){3q.L.4x(s,\'eH\')})}if(Y!=\'1i\'){q.$T.1h(Y).1u(C(){E $el=$(q);$el.2x($(\'<7b />\').B($el.25()))})}q.$T.1h(\'[1f-I-Y="\'+Y+\'"]\'+1h).1u(C(){if(1h===\'\'&&Y==\'1i\'&&q.1o.3g()==Y)F;E $el=$(q);$el.2x($(\'<7b />\').B($el.25()))});q.K.3e()},e5:C(R){fl(q.26.1m){8A\'1G\':if(R.3u(q.26.1F)){R.2W(q.26.1F);R.1L(\'1f-I-1G\')}O{R.2g(q.26.1F);R.1c(\'1f-I-1G\',q.26.1F)}5U;8A\'1p\':R[0].1p.pY=q.26.1F;R.1c(\'1f-I-1p\',q.26.1F);5U}F R},q1:C(){q.28.1U();E 1B=q.K.3x();E 22=q.K.c9();q.K.3o();if(1B&&1B.1o===\'6x\'){E $s=$(1B);$s.1L(\'1p\');if($s[0].4z.12===0){$s.2x($s.25())}}$.1u(22,$.1d(C(i,s){E $s=$(s);if($.3t(s.1o.3g(),q.G.4M)!=-1&&!$s.3u(\'I-K-2u\')){$s.1L(\'1p\');if($s[0].4z.12===0){$s.2x($s.25())}}},q));q.K.3e();q.1e.1T()},q2:C(1y){q.28.1U();E 1r=q.K.6l();E 22=q.K.c9();q.K.3o();if(1r&&1r.1o===\'6x\'){E $s=$(1r);$s.1O(1y,\'\');q.L.5C($s,\'1p\');if($s[0].4z.12===0){$s.2x($s.25())}}$.1u(22,$.1d(C(i,s){E $s=$(s);if($.3t(s.1o.3g(),q.G.4M)!=-1&&!$s.3u(\'I-K-2u\')){$s.1O(1y,\'\');q.L.5C($s,\'1p\');if($s[0].4z.12===0){$s.2x($s.25())}}},q));q.K.3e();q.1e.1T()},e1:C(){q.28.1U();E 1B=q.K.3x();q.K.3o();1k.3Z(\'e1\');if(1B&&1B.1o===\'6x\'){$(1B).2x($(1B).25())}$.1u(q.K.6w(),$.1d(C(i,s){E $s=$(s);if($.3t(s.1o.3g(),q.G.4M)!=-1&&!$s.3u(\'I-K-2u\')){$s.2x($s.25())}},q));q.K.3e();q.1e.1T()},7C:C(3E){q.26.3a(\'1i\',\'1G\',3E)},pI:C(1F){q.26.3a(\'1i\',\'1p\',1F)}}},1Y:C(){F{1U:C(B,1x){q.3i.1t();B=q.1x.7d(B);if(1s 1x==\'1z\'){B=q.1x.8G(B,N)}q.$T.B(B);q.K.1t();q.2p.3H();q.1x.a3();q.1e.1T();q.1R.2K();if(1s 1x==\'1z\'){3w($.1d(q.1x.4r,q),10)}},1g:C(1g){q.3i.1t();1g=1g.4o();1g=$.3h(1g);1g=q.1x.ap(1g,N);q.$T.2p();if(q.L.1P(\'2G\')){q.1Y.dX(1g)}O{q.K.1a();q.14.57();E el=1k.3B("1j");el.3v=1g;E 4Q=1k.b0(),R,5G;55((R=el.aZ)){5G=4Q.74(R)}q.14.3P(4Q);if(5G){E 14=q.14.84();14.7z(5G);14.42(1q);q.2T.8R();q.2T.4f(14)}}q.1e.1T();q.1x.4r()},fz:C(B){q.1Y.B(B,N)},B:C(B,1x){q.3i.1t();if(1s 1x==\'1z\')1x=1q;if(!q.G.1K){q.$T.2p()}B=q.1x.7d(B);if(1x){B=q.1x.8G(B)}if(q.L.1P(\'2G\')){q.1Y.dX(B)}O{if(q.1x.8g)q.1Y.f0(B);O 1k.3Z(\'pq\',N,B);q.1Y.fj()}q.1x.a3();if(!q.G.1K){q.$T.1h(\'p\').1u($.1d(q.L.3T,q))}q.1e.1T();q.1R.2K();if(1x){q.1x.4r()}},fj:C(){if(!q.L.1P(\'4b\'))F;E $1N=$(q.K.49()).1N();if($1N.12>0&&$1N[0].1o==\'P\'&&$1N.B()===\'\'){$1N.1t()}},dX:C(B){if(q.L.hc()){E 1r=q.L.4Y(\'P\');E $B=$(\'<1j>\').1E(B);E fb=$B.25().is(\'p, :75, dl, 3k, ol, 1j, 3V, 2Y, 29, 2F, dW, 4d, 75, cc, eS, fo\');if(1r&&fb)q.1Y.eR(1r,B);O q.1Y.eQ(B);F}1k.K.8O().jI(B)},f0:C(B){B=q.1x.7d(B);q.K.1a();q.14.57();E el=1k.3B(\'1j\');el.3v=B;E 4Q=1k.b0(),R,5G;55((R=el.aZ)){5G=4Q.74(R)}q.14.3P(4Q);q.14.42(1q);q.1S.58(5G)},R:C(R,57){R=R[0]||R;E 2v=q.1S.8c();E B=q.L.6r(R);B=q.1x.7d(B);if(B.1V(/</g)!==4m){R=$(B)[0]}q.K.1a();if(57!==N){q.14.57()}q.14.3P(R);q.14.42(N);q.K.4f();q.1S.aH(2v);F R},ph:C(R,x,y){R=R[0]||R;q.K.1a();E 14;if(1k.a5){E 3y=1k.a5(x,y);q.14.2O(3y.fe,3y.2v);q.14.42(1q);q.14.3P(R)}O if(1k.aj){14=1k.aj(x,y);14.3P(R)}O if(1s 1k.3f.ak!="1z"){14=1k.3f.ak();14.am(x,y);E 7k=14.fh();7k.am(x,y);14.fg("eY",7k);14.7a()}},de:C(e,R){R=R[0]||R;E 14;E x=e.pj,y=e.pk;if(1k.a5){E 3y=1k.a5(x,y);E 2T=1k.4K();14=2T.67(0);14.2O(3y.fe,3y.2v);14.42(1q);14.3P(R)}O if(1k.aj){14=1k.aj(x,y);14.3P(R)}O if(1s 1k.3f.ak!="1z"){14=1k.3f.ak();14.am(x,y);E 7k=14.fh();7k.am(x,y);14.fg("eY",7k);14.7a()}},eR:C(1r,B){E R=1k.3B(\'1i\');R.3E=\'I-ie-5o\';q.1Y.R(R);E 78=$(1r).B();78=\'<p>\'+78.J(/<1i 1G="I-ie-5o"><\\/1i>/gi,\'</p>\'+B+\'<p>\')+\'</p>\';78=78.J(/<p><\\/p>/gi,\'\');$(1r).2x(78)},eQ:C(B){q.K.1a();q.14.57();E el=1k.3B("1j");el.3v=B;E 4Q=1k.b0(),R,5G;55((R=el.aZ)){5G=4Q.74(R)}q.14.3P(4Q);q.14.42(N);q.K.4f()}}},1D:C(){F{3Q:C(e){if(q.7T)F;E 1l=e.7w;E 54=(1l>=37&&1l<=40);q.1D.4a=e.9l||e.6I;q.1D.1B=q.K.3x();q.1D.1r=q.K.6l();q.1D.Q=q.K.49();q.1D.2F=q.L.9P(q.1D.1B,\'2F\');q.1D.29=q.L.9P(q.1D.1B,\'29\');q.1D.80=q.L.9P(q.1D.1B,\'80\');q.6a.3Q(e,1l);if(q.L.7K()){q.1D.fv(54,1l);q.1D.fp(e,1l)}q.1D.fm(54);q.1D.fr(e,1l);E eT=q.1W.2r(\'1D\',e);if(eT===N){e.2t();F N}if(q.G.aP&&(q.L.1P(\'2G\')||q.L.1P(\'4b\'))&&(1l===q.3r.dm||1l===q.3r.eW)){E di=N;E $3V=N;if(q.1D.Q&&q.1D.Q.1o===\'6u\'){$3V=$(q.1D.Q).2o(\'3V\',q.$T[0])}if($3V&&$3V.1h(\'2Y\').3c()[0]===q.1D.Q){di=1q}if(q.L.6B()&&di){E R=$(q.G.5V);$3V.3C(R);q.1S.2O(R)}}if(q.G.aP&&1l===q.3r.dm){q.1D.ew()}if(!q.G.aP&&1l===q.3r.6z){e.2t();if(!q.14.4X)q.14.57();F}if(1l==q.3r.6z&&!e.6Z&&!e.9l&&!e.6I){E eU=q.1W.2r(\'pB\',e);if(eU===N){e.2t();F N}if(q.1D.29&&q.1D.ju(e)===1q){F N}E 1B,$1N;if(q.1D.2F){F q.1D.kN(e)}O if(q.1D.29||q.1D.80){1B=q.K.3x();$1N=$(1B).1N();if($1N.12!==0&&$1N[0].1o==\'5i\'){F q.1D.6V(e)}O if(q.L.6B()&&(1B&&1B!=\'6x\')){F q.1D.8W(e)}O{F q.1D.6V(e)}}O if(q.G.1K&&!q.1D.Q){1B=q.K.3x();$1N=$(q.1D.1B).1N();if($1N.12!==0&&$1N[0].1o==\'5i\'){F q.1D.6V(e)}O if(1B!==N&&$(1B).3u(\'I-7m-3b\')){q.1S.58(1B);$(1B).25().48();F q.1D.8W(e)}O{if(q.L.e2()){F q.1D.8W(e)}O if($1N.12===0&&1B===N&&1s $1N.pw!=\'1z\'){F q.1D.6V(e)}F q.1D.6V(e)}}O if(q.G.1K&&q.1D.Q){3w($.1d(q.1D.ey,q),1)}O if(!q.G.1K&&q.1D.Q){3w($.1d(q.1D.eC,q),1);if(q.1D.Q.1o===\'5L\'){1B=q.K.3x();E $1r=$(1B).2o(\'li\',q.$T[0]);E $2d=$1r.2o(\'3k,ol\',q.$T[0]);if($1r.12!==0&&q.L.3z($1r.B())&&$2d.1N().12===0&&q.L.3z($2d.1h("li").3c().B())){$2d.1h("li").3c().1t();E R=$(q.G.5V);$2d.3C(R);q.1S.2O(R);F N}}}O if(!q.G.1K&&!q.1D.Q){F q.1D.hg(e)}}if(1l===q.3r.6z&&(e.9l||e.6Z)){F q.1D.eu(e)}if(1l===q.3r.da||e.6I&&1l===d8||e.6I&&1l===d3){F q.1D.ev(e,1l)}if(1l===q.3r.83||1l===q.3r.8S){E 22=q.K.6w();if(22){E 2q=22.12;E 3c;2D(E i=0;i<2q;i++){E 3R=$(22[i]).3R(\'1M\');if(3R.12!==0){E 3q=q;$.1u(3R,C(z,s){E $s=$(s);if($s.1O(\'7o\')!=\'5p\')F;3q.1W.2r(\'dk\',s.4q,$s);3c=s})}O if(22[i].1o==\'ab\'){if(3c!=22[i]){q.1W.2r(\'dk\',22[i].4q,$(22[i]));3c=22[i]}}}}}if(1l===q.3r.83){E Q=q.K.49();E fx=($(Q).1O(\'4G-2c\')!==\'pv\');if(Q&&fx&&q.14.4X&&q.L.iy()){q.3A.9v();e.2t();F}if(q.L.1P(\'4b\')){E 4B=q.K.k4();E bv=$(4B).4B()[0];if(4B&&4B.1o===\'fw\')$(4B).1t();if(bv&&bv.1o===\'fw\')$(bv).1t()}q.1D.kS();q.1D.kL(e)}q.1e.1T()},fv:C(54,1l){if(!54&&(q.1W.7x()==\'2z\'||q.1W.7x()==\'54\')){q.1W.93(N);if(q.1D.fy(1l)){q.28.1U()}}},fy:C(1l){E k=q.3r;E 4S=[k.83,k.8S,k.6z,k.bG,k.da,k.fB,k.fA,k.fu,k.ft];F($.3t(1l,4S)==-1)?1q:N},fm:C(54){if(!54)F;if((q.1W.7x()==\'2z\'||q.1W.7x()==\'54\')){q.1W.93(N);F}q.1W.93(\'54\')},fp:C(e,1l){if(q.1D.4a&&1l===90&&!e.6Z&&!e.fs&&q.G.28.12){e.2t();q.28.8P();F}O if(q.1D.4a&&1l===90&&e.6Z&&!e.fs&&q.G.8M.12!==0){e.2t();q.28.bC();F}O if(!q.1D.4a){if(1l==q.3r.83||1l==q.3r.8S||(1l==q.3r.6z&&!e.9l&&!e.6Z)){q.28.1U()}}},fr:C(e,1l){if(q.1D.4a&&1l===65){q.L.ex()}O if(1l!=q.3r.er&&!q.1D.4a){q.L.9z()}},ew:C(){E 2e=[q.1D.29,q.1D.2F,q.1D.80];2D(E i=0;i<2e.12;i++){if(2e[i]){q.1D.kY(2e[i]);F N}}},eu:C(e){q.28.1U();if(q.L.6B()){F q.1D.8W(e)}F q.1D.6V(e)},ev:C(e,1l){if(!q.G.et)F 1q;if(q.L.3z(q.1e.1a())&&q.G.b7===N)F 1q;e.2t();E R;if(q.1D.2F&&!e.6Z){R=(q.G.72)?1k.8Y(8Q(q.G.72+1).31(\'\\bm\')):1k.8Y(\'\\t\');q.1Y.R(R);q.1e.1T()}O if(q.G.b7!==N){R=1k.8Y(8Q(q.G.b7+1).31(\'\\bm\'));q.1Y.R(R);q.1e.1T()}O{if(e.6I&&1l===d3)q.3A.9v();O if(e.6I&&1l===d8)q.3A.9Y();O if(!e.6Z)q.3A.9Y();O q.3A.9v()}F N},ey:C(){E 4E=q.K.49();E bg=4E.3v.J(/<br\\s?\\/?>/gi,\'\');if((4E.1o===\'8a\'||4E.1o===\'P\')&&bg===\'\'&&!$(4E).3u(\'I-T\')){E br=1k.3B(\'br\');$(4E).2x(br);q.1S.dy(br);q.1e.1T();F N}},eC:C(){E 4E=q.K.49();E bg=4E.3v.J(/<br\\s?\\/?>/gi,\'\');if(4E.1o===\'8a\'&&q.L.3z(bg)&&!$(4E).3u(\'I-T\')){E p=1k.3B(\'p\');p.3v=q.G.5Z;$(4E).2x(p);q.1S.2O(p);q.1e.1T();F N}O if(q.G.eE&&4E.1o==\'P\'){$(4E).1L(\'1G\').1L(\'1p\')}},hg:C(e){e.2t();q.K.1a();E p=1k.3B(\'p\');p.3v=q.G.5Z;q.14.57();q.14.3P(p);q.1S.2O(p);q.1e.1T();F N},ju:C(e){if(!q.L.6B())F;E 5D=$.3h($(q.1D.Q).B());if(5D.3J(/(<br\\s?\\/?>){2}$/i)!=-1){e.2t();if(q.G.1K){E br=1k.3B(\'br\');$(q.1D.29).3C(br);q.1S.dy(br);$(q.1D.Q).B(5D.J(/<br\\s?\\/?>$/i,\'\'))}O{E R=$(q.G.5V);$(q.1D.29).3C(R);q.1S.2O(R)}F 1q}F},kY:C(2m){if(!q.L.6B())F;q.28.1U();if(q.G.1K){E 25=$(\'<1j>\').1E($.3h(q.$T.B())).25();E 3c=25.3c()[0];if(3c.1o==\'6x\'&&3c.3v===\'\'){3c=25.4B()[0]}if(q.L.6r(3c)!=q.L.6r(2m))F;E br=1k.3B(\'br\');$(2m).3C(br);q.1S.58(br)}O{if(q.$T.25().3c()[0]!==2m)F;E R=$(q.G.5V);$(2m).3C(R);q.1S.2O(R)}},kN:C(e){e.2t();E R=1k.8Y(\'\\n\');q.K.1a();q.14.57();q.14.3P(R);q.1S.58(R);q.1e.1T();F N},6V:C(e){F q.1D.dD(e)},8W:C(e){F q.1D.dD(e,1q)},dD:C(e,kP){e.dK();q.K.1a();E 5M=1k.3B(\'br\');if(q.L.1P(\'2G\')){q.14.42(N);q.14.3H(q.14.dL,q.14.dM)}O{q.14.57()}q.14.3P(5M);E $b5=$(5M).1r("a");if($b5.12>0){$b5.1h(5M).1t();$b5.3C(5M)}if(kP===1q){E $1N=$(5M).1N();if($1N.12!==0&&$1N[0].1o===\'5i\'&&q.L.e2()){q.1S.58(5M);q.1e.1T();F N}E dJ=1k.3B(\'br\');q.14.3P(dJ);q.1S.58(dJ)}O{if(q.L.1P(\'2G\')){E 3b=1k.3B(\'1i\');3b.3v=\'&#bL;\';$(5M).3C(3b);q.14.7z(3b);q.14.kZ(3b);$(3b).1t()}O{E 14=1k.8O();14.7z(5M);14.42(1q);E K=3p.4K();K.8R();K.4f(14)}}q.1e.1T();F N},kS:C(){E $1B=$(q.1D.1B);if($1B.1g().3J(/^\\6c$/g)===0){$1B.1t()}},kL:C(e){E $1B=$(q.1D.1B);E $1r=$(q.1D.1r);E 2Y=$1B.2o(\'2Y\',q.$T[0]);if(2Y.12!==0&&$1B.2o(\'li\',q.$T[0])&&$1r.3R(\'li\').12===1){if(!q.L.3z($1B.1g()))F;e.2t();$1B.1t();$1r.1t();q.1S.2O(2Y)}}}},2s:C(){F{3Q:C(e){if(q.7T)F;E 1l=e.7w;q.2s.1B=q.K.3x();q.2s.1r=q.K.6l();E $1r=q.L.4H($(q.2s.1r).1r());E ks=q.1W.2r(\'2s\',e);if(ks===N){e.2t();F N}if(!q.G.1K&&q.2s.1B.9R===3&&q.2s.1B.12<=1&&(q.2s.1r===N||q.2s.1r.1o==\'ed\')){q.2s.bs()}if(!q.G.1K&&q.L.4H(q.2s.1B)&&q.2s.1B.1o===\'8a\'){q.2s.bs(N)}if(!q.G.1K&&$(q.2s.1r).3u(\'I-7m-3b\')&&($1r===N||$1r[0].1o==\'ed\')){$(q.2s.1r).25().48();q.2s.bs()}if(q.2A.a1()&&q.2A.kn(1l))q.2A.3a();if(1l===q.3r.8S||1l===q.3r.83){if(q.L.1P(\'4b\')){E 2Y=$(q.1D.1B).2o(\'2Y\',q.$T[0]);if(2Y.8b()!==0&&2Y.1g()!==\'\'){e.2t();F N}}q.1x.4r();if(q.1R.M){e.2t();q.M.7Z();q.28.1U();q.M.1t(q.1R.M);q.1R.M=N;F N}q.$T.1h(\'p\').1u($.1d(C(i,s){q.L.3T(i,$(s).B())},q));if(q.G.1K&&q.2s.1B&&q.2s.1B.1o==\'8a\'&&q.L.3z(q.2s.1B.3v)){$(q.2s.1B).3C(q.K.5e());q.K.3e();$(q.2s.1B).1t()}q.2s.kt();F q.2s.ku(e)}},bs:C(9K){E $1B=$(q.2s.1B);E R;if(9K===N){R=$(\'<p>\').1E($1B.B())}O{R=$(\'<p>\').1E($1B.9K())}$1B.2x(R);E 1N=$(R).1N();if(1s(1N[0])!==\'1z\'&&1N[0].1o==\'5i\'){1N.1t()}q.1S.3H(R)},kt:C(){E d6=C(){E B=$.3h(q.3v).J(/\\/t\\/n/g,\'\');if(B===\'\'){$(q).1t()}};q.$T.1h(\'li\').1u(d6);q.$T.1h(\'3k, ol\').1u(d6)},ku:C(e){E B=$.3h(q.$T.B());if(!q.L.3z(B))F;e.2t();if(q.G.1K){q.$T.B(q.K.5e());q.K.3e()}O{q.$T.B(q.G.5V);q.2p.2O()}q.1e.1T();F N}}},1H:C(){F{2K:C(){q.G.d7=q.G.kv[q.G.1H]},1a:C(1y){F(1s q.G.d7[1y]!=\'1z\')?q.G.d7[1y]:\'\'}}},3L:C(){F{1Y:C(){q.28.1U();E 21=q.K.44();if(21[0]!==N&&q.3L.kq(21)){if(!q.L.1P(\'2G\'))q.$T.2p();F}if(q.L.1P(\'2G\')){q.3L.aM()}O{q.3L.km()}},kq:C(21){E 8Z=[\'li\',\'2Y\',\'6s\',\'29\',\'80\',\'2F\',\'dl\',\'dt\',\'dd\'];E 3I=21[0].1o.3g();E 3c=q.K.kc();3c=(1s 3c==\'1z\')?3I:3c.1o.3g();E d0=$.3t(3I,8Z)!=-1;E kl=$.3t(3c,8Z)!=-1;if((d0&&kl)||d0){F 1q}},aM:C(){q.L.9x();q.28.1U();q.1Y.R(1k.3B(\'hr\'));q.L.bh();q.1e.1T()},km:C(){q.28.1U();E d9=\'<p id="I-1Y-3L"><br /></p>\';if(q.G.1K)d9=\'<br id="I-1Y-3L">\';1k.3Z(\'py\',N,\'<hr>\'+d9);q.3L.ko();q.1e.1T()},ko:C(){E R=q.$T.1h(\'#I-1Y-3L\');E 1N=$(R).1N()[0];E 1Q=1N;if(q.L.1P(\'4b\')&&1N&&1N.3v===\'\'){1Q=$(1N).1N()[0];$(1N).1t()}if(1Q){R.1t();if(!q.G.1K){q.$T.2p();q.3L.2O(1Q)}}O{R.1L(\'id\');q.3L.2O(R[0])}},2O:C(R){if(1s R===\'1z\')F;E kw=1k.8Y(\'\\6c\');q.K.1a();q.14.2O(R,0);q.14.3P(kw);q.14.42(1q);q.K.4f()}}},V:C(){F{2R:C(e){if(1s e!=\'1z\'&&e.2t)e.2t();if(!q.1R.cD(\'a\')){q.1b.2K(\'V\',q.1H.1a(\'b2\'),kx)}O{q.1b.2K(\'V\',q.1H.1a(\'e6\'),kx)}q.1b.bR();E kG=!q.1R.cD(\'a\')?q.1H.1a(\'1Y\'):q.1H.1a(\'7F\');q.V.kJ=q.1b.c0(kG);q.K.1a();q.V.kB();q.V.kK();if(q.V.1Q==\'7J\')$(\'#I-V-87\').5X(\'a6\',1q);q.V.$8I=$(\'#I-V-2i\');q.V.$dP=$(\'#I-V-2i-1g\');q.V.$dP.2L(q.V.1g);q.V.$8I.2L(q.V.2i);q.V.kJ.on(\'2z\',$.1d(q.V.1Y,q));$(\'.I-V-3m\').1t();q.K.3o();q.1b.2R();q.V.$8I.2p()},kK:C(){E kE=3q.kz.2l.J(/\\/$/i,\'\');if(1s q.V.2i!=="1z"){q.V.2i=q.V.2i.J(kE,\'\');q.V.2i=q.V.2i.J(/^\\/#/,\'#\');q.V.2i=q.V.2i.J(\'aa:\',\'\');if(!q.G.5a){E 3K=2a 2n(\'^(9n|8l|5E)://\'+3q.kz.pC,\'i\');q.V.2i=q.V.2i.J(3K,\'\')}}},kB:C(){q.V.$R=N;E $el=$(q.K.3x()).2o(\'a\',q.$T[0]);if($el.12!==0&&$el[0].1o===\'A\'){q.V.$R=$el;q.V.2i=$el.1c(\'2l\');q.V.1g=$el.1g();q.V.1Q=$el.1c(\'1Q\')}O{q.V.1g=q.2T.4o();q.V.2i=\'\';q.V.1Q=\'\'}},1Y:C(){q.3i.1t();E 1Q=\'\';E V=q.V.$8I.2L();E 1g=q.V.$dP.2L().J(/(<([^>]+)>)/ig,"");if($.3h(V)===\'\'){q.V.$8I.2g(\'I-3G-6N\').on(\'2s\',C(){$(q).2W(\'I-3G-6N\');$(q).3d(\'2s\')});F}if(V.3J(\'@\')!=-1&&/(9n|8l|5E):\\/\\//i.ai(V)===N){V=V.J(\'aa:\',\'\');V=\'aa:\'+V}O if(V.3J(\'#\')!==0){if($(\'#I-V-87\').5X(\'a6\')){1Q=\'7J\'}E 7A=\'((kC--)?[a-7Y-9]+(-[a-7Y-9]+)*\\\\.)+[a-z]{2,}\';E 3K=2a 2n(\'^(9n|8l|5E)://\'+7A,\'i\');E al=2a 2n(\'^\'+7A,\'i\');E kF=2a 2n(\'\\.(B|pD)$\',\'i\');if(V.3J(3K)==-1&&V.3J(kF)==-1&&V.3J(al)===0&&q.G.5a){V=q.G.5a+\'://\'+V}}q.V.1U(1g,V,1Q);q.1b.4j()},1U:C(1g,V,1Q){1g=$.3h(1g.J(/<|>/g,\'\'));q.K.3e();E 21=q.K.44();if(1g===\'\'&&V===\'\')F;if(1g===\'\'&&V!==\'\')1g=V;if(q.V.$R){q.28.1U();E $V=q.V.$R,$el=$V.3R();if($el.12>0){55($el.12){$el=$el.3R()}$el=$el.2j()}O{$el=$V}$V.1c(\'2l\',V);$el.1g(1g);if(1Q!==\'\'){$V.1c(\'1Q\',1Q)}O{$V.1L(\'1Q\')}q.K.8L($V);q.1e.1T()}O{if(q.L.1P(\'4b\')&&q.V.1g===\'\'){E $a=$(\'<a />\').1c(\'2l\',V).1g(1g);if(1Q!==\'\')$a.1c(\'1Q\',1Q);$a=$(q.1Y.R($a));if(q.G.1K){$a.3C(\'&5k;\')}q.K.8L($a)}O{E $a;if(q.L.1P(\'2G\')){$a=$(\'<a 2l="\'+V+\'">\').1g(1g);if(1Q!==\'\')$a.1c(\'1Q\',1Q);$a=$(q.1Y.R($a));if(q.K.cX().1V(/\\s$/)){$a.3C(" ")}q.K.8L($a)}O{1k.3Z(\'pE\',N,V);$a=$(q.K.3x()).2o(\'a\',q.$T[0]);if(q.L.1P(\'4b\')){$a=$(\'a[kI=""]\')}if(1Q!==\'\')$a.1c(\'1Q\',1Q);$a.1L(\'1p\').1L(\'kI\');if(q.K.cX().1V(/\\s$/)){$a.3C(" ")}if(q.V.1g!==\'\'||q.V.1g!=1g){if(!q.G.1K&&21&&21.12<=1){$a.1g(1g)}O if(q.G.1K){$a.1g(1g)}q.K.8L($a)}}}q.1e.1T();q.1W.2r(\'pu\',$a)}3w($.1d(C(){q.1R.5A()},q),5)},6J:C(e){if(1s e!=\'1z\'&&e.2t){e.2t()}E 22=q.K.6w();if(!22)F;q.28.1U();E 2q=22.12;E 5A=[];2D(E i=0;i<2q;i++){if(22[i].1o===\'A\'){5A.2N(22[i])}E $R=$(22[i]).2o(\'a\',q.$T[0]);$R.2x($R.25())}q.1W.2r(\'pt\',5A);$(\'.I-V-3m\').1t();q.1e.1T()},7C:C(3E){q.V.9o(3E,\'7C\')},2g:C(3E){q.V.9o(3E,\'2g\')},2W:C(3E){q.V.9o(3E,\'2W\')},9o:C(3E,1C){E 5A=q.K.ke([\'a\']);if(5A===N)F;$.1u(5A,C(){$(q)[1C](3E)})}}},2A:C(){F{kn:C(1l){F 1l==q.3r.6z||1l==q.3r.kk},a1:C(){F q.G.ax&&(q.G.ek||q.G.e9||q.G.9q)&&!q.L.4Y(\'9J\')},3a:C(){E 2A=q.2A,G=q.G;q.$T.1h(":5O(4J,1M,a,2F)").pi().25().dO(C(){F q.9R===3&&$.3h(q.5P)!=""&&!$(q).1r().is("2F")&&(q.5P.1V(G.2A.4p.6Q)||q.5P.1V(G.2A.4p.6T)||q.5P.1V(G.2A.4p.M)||q.5P.1V(G.2A.4p.2i))}).1u(C(){E 1g=$(q).1g(),B=1g;if(G.9q&&(B.1V(G.2A.4p.6Q)||B.1V(G.2A.4p.6T))){B=2A.9q(B)}O if(G.e9&&B.1V(G.2A.4p.M)){B=2A.kQ(B)}O if(G.ek){B=2A.ax(B)}$(q).9N(1g.J(1g,B)).1t()});E kp=q.$T.1h(\'.I-2A-43\').1u(C(){E $el=$(q);$el.2W(\'I-2A-43\');if($el.1c(\'1G\')===\'\')$el.1L(\'1G\');F $el[0]});3w($.1d(C(){q.1R.2K();q.1W.2r(\'2A\',kp)},q),6O);q.1e.1T()},9q:C(B){E e0=\'<4J 1G="I-2A-43" 2J="pn" 3l="ps" 4q="\',dR=\'" pr="0" po></4J>\';if(B.1V(q.G.2A.4p.6Q)){B=B.J(q.G.2A.4p.6Q,e0+\'//7S.6Q.aK/7M/$1\'+dR)}if(B.1V(q.G.2A.4p.6T)){B=B.J(q.G.2A.4p.6T,e0+\'//q3.6T.aK/6S/$2\'+dR)}F B},kQ:C(B){E 3N=B.1V(q.G.2A.4p.M);if(3N){B=B.J(B,\'<1M 4q="\'+3N+\'" 1G="I-2A-43" />\');if(q.G.1K){if(!q.L.3z(q.1e.1a())){B=\'<br>\'+B}}B+=\'<br>\'}F B},ax:C(B){E 3N=B.1V(q.G.2A.4p.2i);if(3N){3N=$.q7(3N,C(v,k){F $.3t(v,3N)===k});E 12=3N.12;2D(E i=0;i<12;i++){E 2l=3N[i],1g=2l,5a=q.G.5a+\'://\';if(2l.1V(/(5E?|8l):\\/\\//i)!==4m){5a=""}if(1g.12>q.G.ec){1g=1g.ac(0,q.G.ec)+\'...\'}if(1g.3J(\'%\')===-1){1g=j2(1g)}E cz="\\\\b";if($.3t(2l.dn(-1),["/","&","="])!=-1){cz=""}E kV=2a 2n(\'(\'+2l.J(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,"\\\\$&")+cz+\')\',\'g\');B=B.J(kV,\'<a 2l="\'+5a+$.3h(2l)+\'" 1G="I-2A-43">\'+$.3h(1g)+\'</a>\')}}F B}}},2d:C(){F{3j:C(4F){q.3i.1t();if(!q.L.1P(\'2G\')&&!q.G.1K){q.$T.2p()}q.28.1U();q.K.3o();E 1r=q.K.6l();E $2d=$(1r).2o(\'ol, 3k\',q.$T[0]);if(!q.L.4H($2d)&&$2d.12!==0){$2d=N}E bU,bV;E 1t=N;if($2d&&$2d.12){1t=1q;E bS=$2d[0].1o;bU=(4F===\'5u\'&&bS===\'8B\');bV=(4F===\'5q\'&&bS===\'8h\')}if(bU){q.L.4x($2d,\'ol\')}O if(bV){q.L.4x($2d,\'3k\')}O{if(1t){q.2d.1t(4F,$2d)}O{q.2d.1Y(4F)}}q.K.3e();q.1e.1T()},1Y:C(4F){E 1B=q.K.3x();E $2Y=$(1B).2o(\'2Y, 6s\',q.$T[0]);if(q.L.1P(\'2G\')&&q.G.1K){q.2d.aM(4F)}O{1k.3Z(\'1Y\'+4F)}E 1r=q.K.6l();E $2d=$(1r).2o(\'ol, 3k\',q.$T[0]);if($2Y.12!==0){E kW=$2Y.9K();$2Y.3C(kW).1t(\'\')}if(q.L.3z($2d.1h(\'li\').1g())){E $3R=$2d.3R(\'li\');$3R.1h(\'br\').1t();$3R.1E(q.K.5e());if(q.G.1K&&q.L.1P(\'4b\')&&$3R.8b()==2&&q.L.3z($3R.eq(1).1g())){$3R.eq(1).1t()}}if($2d.12){E $88=$2d.1r();if(q.L.4H($88)&&$88[0].1o!=\'5L\'&&q.L.6X($88[0])){$88.2x($88.25())}}if(!q.L.1P(\'2G\')){q.$T.2p()}q.1x.4r()},aM:C(4F){E 4N=q.K.6e(\'1j\');E aQ=$(4N).B();E 7s=(4F==\'5u\')?$(\'<ol>\'):$(\'<3k>\');E 9f=$(\'<li>\');if($.3h(aQ)===\'\'){9f.1E(q.K.5e());7s.1E(9f);q.$T.1h(\'#K-2u-1\').2x(7s)}O{E 8T=aQ.4A(/<br\\s?\\/?>/gi);if(8T){2D(E i=0;i<8T.12;i++){if($.3h(8T[i])!==\'\'){7s.1E($(\'<li>\').B(8T[i]))}}}O{9f.1E(aQ);7s.1E(9f)}$(4N).2x(7s)}},1t:C(4F,$2d){if($.3t(\'3k\',q.K.44()))4F=\'5q\';1k.3Z(\'1Y\'+4F);E $1B=$(q.K.3x());q.3A.9O();if(!q.G.1K&&$1B.2o(\'li, 6s, 2Y\',q.$T[0]).12===0){1k.3Z(\'9S\',N,\'p\');q.$T.1h(\'3k, ol, 29\').1u($.1d(q.L.3T,q))}E $3V=$(q.K.3x()).2o(\'3V\',q.$T[0]);E $4B=$3V.4B();if(!q.G.1K&&$3V.12!==0&&$4B.12!==0&&$4B[0].1o==\'5i\'){$4B.1t()}q.1x.4r()}}},1b:C(){F{bw:{},ja:C(){q.G.1b={jb:62()+\'<4d id="I-1b-M-7F">\'+\'<2M>\'+q.1H.1a(\'1J\')+\'</2M>\'+\'<3G 1m="1g" id="I-M-1J" />\'+\'<2M 1G="I-M-V-41">\'+q.1H.1a(\'V\')+\'</2M>\'+\'<3G 1m="1g" id="I-M-V" 1G="I-M-V-41" 4O-2M="\'+q.1H.1a(\'V\')+\'" />\'+\'<2M 1G="I-M-V-41"><3G 1m="j6" id="I-M-V-87" 4O-2M="\'+q.1H.1a(\'a9\')+\'"> \'+q.1H.1a(\'a9\')+\'</2M>\'+\'<2M 1G="I-M-4g-41">\'+q.1H.1a(\'ck\')+\'</2M>\'+\'<7a 1G="I-M-4g-41" id="I-M-5f" 4O-2M="\'+q.1H.1a(\'ck\')+\'">\'+\'<41 1F="5p">\'+q.1H.1a(\'5p\')+\'</41>\'+\'<41 1F="2c">\'+q.1H.1a(\'2c\')+\'</41>\'+\'<41 1F="5m">\'+q.1H.1a(\'5m\')+\'</41>\'+\'<41 1F="4t">\'+q.1H.1a(\'4t\')+\'</41>\'+\'</7a>\'+\'</4d>\',M:62()+\'<4d id="I-1b-M-1Y">\'+\'<1j id="I-1b-M-4e"></1j>\'+\'</4d>\',1Z:62()+\'<4d id="I-1b-1Z-1Y">\'+\'<1j id="I-1b-1Z-1w-2P">\'+\'<2M>\'+q.1H.1a(\'6f\')+\'</2M>\'+\'<3G 1m="1g" id="I-6f" 4O-2M="\'+q.1H.1a(\'6f\')+\'" /><br><br>\'+\'<1j id="I-1b-1Z-1w"></1j>\'+\'</1j>\'+\'</4d>\',V:62()+\'<4d id="I-1b-V-1Y">\'+\'<2M>cg</2M>\'+\'<3G 1m="2i" id="I-V-2i" 4O-2M="cg" />\'+\'<2M>\'+q.1H.1a(\'1g\')+\'</2M>\'+\'<3G 1m="1g" id="I-V-2i-1g" 4O-2M="\'+q.1H.1a(\'1g\')+\'" />\'+\'<2M><3G 1m="j6" id="I-V-87"> \'+q.1H.1a(\'a9\')+\'</2M>\'+\'</4d>\'};$.7h(q.G,q.G.1b)},ct:C(1y,2B){q.1b.bw[1y]=2B},pM:C($1b){q.1b.$9b=$(\'<1j>\').1c(\'id\',\'I-1b-9b\');$1b.6C(q.1b.$9b)},pK:C(id,1y,8k){E $5t=$(\'<a 2l="#" 3X="5t\'+id+\'">\').1g(1y);if(8k){$5t.2g(\'8k\')}E 3q=q;$5t.on(\'2z\',C(e){e.2t();$(\'.I-5t\').3s();$(\'.I-\'+$(q).1c(\'3X\')).2R();3q.1b.$9b.1h(\'a\').2W(\'8k\');$(q).2g(\'8k\')});q.1b.$9b.1E($5t)},pL:C(1y,j3){q.G.1b[1y]=j3},jm:C(1y){F q.G.1b[1y]},pQ:C(){F q.$bo.1h(\'4d\')},2K:C(6m,1J,2J){q.1b.6m=6m;q.1b.2J=2J;q.1b.2f();q.1b.iG();q.1b.jd(1J);q.1b.jn();q.1b.jl();if(1s q.1b.bw[6m]!=\'1z\'){q.1b.bw[6m].64(q)}},2R:C(){q.L.dV();if(q.L.6Y()){q.1b.bX()}O{q.1b.af()}if(q.G.bO){q.$4C.2g("I-1b-j4")}q.$81.2R();q.$4C.2R();q.$1b.1c(\'6G\',\'-1\');q.$1b.2p();q.1b.jg();q.L.9x();if(!q.L.6Y()){3w($.1d(q.1b.af,q),0);$(3p).on(\'4R.I-1b\',$.1d(q.1b.4R,q))}q.1W.2r(\'pV\',q.1b.6m,q.$1b);$(1k).3d(\'pU.1b\');q.$1b.1h(\'3G[1m=1g],3G[1m=2i],3G[1m=pT]\').on(\'1D.I-1b\',$.1d(q.1b.jj,q))},af:C(){E 3l=q.$1b.pR();E bc=$(3p).3l();E 89=$(3p).2J();if(q.1b.2J>89){q.$1b.1O({2J:\'96%\',5Y:(bc/2-3l/2)+\'px\'});F}if(3l>bc){q.$1b.1O({2J:q.1b.2J+\'px\',5Y:\'pS\'})}O{q.$1b.1O({2J:q.1b.2J+\'px\',5Y:(bc/2-3l/2)+\'px\'})}},bX:C(){q.$1b.1O({2J:\'96%\',5Y:\'2%\'})},4R:C(){if(q.L.6Y()){q.1b.bX()}O{q.1b.af()}},jd:C(1J){q.$8q.B(1J)},jl:C(){q.$bo.B(q.1b.jm(q.1b.6m))},jn:C(){if(1s $.fn.jo===\'1z\')F;q.$1b.jo({jk:q.$8q});q.$8q.1O(\'pg\',\'pf\')},jj:C(e){if(e.7w!=13)F;e.2t();q.$1b.1h(\'1v.I-1b-7O-23\').2z()},bR:C(){E 1v=$(\'<1v>\').2g(\'I-1b-23 I-1b-4j-23\').B(q.1H.1a(\'jf\'));1v.on(\'2z\',$.1d(q.1b.4j,q));q.$8w.1E(1v)},je:C(2M){F q.1b.c1(2M,\'82\')},c0:C(2M){F q.1b.c1(2M,\'7O\')},c1:C(2M,3E){E 1v=$(\'<1v>\').2g(\'I-1b-23\').2g(\'I-1b-\'+3E+\'-23\').B(2M);q.$8w.1E(1v);F 1v},jg:C(){E 4i=q.$8w.1h(\'1v\');E bW=4i.12;if(bW===0)F;4i.1O(\'2J\',(6O/bW)+\'%\')},2f:C(){q.1b.iH();q.$4C=$(\'<1j id="I-1b-2P"/>\').3s();q.$1b=$(\'<1j id="I-1b" 9C="oG" 4O-oF="I-1b-75" />\');q.$8q=$(\'<75 id="I-1b-75"/>\');q.$8t=$(\'<1v 1m="1v" id="I-1b-4j" 6G="1" 4O-2M="oN" />\').B(\'&oM;\');q.$bo=$(\'<1j id="I-1b-3f" />\');q.$8w=$(\'<cc />\');q.$1b.1E(q.$8q);q.$1b.1E(q.$8t);q.$1b.1E(q.$bo);q.$1b.1E(q.$8w);q.$4C.1E(q.$1b);q.$4C.bl(1k.3f)},iH:C(){q.$81=$(\'<1j id="I-1b-oB">\').3s();$(\'3f\').6C(q.$81)},iG:C(){q.$8t.on(\'2z.I-1b\',$.1d(q.1b.4j,q));$(1k).on(\'2s.I-1b\',$.1d(q.1b.9t,q));q.$T.on(\'2s.I-1b\',$.1d(q.1b.9t,q));q.$4C.on(\'2z.I-1b\',$.1d(q.1b.4j,q))},iF:C(){q.$8t.3d(\'2z.I-1b\');$(1k).3d(\'2s.I-1b\');q.$T.3d(\'2s.I-1b\');q.$4C.3d(\'2z.I-1b\');$(3p).3d(\'4R.I-1b\')},9t:C(e){if(e.7w!=q.3r.bG)F;q.1b.4j(N)},4j:C(e){if(e){if(!$(e.1Q).3u(\'I-1b-4j-23\')&&e.1Q!=q.$8t[0]&&e.1Q!=q.$4C[0]){F}e.2t()}if(!q.$4C)F;q.1b.iF();q.L.b8();q.$81.1t();q.$4C.jW(\'oq\',$.1d(C(){q.$4C.1t();3w($.1d(q.L.bh,q),0);if(e!==1z)q.K.3e();$(1k.3f).1O(\'bn\',q.1b.op);q.1W.2r(\'om\',q.1b.6m)},q))}}},1R:C(){F{2K:C(){if(1s q.G.iz!="1z")F;if(q.L.1P(\'2G\')){E 3q=q;q.$T.1h(\'2F, 1e\').on(\'ba\',C(){3q.$T.1c(\'5j\',N);$(q).1c(\'5j\',1q)}).on(\'b4\',C(){3q.$T.1c(\'5j\',1q);$(q).1L(\'5j\')})}q.1R.bK();q.1R.5A()},1A:C(e,2h){q.1R.4i(e,2h);q.1R.7H()},cD:C($el,$1B){if(1s $1B==\'1z\'){E $1B=$(q.K.3x())}F $1B.is($el)||$1B.eG($el).12>0},7H:C(){E $1B=$(q.K.3x());$.1u(q.G.1R.7H,$.1d(C(1l,1F){E 1R=1F.1R,2m=1R.2m,$2w=1F.2w,cM=1s 1R[\'in\']!=\'1z\'?1R[\'in\']:N,cL=1s 1R[\'2k\']!=\'1z\'?1R[\'2k\']:N;if($1B.2o(2m).8b()>0){q.1R.cT($2w,cM,cL)}O{q.1R.cT($2w,cL,cM)}},q))},cT:C($2w,8D,b6){if(b6&&1s b6[\'1c\']!=\'1z\'){q.1R.cV($2w,b6.1c,1q)}if(1s 8D[\'1c\']!=\'1z\'){q.1R.cV($2w,8D.1c)}if(1s 8D[\'1J\']!=\'1z\'){$2w.1g(8D[\'1J\'])}},cV:C($2w,iD,cR){$.1u(iD,C(1l,1F){if(1l==\'1G\'){if(!cR){$2w.2g(1F)}O{$2w.2W(1F)}}O{if(!cR){$2w.1c(1l,1F)}O{$2w.1L(1l)}}})},cN:C($2w,2h,2U){if(1s 2U.1R=="1z")F;2U.2w=$2w;q.G.1R.7H.2N(2U)},4i:C(e,2h){E 1B=q.K.3x();E 1r=q.K.6l();if(e!==N){q.1v.cP()}O{q.1v.cP(2h)}if(e===N&&2h!==\'B\'){if($.3t(2h,q.G.aN)!=-1)q.1v.ow(2h);F}$.1u(q.G.cj,$.1d(C(1l,1F){E bd=$(1r).2o(1l,q.$T[0]);E cn=$(1B).2o(1l,q.$T[0]);if(bd.12!==0&&!q.L.4H(bd))F;if(!q.L.4H(cn))F;if(bd.12!==0||cn.2o(1l,q.$T[0]).12!==0){q.1v.8j(1F)}},q));E $1r=$(1r).2o(q.G.9y.4o().3g(),q.$T[0]);if(q.L.4H(1r)&&$1r.12){E 5f=($1r.1O(\'1g-5f\')===\'\')?\'2c\':$1r.1O(\'1g-5f\');q.1v.8j(\'5f\'+5f)}},p9:C(Y,2h){q.G.aN.2N(2h);q.G.cj[Y]=2h},bK:C(){q.$T.1h(\'1M\').1u($.1d(C(i,1M){E $1M=$(1M);$1M.2o(\'a\',q.$T[0]).on(\'2z\',C(e){e.2t()});if(q.L.1P(\'2G\'))$1M.1c(\'pa\',\'on\');q.M.iV($1M)},q));$(1k).on(\'2z.I-M-82.\'+q.2H,$.1d(C(e){q.1R.M=N;if(e.1Q.1o==\'ab\'&&q.L.4H(e.1Q)){q.1R.M=(q.1R.M&&q.1R.M==e.1Q)?N:e.1Q}},q))},5A:C(){if(!q.G.iW)F;q.$T.1h(\'a\').on(\'5B.I.\'+q.2H+\' 2z.I.\'+q.2H,$.1d(q.1R.iX,q));q.$T.on(\'5B.I.\'+q.2H+\' 2z.I.\'+q.2H,$.1d(q.1R.cp,q));$(1k).on(\'5B.I.\'+q.2H+\' 2z.I.\'+q.2H,$.1d(q.1R.cp,q))},iT:C($V){F $V.2v()},iX:C(e){E $el=$(e.1Q);if($el[0].1o==\'ab\')F;if($el[0].1o!==\'A\')$el=$el.2o(\'a\',q.$T[0]);if($el[0].1o!==\'A\')F;E $V=$el;E 3y=q.1R.iT($V);E 3m=$(\'<1i 1G="I-V-3m"></1i>\');E 2l=$V.1c(\'2l\');if(2l===1z){2l=\'\'}if(2l.12>24)2l=2l.ac(0,24)+\'...\';E iN=$(\'<a 2l="\'+$V.1c(\'2l\')+\'" 1Q="7J" />\').B(2l).2g(\'I-V-3m-7O\');E iP=$(\'<a 2l="#" />\').B(q.1H.1a(\'7F\')).on(\'2z\',$.1d(q.V.2R,q)).2g(\'I-V-3m-7O\');E iQ=$(\'<a 2l="#" />\').B(q.1H.1a(\'6J\')).on(\'2z\',$.1d(q.V.6J,q)).2g(\'I-V-3m-7O\');3m.1E(iN).1E(\' | \').1E(iP).1E(\' | \').1E(iQ);3m.1O({2V:(3y.2V+5H($V.1O(\'3L-3l\'),10))+\'px\',2c:3y.2c+\'px\'});$(\'.I-V-3m\').1t();$(\'3f\').1E(3m)},cp:C(e){e=e.7L||e;E 1Q=e.1Q;E $1r=$(1Q).2o(\'a\',q.$T[0]);if($1r.12!==0&&$1r[0].1o===\'A\'&&1Q.1o!==\'A\'){F}O if((1Q.1o===\'A\'&&q.L.4H(1Q))||$(1Q).3u(\'I-V-3m-7O\')){F}$(\'.I-V-3m\').1t()}}},2X:C(){F{2K:C(B){if(q.G.1K)F B;if(B===\'\'||B===\'<p></p>\')F q.G.5V;B=B+"\\n";q.2X.9U=[];q.2X.z=0;B=B.J(/(<br\\s?\\/?>){1,}\\n?<\\/29>/gi,\'</29>\');B=q.2X.iR(B);B=q.2X.jp(B);B=q.2X.k1(B);B=q.2X.k0(B);B=q.2X.9e(B);B=q.2X.jq(B);B=B.J(2a 2n(\'<br\\\\s?/?>\\n?<(\'+q.G.co.31(\'|\')+\')(.*?[^>])>\',\'gi\'),\'<p><br /></p>\\n<$1$2>\');F $.3h(B)},iR:C(B){E $1j=$(\'<1j />\').1E(B);$1j.1h(\'29 p\').2x(C(){F $(q).1E(\'<br />\').25()});B=$1j.B();$1j.1h(q.G.co.31(\', \')).1u($.1d(C(i,s){q.2X.z++;q.2X.9U[q.2X.z]=s.7P;B=B.J(s.7P,\'\\n{J\'+q.2X.z+\'}\')},q));F B},jp:C(B){E cA=B.1V(/<!--([\\w\\W]*?)-->/gi);if(!cA)F B;$.1u(cA,$.1d(C(i,s){q.2X.z++;q.2X.9U[q.2X.z]=s;B=B.J(s,\'\\n{J\'+q.2X.z+\'}\')},q));F B},jq:C(B){$.1u(q.2X.9U,C(i,s){s=(1s s!==\'1z\')?s.J(/\\$/g,\'&#36;\'):s;B=B.J(\'{J\'+i+\'}\',s)});F B},k0:C(B){E 4I=B.4A(2a 2n(\'\\n\',\'g\'),-1);B=\'\';if(4I){E 2q=4I.12;2D(E i=0;i<2q;i++){if(!4I.q9(i))F;if(4I[i].3J(\'{J\')==-1){4I[i]=4I[i].J(/<p>\\n\\t?<\\/p>/gi,\'\');4I[i]=4I[i].J(/<p><\\/p>/gi,\'\');if(4I[i]!==\'\'){B+=\'<p>\'+4I[i].J(/^\\n+|\\n+$/g,"")+"</p>"}}O B+=4I[i]}}F B},k1:C(B){B=B.J(/<br \\/>\\s*<br \\/>/gi,"\\n\\n");B=B.J(/<br\\s?\\/?>\\n?<br\\s?\\/?>/gi,"\\n<br /><br />");B=B.J(2a 2n("\\r\\n",\'g\'),"\\n");B=B.J(2a 2n("\\r",\'g\'),"\\n");B=B.J(2a 2n("/\\n\\n+/"),\'g\',"\\n\\n");F B},9e:C(B){B=B.J(2a 2n(\'</29></p>\',\'gi\'),\'</29>\');B=B.J(2a 2n(\'<p></29>\',\'gi\'),\'</29>\');B=B.J(2a 2n(\'<p><29>\',\'gi\'),\'<29>\');B=B.J(2a 2n(\'<29></p>\',\'gi\'),\'<29>\');B=B.J(2a 2n(\'<p><p \',\'gi\'),\'<p \');B=B.J(2a 2n(\'<p><p>\',\'gi\'),\'<p>\');B=B.J(2a 2n(\'</p></p>\',\'gi\'),\'</p>\');B=B.J(2a 2n(\'<p>\\\\s?</p>\',\'gi\'),\'\');B=B.J(2a 2n("\\n</p>",\'gi\'),\'</p>\');B=B.J(2a 2n(\'<p>\\t?\\t?\\n?<p>\',\'gi\'),\'<p>\');B=B.J(2a 2n(\'<p>\\t*</p>\',\'gi\'),\'\');F B}}},5o:C(){F{3Q:C(e){if(!q.G.k2){3w($.1d(q.1e.1T,q),1);F}q.7T=1q;q.28.1U();q.K.3o();q.L.9x();q.5o.jY();$(3p).on(\'5N.I-k3\',$.1d(C(){$(3p).3S(q.bb)},q));3w($.1d(C(){E B=q.$5h.B();q.$5h.1t();q.K.3e();q.L.bh();q.5o.1Y(B);$(3p).3d(\'5N.I-k3\');if(q.2A.a1()){q.2A.3a()}},q),1)},jY:C(){q.$5h=$(\'<1j>\').B(\'\').1c(\'5j\',\'1q\').1O({4g:\'7G\',2J:0,2V:0,2c:\'-qk\'});if(q.L.1P(\'2G\')){q.$2P.1E(q.$5h)}O{E $ce=$(\'.1b-3f:aG\');if($ce.12>0){$ce.1E(q.$5h)}O{$(\'3f\').1E(q.$5h)}}q.$5h.1a(0).2p()},1Y:C(B){B=q.1W.2r(\'qn\',B);B=(q.L.9u())?q.1x.8G(B,N):q.1x.8G(B);B=q.1W.2r(\'5o\',B);if(q.L.9u()){q.1Y.1U(B,N)}O{q.1Y.B(B,N)}q.L.9z();q.7T=N;3w($.1d(q.1x.4r,q),10);3w($.1d(C(){E jV=q.$T.1h(\'1i\');$.1u(jV,C(i,s){E B=s.3v.J(/\\6c/,\'\');if(B===\'\'&&s.4z.12===0)$(s).1t()})},q),10)}}},3i:C(){F{aT:C(){if(!q.3i.is())F;q.$T.1c(\'3i\',q.$2m.1c(\'3i\'));q.3i.3j();q.$T.on(\'1D.I-3i\',$.1d(q.3i.3j,q))},3j:C(){3w($.1d(C(){E 1C=q.L.3z(q.$T.B(),N)?\'2g\':\'2W\';q.$T[1C](\'I-3i\')},q),5)},1t:C(){q.$T.2W(\'I-3i\')},is:C(){if(q.G.3i){F q.$2m.1c(\'3i\',q.G.3i)}O{F!(1s q.$2m.1c(\'3i\')==\'1z\'||q.$2m.1c(\'3i\')===\'\')}}}},5F:C(){F{2R:C(){$(1k.3f).1E($(\'<1j id="I-5F"><1i></1i></1j>\'));$(\'#I-5F\').qg()},3s:C(){$(\'#I-5F\').jW(qq,C(){$(q).1t()})}}},K:C(){F{1a:C(){q.2T=1k.4K();if(1k.4K&&q.2T.67&&q.2T.7y){q.14=q.2T.67(0)}O{q.14=1k.8O()}},4f:C(){4U{q.2T.8R()}56(e){}q.2T.4f(q.14)},3x:C(){E el=N;q.K.1a();if(q.2T&&q.2T.7y>0){el=q.2T.67(0).k7}F q.L.4H(el)},6l:C(53){53=53||q.K.3x();if(53){F q.L.4H($(53).1r()[0])}F N},k4:C(){F 3p.4K().k5.qz},qB:C(){F 3p.4K().k5.qE},49:C(R){R=R||q.K.3x();55(R){if(q.L.7f(R.1o)){F($(R).3u(\'I-T\'))?N:R}R=R.qu}F N},c9:C(22,2e){q.K.1a();if(q.14&&q.14.4X){F N}E 6b=[];22=(1s 22==\'1z\'||22===N)?q.K.6w():22;E 4M=q.G.4M;4M.2N(\'1i\');if(1s 2e!==\'1z\'){2D(E i=0;i<2e.12;i++){4M.2N(2e[i])}}$.1u(22,$.1d(C(i,R){if($.3t(R.1o.3g(),4M)!=-1){6b.2N(R)}},q));F(6b.12===0)?N:6b},ke:C(2e){q.K.1a();if(q.14&&q.14.4X){F N}E 6b=[];E 22=q.K.6w();$.1u(22,$.1d(C(i,R){if($.3t(R.1o.3g(),2e)!=-1){6b.2N(R)}},q));F(6b.12===0)?N:6b},44:C(22){q.K.1a();if(q.14&&q.14.4X){F[q.K.49()]}E 21=[];22=(1s 22==\'1z\')?q.K.6w():22;$.1u(22,$.1d(C(i,R){if(q.L.6X(R)){21.2N(R)}},q));F(21.12===0)?[q.K.49()]:21},kc:C(){F q.K.qZ},6w:C(){q.K.1a();E 7E=q.K.ef(1);E 94=q.K.ef(2);if(q.14.4X===N){if(3p.4K){E 2T=3p.4K();if(2T.7y>0){E 14=2T.67(0);E k6=14.k7,bZ=14.bZ;E 7B=14.84();7B.42(N);7B.3P(94);7B.2O(k6,bZ);7B.42(1q);7B.3P(7E);14.7z(7E);14.k9(94);2T.8R();2T.4f(14)}}}O{q.K.jR(q.14,7E,1q);94=7E}E 22=[];E 9k=0;E 3q=q;q.$T.1h(\'*\').1u(C(){if(q==7E){E 1r=$(q).1r();if(1r.12!==0&&1r[0].1o!=\'ed\'&&3q.L.4H(1r[0])){22.2N(1r[0])}22.2N(q);9k=1}O{if(9k>0){22.2N(q);9k=9k+1}}if(q==94){F N}});E eb=[];E 2q=22.12;2D(E i=0;i<2q;i++){if(22[i].id!=\'22-2u-1\'&&22[i].id!=\'22-2u-2\'){eb.2N(22[i])}}q.K.jQ();F eb},ef:C(6i){F $(\'<1i id="22-2u-\'+6i+\'" 1G="I-22-2u" 1f-3M="I">\'+q.G.5Z+\'</1i>\')[0]},jR:C(14,R,1m){E 14=14.84();4U{14.42(1m);14.3P(R)}56(e){}},jQ:C(){$(1k).1h(\'1i.I-22-2u\').1t();q.$T.1h(\'1i.I-22-2u\').1t()},qK:C(2b,2j){q.1S.aH(2b,2j)},6e:C(Y){q.K.1a();if(q.14.4X)F N;E 4N=1k.3B(Y);4N.74(q.14.qU());q.14.3P(4N);F 4N},8L:C(R){if(q.L.1P(\'4b\')){R=R[0]||R;E 14=1k.8O();14.8H(R)}O{q.1S.1U(R,0,R,1)}},bH:C(){q.K.1a();q.14.8H(q.$T[0]);q.K.4f()},1t:C(){q.K.1a();q.2T.8R()},3o:C(){q.K.jC()},jC:C(){q.K.1a();E 6o=q.K.71(1);q.K.dU(q.14,6o,1q);if(q.14.4X===N){E 8V=q.K.71(2);q.K.dU(q.14,8V,N)}q.jE=q.$T.B()},71:C(6i){if(1s 6i==\'1z\')6i=1;F $(\'<1i id="K-2u-\'+6i+\'" 1G="I-K-2u"  1f-3M="I">\'+q.G.5Z+\'</1i>\')[0]},5e:C(6i){F q.L.6r(q.K.71(6i))},dU:C(14,R,1m){14=14.84();4U{14.42(1m);14.3P(R)}56(e){q.2p.2O()}},3e:C(){E 6o=q.$T.1h(\'1i#K-2u-1\');E 8V=q.$T.1h(\'1i#K-2u-2\');if(q.L.1P(\'4b\')){q.$T.2p()}if(6o.12!==0&&8V.12!==0){q.1S.1U(6o,0,8V,0)}O if(6o.12!==0){q.1S.1U(6o,0,6o,0)}O{q.$T.2p()}q.K.8U();q.jE=N},8U:C(){q.$T.1h(\'1i.I-K-2u\').1u(C(i,s){E 1g=$(s).1g().J(/\\6c/g,\'\');if(1g===\'\')$(s).1t();O $(s).2x(C(){F $(q).25()})})},cX:C(){q.K.1a();F q.2T.4o()},qr:C(){E B=\'\';q.K.1a();if(q.2T.7y){E dS=1k.3B(\'1j\');E 2q=q.2T.7y;2D(E i=0;i<2q;++i){dS.74(q.2T.67(i).qp())}B=dS.3v}F q.1x.aY(B)},jG:C(B){q.K.1a();q.14.57();E 1j=1k.3B("1j");1j.3v=B;E 4Q=1k.b0(),4v;55((4v=1j.aZ)){4Q.74(4v)}q.14.3P(4Q)},qX:C(B){B=q.K.5e(1)+B+q.K.5e(2);q.K.1a();if(3p.4K&&3p.4K().67){q.K.jG(B)}O if(1k.K&&1k.K.8O){q.14.jI(B)}q.K.3e();q.1e.1T()}}},6a:C(){F{3Q:C(e,1l){if(!q.G.6a){if((e.9l||e.6I)&&(1l===66||1l===73))e.2t();F N}$.1u(q.G.6a,$.1d(C(5b,4y){E 4S=5b.4A(\',\');E 2q=4S.12;2D(E i=0;i<2q;i++){if(1s 4S[i]===\'70\'){q.6a.7r(e,$.3h(4S[i]),$.1d(C(){E 1C;if(4y.1C.3J(/\\./)!=\'-1\'){1C=4y.1C.4A(\'.\');if(1s q[1C[0]]!=\'1z\'){q[1C[0]][1C[1]].8n(q,4y.6d)}}O{q[4y.1C].8n(q,4y.6d)}},q))}}},q))},7r:C(e,4S,iA){E iU={8:"lT",9:"5t",10:"F",13:"F",16:"6P",17:"4a",18:"7v",19:"lJ",20:"lK",27:"m2",32:"3b",33:"mp",34:"m7",35:"2j",36:"mc",37:"2c",38:"lF",39:"4t",40:"l4",45:"1Y",46:"4l",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",6O:"4",l7:"5",lb:"6",le:"7",l6:"8",lf:"9",l2:"*",l3:"+",ly:"-",lx:".",lg:"/",lw:"f1",lz:"f2",lD:"f3",ll:"f4",lk:"f5",lh:"f6",lo:"f7",oj:"f8",nI:"f9",nG:"nE",nF:"nP",nL:"nM",nD:"nC",nu:"5N",ns:"-",nr:";",np:"=",nv:",",nB:"-",nA:".",nx:"/",ob:"`",d3:"[",oc:"\\\\",d8:"]",od:"\'"};E do={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"oh","=":"+",";":": ","\'":"\\"",",":"<",".":">","/":"?","\\\\":"|"};4S=4S.3g().4A(" ");E bt=iU[e.3r],9h=62.oe(e.7w).3g(),7u="",7l={};$.1u(["7v","4a","5c","6P"],C(51,bu){if(e[bu+\'o5\']&&bt!==bu){7u+=bu+\'+\'}});if(bt)7l[7u+bt]=1q;if(9h){7l[7u+9h]=1q;7l[7u+do[9h]]=1q;if(7u==="6P+"){7l[do[9h]]=1q}}2D(E i=0,2q=4S.12;i<2q;i++){if(7l[4S[i]]){e.2t();F iA.8n(q,iY)}}}}},2I:C(){F{1a:C(1e){if(!q.G.2I)F 1e;E ds=[\'iZ\',\'3f\',\'dG\',\'hr\',\'i?mG\',\'V\',\'5c\',\'mw\',\'1p\',\'3W\',\'3V\',\'dF\',\'dE\',\'dI\'];E dq=[\'li\',\'dt\',\'dt\',\'h[1-6]\',\'41\',\'3W\'];E 9L=[\'p\',\'29\',\'1j\',\'dl\',\'j1\',\'6k\',\'n4\',\'kh\',\'ol\',\'2F\',\'7a\',\'2Y\',\'6s\',\'6W\',\'3k\'];q.2I.kO=2a 2n(\'^<(/?\'+ds.31(\'|/?\')+\'|\'+dq.31(\'|\')+\')[ >]\');q.2I.eX=2a 2n(\'^<(br|/?\'+ds.31(\'|/?\')+\'|/\'+dq.31(\'|/\')+\')[ >]\');q.2I.9L=2a 2n(\'^</?(\'+9L.31(\'|\')+\')[ >]\');E i=0,bz=1e.12,3U=0,2b=4m,2j=4m,Y=\'\',2k=\'\',5g=\'\';q.2I.8o=0;2D(;i<bz;i++){3U=i;if(-1==1e.4w(i).4L(\'<\')){2k+=1e.4w(i);F q.2I.dB(2k)}55(3U<bz&&1e.6n(3U)!=\'<\'){3U++}if(i!=3U){5g=1e.4w(i,3U-i);if(!5g.1V(/^\\s{2,}$/g)){if(\'\\n\'==2k.6n(2k.12-1))2k+=q.2I.7g();O if(\'\\n\'==5g.6n(0)){2k+=\'\\n\'+q.2I.7g();5g=5g.J(/^\\s+/,\'\')}2k+=5g}if(5g.1V(/\\n/))2k+=\'\\n\'+q.2I.7g()}2b=3U;55(3U<bz&&\'>\'!=1e.6n(3U)){3U++}Y=1e.4w(2b,3U-2b);i=3U;E t;if(\'!--\'==Y.4w(1,3)){if(!Y.1V(/--$/)){55(\'-->\'!=1e.4w(3U,3)){3U++}3U+=2;Y=1e.4w(2b,3U-2b);i=3U}if(\'\\n\'!=2k.6n(2k.12-1))2k+=\'\\n\';2k+=q.2I.7g();2k+=Y+\'>\\n\'}O if(\'!\'==Y[1]){2k=q.2I.av(Y+\'>\',2k)}O if(\'?\'==Y[1]){2k+=Y+\'>\\n\'}O if(t=Y.1V(/^<(3W|1p|2F)/i)){t[1]=t[1].3g();Y=q.2I.dA(Y);2k=q.2I.av(Y,2k);2j=62(1e.4w(i+1)).3g().4L(\'</\'+t[1]);if(2j){5g=1e.4w(i+1,2j);i+=2j;2k+=5g}}O{Y=q.2I.dA(Y);2k=q.2I.av(Y,2k)}}F q.2I.dB(2k)},7g:C(){E s=\'\';2D(E j=0;j<q.2I.8o;j++){s+=\'\\t\'}F s},dB:C(1e){1e=1e.J(/\\n\\s*\\n/g,\'\\n\');1e=1e.J(/^[\\s\\n]*/,\'\');1e=1e.J(/[\\s\\n]*$/,\'\');1e=1e.J(/<3W(.*?)>\\n<\\/3W>/gi,\'<3W$1></3W>\');q.2I.8o=0;F 1e},dA:C(Y){E 8d=\'\';Y=Y.J(/\\n/g,\' \');Y=Y.J(/\\s{2,}/g,\' \');Y=Y.J(/^\\s+|\\s+$/g,\' \');E dz=\'\';if(Y.1V(/\\/$/)){dz=\'/\';Y=Y.J(/\\/+$/,\'\')}E m;55(m=/\\s*([^= ]+)(?:=(([\'"\']).*?\\3|[^ ]+))?/.5l(Y)){if(m[2])8d+=m[1].3g()+\'=\'+m[2];O if(m[1])8d+=m[1].3g();8d+=\' \';Y=Y.4w(m[0].12)}F 8d.J(/\\s*$/,\'\')+dz+\'>\'},av:C(Y,2k){E nl=Y.1V(q.2I.9L);if(Y.1V(q.2I.kO)||nl){2k=2k.J(/\\s*$/,\'\');2k+=\'\\n\'}if(nl&&\'/\'==Y.6n(1))q.2I.8o--;if(\'\\n\'==2k.6n(2k.12-1))2k+=q.2I.7g();if(nl&&\'/\'!=Y.6n(1))q.2I.8o++;2k+=Y;if(Y.1V(q.2I.eX)||Y.1V(q.2I.9L)){2k=2k.J(/ *$/,\'\')}F 2k}}},1I:C(){F{kU:C(){E 51=$.3t(\'1i\',q.G.3T);if(51!==-1){q.G.3T.9F(51,1)}if(q.G.4s)q.G.4c=N;if(q.G.52)q.G.1L=N;if(q.G.1K)F;E 2e=[\'p\',\'4d\'];if(q.G.4s)q.1I.kR(2e);if(q.G.4c)q.1I.kX(2e)},kR:C(2e){E 2q=2e.12;2D(E i=0;i<2q;i++){if($.3t(2e[i],q.G.4s)==-1){q.G.4s.2N(2e[i])}}},kX:C(2e){E 2q=2e.12;2D(E i=0;i<2q;i++){E 3y=$.3t(2e[i],q.G.4c);if(3y!=-1){q.G.4c.9F(3y,1)}}},2K:C(B,47){q.1I.2C={4c:q.G.4c,4s:q.G.4s,6v:q.G.6v,5w:q.G.5w,5x:q.G.5x,5s:q.G.5s,1L:q.G.1L,52:q.G.52,6U:q.G.6U,3T:q.G.3T};$.7h(q.1I.2C,47);B=q.1I.6v(B);q.1I.$1j=$(\'<1j />\').1E(B);q.1I.5w();q.1I.5x();q.1I.kT();q.1I.1L();q.1I.3T();q.1I.ji();q.1I.5s();q.1I.6U();B=q.1I.$1j.B();q.1I.$1j.1t();F B},6v:C(B){if(!q.1I.2C.6v)F B;F B.J(/<!--[\\s\\S]*?-->/gi,\'\')},5w:C(B){if(!q.1I.2C.5w)F B;E 2q=q.1I.2C.5w.12;E 5J=[],dw=[];2D(E i=0;i<2q;i++){dw.2N(q.1I.2C.5w[i][1]);5J.2N(q.1I.2C.5w[i][0])}$.1u(5J,$.1d(C(1l,1F){q.1I.$1j.1h(1F).2x(C(){F $("<"+dw[1l]+" />",{B:$(q).B()})})},q))},5x:C(){if(!q.1I.2C.5x)F;E 2q=q.1I.2C.5x.12;q.1I.$1j.1h(\'1i\').1u($.1d(C(n,s){E $el=$(s);E 1p=$el.1c(\'1p\');2D(E i=0;i<2q;i++){if(1p&&1p.1V(2a 2n(\'^\'+q.1I.2C.5x[i][0],\'i\'))){E 1o=q.1I.2C.5x[i][1];$el.2x(C(){E Y=1k.3B(1o);F $(Y).1E($(q).25())})}}},q))},kT:C(){if(!q.1I.2C.4c&&q.1I.2C.4s){q.1I.$1j.1h(\'*\').5O(q.1I.2C.4s.31(\',\')).1u(C(i,s){if(s.3v===\'\')$(s).1t();O $(s).25().48()})}if(q.1I.2C.4c){q.1I.$1j.1h(q.1I.2C.4c.31(\',\')).1u(C(i,s){if($(s).3u(\'I-3W-Y\')||$(s).3u(\'I-K-2u\'))F;if(s.3v===\'\')$(s).1t();O $(s).25().48()})}},1L:C(){E 2q;if(!q.1I.2C.1L&&q.1I.2C.52){E du=[],dv=[];2q=q.1I.2C.52.12;2D(E i=0;i<2q;i++){du.2N(q.1I.2C.52[i][0]);dv.2N(q.1I.2C.52[i][1])}q.1I.$1j.1h(\'*\').1u($.1d(C(n,s){E $el=$(s);E 3y=$.3t($el[0].1o.3g(),du);E 5v=q.1I.j5(3y,dv,$el);if(5v){$.1u(5v,C(z,f){$el.1L(f)})}},q))}if(q.1I.2C.1L){2q=q.1I.2C.1L.12;2D(E i=0;i<2q;i++){E 9I=q.1I.2C.1L[i][1];if($.bj(9I))9I=9I.31(\' \');q.1I.$1j.1h(q.1I.2C.1L[i][0]).1L(9I)}}},j5:C(3y,5z,$el){E 5v=[];if(3y==-1){$.1u($el[0].4z,C(i,2w){5v.2N(2w.1y)})}O if(5z[3y]==\'*\'){5v=[]}O{$.1u($el[0].4z,C(i,2w){if($.bj(5z[3y])){if($.3t(2w.1y,5z[3y])==-1){5v.2N(2w.1y)}}O if(5z[3y]!=2w.1y){5v.2N(2w.1y)}})}F 5v},ki:C(el,bx){bx=2a 2n(bx,"g");F el.1u(C(){E 3q=$(q);E 2q=q.4z.12-1;2D(E i=2q;i>=0;i--){E 2w=q.4z[i];if(2w&&2w.nk&&2w.1y.3J(bx)>=0){3q.1L(2w.1y)}}})},3T:C(){if(!q.1I.2C.3T)F;q.1I.$1j.1h(q.1I.2C.3T.31(\',\')).1u(C(){E $el=$(q);E 1g=$el.1g();1g=1g.J(/\\6c/g,\'\');1g=1g.J(/&5k;/gi,\'\');1g=1g.J(/\\s/g,\'\');if(1g===\'\'&&$el.3R().12===0){$el.1t()}})},ji:C(){q.1I.$1j.1h(\'li p\').25().48()},5s:C(){if(!q.1I.2C.5s)F;E 2e=q.1I.2C.5s;if($.bj(q.1I.2C.5s))2e=q.1I.2C.5s.31(\',\');q.1I.ki(q.1I.$1j.1h(2e),\'^(1f-)\')},6U:C(){if(!q.1I.2C.6U)F;q.1I.$1j.1h(q.1I.2C.6U.31(\',\')).1u(C(){if(q.4z.12===0){$(q).25().48()}})}}},1A:C(){F{3Q:C(){F{B:{1J:q.1H.1a(\'B\'),1C:\'1e.3j\'},30:{1J:q.1H.1a(\'30\'),1n:{p:{1J:q.1H.1a(\'iB\'),1C:\'Q.3a\'},29:{1J:q.1H.1a(\'dp\'),1C:\'Q.3a\'},2F:{1J:q.1H.1a(\'1e\'),1C:\'Q.3a\'},h1:{1J:q.1H.1a(\'iC\'),1C:\'Q.3a\'},h2:{1J:q.1H.1a(\'iL\'),1C:\'Q.3a\'},h3:{1J:q.1H.1a(\'iM\'),1C:\'Q.3a\'},h4:{1J:q.1H.1a(\'kd\'),1C:\'Q.3a\'},h5:{1J:q.1H.1a(\'jt\'),1C:\'Q.3a\'}}},4n:{1J:q.1H.1a(\'4n\'),1C:\'26.3a\'},4h:{1J:q.1H.1a(\'4h\'),1C:\'26.3a\'},5S:{1J:q.1H.1a(\'5S\'),1C:\'26.3a\'},5r:{1J:q.1H.1a(\'5r\'),1C:\'26.3a\'},5q:{1J:\'&lU; \'+q.1H.1a(\'5q\'),1C:\'2d.3j\'},5u:{1J:\'1. \'+q.1H.1a(\'5u\'),1C:\'2d.3j\'},7n:{1J:\'< \'+q.1H.1a(\'7n\'),1C:\'3A.9v\'},3A:{1J:\'> \'+q.1H.1a(\'3A\'),1C:\'3A.9Y\'},M:{1J:q.1H.1a(\'M\'),1C:\'M.2R\'},1Z:{1J:q.1H.1a(\'1Z\'),1C:\'1Z.2R\'},V:{1J:q.1H.1a(\'V\'),1n:{V:{1J:q.1H.1a(\'b2\'),1C:\'V.2R\',1R:{2m:\'a\',in:{1J:q.1H.1a(\'e6\'),},2k:{1J:q.1H.1a(\'b2\')}}},6J:{1J:q.1H.1a(\'6J\'),1C:\'V.6J\',1R:{2m:\'a\',2k:{1c:{\'1G\':\'I-1n-V-e3\',\'4O-7p\':1q}}}}}},2Z:{1J:q.1H.1a(\'2Z\'),1n:{2c:{1J:q.1H.1a(\'jO\'),1C:\'2Z.2c\'},5m:{1J:q.1H.1a(\'jJ\'),1C:\'2Z.5m\'},4t:{1J:q.1H.1a(\'jH\'),1C:\'2Z.4t\'},9B:{1J:q.1H.1a(\'jF\'),1C:\'2Z.9B\'}}},aO:{1J:q.1H.1a(\'aO\'),1C:\'3L.1Y\'}}},2f:C(){q.1A.jw();q.1A.jx();q.1A.js();if(q.G.4i.12===0)F;q.$1A=q.1A.jL();q.1A.jv();q.1A.1E();q.1A.jP();q.1A.jN();q.1A.jM();if(q.G.aN){q.$T.on(\'jK.I 2s.I 2p.I\',$.1d(q.1R.1A,q))}},jL:C(){F $(\'<3k>\').2g(\'I-1A\').1c({\'id\':\'I-1A-\'+q.2H,\'9C\':\'1A\'})},jP:C(){$.1u(q.G.1A.30.1n,$.1d(C(i,s){if($.3t(i,q.G.30)==-1)82 q.G.1A.30.1n[i]},q))},jN:C(){$.1u(q.G.4i,$.1d(C(i,2h){if(!q.G.1A[2h])F;if(2h===\'1Z\'){if(q.G.7N===N)F;O if(!q.G.7N&&q.G.86===N)F}if(2h===\'M\'){if(q.G.7R===N)F;O if(!q.G.7R&&q.G.86===N)F}E 2U=q.G.1A[2h];q.$1A.1E($(\'<li>\').1E(q.1v.2f(2h,2U)))},q))},1E:C(){if(q.G.aI){q.$1A.2g(\'I-1A-qD\');$(q.G.aI).B(q.$1A)}O{q.$2P.6C(q.$1A)}},jM:C(){if(!q.L.7K())F;if(q.G.aI)F;if(!q.G.jD)F;q.1A.ea();$(q.G.6F).on(\'5N.I.\'+q.2H,$.1d(q.1A.ea,q))},jv:C(){if(q.L.6Y()&&q.G.jr){q.$1A.2g(\'I-1A-bn\')}},js:C(){if(q.G.4D)F;E 51=q.G.4i.4L(\'B\');if(51!==-1){q.G.4i.9F(51,1)}},jw:C(){if(q.G.dQ.12===0)F;$.1u(q.G.dQ,$.1d(C(i,s){E 51=q.G.4i.4L(s);q.G.4i.9F(51,1)},q))},jx:C(){if(!q.L.6Y()||q.G.e8.12===0)F;$.1u(q.G.e8,$.1d(C(i,s){E 51=q.G.4i.4L(s);q.G.4i.9F(51,1)},q))},ea:C(){E 3S=$(q.G.6F).3S();E 6M=1;if(q.G.6F===1k){6M=q.$2P.2v().2V}if((3S+q.G.6L)>6M){q.1A.jB(3S,6M)}O{q.1A.jA()}},jB:C(3S,6M){E 2V=q.G.6L+3S-6M;E 2c=0;E 2j=6M+q.$2P.3l()-32;E 2J=q.$2P.7D();q.$1A.2g(\'1A-7G-2P\');q.$1A.1O({4g:\'9E\',2J:2J,2V:2V+\'px\',2c:2c});if(3S>2j)$(\'.I-1n-\'+q.2H+\':aG\').3s();q.1A.jz();q.$1A.1O(\'jy\',(3S<2j)?\'aG\':\'i2\')},jA:C(){q.$1A.1O({4g:\'qQ\',2J:\'aF\',2V:0,2c:0,jy:\'aG\'});q.1A.ka();q.$1A.2W(\'1A-7G-2P\')},jz:C(){E 2V=q.$1A.68()+q.G.6L;E 4g=\'7G\';if(q.G.6F!==1k){2V=(q.$1A.68()+q.$1A.2v().2V)+q.G.6L;4g=\'9E\'}$(\'.I-1n-\'+q.2H).1u(C(){$(q).1O({4g:4g,2V:2V+\'px\'})})},ka:C(){E 2V=(q.$1A.68()+q.$1A.2v().2V);$(\'.I-1n-\'+q.2H).1u(C(){$(q).1O({4g:\'9E\',2V:2V+\'px\'})})}}},1w:C(){F{3Q:C(id,2i,2B){q.1w.4W=N;q.1w.2B=2B;q.1w.2i=2i;q.1w.$el=$(id);q.1w.$4e=$(\'<1j id="I-4e" />\');q.1w.$bY=$(\'<1j id="I-4e-3i" />\').1g(q.1H.1a(\'k8\'));q.1w.$3G=$(\'<3G 1m="1Z" 1y="1Z" />\');q.1w.$bY.1E(q.1w.$3G);q.1w.$4e.1E(q.1w.$bY);q.1w.$el.1E(q.1w.$4e);q.1w.$4e.3d(\'I.1w\');q.1w.$3G.3d(\'I.1w\');q.1w.$4e.on(\'kb.I.1w\',$.1d(q.1w.a7,q));q.1w.$4e.on(\'qS.I.1w\',$.1d(q.1w.iS,q));q.1w.$3G.on(\'kg.I.1w\',$.1d(C(e){e=e.7L||e;q.1w.aX(q.1w.$3G[0].5R[0],e)},q));q.1w.$4e.on(\'4Z.I.1w\',$.1d(C(e){e.2t();q.1w.$4e.2W(\'7U-cu\').2g(\'7U-4Z\');q.1w.aJ(e)},q))},kf:C(1Z,e){q.1w.4W=1q;q.1w.aX(1Z,e)},aJ:C(e){e=e.7L||e;E 5R=e.aU.5R;q.1w.aX(5R[0],e)},aX:C(1Z,e){if(q.G.86){q.1w.cG(1Z);q.1w.iE(1Z);F}E 4u=!!3p.aR?2a aR():4m;if(3p.aR){q.1w.cG(1Z);E 1y=(q.1w.1m==\'M\')?q.G.jU:q.G.jS;4u.1E(1y,1Z)}q.5F.2R();q.1W.2r(\'qc\',e,4u);q.1w.jZ(4u,e)},cG:C(1Z){q.1w.jT(1Z);if(q.1w.4W){q.1w.2i=(q.1w.1m==\'M\')?q.G.7R:q.G.7N;q.1w.2B=(q.1w.1m==\'M\')?q.M.1Y:q.1Z.1Y}},jT:C(1Z){q.1w.1m=\'M\';if(q.G.jX.4L(1Z.1m)==-1){q.1w.1m=\'1Z\'}},6A:C(7X,fd){if(7X===N||1s 7X!==\'43\')F fd;$.1u(7X,$.1d(C(k,v){if(v!==4m&&v.4o().4L(\'#\')===0)v=$(v).2L();fd.1E(k,v)},q));F fd},jZ:C(4u,e){if(q.1w.1m==\'M\'){4u=q.1w.6A(q.G.oY,4u);4u=q.1w.6A(q.1w.bk,4u)}O{4u=q.1w.6A(q.G.oX,4u);4u=q.1w.6A(q.1w.by,4u)}E 2Q=2a an();2Q.9T(\'oZ\',q.1w.2i);2Q.dY("X-p0-p1","an");2Q.jh=$.1d(C(){if(2Q.cS==4){E 1f=2Q.j0;1f=1f.J(/^\\[/,\'\');1f=1f.J(/\\]$/,\'\');E 2S;4U{2S=(1s 1f===\'70\'?$.iO(1f):1f)}56(pb){2S={6N:1q}}q.5F.3s();if(!q.1w.4W){q.1w.$4e.2W(\'7U-4Z\')}q.1w.2B(2S,q.1w.4W,e)}},q);2Q.ee(4u)},a7:C(e){e.2t();q.1w.$4e.2g(\'7U-cu\')},iS:C(e){e.2t();q.1w.$4e.2W(\'7U-cu\')},pe:C(){q.1w.bk={}},p7:C(1y,1F){q.1w.bk[1y]=1F},oO:C(1y){82 q.1w.bk[1y]},ox:C(){q.1w.by={}},oz:C(1y,1F){q.1w.by[1y]=1F},ot:C(1y){82 q.1w.by[1y]},iE:C(1Z){q.1w.iJ(1Z,$.1d(C(iK){q.1w.j7(1Z,iK)},q))},iJ:C(1Z,2B){E 2Q=2a an();E 85=(q.G.86.3J(/\\?/)!==\'-1\')?\'?\':\'&\';2Q.9T(\'os\',q.G.86+85+\'1y=\'+1Z.1y+\'&1m=\'+1Z.1m,1q);if(2Q.iI)2Q.iI(\'1g/oK; oL=x-oC-oE\');E jc=q;2Q.jh=C(e){if(q.cS==4&&q.cb==aE){jc.5F.2R();2B(j2(q.j0))}O if(q.cS==4&&q.cb!=aE){}};2Q.ee()},j8:C(9V,2i){E 2Q=2a an();if("pO"in 2Q){2Q.9T(9V,2i,1q)}O if(1s j9!="1z"){2Q=2a j9();2Q.9T(9V,2i)}O{2Q=4m}F 2Q},j7:C(1Z,2i){E 2Q=q.1w.j8(\'pW\',2i);if(!2Q){}O{2Q.pX=$.1d(C(){if(2Q.cb==aE){q.5F.3s();E aA=2i.4A(\'?\');if(!aA[0]){F N}if(!q.1w.4W){q.1w.$4e.2W(\'7U-4Z\')}E 2S={9D:aA[0]};if(q.1w.1m==\'1Z\'){E 2E=aA[0].4A(\'/\');2S.6f=2E[2E.12-1]}q.1w.2B(2S,q.1w.4W,N)}O{}},q);2Q.q5=C(){};2Q.1w.q6=C(e){};2Q.dY(\'q8-q4\',1Z.1m);2Q.dY(\'x-pZ-pJ\',\'pp-pm\');2Q.ee(1Z)}}}},L:C(){F{6Y:C(){F/(kj|kH|ky|kA)/.ai(ah.ao)},7K:C(){F!/(kj|kH|pl|ky|kA)/.ai(ah.ao)},pF:C(7X){F kD.5n.4o.64(7X)==\'[43 62]\'},3z:C(B,kM){B=B.J(/[\\6c-\\pG\\pH]/g,\'\');B=B.J(/&5k;/gi,\'\');B=B.J(/<\\/?br\\s?\\/?>/g,\'\');B=B.J(/\\s/g,\'\');B=B.J(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i,\'\');B=B.J(/<4J(.*?[^>])>$/i,\'4J\');B=B.J(/<4D(.*?[^>])>$/i,\'4D\');if(kM!==N){B=B.J(/<[^\\/>][^>]*><\\/[^>]+>/gi,\'\');B=B.J(/<[^\\/>][^>]*><\\/[^>]+>/gi,\'\')}B=$.3h(B);F B===\'\'},cY:C(5b){if(1s(5b)===\'1z\')F 0;F 5H(5b.J(\'px\',\'\'),10)},pz:C(6y){if(1s 6y==\'1z\')F;if(6y.3J(/^#/)==-1)F 6y;E kr=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;6y=6y.J(kr,C(m,r,g,b){F r+r+g+g+b+b});E bJ=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.5l(6y);F\'pA(\'+5H(bJ[1],16)+\', \'+5H(bJ[2],16)+\', \'+5H(bJ[3],16)+\')\'},6r:C(el){F $(\'<1j>\').1E($(el).eq(0).9K()).B()},aS:C(el){if($.3t(el.1o,q.G.9y)!==-1){F $(el)}O{F $(el).2o(q.G.9y.4o().3g(),q.$T[0])}},5C:C(el,1c){E $el=$(el);if(1s $el.1c(1c)==\'1z\'){F 1q}if($el.1c(1c)===\'\'){$el.1L(1c);F 1q}F N},3T:C(i,s){E $s=$($.dH(s));$s.1h(\'.I-7m-3b\').1L(\'1p\').1L(\'1G\');if($s.1h(\'hr, br, 1M, 4J, 4D\').12!==0)F;E 1g=$.3h($s.1g());if(q.L.3z(1g,N)){$s.1t()}},9x:C(){q.eO=q.$T.3S();q.bb=$(3p).3S();if(q.G.9w)q.fi=$(q.G.9w).3S()},bh:C(){if(1s q.9x===\'1z\'&&1s q.bb===\'1z\')F;$(3p).3S(q.bb);q.$T.3S(q.eO);if(q.G.9w)$(q.G.9w).3S(q.fi)},ad:C(){E 3b=1k.3B(\'1i\');3b.3E=\'I-7m-3b\';3b.3v=q.G.5Z;F 3b},4V:C(R){E 2e=q.G.4M;2e.2N(\'1i\');if(R.1o==\'9J\')2e.2N(\'a\');$(R).1h(2e.31(\',\')).5O(\'1i.I-K-2u\').25().48()},5T:C(R,4V){E 3q=q;$(R).2x(C(){if(4V===1q)3q.L.4V(q);F $(q).25()});F $(R)},4x:C(R,Y,4V){E 5J;E 3q=q;$(R).2x(C(){5J=$(\'<\'+Y+\' />\').1E($(q).25());2D(E i=0;i<q.4z.12;i++){5J.1c(q.4z[i].1y,q.4z[i].1F)}if(4V===1q)3q.L.4V(5J);F 5J});F 5J},iy:C(){E Q=q.K.49();if(!Q)F N;E 2v=q.1S.9G(Q);F(2v===0)?1q:N},6B:C(2m){if(1s 2m==\'1z\'){E 2m=q.K.49();if(!2m)F N}E 2v=q.1S.9G(2m);E 1g=$.3h($(2m).1g()).J(/\\n\\r\\n/g,\'\');F(2v==1g.12)?1q:N},q0:C(){E 2v=q.1S.9G(q.$T[0]);F(2v===0)?1q:N},e2:C(){E Q=q.$T[0];E 2v=q.1S.9G(Q);E 1g=$.3h($(Q).B().J(/(<([^>]+)>)/gi,\'\'));F(2v==1g.12)?1q:N},6X:C(Q){Q=Q[0]||Q;F Q&&q.L.7f(Q.1o)},7f:C(Y){if(1s Y==\'1z\')F N;F q.fk.ai(Y)},9P:C(1B,Y){E 2m=$(1B).2o(Y,q.$T[0]);if(2m.12==1){F 2m[0]}F N},9u:C(){F q.bH},ex:C(){q.bH=1q},9z:C(){q.bH=N},4H:C(el){if(!el){F N}if($(el).eG(\'.I-T\').12===0||$(el).3u(\'I-T\')){F N}F el},ix:C(){F q.L.4Y([\'cJ\',\'cs\',\'c8\',\'c3\',\'c6\',\'bM\'])},4Y:C(1o){E 1r=q.K.6l();E 1B=q.K.3x();if($.bj(1o)){E cU=0;$.1u(1o,$.1d(C(i,s){if(q.L.cQ(1B,1r,s)){cU++}},q));F(cU===0)?N:1q}O{F q.L.cQ(1B,1r,1o)}},cQ:C(1B,1r,1o){1o=1o.p8();F 1r&&1r.1o===1o?1r:1B&&1B.1o===1o?1B:N},p5:C(){F(q.L.1P(\'2G\')&&5H(q.L.1P(\'au\'),10)<9)?1q:N},pd:C(){F(q.L.1P(\'2G\')&&5H(q.L.1P(\'au\'),10)<10)?1q:N},hc:C(){F!!ah.ao.1V(/p3\\/7\\./)},1P:C(1P){E 4T=ah.ao.3g();E 1V=/(ei)[\\/]([\\w.]+)/.5l(4T)||/(iv)[ \\/]([\\w.]+)/.5l(4T)||/(7Q)[ \\/]([\\w.]+).*(cH)[ \\/]([\\w.]+)/.5l(4T)||/(7Q)[ \\/]([\\w.]+)/.5l(4T)||/(qN)(?:.*au|)[ \\/]([\\w.]+)/.5l(4T)||/(2G) ([\\w.]+)/.5l(4T)||4T.4L("qR")>=0&&/(ej)(?::| )([\\w.]+)/.5l(4T)||4T.4L("qT")<0&&/(4b)(?:.*? ej:([\\w.]+)|)/.5l(4T)||[];if(1P==\'cH\')F(1s 1V[3]!=\'1z\')?1V[3]==\'cH\':N;if(1P==\'au\')F 1V[2];if(1P==\'7Q\')F(1V[1]==\'iv\'||1V[1]==\'ei\'||1V[1]==\'7Q\');if(1V[1]==\'ej\')F 1P==\'2G\';if(1V[1]==\'ei\')F 1P==\'7Q\';F 1P==1V[1]},as:C(iq,i8,2v){E i=iq.4L(i8,2v);F i>=0?i:N},dV:C(){E $3f=$(\'B\');E 89=3p.7D;if(!89){E dT=1k.qs.qy();89=dT.4t-9H.lY(dT.2c)}E g3=1k.3f.fW<89;E b9=q.L.fZ();$3f.1O(\'bn\',\'i2\');if(g3)$3f.1O(\'gF-4t\',b9)},fZ:C(){E $3f=$(\'3f\');E 77=1k.3B(\'1j\');77.3E=\'I-gC-gD\';$3f.1E(77);E b9=77.lp-77.fW;$3f[0].nN(77);F b9},b8:C(){$(\'B\').1O({\'bn\':\'\',\'gF-4t\':\'\'});$(\'3f\').1t(\'I-gC-gD\')}}}};$(3p).on(\'2K.gA.I\',C(){$(\'[1f-gA="I"]\').I()});3Y.5n.3Q.5n=3Y.5n})(oA);',62,1675,'||||||||||||||||||||||||||this|||||||||||html|function||var|return|opts||redactor|replace|selection|utils|image|false|else||block|node||editor||link|||tag||||length||range||||||get|modal|attr|proxy|code|data|text|find|span|div|document|key|type|dropdown|tagName|style|true|parent|typeof|remove|each|button|upload|clean|name|undefined|toolbar|current|func|keydown|append|value|class|lang|tidy|title|linebreaks|removeAttr|img|next|css|browser|target|observe|caret|sync|set|match|core|formatted|insert|file||blocks|nodes|btn||contents|inline||buffer|blockquote|new|start|left|list|tags|build|addClass|btnName|url|end|out|href|element|RegExp|closest|focus|len|setCallback|keyup|preventDefault|marker|offset|item|replaceWith|textarea|click|linkify|callback|settings|for|arr|pre|msie|uuid|tabifier|width|load|val|label|push|setStart|box|xhr|show|json|sel|btnObject|top|removeClass|paragraphize|td|alignment|formatting|join|||||||||format|space|last|off|restore|body|toLowerCase|trim|placeholder|toggle|ul|height|tooltip|autosave|save|window|self|keyCode|hide|inArray|hasClass|innerHTML|setTimeout|getCurrent|pos|isEmpty|indent|createElement|after|imageBox|className|CodeMirror|input|setEnd|first|search|re|line|verified|matches|font|insertNode|init|children|scrollTop|removeEmpty|point|table|script|rel|Redactor|execCommand||option|collapse|object|getBlocks|||options|unwrap|getBlock|ctrl|mozilla|deniedTags|section|droparea|addRange|position|italic|buttons|close|resizeHandle|del|null|bold|toString|regexps|src|clearUnverified|allowedTags|right|formData|child|substr|replaceToTag|command|attributes|split|prev|modalBox|source|blockElem|cmd|margin|isRedactorParent|htmls|iframe|getSelection|indexOf|inlineTags|wrapper|aria|orgn|frag|resize|keys|ua|try|removeInlineTags|direct|collapsed|isCurrentOrParent|drop||index|allowedAttr|elem|arrow|while|catch|deleteContents|setAfter||linkProtocol|str|meta|strong|getMarkerAsHtml|align|cont|pasteBox|BR|contenteditable|nbsp|exec|center|prototype|paste|none|unorderedlist|underline|removeDataAttr|tab|orderedlist|attributesRemove|replaceTags|replaceStyles|toggleType|allowed|links|touchstart|removeEmptyAttr|tmp|https|progress|lastNode|parseInt|editter|replacement|isFunction|LI|br1|scroll|not|nodeValue|currentList|files|deleted|replaceWithContents|break|emptyHtml|visual|prop|marginTop|invisibleSpace|||String|currentLevel|call|||getRangeAt|innerHeight|lastList|shortcuts|inlines|u200B|params|wrap|filename|containerTag|methods|num|mousedown|form|getParent|templateName|charAt|node1|quot|replaceDivs|getOuterHtml|th|figure|TD|removeComments|getNodes|SPAN|hex|ENTER|getHiddenFields|isEndOfElement|prepend|display|instance|toolbarFixedTarget|tabindex|module|metaKey|unlink|Insert|toolbarFixedTopOffset|boxTop|error|100|shift|youtube|editorDiv|video|vimeo|removeWithoutAttr|insertBreakLine|tr|isBlock|isMobile|shiftKey|string|getMarker|preSpaces||appendChild|header|posFromIndex|scrollDiv|parHtml|hideAll|select|strike|dropact|setVerified|decoration|isBlockTag|getTabs|extend|sup|sub|endRange|possible|invisible|outdent|float|disabled|blocksSize|handler|tmpList|keyPosition|modif|alt|which|getEvent|rangeCount|setStartAfter|pattern|boundaryRange|toggleClass|innerWidth|startNode|edit|fixed|dropdowns|focn|_blank|isDesktop|originalEvent|embed|fileUpload|action|outerHTML|webkit|imageUpload|www|rtePaste|drag|level|weight|obj|z0|hideResize|figcaption|modalOverlay|delete|BACKSPACE|cloneRange|mark|s3|blank|listParent|windowWidth|DIV|size|getOffset|tagout|imageResizer|linkmarker|singleLine|OL|Header|setActive|active|ftp|resizer|apply|cleanlevel|audio|modalHeader|imageMargin|replaceParagraphsToBr|modalClose|tagblock|setMode|modalFooter|act|param|targetTouches|case|UL|imageFloatMargin|addProperties|blockLevelElements|inserted|onPaste|selectNodeContents|inputUrl|amp|isRemoveInline|selectElement|rebuffer|classSize|createRange|undo|Array|removeAllRanges|DELETE|items|removeMarkers|node2|insertDblBreakLine|icon|createTextNode|exceptTags|||plugins|addEvent|endNode|small|||||autosaveInterval|tabber|isMobileUndoRedo|cite|clear|tmpLi|Delete|character|returnValue|events|counter|ctrlKey|lastLevel|http|setClass|event|convertVideoLinks|codemirror|Add|closeHandler|isSelectAll|decrease|scrollTarget|saveScroll|alignmentTags|disableSelectAll||justify|role|filelink|absolute|splice|getOffsetOfElement|Math|attrs|PRE|clone|newLevel|indentValue|before|fixEmptyIndent|isTag|classname|nodeType|formatblock|open|safes|method|caretRange|methodVal|increase|cloned|selectionMarkers|isEnabled|editorHtml|normalizeLists|bind|caretPositionFromPoint|checked|onDrag|eventName|link_new_tab|mailto|IMG|substring|createSpaceElement|minHeight|showOnDesktop|blured|navigator|test|caretRangeFromPoint|createTextRange|re2|moveToPoint|XMLHttpRequest|userAgent|getPlainText|onPasteTidy|_this|strpos|encodeEntities|version|placeTag|mso|convertLinks|kbd|samp|s3file|matchContainers|marginBottom|property|200|auto|visible|setOffset|toolbarExternal|onDrop|com|BLOCKQUOTE|insertInIe|activeButtons|horizontalrule|enterKey|wrapperHtml|FormData|getAlignmentElement|enable|dataTransfer|prevList|marginLeft|traverseFile|onSync|firstChild|createDocumentFragment|spaces|link_insert|maxHeight|mouseout|parentA|deleteProperties|tabAsSpaces|enableBodyScroll|scrollbarWidth|mouseover|saveBodyScroll|windowHeight|parentEl||isContainerTable|blockHtml|restoreScroll|autosaveFields|isArray|imageFields|appendTo|u00a0|overflow|modalBody|clearStyle|onClick||replaceToParagraph|special|specialKey|prev2|callbacks|regex|fileFields|codeLength|isTextarea|imageFloat|redo|pageY|formatListToBlockquote|formatWrap|ESC|selectAll|marginRight|result|images|x200b|H6|redactorImageLink|highContrast|saveFormTags|convertInline|createCancelButton|listTag|ratio|isUnorderedCmdOrdered|isOrderedCmdUnordered|buttonsSize|showOnMobile|placeholdler|startOffset|createActionButton|createButton|getTextFromHtml|H4|headers|clearUnverifiedRemove|H5|verifiedTags|H3|getInlines|imageEditable|status|footer|imageDisplay|visibleModals|dropdownWidth|URL||selectionStart|activeButtonsStates|image_position|one|removeSpaces|currentEl|paragraphizeBlocks|closeTooltip|selectionEnd|TH|H2|addCallback|hover|formattingAdd|dropdownObject|enlargeOffset|htmlLength|regexB|commentsMatches|markerLength|blur|isCurrent|syncCode|showCode|setConfig|safari|isFocused|H1|add|outValues|inValues|addDropdown|imageResizable|setInactiveAll|isCurrentOrParentOne|isDelete|readyState|setDropdownProperties|matched|setDropdownAttr|isP|getText|normalize|autosaveOnChange|firstFound|count|headTag|219|autosaveName|modules|removeIt|curLang|221|extra|TAB|focused|direction||nodeToCaretPositionFromPoint|RedactorPlugins|getModuleMethods|content|isEndOfTable|formatTableWrapping|imageDelete||DOWN|slice|hotkeysShiftNums|quote|contOwnLine|Row|ownLine||allowedAttrTags|allowedAttrData|rTags|Column|setBefore|suffix|cleanTag|finish|Table|insertBreakLineProcessing|thead|tbody|head|parseHTML|tfoot|br2|stopPropagation|endContainer|endOffset|Link|filter|inputText|buttonsHide|iframeEnd|container|documentElementRect|setMarker|disableBodyScroll|address|htmlIe|setRequestHeader|setAfterOrBefore|iframeStart|removeFormat|isEndOfEditor|inactive|fonts|setFormat|link_edit|listsIds|buttonsHideOnMobile|convertImageLinks|observeScroll|finalNodes|linkSize|BODY|send|getNodesMarker|listType|attrAllowed|opr|rv|convertUrlLinks||||dfn|tagsEmpty||LEFT_WIN|replaced|tabKey|onShiftEnter|onTab|onArrowDown|enableSelectAll|replaceDivToBreakLine|opacity|formatMultiple|through|replaceDivToParagraph|strikethrough|cleanStyleOnEnter|showEdit|parents|unline|loadEditableControls|loadResizableControls|formatConvert|formatRemoveSameChildren|editerWidth|formatCollapsed|saveEditorScroll|decreaseLists|ie11PasteFrag|ie11FixInserting|aside|keydownStop|stop|increaseText|RIGHT|lineAfter|EndToEnd|superscript|execHtml|||||||||||blocksMatch|subscript||offsetNode|decreaseBlocks|setEndPoint|duplicate|saveTargetScroll|htmlFixMozilla|reIsBlock|switch|addArrowsEvent||article|setupBuffer|increaseBlocks|setupSelectAll|altKey|SHIFT|ALT|checkEvents|HR|indented|checkKeyEvents|htmlWithoutClean|META|CTRL|increaseLists|tempEnd|getTextareaName|createContainerBox|run|getRedo|loadContent|enableEditor|fromElement|fromTextarea|loadEditor|getUndo|pop|formatBlockquote|setForce|commonAncestorContainer|elements|empty|setRedo|setUndo|clientWidth|createTextarea|insertAfter|measureScrollbar|focusEnd|setHelpers|codeKeyupCallback|isOverflowing|disableMozillaEditing|createTooltip|setEvent|disableIeLinks|codeKeydownCallback|setEventDropUpload|setOptions|callEditor|setCodeAndCall|dir|dragImageUpload|setEventDrop|setEvents|dragFileUpload||setMultiple|setCollapsed|Code|Video|Image|Right|choose|Center|the|to||Align|Left|Head|args|scope|Function|tools|Color|scrollbar|measure|List|padding|Edit|replaceElement|isNeedReplaceElement|isLinebreaksOrNoBlocks|alignElement|jsxhr|formatTags|callbackName|success|setBlocks|setText|png|here|Drop|gif|shortcutsAdd|bindModuleMethods|loadModules|loadOptions|onClickCallback|fullscreen|||||||setInactive|setActiveInVisual|indenting|modified|textareaIndenting|isIe11|removeData|destroy|eventNamespace|insertParagraph|tempStart|setValue|onChange|startSync|setSelectionRange|setInactiveInCode|indexFromPos|anchor|showVisual|clearInterval||selected|moveResize|startResize|pageX|setResizable|round|stopResize|15px|fixImageSourceAfterDrop|inside|setFloating|update|buttonDelete|_delete|700|buttonSave|imageLink|floating|floatValue|imagePosition|onSet|restoreFormTags|pastePlainText|Apple|nofollow|linkNofollow|FIGCAPTION|onPasteWord|onPasteExtra|Mso|bmso|chars|cleanSpaces|beforekey|afterkey|haspopup|hidden|lastChild|walker|foco|orgo|internal|needle|restoreSelectionMarker|saveCodeFormatting|savePreFormatting|getPreCode|||||getOnlyImages|replaceDivsToBr|newTag|removeDirtyStyles|savePreCode|matchBR||onPasteRemoveEmpty|all|haystack|onPasteRemoveSpans||onPasteIeFixLinks|matchBlocks|chrome|isSingleLine|isCurrentOrParentHeader|isStartOfElement|destroyed|origHandler|paragraph|header1|properties|s3uploadFile|disableEvents|enableEvents|buildOverlay|overrideMimeType|s3executeOnSignedUrl|signedURL|header2|header3|aLink|parseJSON|aEdit|aUnlink|getSafes|onDragLeave|getTooltipPosition|hotkeysSpecialKeys|setEditable|linkTooltip|showTooltip|arguments|area|responseText|fieldset|decodeURIComponent|template|contrast|removeAttrGetRemoves|checkbox|s3uploadToS3|s3createCORSRequest|XDomainRequest|loadTemplates|imageEdit|that|setTitle|createDeleteButton|cancel|setButtonsWidth|onreadystatechange|removeParagraphsInLists|setEnter|handle|setContent|getTemplate|setDraggable|draggable|getSafesComments|restoreSafes|toolbarOverflow|isButtonSourceNeeded|header5|exitFromBlockquote|setOverflow|hideButtons|hideButtonsOnMobile|visibility|setDropdownsFixed|observeScrollDisable|observeScrollEnable|createMarkers|toolbarFixed|savedSel|align_justify|replaceSelection|align_right|pasteHTML|align_center|mouseup|createContainer|setFixed|loadButtons|align_left|setFormattingTags|removeNodesMarkers|setNodesMarker|fileUploadParam|getType|imageUploadParam|spans|fadeOut|imageTypes|createPasteBox|sendData|replaceBreaksToParagraphs|replaceBreaksToNewLines|cleanOnPaste|freeze|getPrev|anchorNode|startPointNode|startContainer|upload_label|setEndBefore|unsetDropdownsFixed|dragover|getLastBlock|header4|getInlinesTags|directUpload|change|map|removeAttrs|iPhone|SPACE|lastFound|insertInOthersBrowsers|isKey|setFocus|objects|isExceptLastOrFirst|shorthandRegex|keyupStop|removeEmptyLists|formatEmpty|langs|textNode|600|BlackBerry|location|Android|getData|xn|Object|thref|re3|buttonText|iPod|_moz_dirty|buttonInsert|cleanUrl|removeEmptyListInTable|removeEmptyTags|insertNewLine|lineBefore|dbl|convertImages|addToAllowed|removeInvisibleSpace|removeTags|setupAllowed|regexp|newTd|removeFromDenied|insertAfterLastElement|setEndAfter|u2014|blurCallback|106|107|down|focusCallback|104|101|alignleft|cut|aligncenter|102|dragenter|hellip|103|105|111|117||ins|116|115|toggleAttr|setAttr|118|offsetWidth|setData|toggleData|TEXTAREA||jpeg|alignright|112|110|109|113|strict|application|use|114|mdash|up|addBefore|Infinity|uploadImageField|pause|capslock|math|setToPoint|setAwesome|addFirst|addAfter|10px|nextNode|SHOW_TEXT|backspace|bull|createTreeWalker|setStartBefore|No|abs|ltr|VERSION|such|esc|removeIcon|copy|AutoUrlDetect|u00a9|pagedown|menu|enableInlineTableEditing|summary|NodeFilter|home|enableObjectResizing|details|trade|reg|legend|getCoords|changeIcon|hgroup|DL|u2122|caretOffset|nav|pageup|u2026|DD|or_choose|Choose|Outdent|Or|noscript|drop_file_here|Download|Indent|download|Upload|insert_table|Save|Cancel|Ordered|frame|fontcolor|Font|Anchor|Open|Italic|Deleted|backcolor|Justify|Unordered|Back|Horizontal|Rule|insert_row_above|Above|rows|Rows|image_web_link|delete_table|delete_row|Web|columns|Columns|Title|frameset|Position|None|add_head|Text|Email|insert_column_left|insert_column_right|Below|insert_row_below|File|Vimeo|Youtube|web|delete_column|video_html_code|specified||Embed|Underline|Alignment|187|disable|186|173|SECTION|145|188|autosaveError|191|post|done|190|189|numlock|144|f10|122|121|DT|120|delete_head|OUTPUT|123|f12|removeChild|ADDRESS|f11|ajax|HEADER|UP|jpe|Formatting|LEFT|applet|merge|youtu|Normal|optional|Name|u2010|Bold|Quote|Key|getOwnPropertyNames|FOOTER|ASIDE|setInterval|1000|192|220|222|fromCharCode|Unlink|HTML|_|ARTICLE|119|sid||modalClosed||705|bodyOveflow|fast||GET|removeFileFields|activeElement|dropdownHide|toggleActive|clearFileFields|fileUploadError|addFileFields|jQuery|overlay|user|touchend|defined|labelledby|dialog|touchmove|mousemove|dragstart|plain|charset|times|Close|removeImageFields|dropdownShown|getElement|getBox|getTextarea|getToolbar|Callback|getEditor|getObject|uploadFileFields|uploadImageFields|POST|Requested|With|_data|Trident|dash|isOldIe|max|addImageFields|toUpperCase|addButton|unselectable|err|namespace|isLessIe10|clearImageFields|move|cursor|nodeToPoint|addBack|clientX|clientY|iPad|read|500|allowfullscreen|public|insertHTML|frameborder|281|deletedLink|insertedLink|0px|context||insertHtml|hexToRgb|rgb|enter|host|php|createLink|isString|u200D|uFEFF|toggleStyle|acl|addTab|addTemplate|createTabber|TR|withCredentials|imageUploadError|getModal|outerHeight|20px|email|focusin|modalOpened|PUT|onload|cssText|amz|isStartOfEditor|removeStyle|removeStyleRule|player|Type|onerror|onprogress|grep|Content|hasOwnProperty|dropdownShow|fake|uploadStart|shapes|slevel|removePhp|fadeIn|colspan|floor|1strike|9999px|syncBefore|textContent|pasteBefore|yes|cloneContents|1500|getHtml|documentElement|Ss|parentNode|docs|getOnlyLinksAndImages|guid|getBoundingClientRect|previousSibling|cleanEmptyParagraph|getNext|innerText|external|nextSibling|xml|spacerun|sdata|setSize|converted|fromPoint|WordDocument|refresh|opera|setSelection|setCursor|relative|trident|dragleave|compatible|extractContents|rowspan|getValue|replaceWithHtml|stripTags|lastBlock|listSelections'.split('|'),0,{}))
\ No newline at end of file
+!function(t){"use strict";function e(t,i){return new e.prototype.init(t,i)}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t)}});var i=0;t.fn.redactor=function(i){var r=[],o=Array.prototype.slice.call(arguments,1);return"string"==typeof i?this.each(function(){var e,s=t.data(this,"redactor");if("-1"!==i.search(/\./)?(e=i.split("."),"undefined"!=typeof s[e[0]]&&(e=s[e[0]][e[1]])):e=s[i],"undefined"!=typeof s&&t.isFunction(e)){var n=e.apply(s,o);void 0!==n&&n!==s&&r.push(n)}else t.error('No such method "'+i+'" for Redactor')}):this.each(function(){t.data(this,"redactor",{}),t.data(this,"redactor",e(this,i))}),0===r.length?this:1===r.length?r[0]:r},t.Redactor=e,t.Redactor.VERSION="2.11",t.Redactor.modules=["air","autosave","block","buffer","build","button","caret","clean","code","core","detect","dropdown","events","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","marker","modal","observe","offset","paragraphize","paste","placeholder","progress","selection","shortcuts","storage","toolbar","upload","uploads3","utils","browser"],t.Redactor.settings={},t.Redactor.opts={animation:!1,lang:"en",direction:"ltr",spellcheck:!0,overrideStyles:!0,stylesClass:!1,scrollTarget:document,focus:!1,focusEnd:!1,clickToEdit:!1,structure:!1,tabindex:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:!1,callbacks:{},placeholder:!1,linkify:!0,enterKey:!0,pastePlainText:!1,pasteImages:!0,pasteLinks:!0,pasteBlockTags:["pre","h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","p","figure","figcaption"],pasteInlineTags:["br","strong","ins","code","del","span","samp","kbd","sup","sub","mark","var","cite","small","b","u","em","i"],preClass:!1,preSpaces:4,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveFields:!1,imageUpload:null,imageUploadParam:"file",imageUploadFields:!1,imageUploadForms:!1,imageTag:"figure",imageEditable:!0,imageCaption:!0,imagePosition:!1,imageResizable:!1,imageFloatMargin:"10px",dragImageUpload:!0,multipleImageUpload:!0,clipboardImageUpload:!0,fileUpload:null,fileUploadParam:"file",fileUploadFields:!1,fileUploadForms:!1,dragFileUpload:!0,s3:!1,linkNewTab:!1,linkTooltip:!0,linkNofollow:!1,linkSize:30,linkValidation:!0,pasteLinkTarget:!1,videoContainerClass:"video-container",toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,air:!1,airWidth:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,buttons:["format","bold","italic","deleted","lists","image","file","link","horizontalrule"],buttonsTextLabeled:!1,buttonsHide:[],buttonsHideOnMobile:[],script:!0,removeNewlines:!1,removeComments:!0,replaceTags:{b:"strong",i:"em",strike:"del"},keepStyleAttr:[],keepInlineOnEnter:!1,shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,activeButtons:["deleted","italic","bold"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted"},langs:{en:{format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U",lists:"Lists","link-insert":"Insert link","link-edit":"Edit link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save","delete":"Delete",text:"Text",edit:"Edit",title:"Title",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line","upload-label":"Drop file here or ",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","image-position":"Position",none:"None",left:"Left",right:"Right",center:"Center","accessibility-help-label":"Rich text editor"}},type:"textarea",inline:!1,inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],paragraphize:!0,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",emptyHtmlRendered:t("").html("​").html(),imageTypes:["image/png","image/jpeg","image/gif"],userAgent:navigator.userAgent.toLowerCase(),observe:{dropdowns:[]},regexps:{linkyoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,linkvimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,linkimage:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},e.fn=t.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(e,r){return this.$element=t(e),this.uuid=i++,this.sBuffer=[],this.sRebuffer=[],this.loadOptions(r),this.loadModules(),this.opts.clickToEdit&&!this.$element.hasClass("redactor-click-to-edit")?this.loadToEdit(r):(this.$element.hasClass("redactor-click-to-edit")&&this.$element.removeClass("redactor-click-to-edit"),this.reIsBlock=new RegExp("^("+this.opts.blockTags.join("|").toUpperCase()+")$","i"),this.reIsInline=new RegExp("^("+this.opts.inlineTags.join("|").toUpperCase()+")$","i"),this.opts.dragImageUpload=null===this.opts.imageUpload?!1:this.opts.dragImageUpload,this.opts.dragFileUpload=null===this.opts.fileUpload?!1:this.opts.dragFileUpload,this.formatting={},this.lang.load(),t.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.$editor=this.$element,this.detectType(),this.core.callback("start"),this.core.callback("startToEdit"),this.start=!0,void this.build.start())},detectType:function(){this.build.isInline()||this.opts.inline?this.opts.type="inline":this.build.isTag("DIV")?this.opts.type="div":this.build.isTag("PRE")&&(this.opts.type="pre")},loadToEdit:function(e){this.$element.on("click.redactor-click-to-edit",t.proxy(function(){this.initToEdit(e)},this)),this.$element.addClass("redactor-click-to-edit")},initToEdit:function(e){t.extend(e.callbacks,{startToEdit:function(){this.insert.node(this.marker.get(),!1)},initToEdit:function(){this.selection.restore(),this.clickToCancelStorage=this.code.get(),t(this.opts.clickToCancel).off(".redactor-click-to-edit"),t(this.opts.clickToCancel).show().on("click.redactor-click-to-edit",t.proxy(function(i){i.preventDefault(),this.core.destroy(),this.events.syncFire=!1,this.$element.html(this.clickToCancelStorage),this.core.callback("cancel",this.clickToCancelStorage),this.events.syncFire=!0,this.clickToCancelStorage="",t(this.opts.clickToCancel).hide(),t(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",t.proxy(function(){this.initToEdit(e)},this)),this.$element.addClass("redactor-click-to-edit")},this)),t(this.opts.clickToSave).off(".redactor-click-to-edit"),t(this.opts.clickToSave).show().on("click.redactor-click-to-edit",t.proxy(function(i){i.preventDefault(),this.core.destroy(),this.core.callback("save",this.code.get()),t(this.opts.clickToCancel).hide(),t(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",t.proxy(function(){this.initToEdit(e)},this)),this.$element.addClass("redactor-click-to-edit")},this))}}),this.$element.redactor(e),this.$element.off(".redactor-click-to-edit")},loadOptions:function(e){var i={};"undefined"!=typeof t.Redactor.settings.namespace?this.$element.hasClass(t.Redactor.settings.namespace)&&(i=t.Redactor.settings):i=t.Redactor.settings,this.opts=t.extend({},t.Redactor.opts,this.$element.data(),e),this.opts=t.extend({},this.opts,i)},getModuleMethods:function(t){return Object.getOwnPropertyNames(t).filter(function(e){return"function"==typeof t[e]})},loadModules:function(){for(var e=t.Redactor.modules.length,i=0;e>i;i++)this.bindModuleMethods(t.Redactor.modules[i])},bindModuleMethods:function(t){if("undefined"!=typeof this[t]){this[t]=this[t]();for(var e=this.getModuleMethods(this[t]),i=e.length,r=0;i>r;r++)this[t][e[r]]=this[t][e[r]].bind(this)}},air:function(){return{enabled:!1,collapsed:function(){this.opts.air&&this.selection.get().collapseToStart()},collapsedEnd:function(){this.opts.air&&this.selection.get().collapseToEnd()},build:function(){this.detect.isMobile()||(this.button.hideButtons(),this.button.hideButtonsOnMobile(),0!==this.opts.buttons.length&&(this.$air=this.air.createContainer(),this.opts.airWidth!==!1&&this.$air.css("width",this.opts.airWidth),this.air.append(),this.button.$toolbar=this.$air,this.button.setFormatting(),this.button.load(this.$air),this.core.editor().on("mouseup.redactor",this,t.proxy(function(t){""!==this.selection.text()&&this.air.show(t)},this))))},append:function(){this.$air.appendTo("body")},createContainer:function(){return t("<ul>").addClass("redactor-air").attr({id:"redactor-air-"+this.uuid,role:"toolbar"}).hide()},show:function(e){this.selection.saveInstant(),t(".redactor-air").hide();var i=0,r=this.$air.innerWidth();t(window).width()<e.clientX+r&&(i=200),this.$air.css({left:e.clientX-i+"px",top:e.clientY+10+t(document).scrollTop()+"px"}).show(),this.air.enabled=!0,this.air.bindHide()},bindHide:function(){t(document).on("mousedown.redactor-air."+this.uuid,t.proxy(function(e){var i=t(e.target).closest(".redactor-dropdown").length;if(0===t(e.target).closest(this.$air).length&&0===i){var r=this.air.hide(e);r!==!1&&this.marker.remove()}},this)).on("keydown.redactor-air."+this.uuid,t.proxy(function(e){var i=e.which;if((this.utils.isRedactorParent(e.target)||t(e.target).hasClass("redactor-in"))&&0===t(e.target).closest("#redactor-modal").length){if(i===this.keyCode.ESC)this.selection.get().collapseToStart();else if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){var r=this.selection.get(),o=this.selection.range(r);o.deleteContents()}else i===this.keyCode.ENTER&&this.selection.get().collapseToEnd();this.air.enabled?this.air.hide(e):this.selection.get().collapseToStart()}},this))},hide:function(e){var i=e.ctrlKey||e.metaKey||e.shiftKey&&e.altKey;return i?!1:(this.button.setInactiveAll(),this.$air.fadeOut(100),this.air.enabled=!1,t(document).off("mousedown.redactor-air."+this.uuid),void t(document).off("keydown.redactor-air."+this.uuid))}}},autosave:function(){return{enabled:!1,html:!1,init:function(){this.opts.autosave&&(this.autosave.enabled=!0,this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"))},is:function(){return this.autosave.enabled},send:function(){if(this.opts.autosave&&(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source)){var e={};e.name=this.autosave.name,e[this.autosave.name]=this.autosave.source,e=this.autosave.getHiddenFields(e);var i=t.ajax({url:this.opts.autosave,type:"post",data:e});i.done(this.autosave.success)}},getHiddenFields:function(e){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?e:(t.each(this.opts.autosaveFields,t.proxy(function(i,r){null!==r&&0===r.toString().indexOf("#")&&(r=t(r).val()),e[i]=r},this)),e)},success:function(t){var e;try{e=JSON.parse(t)}catch(i){e=t}var r="undefined"==typeof e.error?"autosave":"autosaveError";this.core.callback(r,this.autosave.name,e),this.autosave.html=this.autosave.source},disable:function(){this.autosave.enabled=!1,clearInterval(this.autosaveTimeout)}}},block:function(){return{format:function(e,i,r,o){return e="quote"===e?"blockquote":e,this.block.tags=["p","blockquote","pre","h1","h2","h3","h4","h5","h6","div","figure"],-1!==t.inArray(e,this.block.tags)?("p"===e&&"undefined"==typeof i&&(i="class"),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.block.formatCollapsed(e,i,r,o):this.block.formatUncollapsed(e,i,r,o)):void 0},formatCollapsed:function(e,i,r,o){this.selection.save();var s=this.selection.block(),n=s.tagName.toLowerCase();if(-1===t.inArray(n,this.block.tags))return void this.selection.restore();var a=!1;n===e&&void 0===i&&(e="p",a=!0),a&&(this.block.removeAllClass(),this.block.removeAllAttr());var l;if("blockquote"===n&&this.utils.isEndOfElement(s)){this.marker.remove(),l=document.createElement("p"),l.innerHTML=this.opts.invisibleSpace,t(s).after(l),this.caret.start(l);var c=t(s).children().last();0!==c.length&&"BR"===c[0].tagName&&c.remove()}else l=this.utils.replaceToTag(s,e);if("object"==typeof i){o=r;for(var d in i)l=this.block.setAttr(l,d,i[d],o)}else l=this.block.setAttr(l,i,r,o);return"pre"===e&&1===l.length&&t(l).html(t.trim(t(l).html())),this.selection.restore(),this.block.removeInlineTags(l),l},formatUncollapsed:function(e,i,r,o){this.selection.save();var s=[],n=this.selection.blocks();n[0]&&(t(n[0]).hasClass("redactor-in")||t(n[0]).hasClass("redactor-box"))&&(n=this.core.editor().find(this.opts.blockTags.join(", ")));for(var a=n.length,l=0;a>l;l++){var c=n[l].tagName.toLowerCase();if(-1!==t.inArray(c,this.block.tags)&&"figure"!==c){var d=this.utils.replaceToTag(n[l],e);if("object"==typeof i){o=r;for(var h in i)d=this.block.setAttr(d,h,i[h],o)}else d=this.block.setAttr(d,i,r,o);s.push(d),this.block.removeInlineTags(d)}}if(this.selection.restore(),"pre"===e&&0!==s.length){var u=s[0];t.each(s,function(e,i){0!==e&&(t(u).append("\n"+t.trim(i.html())),t(i).remove())}),s=[],s.push(u)}return s},removeInlineTags:function(e){e=e[0]||e;var i=this.opts.inlineTags,r=["PRE","H1","H2","H3","H4","H5","H6"];if(-1!==t.inArray(e.tagName,r)){if("PRE"!==e.tagName){var o=i.indexOf("a");i.splice(o,1)}t(e).find(i.join(",")).not(".redactor-selection-marker").contents().unwrap()}},setAttr:function(t,e,i,r){if("undefined"==typeof e)return t;var o="undefined"==typeof r?"replace":r;return t="class"===e?this.block[o+"Class"](i,t):"remove"===o?this.block[o+"Attr"](e,t):"removeAll"===o?this.block[o+"Attr"](e,t):this.block[o+"Attr"](e,i,t)},getBlocks:function(e){if(e="undefined"==typeof e?this.selection.blocks():e,t(e).hasClass("redactor-box")){var i=[],r=this.core.editor().children();return t.each(r,t.proxy(function(t,e){this.utils.isBlock(e)&&i.push(e)},this)),i}return e},replaceClass:function(e,i){return t(this.block.getBlocks(i)).removeAttr("class").addClass(e)[0]},toggleClass:function(e,i){return t(this.block.getBlocks(i)).toggleClass(e)[0]},addClass:function(e,i){return t(this.block.getBlocks(i)).addClass(e)[0]},removeClass:function(e,i){return t(this.block.getBlocks(i)).removeClass(e)[0]},removeAllClass:function(e){return t(this.block.getBlocks(e)).removeAttr("class")[0]},replaceAttr:function(e,i,r){return r=this.block.removeAttr(e,r),t(r).attr(e,i)[0]},toggleAttr:function(e,i,r){r=this.block.getBlocks(r);var o=this,s=[];return t.each(r,function(r,n){var a=t(n);a.attr(e)?s.push(o.block.removeAttr(e,n)):s.push(o.block.addAttr(e,i,n))}),s},addAttr:function(e,i,r){return t(this.block.getBlocks(r)).attr(e,i)[0]},removeAttr:function(e,i){return t(this.block.getBlocks(i)).removeAttr(e)[0]},removeAllAttr:function(e){e=this.block.getBlocks(e);var i=[];return t.each(e,function(t,e){if("undefined"!=typeof e.attributes)for(;e.attributes.length;)e.removeAttribute(e.attributes[0].name);i.push(e)}),i}}},buffer:function(){return{set:function(t){"undefined"==typeof t&&this.buffer.clear(),"undefined"==typeof t||"undo"===t?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){var t=this.selection.saveInstant(),e=this.sBuffer[this.sBuffer.length-1],i=this.core.editor().html(),r="undefined"==typeof e||e[0]!==i;r&&this.sBuffer.push([i,t])},setRedo:function(){var t=this.selection.saveInstant();this.sRebuffer.push([this.core.editor().html(),t])},add:function(){this.sBuffer.push([this.core.editor().html(),0])},undo:function(){if(0!==this.sBuffer.length){var t=this.sBuffer.pop();this.buffer.set("redo"),this.core.editor().html(t[0]),this.selection.restoreInstant(t[1]),this.selection.restore(),this.observe.load()}},redo:function(){if(0!==this.sRebuffer.length){var t=this.sRebuffer.pop();this.buffer.set("undo"),this.core.editor().html(t[0]),this.selection.restoreInstant(t[1]),this.selection.restore(),this.observe.load()}},clear:function(){this.sRebuffer=[]}}},build:function(){return{start:function(){if("inline"===this.opts.type)this.opts.type="inline";else if("div"===this.opts.type){var e=t.trim(this.$editor.html());""===e&&this.$editor.html(this.opts.emptyHtml),this.build.buildTextarea()}else"textarea"===this.opts.type&&this.build.startTextarea();this.build.setIn(),this.build.setId(),this.build.enableEditor(),this.build.setOptions(),this.build.callEditor()},createContainerBox:function(){this.$box=t('<div class="redactor-box" role="application" />')},setIn:function(){this.core.editor().addClass("redactor-in")},setId:function(){var t="textarea"===this.opts.type?"redactor-uuid-"+this.uuid:this.$element.attr("id");this.core.editor().attr("id","undefined"==typeof t?"redactor-uuid-"+this.uuid:t)},getName:function(){var t=this.$element.attr("name");return"undefined"==typeof t?"content-"+this.uuid:t},buildTextarea:function(){this.$textarea=t("<textarea>"),this.$textarea.attr("name",this.build.getName()),this.$textarea.hide(),this.$element.after(this.$textarea),this.build.setStartAttrs()},loadFromTextarea:function(){this.$editor=t("<div />"),this.$textarea=this.$element,this.$element.attr("name",this.build.getName()),this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.build.setStartAttrs(),this.$editor.addClass("redactor-layer"),this.opts.overrideStyles&&this.$editor.addClass("redactor-styles"),this.$element.hide(),this.$box.prepend('<span class="redactor-voice-label" id="redactor-voice-'+this.uuid+'" aria-hidden="false">'+this.lang.get("accessibility-help-label")+"</span>")},setStartAttrs:function(){this.$editor.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},startTextarea:function(){this.build.createContainerBox(),this.build.loadFromTextarea(),this.code.start(this.core.textarea().val()),this.core.textarea().val(this.clean.onSync(this.$editor.html()))},isTag:function(t){return this.$element[0].tagName===t},isInline:function(){return!this.build.isTag("TEXTAREA")&&!this.build.isTag("DIV")&&!this.build.isTag("PRE")},enableEditor:function(){this.core.editor().attr({contenteditable:!0})},setOptions:function(){"inline"===this.opts.type&&(this.opts.enterKey=!1),"inline"!==this.opts.type&&"pre"!==this.opts.type||(this.opts.toolbarMobile=!1,this.opts.toolbar=!1,this.opts.air=!1,this.opts.linkify=!1),this.core.editor().attr("spellcheck",this.opts.spellcheck),this.opts.structure&&this.core.editor().addClass("redactor-structure"),this.opts.stylesClass&&this.core.editor().addClass(this.opts.stylesClass),"textarea"===this.opts.type&&(this.core.box().attr("dir",this.opts.direction),this.core.editor().attr("dir",this.opts.direction),this.opts.tabindex&&this.core.editor().attr("tabindex",this.opts.tabindex),this.opts.minHeight?this.core.editor().css("min-height",this.opts.minHeight):this.core.editor().css("min-height","40px"),this.opts.maxHeight&&this.core.editor().css("max-height",this.opts.maxHeight),this.opts.maxWidth&&this.core.editor().css({"max-width":this.opts.maxWidth,margin:"auto"}))},callEditor:function(){this.build.disableBrowsersEditing(),this.events.init(),this.build.setHelpers(),(this.opts.toolbar||this.opts.air)&&(this.toolbarsButtons=this.button.init()),this.opts.air?this.air.build():this.opts.toolbar&&this.toolbar.build(),this.detect.isMobile()&&this.opts.toolbarMobile&&this.opts.air&&(this.opts.toolbar=!0,this.toolbar.build()),(this.opts.air||this.opts.toolbar)&&(this.core.editor().on("mouseup.redactor-observe."+this.uuid+" keyup.redactor-observe."+this.uuid+" focus.redactor-observe."+this.uuid+" touchstart.redactor-observe."+this.uuid,t.proxy(this.observe.toolbar,this)),this.core.element().on("blur.callback.redactor",t.proxy(function(){this.button.setInactiveAll()},this))),this.modal.templates(),this.build.plugins(),this.autosave.init(),this.code.html=this.code.cleaned(this.core.editor().html()),this.core.callback("init"),this.core.callback("initToEdit"),this.storage.observe(),this.start=!1},setHelpers:function(){this.opts.linkify&&this.linkify.format(),this.placeholder.init(),this.opts.focus?setTimeout(this.focus.start,100):this.opts.focusEnd&&setTimeout(this.focus.end,100)},disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1)}catch(t){}},plugins:function(){this.opts.plugins&&t.each(this.opts.plugins,t.proxy(function(i,r){var o="undefined"!=typeof RedactorPlugins&&"undefined"!=typeof RedactorPlugins[r]?RedactorPlugins:e.fn;if(t.isFunction(o[r])){this[r]=o[r]();for(var s=this.getModuleMethods(this[r]),n=s.length,a=0;n>a;a++)this[r][s[a]]=this[r][s[a]].bind(this);if("undefined"!=typeof this[r].langs){var l={};"undefined"!=typeof this[r].langs[this.opts.lang]?l=this[r].langs[this.opts.lang]:"undefined"==typeof this[r].langs[this.opts.lang]&&"undefined"!=typeof this[r].langs.en&&(l=this[r].langs.en);var c=this;t.each(l,function(t,e){"undefined"==typeof c.opts.curLang[t]&&(c.opts.curLang[t]=e)})}t.isFunction(this[r].init)&&this[r].init()}},this))}}},button:function(){return{toolbar:function(){return"undefined"!=typeof this.button.$toolbar&&this.button.$toolbar?this.button.$toolbar:this.$toolbar},init:function(){return{format:{title:this.lang.get("format"),icon:!0,dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("heading1"),func:"block.format"},h2:{title:this.lang.get("heading2"),func:"block.format"},h3:{title:this.lang.get("heading3"),func:"block.format"},h4:{title:this.lang.get("heading4"),func:"block.format"},h5:{title:this.lang.get("heading5"),func:"block.format"},h6:{title:this.lang.get("heading6"),func:"block.format"}}},bold:{title:this.lang.get("bold-abbr"),icon:!0,label:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic-abbr"),icon:!0,label:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted-abbr"),icon:!0,label:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline-abbr"),icon:!0,label:this.lang.get("underline"),func:"inline.format"},lists:{title:this.lang.get("lists"),icon:!0,dropdown:{unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease",observe:{element:"li",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase",observe:{element:"li",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},ul:{title:"&bull; "+this.lang.get("bulletslist"),icon:!0,func:"list.toggle"},ol:{title:"1. "+this.lang.get("numberslist"),icon:!0,func:"list.toggle"},outdent:{title:this.lang.get("outdent"),icon:!0,func:"indent.decrease"},indent:{title:this.lang.get("indent"),icon:!0,func:"indent.increase"},image:{title:this.lang.get("image"),icon:!0,func:"image.show"},file:{title:this.lang.get("file"),icon:!0,func:"file.show"},link:{title:this.lang.get("link"),icon:!0,dropdown:{link:{title:this.lang.get("link-insert"),func:"link.show",observe:{element:"a","in":{title:this.lang.get("link-edit")},out:{title:this.lang.get("link-insert")}}},unlink:{title:this.lang.get("unlink"),func:"link.unlink",observe:{element:"a",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},horizontalrule:{title:this.lang.get("horizontalrule"),icon:!0,func:"line.insert"}}},setFormatting:function(){t.each(this.toolbarsButtons.format.dropdown,t.proxy(function(e,i){-1===t.inArray(e,this.opts.formatting)&&delete this.toolbarsButtons.format.dropdown[e]},this))},hideButtons:function(){0!==this.opts.buttonsHide.length&&this.button.hideButtonsSlicer(this.opts.buttonsHide)},hideButtonsOnMobile:function(){this.detect.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&this.button.hideButtonsSlicer(this.opts.buttonsHideOnMobile)},hideButtonsSlicer:function(e){t.each(e,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);-1!==i&&this.opts.buttons.splice(i,1)},this))},load:function(e){this.button.buttons=[],t.each(this.opts.buttons,t.proxy(function(i,r){!this.toolbarsButtons[r]||"file"===r&&!this.file.is()||"image"===r&&!this.image.is()||e.append(t("<li>").append(this.button.build(r,this.toolbarsButtons[r])))},this))},buildButtonTooltip:function(e,i){if(!this.opts.air&&!this.detect.isMobile()){var r=t("<span>");r.addClass("re-button-tooltip"),r.html(i);var o=this,s=this.button.toolbar(),n=s.closest(".redactor-toolbar-box");n=0===n.length?s:n,n.prepend(r),e.on("mouseover",function(){if(!t(this).hasClass("redactor-button-disabled")){var i=s.hasClass("toolbar-fixed-box")?e.offset():e.position();i=o.opts.toolbarFixedTarget!==document?e.position():i;var n=s.hasClass("toolbar-fixed-box")?e.position().top:i.top,a=e.innerHeight(),l=e.innerWidth(),c=s.hasClass("toolbar-fixed-box")?"fixed":"absolute";c=o.opts.toolbarFixedTarget!==document?"absolute":c;var d=o.opts.toolbarFixedTarget!==document?s.position().top:0;r.show(),r.css({top:n+a+d+"px",left:i.left+l/2-r.innerWidth()/2+"px",position:c})}}).on("mouseout",function(){r.hide()})}},build:function(e,i){if(this.opts.toolbar!==!1){var r="undefined"!=typeof i.label?i.label:i.title,o=t('<a href="javascript:void(null);" alt="'+r+'" rel="'+e+'" />');if(o.addClass("re-button re-"+e),o.attr({role:"button","aria-label":r,tabindex:"-1"}),"undefined"==typeof i.icon||this.opts.buttonsTextLabeled)o.html(i.title);else{var s=t("<i>");s.addClass("re-icon-"+e),o.append(s),o.addClass("re-button-icon"),this.button.buildButtonTooltip(o,r)}if((i.func||i.command||i.dropdown)&&this.button.setEvent(o,e,i),i.dropdown){o.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var n=t('<ul class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+e+'" style="display: none;">');o.data("dropdown",n),this.dropdown.build(e,n,i.dropdown)}return this.button.buttons.push(o),o}},getButtons:function(){return this.button.toolbar().find("a.re-button")},getButtonsKeys:function(){return this.button.buttons},setEvent:function(e,i,r){e.on("mousedown",t.proxy(function(t){if(t.preventDefault(),e.hasClass("redactor-button-disabled"))return!1;var o="func",s=r.func;return r.command?(o="command",s=r.command):r.dropdown&&(o="dropdown",s=!1),this.button.toggle(t,i,o,s),!1},this))},toggle:function(t,e,i,r,o){!this.detect.isIe()&&this.detect.isDesktop()||(this.utils.freezeScroll(),t.returnValue=!1),"command"===i?this.inline.format(r):"dropdown"===i?this.dropdown.show(t,e):this.button.clickCallback(t,r,e,o),"dropdown"!==i&&this.dropdown.hideAll(!1),this.opts.air&&"dropdown"!==i&&this.air.hide(t),!this.detect.isIe()&&this.detect.isDesktop()||this.utils.unfreezeScroll()},clickCallback:function(e,i,r,o){var s;if(o="undefined"==typeof o?r:o,t.isFunction(i))i.call(this,r);else if("-1"!==i.search(/\./)){if(s=i.split("."),"undefined"==typeof this[s[0]])return;"object"==typeof o?this[s[0]][s[1]].apply(this,o):this[s[0]][s[1]].call(this,o)}else"object"==typeof o?this[i].apply(this,o):this[i].call(this,o);this.observe.buttons(e,r)},all:function(){return this.button.buttons},get:function(t){return this.opts.toolbar!==!1?this.button.toolbar().find("a.re-"+t):void 0},set:function(t,e){if(this.opts.toolbar!==!1){var i=this.button.toolbar().find("a.re-"+t);return i.html(e).attr("aria-label",e),i}},add:function(e,i){if(this.button.isAdded(e)!==!0)return t();var r=this.button.build(e,{title:i});return this.button.toolbar().append(t("<li>").append(r)),r},addFirst:function(e,i){if(this.button.isAdded(e)!==!0)return t();var r=this.button.build(e,{title:i});return this.button.toolbar().prepend(t("<li>").append(r)),r},addAfter:function(e,i,r){if(this.button.isAdded(i)!==!0)return t();var o=this.button.build(i,{title:r}),s=this.button.get(e);return 0!==s.length?s.parent().after(t("<li>").append(o)):this.button.toolbar().append(t("<li>").append(o)),o},addBefore:function(e,i,r){if(this.button.isAdded(i)!==!0)return t();var o=this.button.build(i,{title:r}),s=this.button.get(e);return 0!==s.length?s.parent().before(t("<li>").append(o)):this.button.toolbar().append(t("<li>").append(o)),o},isAdded:function(t){var e=this.opts.buttonsHideOnMobile.indexOf(t);return!(this.opts.toolbar===!1||-1!==e&&this.detect.isMobile())},setIcon:function(t,e){this.opts.buttonsTextLabeled||(t.html(e).addClass("re-button-icon"),this.button.buildButtonTooltip(t,t.attr("alt")))},changeIcon:function(t,e){var i=this.button.get(t);0!==i.length&&i.find("i").removeAttr("class").addClass("re-icon-"+e)},addCallback:function(e,i){if("undefined"!=typeof e&&this.opts.toolbar!==!1){var r="dropdown"===i?"dropdown":"func",o=e.attr("rel");e.on("mousedown",t.proxy(function(t){return e.hasClass("redactor-button-disabled")?!1:void this.button.toggle(t,o,r,i)},this))}},addDropdown:function(e,i){if(this.opts.toolbar!==!1){e.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var r=e.attr("rel");this.button.addCallback(e,"dropdown");var o=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+r+'" style="display: none;">');return e.data("dropdown",o),i&&this.dropdown.build(r,o,i),o}},setActive:function(t){this.button.get(t).addClass("redactor-act")},setInactive:function(t){this.button.get(t).removeClass("redactor-act")},setInactiveAll:function(t){var e=this.button.toolbar().find("a.re-button");"undefined"!=typeof t&&(e=e.not(".re-"+t)),e.removeClass("redactor-act")},disable:function(t){this.button.get(t).addClass("redactor-button-disabled")},enable:function(t){this.button.get(t).removeClass("redactor-button-disabled")},disableAll:function(t){var e=this.button.toolbar().find("a.re-button");"undefined"!=typeof t&&(e=e.not(".re-"+t)),e.addClass("redactor-button-disabled")},enableAll:function(){this.button.toolbar().find("a.re-button").removeClass("redactor-button-disabled")},remove:function(t){this.button.get(t).remove()}}},caret:function(){return{set:function(t,e,i){var r=this.core.editor().scrollTop();this.core.editor().focus(),this.core.editor().scrollTop(r),i="undefined"==typeof i?0:1,t=t[0]||t,e=e[0]||e;var o=this.selection.get(),s=this.selection.range(o);try{s.setStart(t,0),s.setEnd(e,i)}catch(n){}this.selection.update(o,s)},prepare:function(t){return this.detect.isFirefox()&&"undefined"!=typeof this.start&&this.core.editor().focus(),t[0]||t},start:function(e){var i,r;if(e=this.caret.prepare(e)){if("BR"===e.tagName)return this.caret.before(e);var o=t(e).children().first(),s=this.utils.isInlineTag(e.tagName);""===e.innerHTML||s?this.caret.setStartEmptyOrInline(e,s):o&&0!==o.length&&this.utils.isInlineTag(o[0].tagName)&&""===o.text()?this.caret.setStartEmptyOrInline(o[0],!0):(i=window.getSelection(),
+i.removeAllRanges(),r=document.createRange(),r.selectNodeContents(e),r.collapse(!0),i.addRange(r))}},setStartEmptyOrInline:function(e,i){var r=window.getSelection(),o=document.createRange(),s=document.createTextNode("​");o.setStart(e,0),o.insertNode(s),o.setStartAfter(s),o.collapse(!0),r.removeAllRanges(),r.addRange(o),i||this.core.editor().on("keydown.redactor-remove-textnode",function(){t(s).remove(),t(this).off("keydown.redactor-remove-textnode")})},end:function(e){var i,r;if(e=this.caret.prepare(e)){if("BR"!==e.tagName&&""===e.innerHTML)return this.caret.start(e);if("BR"===e.tagName){var o=document.createElement("span");return o.className="redactor-invisible-space",o.innerHTML="&#x200b;",t(e).after(o),i=window.getSelection(),i.removeAllRanges(),r=document.createRange(),r.setStartBefore(o),r.setEndBefore(o),i.addRange(r),void t(o).replaceWith(function(){return t(this).contents()})}if(e.lastChild&&1===e.lastChild.nodeType)return this.caret.after(e.lastChild);var i=window.getSelection();if(i.getRangeAt||i.rangeCount)try{var r=i.getRangeAt(0);r.selectNodeContents(e),r.collapse(!1),i.removeAllRanges(),i.addRange(r)}catch(s){}}},after:function(e){var i,r;if(e=this.caret.prepare(e)){if("BR"===e.tagName)return this.caret.end(e);if(this.utils.isBlockTag(e.tagName)){var o=this.caret.next(e);return void("undefined"==typeof o?this.caret.end(e):("TABLE"===o.tagName?o=t(o).find("th, td").first()[0]:"UL"!==o.tagName&&"OL"!==o.tagName||(o=t(o).find("li").first()[0]),this.caret.start(o)))}var s=document.createTextNode("​");i=window.getSelection(),i.removeAllRanges(),r=document.createRange(),r.setStartAfter(e),r.insertNode(s),r.setStartAfter(s),r.collapse(!0),i.addRange(r)}},before:function(e){var i,r;if(e=this.caret.prepare(e)){if(this.utils.isBlockTag(e.tagName)){var o=this.caret.prev(e);return void("undefined"==typeof o?this.caret.start(e):("TABLE"===o.tagName?o=t(o).find("th, td").last()[0]:"UL"!==o.tagName&&"OL"!==o.tagName||(o=t(o).find("li").last()[0]),this.caret.end(o)))}i=window.getSelection(),i.removeAllRanges(),r=document.createRange(),r.setStartBefore(e),r.collapse(!0),i.addRange(r)}},next:function(e){var i=t(e).next();return i.hasClass("redactor-script-tag, redactor-selection-marker")?i.next()[0]:i[0]},prev:function(e){var i=t(e).prev();return i.hasClass("redactor-script-tag, redactor-selection-marker")?i.prev()[0]:i[0]},offset:function(t){return this.offset.get(t)}}},clean:function(){return{onSet:function(e){e=this.clean.savePreCode(e),e=this.clean.saveFormTags(e),this.opts.script&&(e=e.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" $1>$2</pre>')),e=e.replace(/\$/g,"&#36;"),e=e.replace(/&amp;/g,"&"),e=e.replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),e=e.replace(/<span id="selection-marker-1"(.*?[^>]?)>​<\/span>/gi,"###marker1###"),e=e.replace(/<span id="selection-marker-2"(.*?[^>]?)>​<\/span>/gi,"###marker2###");var i=this,r=t("<div/>").html(t.parseHTML(e,document,!0)),o=this.opts.replaceTags;if(o){var s=Object.keys(this.opts.replaceTags);r.find(s.join(",")).each(function(t,e){i.utils.replaceToTag(e,o[e.tagName.toLowerCase()])})}r.find("span, a").attr("data-redactor-span",!0),r.find(this.opts.inlineTags.join(",")).each(function(){var e=t(this);e.attr("style")&&e.attr("data-redactor-style-cache",e.attr("style"))}),e=r.html();var n=["font","html","head","link","body","meta","applet"];return this.opts.script||n.push("script"),e=this.clean.stripTags(e,n),this.opts.removeComments&&(e=e.replace(/<!--[\s\S]*?-->/gi,"")),e=this.paragraphize.load(e),e=e.replace("###marker1###",'<span id="selection-marker-1" class="redactor-selection-marker">​</span>'),e=e.replace("###marker2###",'<span id="selection-marker-2" class="redactor-selection-marker">​</span>'),-1!==e.search(/^(||\s||<br\s?\/?>||&nbsp;)$/i)?this.opts.emptyHtml:e},onGet:function(t){return this.clean.onSync(t)},onSync:function(e){if(e=e.replace(/\u200B/g,""),e=e.replace(/&#x200b;/gi,""),-1!==e.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";e=e.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<img(.*?)style="(.*?)opacity: 0\.5;(.*?)"(.*?)>/gi,'<img$1style="$2$3"$4>');var i=t("<div/>").html(t.parseHTML(e,document,!0));i.find('*[style=""]').removeAttr("style"),i.find('*[class=""]').removeAttr("class"),i.find('*[rel=""]').removeAttr("rel"),i.find('*[data-image=""]').removeAttr("data-image"),i.find('*[alt=""]').removeAttr("alt"),i.find('*[title=""]').removeAttr("title"),i.find("*[data-redactor-style-cache]").removeAttr("data-redactor-style-cache"),i.find(".redactor-invisible-space, .redactor-unlink").each(function(){t(this).contents().unwrap()}),i.find("span, a").removeAttr("data-redactor-span data-redactor-style-cache").each(function(){0===this.attributes.length&&t(this).contents().unwrap()}),i.find("img").removeAttr("rel"),i.find(".redactor-selection-marker, #redactor-insert-marker").remove(),e=i.html(),this.opts.script&&(e=e.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>")),e=this.clean.restoreFormTags(e),e=e.replace(new RegExp("<br\\s?/?></h","gi"),"</h"),e=e.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),e=e.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),e=e.replace(/<pre>/gi,"<pre>\n"),this.opts.preClass&&(e=e.replace(/<pre>/gi,'<pre class="'+this.opts.preClass+'">')),this.opts.linkNofollow&&(e=e.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),e=e.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">'));var r={"™":"&trade;","©":"&copy;","…":"&hellip;","—":"&mdash;","‐":"&dash;"};return t.each(r,function(t,i){e=e.replace(new RegExp(t,"g"),i)}),e=e.replace(/&amp;/g,"&"),e=e.replace(/\n{2,}/g,"\n"),this.opts.removeNewlines&&(e=e.replace(/\r?\n/g,"")),e},onPaste:function(e,i,r){if(r!==!0){e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: 700|font-weight: 700; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),e=e.replace(/<span[^>]*font-style: italic[^>]*>([\w\W]*?)<\/span>/gi,"<i>$1</i>"),e=e.replace(/<span[^>]*font-weight: bold[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),e=e.replace(/<span[^>]*font-weight: 700[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),e=e.replace(/<o:p[^>]*>/gi,""),e=e.replace(/<\/o:p>/gi,"");var o=this.clean.isHtmlMsWord(e);o&&(e=this.clean.cleanMsWord(e))}return e=t.trim(e),i.pre?this.opts.preSpaces&&(e=e.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))):(e=this.clean.replaceBrToNl(e),e=this.clean.removeTagsInsidePre(e)),r!==!0&&(e=this.clean.removeEmptyInlineTags(e),i.encode===!1&&(e=e.replace(/&/g,"&amp;"),e=this.clean.convertTags(e,i),e=this.clean.getPlainText(e),e=this.clean.reconvertTags(e,i))),i.text&&(e=this.clean.replaceNbspToSpaces(e),e=this.clean.getPlainText(e)),i.lists&&(e=e.replace("\n","<br>")),i.encode&&(e=this.clean.encodeHtml(e)),i.paragraphize&&(e=e.replace(/ \n/g," "),e=e.replace(/\n /g," "),e=this.paragraphize.load(e),e=e.replace(/<p><\/p>/g,"")),e=e.replace(/<li><p>/g,"<li>"),e=e.replace(/<\/p><\/li>/g,"</li>")},getCurrentType:function(t,e){var i=this.selection.blocks(),r={text:!1,encode:!1,paragraphize:!0,line:this.clean.isHtmlLine(t),blocks:this.clean.isHtmlBlocked(t),pre:!1,lists:!1,block:!0,inline:!0,links:!0,images:!0};return 1===i.length&&this.utils.isCurrentOrParent(["h1","h2","h3","h4","h5","h6","a","figcaption"])?(r.text=!0,r.paragraphize=!1,r.inline=!1,r.images=!1,r.links=!1,r.line=!0):"inline"===this.opts.type||this.opts.enterKey===!1?(r.paragraphize=!1,r.block=!1,r.line=!0):1===i.length&&this.utils.isCurrentOrParent(["li"])?(r.lists=!0,r.block=!1,r.paragraphize=!1,r.images=!1):1===i.length&&this.utils.isCurrentOrParent(["th","td","blockquote"])?(r.block=!1,r.paragraphize=!1):("pre"===this.opts.type||1===i.length&&this.utils.isCurrentOrParent("pre"))&&(r.inline=!1,r.block=!1,r.encode=!0,r.pre=!0,r.paragraphize=!1,r.images=!1,r.links=!1),r.line===!0&&(r.paragraphize=!1),e===!0&&(r.text=!1),r},isHtmlBlocked:function(t){var e=t.match(new RegExp("</("+this.opts.blockTags.join("|").toUpperCase()+")>","gi")),i=t.match(new RegExp("<hr(.*?[^>])>","gi"));return null!==e||null!==i},isHtmlLine:function(t){if(this.clean.isHtmlBlocked(t))return!1;var e=t.match(/<br\s?\/?>/gi),i=t.match(/\n/gi);return!e&&!i},isHtmlMsWord:function(t){return t.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},removeEmptyInlineTags:function(e){var i=this.opts.inlineTags,r=t("<div/>").html(t.parseHTML(e,document,!0)),o=this,s=r.find("span"),n=r.find(i.join(","));return n.removeAttr("style"),n.each(function(){var e=t(this).html();0===this.attributes.length&&o.utils.isEmpty(e)&&t(this).replaceWith(function(){return t(this).contents()})}),s.each(function(){t(this).html();0===this.attributes.length&&t(this).replaceWith(function(){return t(this).contents()})}),e=r.html(),e=e.replace("<!--?php","<?php"),e=e.replace("<!--?","<?"),e=e.replace("?-->","?>"),r.remove(),e},cleanMsWord:function(e){e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.replace(/<o:p>[\s\S]*?<\/o:p>/gi,""),e=e.replace(/\n/g," "),e=e.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n\n");var i=t("<div/>").html(e),r=!1,o=1,s=[];return i.find("p[style]").each(function(){var e=t(this).attr("style").match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);if(e){var n=parseInt(e[1]),a=parseInt(e[2]),l=t(this).html().match(/^[\w]+\./)?"ol":"ul",c=t("<li/>").html(t(this).html());if(c.html(c.html().replace(/^([\w\.]+)</,"<")),c.find("span:first").remove(),1==a&&-1==t.inArray(n,s)){var d=t("<"+l+"/>").attr({"data-level":a,"data-list":n}).html(c);t(this).replaceWith(d),r=n,s.push(n)}else{if(a>o){for(var h=i.find('[data-level="'+o+'"][data-list="'+r+'"]'),u=h,p=o;a>p;p++)d=t("<"+l+"/>"),d.appendTo(u.find("li").last()),u=d;u.attr({"data-level":a,"data-list":n}).html(c)}else{var h=i.find('[data-level="'+a+'"][data-list="'+n+'"]').last();h.append(c)}o=a,r=n,t(this).remove()}}}),i.find("[data-level][data-list]").removeAttr("data-level data-list"),e=i.html()},replaceNbspToSpaces:function(t){return t.replace("&nbsp;"," ")},replaceBrToNl:function(t){return t.replace(/<br\s?\/?>/gi,"\n")},replaceNlToBr:function(t){return t.replace(/\n/g,"<br />")},convertTags:function(e,i){var r=t("<div>").html(e);r.find("iframe").remove();var o=r.find("a");if(o.removeAttr("style"),this.opts.pasteLinkTarget!==!1&&o.attr("target",this.opts.pasteLinkTarget),i.links&&this.opts.pasteLinks&&r.find("a").each(function(t,e){if(e.href){for(var i,r='#####[a href="'+e.href+'"',o=0,s=e.attributes.length;s>o;o++)i=e.attributes.item(o),"href"!==i.name&&(r+=" "+i.name+'="'+i.value+'"');e.outerHTML=r+"]#####"+e.innerHTML+"#####[/a]#####"}}),e=r.html(),i.images&&this.opts.pasteImages&&(e=e.replace(/<img(.*?)src="(.*?)"(.*?[^>])>/gi,'#####[img$1src="$2"$3]#####')),this.opts.pastePlainText)return e;var s,n=i.lists?["ul","ol","li"]:this.opts.pasteBlockTags;s=i.block||i.lists?i.inline?n.concat(this.opts.pasteInlineTags):n:i.inline?this.opts.pasteInlineTags:[];for(var a=s.length,l=0;a>l;l++)e=e.replace(new RegExp("</"+s[l]+">","gi"),"###/"+s[l]+"###"),"td"===s[l]||"th"===s[l]?e=e.replace(new RegExp("<"+s[l]+'(.*?[^>])((colspan|rowspan)="(.*?[^>])")?(.*?[^>])>',"gi"),"###"+s[l]+" $2###"):this.utils.isInlineTag(s[l])?(e=e.replace(new RegExp("<"+s[l]+'([^>]*)class="([^>]*)"[^>]*>',"gi"),"###"+s[l]+' class="$2"###'),e=e.replace(new RegExp("<"+s[l]+'([^>]*)data-redactor-style-cache="([^>]*)"[^>]*>',"gi"),"###"+s[l]+' cache="$2"###'),e=e.replace(new RegExp("<"+s[l]+"[^>]*>","gi"),"###"+s[l]+"###")):e=e.replace(new RegExp("<"+s[l]+"[^>]*>","gi"),"###"+s[l]+"###");return e},reconvertTags:function(t,e){if((e.links&&this.opts.pasteLinks||e.images&&this.opts.pasteImages)&&(t=t.replace(new RegExp("#####\\[","gi"),"<"),t=t.replace(new RegExp("\\]#####","gi"),">")),this.opts.pastePlainText)return t;var i,r=e.lists?["ul","ol","li"]:this.opts.pasteBlockTags;i=e.block||e.lists?e.inline?r.concat(this.opts.pasteInlineTags):r:e.inline?this.opts.pasteInlineTags:[];for(var o=i.length,s=0;o>s;s++)t=t.replace(new RegExp("###/"+i[s]+"###","gi"),"</"+i[s]+">");for(var s=0;o>s;s++)t=t.replace(new RegExp("###"+i[s]+"###","gi"),"<"+i[s]+">");for(var s=0;o>s;s++)if("td"===i[s]||"th"===i[s])t=t.replace(new RegExp("###"+i[s]+"s?(.*?[^#])###","gi"),"<"+i[s]+"$1>");else if(this.utils.isInlineTag(i[s])){var n="span"===i[s]?' data-redactor-span="true"':"";t=t.replace(new RegExp("###"+i[s]+' cache="(.*?[^#])"###',"gi"),"<"+i[s]+' style="$1"'+n+' data-redactor-style-cache="$1">'),t=t.replace(new RegExp("###"+i[s]+"s?(.*?[^#])###","gi"),"<"+i[s]+"$1>")}return t},cleanPre:function(e){e="undefined"==typeof e?t(this.selection.block()).closest("pre",this.core.editor()[0]):e,t(e).find("br").replaceWith(function(){return document.createTextNode("\n")}),t(e).find("p").replaceWith(function(){return t(this).contents()})},removeTagsInsidePre:function(e){var i=t("<div />").append(e);return i.find("pre").replaceWith(function(){var e=t(this).html();return e=e.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n"),e=e.replace(/(<([^>]+)>)/gi,""),t("<pre />").append(e)}),e=i.html(),i.remove(),e},getPlainText:function(e){e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[\s\S]*?style>/gi,""),e=e.replace(/<p><\/p>/g,""),e=e.replace(/<\/div>|<\/li>|<\/td>/gi,"\n"),e=e.replace(/<\/p>/gi,"\n\n"),e=e.replace(/<\/H[1-6]>/gi,"\n\n");var i=document.createElement("div");return i.innerHTML=e,e=i.textContent||i.innerText,t.trim(e)},savePreCode:function(t){return t=this.clean.savePreFormatting(t),t=this.clean.saveCodeFormatting(t),t=this.clean.restoreSelectionMarkers(t)},savePreFormatting:function(e){var i=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null===i?e:(t.each(i,t.proxy(function(t,i){var r,o,s,n=[],a=!1;i.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>/i)?(n=i.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>([\w\W]*?)<\/code>(([\n\r\s]+)?)<\/pre>/i),a=!0,r=n[5],o=n[1],s=n[4]):(n=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i),r=n[2],o=n[1]),r=r.replace(/<br\s?\/?>/g,"\n"),r=r.replace(/&nbsp;/g," "),this.opts.preSpaces&&(r=r.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),r=this.clean.encodeEntities(r),r=r.replace(/\$/g,"&#36;"),e=a?e.replace(i,"<pre"+o+"><code"+s+">"+r+"</code></pre>"):e.replace(i,"<pre"+o+">"+r+"</pre>")},this)),e)},saveCodeFormatting:function(e){var i=e.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);return null===i?e:(t.each(i,t.proxy(function(t,i){var r=i.match(/<code(.*?)>([\w\W]*?)<\/code>/i);r[2]=r[2].replace(/&nbsp;/g," "),r[2]=this.clean.encodeEntities(r[2]),r[2]=r[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<code"+r[1]+">"+r[2]+"</code>")},this)),e)},restoreSelectionMarkers:function(t){return t=t.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot;&gt;​&lt;\/span&gt;/g,'<span id="selection-marker-$1" class="redactor-selection-marker">​</span>')},saveFormTags:function(t){return t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(t){return t.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")},encodeHtml:function(t){return t=t.replace(/”/g,'"'),t=t.replace(/“/g,'"'),t=t.replace(/‘/g,"'"),t=t.replace(/’/g,"'"),t=this.clean.encodeEntities(t)},encodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},stripTags:function(t,e){if("undefined"==typeof e)return t.replace(/(<([^>]+)>)/gi,"");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return-1===e.indexOf(i.toLowerCase())?t:""})},removeMarkers:function(t){return t.replace(/<span(.*?[^>]?)class="redactor-selection-marker"(.*?[^>]?)>([\w\W]*?)<\/span>/gi,"")},removeSpaces:function(e){return e=t.trim(e),e=e.replace(/\n/g,""),e=e.replace(/[\t]*/g,""),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/g," "),e=e.replace(/[\s\n]*$/g," "),e=e.replace(/>\s{2,}</g,"> <"),e=e.replace(/\n\n/g,"\n"),e=e.replace(/\u200B/g,"")},removeSpacesHard:function(e){return e=t.trim(e),e=e.replace(/\n/g,""),e=e.replace(/[\t]*/g,""),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/g,""),e=e.replace(/[\s\n]*$/g,""),e=e.replace(/>\s{2,}</g,"><"),e=e.replace(/\n\n/g,"\n"),e=e.replace(/\u200B/g,"")},normalizeCurrentHeading:function(){var t=this.selection.block();this.utils.isCurrentOrParentHeader()&&t&&t.normalize()}}},code:function(){return{syncFire:!0,html:!1,start:function(e){e=t.trim(e),e=e.replace(/^(<span id="selection-marker-1" class="redactor-selection-marker">​<\/span>)/,""),"textarea"===this.opts.type?e=this.clean.onSet(e):"div"===this.opts.type&&""===e&&(e=this.opts.emptyHtml),e=e.replace(/<p><span id="selection-marker-1" class="redactor-selection-marker">​<\/span><\/p>/,""),this.events.stopDetectChanges(),this.core.editor().html(e),this.observe.load(),this.events.startDetectChanges()},set:function(e,i){e=t.trim(e),i=i||{},i.start&&(this.start=i.start),"textarea"===this.opts.type?e=this.clean.onSet(e):"div"===this.opts.type&&""===e&&(e=this.opts.emptyHtml),this.core.editor().html(e),"textarea"===this.opts.type&&this.code.sync(),this.placeholder.enable()},get:function(){if("textarea"===this.opts.type)return this.core.textarea().val();var t=this.core.editor().html();return t=this.clean.onGet(t)},sync:function(){if(this.code.syncFire){var e=this.core.editor().html(),i=this.code.cleaned(e);if(!this.code.isSync(i))return this.code.html=i,"textarea"!==this.opts.type?(this.core.callback("sync",e),void this.core.callback("change",e)):void("textarea"===this.opts.type&&setTimeout(t.proxy(function(){this.code.startSync(e)},this),10))}},startSync:function(t){t=this.core.callback("syncBefore",t),t=this.clean.onSync(t),this.core.textarea().val(t),this.core.callback("sync",t),this.start===!1&&this.core.callback("change",t),this.start=!1},isSync:function(t){var e=this.code.html!==!1?this.code.html:!1;return e!==!1&&e===t},cleaned:function(t){return t=t.replace(/\u200B/g,""),this.clean.removeMarkers(t)}}},core:function(){return{id:function(){return this.$editor.attr("id")},element:function(){return this.$element},editor:function(){return"undefined"==typeof this.$editor?t():this.$editor},textarea:function(){return this.$textarea},box:function(){return"textarea"===this.opts.type?this.$box:this.$element},toolbar:function(){return this.$toolbar?this.$toolbar:!1},air:function(){return this.$air?this.$air:!1},object:function(){return t.extend({},this)},structure:function(){this.core.editor().toggleClass("redactor-structure")},addEvent:function(t){this.core.event=t},getEvent:function(){return this.core.event},callback:function(e,i,r){var o="redactor",s=!1,n=t._data(this.core.element()[0],"events");if("undefined"!=typeof n&&"undefined"!=typeof n[e])for(var a=n[e].length,l=0;a>l;l++){var c=n[e][l].namespace;if(c==="callback."+o){var d=n[e][l].handler,h="undefined"==typeof r?[i]:[i,r];s="undefined"==typeof h?d.call(this,i):d.call(this,i,h)}}if(s)return s;if("undefined"==typeof this.opts.callbacks[e])return"undefined"==typeof r?i:r;var u=this.opts.callbacks[e];return t.isFunction(u)?"undefined"==typeof r?u.call(this,i):u.call(this,i,r):"undefined"==typeof r?i:r},destroy:function(){this.opts.destroyed=!0,this.core.callback("destroy"),this.placeholder.destroy(),this.progress.destroy(),t("#redactor-voice-"+this.uuid).remove(),this.core.editor().removeClass("redactor-in redactor-styles redactor-structure redactor-layer-img-edit"),this.core.editor().off("keydown.redactor-remove-textnode"),this.core.editor().off(".redactor-observe."+this.uuid),this.$element.off(".redactor").removeData("redactor"),this.core.editor().off(".redactor"),t(document).off(".redactor-dropdown"),t(document).off(".redactor-air."+this.uuid),t(document).off("mousedown.redactor-blur."+this.uuid),t(document).off("mousedown.redactor."+this.uuid),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),t(window).off(".redactor-toolbar."+this.uuid),t(window).off("touchmove.redactor."+this.uuid),t("body").off("scroll.redactor."+this.uuid),t(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid);var e=this;this.opts.plugins!==!1&&t.each(this.opts.plugins,function(i,r){t(window).off(".redactor-plugin-"+r),t(document).off(".redactor-plugin-"+r),t("body").off(".redactor-plugin-"+r),e.core.editor().off(".redactor-plugin-"+r)}),this.$element.off("click.redactor-click-to-edit"),this.$element.removeClass("redactor-click-to-edit"),this.core.editor().removeClass("redactor-layer"),this.core.editor().removeAttr("contenteditable");var i=this.code.get();this.opts.toolbar&&this.$toolbar&&this.$toolbar.find("a").each(function(){var e=t(this);e.data("dropdown")&&(e.data("dropdown").remove(),e.data("dropdown",{}))}),"textarea"===this.opts.type&&(this.$box.after(this.$element),this.$box.remove(),this.$element.val(i).show()),this.opts.air&&this.$air.remove(),this.opts.toolbar&&this.$toolbar&&this.$toolbar.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),t(".redactor-link-tooltip").remove(),clearInterval(this.autosaveTimeout)}}},detect:function(){return{isWebkit:function(){return/webkit/.test(this.opts.userAgent)},isFirefox:function(){return this.opts.userAgent.indexOf("firefox")>-1},isIe:function(t){if(document.documentMode||/Edge/.test(navigator.userAgent))return"edge";var e;return e=RegExp("msie"+(isNaN(t)?"":"\\s"+t),"i").test(navigator.userAgent),e||(e=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),e},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}},dropdown:function(){return{active:!1,button:!1,key:!1,position:[],getDropdown:function(){return this.dropdown.active},build:function(e,i,r){r=this.dropdown.buildFormatting(e,r),t.each(r,t.proxy(function(t,r){var o=this.dropdown.buildItem(t,r);this.observe.addDropdown(o,t,r),i.attr("rel",e).append(o)},this))},buildFormatting:function(e,i){return"format"!==e||this.opts.formattingAdd===!1?i:(t.each(this.opts.formattingAdd,t.proxy(function(t,e){var r=this.utils.isBlockTag(e.args[0])?"block":"inline";i[t]={func:"block"===r?"block.format":"inline.format",args:e.args,title:e.title}},this)),i)},buildItem:function(e,i){var r=t("<li />");if("undefined"!=typeof i.classname&&r.addClass(i.classname),-1!==e.search(/^divider/i))return r.addClass("redactor-dropdown-divider"),r;var o=t('<a href="#" class="redactor-dropdown-'+e+'" role="button" />'),s=t("<span />").html(i.title);return o.append(s),o.on("mousedown",t.proxy(function(t){t.preventDefault(),this.dropdown.buildClick(t,e,i)},this)),r.append(o),r},buildClick:function(e,i,r){if(!t(e.target).hasClass("redactor-dropdown-link-inactive")){var o=this.dropdown.buildCommand(r);"undefined"!=typeof r.args?this.button.toggle(e,i,o.type,o.callback,r.args):this.button.toggle(e,i,o.type,o.callback)}},buildCommand:function(t){var e={};return e.type="func",e.callback=t.func,t.command?(e.type="command",e.callback=t.command):t.dropdown&&(e.type="dropdown",e.callback=t.dropdown),e},show:function(e,i){return this.detect.isDesktop()&&this.core.editor().focus(),this.dropdown.hideAll(!1,i),this.dropdown.key=i,this.dropdown.button=this.button.get(this.dropdown.key),this.dropdown.button.hasClass("dropact")?void this.dropdown.hide():(this.dropdown.active=this.dropdown.button.data("dropdown").appendTo(document.body),this.core.callback("dropdownShow",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button}),this.button.setActive(this.dropdown.key),this.dropdown.button.addClass("dropact"),this.dropdown.getButtonPosition(),this.button.toolbar().hasClass("toolbar-fixed-box")&&this.detect.isDesktop()?this.dropdown.showIsFixedToolbar():this.dropdown.showIsUnFixedToolbar(),this.detect.isDesktop()&&!this.detect.isFirefox()&&(this.dropdown.active.on("mouseover.redactor-dropdown",t.proxy(this.utils.disableBodyScroll,this)),this.dropdown.active.on("mouseout.redactor-dropdown mousedown.redactor-dropdown",t.proxy(this.utils.enableBodyScroll,this))),void e.stopPropagation())},showIsFixedToolbar:function(){var e=this.dropdown.button.position().top+this.dropdown.button.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(e=this.dropdown.button.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),this.dropdown.active.css({position:i,left:this.dropdown.position.left+"px",top:e+"px"}).show(),this.dropdown.active.redactorAnimation("slideDown",{duration:.2},t.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},showIsUnFixedToolbar:function(){this.dropdown.active.css({position:"absolute",left:this.dropdown.position.left+"px",top:this.dropdown.button.innerHeight()+this.dropdown.position.top+"px"}).show(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideDown":"show",{duration:.2},t.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},enableEvents:function(){t(document).on("mousedown.redactor-dropdown",t.proxy(this.dropdown.hideAll,this)),this.core.editor().on("touchstart.redactor-dropdown",t.proxy(this.dropdown.hideAll,this)),t(document).on("keyup.redactor-dropdown",t.proxy(this.dropdown.closeHandler,this))},enableCallback:function(){this.core.callback("dropdownShown",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button})},getButtonPosition:function(){this.dropdown.position=this.dropdown.button.offset();var e=this.dropdown.active.width();this.dropdown.position.left+e>t(document).width()&&(this.dropdown.position.left=Math.max(0,this.dropdown.position.left-e+parseInt(this.dropdown.button.innerWidth())))},closeHandler:function(t){t.which===this.keyCode.ESC&&(this.dropdown.hideAll(t),this.core.editor().focus())},hideAll:function(e,i){if(this.detect.isDesktop()&&this.utils.enableBodyScroll(),e===!1||0===t(e.target).closest(".redactor-dropdown").length){var r="undefined"==typeof i?this.button.toolbar().find("a.dropact"):this.button.toolbar().find("a.dropact").not(".re-"+i),o="undefined"==typeof i?t(".redactor-dropdown-"+this.uuid):t(".redactor-dropdown-"+this.uuid).not(".redactor-dropdown-box-"+i);0!==o.length&&(t(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),t.each(o,t.proxy(function(e,i){var r=t(i);this.core.callback("dropdownHide",r),r.hide(),r.off("mouseover mouseout").off(".redactor-dropdown")},this)),r.removeClass("redactor-act dropact"))}},hide:function(){this.dropdown.active!==!1&&(this.detect.isDesktop()&&this.utils.enableBodyScroll(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideUp":"hide",{duration:.2},t.proxy(function(){t(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),this.dropdown.hideOut()},this)))},hideOut:function(){this.core.callback("dropdownHide",this.dropdown.active),this.dropdown.button.removeClass("redactor-act dropact"),this.dropdown.active.off("mouseover mouseout").off(".redactor-dropdown"),this.dropdown.button=!1,this.dropdown.key=!1,this.dropdown.active=!1}}},events:function(){return{focused:!1,blured:!0,dropImage:!1,stopChanges:!1,stopDetectChanges:function(){this.events.stopChanges=!0},startDetectChanges:function(){var t=this;setTimeout(function(){t.events.stopChanges=!1},1)},dragover:function(e){e.preventDefault(),e.stopPropagation(),"IMG"===e.target.tagName&&t(e.target).addClass("redactor-image-dragover")},dragleave:function(t){this.core.editor().find("img").removeClass("redactor-image-dragover")},drop:function(t){return t=t.originalEvent||t,this.core.editor().find("img").removeClass("redactor-image-dragover"),"inline"===this.opts.type||"pre"===this.opts.type?(t.preventDefault(),!1):void 0!==window.FormData&&t.dataTransfer?0===t.dataTransfer.files.length?this.events.onDrop(t):(this.events.onDropUpload(t),void this.core.callback("drop",t)):!0},click:function(t){var e=this.core.getEvent(),i="click"===e||"arrow"===e?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.callback("click",t)},focus:function(t){if(!this.rtePaste&&(this.events.isCallback("focus")&&this.core.callback("focus",t),this.events.focused=!0,this.events.blured=!1,this.selection.current()===!1)){var e=this.selection.get(),i=this.selection.range(e);i.setStart(this.core.editor()[0],0),i.setEnd(this.core.editor()[0],0),this.selection.update(e,i)}},blur:function(e){this.start||this.rtePaste||0===t(e.target).closest("#"+this.core.id()+", .redactor-toolbar, .redactor-dropdown, #redactor-modal-box").length&&(!this.events.blured&&this.events.isCallback("blur")&&this.core.callback("blur",e),this.events.focused=!1,this.events.blured=!0)},touchImageEditing:function(){var e=-1;this.events.imageEditing=!1,t(window).on("touchmove.redactor."+this.uuid,t.proxy(function(){this.events.imageEditing=!0,-1!==e&&clearTimeout(e),e=setTimeout(t.proxy(function(){this.events.imageEditing=!1},this),500)},this))},init:function(){this.core.editor().on("dragover.redactor dragenter.redactor",t.proxy(this.events.dragover,this)),this.core.editor().on("dragleave.redactor",t.proxy(this.events.dragleave,this)),this.core.editor().on("drop.redactor",t.proxy(this.events.drop,this)),this.core.editor().on("click.redactor",t.proxy(this.events.click,this)),this.core.editor().on("paste.redactor",t.proxy(this.paste.init,this)),this.core.editor().on("keydown.redactor",t.proxy(this.keydown.init,this)),this.core.editor().on("keyup.redactor",t.proxy(this.keyup.init,this)),this.core.editor().on("focus.redactor",t.proxy(this.events.focus,this)),t(document).on("mousedown.redactor-blur."+this.uuid,t.proxy(this.events.blur,this)),this.events.touchImageEditing(),this.events.createObserver(),this.events.setupObserver()},createObserver:function(){var e=this;this.events.observer=new MutationObserver(function(i){i.forEach(t.proxy(e.events.iterateObserver,e))})},iterateObserver:function(t){var e=!1;(("textarea"===this.opts.type||"div"===this.opts.type)&&!this.detect.isFirefox()&&t.target===this.core.editor()[0]||"class"===t.attributeName&&t.target===this.core.editor()[0]||"data-vivaldi-spatnav-clickable"==t.attributeName)&&(e=!0),e||(this.observe.load(),this.events.changeHandler())},setupObserver:function(){this.events.observer.observe(this.core.editor()[0],{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})},changeHandler:function(){this.events.stopChanges||(this.code.sync(),this.autosave.is()&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=setTimeout(t.proxy(this.autosave.send,this),300)))},onDropUpload:function(t){if(t.preventDefault(),t.stopPropagation(),(this.opts.dragImageUpload||this.opts.dragFileUpload)&&(null!==this.opts.imageUpload||null!==this.opts.fileUpload)){"IMG"===t.target.tagName&&(this.events.dropImage=t.target);for(var e=t.dataTransfer.files,i=e.length,r=0;i>r;r++)this.upload.directUpload(e[r],t)}},onDrop:function(t){this.core.callback("drop",t)},isCallback:function(e){return"undefined"!=typeof this.opts.callbacks[e]&&t.isFunction(this.opts.callbacks[e])},stopDetect:function(){this.events.stopDetectChanges()},startDetect:function(){this.events.startDetectChanges()}}},file:function(){return{is:function(){return!(!this.opts.fileUpload||!this.opts.fileUpload&&!this.opts.s3)},show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),
+t("#redactor-filename").val(this.selection.get().toString()),this.modal.show()},insert:function(e,i,r){if("undefined"!=typeof e.error)return this.modal.close(),void this.core.callback("fileUploadError",e);this.file.release(r,i),this.buffer.set(),this.air.collapsed();var o=this.file.text(e),s=t("<a />").attr("href",e.url).text(o),n="undefined"==typeof e.id?"":e.id,a="undefined"==typeof e.s3?"file":"s3";s.attr("data-"+a,n),s=t(this.insert.node(s)),this.caret.after(s),this.storage.add({type:a,node:s[0],url:e.url,id:n}),null!==i&&this.core.callback("fileUpload",s,e)},release:function(t,e){e?(this.marker.remove(),this.insert.nodeToPoint(t,this.marker.get()),this.selection.restore()):this.modal.close()},text:function(e){var i=t("#redactor-filename").val();return"undefined"==typeof i||""===i?e.name:i}}},focus:function(){return{start:function(){if(this.core.editor().focus(),"inline"!==this.opts.type){var t=this.focus.first();t!==!1&&this.caret.start(t)}},end:function(){this.core.editor().focus();var t=this.opts.inline?this.core.editor():this.focus.last();if(0!==t.length){var e=this.focus.lastChild(t);if(this.detect.isWebkit()||e===!1){var i=this.selection.get(),r=this.selection.range(i);null!==r?(r.selectNodeContents(t[0]),r.collapse(!1),this.selection.update(i,r)):this.caret.end(t)}else this.caret.end(e)}},first:function(){var t=this.core.editor().children().first();return 0!==t.length||0!==t[0].length&&"BR"!==t[0].tagName&&"HR"!==t[0].tagName&&3!==t[0].nodeType?"UL"===t[0].tagName||"OL"===t[0].tagName?t.find("li").first():t:!1},last:function(){return this.core.editor().children().last()},lastChild:function(t){var e=t[0].lastChild;return null!==e&&this.utils.isInlineTag(e.tagName)?e:!1},is:function(){return this.core.editor()[0]===document.activeElement}}},image:function(){return{is:function(){return!(!this.opts.imageUpload||!this.opts.imageUpload&&!this.opts.s3)},show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.modal.show()},insert:function(e,i,r){var o;if("undefined"!=typeof e.error)return this.modal.close(),this.events.dropImage=!1,void this.core.callback("imageUploadError",e,r);if(this.events.dropImage!==!1)return o=t(this.events.dropImage),this.core.callback("imageDelete",o[0].src,o),o.attr("src",e.url),this.events.dropImage=!1,void this.core.callback("imageUpload",o,e);this.placeholder.hide();var s=t("<"+this.opts.imageTag+">");o=t("<img>"),o.attr("src",e.url);var n="undefined"==typeof e.id?"":e.id,a="undefined"==typeof e.s3?"image":"s3";o.attr("data-"+a,n),s.append(o);var l=this.utils.isTag(this.selection.current(),"pre");if(i){this.air.collapsed(),this.marker.remove();var c=this.insert.nodeToPoint(r,this.marker.get()),d=t(c).next();this.selection.restore(),this.buffer.set(),"undefined"!=typeof d&&0!==d.length&&"IMG"===d[0].tagName?(this.core.callback("imageDelete",d[0].src,d),d.closest("figure, p",this.core.editor()[0]).replaceWith(s),this.caret.after(s)):(l?t(l).after(s):this.insert.node(s),this.caret.after(s))}else this.modal.close(),this.buffer.set(),this.air.collapsed(),l?t(l).after(s):this.insert.node(s),this.caret.after(s);this.events.dropImage=!1,this.storage.add({type:a,node:o[0],url:e.url,id:n});var h=o[0].nextSibling,u=s.next(),p=t(h).text().replace(/\u200B/g,""),f=u.text().replace(/\u200B/g,"");""===p&&t(h).remove(),1===u.length&&"FIGURE"===u[0].tagName&&""===f&&u.remove(),null!==i?this.core.callback("imageUpload",o,e):this.core.callback("imageInserted",o,e)},setEditable:function(e){if(e.on("dragstart",function(t){t.preventDefault()}),this.opts.imageResizable){var i=t.proxy(function(i){this.observe.image=e,this.image.resizer=this.image.loadEditableControls(e),t(document).on("mousedown.redactor-image-resize-hide."+this.uuid,t.proxy(this.image.hideResize,this)),this.image.resizer&&this.image.resizer.on("mousedown.redactor touchstart.redactor",t.proxy(function(t){this.image.setResizable(t,e)},this))},this);e.off("mousedown.redactor").on("mousedown.redactor",t.proxy(this.image.hideResize,this)),e.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",i)}else e.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",t.proxy(function(i){setTimeout(t.proxy(function(){this.image.showEdit(e)},this),200)},this))},setResizable:function(t,e){t.preventDefault(),this.image.resizeHandle={x:t.pageX,y:t.pageY,el:e,ratio:e.width()/e.height(),h:e.height()},t=t.originalEvent||t,t.targetTouches&&(this.image.resizeHandle.x=t.targetTouches[0].pageX,this.image.resizeHandle.y=t.targetTouches[0].pageY),this.image.startResize()},startResize:function(){t(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",t.proxy(this.image.moveResize,this)),t(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",t.proxy(this.image.stopResize,this))},moveResize:function(t){t.preventDefault(),t=t.originalEvent||t;var e=this.image.resizeHandle.h;e+=t.targetTouches?t.targetTouches[0].pageY-this.image.resizeHandle.y:t.pageY-this.image.resizeHandle.y;var i=Math.round(e*this.image.resizeHandle.ratio);50>e||100>i||(this.image.resizeHandle.el.attr({width:i,height:e}),this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(e),this.code.sync())},stopResize:function(){this.handle=!1,t(document).off(".redactor-image-resize"),this.image.hideResize()},hideResize:function(e){if(!e||0===t(e.target).closest("#redactor-image-box",this.$editor[0]).length){if(e&&"IMG"==e.target.tagName){t(e.target)}var i=this.$editor.find("#redactor-image-box");0!==i.length&&(t("#redactor-image-editter").remove(),t("#redactor-image-resizer").remove(),i.find("img").css({marginTop:i[0].style.marginTop,marginBottom:i[0].style.marginBottom,marginLeft:i[0].style.marginLeft,marginRight:i[0].style.marginRight}),i.css("margin",""),i.find("img").css("opacity",""),i.replaceWith(function(){return t(this).contents()}),t(document).off("mousedown.redactor-image-resize-hide."+this.uuid),"undefined"!=typeof this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")))}},loadResizableControls:function(e,i){if(this.opts.imageResizable&&!this.detect.isMobile()){var r=t('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.detect.isDesktop()||r.css({width:"15px",height:"15px"}),r.attr("contenteditable",!1),i.append(r),i.append(e),r}return i.append(e),!1},loadEditableControls:function(e){if(0===t("#redactor-image-box").length){var i=t('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",e.css("float")).attr("contenteditable",!1),"auto"!=e[0].style.margin?(i.css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css("margin","")):i.css({display:"block",margin:"auto"}),e.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=t('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",t.proxy(function(){this.image.showEdit(e)},this)),i.append(this.image.editter);var r=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+r/2+"px")}return this.image.loadResizableControls(e,i)}},showEdit:function(e){if(!this.events.imageEditing){this.observe.image=e;var i=e.closest("a",this.$editor[0]),r=e.closest("figure",this.$editor[0]),o=0!==r.length?r:e;if(this.modal.load("image-edit",this.lang.get("edit"),705),this.image.buttonDelete=this.modal.getDeleteButton().text(this.lang.get("delete")),this.image.buttonSave=this.modal.getActionButton().text(this.lang.get("save")),this.image.buttonDelete.on("click",t.proxy(this.image.remove,this)),this.image.buttonSave.on("click",t.proxy(this.image.update,this)),this.opts.imageCaption===!1)t("#redactor-image-caption").val("").hide().prev().hide();else{var s=e.closest(this.opts.imageTag,this.$editor[0]),n=s.find("figcaption");0!==n&&t("#redactor-image-caption").val(n.text()).show()}if(this.opts.imagePosition){var a=0!==r.length?"center"===o.css("text-align"):"block"==o.css("display")&&"none"==o.css("float"),l=a?"center":o.css("float");t("#redactor-image-align").val(l)}else t(".redactor-image-position-option").hide();t("#redactor-image-preview").html(t('<img src="'+e.attr("src")+'" style="max-width: 100%;">')),t("#redactor-image-title").val(e.attr("alt")),0!==i.length&&(t("#redactor-image-link").val(i.attr("href")),"_blank"===i.attr("target")&&t("#redactor-image-link-blank").prop("checked",!0)),t(".redactor-link-tooltip").remove(),this.modal.show(),this.detect.isDesktop()&&t("#redactor-image-title").focus()}},update:function(){var e=this.observe.image,i=e.closest("a",this.core.editor()[0]),r=t("#redactor-image-title").val().replace(/(<([^>]+)>)/gi,"");e.attr("alt",r).attr("title",r),this.image.setFloating(e);var o=t.trim(t("#redactor-image-link").val()).replace(/(<([^>]+)>)/gi,"");if(""!==o){var s="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",n=new RegExp("^(http|ftp|https)://"+s,"i"),a=new RegExp("^"+s,"i");-1===o.search(n)&&0===o.search(a)&&this.opts.linkProtocol&&(o=this.opts.linkProtocol+"://"+o);var l=!!t("#redactor-image-link-blank").prop("checked");if(0===i.length){var c=t('<a href="'+o+'" id="redactor-img-tmp">'+this.utils.getOuterHtml(e)+"</a>");l&&c.attr("target","_blank"),e=e.replaceWith(c),i=this.core.editor().find("#redactor-img-tmp"),i.removeAttr("id")}else i.attr("href",o),l?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(e));this.image.addCaption(e,i),this.modal.close(),this.buffer.set()},setFloating:function(e){var i=e.closest("figure",this.$editor[0]),r=0!==i.length?i:e,o=t("#redactor-image-align").val(),s="",n="",a="",l="";switch(o){case"left":s="left",a="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":s="right",a="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":0!==i.length?l="center":(n="block",a="auto")}r.css({"float":s,display:n,margin:a,"text-align":l}),r.attr("rel",e.attr("style"))},addCaption:function(e,i){var r=t("#redactor-image-caption").val(),o=0!==i.length?i:e,s=o.next();0!==s.length&&"FIGCAPTION"===s[0].tagName||(s=!1),""!==r?s===!1?(s=t("<figcaption />").text(r),o.after(s)):s.text(r):s!==!1&&s.remove()},remove:function(e,i,r){i="undefined"==typeof i?t(this.observe.image):i,"boolean"!=typeof e&&this.buffer.set(),this.events.stopDetectChanges();var o=i.closest("a",this.core.editor()[0]),s=i.closest(this.opts.imageTag,this.core.editor()[0]),n=i.parent(),a=this.core.callback("imageDelete",e,i[0]);if(a===!1)return e&&e.preventDefault(),!1;0!==t("#redactor-image-box").length&&(n=t("#redactor-image-box").parent());var l,c;0!==s.length?(c=s.prev(),l=s.next(),s.remove()):0!==o.length?(n=o.parent(),o.remove()):i.remove(),t("#redactor-image-box").remove(),e!==!1&&(l&&0!==l.length?this.caret.start(l):c&&0!==c.length&&this.caret.end(c)),"boolean"!=typeof e&&this.modal.close(),this.utils.restoreScroll(),this.observe.image=!1,this.events.startDetectChanges(),this.placeholder.enable(),this.code.sync()}}},indent:function(){return{increase:function(){if(this.list.get()){var e=t(this.selection.current()).closest("li"),i=e.closest("ul, ol",this.core.editor()[0]),r=e.closest("li"),o=r.prev();if(0!==o.length&&"LI"===o[0].tagName)if(this.buffer.set(),this.utils.isCollapsed()){var s=i[0].tagName,n=t("<"+s+" />");this.selection.save();var a=o.find("ol").first();if(1===a.length)a.append(e);else{var s=i[0].tagName,n=t("<"+s+" />");n.append(e),o.append(n)}this.selection.restore()}else document.execCommand("indent"),this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},decrease:function(){if(this.list.get()){var e=t(this.selection.current()).closest("li");e.closest("ul, ol",this.core.editor()[0]);this.buffer.set(),document.execCommand("outdent");var i=t(this.selection.current()).closest("li",this.core.editor()[0]);if(this.utils.isCollapsed()&&this.indent.repositionItem(i),0===i.length){document.execCommand("formatblock",!1,"p"),i=t(this.selection.current());var r=i.next();0!==r.length&&"BR"===r[0].tagName&&r.remove()}this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},repositionItem:function(t){var e=t.next();0===e.length||"UL"===e[0].tagName&&"OL"===e[0].tagName||t.append(e);var i=t.prev();if(0!==i.length&&"LI"!==i[0].tagName){this.selection.save();var r=t.parents("li",this.core.editor()[0]);r.after(t),this.selection.restore()}},normalize:function(){this.core.editor().find("li").each(t.proxy(function(e,i){var r=t(i),o="";0!==this.opts.keepStyleAttr.length&&(o=","+this.opts.keepStyleAttr.join(",")),r.find(this.opts.inlineTags.join(",")).not("img"+o).removeAttr("style");var s=r.parent();if(0!==s.length&&"LI"===s[0].tagName)return void s.after(r);var n=r.next();0===n.length||"UL"!==n[0].tagName&&"OL"!==n[0].tagName||r.append(n)},this))},removeEmpty:function(e){var i=this.core.editor().find("ul, ol"),r=this.core.editor().find("li");r.each(t.proxy(function(t,e){this.indent.removeItemEmpty(e)},this)),i.each(t.proxy(function(t,e){this.indent.removeItemEmpty(e)},this)),r.each(t.proxy(function(t,e){this.indent.removeItemEmpty(e)},this))},removeItemEmpty:function(e){var i=e.innerHTML.replace(/[\t\s\n]/g,"");i=i.replace(/<span><\/span>/g,""),""===i&&t(e).remove()}}},inline:function(){return{format:function(t,e,i,r){if(!this.utils.isCurrentOrParent(["PRE","CODE"])){var o=this.inline.getParams(e,i,r);t=this.inline.arrangeTag(t),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.inline.formatCollapsed(t,o):this.inline.formatUncollapsed(t,o)}},formatCollapsed:function(e,i){var r,o=this.selection.inline();if(o){var s=o.tagName.toLowerCase();if(s===e)if(this.utils.isEmpty(o.innerHTML))this.caret.after(o),t(o).remove();else{var n=this.inline.insertBreakpoint(o,s);this.caret.after(n)}else if(0===t(o).closest(e).length)r=this.inline.insertInline(e),r=this.inline.setParams(r,i);else{var n=this.inline.insertBreakpoint(o,s);this.caret.after(n)}}else r=this.inline.insertInline(e),r=this.inline.setParams(r,i)},formatUncollapsed:function(e,i){this.selection.save();var r=this.inline.getClearedNodes();this.inline.setNodesStriked(r,e,i),this.selection.restore(),document.execCommand("strikethrough"),this.selection.saveInstant();var o=this;this.core.editor().find("strike").each(function(){var r=o.utils.replaceToTag(this,e);o.inline.setParams(r[0],i);var s=r.find(e),n=r.parent(),a=n.parent();return 0!==a.length&&a[0].tagName.toLowerCase()===e&&a.html()==n[0].outerHTML?(r.replaceWith(function(){return t(this).contents()}),void a.replaceWith(function(){return t(this).contents()})):(0!==s.length&&o.inline.cleanInsideOrParent(s,i),n.html()==r[0].outerHTML&&o.inline.cleanInsideOrParent(n,i),void(o.detect.isFirefox()&&o.core.editor().find(e+":empty").remove()))}),this.selection.restoreInstant()},cleanInsideOrParent:function(t,e){if(e)for(var i in e.data)this.inline.removeSpecificAttr(t,i,e.data[i])},getClearedNodes:function(){for(var e=this.selection.nodes(),i=[],r=e.length,o=0,s=0;r>s;s++)if(t(e[s]).hasClass("redactor-selection-marker")){o=s+2;break}for(var s=0;r>s;s++)s>=o&&!this.utils.isBlockTag(e[s].tagName)&&i.push(e[s]);return i},isConvertableAttr:function(e,i,r){var o=t(e).attr(i);if(o)if("style"===i){r=t.trim(r).replace(/;$/,"");for(var s=r.split(";"),n=0,a=0;a<s.length;a++){var l=s[a].split(":"),c=t.trim(l[0]),d=t.trim(l[1]);if(-1!==c.search(/color/)){var h=t(e).css(c);!h||h!==d&&this.utils.rgb2hex(h)!==d||n++}else t(e).css(c)===d&&n++}if(n===s.length)return 1}else if(o===r)return 1;return 0},isConvertable:function(t,e,i,r){if(e===i){if(!r)return!0;var o=0;for(var s in r.data)o+=this.inline.isConvertableAttr(t,s,r.data[s]);if(o===Object.keys(r.data).length)return!0}return!1},setNodesStriked:function(e,i,r){for(var o=0;o<e.length;o++){var s=e[o].tagName?e[o].tagName.toLowerCase():void 0,n=e[o].parentNode,a=n&&n.tagName?n.tagName.toLowerCase():void 0,l=this.inline.isConvertable(n,a,i,r);if(l){var c=t(n).replaceWith(function(){return t("<strike>").append(t(this).contents())});c.attr("data-redactor-inline-converted")}var l=this.inline.isConvertable(e[o],s,i,r);if(l)var c=t(e[o]).replaceWith(function(){return t("<strike>").append(t(this).contents())})}},insertBreakpoint:function(e,i){var r=document.createElement("span");r.id="redactor-inline-breakpoint",r=this.insert.node(r);var o=this.utils.isEndOfElement(e),s=this.utils.getOuterHtml(e),n=o?"":"<"+i+">";s=s.replace(/<span id="redactor-inline-breakpoint"><\/span>/i,"</"+i+">"+n);var a=t(s);return t(e).replaceWith(a),""!==n&&this.utils.cloneAttributes(e,a.last()),a.first()},insertInline:function(t){var e=document.createElement(t);return this.insert.node(e),this.caret.start(e),e},arrangeTag:function(t){var e=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],i=["strong","strong","em","em","u","del","del","sup","sub"];t=t.toLowerCase();for(var r=0;r<e.length;r++)t===e[r]&&(t=i[r]);return t},getStyleParams:function(t){for(var e={},i=t.trim().replace(/;$/,"").split(";"),r=0;r<i.length;r++){var o=i[r].split(":");o&&(e[o[0].trim()]=o[1].trim())}return e},getParams:function(t,e,i){var r=!1,o="toggle";return"object"==typeof t?(r=t,o=void 0!==e?e:o):void 0!==t&&void 0!==e&&(r={},r[t]=e,o=void 0!==i?i:o),r?{func:o,data:r}:!1},setParams:function(e,i){if(i)for(var r in i.data){var o=t(e);"style"===r?(e=this.inline[i.func+"Style"](i.data[r],e),o.attr("data-redactor-style-cache",o.attr("style"))):e="class"===r?this.inline[i.func+"Class"](i.data[r],e):"remove"===i.func?this.inline[i.func+"Attr"](r,e):this.inline[i.func+"Attr"](r,i.data[r],e),"style"===r&&"SPAN"===e.tagName&&o.attr("data-redactor-span",!0)}return e},eachInline:function(t,e){var i,r=void 0===t?this.selection.inlines():[t];if(r)for(var o=0;o<r.length;o++)i=e(r[o])[0];return i},replaceClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).removeAttr("class").addClass(e)})},toggleClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).toggleClass(e)})},addClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).addClass(e)})},removeClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).removeClass(e)})},removeAllClass:function(e){return this.inline.eachInline(e,function(e){return t(e).removeAttr("class")})},replaceAttr:function(e,i,r){return this.inline.eachInline(r,function(i){return t(i).removeAttr(e).attr(e.value)})},toggleAttr:function(e,i,r){return this.inline.eachInline(r,function(i){var r=t(i).attr(e);return r?t(i).removeAttr(e):t(i).attr(e.value)})},addAttr:function(e,i,r){return this.inline.eachInline(r,function(r){return t(r).attr(e,i)})},removeAttr:function(e,i){return this.inline.eachInline(i,function(i){var r=t(i);return r.removeAttr(e),"style"===e&&r.removeAttr("data-redactor-style-cache"),r})},removeAllAttr:function(e){return this.inline.eachInline(e,function(e){for(var i=t(e),r=e.attributes.length,o=0;r>o;o++)i.removeAttr(e.attributes[o].name);return i})},removeSpecificAttr:function(e,i,r){var o=t(e);if("style"===i){var s=r.split(":"),n=s[0].trim();o.css(n,""),this.utils.removeEmptyAttr(e,"style")&&o.removeAttr("data-redactor-style-cache")}else o.removeAttr(i)[0]},hasParentStyle:function(t){var e=t.parent();return 1===e.length&&e[0].tagName===t[0].tagName&&e.html()===t[0].outerHTML?e:!1},addParentStyle:function(e){var i=this.inline.hasParentStyle(e);if(i){var r=this.inline.getStyleParams(e.attr("style"));i.css(r),i.attr("data-redactor-style-cache",i.attr("style")),e.replaceWith(function(){return t(this).contents()})}else e.attr("data-redactor-style-cache",e.attr("style"));return e},replaceStyle:function(e,i){e=this.inline.getStyleParams(e);var r=this;return this.inline.eachInline(i,function(i){var o=t(i);o.removeAttr("style").css(e);var s=o.attr("style");return s&&o.attr("style",s.replace(/"/g,"'")),o=r.inline.addParentStyle(o)})},toggleStyle:function(e,i){e=this.inline.getStyleParams(e);var r=this;return this.inline.eachInline(i,function(i){var o=t(i);for(var s in e){var n=e[s],a=o.css(s);a=r.utils.isRgb(a)?r.utils.rgb2hex(a):a.replace(/"/g,""),n=r.utils.isRgb(n)?r.utils.rgb2hex(n):n.replace(/"/g,""),a===n?o.css(s,""):o.css(s,n)}var l=o.attr("style");return l&&o.attr("style",l.replace(/"/g,"'")),r.utils.removeEmptyAttr(i,"style")?o.removeAttr("data-redactor-style-cache"):o=r.inline.addParentStyle(o),o})},addStyle:function(e,i){e=this.inline.getStyleParams(e);var r=this;return this.inline.eachInline(i,function(i){var o=t(i);o.css(e);var s=o.attr("style");return s&&o.attr("style",s.replace(/"/g,"'")),o=r.inline.addParentStyle(o)})},removeStyle:function(e,i){e=this.inline.getStyleParams(e);var r=this;return this.inline.eachInline(i,function(i){var o=t(i);for(var s in e)o.css(s,"");return r.utils.removeEmptyAttr(i,"style")?o.removeAttr("data-redactor-style-cache"):o.attr("data-redactor-style-cache",o.attr("style")),o})},removeAllStyle:function(e){return this.inline.eachInline(e,function(e){return t(e).removeAttr("style").removeAttr("data-redactor-style-cache")})},removeStyleRule:function(e){var i=this.selection.parent(),r=this.selection.inlines();this.buffer.set(),i&&"SPAN"===i.tagName&&this.inline.removeStyleRuleAttr(t(i),e);for(var o=0;o<r.length;o++){var s=r[o],n=t(s);-1==t.inArray(s.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||this.inline.removeStyleRuleAttr(n,e)}},removeStyleRuleAttr:function(t,e){t.css(e,""),this.utils.removeEmptyAttr(t,"style")?t.removeAttr("data-redactor-style-cache"):t.attr("data-redactor-style-cache",t.attr("style"))},update:function(t,e,i,r){t=this.inline.arrangeTag(t);var o=this.inline.getParams(e,i,r),s=this.selection.inlines(),n=[];if(s)for(var a=0;a<s.length;a++){var l=s[a];"*"!==t&&l.tagName.toLowerCase()!==t||n.push(this.inline.setParams(l,o))}return n},removeFormat:function(){this.selection.save();for(var e=this.inline.getClearedNodes(),i=0;i<e.length;i++)1===e[i].nodeType&&t(e[i]).replaceWith(function(){return t(this).contents()});this.selection.restore()}}},insert:function(){return{set:function(t){this.placeholder.hide(),this.code.set(t),this.focus.end(),this.placeholder.enable()},html:function(e,i){this.placeholder.hide(),this.core.editor().focus();var r=this.selection.block(),o=this.selection.inline();"undefined"==typeof i&&(i=this.clean.getCurrentType(e,!0),e=this.clean.onPaste(e,i,!0)),e=t.parseHTML(e);var s=t(e).last(),n=this.selection.get(),a=this.selection.range(n);if(a.deleteContents(),this.selection.update(n,a),i.lists){var l=t(e);if(0!==l.length&&("UL"===l[0].tagName||"OL"===l[0].tagName))return void this.insert.appendLists(r,l)}if(i.blocks&&r)if(this.utils.isSelectAll())this.core.editor().html(e),this.focus.end();else{var c=this.utils.breakBlockTag();if(c===!1)this.insert.placeHtml(e);else{var d=t(e).children().last();d.append(this.marker.get()),"start"===c.type?c.$block.before(e):c.$block.after(e),this.selection.restore(),this.core.editor().find("p").each(function(){""===t.trim(this.innerHTML)&&t(this).remove()})}}else{if(o){var h=t("<div/>").html(e);h.find(o.tagName.toLowerCase()).each(function(){t(this).contents().unwrap()}),e=h.html(),e=t.parseHTML(e),s=t(e).last()}if(this.utils.isSelectAll()){var u=t(this.opts.emptyHtml);this.core.editor().html("").append(u),u.html(e),this.caret.end(u)}else this.insert.placeHtml(e)}this.utils.disableSelectAll(),i.pre&&this.clean.cleanPre(),this.caret.end(s),this.linkify.format()},text:function(e){e=e.toString(),e=t.trim(e);var i=document.createElement("div");if(i.innerHTML=e,e=i.textContent||i.innerText,"undefined"!=typeof e){this.placeholder.hide(),this.core.editor().focus();var r=this.selection.blocks();if(e=e.replace(/\n/g," "),this.utils.isSelectAll()){var o=t(this.opts.emptyHtml);this.core.editor().html("").append(o),o.html(e),this.caret.end(o)}else{var s=this.selection.get(),n=document.createTextNode(e);if(s.getRangeAt&&s.rangeCount){var a=s.getRangeAt(0);a.deleteContents(),a.insertNode(n),a.setStartAfter(n),a.collapse(!0),this.selection.update(s,a)}r.length>1&&(t(n).wrap("<p>"),this.caret.after(n))}this.utils.disableSelectAll(),this.linkify.format(),this.clean.normalizeCurrentHeading()}},raw:function(t){this.placeholder.hide(),this.core.editor().focus();var e=this.selection.get(),i=this.selection.range(e);i.deleteContents();var r=document.createElement("div");r.innerHTML=t;for(var o,s,n=document.createDocumentFragment();o=r.firstChild;)s=n.appendChild(o);i.insertNode(n),s&&(i=i.cloneRange(),i.setStartAfter(s),i.collapse(!0),e.removeAllRanges(),e.addRange(i))},node:function(e,i){this.placeholder.hide(),"undefined"!=typeof this.start&&this.core.editor().focus(),e=e[0]||e;var r=this.selection.block(),o=this.utils.isBlockTag(e.tagName),s=!0;if(this.utils.isSelectAll())o?this.core.editor().html(e):this.core.editor().html(t("<p>").html(e)),this.code.sync();else if(o&&r){var n=this.utils.breakBlockTag();n===!1?this.insert.placeNode(e,i):("start"===n.type?n.$block.before(e):n.$block.after(e),this.core.editor().find("p:empty").remove())}else s=this.insert.placeNode(e,i);return this.utils.disableSelectAll(),s&&this.caret.end(e),e},appendLists:function(e,i){var r,o=t(e),s=this.utils.isEmpty(e.innerHTML);if(s||this.utils.isEndOfElement(e))r=o,i.find("li").each(function(){r.after(this),r=t(this)}),s&&o.remove();else if(this.utils.isStartOfElement(e))i.find("li").each(function(){o.before(this),r=t(this)});else{var n=this.selection.extractEndOfNode(e);o.after(t("<li>").append(n)),o.append(i),r=i}this.marker.remove(),r&&this.caret.end(r),this.linkify.format()},placeHtml:function(e){var i=document.createElement("span");i.id="redactor-insert-marker",i=this.insert.node(i),t(i).before(e),this.selection.restore(),this.caret.after(i),t(i).remove()},placeNode:function(t,e){var i=this.selection.get(),r=this.selection.range(i);return null==r?!1:(e!==!1&&r.deleteContents(),r.insertNode(t),r.collapse(!1),void this.selection.update(i,r))},nodeToPoint:function(e,i){if(this.placeholder.hide(),i=i[0]||i,this.utils.isEmpty())return i=this.utils.isBlock(i)?i:t("<p />").append(i),this.core.editor().html(i),i;var r,o=e.clientX,s=e.clientY;if(document.caretPositionFromPoint){var n=document.caretPositionFromPoint(o,s),a=document.getSelection();r=a.getRangeAt(0),r.setStart(n.offsetNode,n.offset),r.collapse(!0),r.insertNode(i)}else if(document.caretRangeFromPoint)r=document.caretRangeFromPoint(o,s),r.insertNode(i);else if("undefined"!=typeof document.body.createTextRange){r=document.body.createTextRange(),r.moveToPoint(o,s);var l=r.duplicate();l.moveToPoint(o,s),r.setEndPoint("EndToEnd",l),r.select()}return i},nodeToCaretPositionFromPoint:function(t,e){this.insert.nodeToPoint(t,e)},marker:function(){this.marker.insert()}}},keydown:function(){return{init:function(e){if(!this.rtePaste){var i=e.which,r=i>=37&&40>=i;this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.parent=this.selection.parent(),this.keydown.current=this.selection.current(),this.keydown.block=this.selection.block(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.keydown.figure=this.utils.isTag(this.keydown.current,"figure");var o=this.core.callback("keydown",e);if(o===!1)return e.preventDefault(),!1;if(this.shortcuts.init(e,i),this.keydown.checkEvents(r,i),this.keydown.setupBuffer(e,i),this.utils.isSelectAll()&&(i===this.keyCode.ENTER||i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE))return e.preventDefault(),this.code.set(this.opts.emptyHtml),void this.events.changeHandler();if(this.keydown.addArrowsEvent(r),this.keydown.setupSelectAll(e,i),!this.opts.enterKey&&i===this.keyCode.ENTER){e.preventDefault();var s=this.selection.get(),n=this.selection.range(s);return void(n.collapsed||n.deleteContents())}if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),this.opts.enterKey&&i===this.keyCode.UP&&this.keydown.onArrowUp(),("textarea"===this.opts.type||"div"===this.opts.type)&&this.keydown.current&&3===this.keydown.current.nodeType&&t(this.keydown.parent).hasClass("redactor-in")&&this.keydown.wrapToParagraph(),!this.keyup.lastShiftKey&&i===this.keyCode.SPACE&&(e.ctrlKey||e.shiftKey))return e.preventDefault(),this.keydown.onShiftSpace();if(i===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey))return e.preventDefault(),this.keydown.onShiftEnter(e);if(i===this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey)return this.keydown.onEnter(e);if(i===this.keyCode.TAB||e.metaKey&&221===i||e.metaKey&&219===i)return this.keydown.onTab(e,i);if(this.detect.isFirefox()&&i===this.keyCode.BACKSPACE&&this.keydown.block&&"P"===this.keydown.block.tagName&&this.utils.isStartOfElement(this.keydown.block)){var a=t(this.keydown.block).prev();if(0!==a.length)return e.preventDefault(),a.append(this.marker.get()),a.append(t(this.keydown.block).html()),t(this.keydown.block).remove(),void this.selection.restore()}if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.observe.image&&"undefined"!=typeof this.observe.image&&0!==t("#redactor-image-box").length){e.preventDefault();var a=this.observe.image.closest("figure, p").prev();return this.image.remove(!1),this.observe.image=!1,void(a&&0!==a.length?this.caret.end(a):this.core.editor().focus())}this.keydown.onBackspaceAndDeleteBefore()}if(i===this.keyCode.DELETE){var l=t(this.keydown.block).next();if(this.utils.isEndOfElement(this.keydown.block)&&0!==l.length&&"FIGURE"===l[0].tagName)return l.remove(),!1;var c=this.keydown.block&&"LI"===this.keydown.block.tagName?this.keydown.block:!1;if(c){var d=t(this.keydown.block).parents("ul, ol").last(),h=d.next();if(this.utils.isRedactorParent(d)&&this.utils.isEndOfElement(d)&&0!==h.length&&("UL"===h[0].tagName||"OL"===h[0].tagName))return e.preventDefault(),d.append(h.contents()),h.remove(),!1}if(this.utils.isEndOfElement(this.keydown.block)&&0!==l.length&&"PRE"===l[0].tagName)return t(this.keydown.block).append(l.text()),l.remove(),!1}if(i===this.keyCode.DELETE&&0!==t("#redactor-image-box").length&&this.image.remove(),i===this.keyCode.BACKSPACE){if(this.detect.isFirefox()&&this.line.removeOnBackspace(e),this.list.combineAfterAndBefore(this.keydown.block))return void e.preventDefault();var u=this.selection.block();if(u&&"LI"===u.tagName&&this.utils.isCollapsed()&&this.utils.isStartOfElement())return this.indent.decrease(),void e.preventDefault();this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(e)}i!==this.keyCode.BACKSPACE&&i!==this.keyCode.DELETE||this.keydown.onBackspaceAndDeleteAfter(e)}},onShiftSpace:function(){return this.buffer.set(),this.insert.raw("&nbsp;"),!1},onShiftEnter:function(t){return this.buffer.set(),this.keydown.pre?this.keydown.insertNewLine(t):this.insert.raw("<br>")},onBackspaceAndDeleteBefore:function(){this.utils.saveScroll()},onBackspaceAndDeleteAfter:function(e){setTimeout(t.proxy(function(){this.code.syncFire=!1,this.keydown.removeEmptyLists();var t="";0!==this.opts.keepStyleAttr.length&&(t=","+this.opts.keepStyleAttr.join(","));var i=this.core.editor().find("*[style]");i.not("img, figure, iframe, #redactor-image-box, #redactor-image-editter, [data-redactor-style-cache], [data-redactor-span]"+t).removeAttr("style"),this.keydown.formatEmpty(e),this.code.syncFire=!0},this),1)},onEnter:function(e){var i=this.core.callback("enter",e);if(i===!1)return e.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(e)===!0)return!1;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return this.keydown.insertBreakLine(e);if(this.keydown.figure)setTimeout(t.proxy(function(){this.keydown.replaceToParagraph("FIGURE")},this),1);else if(this.keydown.block){
+if(setTimeout(t.proxy(function(){this.keydown.replaceToParagraph("DIV")},this),1),"LI"===this.keydown.block.tagName){var r=this.selection.current(),o=t(r).closest("li",this.$editor[0]),s=o.parents("ul,ol",this.$editor[0]).last();if(0!==o.length&&this.utils.isEmpty(o.html())&&0===s.next().length&&this.utils.isEmpty(s.find("li").last().html())){s.find("li").last().remove();var n=t(this.opts.emptyHtml);return s.after(n),this.caret.start(n),!1}}}else if(!this.keydown.block)return this.keydown.insertParagraph(e);return this.detect.isFirefox()&&this.utils.isInline(this.keydown.parent)?void this.keydown.insertBreakLine(e):(this.opts.keepInlineOnEnter||setTimeout(t.proxy(function(){var e=this.selection.inline();if(e&&this.utils.isEmpty(e.innerHTML)){var i=this.selection.block();t(e).remove();var r=document.createRange();r.setStart(i,0);var o=document.createTextNode("​");r.insertNode(o),r.setStartAfter(o),r.collapse(!0);var s=window.getSelection();s.removeAllRanges(),s.addRange(r)}},this),1),void setTimeout(t.proxy(function(){var e=this.selection.block(),i=e.childNodes,r=i[i.length-1];r&&3!==r.nodeType&&"BR"===r.tagName&&t(r).remove()},this),1))},checkEvents:function(t,e){t||"click"!==this.core.getEvent()&&"arrow"!==this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(e)&&this.buffer.set())},checkKeyEvents:function(e){var i=this.keyCode,r=[i.BACKSPACE,i.DELETE,i.ENTER,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1===t.inArray(e,r)},addArrowsEvent:function(t){return t?"click"===this.core.getEvent()||"arrow"===this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(t,e){return this.keydown.ctrl&&90===e&&!t.shiftKey&&!t.altKey&&this.sBuffer.length?(t.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===e&&t.shiftKey&&!t.altKey&&0!==this.sRebuffer.length?(t.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||e!==this.keyCode.SPACE&&e!==this.keyCode.BACKSPACE&&e!==this.keyCode.DELETE&&(e!==this.keyCode.ENTER||t.ctrlKey||t.shiftKey)||this.buffer.set())},exitFromBlockquote:function(e){if(this.utils.isEndOfElement(this.keydown.blockquote)){var i=this.clean.removeSpacesHard(t(this.keydown.blockquote).html());if(-1!==i.search(/(<br\s?\/?>){1}$/i)){e.preventDefault();var r=t(this.keydown.blockquote).children().last();r.filter("br").remove(),t(this.keydown.blockquote).children().last().filter("span").remove();var o=t(this.opts.emptyHtml);return t(this.keydown.blockquote).after(o),this.caret.start(o),!0}}},onArrowDown:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertAfterLastElement(t[e]),!1},onArrowUp:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertBeforeFirstElement(t[e]),!1},insertAfterLastElement:function(e){if(this.utils.isEndOfElement(e)){var i=this.core.editor().contents().last(),r="FIGCAPTION"===e.tagName?t(this.keydown.block).parent().next():t(this.keydown.block).next();if(0===r.length){if(0===i.length&&i[0]!==e)return void this.caret.start(i);var o=t(this.opts.emptyHtml);"FIGCAPTION"===e.tagName?t(e).parent().after(o):t(e).after(o),this.caret.start(o)}}},insertBeforeFirstElement:function(e){if(this.utils.isStartOfElement()&&!(this.core.editor().contents().length>1&&this.core.editor().contents().first()[0]!==e)){var i=t(this.opts.emptyHtml);t(e).before(i),this.caret.start(i)}},onTab:function(t,e){if(!this.opts.tabKey)return!0;var i=this.keydown.block&&"LI"===this.keydown.block.tagName;if(this.utils.isEmpty(this.code.get())||!i&&!this.keydown.pre&&this.opts.tabAsSpaces===!1)return!0;t.preventDefault(),this.buffer.set();var r,o=i&&this.utils.isStartOfElement(this.keydown.block);return this.keydown.pre&&!t.shiftKey?(r=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join(" ")):document.createTextNode("	"),this.insert.node(r)):this.opts.tabAsSpaces===!1||o?t.metaKey&&219===e?this.indent.decrease():t.metaKey&&221===e?this.indent.increase():t.shiftKey?this.indent.decrease():this.indent.increase():(r=document.createTextNode(Array(this.opts.tabAsSpaces+1).join(" ")),this.insert.node(r)),!1},setupSelectAll:function(t,e){this.keydown.ctrl&&65===e?this.utils.enableSelectAll():e===this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},insertNewLine:function(t){t.preventDefault();var e=document.createTextNode("\n"),i=this.selection.get(),r=this.selection.range(i);return r.deleteContents(),r.insertNode(e),this.caret.after(e),!1},insertParagraph:function(t){t.preventDefault();var e=document.createElement("p");e.innerHTML="<br>";var i=this.selection.get(),r=this.selection.range(i);return r.deleteContents(),r.insertNode(e),this.caret.start(e),!1},insertBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t)},insertDblBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t,!0)},insertBreakLineProcessing:function(t,e){t.stopPropagation();var i=document.createElement("br");if(this.insert.node(i),e===!0){var r=document.createElement("br");this.insert.node(r),this.caret.after(r)}else this.caret.after(i);return!1},wrapToParagraph:function(){var e=t(this.keydown.current),i=t("<p>").append(e.clone());e.replaceWith(i);var r=t(i).next();"undefined"!=typeof r[0]&&"BR"===r[0].tagName&&r.remove(),this.caret.end(i)},replaceToParagraph:function(e){var i=this.selection.block(),r=t(i).prev(),o=i.innerHTML.replace(/<br\s?\/?>/gi,"");if(i.tagName===e&&this.utils.isEmpty(o)&&!t(i).hasClass("redactor-in")){var s=document.createElement("p");return t(i).replaceWith(s),this.keydown.setCaretToParagraph(s),!1}if("P"===i.tagName)return t(i).removeAttr("class").removeAttr("style"),this.detect.isIe()&&this.utils.isEmpty(o)&&this.utils.isInline(this.keydown.parent)&&t(i).on("input",t.proxy(function(){var e=this.selection.parent();if(this.utils.isInline(e)){var r=t(e).html();t(i).html(r),this.caret.end(i)}t(i).off("keyup")},this)),!1;if(r.hasClass(this.opts.videoContainerClass)){r.removeAttr("class");var s=document.createElement("p");return r.replaceWith(s),this.keydown.setCaretToParagraph(s),!1}},setCaretToParagraph:function(t){var e=document.createRange();e.setStart(t,0);var i=document.createTextNode("​");e.insertNode(i),e.setStartAfter(i),e.collapse(!0);var r=window.getSelection();r.removeAllRanges(),r.addRange(e)},removeInvisibleSpace:function(){var e=t(this.keydown.current);0===e.text().search(/^\u200B$/g)&&e.remove()},removeEmptyListInTable:function(e){var i=t(this.keydown.current),r=t(this.keydown.parent),o=i.closest("td",this.$editor[0]);if(0!==o.length&&i.closest("li",this.$editor[0])&&1===r.children("li").length){if(!this.utils.isEmpty(i.text()))return;e.preventDefault(),i.remove(),r.remove(),this.caret.start(o)}},removeEmptyLists:function(){var e=function(){var e=t.trim(this.innerHTML).replace(/\/t\/n/g,"");""===e&&t(this).remove()};this.core.editor().find("li").each(e),this.core.editor().find("ul, ol").each(e)},formatEmpty:function(e){var i=t.trim(this.core.editor().html());if(this.utils.isEmpty(i))return e.preventDefault(),"inline"===this.opts.type||"pre"===this.opts.type?(this.core.editor().html(this.marker.html()),this.selection.restore()):(this.core.editor().html(this.opts.emptyHtml),this.focus.start()),!1}}},keyup:function(){return{init:function(e){if(!this.rtePaste){var i=e.which;this.keyup.block=this.selection.block(),this.keyup.current=this.selection.current(),this.keyup.parent=this.selection.parent(),this.keyup.lastShiftKey=e.shiftKey;var r=this.core.callback("keyup",e);if(r===!1)return e.preventDefault(),!1;if(i===this.keyCode.ENTER&&this.keyup.block&&"FIGURE"===this.keyup.block.tagName){var o=t(this.keyup.block).prev();if(0!==o.length&&"FIGURE"===o[0].tagName){var s=this.utils.replaceToTag(o,"p");return void this.caret.start(s)}}if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.utils.isSelectAll())return this.focus.start(),void this.toolbar.setUnfixed();if(this.keyup.block&&this.keydown.block&&"FIGURE"===this.keyup.block.tagName&&this.utils.isStartOfElement(this.keydown.block)){e.preventDefault(),this.selection.save(),t(this.keyup.block).find("figcaption").remove(),t(this.keyup.block).find("img").first().remove(),this.utils.replaceToTag(this.keyup.block,"p");var n=this.marker.find();return t("html, body").animate({scrollTop:n.position().top+20},500),void this.selection.restore()}if(this.keyup.block&&"P"===this.keyup.block.tagName){var a=t(this.keyup.block).find("img").length,l=t(this.keyup.block).text().replace(/\u200B/g,"");""===l&&0!==a&&this.utils.replaceToTag(this.keyup.block,"figure")}this.keyup.block&&"FIGURE"===this.keyup.block.tagName&&0===t(this.keyup.block).find("img").length&&(this.selection.save(),this.utils.replaceToTag(this.keyup.block,"p"),this.selection.restore())}this.linkify.isKey(i)&&(this.selection.save(),this.linkify.format(),this.selection.restore())}}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(t){return"undefined"!=typeof this.opts.curLang[t]?this.opts.curLang[t]:""}}},line:function(){return{insert:function(){this.buffer.set(),this.insert.html(this.line.getLineHtml());var t=this.core.editor().find("#redactor-hr-tmp-id");return t.removeAttr("id"),this.core.callback("insertedLine",t),t},getLineHtml:function(){var t='<hr id="redactor-hr-tmp-id" />';return!this.detect.isFirefox()&&this.utils.isEmpty()&&(t+="<p>"+this.opts.emptyHtml+"</p>"),t},removeOnBackspace:function(e){if(this.utils.isCollapsed()){var i=t(this.selection.block());if(0!==i.length&&this.utils.isStartOfElement(i)){var r=i.prev();r&&0!==r.length&&"HR"===r[0].tagName&&(e.preventDefault(),r.remove())}}}}},link:function(){return{get:function(){return t(this.selection.inlines("a"))},is:function(){var e=this.selection.nodes(),i=t(this.selection.current()).closest("a",this.core.editor()[0]);return 0===i.length||e.length>1?!1:i},unlink:function(t){"undefined"!=typeof t&&t.preventDefault&&t.preventDefault(),this.buffer.set();var e=this.selection.inlines("a");if(0!==e.length){var i=this.link.replaceLinksToText(e);this.observe.closeAllTooltip(),this.core.callback("deletedLink",i)}},insert:function(e,i){var r=this.link.is();if(i!==!0&&(e=this.link.buildLinkFromObject(r,e),e===!1))return!1;if(this.buffer.set(),e=this.core.callback("beforeInsertingLink",e),r===!1){r=t("<a />"),r=this.link.update(r,e),r=t(this.insert.node(r));var o=r.parent();this.utils.isRedactorParent(o)===!1&&r.wrap("<p>"),o.hasClass("redactor-unlink")&&o.replaceWith(function(){return t(this).contents()}),this.caret.after(r),this.core.callback("insertedLink",r)}else r=this.link.update(r,e),this.caret.after(r);return r},update:function(t,e){return t.text(e.text),t.attr("href",e.url),this.link.target(t,e.target),t},target:function(t,e){return e?t.attr("target","_blank"):t.removeAttr("target")},show:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.observe.closeAllTooltip();var i=this.link.is();this.link.buildModal(i);var r=this.link.buildLinkFromElement(i);r.url=this.link.removeSelfHostFromUrl(r.url),this.opts.linkNewTab&&!i&&(r.target=!0),this.link.setModalValues(r),this.modal.show(),this.detect.isDesktop()&&t("#redactor-link-url").focus()},setModalValues:function(e){t("#redactor-link-blank").prop("checked",e.target),t("#redactor-link-url").val(e.url),t("#redactor-link-url-text").val(e.text)},buildModal:function(e){this.modal.load("link",this.lang.get(e===!1?"link-insert":"link-edit"),600);var i=this.modal.getActionButton();i.text(this.lang.get(e===!1?"insert":"save")).on("click",t.proxy(this.link.callback,this))},callback:function(){var t=this.link.buildLinkFromModal();return t===!1?!1:(this.modal.close(),void this.link.insert(t,!0))},cleanUrl:function(e){return"undefined"==typeof e?"":t.trim(e.replace(/[^\W\w\D\d+&\'@#\/%?=~_|!:,.;\(\)]/gi,""))},cleanText:function(e){return"undefined"==typeof e?"":t.trim(e.replace(/(<([^>]+)>)/gi,""))},getText:function(t){return""===t.text&&""!==t.url?this.link.truncateUrl(t.url.replace(/<|>/g,"")):t.text},isUrl:function(t){var e="((xn--)?[\\W\\w\\D\\d]+(-[\\W\\w\\D\\d]+)*\\.)+[\\W\\w]{2,}",i=new RegExp("^(http|ftp|https)://"+e,"i"),r=new RegExp("^"+e,"i"),o=new RegExp(".(html|php)$","i"),s=new RegExp("^/","i"),n=new RegExp("^tel:(.*?)","i");return-1===t.search(i)&&-1!==t.search(r)&&-1===t.search(o)&&"/"!==t.substring(0,1)&&(t="http://"+t),-1!==t.search(i)||-1!==t.search(o)||-1!==t.search(s)||-1!==t.search(n)?t:!1},isMailto:function(t){return-1!==t.search("@")&&/(http|ftp|https):\/\//i.test(t)===!1},isEmpty:function(t){return""===t.url||""===t.text&&""===t.url},truncateUrl:function(t){return t.length>this.opts.linkSize?t.substring(0,this.opts.linkSize)+"...":t},parse:function(t){return this.link.isMailto(t.url)?t.url="mailto:"+t.url.replace("mailto:",""):0!==t.url.search("#")&&this.opts.linkValidation&&(t.url=this.link.isUrl(t.url)),this.link.isEmpty(t)||t.url===!1?!1:t},buildLinkFromModal:function(){var e={};return e.url=this.link.cleanUrl(t("#redactor-link-url").val()),e.text=this.link.cleanText(t("#redactor-link-url-text").val()),e.text=this.link.getText(e),e.target=!!t("#redactor-link-blank").prop("checked"),this.link.parse(e)},buildLinkFromObject:function(t,e){return e.url=this.link.cleanUrl(e.url),e.text="undefined"==typeof e.text&&this.selection.is()?this.selection.text():this.link.cleanText(e.text),e.text=this.link.getText(e),e.target=t===!1?e.target:this.link.buildTarget(t),this.link.parse(e)},buildLinkFromElement:function(t){var e={url:"",text:this.selection.is()?this.selection.text():"",target:!1};return t!==!1&&(e.url=t.attr("href"),e.text=t.text(),e.target=this.link.buildTarget(t)),e},buildTarget:function(t){return"undefined"!=typeof t.attr("target")&&"_blank"===t.attr("target")},removeSelfHostFromUrl:function(t){var e=self.location.href.replace("#","").replace(/\/$/i,"");return t.replace(/^\/\#/,"#").replace(e,"").replace("mailto:","")},replaceLinksToText:function(e){var i,r=t.each(e,function(e,r){var o=t(r),s=t('<span class="redactor-unlink" />').append(o.contents());return o.replaceWith(s),0===e&&(i=s),o});return 1===e.length&&this.selection.isCollapsed()&&this.caret.after(i),r}}},linkify:function(){return{isKey:function(t){return t===this.keyCode.ENTER||t===this.keyCode.SPACE},isLink:function(t){return t.nodeValue.match(this.opts.regexps.linkyoutube)||t.nodeValue.match(this.opts.regexps.linkvimeo)||t.nodeValue.match(this.opts.regexps.linkimage)||t.nodeValue.match(this.opts.regexps.url)},isFiltered:function(e,i){return 3===i.nodeType&&""!==t.trim(i.nodeValue)&&!t(i).parent().is("pre")&&this.linkify.isLink(i)},handler:function(e,i){var r=t(i),o=r.text(),s=o;s=s.match(this.opts.regexps.linkyoutube)||s.match(this.opts.regexps.linkvimeo)?this.linkify.convertVideoLinks(s):s.match(this.opts.regexps.linkimage)?this.linkify.convertImages(s):this.linkify.convertLinks(s),r.before(o.replace(o,s)).remove()},format:function(){if(this.opts.linkify&&!this.utils.isCurrentOrParent("pre")){this.core.editor().find(":not(iframe,img,a,pre,code,.redactor-unlink)").addBack().contents().filter(t.proxy(this.linkify.isFiltered,this)).each(t.proxy(this.linkify.handler,this));var e,i=this.core.editor().find(".redactor-linkify-object").each(t.proxy(function(i,r){return e=t(r),e.removeClass("redactor-linkify-object"),""===e.attr("class")&&e.removeAttr("class"),"DIV"===r.tagName?this.linkify.breakBlockTag(e,"video"):"IMG"===r.tagName?this.linkify.breakBlockTag(e,"image"):"A"===r.tagName&&this.core.callback("insertedLink",e),e},this));setTimeout(t.proxy(function(){this.code.sync(),this.core.callback("linkify",i)},this),100)}},breakBlockTag:function(e,i){var r=this.utils.breakBlockTag();if(r!==!1){var o=e;"image"===i&&(o=t("<figure />").append(e)),"start"===r.type?r.$block.before(o):r.$block.after(o),"image"===i&&this.caret.after(o)}},convertVideoLinks:function(t){var e='<div class="'+this.opts.videoContainerClass+' redactor-linkify-object"><iframe class="redactor-linkify-object" width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe></div>';return t.match(this.opts.regexps.linkyoutube)&&(t=t.replace(this.opts.regexps.linkyoutube,e+"//www.youtube.com/embed/$1"+i)),t.match(this.opts.regexps.linkvimeo)&&(t=t.replace(this.opts.regexps.linkvimeo,e+"//player.vimeo.com/video/$2"+i)),t},convertImages:function(t){var e=t.match(this.opts.regexps.linkimage);return e?t.replace(t,'<img src="'+e+'" class="redactor-linkify-object" />'):t},convertLinks:function(e){var i=e.match(this.opts.regexps.url);if(!i)return e;i=t.grep(i,function(e,r){return t.inArray(e,i)===r});for(var r=i.length,o=0;r>o;o++){var s=i[o],n=s,a=null!==s.match(/(https?|ftp):\/\//i)?"":"http://";n.length>this.opts.linkSize&&(n=n.substring(0,this.opts.linkSize)+"..."),-1===n.search("%")&&(n=decodeURIComponent(n));var l="\\b";-1!==t.inArray(s.slice(-1),["/","&","="])&&(l="");var c=new RegExp("("+s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g"),d="";this.opts.pasteLinkTarget!==!1&&(d=' target="'+this.opts.pasteLinkTarget+'"'),e=e.replace(c,'<a href="'+a+t.trim(s)+'"'+d+' class="redactor-linkify-object">'+t.trim(n)+"</a>")}return e}}},list:function(){return{toggle:function(e){if(!this.utils.inBlocks(["table","td","th","tr"])){var i="orderedlist"===e||"ol"===e?"OL":"UL";e="OL"===i?"orderedlist":"unorderedlist";var r=t(this.selection.current()).parentsUntil(".redactor-in","ul, ol").first();if(this.placeholder.hide(),this.buffer.set(),0!==r.length&&r[0].tagName===i&&this.utils.isRedactorParent(r))return this.selection.save(),r.find("ul, ol").each(function(){var e=t(this).closest("li");t(this).find("li").each(function(){t(e).after(this)})}),r.find("ul, ol").remove(),r.find("li").each(function(){return t(this).replaceWith(function(){return t("<p />").append(t(this).contents())})}),r.replaceWith(function(){return t(this).contents()}),void this.selection.restore();this.selection.save(),0!==r.length&&r[0].tagName!==i?r.each(t.proxy(function(t,e){this.utils.replaceToTag(e,i)},this)):document.execCommand("insert"+e),this.selection.restore();var o=this.list.get();if(!o)return void(this.selection.block()||document.execCommand("formatblock",!1,"p"));o.find("span").replaceWith(function(){return t(this).contents()}),o.find(this.opts.inlineTags.join(",")).each(function(){t(this).removeAttr("style")});var s=o.parent();this.utils.isRedactorParent(s)&&"LI"!==s[0].tagName&&this.utils.isBlock(s)&&(this.selection.save(),s.replaceWith(s.contents()),this.selection.restore())}},get:function(){var e=this.selection.current(),i=t(e).closest("ul, ol",this.core.editor()[0]);return 0===i.length?!1:i},combineAfterAndBefore:function(e){var i=t(e).prev(),r=t(e).next(),o=e&&"P"===e.tagName&&("<br>"===e.innerHTML||""===e.innerHTML),s=1===i.closest("ol, ul",this.core.editor()[0]).length&&1===r.closest("ol, ul",this.core.editor()[0]).length;return o&&s?(i.children("li").last().append(this.marker.get()),i.append(r.contents()),this.selection.restore(),!0):!1}}},marker:function(){return{get:function(t){t="undefined"==typeof t?1:t;var e=document.createElement("span");return e.id="selection-marker-"+t,e.className="redactor-selection-marker",e.innerHTML=this.opts.invisibleSpace,e},html:function(t){return this.utils.getOuterHtml(this.marker.get(t))},find:function(t){return t="undefined"==typeof t?1:t,this.core.editor().find("span#selection-marker-"+t)},insert:function(){var t=this.selection.get(),e=this.selection.range(t);this.marker.insertNode(e,this.marker.get(1),!0),e&&e.collapsed===!1&&this.marker.insertNode(e,this.marker.get(2),!1)},remove:function(){this.core.editor().find(".redactor-selection-marker").each(this.marker.iterateRemove)},insertNode:function(e,i,r){var o=this.selection.parent();if(null!==e&&0!==t(o).closest(".redactor-in").length){e=e.cloneRange();try{e.collapse(r),e.insertNode(i)}catch(s){this.focus.start()}}},iterateRemove:function(e,i){var r=t(i),o=r.text().replace(/\u200B/g,"");r.parent()[0];""===o?r.remove():r.replaceWith(function(){return t(this).contents()})}}},modal:function(){return{callbacks:{},templates:function(){this.opts.modal={"image-edit":String()+'<div class="redactor-modal-tab redactor-group" data-title="General"><div id="redactor-image-preview" class="redactor-modal-tab-side"></div><div class="redactor-modal-tab-area"><section><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /></section><section><label>'+this.lang.get("caption")+'</label><input type="text" id="redactor-image-caption" aria-label="'+this.lang.get("caption")+'" /></section><section><label>'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" aria-label="'+this.lang.get("link")+'" /></section><section><label class="redactor-image-position-option">'+this.lang.get("image-position")+'</label><select class="redactor-image-position-option" id="redactor-image-align" aria-label="'+this.lang.get("image-position")+'"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+'</option></select></section><section><label class="checkbox"><input type="checkbox" id="redactor-image-link-blank" aria-label="'+this.lang.get("link-in-new-tab")+'"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">'+this.lang.get("insert")+'</button><button id="redactor-modal-button-cancel">'+this.lang.get("cancel")+'</button><button id="redactor-modal-button-delete" class="redactor-modal-button-offset">'+this.lang.get("delete")+"</button></section></div></div>",image:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><div id="redactor-modal-image-droparea"></div></section></div>',file:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><label>'+this.lang.get("filename")+' <span class="desc">('+this.lang.get("optional")+')</span></label><input type="text" id="redactor-filename" aria-label="'+this.lang.get("filename")+'" /><br><br></section><section><div id="redactor-modal-file-upload"></div></section></div>',link:String()+'<div class="redactor-modal-tab" data-title="General"><section><label>URL</label><input type="url" id="redactor-link-url" aria-label="URL" /></section><section><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" aria-label="'+this.lang.get("text")+'" /></section><section><label class="checkbox"><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">'+this.lang.get("insert")+'</button><button id="redactor-modal-button-cancel">'+this.lang.get("cancel")+"</button></section></div>"},t.extend(this.opts,this.opts.modal)},addCallback:function(t,e){this.modal.callbacks[t]=e},addTemplate:function(t,e){this.opts.modal[t]=e},getTemplate:function(t){return this.opts.modal[t]},getModal:function(){return this.$modalBody},getActionButton:function(){return this.$modalBody.find("#redactor-modal-button-action")},getCancelButton:function(){return this.$modalBody.find("#redactor-modal-button-cancel")},getDeleteButton:function(){return this.$modalBody.find("#redactor-modal-button-delete")},load:function(t,e,i){"undefined"!=typeof this.$modalBox&&this.$modalBox.hasClass("open")||(this.modal.templateName=t,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(e),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[t]&&this.modal.callbacks[t].call(this))},show:function(){this.detect.isDesktop()||document.activeElement.blur(),this.selection.save(),this.modal.buildTabber(),this.detect.isMobile()&&(this.modal.width="96%"),setTimeout(t.proxy(this.modal.buildWidth,this),0),t(window).on("resize.redactor-modal",t.proxy(this.modal.buildWidth,this)),this.$modalOverlay.redactorAnimation("fadeIn",{duration:.25}),this.$modalBox.addClass("open").show(),this.$modal.redactorAnimation("fadeIn",{timing:"cubic-bezier(0.175, 0.885, 0.320, 1.105)"},t.proxy(function(){this.utils.saveScroll(),this.utils.disableBodyScroll(),this.core.callback("modalOpened",this.modal.templateName,this.$modal),t(document).off("focusin.modal");var e=this.$modal.find("input[type=text],input[type=url],input[type=email]");e.on("keydown.redactor-modal",t.proxy(this.modal.setEnter,this))},this))},buildWidth:function(){var e=t(window).height(),i=t(window).width(),r="number"==typeof this.modal.width;!r&&this.modal.width.match(/%$/)?this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}):parseInt(this.modal.width)>i?this.$modal.css({width:"96%","margin-bottom":"2%"}):(r&&(this.modal.width+="px"),this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}));var o=this.$modal.outerHeight(),s=e/2-o/2+"px";this.detect.isMobile()?s="2%":o>e&&(s="16px"),this.$modal.css("margin-top",s)},buildTabber:function(){this.modal.tabs=this.$modal.find(".redactor-modal-tab"),this.modal.tabs.length<2||(this.modal.$tabsBox=t('<div id="redactor-modal-tabber" />'),t.each(this.modal.tabs,t.proxy(function(e,i){var r=t('<a href="#" rel="'+e+'" />').text(t(i).attr("data-title"));r.on("click",t.proxy(this.modal.showTab,this)),0===e&&r.addClass("active"),this.modal.$tabsBox.append(r)},this)),this.$modalBody.prepend(this.modal.$tabsBox))},showTab:function(e){e.preventDefault();var i=t(e.target),r=i.attr("rel");return this.modal.tabs.hide(),this.modal.tabs.eq(r).show(),t("#redactor-modal-tabber").find("a").removeClass("active"),i.addClass("active"),!1},setTitle:function(t){this.$modalHeader.html(t)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName)),this.modal.getCancelButton().on("mousedown",t.proxy(this.modal.close,this))},setDraggable:function(){"undefined"!=typeof t.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(t){13===t.which&&(t.preventDefault(),this.modal.getActionButton().click())},build:function(){this.modal.buildOverlay(),this.$modalBox=t('<div id="redactor-modal-box"/>').hide(),this.$modal=t('<div id="redactor-modal" role="dialog" />'),this.$modalHeader=t('<div id="redactor-modal-header" />'),this.$modalClose=t('<button type="button" id="redactor-modal-close" aria-label="'+this.lang.get("close")+'" />').html("&times;"),this.$modalBody=t('<div id="redactor-modal-body" />'),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalClose),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=t('<div id="redactor-modal-overlay">').hide(),t("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("mousedown.redactor-modal",t.proxy(this.modal.close,this)),t(document).on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.core.editor().on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",t.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("mousedown.redactor-modal"),t(document).off("keyup.redactor-modal"),this.core.editor().off("keyup.redactor-modal"),this.$modalBox.off("click§.redactor-modal"),t(window).off("resize.redactor-modal")},closeHandler:function(t){t.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if("redactor-modal-button-cancel"!==t(e.target).attr("id")&&e.target!==this.$modalClose[0]&&e.target!==this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.selection.restore(),this.modal.disableEvents(),this.utils.enableBodyScroll(),this.utils.restoreScroll(),this.$modalOverlay.redactorAnimation("fadeOut",{duration:.4},t.proxy(function(){this.$modalOverlay.remove()},this)),this.$modal.redactorAnimation("fadeOut",{duration:.3,timing:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},t.proxy(function(){"undefined"!=typeof this.$modalBox&&(this.$modalBox.remove(),this.$modalBox=void 0),this.core.callback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){"undefined"==typeof this.opts.destroyed&&(this.observe.links(),this.observe.images())},isCurrent:function(e,i){return"undefined"==typeof i&&(i=t(this.selection.current())),i.is(e)||i.parents(e).length>0},toolbar:function(){this.observe.buttons(),this.observe.dropdowns()},buttons:function(e,i){var r=this.selection.current(),o=this.selection.parent();return e!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),e===!1&&"html"!==i?void(-1!==t.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i)):void(this.utils.isRedactorParent(r)&&("none"!==this.core.editor().css("display")&&(this.utils.isCurrentOrParentHeader()||this.utils.isCurrentOrParent(["table","pre","blockquote","li"])?this.button.disable("horizontalrule"):this.button.enable("horizontalrule")),t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){var s=t(o).closest(e,this.$editor[0]),n=t(r).closest(e,this.$editor[0]);(0===s.length||this.utils.isRedactorParent(s))&&this.utils.isRedactorParent(n)&&(0===s.length&&0===n.closest(e,this.$editor[0]).length||this.button.setActive(i))},this))))},dropdowns:function(){var e=t("<div />").html(this.selection.html()).find("a").length,i=t(this.selection.current()),r=this.utils.isRedactorParent(i);t.each(this.opts.observe.dropdowns,t.proxy(function(t,o){var s=o.observe,n=s.element,a=o.item,l="undefined"!=typeof s["in"]?s["in"]:!1,c="undefined"!=typeof s.out?s.out:!1;i.closest(n).length>0&&r||"a"===n&&0!==e?this.observe.setDropdownProperties(a,l,c):this.observe.setDropdownProperties(a,c,l)},this))},setDropdownProperties:function(t,e,i){i&&"undefined"!=typeof i.attr&&this.observe.setDropdownAttr(t,i.attr,!0),"undefined"!=typeof e.attr&&this.observe.setDropdownAttr(t,e.attr),"undefined"!=typeof e.title&&t.find("span").text(e.title)},setDropdownAttr:function(e,i,r){t.each(i,function(t,i){"class"===t?r?e.removeClass(i):e.addClass(i):r?e.removeAttr(t):e.attr(t,i)})},addDropdown:function(t,e,i){"undefined"!=typeof i.observe&&(i.item=t,this.opts.observe.dropdowns.push(i))},images:function(){this.opts.imageEditable&&(this.core.editor().addClass("redactor-layer-img-edit"),this.core.editor().find("img").each(t.proxy(function(e,i){var r=t(i);r.closest("a",this.$editor[0]).on("click",function(t){t.preventDefault()}),this.image.setEditable(r)},this)))},links:function(){this.opts.linkTooltip&&this.core.editor().find("a").each(t.proxy(function(e,i){var r=t(i);r.data("cached")!==!0&&(r.data("cached",!0),r.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.showTooltip,this)))},this))},getTooltipPosition:function(t){return t.offset()},showTooltip:function(e){var i=t(e.target);if("IMG"!==i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var r=i,o=this.observe.getTooltipPosition(r),s=t('<span class="redactor-link-tooltip"></span>'),n=r.attr("href");void 0===n&&(n=""),n.length>24&&(n=n.substring(0,24)+"...");var a=t('<a href="'+r.attr("href")+'" target="_blank" />').html(n).addClass("redactor-link-tooltip-action"),l=t('<a href="#" />').html(this.lang.get("edit")).on("click",t.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),c=t('<a href="#" />').html(this.lang.get("unlink")).on("click",t.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");s.append(a).append(" | ").append(l).append(" | ").append(c);var d=parseInt(r.css("line-height"),10),h=Math.ceil((e.pageY-o.top)/d),u=o.top+h*d;s.css({top:u+"px",left:o.left+"px"}),t(".redactor-link-tooltip").remove(),t("body").append(s),this.core.editor().on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this));
+}},closeAllTooltip:function(){t(".redactor-link-tooltip").remove()},closeTooltip:function(e){e=e.originalEvent||e;var i=e.target,r=t(i).closest("a",this.$editor[0]);0!==r.length&&"A"===r[0].tagName&&"A"!==i.tagName||"A"===i.tagName&&this.utils.isRedactorParent(i)||t(i).hasClass("redactor-link-tooltip-action")||(this.observe.closeAllTooltip(),this.core.editor().off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)))}}},offset:function(){return{get:function(e){var i=this.offset.clone(e);if(i===!1)return 0;var r=document.createElement("div");r.appendChild(i.cloneContents()),r.innerHTML=r.innerHTML.replace(/<img(.*?[^>])>$/gi,"i");var o=t.trim(t(r).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,"");return o.length},clone:function(t){var e=this.selection.get(),i=this.selection.range(e);if(null===i&&"undefined"==typeof t)return!1;if(t="undefined"==typeof t?this.$editor:t,t===!1)return!1;t=t[0]||t;var r=i.cloneRange();return r.selectNodeContents(t),r.setEnd(i.endContainer,i.endOffset),r},set:function(t,e){e="undefined"==typeof e?t:e,this.focus.is()||this.focus.start();for(var i,r=this.selection.get(),o=this.selection.range(r),s=0,n=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);null!==(i=n.nextNode());)if(s+=i.nodeValue.length,s>t&&(o.setStart(i,i.nodeValue.length+t-s),t=1/0),s>=e){o.setEnd(i,i.nodeValue.length+e-s);break}o.collapse(!1),this.selection.update(r,o)}}},paragraphize:function(){return{load:function(e){return this.opts.paragraphize===!1||"inline"===this.opts.type||"pre"===this.opts.type?e:""===e||"<p></p>"===e?this.opts.emptyHtml:(e+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),e=e.replace(/<\/pre>/gi,"</pre>\n\n"),e=e.replace(/<p>\s<br><\/p>/gi,"<p></p>"),e=this.paragraphize.getSafes(e),e=e.replace("<br>","\n"),e=this.paragraphize.convert(e),e=this.paragraphize.clear(e),e=this.paragraphize.restoreSafes(e),e=e.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),t.trim(e))},getSafes:function(e){var i=t("<div />").append(e);return i.find("blockquote p").replaceWith(function(){return t(this).append("<br />").contents()}),i.find(this.opts.paragraphizeBlocks.join(", ")).each(t.proxy(function(e,i){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t(i).replaceWith("\n#####replace"+this.paragraphize.z+"#####\n\n")},this)),i.find("span.redactor-selection-marker").each(t.proxy(function(e,i){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t(i).replaceWith("\n#####replace"+this.paragraphize.z+"#####\n\n")},this)),i.html()},restoreSafes:function(e){return t.each(this.paragraphize.safes,function(t,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,e=e.replace("#####replace"+t+"#####",i)}),e},convert:function(e){e=e.replace(/\r\n/g,"xparagraphmarkerz"),e=e.replace(/\n/g,"xparagraphmarkerz"),e=e.replace(/\r/g,"xparagraphmarkerz");var i=/\s+/g;e=e.replace(i," "),e=t.trim(e);var r=/xparagraphmarkerzxparagraphmarkerz/gi;e=e.replace(r,"</p><p>");var o=/xparagraphmarkerz/gi;return e=e.replace(o,"<br>"),e="<p>"+e+"</p>",e=e.replace("<p></p>",""),e=e.replace("\r\n\r\n",""),e=e.replace(/<\/p><p>/g,"</p>\r\n\r\n<p>"),e=e.replace(new RegExp("<br\\s?/?></p>","g"),"</p>"),e=e.replace(new RegExp("<p><br\\s?/?>","g"),"<p>"),e=e.replace(new RegExp("<p><br\\s?/?>","g"),"<p>"),e=e.replace(new RegExp("<br\\s?/?></p>","g"),"</p>"),e=e.replace(/<p>&nbsp;<\/p>/gi,""),e=e.replace(/<p>\s?<br>&nbsp;<\/p>/gi,""),e=e.replace(/<p>\s?<br>/gi,"<p>")},clear:function(t){return t=t.replace(/<p>(.*?)#####replace(.*?)#####\s?<\/p>/gi,"<p>$1</p>#####replace$2#####"),t=t.replace(/(<br\s?\/?>){2,}<\/p>/gi,"</p>"),t=t.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),t=t.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),t=t.replace(new RegExp("<p><p ","gi"),"<p "),t=t.replace(new RegExp("<p><p>","gi"),"<p>"),t=t.replace(new RegExp("</p></p>","gi"),"</p>"),t=t.replace(new RegExp("<p>\\s?</p>","gi"),""),t=t.replace(new RegExp("\n</p>","gi"),"</p>"),t=t.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),t=t.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(e){this.rtePaste=!0;var i=!("pre"!==this.opts.type&&!this.utils.isCurrentOrParent("pre"));return this.detect.isDesktop()&&!this.paste.pre&&this.opts.clipboardImageUpload&&this.opts.imageUpload&&this.paste.detectClipboardUpload(e)?void(this.detect.isIe()&&setTimeout(t.proxy(this.paste.clipboardUpload,this),100)):(this.utils.saveScroll(),this.selection.save(),this.paste.createPasteBox(i),t(window).on("scroll.redactor-freeze",t.proxy(function(){t(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout(t.proxy(function(){var e=this.paste.getPasteBoxCode(i);this.buffer.set(),this.selection.restore(),this.utils.restoreScroll();var r=this.clean.getCurrentType(e);e=this.clean.onPaste(e,r);var o=this.core.callback("paste",e);e="undefined"==typeof o?e:o,this.paste.insert(e,r),this.rtePaste=!1,i&&this.clean.cleanPre(),t(window).off("scroll.redactor-freeze")},this),1))},getPasteBoxCode:function(t){var e=t?this.$pasteBox.val():this.$pasteBox.html();return this.$pasteBox.remove(),e},createPasteBox:function(e){var i={position:"fixed",width:"1px",top:0,left:"-9999px"};this.$pasteBox=e?t("<textarea>").css(i):t("<div>").attr("contenteditable","true").css(i),this.paste.appendPasteBox(),this.$pasteBox.focus()},appendPasteBox:function(){if(this.detect.isIe())this.core.box().append(this.$pasteBox);else{var e=t(".modal-body:visible");e.length>0?e.append(this.$pasteBox):t("body").prepend(this.$pasteBox)}},detectClipboardUpload:function(e){e=e.originalEvent||e;var i=e.clipboardData;if(this.detect.isIe()||this.detect.isFirefox())return!1;var r=i.types;if(-1!==r.indexOf("public.tiff"))return e.preventDefault(),!1;if(i.items&&i.items.length){var o=i.items[0].getAsFile();if(null===o)return!1;var s=new FileReader;return s.readAsDataURL(o),s.onload=t.proxy(this.paste.insertFromClipboard,this),!0}},clipboardUpload:function(){var e=this.$editor.find("img");t.each(e,t.proxy(function(e,i){if(-1!==i.src.search(/^data\:image/i)){var r=window.FormData?new FormData:null;if(window.FormData){this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=t.proxy(function(e){if(this.detect.isIe())t(i).wrap(t("<figure />"));else{var r=t(i).parent();this.utils.replaceToTag(r,"figure")}i.src=e.url,this.core.callback("imageUpload",t(i),e)},this);var o=this.utils.dataURItoBlob(i.src);r.append("clipboard",1),r.append(this.opts.imageUploadParam,o),this.progress.show(),this.upload.send(r,!1),this.code.sync(),this.rtePaste=!1}}},this))},insertFromClipboard:function(t){var e=window.FormData?new FormData:null;if(window.FormData){this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=this.image.insert;var i=this.utils.dataURItoBlob(t.target.result);e.append("clipboard",1),e.append(this.opts.imageUploadParam,i),this.progress.show(),this.upload.send(e,t),this.rtePaste=!1}},insert:function(e,i){i.pre?this.insert.raw(e):i.text?this.insert.text(e):this.insert.html(e,i),this.detect.isFirefox()&&this.opts.imageUpload&&this.opts.clipboardImageUpload&&setTimeout(t.proxy(this.paste.clipboardUpload,this),100)}}},placeholder:function(){return{enable:function(){setTimeout(t.proxy(function(){return this.placeholder.isEditorEmpty()?this.placeholder.show():this.placeholder.hide()},this),5)},show:function(){this.core.editor().addClass("redactor-placeholder")},update:function(t){this.opts.placeholder=t,this.core.editor().attr("placeholder",t)},hide:function(){this.core.editor().removeClass("redactor-placeholder")},is:function(){return this.core.editor().hasClass("redactor-placeholder")},init:function(){this.placeholder.enabled()&&(this.utils.isEditorRelative()||this.utils.setEditorRelative(),this.placeholder.build(),this.placeholder.buildPosition(),this.placeholder.enable(),this.placeholder.enableEvents())},enabled:function(){return this.opts.placeholder?this.core.element().attr("placeholder",this.opts.placeholder):this.placeholder.isAttr()},enableEvents:function(){this.core.editor().on("keydown.redactor-placeholder."+this.uuid,t.proxy(this.placeholder.enable,this))},disableEvents:function(){this.core.editor().off(".redactor-placeholder."+this.uuid)},build:function(){this.core.editor().attr("placeholder",this.core.element().attr("placeholder"))},buildPosition:function(){var e=t("<style />");e.addClass("redactor-placeholder-style-tag"),e.html("#"+this.core.id()+".redactor-placeholder::after "+this.placeholder.getPosition()),t("head").append(e)},getPosition:function(){return"{ top: "+this.core.editor().css("padding-top")+"; left: "+this.core.editor().css("padding-left")+"; }"},isEditorEmpty:function(){var e=t.trim(this.core.editor().html()).replace(/[\t\n]/g,""),i=["","<p>​</p>","<p>​<br></p>",this.opts.emptyHtmlRendered];return-1!==t.inArray(e,i)},isAttr:function(){return"undefined"!=typeof this.core.element().attr("placeholder")&&""!==this.core.element().attr("placeholder")},destroy:function(){this.core.editor().removeAttr("placeholder"),this.placeholder.hide(),this.placeholder.disableEvents(),t(".redactor-placeholder-style-tag").remove()}}},progress:function(){return{$box:null,$bar:null,target:document.body,show:function(){this.progress.is()?this.progress.$box.show():(this.progress.build(),this.progress.$box.redactorAnimation("fadeIn"))},hide:function(){this.progress.is()&&this.progress.$box.redactorAnimation("fadeOut",{duration:.35},t.proxy(this.progress.destroy,this))},update:function(t){this.progress.show(),this.progress.$bar.css("width",t+"%")},is:function(){return null!==this.progress.$box},build:function(){this.progress.$bar=t("<span />"),this.progress.$box=t('<div id="redactor-progress" />'),this.progress.$box.append(this.progress.$bar),t(this.progress.target).append(this.progress.$box)},destroy:function(){this.progress.is()&&this.progress.$box.remove(),this.progress.$box=null,this.progress.$bar=null}}},selection:function(){return{get:function(){return window.getSelection?window.getSelection():document.selection&&"Control"!==document.selection.type?document.selection:null},range:function(t){return"undefined"==typeof t&&(t=this.selection.get()),t.getRangeAt&&t.rangeCount?t.getRangeAt(0):null},is:function(){return!this.selection.isCollapsed()},isRedactor:function(){var e=this.selection.range();if(null!==e){var i=e.startContainer.parentNode;if(t(i).hasClass("redactor-in")||0!==t(i).parents(".redactor-in").length)return!0}return!1},isCollapsed:function(){var t=this.selection.get();return null===t?!1:t.isCollapsed},update:function(t,e){null!==e&&(t.removeAllRanges(),t.addRange(e))},current:function(){var t=this.selection.get();return null===t?!1:t.anchorNode},parent:function(){var t=this.selection.current();return null===t?!1:t.parentNode},block:function(e){for(e=e||this.selection.current();e;){if(this.utils.isBlockTag(e.tagName))return t(e).hasClass("redactor-in")?!1:e;e=e.parentNode}return!1},inline:function(e){for(e=e||this.selection.current();e;){if(this.utils.isInlineTag(e.tagName))return t(e).hasClass("redactor-in")?!1:e;e=e.parentNode}return!1},element:function(e){for(e||(e=this.selection.current());e;){if(1===e.nodeType)return t(e).hasClass("redactor-in")?!1:e;e=e.parentNode}return!1},prev:function(){var t=this.selection.current();return null===t?!1:this.selection.current().previousSibling},next:function(){var t=this.selection.current();return null===t?!1:this.selection.current().nextSibling},blocks:function(e){var i=[],r=this.selection.nodes(e);t.each(r,t.proxy(function(t,e){this.utils.isBlock(e)&&i.push(e)},this));var o=this.selection.block();return 0===i.length&&o===!1?[]:0===i.length&&o!==!1?[o]:i},inlines:function(e){var i=[],r=this.selection.nodes(e);t.each(r,t.proxy(function(t,e){this.utils.isInline(e)&&i.push(e)},this));var o=this.selection.inline();return 0===i.length&&o===!1?[]:0===i.length&&o!==!1?[o]:i},nodes:function(e){var i="undefined"==typeof e?[]:t.isArray(e)?e:[e],r=this.selection.get(),o=this.selection.range(r),s=[],n=[];if(this.utils.isCollapsed())s=[this.selection.current()];else{var a=o.startContainer,l=o.endContainer;if(a===l)return[this.selection.parent()];for(;a&&a!==l;)s.push(a=this.selection.nextNode(a));for(a=o.startContainer;a&&a!==o.commonAncestorContainer;)s.unshift(a),a=a.parentNode}return t.each(s,function(e,r){if(r){var o=1!==r.nodeType?!1:r.tagName.toLowerCase();if(t(r).hasClass("redactor-script-tag")||t(r).hasClass("redactor-selection-marker"))return;if(o&&0!==i.length&&-1===t.inArray(o,i))return;n.push(r)}}),0===n.length?[]:n},nextNode:function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},save:function(){this.marker.insert(),this.savedSel=this.core.editor().html()},restore:function(t){var e=this.marker.find(1),i=this.marker.find(2);this.detect.isFirefox()&&this.core.editor().focus(),0!==e.length&&0!==i.length?this.caret.set(e,i):0!==e.length?this.caret.start(e):this.core.editor().focus(),t!==!1&&(this.marker.remove(),this.savedSel=!1)},saveInstant:function(){var t=this.core.editor()[0],e=t.ownerDocument,i=e.defaultView,r=i.getSelection();if(r.getRangeAt&&r.rangeCount){var o=r.getRangeAt(0),s=o.cloneRange();s.selectNodeContents(t),s.setEnd(o.startContainer,o.startOffset);var n=s.toString().length;return this.saved={start:n,end:n+o.toString().length,node:o.startContainer},this.saved}},restoreInstant:function(t){if("undefined"!=typeof t||this.saved){this.saved="undefined"!=typeof t?t:this.saved;var e=this.core.editor().find(this.saved.node);if(0===e.length||0!==e.text().trim().replace(/\u200B/g,"").length){var i=this.core.editor()[0],r=i.ownerDocument,o=r.defaultView,s=0,n=r.createRange();n.setStart(i,0),n.collapse(!0);for(var a,l=[i],c=!1,d=!1;!d&&(a=l.pop());)if(3==a.nodeType){var h=s+a.length;!c&&this.saved.start>=s&&this.saved.start<=h&&(n.setStart(a,this.saved.start-s),c=!0),c&&this.saved.end>=s&&this.saved.end<=h&&(n.setEnd(a,this.saved.end-s),d=!0),s=h}else for(var u=a.childNodes.length;u--;)l.push(a.childNodes[u]);var p=o.getSelection();p.removeAllRanges(),p.addRange(n)}else try{var n=document.createRange();n.setStart(e[0],0);var p=window.getSelection();p.removeAllRanges(),p.addRange(n)}catch(f){}}},node:function(e){t(e).prepend(this.marker.get(1)),t(e).append(this.marker.get(2)),this.selection.restore()},all:function(){this.core.editor().focus();var t=this.selection.get(),e=this.selection.range(t);e.selectNodeContents(this.core.editor()[0]),this.selection.update(t,e)},remove:function(){this.selection.get().removeAllRanges()},replace:function(t){this.insert.html(t)},text:function(){return this.selection.get().toString()},html:function(){var t="",e=this.selection.get();if(e.rangeCount){for(var i=document.createElement("div"),r=e.rangeCount,o=0;r>o;++o)i.appendChild(e.getRangeAt(o).cloneContents());t=this.clean.onGet(i.innerHTML)}return t},extractEndOfNode:function(t){var e=this.selection.get(),i=this.selection.range(e),r=i.cloneRange();return r.selectNodeContents(t),r.setStart(i.endContainer,i.endOffset),r.extractContents()},removeMarkers:function(){this.marker.remove()},marker:function(t){return this.marker.get(t)},markerHtml:function(t){return this.marker.html(t)}}},shortcuts:function(){return{hotkeysSpecialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hotkeysShiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},init:function(e,i){return this.opts.shortcuts===!1?(!e.ctrlKey&&!e.metaKey||66!==i&&73!==i||e.preventDefault(),!1):void t.each(this.opts.shortcuts,t.proxy(function(t,i){this.shortcuts.build(e,t,i)},this))},build:function(e,i,r){for(var o=t.proxy(function(){this.shortcuts.buildHandler(r)},this),s=i.split(","),n=s.length,a=0;n>a;a++)"string"==typeof s[a]&&this.shortcuts.handler(e,t.trim(s[a]),o)},buildHandler:function(t){var e;"-1"!==t.func.search(/\./)?(e=t.func.split("."),"undefined"!=typeof this[e[0]]&&this[e[0]][e[1]].apply(this,t.params)):this[t.func].apply(this,t.params)},handler:function(e,i,r){i=i.toLowerCase().split(" ");var o=this.shortcuts.hotkeysSpecialKeys[e.keyCode],s=String.fromCharCode(e.which).toLowerCase(),n="",a={};t.each(["alt","ctrl","meta","shift"],function(t,i){e[i+"Key"]&&o!==i&&(n+=i+"+")}),o&&(a[n+o]=!0),s&&(a[n+s]=!0,a[n+this.shortcuts.hotkeysShiftNums[s]]=!0,"shift+"===n&&(a[this.shortcuts.hotkeysShiftNums[s]]=!0));for(var l=i.length,c=0;l>c;c++)if(a[i[c]])return e.preventDefault(),r.apply(this,arguments)}}},storage:function(){return{data:[],add:function(t){t.status=!0,t.url=decodeURI(t.url),this.storage.data[t.url]=t},status:function(t,e){this.storage.data[decodeURI(t)].status=e},observe:function(){var e=this,i=this.core.editor().find("[data-image]");i.each(function(i,r){e.storage.add({type:"image",node:r,url:r.src,id:t(r).attr("data-image")})});var r=this.core.editor().find("[data-file]");r.each(function(i,r){e.storage.add({type:"file",node:r,url:r.href,id:t(r).attr("data-file")})});var o=this.core.editor().find("[data-s3]");o.each(function(i,r){var o="IMG"===r.tagName?r.src:r.href;e.storage.add({type:"s3",node:r,url:o,id:t(r).attr("data-s3")})})},changes:function(){for(var t in this.storage.data){var e=this.storage.data[t],i="IMG"===e.node.tagName?"src":"href",r=this.core.editor().find("[data-"+e.type+"]["+i+'="'+e.url+'"]');0===r.length?this.storage.status(e.url,!1):this.storage.status(e.url,!0)}return this.storage.data}}},toolbar:function(){return{build:function(){this.button.hideButtons(),this.button.hideButtonsOnMobile(),this.$toolbarBox=t("<div />").addClass("redactor-toolbar-box"),this.$toolbar=this.toolbar.createContainer(),this.$toolbarBox.append(this.$toolbar),this.toolbar.append(),this.button.$toolbar=this.$toolbar,this.button.setFormatting(),this.button.load(this.$toolbar),this.toolbar.setOverflow(),this.toolbar.setFixed()},createContainer:function(){return t("<ul>").addClass("redactor-toolbar").attr({id:"redactor-toolbar-"+this.uuid,role:"toolbar"})},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),t(this.opts.toolbarExternal).html(this.$toolbarBox)):"textarea"===this.opts.type?this.$box.prepend(this.$toolbarBox):this.$element.before(this.$toolbarBox)},setOverflow:function(){this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},setFixed:function(){if(this.opts.toolbarFixed&&!this.opts.toolbarExternal){if(this.opts.toolbarFixedTarget!==document){var e=t(this.opts.toolbarFixedTarget);this.toolbar.toolbarOffsetTop=0===e.length?0:this.core.box().offset().top-e.offset().top}var i=0!==this.core.box().closest(".modal-body").length?1e3:0;setTimeout(t.proxy(function(){var e=this;this.toolbar.observeScroll(!1),this.detect.isDesktop()?t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){e.core.editor().height()<100||e.placeholder.isEditorEmpty()||e.toolbar.observeScroll()}):t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){e.core.editor().height()<100||e.placeholder.isEditorEmpty()||(e.core.toolbar().hide(),clearTimeout(t.data(this,"scrollCheck")),t.data(this,"scrollCheck",setTimeout(function(){e.core.toolbar().show(),e.toolbar.observeScroll()},250)))})},this),i)}},setUnfixed:function(){this.toolbar.observeScrollDisable()},getBoxTop:function(){return this.opts.toolbarFixedTarget===document?this.core.box().offset().top:this.toolbar.toolbarOffsetTop},observeScroll:function(e){var i=0;e!==!1&&(i=this.opts.toolbarFixedTarget===document?20:0);var r=t(this.opts.toolbarFixedTarget).scrollTop(),o=this.toolbar.getBoxTop();r!==o&&(r+this.opts.toolbarFixedTopOffset+i>o?this.toolbar.observeScrollEnable(r,o):this.toolbar.observeScrollDisable())},observeScrollResize:function(){this.$toolbar.css({width:this.core.box().innerWidth(),left:this.core.box().offset().left})},observeScrollEnable:function(e,i){if("undefined"!=typeof this.fullscreen&&this.fullscreen.isOpened===!1)return void this.toolbar.observeScrollDisable();var r=i+this.core.box().outerHeight()-32,o=this.core.box().innerWidth(),s=this.detect.isDesktop()?"fixed":"absolute",n=this.detect.isDesktop()?this.opts.toolbarFixedTopOffset:t(this.opts.toolbarFixedTarget).scrollTop()-i+this.opts.toolbarFixedTopOffset,a=this.detect.isDesktop()?this.core.box().offset().left:0;this.opts.toolbarFixedTarget!==document&&(s="absolute",n=this.opts.toolbarFixedTopOffset+t(this.opts.toolbarFixedTarget).scrollTop()-i,a=0),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:s,width:o,top:n,left:a}),e>r&&t(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",r>e?"visible":"hidden"),t(window).on("resize.redactor-toolbar."+this.uuid,t.proxy(this.toolbar.observeScrollResize,this))},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box"),t(window).off("resize.redactor-toolbar."+this.uuid)},setDropdownsFixed:function(){var t=this.opts.toolbarFixedTarget===document&&this.detect.isDesktop()?"fixed":"absolute";this.toolbar.setDropdownPosition(t)},unsetDropdownsFixed:function(){this.toolbar.setDropdownPosition("absolute")},setDropdownPosition:function(e){var i=this;t(".redactor-dropdown-"+this.uuid).each(function(){var r=t(this),o=i.button.get(r.attr("rel")),s="fixed"===e?i.opts.toolbarFixedTopOffset:o.offset().top;r.css({position:e,top:o.innerHeight()+s+"px"})})}}},upload:function(){return{init:function(e,i,r){this.upload.direct=!1,this.upload.callback=r,this.upload.url=i,this.upload.$el=t(e),this.upload.$droparea=t('<div id="redactor-droparea" />'),this.upload.$placeholdler=t('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload-label")),this.upload.$input=t('<input type="file" name="file" multiple />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",t.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",t.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",t.proxy(function(t){t=t.originalEvent||t;for(var e=this.upload.$input[0].files.length,i=0;e>i;i++){var r=e-1-i;this.upload.traverseFile(this.upload.$input[0].files[r],t)}},this)),this.upload.$droparea.on("drop.redactor.upload",t.proxy(function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(t)},this))},directUpload:function(t,e){this.upload.direct=!0,this.upload.traverseFile(t,e)},onDrop:function(t){t=t.originalEvent||t;var e=t.dataTransfer.files;if(this.opts.multipleImageUpload)for(var i=e.length,r=0;i>r;r++)this.upload.traverseFile(e[r],t);else this.upload.traverseFile(e[0],t)},traverseFile:function(t,e){if(this.opts.s3)return this.upload.setConfig(t),void this.uploads3.send(t,e);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(t);var r="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(r,t)}this.progress.show();var o=this.core.callback("uploadStart",e,i);o!==!1&&this.upload.send(i,e)},setConfig:function(t){this.upload.getType(t),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(t){this.upload.type=-1===this.opts.imageTypes.indexOf(t.type)?"file":"image",null===this.opts.imageUpload&&null!==this.opts.fileUpload&&(this.upload.type="file")},getHiddenFields:function(e,i){return e===!1||"object"!=typeof e?i:(t.each(e,t.proxy(function(e,r){null!==r&&0===r.toString().indexOf("#")&&(r=t(r).val()),i.append(e,r)},this)),i)},send:function(e,i){"image"===this.upload.type?(e=this.utils.appendFields(this.opts.imageUploadFields,e),e=this.utils.appendForms(this.opts.imageUploadForms,e),e=this.upload.getHiddenFields(this.upload.imageFields,e)):(e=this.utils.appendFields(this.opts.fileUploadFields,e),e=this.utils.appendForms(this.opts.fileUploadForms,e),e=this.upload.getHiddenFields(this.upload.fileFields,e));var r=new XMLHttpRequest;r.open("POST",this.upload.url),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onreadystatechange=t.proxy(function(){if(4===r.readyState){var t=r.responseText;t=t.replace(/^\[/,""),t=t.replace(/\]$/,"");var e;try{e="string"==typeof t?JSON.parse(t):t}catch(o){e={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(e,this.upload.direct,i)}},this);var o=this.core.callback("uploadBeforeSend",r);o!==!1&&r.send(e)},onDrag:function(t){t.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(t,e){this.upload.imageFields[t]=e},removeImageFields:function(t){delete this.upload.imageFields[t]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(t,e){this.upload.fileFields[t]=e},removeFileFields:function(t){delete this.upload.fileFields[t]}}},uploads3:function(){return{send:function(e,i){this.uploads3.executeOnSignedUrl(e,t.proxy(function(t){this.uploads3.sendToS3(e,t,i)},this))},executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,r=-1===this.opts.s3.search(/\?/)?"?":"&";i.open("GET",this.opts.s3+r+"name="+t.name+"&type="+t.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var o=this;i.onreadystatechange=function(t){4===this.readyState&&200===this.status&&(o.progress.show(),e(decodeURIComponent(this.responseText)))},i.send()},createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(t,e)):i=null,i},sendToS3:function(e,i,r){var o=this.uploads3.createCORSRequest("PUT",i);o&&(o.onload=t.proxy(function(){var t;if(this.progress.hide(),200!==o.status)return t={error:!0},void this.upload.callback(t,this.upload.direct,o);var e=i.split("?");if(!e[0])return!1;if(this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),t={url:e[0],id:e[0],s3:!0},"file"===this.upload.type){var s=e[0].split("/");t.name=s[s.length-1]}this.upload.callback(t,this.upload.direct,r)},this),o.onerror=function(){},o.upload.onprogress=function(t){},o.setRequestHeader("Content-Type",e.type),o.setRequestHeader("x-amz-acl","public-read"),o.send(e))}}},utils:function(){return{isEmpty:function(e){return e="undefined"==typeof e?this.core.editor().html():e,e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&nbsp;/gi,""),e=e.replace(/<\/?br\s?\/?>/g,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),e=e.replace(/<iframe(.*?[^>])>$/i,"iframe"),e=e.replace(/<source(.*?[^>])>$/i,"source"),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=t.trim(e),""===e},isElement:function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},strpos:function(t,e,i){var r=t.indexOf(e,i);return r>=0?r:!1},dataURItoBlob:function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var i=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([r],{type:i})},getOuterHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},cloneAttributes:function(e,i){e=e[0]||e,i=t(i);for(var r=e.attributes,o=r.length;o--;){var s=r[o];i.attr(s.name,s.value)}return i},breakBlockTag:function(){var e=this.selection.block();if(!e)return!1;var i=this.utils.isEmpty(e.innerHTML),r=e.tagName.toLowerCase();if("pre"===r||"li"===r||"td"===r||"th"===r)return!1;if(!i&&this.utils.isStartOfElement(e))return{$block:t(e),$next:t(e).next(),type:"start"};if(!i&&this.utils.isEndOfElement(e))return{$block:t(e),$next:t(e).next(),type:"end"};var o=this.selection.extractEndOfNode(e),s=t("<"+r+" />").append(o);return s=this.utils.cloneAttributes(e,s),t(e).after(s),{$block:t(e),$next:s,type:"break"}},inBlocks:function(e){e=t.isArray(e)?e:[e];for(var i=this.selection.blocks(),r=i.length,o=!1,s=0;r>s;s++)if(i[s]!==!1){var n=i[s].tagName.toLowerCase();-1!==t.inArray(n,e)&&(o=!0)}return o},inInlines:function(e){e=t.isArray(e)?e:[e];for(var i=this.selection.inlines(),r=i.length,o=!1,s=0;r>s;s++){var n=i[s].tagName.toLowerCase();-1!==t.inArray(n,e)&&(o=!0)}return o},isTag:function(e,i){var r=t(e).closest(i,this.core.editor()[0]);return 1===r.length?r[0]:!1},isBlock:function(t){return null===t?!1:(t=t[0]||t,t&&this.utils.isBlockTag(t.tagName))},isBlockTag:function(t){return"undefined"==typeof t?!1:this.reIsBlock.test(t)},isInline:function(t){return t=t[0]||t,t&&this.utils.isInlineTag(t.tagName)},isInlineTag:function(t){return"undefined"==typeof t?!1:this.reIsInline.test(t)},isRedactorParent:function(e){return e?0===t(e).parents(".redactor-in").length||t(e).hasClass("redactor-in")?!1:e:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(e){var i=this.selection.parent(),r=this.selection.current();if(t.isArray(e)){var o=0;return t.each(e,t.proxy(function(t,e){this.utils.isCurrentOrParentOne(r,i,e)&&o++},this)),0!==o}return this.utils.isCurrentOrParentOne(r,i,e)},isCurrentOrParentOne:function(t,e,i){return i=i.toUpperCase(),e&&e.tagName===i?e:t&&t.tagName===i?t:!1},isEditorRelative:function(){var e=this.core.editor().css("position"),i=["absolute","fixed","relative"];return-1!==t.inArray(i,e)},setEditorRelative:function(){this.core.editor().addClass("redactor-relative")},getScrollTarget:function(){var e=t(this.opts.scrollTarget);return 0!==e.length?e:t(document)},freezeScroll:function(){this.freezeScrollTop=this.utils.getScrollTarget().scrollTop(),this.utils.getScrollTarget().scrollTop(this.freezeScrollTop)},unfreezeScroll:function(){"undefined"!=typeof this.freezeScrollTop&&this.utils.getScrollTarget().scrollTop(this.freezeScrollTop)},saveScroll:function(){this.tmpScrollTop=this.utils.getScrollTarget().scrollTop()},restoreScroll:function(){"undefined"!=typeof this.tmpScrollTop&&this.utils.getScrollTarget().scrollTop(this.tmpScrollTop)},isStartOfElement:function(t){return"undefined"!=typeof t||(t=this.selection.block())?0===this.offset.get(t):!1},isEndOfElement:function(e){if("undefined"==typeof e&&(e=this.selection.block(),!e))return!1;var i=t.trim(t(e).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,""),r=this.offset.get(e);return r===i.length},removeEmptyAttr:function(e,i){
+var r=t(e);return"undefined"==typeof r.attr(i)?!0:""===r.attr(i)?(r.removeAttr(i),!0):!1},replaceToTag:function(e,i){var r;return t(e).replaceWith(function(){r=t("<"+i+" />").append(t(this).contents());for(var e=0;e<this.attributes.length;e++)r.attr(this.attributes[e].name,this.attributes[e].value);return r}),r},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},disableBodyScroll:function(){var e=t("html"),i=window.innerWidth;if(!i){var r=document.documentElement.getBoundingClientRect();i=r.right-Math.abs(r.left)}var o=document.body.clientWidth<i,s=this.utils.measureScrollbar();e.css("overflow","hidden"),o&&e.css("padding-right",s)},measureScrollbar:function(){var e=t("body"),i=document.createElement("div");i.className="redactor-scrollbar-measure",e.append(i);var r=i.offsetWidth-i.clientWidth;return e[0].removeChild(i),r},enableBodyScroll:function(){t("html").css({overflow:"","padding-right":""}),t("body").remove("redactor-scrollbar-measure")},appendFields:function(e,i){if(!e)return i;if("object"==typeof e)return t.each(e,function(e,r){null!==r&&0===r.toString().indexOf("#")&&(r=t(r).val()),i.append(e,r)}),i;var r=t(e);if(0===r.length)return i;return r.each(function(){i.append(t(this).attr("name"),t(this).val())}),i},appendForms:function(e,i){if(!e)return i;var r=t(e);if(0===r.length)return i;var o=r.serializeArray();return t.each(o,function(t,e){i.append(e.name,e.value)}),i},isRgb:function(t){return 0===t.search(/^rgb/i)},rgb2hex:function(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},isCollapsed:function(){return this.selection.isCollapsed()},isMobile:function(){return this.detect.isMobile()},isDesktop:function(){return this.detect.isDesktop()},isPad:function(){return this.detect.isIpad()}}},browser:function(){return{webkit:function(){return this.detect.isWebkit()},ff:function(){return this.detect.isFirefox()},ie:function(){return this.detect.isIe()}}}},t(window).on("load.tools.redactor",function(){t('[data-tools="redactor"]').redactor()}),e.prototype.init.prototype=e.prototype}(jQuery),function(t){function e(e,i,r,o){var s={duration:.5,iterate:1,delay:0,prefix:"redactor-",timing:"linear"};this.animation=i,this.slide="slideDown"===this.animation||"slideUp"===this.animation,this.$element=t(e),this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.queue=[],"function"==typeof r?(o=r,this.opts=s):this.opts=t.extend(s,r),this.slide&&this.$element.height(this.$element.height()),this.init(o)}t.fn.redactorAnimation=function(t,i,r){return this.each(function(){new e(this,t,i,r)})},e.prototype={init:function(t){this.queue.push(this.animation),this.clean(),"show"===this.animation?(this.opts.timing="linear",this.$element.removeClass("hide").show(),"function"==typeof t&&t(this)):"hide"===this.animation?(this.opts.timing="linear",this.$element.hide(),"function"==typeof t&&t(this)):this.animate(t)},animate:function(e){this.$element.addClass("redactor-animated").css("display","").removeClass("hide"),this.$element.addClass(this.opts.prefix+this.queue[0]),this.set(this.opts.duration+"s",this.opts.delay+"s",this.opts.iterate,this.opts.timing);var i=this.queue.length>1?null:e;this.complete("AnimationEnd",t.proxy(function(){this.$element.hasClass(this.opts.prefix+this.queue[0])&&(this.clean(),this.queue.shift(),this.queue.length&&this.animate(e))},this),i)},set:function(t,e,i,r){for(var o=this.prefixes.length;o--;)this.$element.css(this.prefixes[o]+"animation-duration",t),this.$element.css(this.prefixes[o]+"animation-delay",e),this.$element.css(this.prefixes[o]+"animation-iteration-count",i),this.$element.css(this.prefixes[o]+"animation-timing-function",r)},clean:function(){this.$element.removeClass("redactor-animated"),this.$element.removeClass(this.opts.prefix+this.queue[0]),this.set("","","","")},complete:function(e,i,r){this.$element.one(e.toLowerCase()+" webkit"+e+" o"+e+" MS"+e,t.proxy(function(){"function"==typeof i&&i(),"function"==typeof r&&r(this);var e=["fadeOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"];-1!==t.inArray(this.animation,e)&&this.$element.css("display","none"),this.slide&&this.$element.css("height","")},this))}}}(jQuery);
\ No newline at end of file
Files elefant-elefant_2_0_1_stable/apps/admin/js/top-bar.js and elefant-elefant_2_0_2_stable/apps/admin/js/top-bar.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/closedhand.cur and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/closedhand.cur are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/collapsed.png and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/collapsed.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/cursorGrab.png and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/cursorGrab.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/cursorGrabbing.png and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/cursorGrabbing.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/expanded.png and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/expanded.png are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/openhand.cur and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/openhand.cur are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/js/tree-drag-drop/tree-drag-drop.js and elefant-elefant_2_0_2_stable/apps/admin/js/tree-drag-drop/tree-drag-drop.js are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/API.php and elefant-elefant_2_0_2_stable/apps/admin/lib/API.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/Diff.php and elefant-elefant_2_0_2_stable/apps/admin/lib/Diff.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/ExtendedAPI.php and elefant-elefant_2_0_2_stable/apps/admin/lib/ExtendedAPI.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/admin/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/Layout.php and elefant-elefant_2_0_2_stable/apps/admin/lib/Layout.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/Lock.php and elefant-elefant_2_0_2_stable/apps/admin/lib/Lock.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/Notifier.php and elefant-elefant_2_0_2_stable/apps/admin/lib/Notifier.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/lib/Toolbar.php and elefant-elefant_2_0_2_stable/apps/admin/lib/Toolbar.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/models/ExtendedFields.php and elefant-elefant_2_0_2_stable/apps/admin/models/ExtendedFields.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/models/Versions.php and elefant-elefant_2_0_2_stable/apps/admin/models/Versions.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/models/Webpage.php and elefant-elefant_2_0_2_stable/apps/admin/models/Webpage.php are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/add/head.html and elefant-elefant_2_0_2_stable/apps/admin/views/add/head.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/add.html and elefant-elefant_2_0_2_stable/apps/admin/views/add.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/base.html and elefant-elefant_2_0_2_stable/apps/admin/views/base.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/compare.html and elefant-elefant_2_0_2_stable/apps/admin/views/compare.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/default-validation.html and elefant-elefant_2_0_2_stable/apps/admin/views/default-validation.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/edit/head.html and elefant-elefant_2_0_2_stable/apps/admin/views/edit/head.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/edit.html and elefant-elefant_2_0_2_stable/apps/admin/views/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/editable.html and elefant-elefant_2_0_2_stable/apps/admin/views/editable.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/extended.html and elefant-elefant_2_0_2_stable/apps/admin/views/extended.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/head/links.html and elefant-elefant_2_0_2_stable/apps/admin/views/head/links.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/index.html and elefant-elefant_2_0_2_stable/apps/admin/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/locked.html and elefant-elefant_2_0_2_stable/apps/admin/views/locked.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/pages.html and elefant-elefant_2_0_2_stable/apps/admin/views/pages.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/settings.html and elefant-elefant_2_0_2_stable/apps/admin/views/settings.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/toolbar.html and elefant-elefant_2_0_2_stable/apps/admin/views/toolbar.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/util/analytics.html and elefant-elefant_2_0_2_stable/apps/admin/views/util/analytics.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/util/codemirror.html and elefant-elefant_2_0_2_stable/apps/admin/views/util/codemirror.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/util/editbuttons.html and elefant-elefant_2_0_2_stable/apps/admin/views/util/editbuttons.html are identical
Files elefant-elefant_2_0_1_stable/apps/admin/views/util/extended.html and elefant-elefant_2_0_2_stable/apps/admin/views/util/extended.html are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/admin/views/util/wysiwyg.html elefant-elefant_2_0_2_stable/apps/admin/views/util/wysiwyg.html
--- elefant-elefant_2_0_1_stable/apps/admin/views/util/wysiwyg.html	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/admin/views/util/wysiwyg.html	2017-10-16 12:12:51.000000000 -0500
@@ -13,7 +13,7 @@
 					replaceDivs: false,
 					linkTooltip: false,
 					buttonSource: true,
-					plugins: ['links', 'imagebrowser', 'filebrowser', 'table', 'undo', 'dynamic'],
+					plugins: ['alignment', 'properties', 'links', 'imagebrowser', 'filebrowser', 'table', 'undo', 'dynamic', 'source'],
 					buttons: buttons,
 					focusCallback: function (evt) {
 						autosave_focused = true;
@@ -33,8 +33,8 @@
 	$('#{{ field_id }}').wysiwyg ();
 	{% end %}
 
-	if (RedactorPlugins && RedactorPlugins.links) {
-		RedactorPlugins.links.editor_id = '#{{ field_id }}';
+	if ($.Redactor.prototype.links) {
+		$.Redactor.prototype.links.editor_id = '#{{ field_id }}';
 	}
 });
 </script>
Files elefant-elefant_2_0_1_stable/apps/admin/views/versions.html and elefant-elefant_2_0_2_stable/apps/admin/views/versions.html are identical
Files elefant-elefant_2_0_1_stable/apps/api/conf/cli.php and elefant-elefant_2_0_2_stable/apps/api/conf/cli.php are identical
Files elefant-elefant_2_0_1_stable/apps/api/conf/config.php and elefant-elefant_2_0_2_stable/apps/api/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/api/handlers/create-token.php and elefant-elefant_2_0_2_stable/apps/api/handlers/create-token.php are identical
Files elefant-elefant_2_0_1_stable/apps/api/handlers/get-token.php and elefant-elefant_2_0_2_stable/apps/api/handlers/get-token.php are identical
Files elefant-elefant_2_0_1_stable/apps/api/handlers/index.php and elefant-elefant_2_0_2_stable/apps/api/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/api/handlers/v1.php and elefant-elefant_2_0_2_stable/apps/api/handlers/v1.php are identical
Files elefant-elefant_2_0_1_stable/apps/api/models/Api.php and elefant-elefant_2_0_2_stable/apps/api/models/Api.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/conf/acl.php and elefant-elefant_2_0_2_stable/apps/blocks/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/conf/config.php and elefant-elefant_2_0_2_stable/apps/blocks/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/forms/add.php and elefant-elefant_2_0_2_stable/apps/blocks/forms/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/forms/edit.php and elefant-elefant_2_0_2_stable/apps/blocks/forms/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/add.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/admin.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/admin.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/bgsave.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/bgsave.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/delete.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/edit.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/group.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/group.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/handlers/index.php and elefant-elefant_2_0_2_stable/apps/blocks/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/models/Block.php and elefant-elefant_2_0_2_stable/apps/blocks/models/Block.php are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/views/add/head.html and elefant-elefant_2_0_2_stable/apps/blocks/views/add/head.html are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/views/add.html and elefant-elefant_2_0_2_stable/apps/blocks/views/add.html are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/views/admin.html and elefant-elefant_2_0_2_stable/apps/blocks/views/admin.html are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/views/edit/head.html and elefant-elefant_2_0_2_stable/apps/blocks/views/edit/head.html are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/views/edit.html and elefant-elefant_2_0_2_stable/apps/blocks/views/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/blocks/views/editable.html and elefant-elefant_2_0_2_stable/apps/blocks/views/editable.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/acl.php and elefant-elefant_2_0_2_stable/apps/blog/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/cli.php and elefant-elefant_2_0_2_stable/apps/blog/conf/cli.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/config.php and elefant-elefant_2_0_2_stable/apps/blog/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/embed.php and elefant-elefant_2_0_2_stable/apps/blog/conf/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/helpers.php and elefant-elefant_2_0_2_stable/apps/blog/conf/helpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/upgrade_1.1.3_mysql.sql and elefant-elefant_2_0_2_stable/apps/blog/conf/upgrade_1.1.3_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/upgrade_1.1.3_pgsql.sql and elefant-elefant_2_0_2_stable/apps/blog/conf/upgrade_1.1.3_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/upgrade_1.1.3_sqlite.sql and elefant-elefant_2_0_2_stable/apps/blog/conf/upgrade_1.1.3_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/upgrade_1.1.4_mysql.sql and elefant-elefant_2_0_2_stable/apps/blog/conf/upgrade_1.1.4_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/upgrade_1.1.4_pgsql.sql and elefant-elefant_2_0_2_stable/apps/blog/conf/upgrade_1.1.4_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/blog/conf/upgrade_1.1.4_sqlite.sql and elefant-elefant_2_0_2_stable/apps/blog/conf/upgrade_1.1.4_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/blog/css/default.jpg and elefant-elefant_2_0_2_stable/apps/blog/css/default.jpg are identical
Files elefant-elefant_2_0_1_stable/apps/blog/css/jquery.tagit.css and elefant-elefant_2_0_2_stable/apps/blog/css/jquery.tagit.css are identical
Files elefant-elefant_2_0_1_stable/apps/blog/css/related.css and elefant-elefant_2_0_2_stable/apps/blog/css/related.css are identical
Files elefant-elefant_2_0_1_stable/apps/blog/forms/edit.php and elefant-elefant_2_0_2_stable/apps/blog/forms/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/forms/settings.php and elefant-elefant_2_0_2_stable/apps/blog/forms/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/add.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/admin.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/admin.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/archive.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/archive.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/archives.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/archives.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/bgsave.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/bgsave.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/by.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/by.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/bymonth.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/bymonth.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/commentcount.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/commentcount.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/delete.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/disqus/commentcount.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/disqus/commentcount.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/disqus/comments.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/disqus/comments.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/edit.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/headlines.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/headlines.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/import/blogger.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/import/blogger.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/import/csv.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/import/csv.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/import/csv2.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/import/csv2.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/import/wordpress.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/import/wordpress.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/import.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/import.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/index.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/post.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/post.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/postsfeed.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/postsfeed.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/preview.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/preview.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/publish-queue.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/publish-queue.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/related.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/related.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/rss.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/rss.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/rssviewer.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/rssviewer.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/settings.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/tag.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/tag.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/taglist.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/taglist.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/tags.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/tags.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/thumbnail-sidebar.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/thumbnail-sidebar.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/handlers/upgrade.php and elefant-elefant_2_0_2_stable/apps/blog/handlers/upgrade.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/js/autocomplete.js and elefant-elefant_2_0_2_stable/apps/blog/js/autocomplete.js are identical
Files elefant-elefant_2_0_1_stable/apps/blog/js/jquery.timepicker.js and elefant-elefant_2_0_2_stable/apps/blog/js/jquery.timepicker.js are identical
Files elefant-elefant_2_0_1_stable/apps/blog/js/tag-it.js and elefant-elefant_2_0_2_stable/apps/blog/js/tag-it.js are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/Bitly.php and elefant-elefant_2_0_2_stable/apps/blog/lib/Bitly.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/CsvParser.php and elefant-elefant_2_0_2_stable/apps/blog/lib/CsvParser.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/Filters.php and elefant-elefant_2_0_2_stable/apps/blog/lib/Filters.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/blog/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/Pingomatic.php and elefant-elefant_2_0_2_stable/apps/blog/lib/Pingomatic.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/Twitter.php and elefant-elefant_2_0_2_stable/apps/blog/lib/Twitter.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/markdown.php and elefant-elefant_2_0_2_stable/apps/blog/lib/markdown.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/autoloader.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/autoloader.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/.DS_Store and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/.DS_Store are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Author.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Author.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/Base.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/Base.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/DB.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/DB.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/File.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/File.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/Memcache.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/Memcache.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/MySQL.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Cache/MySQL.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Cache.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Cache.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Caption.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Caption.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Category.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Category.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Content/Type/Sniffer.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Content/Type/Sniffer.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Copyright.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Copyright.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Core.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Core.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Credit.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Credit.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Decode/HTML/Entities.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Decode/HTML/Entities.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Enclosure.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Enclosure.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Exception.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Exception.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/File.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/File.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/HTTP/Parser.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/HTTP/Parser.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/IRI.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/IRI.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Item.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Item.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Locator.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Locator.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Misc.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Misc.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Net/IPv6.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Net/IPv6.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Parse/Date.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Parse/Date.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Parser.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Parser.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Rating.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Rating.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Registry.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Registry.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Restriction.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Restriction.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Sanitize.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Sanitize.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/Source.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/Source.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/XML/Declaration/Parser.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/XML/Declaration/Parser.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie/gzdecode.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie/gzdecode.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/lib/simplepie/library/SimplePie.php and elefant-elefant_2_0_2_stable/apps/blog/lib/simplepie/library/SimplePie.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/models/Post.php and elefant-elefant_2_0_2_stable/apps/blog/models/Post.php are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/admin.html and elefant-elefant_2_0_2_stable/apps/blog/views/admin.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/archive.html and elefant-elefant_2_0_2_stable/apps/blog/views/archive.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/archives.html and elefant-elefant_2_0_2_stable/apps/blog/views/archives.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/by.html and elefant-elefant_2_0_2_stable/apps/blog/views/by.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/bymonth.html and elefant-elefant_2_0_2_stable/apps/blog/views/bymonth.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/disqus/commentcount.html and elefant-elefant_2_0_2_stable/apps/blog/views/disqus/commentcount.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/disqus/comments.html and elefant-elefant_2_0_2_stable/apps/blog/views/disqus/comments.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/edit/head.html and elefant-elefant_2_0_2_stable/apps/blog/views/edit/head.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/edit.html and elefant-elefant_2_0_2_stable/apps/blog/views/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/headlines.html and elefant-elefant_2_0_2_stable/apps/blog/views/headlines.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/import/blogger.html and elefant-elefant_2_0_2_stable/apps/blog/views/import/blogger.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/import/csv.html and elefant-elefant_2_0_2_stable/apps/blog/views/import/csv.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/import/csv2.html and elefant-elefant_2_0_2_stable/apps/blog/views/import/csv2.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/import/wordpress.html and elefant-elefant_2_0_2_stable/apps/blog/views/import/wordpress.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/import/wordpress_done.html and elefant-elefant_2_0_2_stable/apps/blog/views/import/wordpress_done.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/import.html and elefant-elefant_2_0_2_stable/apps/blog/views/import.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/index.html and elefant-elefant_2_0_2_stable/apps/blog/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/post.html and elefant-elefant_2_0_2_stable/apps/blog/views/post.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/related.html and elefant-elefant_2_0_2_stable/apps/blog/views/related.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/rss.html and elefant-elefant_2_0_2_stable/apps/blog/views/rss.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/rssviewer.html and elefant-elefant_2_0_2_stable/apps/blog/views/rssviewer.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/settings.html and elefant-elefant_2_0_2_stable/apps/blog/views/settings.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/tag.html and elefant-elefant_2_0_2_stable/apps/blog/views/tag.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/tags.html and elefant-elefant_2_0_2_stable/apps/blog/views/tags.html are identical
Files elefant-elefant_2_0_1_stable/apps/blog/views/thumbnail-sidebar.html and elefant-elefant_2_0_2_stable/apps/blog/views/thumbnail-sidebar.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/appconf.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/appconf.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/backup.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/backup.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/build-app.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/build-app.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/bundle-translations.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/bundle-translations.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/clear-cache.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/clear-cache.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/conf.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/conf.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/crud-app.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/crud-app.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/encrypt-password.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/encrypt-password.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/export-db.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/export-db.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/generate-key.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/generate-key.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/generate-password.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/generate-password.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/helper-docs.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/helper-docs.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/import-db.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/import-db.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/index.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/install.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/install.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/list-helpers.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/list-helpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/permissions.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/permissions.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/update.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/update.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/handlers/version.php and elefant-elefant_2_0_2_stable/apps/cli/handlers/version.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/lib/CRUDHelpers.php and elefant-elefant_2_0_2_stable/apps/cli/lib/CRUDHelpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/lib/Cli.php and elefant-elefant_2_0_2_stable/apps/cli/lib/Cli.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/lib/Filter.php and elefant-elefant_2_0_2_stable/apps/cli/lib/Filter.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/cli/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/lib/Updater.php and elefant-elefant_2_0_2_stable/apps/cli/lib/Updater.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/tests/CliTest.php and elefant-elefant_2_0_2_stable/apps/cli/tests/CliTest.php are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/build-app/admin_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/build-app/admin_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/build-app/config.html and elefant-elefant_2_0_2_stable/apps/cli/views/build-app/config.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/build-app/index_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/build-app/index_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/build-app/index_view.html and elefant-elefant_2_0_2_stable/apps/cli/views/build-app/index_view.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/acl.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/acl.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/add_form.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/add_form.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/add_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/add_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/add_view.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/add_view.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/admin_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/admin_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/admin_view.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/admin_view.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/config.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/config.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/delete_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/delete_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/edit_form.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/edit_form.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/edit_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/edit_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/edit_view.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/edit_view.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/index_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/index_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/index_view.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/index_view.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/install_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/install_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/install_mysql.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/install_mysql.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/install_pgsql.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/install_pgsql.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/install_sqlite.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/install_sqlite.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/model.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/model.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/checkbox.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/checkbox.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/date.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/date.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/datetime.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/datetime.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/email.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/email.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/password.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/password.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/pkey.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/pkey.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/radio.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/radio.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/select.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/select.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/text.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/text.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/textarea.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/textarea.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/time.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/time.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/types/wysiwyg.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/types/wysiwyg.html are identical
Files elefant-elefant_2_0_1_stable/apps/cli/views/crud-app/upgrade_handler.html and elefant-elefant_2_0_2_stable/apps/cli/views/crud-app/upgrade_handler.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/conf/acl.php and elefant-elefant_2_0_2_stable/apps/designer/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/conf/config.php and elefant-elefant_2_0_2_stable/apps/designer/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/css/layout.css and elefant-elefant_2_0_2_stable/apps/designer/css/layout.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/css/stylesheet.css and elefant-elefant_2_0_2_stable/apps/designer/css/stylesheet.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/forms/addlayout.php and elefant-elefant_2_0_2_stable/apps/designer/forms/addlayout.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/forms/addstylesheet.php and elefant-elefant_2_0_2_stable/apps/designer/forms/addstylesheet.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/forms/editlayout.php and elefant-elefant_2_0_2_stable/apps/designer/forms/editlayout.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/forms/editstylesheet.php and elefant-elefant_2_0_2_stable/apps/designer/forms/editstylesheet.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/forms/installer.php and elefant-elefant_2_0_2_stable/apps/designer/forms/installer.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/add/layout.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/add/layout.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/add/stylesheet.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/add/stylesheet.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/bgsave.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/bgsave.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/csspreview.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/csspreview.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/delete.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/edit/layout.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/edit/layout.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/edit/stylesheet.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/edit/stylesheet.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/index.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/installer.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/installer.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/makedefault.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/makedefault.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/handlers/preview.php and elefant-elefant_2_0_2_stable/apps/designer/handlers/preview.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/CONTRIBUTING.md and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/CONTRIBUTING.md are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/README.md and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/README.md are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/comment/comment.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/comment/comment.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/dialog/dialog.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/dialog/dialog.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/dialog/dialog.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/dialog/dialog.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/display/placeholder.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/display/placeholder.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/edit/closebrackets.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/edit/closebrackets.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/edit/closetag.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/edit/closetag.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/edit/continuecomment.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/edit/continuecomment.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/edit/continuelist.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/edit/continuelist.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/edit/matchbrackets.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/edit/matchbrackets.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/edit/trailingspace.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/edit/trailingspace.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/fold/brace-fold.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/fold/brace-fold.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/fold/foldcode.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/fold/foldcode.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/fold/indent-fold.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/fold/indent-fold.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/fold/xml-fold.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/fold/xml-fold.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/html-hint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/html-hint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/javascript-hint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/javascript-hint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/pig-hint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/pig-hint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/python-hint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/python-hint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/show-hint.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/show-hint.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/show-hint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/show-hint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/hint/xml-hint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/hint/xml-hint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/lint/coffeescript-lint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/lint/coffeescript-lint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/lint/javascript-lint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/lint/javascript-lint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/lint/json-lint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/lint/json-lint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/lint/lint.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/lint/lint.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/lint/lint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/lint/lint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/merge/dep/diff_match_patch.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/merge/dep/diff_match_patch.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/merge/merge.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/merge/merge.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/merge/merge.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/merge/merge.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/mode/loadmode.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/mode/loadmode.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/mode/multiplex.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/mode/multiplex.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/mode/multiplex_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/mode/multiplex_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/mode/overlay.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/mode/overlay.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/runmode/colorize.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/runmode/colorize.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/runmode/runmode-standalone.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/runmode/runmode-standalone.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/runmode/runmode.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/runmode/runmode.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/runmode/runmode.node.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/runmode/runmode.node.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/search/match-highlighter.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/search/match-highlighter.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/search/search.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/search/search.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/search/searchcursor.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/search/searchcursor.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/selection/active-line.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/selection/active-line.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/addon/selection/mark-selection.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/addon/selection/mark-selection.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/bin/compress and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/bin/compress are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/bin/lint and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/bin/lint are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/bin/source-highlight and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/bin/source-highlight are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/bower.json and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/bower.json are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/compress.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/compress.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/css/baboon.png and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/css/baboon.png are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/css/baboon_vector.svg and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/css/baboon_vector.svg are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/css/docs.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/css/docs.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/activeline.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/activeline.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/bidi.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/bidi.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/btree.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/btree.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/buffers.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/buffers.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/changemode.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/changemode.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/closebrackets.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/closebrackets.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/closetag.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/closetag.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/complete.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/complete.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/emacs.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/emacs.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/folding.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/folding.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/fullscreen.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/fullscreen.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/html5complete.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/html5complete.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/indentwrap.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/indentwrap.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/lint.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/lint.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/loadmode.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/loadmode.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/marker.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/marker.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/markselection.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/markselection.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/matchhighlighter.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/matchhighlighter.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/merge.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/merge.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/multiplex.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/multiplex.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/mustache.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/mustache.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/placeholder.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/placeholder.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/preview.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/preview.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/resize.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/resize.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/runmode.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/runmode.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/search.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/search.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/spanaffectswrapping_shim.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/spanaffectswrapping_shim.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/theme.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/theme.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/trailingspace.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/trailingspace.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/variableheight.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/variableheight.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/vim.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/vim.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/visibletabs.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/visibletabs.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/widget.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/widget.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/demo/xmlcomplete.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/demo/xmlcomplete.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/baboon.png and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/baboon.png are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/baboon_vector.svg and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/baboon_vector.svg are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/compress.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/compress.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/docs.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/docs.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/internals.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/internals.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/manual.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/manual.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/modes.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/modes.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/oldrelease.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/oldrelease.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/realworld.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/realworld.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/reporting.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/reporting.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/upgrade_v2.2.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/upgrade_v2.2.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/doc/upgrade_v3.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/doc/upgrade_v3.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/internals.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/internals.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/keymap/emacs.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/keymap/emacs.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/keymap/extra.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/keymap/extra.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/keymap/vim.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/keymap/vim.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/lib/codemirror.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/lib/codemirror.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/lib/codemirror.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/lib/codemirror.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/manual.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/manual.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/apl/apl.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/apl/apl.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/apl/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/apl/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/asterisk/asterisk.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/asterisk/asterisk.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/asterisk/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/asterisk/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/clike/clike.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/clike/clike.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/clike/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/clike/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/clike/scala.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/clike/scala.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/clojure/clojure.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/clojure/clojure.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/clojure/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/clojure/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/cobol/cobol.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/cobol/cobol.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/cobol/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/cobol/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/coffeescript/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/coffeescript/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/coffeescript/coffeescript.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/coffeescript/coffeescript.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/coffeescript/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/coffeescript/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/commonlisp/commonlisp.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/commonlisp/commonlisp.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/commonlisp/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/commonlisp/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/css/css.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/css/css.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/css/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/css/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/css/scss.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/css/scss.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/css/scss_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/css/scss_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/css/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/css/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/d/d.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/d/d.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/d/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/d/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/diff/diff.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/diff/diff.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/diff/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/diff/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ecl/ecl.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ecl/ecl.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ecl/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ecl/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/erlang/erlang.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/erlang/erlang.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/erlang/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/erlang/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/gas/gas.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/gas/gas.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/gas/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/gas/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/gfm/gfm.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/gfm/gfm.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/gfm/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/gfm/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/gfm/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/gfm/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/go/go.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/go/go.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/go/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/go/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/groovy/groovy.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/groovy/groovy.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/groovy/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/groovy/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haml/haml.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haml/haml.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haml/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haml/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haml/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haml/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haskell/haskell.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haskell/haskell.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haskell/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haskell/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haxe/haxe.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haxe/haxe.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/haxe/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/haxe/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/htmlembedded/htmlembedded.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/htmlembedded/htmlembedded.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/htmlembedded/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/htmlembedded/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/htmlmixed/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/htmlmixed/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/http/http.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/http/http.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/http/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/http/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/javascript/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/javascript/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/javascript/javascript.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/javascript/javascript.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/javascript/typescript.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/javascript/typescript.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/jinja2/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/jinja2/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/jinja2/jinja2.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/jinja2/jinja2.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/less/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/less/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/less/less.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/less/less.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/livescript/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/livescript/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/livescript/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/livescript/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/livescript/livescript.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/livescript/livescript.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/livescript/livescript.ls and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/livescript/livescript.ls are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/lua/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/lua/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/lua/lua.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/lua/lua.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/markdown/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/markdown/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/markdown/markdown.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/markdown/markdown.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/markdown/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/markdown/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/meta.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/meta.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/mirc/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/mirc/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/mirc/mirc.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/mirc/mirc.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ntriples/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ntriples/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ntriples/ntriples.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ntriples/ntriples.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ocaml/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ocaml/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ocaml/ocaml.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ocaml/ocaml.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/pascal/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/pascal/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/pascal/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/pascal/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/pascal/pascal.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/pascal/pascal.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/perl/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/perl/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/perl/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/perl/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/perl/perl.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/perl/perl.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/php/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/php/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/php/php.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/php/php.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/pig/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/pig/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/pig/pig.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/pig/pig.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/properties/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/properties/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/properties/properties.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/properties/properties.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/python/LICENSE.txt and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/python/LICENSE.txt are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/python/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/python/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/python/python.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/python/python.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/q/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/q/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/q/q.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/q/q.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/r/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/r/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/r/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/r/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/r/r.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/r/r.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rpm/changes/changes.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rpm/changes/changes.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rpm/changes/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rpm/changes/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rpm/spec/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rpm/spec/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rpm/spec/spec.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rpm/spec/spec.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rpm/spec/spec.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rpm/spec/spec.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rst/LICENSE.txt and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rst/LICENSE.txt are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rst/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rst/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rst/rst.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rst/rst.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ruby/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ruby/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ruby/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ruby/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/ruby/ruby.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/ruby/ruby.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rust/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rust/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/rust/rust.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/rust/rust.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sass/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sass/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sass/sass.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sass/sass.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/scheme/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/scheme/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/scheme/scheme.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/scheme/scheme.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/shell/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/shell/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/shell/shell.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/shell/shell.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sieve/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sieve/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sieve/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sieve/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sieve/sieve.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sieve/sieve.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/smalltalk/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/smalltalk/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/smalltalk/smalltalk.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/smalltalk/smalltalk.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/smarty/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/smarty/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/smarty/smarty.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/smarty/smarty.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sparql/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sparql/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sparql/sparql.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sparql/sparql.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sql/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sql/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/sql/sql.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/sql/sql.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/stex/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/stex/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/stex/stex.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/stex/stex.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/stex/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/stex/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tcl/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tcl/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tcl/tcl.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tcl/tcl.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tiddlywiki/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tiddlywiki/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tiki/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tiki/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tiki/tiki.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tiki/tiki.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/tiki/tiki.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/tiki/tiki.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/turtle/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/turtle/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/turtle/turtle.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/turtle/turtle.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/vb/LICENSE.txt and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/vb/LICENSE.txt are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/vb/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/vb/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/vb/vb.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/vb/vb.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/vbscript/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/vbscript/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/vbscript/vbscript.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/vbscript/vbscript.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/velocity/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/velocity/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/velocity/velocity.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/velocity/velocity.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/verilog/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/verilog/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/verilog/verilog.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/verilog/verilog.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/xml/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/xml/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/xml/xml.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/xml/xml.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/xquery/LICENSE and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/xquery/LICENSE are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/xquery/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/xquery/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/xquery/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/xquery/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/xquery/xquery.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/xquery/xquery.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/yaml/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/yaml/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/yaml/yaml.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/yaml/yaml.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/z80/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/z80/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/mode/z80/z80.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/mode/z80/z80.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/oldrelease.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/oldrelease.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/package.json and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/package.json are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/comment_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/comment_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/doc_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/doc_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/driver.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/driver.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/emacs_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/emacs_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/index.html and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/lint/acorn.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/lint/acorn.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/lint/lint.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/lint/lint.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/lint/parse-js.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/lint/parse-js.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/lint/walk.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/lint/walk.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/mode_test.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/mode_test.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/mode_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/mode_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/phantom_driver.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/phantom_driver.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/run.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/run.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/test/vim_test.js and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/test/vim_test.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/ambiance-mobile.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/ambiance-mobile.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/ambiance.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/ambiance.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/blackboard.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/blackboard.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/cobalt.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/cobalt.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/eclipse.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/eclipse.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/elegant.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/elegant.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/erlang-dark.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/erlang-dark.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/lesser-dark.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/lesser-dark.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/midnight.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/midnight.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/monokai.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/monokai.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/neat.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/neat.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/night.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/night.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/rubyblue.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/rubyblue.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/solarized.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/solarized.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/twilight.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/twilight.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/vibrant-ink.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/vibrant-ink.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/xq-dark.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/xq-dark.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/codemirror/theme/xq-light.css and elefant-elefant_2_0_2_stable/apps/designer/js/codemirror/theme/xq-light.css are identical
Files elefant-elefant_2_0_1_stable/apps/designer/js/jquery.bindWithDelay.js and elefant-elefant_2_0_2_stable/apps/designer/js/jquery.bindWithDelay.js are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/designer/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/GithubFetcher.php and elefant-elefant_2_0_2_stable/apps/designer/lib/GithubFetcher.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/GithubInstaller.php and elefant-elefant_2_0_2_stable/apps/designer/lib/GithubInstaller.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/Installer.php and elefant-elefant_2_0_2_stable/apps/designer/lib/Installer.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/PclZip.php and elefant-elefant_2_0_2_stable/apps/designer/lib/PclZip.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/ZipInstaller.php and elefant-elefant_2_0_2_stable/apps/designer/lib/ZipInstaller.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/lib/Zipper.php and elefant-elefant_2_0_2_stable/apps/designer/lib/Zipper.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/tests/GithubFetcherTest.php and elefant-elefant_2_0_2_stable/apps/designer/tests/GithubFetcherTest.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/tests/ZipperTest.php and elefant-elefant_2_0_2_stable/apps/designer/tests/ZipperTest.php are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/add/layout.html and elefant-elefant_2_0_2_stable/apps/designer/views/add/layout.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/add/stylesheet.html and elefant-elefant_2_0_2_stable/apps/designer/views/add/stylesheet.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/edit/layout.html and elefant-elefant_2_0_2_stable/apps/designer/views/edit/layout.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/edit/stylesheet.html and elefant-elefant_2_0_2_stable/apps/designer/views/edit/stylesheet.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/index.html and elefant-elefant_2_0_2_stable/apps/designer/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/installed.html and elefant-elefant_2_0_2_stable/apps/designer/views/installed.html are identical
Files elefant-elefant_2_0_1_stable/apps/designer/views/installer.html and elefant-elefant_2_0_2_stable/apps/designer/views/installer.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/conf/acl.php and elefant-elefant_2_0_2_stable/apps/filemanager/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/conf/config.php and elefant-elefant_2_0_2_stable/apps/filemanager/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/conf/embed.php and elefant-elefant_2_0_2_stable/apps/filemanager/conf/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/conf/helpers.php and elefant-elefant_2_0_2_stable/apps/filemanager/conf/helpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/colorbox/colorbox.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/colorbox/colorbox.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/colorbox/controls.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/colorbox/controls.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/colorbox/loading.gif and elefant-elefant_2_0_2_stable/apps/filemanager/css/colorbox/loading.gif are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/current.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/current.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/cycle2/next.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/cycle2/next.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/cycle2/prev.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/cycle2/prev.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/cycle2/spinner.gif and elefant-elefant_2_0_2_stable/apps/filemanager/css/cycle2/spinner.gif are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/cycle2.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/cycle2.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/filebrowser.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/filebrowser.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/filemanager.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/filemanager.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/gallery.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/gallery.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/gallery_embedded.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/gallery_embedded.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/icon-swf.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/icon-swf.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/background.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/background.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/bigplay.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/bigplay.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/controls.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/controls.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/loading.gif and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/loading.gif are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/mediaelementplayer.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/mediaelementplayer.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/mejs-controls.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/mejs-controls.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/mediaelement/mejs-controls.svg and elefant-elefant_2_0_2_stable/apps/filemanager/css/mediaelement/mejs-controls.svg are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/multi-file.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/multi-file.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/multi-image.css and elefant-elefant_2_0_2_stable/apps/filemanager/css/multi-image.css are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/css/notcurrent.png and elefant-elefant_2_0_2_stable/apps/filemanager/css/notcurrent.png are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/api.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/api.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/audio.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/audio.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/edit/img.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/edit/img.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/edit.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/embed.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/gallery.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/gallery.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/index.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/mediaelement.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/mediaelement.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/photo.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/photo.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/properties.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/properties.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/proxy.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/proxy.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/redactor/images.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/redactor/images.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/redactor/upload.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/redactor/upload.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/settings.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/slideshow.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/slideshow.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/swf.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/swf.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/upgrade.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/upgrade.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/upload/drop.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/upload/drop.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/upload.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/upload.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/util/browser.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/util/browser.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/util/multi-file.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/util/multi-file.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/util/multi-image.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/util/multi-image.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/handlers/video.php and elefant-elefant_2_0_2_stable/apps/filemanager/handlers/video.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/expressInstall.swf and elefant-elefant_2_0_2_stable/apps/filemanager/js/expressInstall.swf are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/filemanager.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/filemanager.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/flashmediaelement.swf and elefant-elefant_2_0_2_stable/apps/filemanager/js/flashmediaelement.swf are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.colorbox.min.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.colorbox.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.cycle.all.min.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.cycle.all.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.cycle2.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.cycle2.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.cycle2.js.map and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.cycle2.js.map are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.filebrowser.js elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.filebrowser.js
--- elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.filebrowser.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.filebrowser.js	2017-10-16 12:12:51.000000000 -0500
@@ -301,6 +301,7 @@
 				url: '/filemanager/upload/drop',
 				paramname: 'file',
 				withCredentials: (navigator.userAgent.indexOf('MSIE') === -1) ? true : false,
+				fallback_dropzoneClick: false,
 				data: {
 					path: function () {
 						return self.opts.path;
diff -urBNs elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.filedrop.js elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.filedrop.js
--- elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.filedrop.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.filedrop.js	2017-10-16 12:12:51.000000000 -0500
@@ -27,10 +27,9 @@
  */
 ;(function($) {
 
-  jQuery.event.props.push("dataTransfer");
-
   var default_opts = {
       fallback_id: '',
+      fallback_dropzoneClick : true,
       url: '',
       refresh: 1000,
       paramname: 'userfile',
@@ -72,18 +71,31 @@
         files_count = 0,
         files;
 
-    $('#' + opts.fallback_id).css({
-      display: 'none',
-      width: 0,
-      height: 0
-    });
+    if ( opts.fallback_dropzoneClick === true )
+    {
+      $('#' + opts.fallback_id).css({
+        display: 'none',
+        width: 0,
+        height: 0
+      });
+    }
 
     this.on('drop', drop).on('dragstart', opts.dragStart).on('dragenter', dragEnter).on('dragover', dragOver).on('dragleave', dragLeave);
     $(document).on('drop', docDrop).on('dragenter', docEnter).on('dragover', docOver).on('dragleave', docLeave);
 
-    this.on('click', function(e){
-      $('#' + opts.fallback_id).trigger(e);
-    });
+    if ( opts.fallback_dropzoneClick === true )
+    {
+      if ( this.find('#' + opts.fallback_id).length > 0 )
+      {
+        throw "Fallback element ["+opts.fallback_id+"] cannot be inside dropzone, unless option fallback_dropzoneClick is false";
+      }
+      else
+      {
+        this.on('click', function(e){
+          $('#' + opts.fallback_id).trigger(e);
+        });
+      }
+    }
 
     $('#' + opts.fallback_id).change(function(e) {
       opts.drop(e);
@@ -94,9 +106,9 @@
 
     function drop(e) {
       if( opts.drop.call(this, e) === false ) return false;
-      if(!e.dataTransfer)
+      if(!e.originalEvent.dataTransfer)
         return;
-      files = e.dataTransfer.files;
+      files = e.originalEvent.dataTransfer.files;
       if (files === null || files === undefined || files.length === 0) {
         opts.error(errors[0]);
         return false;
@@ -370,7 +382,8 @@
           xhr.withCredentials = opts.withCredentials;
         }
 
-        var data = atob(e.target.result.split(',')[1]);
+        var encodedString = e.target.result.split(',')[1];
+        var data = encodedString === undefined ? '' : atob(encodedString);
         if (typeof newName === "string") {
           builder = getBuilder(newName, data, mime, boundary);
         } else {
@@ -388,7 +401,7 @@
 
         // Allow url to be a method
         if (jQuery.isFunction(opts.url)) {
-            xhr.open(opts.requestType, opts.url(), true);
+            xhr.open(opts.requestType, opts.url(upload), true);
         } else {
             xhr.open(opts.requestType, opts.url, true);
         }
diff -urBNs elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.filemanager.js elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.filemanager.js
--- elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.filemanager.js	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.filemanager.js	2017-10-16 12:12:51.000000000 -0500
@@ -207,6 +207,7 @@
 			url: '/filemanager/upload/drop',
 			paramname: 'file',
 			withCredentials: (navigator.userAgent.indexOf('MSIE') === -1) ? true : false,
+			fallback_dropzoneClick: false,
 			data: {
 				path: function () {
 					return filemanager.path
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.multi-file.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.multi-file.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.multi-image.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.multi-image.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.photoswitcher.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.photoswitcher.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/jquery.tmpl.beta1.min.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/jquery.tmpl.beta1.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/mediaelement-and-player.min.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/mediaelement-and-player.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/js/swfobject.js and elefant-elefant_2_0_2_stable/apps/filemanager/js/swfobject.js are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/lib/API.php and elefant-elefant_2_0_2_stable/apps/filemanager/lib/API.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/lib/FileManager.php and elefant-elefant_2_0_2_stable/apps/filemanager/lib/FileManager.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/filemanager/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/lib/Image.php and elefant-elefant_2_0_2_stable/apps/filemanager/lib/Image.php are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/audio.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/audio.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/edit.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/gallery/embedded.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/gallery/embedded.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/gallery.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/gallery.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/index.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/mediaelement.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/mediaelement.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/photo.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/photo.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/properties.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/properties.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/settings.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/settings.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/slideshow.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/slideshow.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/swf.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/swf.html are identical
Files elefant-elefant_2_0_1_stable/apps/filemanager/views/video.html and elefant-elefant_2_0_2_stable/apps/filemanager/views/video.html are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/conf/acl.php and elefant-elefant_2_0_2_stable/apps/navigation/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/conf/config.php and elefant-elefant_2_0_2_stable/apps/navigation/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/conf/embed.php and elefant-elefant_2_0_2_stable/apps/navigation/conf/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/conf/helpers.php and elefant-elefant_2_0_2_stable/apps/navigation/conf/helpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/css/dropmenu.css and elefant-elefant_2_0_2_stable/apps/navigation/css/dropmenu.css are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/css/icon-nav-contextual.png and elefant-elefant_2_0_2_stable/apps/navigation/css/icon-nav-contextual.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/css/icon-nav-section.png and elefant-elefant_2_0_2_stable/apps/navigation/css/icon-nav-section.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/css/icon-nav-top.png and elefant-elefant_2_0_2_stable/apps/navigation/css/icon-nav-top.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/css/icon-sitemap.png and elefant-elefant_2_0_2_stable/apps/navigation/css/icon-sitemap.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/admin.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/admin.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/admin_tree.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/admin_tree.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/api.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/api.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/breadcrumb.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/breadcrumb.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/contextual.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/contextual.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/cookie.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/cookie.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/dropmenu.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/dropmenu.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/hook/delete.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/hook/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/hook/edit.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/hook/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/index.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/json.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/json.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/languages.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/languages.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/map.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/map.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/pager.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/pager.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/redirect.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/redirect.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/section.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/section.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/handlers/top.php and elefant-elefant_2_0_2_stable/apps/navigation/handlers/top.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/dropmenu.js and elefant-elefant_2_0_2_stable/apps/navigation/js/dropmenu.js are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/apple/bg.jpg and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/apple/bg.jpg are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/apple/d.png and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/apple/d.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/apple/dot_for_ie.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/apple/dot_for_ie.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/apple/style.css and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/apple/style.css are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/apple/throbber.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/apple/throbber.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/classic/d.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/classic/d.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/classic/d.png and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/classic/d.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/classic/dot_for_ie.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/classic/dot_for_ie.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/classic/style.css and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/classic/style.css are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/classic/throbber.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/classic/throbber.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default/d.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default/d.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default/d.png and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default/d.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default/style.css and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default/style.css are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default/throbber.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default/throbber.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default-rtl/d.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default-rtl/d.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default-rtl/d.png and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default-rtl/d.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default-rtl/dots.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default-rtl/dots.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default-rtl/style.css and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default-rtl/style.css are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/themes/default-rtl/throbber.gif and elefant-elefant_2_0_2_stable/apps/navigation/js/themes/default-rtl/throbber.gif are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/closedhand.cur and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/closedhand.cur are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/collapsed.png and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/collapsed.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/cursorGrab.png and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/cursorGrab.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/expanded.png and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/expanded.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/openhand.cur and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/openhand.cur are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/js/tree-drag-drop/tree-drag-drop.js and elefant-elefant_2_0_2_stable/apps/navigation/js/tree-drag-drop/tree-drag-drop.js are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/navigation/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/lib/Link.php and elefant-elefant_2_0_2_stable/apps/navigation/lib/Link.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/lib/Navigation.php and elefant-elefant_2_0_2_stable/apps/navigation/lib/Navigation.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/lib/Tree.php and elefant-elefant_2_0_2_stable/apps/navigation/lib/Tree.php are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/pix/trash.png and elefant-elefant_2_0_2_stable/apps/navigation/pix/trash.png are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/views/admin.html and elefant-elefant_2_0_2_stable/apps/navigation/views/admin.html are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/views/pager/numbers.html and elefant-elefant_2_0_2_stable/apps/navigation/views/pager/numbers.html are identical
Files elefant-elefant_2_0_1_stable/apps/navigation/views/pager/text.html and elefant-elefant_2_0_2_stable/apps/navigation/views/pager/text.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/conf/config.php and elefant-elefant_2_0_2_stable/apps/social/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/conf/embed.php and elefant-elefant_2_0_2_stable/apps/social/conf/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/conf/helpers.php and elefant-elefant_2_0_2_stable/apps/social/conf/helpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/css/icon-facebook-commentcount.png and elefant-elefant_2_0_2_stable/apps/social/css/icon-facebook-commentcount.png are identical
Files elefant-elefant_2_0_1_stable/apps/social/css/icon-facebook-comments.png and elefant-elefant_2_0_2_stable/apps/social/css/icon-facebook-comments.png are identical
Files elefant-elefant_2_0_1_stable/apps/social/css/icon-twitter-follow.png and elefant-elefant_2_0_2_stable/apps/social/css/icon-twitter-follow.png are identical
Files elefant-elefant_2_0_1_stable/apps/social/css/sharingbuttons.css and elefant-elefant_2_0_2_stable/apps/social/css/sharingbuttons.css are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/facebook/commentcount.php and elefant-elefant_2_0_2_stable/apps/social/handlers/facebook/commentcount.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/facebook/comments.php and elefant-elefant_2_0_2_stable/apps/social/handlers/facebook/comments.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/facebook/init.php and elefant-elefant_2_0_2_stable/apps/social/handlers/facebook/init.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/facebook/like-box.php and elefant-elefant_2_0_2_stable/apps/social/handlers/facebook/like-box.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/facebook/like.php and elefant-elefant_2_0_2_stable/apps/social/handlers/facebook/like.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/google/init.php and elefant-elefant_2_0_2_stable/apps/social/handlers/google/init.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/google/maps.php and elefant-elefant_2_0_2_stable/apps/social/handlers/google/maps.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/google/plusone.php and elefant-elefant_2_0_2_stable/apps/social/handlers/google/plusone.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/index.php and elefant-elefant_2_0_2_stable/apps/social/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/sharingbuttons.php and elefant-elefant_2_0_2_stable/apps/social/handlers/sharingbuttons.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/twitter/feed.php and elefant-elefant_2_0_2_stable/apps/social/handlers/twitter/feed.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/twitter/follow.php and elefant-elefant_2_0_2_stable/apps/social/handlers/twitter/follow.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/twitter/init.php and elefant-elefant_2_0_2_stable/apps/social/handlers/twitter/init.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/twitter/tweet.php and elefant-elefant_2_0_2_stable/apps/social/handlers/twitter/tweet.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/video/vimeo.php and elefant-elefant_2_0_2_stable/apps/social/handlers/video/vimeo.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/video/vine.php and elefant-elefant_2_0_2_stable/apps/social/handlers/video/vine.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/handlers/video/youtube.php and elefant-elefant_2_0_2_stable/apps/social/handlers/video/youtube.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/lib/Filter.php and elefant-elefant_2_0_2_stable/apps/social/lib/Filter.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/social/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/facebook/commentcount.html and elefant-elefant_2_0_2_stable/apps/social/views/facebook/commentcount.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/facebook/comments.html and elefant-elefant_2_0_2_stable/apps/social/views/facebook/comments.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/facebook/init.html and elefant-elefant_2_0_2_stable/apps/social/views/facebook/init.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/facebook/like-box.html and elefant-elefant_2_0_2_stable/apps/social/views/facebook/like-box.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/facebook/like.html and elefant-elefant_2_0_2_stable/apps/social/views/facebook/like.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/google/init.html and elefant-elefant_2_0_2_stable/apps/social/views/google/init.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/google/maps.html and elefant-elefant_2_0_2_stable/apps/social/views/google/maps.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/google/maps_loader.html and elefant-elefant_2_0_2_stable/apps/social/views/google/maps_loader.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/google/maps_script.html and elefant-elefant_2_0_2_stable/apps/social/views/google/maps_script.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/google/plusone.html and elefant-elefant_2_0_2_stable/apps/social/views/google/plusone.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/index.html and elefant-elefant_2_0_2_stable/apps/social/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/sharingbuttons.html and elefant-elefant_2_0_2_stable/apps/social/views/sharingbuttons.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/twitter/feed.html and elefant-elefant_2_0_2_stable/apps/social/views/twitter/feed.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/twitter/follow.html and elefant-elefant_2_0_2_stable/apps/social/views/twitter/follow.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/twitter/init.html and elefant-elefant_2_0_2_stable/apps/social/views/twitter/init.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/twitter/tweet.html and elefant-elefant_2_0_2_stable/apps/social/views/twitter/tweet.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/video/vimeo.html and elefant-elefant_2_0_2_stable/apps/social/views/video/vimeo.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/video/vine.html and elefant-elefant_2_0_2_stable/apps/social/views/video/vine.html are identical
Files elefant-elefant_2_0_1_stable/apps/social/views/video/youtube.html and elefant-elefant_2_0_2_stable/apps/social/views/video/youtube.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/conf/acl.php and elefant-elefant_2_0_2_stable/apps/translator/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/conf/config.php and elefant-elefant_2_0_2_stable/apps/translator/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/forms/add.php and elefant-elefant_2_0_2_stable/apps/translator/forms/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/forms/settings.php and elefant-elefant_2_0_2_stable/apps/translator/forms/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/add.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/api.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/api.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/build.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/build.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/delete.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/edit.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/index.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/makedefault.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/makedefault.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/settings.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/handlers/sources.php and elefant-elefant_2_0_2_stable/apps/translator/handlers/sources.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/lib/Functions.php and elefant-elefant_2_0_2_stable/apps/translator/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/lib/Translator.php and elefant-elefant_2_0_2_stable/apps/translator/lib/Translator.php are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/add.html and elefant-elefant_2_0_2_stable/apps/translator/views/add.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/edit.html and elefant-elefant_2_0_2_stable/apps/translator/views/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/edit_search.html and elefant-elefant_2_0_2_stable/apps/translator/views/edit_search.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/edit_source.html and elefant-elefant_2_0_2_stable/apps/translator/views/edit_source.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/index.html and elefant-elefant_2_0_2_stable/apps/translator/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/settings.html and elefant-elefant_2_0_2_stable/apps/translator/views/settings.html are identical
Files elefant-elefant_2_0_1_stable/apps/translator/views/sources.html and elefant-elefant_2_0_2_stable/apps/translator/views/sources.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/acl.php and elefant-elefant_2_0_2_stable/apps/user/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/config.php and elefant-elefant_2_0_2_stable/apps/user/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/embed.php and elefant-elefant_2_0_2_stable/apps/user/conf/embed.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/helpers.php and elefant-elefant_2_0_2_stable/apps/user/conf/helpers.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/nav.php and elefant-elefant_2_0_2_stable/apps/user/conf/nav.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.3_mysql.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.3_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.3_pgsql.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.3_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.3_sqlite.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.3_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.4_mysql.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.4_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.4_pgsql.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.4_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.4_sqlite.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.4_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.5_mysql.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.5_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.5_pgsql.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.5_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/conf/upgrade_1.1.5_sqlite.sql and elefant-elefant_2_0_2_stable/apps/user/conf/upgrade_1.1.5_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/apps/user/css/details.css and elefant-elefant_2_0_2_stable/apps/user/css/details.css are identical
Files elefant-elefant_2_0_1_stable/apps/user/css/userchooser.css and elefant-elefant_2_0_2_stable/apps/user/css/userchooser.css are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/add.php and elefant-elefant_2_0_2_stable/apps/user/forms/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/edit.php and elefant-elefant_2_0_2_stable/apps/user/forms/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/login/newuser.php and elefant-elefant_2_0_2_stable/apps/user/forms/login/newuser.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/newpass.php and elefant-elefant_2_0_2_stable/apps/user/forms/newpass.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/recover.php and elefant-elefant_2_0_2_stable/apps/user/forms/recover.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/role/add.php and elefant-elefant_2_0_2_stable/apps/user/forms/role/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/role/edit.php and elefant-elefant_2_0_2_stable/apps/user/forms/role/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/settings.php and elefant-elefant_2_0_2_stable/apps/user/forms/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/signup.php and elefant-elefant_2_0_2_stable/apps/user/forms/signup.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/forms/update.php and elefant-elefant_2_0_2_stable/apps/user/forms/update.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/add.php and elefant-elefant_2_0_2_stable/apps/user/handlers/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/admin.php and elefant-elefant_2_0_2_stable/apps/user/handlers/admin.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/api/link.php and elefant-elefant_2_0_2_stable/apps/user/handlers/api/link.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/api/note.php and elefant-elefant_2_0_2_stable/apps/user/handlers/api/note.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/chooser/addform.php and elefant-elefant_2_0_2_stable/apps/user/handlers/chooser/addform.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/chooser/adduser.php and elefant-elefant_2_0_2_stable/apps/user/handlers/chooser/adduser.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/chooser.php and elefant-elefant_2_0_2_stable/apps/user/handlers/chooser.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/delete.php and elefant-elefant_2_0_2_stable/apps/user/handlers/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/details.php and elefant-elefant_2_0_2_stable/apps/user/handlers/details.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/edit.php and elefant-elefant_2_0_2_stable/apps/user/handlers/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/export.php and elefant-elefant_2_0_2_stable/apps/user/handlers/export.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/import/csv.php and elefant-elefant_2_0_2_stable/apps/user/handlers/import/csv.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/import/csv2.php and elefant-elefant_2_0_2_stable/apps/user/handlers/import/csv2.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/import/vcf.php and elefant-elefant_2_0_2_stable/apps/user/handlers/import/vcf.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/import.php and elefant-elefant_2_0_2_stable/apps/user/handlers/import.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/index.php and elefant-elefant_2_0_2_stable/apps/user/handlers/index.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/facebook.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/facebook.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/google.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/google.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/newpersona.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/newpersona.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/newuser.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/newuser.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/openid.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/openid.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/persona.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/persona.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login/twitter.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login/twitter.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/login.php and elefant-elefant_2_0_2_stable/apps/user/handlers/login.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/logout.php and elefant-elefant_2_0_2_stable/apps/user/handlers/logout.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/newpass.php and elefant-elefant_2_0_2_stable/apps/user/handlers/newpass.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/recover.php and elefant-elefant_2_0_2_stable/apps/user/handlers/recover.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/role/add.php and elefant-elefant_2_0_2_stable/apps/user/handlers/role/add.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/role/delete.php and elefant-elefant_2_0_2_stable/apps/user/handlers/role/delete.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/role/edit.php and elefant-elefant_2_0_2_stable/apps/user/handlers/role/edit.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/roles.php and elefant-elefant_2_0_2_stable/apps/user/handlers/roles.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/settings.php and elefant-elefant_2_0_2_stable/apps/user/handlers/settings.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/sidebar.php and elefant-elefant_2_0_2_stable/apps/user/handlers/sidebar.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/signup.php and elefant-elefant_2_0_2_stable/apps/user/handlers/signup.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/too-many-attempts.php and elefant-elefant_2_0_2_stable/apps/user/handlers/too-many-attempts.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/update.php and elefant-elefant_2_0_2_stable/apps/user/handlers/update.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/upgrade.php and elefant-elefant_2_0_2_stable/apps/user/handlers/upgrade.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/util/userchooser.php and elefant-elefant_2_0_2_stable/apps/user/handlers/util/userchooser.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/handlers/verify.php and elefant-elefant_2_0_2_stable/apps/user/handlers/verify.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/build/links.js and elefant-elefant_2_0_2_stable/apps/user/js/build/links.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/build/notes.js and elefant-elefant_2_0_2_stable/apps/user/js/build/notes.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/jquery.adduser.js and elefant-elefant_2_0_2_stable/apps/user/js/jquery.adduser.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/jquery.tools.min.js and elefant-elefant_2_0_2_stable/apps/user/js/jquery.tools.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/jquery.userchooser.js and elefant-elefant_2_0_2_stable/apps/user/js/jquery.userchooser.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/jsx/links.js and elefant-elefant_2_0_2_stable/apps/user/js/jsx/links.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/jsx/notes.js and elefant-elefant_2_0_2_stable/apps/user/js/jsx/notes.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/persona.js and elefant-elefant_2_0_2_stable/apps/user/js/persona.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/react/JSXTransformer.js and elefant-elefant_2_0_2_stable/apps/user/js/react/JSXTransformer.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/react/react-with-addons.js and elefant-elefant_2_0_2_stable/apps/user/js/react/react-with-addons.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/react/react-with-addons.min.js and elefant-elefant_2_0_2_stable/apps/user/js/react/react-with-addons.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/react/react.js and elefant-elefant_2_0_2_stable/apps/user/js/react/react.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/js/react/react.min.js and elefant-elefant_2_0_2_stable/apps/user/js/react/react.min.js are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/API/Link.php and elefant-elefant_2_0_2_stable/apps/user/lib/API/Link.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/API/Note.php and elefant-elefant_2_0_2_stable/apps/user/lib/API/Note.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/Auth/Basic.php and elefant-elefant_2_0_2_stable/apps/user/lib/Auth/Basic.php are identical
diff -urBNs elefant-elefant_2_0_1_stable/apps/user/lib/Auth/HMAC.php elefant-elefant_2_0_2_stable/apps/user/lib/Auth/HMAC.php
--- elefant-elefant_2_0_1_stable/apps/user/lib/Auth/HMAC.php	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/apps/user/lib/Auth/HMAC.php	2017-10-16 12:12:51.000000000 -0500
@@ -132,12 +132,10 @@
 				$data = $method . \Appconf::admin ('Site Settings', 'site_domain') . $_SERVER['REQUEST_URI'];
 				break;
 			case 'PUT':
-				$data = $method . \Appconf::admin ('Site Settings', 'site_domain') . $_SERVER['REQUEST_URI'] . self::$controller->get_put_data ();
-				break;
 			case 'POST':
 			case 'DELETE':
 			default:
-				$data = $method . \Appconf::admin ('Site Settings', 'site_domain') . $_SERVER['REQUEST_URI'] . self::$controller->get_raw_post_data ();
+				$data = $method . \Appconf::admin ('Site Settings', 'site_domain') . $_SERVER['REQUEST_URI'] . self::$controller->get_put_data ();
 				break;
 		}
 
Files elefant-elefant_2_0_1_stable/apps/user/lib/Data.php and elefant-elefant_2_0_2_stable/apps/user/lib/Data.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/Filter.php and elefant-elefant_2_0_2_stable/apps/user/lib/Filter.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/LightOpenID.php and elefant-elefant_2_0_2_stable/apps/user/lib/LightOpenID.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/Rules.php and elefant-elefant_2_0_2_stable/apps/user/lib/Rules.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/tmhOAuth.php and elefant-elefant_2_0_2_stable/apps/user/lib/tmhOAuth.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/tmhUtilities.php and elefant-elefant_2_0_2_stable/apps/user/lib/tmhUtilities.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/lib/vCard.php and elefant-elefant_2_0_2_stable/apps/user/lib/vCard.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/models/Link.php and elefant-elefant_2_0_2_stable/apps/user/models/Link.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/models/Note.php and elefant-elefant_2_0_2_stable/apps/user/models/Note.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/models/Session.php and elefant-elefant_2_0_2_stable/apps/user/models/Session.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/models/User.php and elefant-elefant_2_0_2_stable/apps/user/models/User.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/models/User_OpenID.php and elefant-elefant_2_0_2_stable/apps/user/models/User_OpenID.php are identical
Files elefant-elefant_2_0_1_stable/apps/user/pix/facebook.png and elefant-elefant_2_0_2_stable/apps/user/pix/facebook.png are identical
Files elefant-elefant_2_0_1_stable/apps/user/pix/google.png and elefant-elefant_2_0_2_stable/apps/user/pix/google.png are identical
Files elefant-elefant_2_0_1_stable/apps/user/pix/openid.png and elefant-elefant_2_0_2_stable/apps/user/pix/openid.png are identical
Files elefant-elefant_2_0_1_stable/apps/user/pix/persona.png and elefant-elefant_2_0_2_stable/apps/user/pix/persona.png are identical
Files elefant-elefant_2_0_1_stable/apps/user/pix/twitter.png and elefant-elefant_2_0_2_stable/apps/user/pix/twitter.png are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/add.html and elefant-elefant_2_0_2_stable/apps/user/views/add.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/admin.html and elefant-elefant_2_0_2_stable/apps/user/views/admin.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/chooser/addform.html and elefant-elefant_2_0_2_stable/apps/user/views/chooser/addform.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/details.html and elefant-elefant_2_0_2_stable/apps/user/views/details.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/edit.html and elefant-elefant_2_0_2_stable/apps/user/views/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/email/recover.html and elefant-elefant_2_0_2_stable/apps/user/views/email/recover.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/email/verification.html and elefant-elefant_2_0_2_stable/apps/user/views/email/verification.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/import/csv.html and elefant-elefant_2_0_2_stable/apps/user/views/import/csv.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/import/csv2.html and elefant-elefant_2_0_2_stable/apps/user/views/import/csv2.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/import/vcf.html and elefant-elefant_2_0_2_stable/apps/user/views/import/vcf.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/import.html and elefant-elefant_2_0_2_stable/apps/user/views/import.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/index.html and elefant-elefant_2_0_2_stable/apps/user/views/index.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/login/newuser.html and elefant-elefant_2_0_2_stable/apps/user/views/login/newuser.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/login/openid.html and elefant-elefant_2_0_2_stable/apps/user/views/login/openid.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/login.html and elefant-elefant_2_0_2_stable/apps/user/views/login.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/newpass.html and elefant-elefant_2_0_2_stable/apps/user/views/newpass.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/recover.html and elefant-elefant_2_0_2_stable/apps/user/views/recover.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/role/add.html and elefant-elefant_2_0_2_stable/apps/user/views/role/add.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/role/edit.html and elefant-elefant_2_0_2_stable/apps/user/views/role/edit.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/roles.html and elefant-elefant_2_0_2_stable/apps/user/views/roles.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/settings.html and elefant-elefant_2_0_2_stable/apps/user/views/settings.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/sidebar.html and elefant-elefant_2_0_2_stable/apps/user/views/sidebar.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/signup.html and elefant-elefant_2_0_2_stable/apps/user/views/signup.html are identical
Files elefant-elefant_2_0_1_stable/apps/user/views/update.html and elefant-elefant_2_0_2_stable/apps/user/views/update.html are identical
Files elefant-elefant_2_0_1_stable/cache/.htaccess and elefant-elefant_2_0_2_stable/cache/.htaccess are identical
Files elefant-elefant_2_0_1_stable/composer.json and elefant-elefant_2_0_2_stable/composer.json are identical
Files elefant-elefant_2_0_1_stable/conf/.htaccess and elefant-elefant_2_0_2_stable/conf/.htaccess are identical
Files elefant-elefant_2_0_1_stable/conf/acl.php and elefant-elefant_2_0_2_stable/conf/acl.php are identical
Files elefant-elefant_2_0_1_stable/conf/config.php and elefant-elefant_2_0_2_stable/conf/config.php are identical
Files elefant-elefant_2_0_1_stable/conf/defaults.php and elefant-elefant_2_0_2_stable/conf/defaults.php are identical
Files elefant-elefant_2_0_1_stable/conf/install_mysql.sql and elefant-elefant_2_0_2_stable/conf/install_mysql.sql are identical
Files elefant-elefant_2_0_1_stable/conf/install_pgsql.sql and elefant-elefant_2_0_2_stable/conf/install_pgsql.sql are identical
Files elefant-elefant_2_0_1_stable/conf/install_sqlite.sql and elefant-elefant_2_0_2_stable/conf/install_sqlite.sql are identical
Files elefant-elefant_2_0_1_stable/conf/navigation.json and elefant-elefant_2_0_2_stable/conf/navigation.json are identical
Files elefant-elefant_2_0_1_stable/conf/package.xml and elefant-elefant_2_0_2_stable/conf/package.xml are identical
Files elefant-elefant_2_0_1_stable/conf/product.php and elefant-elefant_2_0_2_stable/conf/product.php are identical
Files elefant-elefant_2_0_1_stable/conf/routes.php and elefant-elefant_2_0_2_stable/conf/routes.php are identical
Files elefant-elefant_2_0_1_stable/conf/site.db and elefant-elefant_2_0_2_stable/conf/site.db are identical
Files elefant-elefant_2_0_1_stable/conf/test.php and elefant-elefant_2_0_2_stable/conf/test.php are identical
Files elefant-elefant_2_0_1_stable/conf/tools.default.php and elefant-elefant_2_0_2_stable/conf/tools.default.php are identical
Files elefant-elefant_2_0_1_stable/conf/tools.php and elefant-elefant_2_0_2_stable/conf/tools.php are identical
Files elefant-elefant_2_0_1_stable/conf/version.php and elefant-elefant_2_0_2_stable/conf/version.php are identical
Files elefant-elefant_2_0_1_stable/elefant and elefant-elefant_2_0_2_stable/elefant are identical
Files elefant-elefant_2_0_1_stable/favicon.ico and elefant-elefant_2_0_2_stable/favicon.ico are identical
Files elefant-elefant_2_0_1_stable/files/.htaccess and elefant-elefant_2_0_2_stable/files/.htaccess are identical
Files elefant-elefant_2_0_1_stable/files/design/bg.png and elefant-elefant_2_0_2_stable/files/design/bg.png are identical
Files elefant-elefant_2_0_1_stable/files/homepage/photo1.jpg and elefant-elefant_2_0_2_stable/files/homepage/photo1.jpg are identical
Files elefant-elefant_2_0_1_stable/files/homepage/photo2.jpg and elefant-elefant_2_0_2_stable/files/homepage/photo2.jpg are identical
Files elefant-elefant_2_0_1_stable/files/homepage/photo3.jpg and elefant-elefant_2_0_2_stable/files/homepage/photo3.jpg are identical
Files elefant-elefant_2_0_1_stable/files/homepage/photo4.jpg and elefant-elefant_2_0_2_stable/files/homepage/photo4.jpg are identical
Files elefant-elefant_2_0_1_stable/index.php and elefant-elefant_2_0_2_stable/index.php are identical
Files elefant-elefant_2_0_1_stable/install/cache/.htaccess and elefant-elefant_2_0_2_stable/install/cache/.htaccess are identical
Files elefant-elefant_2_0_1_stable/install/css/style.css and elefant-elefant_2_0_2_stable/install/css/style.css are identical
Files elefant-elefant_2_0_1_stable/install/css/title.png and elefant-elefant_2_0_2_stable/install/css/title.png are identical
Files elefant-elefant_2_0_1_stable/install/index.php and elefant-elefant_2_0_2_stable/install/index.php are identical
Files elefant-elefant_2_0_1_stable/install/layouts/database.html and elefant-elefant_2_0_2_stable/install/layouts/database.html are identical
Files elefant-elefant_2_0_1_stable/install/layouts/dbinfo.html and elefant-elefant_2_0_2_stable/install/layouts/dbinfo.html are identical
Files elefant-elefant_2_0_1_stable/install/layouts/finished.html and elefant-elefant_2_0_2_stable/install/layouts/finished.html are identical
Files elefant-elefant_2_0_1_stable/install/layouts/introduction.html and elefant-elefant_2_0_2_stable/install/layouts/introduction.html are identical
Files elefant-elefant_2_0_1_stable/install/layouts/license.html and elefant-elefant_2_0_2_stable/install/layouts/license.html are identical
Files elefant-elefant_2_0_1_stable/install/layouts/requirements.html and elefant-elefant_2_0_2_stable/install/layouts/requirements.html are identical
Files elefant-elefant_2_0_1_stable/install/layouts/settings.html and elefant-elefant_2_0_2_stable/install/layouts/settings.html are identical
Files elefant-elefant_2_0_1_stable/js/jquery-1.11.3.min.js and elefant-elefant_2_0_2_stable/js/jquery-1.11.3.min.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery-1.8.3.min.js and elefant-elefant_2_0_2_stable/js/jquery-1.8.3.min.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery-migrate-1.2.1.js and elefant-elefant_2_0_2_stable/js/jquery-migrate-1.2.1.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/external/jquery/jquery.js and elefant-elefant_2_0_2_stable/js/jquery-ui/external/jquery/jquery.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_diagonals-thick_18_b81900_40x40.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_diagonals-thick_18_b81900_40x40.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_diagonals-thick_20_666666_40x40.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_diagonals-thick_20_666666_40x40.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_flat_10_000000_40x100.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_flat_10_000000_40x100.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_glass_100_f6f6f6_1x400.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_glass_100_f6f6f6_1x400.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_glass_100_fdf5ce_1x400.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_glass_100_fdf5ce_1x400.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_glass_65_ffffff_1x400.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_glass_65_ffffff_1x400.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_gloss-wave_35_f6a828_500x100.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_gloss-wave_35_f6a828_500x100.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_highlight-soft_100_eeeeee_1x100.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_highlight-soft_100_eeeeee_1x100.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-bg_highlight-soft_75_ffe45c_1x100.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-bg_highlight-soft_75_ffe45c_1x100.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-icons_222222_256x240.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-icons_222222_256x240.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-icons_228ef1_256x240.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-icons_228ef1_256x240.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-icons_ef8c08_256x240.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-icons_ef8c08_256x240.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-icons_ffd27a_256x240.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-icons_ffd27a_256x240.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/images/ui-icons_ffffff_256x240.png and elefant-elefant_2_0_2_stable/js/jquery-ui/images/ui-icons_ffffff_256x240.png are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/index.html and elefant-elefant_2_0_2_stable/js/jquery-ui/index.html are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.css and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.css are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.js and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.min.css and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.min.css are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.min.js and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.min.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.structure.css and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.structure.css are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.structure.min.css and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.structure.min.css are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.theme.css and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.theme.css are identical
Files elefant-elefant_2_0_1_stable/js/jquery-ui/jquery-ui.theme.min.css and elefant-elefant_2_0_2_stable/js/jquery-ui/jquery-ui.theme.min.css are identical
Files elefant-elefant_2_0_1_stable/js/jquery.autosave.js and elefant-elefant_2_0_2_stable/js/jquery.autosave.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery.bgsave.js and elefant-elefant_2_0_2_stable/js/jquery.bgsave.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery.cookie.js and elefant-elefant_2_0_2_stable/js/jquery.cookie.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery.localize.min.js and elefant-elefant_2_0_2_stable/js/jquery.localize.min.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery.password_strength.js and elefant-elefant_2_0_2_stable/js/jquery.password_strength.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery.quickpager.js and elefant-elefant_2_0_2_stable/js/jquery.quickpager.js are identical
Files elefant-elefant_2_0_1_stable/js/jquery.verify_values.js and elefant-elefant_2_0_2_stable/js/jquery.verify_values.js are identical
Files elefant-elefant_2_0_1_stable/js/json2.js and elefant-elefant_2_0_2_stable/js/json2.js are identical
Files elefant-elefant_2_0_1_stable/js/jstorage.js and elefant-elefant_2_0_2_stable/js/jstorage.js are identical
Files elefant-elefant_2_0_1_stable/js/urlify.js and elefant-elefant_2_0_2_stable/js/urlify.js are identical
Files elefant-elefant_2_0_1_stable/lang/cs.php and elefant-elefant_2_0_2_stable/lang/cs.php are identical
Files elefant-elefant_2_0_1_stable/lang/de.php and elefant-elefant_2_0_2_stable/lang/de.php are identical
Files elefant-elefant_2_0_1_stable/lang/en.php and elefant-elefant_2_0_2_stable/lang/en.php are identical
Files elefant-elefant_2_0_1_stable/lang/es.php and elefant-elefant_2_0_2_stable/lang/es.php are identical
Files elefant-elefant_2_0_1_stable/lang/fr.php and elefant-elefant_2_0_2_stable/lang/fr.php are identical
Files elefant-elefant_2_0_1_stable/lang/it.php and elefant-elefant_2_0_2_stable/lang/it.php are identical
Files elefant-elefant_2_0_1_stable/lang/ja.php and elefant-elefant_2_0_2_stable/lang/ja.php are identical
Files elefant-elefant_2_0_1_stable/lang/languages.php and elefant-elefant_2_0_2_stable/lang/languages.php are identical
Files elefant-elefant_2_0_1_stable/lang/new_lang.php and elefant-elefant_2_0_2_stable/lang/new_lang.php are identical
Files elefant-elefant_2_0_1_stable/lang/nl.php and elefant-elefant_2_0_2_stable/lang/nl.php are identical
Files elefant-elefant_2_0_1_stable/lang/pt_br.php and elefant-elefant_2_0_2_stable/lang/pt_br.php are identical
Files elefant-elefant_2_0_1_stable/lang/ru.php and elefant-elefant_2_0_2_stable/lang/ru.php are identical
Files elefant-elefant_2_0_1_stable/lang/sl_si.php and elefant-elefant_2_0_2_stable/lang/sl_si.php are identical
Files elefant-elefant_2_0_1_stable/lang/uk.php and elefant-elefant_2_0_2_stable/lang/uk.php are identical
Files elefant-elefant_2_0_1_stable/lang/zh.php and elefant-elefant_2_0_2_stable/lang/zh.php are identical
Files elefant-elefant_2_0_1_stable/layouts/admin.html and elefant-elefant_2_0_2_stable/layouts/admin.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/body.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/body.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/footer.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/footer.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/head.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/head.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/index.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/index.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/navbar.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/navbar.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/single.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/single.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/inc/userbar.html and elefant-elefant_2_0_2_stable/layouts/minimal/inc/userbar.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/minimal.html and elefant-elefant_2_0_2_stable/layouts/minimal/minimal.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/pix/contact.jpg and elefant-elefant_2_0_2_stable/layouts/minimal/pix/contact.jpg are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/pix/homepage.jpg and elefant-elefant_2_0_2_stable/layouts/minimal/pix/homepage.jpg are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/pix/logo.png and elefant-elefant_2_0_2_stable/layouts/minimal/pix/logo.png are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/single column.html and elefant-elefant_2_0_2_stable/layouts/minimal/single column.html are identical
Files elefant-elefant_2_0_1_stable/layouts/minimal/style.css and elefant-elefant_2_0_2_stable/layouts/minimal/style.css are identical
Files elefant-elefant_2_0_1_stable/lib/Acl.php and elefant-elefant_2_0_2_stable/lib/Acl.php are identical
Files elefant-elefant_2_0_1_stable/lib/AppTest.php and elefant-elefant_2_0_2_stable/lib/AppTest.php are identical
Files elefant-elefant_2_0_1_stable/lib/Appconf.php and elefant-elefant_2_0_2_stable/lib/Appconf.php are identical
Files elefant-elefant_2_0_1_stable/lib/Autoloader.php and elefant-elefant_2_0_2_stable/lib/Autoloader.php are identical
Files elefant-elefant_2_0_1_stable/lib/CRUD.php and elefant-elefant_2_0_2_stable/lib/CRUD.php are identical
Files elefant-elefant_2_0_1_stable/lib/Cache.php and elefant-elefant_2_0_2_stable/lib/Cache.php are identical
diff -urBNs elefant-elefant_2_0_1_stable/lib/Controller.php elefant-elefant_2_0_2_stable/lib/Controller.php
--- elefant-elefant_2_0_1_stable/lib/Controller.php	2017-05-17 13:08:00.000000000 -0500
+++ elefant-elefant_2_0_2_stable/lib/Controller.php	2017-10-16 12:12:51.000000000 -0500
@@ -731,13 +731,11 @@
 	 */
 	public function get_put_data () {
 		if ($this->put_data === null) {
-			$stdin = fopen ('php://input', 'r');
-			$out = '';
-			while ($data = fread ($stdin, 1024)) {
-				$out .= $data;
+			if (count ($_FILES) === 0) {
+				$this->put_data = file_get_contents ('php://input');
+			} else {
+				$this->put_data = http_build_query ($_POST);
 			}
-			fclose ($stdin);
-			$this->put_data = $out;
 		}
 		return $this->put_data;
 	}
@@ -746,10 +744,7 @@
 	 * Get the raw POST data.
 	 */
 	public function get_raw_post_data () {
-		if (! isset ($GLOBALS['HTTP_RAW_POST_DATA'])) {
-			$GLOBALS['HTTP_RAW_POST_DATA'] = http_build_query ($_POST);
-		}
-		return $GLOBALS['HTTP_RAW_POST_DATA'];
+		return $this->get_put_data ();
 	}
 
 	/**
Files elefant-elefant_2_0_1_stable/lib/DB.php and elefant-elefant_2_0_2_stable/lib/DB.php are identical
Files elefant-elefant_2_0_1_stable/lib/Debugger.php and elefant-elefant_2_0_2_stable/lib/Debugger.php are identical
Files elefant-elefant_2_0_1_stable/lib/ExtendedModel.php and elefant-elefant_2_0_2_stable/lib/ExtendedModel.php are identical
Files elefant-elefant_2_0_1_stable/lib/Form.php and elefant-elefant_2_0_2_stable/lib/Form.php are identical
Files elefant-elefant_2_0_1_stable/lib/FrontController.php and elefant-elefant_2_0_2_stable/lib/FrontController.php are identical
Files elefant-elefant_2_0_1_stable/lib/Functions.php and elefant-elefant_2_0_2_stable/lib/Functions.php are identical
Files elefant-elefant_2_0_1_stable/lib/I18n.php and elefant-elefant_2_0_2_stable/lib/I18n.php are identical
Files elefant-elefant_2_0_1_stable/lib/Ini.php and elefant-elefant_2_0_2_stable/lib/Ini.php are identical
Files elefant-elefant_2_0_1_stable/lib/Mailer.php and elefant-elefant_2_0_2_stable/lib/Mailer.php are identical
Files elefant-elefant_2_0_1_stable/lib/MemcacheAPC.php and elefant-elefant_2_0_2_stable/lib/MemcacheAPC.php are identical
Files elefant-elefant_2_0_1_stable/lib/MemcacheExt.php and elefant-elefant_2_0_2_stable/lib/MemcacheExt.php are identical
Files elefant-elefant_2_0_1_stable/lib/MemcacheRedis.php and elefant-elefant_2_0_2_stable/lib/MemcacheRedis.php are identical
Files elefant-elefant_2_0_1_stable/lib/MemcacheXCache.php and elefant-elefant_2_0_2_stable/lib/MemcacheXCache.php are identical
Files elefant-elefant_2_0_1_stable/lib/Model.php and elefant-elefant_2_0_2_stable/lib/Model.php are identical
Files elefant-elefant_2_0_1_stable/lib/MongoManager.php and elefant-elefant_2_0_2_stable/lib/MongoManager.php are identical
Files elefant-elefant_2_0_1_stable/lib/MongoModel.php and elefant-elefant_2_0_2_stable/lib/MongoModel.php are identical
Files elefant-elefant_2_0_1_stable/lib/Page.php and elefant-elefant_2_0_2_stable/lib/Page.php are identical
Files elefant-elefant_2_0_1_stable/lib/Product.php and elefant-elefant_2_0_2_stable/lib/Product.php are identical
Files elefant-elefant_2_0_1_stable/lib/Restful.php and elefant-elefant_2_0_2_stable/lib/Restful.php are identical
Files elefant-elefant_2_0_1_stable/lib/Template.php and elefant-elefant_2_0_2_stable/lib/Template.php are identical
Files elefant-elefant_2_0_1_stable/lib/Validator.php and elefant-elefant_2_0_2_stable/lib/Validator.php are identical
Files elefant-elefant_2_0_1_stable/lib/View.php and elefant-elefant_2_0_2_stable/lib/View.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/.htaccess and elefant-elefant_2_0_2_stable/lib/vendor/.htaccess are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/ActiveResource/ActiveResource.php and elefant-elefant_2_0_2_stable/lib/vendor/ActiveResource/ActiveResource.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/ActiveResource.php and elefant-elefant_2_0_2_stable/lib/vendor/ActiveResource.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Analog.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Analog.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Amon.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Amon.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Buffer/Destructor.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Buffer/Destructor.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Buffer.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Buffer.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/ChromeLogger.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/ChromeLogger.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/File.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/File.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/FirePHP.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/FirePHP.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/GELF.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/GELF.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/LevelBuffer.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/LevelBuffer.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Mail.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Mail.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Mongo.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Mongo.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Multi.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Multi.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Null.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Null.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Post.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Post.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Stderr.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Stderr.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Syslog.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Syslog.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Threshold.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Threshold.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Handler/Variable.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Handler/Variable.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog/Logger.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog/Logger.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Analog.php and elefant-elefant_2_0_2_stable/lib/vendor/Analog.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Bench.php and elefant-elefant_2_0_2_stable/lib/vendor/Bench.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/ChromePhp.php and elefant-elefant_2_0_2_stable/lib/vendor/ChromePhp.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Pimple.php and elefant-elefant_2_0_2_stable/lib/vendor/Pimple.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/SessionHandlerCookie.php and elefant-elefant_2_0_2_stable/lib/vendor/SessionHandlerCookie.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/URLify.php and elefant-elefant_2_0_2_stable/lib/vendor/URLify.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Loader.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Loader.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Message/File.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Message/File.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Message/Interface.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Message/Interface.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Message.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Message.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Part/File.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Part/File.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Part/Interface.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Part/Interface.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Part.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Part.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Abstract.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Abstract.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Imap.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Imap.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Pop3.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Pop3.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Crammd5.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Crammd5.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Login.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Login.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Plain.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Plain.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Protocol/Smtp.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Protocol/Smtp.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Abstract.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Abstract.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Folder/Interface.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Folder/Interface.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Folder/Maildir.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Folder/Maildir.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Folder/Mbox.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Folder/Mbox.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Folder.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Folder.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Imap.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Imap.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Maildir.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Maildir.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Mbox.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Mbox.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Pop3.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Pop3.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Writable/Interface.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Writable/Interface.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage/Writable/Maildir.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage/Writable/Maildir.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Storage.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Storage.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Transport/Abstract.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Transport/Abstract.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Transport/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Transport/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Transport/File.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Transport/File.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Transport/Sendmail.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Transport/Sendmail.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail/Transport/Smtp.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail/Transport/Smtp.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mail.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mail.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mime/Decode.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mime/Decode.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mime/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mime/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mime/Message.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mime/Message.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mime/Part.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mime/Part.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Mime.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Mime.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Registry.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Registry.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Abstract.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Abstract.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Alnum.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Alnum.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Alpha.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Alpha.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/AdapterAbstract.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/AdapterAbstract.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/AdapterInterface.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/AdapterInterface.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Code25.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Code25.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Code25interleaved.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Code25interleaved.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Code39.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Code39.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Code39ext.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Code39ext.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Code93.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Code93.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Code93ext.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Code93ext.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean12.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean12.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean13.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean13.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean14.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean14.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean18.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean18.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean2.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean2.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean5.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean5.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Ean8.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Ean8.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Gtin12.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Gtin12.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Gtin13.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Gtin13.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Gtin14.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Gtin14.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Identcode.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Identcode.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Intelligentmail.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Intelligentmail.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Issn.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Issn.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Itf14.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Itf14.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Leitcode.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Leitcode.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Planet.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Planet.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Postnet.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Postnet.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Royalmail.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Royalmail.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Sscc.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Sscc.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Upca.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Upca.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode/Upce.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode/Upce.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Barcode.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Barcode.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Between.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Between.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Callback.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Callback.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Ccnum.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Ccnum.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/CreditCard.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/CreditCard.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Date.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Date.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Db/Abstract.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Db/Abstract.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Db/NoRecordExists.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Db/NoRecordExists.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Db/RecordExists.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Db/RecordExists.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Digits.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Digits.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/EmailAddress.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/EmailAddress.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Exception.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Exception.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Count.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Count.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Crc32.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Crc32.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/ExcludeExtension.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/ExcludeExtension.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/ExcludeMimeType.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/ExcludeMimeType.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Exists.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Exists.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Extension.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Extension.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/FilesSize.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/FilesSize.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Hash.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Hash.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/ImageSize.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/ImageSize.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/IsCompressed.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/IsCompressed.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/IsImage.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/IsImage.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Md5.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Md5.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/MimeType.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/MimeType.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/NotExists.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/NotExists.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Sha1.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Sha1.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Size.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Size.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/Upload.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/Upload.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/File/WordCount.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/File/WordCount.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Float.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Float.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/GreaterThan.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/GreaterThan.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Hex.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Hex.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Hostname/Biz.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Hostname/Biz.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Hostname/Cn.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Hostname/Cn.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Hostname/Com.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Hostname/Com.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Hostname/Jp.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Hostname/Jp.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Hostname.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Hostname.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Iban.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Iban.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Identical.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Identical.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/InArray.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/InArray.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Int.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Int.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Interface.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Interface.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Ip.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Ip.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Isbn.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Isbn.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/LessThan.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/LessThan.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/NotEmpty.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/NotEmpty.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/PostCode.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/PostCode.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Regex.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Regex.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Sitemap/Changefreq.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Sitemap/Changefreq.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Sitemap/Lastmod.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Sitemap/Lastmod.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Sitemap/Loc.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Sitemap/Loc.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/Sitemap/Priority.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/Sitemap/Priority.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate/StringLength.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate/StringLength.php are identical
Files elefant-elefant_2_0_1_stable/lib/vendor/Zend/Validate.php and elefant-elefant_2_0_2_stable/lib/vendor/Zend/Validate.php are identical
Files elefant-elefant_2_0_1_stable/nginx.conf and elefant-elefant_2_0_2_stable/nginx.conf are identical
Files elefant-elefant_2_0_1_stable/phpunit.xml.dist and elefant-elefant_2_0_2_stable/phpunit.xml.dist are identical
Files elefant-elefant_2_0_1_stable/robots.txt and elefant-elefant_2_0_2_stable/robots.txt are identical
Files elefant-elefant_2_0_1_stable/tests/.htaccess and elefant-elefant_2_0_2_stable/tests/.htaccess are identical
Files elefant-elefant_2_0_1_stable/tests/AclTest.php and elefant-elefant_2_0_2_stable/tests/AclTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/ActiveResourceTest.php and elefant-elefant_2_0_2_stable/tests/ActiveResourceTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/AdminAppTest.php and elefant-elefant_2_0_2_stable/tests/AdminAppTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/AdminFunctionsTest.php and elefant-elefant_2_0_2_stable/tests/AdminFunctionsTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/AnalogTest.php and elefant-elefant_2_0_2_stable/tests/AnalogTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/AppconfTest.php and elefant-elefant_2_0_2_stable/tests/AppconfTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/BlogAppTest.php and elefant-elefant_2_0_2_stable/tests/BlogAppTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/CacheTest.php and elefant-elefant_2_0_2_stable/tests/CacheTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/ControllerTest.php and elefant-elefant_2_0_2_stable/tests/ControllerTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/CsvParserTest.php and elefant-elefant_2_0_2_stable/tests/CsvParserTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/DBTest.php and elefant-elefant_2_0_2_stable/tests/DBTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/DiffTest.php and elefant-elefant_2_0_2_stable/tests/DiffTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/ExtendedModelTest.php and elefant-elefant_2_0_2_stable/tests/ExtendedModelTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/FileManagerTest.php and elefant-elefant_2_0_2_stable/tests/FileManagerTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/FormTest.php and elefant-elefant_2_0_2_stable/tests/FormTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/FunctionsTest.php and elefant-elefant_2_0_2_stable/tests/FunctionsTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/I18nTest.php and elefant-elefant_2_0_2_stable/tests/I18nTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/IniTest.php and elefant-elefant_2_0_2_stable/tests/IniTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/LinkTest.php and elefant-elefant_2_0_2_stable/tests/LinkTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/LockTest.php and elefant-elefant_2_0_2_stable/tests/LockTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/ModelTest.php and elefant-elefant_2_0_2_stable/tests/ModelTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/MongoModelTest.php and elefant-elefant_2_0_2_stable/tests/MongoModelTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/NavigationAppTest.php and elefant-elefant_2_0_2_stable/tests/NavigationAppTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/NavigationTest.php and elefant-elefant_2_0_2_stable/tests/NavigationTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/PageTest.php and elefant-elefant_2_0_2_stable/tests/PageTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/RestfulTest.php and elefant-elefant_2_0_2_stable/tests/RestfulTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/TemplateTest.php and elefant-elefant_2_0_2_stable/tests/TemplateTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/TreeTest.php and elefant-elefant_2_0_2_stable/tests/TreeTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/URLifyTest.php and elefant-elefant_2_0_2_stable/tests/URLifyTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/UserTest.php and elefant-elefant_2_0_2_stable/tests/UserTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/ValidatorTest.php and elefant-elefant_2_0_2_stable/tests/ValidatorTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/VersionsTest.php and elefant-elefant_2_0_2_stable/tests/VersionsTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/ViewTest.php and elefant-elefant_2_0_2_stable/tests/ViewTest.php are identical
Files elefant-elefant_2_0_1_stable/tests/bootstrap.php and elefant-elefant_2_0_2_stable/tests/bootstrap.php are identical
Files elefant-elefant_2_0_1_stable/tests/travis_conf.ini and elefant-elefant_2_0_2_stable/tests/travis_conf.ini are identical
Files elefant-elefant_2_0_1_stable/tests/zombie/admin-login-failure.coffee and elefant-elefant_2_0_2_stable/tests/zombie/admin-login-failure.coffee are identical
Files elefant-elefant_2_0_1_stable/tests/zombie/admin-login-failure.js and elefant-elefant_2_0_2_stable/tests/zombie/admin-login-failure.js are identical
Files elefant-elefant_2_0_1_stable/tests/zombie/admin-login-success.coffee and elefant-elefant_2_0_2_stable/tests/zombie/admin-login-success.coffee are identical
Files elefant-elefant_2_0_1_stable/tests/zombie/admin-login-success.js and elefant-elefant_2_0_2_stable/tests/zombie/admin-login-success.js are identical
Files elefant-elefant_2_0_1_stable/tests/zombie/homepage.coffee and elefant-elefant_2_0_2_stable/tests/zombie/homepage.coffee are identical
Files elefant-elefant_2_0_1_stable/tests/zombie/homepage.js and elefant-elefant_2_0_2_stable/tests/zombie/homepage.js are identical
