Files elefant-elefant_1_3_10_beta/.gitattributes and elefant-elefant_1_3_11_rc/.gitattributes are identical
Files elefant-elefant_1_3_10_beta/.gitignore and elefant-elefant_1_3_11_rc/.gitignore are identical
Files elefant-elefant_1_3_10_beta/.htaccess and elefant-elefant_1_3_11_rc/.htaccess are identical
diff -urBNs elefant-elefant_1_3_10_beta/.travis.yml elefant-elefant_1_3_11_rc/.travis.yml
--- elefant-elefant_1_3_10_beta/.travis.yml	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/.travis.yml	2015-09-05 21:13:59.000000000 -0500
@@ -4,9 +4,12 @@
   - 5.4
   - 5.5
   - 5.6
+  - 7.0
   - hhvm
 services: mongodb
-script: phpunit
+install:
+  - composer require phpunit/phpunit-story:dev-master
+script: phpunit --coverage-text --verbose
 branches:
   only:
     - master
@@ -17,3 +20,4 @@
     on_success: change  # options: [always|never|change] default: always
     on_failure: always  # options: [always|never|change] default: always
     on_start: false     # default: false
+sudo: false
Files elefant-elefant_1_3_10_beta/LICENSE and elefant-elefant_1_3_11_rc/LICENSE are identical
diff -urBNs elefant-elefant_1_3_10_beta/README.md elefant-elefant_1_3_11_rc/README.md
--- elefant-elefant_1_3_10_beta/README.md	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/README.md	2015-09-05 21:13:59.000000000 -0500
@@ -1,9 +1,11 @@
 # Elefant CMS
 
-[Elefant](http://www.elefantcms.com/) is a refreshingly simple PHP content management
+[Elefant](https://www.elefantcms.com/) is a refreshingly simple PHP content management
 system and web framework. Elefant is a fast, lean tool for building everything from
 simple websites to complete web applications.
 
+[![Gitter](https://badges.gitter.im/Join Chat.svg)](https://gitter.im/jbroadway/elefant?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
+
 <a href='http://www.pledgie.com/campaigns/16594'><img alt='Click here to lend your support to: Elefant CMS and make a donation at www.pledgie.com !' src='http://www.pledgie.com/campaigns/16594.png?skin_name=chrome' border='0' /></a>
 
 ## Installation help & documentation
@@ -11,7 +13,7 @@
 Elefant has extensive documentation including installation instructions, user manual,
 designer guides, and developer tutorials here:
 
-* http://www.elefantcms.com/documentation
+* http://www.elefantcms.com/docs
 
 You can also find help on our community forum here:
 
@@ -26,17 +28,17 @@
 
 **Dead simple, concise template tags**
 
-[Familiar syntax](http://www.elefantcms.com/wiki/Templates) to other template
+[Familiar syntax](https://www.elefantcms.com/docs/2.0/designers/template-language) to other template
 languages, with some added conveniences for dynamic embeds and internationalization.
 
 **Clean, easy to use site editor for your users**
 
-Elefant comes out of the box with a [full-featured CMS](http://www.elefantcms.com/wiki/The-page-editor)
-for your users. You can even [white label it](http://www.elefantcms.com/wiki/White-labelling-the-CMS).
+Elefant comes out of the box with a [full-featured CMS](https://www.elefantcms.com/docs/2.0/user-manual)
+for your users. You can even [white label it](https://www.elefantcms.com/docs/2.0/designers/white-labelling-the-cms).
 
 **Syntax highlighted template and CSS editor**
 
-Sophisticated [in-browser editing](http://www.elefantcms.com/wiki/Setting-up-your-custom-designs)
+Sophisticated [in-browser editing](https://www.elefantcms.com/docs/2.0/designers)
 with highlights and references at your finger tips.
 
 **Live preview while editing templates and CSS**
@@ -57,19 +59,21 @@
 
 **Extensively documented**
 
-Including full [API reference](http://api.elefantcms.com/),
-[cheat sheets](http://www.elefantcms.com/wiki/Cheat-sheet),
-[tutorials, and much more](https://github.com/jbroadway/elefant/wiki/Developers).
+Including full [API reference](https://www.elefantcms.com/visor),
+[user manual](https://www.elefantcms.com/docs/2.0/user-manual),
+[tutorials, and much more](https://www.elefantcms.com/docs/2.0/developers).
 
 **Strong security by default**
 
-[Flexible input validation](http://www.elefantcms.com/wiki/Forms-and-input-validation)
+[Flexible form building](https://www.elefantcms.com/docs/2.0/developers/form-handling),
+[input validation](https://www.elefantcms.com/docs/2.0/developers/input-validation),
 and automatic prevention of XSS, SQL injection, CSRF, and other types of attacks.
 
 **Very fast and low memory**
 
-Elefant uses [less memory per request](http://www.elefantcms.com/wiki/Performance)
-than any of the major frameworks, so you can serve more visitors with the same resources.
+Elefant uses less memory than any of the major frameworks, so you can serve more visitors with the same resources.
+Benchmarks: [MVC layer](https://github.com/jbroadway/phpmark-elefant/blob/master/php-framework-benchmark-results.md),
+[database access](https://github.com/jbroadway/php-dbal-bench), and [template rendering](https://github.com/jbroadway/template-bench).
 
 **Solid debugging tools**
 
@@ -78,13 +82,13 @@
 
 **Minimalist HMVC/Model2 architecture**
 
-Elefant takes a [unique but proven approach](http://www.elefantcms.com/wiki/Elefant-architecture)
+Elefant takes a [unique but proven approach](https://www.elefantcms.com/docs/2.0/developers/request-response-cycle)
 that helps minimize boilerplate without sacrificing code organization as your project grows.
 
 **Shared apps to save you time**
 
 From blogs to user management, events to search, Elefant saves you time not reinventing
-the wheel with [high quality shared apps](http://www.elefantcms.com/shared-apps).
+the wheel with [high quality shared apps](https://www.elefantcms.com/listings).
 
 **Thoroughly unit-tested**
 
@@ -94,7 +98,7 @@
 
 **Internationalization**
 
-Elefant apps are automatically [i18n aware](http://www.elefantcms.com/wiki/Internationalization),
+Elefant apps are automatically [i18n aware](https://www.elefantcms.com/docs/2.0/administration/multilingual-setup),
 with built-in multilingual capabilities and locale awareness.
 
 ## More developer goodness
@@ -103,28 +107,26 @@
 development again. As such, Elefant takes into consideration all the little details
 to help you work faster and better:
 
-* Really simple, [automatic URL routing](http://www.elefantcms.com/wiki/Page-routing-and-handler-basics) w/ friendly URLs
-* [Minimal but secure and fast ORM](http://www.elefantcms.com/wiki/Database-API-and-models) (based on PDO)
+* Really simple, [automatic URL routing](https://www.elefantcms.com/docs/2.0/developers/mapping-your-routes) w/ friendly URLs
+* [Minimal but secure and fast ORM](https://www.elefantcms.com/docs/2.0/developers/modelling-your-data) (based on PDO)
 * Output filtering is turned *on by default*
-* Tight [memcache integration](http://www.elefantcms.com/wiki/Memcache)
+* Tight [cache integration](https://www.elefantcms.com/docs/2.0/developers/caching) (supports APC/APCu, filesystem, Memcache, Redis, and XCache)
 * Matching server- and client-side input validation
-* Dead-simple [form handling](http://www.elefantcms.com/wiki/Forms-and-input-validation)
-* Customizable [user authentication](http://www.elefantcms.com/wiki/Custom-user-authentication)
-* [CLI tool](http://www.elefantcms.com/wiki/Command-line-usage) for common tasks
+* Dead-simple [form handling](https://www.elefantcms.com/docs/2.0/developers/form-handling)
+* Customizable [user authentication](https://www.elefantcms.com/docs/2.0/developers/users-and-access-control)
+* [CLI tool](https://www.elefantcms.com/docs/2.0/developers/writing-command-line-scripts) for common tasks
 * As little scaffolding as possible
 * Gzip output compression
-* [Assetic](http://github.com/jbroadway/assetic) integration
+* [Assetic](https://github.com/jbroadway/assetic) integration
 
 ## Try it out
 
 [Download the latest release](http://www.elefantcms.com/download) or try the
 [online demo](http://www.elefantcms.com/demo).
 
-* [Installation instructions](http://www.elefantcms.com/wiki/Getting-started)
-* [Installing on PHP Fog](http://www.elefantcms.com/wiki/Installing-Elefant-on-PHP-Fog)
-* [Installing on DotCloud](http://www.elefantcms.com/wiki/Installing-Elefant-on-DotCloud)
-* [Requirements and compatible hosts](http://www.elefantcms.com/wiki/Requirements)
-* [Support forum](http://www.elefantcms.com/forum/) and [IRC channel](http://www.elefantcms.com/elefant-irc)
+* [Installation instructions](https://www.elefantcms.com/docs/2.0/getting-started)
+* [Requirements](https://www.elefantcms.com/docs/2.0/getting-started/requirements)
+* [Support forum](http://www.elefantcms.com/community) and [Gitter channel](https://gitter.im/jbroadway/elefant)
 
 ## FAQ
 
@@ -135,5 +137,3 @@
 **Q. Isn't Elefant a bit of an oxymoron for a slim framework?**
 
 A. Why, yes. Yes it is.
-
-[![githalytics.com alpha](https://cruel-carlota.pagodabox.com/6328ab92375adc7e82f36ed5f290ef1c "githalytics.com")](http://githalytics.com/jbroadway/elefant)
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/.htaccess and elefant-elefant_1_3_11_rc/apps/.htaccess are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/conf/acl.php elefant-elefant_1_3_11_rc/apps/admin/conf/acl.php
--- elefant-elefant_1_3_10_beta/apps/admin/conf/acl.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/conf/acl.php	2015-09-05 21:13:59.000000000 -0500
@@ -6,6 +6,7 @@
 admin/add = "Create new content"
 admin/edit = "Update existing content"
 admin/delete = "Delete content"
+admin/toolbar = "Modify the admin toolbar"
 settings = "Modify site settings"
 
 ; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/conf/config.php elefant-elefant_1_3_11_rc/apps/admin/conf/config.php
--- elefant-elefant_1_3_10_beta/apps/admin/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,22 @@
 ; <?php /*
 
+[Site Settings]
+
+; The name of your website.
+site_name = Off
+
+; The domain name of your website.
+site_domain = Off
+
+; Default outbound email address.
+email_from = Off
+
+; Default timezone for date functions.
+timezone = GMT
+
+; Google Analytics ID
+google_analytics_id = Off
+
 [General]
 
 ; Set this to the location you want to redirect admins to after
@@ -9,6 +26,9 @@
 ; Whether to show "All Pages" in the tools menu.
 show_all_pages = On
 
+; Name of the column where extra apps are placed under.
+autofill_column = "Extras"
+
 [Scripts]
 
 ; The place to load jQuery from, either 'local', 'google' which uses
@@ -17,8 +37,7 @@
 
 [Admin]
 
-handler = admin/versions
-name = Versions
+name = Admin
 sitemap = "Webpage::sitemap"
 search = "Webpage::search"
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/conf/embed.php elefant-elefant_1_3_11_rc/apps/admin/conf/embed.php
--- elefant-elefant_1_3_10_beta/apps/admin/conf/embed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/conf/embed.php	2015-09-05 21:13:59.000000000 -0500
@@ -9,7 +9,7 @@
 to[type] = text
 to[initial] = "http://"
 to[not empty] = 1
-to[regex] = "|^(http:/)?/.+$|"
+to[regex] = "/^(https?:\/)?\/.+$/"
 to[message] = Please enter a valid URL.
 
 code[label] = Status
@@ -19,13 +19,14 @@
 code[callback] = "admin_status_codes"
 
 [admin/conditionalforward]
+
 label ="Pages: Conditional Redirect"
-icon = /apps/admin/css/icon-conditionalforward.png
+icon = external-link
 
 to[label] = Link
 to[type] = text
 to[initial] = "http://"
-to[regex] = "|^(http:/)?/.+$|"
+to[regex] = "/^(https?:\/)?\/.+$/"
 to[message] = Please enter a valid URL.
 
 user_type[label] = User role
@@ -36,7 +37,7 @@
 [admin/html]
 
 label = "Embed HTML Code"
-icon = /apps/admin/css/icon-html.png
+icon = code
 
 id[label] = HTML
 id[type] = textarea
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/conf/tools.php elefant-elefant_1_3_11_rc/apps/admin/conf/tools.php
--- elefant-elefant_1_3_10_beta/apps/admin/conf/tools.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/conf/tools.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,7 @@
+; <?php /*
+
+admin/pages = Web Pages
+admin/versions = Versions
+admin/settings = Site Settings
+
+; */ ?>
Files elefant-elefant_1_3_10_beta/apps/admin/conf/update/1.3.10_users_mysql.sql and elefant-elefant_1_3_11_rc/apps/admin/conf/update/1.3.10_users_mysql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/admin/conf/update/1.3.10_users_pgsql.sql and elefant-elefant_1_3_11_rc/apps/admin/conf/update/1.3.10_users_pgsql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/admin/conf/update/1.3.10_users_sqlite.sql and elefant-elefant_1_3_11_rc/apps/admin/conf/update/1.3.10_users_sqlite.sql are identical
Files elefant-elefant_1_3_10_beta/apps/admin/conf/update/extended_fields_mysql.sql and elefant-elefant_1_3_11_rc/apps/admin/conf/update/extended_fields_mysql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/admin/conf/update/extended_fields_pgsql.sql and elefant-elefant_1_3_11_rc/apps/admin/conf/update/extended_fields_pgsql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/admin/conf/update/extended_fields_sqlite.sql and elefant-elefant_1_3_11_rc/apps/admin/conf/update/extended_fields_sqlite.sql are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/960.css and elefant-elefant_1_3_11_rc/apps/admin/css/960.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/add.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/add.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/arrow-down.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/arrow-down.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/arrow-right.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/arrow-right.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/blank.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/blank.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/delete.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/delete.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/drag_drop_up_down.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/drag_drop_up_down.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/dynamic-icon.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/dynamic-icon.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/edit.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/edit.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/editable-photo.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/editable-photo.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/editable-sprite-dark.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/editable-sprite-dark.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/editable-sprite-violett.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/editable-sprite-violett.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/editable-sprite.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/editable-sprite.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/elefant_logo.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/elefant_logo.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/elefant_logo_login.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/elefant_logo_login.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/file.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/file.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/folder.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/folder.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/lock.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/lock.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/pipe.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/pipe.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/spacer.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/spacer.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/tools-arrow-hover.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/tools-arrow-hover.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/tools-arrow.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/tools-arrow.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/tooltip-top.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/tooltip-top.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/undo-icon.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/undo-icon.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/user_profile.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/user_profile.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/admin/versions.png and elefant-elefant_1_3_11_rc/apps/admin/css/admin/versions.png are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/admin.css elefant-elefant_1_3_11_rc/apps/admin/css/admin.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/admin.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/admin.css	2015-09-05 21:13:59.000000000 -0500
@@ -292,6 +292,10 @@
 	white-space: nowrap;
 }
 
+.embedded * {
+	display: none !important;
+}
+
 /**
  * Form inputs
  */
@@ -341,6 +345,70 @@
     cursor: pointer;
 }
 
+/* See blog post edit form [Draft | Published | Scheduled] for a working example */
+.toggle a {
+	-webkit-appearance: none;
+	-moz-appearance: none;
+	appearance: none;
+	margin: 0;
+    font-size: 12px;
+    background: #e5e5e5;
+    background: -webkit-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    background: -moz-linear-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    border: 1px solid #aaa;
+    border-radius: 0px;
+    -webkit-border-radius: 0px;
+    -moz-border-radius: 0px;
+    color: #333;
+    padding: 3px 15px 3px 15px;
+    text-shadow: 0 1px 0 #fff;
+    outline: none;
+    text-align: center;
+}
+
+.toggle a:hover {
+	color: #111;
+	border: 1px solid #777;
+    -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
+    -webkit-box-shadow:0 2px 5px rgba(0, 0, 0, 0.2);
+    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
+    cursor: pointer;
+    text-decoration: none;
+}
+
+.toggle a:first-child {
+    border-radius: 0px;
+	-webkit-border-top-left-radius: 4px;
+	-webkit-border-bottom-left-radius: 4px;
+	-moz-border-radius-topleft: 4px;
+	-moz-border-radius-bottomleft: 4px;
+	border-top-left-radius: 4px;
+	border-bottom-left-radius: 4px;
+	border-right: 0;
+}
+
+.toggle a:last-child {
+    border-radius: 0px;
+	-webkit-border-top-right-radius: 4px;
+	-webkit-border-bottom-right-radius: 4px;
+	-moz-border-radius-topright: 4px;
+	-moz-border-radius-bottomright: 4px;
+	border-top-right-radius: 4px;
+	border-bottom-right-radius: 4px;
+	border-left: 0;
+}
+
+.toggle a.toggle-active,
+.toggle a.toggle-active:hover {
+    background: #444;
+    -webkit-box-shadow: inset  0  8px 8px -8px #111;
+	-moz-box-shadow:    inset  0  8px 8px -8px #111;
+     box-shadow:        inset  0  8px 8px -8px #111;
+    text-shadow: none;
+	color: #eee;
+	border-color: #111;
+}
+
 /**
  * Dynamic Objects menu
  */
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/datewidget.css elefant-elefant_1_3_11_rc/apps/admin/css/datewidget.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/datewidget.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/datewidget.css	2015-09-05 21:13:59.000000000 -0500
@@ -4,3 +4,6 @@
 .ui-timepicker-div dl dt{ height: 25px; }
 .ui-timepicker-div dl dd{ margin: -25px 0 10px 65px; }
 .ui-timepicker-div td { font-size: 90%; }
+
+.ui-datepicker { z-index: 9999 !important; }
+.ui-timepicker { z-index: 9999 !important; }
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/css/debugger.css and elefant-elefant_1_3_11_rc/apps/admin/css/debugger.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/dynamicobjects.css and elefant-elefant_1_3_11_rc/apps/admin/css/dynamicobjects.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/editable.css and elefant-elefant_1_3_11_rc/apps/admin/css/editable.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/css/font-awesome.css and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/css/font-awesome.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/css/font-awesome.min.css and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/css/font-awesome.min.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/font/FontAwesome.otf and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/font/FontAwesome.otf are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.eot and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/font/fontawesome-webfont.eot are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.svg and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/font/fontawesome-webfont.svg are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.ttf and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/font/fontawesome-webfont.ttf are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/font/fontawesome-webfont.woff and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/font/fontawesome-webfont.woff are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/fonts/FontAwesome.otf and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/fonts/FontAwesome.otf are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/fonts/fontawesome-webfont.eot and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/fonts/fontawesome-webfont.eot are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/fonts/fontawesome-webfont.svg and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/fonts/fontawesome-webfont.svg are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/fonts/fontawesome-webfont.ttf and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/fonts/fontawesome-webfont.ttf are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/fonts/fontawesome-webfont.woff and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/fonts/fontawesome-webfont.woff are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/bordered-pulled.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/bordered-pulled.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/core.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/core.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/fixed-width.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/fixed-width.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/font-awesome.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/font-awesome.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/icons.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/icons.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/larger.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/larger.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/list.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/list.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/mixins.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/mixins.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/path.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/path.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/rotated-flipped.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/rotated-flipped.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/spinning.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/spinning.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/stacked.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/stacked.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/less/variables.less and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/less/variables.less are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_bordered-pulled.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_bordered-pulled.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_core.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_core.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_fixed-width.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_fixed-width.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_icons.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_icons.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_larger.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_larger.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_list.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_list.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_mixins.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_mixins.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_path.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_path.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_rotated-flipped.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_rotated-flipped.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_spinning.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_spinning.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_stacked.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_stacked.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/_variables.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/_variables.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/font-awesome/scss/font-awesome.scss and elefant-elefant_1_3_11_rc/apps/admin/css/font-awesome/scss/font-awesome.scss are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/icon-conditionalforward.png and elefant-elefant_1_3_11_rc/apps/admin/css/icon-conditionalforward.png are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/icon-html.png and elefant-elefant_1_3_11_rc/apps/admin/css/icon-html.png are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/jquery.grid.css elefant-elefant_1_3_11_rc/apps/admin/css/jquery.grid.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/jquery.grid.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/jquery.grid.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,402 @@
+/**
+ * Move page edit buttons to top right below toolbar.
+ */
+p.admin-options-page {
+	position: fixed;
+	top: 50px;
+	right: 20px;
+}
+
+/**
+ * Center notifications below toolbar.
+ */
+div.jGrowl.top-right {
+	position: fixed;
+	left: 50%;
+	margin-left: -120px;
+}
+
+div.jGrowl div.jGrowl-notification {
+	min-height: 0px !important;
+}
+
+div.jGrowl div.jGrowl-notification, div.jGrowl div.jGrowl-closer {
+	margin-top: 10px !important;
+	-webkit-box-shadow: none !important;
+	-moz-box-shadow: none !important;
+	box-shadow: none !important;
+	-webkit-border-radius: 0 !important;
+	-moz-border-radius: 0 !important;
+	border-radius: 0 !important;
+	background-color: #f5f5f5 !important;
+}
+
+/**
+ * Grid editing styles.
+ */
+
+.e-grid-row {
+	padding-top: 0.5em;
+	padding-bottom: 0.5em;
+	position: relative;
+}
+
+	.e-grid-row-delete-button,
+	.e-grid-row-edit-button {
+		position: absolute;
+		display: block;
+		text-align: center;
+		text-decoration: none;
+		top: 7px;
+		border: 1px solid #ccc;
+		background-color: #f5f5f5;
+		color: #333;
+		width: 30px;
+		height: 28px;
+		padding-top: 3px;
+	}
+	
+	.e-grid-row-delete-button {
+		border-left: 0px none;
+		left: -45px;
+	}
+	
+	.e-grid-row-edit-button {
+		border-right: 0px none;
+		left: -75px;
+	}
+	
+	.e-grid-row-delete-button:hover,
+	.e-grid-row-edit-button:hover {
+		color: #111;
+		background-color: #eee;
+		text-decoration: none;
+	}
+	
+	.e-grid-fixed .e-grid-row-delete-button {
+		left: 50px;
+	}
+	
+	.e-grid-fixed .e-grid-row-edit-button {
+		left: 20px;
+	}
+	
+	@media (max-width: 768px) {
+		.e-grid-row-delete-button {
+			left: 30px !important;
+		}
+		
+		.e-grid-row-edit-button {
+			left: 0px !important;
+		}
+	}
+	
+	@media (max-width: 480px) {
+		.e-grid-row-delete-button {
+			left: 30px !important;
+		}
+		
+		.e-grid-row-edit-button {
+			left: 0px !important;
+		}
+	}
+	
+	.is-preview .e-grid-row-delete-button,
+	.is-preview .e-grid-row-edit-button {
+		display: none;
+	}
+
+.e-grid-edit {
+	padding-top: 0.5em;
+	padding-bottom: 0.5em;
+	font-family: Helvetica, Arial, sans-serif;
+	font-size: 13px;
+	font-weight: normal;
+}
+
+.e-grid-edit .e-row,
+.e-grid-edit .e-row-variable {
+	padding: 15px;
+	background-color: rgba(255,255,255,0.5);
+	color: #000;
+}
+
+	.e-grid-edit a {
+		color: #93278f;
+		text-decoration: none;
+	}
+
+	.e-grid-edit a:hover {
+		color: #B347AF;
+	}
+
+.e-grid-col {
+	-webkit-box-sizing: border-box;
+	-moz-box-sizing: border-box;
+	box-sizing: border-box;
+	border: 1px dashed #d5d9dc;
+	padding: 3px;
+}
+
+.e-grid-col:hover {
+	border: 1px dashed #b5b9bc;
+	background-color: rgba(119,127,135,0.15);
+	cursor: pointer;
+}
+
+.e-grid-col-empty {
+	min-height: 160px;
+	text-align: center;
+	padding-top: 15px;
+}
+
+	.e-col-edit {
+		color: #93278f;
+		opacity: 0.4;
+	}
+
+	.e-grid-col:hover .e-col-edit {
+		opacity: 1;
+	}
+	
+	.e-grid-col:hover .e-col-edit:hover {
+		color: #B347AF;
+		cursor: pointer;
+	}
+
+.is-preview .e-grid-col {
+	border: inherit;
+}
+
+.is-preview .e-grid-col:hover {
+	cursor: default;
+	border: inherit;
+	background: none;
+}
+
+.is-preview .e-grid-add,
+.is-preview button.e-grid-button {
+	display: none !important;
+}
+
+.is-preview .e-col-edit,
+.is-preview .e-grid-col:hover .e-col-edit,
+.is-preview .e-grid-col:hover .e-col-edit:hover {
+	opacity: 0;
+}
+
+.e-grid-add-button {
+	margin-bottom: 1em;
+	margin-left: 0.5em;
+	margin-top: 0.5em;
+}
+
+.e-grid-right {
+	text-align: right;
+}
+
+.e-grid-relative {
+	position: relative;
+}
+
+.e-grid-clear {
+	clear: both;
+}
+
+.e-grid-toggle a {
+	-webkit-appearance: none;
+	-moz-appearance: none;
+	appearance: none;
+	margin: 0;
+    font-size: 12px;
+    background: #e5e5e5;
+    background: -webkit-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    background: -moz-linear-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    border: 1px solid #aaa;
+    border-radius: 4px;
+    -webkit-border-radius: 4px;
+    -moz-border-radius: 4px;
+    color: #333;
+    padding: 3px 15px 3px 15px;
+    text-shadow: 0 1px 0 #fff;
+    outline: none;
+    text-align: center;
+}
+
+.e-grid-toggle a:hover {
+	color: #111;
+	border: 1px solid #777;
+    -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
+    -webkit-box-shadow:0 2px 5px rgba(0, 0, 0, 0.2);
+    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
+    cursor: pointer;
+    text-decoration: none;
+}
+
+.e-grid-toggle a:first-child {
+    border-radius: 0px;
+	-webkit-border-top-left-radius: 4px;
+	-webkit-border-bottom-left-radius: 4px;
+	-moz-border-radius-topleft: 4px;
+	-moz-border-radius-bottomleft: 4px;
+	border-top-left-radius: 4px;
+	border-bottom-left-radius: 4px;
+	border-right: 0;
+}
+
+.e-grid-toggle a:last-child {
+    border-radius: 0px;
+	-webkit-border-top-right-radius: 4px;
+	-webkit-border-bottom-right-radius: 4px;
+	-moz-border-radius-topright: 4px;
+	-moz-border-radius-bottomright: 4px;
+	border-top-right-radius: 4px;
+	border-bottom-right-radius: 4px;
+	border-left: 0;
+}
+
+.e-grid-toggle a.e-toggle-active,
+.e-grid-toggle a.e-toggle-active:hover {
+    background: #444;
+    -webkit-box-shadow: inset  0  8px 8px -8px #111;
+	-moz-box-shadow:    inset  0  8px 8px -8px #111;
+     box-shadow:        inset  0  8px 8px -8px #111;
+    text-shadow: none;
+	color: #eee;
+	border-color: #111;
+}
+
+.e-grid-tabs {
+	position: relative;
+}
+
+.e-grid-tab {
+	display: none;
+	min-height: 162px;
+}
+
+.e-grid-tab:first-child {
+	display: block;
+}
+
+a.e-grid-link {
+	outline: none;
+}
+
+.e-grid-edit input[type=text] {
+	font-size: 12px;
+	border: 1px solid #999;
+    border-radius: 2px;
+    -webkit-border-radius: 2px;
+    -moz-border-radius: 2px;
+    padding: 2px 4px;
+    text-shadow: 0 1px 0 #fff;
+    outline: none;
+}
+
+span.e-grid-select {
+	display: inline-block;
+	position: relative;
+}
+
+span.e-grid-select select,
+span.e-grid-select select:focus,
+span.e-grid-select select:active {
+	-webkit-appearance: none;
+	-moz-appearance: none;
+	appearance: none;
+	margin: 0;
+    font-size: 12px;
+    background: #e5e5e5;
+    background: -webkit-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    background: -moz-linear-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    border: 1px solid #aaa;
+    border-radius: 4px;
+    -webkit-border-radius: 4px;
+    -moz-border-radius: 4px;
+    color: #333;
+    padding: 3px 22px 3px 10px;
+    text-shadow: 0 1px 0 #fff;
+}
+
+span.e-grid-select i.e-grid-select-arrow {
+	position: absolute;
+	top: 6px;
+	right: 7px;
+	z-index: 500;
+	pointer-events: none;
+	color: #333;
+}
+
+span.e-grid-select select:hover {
+	color: #111;
+	border: 1px solid #777;
+    -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
+    -webkit-box-shadow:0 2px 5px rgba(0, 0, 0, 0.2);
+    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
+    cursor: pointer;
+}
+
+button.e-grid-button {
+	display: inline-block;
+	margin: 0;
+    font-size: 12px;
+    background: #e5e5e5;
+    background: -webkit-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    background: -moz-linear-gradient(linear,0% 40%,0% 70%,from(#eee),to(#e5e5e5));
+    border: 1px solid #aaa;
+    border-radius: 4px;
+    -webkit-border-radius: 4px;
+    -moz-border-radius: 4px;
+    color: #333;
+    padding: 3px 10px;
+    text-shadow: 0 1px 0 #fff;
+    outline: none;
+}
+
+button.e-grid-button:hover {
+	color: #111;
+	border: 1px solid #777;
+    -moz-box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
+    -webkit-box-shadow:0 2px 5px rgba(0, 0, 0, 0.2);
+    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
+    cursor: pointer;
+}
+
+.e-grid-icon {
+	display: inline-block;
+	-webkit-box-sizing: border-box;
+	-moz-box-sizing: border-box;
+	box-sizing: border-box;
+	width: 100px;
+	height: 66px;
+	padding: 0;
+	margin: 0.4em;
+	background-image: url(/apps/admin/css/jquery.grid.icons.png);
+	background-repeat: no-repeat;
+	background-position: 0px 0px;
+	overflow: hidden;
+}
+
+.e-grid-icon:hover {
+	cursor: pointer;
+	background-position-y: -66px;
+}
+
+.e-grid-icon.e-grid-icon-highlighted,
+.e-grid-icon.e-grid-icon-highlighted:hover {
+	background-position-y: -132px;
+}
+
+.e-grid-icon-100            { background-position:    0px  0px; }
+.e-grid-icon-50-50          { background-position: -100px  0px; }
+.e-grid-icon-66-33          { background-position: -200px  0px; }
+.e-grid-icon-33-66          { background-position: -300px  0px; }
+.e-grid-icon-75-25          { background-position: -400px  0px; }
+.e-grid-icon-25-75          { background-position: -500px  0px; }
+.e-grid-icon-80-20          { background-position: -600px  0px; }
+.e-grid-icon-20-80          { background-position: -700px  0px; }
+.e-grid-icon-33-33-33       { background-position: -800px  0px; }
+.e-grid-icon-25-50-25       { background-position: -900px  0px; }
+.e-grid-icon-25-25-25-25    { background-position: -1000px 0px; }
+.e-grid-icon-20-20-20-20-20 { background-position: -1100px 0px; }
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/jquery.jgrowl.css elefant-elefant_1_3_11_rc/apps/admin/css/jquery.jgrowl.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/jquery.jgrowl.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/jquery.jgrowl.css	2015-09-05 21:13:59.000000000 -0500
@@ -1,137 +1,116 @@
-
-div.jGrowl {
-	padding: 			10px;
-	z-index: 			9999;
-	color: 				#222;
-	font-size: 			12px;
-}
-
-/** Special IE6 Style Positioning **/
-div.ie6 {
-	position: 			absolute;
-}
-
-div.ie6.top-right {
-	right: 				auto;
-	bottom: 			auto;
-	left: 				expression( ( 0 - jGrowl.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
-  	top: 				expression( ( 0 + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
-}
-
-div.ie6.top-left {
-	left: 				expression( ( 0 + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
-	top: 				expression( ( 0 + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
-}
-
-div.ie6.bottom-right {
-	left: 				expression( ( 0 - jGrowl.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
-	top: 				expression( ( 0 - jGrowl.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
-}
-
-div.ie6.bottom-left {
-	left: 				expression( ( 0 + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
-	top: 				expression( ( 0 - jGrowl.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
-}
-
-div.ie6.center {
-	left: 				expression( ( 0 + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + 'px' );
-	top: 				expression( ( 0 + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
-	width: 				100%;
-}
-
-/** Normal Style Positions **/
-div.jGrowl {
-	position:			absolute;
-}
-
-body > div.jGrowl {
-	position:			fixed;
-}
-
-div.jGrowl.top-left {
-	left: 				0px;
-	top: 				0px;
-}
-
-div.jGrowl.top-right {
-	right: 				0px;
-	top: 				30px;
-}
-
-div.jGrowl.bottom-left {
-	left: 				0px;
-	bottom:				0px;
-}
-
-div.jGrowl.bottom-right {
-	right: 				0px;
-	bottom: 			0px;
-}
-
-div.jGrowl.center {
-	top: 				0px;
-	width: 				50%;
-	left: 				25%;
-}
-
-/** Cross Browser Styling **/
-div.center div.jGrowl-notification, div.center div.jGrowl-closer {
-	margin-left: 		auto;
-	margin-right: 		auto;
-}
-
-div.jGrowl div.jGrowl-notification, div.jGrowl div.jGrowl-closer {
-	background-color: 		#e5e5e5;
-	opacity: 				.95;
-    -ms-filter: 			"progid:DXImageTransform.Microsoft.Alpha(Opacity=95)"; 
-    filter: 				progid:DXImageTransform.Microsoft.Alpha(Opacity=95); 
-	zoom: 					1;
-	width: 					235px;
-	padding: 				10px;
-	margin-top: 			5px;
-	margin-bottom: 			5px;
-	font-family: 			Tahoma, Arial, Helvetica, sans-serif;
-	font-size: 				1em;
-	text-align: 			left;
-	display: 				none;
-	border:					1px solid #bbb;
-	border-radius:			3px;
-	-moz-border-radius: 	3px;
-	-webkit-border-radius:	3px;
-	-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,.5);
-	-moz-box-shadow: 0px 1px 1px rgba(0,0,0,.5);
-	box-shadow: 0px 1px 1px rgba(0,0,0,.5);
-}
-
-div.jGrowl div.jGrowl-notification {
-	min-height: 			40px;
-}
-
-div.jGrowl div.jGrowl-notification div.jGrowl-header {
-	font-weight: 			bold;
-	font-size:				.85em;
-}
-
-div.jGrowl div.jGrowl-notification div.jGrowl-close {
-	z-index:				99;
-	float: 					right;
-	font-weight: 			bold;
-	font-size: 				1em;
-	cursor:					pointer;
-}
-
-div.jGrowl div.jGrowl-closer {
-	padding-top: 			4px;
-	padding-bottom: 		4px;
-	cursor: 				pointer;
-	font-size:				.9em;
-	font-weight: 			bold;
-	text-align: 			center;
+/**
+ * These styles have been customized as follows:
+ *
+ * - color: #222
+ * - background-color: #e5e5e5
+ * - top-right { top: 35px }
+ * - border-radius: 3px
+ * - border: 1px solid #bbb
+ * - box-shadow: 0px 1px 1px rgba(0,0,0,.5);
+ */
+.jGrowl {
+  z-index: 9999;
+  color: #222;
+  font-size: 12px;
+  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
+  position: fixed;
+}
+.jGrowl.top-left {
+  left: 0px;
+  top: 0px;
+}
+.jGrowl.top-right {
+  right: 0px;
+  top: 35px;
+}
+.jGrowl.bottom-left {
+  left: 0px;
+  bottom: 0px;
+}
+.jGrowl.bottom-right {
+  right: 0px;
+  bottom: 0px;
+}
+.jGrowl.center {
+  top: 0px;
+  width: 50%;
+  left: 25%;
+}
+.jGrowl.center .jGrowl-notification,
+.jGrowl.center .jGrowl-closer {
+  margin-left: auto;
+  margin-right: auto;
+}
+.jGrowl-notification {
+  background-color: #e5e5e5;
+  opacity: 0.95;
+  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(95);
+  filter: progid:DXImageTransform.Microsoft.Alpha(95);
+  zoom: 1;
+  width: 250px;
+  padding: 10px;
+  margin: 10px;
+  text-align: left;
+  display: none;
+  border: 1px solid #bbb;
+  border-radius: 3px;
+  -moz-border-radius: 3px;
+  -webkit-border-radius: 3px;
+  -webkit-box-shadow: 0px 1px 1px rgba(0,0,0,.5);
+  -moz-box-shadow: 0px 1px 1px rgba(0,0,0,.5);
+  box-shadow: 0px 1px 1px rgba(0,0,0,.5);
+  min-height: 40px;
+}
+.jGrowl-notification .ui-state-highlight,
+.jGrowl-notification .ui-widget-content .ui-state-highlight,
+.jGrowl-notification .ui-widget-header .ui-state-highlight {
+  border: 1px solid #000;
+  background: #000;
+  color: #fff;
+}
+.jGrowl-notification .jGrowl-header {
+  font-weight: bold;
+  font-size: .85em;
+}
+.jGrowl-notification .jGrowl-close {
+  background-color: transparent;
+  color: inherit;
+  border: none;
+  z-index: 99;
+  float: right;
+  font-weight: bold;
+  font-size: 1em;
+  cursor: pointer;
+}
+.jGrowl-closer {
+  background-color: #000000;
+  opacity: 0.9;
+  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(90);
+  filter: progid:DXImageTransform.Microsoft.Alpha(90);
+  zoom: 1;
+  width: 250px;
+  padding: 10px;
+  margin: 10px;
+  text-align: left;
+  display: none;
+  border-radius: 5px;
+  padding-top: 4px;
+  padding-bottom: 4px;
+  cursor: pointer;
+  font-size: .9em;
+  font-weight: bold;
+  text-align: center;
+}
+.jGrowl-closer .ui-state-highlight,
+.jGrowl-closer .ui-widget-content .ui-state-highlight,
+.jGrowl-closer .ui-widget-header .ui-state-highlight {
+  border: 1px solid #000;
+  background: #000;
+  color: #fff;
 }
-
 /** Hide jGrowl when printing **/
 @media print {
-	div.jGrowl {
-		display: 			none;
-	}
+  .jGrowl {
+    display: none;
+  }
 }
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/css/jquery.notifier.css and elefant-elefant_1_3_11_rc/apps/admin/css/jquery.notifier.css are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/minimal-grid.css elefant-elefant_1_3_11_rc/apps/admin/css/minimal-grid.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/minimal-grid.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/minimal-grid.css	2015-09-05 21:13:59.000000000 -0500
@@ -14,24 +14,26 @@
  *
  * Classes:
  *
- *     .e-row            A centered row of 992px that scales via media queries
- *     .e-row-variable   A row of variable width
- *     .e-row-equal      A variable width row of equal height columns
- *     .e-no-padding     Removes padding on an element
- *     .e-col-10         A column of 10%
- *     .e-col-20         A column of 20%
- *     .e-col-25         A column of 25%
- *     .e-col-30         A column of 30%
- *     .e-col-33         A column of 33%
- *     .e-col-40         A column of 40%
- *     .e-col-50         A column of 50%
- *     .e-col-60         A column of 60%
- *     .e-col-66         A column of 66%
- *     .e-col-70         A column of 70%
- *     .e-col-75         A column of 75%
- *     .e-col-80         A column of 80%
- *     .e-col-90         A column of 90%
- *     .e-col-100        A column of 100%
+ *     .e-row               A centered row of 992px that scales via media queries
+ *     .e-row-variable      A row of variable width
+ *     .e-row-equal         A variable width row of equal height columns
+ *     .e-no-padding        Removes padding on an element
+ *     .e-no-padding-left   Removes padding-left on an element
+ *     .e-no-padding-right  Removes padding-right on an element
+ *     .e-col-10            A column of 10%
+ *     .e-col-20            A column of 20%
+ *     .e-col-25            A column of 25%
+ *     .e-col-30            A column of 30%
+ *     .e-col-33            A column of 33%
+ *     .e-col-40            A column of 40%
+ *     .e-col-50            A column of 50%
+ *     .e-col-60            A column of 60%
+ *     .e-col-66            A column of 66%
+ *     .e-col-70            A column of 70%
+ *     .e-col-75            A column of 75%
+ *     .e-col-80            A column of 80%
+ *     .e-col-90            A column of 90%
+ *     .e-col-100           A column of 100%
  *
  * Note that .e-row-equal does not wrap columns in IE10 and under. This is
  * fine for equal height columns in pre-defined rows, but won't work for
@@ -94,6 +96,8 @@
 
 /* remove padding */
 .e-no-padding { padding: 0; }
+.e-no-padding-left { padding-left: 0; }
+.e-no-padding-right { padding-right: 0; }
 
 /* desktop */
 @media (min-width: 992px) {
@@ -111,7 +115,7 @@
 @media (max-width: 768px) {
 	.e-col-10, .e-col-20, .e-col-25, .e-col-30, .e-col-33, .e-col-40, .e-col-50, .e-col-66, .e-col-75 {
 		width: 50%;
-		max-width 50%;
+		max-width: 50%;
 	}
 	
 	.e-col-60, .e-col-70, .e-col-80, .e-col-90, .e-col-100 {
@@ -128,6 +132,7 @@
 	.e-col-10, .e-col-20, .e-col-25, .e-col-30, .e-col-33, .e-col-40, .e-col-50,
 	.e-col-60, .e-col-66, .e-col-70, .e-col-75, .e-col-80, .e-col-90, .e-col-100 {
 		width: 100%;
+		max-width: 100%;
 	}
 	
 	.e-col-5 {
Files elefant-elefant_1_3_10_beta/apps/admin/css/minimal-grid.html and elefant-elefant_1_3_11_rc/apps/admin/css/minimal-grid.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/modal.css elefant-elefant_1_3_11_rc/apps/admin/css/modal.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/modal.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/modal.css	2015-09-05 21:13:59.000000000 -0500
@@ -14,7 +14,7 @@
 	display: none;
 	position: absolute;
 	width: 550px;
-	height: 300px;
+	min-height: 300px;
 	-webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
 	-moz-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
 	box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
@@ -47,13 +47,14 @@
 .modal-close-button {
 	color: #444;
 	text-decoration: none;
+	text-transform: lowercase;
 	position: absolute;
 	right: 7px;
 	top: 7px;
 	display: block;
-	padding: 1px 5px 1px 5px;
+	padding: 3px 5px 5px 5px;
 	border: 1px solid #aaa;
-	line-height: normal;
+	line-height: 10px;
 }
 
 .modal-close-button:hover {
@@ -75,3 +76,15 @@
 	height: 233px;
 	overflow-y: auto;
 }
+
+@media (max-width: 480px) {
+	.modal-dialog {
+		max-width: 100%;
+	}
+	
+	.modal-dialog select,
+	.modal-dialog input[type=checkbox],
+	.modal-dialog input[type=radio] {
+		width: auto !important;
+	}
+}
Files elefant-elefant_1_3_10_beta/apps/admin/css/reset.css and elefant-elefant_1_3_11_rc/apps/admin/css/reset.css are identical
Files elefant-elefant_1_3_10_beta/apps/admin/css/text.css and elefant-elefant_1_3_11_rc/apps/admin/css/text.css are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/css/top-bar.css elefant-elefant_1_3_11_rc/apps/admin/css/top-bar.css
--- elefant-elefant_1_3_10_beta/apps/admin/css/top-bar.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/css/top-bar.css	2015-09-05 21:13:59.000000000 -0500
@@ -93,11 +93,14 @@
 	}
 
 		#admin-links a:hover, #admin-links a:focus {
-			color: #93278f;
-			background-color: #dddddd;
 			text-decoration: none;
 			outline: 0;
 		}
+		
+		#admin-links a:hover, #admin-links > a:focus {
+			color: #93278f;
+			background-color: #dddddd;
+		}
 
 	#admin-tools-list {
 		display: none;
@@ -109,6 +112,8 @@
 		float: left;
 		border: 0;
 		list-style: none;
+		max-height:350px;
+		overflow-x:hidden;
 		-webkit-box-shadow: 0px 1px 2px rgba(0,0,0,.3);
 		-moz-box-shadow: 0px 1px 2px rgba(0,0,0,.3);
 		box-shadow: 0px 1px 2px rgba(0,0,0,.3);
@@ -181,12 +186,25 @@
 		background-position: 50% 50%;
 	}
 	
+		#admin-tools-arrow a {
+			margin-left: 50px;
+			margin-top: 4px;
+			display:none;
+		}
+		
+		#admin-tools-arrow:hover a {
+			display:inline-block;
+		}
+	
 	#admin-tools-list.admin-tools-custom {
 		position: absolute;
 		top: 35px;
 		left: 0;
 		width: 100%;
 		color: #222;
+		max-height:250px;
+		overflow-y:auto!important;
+		padding-top:25px!important;
 		/*
 		background: #ddd;
 		background: rgba(235,235,235,.95);
@@ -204,7 +222,7 @@
 	
 		.admin-tools-section {
 			float: left;
-			width: 19%;
+			width: 20%;
 		}
 		
 		h3.admin-tools-section-header {
@@ -233,6 +251,17 @@
 			height: 24px;
 			width: 100%;
 		}
+		
+		#admin-tools-list .admin-tools-edit {
+			position: absolute;
+			display:block;
+			top: 6px;
+			right: 55px;
+			margin: 0;
+			text-align: right;
+			background-color:initial!important;
+			color: #93278f;
+		}
 
 	#admin-update-available {
 		color: #93278f;
@@ -293,52 +322,44 @@
 	margin: 0;
 	padding: 0;
 	border: 0;
-	width: 26px;
+	width: 29px;
 	height: 24px;
 	background-color: #f5f5f5;
-	background-repeat: no-repeat;
-	background-image: url(/apps/admin/css/admin/editable-sprite-dark.png);
+}
+
+p.admin-options a {
+	color: #333;
 }
 
 #preview-bar a {
-	background-image: url(/apps/admin/css/admin/editable-sprite-violett.png);
+	color: #93278f;
+	width: 26px;
 }
 
 #preview-bar a:hover,
 .admin-options a:hover {
-	background: #f5f5f5;
-	background-image: url(/apps/admin/css/admin/editable-sprite-dark.png);
+	background: #eee;
 	text-decoration: none !important;
 	margin: 0;
 	padding: 0;
+	color: #111;
 }
 
-#preview-bar a:hover {
-    background-image: url(/apps/admin/css/admin/editable-sprite-violett.png);
+#preview-bar a i {
+	padding: 5px 5px 0px 5px;
+	font-family: 'FontAwesome' !important;
+	font-size: 18px !important;
+	font-style: normal !important;
+}
+
+.admin-options a i {
+	padding: 5px 0px 0px 7px;
+	line-height: 16px;
+	font-family: 'FontAwesome' !important;
+	font-size: 18px !important;
+	font-style: normal !important;
 }
 
-	.admin-options a.editable-add {
-		background-position: 0px 0px;
-	}
-
-    #preview-bar a,
-    #preview-bar a:hover,
-    .admin-options a.editable-edit {
-		background-position: -26px 0px;
-	}
-
-	.admin-options a.editable-delete {
-		background-position: -52px 0px;
-	}
-
-	.admin-options a.editable-versions {
-		background-position: -78px 0px;
-	}
-
-	.admin-options a.editable-lock {
-		background-position: -104px 0px;
-	}
-
 .admin-tooltip {
 	position: absolute;
 	z-index: 25;
@@ -363,7 +384,7 @@
 		color: #222;
 		font-weight: bold;
 		background-color: #f5f5f5;
-		border: 1px solid #555;		
+		border: 1px solid #555;
 		text-align: center;
 		margin-top:7px;		
 		margin-left: -25%;
@@ -374,6 +395,19 @@
 		text-decoration: none !important;
 	}
 
+.admin-forward {
+	font-family: Helvetica, Arial, sans-serif;
+	font-size: 14px;
+	background-color: #f5f5f5;
+	border: 1px solid #ccc;
+	padding: 12px 12px 8px 12px;
+	margin-bottom: 1em;
+}
+
+	.admin-forward p {
+		margin-bottom: 4px;
+	}
+
 @media screen and (max-width: 480px) {
 	#admin-bar {
 		-webkit-text-size-adjust: 100%;
@@ -402,7 +436,6 @@
     top: 0;
     left: 0;
     height: 35px;
-    width: 100%;
     z-index: 100000;
 }
 
@@ -416,8 +449,6 @@
 	border-right: 0px;
 	/*background-color: #ddd;
 	background-color: rgba(220,220,220,.95);*/
-    background-image: url(/apps/admin/css/admin/editable-sprite-dark.png);
-	background-position: -26px 0px;
 	position: relative;
 }
 
@@ -438,7 +469,7 @@
 	padding-top: 3px;
 	padding-left: 3px;
 	padding-right: 5px;
-	background-color: #f5f5f5;
+	background-color: #eee;
 	border: 2px solid #666;
 	border-left: 0px;
 	color: #222;
Files elefant-elefant_1_3_10_beta/apps/admin/forms/add.php and elefant-elefant_1_3_11_rc/apps/admin/forms/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/forms/edit.php and elefant-elefant_1_3_11_rc/apps/admin/forms/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/add.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/add.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/api.php elefant-elefant_1_3_11_rc/apps/admin/handlers/api.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/api.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/api.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,3 @@
+<?php
+
+$this->restful (new admin\API ());
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/bgsave.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/bgsave.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/cancel.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/cancel.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/compare.php elefant-elefant_1_3_11_rc/apps/admin/handlers/compare.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/compare.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/compare.php	2015-09-05 21:13:59.000000000 -0500
@@ -12,12 +12,25 @@
 	$this->redirect ('/admin');
 }
 
+if (! isset ($_GET['current'])) {
+	$this->redirect ('/admin');
+}
+
+if (! in_array ($_GET['current'], array ('yes', 'no'))) {
+	$this->redirect ('/admin');
+}
+
+$is_current = ($_GET['current'] === 'yes') ? true : false;
+$is_deleted = false;
+
 $ver = new Versions ($_GET['id']);
 $old = $ver->restore ();
 $class = $ver->class;
 $cur = new $class ($ver->pkey);
 if ($cur->error) {
 	// deleted item
+	$is_deleted = true;
+
 	foreach (json_decode ($ver->serialized) as $key => $value) {
 		$cur->{$key} = $value;
 	}
@@ -38,11 +51,13 @@
 	unset ($data[$cur->_extended_field]);
 }
 
-$page->title = __ ('Comparing') . ' ' . $ver->class . ' / ' . $ver->pkey;
+$page->title = __ ('Comparing') . ' ' . Template::sanitize (__ (Versions::display_name ($ver->class))) . ' / ' . $ver->pkey;
 
 echo $tpl->render ('admin/compare', array (
 	'fields' => $data,
 	'class' => $ver->class,
 	'pkey' => $ver->pkey,
-	'ts' => $ver->ts
+	'ts' => $ver->ts,
+	'is_current' => $is_current,
+	'is_deleted' => $is_deleted
 ));
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/conditionalforward.php elefant-elefant_1_3_11_rc/apps/admin/handlers/conditionalforward.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/conditionalforward.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/conditionalforward.php	2015-09-05 21:13:59.000000000 -0500
@@ -12,7 +12,7 @@
 
 if (User::require_admin ()) {
 	printf (
-		'<p>%s:</p><p><a href="%s">%s</a></p>',
+		'<div class="admin-forward admin-forward-conditional hide-in-preview"><p>%s:</p><p><a href="%s">%s</a></p></div>',
 		__ ('This page forwards members of the %s group to the following link', $user_type),
 		$url,
 		$url
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/delete.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/delete.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/edit.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/editable.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/editable.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/embed/filters.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/embed/filters.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/embed.php elefant-elefant_1_3_11_rc/apps/admin/handlers/embed.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/embed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/embed.php	2015-09-05 21:13:59.000000000 -0500
@@ -32,6 +32,13 @@
 }
 
 foreach ($embeds as $k => $e) {
+	if (isset ($embeds[$k]['acl'])) {
+		$acl = preg_split ('/, ?/', $embeds[$k]['acl']);
+		if (! call_user_func_array ('User::require_acl', $acl)) {
+			unset ($embeds[$k]);
+			continue;
+		}
+	}
 	$embeds[$k]['handler'] = $k;
 	$embeds[$k]['fields'] = array ();
 	foreach ($e as $field => $opts) {
@@ -42,7 +49,9 @@
 		unset ($embeds[$k][$field]);
 		foreach ($opts as $opt => $val) {
 			if ($opt == 'require') {
-				require_once ($val);
+				if (file_exists ($val)) {
+					require_once ($val);
+				}
 			} elseif ($opt == 'callback') {
 				try {
 					$embeds[$k]['fields'][$field]['values'] = call_user_func ($val);
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/error.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/error.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/extended/api.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/extended/api.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/extended.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/extended.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/forward.php elefant-elefant_1_3_11_rc/apps/admin/handlers/forward.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/forward.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/forward.php	2015-09-05 21:13:59.000000000 -0500
@@ -10,7 +10,7 @@
 
 if (User::require_admin ()) {
 	printf (
-		'<p>%s:</p><p><a href="%s">%s</a></p>',
+		'<div class="admin-forward hide-in-preview"><p>%s:</p><p><a href="%s">%s</a></p></div>',
 		__ ('This page forwards visitors to the following link'),
 		$url,
 		$url
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/head/links.php elefant-elefant_1_3_11_rc/apps/admin/handlers/head/links.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/head/links.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/head/links.php	2015-09-05 21:13:59.000000000 -0500
@@ -9,25 +9,48 @@
 $page->layout = false;
 header ('Content-Type: application/json');
 
-if (! User::require_admin ()) {
-	return;
-}
+if (! User::require_admin ()) return;
 
-$custom_tools = admin\Toolbar::custom_tools ($this);
-if ($custom_tools === false) {
-	$tools = admin\Toolbar::parse_apps ($this);
+$tools = admin\Toolbar::tools ($this);
+if (count($tools) === 0 && admin\Toolbar::$autofill === false) {
+	$tools = admin\Toolbar::apps($this);
+	$is_apps = true;
 } else {
-	$tools = $custom_tools;
-	$custom_tools = true;
+	if (admin\Toolbar::$autofill) { 
+		// Extend the tools list with any unused app resources.
+		$apps = admin\Toolbar::apps($this);
+		foreach ($tools as $column => $group) {
+			// filter out resources that are already in use
+			$apps = array_diff_key($apps, $group);
+		}
+		if (count($apps)) {
+			$i = 0;
+			$j = 2;
+			$column = admin\Toolbar::$autofill;
+			$tools[$column] = array();
+			foreach ($apps as $handler => $app) {
+				if (++$i > 7) {
+					$i = 0;
+					$column = admin\Toolbar::$autofill .' ('. $j++ .')';
+					$tools[$column] = array();
+				}
+				$tools[$column][$handler] = $apps[$handler];
+			}
+		}
+	}
+	$is_apps = false;
 }
 
+$editable = User::require_acl('admin/toolbar');
 $out = array (
 	'name' => Product::name (),
 	'logo' => Product::logo_toolbar (),
+	'is_apps' => ($is_apps || (count($tools) === 0 && !$editable)),
 	'links' => $tpl->render ('admin/head/links', array (
 		'user' => User::val ('name'),
 		'tools' => $tools,
-		'custom' => $custom_tools
+		'is_apps' => $is_apps,
+		'editable' => $editable
 	))
 );
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/head/updates.php elefant-elefant_1_3_11_rc/apps/admin/handlers/head/updates.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/head/updates.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/head/updates.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,13 @@
+<?php
+
+/**
+ * Fetches the latest updates from the elefant-updates repository and
+ * returns the output with content type application/javascript for use
+ * with JSONP callback.
+ */
+
+$page->layout = false;
+
+header ('Content-Type: application/javascript');
+
+echo fetch_url ('https://raw.githubusercontent.com/jbroadway/elefant-updates/master/releases/' . $this->params[0] . '.js');
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/head.php elefant-elefant_1_3_11_rc/apps/admin/handlers/head.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/head.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/head.php	2015-09-05 21:13:59.000000000 -0500
@@ -7,9 +7,9 @@
  */
 
 if ($appconf['Scripts']['jquery_source'] === 'local') {
-	$page->add_script ('/js/jquery-1.8.3.min.js');
+	$page->add_script ('/js/jquery-1.11.3.min.js');
 } elseif ($appconf['Scripts']['jquery_source'] === 'google') {
-	$page->add_script ('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>');
+	$page->add_script ('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>');
 } else {
 	$page->add_script ('<script src="' . $appconf['Scripts']['jquery_source'] . '"></script>');
 }
@@ -21,11 +21,11 @@
 
 	$page->add_script ("<script>$(function(){\$.elefant_version='" . ELEFANT_VERSION . "';});</script>\n");
 	$page->add_script ("<script>$(function(){\$.elefant_updates=" . (int) conf ('General', 'check_for_updates') . ";});</script>\n");
-	$page->add_script ("<script>$(function(){\$.elefant_custom=" . (int) file_exists ('conf/tools.php') . ";});</script>\n");
 	$page->add_script ('/apps/admin/js/modal.js');
 	$page->add_script ('/apps/admin/js/jquery.jgrowl.min.js');
 	$page->add_script ('/apps/admin/js/jquery.triggers.js');
 	$page->add_script ('/js/jquery.cookie.js');
+	$page->add_script ('/apps/admin/js/jquery.i18n.js');
 	$page->add_script ('/apps/admin/js/top-bar.js');
 	$page->add_script (I18n::export (
 		'List keyboard shortcuts',
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/html.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/html.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/index.php elefant-elefant_1_3_11_rc/apps/admin/handlers/index.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -21,6 +21,11 @@
 	$_POST['redirect'] = $appconf['General']['login_redirect'];
 }
 
+$redir = parse_url ($_POST['redirect']);
+if ($redir === false || $_POST['redirect'] !== $redir['path'] && $_POST['redirect'] !== $redir['path'] . '?' . $redir['query']) {
+	$_POST['redirect'] = $appconf['General']['login_redirect'];
+}
+
 if (! User::require_admin ()) {
 	$page->title = sprintf (
 		'<img src="%s" alt="%s" style="margin-left: -7px" />',
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/page.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/page.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/pages.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/pages.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/preview.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/preview.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/restore.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/restore.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/settings.php elefant-elefant_1_3_11_rc/apps/admin/handlers/settings.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/settings.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/settings.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,51 @@
+<?php
+
+/**
+ * Global site settings manager.
+ */
+
+// keep unauthorized users out
+$this->require_acl ('admin', 'settings');
+
+// set the layout and page title
+$page->layout = 'admin';
+$page->title = __ ('Site Settings');
+
+// create the form
+$form = new Form ('post', $this);
+
+// set the form data from the global conf() settings, since they've already
+// been rewritten with the Appconf::storyteller() ones in bootstrap.php
+$form->data = array (
+    'site_name' => conf ('General', 'site_name'),
+    'site_domain' => conf ('General', 'site_domain') ? conf ('General', 'site_domain') : $_SERVER['HTTP_HOST'],
+    'email_from' => conf ('General', 'email_from'),
+    'timezone' => conf ('General', 'timezone'),
+    'google_analytics_id' => conf ('General', 'google_analytics_id')
+);
+
+echo $form->handle (function ($form) {
+    // merge the new values into the settings
+    $merged = Appconf::merge ('admin', array (
+        'Site Settings' => array (
+        	'site_name' => $_POST['site_name'],
+        	'site_domain' => $_POST['site_domain'],
+            'email_from' => $_POST['email_from'],
+            'timezone' => $_POST['timezone'],
+            'google_analytics_id' => $_POST['google_analytics_id']
+        )
+    ));
+
+    // save the settings to disk
+    if (! Ini::write ($merged, 'conf/app.admin.' . ELEFANT_ENV . '.php')) {
+        printf (
+            '<p>%s</p>',
+            __ ('Unable to save changes. Check your permissions and try again.')
+        );
+        return;
+    }
+
+    // redirect to the main admin page with a notification
+    $form->controller->add_notification (__ ('Settings saved.'));
+    $form->controller->redirect ('/');
+});
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/toolbar.php elefant-elefant_1_3_11_rc/apps/admin/handlers/toolbar.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/toolbar.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/toolbar.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,19 @@
+<?php
+
+$this->require_acl('admin','admin/toolbar');
+
+$page->title = __ ('Toolbar Editor');
+$page->layout = 'admin';
+
+$this->run ('admin/util/modal');
+$page->add_script ('<script src="/js/jquery-ui/jquery-ui.min.js"></script>', 'tail');
+$page->add_script ('<script src="/apps/admin/js/tree-drag-drop/tree-drag-drop.js"></script>', 'tail');
+$page->add_style ('/apps/admin/css/font-awesome/css/font-awesome.min.css');
+$page->add_style ('/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css');
+
+list($tools, $apps) = admin\Toolbar::compile ($this, true);
+echo $tpl->render ('admin/toolbar', array (
+	'tools' => $tools,
+	'autofill' => admin\Toolbar::$autofill,
+	'apps' => $apps
+));
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/upgrade.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/upgrade.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/analytics.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/analytics.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/analytics.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/analytics.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,22 @@
+<?php
+
+/**
+ * If a Google Analytics ID is set in the site settings, this will
+ * return the Google Analytics code for your site. You can use it in
+ * your layout templates just before the `</body>` tag like this:
+ *
+ *     {! admin/util/analytics !}
+ *
+ * To set your Google Analytics ID, visit the Site Settings
+ * link in the admin toolbar.
+ */
+
+$analytics_id = Appconf::admin ('Site Settings', 'google_analytics_id');
+if ($analytics_id) {
+	echo $tpl->render (
+		'admin/util/analytics',
+		array (
+			'analytics_id' => $analytics_id
+		)
+	);
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/async.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/async.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/async.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/async.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,74 @@
+<?php
+/**
+ * Script includes for converting a standard website into a single-page app.
+ *
+ * Also adds any script helpers as defined from a comma separated list.
+ * This is not an advanced framework for single-page apps. This helper is
+ * simply for catching links and fetching any normal `$page->body` data via ajax,
+ * then replacing the existing body content on the webpage.
+ *
+ * > Note: This utility currently does not handle forms.
+ *
+ * Usage:
+ *
+ * This utility should be called to in the `<head>` of the
+ * desired layout **after** `{! admin/head !}` has been called.
+ *
+ *     {! admin/util/async !}
+ *
+ * To deal with the differences between how the setup of scripts can differ,
+ * there are two parts to assist in managing these scripts.
+ *
+ * First is triggers. These are `jQuery.trigger()` events to manage the DOM and
+ * ajax data along different points of the ajax fetch. They are triggered on
+ * the `$(document)` node.
+ *
+ * Called before the ajax request is made:
+ *
+ *     $(document).trigger('async_start');
+ *
+ * Called upon successful RESTful data return 
+ * and before DOM insertion happens:
+ *
+ *     $(document).trigger('async_pre');
+ *
+ * Called after the DOM insertion happens:
+ *
+ *     $(document).trigger('async_post');
+ *
+ * Called if all data operations have succeeded:
+ *
+ *     $(document).trigger('async_success');
+ *
+ * Called if a RESTful error is returned:
+ *
+ *     $(document).trigger('async_error');
+ *
+ * Called if the ajax request fails:
+ *
+ *     $(document).trigger('async_fail');
+ *
+ * Called after the ajax request has finished:
+ *
+ *     $(document).trigger('async_end');
+ *
+ * Second is helpers. These are pre-made scripts that make use of
+ * the above triggers to manage and assist scripts that are loaded
+ * in via the ajax request.
+ *
+ * Helpers can be requested via comma separated 'helpers' parameter.
+ * The script naming convention is "helper.app.handler.js".
+ *
+ *     {! admin/util/async?helpers=polls,events.calendar,myapp.handler !}
+ *
+ */
+
+$page->add_script('/apps/admin/js/async/core.js','head');
+
+$helpers = ($data['helpers'])?$data['helpers']:($_GET['helpers'])?$_GET['helpers']:false;
+if ($helpers) {
+	$helpers = array_map(trim,explode(',',$helpers));
+	foreach ($helpers as $helper) {
+		$page->add_script('/apps/admin/js/async/helper.'. $helper .'.js','head');
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/codemirror.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/codemirror.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/codemirror.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/codemirror.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,7 +2,7 @@
 
 /**
  * Call this to turn a textarea into an in-browser code editor
- * using the CodeMirror (http://codemirror.net/) editor.
+ * using the [CodeMirror](http://codemirror.net/) editor.
  *
  * In PHP code, call it like this:
  *
@@ -39,9 +39,9 @@
  *
  * Additional parameters:
  *
- * - mode - The editor mode for syntax highlighting (default = htmlmixed)
- * - theme - The color theme to use (default = elegant)
- * - lineWrapping - Whether to wrap lines (default = false)
+ * - `mode` - The editor mode for syntax highlighting (default = htmlmixed)
+ * - `theme` - The color theme to use (default = elegant)
+ * - `lineWrapping` - Whether to wrap lines (default = false)
  */
 
 $modes = array (
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/dates.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/dates.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/dates.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/dates.php	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run ('admin/util/dates');
  * 
@@ -14,7 +14,7 @@
  *
  *     {! admin/util/dates !}
  *
- * 2. Filter your dates via:
+ * ### 2. Filter your dates via:
  *
  *     {{ date_value|I18n::date }}
  *     {{ date_value|I18n::time }}
@@ -26,7 +26,7 @@
  *     5:30PM
  *     April 16, 2012 - 11:13AM
  *
- * See the I18n class for a list of available filter methods.
+ * See the [[I18n]] class for a list of available filter methods.
  */
 
 $abbr_months = explode (
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/datewidget.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/datewidget.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/datewidget.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/datewidget.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,8 @@
 <?php
 
 /**
- * Call this to turn text inputs with a class="datewidget-date" or
- * class="datewidget-datetime" into date and date/time selectors.
+ * Call this to turn text inputs with a `class="datewidget-date"` or
+ * `class="datewidget-datetime"` into date and date/time selectors.
  *
  * In PHP code, call it like this:
  *
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/dynamicobjects.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/dynamicobjects.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/dynamicobjects.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/dynamicobjects.php	2015-09-05 21:13:59.000000000 -0500
@@ -5,7 +5,7 @@
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run ('admin/util/dynamicobjects');
  *
@@ -13,7 +13,7 @@
  *
  *      {! admin/util/dynamicobjects !}
  *
- * 2. Use the $.dynamicobjects() function to open the dialog window:
+ * ### 2. Use the `$.dynamicobjects()` function to open the dialog window:
  *
  *      $.dynamicobjects ({
  *          set_value: '#field-id',
@@ -27,10 +27,10 @@
  *
  * Options:
  *
- * - callback:  A function to call with the resulting embed code.
- * - set_value: The selector of an input field to update with the
+ * - `callback` - A function to call with the resulting embed code.
+ * - `set_value` - The selector of an input field to update with the
  *   resulting embed code.
- * - current:   Current embed code, for updating existing values.
+ * - `current` - Current embed code, for updating existing values.
  */
 
 $this->run ('admin/util/fontawesome');
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/editable.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/editable.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/editable.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/editable.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,11 +1,12 @@
 <?php
 
 /**
- * Helper to make things inline editable.
+ * Helper to make inline editable content. Supports single-line text,
+ * paragraph text, and select boxes for input.
  *
- * ## Usage:
+ * Usage:
  *
- * 1\. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run (
  *         'admin/util/editable',
@@ -18,7 +19,7 @@
  *
  *     {! admin/util/editable?url=/myapp/editable !}
  *
- * 2\. Mark your editable areas in your view template via:
+ * ### 2. Mark your editable areas in your view template via:
  *
  *     <h2 class="editable-text" id="{{id}}">{{name}}</h2>
  *
@@ -37,9 +38,9 @@
  *
  * Valid classes for editable elements currently include:
  *
- * - .editable-text
- * - .editable-textarea
- * - .editable-select
+ * - `.editable-text`
+ * - `.editable-textarea`
+ * - `.editable-select`
  *
  * The plugin reads the following properties of the HTML element as the edit options:
  *
@@ -78,8 +79,6 @@
  *         return;
  *     }
  *     echo Template::sanitize ($_POST['value']);
- *     
- *     ?>
  *
  * To send an error message, use the following code:
  *
@@ -88,12 +87,13 @@
  *     return;
  *
  * To add a notification upon successful requests, you can also use the
- * Controller's `add_notification()` method:
+ * [[Controller]]'s `add_notification()` method:
  *
  *     $this->add_notification (__ ('Changes saved.'));
  *     echo Template::sanitize ($_POST['value']);
  */
 
+$this->run ('admin/util/i18n');
 $page->add_style ('/apps/admin/css/editable.css');
 $page->add_script ('/apps/admin/js/jquery.autogrow.min.js');
 $page->add_script ('/apps/admin/js/jquery.jeditable.min.js');
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/extended.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/extended.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/extended.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/extended.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,11 +2,13 @@
 
 /**
  * Extends a form with a "Custom Fields" section that
- * displays inputs for any ExtendedModel-based class.
+ * displays inputs for any [[ExtendedModel]]-based class.
  *
  * Usage:
  *
- * 1. Add this to your form view template:
+ * ### 1. Call the helper
+ *
+ * Add this to your form view template:
  *
  *     {! admin/util/extended?extends=blog\Post&name=Blog+Posts !}
  *
@@ -14,15 +16,17 @@
  *
  *     {! admin/util/extended?extends=blog\Post&name=Blog+Posts&values=[extra|none]&id=[id] !}
  *
- * 2. For update forms, call this in the form handler function,
- * before calling `$post->put ()`:
+ * ### 2. Call `->update_extended()` on your [[ExtendedModel]]
+ *
+ * For update forms, call this in the form handler function, before calling `$post->put ()`:
  *
  *     $post->update_extended ();
  *
- * 3. Create a link to edit the custom fields for a given
- * class somewhere in your app:
+ * ### 3. Add a link to manage the custom fields
+ *
+ * Create a link to edit the custom fields for a given class somewhere in your app:
  *
- *     <a href="/admin/extended?extends=blog\Post&name=Blog+Posts">{"Custom Fields"}</a>
+ *     <a href="/admin/extended?extends=blog\Post&name=Blog Posts">{"Custom Fields"}</a>
  */
 
 if (! $this->internal) {
@@ -46,17 +50,25 @@
 $data['id'] = isset ($data['id']) ? $data['id'] : false;
 
 $load_assets = false;
+$load_date_widget = false;
 
 if ($data['fields'] || count ($data['fields']) === 0) {
 	foreach ($data['fields'] as $k => $field) {
 		if (isset ($data['values']) && isset ($data['values'][$field->name])) {
 			$data['fields'][$k]->value = $data['values'][$field->name];
+
+			// keep open if data was previously set
+			if ($data['values'][$field->name] && $data['values'][$field->name] !== '') {
+				$data['open'] = true;
+			}
 		}
 
 		if ($field->type === 'select') {
 			$data['fields'][$k]->options = preg_split ("/[\r\n]+/", $field->options);
 		} elseif ($field->type === 'file' || $field->type === 'image') {
 			$load_assets = true;
+		} elseif ($field->type === 'date' || $field->type === 'datetime') {
+			$load_date_widget = true;
 		} elseif (strpos ($field->type, '_') !== false) {
 			list ($app, $extra) = explode ('_', $field->type);
 			$fields = parse_ini_file ('apps/'. $app . '/conf/fields.php', true);
@@ -73,6 +85,7 @@
 			}
 		}
 		
+		// keep open if any fields are required
 		if ($data['fields'][$k]->required) {
 			$data['open'] = true;
 		}
@@ -81,6 +94,10 @@
 	if ($load_assets) {
 		$this->run ('filemanager/util/browser');
 	}
+	
+	if ($load_date_widget) {
+		$this->run ('admin/util/datewidget');
+	}
 
 	echo $tpl->render ('admin/util/extended', $data);
 }
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/fontawesome.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/fontawesome.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/fontawesome.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/fontawesome.php	2015-09-05 21:13:59.000000000 -0500
@@ -14,7 +14,7 @@
  *
  * Now you can use any Font Awesome icon:
  *
- *     <i class="fa-cogs"></i>
+ *     <i class="fa fa-cogs"></i>
  */
 
 $page->add_style ('/apps/admin/css/font-awesome/css/font-awesome.min.css');
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/i18n.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/i18n.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/i18n.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/i18n.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,24 @@
+<?php
+
+/**
+ * Includes `$.i18n()` which makes Elefant's [[I18n]] translation support
+ * available in JavaScript code.
+ *
+ * Usage:
+ *
+ * ### 1. In your view template:
+ *
+ *     {! admin/util/i18n !}
+ *     <script>
+ *     $(function () {
+ *         $.i18n_append ({
+ *             'Original text': "{'Translated text'}"
+ *         });
+ *     });
+ *
+ * ### 2. Now in your included JavaScript, you can use:
+ *
+ *     console.log ($.i18n ('Original text'));
+ */
+
+$page->add_script ('/apps/admin/js/jquery.i18n.js');
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/minimal-grid.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/minimal-grid.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/minimal-grid.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/minimal-grid.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,11 +1,14 @@
 <?php
 
 /**
- * Includes a minimal responsive grid for layout out an app's
- * output, e.g., cards or tiles, for consistent display across
- * websites.
+ * A minimal responsive grid system for Elefant's apps.
  *
- * In PHP code, call it like this:
+ * This helper includes a minimal responsive grid for laying out an app's
+ * output for consistent display across websites.
+ *
+ * Usage:
+ *
+ * ### In PHP code, call it like this:
  *
  *     $this->run ('admin/util/minimal-grid');
  *
@@ -13,7 +16,41 @@
  *
  *     {! admin/util/minimal-grid !}
  *
- * See the file apps/admin/css/minimal-grid.html for usage
+ * ### Example HTML structure
+ *
+ *     <div class="e-row">
+ *         <div class="e-col-75">
+ *             <h1>Body</h1>
+ *         </div>
+ *         <div class="e-col-25">
+ *             <h2>Sidebar</h2>
+ *         </div>
+ *     </div>
+ *
+ * ### Available classes:
+ *
+ *     .e-row               A centered row of 992px that scales via media queries
+ *     .e-row-variable      A row of variable width
+ *     .e-row-equal         A variable width row of equal height columns
+ *     .e-no-padding        Removes padding on an element
+ *     .e-no-padding-left   Removes padding-left on an element
+ *     .e-no-padding-right  Removes padding-right on an element
+ *     .e-col-10            A column of 10%
+ *     .e-col-20            A column of 20%
+ *     .e-col-25            A column of 25%
+ *     .e-col-30            A column of 30%
+ *     .e-col-33            A column of 33%
+ *     .e-col-40            A column of 40%
+ *     .e-col-50            A column of 50%
+ *     .e-col-60            A column of 60%
+ *     .e-col-66            A column of 66%
+ *     .e-col-70            A column of 70%
+ *     .e-col-75            A column of 75%
+ *     .e-col-80            A column of 80%
+ *     .e-col-90            A column of 90%
+ *     .e-col-100           A column of 100%
+ *
+ * See the file [apps/admin/css/minimal-grid.html](/apps/admin/css/minimal-grid.html) for usage
  * examples.
  */
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/modal.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/modal.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/modal.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/modal.php	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * Load this handler either in your handler:
  *
  *     $this->run ('admin/util/modal');
  *
@@ -14,19 +14,19 @@
  *
  *     {! admin/util/modal !}
  *
- * 2. Use the $.open_dialog() function to create your
+ * Use the `$.open_dialog()` function to create your
  * dialog windows:
  *
  *     $.open_dialog ('Title', 'HTML goes here', options);
  *
- * 3. To close the dialog programmatically, you can
- * use the $.close_dialog() function:
+ * To close the dialog programmatically, you can
+ * use the `$.close_dialog()` function:
  *
  *     $.close_dialog ();
  *
- * Valid options are width and height. Note that $.open_dialog()
+ * Valid options are width and height. Note that `$.open_dialog()`
  * returns the current dialog number. A more top level dialog
- * number can be passed to $.close_dialog() and it will cascade
+ * number can be passed to `$.close_dialog()` and it will cascade
  * the close action to all child dialogs too.
  */
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/notifier.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/notifier.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/notifier.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/notifier.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,7 +2,7 @@
 
 /**
  * Provides a public-accessible notifier similar to Elefant's
- * `Controller::add_notification()` mechanism for admin users.
+ * `[[Controller]]::add_notification()` mechanism for admin users.
  *
  * Usage:
  *
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/redactor.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/redactor.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/redactor.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/redactor.php	2015-09-05 21:13:59.000000000 -0500
@@ -3,7 +3,7 @@
 /**
  * Call this to load the required libraries for the Redactor editor.
  * Note: For a full editor with the Elefant integrations, see
- * admin/util/wysiwyg instead.
+ * `admin/util/wysiwyg` instead.
  *
  * In PHP code, call it like this:
  *
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/search.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/search.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/search.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/search.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,7 @@
 <?php
 
 /**
- * For use in conjunction with `Model::where_search()` and
+ * For use in conjunction with `[[Model]]::where_search()` and
  * adding terms and exact matches to a search box on an
  * admin screen.
  *
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/util/wysiwyg.php elefant-elefant_1_3_11_rc/apps/admin/handlers/util/wysiwyg.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/util/wysiwyg.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/util/wysiwyg.php	2015-09-05 21:13:59.000000000 -0500
@@ -26,14 +26,13 @@
  */
 
 $this->run ('admin/util/fontawesome');
-$this->run ('admin/util/dynamicobjects');
-$this->run ('filemanager/util/browser');
 $this->run ('admin/util/redactor');
 
 $page->add_style ('/js/jquery-ui/jquery-ui.css');
 
 $page->add_script ('/js/jquery-ui/jquery-ui.min.js');
 $page->add_script ('/js/jquery.quickpager.js');
+$page->add_script ('/apps/admin/js/redactor/plugins/table.js');
 $page->add_script ('/apps/admin/js/redactor/plugins/filebrowser.js');
 $page->add_script ('/apps/admin/js/redactor/plugins/imagebrowser.js');
 $page->add_script ('/apps/admin/js/redactor/plugins/links.js');
@@ -42,8 +41,13 @@
 $page->add_script (I18n::export (
 	'Dynamic Objects',
 	'Link',
+	'Links',
 	'Page',
 	'Insert',
+	'Insert Link',
+	'Unlink',
+	'Insert Image',
+	'Insert File',
 	'URL',
 	'Email',
 	'Text',
@@ -62,6 +66,27 @@
 	$data['language'] = 'en';
 }
 
+if (User::require_admin ()) {
+	$this->run ('admin/util/dynamicobjects');
+	$this->run ('filemanager/util/browser');
+	$page->add_script ('/apps/admin/js/redactor/plugins/links.js');
+	$page->add_script ('/apps/admin/js/redactor/plugins/imagebrowser.js');
+	$page->add_script ('/apps/admin/js/redactor/plugins/filebrowser.js');
+	$page->add_script ('/apps/admin/js/redactor/plugins/dynamic.js');
+
+	$data['buttons'] = array (
+		'formatting', 'bold', 'italic', 'deleted', 'alignment', 'horizontalrule',
+		'unorderedlist', 'orderedlist', 'outdent', 'indent', 'links', 'imagebrowser',
+		'filebrowser', 'table', 'undo', 'html', 'dynamic'
+	);
+} else {
+	$data['buttons'] = array (
+		'formatting', 'bold', 'italic', 'deleted', 'alignment', 'horizontalrule',
+		'unorderedlist', 'orderedlist', 'outdent', 'indent', 'link',
+		'table', 'undo', 'html'
+	);
+}
+
 $data['field_id'] = isset ($data['field_id'])
 	? (($data['field_id'] === '0' || empty ($data['field_id'])) ? false : $data['field_id'])
 	: 'webpage-body';
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/validator.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/validator.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/handlers/versions.php elefant-elefant_1_3_11_rc/apps/admin/handlers/versions.php
--- elefant-elefant_1_3_10_beta/apps/admin/handlers/versions.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/handlers/versions.php	2015-09-05 21:13:59.000000000 -0500
@@ -44,14 +44,20 @@
 	return $u->name;
 }
 
-$page->title = __ ('Versions of') . ' ' . Template::sanitize ($_GET['type']);
+$name = Versions::display_name ($_GET['type']);
+$plural = Versions::plural_name ($_GET['type']);
+
 if (! empty ($_GET['id'])) {
-	$page->title .= ' / ' . Template::sanitize ($_GET['id']);
+	$page->title .= __ ('Versions of') . ' ' . Template::sanitize (__ ($name)) . ' / ' . Template::sanitize ($_GET['id']);
+} else {
+	$page->title = __ ('Versions') . ' - ' . Template::sanitize (__ ($plural));
 }
 
 echo $tpl->render ('admin/versions', array (
 	'id' => (! empty ($_GET['id'])) ? $_GET['id'] : false,
 	'type' => $_GET['type'],
+	'name' => $name,
+	'plural' => $plural,
 	'classes' => $classes,
 	'history' => $history,
 	'limit' => $limit,
Files elefant-elefant_1_3_10_beta/apps/admin/handlers/wysiwyg/links.php and elefant-elefant_1_3_11_rc/apps/admin/handlers/wysiwyg/links.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/async/core.js elefant-elefant_1_3_11_rc/apps/admin/js/async/core.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/async/core.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/async/core.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,85 @@
+// Copywrite for this file is inherited from ELefantCMS.
+
+window.async = (function($){
+	var self = {};
+	self.REGEX = new RegExp('^https?://'+ document.domain +'(/.*)', 'i');
+	self.container = '#content'; // CSS selector for where to put the returned HTML data
+	self.debug = false;
+	self.compile = true; // auto include scripts into HTML?
+	// current URI being loaded
+	self.load = false; // set to false during the async_start or async_pre events to cancel the page request or DOM injection respectively.
+	self.ignore = [
+		"/blog/edit",
+		"/blog/add",
+		"/events/add",
+		"/user/logout"
+	];
+	self.bind = function(container){
+		function catch_link(e){
+			e.preventDefault();
+			e.stopImmediatePropagation();
+			return async.link(this.href, false);
+		}
+		if (!container || container instanceof Event) container = document;
+		$(container).find('a:not([class*="editable"]):not(.noasync):not([href^="'+ self.ignore.join('"]):not([href^="') +'"])').on('click', catch_link);
+		$('#admin-bar a').off('click', catch_link);
+		$('#preview-bar a').off('click', catch_link);
+	};
+	self.link = function(target, pop_state){
+		var uri, container, $document = $(document);
+		if (!self.REGEX.test(target) && !pop_state) {
+			$document.trigger('async_out');
+			if (self.debug) console.log('Caught external link.');
+			window.open(target,'_blank');
+			return false;
+		}
+		if (self.debug) console.log('Caught internal link.');
+		$document.trigger('async_in');
+		container = document.querySelector(self.container);
+		if (pop_state) { uri = target; }
+		else { uri = self.REGEX.exec(target)[1]; }
+		if (self.debug) console.log('URI: '+ uri);
+		if (uri != container.dataset['path']){
+			self.load = uri.split('?')[0];
+			$document.trigger('async_start');
+			if (self.load !== uri.split('?')[0]) return false; // check to make sure the request hasn't been stopped
+			$.getJSON('/admin/api/async?page='+ encodeURIComponent(uri)).success(function(res){
+				if (self.debug) console.log(res);
+				if (res.success) {
+					$document.trigger('async_pre', res.data);
+					if (self.load !== res.data.path) return false;
+					container.innerHTML = (self.compile?res.data.page.head:'') + res.data.html + (self.compile?res.data.page.tail:'');
+					var title = res.data.page.window_title || res.data.page._window_title || res.data.page.title;
+					document.querySelector('head title').innerText = title;
+					$document.trigger('async_post', res.data);
+					if (self.debug) console.log('Async load successful');
+					document.cookie = 'elefant_last_page='+ res.data.path;
+					self.bind(container);
+					container.dataset['path'] = uri;
+					if (!pop_state) {
+						history.pushState({data:uri}, document.querySelector('head title').innerText, uri);
+					}
+					$document.trigger('async_success');
+					self._loading = false;
+				} else {
+					if (self.debug) console.log(res);
+					$document.trigger('async_error', res.error);
+				}
+			}).fail(function(){
+				if (self.debug) console.log('Async load unsuccessful');
+				$document.trigger('async_fail');
+			}).always(function(){
+				$document.trigger('async_end');
+			});
+			return true; // request was sent successfully
+		}
+		return false;
+	};
+	console.log('Async wrapper loaded.');
+	document.addEventListener('DOMContentLoaded',self.bind);
+	return self;
+}(jQuery));
+
+window.onpopstate = function(e){
+	if (e.state) window.async.link(e.state.data, true);
+};
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/async/helper.events.calendar.js elefant-elefant_1_3_11_rc/apps/admin/js/async/helper.events.calendar.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/async/helper.events.calendar.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/async/helper.events.calendar.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,11 @@
+jQuery(function($){
+	s = document.createElement('SCRIPT');
+	s.innerHTML = "jQuery(function($){if (ec = $('#events-calendar').data('fullCalendar')) ec.options['eventAfterAllRender'] = async.bind;});";
+	document.getElementsByTagName('body')[0].appendChild(s);
+	$(document).on("async_success",function (e) {
+		if (ec = $('#events-calendar').data('fullCalendar')) {
+			ec.options["eventAfterAllRender"] = async.bind;
+			ec.render();
+		}
+	});
+}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/js/datewidget.js and elefant-elefant_1_3_11_rc/apps/admin/js/datewidget.js are identical
Files elefant-elefant_1_3_10_beta/apps/admin/js/editable.js and elefant-elefant_1_3_11_rc/apps/admin/js/editable.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/extended.js elefant-elefant_1_3_11_rc/apps/admin/js/extended.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/extended.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/extended.js	2015-09-05 21:13:59.000000000 -0500
@@ -171,6 +171,8 @@
 		field.select = (field.type === 'select') ? true : false;
 		field.file = (field.type === 'file') ? true : false;
 		field.image = (field.type === 'image') ? true : false;
+		field.date = (field.type === 'date') ? true : false;
+		field.datetime = (field.type === 'datetime') ? true : false;
 		for (var field_id in e.custom) {
 			field[field_id] = (field.type === field_id) ? true : false;
 		}
Files elefant-elefant_1_3_10_beta/apps/admin/js/handlebars-1.0.rc.1.js and elefant-elefant_1_3_11_rc/apps/admin/js/handlebars-1.0.rc.1.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/jquery-ui.min.js elefant-elefant_1_3_11_rc/apps/admin/js/jquery-ui.min.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/jquery-ui.min.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/jquery-ui.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,407 +1,13 @@
-/*!
- * jQuery UI 1.8.13
- *
- * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
- * Dual licensed under the MIT or GPL Version 2 licenses.
- * http://jquery.org/license
- *
- * http://docs.jquery.com/UI
- */
-(function(a,d){function c(g,e){var i=g.nodeName.toLowerCase();if("area"===i){e=g.parentNode;i=e.name;if(!g.href||!i||e.nodeName.toLowerCase()!=="map")return false;g=a("img[usemap=#"+i+"]")[0];return!!g&&f(g)}return(/input|select|textarea|button|object/.test(i)?!g.disabled:"a"==i?g.href||e:e)&&f(g)}function f(g){return!a(g).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.13",
-keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(g,e){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){a(i).focus();
-e&&e.call(i)},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;g=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,
-"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!g.length?a(document):g},zIndex:function(g){if(g!==d)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var e;g.length&&g[0]!==document;){e=g.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){e=parseInt(g.css("zIndex"),10);if(!isNaN(e)&&e!==0)return e}g=g.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",
-function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(g,e){function i(l,o,n,k){a.each(b,function(){o-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(n)o-=parseFloat(a.curCSS(l,"border"+this+"Width",true))||0;if(k)o-=parseFloat(a.curCSS(l,"margin"+this,true))||0});return o}var b=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
-outerHeight:a.fn.outerHeight};a.fn["inner"+e]=function(l){if(l===d)return j["inner"+e].call(this);return this.each(function(){a(this).css(h,i(this,l)+"px")})};a.fn["outer"+e]=function(l,o){if(typeof l!=="number")return j["outer"+e].call(this,l);return this.each(function(){a(this).css(h,i(this,l,true,o)+"px")})}});a.extend(a.expr[":"],{data:function(g,e,i){return!!a.data(g,i[3])},focusable:function(g){return c(g,!isNaN(a.attr(g,"tabindex")))},tabbable:function(g){var e=a.attr(g,"tabindex"),i=isNaN(e);
-return(i||e>=0)&&c(g,!i)}});a(function(){var g=document.body,e=g.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart"in e;g.removeChild(e).style.display="none"});a.extend(a.ui,{plugin:{add:function(g,e,i){g=a.ui[g].prototype;for(var b in i){g.plugins[b]=g.plugins[b]||[];g.plugins[b].push([e,i[b]])}},call:function(g,e,i){if((e=g.plugins[e])&&g.element[0].parentNode)for(var b=
-0;b<e.length;b++)g.options[e[b][0]]&&e[b][1].apply(g.element,i)}},contains:function(g,e){return document.compareDocumentPosition?g.compareDocumentPosition(e)&16:g!==e&&g.contains(e)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden")return false;e=e&&e==="left"?"scrollLeft":"scrollTop";var i=false;if(g[e]>0)return true;g[e]=1;i=g[e]>0;g[e]=0;return i},isOverAxis:function(g,e,i){return g>e&&g<e+i},isOver:function(g,e,i,b,h,j){return a.ui.isOverAxis(g,i,h)&&a.ui.isOverAxis(e,b,j)}})}})(jQuery);
-(function(a,d){if(a.cleanData){var c=a.cleanData;a.cleanData=function(g){for(var e=0,i;(i=g[e])!=null;e++)a(i).triggerHandler("remove");c(g)}}else{var f=a.fn.remove;a.fn.remove=function(g,e){return this.each(function(){if(!e)if(!g||a.filter(g,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return f.call(a(this),g,e)})}}a.widget=function(g,e,i){var b=g.split(".")[0],h;g=g.split(".")[1];h=b+"-"+g;if(!i){i=e;e=a.Widget}a.expr[":"][h]=function(j){return!!a.data(j,
-g)};a[b]=a[b]||{};a[b][g]=function(j,l){arguments.length&&this._createWidget(j,l)};e=new e;e.options=a.extend(true,{},e.options);a[b][g].prototype=a.extend(true,e,{namespace:b,widgetName:g,widgetEventPrefix:a[b][g].prototype.widgetEventPrefix||g,widgetBaseClass:h},i);a.widget.bridge(g,a[b][g])};a.widget.bridge=function(g,e){a.fn[g]=function(i){var b=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!b&&h.length?a.extend.apply(null,[true,i].concat(h)):i;if(b&&i.charAt(0)==="_")return j;
-b?this.each(function(){var l=a.data(this,g),o=l&&a.isFunction(l[i])?l[i].apply(l,h):l;if(o!==l&&o!==d){j=o;return false}}):this.each(function(){var l=a.data(this,g);l?l.option(i||{})._init():a.data(this,g,new e(i,this))});return j}};a.Widget=function(g,e){arguments.length&&this._createWidget(g,e)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(g,e){a.data(e,this.widgetName,this);this.element=a(e);this.options=a.extend(true,{},this.options,
-this._getCreateOptions(),g);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
-widget:function(){return this.element},option:function(g,e){var i=g;if(arguments.length===0)return a.extend({},this.options);if(typeof g==="string"){if(e===d)return this.options[g];i={};i[g]=e}this._setOptions(i);return this},_setOptions:function(g){var e=this;a.each(g,function(i,b){e._setOption(i,b)});return this},_setOption:function(g,e){this.options[g]=e;if(g==="disabled")this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e);return this},
-enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(g,e,i){var b=this.options[g];e=a.Event(e);e.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();i=i||{};if(e.originalEvent){g=a.event.props.length;for(var h;g;){h=a.event.props[--g];e[h]=e.originalEvent[h]}}this.element.trigger(e,i);return!(a.isFunction(b)&&b.call(this.element[0],e,i)===false||e.isDefaultPrevented())}}})(jQuery);
-(function(a){var d=false;a(document).mousedown(function(){d=false});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(f){return c._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===a.data(f.target,c.widgetName+".preventClickEvent")){a.removeData(f.target,c.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
-this.widgetName)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var f=this,g=c.which==1,e=typeof this.options.cancel=="string"?a(c.target).parents().add(c.target).filter(this.options.cancel).length:false;if(!g||e||!this._mouseCapture(c))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=
-this._mouseStart(c)!==false;if(!this._mouseStarted){c.preventDefault();return true}}true===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(i){return f._mouseMove(i)};this._mouseUpDelegate=function(i){return f._mouseUp(i)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=true}},_mouseMove:function(c){if(a.browser.msie&&
-!(document.documentMode>=9)&&!c.button)return this._mouseUp(c);if(this._mouseStarted){this._mouseDrag(c);return c.preventDefault()}if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==false)?this._mouseDrag(c):this._mouseUp(c);return!this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
-false;c.target==this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",true);this._mouseStop(c)}return false},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
-(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
-"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(d){var c=
-this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(d);if(!this.handle)return false;a(c.iframeFix===true?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(d){var c=this.options;this.helper=
-this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
-this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);
-this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(d){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)c=
-a.ui.ddmanager.drop(this,d);if(this.dropped){c=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return false;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",d)!==false&&f._clear()})}else this._trigger("stop",
-d)!==false&&this._clear();return false},_mouseUp:function(d){this.options.iframeFix===true&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});return a.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
-d.target)c=true});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d=
-{left:+d[0],top:+d[1]||0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&
-a.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=
-this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
-{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[(d.containment=="document"?0:a(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(d.containment=="document"?0:a(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(d.containment=="document"?0:a(window).scrollLeft())+
-a(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d.containment=="document"?0:a(window).scrollTop())+(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)&&d.containment.constructor!=Array){d=a(d.containment);var c=d[0];if(c){d.offset();var f=a(c).css("overflow")!="hidden";this.containment=[(parseInt(a(c).css("borderLeftWidth"),
-10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-
-this.margins.top-this.margins.bottom];this.relative_container=d}}else if(d.containment.constructor==Array)this.containment=d.containment},_convertPositionTo:function(d,c){if(!c)c=this.position;d=d=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&
-a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
-this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName),e=d.pageX,i=d.pageY;if(this.originalPosition){var b;if(this.containment){if(this.relative_container){b=this.relative_container.offset();b=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]}else b=this.containment;if(d.pageX-this.offset.click.left<b[0])e=b[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<b[1])i=b[1]+this.offset.click.top;
-if(d.pageX-this.offset.click.left>b[2])e=b[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>b[3])i=b[3]+this.offset.click.top}if(c.grid){i=this.originalPageY+Math.round((i-this.originalPageY)/c.grid[1])*c.grid[1];i=b?!(i-this.offset.click.top<b[1]||i-this.offset.click.top>b[3])?i:!(i-this.offset.click.top<b[1])?i-c.grid[1]:i+c.grid[1]:i;e=this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0];e=b?!(e-this.offset.click.left<b[0]||e-this.offset.click.left>b[2])?e:!(e-this.offset.click.left<
-b[0])?e-c.grid[0]:e+c.grid[0]:e}}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
-this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,c,f){f=f||this._uiHash();a.ui.plugin.call(this,d,[c,f]);if(d=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,d,c,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.13"});
-a.ui.plugin.add("draggable","connectToSortable",{start:function(d,c){var f=a(this).data("draggable"),g=f.options,e=a.extend({},c,{item:f.element});f.sortables=[];a(g.connectToSortable).each(function(){var i=a.data(this,"sortable");if(i&&!i.options.disabled){f.sortables.push({instance:i,shouldRevert:i.options.revert});i.refreshPositions();i._trigger("activate",d,e)}})},stop:function(d,c){var f=a(this).data("draggable"),g=a.extend({},c,{item:f.element});a.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=
-0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,g)}})},drag:function(d,c){var f=a(this).data("draggable"),g=this;a.each(f.sortables,function(){this.instance.positionAbs=
-f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,
-true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",d);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}this.instance.currentItem&&this.instance._mouseDrag(d)}else if(this.instance.isOver){this.instance.isOver=
-0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();f._trigger("fromSortable",d);f.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor"))c._cursor=
-d.css("cursor");d.css("cursor",c.cursor)},stop:function(){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity"))c._opacity=d.css("opacity");d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("draggable");
-if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML")d.overflowOffset=d.scrollParent.offset()},drag:function(d){var c=a(this).data("draggable"),f=c.options,g=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x")if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-d.pageY<f.scrollSensitivity)c.scrollParent[0].scrollTop=g=c.scrollParent[0].scrollTop+f.scrollSpeed;else if(d.pageY-c.overflowOffset.top<f.scrollSensitivity)c.scrollParent[0].scrollTop=
-g=c.scrollParent[0].scrollTop-f.scrollSpeed;if(!f.axis||f.axis!="y")if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-d.pageX<f.scrollSensitivity)c.scrollParent[0].scrollLeft=g=c.scrollParent[0].scrollLeft+f.scrollSpeed;else if(d.pageX-c.overflowOffset.left<f.scrollSensitivity)c.scrollParent[0].scrollLeft=g=c.scrollParent[0].scrollLeft-f.scrollSpeed}else{if(!f.axis||f.axis!="x")if(d.pageY-a(document).scrollTop()<f.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed);
-else if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity)g=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed);if(!f.axis||f.axis!="y")if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity)g=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}g!==false&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,
-d)}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var f=a(this),g=f.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})})},drag:function(d,c){for(var f=a(this).data("draggable"),g=f.options,e=g.snapTolerance,i=c.offset.left,b=i+f.helperProportions.width,h=c.offset.top,
-j=h+f.helperProportions.height,l=f.snapElements.length-1;l>=0;l--){var o=f.snapElements[l].left,n=o+f.snapElements[l].width,k=f.snapElements[l].top,m=k+f.snapElements[l].height;if(o-e<i&&i<n+e&&k-e<h&&h<m+e||o-e<i&&i<n+e&&k-e<j&&j<m+e||o-e<b&&b<n+e&&k-e<h&&h<m+e||o-e<b&&b<n+e&&k-e<j&&j<m+e){if(g.snapMode!="inner"){var p=Math.abs(k-j)<=e,q=Math.abs(m-h)<=e,s=Math.abs(o-b)<=e,r=Math.abs(n-i)<=e;if(p)c.position.top=f._convertPositionTo("relative",{top:k-f.helperProportions.height,left:0}).top-f.margins.top;
-if(q)c.position.top=f._convertPositionTo("relative",{top:m,left:0}).top-f.margins.top;if(s)c.position.left=f._convertPositionTo("relative",{top:0,left:o-f.helperProportions.width}).left-f.margins.left;if(r)c.position.left=f._convertPositionTo("relative",{top:0,left:n}).left-f.margins.left}var u=p||q||s||r;if(g.snapMode!="outer"){p=Math.abs(k-h)<=e;q=Math.abs(m-j)<=e;s=Math.abs(o-i)<=e;r=Math.abs(n-b)<=e;if(p)c.position.top=f._convertPositionTo("relative",{top:k,left:0}).top-f.margins.top;if(q)c.position.top=
-f._convertPositionTo("relative",{top:m-f.helperProportions.height,left:0}).top-f.margins.top;if(s)c.position.left=f._convertPositionTo("relative",{top:0,left:o}).left-f.margins.left;if(r)c.position.left=f._convertPositionTo("relative",{top:0,left:n-f.helperProportions.width}).left-f.margins.left}if(!f.snapElements[l].snapping&&(p||q||s||r||u))f.options.snap.snap&&f.options.snap.snap.call(f.element,d,a.extend(f._uiHash(),{snapItem:f.snapElements[l].item}));f.snapElements[l].snapping=p||q||s||r||u}else{f.snapElements[l].snapping&&
-f.options.snap.release&&f.options.snap.release.call(f.element,d,a.extend(f._uiHash(),{snapItem:f.snapElements[l].item}));f.snapElements[l].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(f,g){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(f){this.style.zIndex=c+f});this[0].style.zIndex=c+d.length}}});
-a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex"))c._zIndex=d.css("zIndex");d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
-(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(f){return f.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);
-d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;c<d.length;c++)d[c]==this&&d.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(d,c){if(d=="accept")this.accept=a.isFunction(c)?c:function(f){return f.is(c)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&
-this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
-this._trigger("over",d,this.ui(c))}},_out:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",d,this.ui(c))}},_drop:function(d,c){var f=c||a.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0])return false;var g=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=
-a.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==f.options.scope&&e.accept.call(e.element[0],f.currentItem||f.element)&&a.ui.intersect(f,a.extend(e,{offset:e.element.offset()}),e.options.tolerance)){g=true;return false}});if(g)return false;if(this.accept.call(this.element[0],f.currentItem||f.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",
-d,this.ui(f));return this.element}return false},ui:function(d){return{draggable:d.currentItem||d.element,helper:d.helper,position:d.position,offset:d.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.13"});a.ui.intersect=function(d,c,f){if(!c.offset)return false;var g=(d.positionAbs||d.position.absolute).left,e=g+d.helperProportions.width,i=(d.positionAbs||d.position.absolute).top,b=i+d.helperProportions.height,h=c.offset.left,j=h+c.proportions.width,l=c.offset.top,o=l+c.proportions.height;
-switch(f){case "fit":return h<=g&&e<=j&&l<=i&&b<=o;case "intersect":return h<g+d.helperProportions.width/2&&e-d.helperProportions.width/2<j&&l<i+d.helperProportions.height/2&&b-d.helperProportions.height/2<o;case "pointer":return a.ui.isOver((d.positionAbs||d.position.absolute).top+(d.clickOffset||d.offset.click).top,(d.positionAbs||d.position.absolute).left+(d.clickOffset||d.offset.click).left,l,h,c.proportions.height,c.proportions.width);case "touch":return(i>=l&&i<=o||b>=l&&b<=o||i<l&&b>o)&&(g>=
-h&&g<=j||e>=h&&e<=j||g<h&&e>j);default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(d,c){var f=a.ui.ddmanager.droppables[d.options.scope]||[],g=c?c.type:null,e=(d.currentItem||d.element).find(":data(droppable)").andSelf(),i=0;a:for(;i<f.length;i++)if(!(f[i].options.disabled||d&&!f[i].accept.call(f[i].element[0],d.currentItem||d.element))){for(var b=0;b<e.length;b++)if(e[b]==f[i].element[0]){f[i].proportions.height=0;continue a}f[i].visible=f[i].element.css("display")!=
-"none";if(f[i].visible){g=="mousedown"&&f[i]._activate.call(f[i],c);f[i].offset=f[i].element.offset();f[i].proportions={width:f[i].element[0].offsetWidth,height:f[i].element[0].offsetHeight}}}},drop:function(d,c){var f=false;a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(d,this,this.options.tolerance))f=f||this._drop.call(this,c);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],d.currentItem||
-d.element)){this.isout=1;this.isover=0;this._deactivate.call(this,c)}}});return f},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var f=a.ui.intersect(d,this,this.options.tolerance);if(f=!f&&this.isover==1?"isout":f&&this.isover==0?"isover":null){var g;if(this.options.greedy){var e=this.element.parents(":data(droppable):eq(0)");if(e.length){g=
-a.data(e[0],"droppable");g.greedyChild=f=="isover"?1:0}}if(g&&f=="isover"){g.isover=0;g.isout=1;g._out.call(g,c)}this[f]=1;this[f=="isout"?"isover":"isout"]=0;this[f=="isover"?"_over":"_out"].call(this,c);if(g&&f=="isout"){g.isout=0;g.isover=1;g._over.call(g,c)}}}})}}})(jQuery);
-(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,g=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,
-_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
-top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
-this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=g.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
-nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var e=this.handles.split(",");this.handles={};for(var i=0;i<e.length;i++){var b=a.trim(e[i]),h=a('<div class="ui-resizable-handle '+("ui-resizable-"+b)+'"></div>');/sw|se|ne|nw/.test(b)&&h.css({zIndex:++g.zIndex});"se"==b&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[b]=".ui-resizable-"+b;this.element.append(h)}}this._renderAxis=function(j){j=j||this.element;for(var l in this.handles){if(this.handles[l].constructor==
-String)this.handles[l]=a(this.handles[l],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var o=a(this.handles[l],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(l)?o.outerHeight():o.outerWidth();o=["padding",/ne|nw|n/.test(l)?"Top":/se|sw|s/.test(l)?"Bottom":/^e$/.test(l)?"Right":"Left"].join("");j.css(o,n);this._proportionallyResize()}a(this.handles[l])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();
-this._handles.mouseover(function(){if(!f.resizing){if(this.className)var j=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=j&&j[1]?j[1]:"se"}});if(g.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){if(!g.disabled){a(this).removeClass("ui-resizable-autohide");f._handles.show()}},function(){if(!g.disabled)if(!f.resizing){a(this).addClass("ui-resizable-autohide");f._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();
-var f=function(e){a(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);var g=this.element;g.after(this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(f){var g=
-false;for(var e in this.handles)if(a(this.handles[e])[0]==f.target)g=true;return!this.options.disabled&&g},_mouseStart:function(f){var g=this.options,e=this.element.position(),i=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(i.is(".ui-draggable")||/absolute/.test(i.css("position")))i.css({position:"absolute",top:e.top,left:e.left});a.browser.opera&&/relative/.test(i.css("position"))&&i.css({position:"relative",top:"auto",left:"auto"});
-this._renderProxy();e=d(this.helper.css("left"));var b=d(this.helper.css("top"));if(g.containment){e+=a(g.containment).scrollLeft()||0;b+=a(g.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:e,top:b};this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};this.originalPosition={left:e,top:b};this.sizeDiff=
-{width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;g=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",g=="auto"?this.axis+"-resize":g);i.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(f){var g=this.helper,e=this.originalMousePosition,i=this._change[this.axis];
-if(!i)return false;e=i.apply(this,[f,f.pageX-e.left||0,f.pageY-e.top||0]);if(this._aspectRatio||f.shiftKey)e=this._updateRatio(e,f);e=this._respectSize(e,f);this._propagate("resize",f);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(e);this._trigger("resize",f,this.ui());return false},_mouseStop:function(f){this.resizing=
-false;var g=this.options,e=this;if(this._helper){var i=this._proportionallyResizeElements,b=i.length&&/textarea/i.test(i[0].nodeName);i=b&&a.ui.hasScroll(i[0],"left")?0:e.sizeDiff.height;b=b?0:e.sizeDiff.width;b={width:e.helper.width()-b,height:e.helper.height()-i};i=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null;var h=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;g.animate||this.element.css(a.extend(b,{top:h,left:i}));e.helper.height(e.size.height);
-e.helper.width(e.size.width);this._helper&&!g.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",f);this._helper&&this.helper.remove();return false},_updateCache:function(f){this.offset=this.helper.offset();if(c(f.left))this.position.left=f.left;if(c(f.top))this.position.top=f.top;if(c(f.height))this.size.height=f.height;if(c(f.width))this.size.width=f.width},_updateRatio:function(f){var g=this.position,e=this.size,
-i=this.axis;if(f.height)f.width=e.height*this.aspectRatio;else if(f.width)f.height=e.width/this.aspectRatio;if(i=="sw"){f.left=g.left+(e.width-f.width);f.top=null}if(i=="nw"){f.top=g.top+(e.height-f.height);f.left=g.left+(e.width-f.width)}return f},_respectSize:function(f){var g=this.options,e=this.axis,i=c(f.width)&&g.maxWidth&&g.maxWidth<f.width,b=c(f.height)&&g.maxHeight&&g.maxHeight<f.height,h=c(f.width)&&g.minWidth&&g.minWidth>f.width,j=c(f.height)&&g.minHeight&&g.minHeight>f.height;if(h)f.width=
-g.minWidth;if(j)f.height=g.minHeight;if(i)f.width=g.maxWidth;if(b)f.height=g.maxHeight;var l=this.originalPosition.left+this.originalSize.width,o=this.position.top+this.size.height,n=/sw|nw|w/.test(e);e=/nw|ne|n/.test(e);if(h&&n)f.left=l-g.minWidth;if(i&&n)f.left=l-g.maxWidth;if(j&&e)f.top=o-g.minHeight;if(b&&e)f.top=o-g.maxHeight;if((g=!f.width&&!f.height)&&!f.left&&f.top)f.top=null;else if(g&&!f.top&&f.left)f.left=null;return f},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=
-this.helper||this.element,g=0;g<this._proportionallyResizeElements.length;g++){var e=this._proportionallyResizeElements[g];if(!this.borderDif){var i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],b=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(i,function(h,j){h=parseInt(h,10)||0;j=parseInt(b[j],10)||0;return h+j})}a.browser.msie&&(a(f).is(":hidden")||a(f).parents(":hidden").length)||
-e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var g=a.browser.msie&&a.browser.version<7,e=g?1:0;g=g?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-
-e+"px",top:this.elementOffset.top-e+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(f,g){return{width:this.originalSize.width+g}},w:function(f,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(f,g,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(f,g,e){return{height:this.originalSize.height+e}},se:function(f,g,e){return a.extend(this._change.s.apply(this,
-arguments),this._change.e.apply(this,[f,g,e]))},sw:function(f,g,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,g,e]))},ne:function(f,g,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,g,e]))},nw:function(f,g,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,g,e]))}},_propagate:function(f,g){a.ui.plugin.call(this,f,[g,this.ui()]);f!="resize"&&this._trigger(f,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
-element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.13"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var f=a(this).data("resizable").options,g=function(e){a(e).each(function(){var i=a(this);i.data("resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10),position:i.css("position")})})};
-if(typeof f.alsoResize=="object"&&!f.alsoResize.parentNode)if(f.alsoResize.length){f.alsoResize=f.alsoResize[0];g(f.alsoResize)}else a.each(f.alsoResize,function(e){g(e)});else g(f.alsoResize)},resize:function(f,g){var e=a(this).data("resizable");f=e.options;var i=e.originalSize,b=e.originalPosition,h={height:e.size.height-i.height||0,width:e.size.width-i.width||0,top:e.position.top-b.top||0,left:e.position.left-b.left||0},j=function(l,o){a(l).each(function(){var n=a(this),k=a(this).data("resizable-alsoresize"),
-m={},p=o&&o.length?o:n.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(p,function(q,s){if((q=(k[s]||0)+(h[s]||0))&&q>=0)m[s]=q||null});if(a.browser.opera&&/relative/.test(n.css("position"))){e._revertToRelativePosition=true;n.css({position:"absolute",top:"auto",left:"auto"})}n.css(m)})};typeof f.alsoResize=="object"&&!f.alsoResize.nodeType?a.each(f.alsoResize,function(l,o){j(l,o)}):j(f.alsoResize)},stop:function(){var f=a(this).data("resizable"),g=f.options,
-e=function(i){a(i).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};if(f._revertToRelativePosition){f._revertToRelativePosition=false;typeof g.alsoResize=="object"&&!g.alsoResize.nodeType?a.each(g.alsoResize,function(i){e(i)}):e(g.alsoResize)}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(f){var g=a(this).data("resizable"),e=g.options,i=g._proportionallyResizeElements,b=i.length&&/textarea/i.test(i[0].nodeName),
-h=b&&a.ui.hasScroll(i[0],"left")?0:g.sizeDiff.height;b={width:g.size.width-(b?0:g.sizeDiff.width),height:g.size.height-h};h=parseInt(g.element.css("left"),10)+(g.position.left-g.originalPosition.left)||null;var j=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(a.extend(b,j&&h?{top:j,left:h}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var l={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),
-10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};i&&i.length&&a(i[0]).css({width:l.width,height:l.height});g._updateCache(l);g._propagate("resize",f)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var f=a(this).data("resizable"),g=f.element,e=f.options.containment;if(g=e instanceof a?e.get(0):/parent/.test(e)?g.parent().get(0):e){f.containerElement=a(g);if(/document/.test(e)||e==document){f.containerOffset={left:0,top:0};f.containerPosition={left:0,
-top:0};f.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var i=a(g),b=[];a(["Top","Right","Left","Bottom"]).each(function(l,o){b[l]=d(i.css("padding"+o))});f.containerOffset=i.offset();f.containerPosition=i.position();f.containerSize={height:i.innerHeight()-b[3],width:i.innerWidth()-b[1]};e=f.containerOffset;var h=f.containerSize.height,j=f.containerSize.width;j=a.ui.hasScroll(g,"left")?g.scrollWidth:j;
-h=a.ui.hasScroll(g)?g.scrollHeight:h;f.parentData={element:g,left:e.left,top:e.top,width:j,height:h}}}},resize:function(f){var g=a(this).data("resizable"),e=g.options,i=g.containerOffset,b=g.position;f=g._aspectRatio||f.shiftKey;var h={top:0,left:0},j=g.containerElement;if(j[0]!=document&&/static/.test(j.css("position")))h=i;if(b.left<(g._helper?i.left:0)){g.size.width+=g._helper?g.position.left-i.left:g.position.left-h.left;if(f)g.size.height=g.size.width/e.aspectRatio;g.position.left=e.helper?i.left:
-0}if(b.top<(g._helper?i.top:0)){g.size.height+=g._helper?g.position.top-i.top:g.position.top;if(f)g.size.width=g.size.height*e.aspectRatio;g.position.top=g._helper?i.top:0}g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;e=Math.abs((g._helper?g.offset.left-h.left:g.offset.left-h.left)+g.sizeDiff.width);i=Math.abs((g._helper?g.offset.top-h.top:g.offset.top-i.top)+g.sizeDiff.height);b=g.containerElement.get(0)==g.element.parent().get(0);h=/relative|absolute/.test(g.containerElement.css("position"));
-if(b&&h)e-=g.parentData.left;if(e+g.size.width>=g.parentData.width){g.size.width=g.parentData.width-e;if(f)g.size.height=g.size.width/g.aspectRatio}if(i+g.size.height>=g.parentData.height){g.size.height=g.parentData.height-i;if(f)g.size.width=g.size.height*g.aspectRatio}},stop:function(){var f=a(this).data("resizable"),g=f.options,e=f.containerOffset,i=f.containerPosition,b=f.containerElement,h=a(f.helper),j=h.offset(),l=h.outerWidth()-f.sizeDiff.width;h=h.outerHeight()-f.sizeDiff.height;f._helper&&
-!g.animate&&/relative/.test(b.css("position"))&&a(this).css({left:j.left-i.left-e.left,width:l,height:h});f._helper&&!g.animate&&/static/.test(b.css("position"))&&a(this).css({left:j.left-i.left-e.left,width:l,height:h})}});a.ui.plugin.add("resizable","ghost",{start:function(){var f=a(this).data("resizable"),g=f.options,e=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost==
-"string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var f=a(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(){var f=a(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var f=a(this).data("resizable"),g=f.options,e=f.size,i=f.originalSize,b=f.originalPosition,h=f.axis;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;
-var j=Math.round((e.width-i.width)/(g.grid[0]||1))*(g.grid[0]||1);g=Math.round((e.height-i.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g}else if(/^(ne)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g;f.position.top=b.top-g}else{if(/^(sw)$/.test(h)){f.size.width=i.width+j;f.size.height=i.height+g}else{f.size.width=i.width+j;f.size.height=i.height+g;f.position.top=b.top-g}f.position.left=b.left-j}}});var d=function(f){return parseInt(f,
-10)||0},c=function(f){return!isNaN(parseInt(f,10))}})(jQuery);
-(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var d=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(d.options.filter,d.element[0]);c.each(function(){var f=a(this),g=f.offset();a.data(this,"selectable-item",{element:this,$element:f,left:g.left,top:g.top,right:g.left+f.outerWidth(),bottom:g.top+f.outerHeight(),startselected:false,selected:f.hasClass("ui-selected"),
-selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(d){var c=this;this.opos=[d.pageX,
-d.pageY];if(!this.options.disabled){var f=this.options;this.selectees=a(f.filter,this.element[0]);this._trigger("start",d);a(f.appendTo).append(this.helper);this.helper.css({left:d.clientX,top:d.clientY,width:0,height:0});f.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var g=a.data(this,"selectable-item");g.startselected=true;if(!d.metaKey){g.$element.removeClass("ui-selected");g.selected=false;g.$element.addClass("ui-unselecting");g.unselecting=true;c._trigger("unselecting",
-d,{unselecting:g.element})}});a(d.target).parents().andSelf().each(function(){var g=a.data(this,"selectable-item");if(g){var e=!d.metaKey||!g.$element.hasClass("ui-selected");g.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting");g.unselecting=!e;g.selecting=e;(g.selected=e)?c._trigger("selecting",d,{selecting:g.element}):c._trigger("unselecting",d,{unselecting:g.element});return false}})}},_mouseDrag:function(d){var c=this;this.dragged=true;if(!this.options.disabled){var f=
-this.options,g=this.opos[0],e=this.opos[1],i=d.pageX,b=d.pageY;if(g>i){var h=i;i=g;g=h}if(e>b){h=b;b=e;e=h}this.helper.css({left:g,top:e,width:i-g,height:b-e});this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!(!j||j.element==c.element[0])){var l=false;if(f.tolerance=="touch")l=!(j.left>i||j.right<g||j.top>b||j.bottom<e);else if(f.tolerance=="fit")l=j.left>g&&j.right<i&&j.top>e&&j.bottom<b;if(l){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");
-j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;c._trigger("selecting",d,{selecting:j.element})}}else{if(j.selecting)if(d.metaKey&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}c._trigger("unselecting",d,{unselecting:j.element})}if(j.selected)if(!d.metaKey&&
-!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;c._trigger("unselecting",d,{unselecting:j.element})}}}});return false}},_mouseStop:function(d){var c=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var f=a.data(this,"selectable-item");f.$element.removeClass("ui-unselecting");f.unselecting=false;f.startselected=false;c._trigger("unselected",d,{unselected:f.element})});a(".ui-selecting",this.element[0]).each(function(){var f=
-a.data(this,"selectable-item");f.$element.removeClass("ui-selecting").addClass("ui-selected");f.selecting=false;f.selected=true;f.startselected=true;c._trigger("selected",d,{selected:f.element})});this._trigger("stop",d);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.13"})})(jQuery);
-(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var d=this.options;this.containerCache={};this.element.addClass("ui-sortable");
-this.refresh();this.floating=this.items.length?d.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--)this.items[d].item.removeData("sortable-item");return this},_setOption:function(d,c){if(d===
-"disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,c){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(d);var f=null,g=this;a(d.target).parents().each(function(){if(a.data(this,"sortable-item")==g){f=a(this);return false}});if(a.data(d.target,"sortable-item")==g)f=a(d.target);if(!f)return false;if(this.options.handle&&
-!c){var e=false;a(this.options.handle,f).find("*").andSelf().each(function(){if(this==d.target)e=true});if(!e)return false}this.currentItem=f;this._removeCurrentsFromItems();return true},_mouseStart:function(d,c,f){c=this.options;var g=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(d);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,
-left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
-this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",c.cursor)}if(c.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",c.opacity)}if(c.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",c.zIndex)}if(this.scrollParent[0]!=
-document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",d,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!f)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",d,g._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(d);
-return true},_mouseDrag:function(d){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var c=this.options,f=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop+c.scrollSpeed;else if(d.pageY-this.overflowOffset.top<
-c.scrollSensitivity)this.scrollParent[0].scrollTop=f=this.scrollParent[0].scrollTop-c.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft+c.scrollSpeed;else if(d.pageX-this.overflowOffset.left<c.scrollSensitivity)this.scrollParent[0].scrollLeft=f=this.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(d.pageY-a(document).scrollTop()<c.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()-
-c.scrollSpeed);else if(a(window).height()-(d.pageY-a(document).scrollTop())<c.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed);if(d.pageX-a(document).scrollLeft()<c.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed);else if(a(window).width()-(d.pageX-a(document).scrollLeft())<c.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)}f!==false&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,
-d)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;c>=0;c--){f=this.items[c];var g=f.item[0],e=this._intersectsWithPointer(f);if(e)if(g!=this.currentItem[0]&&this.placeholder[e==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],
-g):true)){this.direction=e==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(d,f);else break;this._trigger("change",d,this._uiHash());break}}this._contactContainers(d);a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);this._trigger("sort",d,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(d,c){if(d){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,d);if(this.options.revert){var f=this;c=f.placeholder.offset();
-f.reverting=true;a(this.helper).animate({left:c.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(d)})}else this._clear(d,c);return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
-this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,
-dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(d){var c=this._getItemsAsjQuery(d&&d.connected),f=[];d=d||{};a(c).each(function(){var g=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[-=_](.+)/);if(g)f.push((d.key||g[1]+"[]")+"="+(d.key&&d.expression?g[1]:g[2]))});!f.length&&d.key&&f.push(d.key+"=");return f.join("&")},
-toArray:function(d){var c=this._getItemsAsjQuery(d&&d.connected),f=[];d=d||{};c.each(function(){f.push(a(d.item||this).attr(d.attribute||"id")||"")});return f},_intersectsWith:function(d){var c=this.positionAbs.left,f=c+this.helperProportions.width,g=this.positionAbs.top,e=g+this.helperProportions.height,i=d.left,b=i+d.width,h=d.top,j=h+d.height,l=this.offset.click.top,o=this.offset.click.left;l=g+l>h&&g+l<j&&c+o>i&&c+o<b;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||
-this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?l:i<c+this.helperProportions.width/2&&f-this.helperProportions.width/2<b&&h<g+this.helperProportions.height/2&&e-this.helperProportions.height/2<j},_intersectsWithPointer:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width);c=c&&d;d=this._getDragVerticalDirection();
-var f=this._getDragHorizontalDirection();if(!c)return false;return this.floating?f&&f=="right"||d=="down"?2:1:d&&(d=="down"?2:1)},_intersectsWithSides:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width);var f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&d||g=="left"&&!d:f&&(f=="down"&&c||f=="up"&&!c)},
-_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!=0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!=0&&(d>0?"right":"left")},refresh:function(d){this._refreshItems(d);this.refreshPositions();return this},_connectWith:function(){var d=this.options;return d.connectWith.constructor==String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){var c=[],f=[],g=this._connectWith();
-if(g&&d)for(d=g.length-1;d>=0;d--)for(var e=a(g[d]),i=e.length-1;i>=0;i--){var b=a.data(e[i],"sortable");if(b&&b!=this&&!b.options.disabled)f.push([a.isFunction(b.options.items)?b.options.items.call(b.element):a(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}f.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
-this]);for(d=f.length-1;d>=0;d--)f[d][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var d=this.currentItem.find(":data(sortable-item)"),c=0;c<this.items.length;c++)for(var f=0;f<d.length;f++)d[f]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(d){this.items=[];this.containers=[this];var c=this.items,f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):a(this.options.items,this.element),
-this]],g=this._connectWith();if(g)for(var e=g.length-1;e>=0;e--)for(var i=a(g[e]),b=i.length-1;b>=0;b--){var h=a.data(i[b],"sortable");if(h&&h!=this&&!h.options.disabled){f.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],d,{item:this.currentItem}):a(h.options.items,h.element),h]);this.containers.push(h)}}for(e=f.length-1;e>=0;e--){d=f[e][1];g=f[e][0];b=0;for(i=g.length;b<i;b++){h=a(g[b]);h.data("sortable-item",d);c.push({item:h,instance:d,width:0,height:0,left:0,top:0})}}},refreshPositions:function(d){if(this.offsetParent&&
-this.helper)this.offset.parent=this._getParentOffset();for(var c=this.items.length-1;c>=0;c--){var f=this.items[c];if(!(f.instance!=this.currentContainer&&this.currentContainer&&f.item[0]!=this.currentItem[0])){var g=this.options.toleranceElement?a(this.options.toleranceElement,f.item):f.item;if(!d){f.width=g.outerWidth();f.height=g.outerHeight()}g=g.offset();f.left=g.left;f.top=g.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=
-this.containers.length-1;c>=0;c--){g=this.containers[c].element.offset();this.containers[c].containerCache.left=g.left;this.containers[c].containerCache.top=g.top;this.containers[c].containerCache.width=this.containers[c].element.outerWidth();this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(d){var c=d||this,f=c.options;if(!f.placeholder||f.placeholder.constructor==String){var g=f.placeholder;f.placeholder={element:function(){var e=
-a(document.createElement(c.currentItem[0].nodeName)).addClass(g||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g)e.style.visibility="hidden";return e},update:function(e,i){if(!(g&&!f.forcePlaceholderSize)){i.height()||i.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10));i.width()||i.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||
-0,10))}}}}c.placeholder=a(f.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);f.placeholder.update(c,c.placeholder)},_contactContainers:function(d){for(var c=null,f=null,g=this.containers.length-1;g>=0;g--)if(!a.ui.contains(this.currentItem[0],this.containers[g].element[0]))if(this._intersectsWith(this.containers[g].containerCache)){if(!(c&&a.ui.contains(this.containers[g].element[0],c.element[0]))){c=this.containers[g];f=g}}else if(this.containers[g].containerCache.over){this.containers[g]._trigger("out",
-d,this._uiHash(this));this.containers[g].containerCache.over=0}if(c)if(this.containers.length===1){this.containers[f]._trigger("over",d,this._uiHash(this));this.containers[f].containerCache.over=1}else if(this.currentContainer!=this.containers[f]){c=1E4;g=null;for(var e=this.positionAbs[this.containers[f].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[f].element[0],this.items[i].item[0])){var b=this.items[i][this.containers[f].floating?"left":"top"];if(Math.abs(b-
-e)<c){c=Math.abs(b-e);g=this.items[i]}}if(g||this.options.dropOnEmpty){this.currentContainer=this.containers[f];g?this._rearrange(d,g,null,true):this._rearrange(d,null,this.containers[f].element,true);this._trigger("change",d,this._uiHash());this.containers[f]._trigger("change",d,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",d,this._uiHash(this));this.containers[f].containerCache.over=1}}},_createHelper:function(d){var c=
-this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(d[0].style.width==
-""||c.forceHelperSize)d.width(this.currentItem.width());if(d[0].style.height==""||c.forceHelperSize)d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string")d=d.split(" ");if(a.isArray(d))d={left:+d[0],top:+d[1]||0};if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=d.top+this.margins.top;if("bottom"in d)this.offset.click.top=
-this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)d=
-{top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),
-10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(d.containment=="document"?
-document:window).width()-this.helperProportions.width-this.margins.left,(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)){var c=a(d.containment)[0];d=a(d.containment).offset();var f=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),
-10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(f?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(f?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,c){if(!c)c=
-this.position;d=d=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&
-this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(d){var c=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();
-var e=d.pageX,i=d.pageY;if(this.originalPosition){if(this.containment){if(d.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(d.pageY-this.offset.click.top<this.containment[1])i=this.containment[1]+this.offset.click.top;if(d.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(d.pageY-this.offset.click.top>this.containment[3])i=this.containment[3]+this.offset.click.top}if(c.grid){i=this.originalPageY+Math.round((i-
-this.originalPageY)/c.grid[1])*c.grid[1];i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<this.containment[1])?i-c.grid[1]:i+c.grid[1]:i;e=this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-c.grid[0]:e+c.grid[0]:e}}return{top:i-
-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_rearrange:function(d,c,f,g){f?f[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],
-this.direction=="down"?c.item[0]:c.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var e=this,i=this.counter;window.setTimeout(function(){i==e.counter&&e.refreshPositions(!g)},0)},_clear:function(d,c){this.reverting=false;var f=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS)if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static")this._storedCSS[g]=
-"";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&f.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c)f.push(function(e){this._trigger("update",e,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||f.push(function(e){this._trigger("remove",
-e,this._uiHash())});for(g=this.containers.length-1;g>=0;g--)if(a.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!c){f.push(function(e){return function(i){e._trigger("receive",i,this._uiHash(this))}}.call(this,this.containers[g]));f.push(function(e){return function(i){e._trigger("update",i,this._uiHash(this))}}.call(this,this.containers[g]))}}for(g=this.containers.length-1;g>=0;g--){c||f.push(function(e){return function(i){e._trigger("deactivate",i,this._uiHash(this))}}.call(this,
-this.containers[g]));if(this.containers[g].containerCache.over){f.push(function(e){return function(i){e._trigger("out",i,this._uiHash(this))}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",
-d,this._uiHash());for(g=0;g<f.length;g++)f[g].call(this,d);this._trigger("stop",d,this._uiHash())}return false}c||this._trigger("beforeStop",d,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(g=0;g<f.length;g++)f[g].call(this,d);this._trigger("stop",d,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},
-_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.13"})})(jQuery);
-jQuery.effects||function(a,d){function c(n){var k;if(n&&n.constructor==Array&&n.length==3)return n;if(k=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)];if(k=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return[parseFloat(k[1])*2.55,parseFloat(k[2])*2.55,parseFloat(k[3])*2.55];if(k=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return[parseInt(k[1],
-16),parseInt(k[2],16),parseInt(k[3],16)];if(k=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return[parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(n))return j.transparent;return j[a.trim(n).toLowerCase()]}function f(n,k){var m;do{m=a.curCSS(n,k);if(m!=""&&m!="transparent"||a.nodeName(n,"body"))break;k="backgroundColor"}while(n=n.parentNode);return c(m)}function g(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,
-k={},m,p;if(n&&n.length&&n[0]&&n[n[0]])for(var q=n.length;q--;){m=n[q];if(typeof n[m]=="string"){p=m.replace(/\-(\w)/g,function(s,r){return r.toUpperCase()});k[p]=n[m]}}else for(m in n)if(typeof n[m]==="string")k[m]=n[m];return k}function e(n){var k,m;for(k in n){m=n[k];if(m==null||a.isFunction(m)||k in o||/scrollbar/.test(k)||!/color/i.test(k)&&isNaN(parseFloat(m)))delete n[k]}return n}function i(n,k){var m={_:0},p;for(p in k)if(n[p]!=k[p])m[p]=k[p];return m}function b(n,k,m,p){if(typeof n=="object"){p=
-k;m=null;k=n;n=k.effect}if(a.isFunction(k)){p=k;m=null;k={}}if(typeof k=="number"||a.fx.speeds[k]){p=m;m=k;k={}}if(a.isFunction(m)){p=m;m=null}k=k||{};m=m||k.duration;m=a.fx.off?0:typeof m=="number"?m:m in a.fx.speeds?a.fx.speeds[m]:a.fx.speeds._default;p=p||k.complete;return[n,k,m,p]}function h(n){if(!n||typeof n==="number"||a.fx.speeds[n])return true;if(typeof n==="string"&&!a.effects[n])return true;return false}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor",
-"borderTopColor","borderColor","color","outlineColor"],function(n,k){a.fx.step[k]=function(m){if(!m.colorInit){m.start=f(m.elem,k);m.end=c(m.end);m.colorInit=true}m.elem.style[k]="rgb("+Math.max(Math.min(parseInt(m.pos*(m.end[0]-m.start[0])+m.start[0],10),255),0)+","+Math.max(Math.min(parseInt(m.pos*(m.end[1]-m.start[1])+m.start[1],10),255),0)+","+Math.max(Math.min(parseInt(m.pos*(m.end[2]-m.start[2])+m.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
-0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
-211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},l=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(n,k,m,
-p){if(a.isFunction(m)){p=m;m=null}return this.queue(function(){var q=a(this),s=q.attr("style")||" ",r=e(g.call(this)),u,v=q.attr("class");a.each(l,function(w,x){n[x]&&q[x+"Class"](n[x])});u=e(g.call(this));q.attr("class",v);q.animate(i(r,u),{queue:false,duration:k,easding:m,complete:function(){a.each(l,function(w,x){n[x]&&q[x+"Class"](n[x])});if(typeof q.attr("style")=="object"){q.attr("style").cssText="";q.attr("style").cssText=s}else q.attr("style",s);p&&p.apply(this,arguments);a.dequeue(this)}})})};
-a.fn.extend({_addClass:a.fn.addClass,addClass:function(n,k,m,p){return k?a.effects.animateClass.apply(this,[{add:n},k,m,p]):this._addClass(n)},_removeClass:a.fn.removeClass,removeClass:function(n,k,m,p){return k?a.effects.animateClass.apply(this,[{remove:n},k,m,p]):this._removeClass(n)},_toggleClass:a.fn.toggleClass,toggleClass:function(n,k,m,p,q){return typeof k=="boolean"||k===d?m?a.effects.animateClass.apply(this,[k?{add:n}:{remove:n},m,p,q]):this._toggleClass(n,k):a.effects.animateClass.apply(this,
-[{toggle:n},k,m,p])},switchClass:function(n,k,m,p,q){return a.effects.animateClass.apply(this,[{add:k,remove:n},m,p,q])}});a.extend(a.effects,{version:"1.8.13",save:function(n,k){for(var m=0;m<k.length;m++)k[m]!==null&&n.data("ec.storage."+k[m],n[0].style[k[m]])},restore:function(n,k){for(var m=0;m<k.length;m++)k[m]!==null&&n.css(k[m],n.data("ec.storage."+k[m]))},setMode:function(n,k){if(k=="toggle")k=n.is(":hidden")?"show":"hide";return k},getBaseline:function(n,k){var m;switch(n[0]){case "top":m=
-0;break;case "middle":m=0.5;break;case "bottom":m=1;break;default:m=n[0]/k.height}switch(n[1]){case "left":n=0;break;case "center":n=0.5;break;case "right":n=1;break;default:n=n[1]/k.width}return{x:n,y:m}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var k={width:n.outerWidth(true),height:n.outerHeight(true),"float":n.css("float")},m=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});
-n.wrap(m);m=n.parent();if(n.css("position")=="static"){m.css({position:"relative"});n.css({position:"relative"})}else{a.extend(k,{position:n.css("position"),zIndex:n.css("z-index")});a.each(["top","left","bottom","right"],function(p,q){k[q]=n.css(q);if(isNaN(parseInt(k[q],10)))k[q]="auto"});n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return m.css(k).show()},removeWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent().replaceWith(n);return n},setTransition:function(n,
-k,m,p){p=p||{};a.each(k,function(q,s){unit=n.cssUnit(s);if(unit[0]>0)p[s]=unit[0]*m+unit[1]});return p}});a.fn.extend({effect:function(n){var k=b.apply(this,arguments),m={options:k[1],duration:k[2],callback:k[3]};k=m.options.mode;var p=a.effects[n];if(a.fx.off||!p)return k?this[k](m.duration,m.callback):this.each(function(){m.callback&&m.callback.call(this)});return p.call(this,m)},_show:a.fn.show,show:function(n){if(h(n))return this._show.apply(this,arguments);else{var k=b.apply(this,arguments);
-k[1].mode="show";return this.effect.apply(this,k)}},_hide:a.fn.hide,hide:function(n){if(h(n))return this._hide.apply(this,arguments);else{var k=b.apply(this,arguments);k[1].mode="hide";return this.effect.apply(this,k)}},__toggle:a.fn.toggle,toggle:function(n){if(h(n)||typeof n==="boolean"||a.isFunction(n))return this.__toggle.apply(this,arguments);else{var k=b.apply(this,arguments);k[1].mode="toggle";return this.effect.apply(this,k)}},cssUnit:function(n){var k=this.css(n),m=[];a.each(["em","px","%",
-"pt"],function(p,q){if(k.indexOf(q)>0)m=[parseFloat(k),q]});return m}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(n,k,m,p,q){return a.easing[a.easing.def](n,k,m,p,q)},easeInQuad:function(n,k,m,p,q){return p*(k/=q)*k+m},easeOutQuad:function(n,k,m,p,q){return-p*(k/=q)*(k-2)+m},easeInOutQuad:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k+m;return-p/2*(--k*(k-2)-1)+m},easeInCubic:function(n,k,m,p,q){return p*(k/=q)*k*k+m},easeOutCubic:function(n,k,m,p,q){return p*
-((k=k/q-1)*k*k+1)+m},easeInOutCubic:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k*k+m;return p/2*((k-=2)*k*k+2)+m},easeInQuart:function(n,k,m,p,q){return p*(k/=q)*k*k*k+m},easeOutQuart:function(n,k,m,p,q){return-p*((k=k/q-1)*k*k*k-1)+m},easeInOutQuart:function(n,k,m,p,q){if((k/=q/2)<1)return p/2*k*k*k*k+m;return-p/2*((k-=2)*k*k*k-2)+m},easeInQuint:function(n,k,m,p,q){return p*(k/=q)*k*k*k*k+m},easeOutQuint:function(n,k,m,p,q){return p*((k=k/q-1)*k*k*k*k+1)+m},easeInOutQuint:function(n,k,m,p,q){if((k/=
-q/2)<1)return p/2*k*k*k*k*k+m;return p/2*((k-=2)*k*k*k*k+2)+m},easeInSine:function(n,k,m,p,q){return-p*Math.cos(k/q*(Math.PI/2))+p+m},easeOutSine:function(n,k,m,p,q){return p*Math.sin(k/q*(Math.PI/2))+m},easeInOutSine:function(n,k,m,p,q){return-p/2*(Math.cos(Math.PI*k/q)-1)+m},easeInExpo:function(n,k,m,p,q){return k==0?m:p*Math.pow(2,10*(k/q-1))+m},easeOutExpo:function(n,k,m,p,q){return k==q?m+p:p*(-Math.pow(2,-10*k/q)+1)+m},easeInOutExpo:function(n,k,m,p,q){if(k==0)return m;if(k==q)return m+p;if((k/=
-q/2)<1)return p/2*Math.pow(2,10*(k-1))+m;return p/2*(-Math.pow(2,-10*--k)+2)+m},easeInCirc:function(n,k,m,p,q){return-p*(Math.sqrt(1-(k/=q)*k)-1)+m},easeOutCirc:function(n,k,m,p,q){return p*Math.sqrt(1-(k=k/q-1)*k)+m},easeInOutCirc:function(n,k,m,p,q){if((k/=q/2)<1)return-p/2*(Math.sqrt(1-k*k)-1)+m;return p/2*(Math.sqrt(1-(k-=2)*k)+1)+m},easeInElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q)==1)return m+p;s||(s=q*0.3);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/
-r);return-(r*Math.pow(2,10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s))+m},easeOutElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q)==1)return m+p;s||(s=q*0.3);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/r);return r*Math.pow(2,-10*k)*Math.sin((k*q-n)*2*Math.PI/s)+p+m},easeInOutElastic:function(n,k,m,p,q){n=1.70158;var s=0,r=p;if(k==0)return m;if((k/=q/2)==2)return m+p;s||(s=q*0.3*1.5);if(r<Math.abs(p)){r=p;n=s/4}else n=s/(2*Math.PI)*Math.asin(p/r);if(k<1)return-0.5*
-r*Math.pow(2,10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s)+m;return r*Math.pow(2,-10*(k-=1))*Math.sin((k*q-n)*2*Math.PI/s)*0.5+p+m},easeInBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;return p*(k/=q)*k*((s+1)*k-s)+m},easeOutBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;return p*((k=k/q-1)*k*((s+1)*k+s)+1)+m},easeInOutBack:function(n,k,m,p,q,s){if(s==d)s=1.70158;if((k/=q/2)<1)return p/2*k*k*(((s*=1.525)+1)*k-s)+m;return p/2*((k-=2)*k*(((s*=1.525)+1)*k+s)+2)+m},easeInBounce:function(n,k,m,p,q){return p-a.easing.easeOutBounce(n,
-q-k,0,p,q)+m},easeOutBounce:function(n,k,m,p,q){return(k/=q)<1/2.75?p*7.5625*k*k+m:k<2/2.75?p*(7.5625*(k-=1.5/2.75)*k+0.75)+m:k<2.5/2.75?p*(7.5625*(k-=2.25/2.75)*k+0.9375)+m:p*(7.5625*(k-=2.625/2.75)*k+0.984375)+m},easeInOutBounce:function(n,k,m,p,q){if(k<q/2)return a.easing.easeInBounce(n,k*2,0,p,q)*0.5+m;return a.easing.easeOutBounce(n,k*2-q,0,p,q)*0.5+p*0.5+m}})}(jQuery);
-(function(a){a.effects.blind=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"vertical";a.effects.save(c,f);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),b=e=="vertical"?"height":"width";e=e=="vertical"?i.height():i.width();g=="show"&&i.css(b,0);var h={};h[b]=g=="show"?e:0;i.animate(h,d.duration,d.options.easing,function(){g=="hide"&&c.hide();a.effects.restore(c,
-f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
-(function(a){a.effects.bounce=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"effect"),e=d.options.direction||"up",i=d.options.distance||20,b=d.options.times||5,h=d.duration||250;/show|hide/.test(g)&&f.push("opacity");a.effects.save(c,f);c.show();a.effects.createWrapper(c);var j=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";i=d.options.distance||(j=="top"?c.outerHeight({margin:true})/3:c.outerWidth({margin:true})/
-3);if(g=="show")c.css("opacity",0).css(j,e=="pos"?-i:i);if(g=="hide")i/=b*2;g!="hide"&&b--;if(g=="show"){var l={opacity:1};l[j]=(e=="pos"?"+=":"-=")+i;c.animate(l,h/2,d.options.easing);i/=2;b--}for(l=0;l<b;l++){var o={},n={};o[j]=(e=="pos"?"-=":"+=")+i;n[j]=(e=="pos"?"+=":"-=")+i;c.animate(o,h/2,d.options.easing).animate(n,h/2,d.options.easing);i=g=="hide"?i*2:i/2}if(g=="hide"){l={opacity:0};l[j]=(e=="pos"?"-=":"+=")+i;c.animate(l,h/2,d.options.easing,function(){c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);
-d.callback&&d.callback.apply(this,arguments)})}else{o={};n={};o[j]=(e=="pos"?"-=":"+=")+i;n[j]=(e=="pos"?"+=":"-=")+i;c.animate(o,h/2,d.options.easing).animate(n,h/2,d.options.easing,function(){a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
-(function(a){a.effects.clip=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"vertical";a.effects.save(c,f);c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"});i=c[0].tagName=="IMG"?i:c;var b={size:e=="vertical"?"height":"width",position:e=="vertical"?"top":"left"};e=e=="vertical"?i.height():i.width();if(g=="show"){i.css(b.size,0);i.css(b.position,
-e/2)}var h={};h[b.size]=g=="show"?e:0;h[b.position]=g=="show"?0:e/2;i.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.drop=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","opacity"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.direction||"left";a.effects.save(c,f);c.show();a.effects.createWrapper(c);var i=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";var b=d.options.distance||(i=="top"?c.outerHeight({margin:true})/2:c.outerWidth({margin:true})/2);if(g=="show")c.css("opacity",0).css(i,e=="pos"?-b:b);var h={opacity:g==
-"show"?1:0};h[i]=(g=="show"?e=="pos"?"+=":"-=":e=="pos"?"-=":"+=")+b;c.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.explode=function(d){return this.queue(function(){var c=d.options.pieces?Math.round(Math.sqrt(d.options.pieces)):3,f=d.options.pieces?Math.round(Math.sqrt(d.options.pieces)):3;d.options.mode=d.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":d.options.mode;var g=a(this).show().css("visibility","hidden"),e=g.offset();e.top-=parseInt(g.css("marginTop"),10)||0;e.left-=parseInt(g.css("marginLeft"),10)||0;for(var i=g.outerWidth(true),b=g.outerHeight(true),h=0;h<c;h++)for(var j=
-0;j<f;j++)g.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(i/f),top:-h*(b/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:i/f,height:b/c,left:e.left+j*(i/f)+(d.options.mode=="show"?(j-Math.floor(f/2))*(i/f):0),top:e.top+h*(b/c)+(d.options.mode=="show"?(h-Math.floor(c/2))*(b/c):0),opacity:d.options.mode=="show"?0:1}).animate({left:e.left+j*(i/f)+(d.options.mode=="show"?0:(j-Math.floor(f/2))*(i/f)),top:e.top+
-h*(b/c)+(d.options.mode=="show"?0:(h-Math.floor(c/2))*(b/c)),opacity:d.options.mode=="show"?1:0},d.duration||500);setTimeout(function(){d.options.mode=="show"?g.css({visibility:"visible"}):g.css({visibility:"visible"}).hide();d.callback&&d.callback.apply(g[0]);g.dequeue();a("div.ui-effects-explode").remove()},d.duration||500)})}})(jQuery);
-(function(a){a.effects.fade=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"hide");c.animate({opacity:f},{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.fold=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"hide"),e=d.options.size||15,i=!!d.options.horizFirst,b=d.duration?d.duration/2:a.fx.speeds._default/2;a.effects.save(c,f);c.show();var h=a.effects.createWrapper(c).css({overflow:"hidden"}),j=g=="show"!=i,l=j?["width","height"]:["height","width"];j=j?[h.width(),h.height()]:[h.height(),h.width()];var o=/([0-9]+)%/.exec(e);if(o)e=parseInt(o[1],
-10)/100*j[g=="hide"?0:1];if(g=="show")h.css(i?{height:0,width:e}:{height:e,width:0});i={};o={};i[l[0]]=g=="show"?j[0]:e;o[l[1]]=g=="show"?j[1]:0;h.animate(i,b,d.options.easing).animate(o,b,d.options.easing,function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);
-(function(a){a.effects.highlight=function(d){return this.queue(function(){var c=a(this),f=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(c,d.options.mode||"show"),e={backgroundColor:c.css("backgroundColor")};if(g=="hide")e.opacity=0;a.effects.save(c,f);c.show().css({backgroundImage:"none",backgroundColor:d.options.color||"#ffff99"}).animate(e,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);g=="show"&&!a.support.opacity&&
-this.style.removeAttribute("filter");d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.pulsate=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"show");times=(d.options.times||5)*2-1;duration=d.duration?d.duration/2:a.fx.speeds._default/2;isVisible=c.is(":visible");animateTo=0;if(!isVisible){c.css("opacity",0).show();animateTo=1}if(f=="hide"&&isVisible||f=="show"&&!isVisible)times--;for(f=0;f<times;f++){c.animate({opacity:animateTo},duration,d.options.easing);animateTo=(animateTo+1)%2}c.animate({opacity:animateTo},duration,
-d.options.easing,function(){animateTo==0&&c.hide();d.callback&&d.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);
-(function(a){a.effects.puff=function(d){return this.queue(function(){var c=a(this),f=a.effects.setMode(c,d.options.mode||"hide"),g=parseInt(d.options.percent,10)||150,e=g/100,i={height:c.height(),width:c.width()};a.extend(d.options,{fade:true,mode:f,percent:f=="hide"?g:100,from:f=="hide"?i:{height:i.height*e,width:i.width*e}});c.effect("scale",d.options,d.duration,d.callback);c.dequeue()})};a.effects.scale=function(d){return this.queue(function(){var c=a(this),f=a.extend(true,{},d.options),g=a.effects.setMode(c,
-d.options.mode||"effect"),e=parseInt(d.options.percent,10)||(parseInt(d.options.percent,10)==0?0:g=="hide"?0:100),i=d.options.direction||"both",b=d.options.origin;if(g!="effect"){f.origin=b||["middle","center"];f.restore=true}b={height:c.height(),width:c.width()};c.from=d.options.from||(g=="show"?{height:0,width:0}:b);e={y:i!="horizontal"?e/100:1,x:i!="vertical"?e/100:1};c.to={height:b.height*e.y,width:b.width*e.x};if(d.options.fade){if(g=="show"){c.from.opacity=0;c.to.opacity=1}if(g=="hide"){c.from.opacity=
-1;c.to.opacity=0}}f.from=c.from;f.to=c.to;f.mode=g;c.effect("size",f,d.duration,d.callback);c.dequeue()})};a.effects.size=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right","width","height","overflow","opacity"],g=["position","top","bottom","left","right","overflow","opacity"],e=["width","height","overflow"],i=["fontSize"],b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],
-j=a.effects.setMode(c,d.options.mode||"effect"),l=d.options.restore||false,o=d.options.scale||"both",n=d.options.origin,k={height:c.height(),width:c.width()};c.from=d.options.from||k;c.to=d.options.to||k;if(n){n=a.effects.getBaseline(n,k);c.from.top=(k.height-c.from.height)*n.y;c.from.left=(k.width-c.from.width)*n.x;c.to.top=(k.height-c.to.height)*n.y;c.to.left=(k.width-c.to.width)*n.x}var m={from:{y:c.from.height/k.height,x:c.from.width/k.width},to:{y:c.to.height/k.height,x:c.to.width/k.width}};
-if(o=="box"||o=="both"){if(m.from.y!=m.to.y){f=f.concat(b);c.from=a.effects.setTransition(c,b,m.from.y,c.from);c.to=a.effects.setTransition(c,b,m.to.y,c.to)}if(m.from.x!=m.to.x){f=f.concat(h);c.from=a.effects.setTransition(c,h,m.from.x,c.from);c.to=a.effects.setTransition(c,h,m.to.x,c.to)}}if(o=="content"||o=="both")if(m.from.y!=m.to.y){f=f.concat(i);c.from=a.effects.setTransition(c,i,m.from.y,c.from);c.to=a.effects.setTransition(c,i,m.to.y,c.to)}a.effects.save(c,l?f:g);c.show();a.effects.createWrapper(c);
-c.css("overflow","hidden").css(c.from);if(o=="content"||o=="both"){b=b.concat(["marginTop","marginBottom"]).concat(i);h=h.concat(["marginLeft","marginRight"]);e=f.concat(b).concat(h);c.find("*[width]").each(function(){child=a(this);l&&a.effects.save(child,e);var p={height:child.height(),width:child.width()};child.from={height:p.height*m.from.y,width:p.width*m.from.x};child.to={height:p.height*m.to.y,width:p.width*m.to.x};if(m.from.y!=m.to.y){child.from=a.effects.setTransition(child,b,m.from.y,child.from);
-child.to=a.effects.setTransition(child,b,m.to.y,child.to)}if(m.from.x!=m.to.x){child.from=a.effects.setTransition(child,h,m.from.x,child.from);child.to=a.effects.setTransition(child,h,m.to.x,child.to)}child.css(child.from);child.animate(child.to,d.duration,d.options.easing,function(){l&&a.effects.restore(child,e)})})}c.animate(c.to,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity);j=="hide"&&c.hide();a.effects.restore(c,
-l?f:g);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.shake=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"];a.effects.setMode(c,d.options.mode||"effect");var g=d.options.direction||"left",e=d.options.distance||20,i=d.options.times||3,b=d.duration||d.options.duration||140;a.effects.save(c,f);c.show();a.effects.createWrapper(c);var h=g=="up"||g=="down"?"top":"left",j=g=="up"||g=="left"?"pos":"neg";g={};var l={},o={};g[h]=(j=="pos"?"-=":"+=")+e;l[h]=(j=="pos"?"+=":"-=")+e*2;o[h]=
-(j=="pos"?"-=":"+=")+e*2;c.animate(g,b,d.options.easing);for(e=1;e<i;e++)c.animate(l,b,d.options.easing).animate(o,b,d.options.easing);c.animate(l,b,d.options.easing).animate(g,b/2,d.options.easing,function(){a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments)});c.queue("fx",function(){c.dequeue()});c.dequeue()})}})(jQuery);
-(function(a){a.effects.slide=function(d){return this.queue(function(){var c=a(this),f=["position","top","bottom","left","right"],g=a.effects.setMode(c,d.options.mode||"show"),e=d.options.direction||"left";a.effects.save(c,f);c.show();a.effects.createWrapper(c).css({overflow:"hidden"});var i=e=="up"||e=="down"?"top":"left";e=e=="up"||e=="left"?"pos":"neg";var b=d.options.distance||(i=="top"?c.outerHeight({margin:true}):c.outerWidth({margin:true}));if(g=="show")c.css(i,e=="pos"?isNaN(b)?"-"+b:-b:b);
-var h={};h[i]=(g=="show"?e=="pos"?"+=":"-=":e=="pos"?"-=":"+=")+b;c.animate(h,{queue:false,duration:d.duration,easing:d.options.easing,complete:function(){g=="hide"&&c.hide();a.effects.restore(c,f);a.effects.removeWrapper(c);d.callback&&d.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);
-(function(a){a.effects.transfer=function(d){return this.queue(function(){var c=a(this),f=a(d.options.to),g=f.offset();f={top:g.top,left:g.left,height:f.innerHeight(),width:f.innerWidth()};g=c.offset();var e=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(d.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,d.duration,d.options.easing,function(){e.remove();d.callback&&d.callback.apply(c[0],arguments);
-c.dequeue()})})}})(jQuery);
-(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var d=this,c=d.options;d.running=0;d.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");d.headers=
-d.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")});d.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
-if(c.navigation){var f=d.element.find("a").filter(c.navigationFilter).eq(0);if(f.length){var g=f.closest(".ui-accordion-header");d.active=g.length?g:f.closest(".ui-accordion-content").prev()}}d.active=d._findActive(d.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");d.active.next().addClass("ui-accordion-content-active");d._createIcons();d.resize();d.element.attr("role","tablist");d.headers.attr("role","tab").bind("keydown.accordion",
-function(e){return d._keydown(e)}).next().attr("role","tabpanel");d.headers.not(d.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();d.active.length?d.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):d.headers.eq(0).attr("tabIndex",0);a.browser.safari||d.headers.find("a").attr("tabIndex",-1);c.event&&d.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(e){d._clickHandler.call(d,e,this);e.preventDefault()})},_createIcons:function(){var d=
-this.options;if(d.icons){a("<span></span>").addClass("ui-icon "+d.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(d.icons.header).toggleClass(d.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var d=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
-this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(d.autoHeight||d.fillHeight)c.css("height","");return a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d=="active"&&this.activate(c);if(d=="icons"){this._destroyIcons();
-c&&this._createIcons()}if(d=="disabled")this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(d){if(!(this.options.disabled||d.altKey||d.ctrlKey)){var c=a.ui.keyCode,f=this.headers.length,g=this.headers.index(d.target),e=false;switch(d.keyCode){case c.RIGHT:case c.DOWN:e=this.headers[(g+1)%f];break;case c.LEFT:case c.UP:e=this.headers[(g-1+f)%f];break;case c.SPACE:case c.ENTER:this._clickHandler({target:d.target},d.target);
-d.preventDefault()}if(e){a(d.target).attr("tabIndex",-1);a(e).attr("tabIndex",0);e.focus();return false}return true}},resize:function(){var d=this.options,c;if(d.fillSpace){if(a.browser.msie){var f=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",f);this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+
-a(this).height()))}).css("overflow","auto")}else if(d.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c)}return this},activate:function(d){this.options.active=d;d=this._findActive(d)[0];this._clickHandler({target:d},d);return this},_findActive:function(d){return d?typeof d==="number"?this.headers.filter(":eq("+d+")"):this.headers.not(this.headers.not(d)):d===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(d,c){var f=this.options;
-if(!f.disabled)if(d.target){d=a(d.currentTarget||c);c=d[0]===this.active[0];f.active=f.collapsible&&c?false:this.headers.index(d);if(!(this.running||!f.collapsible&&c)){var g=this.active;h=d.next();i=this.active.next();b={options:f,newHeader:c&&f.collapsible?a([]):d,oldHeader:this.active,newContent:c&&f.collapsible?a([]):h,oldContent:i};var e=this.headers.index(this.active[0])>this.headers.index(d[0]);this.active=c?a([]):d;this._toggle(h,i,b,c,e);g.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(f.icons.headerSelected).addClass(f.icons.header);
-if(!c){d.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(f.icons.header).addClass(f.icons.headerSelected);d.next().addClass("ui-accordion-content-active")}}}else if(f.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(f.icons.headerSelected).addClass(f.icons.header);this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),
-b={options:f,newHeader:a([]),oldHeader:f.active,newContent:a([]),oldContent:i},h=this.active=a([]);this._toggle(h,i,b)}},_toggle:function(d,c,f,g,e){var i=this,b=i.options;i.toShow=d;i.toHide=c;i.data=f;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=c.size()===0?d.size():c.size();if(b.animated){f={};f=b.collapsible&&g?{toShow:a([]),toHide:c,complete:h,down:e,autoHeight:b.autoHeight||b.fillSpace}:{toShow:d,toHide:c,complete:h,down:e,autoHeight:b.autoHeight||
-b.fillSpace};if(!b.proxied)b.proxied=b.animated;if(!b.proxiedDuration)b.proxiedDuration=b.duration;b.animated=a.isFunction(b.proxied)?b.proxied(f):b.proxied;b.duration=a.isFunction(b.proxiedDuration)?b.proxiedDuration(f):b.proxiedDuration;g=a.ui.accordion.animations;var j=b.duration,l=b.animated;if(l&&!g[l]&&!a.easing[l])l="slide";g[l]||(g[l]=function(o){this.slide(o,{easing:l,duration:j||700})});g[l](f)}else{if(b.collapsible&&g)d.toggle();else{c.hide();d.show()}h(true)}c.prev().attr({"aria-expanded":"false",
-"aria-selected":"false",tabIndex:-1}).blur();d.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(d){this.running=d?0:--this.running;if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length)this.toHide.parent()[0].className=this.toHide.parent()[0].className;this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,{version:"1.8.13",
-animations:{slide:function(d,c){d=a.extend({easing:"swing",duration:300},d,c);if(d.toHide.size())if(d.toShow.size()){var f=d.toShow.css("overflow"),g=0,e={},i={},b;c=d.toShow;b=c[0].style.width;c.width(parseInt(c.parent().width(),10)-parseInt(c.css("paddingLeft"),10)-parseInt(c.css("paddingRight"),10)-(parseInt(c.css("borderLeftWidth"),10)||0)-(parseInt(c.css("borderRightWidth"),10)||0));a.each(["height","paddingTop","paddingBottom"],function(h,j){i[j]="hide";h=(""+a.css(d.toShow[0],j)).match(/^([\d+-.]+)(.*)$/);
-e[j]={value:h[1],unit:h[2]||"px"}});d.toShow.css({height:0,overflow:"hidden"}).show();d.toHide.filter(":hidden").each(d.complete).end().filter(":visible").animate(i,{step:function(h,j){if(j.prop=="height")g=j.end-j.start===0?0:(j.now-j.start)/(j.end-j.start);d.toShow[0].style[j.prop]=g*e[j.prop].value+e[j.prop].unit},duration:d.duration,easing:d.easing,complete:function(){d.autoHeight||d.toShow.css("height","");d.toShow.css({width:b,overflow:f});d.complete()}})}else d.toHide.animate({height:"hide",
-paddingTop:"hide",paddingBottom:"hide"},d);else d.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},d)},bounceslide:function(d){this.slide(d,{easing:d.down?"easeOutBounce":"swing",duration:d.down?1E3:200})}}})})(jQuery);
-(function(a){var d=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var c=this,f=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){if(!(c.options.disabled||c.element.attr("readonly"))){g=
-false;var i=a.ui.keyCode;switch(e.keyCode){case i.PAGE_UP:c._move("previousPage",e);break;case i.PAGE_DOWN:c._move("nextPage",e);break;case i.UP:c._move("previous",e);e.preventDefault();break;case i.DOWN:c._move("next",e);e.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:if(c.menu.active){g=true;e.preventDefault()}case i.TAB:if(!c.menu.active)return;c.menu.select(e);break;case i.ESCAPE:c.element.val(c.term);c.close(e);break;default:clearTimeout(c.searching);c.searching=setTimeout(function(){if(c.term!=
-c.element.val()){c.selectedItem=null;c.search(null,e)}},c.options.delay);break}}}).bind("keypress.autocomplete",function(e){if(g){g=false;e.preventDefault()}}).bind("focus.autocomplete",function(){if(!c.options.disabled){c.selectedItem=null;c.previous=c.element.val()}}).bind("blur.autocomplete",function(e){if(!c.options.disabled){clearTimeout(c.searching);c.closing=setTimeout(function(){c.close(e);c._change(e)},150)}});this._initSource();this.response=function(){return c._response.apply(c,arguments)};
-this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",f)[0]).mousedown(function(e){var i=c.menu.element[0];a(e.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==i&&!a.ui.contains(i,b.target)&&c.close()})},1);setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(e,i){i=i.item.data("item.autocomplete");false!==c._trigger("focus",e,{item:i})&&/^key/.test(e.originalEvent.type)&&
-c.element.val(i.value)},selected:function(e,i){var b=i.item.data("item.autocomplete"),h=c.previous;if(c.element[0]!==f.activeElement){c.element.focus();c.previous=h;setTimeout(function(){c.previous=h;c.selectedItem=b},1)}false!==c._trigger("select",e,{item:b})&&c.element.val(b.value);c.term=c.element.val();c.close(e);c.selectedItem=b},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
-a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(c,f){a.Widget.prototype._setOption.apply(this,arguments);c==="source"&&this._initSource();if(c==="appendTo")this.menu.element.appendTo(a(f||"body",this.element[0].ownerDocument)[0]);c==="disabled"&&
-f&&this.xhr&&this.xhr.abort()},_initSource:function(){var c=this,f,g;if(a.isArray(this.options.source)){f=this.options.source;this.source=function(e,i){i(a.ui.autocomplete.filter(f,e.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(e,i){c.xhr&&c.xhr.abort();c.xhr=a.ajax({url:g,data:e,dataType:"json",autocompleteRequest:++d,success:function(b){this.autocompleteRequest===d&&i(b)},error:function(){this.autocompleteRequest===d&&i([])}})}}else this.source=
-this.options.source},search:function(c,f){c=c!=null?c:this.element.val();this.term=this.element.val();if(c.length<this.options.minLength)return this.close(f);clearTimeout(this.closing);if(this._trigger("search",f)!==false)return this._search(c)},_search:function(c){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:c},this.response)},_response:function(c){if(!this.options.disabled&&c&&c.length){c=this._normalize(c);this._suggest(c);this._trigger("open")}else this.close();
-this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(c){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",c)}},_change:function(c){this.previous!==this.element.val()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){if(c.length&&c[0].label&&c[0].value)return c;return a.map(c,function(f){if(typeof f==="string")return{label:f,value:f};return a.extend({label:f.label||
-f.value,value:f.value||f.label},f)})},_suggest:function(c){var f=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(f,c);this.menu.deactivate();this.menu.refresh();f.show();this._resizeMenu();f.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(c,f){var g=this;
-a.each(f,function(e,i){g._renderItem(c,i)})},_renderItem:function(c,f){return a("<li></li>").data("item.autocomplete",f).append(a("<a></a>").text(f.label)).appendTo(c)},_move:function(c,f){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate()}else this.menu[c](f);else this.search(null,f)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
-"\\$&")},filter:function(c,f){var g=new RegExp(a.ui.autocomplete.escapeRegex(f),"i");return a.grep(c,function(e){return g.test(e.label||e.value||e)})}})})(jQuery);
-(function(a){a.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();d.select(c)}});this.refresh()},refresh:function(){var d=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
--1).mouseenter(function(c){d.activate(c,a(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(d,c){this.deactivate();if(this.hasScroll()){var f=c.offset().top-this.element.offset().top,g=this.element.scrollTop(),e=this.element.height();if(f<0)this.element.scrollTop(g+f);else f>=e&&this.element.scrollTop(g+f-e+c.height())}this.active=c.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",d,{item:c})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
-this._trigger("blur");this.active=null}},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(d,c,f){if(this.active){d=this.active[d+"All"](".ui-menu-item").eq(0);d.length?this.activate(f,d):this.activate(f,this.element.children(c))}else this.activate(f,
-this.element.children(c))},nextPage:function(d){if(this.hasScroll())if(!this.active||this.last())this.activate(d,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,f=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var e=a(this).offset().top-c-f+a(this).height();return e<10&&e>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(d,g)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||
-this.last()?":first":":last"))},previousPage:function(d){if(this.hasScroll())if(!this.active||this.first())this.activate(d,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=a(this).offset().top-c+f-a(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(d,result)}else this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||
-this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})})(jQuery);
-(function(a){var d,c=function(g){a(":ui-button",g.target.form).each(function(){var e=a(this).data("button");setTimeout(function(){e.refresh()},1)})},f=function(g){var e=g.name,i=g.form,b=a([]);if(e)b=i?a(i).find("[name='"+e+"']"):a("[name='"+e+"']",g.ownerDocument).filter(function(){return!this.form});return b};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",
-c);if(typeof this.options.disabled!=="boolean")this.options.disabled=this.element.attr("disabled");this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var g=this,e=this.options,i=this.type==="checkbox"||this.type==="radio",b="ui-state-hover"+(!i?" ui-state-active":"");if(e.label===null)e.label=this.buttonElement.html();if(this.element.is(":disabled"))e.disabled=true;this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",
-function(){if(!e.disabled){a(this).addClass("ui-state-hover");this===d&&a(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){e.disabled||a(this).removeClass(b)}).bind("focus.button",function(){a(this).addClass("ui-state-focus")}).bind("blur.button",function(){a(this).removeClass("ui-state-focus")}).bind("click.button",function(h){e.disabled&&h.stopImmediatePropagation()});i&&this.element.bind("change.button",function(){g.refresh()});if(this.type==="checkbox")this.buttonElement.bind("click.button",
-function(){if(e.disabled)return false;a(this).toggleClass("ui-state-active");g.buttonElement.attr("aria-pressed",g.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(e.disabled)return false;a(this).addClass("ui-state-active");g.buttonElement.attr("aria-pressed",true);var h=g.element[0];f(h).not(h).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)});else{this.buttonElement.bind("mousedown.button",
-function(){if(e.disabled)return false;a(this).addClass("ui-state-active");d=this;a(document).one("mouseup",function(){d=null})}).bind("mouseup.button",function(){if(e.disabled)return false;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(e.disabled)return false;if(h.keyCode==a.ui.keyCode.SPACE||h.keyCode==a.ui.keyCode.ENTER)a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===
-a.ui.keyCode.SPACE&&a(this).click()})}this._setOption("disabled",e.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){var g=this.element.parents().filter(":last"),e="label[for="+this.element.attr("id")+"]";this.buttonElement=g.find(e);if(!this.buttonElement.length){g=g.length?g.siblings():this.element.siblings();this.buttonElement=g.filter(e);
-if(!this.buttonElement.length)this.buttonElement=g.find(e)}this.element.addClass("ui-helper-hidden-accessible");(g=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",g)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
-this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(g,e){a.Widget.prototype._setOption.apply(this,arguments);if(g==="disabled")e?this.element.attr("disabled",true):this.element.removeAttr("disabled");this._resetButton()},refresh:function(){var g=this.element.is(":disabled");g!==this.options.disabled&&this._setOption("disabled",g);if(this.type==="radio")f(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
-true):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var g=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
-e=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(g.empty()).text(),i=this.options.icons,b=i.primary&&i.secondary,h=[];if(i.primary||i.secondary){if(this.options.text)h.push("ui-button-text-icon"+(b?"s":i.primary?"-primary":"-secondary"));i.primary&&g.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>");i.secondary&&g.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>");if(!this.options.text){h.push(b?"ui-button-icons-only":
-"ui-button-icon-only");this.hasTitle||g.attr("title",e)}}else h.push("ui-button-text-only");g.addClass(h.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(g,e){g==="disabled"&&this.buttons.button("option",g,e);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},
-destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");a.Widget.prototype.destroy.call(this)}})})(jQuery);
-(function(a,d){function c(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
-"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
-"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
-minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=f(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function f(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
-"mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){if(!a.datepicker._isDisabledDatepicker(i.inline?b.parent()[0]:i.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
-a(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}})}function g(b,h){a.extend(b,h);for(var j in h)if(h[j]==null||h[j]==d)b[j]=h[j];return b}a.extend(a.ui,{datepicker:{version:"1.8.13"}});var e=(new Date).getTime(),i;a.extend(c.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},
-_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){g(this._defaults,b||{});return this},_attachDatepicker:function(b,h){var j=null;for(var l in this._defaults){var o=b.getAttribute("date:"+l);if(o){j=j||{};try{j[l]=eval(o)}catch(n){j[l]=o}}}l=b.nodeName.toLowerCase();o=l=="div"||l=="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}var k=this._newInst(a(b),o);k.settings=a.extend({},h||{},j||{});if(l=="input")this._connectDatepicker(b,k);else o&&this._inlineDatepicker(b,k)},_newInst:function(b,
-h){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:h,dpDiv:!h?this.dpDiv:f(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(b,h){var j=a(b);h.append=a([]);h.trigger=a([]);if(!j.hasClass(this.markerClassName)){this._attachments(j,h);j.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
-function(l,o,n){h.settings[o]=n}).bind("getData.datepicker",function(l,o){return this._get(h,o)});this._autoSize(h);a.data(b,"datepicker",h)}},_attachments:function(b,h){var j=this._get(h,"appendText"),l=this._get(h,"isRTL");h.append&&h.append.remove();if(j){h.append=a('<span class="'+this._appendClass+'">'+j+"</span>");b[l?"before":"after"](h.append)}b.unbind("focus",this._showDatepicker);h.trigger&&h.trigger.remove();j=this._get(h,"showOn");if(j=="focus"||j=="both")b.focus(this._showDatepicker);
-if(j=="button"||j=="both"){j=this._get(h,"buttonText");var o=this._get(h,"buttonImage");h.trigger=a(this._get(h,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:o,alt:j,title:j}):a('<button type="button"></button>').addClass(this._triggerClass).html(o==""?j:a("<img/>").attr({src:o,alt:j,title:j})));b[l?"before":"after"](h.trigger);h.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(b[0]);
-return false})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var h=new Date(2009,11,20),j=this._get(b,"dateFormat");if(j.match(/[DM]/)){var l=function(o){for(var n=0,k=0,m=0;m<o.length;m++)if(o[m].length>n){n=o[m].length;k=m}return k};h.setMonth(l(this._get(b,j.match(/MM/)?"monthNames":"monthNamesShort")));h.setDate(l(this._get(b,j.match(/DD/)?"dayNames":"dayNamesShort"))+20-h.getDay())}b.input.attr("size",this._formatDate(b,h).length)}},_inlineDatepicker:function(b,h){var j=a(b);
-if(!j.hasClass(this.markerClassName)){j.addClass(this.markerClassName).append(h.dpDiv).bind("setData.datepicker",function(l,o,n){h.settings[o]=n}).bind("getData.datepicker",function(l,o){return this._get(h,o)});a.data(b,"datepicker",h);this._setDate(h,this._getDefaultDate(h),true);this._updateDatepicker(h);this._updateAlternate(h);h.dpDiv.show()}},_dialogDatepicker:function(b,h,j,l,o){b=this._dialogInst;if(!b){this.uuid+=1;this._dialogInput=a('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');
-this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);b=this._dialogInst=this._newInst(this._dialogInput,false);b.settings={};a.data(this._dialogInput[0],"datepicker",b)}g(b.settings,l||{});h=h&&h.constructor==Date?this._formatDate(b,h):h;this._dialogInput.val(h);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/
-2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=j;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();a.removeData(b,
-"datepicker");if(l=="input"){j.append.remove();j.trigger.remove();h.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(l=="div"||l=="span")h.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();if(l=="input"){b.disabled=false;j.trigger.filter("button").each(function(){this.disabled=
-false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(l=="div"||l=="span"){h=h.children("."+this._inlineClass);h.children().removeClass("ui-state-disabled");h.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=a.map(this._disabledInputs,function(o){return o==b?null:o})}},_disableDatepicker:function(b){var h=a(b),j=a.data(b,"datepicker");if(h.hasClass(this.markerClassName)){var l=b.nodeName.toLowerCase();if(l=="input"){b.disabled=
-true;j.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(l=="div"||l=="span"){h=h.children("."+this._inlineClass);h.children().addClass("ui-state-disabled");h.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=a.map(this._disabledInputs,function(o){return o==b?null:o});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return false;
-for(var h=0;h<this._disabledInputs.length;h++)if(this._disabledInputs[h]==b)return true;return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(h){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,h,j){var l=this._getInst(b);if(arguments.length==2&&typeof h=="string")return h=="defaults"?a.extend({},a.datepicker._defaults):l?h=="all"?a.extend({},l.settings):this._get(l,h):null;var o=h||{};if(typeof h=="string"){o={};o[h]=j}if(l){this._curInst==l&&
-this._hideDatepicker();var n=this._getDateDatepicker(b,true),k=this._getMinMaxDate(l,"min"),m=this._getMinMaxDate(l,"max");g(l.settings,o);if(k!==null&&o.dateFormat!==d&&o.minDate===d)l.settings.minDate=this._formatDate(l,k);if(m!==null&&o.dateFormat!==d&&o.maxDate===d)l.settings.maxDate=this._formatDate(l,m);this._attachments(a(b),l);this._autoSize(l);this._setDate(l,n);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(b,h,j){this._optionDatepicker(b,h,j)},_refreshDatepicker:function(b){(b=
-this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,h){if(b=this._getInst(b)){this._setDate(b,h);this._updateDatepicker(b);this._updateAlternate(b)}},_getDateDatepicker:function(b,h){(b=this._getInst(b))&&!b.inline&&this._setDateFromField(b,h);return b?this._getDate(b):null},_doKeyDown:function(b){var h=a.datepicker._getInst(b.target),j=true,l=h.dpDiv.is(".ui-datepicker-rtl");h._keyEvent=true;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();
-j=false;break;case 13:j=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",h.dpDiv);j[0]?a.datepicker._selectDay(b.target,h.selectedMonth,h.selectedYear,j[0]):a.datepicker._hideDatepicker();return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(h,"stepBigMonths"):-a.datepicker._get(h,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(h,"stepBigMonths"):+a.datepicker._get(h,
-"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey)a.datepicker._clearDate(b.target);j=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||b.metaKey)a.datepicker._gotoToday(b.target);j=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,l?+1:-1,"D");j=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(h,"stepBigMonths"):-a.datepicker._get(h,"stepMonths"),"M");break;case 38:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,
--7,"D");j=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,l?-1:+1,"D");j=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(h,"stepBigMonths"):+a.datepicker._get(h,"stepMonths"),"M");break;case 40:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,+7,"D");j=b.ctrlKey||b.metaKey;break;default:j=false}else if(b.keyCode==36&&b.ctrlKey)a.datepicker._showDatepicker(this);else j=false;if(j){b.preventDefault();
-b.stopPropagation()}},_doKeyPress:function(b){var h=a.datepicker._getInst(b.target);if(a.datepicker._get(h,"constrainInput")){h=a.datepicker._possibleChars(a.datepicker._get(h,"dateFormat"));var j=String.fromCharCode(b.charCode==d?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||j<" "||!h||h.indexOf(j)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))){a.datepicker._setDateFromField(b);
-a.datepicker._updateAlternate(b);a.datepicker._updateDatepicker(b)}}catch(h){a.datepicker.log(h)}return true},_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!="input")b=a("input",b.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var h=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=h&&a.datepicker._curInst.dpDiv.stop(true,true);var j=a.datepicker._get(h,"beforeShow");g(h.settings,j?j.apply(b,[b,h]):{});h.lastVal=
-null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(h);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}var l=false;a(b).parents().each(function(){l|=a(this).css("position")=="fixed";return!l});if(l&&a.browser.opera){a.datepicker._pos[0]-=document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}j={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=
-null;h.dpDiv.empty();h.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(h);j=a.datepicker._checkOffset(h,j,l);h.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":l?"fixed":"absolute",display:"none",left:j.left+"px",top:j.top+"px"});if(!h.inline){j=a.datepicker._get(h,"showAnim");var o=a.datepicker._get(h,"duration"),n=function(){var k=h.dpDiv.find("iframe.ui-datepicker-cover");if(k.length){var m=a.datepicker._getBorders(h.dpDiv);k.css({left:-m[0],
-top:-m[1],width:h.dpDiv.outerWidth(),height:h.dpDiv.outerHeight()})}};h.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=true;a.effects&&a.effects[j]?h.dpDiv.show(j,a.datepicker._get(h,"showOptions"),o,n):h.dpDiv[j||"show"](j?o:null,n);if(!j||!o)n();h.input.is(":visible")&&!h.input.is(":disabled")&&h.input.focus();a.datepicker._curInst=h}}},_updateDatepicker:function(b){var h=a.datepicker._getBorders(b.dpDiv);i=b;b.dpDiv.empty().append(this._generateHTML(b));var j=b.dpDiv.find("iframe.ui-datepicker-cover");
-j.length&&j.css({left:-h[0],top:-h[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();h=this._getNumberOfMonths(b);j=h[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");j>1&&b.dpDiv.addClass("ui-datepicker-multi-"+j).css("width",17*j+"em");b.dpDiv[(h[0]!=1||h[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");
-b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var l=b.yearshtml;setTimeout(function(){l===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);l=b.yearshtml=null},0)}},_getBorders:function(b){var h=function(j){return{thin:1,medium:2,thick:3}[j]||j};return[parseFloat(h(b.css("border-left-width"))),parseFloat(h(b.css("border-top-width")))]},
-_checkOffset:function(b,h,j){var l=b.dpDiv.outerWidth(),o=b.dpDiv.outerHeight(),n=b.input?b.input.outerWidth():0,k=b.input?b.input.outerHeight():0,m=document.documentElement.clientWidth+a(document).scrollLeft(),p=document.documentElement.clientHeight+a(document).scrollTop();h.left-=this._get(b,"isRTL")?l-n:0;h.left-=j&&h.left==b.input.offset().left?a(document).scrollLeft():0;h.top-=j&&h.top==b.input.offset().top+k?a(document).scrollTop():0;h.left-=Math.min(h.left,h.left+l>m&&m>l?Math.abs(h.left+l-
-m):0);h.top-=Math.min(h.top,h.top+o>p&&p>o?Math.abs(o+k):0);return h},_findPos:function(b){for(var h=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[h?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var h=this._curInst;if(!(!h||b&&h!=a.data(b,"datepicker")))if(this._datepickerShowing){b=this._get(h,"showAnim");var j=this._get(h,"duration"),l=function(){a.datepicker._tidyDialog(h);this._curInst=
-null};a.effects&&a.effects[b]?h.dpDiv.hide(b,a.datepicker._get(h,"showOptions"),j,l):h.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?j:null,l);b||l();if(b=this._get(h,"onClose"))b.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
-_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,h,j){b=a(b);var l=this._getInst(b[0]);if(!this._isDisabledDatepicker(b[0])){this._adjustInstDate(l,h+(j=="M"?this._get(l,"showCurrentAtPos"):
-0),j);this._updateDatepicker(l)}},_gotoToday:function(b){b=a(b);var h=this._getInst(b[0]);if(this._get(h,"gotoCurrent")&&h.currentDay){h.selectedDay=h.currentDay;h.drawMonth=h.selectedMonth=h.currentMonth;h.drawYear=h.selectedYear=h.currentYear}else{var j=new Date;h.selectedDay=j.getDate();h.drawMonth=h.selectedMonth=j.getMonth();h.drawYear=h.selectedYear=j.getFullYear()}this._notifyChange(h);this._adjustDate(b)},_selectMonthYear:function(b,h,j){b=a(b);var l=this._getInst(b[0]);l._selectingMonthYear=
-false;l["selected"+(j=="M"?"Month":"Year")]=l["draw"+(j=="M"?"Month":"Year")]=parseInt(h.options[h.selectedIndex].value,10);this._notifyChange(l);this._adjustDate(b)},_clickMonthYear:function(b){var h=this._getInst(a(b)[0]);h.input&&h._selectingMonthYear&&setTimeout(function(){h.input.focus()},0);h._selectingMonthYear=!h._selectingMonthYear},_selectDay:function(b,h,j,l){var o=a(b);if(!(a(l).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))){o=this._getInst(o[0]);o.selectedDay=o.currentDay=
-a("a",l).html();o.selectedMonth=o.currentMonth=h;o.selectedYear=o.currentYear=j;this._selectDate(b,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,h){b=this._getInst(a(b)[0]);h=h!=null?h:this._formatDate(b);b.input&&b.input.val(h);this._updateAlternate(b);var j=this._get(b,"onSelect");if(j)j.apply(b.input?b.input[0]:null,[h,b]);else b.input&&b.input.trigger("change");if(b.inline)this._updateDatepicker(b);
-else{this._hideDatepicker();this._lastInput=b.input[0];typeof b.input[0]!="object"&&b.input.focus();this._lastInput=null}},_updateAlternate:function(b){var h=this._get(b,"altField");if(h){var j=this._get(b,"altFormat")||this._get(b,"dateFormat"),l=this._getDate(b),o=this.formatDate(j,l,this._getFormatConfig(b));a(h).each(function(){a(this).val(o)})}},noWeekends:function(b){b=b.getDay();return[b>0&&b<6,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var h=
-b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((h-b)/864E5)/7)+1},parseDate:function(b,h,j){if(b==null||h==null)throw"Invalid arguments";h=typeof h=="object"?h.toString():h+"";if(h=="")return null;var l=(j?j.shortYearCutoff:null)||this._defaults.shortYearCutoff;l=typeof l!="string"?l:(new Date).getFullYear()%100+parseInt(l,10);for(var o=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,n=(j?j.dayNames:null)||this._defaults.dayNames,k=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort,
-m=(j?j.monthNames:null)||this._defaults.monthNames,p=j=-1,q=-1,s=-1,r=false,u=function(y){(y=G+1<b.length&&b.charAt(G+1)==y)&&G++;return y},v=function(y){var H=u(y);y=new RegExp("^\\d{1,"+(y=="@"?14:y=="!"?20:y=="y"&&H?4:y=="o"?3:2)+"}");y=h.substring(z).match(y);if(!y)throw"Missing number at position "+z;z+=y[0].length;return parseInt(y[0],10)},w=function(y,H,N){y=a.map(u(y)?N:H,function(D,E){return[[E,D]]}).sort(function(D,E){return-(D[1].length-E[1].length)});var J=-1;a.each(y,function(D,E){D=
-E[1];if(h.substr(z,D.length).toLowerCase()==D.toLowerCase()){J=E[0];z+=D.length;return false}});if(J!=-1)return J+1;else throw"Unknown name at position "+z;},x=function(){if(h.charAt(z)!=b.charAt(G))throw"Unexpected literal at position "+z;z++},z=0,G=0;G<b.length;G++)if(r)if(b.charAt(G)=="'"&&!u("'"))r=false;else x();else switch(b.charAt(G)){case "d":q=v("d");break;case "D":w("D",o,n);break;case "o":s=v("o");break;case "m":p=v("m");break;case "M":p=w("M",k,m);break;case "y":j=v("y");break;case "@":var C=
-new Date(v("@"));j=C.getFullYear();p=C.getMonth()+1;q=C.getDate();break;case "!":C=new Date((v("!")-this._ticksTo1970)/1E4);j=C.getFullYear();p=C.getMonth()+1;q=C.getDate();break;case "'":if(u("'"))x();else r=true;break;default:x()}if(j==-1)j=(new Date).getFullYear();else if(j<100)j+=(new Date).getFullYear()-(new Date).getFullYear()%100+(j<=l?0:-100);if(s>-1){p=1;q=s;do{l=this._getDaysInMonth(j,p-1);if(q<=l)break;p++;q-=l}while(1)}C=this._daylightSavingAdjust(new Date(j,p-1,q));if(C.getFullYear()!=
-j||C.getMonth()+1!=p||C.getDate()!=q)throw"Invalid date";return C},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(b,h,j){if(!h)return"";var l=(j?j.dayNamesShort:null)||this._defaults.dayNamesShort,o=(j?j.dayNames:null)||this._defaults.dayNames,
-n=(j?j.monthNamesShort:null)||this._defaults.monthNamesShort;j=(j?j.monthNames:null)||this._defaults.monthNames;var k=function(u){(u=r+1<b.length&&b.charAt(r+1)==u)&&r++;return u},m=function(u,v,w){v=""+v;if(k(u))for(;v.length<w;)v="0"+v;return v},p=function(u,v,w,x){return k(u)?x[v]:w[v]},q="",s=false;if(h)for(var r=0;r<b.length;r++)if(s)if(b.charAt(r)=="'"&&!k("'"))s=false;else q+=b.charAt(r);else switch(b.charAt(r)){case "d":q+=m("d",h.getDate(),2);break;case "D":q+=p("D",h.getDay(),l,o);break;
-case "o":q+=m("o",(h.getTime()-(new Date(h.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":q+=m("m",h.getMonth()+1,2);break;case "M":q+=p("M",h.getMonth(),n,j);break;case "y":q+=k("y")?h.getFullYear():(h.getYear()%100<10?"0":"")+h.getYear()%100;break;case "@":q+=h.getTime();break;case "!":q+=h.getTime()*1E4+this._ticksTo1970;break;case "'":if(k("'"))q+="'";else s=true;break;default:q+=b.charAt(r)}return q},_possibleChars:function(b){for(var h="",j=false,l=function(n){(n=o+1<b.length&&b.charAt(o+
-1)==n)&&o++;return n},o=0;o<b.length;o++)if(j)if(b.charAt(o)=="'"&&!l("'"))j=false;else h+=b.charAt(o);else switch(b.charAt(o)){case "d":case "m":case "y":case "@":h+="0123456789";break;case "D":case "M":return null;case "'":if(l("'"))h+="'";else j=true;break;default:h+=b.charAt(o)}return h},_get:function(b,h){return b.settings[h]!==d?b.settings[h]:this._defaults[h]},_setDateFromField:function(b,h){if(b.input.val()!=b.lastVal){var j=this._get(b,"dateFormat"),l=b.lastVal=b.input?b.input.val():null,
-o,n;o=n=this._getDefaultDate(b);var k=this._getFormatConfig(b);try{o=this.parseDate(j,l,k)||n}catch(m){this.log(m);l=h?"":l}b.selectedDay=o.getDate();b.drawMonth=b.selectedMonth=o.getMonth();b.drawYear=b.selectedYear=o.getFullYear();b.currentDay=l?o.getDate():0;b.currentMonth=l?o.getMonth():0;b.currentYear=l?o.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,h,
-j){var l=function(n){var k=new Date;k.setDate(k.getDate()+n);return k},o=function(n){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),n,a.datepicker._getFormatConfig(b))}catch(k){}var m=(n.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,p=m.getFullYear(),q=m.getMonth();m=m.getDate();for(var s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=s.exec(n);r;){switch(r[2]||"d"){case "d":case "D":m+=parseInt(r[1],10);break;case "w":case "W":m+=parseInt(r[1],10)*7;break;case "m":case "M":q+=
-parseInt(r[1],10);m=Math.min(m,a.datepicker._getDaysInMonth(p,q));break;case "y":case "Y":p+=parseInt(r[1],10);m=Math.min(m,a.datepicker._getDaysInMonth(p,q));break}r=s.exec(n)}return new Date(p,q,m)};if(h=(h=h==null||h===""?j:typeof h=="string"?o(h):typeof h=="number"?isNaN(h)?j:l(h):new Date(h.getTime()))&&h.toString()=="Invalid Date"?j:h){h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0)}return this._daylightSavingAdjust(h)},_daylightSavingAdjust:function(b){if(!b)return null;
-b.setHours(b.getHours()>12?b.getHours()+2:0);return b},_setDate:function(b,h,j){var l=!h,o=b.selectedMonth,n=b.selectedYear;h=this._restrictMinMax(b,this._determineDate(b,h,new Date));b.selectedDay=b.currentDay=h.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=h.getMonth();b.drawYear=b.selectedYear=b.currentYear=h.getFullYear();if((o!=b.selectedMonth||n!=b.selectedYear)&&!j)this._notifyChange(b);this._adjustInstDate(b);if(b.input)b.input.val(l?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||
-b.input&&b.input.val()==""?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_generateHTML:function(b){var h=new Date;h=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth(),h.getDate()));var j=this._get(b,"isRTL"),l=this._get(b,"showButtonPanel"),o=this._get(b,"hideIfNoPrevNext"),n=this._get(b,"navigationAsDateFormat"),k=this._getNumberOfMonths(b),m=this._get(b,"showCurrentAtPos"),p=this._get(b,"stepMonths"),q=k[0]!=1||k[1]!=1,s=this._daylightSavingAdjust(!b.currentDay?
-new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),r=this._getMinMaxDate(b,"min"),u=this._getMinMaxDate(b,"max");m=b.drawMonth-m;var v=b.drawYear;if(m<0){m+=12;v--}if(u){var w=this._daylightSavingAdjust(new Date(u.getFullYear(),u.getMonth()-k[0]*k[1]+1,u.getDate()));for(w=r&&w<r?r:w;this._daylightSavingAdjust(new Date(v,m,1))>w;){m--;if(m<0){m=11;v--}}}b.drawMonth=m;b.drawYear=v;w=this._get(b,"prevText");w=!n?w:this.formatDate(w,this._daylightSavingAdjust(new Date(v,m-p,1)),this._getFormatConfig(b));
-w=this._canAdjustMonth(b,-1,v,m)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+b.id+"', -"+p+", 'M');\" title=\""+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"e":"w")+'">'+w+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"e":"w")+'">'+w+"</span></a>";var x=this._get(b,"nextText");x=!n?x:this.formatDate(x,this._daylightSavingAdjust(new Date(v,
-m+p,1)),this._getFormatConfig(b));o=this._canAdjustMonth(b,+1,v,m)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+e+".datepicker._adjustDate('#"+b.id+"', +"+p+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"w":"e")+'">'+x+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(j?"w":"e")+'">'+x+"</span></a>";p=this._get(b,"currentText");x=this._get(b,"gotoCurrent")&&
-b.currentDay?s:h;p=!n?p:this.formatDate(p,x,this._getFormatConfig(b));n=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+e+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"";l=l?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(j?n:"")+(this._isInRange(b,x)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
-e+".datepicker._gotoToday('#"+b.id+"');\">"+p+"</button>":"")+(j?"":n)+"</div>":"";n=parseInt(this._get(b,"firstDay"),10);n=isNaN(n)?0:n;p=this._get(b,"showWeek");x=this._get(b,"dayNames");this._get(b,"dayNamesShort");var z=this._get(b,"dayNamesMin"),G=this._get(b,"monthNames"),C=this._get(b,"monthNamesShort"),y=this._get(b,"beforeShowDay"),H=this._get(b,"showOtherMonths"),N=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var J=this._getDefaultDate(b),D="",E=0;E<k[0];E++){for(var P=
-"",L=0;L<k[1];L++){var Q=this._daylightSavingAdjust(new Date(v,m,b.selectedDay)),B=" ui-corner-all",F="";if(q){F+='<div class="ui-datepicker-group';if(k[1]>1)switch(L){case 0:F+=" ui-datepicker-group-first";B=" ui-corner-"+(j?"right":"left");break;case k[1]-1:F+=" ui-datepicker-group-last";B=" ui-corner-"+(j?"left":"right");break;default:F+=" ui-datepicker-group-middle";B="";break}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&E==0?j?
-o:w:"")+(/all|right/.test(B)&&E==0?j?w:o:"")+this._generateMonthYearHeader(b,m,v,r,u,E>0||L>0,G,C)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var I=p?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"";for(B=0;B<7;B++){var A=(B+n)%7;I+="<th"+((B+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+x[A]+'">'+z[A]+"</span></th>"}F+=I+"</tr></thead><tbody>";I=this._getDaysInMonth(v,m);if(v==b.selectedYear&&m==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,
-I);B=(this._getFirstDayOfMonth(v,m)-n+7)%7;I=q?6:Math.ceil((B+I)/7);A=this._daylightSavingAdjust(new Date(v,m,1-B));for(var R=0;R<I;R++){F+="<tr>";var S=!p?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(A)+"</td>";for(B=0;B<7;B++){var M=y?y.apply(b.input?b.input[0]:null,[A]):[true,""],K=A.getMonth()!=m,O=K&&!N||!M[0]||r&&A<r||u&&A>u;S+='<td class="'+((B+n+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(A.getTime()==Q.getTime()&&m==b.selectedMonth&&
-b._keyEvent||J.getTime()==A.getTime()&&J.getTime()==Q.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!H?"":" "+M[1]+(A.getTime()==s.getTime()?" "+this._currentClass:"")+(A.getTime()==h.getTime()?" ui-datepicker-today":""))+'"'+((!K||H)&&M[2]?' title="'+M[2]+'"':"")+(O?"":' onclick="DP_jQuery_'+e+".datepicker._selectDay('#"+b.id+"',"+A.getMonth()+","+A.getFullYear()+', this);return false;"')+">"+(K&&!H?"&#xa0;":O?'<span class="ui-state-default">'+A.getDate()+
-"</span>":'<a class="ui-state-default'+(A.getTime()==h.getTime()?" ui-state-highlight":"")+(A.getTime()==s.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+'" href="#">'+A.getDate()+"</a>")+"</td>";A.setDate(A.getDate()+1);A=this._daylightSavingAdjust(A)}F+=S+"</tr>"}m++;if(m>11){m=0;v++}F+="</tbody></table>"+(q?"</div>"+(k[0]>0&&L==k[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");P+=F}D+=P}D+=l+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
-"");b._keyEvent=false;return D},_generateMonthYearHeader:function(b,h,j,l,o,n,k,m){var p=this._get(b,"changeMonth"),q=this._get(b,"changeYear"),s=this._get(b,"showMonthAfterYear"),r='<div class="ui-datepicker-title">',u="";if(n||!p)u+='<span class="ui-datepicker-month">'+k[h]+"</span>";else{k=l&&l.getFullYear()==j;var v=o&&o.getFullYear()==j;u+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+
-b.id+"');\">";for(var w=0;w<12;w++)if((!k||w>=l.getMonth())&&(!v||w<=o.getMonth()))u+='<option value="'+w+'"'+(w==h?' selected="selected"':"")+">"+m[w]+"</option>";u+="</select>"}s||(r+=u+(n||!(p&&q)?"&#xa0;":""));if(!b.yearshtml){b.yearshtml="";if(n||!q)r+='<span class="ui-datepicker-year">'+j+"</span>";else{m=this._get(b,"yearRange").split(":");var x=(new Date).getFullYear();k=function(z){z=z.match(/c[+-].*/)?j+parseInt(z.substring(1),10):z.match(/[+-].*/)?x+parseInt(z,10):parseInt(z,10);return isNaN(z)?
-x:z};h=k(m[0]);m=Math.max(h,k(m[1]||""));h=l?Math.max(h,l.getFullYear()):h;m=o?Math.min(m,o.getFullYear()):m;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+e+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+e+".datepicker._clickMonthYear('#"+b.id+"');\">";h<=m;h++)b.yearshtml+='<option value="'+h+'"'+(h==j?' selected="selected"':"")+">"+h+"</option>";b.yearshtml+="</select>";r+=b.yearshtml;b.yearshtml=null}}r+=this._get(b,"yearSuffix");if(s)r+=
-(n||!(p&&q)?"&#xa0;":"")+u;r+="</div>";return r},_adjustInstDate:function(b,h,j){var l=b.drawYear+(j=="Y"?h:0),o=b.drawMonth+(j=="M"?h:0);h=Math.min(b.selectedDay,this._getDaysInMonth(l,o))+(j=="D"?h:0);l=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(l,o,h)));b.selectedDay=l.getDate();b.drawMonth=b.selectedMonth=l.getMonth();b.drawYear=b.selectedYear=l.getFullYear();if(j=="M"||j=="Y")this._notifyChange(b)},_restrictMinMax:function(b,h){var j=this._getMinMaxDate(b,"min");b=this._getMinMaxDate(b,
-"max");h=j&&h<j?j:h;return h=b&&h>b?b:h},_notifyChange:function(b){var h=this._get(b,"onChangeMonthYear");if(h)h.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(b,h){return this._determineDate(b,this._get(b,h+"Date"),null)},_getDaysInMonth:function(b,h){return 32-this._daylightSavingAdjust(new Date(b,h,32)).getDate()},_getFirstDayOfMonth:function(b,
-h){return(new Date(b,h,1)).getDay()},_canAdjustMonth:function(b,h,j,l){var o=this._getNumberOfMonths(b);j=this._daylightSavingAdjust(new Date(j,l+(h<0?h:o[0]*o[1]),1));h<0&&j.setDate(this._getDaysInMonth(j.getFullYear(),j.getMonth()));return this._isInRange(b,j)},_isInRange:function(b,h){var j=this._getMinMaxDate(b,"min");b=this._getMinMaxDate(b,"max");return(!j||h.getTime()>=j.getTime())&&(!b||h.getTime()<=b.getTime())},_getFormatConfig:function(b){var h=this._get(b,"shortYearCutoff");h=typeof h!=
-"string"?h:(new Date).getFullYear()%100+parseInt(h,10);return{shortYearCutoff:h,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,h,j,l){if(!h){b.currentDay=b.selectedDay;b.currentMonth=b.selectedMonth;b.currentYear=b.selectedYear}h=h?typeof h=="object"?h:this._daylightSavingAdjust(new Date(l,j,h)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));
-return this.formatDate(this._get(b,"dateFormat"),h,this._getFormatConfig(b))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var h=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(h));if(b=="option"&&
-arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(h));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(h)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new c;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.13";window["DP_jQuery_"+e]=a})(jQuery);
-(function(a,d){var c={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},f={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},g=a.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,
-position:{my:"center",at:"center",collision:"fit",using:function(e){var i=a(this).css(e).offset().top;i<0&&a(this).css("top",e.top-i)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var e=this,i=e.options,b=i.title||"&#160;",h=a.ui.dialog.getTitleId(e.element),j=(e.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
-i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){if(i.closeOnEscape&&n.keyCode&&n.keyCode===a.ui.keyCode.ESCAPE){e.close(n);n.preventDefault()}}).attr({role:"dialog","aria-labelledby":h}).mousedown(function(n){e.moveToTop(false,n)});e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(j);var l=(e.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(j),
-o=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")}).click(function(n){e.close(n);return false}).appendTo(l);(e.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(o);a("<span></span>").addClass("ui-dialog-title").attr("id",
-h).html(b).prependTo(l);if(a.isFunction(i.beforeclose)&&!a.isFunction(i.beforeClose))i.beforeClose=i.beforeclose;l.find("*").add(l).disableSelection();i.draggable&&a.fn.draggable&&e._makeDraggable();i.resizable&&a.fn.resizable&&e._makeResizable();e._createButtons(i.buttons);e._isOpen=false;a.fn.bgiframe&&j.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;e.overlay&&e.overlay.destroy();e.uiDialog.hide();e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
-e.uiDialog.remove();e.originalTitle&&e.element.attr("title",e.originalTitle);return e},widget:function(){return this.uiDialog},close:function(e){var i=this,b,h;if(false!==i._trigger("beforeClose",e)){i.overlay&&i.overlay.destroy();i.uiDialog.unbind("keypress.ui-dialog");i._isOpen=false;if(i.options.hide)i.uiDialog.hide(i.options.hide,function(){i._trigger("close",e)});else{i.uiDialog.hide();i._trigger("close",e)}a.ui.dialog.overlay.resize();if(i.options.modal){b=0;a(".ui-dialog").each(function(){if(this!==
-i.uiDialog[0]){h=a(this).css("z-index");isNaN(h)||(b=Math.max(b,h))}});a.ui.dialog.maxZ=b}return i}},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var b=this,h=b.options;if(h.modal&&!e||!h.stack&&!h.modal)return b._trigger("focus",i);if(h.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=h.zIndex;if(b.overlay){a.ui.dialog.maxZ+=1;b.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}e={scrollTop:b.element.attr("scrollTop"),scrollLeft:b.element.attr("scrollLeft")};a.ui.dialog.maxZ+=
-1;b.uiDialog.css("z-index",a.ui.dialog.maxZ);b.element.attr(e);b._trigger("focus",i);return b},open:function(){if(!this._isOpen){var e=this,i=e.options,b=e.uiDialog;e.overlay=i.modal?new a.ui.dialog.overlay(e):null;e._size();e._position(i.position);b.show(i.show);e.moveToTop(true);i.modal&&b.bind("keypress.ui-dialog",function(h){if(h.keyCode===a.ui.keyCode.TAB){var j=a(":tabbable",this),l=j.filter(":first");j=j.filter(":last");if(h.target===j[0]&&!h.shiftKey){l.focus(1);return false}else if(h.target===
-l[0]&&h.shiftKey){j.focus(1);return false}}});a(e.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();e._isOpen=true;e._trigger("open");return e}},_createButtons:function(e){var i=this,b=false,h=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),j=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(h);i.uiDialog.find(".ui-dialog-buttonpane").remove();typeof e==="object"&&e!==null&&a.each(e,
-function(){return!(b=true)});if(b){a.each(e,function(l,o){o=a.isFunction(o)?{click:o,text:l}:o;var n=a('<button type="button"></button>').click(function(){o.click.apply(i.element[0],arguments)}).appendTo(j);a.each(o,function(k,m){if(k!=="click")k in g?n[k](m):n.attr(k,m)});a.fn.button&&n.button()});h.appendTo(i.uiDialog)}},_makeDraggable:function(){function e(l){return{position:l.position,offset:l.offset}}var i=this,b=i.options,h=a(document),j;i.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
-handle:".ui-dialog-titlebar",containment:"document",start:function(l,o){j=b.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");i._trigger("dragStart",l,e(o))},drag:function(l,o){i._trigger("drag",l,e(o))},stop:function(l,o){b.position=[o.position.left-h.scrollLeft(),o.position.top-h.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(j);i._trigger("dragStop",l,e(o));a.ui.dialog.overlay.resize()}})},_makeResizable:function(e){function i(l){return{originalPosition:l.originalPosition,
-originalSize:l.originalSize,position:l.position,size:l.size}}e=e===d?this.options.resizable:e;var b=this,h=b.options,j=b.uiDialog.css("position");e=typeof e==="string"?e:"n,e,s,w,se,sw,ne,nw";b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:b._minHeight(),handles:e,start:function(l,o){a(this).addClass("ui-dialog-resizing");b._trigger("resizeStart",l,i(o))},resize:function(l,o){b._trigger("resize",
-l,i(o))},stop:function(l,o){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();b._trigger("resizeStop",l,i(o));a.ui.dialog.overlay.resize()}}).css("position",j).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(e){var i=[],b=[0,0],h;if(e){if(typeof e==="string"||typeof e==="object"&&"0"in e){i=e.split?e.split(" "):
-[e[0],e[1]];if(i.length===1)i[1]=i[0];a.each(["left","top"],function(j,l){if(+i[j]===i[j]){b[j]=i[j];i[j]=l}});e={my:i.join(" "),at:i.join(" "),offset:b.join(" ")}}e=a.extend({},a.ui.dialog.prototype.options.position,e)}else e=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},e));h||this.uiDialog.hide()},_setOptions:function(e){var i=this,b={},h=false;a.each(e,function(j,l){i._setOption(j,l);
-if(j in c)h=true;if(j in f)b[j]=l});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(e,i){var b=this,h=b.uiDialog;switch(e){case "beforeclose":e="beforeClose";break;case "buttons":b._createButtons(i);break;case "closeText":b.uiDialogTitlebarCloseText.text(""+i);break;case "dialogClass":h.removeClass(b.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i);break;case "disabled":i?h.addClass("ui-dialog-disabled"):
-h.removeClass("ui-dialog-disabled");break;case "draggable":var j=h.is(":data(draggable)");j&&!i&&h.draggable("destroy");!j&&i&&b._makeDraggable();break;case "position":b._position(i);break;case "resizable":(j=h.is(":data(resizable)"))&&!i&&h.resizable("destroy");j&&typeof i==="string"&&h.resizable("option","handles",i);!j&&i!==false&&b._makeResizable(i);break;case "title":a(".ui-dialog-title",b.uiDialogTitlebar).html(""+(i||"&#160;"));break}a.Widget.prototype._setOption.apply(b,arguments)},_size:function(){var e=
-this.options,i,b,h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(e.minWidth>e.width)e.width=e.minWidth;i=this.uiDialog.css({height:"auto",width:e.width}).height();b=Math.max(0,e.minHeight-i);if(e.height==="auto")if(a.support.minHeight)this.element.css({minHeight:b,height:"auto"});else{this.uiDialog.show();e=this.element.css("height","auto").height();h||this.uiDialog.hide();this.element.height(Math.max(e,b))}else this.element.height(Math.max(e.height-
-i,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.13",uuid:0,maxZ:0,getTitleId:function(e){e=e.attr("id");if(!e){this.uuid+=1;e=this.uuid}return"ui-dialog-title-"+e},overlay:function(e){this.$el=a.ui.dialog.overlay.create(e)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),
-create:function(e){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1);a(document).bind("keydown.dialog-overlay",function(b){if(e.options.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){e.close(b);b.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var i=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
-height:this.height()});a.fn.bgiframe&&i.bgiframe();this.instances.push(i);return i},destroy:function(e){var i=a.inArray(e,this.instances);i!=-1&&this.oldInstances.push(this.instances.splice(i,1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");e.remove();var b=0;a.each(this.instances,function(){b=Math.max(b,this.css("z-index"))});this.maxZ=b},height:function(){var e,i;if(a.browser.msie&&a.browser.version<7){e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
-i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return e<i?a(window).height()+"px":e+"px"}else return a(document).height()+"px"},width:function(){var e,i;if(a.browser.msie&&a.browser.version<7){e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return e<i?a(window).width()+"px":e+"px"}else return a(document).width()+"px"},resize:function(){var e=a([]);a.each(a.ui.dialog.overlay.instances,
-function(){e=e.add(this)});e.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
-(function(a){a.ui=a.ui||{};var d=/left|center|right/,c=/top|center|bottom/,f=a.fn.position,g=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=a.extend({},e);var i=a(e.of),b=i[0],h=(e.collision||"flip").split(" "),j=e.offset?e.offset.split(" "):[0,0],l,o,n;if(b.nodeType===9){l=i.width();o=i.height();n={top:0,left:0}}else if(b.setTimeout){l=i.width();o=i.height();n={top:i.scrollTop(),left:i.scrollLeft()}}else if(b.preventDefault){e.at="left top";l=o=0;n={top:e.of.pageY,
-left:e.of.pageX}}else{l=i.outerWidth();o=i.outerHeight();n=i.offset()}a.each(["my","at"],function(){var k=(e[this]||"").split(" ");if(k.length===1)k=d.test(k[0])?k.concat(["center"]):c.test(k[0])?["center"].concat(k):["center","center"];k[0]=d.test(k[0])?k[0]:"center";k[1]=c.test(k[1])?k[1]:"center";e[this]=k});if(h.length===1)h[1]=h[0];j[0]=parseInt(j[0],10)||0;if(j.length===1)j[1]=j[0];j[1]=parseInt(j[1],10)||0;if(e.at[0]==="right")n.left+=l;else if(e.at[0]==="center")n.left+=l/2;if(e.at[1]==="bottom")n.top+=
-o;else if(e.at[1]==="center")n.top+=o/2;n.left+=j[0];n.top+=j[1];return this.each(function(){var k=a(this),m=k.outerWidth(),p=k.outerHeight(),q=parseInt(a.curCSS(this,"marginLeft",true))||0,s=parseInt(a.curCSS(this,"marginTop",true))||0,r=m+q+(parseInt(a.curCSS(this,"marginRight",true))||0),u=p+s+(parseInt(a.curCSS(this,"marginBottom",true))||0),v=a.extend({},n),w;if(e.my[0]==="right")v.left-=m;else if(e.my[0]==="center")v.left-=m/2;if(e.my[1]==="bottom")v.top-=p;else if(e.my[1]==="center")v.top-=
-p/2;v.left=Math.round(v.left);v.top=Math.round(v.top);w={left:v.left-q,top:v.top-s};a.each(["left","top"],function(x,z){a.ui.position[h[x]]&&a.ui.position[h[x]][z](v,{targetWidth:l,targetHeight:o,elemWidth:m,elemHeight:p,collisionPosition:w,collisionWidth:r,collisionHeight:u,offset:j,my:e.my,at:e.at})});a.fn.bgiframe&&k.bgiframe();k.offset(a.extend(v,{using:e.using}))})};a.ui.position={fit:{left:function(e,i){var b=a(window);b=i.collisionPosition.left+i.collisionWidth-b.width()-b.scrollLeft();e.left=
-b>0?e.left-b:Math.max(e.left-i.collisionPosition.left,e.left)},top:function(e,i){var b=a(window);b=i.collisionPosition.top+i.collisionHeight-b.height()-b.scrollTop();e.top=b>0?e.top-b:Math.max(e.top-i.collisionPosition.top,e.top)}},flip:{left:function(e,i){if(i.at[0]!=="center"){var b=a(window);b=i.collisionPosition.left+i.collisionWidth-b.width()-b.scrollLeft();var h=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,j=i.at[0]==="left"?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];e.left+=
-i.collisionPosition.left<0?h+j+l:b>0?h+j+l:0}},top:function(e,i){if(i.at[1]!=="center"){var b=a(window);b=i.collisionPosition.top+i.collisionHeight-b.height()-b.scrollTop();var h=i.my[1]==="top"?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,j=i.at[1]==="top"?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];e.top+=i.collisionPosition.top<0?h+j+l:b>0?h+j+l:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(e,i){if(/static/.test(a.curCSS(e,"position")))e.style.position="relative";var b=a(e),
-h=b.offset(),j=parseInt(a.curCSS(e,"top",true),10)||0,l=parseInt(a.curCSS(e,"left",true),10)||0;h={top:i.top-h.top+j,left:i.left-h.left+l};"using"in i?i.using.call(e,h):b.css(h)};a.fn.offset=function(e){var i=this[0];if(!i||!i.ownerDocument)return null;if(e)return this.each(function(){a.offset.setOffset(this,e)});return g.call(this)}}})(jQuery);
-(function(a,d){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
-this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(c){if(c===d)return this._value();this._setOption("value",c);return this},_setOption:function(c,f){if(c==="value"){this.options.value=f;this._refreshValue();this._value()===this.options.max&&this._trigger("complete")}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var c=this.options.value;if(typeof c!=="number")c=0;return Math.min(this.options.max,Math.max(this.min,c))},_percentage:function(){return 100*
-this._value()/this.options.max},_refreshValue:function(){var c=this.value(),f=this._percentage();if(this.oldValue!==c){this.oldValue=c;this._trigger("change")}this.valueDiv.toggle(c>this.min).toggleClass("ui-corner-right",c===this.options.max).width(f.toFixed(0)+"%");this.element.attr("aria-valuenow",c)}});a.extend(a.ui.progressbar,{version:"1.8.13"})})(jQuery);
-(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var d=this,c=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g=c.values&&c.values.length||1,e=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
-this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);if(c.range){if(c.range===true){if(!c.values)c.values=[this._valueMin(),this._valueMin()];if(c.values.length&&c.values.length!==2)c.values=[c.values[0],c.values[0]]}this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(c.range==="min"||c.range==="max"?" ui-slider-range-"+c.range:""))}for(var i=f.length;i<g;i+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
-this.handles=f.add(a(e.join("")).appendTo(d.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(c.disabled)a(this).blur();else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",
-b)});this.handles.keydown(function(b){var h=true,j=a(this).data("index.ui-slider-handle"),l,o,n;if(!d.options.disabled){switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:h=false;if(!d._keySliding){d._keySliding=true;a(this).addClass("ui-state-active");l=d._start(b,j);if(l===false)return}break}n=d.options.step;l=d.options.values&&d.options.values.length?
-(o=d.values(j)):(o=d.value());switch(b.keyCode){case a.ui.keyCode.HOME:o=d._valueMin();break;case a.ui.keyCode.END:o=d._valueMax();break;case a.ui.keyCode.PAGE_UP:o=d._trimAlignValue(l+(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:o=d._trimAlignValue(l-(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(l===d._valueMax())return;o=d._trimAlignValue(l+n);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(l===d._valueMin())return;o=d._trimAlignValue(l-
-n);break}d._slide(b,j,o);return h}}).keyup(function(b){var h=a(this).data("index.ui-slider-handle");if(d._keySliding){d._keySliding=false;d._stop(b,h);d._change(b,h);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();
-return this},_mouseCapture:function(d){var c=this.options,f,g,e,i,b;if(c.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();f=this._normValueFromMouse({x:d.pageX,y:d.pageY});g=this._valueMax()-this._valueMin()+1;i=this;this.handles.each(function(h){var j=Math.abs(f-i.values(h));if(g>j){g=j;e=a(this);b=h}});if(c.range===true&&this.values(1)===c.min){b+=1;e=a(this.handles[b])}if(this._start(d,b)===false)return false;
-this._mouseSliding=true;i._handleIndex=b;e.addClass("ui-state-active").focus();c=e.offset();this._clickOffset=!a(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-c.left-e.width()/2,top:d.pageY-c.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(d,b,f);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(d){var c=
-this._normValueFromMouse({x:d.pageX,y:d.pageY});this._slide(d,this._handleIndex,c);return false},_mouseStop:function(d){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(d,this._handleIndex);this._change(d,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var c;if(this.orientation==="horizontal"){c=
-this.elementSize.width;d=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;d=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}c=d/c;if(c>1)c=1;if(c<0)c=0;if(this.orientation==="vertical")c=1-c;d=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+c*d)},_start:function(d,c){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);
-f.values=this.values()}return this._trigger("start",d,f)},_slide:function(d,c,f){var g;if(this.options.values&&this.options.values.length){g=this.values(c?0:1);if(this.options.values.length===2&&this.options.range===true&&(c===0&&f>g||c===1&&f<g))f=g;if(f!==this.values(c)){g=this.values();g[c]=f;d=this._trigger("slide",d,{handle:this.handles[c],value:f,values:g});this.values(c?0:1);d!==false&&this.values(c,f,true)}}else if(f!==this.value()){d=this._trigger("slide",d,{handle:this.handles[c],value:f});
-d!==false&&this.value(f)}},_stop:function(d,c){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);f.values=this.values()}this._trigger("stop",d,f)},_change:function(d,c){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(c);f.values=this.values()}this._trigger("change",d,f)}},value:function(d){if(arguments.length){this.options.value=
-this._trimAlignValue(d);this._refreshValue();this._change(null,0)}else return this._value()},values:function(d,c){var f,g,e;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(c);this._refreshValue();this._change(null,d)}else if(arguments.length)if(a.isArray(arguments[0])){f=this.options.values;g=arguments[0];for(e=0;e<f.length;e+=1){f[e]=this._trimAlignValue(g[e]);this._change(null,e)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(d):
-this.value();else return this._values()},_setOption:function(d,c){var f,g=0;if(a.isArray(this.options.values))g=this.options.values.length;a.Widget.prototype._setOption.apply(this,arguments);switch(d){case "disabled":if(c){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
-this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(f=0;f<g;f+=1)this._change(null,f);this._animateOff=false;break}},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d)},_values:function(d){var c,f;if(arguments.length){c=this.options.values[d];
-return c=this._trimAlignValue(c)}else{c=this.options.values.slice();for(f=0;f<c.length;f+=1)c[f]=this._trimAlignValue(c[f]);return c}},_trimAlignValue:function(d){if(d<=this._valueMin())return this._valueMin();if(d>=this._valueMax())return this._valueMax();var c=this.options.step>0?this.options.step:1,f=(d-this._valueMin())%c;alignValue=d-f;if(Math.abs(f)*2>=c)alignValue+=f>0?c:-c;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
-_refreshValue:function(){var d=this.options.range,c=this.options,f=this,g=!this._animateOff?c.animate:false,e,i={},b,h,j,l;if(this.options.values&&this.options.values.length)this.handles.each(function(o){e=(f.values(o)-f._valueMin())/(f._valueMax()-f._valueMin())*100;i[f.orientation==="horizontal"?"left":"bottom"]=e+"%";a(this).stop(1,1)[g?"animate":"css"](i,c.animate);if(f.options.range===true)if(f.orientation==="horizontal"){if(o===0)f.range.stop(1,1)[g?"animate":"css"]({left:e+"%"},c.animate);
-if(o===1)f.range[g?"animate":"css"]({width:e-b+"%"},{queue:false,duration:c.animate})}else{if(o===0)f.range.stop(1,1)[g?"animate":"css"]({bottom:e+"%"},c.animate);if(o===1)f.range[g?"animate":"css"]({height:e-b+"%"},{queue:false,duration:c.animate})}b=e});else{h=this.value();j=this._valueMin();l=this._valueMax();e=l!==j?(h-j)/(l-j)*100:0;i[f.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[g?"animate":"css"](i,c.animate);if(d==="min"&&this.orientation==="horizontal")this.range.stop(1,
-1)[g?"animate":"css"]({width:e+"%"},c.animate);if(d==="max"&&this.orientation==="horizontal")this.range[g?"animate":"css"]({width:100-e+"%"},{queue:false,duration:c.animate});if(d==="min"&&this.orientation==="vertical")this.range.stop(1,1)[g?"animate":"css"]({height:e+"%"},c.animate);if(d==="max"&&this.orientation==="vertical")this.range[g?"animate":"css"]({height:100-e+"%"},{queue:false,duration:c.animate})}}});a.extend(a.ui.slider,{version:"1.8.13"})})(jQuery);
-(function(a,d){function c(){return++g}function f(){return++e}var g=0,e=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(i,b){if(i=="selected")this.options.collapsible&&
-b==this.options.selected||this.select(b);else{this.options[i]=b;this._tabify()}},_tabId:function(i){return i.title&&i.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(i){return i.replace(/:/g,"\\:")},_cookie:function(){var i=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[i].concat(a.makeArray(arguments)))},_ui:function(i,b){return{tab:i,panel:b,index:this.anchors.index(i)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var i=
-a(this);i.html(i.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function b(r,u){r.css("display","");!a.support.opacity&&u.opacity&&r[0].style.removeAttribute("filter")}var h=this,j=this.options,l=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(r,u){var v=a(u).attr("href"),w=v.split("#")[0],x;if(w&&(w===location.toString().split("#")[0]||
-(x=a("base")[0])&&w===x.href)){v=u.hash;u.href=v}if(l.test(v))h.panels=h.panels.add(h.element.find(h._sanitizeSelector(v)));else if(v&&v!=="#"){a.data(u,"href.tabs",v);a.data(u,"load.tabs",v.replace(/#.*$/,""));v=h._tabId(u);u.href="#"+v;u=h.element.find("#"+v);if(!u.length){u=a(j.panelTemplate).attr("id",v).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(h.panels[r-1]||h.list);u.data("destroy.tabs",true)}h.panels=h.panels.add(u)}else j.disabled.push(r)});if(i){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
-this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(j.selected===d){location.hash&&this.anchors.each(function(r,u){if(u.hash==location.hash){j.selected=r;return false}});if(typeof j.selected!=="number"&&j.cookie)j.selected=parseInt(h._cookie(),10);if(typeof j.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)j.selected=
-this.lis.index(this.lis.filter(".ui-tabs-selected"));j.selected=j.selected||(this.lis.length?0:-1)}else if(j.selected===null)j.selected=-1;j.selected=j.selected>=0&&this.anchors[j.selected]||j.selected<0?j.selected:0;j.disabled=a.unique(j.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(r){return h.lis.index(r)}))).sort();a.inArray(j.selected,j.disabled)!=-1&&j.disabled.splice(a.inArray(j.selected,j.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
-if(j.selected>=0&&this.anchors.length){h.element.find(h._sanitizeSelector(h.anchors[j.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(j.selected).addClass("ui-tabs-selected ui-state-active");h.element.queue("tabs",function(){h._trigger("show",null,h._ui(h.anchors[j.selected],h.element.find(h._sanitizeSelector(h.anchors[j.selected].hash))[0]))});this.load(j.selected)}a(window).bind("unload",function(){h.lis.add(h.anchors).unbind(".tabs");h.lis=h.anchors=h.panels=null})}else j.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
-this.element[j.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");j.cookie&&this._cookie(j.selected,j.cookie);i=0;for(var o;o=this.lis[i];i++)a(o)[a.inArray(i,j.disabled)!=-1&&!a(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");j.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(j.event!=="mouseover"){var n=function(r,u){u.is(":not(.ui-state-disabled)")&&u.addClass("ui-state-"+r)},k=function(r,u){u.removeClass("ui-state-"+
-r)};this.lis.bind("mouseover.tabs",function(){n("hover",a(this))});this.lis.bind("mouseout.tabs",function(){k("hover",a(this))});this.anchors.bind("focus.tabs",function(){n("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var m,p;if(j.fx)if(a.isArray(j.fx)){m=j.fx[0];p=j.fx[1]}else m=p=j.fx;var q=p?function(r,u){a(r).closest("li").addClass("ui-tabs-selected ui-state-active");u.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",
-function(){b(u,p);h._trigger("show",null,h._ui(r,u[0]))})}:function(r,u){a(r).closest("li").addClass("ui-tabs-selected ui-state-active");u.removeClass("ui-tabs-hide");h._trigger("show",null,h._ui(r,u[0]))},s=m?function(r,u){u.animate(m,m.duration||"normal",function(){h.lis.removeClass("ui-tabs-selected ui-state-active");u.addClass("ui-tabs-hide");b(u,m);h.element.dequeue("tabs")})}:function(r,u){h.lis.removeClass("ui-tabs-selected ui-state-active");u.addClass("ui-tabs-hide");h.element.dequeue("tabs")};
-this.anchors.bind(j.event+".tabs",function(){var r=this,u=a(r).closest("li"),v=h.panels.filter(":not(.ui-tabs-hide)"),w=h.element.find(h._sanitizeSelector(r.hash));if(u.hasClass("ui-tabs-selected")&&!j.collapsible||u.hasClass("ui-state-disabled")||u.hasClass("ui-state-processing")||h.panels.filter(":animated").length||h._trigger("select",null,h._ui(this,w[0]))===false){this.blur();return false}j.selected=h.anchors.index(this);h.abort();if(j.collapsible)if(u.hasClass("ui-tabs-selected")){j.selected=
--1;j.cookie&&h._cookie(j.selected,j.cookie);h.element.queue("tabs",function(){s(r,v)}).dequeue("tabs");this.blur();return false}else if(!v.length){j.cookie&&h._cookie(j.selected,j.cookie);h.element.queue("tabs",function(){q(r,w)});h.load(h.anchors.index(this));this.blur();return false}j.cookie&&h._cookie(j.selected,j.cookie);if(w.length){v.length&&h.element.queue("tabs",function(){s(r,v)});h.element.queue("tabs",function(){q(r,w)});h.load(h.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
-a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(i){if(typeof i=="string")i=this.anchors.index(this.anchors.filter("[href$="+i+"]"));return i},destroy:function(){var i=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var b=
-a.data(this,"href.tabs");if(b)this.href=b;var h=a(this).unbind(".tabs");a.each(["href","load","cache"],function(j,l){h.removeData(l+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});i.cookie&&this._cookie(null,i.cookie);return this},add:function(i,
-b,h){if(h===d)h=this.anchors.length;var j=this,l=this.options;b=a(l.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,b));i=!i.indexOf("#")?i.replace("#",""):this._tabId(a("a",b)[0]);b.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var o=j.element.find("#"+i);o.length||(o=a(l.panelTemplate).attr("id",i).data("destroy.tabs",true));o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(h>=this.lis.length){b.appendTo(this.list);o.appendTo(this.list[0].parentNode)}else{b.insertBefore(this.lis[h]);
-o.insertBefore(this.panels[h])}l.disabled=a.map(l.disabled,function(n){return n>=h?++n:n});this._tabify();if(this.anchors.length==1){l.selected=0;b.addClass("ui-tabs-selected ui-state-active");o.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){j._trigger("show",null,j._ui(j.anchors[0],j.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[h],this.panels[h]));return this},remove:function(i){i=this._getIndex(i);var b=this.options,h=this.lis.eq(i).remove(),j=this.panels.eq(i).remove();
-if(h.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(i+(i+1<this.anchors.length?1:-1));b.disabled=a.map(a.grep(b.disabled,function(l){return l!=i}),function(l){return l>=i?--l:l});this._tabify();this._trigger("remove",null,this._ui(h.find("a")[0],j[0]));return this},enable:function(i){i=this._getIndex(i);var b=this.options;if(a.inArray(i,b.disabled)!=-1){this.lis.eq(i).removeClass("ui-state-disabled");b.disabled=a.grep(b.disabled,function(h){return h!=i});this._trigger("enable",null,
-this._ui(this.anchors[i],this.panels[i]));return this}},disable:function(i){i=this._getIndex(i);var b=this.options;if(i!=b.selected){this.lis.eq(i).addClass("ui-state-disabled");b.disabled.push(i);b.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[i],this.panels[i]))}return this},select:function(i){i=this._getIndex(i);if(i==-1)if(this.options.collapsible&&this.options.selected!=-1)i=this.options.selected;else return this;this.anchors.eq(i).trigger(this.options.event+".tabs");return this},
-load:function(i){i=this._getIndex(i);var b=this,h=this.options,j=this.anchors.eq(i)[0],l=a.data(j,"load.tabs");this.abort();if(!l||this.element.queue("tabs").length!==0&&a.data(j,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(i).addClass("ui-state-processing");if(h.spinner){var o=a("span",j);o.data("label.tabs",o.html()).html(h.spinner)}this.xhr=a.ajax(a.extend({},h.ajaxOptions,{url:l,success:function(n,k){b.element.find(b._sanitizeSelector(j.hash)).html(n);b._cleanup();h.cache&&a.data(j,
-"cache.tabs",true);b._trigger("load",null,b._ui(b.anchors[i],b.panels[i]));try{h.ajaxOptions.success(n,k)}catch(m){}},error:function(n,k){b._cleanup();b._trigger("load",null,b._ui(b.anchors[i],b.panels[i]));try{h.ajaxOptions.error(n,k,i,j)}catch(m){}}}));b.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},
-url:function(i,b){this.anchors.eq(i).removeData("cache.tabs").data("load.tabs",b);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.13"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(i,b){var h=this,j=this.options,l=h._rotate||(h._rotate=function(o){clearTimeout(h.rotation);h.rotation=setTimeout(function(){var n=j.selected;h.select(++n<h.anchors.length?n:0)},i);o&&o.stopPropagation()});b=h._unrotate||(h._unrotate=!b?function(o){o.clientX&&
-h.rotate(null)}:function(){t=j.selected;l()});if(i){this.element.bind("tabsshow",l);this.anchors.bind(j.event+".tabs",b);l()}else{clearTimeout(h.rotation);this.element.unbind("tabsshow",l);this.anchors.unbind(j.event+".tabs",b);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
+/*! jQuery UI - v1.11.4 - 2015-03-11
+* http://jqueryui.com
+* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
+
+(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);
+i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);
+return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)
+},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;
+if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};
+f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));
+return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;
+this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.autogrow.min.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.autogrow.min.js are identical
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.crud_api.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.crud_api.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/jquery.dynamicobjects.js elefant-elefant_1_3_11_rc/apps/admin/js/jquery.dynamicobjects.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/jquery.dynamicobjects.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/jquery.dynamicobjects.js	2015-09-05 21:13:59.000000000 -0500
@@ -28,7 +28,7 @@
 	self.build_embed_string = function (handler, data) {
 		var i, sep = '?', embed = handler;
 		for (i in data) {
-			embed += sep + i + '=' + escape (data[i]);
+			embed += sep + i + '=' + encodeURIComponent (data[i]);
 			sep = '&';
 		}
 		return embed;
@@ -206,7 +209,21 @@
 						html += '<input type="text" class="wysiwyg-file-input" name="' + obj.fields[i].name + '" id="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" />';
 
 						// add the File Manager icon:
-						html += '&nbsp;<button class="wysiwyg-fileManager" id="' + obj.fields[i].name + '-fileManager">' + self.opts.browse_button + '</button>';
+						html += '&nbsp;<button class="wysiwyg-fileManager" id="' + obj.fields[i].name + '-fileManager" data-name="' + obj.fields[i].name + '">' + self.opts.browse_button + '</button>';
+						html += "<br clear:both />"
+
+						if (obj.fields[i].message) {
+							html += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span>';
+						} 
+							
+						html += '</p>';
+						
+					} else if (obj.fields[i].type == 'image') {
+						html += '<p><label for="' + obj.fields[i].name + '" >' + obj.fields[i].label + '</label>';
+						html += '<input type="text" class="wysiwyg-file-input" name="' + obj.fields[i].name + '" id="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" />';
+
+						// add the File Manager icon:
+						html += '&nbsp;<button class="wysiwyg-imageManager" id="' + obj.fields[i].name + '-imageManager" data-name="' + obj.fields[i].name + '">' + self.opts.browse_button + '</button>';
 						html += "<br clear:both />"
 
 						if (obj.fields[i].message) {
@@ -215,6 +232,12 @@
 							
 						html += '</p>';
 						
+					} else if (obj.fields[i].type == 'color') {
+						html += '<p><label for="' + obj.fields[i].name + '">' + obj.fields[i].label + '</label><input type="color" name="' + obj.fields[i].name +'" value="' + obj.fields[i].initial + '" />';
+						if (obj.fields[i].message)
+							html += '<span id="' + obj.fields[i].name + '-msg" class="notice" style="display: none"><br />' + obj.fields[i].message + '</span>';
+						html += '</p>';
+						
 					} else {
 						html += '<p><label for="' + obj.fields[i].name + '">' + obj.fields[i].label + '</label><input type="text" name="' + obj.fields[i].name + '" value="' + obj.fields[i].initial + '" />';
 						if (obj.fields[i].message) {
@@ -252,13 +275,24 @@
 				for (var i in obj.fields) {
 					if (obj.fields[i].type == 'file') {
 						$('#' + obj.fields[i].name + '-fileManager').bind ('click', function () {
+							var input_field = $(this).data ('name');
+							$.filebrowser ({
+								set_value: '#' + input_field
+							});
+							return false;
+						});
+					} else if (obj.fields[i].type == 'image') {
+						$('#' + obj.fields[i].name + '-imageManager').bind ('click', function () {
+							var input_field = $(this).data ('name');
 							$.filebrowser ({
-								set_value: '#' + obj.fields[i].name
-								// todo: limit by file type
+								set_value: '#' + input_field,
+								thumbs: true,
+								allowed: ['jpg', 'jpeg', 'png', 'gif']
 							});
 							return false;
 						});
 					}
+					// TODO: Limit by additional file types (audio, video)
 				}
 
 				// submit button handler
@@ -370,4 +404,4 @@
 	};
 
 	self.init ();
-})(jQuery);
\ No newline at end of file
+})(jQuery);
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/jquery.i18n.js elefant-elefant_1_3_11_rc/apps/admin/js/jquery.i18n.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/jquery.i18n.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/jquery.i18n.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,31 @@
+/**
+ * Translates strings of text in .js files.
+ * Usage:
+ *
+ *     <script>
+ *     $(function () {
+ *         // This will make the text available to $.i18n()
+ *         $.i18n_append ({
+ *             'Some text': '{"Some text"}',
+ *             'Another string': '{"Another string"}'
+ *         });
+ *         
+ *         // Now fetch a translated string
+ *         console.log ($.i18n ('Some text'));
+ *     });
+ *     </script>
+ */
+(function ($) {
+	var strings = {};
+
+	$.i18n_append = function (obj) {
+		strings = $.extend (strings, obj);
+	};
+
+	$.i18n = function (text) {
+		if (strings[text]) {
+			return strings[text];
+		}
+		return text;
+	};
+})(jQuery);
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.jeditable.autogrow.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.jeditable.autogrow.js are identical
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.jeditable.deletable.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.jeditable.deletable.js are identical
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.jeditable.min.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.jeditable.min.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/jquery.jgrowl.min.js elefant-elefant_1_3_11_rc/apps/admin/js/jquery.jgrowl.min.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/jquery.jgrowl.min.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/jquery.jgrowl.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,11 +1,2 @@
-
-(function($){$.jGrowl=function(m,o){if($('#jGrowl').size()==0)
-$('<div id="jGrowl"></div>').addClass((o&&o.position)?o.position:$.jGrowl.defaults.position).appendTo('body');$('#jGrowl').jGrowl(m,o);};$.fn.jGrowl=function(m,o){if($.isFunction(this.each)){var args=arguments;return this.each(function(){var self=this;if($(this).data('jGrowl.instance')==undefined){$(this).data('jGrowl.instance',$.extend(new $.fn.jGrowl(),{notifications:[],element:null,interval:null}));$(this).data('jGrowl.instance').startup(this);}
-if($.isFunction($(this).data('jGrowl.instance')[m])){$(this).data('jGrowl.instance')[m].apply($(this).data('jGrowl.instance'),$.makeArray(args).slice(1));}else{$(this).data('jGrowl.instance').create(m,o);}});};};$.extend($.fn.jGrowl.prototype,{defaults:{pool:0,header:'',group:'',sticky:false,position:'top-right',glue:'after',theme:'default',themeState:'highlight',corners:'10px',check:250,life:3000,closeDuration:'normal',openDuration:'normal',easing:'swing',closer:true,closeTemplate:'&times;',closerTemplate:'<div>[ close all ]</div>',log:function(e,m,o){},beforeOpen:function(e,m,o){},afterOpen:function(e,m,o){},open:function(e,m,o){},beforeClose:function(e,m,o){},close:function(e,m,o){},animateOpen:{opacity:'show'},animateClose:{opacity:'hide'}},notifications:[],element:null,interval:null,create:function(message,o){var o=$.extend({},this.defaults,o);if(typeof o.speed!=='undefined'){o.openDuration=o.speed;o.closeDuration=o.speed;}
-this.notifications.push({message:message,options:o});o.log.apply(this.element,[this.element,message,o]);},render:function(notification){var self=this;var message=notification.message;var o=notification.options;var notification=$('<div class="jGrowl-notification '+o.themeState+' ui-corner-all'+
-((o.group!=undefined&&o.group!='')?' '+o.group:'')+'">'+'<div class="jGrowl-close">'+o.closeTemplate+'</div>'+'<div class="jGrowl-header">'+o.header+'</div>'+'<div class="jGrowl-message">'+message+'</div></div>').data("jGrowl",o).addClass(o.theme).children('div.jGrowl-close').bind("click.jGrowl",function(){$(this).parent().trigger('jGrowl.close');}).parent();$(notification).bind("mouseover.jGrowl",function(){$('div.jGrowl-notification',self.element).data("jGrowl.pause",true);}).bind("mouseout.jGrowl",function(){$('div.jGrowl-notification',self.element).data("jGrowl.pause",false);}).bind('jGrowl.beforeOpen',function(){if(o.beforeOpen.apply(notification,[notification,message,o,self.element])!=false){$(this).trigger('jGrowl.open');}}).bind('jGrowl.open',function(){if(o.open.apply(notification,[notification,message,o,self.element])!=false){if(o.glue=='after'){$('div.jGrowl-notification:last',self.element).after(notification);}else{$('div.jGrowl-notification:first',self.element).before(notification);}
-$(this).animate(o.animateOpen,o.openDuration,o.easing,function(){if($.browser.msie&&(parseInt($(this).css('opacity'),10)===1||parseInt($(this).css('opacity'),10)===0))
-this.style.removeAttribute('filter');$(this).data("jGrowl").created=new Date();$(this).trigger('jGrowl.afterOpen');});}}).bind('jGrowl.afterOpen',function(){o.afterOpen.apply(notification,[notification,message,o,self.element]);}).bind('jGrowl.beforeClose',function(){if(o.beforeClose.apply(notification,[notification,message,o,self.element])!=false)
-$(this).trigger('jGrowl.close');}).bind('jGrowl.close',function(){$(this).data('jGrowl.pause',true);$(this).animate(o.animateClose,o.closeDuration,o.easing,function(){$(this).remove();var close=o.close.apply(notification,[notification,message,o,self.element]);if($.isFunction(close))
-close.apply(notification,[notification,message,o,self.element]);});}).trigger('jGrowl.beforeOpen');if(o.corners!=''&&$.fn.corner!=undefined)$(notification).corner(o.corners);if($('div.jGrowl-notification:parent',self.element).size()>1&&$('div.jGrowl-closer',self.element).size()==0&&this.defaults.closer!=false){$(this.defaults.closerTemplate).addClass('jGrowl-closer ui-state-highlight ui-corner-all').addClass(this.defaults.theme).appendTo(self.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){$(this).siblings().trigger("jGrowl.beforeClose");if($.isFunction(self.defaults.closer)){self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]]);}});};},update:function(){$(this.element).find('div.jGrowl-notification:parent').each(function(){if($(this).data("jGrowl")!=undefined&&$(this).data("jGrowl").created!=undefined&&($(this).data("jGrowl").created.getTime()+parseInt($(this).data("jGrowl").life))<(new Date()).getTime()&&$(this).data("jGrowl").sticky!=true&&($(this).data("jGrowl.pause")==undefined||$(this).data("jGrowl.pause")!=true)){$(this).trigger('jGrowl.beforeClose');}});if(this.notifications.length>0&&(this.defaults.pool==0||$(this.element).find('div.jGrowl-notification:parent').size()<this.defaults.pool))
-this.render(this.notifications.shift());if($(this.element).find('div.jGrowl-notification:parent').size()<2){$(this.element).find('div.jGrowl-closer').animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){$(this).remove();});}},startup:function(e){this.element=$(e).addClass('jGrowl').append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){$(e).data('jGrowl.instance').update();},parseInt(this.defaults.check));if($.browser.msie&&parseInt($.browser.version)<7&&!window["XMLHttpRequest"]){$(this.element).addClass('ie6');}},shutdown:function(){$(this.element).removeClass('jGrowl').find('div.jGrowl-notification').remove();clearInterval(this.interval);},close:function(){$(this.element).find('div.jGrowl-notification').each(function(){$(this).trigger('jGrowl.beforeClose');});}});$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults;})(jQuery);
\ No newline at end of file
+!function(a){a.jGrowl=function(b,c){0===a("#jGrowl").length&&a('<div id="jGrowl"></div>').addClass(c&&c.position?c.position:a.jGrowl.defaults.position).appendTo(c&&c.appendTo?c.appendTo:a.jGrowl.defaults.appendTo),a("#jGrowl").jGrowl(b,c)},a.fn.jGrowl=function(b,c){if(void 0===c&&a.isPlainObject(b)&&(c=b,b=c.message),a.isFunction(this.each)){var d=arguments;return this.each(function(){void 0===a(this).data("jGrowl.instance")&&(a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null})),a(this).data("jGrowl.instance").startup(this)),a.isFunction(a(this).data("jGrowl.instance")[b])?a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(d).slice(1)):a(this).data("jGrowl.instance").create(b,c)})}},a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(b,c){var d=a.extend({},this.defaults,c);"undefined"!=typeof d.speed&&(d.openDuration=d.speed,d.closeDuration=d.speed),this.notifications.push({message:b,options:d}),d.log.apply(this.element,[this.element,b,d])},render:function(b){var c=this,d=b.message,e=b.options;e.themeState=""===e.themeState?"":"ui-state-"+e.themeState;var f=a("<div/>").addClass("jGrowl-notification alert "+e.themeState+" ui-corner-all"+(void 0!==e.group&&""!==e.group?" "+e.group:"")).append(a("<button/>").addClass("jGrowl-close").html(e.closeTemplate)).append(a("<div/>").addClass("jGrowl-header").html(e.header)).append(a("<div/>").addClass("jGrowl-message").html(d)).data("jGrowl",e).addClass(e.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return a(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();a(f).bind("mouseover.jGrowl",function(){a(".jGrowl-notification",c.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){a(".jGrowl-notification",c.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){e.beforeOpen.apply(f,[f,d,e,c.element])!==!1&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){e.open.apply(f,[f,d,e,c.element])!==!1&&("after"==e.glue?a(".jGrowl-notification:last",c.element).after(f):a(".jGrowl-notification:first",c.element).before(f),a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){a.support.opacity===!1&&this.style.removeAttribute("filter"),null!==a(this).data("jGrowl")&&"undefined"!=typeof a(this).data("jGrowl")&&(a(this).data("jGrowl").created=new Date),a(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(f,[f,d,e,c.element])}).bind("click",function(){e.click.apply(f,[f.message,e,c.element])}).bind("jGrowl.beforeClose",function(){e.beforeClose.apply(f,[f,d,e,c.element])!==!1&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",!0),a(this).animate(e.animateClose,e.closeDuration,e.easing,function(){a.isFunction(e.close)?e.close.apply(f,[f,d,e,c.element])!==!1&&a(this).remove():a(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==e.corners&&void 0!==a.fn.corner&&a(f).corner(e.corners),a(".jGrowl-notification:parent",c.element).length>1&&0===a(".jGrowl-closer",c.element).length&&this.defaults.closer!==!1&&a(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(c.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose"),a.isFunction(c.defaults.closer)&&c.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==a(this).data("jGrowl")&&void 0!==a(this).data("jGrowl").created&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life,10)<(new Date).getTime()&&a(this).data("jGrowl").sticky!==!0&&(void 0===a(this).data("jGrowl.pause")||a(this).data("jGrowl.pause")!==!0)&&a(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||a(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),a(this.element).find(".jGrowl-notification:parent").length<2&&a(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){a(b).data("jGrowl.instance").update()},parseInt(this.defaults.check,10))},shutdown:function(){a(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){a(this.element).find(".jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}}),a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults}(jQuery);
+//# sourceMappingURL=jquery.jgrowl.map
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.notifier.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.notifier.js are identical
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.search.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.search.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/jquery.simplemodal.1.4.2.min.js elefant-elefant_1_3_11_rc/apps/admin/js/jquery.simplemodal.1.4.2.min.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/jquery.simplemodal.1.4.2.min.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/jquery.simplemodal.1.4.2.min.js	1969-12-31 18:00:00.000000000 -0600
@@ -1,26 +0,0 @@
-/*
- * SimpleModal 1.4.2 - jQuery Plugin
- * http://simplemodal.com/
- * Copyright (c) 2011 Eric Martin
- * Licensed under MIT and GPL
- * Date: Sat, Dec 17 2011 15:35:38 -0800
- */
-(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){var j=[],k=b(document),l=b.browser.msie&&6===parseInt(b.browser.version)&&"object"!==typeof window.XMLHttpRequest,n=b.browser.msie&&7===parseInt(b.browser.version),m=null,h=b(window),i=[];b.modal=function(a,d){return b.modal.impl.init(a,d)};b.modal.close=function(){b.modal.impl.close()};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=function(){b.modal.impl.setContainerDimensions()};
-b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,d){b.modal.impl.update(a,d)};b.fn.modal=function(a){return b.modal.impl.init(this,a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1E3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',
-closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl={d:{},init:function(a,d){if(this.d.data)return!1;m=b.browser.msie&&!b.boxModel;this.o=b.extend({},b.modal.defaults,d);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof a){if(a=a instanceof jQuery?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),
-this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist))this.d.orig=a.clone(!0)}else if("string"===typeof a||"number"===typeof a)a=b("<div></div>").html(a);else return alert("SimpleModal Error: Unsupported data type: "+typeof a),this;this.create(a);this.open();b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(a){this.getDimensions();if(this.o.modal&&l)this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,
-{display:"none",opacity:0,position:"fixed",height:i[0],width:i[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo);this.d.overlay=b("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?j[0]:0,width:this.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend({position:this.o.fixed?
-"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo);this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=a.attr("id",a.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();
-this.d.data.appendTo(this.d.wrap);(l||m)&&this.fixIE()},bindEvents:function(){var a=this;b("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault();a.close()});a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault();a.close()});k.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())});h.bind("resize.simplemodal orientationchange.simplemodal",
-function(){a.getDimensions();a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition();l||m?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:i[0],width:i[1]}),a.d.overlay.css({height:j[0],width:j[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal");k.unbind("keydown.simplemodal");h.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,
-"fixed"===this.d.container.css("position")?this.d.container:null],function(b,f){if(f){var g=f[0].style;g.position="absolute";if(2>b)g.removeExpression("height"),g.removeExpression("width"),g.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),g.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var c,e;a&&a.constructor===
-Array?(c=a[0]?"number"===typeof a[0]?a[0].toString():a[0].replace(/px/,""):f.css("top").replace(/px/,""),c=-1===c.indexOf("%")?c+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(c.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(e="number"===typeof a[1]?
-a[1].toString():a[1].replace(/px/,""),e=-1===e.indexOf("%")?e+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(e.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(c='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',
-e='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');g.removeExpression("top");g.removeExpression("left");g.setExpression("top",c);g.setExpression("left",e)}}})},focus:function(a){var d=this,a=a&&-1!==b.inArray(a,["first","last"])?a:"first",f=b(":input:enabled:visible:"+a,d.d.wrap);setTimeout(function(){0<f.length?f.focus():d.d.wrap.focus()},
-10)},getDimensions:function(){var a=b.browser.opera&&"9.5"<b.browser.version&&"1.3">b.fn.jquery||b.browser.opera&&"9.5">b.browser.version&&"1.2.6"<b.fn.jquery?h[0].innerHeight:h.height();j=[k.height(),k.width()];i=[a,h.width()]},getVal:function(a,b){return a?"number"===typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?i[0]:i[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data)return!1;this.d.origHeight=this.getVal(a,"h");this.d.origWidth=this.getVal(b,
-"w");this.d.data.hide();a&&this.d.container.css("height",a);b&&this.d.container.css("width",b);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},setContainerDimensions:function(){var a=l||n,d=this.d.origHeight?this.d.origHeight:b.browser.opera?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:b.browser.opera?this.d.container.width():
-this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),f=this.d.data.outerHeight(!0),g=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||d;this.d.origWidth=this.d.origWidth||a;var c=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,e=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,c=c&&c<i[0]?c:i[0],e=e&&e<i[1]?e:i[1],h=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",d=d?this.o.autoResize&&d>c?c:d<h?h:d:f?f>c?c:this.o.minHeight&&
-"auto"!==h&&f<h?h:f:h,c=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>e?e:a<c?c:a:g?g>e?e:this.o.minWidth&&"auto"!==c&&g<c?c:g:c;this.d.container.css({height:d,width:a});this.d.wrap.css({overflow:f>d||g>a?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=i[0]/2-this.d.container.outerHeight(!0)/2;b=i[1]/2-this.d.container.outerWidth(!0)/2;var f="fixed"!==this.d.container.css("position")?h.scrollTop():0;this.o.position&&"[object Array]"===
-Object.prototype.toString.call(this.o.position)?(a=f+(this.o.position[0]||a),b=this.o.position[1]||b):a=f+a;this.d.container.css({left:b,top:a})},watchTab:function(a){if(0<b(a.target).parents(".simplemodal-container").length){if(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||0===this.inputs.length)a.preventDefault(),this.focus(a.shiftKey?"last":"first")}else a.preventDefault(),
-this.focus()},open:function(){this.d.iframe&&this.d.iframe.show();b.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&this.focus();this.bindEvents()},close:function(){if(!this.d.data)return!1;this.unbindEvents();if(b.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var a=b("#simplemodal-placeholder");this.o.persist?a.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",
-this.display)):(this.d.data.hide().remove(),a.replaceWith(this.d.orig))}else this.d.data.hide().remove();this.d.container.hide().remove();this.d.overlay.hide();this.d.iframe&&this.d.iframe.hide().remove();this.d.overlay.remove();this.d={}}}}});
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/jquery.simplemodal.1.4.4.min.js elefant-elefant_1_3_11_rc/apps/admin/js/jquery.simplemodal.1.4.4.min.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/jquery.simplemodal.1.4.4.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/jquery.simplemodal.1.4.4.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,26 @@
+/*
+ * SimpleModal 1.4.4 - jQuery Plugin
+ * http://simplemodal.com/
+ * Copyright (c) 2013 Eric Martin
+ * Licensed under MIT and GPL
+ * Date: Sun, Jan 20 2013 15:58:56 -0800
+ */
+(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){var j=[],n=b(document),k=navigator.userAgent.toLowerCase(),l=b(window),g=[],o=null,p=/msie/.test(k)&&!/opera/.test(k),q=/opera/.test(k),m,r;m=p&&/msie 6./.test(k)&&"object"!==typeof window.XMLHttpRequest;r=p&&/msie 7.0/.test(k);b.modal=function(a,h){return b.modal.impl.init(a,h)};b.modal.close=function(){b.modal.impl.close()};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=
+function(){b.modal.impl.setContainerDimensions()};b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,h){b.modal.impl.update(a,h)};b.fn.modal=function(a){return b.modal.impl.init(this,a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1E3,
+close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl={d:{},init:function(a,h){if(this.d.data)return!1;o=p&&!b.support.boxModel;this.o=b.extend({},b.modal.defaults,h);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof a){if(a=a instanceof b?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id",
+"simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist))this.d.orig=a.clone(!0)}else if("string"===typeof a||"number"===typeof a)a=b("<div></div>").html(a);else return alert("SimpleModal Error: Unsupported data type: "+typeof a),this;this.create(a);this.open();b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(a){this.getDimensions();if(this.o.modal&&m)this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,
+{display:"none",opacity:0,position:"fixed",height:g[0],width:g[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo);this.d.overlay=b("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?j[0]:0,width:this.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend({position:this.o.fixed?
+"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo);this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=a.attr("id",a.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();
+this.d.data.appendTo(this.d.wrap);(m||o)&&this.fixIE()},bindEvents:function(){var a=this;b("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault();a.close()});a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault();a.close()});n.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())});l.bind("resize.simplemodal orientationchange.simplemodal",
+function(){a.getDimensions();a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition();m||o?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:g[0],width:g[1]}),a.d.overlay.css({height:j[0],width:j[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal");n.unbind("keydown.simplemodal");l.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,
+"fixed"===this.d.container.css("position")?this.d.container:null],function(b,e){if(e){var f=e[0].style;f.position="absolute";if(2>b)f.removeExpression("height"),f.removeExpression("width"),f.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),f.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var c,d;a&&a.constructor===
+Array?(c=a[0]?"number"===typeof a[0]?a[0].toString():a[0].replace(/px/,""):e.css("top").replace(/px/,""),c=-1===c.indexOf("%")?c+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(c.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(d="number"===typeof a[1]?
+a[1].toString():a[1].replace(/px/,""),d=-1===d.indexOf("%")?d+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(d.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(c='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',
+d='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');f.removeExpression("top");f.removeExpression("left");f.setExpression("top",c);f.setExpression("left",d)}}})},focus:function(a){var h=this,a=a&&-1!==b.inArray(a,["first","last"])?a:"first",e=b(":input:enabled:visible:"+a,h.d.wrap);setTimeout(function(){0<e.length?e.focus():h.d.wrap.focus()},
+10)},getDimensions:function(){var a="undefined"===typeof window.innerHeight?l.height():window.innerHeight;j=[n.height(),n.width()];g=[a,l.width()]},getVal:function(a,b){return a?"number"===typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?g[0]:g[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data)return!1;this.d.origHeight=this.getVal(a,"h");this.d.origWidth=this.getVal(b,"w");this.d.data.hide();a&&this.d.container.css("height",a);b&&this.d.container.css("width",
+b);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},setContainerDimensions:function(){var a=m||r,b=this.d.origHeight?this.d.origHeight:q?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:q?this.d.container.width():this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),e=this.d.data.outerHeight(!0),f=
+this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||b;this.d.origWidth=this.d.origWidth||a;var c=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,d=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,c=c&&c<g[0]?c:g[0],d=d&&d<g[1]?d:g[1],i=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",b=b?this.o.autoResize&&b>c?c:b<i?i:b:e?e>c?c:this.o.minHeight&&"auto"!==i&&e<i?i:e:i,c=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>d?d:a<c?c:a:f?
+f>d?d:this.o.minWidth&&"auto"!==c&&f<c?c:f:c;this.d.container.css({height:b,width:a});this.d.wrap.css({overflow:e>b||f>a?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=g[0]/2-this.d.container.outerHeight(!0)/2;b=g[1]/2-this.d.container.outerWidth(!0)/2;var e="fixed"!==this.d.container.css("position")?l.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(a=e+(this.o.position[0]||a),b=this.o.position[1]||b):
+a=e+a;this.d.container.css({left:b,top:a})},watchTab:function(a){if(0<b(a.target).parents(".simplemodal-container").length){if(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||0===this.inputs.length)a.preventDefault(),this.focus(a.shiftKey?"last":"first")}else a.preventDefault(),this.focus()},open:function(){this.d.iframe&&this.d.iframe.show();b.isFunction(this.o.onOpen)?
+this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&this.focus();this.bindEvents()},close:function(){if(!this.d.data)return!1;this.unbindEvents();if(b.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var a=b("#simplemodal-placeholder");this.o.persist?a.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),a.replaceWith(this.d.orig))}else this.d.data.hide().remove();
+this.d.container.hide().remove();this.d.overlay.hide();this.d.iframe&&this.d.iframe.hide().remove();this.d.overlay.remove();this.d={}}}}});
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/js/jquery.triggers.js and elefant-elefant_1_3_11_rc/apps/admin/js/jquery.triggers.js are identical
Files elefant-elefant_1_3_10_beta/apps/admin/js/modal.js and elefant-elefant_1_3_11_rc/apps/admin/js/modal.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/custom.css elefant-elefant_1_3_11_rc/apps/admin/js/redactor/custom.css
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/custom.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/custom.css	2015-09-05 21:13:59.000000000 -0500
@@ -1,26 +1,27 @@
-.redactor_box {
+.redactor-box {
 	border: 0;
+	padding: 0;
+	margin: 0;
 	background: inherit;
+	max-width: 100%;
 }
 
-.redactor_toolbar {
+.redactor-toolbar {
 	border: 0;
 	background: inherit;
+	box-shadow: none;
+	padding: 0;
+	margin: 0;
+	height: 32px;
+	overflow: hidden;
 }
 
-.redactor_toolbar li.redactor_separator {
-	border: 0;
-	background-image: url(/apps/admin/css/admin/pipe.png);
-	background-repeat: no-repeat;
-	background-position: 0px 9px;
-	width: 1px;
-}
-
-.redactor_editor {
-	margin-top: -1px !important;
+.redactor-editor {
+	margin-top: 0px !important;
+	padding: 0;
 }
 
-.redactor_editor, .redactor_box textarea {
+.redactor-editor, .redactor-box textarea {
 	border: 1px solid #999;
 	-webkit-border-radius: 2px;
 	-moz-border-radius: 2px;
@@ -30,37 +31,31 @@
 	padding: 10px 5px 5px 5px !important;
 }
 
-.redactor_editor:focus {
+.redactor-editor:focus {
 	height: 418px !important;
 	padding: 10px 5px 5px 5px !important;
-	margin-top: -1px !important;
-}
-
-.redactor_toolbar li a.redactor_btn_undo {
-	background-image: url(/apps/admin/css/admin/undo-icon.png);
-	background-repeat: no-repeat;
-	background-position: 0px 0px;
-}
-
-.redactor_toolbar li a.redactor_btn_link_unlink {
-	background-position: -300px;
+	margin-top: 0px !important;
 }
 
-.redactor_toolbar li a.redactor_btn_filebrowser {
-	background-position: -250px;
+.redactor-toolbar li a,
+.redactor-toolbar li a.re-icon {
+	padding: 9px;
 }
 
-.redactor_toolbar li a.redactor_btn_imagebrowser {
-	background-position: -200px;
+.redactor-toolbar li a:hover,
+.redactor-toolbar li a:active,
+.redactor-toolbar li a.redactor-act,
+.redactor-toolbar li a.re-icon:hover i:before {
+	background-color: #ddd;
+	color: #111 !important;
 }
 
-.redactor_toolbar li a.redactor_btn_dynamic {
-	background-image: url(/apps/admin/css/admin/dynamic-icon.png);
-	background-repeat: no-repeat;
-	background-position: 4px 4px;
+.redactor-dropdown a:hover {
+	background-color: #ddd;
+	color: #111 !important;
 }
 
-.redactor_editor .embedded {
+.redactor-editor .embedded {
 	background-color: #eee;
 	border: 1px solid #ccc;
 	-webkit-border-radius: 4px;
@@ -73,44 +68,59 @@
 	white-space: nowrap;
 }
 
-.redactor_editor .embedded:hover {
+.redactor-editor .embedded:hover {
 	cursor: pointer;
 }
 
-.redactor_editor .embedded:after {
+.redactor-editor .embedded:after {
 	content: attr(data-label);
 }
 
-#redactor_modal_overlay {
+#redactor-modal-overlay {
+	z-index: 100001 !important;
 	background: #000;
 	opacity: 0.2;
 	filter: alpha(opacity=20);
 }
 
-#redactor_modal {
+#redactor-modal-box {
+	z-index: 100002 !important;
+}
+
+#redactor-modal {
+	z-index: 100002 !important;
 	-webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
 	-moz-box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
 	box-shadow: 0px 1px 2px 0px rgba(0,0,0,.3);
 	-webkit-border-radius: 0;
 	-moz-border-radius: 0;
 	border-radius: 0;
+	width: 550px !important;
+	max-width: 100% !important;
 }
 
-#redactor_modal_close {
+#redactor-modal-close {
 	color: #444;
 	border: 1px solid #aaa;
-	margin-top: 3px;
-	margin-right: 3px;
-	line-height: 18px;
+	margin: -2px -2px 0px 0px;
+	padding: 3px 5px 5px 5px;
+	line-height: 10px;
 	text-align: center;
+	font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
+	font-size: 14px;
+	text-transform: lowercase;
+	text-decoration: none;
+	font-weight: normal;
+	height: 10px;
+	width: 8px;
 }
 
-#redactor_modal_close:hover {
+#redactor-modal-close:hover {
 	background-color: #ccc;
 	color: #222;
 }
 
-#redactor_modal_header, #redactor_modal header {
+#redactor-modal-header, #redactor-modal header {
 	background: #eeeeee; /* Old browsers */
 	background: -moz-linear-gradient(top,  #eeeeee 0%, #dddddd 100%); /* FF3.6+ */
 	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeeeee), color-stop(100%,#dddddd)); /* Chrome,Safari4+ */
@@ -130,7 +140,7 @@
 	border-radius: 0;
 }
 
-#redactor_modal_inner {
+#redactor-modal-body {
 	background: #fafafa;
 	border: 1px solid #fafafa;
 	border-top: 0px none;
@@ -139,9 +149,53 @@
 	overflow-y: auto;
 }
 
-	#redactor_modal_inner section {
+	#redactor-modal-body section {
 		padding: 0px 15px 0px 15px;
 	}
+	
+	#redactor-modal #redactor-modal-body label {
+		margin-bottom: 0px !important;
+	}
+	
+	#redactor-modal #redactor-modal-body input[type=text],
+	#redactor-modal #redactor-modal-body input[type=email],
+	#redactor-modal #redactor-modal-body input[type=password],
+	#redactor-modal #redactor-modal-body textarea {
+		font-size: 12px;
+		border: 1px solid #999;
+		-webkit-border-radius: 2px;
+		-moz-border-radius: 2px;
+		border-radius: 2px;
+		padding: 2px 4px;
+		text-shadow: 0 1px 0 #fff;
+		box-shadow: none;
+		height: 15px;
+		outline: none;
+		max-width: 95%;
+	}
+
+#redactor-modal .redactor-modal-btn {
+	-webkit-border-radius: 0;
+	-moz-border-radius: 0;
+	border-radius: 0;
+	text-shadow: none !important;
+}
+
+	#redactor-modal footer button.redactor-modal-close-btn:hover {
+		color: #333 !important;
+	}
+
+	#redactor-modal footer button.redactor-modal-delete-btn:hover {
+		color: #fff !important;
+	}
+
+	#redactor-modal footer button.redactor-modal-action-btn:hover {
+		color: #fff !important;
+	}
+	
+	#redactor-modal select {
+		width: auto;
+	}
 
 .links-btn {
 	display: inline-block;
@@ -172,6 +226,24 @@
 	display: none;
 }
 
-#redactor_modal label {
-	margin-bottom: 0px !important;
-}
\ No newline at end of file
+@media (max-width: 480px) {
+	div.redactor-box,
+	div.redactor-editor,
+	div.redactor-box textarea {
+		width: 97% !important;
+		max-width: 97% !important;
+	}
+	
+	.redactor-toolbar li a.re-icon.re-deleted,
+	.redactor-toolbar li a.re-icon.re-indent,
+	.redactor-toolbar li a.re-icon.re-outdent,
+	.redactor-toolbar li a.re-icon.re-html {
+		display: none;
+	}
+	
+	#redactor-modal select,
+	#redactor-modal input[type=checkbox],
+	#redactor-modal input[type=radio] {
+		width: auto !important;
+	}
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ar.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ar.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ar.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ar.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,23 +1,23 @@
 (function ($) {
 $.Redactor.opts.langs['ar'] = {
 	html: ' HTML',
-	video: '',
-	image: '',
+	video: ' ...',
+	image: ' ...',
 	table: '',
 	link: '',
-	link_insert: ' /  ',
-	link_edit: 'Edit link',
+	link_insert: ' ...',
+	link_edit: ' ',
 	unlink: ' ',
 	formatting: '',
-	paragraph: '',
+	paragraph: ' ',
 	quote: '',
 	code: '',
-	header1: ' 1',
-	header2: ' 2',
-	header3: ' 3',
-	header4: ' 4',
-	header5: '5 ',
-	bold:  '',
+	header1: ' 1',
+	header2: ' 2',
+	header3: ' 3',
+	header4: ' 4',
+	header5: '5 ',
+	bold:  '',
 	italic: '',
 	fontcolor: ' ',
 	backcolor: ' ',
@@ -25,24 +25,24 @@
 	orderedlist: ' ',
 	outdent: '  ',
 	indent: '  ',
-	cancel: '',
-	insert: '',
-	save: '',
-	_delete: '',
-	insert_table: ' ',
-	insert_row_above: '  ',
-	insert_row_below: '  ',
-	insert_column_left: '  ',
-	insert_column_right: '  ',
-	delete_column: ' ',
-	delete_row: ' ',
-	delete_table: ' ',
+	cancel: '',
+	insert: '',
+	save: '',
+	_delete: '',
+	insert_table: ' ...',
+	insert_row_above: '  ',
+	insert_row_below: '  ',
+	insert_column_left: '  ',
+	insert_column_right: '  ',
+	delete_column: ' ',
+	delete_row: ' ',
+	delete_table: ' ',
 	rows: '',
 	columns: '',
-	add_head: ' ',
-	delete_head: ' ',
-	title: '',
-	image_position: '',
+	add_head: ' ',
+	delete_head: ' ',
+	title: '',
+	image_position: '',
 	none: '',
 	left: '',
 	right: '',
@@ -51,24 +51,25 @@
 	mailto: ' ',
 	web: '',
 	video_html_code: ' ',
-	file: '  ',
-	upload: '',
-	download: '',
-	choose: '',
-	or_choose: ' ',
+	file: ' ...',
+	upload: '',
+	download: '',
+	choose: '',
+	or_choose: ' ',
 	drop_file_here: '  ',
-	align_left:	'  ',
-	align_center: '  ',
-	align_right: '  ',
-	align_justify: ' ',
-	horizontalrule: '  ',
-	fullscreen: ' ',
-	deleted: '  ',
+	align_left:	'   ',
+	align_center: '   ',
+	align_right: '   ',
+	align_justify: ' ',
+	horizontalrule: '  ',
+	fullscreen: ' ',
+	deleted: '',
 	anchor: '',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit'
+	link_new_tab: '    ',
+	underline: '',
+	alignment: '',
+	filename: ' ()',
+	edit: '',
+	center: ''
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/az.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/az.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/az.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/az.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Altxtli',
 	alignment: 'Dzlndirm',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ba.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ba.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ba.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ba.js	2015-09-05 21:13:59.000000000 -0500
@@ -72,6 +72,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/bg.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/bg.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/bg.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/bg.js	2015-09-05 21:13:59.000000000 -0500
@@ -70,6 +70,7 @@
 	underline: '',
 	alignment: '',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/by.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/by.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/by.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/by.js	2015-09-05 21:13:59.000000000 -0500
@@ -70,6 +70,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ca.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ca.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ca.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ca.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/cs.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/cs.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/cs.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/cs.js	2015-09-05 21:13:59.000000000 -0500
@@ -80,6 +80,7 @@
 	underline: 'Podtren',
 	alignment: 'Zarovnn',
 	filename: 'Nzev (voliteln)',
-	edit: 'Upravit'
+	edit: 'Upravit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/da.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/da.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/da.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/da.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/de.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/de.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/de.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/de.js	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
 	table: 'Tabelle',
 	link: 'Link',
 	link_insert: 'Link einfgen ...',
-	link_edit: 'Edit link',
+	link_edit: 'Link bearbeiten',
 	unlink: 'Link entfernen',
 	formatting: 'Formatvorlagen',
 	paragraph: 'Absatz',
@@ -50,7 +50,7 @@
 	none: 'Keine',
 	left: 'Links',
 	right: 'Rechts',
-	image_web_link: 'Bilder Link',
+	image_web_link: 'Bilder-Link',
 	text: 'Text',
 	mailto: 'Email',
 	web: 'URL',
@@ -73,6 +73,7 @@
 	underline: 'Unterstrichen',
 	alignment: 'Ausrichtung',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Bearbeiten',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/el.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/el.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/el.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/el.js	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
 	table: '',
 	link: '',
 	link_insert: ' ...',
-	link_edit: 'Edit link',
+	link_edit: ' ',
 	unlink: ' ',
 	formatting: '',
 	paragraph: '',
@@ -30,8 +30,8 @@
 	save: '',
 	_delete: '',
 	insert_table: ' ...',
-	insert_row_above: '  ',
-	insert_row_below: '  ',
+	insert_row_above: '  ',
+	insert_row_below: '  ',
 	insert_column_left: '  ',
 	insert_column_right: '  ',
 	delete_column: ' ',
@@ -49,25 +49,27 @@
 	image_web_link: ' ',
 	text: '',
 	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Video Embed Code',
+	web: ' URL',
+	video_html_code: '  ',
 	file: ' ...',
-	upload: 'Upload',
-	download: 'Download',
+	upload: '',
+	download: '',
 	choose: '',
 	or_choose: ' ',
 	drop_file_here: '  ',
 	align_left:	' ',
 	align_center: '  ',
 	align_right: ' ',
-	align_justify: ' ',
+	align_justify: ' ',
 	horizontalrule: '  ',
-	deleted: '',
-	anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit'
+	deleted: '',
+	anchor: '',
+	link_new_tab: '    ',
+	underline: '',
+	alignment: '',
+	filename: ' ()',
+	edit: '',
+	center: '',
 };
 })( jQuery );
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/eo.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/eo.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/eo.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/eo.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Substrekita', // adjective
 	alignment: 'israndigo', // substantive
 	filename: 'Dosiernomo (fakultativa)', // substantive
-	edit: 'Redaktu' // imperative
+	edit: 'Redaktu', // imperative
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/es.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/es.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/es.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/es.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Subrayado',
 	alignment: 'Alineacin',
 	filename: 'Nombre (opcional)',
-	edit: 'Editar'
+	edit: 'Editar',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/es_ar.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/es_ar.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/es_ar.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/es_ar.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/fa.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/fa.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/fa.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/fa.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/fi.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/fi.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/fi.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/fi.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Alleviivaa',
 	alignment: 'Tasaus',
 	filename: 'Nimi (valinnainen)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/fr.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/fr.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/fr.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/fr.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Souligner',
 	alignment: 'Alignement',
 	filename: 'Nom de fichier (optionnel)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ge.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ge.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ge.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ge.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,74 @@
+(function ($) {
+$.Redactor.opts.langs['ge'] = {
+	html: 'HTML ',
+	video: ' ',
+	image: ' ',
+	table: '',
+	link: '',
+	link_insert: ' ',
+	link_edit: ' ',
+	unlink: ' ',
+	formatting: ' ',
+	paragraph: '',
+	quote: '',
+	code: '',
+	header1: ' 1',
+	header2: ' 2',
+	header3: ' 3',
+	header4: ' 4',
+	header5: ' 5',
+	bold:  '',
+	italic: '',
+	fontcolor: ' ',
+	backcolor: ' ',
+	unorderedlist: ' ',
+	orderedlist: ' ',
+	outdent: ' ',
+	indent: ' ',
+	cancel: '',
+	insert: '',
+	save: '',
+	_delete: '',
+	insert_table: ' ',
+	insert_row_above: '  ',
+	insert_row_below: '  ',
+	insert_column_left: '  ',
+	insert_column_right: '  ',
+	delete_column: ' ',
+	delete_row: ' ',
+	delete_table: ' ',
+	rows: '',
+	columns: '',
+	add_head: ' ',
+	delete_head: ' ',
+	title: '',
+	image_position: '',
+	none: '',
+	left: '',
+	right: '',
+	image_web_link: ' -',
+	text: '',
+	mailto: '. ',
+	web: '',
+	video_html_code: ' HTML Embed ',
+	file: ' ',
+	upload: '',
+	download: '',
+	choose: '',
+	or_choose: ' ',
+	drop_file_here: '  ',
+	align_left:	' ',
+	align_center: '',
+	align_right: ' ',
+	align_justify: ' ',
+	horizontalrule: '  ',
+	deleted: '',
+	anchor: '',
+	link_new_tab: '  ',
+	underline: '',
+	alignment: ' ',
+	filename: ' ()',
+	edit: '',
+	center: 'Center'
+};
+})( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/he.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/he.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/he.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/he.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: ' ',
 	alignment: '',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/hr.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/hr.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/hr.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/hr.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,4 +1,4 @@
-(function ($) {
+(function($) {
 	$.Redactor.opts.langs['hr'] = {
 		html: 'HTML',
 		video: 'Umetni video',
@@ -6,6 +6,7 @@
 		table: 'Tablica',
 		link: 'Poveznica',
 		link_insert: 'Umetni poveznicu',
+		link_edit: 'Uredi poveznicu',
 		unlink: 'Ukloni poveznicu',
 		formatting: 'Ure&#273ivanje',
 		paragraph: 'Paragraf',
@@ -45,6 +46,7 @@
 		none: 'Nema',
 		left: 'lijevo',
 		right: 'desno',
+		center: 'centriraj',
 		image_web_link: 'Internet adresa slike',
 		text: 'Tekst',
 		mailto: 'Email',
@@ -67,6 +69,7 @@
 		underline: 'Podvuci',
 		alignment: 'Poravnanje',
 		filename: 'Naziv (neobavezno)',
-		edit: 'Edit'
+		edit: 'Uredi',
+		fullscreen: 'Cijeli zaslon'
 	};
 })(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/hu.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/hu.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/hu.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/hu.js	2015-09-05 21:13:59.000000000 -0500
@@ -70,6 +70,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/id.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/id.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/id.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/id.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/it.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/it.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/it.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/it.js	2015-09-05 21:13:59.000000000 -0500
@@ -71,6 +71,7 @@
 	underline: 'Sottolineato',
 	alignment: 'Allineamento',
 	filename: 'Nome (opzionale)',
-	edit: 'Modifica'
+	edit: 'Modifica',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ja.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ja.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ja.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ja.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: '',
 	alignment: '',
 	filename: '',
-	edit: ''
+	edit: '',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ko.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ko.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ko.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ko.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: '',
 	alignment: '',
 	filename: ' ()',
-	edit: ''
+	edit: '',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/lt.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/lt.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/lt.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/lt.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/lv.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/lv.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/lv.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/lv.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/mk.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/mk.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/mk.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/mk.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: '',
 	alignment: '',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/nl.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/nl.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/nl.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/nl.js	2015-09-05 21:13:59.000000000 -0500
@@ -72,7 +72,8 @@
 	underline: 'Onderstrepen',
 	alignment: 'Uitlijning',
 	filename: 'Naam (optioneel)',
-	edit: 'Bewerk'
+	edit: 'Bewerk',
+	center: 'Center'
 };
 })( jQuery );
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/no_nb.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/no_nb.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/no_nb.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/no_nb.js	2015-09-05 21:13:59.000000000 -0500
@@ -44,13 +44,13 @@
 		title: 'Tittel',
 		image_position: 'Plassering',
 		none: 'Ingen',
-		left: 'venstre',
+		left: 'Venstre',
 		right: 'H&oslash;yre',
 		image_web_link: 'Bildelink',
 		text: 'Tekst',
 		mailto: 'E-Post',
 		web: 'URL',
-		video_html_code: 'Kode for innbyggingsvideo',
+		video_html_code: 'Kode for innbyggingsvideo eller Youtube/Vimeo link',
 		file: 'Sett inn fil...',
 		upload: 'Last opp',
 		download: 'Last ned',
@@ -68,6 +68,7 @@
 		underline: 'Understreking',
 		alignment: 'Justering',
 		filename: 'Filnavn (valgfritt)',
-		edit: 'Edit'
+		edit: 'Endre',
+		center: 'Midten'
 	};
 })(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/pl.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/pl.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/pl.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/pl.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Pokdrelony',
 	alignment: 'Wyrwnanie',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/pt_br.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/pt_br.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/pt_br.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/pt_br.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,80 +1,74 @@
 (function ($) {
-$.Redactor.opts.langs['pt_br'] = {
-	html: 'Ver HTML',
-	video: 'V&iacute;deo',
-	image: 'Imagem',
-	table: 'Tabela',
-	link: 'Link',
-	link_insert: 'Inserir link...',
-	link_edit: 'Edit link',
-	unlink: 'Remover link',
-	formatting: 'Estilos',
-	paragraph: 'Par&aacute;grafo',
-	quote: 'Cita&ccedil;&atilde;o',
-	code: 'C&oacute;digo',
-	header1: 'T&iacute;tulo 1',
-	header2: 'T&iacute;tulo 2',
-	header3: 'T&iacute;tulo 3',
-	header4: 'T&iacute;tulo 4',
-	header5: 'T&iacute;tulo 5',
-	bold:  'Negrito',
-	italic: 'It&aacute;lico',
-	fontcolor: 'Cor da fonte',
-	backcolor: 'Cor do fundo',
-	unorderedlist: 'Lista n&atilde;o ordenada',
-	orderedlist: 'Lista ordenada',
-	outdent: 'Remover identa&ccedil;&atilde;o',
-	indent: 'Identar',
-	cancel: 'Cancelar',
-	insert: 'Inserir',
-	save: 'Salvar',
-	_delete: 'Remover',
-	insert_table: 'Inserir tabela',
-	add_cell: 'Adicionar coluna',
-	delete_cell: 'Remover coluna',
-	add_row: 'Adicionar linha',
-	delete_row: 'Remover linha',
-	thead: 'Cabe&ccedil;alho',
-	delete_table: 'Remover tabela',
-	insert_row_above: 'Adicionar linha acima',
-	insert_row_below: 'Adicionar linha abaixo',
-	insert_column_left: 'Adicionar coluna  esquerda',
-	insert_column_right: 'Adicionar coluna da direita',
-	delete_column: 'Remover Coluna',
-	delete_row: 'Remover linha',
-	delete_table: 'Remover tabela',
-	rows: 'Linhas',
-	columns: 'Colunas',
-	add_head: 'Adicionar cabealho',
-	delete_head: 'Remover cabealho',
-	title: 'T&iacute;tulo',
-	image_position: 'Posi&ccedil;&atilde;o',
-	none: 'nenhum',
-	left: 'esquerda',
-	right: 'direita',
-	image_web_link: 'link para uma imagem',
-	text: 'Texto',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Video embed code',
-	file: 'Arquivo',
-	upload: 'Upload',
-	download: 'Download',
-	choose: 'Escolha',
-	or_choose: 'Ou escolha',
-	drop_file_here: 'Arraste um arquivo at aqui',
-	align_left:	'Alinhar a esquerda',
-	align_center: 'Centralizar',
-	align_right: 'Alinhar a direita',
-	align_justify: 'Justificar',
-	horizontalrule: 'Linha horizontal',
-	fullscreen: 'Tela cheia',
-	deleted: 'Removido',
-    anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit'
-};
-})( jQuery );
+	$.Redactor.opts.langs['pt_br'] = {
+		html: 'HTML',
+		video: 'Inserir Vdeo...',
+		image: 'Inserir Imagem...',
+		table: 'Tabela',
+		link: 'Link',
+		link_insert: 'Inserir Link...',
+		link_edit: 'Editar Link',
+		unlink: 'Remover Link',
+		formatting: 'Formatao',
+		paragraph: 'Pargrafo',
+		quote: 'Citar',
+		code: 'Cdigo',
+		header1: 'Cabealho 1',
+		header2: 'Cabealho 2',
+		header3: 'Cabealho 3',
+		header4: 'Cabealho 4',
+		header5: 'Cabealho 5',
+		bold:  'Negrito',
+		italic: 'Itlico',
+		fontcolor: 'Cor da Fonte',
+		backcolor: 'Cor de Fundo',
+		unorderedlist: 'Lista No Ordenada',
+		orderedlist: 'Lista Ordenada',
+		outdent: 'Remover Identao',
+		indent: 'Identar',
+		cancel: 'Cancelar',
+		insert: 'Inserir',
+		save: 'Salvar',
+		_delete: 'Apagar',
+		insert_table: 'Inserir Tabela...',
+		insert_row_above: 'Adicionar Linha Acima',
+		insert_row_below: 'Adicionar Linha Abaixo',
+		insert_column_left: 'Adicionar Coluna  Esquerda',
+		insert_column_right: 'Adicionar Coluna  Direita',
+		delete_column: 'Eliminar Coluna',
+		delete_row: 'Eliminar Linha',
+		delete_table: 'Eliminar Tabela',
+		rows: 'Linhas',
+		columns: 'Colunas',
+		add_head: 'Adicionar Cabealho',
+		delete_head: 'Eliminar Cabealho',
+		title: 'Ttulo',
+		image_position: 'Posio',
+		none: 'Nenhum',
+		left: 'Esquerda',
+		right: 'Direita',
+		image_web_link: 'URL de Imagem',
+		text: 'Texto',
+		mailto: 'Email',
+		web: 'URL',
+		video_html_code: 'Cdigo de Incorporao de Vdeo',
+		file: 'Inserir Arquivo...',
+		upload: 'Upload',
+		download: 'Download',
+		choose: 'Escolha',
+		or_choose: 'Ou escolha',
+		drop_file_here: 'Solte o arquivo aqui',
+		align_left:	'Alinhar  esquerda',
+		align_center: 'Centrar',
+		align_right: 'Alinhar  direita',
+		align_justify: 'Justificar',
+		horizontalrule: 'Inserir Linha Horizontal',
+		deleted: 'Apagado',
+		anchor: 'ncora',
+		link_new_tab: 'Abrir link em uma nova aba',
+		underline: 'Sublinhado',
+		alignment: 'Alinhamento',
+		filename: 'Nome (opcional)',
+		edit: 'Editar',
+		center: 'Centro'
+	};
+})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/pt_pt.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/pt_pt.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/pt_pt.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/pt_pt.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ro.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ro.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ro.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ro.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ru.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ru.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ru.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ru.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: '',
 	alignment: '',
 	filename: ' ()',
-	edit: '.'
+	edit: '.',
+	center: ' '
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sk.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sk.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sk.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sk.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sl.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sl.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sl.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sl.js	2015-09-05 21:13:59.000000000 -0500
@@ -72,6 +72,7 @@
 	underline: 'Podrtano',
 	alignment: 'Poravnava',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sq.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sq.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sq.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sq.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,77 +1,78 @@
 (function ($) {
-$.Redactor.opts.langs['sq'] = {
-	html: 'HTML',
-	video: 'Video',
-	image: 'Fotografi',
-	table: 'Tabel&euml;',
-	link: 'Link',
-	link_insert: 'Lidh linq ...',
-	link_edit: 'Edit link',
-	unlink: 'Hiq linkun',
-	formatting: 'Stilet',
-	paragraph: 'Paragraf',
-	quote: 'Kuot&euml;',
-	code: 'Kod',
-	header1: 'Header 1',
-	header2: 'Header 2',
-	header3: 'Header 3',
-	header4: 'Header 4',
-	header5: 'Header 5',
-	bold:  'Te trasha / Bold',
-	italic: 'Kursive / Italic',
-	fontcolor: 'Ngjyra e shkronjave',
-	backcolor: 'Ngjyra e mbrapavis&euml; s&euml; shkronjave',
-	unorderedlist: 'Liste pa renditje',
-	orderedlist: 'Liste me renditje',
-	outdent: 'Outdent',
-	indent: 'Indent',
-	redo: 'Rib&euml;j',
-	undo: 'Zhb&euml;j',
-	cut: 'Cut',
-	cancel: 'Anulo',
-	insert: 'Insert',
-	save: 'Ruaje',
-	_delete: 'Fshije',
-	insert_table: 'Shto tabel&euml;',
-	insert_row_above: 'Shto rresht sip&euml;r',
-	insert_row_below: 'Shto rresht p&euml;rfundi',
-	insert_column_left: 'Shto kolon&euml; majtas',
-	insert_column_right: 'Shto kolon&euml; djathtas',
-	delete_column: 'Fshije kolon&euml;n',
-	delete_row: 'Fshije rreshtin',
-	delete_table: 'Fshije tabel&euml;n',
-	rows: 'Rreshta',
-	columns: 'Kolona',
-	add_head: 'Shto titujt e tabel&euml;s',
-	delete_head: 'Fshije titujt e tabel&euml;s',
-	title: 'Titulli',
-	image_position: 'Pozita',
-	none: 'Normale',
-	left: 'Majtas',
-	right: 'Djathtas',
-	image_web_link: 'Linku i fotografis&euml; n&euml; internet',
-	text: 'Teksti',
-	mailto: 'Email',
-	web: 'URL',
-	video_html_code: 'Video embed code',
-	file: 'Fajll',
-	upload: 'Ngarko',
-	download: 'Shkarko',
-	choose: 'Zgjedh',
-	or_choose: 'Ose zgjedh',
-	drop_file_here: 'Gjuaje fajllin k&euml;tu',
-	align_left:	'Rreshtoje majtas',
-	align_center: 'Rreshtoje n&euml; mes',
-	align_right: 'Rreshtoje djathtas',
-	align_justify: 'Rreshtoje t&euml; gjithin njejt',
-	horizontalrule: 'Viz&euml; horizontale',
-	fullscreen: 'Pamje e plot&euml;',
-	deleted: 'E fshir&euml;',
-	anchor: 'Anchor',
-	link_new_tab: 'Open link in new tab',
-	underline: 'Underline',
-	alignment: 'Alignment',
-	filename: 'Name (optional)',
-	edit: 'Edit'
-};
-})( jQuery );
+	$.Redactor.opts.langs['sq'] = {
+		html: 'HTML',
+		video: 'Video',
+		image: 'Fotografi',
+		table: 'Tabel&euml;',
+		link: 'Lidhje',
+		link_insert: 'Vendos Lidhje...',
+		link_edit: 'Ndrysho lidhjen',
+		unlink: 'Hiq lidhjen',
+		formatting: 'Stilet',
+		paragraph: 'Paragraf',
+		quote: 'Kuot&euml;',
+		code: 'Kod',
+		header1: 'Kok&euml; 1',
+		header2: 'Kok&euml; 2',
+		header3: 'Kok&euml; 3',
+		header4: 'Kok&euml; 4',
+		header5: 'Kok&euml; 5',
+		bold:  'I trash&euml;',
+		italic: 'Kursive',
+		fontcolor: 'Ngjyra e shkronjave',
+		backcolor: 'Ngjyra e sfondit t&euml; shkronjave',
+		unorderedlist: 'List&euml; pa renditje',
+		orderedlist: 'List&euml; me renditje',
+		outdent: 'Hiq kryeradh&euml;n',
+		indent: 'Kryeradh&euml;',
+		redo: 'Rib&euml;j',
+		undo: 'Zhb&euml;j',
+		cut: 'Prit',
+		cancel: 'Anulo',
+		insert: 'Fut',
+		save: 'Ruaje',
+		_delete: 'Fshije',
+		insert_table: 'Shto tabel&euml;',
+		insert_row_above: 'Shto rresht sip&euml;r',
+		insert_row_below: 'Shto rresht posht&euml;',
+		insert_column_left: 'Shto kolon&euml; majtas',
+		insert_column_right: 'Shto kolon&euml; djathtas',
+		delete_column: 'Fshije kolon&euml;n',
+		delete_row: 'Fshije rreshtin',
+		delete_table: 'Fshije tabel&euml;n',
+		rows: 'Rreshta',
+		columns: 'Kolona',
+		add_head: 'Shto titujt e tabel&euml;s',
+		delete_head: 'Fshiji titujt e tabel&euml;s',
+		title: 'Titulli',
+		image_position: 'Pozicioni',
+		none: 'Normale',
+		left: 'Majtas',
+		right: 'Djathtas',
+		image_web_link: 'Lidhja i fotografis&euml; n&euml; internet',
+		text: 'Teksti',
+		mailto: 'Email',
+		web: 'URL',
+		video_html_code: 'Kodi embed i videos',
+		file: 'Skedar',
+		upload: 'Ngarko',
+		download: 'Shkarko',
+		choose: 'Zgjidh',
+		or_choose: 'Ose zgjidh',
+		drop_file_here: 'L&euml;shoje skedarin k&euml;tu',
+		align_left:	'Rreshtoje majtas',
+		align_center: 'Rreshtoje n&euml; mes',
+		align_right: 'Rreshtoje djathtas',
+		align_justify: 'Rreshtoje t&euml; gjithin t&euml; nj&euml;jt&euml;',
+		horizontalrule: 'Viz&euml; horizontale',
+		fullscreen: 'Pamje e plot&euml;',
+		deleted: 'E fshir&euml;',
+		anchor: 'Lidhje lokale',
+		link_new_tab: 'Hape lidhjen n&euml; tab t&euml; ri',
+		underline: 'N&euml;nvizo',
+		alignment: 'Rreshtimi',
+		filename: 'Emri (opsional)',
+		edit: 'Ndrysho',
+		center: 'Qend&euml;r'
+	};
+})( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sr_cir.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sr_cir.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sr_cir.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sr_cir.js	2015-09-05 21:13:59.000000000 -0500
@@ -72,6 +72,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sr_lat.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sr_lat.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sr_lat.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sr_lat.js	2015-09-05 21:13:59.000000000 -0500
@@ -72,6 +72,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sv.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sv.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/sv.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/sv.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,7 +69,8 @@
         upload: 'Uppladdning',
         video: 'Infoga Video...',
         video_html_code: 'Kod Fr Inbddad Video',
-        web: 'Webbadress'
+        web: 'Webbadress',
+		center: 'Center'
     };
 })( jQuery );
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/th.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/th.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/th.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/th.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: '',
 	alignment: '',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/tr.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/tr.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/tr.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/tr.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Alt izili',
 	alignment: 'Hizalama',
 	filename: 'Dosya Ad (istee bal)',
-	edit: 'Dzenle'
+	edit: 'Dzenle',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ua.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ua.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/ua.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/ua.js	2015-09-05 21:13:59.000000000 -0500
@@ -70,6 +70,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: '.'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/vi.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/vi.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/vi.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/vi.js	2015-09-05 21:13:59.000000000 -0500
@@ -68,6 +68,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/zh_cn.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/zh_cn.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/zh_cn.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/zh_cn.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/zh_tw.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/zh_tw.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/lang/zh_tw.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/lang/zh_tw.js	2015-09-05 21:13:59.000000000 -0500
@@ -69,6 +69,7 @@
 	underline: 'Underline',
 	alignment: 'Alignment',
 	filename: 'Name (optional)',
-	edit: 'Edit'
+	edit: 'Edit',
+	center: 'Center'
 };
 })( jQuery );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/dynamic.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/dynamic.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/dynamic.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/dynamic.js	2015-09-05 21:13:59.000000000 -0500
@@ -4,49 +4,53 @@
  * capability.
  */
 
-if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+if (! RedactorPlugins) var RedactorPlugins = {};
 
-RedactorPlugins.dynamic = {
-	// Initialize the plugin
-	init: function () {
-		$('.redactor_editor').on ('click', '.embedded', {plugin: this}, $.proxy (this.edit_handler, this));
-		this.buttonAdd ('dynamic', $.i18n ('Dynamic Objects'), $.proxy (this.add_handler, this));
-	},
-
-	// Open the dialog when the button is clicked
-	add_handler: function (button, el, self, evt, current) {
-		this._current = current ? this._current : null;
-		this.selectionSave ();
-		$.dynamicobjects ({
-			callback: $.proxy (this.insert_object, this),
-			current: current ? current : null
-		});
-	},
-
-	// Reopen the dialog to edit an existing embed
-	edit_handler: function (evt) {
-		this._current = evt.target;
-		this.add_handler ('dynamic', evt.target, this, evt, $(evt.target).data ('embed'));
-		return false;
-	},
-
-	// Insert/replace an embed code in the editor
-	insert_object: function (embed_code, handler, params, label) {
-		this.selectionRestore ();
-		this.bufferSet ();
-
-		if (this._current) {
-			// update existing embed
-			$(this._current)
-				.attr ('data-embed', embed_code)
-				.attr ('data-label', label);
-
-			this.sync();
-		} else {
-			// enter a new embed
-			this.insertHtml (
-				'<span class="embedded" data-embed="' + embed_code + '" data-label="' + label + '" title="Click to edit."></span>'
-			);
+RedactorPlugins.dynamic = function () {
+	return {
+		// Initialize the plugin
+		init: function () {
+			var button = this.button.add ('dynamic', $.i18n ('Dynamic Objects'));
+			this.button.setAwesome ('dynamic', 'fa-cog');
+			this.button.addCallback (button, this.dynamic.add_handler);
+			$('.redactor-editor').on ('click', '.embedded', $.proxy (this.dynamic.edit_handler, this));
+		},
+
+		// Open the dialog when the button is clicked
+		add_handler: function (button, el, self, evt, current) {
+			this.dynamic._current = current ? this.dynamic._current : null;
+			this.selection.save ();
+			$.dynamicobjects ({
+				callback: $.proxy (this.dynamic.insert_object, this),
+				current: current ? current : null
+			});
+		},
+
+		// Reopen the dialog to edit an existing embed
+		edit_handler: function (evt) {
+			this.dynamic._current = evt.target;
+			this.dynamic.add_handler ('dynamic', evt.target, this, evt, $(evt.target).attr ('data-embed'));
+			return false;
+		},
+
+		// Insert/replace an embed code in the editor
+		insert_object: function (embed_code, handler, params, label) {
+			this.selection.restore ();
+			this.buffer.set ();
+
+			if (this.dynamic._current) {
+				// update existing embed
+				$(this.dynamic._current)
+					.attr ('data-embed', embed_code)
+					.attr ('data-label', label);
+
+				this.code.sync();
+			} else {
+				// enter a new embed
+				this.insert.htmlWithoutClean (
+					'<span class="embedded" data-embed="' + embed_code + '" data-label="' + label + '" title="Click to edit."></span>'
+				);
+			}
 		}
-	}
-};
\ No newline at end of file
+	};
+};
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/filebrowser.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/filebrowser.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/filebrowser.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/filebrowser.js	2015-09-05 21:13:59.000000000 -0500
@@ -3,36 +3,40 @@
  * Requires Elefant's filemanager/util/browser handler.
  */
 
-if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+if (! RedactorPlugins) var RedactorPlugins = {};
 
-RedactorPlugins.filebrowser = {
-	// Initialize the plugin
-	init: function () {
-		this.buttonAddAfter ('imagebrowser', 'filebrowser', $.i18n ('Insert File'), $.proxy (this.open_dialog, this));
-	},
+RedactorPlugins.filebrowser = function () {
+	return {
+		// Initialize the plugin
+		init: function () {
+			var button = this.button.addAfter ('imagebrowser', 'filebrowser', $.i18n ('Insert File'));
+			this.button.setAwesome ('filebrowser', 'fa-paperclip');
+			this.button.addCallback (button, this.filebrowser.open_dialog);
+		},
 	
-	open_dialog: function (button, el, self, evt) {
-		this.selectionSave ();
-		$.filebrowser ({
-			callback: $.proxy (this.insert_file, this)
-		});
-	},
+		open_dialog: function (button, el, self, evt) {
+			this.selection.save ();
+			$.filebrowser ({
+				callback: $.proxy (this.filebrowser.insert_file, this)
+			});
+		},
 	
-	insert_file: function (file) {
-		this.selectionRestore ();
-		this.bufferSet ();
+		insert_file: function (file) {
+			this.selection.restore ();
+			this.buffer.set ();
 
-		if (file.match (/\.(jpg|png|gif)$/i)) {
-			this.insertHtml ('<img src="' + file + '" alt="" style="" />');
-		} else if (file.match (/\.swf$/i)) {
-			this.insertHtml ('<span class="embedded" data-embed="filemanager/swf?file=' + file + '" data-label="Embedded Flash (SWF)" title="Click to edit."></span>');
-		} else if (file.match (/\.(mp4|m4v|flv|f4v)$/i)) {
-			this.insertHtml ('<span class="embedded" data-embed="filemanager/video?file=' + file + '" data-label="Embedded Video (MP4)" title="Click to edit."></span>');
-		} else if (file.match (/\.mp3$/i)) {
-			this.insertHtml ('<span class="embedded" data-embed="filemanager/audio?file=' + file + '" data-label="Embedded Audio (MP3)" title="Click to edit."></span>');
-		} else {
-			var basename = file.match (/([^\/]+)$/)[1];
-			this.insertHtml ('<a href="' + file + '">' + basename + '</a>');
+			if (file.match (/\.(jpg|png|gif)$/i)) {
+				this.insert.html ('<img src="' + file + '" alt="" style="" />');
+			} else if (file.match (/\.swf$/i)) {
+				this.insert.htmlWithoutClean ('<span class="embedded" data-embed="filemanager/swf?file=' + file + '" data-label="Embedded Flash (SWF)" title="Click to edit."></span>');
+			} else if (file.match (/\.(mp4|m4v|flv|f4v)$/i)) {
+				this.insert.htmlWithoutClean ('<span class="embedded" data-embed="filemanager/video?file=' + file + '" data-label="Embedded Video (MP4)" title="Click to edit."></span>');
+			} else if (file.match (/\.mp3$/i)) {
+				this.insert.htmlWithoutClean ('<span class="embedded" data-embed="filemanager/audio?file=' + file + '" data-label="Embedded Audio (MP3)" title="Click to edit."></span>');
+			} else {
+				var basename = file.match (/([^\/]+)$/)[1];
+				this.insert.html ('<a href="' + file + '">' + basename + '</a>');
+			}
 		}
-	}
+	};
 };
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/fontfamily.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/fontfamily.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/fontfamily.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/fontfamily.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,27 +1,33 @@
-if (!RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.fontfamily = {
-	init: function ()
+(function($)
+{
+	$.Redactor.prototype.fontfamily = function()
 	{
-		var fonts = [ 'Arial', 'Helvetica', 'Georgia', 'Times New Roman', 'Monospace' ];
-		var that = this;
-		var dropdown = {};
+		return {
+			init: function ()
+			{
+				var fonts = [ 'Arial', 'Helvetica', 'Georgia', 'Times New Roman', 'Monospace' ];
+				var that = this;
+				var dropdown = {};
 
-		$.each(fonts, function(i, s)
-		{
-			dropdown['s' + i] = { title: s, callback: function() { that.setFontfamily(s); }};
-		});
+				$.each(fonts, function(i, s)
+				{
+					dropdown['s' + i] = { title: s, func: function() { that.fontfamily.set(s); }};
+				});
 
-		dropdown['remove'] = { title: 'Remove font', callback: function() { that.resetFontfamily(); }};
+				dropdown.remove = { title: 'Remove Font Family', func: that.fontfamily.reset };
 
-		this.buttonAdd('fontfamily', 'Change font family', false, dropdown);
-	},
-	setFontfamily: function (value)
-	{
-		this.inlineSetStyle('font-family', value);
-	},
-	resetFontfamily: function()
-	{
-		this.inlineRemoveStyle('font-family');
-	}
-};
\ No newline at end of file
+				var button = this.button.add('fontfamily', 'Change Font Family');
+				this.button.addDropdown(button, dropdown);
+
+			},
+			set: function (value)
+			{
+				this.inline.format('span', 'style', 'font-family:' + value + ';');
+			},
+			reset: function()
+			{
+				this.inline.removeStyleRule('font-family');
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/fontsize.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/fontsize.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/fontsize.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/fontsize.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,27 +1,32 @@
-if (!RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.fontsize = {
-	init: function()
+(function($)
+{
+	$.Redactor.prototype.fontsize = function()
 	{
-		var fonts = [10, 11, 12, 14, 16, 18, 20, 24, 28, 30];
-		var that = this;
-		var dropdown = {};
+		return {
+			init: function()
+			{
+				var fonts = [10, 11, 12, 14, 16, 18, 20, 24, 28, 30];
+				var that = this;
+				var dropdown = {};
 
-		$.each(fonts, function(i, s)
-		{
-			dropdown['s' + i] = { title: s + 'px', callback: function() { that.setFontsize(s); } };
-		});
+				$.each(fonts, function(i, s)
+				{
+					dropdown['s' + i] = { title: s + 'px', func: function() { that.fontsize.set(s); } };
+				});
 
-		dropdown['remove'] = { title: 'Remove font size', callback: function() { that.resetFontsize(); } };
+				dropdown.remove = { title: 'Remove Font Size', func: that.fontsize.reset };
 
-		this.buttonAdd( 'fontsize', 'Change font size', false, dropdown);
-	},
-	setFontsize: function(size)
-	{
-		this.inlineSetStyle('font-size', size + 'px');
-	},
-	resetFontsize: function()
-	{
-		this.inlineRemoveStyle('font-size');
-	}
-};
\ No newline at end of file
+				var button = this.button.add('fontsize', 'Change Font Size');
+				this.button.addDropdown(button, dropdown);
+			},
+			set: function(size)
+			{
+				this.inline.format('span', 'style', 'font-size: ' + size + 'px;');
+			},
+			reset: function()
+			{
+				this.inline.removeStyleRule('font-size');
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/fullscreen.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/fullscreen.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/fullscreen.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/fullscreen.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,146 +1,121 @@
-if (!RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.fullscreen = {
-	init: function()
-	{
-		this.fullscreen = false;
-
-		this.buttonAdd('fullscreen', 'Fullscreen', $.proxy(this.toggleFullscreen, this));
-		this.buttonSetRight('fullscreen');
-
-		if (this.opts.fullscreen) this.toggleFullscreen();
-	},
-	toggleFullscreen: function()
+(function($)
+{
+	$.Redactor.prototype.fullscreen = function()
 	{
-		var html;
-
-		if (!this.fullscreen)
-		{
-			this.buttonChangeIcon('fullscreen', 'normalscreen');
-			this.buttonActive('fullscreen');
-			this.fullscreen = true;
-
-			if (this.opts.toolbarExternal)
+		return {
+			init: function()
 			{
-				this.toolcss = {};
-				this.boxcss = {};
-				this.toolcss.width = this.$toolbar.css('width');
-				this.toolcss.top = this.$toolbar.css('top');
-				this.toolcss.position = this.$toolbar.css('position');
-				this.boxcss.top = this.$box.css('top');
-			}
-
-			this.fsheight = this.$editor.height();
-
-			if (this.opts.iframe) html = this.get();
-
-			this.tmpspan = $('<span></span>');
-			this.$box.addClass('redactor_box_fullscreen').after(this.tmpspan);
-
-			$('body, html').css('overflow', 'hidden');
-			$('body').prepend(this.$box);
-
-			if (this.opts.iframe) this.fullscreenIframe(html);
-
-			this.fullScreenResize();
-			$(window).resize($.proxy(this.fullScreenResize, this));
-			$(document).scrollTop(0, 0);
-
-			this.focus();
-			this.observeStart();
+				this.fullscreen.isOpen = false;
 
-		}
-		else
-		{
-			this.buttonRemoveIcon('fullscreen', 'normalscreen');
-			this.buttonInactive('fullscreen');
-			this.fullscreen = false;
+				var button = this.button.add('fullscreen', 'Fullscreen');
+				this.button.addCallback(button, this.fullscreen.toggle);
 
-			$(window).off('resize', $.proxy(this.fullScreenResize, this));
-			$('body, html').css('overflow', '');
-
-			this.$box.removeClass('redactor_box_fullscreen').css({ width: 'auto', height: 'auto' });
-
-			if (this.opts.iframe) html = this.$editor.html();
-			this.tmpspan.after(this.$box).remove();
-
-			if (this.opts.iframe) this.fullscreenIframe(html);
-			else this.sync();
-
-			var height = this.fsheight;
-			if (this.opts.autoresize) height = 'auto';
-
-			if (this.opts.toolbarExternal)
+				if (this.opts.fullscreen) this.fullscreen.toggle();
+			},
+			enable: function()
 			{
-				this.$box.css('top', this.boxcss.top);
-				this.$toolbar.css({
-					'width': this.toolcss.width,
-					'top': this.toolcss.top,
-					'position': this.toolcss.position
-				});
-			}
-
-			if (!this.opts.iframe) this.$editor.css('height', height);
-			else this.$frame.css('height', height);
+				this.button.changeIcon('fullscreen', 'normalscreen');
+				this.button.setActive('fullscreen');
+				this.fullscreen.isOpen = true;
+
+				if (this.opts.toolbarExternal)
+				{
+					this.fullscreen.toolcss = {};
+					this.fullscreen.boxcss = {};
+					this.fullscreen.toolcss.width = this.$toolbar.css('width');
+					this.fullscreen.toolcss.top = this.$toolbar.css('top');
+					this.fullscreen.toolcss.position = this.$toolbar.css('position');
+					this.fullscreen.boxcss.top = this.$box.css('top');
+				}
+
+				this.fullscreen.height = this.$editor.height();
+
+				if (this.opts.maxHeight) this.$editor.css('max-height', '');
+				if (this.opts.minHeight) this.$editor.css('min-height', '');
+
+				if (!this.$fullscreenPlaceholder) this.$fullscreenPlaceholder = $('<div/>');
+				this.$fullscreenPlaceholder.insertAfter(this.$box);
+
+				this.$box.appendTo(document.body);
+
+				this.$box.addClass('redactor-box-fullscreen');
+				$('body, html').css('overflow', 'hidden');
+
+				this.fullscreen.resize();
+				$(window).on('resize.redactor.fullscreen', $.proxy(this.fullscreen.resize, this));
+				$(document).scrollTop(0, 0);
+
+				$('.redactor-toolbar-tooltip').hide();
+				this.$editor.focus();
+				this.observe.load();
+			},
+			disable: function()
+			{
+				this.button.removeIcon('fullscreen', 'normalscreen');
+				this.button.setInactive('fullscreen');
+				this.fullscreen.isOpen = false;
+
+				$(window).off('resize.redactor.fullscreen');
+				$('body, html').css('overflow', '');
+
+				this.$box.insertBefore(this.$fullscreenPlaceholder);
+				this.$fullscreenPlaceholder.remove();
+
+				this.$box.removeClass('redactor-box-fullscreen').css({ width: 'auto', height: 'auto' });
+
+				this.code.sync();
+
+				if (this.opts.toolbarExternal)
+				{
+					this.$box.css('top', this.fullscreen.boxcss.top);
+					this.$toolbar.css({
+						'width': this.fullscreen.toolcss.width,
+						'top': this.fullscreen.toolcss.top,
+						'position': this.fullscreen.toolcss.position
+					});
+				}
+
+				if (this.opts.minHeight) this.$editor.css('minHeight', this.opts.minHeight);
+				if (this.opts.maxHeight) this.$editor.css('maxHeight', this.opts.maxHeight);
+
+				$('.redactor-toolbar-tooltip').hide();
+				this.$editor.css('height', 'auto');
+				this.$editor.focus();
+				this.observe.load();
+			},
+			toggle: function()
+			{
+				if (this.fullscreen.isOpen)
+				{
+					this.fullscreen.disable();
+				}
+				else
+				{
+					this.fullscreen.enable();
+				}
+			},
+			resize: function()
+			{
+				if (!this.fullscreen.isOpen) return;
 
-			this.$editor.css('height', height);
-			this.focus();
-			this.observeStart();
-		}
-	},
-	fullscreenIframe: function(html)
-	{
-		this.$editor = this.$frame.contents().find('body').attr({
-			'contenteditable': true,
-			'dir': this.opts.direction
-		});
-
-		// set document & window
-		if (this.$editor[0])
-		{
-			this.document = this.$editor[0].ownerDocument;
-			this.window = this.document.defaultView || window;
-		}
-
-		// iframe css
-		this.iframeAddCss();
-
-		if (this.opts.fullpage) this.setFullpageOnInit(html);
-		else this.set(html);
-
-		if (this.opts.wym) this.$editor.addClass('redactor_editor_wym');
-	},
-	fullScreenResize: function()
-	{
-		if (!this.fullscreen) return false;
+				var toolbarHeight = this.$toolbar.height();
 
-		var toolbarHeight = this.$toolbar.height();
+				var height = $(window).height() - toolbarHeight - this.utils.normalize(this.$editor.css('padding-top')) - this.utils.normalize(this.$editor.css('padding-bottom'));
+				this.$box.width($(window).width()).height(height);
 
-		var pad = this.$editor.css('padding-top').replace('px', '');
-		var height = $(window).height() - toolbarHeight;
-		this.$box.width($(window).width() - 2).height(height + toolbarHeight);
-
-		if (this.opts.toolbarExternal)
-		{
-			this.$toolbar.css({
-				'top': '0px',
-				'position': 'absolute',
-				'width': '100%'
-			});
-
-			this.$box.css('top', toolbarHeight + 'px');
-		}
-
-		if (!this.opts.iframe) this.$editor.height(height - (pad * 2));
-		else
-		{
-			setTimeout($.proxy(function()
-			{
-				this.$frame.height(height);
+				if (this.opts.toolbarExternal)
+				{
+					this.$toolbar.css({
+						'top': '0px',
+						'position': 'absolute',
+						'width': '100%'
+					});
 
-			}, this), 1);
-		}
+					this.$box.css('top', toolbarHeight + 'px');
+				}
 
-		this.$editor.height(height);
-	}
-};
\ No newline at end of file
+				this.$editor.height(height);
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/imagebrowser.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/imagebrowser.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/imagebrowser.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/imagebrowser.js	2015-09-05 21:13:59.000000000 -0500
@@ -3,26 +3,30 @@
  * Requires Elefant's filemanager/util/browser handler.
  */
 
-if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+if (! RedactorPlugins) var RedactorPlugins = {};
 
-RedactorPlugins.imagebrowser = {
-	// Initialize the plugin
-	init: function () {
-		this.buttonAddAfter ('link_unlink', 'imagebrowser', $.i18n ('Insert Image'), $.proxy (this.open_image_dialog, this));
-	},
+RedactorPlugins.imagebrowser = function () {
+	return {
+		// Initialize the plugin
+		init: function () {
+			var button = this.button.addAfter ('links', 'imagebrowser', $.i18n ('Insert Image'));
+			this.button.setAwesome ('imagebrowser', 'fa-picture-o');
+			this.button.addCallback (button, this.imagebrowser.open_image_dialog);
+		},
 	
-	open_image_dialog: function (button, el, self, evt) {
-		this.selectionSave ();
-		$.filebrowser ({
-			thumbs: true,
-			callback: $.proxy (this.insert_image, this)
-		});
-	},
+		open_image_dialog: function (button, el, self, evt) {
+			this.selection.save ();
+			$.filebrowser ({
+				thumbs: true,
+				callback: $.proxy (this.imagebrowser.insert_image, this)
+			});
+		},
 	
-	insert_image: function (file) {
-		this.selectionRestore ();
-		this.bufferSet ();
+		insert_image: function (file) {
+			this.selection.restore ();
+			this.buffer.set ();
 
-		this.insertHtml ('<img src="' + file + '" alt="" style="" />');
-	}
-};
\ No newline at end of file
+			this.insert.html ('<img src="' + file + '" alt="" style="" />');
+		}
+	};
+};
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/links.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/links.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/links.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/links.js	2015-09-05 21:13:59.000000000 -0500
@@ -5,218 +5,230 @@
  * their own site.
  */
 
-if (typeof RedactorPlugins === 'undefined') var RedactorPlugins = {};
+if (! RedactorPlugins) var RedactorPlugins = {};
 
-RedactorPlugins.links = {
-	// Initialize the plugin
-	init: function () {
-		$.getJSON (
-			'/admin/wysiwyg/links',
-			$.proxy (
-				function (res) {
-					this._links = res;
-				},
-				this
-			)
-		);
-	},
+RedactorPlugins.links = function () {
+	return {
+		// Initialize the plugin
+		init: function () {
+			$.getJSON (
+				'/admin/wysiwyg/links',
+				$.proxy (
+					function (res) {
+						this.links._links = res;
+					},
+					this
+				)
+			);
+			
+			var dropdown = {};
+			
+			dropdown.point1 = { title: $.i18n ('Insert Link'), func: this.links.insert };
+			dropdown.point2 = { title: $.i18n ('Unlink'), func: this.link.unlink };
+			
+			var button = this.button.addBefore ('html', 'links', $.i18n ('Links'));
+			this.button.setAwesome ('links', 'fa-link');
+			this.button.addDropdown (button, dropdown);
+		},
 	
-	// Initialize the plugin when the button is clicked
-	insert: function (self, evt, button) {
-		this.insert_link_node = false;
-		this.has_selected_text = false;
-		var sel = this.getCurrent (),
-			url = '', text = '', target = '',
-			page_matched = false,
-			base = window.location.origin
-				? window.location.origin
-				: window.location.protocol + '//' + window.location.host;
-
-		if (sel && sel.anchorNode && sel.anchorNode.parentNode.tagName === 'A') {
-			this.insert_link_node = sel.anchorNode.parentNode;
-			url = sel.anchorNode.parentNode.href;
-			text = sel.anchorNode.parentNode.text;
-			target = sel.anchorNode.parentNode.target;
-		} else if (sel.tagName && sel.tagName === 'A') {
-			this.insert_link_node = sel;
-			url = sel.href;
-			text = sel.text;
-			target = sel.target;
-		} else {
-			var parent = this.getParent ();
-			if (parent.nodeName === 'A') {
-				this.insert_link_node = $(parent);
-				text = this.insert_link_node.text ();
-				url = this.insert_link_node.attr ('href');
-				target = this.insert_link_node.attr ('target');
+		// Initialize the plugin when the button is clicked
+		insert: function (self, evt, button) {
+			this.links.insert_link_node = false;
+			this.links.has_selected_text = false;
+			var sel = this.selection.getCurrent (),
+				url = '', text = '', target = '',
+				page_matched = false,
+				base = window.location.origin
+					? window.location.origin
+					: window.location.protocol + '//' + window.location.host;
+
+			if (sel && sel.anchorNode && sel.anchorNode.parentNode.tagName === 'A') {
+				this.links.insert_link_node = sel.anchorNode.parentNode;
+				url = sel.anchorNode.parentNode.href;
+				text = sel.anchorNode.parentNode.text;
+				target = sel.anchorNode.parentNode.target;
+			} else if (sel.tagName && sel.tagName === 'A') {
+				this.links.insert_link_node = sel;
+				url = sel.href;
+				text = sel.text;
+				target = sel.target;
 			} else {
-				text = this.getSelectionText ();
+				var parent = this.selection.getParent ();
+				if (parent.nodeName === 'A') {
+					this.links.insert_link_node = $(parent);
+					text = this.links.insert_link_node.text ();
+					url = this.links.insert_link_node.attr ('href');
+					target = this.links.insert_link_node.attr ('target');
+				} else {
+					text = this.selection.getText ();
+				}
 			}
-		}
 		
-		if (text.length !== 0) {
-			this.has_selected_text = true;
-		}
+			if (text.length !== 0) {
+				this.links.has_selected_text = true;
+			}
 		
-		if (url.search (base) === 0) {
-			url = url.replace (base, '');
-		}
+			if (url.search (base) === 0) {
+				url = url.replace (base, '');
+			}
 
-		this.selectionSave ();
+			this.selection.save ();
 
-		$.open_dialog (
-			$.i18n ('Link'),
-			'<div class="links-content">' +
-				'<p>' +
-					'<span class="links-btn" id="links-page-btn">' + $.i18n ('Page') + '</span>' +
-					'<span class="links-btn" id="links-url-btn">' + $.i18n ('URL') + '</span>' +
-					'<span class="links-btn" id="links-email-btn">' + $.i18n ('Email') + '</span>' +
-					'<br />' +
-					'<select id="links-page">' +
-					'</select>' +
-					'<input type="text" id="links-url" size="65" placeholder="http://" />' +
-					'<input type="email" id="links-email" size="65" placeholder="you@example.com" />' +
-				'</p>' +
-				'<p>' +
-					$.i18n ('Text') + '<br />' +
-					'<input type="text" id="links-text" size="65" />' +
-				'</p>' +
-				'<p>' +
-					'<input type="checkbox" id="links-tab"> ' +
-					'<label for="links-tab">' +
-						$.i18n ('Open link in new tab') +
-					'</label>' +
-				'</p>' +
-				'<p>' +
-					'<input type="submit" id="links-submit" value="' + $.i18n ('Insert') + '" />' +
-					' &nbsp; ' +
-					'<a href="#" id="links-cancel">' + $.i18n ('Cancel') + '</a>' +
-				'</p>' +
-			'</div>'
-		);
-
-		if (this._links) {
-			var sel = $('#links-page');
-			sel.append (
-				$('<option>')
-					.attr ('value', '')
-					.text ($.i18n ('- select -'))
+			$.open_dialog (
+				$.i18n ('Link'),
+				'<div class="links-content">' +
+					'<p>' +
+						'<span class="links-btn" id="links-url-btn">' + $.i18n ('URL') + '</span>' +
+						'<span class="links-btn" id="links-page-btn">' + $.i18n ('Page') + '</span>' +
+						'<span class="links-btn" id="links-email-btn">' + $.i18n ('Email') + '</span>' +
+						'<br />' +
+						'<select id="links-page">' +
+						'</select>' +
+						'<input type="text" id="links-url" size="65" placeholder="http://" />' +
+						'<input type="email" id="links-email" size="65" placeholder="you@example.com" />' +
+					'</p>' +
+					'<p>' +
+						$.i18n ('Text') + '<br />' +
+						'<input type="text" id="links-text" size="65" />' +
+					'</p>' +
+					'<p>' +
+						'<input type="checkbox" id="links-tab"> ' +
+						'<label for="links-tab">' +
+							$.i18n ('Open link in new tab') +
+						'</label>' +
+					'</p>' +
+					'<p>' +
+						'<input type="submit" id="links-submit" value="' + $.i18n ('Insert') + '" />' +
+						' &nbsp; ' +
+						'<a href="#" id="links-cancel">' + $.i18n ('Cancel') + '</a>' +
+					'</p>' +
+				'</div>'
 			);
-			for (var i in this._links) {
-				if (url === this._links[i].url) {
-					sel.append (
-						$('<option>')
-							.attr ('value', this._links[i].url)
-							.text (this._links[i].title)
-							.attr ('selected', 'selected')
-					);
-					page_matched = true;
-				} else {
-					sel.append (
-						$('<option>')
-							.attr ('value', this._links[i].url)
-							.text (this._links[i].title)
-					);
+
+			if (this.links._links) {
+				var sel = $('#links-page');
+				sel.append (
+					$('<option>')
+						.attr ('value', '')
+						.text ($.i18n ('- select -'))
+				);
+				for (var i in this.links._links) {
+					if (url === this.links._links[i].url) {
+						sel.append (
+							$('<option>')
+								.attr ('value', this.links._links[i].url)
+								.text (this.links._links[i].title)
+								.attr ('selected', 'selected')
+						);
+						page_matched = true;
+					} else {
+						sel.append (
+							$('<option>')
+								.attr ('value', this.links._links[i].url)
+								.text (this.links._links[i].title)
+						);
+					}
 				}
 			}
-		}
 
-		if (page_matched) {
-			this.show_pages ();
-		} else if (url.search ('mailto:') === 0) {
-			$('#links-email').val (url.replace ('mailto:', ''));
-			this.show_email ();
-		} else if (url.length !== 0) {
-			$('#links-url').val (url);
-			this.show_url ();
-		} else {
-			this.show_pages ();
-		}
+			if (page_matched) {
+				this.links.show_pages ();
+			} else if (url.search ('mailto:') === 0) {
+				$('#links-email').val (url.replace ('mailto:', ''));
+				this.links.show_email ();
+			} else if (url.length !== 0) {
+				$('#links-url').val (url);
+				this.links.show_url ();
+			} else {
+				this.links.show_url ();
+			}
 
-		$('#links-text').val (text);
+			$('#links-text').val (text);
 
-		if (target && target.length !== 0) {
-			$('#links-tab').attr ('checked', 'checked');
-		}
+			if (target && target.length !== 0) {
+				$('#links-tab').attr ('checked', 'checked');
+			}
 
-		$('#links-page-btn').click ($.proxy (this.show_pages, this));
-		$('#links-url-btn').click ($.proxy (this.show_url, this));
-		$('#links-email-btn').click ($.proxy (this.show_email, this));
-		$('#links-cancel').click (function () { $.close_dialog (); });
-		$('#links-submit').click ($.proxy (this.handle, this));
-	},
-
-	// Insert or update the link
-	handle: function () {
-		this.selectionRestore ();
-		this.bufferSet ();
+			$('#links-page-btn').click ($.proxy (this.links.show_pages, this));
+			$('#links-url-btn').click ($.proxy (this.links.show_url, this));
+			$('#links-email-btn').click ($.proxy (this.links.show_email, this));
+			$('#links-cancel').click (function () { $.close_dialog (); });
+			$('#links-submit').click ($.proxy (this.links.handle, this));
+		},
+
+		// Insert or update the link
+		handle: function () {
+			this.selection.restore ();
+			this.buffer.set ();
 		
-		var active = this.links_active,
-			page = $('#links-page').find (':selected').val (),
-			url = $('#links-url').val (),
-			email = $('#links-email').val (),
-			text = $('#links-text').val (),
-			target = $('#links-tab').is (':checked'),
-			href = '';
-
-		if (active === 'page') {
-			href = page;
-		} else if (active === 'url') {
-			href = url;
-		} else if (active === 'email') {
-			href = 'mailto:' + email;
-		}
+			var active = this.links.links_active,
+				page = $('#links-page').find (':selected').val (),
+				url = $('#links-url').val (),
+				email = $('#links-email').val (),
+				text = $('#links-text').val (),
+				target = $('#links-tab').is (':checked'),
+				href = '';
+
+			if (active === 'page') {
+				href = page;
+			} else if (active === 'url') {
+				href = url;
+			} else if (active === 'email') {
+				href = 'mailto:' + email;
+			}
 
-		if (this.insert_link_node) {
-			$(this.insert_link_node).text (text);
-			$(this.insert_link_node).attr ('href', href);
-			if (target) {
-				$(this.insert_link_node).attr ('target', '_blank');
+			if (this.links.insert_link_node) {
+				$(this.links.insert_link_node).text (text);
+				$(this.links.insert_link_node).attr ('href', href);
+				if (target) {
+					$(this.links.insert_link_node).attr ('target', '_blank');
+				} else {
+					$(this.links.insert_link_node).removeAttr ('target');
+				}
+				this.code.sync ();
 			} else {
-				$(this.insert_link_node).removeAttr ('target');
-			}
-		} else {
-			var html = '<a href="' + href + '"';
-			if (target) {
-				html += ' target="_blank"';
+				var html = '<a href="' + href + '"';
+				if (target) {
+					html += ' target="_blank"';
+				}
+				html += '>' + text + '</a>';
+				this.insert.html (html);
 			}
-			html += '>' + text + '</a>';
-			this.insertHtml (html);
-		}
 
-		$.close_dialog ();
-	},
+			$.close_dialog ();
+		},
 	
-	// Show the pages list
-	show_pages: function () {
-		this.links_active = 'page';
-		$('#links-page-btn').addClass ('active');
-		$('#links-url-btn').removeClass ('active');
-		$('#links-email-btn').removeClass ('active');
-		$('#links-page').show ();
-		$('#links-url').hide ();
-		$('#links-email').hide ();
-	},
+		// Show the pages list
+		show_pages: function () {
+			this.links.links_active = 'page';
+			$('#links-page-btn').addClass ('active');
+			$('#links-url-btn').removeClass ('active');
+			$('#links-email-btn').removeClass ('active');
+			$('#links-page').show ();
+			$('#links-url').hide ();
+			$('#links-email').hide ();
+		},
 	
-	// Show the URL input
-	show_url: function () {
-		this.links_active = 'url';
-		$('#links-page-btn').removeClass ('active');
-		$('#links-url-btn').addClass ('active');
-		$('#links-email-btn').removeClass ('active');
-		$('#links-page').hide ();
-		$('#links-url').show ();
-		$('#links-email').hide ();
-	},
+		// Show the URL input
+		show_url: function () {
+			this.links.links_active = 'url';
+			$('#links-page-btn').removeClass ('active');
+			$('#links-url-btn').addClass ('active');
+			$('#links-email-btn').removeClass ('active');
+			$('#links-page').hide ();
+			$('#links-url').show ();
+			$('#links-email').hide ();
+		},
 	
-	// Show the email input
-	show_email: function () {
-		this.links_active = 'email';
-		$('#links-page-btn').removeClass ('active');
-		$('#links-url-btn').removeClass ('active');
-		$('#links-email-btn').addClass ('active');
-		$('#links-page').hide ();
-		$('#links-url').hide ();
-		$('#links-email').show ();
-	}
-};
\ No newline at end of file
+		// Show the email input
+		show_email: function () {
+			this.links.links_active = 'email';
+			$('#links-page-btn').removeClass ('active');
+			$('#links-url-btn').removeClass ('active');
+			$('#links-email-btn').addClass ('active');
+			$('#links-page').hide ();
+			$('#links-url').hide ();
+			$('#links-email').show ();
+		}
+	};
+};
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/table.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/table.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/table.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/table.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,484 @@
+(function($)
+{
+	$.Redactor.prototype.table = function()
+	{
+		return {
+			getTemplate: function()
+			{
+				return String()
+				+ '<section id="redactor-modal-table-insert">'
+					+ '<label>' + this.lang.get('rows') + '</label>'
+					+ '<input type="text" size="5" value="2" id="redactor-table-rows" />'
+					+ '<label>' + this.lang.get('columns') + '</label>'
+					+ '<input type="text" size="5" value="3" id="redactor-table-columns" />'
+				+ '</section>';
+			},
+			init: function()
+			{
+				var dropdown = {};
+
+				dropdown.insert_table = {
+									title: this.lang.get('insert_table'),
+									func: this.table.show,
+									observe: {
+										element: 'table',
+										in: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.insert_row_above = {
+									title: this.lang.get('insert_row_above'),
+									func: this.table.addRowAbove,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.insert_row_below = {
+									title: this.lang.get('insert_row_below'),
+									func: this.table.addRowBelow,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.insert_row_below = {
+									title: this.lang.get('insert_row_below'),
+									func: this.table.addRowBelow,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.insert_column_left = {
+									title: this.lang.get('insert_column_left'),
+									func: this.table.addColumnLeft,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.insert_column_right = {
+									title: this.lang.get('insert_column_right'),
+									func: this.table.addColumnRight,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.add_head = {
+									title: this.lang.get('add_head'),
+									func: this.table.addHead,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.delete_head = {
+									title: this.lang.get('delete_head'),
+									func: this.table.deleteHead,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.delete_column = {
+									title: this.lang.get('delete_column'),
+									func: this.table.deleteColumn,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.delete_row = {
+									title: this.lang.get('delete_row'),
+									func: this.table.deleteRow,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				dropdown.delete_row = {
+									title: this.lang.get('delete_table'),
+									func: this.table.deleteTable,
+									observe: {
+										element: 'table',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true,
+											}
+										}
+									}
+								};
+
+				this.observe.addButton('td', 'table');
+				this.observe.addButton('th', 'table');
+
+				var button = this.button.addBefore('link', 'table', this.lang.get('table'));
+				this.button.addDropdown(button, dropdown);
+			},
+			show: function()
+			{
+				this.modal.addTemplate('table', this.table.getTemplate());
+
+				this.modal.load('table', this.lang.get('insert_table'), 300);
+				this.modal.createCancelButton();
+
+				var button = this.modal.createActionButton(this.lang.get('insert'));
+				button.on('click', this.table.insert);
+
+				this.selection.save();
+				this.modal.show();
+
+				$('#redactor-table-rows').focus();
+
+			},
+			insert: function()
+			{
+				this.placeholder.remove();
+
+				var rows = $('#redactor-table-rows').val(),
+					columns = $('#redactor-table-columns').val(),
+					$tableBox = $('<div>'),
+					tableId = Math.floor(Math.random() * 99999),
+					$table = $('<table id="table' + tableId + '"><tbody></tbody></table>'),
+					i, $row, z, $column;
+
+				for (i = 0; i < rows; i++)
+				{
+					$row = $('<tr>');
+
+					for (z = 0; z < columns; z++)
+					{
+						$column = $('<td>' + this.opts.invisibleSpace + '</td>');
+
+						// set the focus to the first td
+						if (i === 0 && z === 0)
+						{
+							$column.append(this.selection.getMarker());
+						}
+
+						$($row).append($column);
+					}
+
+					$table.append($row);
+				}
+
+				$tableBox.append($table);
+				var html = $tableBox.html();
+
+				this.modal.close();
+				this.selection.restore();
+
+				if (this.table.getTable()) return;
+
+				this.buffer.set();
+
+				var current = this.selection.getBlock() || this.selection.getCurrent();
+				if (current && current.tagName != 'BODY')
+				{
+					if (current.tagName == 'LI') current = $(current).closest('ul, ol');
+					$(current).after(html);
+				}
+				else
+				{
+					this.insert.html(html, false);
+				}
+
+				this.selection.restore();
+
+				var table = this.$editor.find('#table' + tableId);
+
+				var p = table.prev("p");
+
+				if (p.length > 0 && this.utils.isEmpty(p.html()))
+				{
+					p.remove();
+				}
+
+				if (!this.opts.linebreaks && (this.utils.browser('mozilla') || this.utils.browser('msie')))
+				{
+					var $next = table.next();
+					if ($next.length === 0)
+					{
+						 table.after(this.opts.emptyHtml);
+					}
+				}
+
+				this.observe.buttons();
+
+				table.find('span.redactor-selection-marker').remove();
+				table.removeAttr('id');
+
+				this.code.sync();
+				this.core.setCallback('insertedTable', table);
+			},
+			getTable: function()
+			{
+				var $table = $(this.selection.getParent()).closest('table');
+
+				if (!this.utils.isRedactorParent($table)) return false;
+				if ($table.size() === 0) return false;
+
+				return $table;
+			},
+			restoreAfterDelete: function($table)
+			{
+				this.selection.restore();
+				$table.find('span.redactor-selection-marker').remove();
+				this.code.sync();
+			},
+			deleteTable: function()
+			{
+				var $table = this.table.getTable();
+				if (!$table) return;
+
+				this.buffer.set();
+
+
+				var $next = $table.next();
+				if (!this.opts.linebreaks && $next.length !== 0)
+				{
+					this.caret.setStart($next);
+				}
+				else
+				{
+					this.caret.setAfter($table);
+				}
+
+
+				$table.remove();
+
+				this.code.sync();
+			},
+			deleteRow: function()
+			{
+			var $table = this.table.getTable();
+			if (!$table) return;
+
+			var $current = $(this.selection.getCurrent());
+
+			this.buffer.set();
+
+			var $current_tr = $current.closest('tr');
+			var $focus_tr = $current_tr.prev().length ? $current_tr.prev() : $current_tr.next();
+			if ($focus_tr.length)
+			{
+				var $focus_td = $focus_tr.children('td, th').first();
+				if ($focus_td.length) $focus_td.prepend(this.selection.getMarker());
+			}
+
+			$current_tr.remove();
+			this.table.restoreAfterDelete($table);
+		},
+			deleteColumn: function()
+			{
+			var $table = this.table.getTable();
+			if (!$table) return;
+
+			this.buffer.set();
+
+			var $current = $(this.selection.getCurrent());
+			var $current_td = $current.closest('td, th');
+			var index = $current_td[0].cellIndex;
+
+			$table.find('tr').each($.proxy(function(i, elem)
+			{
+				var $elem = $(elem);
+				var focusIndex = index - 1 < 0 ? index + 1 : index - 1;
+				if (i === 0) $elem.find('td, th').eq(focusIndex).prepend(this.selection.getMarker());
+
+				$elem.find('td, th').eq(index).remove();
+
+			}, this));
+
+			this.table.restoreAfterDelete($table);
+		},
+			addHead: function()
+			{
+				var $table = this.table.getTable();
+				if (!$table) return;
+
+				this.buffer.set();
+
+				if ($table.find('thead').size() !== 0)
+				{
+					this.table.deleteHead();
+					return;
+				}
+
+				var tr = $table.find('tr').first().clone();
+				tr.find('td').replaceWith($.proxy(function()
+				{
+					return $('<th>').html(this.opts.invisibleSpace);
+				}, this));
+
+				$thead = $('<thead></thead>').append(tr);
+				$table.prepend($thead);
+
+				this.code.sync();
+
+			},
+			deleteHead: function()
+			{
+				var $table = this.table.getTable();
+				if (!$table) return;
+
+				var $thead = $table.find('thead');
+				if ($thead.size() === 0) return;
+
+				this.buffer.set();
+
+				$thead.remove();
+				this.code.sync();
+			},
+			addRowAbove: function()
+			{
+				this.table.addRow('before');
+			},
+			addRowBelow: function()
+			{
+				this.table.addRow('after');
+			},
+			addColumnLeft: function()
+			{
+				this.table.addColumn('before');
+			},
+			addColumnRight: function()
+			{
+				this.table.addColumn('after');
+			},
+			addRow: function(type)
+			{
+				var $table = this.table.getTable();
+				if (!$table) return;
+
+				this.buffer.set();
+
+				var $current = $(this.selection.getCurrent());
+				var $current_tr = $current.closest('tr');
+				var new_tr = $current_tr.clone();
+
+				new_tr.find('th').replaceWith(function()
+				{
+					var $td = $('<td>');
+					$td[0].attributes = this.attributes;
+
+					return $td.append($(this).contents());
+				});
+
+				new_tr.find('td').html(this.opts.invisibleSpace);
+
+				if (type == 'after')
+				{
+					$current_tr.after(new_tr);
+				}
+				else
+				{
+					$current_tr.before(new_tr);
+				}
+
+				this.code.sync();
+			},
+			addColumn: function (type)
+			{
+				var $table = this.table.getTable();
+				if (!$table) return;
+
+				var index = 0;
+				var current = $(this.selection.getCurrent());
+
+				this.buffer.set();
+
+				var $current_tr = current.closest('tr');
+				var $current_td = current.closest('td, th');
+
+				$current_tr.find('td, th').each($.proxy(function(i, elem)
+				{
+					if ($(elem)[0] === $current_td[0]) index = i;
+
+				}, this));
+
+				$table.find('tr').each($.proxy(function(i, elem)
+				{
+					var $current = $(elem).find('td, th').eq(index);
+
+					var td = $current.clone();
+					td.html(this.opts.invisibleSpace);
+
+					if (type == 'after')
+					{
+						$current.after(td);
+					}
+					else
+					{
+						$current.before(td);
+					}
+
+				}, this));
+
+				this.code.sync();
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/textdirection.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/textdirection.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/textdirection.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/textdirection.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,24 +1,29 @@
-if (!RedactorPlugins) var RedactorPlugins = {};
-
-RedactorPlugins.textdirection = {
-	init: function()
+(function($)
+{
+	$.Redactor.prototype.textdirection = function()
 	{
-		var that = this;
-		var dropdown = {};
+		return {
+			init: function()
+			{
+				var that = this;
+				var dropdown = {};
 
-		dropdown['ltr'] = { title: 'Left to right', callback: function () { that.ltrTextDirection(); } };
-		dropdown['rtl'] = { title: 'Right to left', callback: function () { that.rtlTextDirection(); } };
+				dropdown.ltr = { title: 'Left to Right', func: that.textdirection.setLtr };
+				dropdown.rtl = { title: 'Right to Left', func: that.textdirection.setRtl};
 
-		this.buttonAdd('direction', 'Change direction', false, dropdown);
-	},
-	rtlTextDirection: function()
-	{
-		this.bufferSet();
-		this.blockSetAttr('dir', 'rtl');
-	},
-	ltrTextDirection: function()
-	{
-		this.bufferSet();
-		this.blockRemoveAttr('dir');
-	}
-};
\ No newline at end of file
+				var button = this.button.add('textdirection', 'Change Text Direction');
+				this.button.addDropdown(button, dropdown);
+			},
+			setRtl: function()
+			{
+				this.buffer.set();
+				this.block.setAttr('dir', 'rtl');
+			},
+			setLtr: function()
+			{
+				this.buffer.set();
+				this.block.removeAttr('dir');
+			}
+		};
+	};
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/undo.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/undo.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/plugins/undo.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/plugins/undo.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,15 @@
+if (! RedactorPlugins) var RedactorPlugins = {};
+
+RedactorPlugins.undo = function () {
+	return {
+		init: function () {
+			var dropdown = {};
+			
+			dropdown.point1 = { title: $.i18n ('Undo'), func: this.buffer.undo };
+			dropdown.point2 = { title: $.i18n ('Redo'), func: this.buffer.redo };
+			
+			var button = this.button.add ('undo', $.i18n ('Undo'));
+			this.button.addDropdown (button, dropdown);
+		}
+	};
+};
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor-font.eot and elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor-font.eot differ
Files elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor-iframe.css and elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor-iframe.css are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.css elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.css
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.css	2015-09-05 21:13:59.000000000 -0500
@@ -1,15 +1,65 @@
-.redactor_box {
-	position: relative;
-	overflow: visible;
-	border: 1px solid #ddd;
-	background-color: #fff;
+/*
+	Icon font
+*/
+@font-face {
+  font-family: 'RedactorFont';
+  src: url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMggi/NUAAAC8AAAAYGNtYXAaVcx2AAABHAAAAExnYXNwAAAAEAAAAWgAAAAIZ2x5Zm8dIFkAAAFwAAATSGhlYWQACVb9AAAUuAAAADZoaGVhA+ECBQAAFPAAAAAkaG10eEEBA94AABUUAAAAkGxvY2FVlFE8AAAVpAAAAEptYXhwAC8AkgAAFfAAAAAgbmFtZRHEcG0AABYQAAABZnBvc3QAAwAAAAAXeAAAACAAAwIAAZAABQAAAUwBZgAAAEcBTAFmAAAA9QAZAIQAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmHwHg/+D/4AHgACAAAAABAAAAAAAAAAAAAAAgAAAAAAACAAAAAwAAABQAAwABAAAAFAAEADgAAAAKAAgAAgACAAEAIOYf//3//wAAAAAAIOYA//3//wAB/+MaBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwAAACUCAAGSAAQACQANAAA3EQURBQEFEQURATUXBwACAP4AAdv+SgG2/tySkiUBbgH+lAEBSgH+3AEBJv7/3G9sAAAGAAAASQIAAW4ABAAJAA4AEwAYAB0AABMhFSE1FSEVITUVIRUhNSczFSM1FTMVIzUVMxUjNZIBbv6SAW7+kgFu/pKSSUlJSUlJAW5JSW5JSW5JSdxJSW5JSW5JSQAAAAACAAAAJQH3AZIAFgAuAAAlLgMnBzIuAic+AyMXNh4CByUnMg4CBx4DIxcnHgMXNi4CBwH3Dik/XUABAR04Vjg+WDUYAQFNeEcZEv7MAQENHDMlHzIfEQEBASZUTDYHCSBIZj4lGCQaEARqFi5HLzJFKhJqDC1RZSzVPQoWIxkbJBQID0wCCQ4VDxo4KA8PAAACAG4AJQGSAZIABAAzAAA3IQchJzceAzMyPgI3PgMnNyMXDgMHDgMjIi4CJy4DNycjBx4DF24BJQH+3QFABRIUGg0QGBUQCAYKBgQBAUABAQEEBAQCCAgKBQYJCQcEAgUCAwEBPwEBAwcJCEkkJD8HCgYEBAYKBwcRFRkPtcMGCQkHAwMFAwEBAwUDAwcJCQbDtQ8ZFREHAAUAAP//AgABtwAGAA4AFgBHAF8AAAEzFTMVIzUfAQc1IzUzNS8BNxUzFSMVFx4DFRwBDgEHDgMHMh4CFx4DHwEjJzwBJjQjLgMrARUjNTMyHgIXBzMyPgI3PgM1NC4CJy4DKwEVAUkjS24mkZFvb96RkW9vDAMFAwECAwICBQUGBAECAgIBAQICAgEbIBMBAQIEBQUCCh0qCAwKCQM3DgMFBQMCAQIBAQEBAgECAwQGAw4BtpYgtv9cXEolSUhcXEklSlUDCAoNBwQJBwcCAwUDAgEBAQIBAQMEBANCLgEBAQIGBwYCSLYBAwUDRAECAgECBAQGAwQFBQQBAgIBATIAAAAAAwBtAAABkgGTAAMADAARAAAlIzcXBzM3MxczAyMDFyEVITUBI0YjI7ZKF2MXSmVbZQEBJP7c5nh4eUlJASb+2iRJSQAKAAAAJQIAAZIABAAJAA4AEwAYAB0AIgAnACwAMQAANxEFEQU3FzUHFTU3NScVJwcVFzUVJxU3NRUHFRc1NxUXNQclBxUXNRUnFTc1FQcVFzUAAgD+ALeSkpKSJW1tbW1tbSWSkgEkbW1tbW1tJQFuAf6UASUBSgFIbQFIAUq4AUgBSm8BSgFIbQFIAUrbSAFKAQEBSAFKbwFKAUhtAUgBSgAAAAIACQAlAgABkgAWAC4AACUOAxU1DgMHJj4CFzU0HgIXBT4DNxU1FD4CNy4DNRUmDgIXAgA5VTkcQVxAKA8RGEh3Thc2Vz/+PAY3S1UlECAxICYyHQw9Z0chCt8wRi8VAWsFDxsjGS1kUiwLaQETKUYxYBAUDwgDTRABCRMlGhoiFwkBPhAQJzkZAAAAAgBJAEkBtwFuAEcAjwAAAQ4DFRQeAhceAxc+Azc+AzU0LgInLgMHJg4CBwYiBiYHNAYmIicwLgE0NTQ+Ajc+Azc1DgMHJw4DFRQeAhceAxc+Azc+AzU0LgInLgMHJg4CBwYiBiYVJgYmIjUiJjQmNTQ+Ajc+Azc1DgMHATkJDQkEAwYKBgcOEBAJCA4NDAUGCAUDAwQHBQUKCgwGBQoICAMBAgIBAQEBAQEBAQMGCgYGDxITCxMhHBYJzQkNCQQDBwkHBg4QEQgIDg0MBgUIBQMCBQcFBAoLDAYFCQkIAwECAgEBAQEBAQEBAwcJBgcPERQLEyEcFwkBIgwYHBsQCxgUEgcICwgDAQECBggGBQ0MDwYIDA0KBgUIBAQBAQICBQECAgEBAQECAQQCBQEKEhQRCggQDAwDFwgQFBQNAQwYHBsQCxgUEgcICwgDAQECBggGBQ0MDwYIDA0KBgUIBAQBAQICBQECAgEBAQECAQQCBQEKEhQRCggQDAwDFwgQFBQNAAT//wBJAgABbgAEAAkADgASAAATIRUhNRchFSE1FSEVITUHNQcXAAIA/gC3AUn+twFJ/rclk5MBbklJbklJbklJSbdcWwAAAAUAAABJAgABbgAEAAkADgAaAG0AABMhFSE1FSEVITUVIRUhNSczNSM1IwcVNxUjFRc+Azc+Azc0PgE0NTQuAicuAyMiBioBByIOAiMVPgM3Mj4BMjM6AR4BFx4CFBUcAQYUBw4DBw4DDwEVMzUjPgM3MZIBbv6SAW7+kgFu/pKNRBgUFhYYIAUHBQMBAgICAQEBAQEDBAICBgcHBQEEAwQCAgMEBAICBAQDAgIDAwMCAgMDAwEBAgEBAQEBAgICAQQGCQULRC0BAwQEAgFuSUluSUluSUlrFF0GFAZJFJEFBwYEAQIDBAMBAgMDAwIDBwUFAgIEAgEBAQEBAhUBAgIBAQEBAQIBAQIDBAIBAgMCAQICAwMCAQUHCQYNExQBBAMFAgADAAAASQIAAW4ALAAxAGwAACUiLgInNTMeAzMyPgI1NC4CIyIOAgcjNT4DMzIeAhUUDgIjJzMVIzUnIg4CByMVDgMVFB4CFxUzHgMzMj4CNzMVDgMjIi4CNTQ+AjMyHgIXFSMuAyMBbgoUEhEIHgUKCwsGEyEZDg4ZIRMGCwsKBR4IERIUCh41KBcXKDUet5KSJQYLCwoFHgQHBQICBQcEHgUKCwsGBgsLCgUeCBESFAoeNSgXFyg1HgoUEhEIHgUKCwsGSQMGBwU0AgQDAQ0XHhESHhcNAQMEAjQFBwYDFyg1Hx41KBe3SUkvAQMEAhgFCw0OBwcNDQsGFwIEAwEBAwQCNAUHBgMXKDUeHzUoFwMGBwU0AgQDAQAAAAEAAAC3AgABAAAEAAATIRUhNQACAP4AAQBJSQABAJIASQGSAZIADAAAAQ8CFzcHNxc3DwEXAQcpQQvBC0ApQAvBC0EBWdYBOAE6AdgBOgE4AQAAAAQAAABJAgABbgAEAAkADgASAAATIRUhNRchFSE1FSEVITUHNRcHAAIA/gC3AUn+twFJ/re3k5MBbklJbklJbklJSbdcWwAAAAMAAAAlAgABkgAEAAkAEgAANxEFEQUBBREFEQc/ARcVJTU3FwACAP4AAdv+SgG2tiQwPv6Sbm4lAW4B/pQBAUoB/twBASa4AV5eSgFIk5MABAAlAAAB2wG3AAMAGgAeADUAAAEVJzMHHgIGDwEOAS4BJy4BNDY/AT4BHgEXARcnFTceATI2PwE+AS4BJy4CBg8BDgEeARcB29vbKgMDAQICcwIGBgYCAwMBAnQCBQYGAv5029sqAwYGBQJzAgEBAgMCBgYGAnICAgEDAgG33NwrAgYGBgJzAgEBAgMDBQYGAnMCAQECA/51AdvaKgMDAQJzAgUGBgMCAwECAnMCBQYGAgAABAAA/9sCAAHbAAMAGgAeADUAACU1Fwc3LgI2PwE+AR4BFx4BFAYPAQ4BIiYnBycXNQcuASIGDwEOAR4BFx4CNj8BPgEuAScBJdvbKgMDAQICcwIGBgYCAwMBAnQCBQYGAnTb2yoDBgYFAnMCAQECAwIGBgYCcgICAQMC/9zbASwCBgYGAnICAgEDAgMGBgUCcwIBAwN1AdzbKgMDAQJzAgUGBgMCAwECAnICBgYGAgABAG4AJQFuAZIAEgAAJREjESM1Ii4CNTQ+AjsBESMBSSRKFigeEREeKBaTJSUBSf63khEeKBcWKB4R/pMAAAAAAwAlAAEB3AG2AAoAVwB4AAAlMwcnMzUjNxcjFQcOAwcOAyMiLgInLgM1ND4CNz4DOwE1NC4CJy4DIyIOAgcOAwc1PgM3PgIyMzIeAhceAx0BIzU1IyIOAgcOAxUUHgIXHgMzMj4CNz4DPQEBkkpcXEpKXFxK6wIGBgcEAwgICQUIDw4LBQUHBQIDBQkGBQ8SFAwlAQMDAgMFBwgFBAoJCQQFCQkJBQQJCQkEBQkKCQUNFRENBQUIBQI0FQgMCggDAwUDAQECAwICBQUHAwUJCQcCAwUCApKRkZORkZMHBAYFBQECAwIBAgUHBQULDQ8JCRANCwQFBgUCCQMGBQQCAgICAQEBAgEBAwQFAy8CAwMCAQEBAQIFCAUGDhIXDXgYSwECAwICBgYIBQQGBgUCAgMCAQIEBgQECgsOBwQAAAAEACUASgHbAW4AAwAMAC0AegAANyM3FwczNzMXMwMjAyUVFA4CBw4DIyIuAicuAzU0PgI3PgM7ATcuAyMqAQ4BBw4DBxU+Azc+AzMyHgIXHgMdASMiDgIHDgMVFB4CFx4DMzI+Ajc+AzcVMzU0LgInrjUbGok4EUsSOE1ETQF/AQMFAwMHCQoFBAYGBQIDAwIBAgMEAwMJCw0IFiIFDhIWDQYKCgoFBAoJCgQFCgoJBQUJCgoFBAkHBgIDAwMBJg0WEw8GBgkGAwIFCAUFDA4QCQUJCQgEBAcHBgI3AgUIBsV1dXZHRwEf/uFlBAcOCwsEBAYEAwICAwICBQYHAwUJBwUCAgMCAWIFCAYCAQEBAQMCBAIwAwUEAwIBAgEBAQIDAQIEBgYDCQMEBwQFCw4QCgkPDgsFBQcFAgEBAwICBQUHAxh7DhcTDwUAAAIASQBJAbcBkwAEAIEAABMhFSE1Fx4DFx4DFRQOAgcOAyMiLgInLgMnFR4DFx4DMzI+Ajc+AzU0LgInLgMvAS4DJy4DNTQ+Ajc+AzMyHgIXHgMXNS4DJy4DIyIOAgcOAxUUHgIXHgMfAUkBbv6SvwQIBgYCAgMDAQIDBQQDCAkLBgYNDAwGBg0NDQYGCwwNBgYNDAwHDxoXEggHCwgDAgUHBAUMDxIKHAcNCQcDAgMDAQIDBQMDCAkKBgYLCgsGBQsLCgYGCwwLBgYLDAsGDBcUEQcICwcDAgQHBAUMERUNIAEAJSUxAgMFBAMDBgYHAwUICAYDAgQDAQECAwMCBQcIBEEDBAUDAgECAQEDBgkGBQ8SFQwJEA8NBgYKCggDCwIFBQQDAgUFBgMFBwcFAwIDAwEBAgMCAgQGBgM9AgUDBAEBAgEBAwcJBgYPERMLCA8ODAQFCgoJBQsAAAQAAABJAgABbgAEAAkADgATAAA/ARcHJxc3FwcnJScHFzcXJwcXNwAltiO4AbYluCMB/yO4JbYBuCO2Jdsdkh6TAZQekhwBHZIekwGUHpIcAAAAAAUAAP/bAgAB2wAEAAkADgATABgAABcRIREhASERIREHITUhFRUhNSEVFSE1IRUAAgD+AAHb/koBtkn+3AEk/twBJP7cASQlAgD+AAHc/kkBt5JJSW5JSW5JSQAAAwCTAEkBbQGSABcALwBbAAA3Mh4CFx4DFwYUDgEHDgMrATczNzIeAhceAhQXBhQOAQcOAysBNzMDMzI+Ajc+Ayc2LgInLgMnPgM3PgMnNi4CJy4DKwED+AcNCQkDBAMEAQEBBAQEAgkKDQcqASgBBQsIBwIDAwQBAQQCBAEICAsFKgEoZGQRGRgRCAYLBgQBAQMEBwQGCg8OCggMDQgFAwcDAwEBBAYLBgcQFBcOZAHeAQMEAwMICQwHBgsJCAIDBAMBYYECAgMDAgYHCQUFCQcGAgIEAgFN/uoDBQgGBQ4RFQsKEQ8NBgUJBgQBAQMFBwUECwwOCAsSDw0FBggFAv63AAADACUAAAHbAbcABAANABEAADcRIREhEyMDMzczFzMDBxcjNyUBtv5K/URMOBBLETdLIho0GgABt/5JAW7+20hIASU1eHgAAAACAEIAHwG8AZkAIQBLAAAlBycOAS4BJwcXBw4BIiYvAS4BNDY/AT4BMhYfAR4BFAYHJy4BIgYPAQ4BFBYXHgE+AT8BLgMnLgI2PwE+AhYXBxc3PgE0JicBvJQEBQsMCwYhHg8PJygnDw8PDw8P1w8nKCcPDw8QEA8lCxscHAvFCwwLCgsbHRsLJwMFBgUCCgwDBQhSBg8QEgl+JoYLCwoL9pQEAQECAwMgHg8PDw8PDxAmKCcP1w8QEA8PDycoJw9+CwoLC8YLGx0bCwoLAQsLJgIDBAUCChcXFQhSBgYBBAV9JYYLHBwbCwAAAAMAAABJAgABbgAEAAkADgAAEyEVITUXIRUhNRczFSM1AAIA/gCSAW7+kpPb2wFuSUluSUluSUkAAwAAAEkCAAFuAAQACQAOAAATIRUhNRUhFSE1FTMVIzUAAgD+AAFt/pPc3AFuSUluSUluSUkAAAADAAAASQIAAW4ABAAJAA4AABMhFSE1FSEVITUVIRUhNQAB//4BAf/+AQIA/gABbklJbklJbklJAAMAAABJAgABbgAEAAkADgAAEyEHIScHIRchNxchByEnbgElAf7dAW0B/wH9/wFtASUB/t0BAW5JSW5JSW5JSQAGAAAAJwIAAZUACAANABQAGAAdACEAADc1IxEhFTMRIQEhFSE1FyMVIRUhNQcjNxcXITUhFScXIzdJSQG3Sf5JAUn+kwFtSiX+twFu27hcXG3+2wElKSlJICdJASVK/twBSdzcSbcl3EltbSUlJW5JSQAAAAEAAAABAADCHXSvXw889QALAgAAAAAAz3WLJQAAAADPdYsl////2wIAAdsAAAAIAAIAAAAAAAAAAQAAAeD/4AAAAgD//wAAAgAAAQAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAbgIAAAACAABtAgAAAAIAAAkCAABJAgD//wIAAAACAAAAAgAAAAIAAJICAAAAAgAAAAIAACUCAAAAAgAAbgIAACUCAAAlAgAASQIAAAACAAAAAgAAkwIAACUCAABCAgAAAAIAAAACAAAAAgAAAAIAAAAAAAAAAAoAFAAeAEAAcAC4AQQBhgGoAfoCQAMCAyYDuARGBFQEcASUBLwFFgVuBY4GLgbUB4IHrAfaCFwIgAj2CRIJLglKCWoJpAAAAAEAAAAkAJAACgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAYAAAAAQAAAAAAAgAOAGoAAQAAAAAAAwAYAC4AAQAAAAAABAAYAHgAAQAAAAAABQAWABgAAQAAAAAABgAMAEYAAQAAAAAACgAoAJAAAwABBAkAAQAYAAAAAwABBAkAAgAOAGoAAwABBAkAAwAYAC4AAwABBAkABAAYAHgAAwABBAkABQAWABgAAwABBAkABgAYAFIAAwABBAkACgAoAJAAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQAVgBlAHIAcwBpAG8AbgAgADEALgAwAFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0UmVkYWN0b3JGb250AFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0AFIAZQBnAHUAbABhAHIAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('truetype'), url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AABIoAAoAAAAAEeAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAA9AAADgEAAA4Bg0Rie09TLzIAAA74AAAAYAAAAGAIIvzVY21hcAAAD1gAAABMAAAATBpVzHZnYXNwAAAPpAAAAAgAAAAIAAAAEGhlYWQAAA+sAAAANgAAADYACVb9aGhlYQAAD+QAAAAkAAAAJAPhAgVobXR4AAAQCAAAAJAAAACQQQED3m1heHAAABCYAAAABgAAAAYAJFAAbmFtZQAAEKAAAAFmAAABZhHEcG1wb3N0AAASCAAAACAAAAAgAAMAAAEABAQAAQEBDVJlZGFjdG9yRm9udAABAgABADr4HAL4GwP4GAQeCgAZU/+Lix4KABlT/4uLDAeKZviU+HQFHQAAAT8PHQAAAUQRHQAAAAkdAAAN+BIAJQEBDRkbHSAlKi80OT5DSE1SV1xhZmtwdXp/hImOk5idoqessba7wFJlZGFjdG9yRm9udFJlZGFjdG9yRm9udHUwdTF1MjB1RTYwMHVFNjAxdUU2MDJ1RTYwM3VFNjA0dUU2MDV1RTYwNnVFNjA3dUU2MDh1RTYwOXVFNjBBdUU2MEJ1RTYwQ3VFNjBEdUU2MEV1RTYwRnVFNjEwdUU2MTF1RTYxMnVFNjEzdUU2MTR1RTYxNXVFNjE2dUU2MTd1RTYxOHVFNjE5dUU2MUF1RTYxQnVFNjFDdUU2MUR1RTYxRXVFNjFGAAACAYkAIgAkAgABAAQABwAKAA0AQQCYAPEBSQH6Ai8CxwMhA98EGwTXBYEFkQW0BfEGLwagBxEHOgf0CLUJaQmsCfwKhAq5C0QLdAuiC9AMAQxo/JQO/JQO/JQO+5QOi7AVi/gB+JSLi/wB/JSLBfhv990V/EqLi/u5+EqLi/e5Bfu4+5QVi/dv9yb7Avsm+wEFDvcm+AIV+AKLi0L8AouL1AWL+wIV+AKLi0L8AouL1AWL+wIV+AKLi0L8AouL1AX7JvdwFdSLi0JCi4vUBYv7AhXUi4tCQouL1AWL+wIV1IuLQkKLi9QFDviLsBVky0yq+0KWCIshBYuLQMb7LPcT9z33GsW4i4sIiyEF92Wr9wT7QV77Cgj7yfdpFYvIBYuLb3ImSOFBtnqLiwiLfIvXBe6F9yJ7nGSl0PsO6Ps2YwgO9wLUFfe4i4tn+7iLi68FysoVnHmngrGLsounlJydnJ2Up4uyCIv3SUyLi/tXBYt8hoCDg4ODgId8i32Lf4+Dk4OTh5aLmgiL91dLi4v7SQWLZJRvnXkIDvfd+EoVrouL+yrWi4tr+wKLi/dKBbH7kxX3JS/7JS+L1fsDi4uw9wOLi9QF+3LTFfsl5/cl54tC9wOLi2b7A4uLQQWXNhWTg499i3iLf4mBhoSGg4SHgYmOio6KjYiNiI6GjoQIpklri3i5BYuMio2KjYaZhZKEiwiBi4tDbouL90q1iwWfi5mHk4MIVEcVmYsFk4uRjY+Pjo+NkYuUi5SJkoiOh4+FjYOLCH2Li1kFDve393oVRYuu9wyu+wwF+0r7DRXVi6LU7ouiQtWLJve6MIsm+7oFjGcV97iLi0L7uIuL1AUOi7AVi/gB+JSLi/wB/JSLBfdLrxX3JouL1Psmi4tCBYv3AhX3JouL1Psmi4tCBWb3SxX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBbD3cBWLQvcmi4vU+yaLBfe4ixX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBQ74lPdzFfss+xNAUIuLCIv1BftCgExsZEte9wr3BPdB92VrCIv1BYuLxV73PfsaCPxYLBWcsvcim+6RCIs/i5oFi4u2nOHVJs5vpIuLCItOBfs2s/sOLqVGCA73zfe2FXNsgGiLY4tpk3Ccd513n4Gji6CLnJKZmpqakpyLn4uehZt+mH+ZfJJ7i32LgIeChQiIiYmKiYuKi4mMioyKjoqPi5GLpJOknKOco6KcqJYIi6EFWXhlcnRrCPthixV0bH9oi2OLaZNwnXecd6CBoougi5ySmpqZmpKci5+LnoWbfph/mX2Seot+i3+IgoQIiImJioqLiYuKjIqMiY6Kj4uRi6SUpJujnKOinKmWCIuhBVh4ZnJzawgOi/gCFfiUi4tC/JSLi9QF90v7AhX33YuLQvvdi4vUBYv7AhX33YuLQvvdi4vUBWZCFYv3S/snL/cnMAUO9yb4AhX4AouLQvwCi4vUBYv7AhX4AouLQvwCi4vUBYv7AhX4AouLQvwCi4vUBfsh9hXPi4ufc4uL6HeLdYWLd6GRi0Jzi4t3Bav7JRWXl5KTjY6PkI2PjY+Mj4yPi5CLlIiThJCFkYKOf4uHi4aKhoqGioaKhokIi3YFkI6QjZCNkIyPjI+LkIuPio6IjoiMh4uGi4iLiImIiYeJh4eHiIiDgX18CIB+i3jPi4ufXosFjo+QkJGRCIuLBQ74AtQVcItyk3aYCIu/qYsFmIWZh5uLvYu0sIu5i7pisFmLe4t9h36FCG2Li78FoJikk6aL3IvMSYs6iztKSTqLCPtL90sV9yaLi0L7JouL1AVmuhV8i3yHfoUIbYuLcwWAfYR6i3iLeZJ5ln0Ii3SpiwWYhZqHmoubi5mPmJEIqYuLVwV2fnKDcIs6i0rNi9uL3MzN3Iumi6SDoH4Ii1dtiwV+kX2Pe4sIDov3lBX4lIuLQvyUi4vUBQ73m/ftFWL7a0qLgFL3VYuWxEuLtPdry4uWxPtVi4BSzIsFDov4AhX4lIuLQvyUi4vUBfdL+wIV992Li0L73YuL1AWL+wIV992Li0L73YuL1AX7S0IVi/dL9ycv+ycwBQ6LsBWL+AH4lIuL/AH8lIsF+G/33RX8SouL+7n4SouL97kF+0r7SxWvi7vqySyLQvwCi4vU9wL3JvcC+yYFDvhv+EsVi/tw+2/3cPdviwVhYBWShIyChoUI+wf7BwWFhoKMhJKEkoqUkJEI9wj3BwWQkJWKkYQI/CD8HxX3b4r7b/dvi/tuBbW1FZKElYqQkAj3B/cHBZCQipWEkoSRgo2FhQj7BvsHBYWGjYGRhQgO97n3kxWL93D3b/tv+2+KBbW3FYSSipSQkQj3B/cGBZGRlIqShJKEjIGGhgj7CPsHBYaGgYyFkgj7CPsJFftvjPdv+3CL928FYWEVhJKBjIaGCPsH+wcFhoaMgZKEkoSUipGRCPcG9wYFkZGJlIWSCA733bAVi/fdZ4uL+91Bi4v3JgVPi1q8i8iLx7y8x4sI9yeLi/wBZosFDvgm9yYV1Ysv+yUv9yXVi4v3J0GL5/cl5/slQYuL+ycF+3+EFYWCgoSBhoGGgIh/i3WLeZF+mH6XhZ2Looujkp2blpqXopGriwiwi4uUBYuUiJKFj4SQgo1/i3+Lf4l/iH+If4V+hAiLugWWkJeOl46XjZiMmIusi6KEmH6ZfZFyi2gIi/sMV4uLowWL1hV2iwV3i32IhIaDhoeCi36LgY6EkIWQhpOIlIuZi5aQkpaTlo+ai58Ii48FDvdC91kVVoum9wml+wkF+x37ChXDi5zS1oudRMOLPvezR4s++7MF+BPwFYuHBYt3h3uDgIOAf4V9i4GLg46GkYWRiJOLlIuYj5WTkJSQmY6giwihiwWt7RV9mXOSaYt8i36Kfol/iH6Hf4YIi1sFmJOYkJiPl46YjZmLl4uViJGHkoaOhIuCCIuCZYsFaYtyhXt/e3+DeItyi3SReZl+mH6ehaOLmIuXjZWQlpCTk5KUCItzwouL9w8Fi6+EpX2ZCA7U95QV+AKLi2b8AouLsAX3U1oVloeUhZGEkYSOgouCi36GgYKEgoR/iHuLe4t6jnuRepB6lHqXCItKBZqEm4Wch5yIm4mci7OLqZOfm5+alKOLq4ujhZ9/mn6bd5dwlAhvlgV3kX6ShZGFkIiTi5OLl4+UlJGTkZeOm4uai5mImoaZhpqEmYIIi8gFfJF8kHuPfI58jXuLaYtxg3h6d3uCdItui3WQeZd+l32hf61+CKuABQ6L928Vr6n3S/snZ277S/cmBYuLFfdL9yevbvtL+ydnqAX4lIsVZ6n7S/snr273S/cmBYuLFftL9ydnbvdL+yevqAUOi2YVi/iU+JSLi/yU/JSLBfhv+HAV/EqLi/xL+EqLi/hLBUL7JhX7uIuL1Pe4i4tCBYv7AhX7uIuL1Pe4i4tCBYv7AhX7uIuL1Pe4i4tCBQ73jPdyFZ6LmYiUg5ODj36LeYt6h3+DhIOEfYd3iwhii4vstIsFi/cVFZuLloiShJKFjoKLfYt+iIGEhYSFgIh7iwhii4vYtIsFJvuqFfCLBbWLqJKemp2ZlKKLqoulhZ9/mn+ZeZRzjZ+NmpKVl5aXkJuLoIungqB5mHqZcJJoiwgmi4v73QUOsIsVi/hL+EqLi/xL/EqLBfeR+AIVR4s/+7nDi5vT1oucQ8KLQPe5BWlWFaX7DFeLpfcMBQ74UPeKFfso+yiHjwV9h3uNfJMIamupbXx8BWJiSYtitAh8mgVitIvNtLQI92v3awW0tM2LtGIImnwFtGKLSWJiCGb3EhVuqFyKbm4I+1n7WgVtbotcp26ob7qLqKkIsrEFg4+EkIWScKaGsJ+gCN3dBZuapIyifwj7EvsRsWb3GvcaBaiojLpuqAgOi/gCFfiUi4tC/JSLi9QF9yb7AhX4AouLQvwCi4vUBfcn+wIV92+Li0L7b4uL1AUOi/gCFfiUi4tC/JSLi9QFi/sCFfgBi4tC/AGLi9QFi/sCFfdwi4tC+3CLi9QFDov4AhX4k4uLQvyTi4vUBYv7AhX4k4uLQvyTi4vUBYv7AhX4lIuLQvyUi4vUBQ73AvgCFfe4i4tC+7iLi9QF+wL7AhX4lIuLQvyUi4vUBfcC+wIV97iLi0L7uIuL1AUO1LIVi9RCi4v3ufhLi4tB1IuL+7j8S4sF99333RX8AYuL+3D4AYuL93AF1UIVZouL+0v73YuLZvgCi4v3cAX7b0IV+0yL5/cB5/sBBfcBZhX7uYuLsPe5i4tmBWL3AhW0QkKLq9QFDviUFPiUFYsMCgAAAAADAgABkAAFAAABTAFmAAAARwFMAWYAAAD1ABkAhAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOYfAeD/4P/gAeAAIAAAAAEAAAAAAAAAAAAAACAAAAAAAAIAAAADAAAAFAADAAEAAAAUAAQAOAAAAAoACAACAAIAAQAg5h///f//AAAAAAAg5gD//f//AAH/4xoEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAQAAhlBJsl8PPPUACwIAAAAAAM91iyUAAAAAz3WLJf///9sCAAHbAAAACAACAAAAAAAAAAEAAAHg/+AAAAIA//8AAAIAAAEAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAQAAAAIAAAACAAAAAgAAAAIAAG4CAAAAAgAAbQIAAAACAAAJAgAASQIA//8CAAAAAgAAAAIAAAACAACSAgAAAAIAAAACAAAlAgAAAAIAAG4CAAAlAgAAJQIAAEkCAAAAAgAAAAIAAJMCAAAlAgAAQgIAAAACAAAAAgAAAAIAAAACAAAAAABQAAAkAAAAAAAOAK4AAQAAAAAAAQAYAAAAAQAAAAAAAgAOAGoAAQAAAAAAAwAYAC4AAQAAAAAABAAYAHgAAQAAAAAABQAWABgAAQAAAAAABgAMAEYAAQAAAAAACgAoAJAAAwABBAkAAQAYAAAAAwABBAkAAgAOAGoAAwABBAkAAwAYAC4AAwABBAkABAAYAHgAAwABBAkABQAWABgAAwABBAkABgAYAFIAAwABBAkACgAoAJAAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQAVgBlAHIAcwBpAG8AbgAgADEALgAwAFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0UmVkYWN0b3JGb250AFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0AFIAZQBnAHUAbABhAHIAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('woff');
+  font-weight: normal;
+  font-style: normal;
 }
-
-body .redactor_air {
-	position: absolute;
-	z-index: 2;
+/*
+	Box
+*/
+.redactor-box {
+  position: relative;
+  overflow: visible;
+  margin-bottom: 24px;
+}
+.redactor-box textarea {
+  display: block;
+  position: relative;
+  margin: 0;
+  padding: 0;
+  width: 100%;
+  overflow: auto;
+  outline: none;
+  border: none;
+  background-color: #111;
+  box-shadow: none;
+  color: #ccc;
+  font-size: 13px;
+  font-family: Menlo, Monaco, monospace, sans-serif !important;
+  resize: none;
+}
+.redactor-box textarea:focus {
+  outline: none;
+}
+.redactor-editor,
+.redactor-box {
+  background: #fff;
+}
+/*
+	Z-index setup
+*/
+.redactor-editor,
+.redactor-box,
+.redactor-box textarea {
+  z-index: auto;
+}
+.redactor-box-fullscreen {
+  z-index: 1051;
+}
+.redactor-toolbar {
+  z-index: 100;
+}
+.redactor-dropdown {
+  z-index: 1052;
+}
+#redactor-modal-overlay,
+#redactor-modal-box,
+#redactor-modal {
+  z-index: 1053;
 }
-
 /*
 	Fullscreen
 */
@@ -13,816 +63,886 @@
 /*
 	Fullscreen
 */
-body .redactor_box_fullscreen {
-    position: fixed;
-    top: 0;
-    left: 0;
-    z-index: 1000000;
-    overflow: hidden;
-    width: 100%;
+body .redactor-box-fullscreen {
+  position: fixed;
+  top: 0;
+  left: 0;
+  width: 100%;
 }
-
-.redactor_box iframe {
-	display: block;
-	margin: 0;
-	padding: 0;
+/*
+	Utils
+*/
+.redactor-scrollbar-measure {
+  position: absolute;
+  top: -9999px;
+  width: 50px;
+  height: 50px;
+  overflow: scroll;
 }
-
-.redactor-link-tooltip {
-	position: absolute;
-	z-index: 3000;
-	padding: 10px;
-	line-height: 1;
-	display: inline-block;
-	background-color: #000;
-	color: #555 !important;
+/*
+	Editor
+*/
+.redactor-editor {
+  position: relative;
+  overflow: auto;
+  margin: 0 !important;
+  padding: 20px;
+  min-height: 80px;
+  outline: none;
+  white-space: normal;
+  border: 1px solid #eee;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+  font-size: 14px;
+  line-height: 1.6em;
 }
-.redactor-link-tooltip,
-.redactor-link-tooltip a {
-	font-size: 12px;
-	font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+.redactor-editor:focus {
+  outline: none;
 }
-.redactor-link-tooltip a {
-	color: #ccc;
-	margin: 0 5px;
-	text-decoration: none;
+.toolbar-fixed-box + .redactor-editor {
+  padding-top: 32px !important;
 }
-.redactor-link-tooltip a:hover {
-	color: #fff;
+/*
+	Placeholder
+*/
+.redactor-placeholder:after {
+  position: absolute;
+  top: 20px;
+  left: 20px;
+  content: attr(placeholder);
+  display: block;
+  /* For Firefox */
+  color: #999 !important;
+  font-weight: normal !important;
 }
-
-.redactor_box textarea, .redactor_box textarea:focus {
-	position: relative;
-	z-index: 1004;
-	display: block;
-	overflow: auto;
-	margin: 0;
-	padding: 0;
-	width: 100%;
-	outline: none;
-	outline: none;
-	border: none;
-	background-color: #222;
-	box-shadow: none;
-	color: #ccc;
-	font-size: 13px;
-	font-family: Menlo, Monaco, monospace, sans-serif;
-	resize: none;
+/*
+	Toolbar
+*/
+.redactor-toolbar {
+  position: relative;
+  top: 0;
+  left: 0;
+  margin: 0 !important;
+  padding: 0 !important;
+  list-style: none !important;
+  font-size: 14px !important;
+  line-height: 1 !important;
+  background: #fff;
+  border: none;
+  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
+}
+.redactor-toolbar:after {
+  content: "";
+  display: table;
+  clear: both;
+}
+.redactor-toolbar.redactor-toolbar-overflow {
+  overflow-y: auto;
+  height: 29px;
+  white-space: nowrap;
+}
+.redactor-toolbar.redactor-toolbar-external {
+  z-index: 999;
+  box-shadow: none;
+  border: 1px solid rgba(0, 0, 0, 0.1);
+}
+.redactor-toolbar li {
+  vertical-align: top;
+  display: inline-block;
+  margin: 0 !important;
+  padding: 0 !important;
+  outline: none;
+  list-style: none !important;
+  -webkit-box-sizing: content-box;
+  -moz-box-sizing: content-box;
+  box-sizing: content-box;
 }
-
-.redactor_editor,
-.redactor_editor:focus,
-.redactor_editor div,
-.redactor_editor p,
-.redactor_editor ul,
-.redactor_editor ol,
-.redactor_editor table,
-.redactor_editor dl,
-.redactor_editor blockquote,
-.redactor_editor pre,
-.redactor_editor h1,
-.redactor_editor h2,
-.redactor_editor h3,
-.redactor_editor h4,
-.redactor_editor h5,
-.redactor_editor h6 {
-	font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+.redactor-toolbar li a {
+  display: block;
+  color: #333;
+  text-align: center;
+  padding: 9px 10px;
+  outline: none;
+  border: none;
+  text-decoration: none;
+  cursor: pointer;
+  zoom: 1;
+  -webkit-box-sizing: content-box;
+  -moz-box-sizing: content-box;
+  box-sizing: content-box;
+}
+.redactor-toolbar li a:hover {
+  outline: none;
+  background-color: #1f78d8;
+  color: #fff;
+}
+.redactor-toolbar li a:hover i:before {
+  color: #fff;
+}
+.redactor-toolbar li a:active,
+.redactor-toolbar li a.redactor-act {
+  outline: none;
+  background-color: #ccc;
+  color: #444;
+}
+.redactor-toolbar li a.redactor-btn-image {
+  width: 14px;
+  height: 14px;
+  background-position: center center;
+  background-repeat: no-repeat;
+}
+.redactor-toolbar li a.fa-redactor-btn {
+  display: inline-block;
+  padding: 9px 10px 8px 10px;
+  line-height: 1;
+}
+.redactor-toolbar li a.redactor-button-disabled {
+  filter: alpha(opacity=30);
+  -moz-opacity: 0.3;
+  opacity: 0.3;
+}
+.redactor-toolbar li a.redactor-button-disabled:hover {
+  color: #333;
+  outline: none;
+  background-color: transparent !important;
+  cursor: default;
+}
+.redactor-toolbar li a.redactor-button-focus {
+  color: #fff;
+  background: #000;
 }
-
-.redactor_editor code,
-.redactor_editor pre {
-	font-family: Menlo, Monaco, monospace, sans-serif !important;
+/*
+	CodeMirror
+*/
+.redactor-box .CodeMirror {
+  display: none;
 }
-
-.redactor_editor,
-.redactor_editor:focus,
-.redactor_editor div,
-.redactor_editor p,
-.redactor_editor ul,
-.redactor_editor ol,
-.redactor_editor table,
-.redactor_editor dl,
-.redactor_editor blockquote,
-.redactor_editor pre {
-	font-size: 15px;
-	line-height: 1.5rem;
+/*
+	Icons
+*/
+.re-icon {
+  font-family: 'RedactorFont';
+  speak: none;
+  font-style: normal;
+  font-weight: normal;
+  font-variant: normal;
+  text-transform: none;
+  line-height: 1;
+  -webkit-font-smoothing: antialiased;
+  -moz-osx-font-smoothing: grayscale;
 }
-
-.redactor_editor,
-.redactor_editor:focus {
-	position: relative;
-	overflow: auto;
-	margin: 0 !important;
-	padding: 10px;
-	padding-bottom: 5px;
-	outline: none;
-	background: none;
-	background: #fff !important;
-	box-shadow: none !important;
-	white-space: normal;
-}
-.redactor_editor a {
-	color: #15c !important;
-	text-decoration: underline !important;
+.re-icon i:before {
+  position: relative;
+  font-size: 14px;
 }
-
-.redactor_editor .redactor_placeholder {
-	color: #999 !important;
-	display: block !important;
-	margin-bottom: 10px !important;
+.re-video:before {
+  content: "\e600";
 }
-
-.redactor_editor object,
-.redactor_editor embed,
-.redactor_editor video,
-.redactor_editor img {
-	max-width: 100%;
-	width: auto;
-}
-.redactor_editor video,
-.redactor_editor img {
-	height: auto;
+.re-unorderedlist:before {
+  content: "\e601";
 }
-
-.redactor_editor div,
-.redactor_editor p,
-.redactor_editor ul,
-.redactor_editor ol,
-.redactor_editor table,
-.redactor_editor dl,
-.redactor_editor blockquote,
-.redactor_editor pre {
-	margin: 0;
-	margin-bottom: 10px !important;
-	border: none;
-	background: none !important;
-	box-shadow: none !important;
-}
-.redactor_editor iframe,
-.redactor_editor object,
-.redactor_editor hr {
-	margin-bottom: 15px !important;
-}
-.redactor_editor blockquote {
-	margin-left: 1.5em !important;
-	padding-left: 0 !important;
-	color: #777;
-	font-style: italic !important;
-}
-.redactor_editor ul,
-.redactor_editor ol {
-	padding-left: 2em !important;
-}
-.redactor_editor ul ul,
-.redactor_editor ol ol,
-.redactor_editor ul ol,
-.redactor_editor ol ul {
-	margin: 2px !important;
-	padding: 0 !important;
-	padding-left: 2em !important;
-	border: none;
+.re-undo:before {
+  content: "\e602";
 }
-.redactor_editor dl dt { font-weight: bold; }
-.redactor_editor dd { margin-left: 1em;}
-
-.redactor_editor table {
-	border-collapse: collapse;
-	font-size: 1em !important;
-}
-.redactor_editor table td {
-	padding: 5px !important;
-	border: 1px solid #ddd;
-	vertical-align: top;
-}
-.redactor_editor table thead td {
-	border-bottom: 2px solid #000 !important;
-	font-weight: bold !important;
-}
-.redactor_editor code {
-	background-color: #d8d7d7 !important;
-}
-.redactor_editor pre {
-	overflow: auto;
-	padding: 1em !important;
-	border: 1px solid #ddd !important;
-	border-radius: 3px !important;
-	background: #f8f8f8 !important;
-	white-space: pre;
-	font-size: 90% !important;
+.re-underline:before {
+  content: "\e603";
 }
-.redactor_editor hr {
-  display: block;
-  height: 1px;
-  border: 0;
-  border-top: 1px solid #ccc;
+.re-textdirection:before {
+  content: "\e604";
 }
-.redactor_editor h1,
-.redactor_editor h2,
-.redactor_editor h3,
-.redactor_editor h4,
-.redactor_editor h5,
-.redactor_editor h6 {
-	margin-top: 0 !important;
-	margin-right: 0 !important;
-	margin-left: 0;
-	padding: 0 !important;
-	background: none;
-	color: #000;
-	font-weight: bold;
+.re-fontcolor:before {
+  content: "\e605";
 }
-
-.redactor_editor h1 {
-	margin-bottom: 10px;
-	font-size: 36px !important;
-	line-height: 40px !important;
-}
-.redactor_editor h2 {
-	margin-bottom: 10px;
-	font-size: 30px !important;
-	line-height: 38px !important;
-}
-.redactor_editor h3 {
-	margin-bottom: 10px;
-	font-size: 24px !important;
-	line-height: 30px;
-}
-.redactor_editor h4 {
-	margin-bottom: 10px;
-	font-size: 18px !important;
-	line-height: 24px !important;
-}
-.redactor_editor h5 {
-	margin-bottom: 10px;
-	font-size: 1em !important;
+.re-table:before {
+  content: "\e606";
 }
-
-.redactor_editor.redactor_editor_wym {
-	padding: 10px 7px 0 7px !important;
-	background: #f6f6f6 !important;
-}
-.redactor_editor_wym div,
-.redactor_editor_wym p,
-.redactor_editor_wym ul,
-.redactor_editor_wym ol,
-.redactor_editor_wym table,
-.redactor_editor_wym dl,
-.redactor_editor_wym pre,
-.redactor_editor_wym h1,
-.redactor_editor_wym h2,
-.redactor_editor_wym h3,
-.redactor_editor_wym h4,
-.redactor_editor_wym h5,
-.redactor_editor_wym h6,
-.redactor_editor_wym blockquote {
-	margin: 0 0 5px 0;
-	padding: 10px !important;
-	border: 1px solid #e4e4e4 !important;
-	background-color: #fff !important;
-}
-.redactor_editor_wym blockquote:before {
-	content: '';
-}
-.redactor_editor_wym div {
-	border: 1px dotted #aaa !important;
-}
-.redactor_editor_wym pre {
-	border: 2px dashed #e4e4e4 !important;
-	background-color: #f8f8f8 !important;
-}
-.redactor_editor_wym ul,
-.redactor_editor_wym ol {
-	padding-left: 2em !important;
-}
-.redactor_editor_wym ul li ul,
-.redactor_editor_wym ul li ol,
-.redactor_editor_wym ol li ol,
-.redactor_editor_wym ol li ul {
-	border: none !important;
+.re-redo:before {
+  content: "\e607";
+}
+.re-quote:before {
+  content: "\e608";
+}
+.re-outdent:before {
+  content: "\e609";
+}
+.re-orderedlist:before {
+  content: "\e60a";
+}
+.re-link:before {
+  content: "\e60b";
+}
+.re-horizontalrule:before {
+  content: "\e60c";
+}
+.re-italic:before {
+  content: "\e60d";
+}
+.re-indent:before {
+  content: "\e60e";
+}
+.re-image:before {
+  content: "\e60f";
+}
+.re-fullscreen:before {
+  content: "\e610";
+}
+.re-normalscreen:before {
+  content: "\e611";
+}
+.re-formatting:before {
+  content: "\e612";
+}
+.re-fontsize:before {
+  content: "\e613";
+}
+.re-fontfamily:before {
+  content: "\e614";
+}
+.re-deleted:before {
+  content: "\e615";
+}
+.re-html:before {
+  content: "\e616";
+}
+.re-clips:before {
+  content: "\e617";
+}
+.re-bold:before {
+  content: "\e618";
+}
+.re-backcolor:before {
+  content: "\e619";
+}
+.re-file:before {
+  content: "\e61a";
+}
+.re-alignright:before {
+  content: "\e61b";
+}
+.re-alignment:before,
+.re-alignleft:before {
+  content: "\e61c";
+}
+.re-alignjustify:before {
+  content: "\e61d";
+}
+.re-aligncenter:before {
+  content: "\e61e";
+}
+.re-gallery:before {
+  content: "\e61f";
 }
-
 /*
-	TOOLBAR
+	Toolbar tooltip
 */
-.redactor_toolbar {
-	position: relative;
-	top: 0;
-	left: 0;
-	margin: 0 !important;
-	padding: 0 !important;
-	padding-left: 2px !important;
-	border: 1px solid #ddd;
-	border-bottom-color: #b8b8b8;
-	background: #fafafa;
-	background: -moz-linear-gradient(top,  #fafafa 0%, #e5e5e5 94%, #d3d3d3 94%, #d3d3d3 100%);
-	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fafafa), color-stop(94%,#e5e5e5), color-stop(94%,#d3d3d3), color-stop(100%,#d3d3d3));
-	background: -webkit-linear-gradient(top,  #fafafa 0%,#e5e5e5 94%,#d3d3d3 94%,#d3d3d3 100%);
-	background: -o-linear-gradient(top,  #fafafa 0%,#e5e5e5 94%,#d3d3d3 94%,#d3d3d3 100%);
-	background: -ms-linear-gradient(top,  #fafafa 0%,#e5e5e5 94%,#d3d3d3 94%,#d3d3d3 100%);
-	background: linear-gradient(to bottom,  #fafafa 0%,#e5e5e5 94%,#d3d3d3 94%,#d3d3d3 100%);
-	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fafafa', endColorstr='#d3d3d3',GradientType=0 );
-
-	list-style: none !important;
-	font-size: 0;
-	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif !important;
-	line-height: 0 !important;
-
+.redactor-toolbar-tooltip {
+  position: absolute;
+  z-index: 1054;
+  text-align: center;
+  top: 0;
+  left: 0;
+  background: #000;
+  color: #fff;
+  padding: 5px 8px;
+  line-height: 1;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+  font-size: 12px;
+  border-radius: 2px;
 }
-.redactor_toolbar:after {
-	display: block;
-	visibility: hidden;
-	clear: both;
-	height: 0;
-	content: ".";
-}
-.redactor_box .redactor_toolbar {
-	border: none;
-	border-bottom: 1px solid #b8b8b8;
-}
-.redactor_toolbar.toolbar_fixed_box {
-	border: 1px solid #ddd;
-	border-bottom-color: #b8b8b8;
-}
-body .redactor_air .redactor_toolbar {
-	padding-right: 2px !important;
-}
-.redactor_toolbar li {
-	float: left !important;
-	margin: 0 !important;
-	padding: 1px 0 3px 1px;
-	outline: none;
-	list-style: none !important;
-}
-.redactor_toolbar li.redactor_separator {
-	float: left;
-	margin: 0 2px 0 3px !important;
-	padding: 0;
-	height: 29px;
-	border-right: 1px solid #f4f4f4;
-	border-left: 1px solid #d8d8d8;
-}
-.redactor_toolbar li a {
-	display: block;
-	width: 25px;
-	height: 25px;
-	outline: none;
-	border: 1px solid transparent;
-	text-decoration: none;
-	font-size: 0;
-	line-height: 0;
-	cursor: pointer;
-	zoom: 1;
-	*border: 1px solid #eee;
-}
-.redactor_toolbar li.redactor_btn_right {
-	float: none;
-	float: right !important;
-}
-.redactor_toolbar li a {
-	display: block;
-	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4QAAAAZCAYAAABpXuA7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQTAzNkE5MzBENTdFMTExODJDNjhBMUI3REEyODQzMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QjA3Mzk4NEJBMkExMUUyODgwRjgyOEZCRDVFNjYzMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QjA3Mzk4M0JBMkExMUUyODgwRjgyOEZCRDVFNjYzMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDU4MDExNzQwNzIwNjgxMTgyMkE5Q0VDNTNDRTc5RkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkEwMzZBOTMwRDU3RTExMTgyQzY4QTFCN0RBMjg0MzAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5gGig/AAAgiklEQVR42uxdCXgNV/ufbDe73EgiEaGxpwQh8dlqbdNEqZZawoOKSj5qr1raog2lEX/VlsiHKoKi1BZf8QUJSqkigtIiiZBIRZKbTfbk/74378S4zXJn7twrbc/vec5zZ+bOzLnnzHmX33veOdeooqKCY2BgYGBgYGBgYGBgYPjnwZh1AQMDAwMDAwMDAwMDAyOEDAwMDAwMDAwMDAwMDIwQMjAwMDAwMDAwMDAwMPzdYcq6gIHhnwkjIyNtTnOHYg3lEZR0PMDeO2ZgYGCQDMvg4OB1KpVqgpiLlErlNxs2bJgGmwWsCxkYGOQGmyFkYGCoSTeEQbkE5WcoN6C4sW5hYGD4p+vG9evXtx85ciRGxpQSrm8slgwi4JqJeC3rfr1CWcNztXJ3d9+Kn6yLGP6uqG8zhKZTp071VSgUJrhTXFxcFh4eHg2bpexRMdQDWEyZMiU0IyNjptQbODg4fBkREbEANgtrO+/GjRumkZGRnfLz8/sXFBS8VFpa2hLkAQmZUXl5uQ2dVm5sbPwEPkvMzc3vmpmZJVhYWPxibW0d/cYbb/zao0ePMok/E2cEt5NRdCb5C4ASBcUHSll96qvnCMWMGTNmp6WlhUJf+8yePfsKPhOpNwsLC5M09Tpv3jwjJpoMzJEfmaV58LvvvrNHLiVnHRMmTOh94sSJM3gA9yXU4Sz4fXFaXIv1egmuTWCPW+9jyB1KnJDE37t3bzx8LoFyl3UVAyOE+oNlUFBQeF5e3siysjJrje8wIpam4/1tQYn/9OTJk/bVfdm0adMVq1at+hg2i2Rsk93o0aOToT0NqqyAs/N/1qxZ8x7HUj7+qnDRheAg6PovoCTVJpeHDh3yT0xMPASErxzIXqFCoShTKpUlsI+pQ6lAEI2hmMCYVlRUVBiD7LQvLCzskJubO/LRo0fGJ0+eHAIk5aiEYAqSzsNc5czgSCi9ocRA2QNlJ8oqlLx61FfPEw1BvtFJwOj9u/AxU8u+EQU/Pz/uhRde4DZs2MAkkEEnmxQQEJBcXl7eoKYTQL/k7Nq1qxlsZkusw2zx4sUTb9269R/+gJWV1Y0tW7a8Cjb4f7wNDgwMbDlw4MBE2JQr/7xhaGjokgULFizWOK7p2OsCvBcHbTkjPCiBFJoLtnHWKQnusb+6E+G+Q6ler2qurS9QzJs3b3ZSUlKor6+vD/hyOgXG6kNAAbavaAQVGtFuI0YIGRgh1ICRkdF8dBrBGT2u428wAUfHLzs7O1BDER4AoXyTHFSdCSEo8eVg6Gbs27evW9euXZPnzp174PDhw96RkZG97t+/Pz8sLCwNlFo4nFsil/HduXPnB2D4Vufn5ytmz569Gxx0VPoWEghhlbKCfmkO24naXqiloTKfNm3aR+np6Qt2797diDdyMtfxJ6UrBiINrr7qcRGcF8eJiwoLo7wudZCcBsnJyctQzOCaGzBuEuzs7ArAsSpGggdOFTpZJSS/OJtuAvJjDqTE6sKFC8337t3rmZqaGgLHz0HJFPEbcfbvIJTPqWCQpAsRwkFQHqDx15Y819BXFiBz7uPHj8f2F1azL7avnheMgbR3sbS0VDvXQML90SnVByFs27YtZ2FhoSaF9+7dk9Xx0aMMalWXDjM4+m6HIfvJUGjcrFmzpBEjRlwHG5i6Zs0a/zNnznjC2CoBGVwL3xeDXcRx3FgHQqhYsmTJ1fj4+I2ffvppkI+PTxLYVUw9bww2OHT16tVzwRZiZANT0o1kJIRG1ZBB9XOUkzRUd3DlypVfkuxLeeaoG5NgzATyhFOAJPpeVc/lvGFpaaneA2Patlmi/CnhuhC4/mPqgy3wcY+egVJAxOsjITckzOfMmROCPnM1gZ1nvlMqlUfAtx8Bm/ky1oGwmThx4rG8vLye1tbWv4IuG/vuu+9eFRmEqKsO6+Dg4D0wngeamJjkeHt7v/X++++jHyQ168pk2bJlfRISEua4urp+s3Tp0kNcZbDeGHSi582bN+dBW67A9hrUw/WaEAL5awHEL0Gw/wp8hEJpqfmdBNgkJiYGV3OcF2gbGdqZCyWVDBBGQdGJvj148OCC/fv3d8/NzTUBB7s7HIsU6UDXhvzo6OiWSAabNGlSDE49Rpzuc9LS34SGop+Ea+uKkFr5+fnlbdu2zQy2X+D7SeY6uGoMnj7q0Gc9FoLtrXSeFThRC8gxQJl4UsO1XtzTKK9FHb/BGUhfK9zo37//aXt7+xOw+ZirnMG2BOW3ddSoUYtBgV2nZ2UKhNEKiiOM45eREML1bbjKaKa243k4lAgo+J4K1reHHMPBUHAhg4+g9BJxv+r6Sk3w0tLSJsDnFgr0aO6L7SvjVatWtbl+/foaaHN/0EcloI9QvsudnJxWhoSELD9//rxlVFTUZ5mZmUHwfSmUMjjHyNbW9mD79u0XgIOaJMExRfI9ZPLkyTFQ/6iMjAzXo0ePdvH393/AyRgd79Sp09OB6e4uByE0lAxqW5fYexqqHYbsJ0OhNCws7HMiYzjeB5I9Rx2CNjwNdFgcp9srGujMPC4vLy8iW4s+Bi5G9RCKQ3FxcQHZwUwZySASgTvPo0OBVJ90dnY+rwOBVgN+/+YayFnzei7nxrGxsT6gW1viTkpKit4CY9oSYImkEM+NE0xEXBWQ8ar79OnTJzw5OVk1bNiwqZ9//nm8CF2v76D+nwgP2LWPwS6NLywsbIIHZMqEs4B7nAZyNBH6walNmzbNiTiX0XfHrl275gSEZ6KLiwv6D04SCGFtdZgvWbIkFMmg2snOz2939+5dDMi8LlIGa6tDsWjRolnQhr3ATfLhOQ9/9OgRBtgxa0pKkMV83rx5S0E2pgwaNGj9mDFjfodj6GsbQVuCwHcJ9/X1XR8UFBRLAYf6RwjBRuAgDKaCxsJX8DUe24NEEM6LRlII+xj12wDHxHaYTdu2bfPgoWoevydjO5EQJoBgqIWqpKQESdnFr7/+uiOSQWDsRQEBAbhwhomMdZZfvXrVAzc6d+6Mwo+zNbelGltQCl9obHtpGX3UBmWvv/56ChBCPgqarYc6xP52yXUYqB4892cgZ989fvwY0yo52M5Zt27dyFpIobawA8eJJ0LniKA9IePTDoiP+/bt28PPnTs3FZTWLhpTOHatFQD4nAxjHV9+t9OyvoUk06+QwsM6L0MZA2U5kUIMmKRIaQz0iXt8fPwL6HjaAIC0qoBEvwJKPU9zH/RHRceOHcUEJGzu3LmzHt+z9PDwuNesWbOMnJwcqwcPHijBWAx3cHDYAPd3BgfVHwhVqpubm8rS0rIQ9I1zQkLCSLjWFu4xinSEGDSAZ2TXqlWr81D6geFteunSpeFACI/L6QyBUeWAeHJ9+/ZVzxSeOnVK53saSga1qCuuPrfDkP1kICApO0YOoSPoCHUgtqJy2WD83Ri0tNJRf2Hmwh8gyg/VDLS0FOtKpoCsDdhbtMG3ZAy8qm2WcHYHERERkTplyhRXfXfo9OnTB0DdUyQ6isKxVtMMYX2Xc6uLFy8OBf/pxjfffNMlNTXV9dChQ/2HDBmynXfgZSAmdd3jT7OhEkghnhdL/XaKtoV9kXv27Nmvs7OzrYEcJLz99tt5FFjRlhAKn20/AwSYGoEdnAT99GTZsmUREyZMmIizYZGRkRfGjx9/iJM+04W+c4mpqak6U8jc3Bz72Ejw3cOysjL1pAfYXbSt1jLXoYT9ZvCMdsC4671y5cpmYNtbE/HMlqkOc/CrMCDuHh0drc6Y8/HxwaBWAwlybhYWFjYlKSlp7ocffhjh5eX1ExzLwXED/MMfyWBgYOCegQMHnqYxKIasK4YNGzYjMzNzALRD1adPn5UwNpW3bt0Kwi/Bj9oEetj+999/n4i+F7iGCceOHVsAY8EXfs8k9cByd/96y5Yt/Gxl9YQQrl0PHyNodw+RPf67FvQdTxAXkDOJU6/z4Xskiv8WY0CgM34+efLkMBB2E84AuHz5cktQGBjV48CZywPhPu3o6BgnIZJRGxqCs9mT6rhMBlFq5FUFv3cWKav+NUUTq0E/OP9LLc7Ddt+GcyeRUFXVJ2MdvIHD2aJT+M4EGkEt2yKmjqr+ovcvVGQw9stcjxWRwUH8AdzGY0QKMQ1hC35u3rx5glglAkpOrZwaNGjwmJ4Pb3gaUlDD9rfffoucNm3aS2vXrp1JCi4X+JX6ryFAKaOx0ia9E2Ud00L/BQWjvPjeIaZ44WwhGnUXIoMYudqIzRI7eKFPfuUqVynFqJgSDNSEkJCQXfyz0dhHh7J9bGystrdvDAqxd8uWLTPhHpjSkQpE0C4mJqZTWlpa7mefffaOiYmJolu3breALJoOGDAgDvZxlqIZOIxvqVSqAVzlQg1iCKEJPNO+9+7dC4BxFcAfBJL5Gnw4yEUIlUolpmBx8JzVhBD3kRTivg4QI9ucQIZUWjqoYlLV0DGaJTESzuuSgyLkW4yMi+onHXSVIZEvsHH2dXxf34Erfb544sSJ6zSLVjW7A5/4DvQ1+Mzg5E3dVWmQLHTsTpNd1ykrQA8zhPqW86rgJRAPN39//9PgbHqmpKQobt68+RYQwgPkS8hBTOq6BwYEZsPnG9BmlL9YXi9w4mcJY2u47n7Pnj2/Jfv7mHS8qGeu56D+n8jCpk2bloD9aAXEozdlxaE/ge/w/k8HOUfCkgn+ifq5bd26debVq1f3CNbHSAESkqKjnNVWR9j8+fNX43Po2rVrEvg78z09PTGzyFLGOpDTqBYtWjQebG0fqKPU2to6X6KMNwTyNROI4G0ov3CVs4wYLLMBovaBg4NDNvCfs3QcMye0nR00HzNmzDKQi6GLFy/eDnJXZmZm1mXv3r1fLFy4ENP/uU8//fTA4MGDDxYXFzu/8847xyMiIvq+8cYbUa1bt8YJPme4/vtXX331JvllNRNCIng82dOc9UPid5x/dxA+LwEJxPOwklC6VgwhzIGH8DMI9zegUF7/9ttvnQsKCvS6at5LL72UOWPGjKMbNmzoc/z4cTd48K95e3vHwUA7K5exOnfunBc4qkocTKBIonWMiCpriDSJvbYm2IIivYAbQUFB3Xx9fe31UAevcJOEL2zroY6qc4l02ovsM23rcRWSQSEpnD59+j61d5Wf70eEyApI4jox44ffQIUFBEaYWvVM0MTFxcWNnDtUMhWlpaVqpQUGoIKr+29lfEhecVYA24K/cSwUVFwnSEHhrKEnGdgQieM3g+6Fv8cFFBSS1zQqmvvlnOD9Qy3gQIYOxxY6IXe2bds27uTJk33o+0GCYFZFVlYWOo1oEDvCNQNBoSrpHmJSzqwTExNfDg8PD3NycsK+awrP+DV49vY7d+4cMHr06EgdIrBV4MkfkkJMFcV3CD08PHQlhGLfqUri5E8TlSMSrhKc66WHPlAaoI8lv+clgUTXWFdhYaEZfHdG4n3FoMLc3BwDL7qkila30mciT5zgE1P9sMRTPZlS66iBnPFBCOE41Hm2Uw8zhPqWc7X/CGbNz9XVFTOf4sGv+n337t2eoBt7k07NlomY1HWPqtk9CjIdpH0p41dVw3Vow34m5xl1e4FIgqDvoL4mMo8cOVIEBGEMyjbYPvW7B+AfuFKgWJbAz1tvvZUBZCQHng2+Q7qC+klWaNTxJY3Tiri4ODsLC4uCYcOGRVFwRs52ZC9duvR7QCcc01CGDho06CMJt3YBv8Ad+j9v3Lhxa6D/S+l9xBTwPV4sKiqyAp97UXZ29hcdO3YcBWRuH6fdxBHK10v+/v63BwwYgCmojz7++ONJ3bt3T4TnjfLIxcTE3G/cuHFT4CEWvXv3fmBqavoz8J4gOB/7riVwrbfs7e3/B8S6qr6aCCHOFIwg8hcKjVkBxG8BzQ6iA+krcLJC6bwsIpB7JDD1a6ho/fz80kHwP9R3aLGkpASF+XJwcPAjcLSCbt++bQ0lmBziFBmqUKdR4EaHDh3SSdnm6nJDPUeXHCZPnvz5rVu3OsAg2QGEcJKeIliahlapZT1iDZVSEHnF1JH+eqinUU1f/PHHH36aJJHIivaW1tS0AsapEQizubOz858ZvK1txaRJk6736NHj4DNWAM5Xs8ZnSWRNwJnFKWTc9hDxQ2KJwYG9UD4kPYBygWkI+6WMXXAaesfHx78kSBnl5s6dO0mQMlq1LyFl1AzfB4R2o6HGvPPksWPHxlpaWvaEYy3AWcmFfjSGZ2Lt5uZ2DcbDRZJHG1D+uEKrEaf9Qjlqrr19+/bOcD8fIINLyHloAXLeARRwix9//PF9IIQH5XAS8f1BnBkUAkkhLjADTryuukRv0ennkWqpjzYZoB3KGoiAGCde21kQzbrsN2zYMPT48eNNQf7KtwAoaCP2vtUSP6VSWa29A8fHRUexUP/+alb65ElhXC1OvbaoacVSJaenlGA9zBAaYhbKDsjfRPCheoHuE9og5caNG8eBo7tcJmJS1z2yqA1KQXvEtsn4vffe67hv375wIJxGbdq0+ebo0aNI/vlFBpEEmglSUcVme+k7qC+EUWxsrNOOHTtWgx9gAn51EhCaCvILTDkZX40C+5ptZ2eHPo5VQkJC6xYtWmTKLRsadTSFOjAiaoMrsY8aNWoXkBqcpX8scztwcigRiOJ3+GrI/v37mx4+fLj/4MGDxQZ71YvOpaenV62FQu8jfoLPIj8/34zIHZeamopcCgUpXYv72oD/UQ4+DF6Pa0nkubu7Z125cqUquA33U4IvlVNWVoZj9Xfw79s3b948H/R9A3BXMocOHRoNZPCxsD3VEkJaJAZZ8goQPiRK/IyR+n1CjZVFURj/DcekroleQfe4yMm7IlhthBC9KcwTdwCMREKoUCjQkXaSiRDaw8PopmbWLVvi4H3E6faivr6jS3ndunW7EhUVNXTz5s3o5JbqKWVU810PbNdqPUbJsL9CyODOkrkehcif0kjEueW4oig4TxY5OTmWQAiNBUJbBvuqWbNmXYWx9R3sn+Ge5rUb4/nqiETliqR1RTALSP7MaB9JoQXJPsrzUijjoPSnoI0k6DlltAxI0qP79++7TZ069WvQQ3eALCtBCTaHYjl79uxdQN5s4P5jQBG3uXjx4nxQwuisdszKymoAhl9sKrf9Dz/88F9wRqwDAwNXgLx0X7lyZQ+4bwtS/O3mzJnz1apVq4I4Hf5eBmcH8d3Bq1evqveRBAYHB6s/kSjid7rqklpkRmr6GE8mtE7l1LEuKXXWp5RRfpZTarvFEB/NuhoXFRW9TPYe9cQVcizE3rdaE+vp6ZkAzocKnBC3AwcOdHnzzTeTQAZngL1FB0SXDKDaVvpEPanrf/QZg3y7AuHU94qlmnIg9wyhvuXcCHSTe5MmTZ5A368mO9Js8eLFr8MzN09OTh4C+xGgx5U6EhNDkRtzGJu9wMluunDhwmMwXvH1iCMa/qC7IMgsegbdgCmjSDR6A5GxBpRcv37dIS8vT+3rgz9vrKP8PWt8y8rSygHqyKyZmQ1Xd1aSHHUovvjiizcbNWqU3rdv36OhoaHtcnNzi8CPOMdJzMyppg6cqFKnU0I9PaAfnYEM/kHjTUwdFUC+Hl+7ds2RPwD+CY4d+/bt26fB2G7FHwefzYb8RG0IYfGkSZMOT58+fc7AgQM3gyxkDR8+/C76MyNGjFheUFBgg/fHE4HgNhs7duzSmzdven7yySdnUlJSlL/++qsj9Jn/pk2bzLdu3foh76vUucooT/QEi8ws0Ph+hUzPvZgz7PsLpevXr/8X/6D69et3WyZBMT516pQXOKFNcQceyk+cji+cGyC6VDRz5swPYYA0nzJlyvyIiIj39BTB0lzJS6mHOoQK+ACnw+xiXW0RqdTFLNRQDEpIhdF0cKYGl5SU3AGilwpEMAsITsby5csXg1JB5YQK8I/PPvvMuLCw0Alk1B2UCq62xTk6OmZzdeejY5pFTyJ/LhSpQjlHFoJONb4v4a1r9I17NmW0Efx2lLVUCpRo7otNGc2cOHHioW3btg27c+dOD9jv8fjxY0wnyvP19Y0GRX/EEuDj49M2JiamFzjBVQoYiNWjgICAgyLl0/bbb7/FjAhcxRXfDbafO3cukvL/g/IiV/nXHD9w0v5epor8devWDcdv1TGcEcS0USSKSAiRKEqcJdRmfCdx0mcNxKZy6lKX1DrrS8qoijPcIjSadbVUqVQlZMP5RWV+lCvmio70tGnT9q1Zs2YoyEskFm9v76j58+dv4nRfdOsZyLXSJx/w0Zx9NAT0MEOobzm3AWcyrE+fPjcFQcnmXl5e7YAQtvvtt9+6gE4eBXaoSEdiYihyo2jcuLHTgwcPGq1du3ZYSEjIMbJ/+dWlD0tZtMaAKaPGgwYNevjjjz/m3L17t0F8fHzrXr16pZ89e9YpLi6uK5BdhYxDt4T0Bz4PJEvG4EfiYjLckydPzGV6PlV14KrFFy5caA32byWMC+eTJ0++CwQub8eOHd4SyFq1dSgUCvvRo0dn2tvb/7Bu3bpFQKhKOnbsiAth5Um4f8aECRMO7dq1a8zFixctPDw8isaNG4cTahm4Wjxw0LmnT59u0KRJk1LwY05w2qchZwLRPAeEsgCeqxu4OMldunRBAngJZAQntow9PT3Rv1OA3m0NTStr0aLFEScnJzzHFI55gUypwM/E32LO+ypG1Ad1h2kqCaG3DP87WOvgB0GJIaFRzySh8HBP88OlwhbY9C/gVLfR/MLFxaXglVdeSRsyZAj+/8de7mnajKQoEy4viysKCQ/OmTOnAzh4Nzjp706gk/M2baOz3kkEEdmqhdLH5YHxXTHMyb9GDryfzHUIDVU/IrYqLdsitg4vqiOJxo479Z+u9VSNTx2jwXWNaQ8Q8pCvvvpqJMhduYmJST58FkDJNTU1LcI/qgc5LAByYwOfpqBUbOHTAj4toVjjH9WDstnft2/fjyjKVZNMYy4qBizwncEAUkYYIMHZc0yZmMpV87+cWuoMQ/UV6iWcjcfz3PiAH43hn8jJNaPvu3KVKRwmJIu4+m8MtV8bZ1Lrd77gd6NMifr/1LCwMHXHzpgxQ00KEZGRkVxaWpo6dRRJohAwPtSkEHSOkQRd4iWTrNWXuuSu00tLnWGINskN28DAwEvgULUWHgQH49VFixad5GR4/5XkEgM0+Fc1liSPCdzTWUqps+fV6hWQt7ZcZaqUrn/5gjP9uNjZQv4Av2KpTL6Ipp/Tn/qjH1f9DKHafmmcH/ucZc965syZUQ8fPsTfwr344otrgEB9FB4ePu3UqVPLhSeOHTt28/nz54fjas5ARM6lp6e3RmLSrl27+E8++QQX4aorIwud1Zc/+OCDnUhuarhHfg3vfIohbPaga98HEjsZnOVssLE3oU2zKajKP5sXoJ4JvH/KVf5VUpK2eolfO0HEYnp8OzqLfE5o3zpwla97OJKdc6SA7zkKWErNhDNfsWJF+KVLl97BnbZt294H8q+e/GjVqtUvYLd+BkLyLn8ykTU3kcGaGuuA7ct5eXmKlJQUT/5kR0dHXN39VbLjZbrWAXrwZkFBgQWMWXUwBtcAmTVr1k7yi8RmICjJP/Ej3YIrLv+X/HgcU7iCuycFw49SHdq8h2lM925GuhbJKqbrmtJx9Aly6Tx89gp6BunkDzUmHwgD2Kl8kE5rQmggaBIfXnHpalxdSaj7UEfk0QNQUAei04yGENM7dfmPFlzmH4V3AAmkEQngAR2NlVJgLFS0r00EkE8FqUsp2pAzzb83kkeDSM46NNujrGZbrjqUgraoBP2naz3dN27cuDk6OtpD6gDx9fW9FRQUhOlB52s5DRX3K4mJiaOuXbvWHBSVDRhB66ysLJvi4mKz0tJSEywKhaIEF4+xtrYutLGxKXB2ds4FxZbv4eHxwN3dfTeQR4xyPq6FEHIkAxi19xEYYJztqnERHC11hqH6yphInitFdE1JznKJkGXQORg1QwJsTXJZTN895LRfMc5L2wWRJBjxKkIoFiIJYV2yIEWe60Ndcteprc4wRJvkhivZqH6k9/NJxo6SDZTjf7CMyR42IYdF/XcUJJMFOtxXk+jwK33u53RPFxUGLN/GLBaafbxIjtQJmYi+5GCZCEKoT9lzoj7qSWMnhnyoluTgdiTHHBf2wQA7BuKtJBITbcgNOrhvCl8/oVVHD4ggbDgz/F5UVFTg999/H+Xj4/NaQEDAHPoz8qbUj6j/V1Pm0VZO3MI1+g7q/ynoQ7JtTc8I7aIF/d5UTno2nh0FeYZQHWk0HoxIh2RQ2zyIZKBsHiEiJEcd8XROJ/LlcZyhfOIKsDdkqiOJgli2pLNuUb0JnPjsBt4/aUx15tGYz6Y6XGksF9DxLJEBORPy4cq5p8F7PvOzlNpjLvB5Suk3aR6rqI+EUJP4cJzu7zMIhcORezbnvJwE4xGVIh3rwU52ocIvg4sP/h496HrV2QyigWMTU137ctJSylQUAarLUJkSefEkY+pMTpUNGT8j7mkqRhn3NN06ixQYLq5ynchOaR2EsIrA0VjFdv1UWyO01BmG6qvnEbCSe0abgcGQqM4e5pLznsHJMEMIjnNFHcRGaipZdURHbhLOk0JvcjIvkx7NlKmO7hEREZExMTGtxVyEqwlOnjz57ToCZIaANTmyTjRW0qhv+MAc/99z+UTYLchuSSUmdZEbMyGJl0jYsA7vK1eudO/cufP95ORks6ysrMROnTqdF/iFmplHKgnjlh+vcgf1DQWhj2tGJMSMexqELaVxYMk9XR/kHidyhrCWOgrI97HingZ/M4lw5uihjlKZAll/CdQ3QsjAUJ9hIVAiFhKuF/69Ql0vgBlTHbakYK1IiQlfpK8gg1xKRusJKeU8un/ZP6SvDB2wkntGm4GBoX4BZbwhObJZnO6pqEJgKhofLLPT8hr8HXyALJE9nhpJPJK2OAmEzZQCJDZEDkyJAKRzT2deNDOPGBgYIXxe2LNnT9WPHTFihBF7fAwMfz8YSs6ZPmFgYHgOwAAZppA5c9oHyzAohjMVDzk9Bsj+4jpRV8JmTEXoFJdzNWR2GaKv/i51MDBCqDeFxQYtA8PfnxQaQs6ZPmFgYGBgOrG+9tXfpQ4GRggZGBgYGBgYGBgYGBgY6imMWRcwMDAwMDAwMDAwMDAwQsjAwMDAwMDAwMDAwMDwD8L/CzAAUxE84n7mIpAAAAAASUVORK5CYII=);
-	background-position: 0;
-	background-repeat: no-repeat;
-	text-indent: -9999px;
-}
-@media
-only screen and (-webkit-min-device-pixel-ratio: 2),
-only screen and (   min--moz-device-pixel-ratio: 2),
-only screen and (     -o-min-device-pixel-ratio: 2/1),
-only screen and (        min-device-pixel-ratio: 2),
-only screen and (                min-resolution: 192dpi),
-only screen and (                min-resolution: 2dppx) {
-
-	.redactor_toolbar li a {
-		background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAAyCAYAAABI1Y/DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQTAzNkE5MzBENTdFMTExODJDNjhBMUI3REEyODQzMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QjA3Mzk4OEJBMkExMUUyODgwRjgyOEZCRDVFNjYzMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QjA3Mzk4N0JBMkExMUUyODgwRjgyOEZCRDVFNjYzMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDU4MDExNzQwNzIwNjgxMTgyMkE5Q0VDNTNDRTc5RkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkEwMzZBOTMwRDU3RTExMTgyQzY4QTFCN0RBMjg0MzAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4THQZVAABJsklEQVR42uydB1RUx9fAH703BSsqRCD2oBIRe+9GbFERjZHYe+yFGI0xlvipMSa2WDB/YxJjsMdgQawIioqgdASR3nv/7l1mybJSdcvb5f7OeWd335vdnXlvyi0zd1RKS0s5giAIgiAIgiAIgiAIgiAIgiAIgiDqByrkICQIgiAIgiAIgiAIgiAIgiAIgiCI+gM5CAmCIAiCIAiCIAiCIAiCIAiCIAiiHkEOQoIgCIIgCIIgCIIgCIIgCIIgCIKoR5CDkCAIgiAIgiAIgiAIgiAIgiAIgiDqEeQgJAiCIAiCIAiCIAiCIAiCIAiCIIh6BDkICYIgCIIgCIIgCIIgCIIgCIIgCKIeQQ5CgiAIgiAIgiAIgiAIgiAIgiAIgqhHkIOQIAiCIAiCIAiCIAiCIAiCIAiCIOoR5CAkCIIgCIIgCIIgCIIgCIIgCIIgiHoEOQgJgiAIgiAIgiAIgiAIgiAIgiAIoh5BDkKCIAiCIAiCIAiCIAiCIAiCIAiCqEeQg5AgCIIgCIIgCIIgCIKolk8//fS9vv/HH38Yw2+ksvcm8JJGd5UgCIIgCEJ+kIOQIAiCIAiCIAiCIAhCylTnYBN1ntWEvJxr7+MgrKx8MiiHrouLy+nMzMzR0voDAwMD919++WUqvM2hGk7UM9SnTp067tSpU7+7urrabd682Q/OldBtIQiCULDOnG4BQRAEQdQ/Onfu/M7f9fPzU584cWL/1NTUyUVFRZaFhYXmeXl5LbW0tEJsbW2/+Omnn3whWbGUsq61ePHi5XFxcd/K8/41adJkzQ8//LAb3hZQbSIIgiAIQgJY1DHtE74VQHyFILxPEz8vCp6TspOwuTSdgwj8viO8NIMjlKowoQQY16Fd6vTu3dvq1KlTXK9evazgsz/pRgRBEIoHOQgJgiAIaaBsThy19evXD3j9+vU3+fn57UtKSvSlmW9VVdUsLS2tgGbNmn393XffXYNTRXx5sGvXrtWfPHny/LCwsK0qgI6OTp62tnYxvBalpKR0iIqK2ubu7j7V0dExFpJLI0xBI3nXKwTysA1eTsERTc1d+dixY4dMQ2ysWrVKhe46QRAE8ccff+yBF1v2EQ31tlUkNeZpESzE3j+pxcpIQTop5cdMRuVuxJGDkFB8RNtqbdqlupGRUQN8Y2BggA5FNbqFBEHIAdWdO3e2j4iImKuiopKyf//+LXAuX4LplR5yEFaO1rx58zZmZ2c75uXlta1W2jQz2w4VaWN9r0gEQRDiSrISOXE01qxZMxeEhz2lpaWqssg3OiBzc3Ptw8LCrsB/L962bdsBOF0oz3vp5+en8t133zU+derUplevXs0GZTB38uTJUba2trGWlpZZxcXFhl9//XV7Hx+ffmfPnl3Vvn379dbW1tlSyEpTHtXzphw5CN9L3po/f/7XKSkp88eOHWs7adKkSE46TmWCIAiCUARwHDwBxzmuzFD/twKWQdRxaVyTcxCuH5dyfjTF/g8dHpJYrSjuvNWk6ksoOOJt1ZhuCUEQCoDuwoULjyUkJHzas2fP/y1ZsgTlKG2uaj9NXdPXC8hBWBGVkydPtrx27do/ubm5baoQYI/Onj17Ulpamh5+3r9//z0eViTDadOmBeTn55vX9gumpqb/amho+O7du3czTxuF2u7duwfcv3//32oTqall/Pbbby3hbTpVZ4KQK0rjxElNTW0SHR39raycg+Lgf0dERJy3tLR8Ja8b6Ofnp7pixQqbgICAPXFxcUNbtGiRAYKU/8CBA3F140u8TTiUuLi4jAsPDx8eGBg4/59//vnb2tr6Nif5fSh0xcbl6gw9mv/++2/TIUOG4GrGmlaRaty9e9cMhMRErmpnrLgxSJea+nvRKCcn54uSkhLDkJCQBfDZFY5cui0EQRDvRa33satSmTQ0PH3kyBEXTj57qtUq/506dZq0YcOGs6gCLl++fBPIS6vF01hYWKzZsWOHwoQDZ+E4n9RlL0JFrotQTneuzBkaKcM8oSFQEqsVbbn/VnoSta/jldUDrWXLln0dGxs77/Tp060gTXo1dYZuoozaKny+WcUzkMv+pwRBEGKogYzXLzAw8KSmpqaWq6vrLx07drzJ+qc8CaSvV5CDsCIGXl5eZ6tyDjKKVFVVRZfNq/CwIhmePHlyBQqsmzZt+jwgIKCx8EL79u3jN27ceBKVpBs3btjduXPH9vnz542SkpKGwLkhLi4u47t27Tpl/vz5Tzl+bS6sBkJjHByLLl68ONnNza2nmPKXOmPGjKvt2rX7Bz4acbJ1EFaq+DDBiZOWcicNwYwJ7F3h8IDfbyBJQ4MMyyEXhZrK8RZ1ceJIo01Kyomj/s8//wwqLCw0wA9NmjQpXrRoUYS1tTU6nKS1x57qmzdvGm3bts06Li5ODf/7wYMHAy0tLd04OYQa9fPzU1uyZIkDjBU/paSkgAzVMXnlypV34BVntT+AI46Ng4b29vbF3bt373Tp0iUrdCTCOR9O+sbF6gw9JtHR0cPgFceGmtqTYWRkZO+ePXuiUzOjijRkDJKgDHrw4MHxOTk5pvghPj4e9wf6P44chDSGyLB8ipZfkk2IWmIhfDN06FBf0O9wMg9OADWYPXv2HOFEV7HrhSEhIeZHjhwZERER0RjAiaYNOTk5COGZz0xPT//422+/nQxjs4nwgp6eXuHmzZt/a9GihTd8DIFDAw7NXbt2XYbXFPjexDNnzthNmDDBF+rq73DuLhxanALtiaVEzkGuuhWQzDmIMpynjNv3E8iX53s8HxrPJU+jzMxMnDBmBG15Hfy3K5SZ9rGT07hRy7R82f9UaWxxyqjrbdmyZdyzZ89+r1B52MSdurRxuN86Cxcu3JWdnd3p2LFjqNtnKUIZIN+aq1atWhoXF7c4Ly+vOZ4zMzP73crKauuyZcuec7Kzub9vOXASx0aQHx3hGQiiLGpra8eYm5tv2rp163FOPpGu1H766achUKY/1QFXV9dTIBuis+8hHFHc2wuf6pq+/jVYCQh9tW3QKpcuXbL49ddfn2AYMlNT09PwcOQ1K7HSe7F3714nUES61JAuHAQXUaNwOg8rEho2A1Bh6tChQ6Kog1BNTQ2fOa72iB0wYAAeifv37//k1q1bAuM3CGYfBgYG/gJvB/BswMN7Ho/l6t27t5+4g9DJyellu3btvFi5Zb160EICQta7/q+kBbPZcGBIRhMZlkXS5bCQUx2lclTPCU52ioQknTiaQDPhBx0dnWxra2sM9ynNDdjVmzVr1h7+C1d0G7JM4CpINHDJ1EHo5+en7uLi8klISMheGB/M+/bt+2bFihUeIAyiUefRlClTPkxMTBzk7OzsNmPGjBS8LyBovtDQ0LBMSkqyg896MhjnqzT0gOzR6PXr11bw9i6kSahBTmkQGRmJzqo7kDZF2kah2spPUjT8yHtcN3r58uVU4Yf4+HibkydPDpw2bdopTnrOd6lib28vOA4dOsSBEqhIhh5FGEOkVT5Fyy/JJkRtEISFGzt2bAyM0/8y4wfqR23FJrpypQAO93CkgHxjvn37dpUvv/xyora2NuqGOnLKP+qgT42MjNQdHBz6izoIIY85LVq0wImsj1Gf5cqMUmhgwygL2jC2NkYHIbyiXojpXiuS0acW4Tgj4bqFoldQOToH63S/K0kvD6eAUve7cE81QG76PCMjQzhhzBFecNVvXH3qs4X1UJ6OJwz3C/mYIfK5sgm+fBuLLeTUbkguqRmNDRs2hEVERPzf6tWrvxSetLGxaQ0vKGMk16JOamGEAKiXgggBMP6/gBe0b2fxvQyQd92lS5e6vXnzZrzo+cTERIxIONLNzW3g9OnTfTnZOAnfqRzox3F3d285c+bMf7KysiospEKHZ2ho6KF169a12bp16zoZy1oqnp6erX19fY8XFBToTZ061QfqhgecR4dfYiW2hLqmr5fIcgWhjr+//1p0DuKHhQsX4qw/WRgOa4t+Tk5OPyV5ruggxNkIOdnZ2RUMooWFhdhosRMK5MqcQC/HjBmjduvWrcnCNAkJCZ1BsRo+YcKEP3jUUDAfWJb8s2fPThO9AJ1ajq2t7a/w9gJTFGWdZ+M6npf2/74vaLX2kGFZjBXkvlA53o8nzAjwX0V7TweJjBwc6hoaGtpifSjORveB/BdLKf8YyjSD/VeZRFeWB5lu+u7n56c5ZcqUhZGRka4gAKLiGj5//vyLRkZG2NcGODk5TQEhc42KikopjDWPuLLVgikwlqbAORxLrJjAmSjn8aMuQrdcxjwUvnfv3t04JCRkdm5u7uCioqLmJSUl5XvZYPhsTU1NfwMDg98g3UV4FkWV/IY6KFDDMzIynPLz8zuBvGVULhGrqBRAHXqjra1908rK6iCki+Hku9ef6vnz5+1jYmLsRE8+f/58BhvLFXJG7kcffYSzKbkPP/yQe/r0qdyNTUr+v8b1NL8kmxC1GvdgrM6EMfwYvP8TjiBmuMkVm+jKwZiDRmmMBoCONNTT4/r06WMGMkAjOeYfxwB0WmZmZWU5wWsbETkMV5nfYfqscHzHMREdhOhQQKcmGr+82KFMzkF0qkXCsVSRKydfnIMMi3dIL2ungNKP59HR0WOEH0DvsLl169bHUE8uQXso4ZSfCu0e38vJSYh9yznWDzmyc5VN8E3jZBsS+F3rqbGStktFAifwJFhaWkaIntTX18f6rVXDOIEr75Y5OTmtB73YQHheT08P3+vzvQw48QF09vnizkERWUbf19f30PTp0/vJqK2/67PQffDgwaaxY8d6jx49GqMsmUO+Ox08eLBZeno6RlPERUYTubJJHa9l+Fz0rl69uhtkxEZWVlZZw4cPR1n3PlfmMyiRQHqpYGNjwwUHB6tAvcYIHdypU6eS4VwFm0x114XX4LmpCM9BmUprSidMU5P9RyIOQqj8qkuWLLFq0KBB6saNG5NgQKnsT80CAwOd8c3gwYPftGvXDo1TRQsWLOi+f/9+NCrK2xGlp6OjY6BkHXIRKIFF1XUQcPiYm5s3MTAwmAgNu9z4HBMTMwpeLnFVh1mTFzogNFZY5Wltbf2KCS5xHHn+35dDcHxAt4EgylFBRD7j+JZfm75GaOhBJY/tKVNbSlgfXSqaCa4spLVM8PPz0x4zZswOEGrn4GqDpUuX+k+aNMldW1v7ClwOg2tfwzUXGGPUQfi4MnnyZLwfmnPmzBn78uXLMQUFBWp2dnbYN2vw4BmW1iFdCSdjxxkqEMuXL/8C7ueO4uJi/SqUiOZ5eXltMzIyPv3888/v9+7de/qiRYvCUN5C5+KBAwdauri4HIdxvF9V/wPPxDI7O7tnWlral8uWLVsPSstPnPxCruk+fvx4wsiRIwM8PT3bQb5UmOzRw9vb29re3t6Xk68Ds860atWKMzYusxW0adOGDw5CgiDqLzkWFha4atCT+885WBvZQ+CYc3R0PA592Ew598MCeQvGxQrjFMgdJaw8lRl08Lwwkgwfo/zUKDNWc13oVEMU1kHIM+egME97uNpFHqHVQpK/96o3b97sFhQUVMG+c//+fZe+fftiHclU8ltQabuXk5MwjbVLwSRW5iR8a4JvdfTo0eNnePlZ+NnV1dVu8+bNfhy/ti5SZFS3bdvWLj4+firoc2OEoR4RPT29wMaNG++G6yc4+YR7rAy0RaPd/2Ud+wW1w4cPDwH91xnq1BsvL68PRWwiqopQBsAkKipqBrSjZxMmTMA2rnXlyhWbY8eOlW/jFBcX9xG8NJVRO3/XcmhBnToCr2Zc2eIutPHYxsbGzj558mQrTKCtrY0Ts7BcsnIQql69etUhLCxsBH7o0qVLGLzgArQ3VfQ1dU0vLXRat269y8HBoV9ycrKg7Xbt2jUGzp2HurEcn5GTk9Nn/fr1Q7uQPV6HtC/atm3rfu7cuU1ot3F3d8dVkCHiP9y7d+8HkydPngf97TPsDrp37/4gJSWlnWia0aNHH7xw4cIyrprtXN7XQahpbm6+ePbs2ROgg7IHRQRXduGSiAKxBq75ww8/LMnLyxOEKenUqRM+DFwarFZUVLQXbkJbMzOzU/Bb+1euXBkgpwFEjYXfrG+g0BXDlC01kQEGVx6goZJvDsKGr169qrC0uUmTJtjJxXNy2JtLKExVoliUh2Oog9JRF2S5n1tVZeRrOaSVVyoHUVcsRJW8OjoJ5YKfn5/K0aNHTYcPH34EhNbRDRs2zFu1apXPkCFDzsLl65cuXcrYt2/fUVBMRhgbG+evW7fu/uDBgy8VFBRkTJ069cvg4OCvYDjRmDt3buC0adPOykKx3759+/RGjRr1LC0tLVRVVS1iYwGOaQUbNmzQMTAw0Ny4ceP4Zs2aZUIadGSW4KpHOIrZ2FcK3+MgjTakVYfXISCPCOJDQnqVsiScCqRRPXHiRAcJG0Y0V69evSo6Ovqb2n4HlEEHHx+fm3/99Vc/+H7ExYsXmz948OBmTk6OZW2+X1xcrBsTE7N7+fLlTXbt2rWRk48BtWFERMSoRYsWXQD5sfHdu3cFYaWgHml7eno629vbP+cUbC9CW9v/ump0FoJsgoqfPLOk7GOIJMqnaPkl2YSoLYnr16/HMOWv3qGPxxDbT2Es3MLxJ9JPvZEZq5AVRJ1qCr0PMnM6OIqUTd77eEWye3uuNv0fJ5+VU8rc7+o+efJkEshMuSAzlYc0fvHiBe5jbsYphoPwXZ021U4K4IGT8FYt/7toypQp1+FAx40mG0NQeUJnQTZXFhmnRMbtQ9lscYgW6OTfREZGrjQ0NExydXU98sEHH5wBPXAAbr8E9a5deHj44ZUrVzrs3LlzIY/0qBKu7nZatVmzZuFKt71wdAedvZlwSywFKoNhmzZtgidMmIARD9AhxQ0fPtw+MzPT5cyZM6IRGhryvBxYj4K5Mv+N0DcQHxAQMFNQSEPDks8///w6J1untG5gYGB5VEFra+v7TN4tkFB6qeR53Lhxv4aFhY0dOnRoiIODw20DA4M8aLPqcOB2Ro2/+OKLab6+vps7dOgQP3v2bMH1q1evtvr333/Xjhkz5sNz587NgDolkBXt7OzSnZ2dn2BUkKCgoEYHDx7s7u7ufvvjjz/uMnr0aNVGjRoZp6SkcHv27LldXFycX1BQkGlubo4Rv3Q5CTsIVaHDaf/69esFiYmJTqLLfS0BeNGu5Eab+fv7T2cGlHR7e/vzXJm31tTExKRhamqqQWxs7Bw84EZ46+vrn/m///u/H2T8wAr69+/vc/v27SH1TRvx8fFpCgNKhVUeXbp0CeFhVtWuXLnSIycnp3wJNDSaYmhgV/igWBQWFp4XNBBVVfQ2pwoViPz8/JNw7rxEe/aSknQtLS1ZKiiRClSOyp5H+QxoOC/xVVjSLAcqrNCpC50UGGqyVMHKUWV7trKy6pacnOyUm5s7AOqXNfx3iI6Ozo2GDRue2rp168P3DeHJA4zFlTw+Own9/PxUN2zYYP3gwYOT8Fw+hiE9Y9OmTXc6duyIjr7bGzdubABj5FEYs7uAQpLx9ddf47W/QRZ4tGjRonkgnCzR1tYuWrZsGe4J+BtTMFOkne/Vq1djFIJHTOgVP3T27t07FNLgSgrcq6BU7OBEXrX37dvXa8WKFTjzSriBnIrYq9alS5ckkm+cNf3rr7/av3r1aqPwHC4UhXta+OGHH2br6uqiDFQK7V8N7rEOCIy68FwE+cjLyzP39PQ8MH78eOdr167tF3UOGhkZlXbr1i0XBMMcdXV1bEMq0MY0QkJC9J48eaJZtt0UaO2vX688duzYDSbUy7KtaWzfvn0qCKlB0Na9O3XqZHb37t3RwosgJI+Dlx1c2SxHxWjoxsaCsKKiYLhROTsIpToWCseiSgxLUhlDoE8RzhjGVbOl4uV71zEvKysrys3NrUL45vv37+N/lEjjeXBVGKEVTTZRAhlL2Ulghpx32QwVjTxo2E16x+8T7y4XVNj/i50rdw6iDAmfhcZwjlMOxzkau+S6Mg/uq18dnpEJjecSpWFgYOCImTNnRuzevbt8tQPIrdo//PDDQrjfa+D51GQT1FqyZMlXcB/skpKSym15oJPEgJzpBr+LKy+kNRnufZw2xlA+XM3RF9sBlNOW1bEn7N7fYrqkrNu50ElY2//GMmEbwi0lRCOhZLBxpEQO7UPZbHHq+/fvd8J6hh9w266ioiJ0vj4fNWqUxvXr1z+OiYkRbE0BeuXMkydPXpo2bdo5jqfR1XAVINTz3np6el9hG4F7+drKymrZxo0b3dk2GpjvWFYPEyB9P65s2xJFKkPunDlzdrM2EM6+9sbU1BRXS+MECK5169YZnAwjRL1LOeDIFfZbuJ0J9HGfgO60BOob7l3IbdmyxbNJkyZnmdwpK0xAx3Yo74S1tPD+plenqmdkZNjWIb3E2++3337r9Pz587H9+/dP2LdvH27nJZzAh/1jNBymQUFBixs0aFBw9OjRa8bGxrglXMHo0aNbQj0yvnnz5rjDhw//OWTIEMF4rQ6MGDHiHva70AdYQJn0YMy0hL5gFXzHTUdHR7BFEq5ANDExecbKiwurqh1P6+Ig1Pzyyy8XQ2UQrBYUvdC8efOivn37hnXv3v1VJUKU5p49e5alp6cLPONQICzEczZgmI0ZM8b30aNHpl5eXoK9cvC38XBycvpKxqsKszp06PD4o48+Snz69KlZPdJFDM6ePbtE9ISjo2NUly5dcI+tLJ7lVS80NHSA6Al4Zomsw5XrSsfKFAuhAgGD8yMpKZEyVVAUqBwoyD4BZUd0sDUSOmjwPLxPUYTngfUKfxeE3HQ4hKdLmTJnoijlqEwXXbt27aegxK2BsaF8RVZeXl47PEDo7gfXt0Fe/oAyFnJKAp+dhH5+fmogfPR/8eLFoczMTEsYAxJBkLkKAh8qFz6zZs3qDtd2g+DYtEePHvEgHHrAtfPe3t6h27Zt+xIUFmdQwnNhvH46dOjQU1zZPqYRnGxWp+E4INxTT/wwgjqVx/qFdO5tp6CoUUS/oKAgn419lY1/2KdIciazPsgb6zBMK37ANr5gwYKIXr163WZKrdChiRN4TF1cXFpwZeE7VJgg+Q9+BhnLjd2DViJ9YDQ7V8DS457PreB59d67d29rUCpxdaRqQEAAbvjuLWMh2SQiImLS4MGDsY74g6BcdPHixYHR0dE4o41LTU01//XXXwc6Ozv/j1OQsOHoHLx16xZnb28v2INQ9FxZ9eO/0fMdxwpZ9GVvzbB/3/1ra1tPJVw+gWwiXoaawgryVTaRdV2Wk1FekSk36Mjp+0TdwXG/wv5f4s5BkXQnRN7zkdqueONDyE6Ld0gv83wryXgu/r+a33///bxOnTr5Ozg4hMBnK6GTA3n9+vVIrmzCWFWzrVQPHjxoe+/evQu5ubnNpk+ffnLUqFFfBQYGdty5cyeu5GsOv7cWZOuP9+/fj20qW8JFeF+njdAR94S1FWF7Ee77l8bJbxJAXf67iD0juc2Kqwe2OH2oW4OEH6Bua/7222/9N27ciNsD5UDdq2DPNTAwaA8vV6VQ5yVTudLSzO/cuXM0Pz9foPvBq3lISMjxu3fv4t6jL9kkcbRzpWC4UdDPcxStDFyZYxB1+TwoTz6rM9Hw7MrbSefOnUM5Odvca/EsSlnedZcsWXIiNjZ2guj3V69e3aNv375/zpw5U5blMM7MzCxfhenl5dVzx44dM7OysgSRBlu0aLFdLEqSUXx8fKs6pJd4+8UFEfimX79++MwvcmU+sUJm5+EOHz48GfJoCv1VpLGxMS6Auseud4DvdL1582YjGEc+UVNT82DPCW08OMkbfWWWw4cPRwehS1hY2HCubKs4Ae7u7qUvXrzQKgVgXAyuqU+ojYNQY/369Z9HRER8L7paEFdu9enTJxuO15aWllg4XKb5mHt7pqFZQEDADNYAMuzs7NC7HIneaKhkySAMnIIjdsaMGV0ePXpkDQNpg5cvX2rhfwlXFX7xxRcPjhw5MljKjQc7naC5c+f+vm3bttlw8zWVXAkROHzz8vKmJCUlCWK+46oDJyenqP79+x9Gox0PBxSjlJSU9qInmjZtik7peE6+cbYtJKRwvMv/SlRBwXjzXJnDVUWGZZGWoiU0/Isa3xSpHBZM4K0qvEgrBXseQtRgcBoAbXlDenp6m8oSoNNQVVV1A6RLgrJfU4KVhKIKDO+chH5+fhrOzs4zQkNDd4CwYTxixIhoV1fXc9ra2ii8+E+ePPkzuPa1ioqK+oQJE8JBEDynrq5+9fTp0+knTpz4Li4ubqiFhUX6ypUrfXr06PE7fOcGV+agklW/jHsfx1TRp5XAOIdGznRIk1RD/1cKaVEwzKzq+UAaSToIzaAddBd+gHuX2KtXr4Nc2YxhHNdQ8NNevnz5FrjHaCRRE+mbHUDOm4DCnkoZ4vsxFJmaml77/vvvV2loaOQy4bORvb19IAjxy0DWwv0OOFwpypWFcJKVg1D1/PnzdiUlJcbjx4/34ljIlQ4dOoRER0d/JEzk7++PcuN5TkFWR+BqQTc3N8FKQnyPoKMQnYRy3ItQ4WQQOZVD2csnFdlECZ6HVB2z1Ywz8g6nSPBXPkSnmierJ8I6gs4EUeegMB3f98KL5GoXtlNeITvF2yXf9yBUlvFcnAYg+w2fMmUKOsIjevbs2R2eRcfyShQZaePu7j4Yzp2qQhc0fP78+S/oHMQPIMPjireAdu3a5dna2g64e/euYIFCYmLiINBZRoI+8xcn2Yln7+u0Savivtdp3z9CeWxx1aDu5OTknZOTMwr0dkO0xY8aNQqdoqj/pZcIQ00xdHR0DJjux0tAz2u/fv16DxMTk6aLFi3qhucKCgr0Hj16NAv6gfVcxQlKqO6WKloZ2Mq7txxOEREROOEXF1kVDho06AJX5khUhGeBUZn+5+np2cDb29seruPkY8Fq7xs3bnyvr6//DMr8gJPNdnHaqqqq5asnrl27Nkb0IowrqxcsWNBVZGKIjqitpBbpJY0+5FcwTsFrFI5TNjY20cKLwcHBhjBeNMf3mpqa6BjHFX+RkKYUrqmy7/TA31BTUxOu0sY2kQZp4iBNjra2NkbLcoFXjLZYPnnhu+++m4OvTZs2xQiR/3I1LKyqjYPQwMzMrHdISIjAOYgxZqdNmxbft29f7JDQW4nOQfyzGFa5C0WELY1Dhw65CFcPOjg44OyNpyKKEb7iSrVwqFDX4DfbwdExISGhw5kzZ2yg8gkqXUZGBhrQ8IYFSbGSYUWOatiwofvOnTvVLly4MAoqiinkQUeZRs8XL140g4b71kDWrVu3fOgAQuEZnWCCSxTHv5n7RtCh2oieaNOmjS8n25UPlRoZ6nhe2v+raP8l1d8WMwApUjneCk8pZlQyVtB6pQ99/ILU1NQ21SXC65gO3j7gQRuXtBEolS9Gwi1btuhNnDhxfXh4+Ep1dXXOxcUlaOHChWfg0pXHjx9HfQ3AWDgLxuiCOXPm+Ds7O+Mkn2tbt27VBWHwx+Tk5K6ghCeuWLHidvv27fF7GGc/ediwYXMLCwuNr1+/voOTzx53ikCDrKwsI+GHli1b4iQrwao6XDmLIUjh6Av3f/K7/HhsbOxYNze3E/BML6JhBX4L5bR8c3Pz3vAqCOkJiiaumjQFYTRURmXWu3v37nSoM7hKEkPNoxCsNXLkSNycu9xBGBMT4wDKh7W9vb0vV3GVJ+9AJ+CrV68EKwVfvnxZ7iBE8L0cHYTKIoMYK+n9U9TnpCzPw0JO5cD/laZBsUbHp4mJSYWVgbi9BhyvqvsOOTYli+jKYdFJYyJOwkiWNFIR9q+uRM5Nq66eswmpfAHvNd/3IFQmm4KwDqidOXOmP+geGt27d8eVEm8GDhx4XtRBiAQFBU3kyiaMVaYLNo2Pjy937Hp4ePSaMGEChuyMUlNTc+FE9vbKzMzE1Ru4KkOSE/2UymmjwNQHW1yOmZmZ79q1a3+G9x2ZDuXt6uq6JiIi4gvQ47REEzNniApfHxjofS/btGmDNueG0G66QvsUOHu0tLRwywx0gPA+gsE7lkE/MDBQsDhn3rx5Nxs0aICTZZMVpBz4Gt6vX7/f4Yi+fPny8OPHjwtW8aFDEfpq7HtncrLZN1a1pgRiE0PUcDZ1HdJL2g+iDrK3wE8G7RXvqXiYT40mTZoI7B1RUVHoA8tD5yC7lp+cnCwoL9SXYlVV1crGkLzXr1+XMhkfV3SX+/l8fHyuFhcXR8J30YFYo2+rNg5CXUNDw/LBNSMjQ3X//v1Nr1+/Ht+sWbP7c+fOxYE2pYpZPSbBwcFT8E3z5s0LoCKh8fAVi8nLCVcRMgNRxJUrV/KgYnWC4wO4CXrl1iQ9vUJONpt34gpFNEZljR49GlfQtZs/f/5HkM/eyjJ6Dhs2LHHmzJl/lj3KDEsvL69e7u7uTR8+fKgFR3t4thuhMmZ/9dVXL3iWddx/0EF8/0FbW9t7nJI5D+SozOELrl6ZzU6tgWM7z5Q4iRpJFOz5pCqBgUb9p59+GhkXFze4NokxHaZnoUaLmEKpsn37dgsYXBc6OzsLZv/o6+ufs7S0/HH16tWotJfy/SZAGTZx8tlTogJ79uzR/eWXX5aGhoauNTY2zlu0aFHAuHHjcHzwgPteeP78+cOgeA8FgSV75cqVjwcMGIACk+eyZcusQRHenp6e/gGM6zHw2aNly5boOPQ5cOCA6sWLFw/A96bp6upiiMtjXNleRoqCLOuPFih0xfn5+QJZ7M2bN+hIjRcJq6vWu3dvbRj78rOzs7Xq+uM6OjqF8MzUmKxXzJyOCbGxseVhWtTV1UsgD7KKmKBy//59GxBgR0P71fX09JxaVUJQNLDc8+zt7XG/lhw+VxiQQ7gHDx4I3qOjEPcdhDYj+IyveMh5L0KCICofi2u7akhS8GJFqpqamsY7/u4TBXm0JSDToG2hhKf5q6CfiEeWqMm5xmd9iu97bVejY/F9D0JlxODx48fTPvroI1xAgFEzIk1MTLwHDx4c4+Hh0VyYKDAwcLC/v7813PdHwlB3ImgvWLDAa//+/X3wQ9++fdF+hTJtZlFRUQUDLOgkOCEPjaOSNF4rldMGVWoLC4urIMv2EJ5o1qxZ4NSpU5137NjxlMd9an0AnTO4MAfHtma7d++eATrVH7jv5bZt29x37do1MSsrS3EKk5uL+9V5Yln09PQKMjMzBY4LaDP4qq2MZcCQynv37p2XkpJi7OTkFGxjY3OaPdNcRSgH9L85UAbsY1GpDcSIU/Hx8fNBX28gMGpoabXkyuxbsnAQFkNflZKQkKBXXSLIH9oK/3mH9JLevqwQozj9/PPPg2A8a1dJ/Sh0dHR8eOjQoRwfHx8LSNMkODg4lDkJte7cudMVE8FvvCgpKaksQpfWhQsX+uObzp0744S/AhGbijeMU7fZc6tRlquNg7Bg5syZf/Tp08fo3r17H92+fVs3PT1d5eXLl7Z4eHl5rYLB/LKVldXvW7duvSBixFU/ceLExKioKMEqkSFDhuAySX/RTKGh9+jRo03hBiyE3xwrjAErpF27dkX9+/dPtrW1xaW3sgh3iQ8AnU0oJEawhtIPDqVxEObl5WGDxXCwb2BAMRk1alRwy5YtR2/ZssWWVSC958+f74eBRn3NmjUo7PBl/y99qCefiJ7o0KEDdmYxnPxDoVa2z4Iwbry0DBDlvy9BsOPBWXrYyX/AlTnLD7E2m6ZA5ahJmZVGWaRVDnEFVtRJqIjl0EtOTh6Rn59fK8EP02F6riyOtnAigF5sbOw3IFyVOxfg/Zfa2tqN4e1cjn97p4oLh+6yqi81oJKdnW0RGhq6CsaC/PXr1/sOGjToNzh/a/ny5S38/Px2pKamdoR+NnnFihX3QYFH5+D9WbNm9QZlfVtOTk7DsWPHhi9evPi8sbExhiJ9BulaPH369IekpKSeIISlzp07F8uqq2DDpCwV9xJQvNMiIiJM8cPjx497BAUFGUMdecOMICVNmzZNgvH59LNnzwaAQFhrR56qqmoBPDuvFi1axAoVepS5Xrx4YQyCZz8RxR/blayiBWAIEqe2bduGbdiwAWexJXD/7ZFo9vDhw/7ff/99uRwYFxc3hCubHMZbByGGFAWFSOAYFALPsNxBiOAqQjk5CNOk6ACRZR+WJidHTho9J6V+HpFc7VcNSezecTJYfVTD89GF8aWb6ImJEyemwIH7kuRVc/8ViUIWjkyeOmyFFYIi9bdS/YTPe1RzdVtta6GA9cXiHdLLuozKMp4L+ygVf39/q/j4eLutW7ditJg4pr+FdurUydvDw2OcMC2Gr/Py8prWsWNHjFwmbkhP6Nu3769woIMRnW93du7cOR30lBm6urr6ognV1NTQ7qku4aIoldMGaGxlZWXq6OgYuGfPnisglzf57LPPRoSFheEeiximrjaGf2M5TGpWFltcdeCYlr1jx47mAQEBbhhWF505X331lbu5uXm8+GpVvlNQUJDNbDtGonlnq7xUlK0MGBXI3d29u6+v79yRI0e+gDaG8qcg6hIn58ntdSmHcLIxS583aNCglleuXJmO1zQ0NHBChKycu7nNmzfHCegtqkvUqFEjDWaLqmt6STsIM3v06HFn2rRpn5w8efKDUaNGudvZ2Z1WVVVNhrbcunfv3h1v3769Z/r06U+hTTt8+eWXJ5o2bXqkT58+KePHj3eC8bI17k3o4OBw9/Xr18J7rIJ77Xbr1q0LXOvt7e09BX4zfd68ebi6p1zOPHPmjCH05a1zcnJaFRcXfwCfL3Nl+8ZWSm0GSXz4d2GwyIXDbty4cZ2hYre5ceOGqXCvwMTExEl4wKA4DSrMaeYkNH727BkO+ILVg8OHD0cPebjIzHjEADLrnpKS8nH5CQODYrhBmTDQR1taWuJMFTx8uLKQlzJrJ8xwhUdjTonIz89HKQUNcxgWFmcFPAdBLP1DICgoqHzJaWhoqCv2ZZwcNxsWo0FsbGxX0RPQaKJYpyrvUKiVGRlEjQDSMEBIw8iAM/gasPfhMjKkSMtYYiFjo5AsQ84IFVNFLIdhRkZGnQR0lt4QxyIUrv766y876AumiKeDc07ffffd/bVr1x7ia//LnIP4zDxZGCl5ZkcTFO5JIJQYgmARAwLe/+Dc9Tlz5nR78eLF9szMzOZDhw6NXrRo0Q0YwzG0z2NnZ+fJISEhG3AiyaxZs17OnDnzjLa2NgoZQbNnz+4F3/sBFOFWILzELVmy5DYMK/9ytZip9L6AsuRsZmbWHeTYQjiKmdCDskbJhg0btECu0ARhaxyMGajYlmCa0tJSTFeqpqaGdkSBMPz1119r6+vra8LrYCiz0AihwoRkVRCqVNzc3DpKMOsZ3bt3fxoRETFQIGylp5tCWc5BWVZ8/vnnV5gsEg55QUUw8ubNm30wJCkK7JjpBg0aJIHifg8ETfukpKRGmEc8r6urm9m/f390Dnqxsb4Ifk9r/fr1Q+Pi4nbAsy2Xa0CQDOBkM9NPxdPT0yo4ONh51apVR9l4I7rngjbUw1jI89ro6GiBLAKyYfNdu3bNWL58+TaOP5OVKlBZCFH8DDJs+WcMQXrr1i1BCFIeyCaKOOZJsxzKXj5plENZngffVmnJ6vngGFbBQfjnn382mDhx4gF4+4oH7eF9Ub1//35zkE1y5KwfWlQit9e0Es+Cr3VSzMCO5ahKljdWxEajAHsQKst4LkTn4sWLs0Duw62G0GiL0chK4TnE29vbX2rWrNnIN2/elK++CwoKQochblkgvt842upQD3nu7u4+8N9//10M8rDlsmXL/nz+/HlPDw8PfSmXQ6mcNoC+jo6OFtOlXqB+2K5du36gR7Xiar8ySND3ydhJWFn7UERbXLVj2+nTp7s9e/bsHOrheOKTTz4Jb9mypSc+F9BRiznFpJRTfGpTBqN//vnnaJcuXUJBdz/F8XNLr7o8C4x6FAx6O9p6BA5CMzOzNBk+z7ShQ4defvjwoV1MTEyVUTHs7OwCubKJ0nVNL2nQCfvc1dX1qKGh4bTLly9/4Ovr+x1esLKyih4xYgSOY+mTJ08+aWJignJ5Ky8vr28FQnvHjgmrV6/2d3FxQcNhADT1tnjez8/PBA5XQeUyMspzdHSMWbNmDdrs7nMijt3du3cvFb5n+xDi9cSqMqpey4cfzn7kib6+vmW/fv06wPFRREQEriBsefv2bX0MPWoJ4IAPg0Hu8ePHP42OjhZkfsiQIbhy0LeSjDSCG9AwJSUF95IrGDhwYHLXrl0D4T9wBR9aXIKZIICzcvI4QtIdACpPYXB4Q2WJxdCuwovwPE3v3LnTvVevXuc5+YcTUAkNDbWExtxU9CTUK2xIvAghWVloEmEIkrqELamjMiPNECcYZnS76P1VtHLA7x6HPM+o7fPi+fMoL5OClwMdhM3r8oXXr1+3mTNnzt8wvOzduHFjTlZW1qLS0tK34o7DORW4hquMT/PU+FDBOciDLJk8ffrUGUN4w3j+gAkL6YmJibPQOfj555+/BEHkAlz/Jz8/P9jZ2XkJjPlLQGlUW7Vq1ZNJkyb9oaqqik6syKlASEjI9sLCQj0QTiIXL158GcZ2XPX5iI3fUgXy48tkjBJ2lIq81wHBaAgIVjeZcFZaySEcE7X37dvXa8WKFQ/FZA4VkVfdixcvSirriXC//n78+HE3GH8F+zzDvW8Nx9/h4eHcsWPHqh4UVVQ4+O4ueHsNZCYNyNM6bAPC69evX+9b059Dm8oZN27cX9UJiRJCbdOmTf2joqIOgFBrCO0UjdDXxIwGKI+mdevWbSTIjvbCk3Bv1m7ZsiVyw4YNuLq1iE9tWltbW+AgxFdQOmpM5+3tzQvZ5F3GhMr6LBlOcKjKkSORMOLyDt1dVThB0T3K+DamS0selLeMpSTU5PgswT0IU1NTxfcheYn6IB/1VV1d3QqryJOSknDSWFX7z2iAnNkQypgk5zHDWOx9te1ZXL7nGZHcfwZ2LMffStZmRMtXm/YVyRdbw7uO5zzYPqQh6HdD/fz8WoG86ihSxkoTx8XFmZ87d24g5Pt/Ytsa4eSxtPnz5x+FfgGjTnBz5871cHBwCILf7iqDciid0wadmlllyx4fgT70+dmzZ5uDPuLJ1X71pbHI85SZk1AJbXHiGDx69GinsJ4xopiuTfIRj4F6ordkyZK/mjZtmrNs2TI3rixKYRDKKKAf94W+cNzhw4dxayc+7ruoBv3p4Pv37/+rp6cX+PHHHztzZX4atLFkQ97L89yjR4/7MixDaoMGDe7Nmzfvxs6dO4dghEvxBE5OTiHW1taPhPafOqaXNDgWoP3jCtSFHDis0tLS9EtLS/NBXn3N5HZcmHVj6NChuXC0g+u4v2MpC5mP/ji8vxGtWrXS8fb2PqyqqtoSvo/XCnCrIPZ9DCWKTs7Gv//++x4oZzdIg88kB7r2vNrsQ6hehwJhx57OOiJ0+HlZWlrawPHR+PHjO9++fdu4RYsWKUxgN4yKipoo6MkMDIrZ6sFQ6Jzf2owRKlnQF198kdC6detQVtlwmT6G98RQAZkcv7zqyggqT8mFhYVvNWZ9ff0GrI4UyDmPmvfu3auwZ5mVlVUWVHAMW8sHB6FFHc9L8n+lMZMRnYMoVH8qo7JIoxyovJ1jBjZHGT0XaT0PoXDhzpTXSAUuhy7oHAZ1Gk2Li9VSU1O7wuFWo9aeltaB4+HsZR46B5FGCQkJFiCsZoMyix6vaFA6GqqoqGD8eK5Pnz634N6fA8Uw8cSJE9/AmP4ZCDD5oCw+GjFiBI7pHrdu3Ures2eP66tXr5ZqaGiUzJkz54WLi8tf8B5jt+PKtAxONhNM0BCI+35U5vgzhHIVsLyIzmwTneEmfK+fn5+PxoYs7u1QtUJBUpKr7VLhfnsvWrTo9127dk2LiIio1T6DIBCWjh071mfSpEm4QjAa3uNevPegnvXAVY61+Q0QLguWL1/+JzwrdA5L04mrCf+zMjo6eovwBJQVw5f/LGI0UF+7du24sLCw38W/DLKJzrNnz9zmzp37yYEDBz7jeBRuFFcGYjjRq1evVnZ/OXg+FdLKwUFoIcHf4eOqFiqffMpnIcf7oYwr/mRNodj4x40cOTKAx/nN79y589MzZ86Uy/I5OTkYbruqGeA6/v7+9iDbhHP8MbbV5BwUl+/5htDprFR7u4uiAHsQKtN4h9sQfWJkZFSyf//+I0yGzxe5jhPJuixbtqyPqBH36dOnM8aMGXOeq+hs0sOtDpKSkgYI7UMDBgxAoSwQ5EdHGZRF6Zw2oGOoHjly5GM4BG0CXj1nzJhxuRL9p1b9gYychBZykldk2Z4aZWZmthc9AWNdc9ABi3/88cdJ4nurgU6JCz/USOSRuw1Ia9OmTdtiY2P7w4Ht4XvxNB9//DFG1jHi+Okg1M/Ozsbwwhy8tvP09HwcExOz/ttvv9114cKFpjdu3NiM19C59sEHH6BNIV1G+RKEd7axsTmxefNmFXd39943b94UOL7at29fPGzYsDB7e3scXwJZ2lKR9JyHh0fPixcv6leTXhqgDQPlbZyY3djY2NiQ5Qv70Tg2Fgo/+8H1hsz+hH1nPPse2rTCTExMfhEZY9Bfls2uC8N1o/3tbxhn74nIy4Xsd6rtt+sah7uU3bAY9ue4ws8HVxUOHz4cOyVBKKtr1645PH/+vB9TOtA7/pirfIZ66rhx4/bi4M6VhRcQXS1YSl2K7GSBoKCgCvF4QbHKs7W15Ut4UYPk5OQuoiegcUexOsOHjtS4juel/b/vgwdXNkPhUxmWRRq/jR2pJxuYOTEnobEClUPUeHCClSlNUcvBlW0cLzUyMjLMuLJwpLwxqsCzW8aMPp4821vGQFNTE0NtloIuiJNyMp88edIelFyBAxcEv96goH+Ql5fXPC0trV2rVq0yVq1a5dOjRw904nju27dP5fLly4fj4uJGN2rUKBsU9EAY7/9kfUiwiDAmC5Lg3r6pou2U5OTkoECUDmmSa2hnuNeJwEFY1bOCNBJzEOKkKfi9YLh/f4KwWnru3Lkx169fN0tNTa3UyYerBjt06FDg6Oj4rGPHjuikfclkqyBQEH9v27at+pkzZ2xB/tKqKqqRoaFh6cCBA5PgNy7o6Oj8yX4jX4rPRmvXrl3oyNyEMjgTdHFfRD/W1+B91vjuu+9QfsQQGBj+rhlXNrutlBkkgljfp8PxxEGIqwJBkahyFR3uSYj7Dgr3IsRXoUORB7IJn8YEKp/ilc9Ywe9HfaeE7c/3n5UlNzeF40lElkrItra29hs8ePAbDw+PZsxIpXn8+PFPZsyY4cdVDD+t5ubm1j88PLzfV199hWNOBh8KUN2KO55OIKu0/Smrc5BTjD0IlWm8M378+PHsIUOGoOHyBpMJRVHV19cP69atmw20+fLoUWFhYQ7+/v7W0GZ8mXyodvr06ZEgaw0QpjE3N8eQo7g1UYqMwnsqndNGTU1Ndd26ddGzZ88O6NWr18D4+Hi8j2jUTn+PdiPtNqNMtriq0AMdMMHLy6v8P0Hfaw/9cjC0pUu2trbpoMcbCa+BPjk2ODhYBXSwqTzQnVQfPXpUwdYM4zju86YKbcIYx3SR8zqcSHhE3F7m5s2b1iEhIeX1LSoqyvTChQudR48ejQuLivlaBsi7xo4dO+YFBAQsrO6HbWxs8EWDp+XQt7Ky4p49e1aeHp7Ft1DvvhV+HjNmTISjoyM6OZ/LsK7hGIB2nVu4MnPevHnP4WjDlfm30EeAs3Jvs/fCsUCYPgv3+oOjHVdmm6wqvTRA+xiuJERfhjASRomYzSyB2Xequp7MZHYVkXshniaT9dsvakj3Fu+zUa/4qkItJqRrQMe1HBPg6sH+/fuj4BtWyepBJIU9jGJWmWi1oOzR2r59+1IWrqWccePG+bCKKe+QXriJtSUMeH1ET0LDDmINgxzJkgNX/Q5i72ez19bc2/sRKgrVOQkVhiqcgwqLoaFhXnJysp60+guuhmXzMiYSDnx+aTw0/Kjo6uoWYvSb9PT0ApzJq6Ojo9akSZPM3Nxco9jY2NalpaUfqKurl3bp0iVp5cqVt9q0aXMWvndvzZo1zR48eHAAvtcRzqWsWrXKu3PnzmgAu8WEnnw+lVNVVbW2G56rMGFMlpujowD3UEtLC52SYRMnTrQLCwuzTkhIMCooKFAT7jeor6+fb2FhEWdqaooS+l0mO0UzJ2M0vL8IzyJhw4YNvdLS0jrBbzTNzMzUFn4fncHw3QwQ8kPhfvgyIRgFeWkbUPNZO7gs7I9F+mdhmyhkBiIs19MqfiOB48nMSnT2gTIucBJWB+5FKHQQIhiGFPchROchQRAEX4CxnOPZuC1uTHk5a9asYykpKcsePXqEhizu8uXL64ODg3W2bt26juVdC+SUzfn5+UMXL158EPreFxx/nZ5vyfeK7ByEckTCdQtFbgMKsAehsqDx448/fpGammo9cuTIrfD5JtSdBLFngTL4a5CzOnl4eMwu7whyc7Xh2paOHTuO58pWSOiCnDtA9Ls+Pj7md+7caZiUlNQKZLAPRa8xI7ik5XtFdtpUCuiFJXCvc1u1auUP+l1j6E8HWFpaNp4yZYp/LdtNhT1KeR4+WZHImDp16llQ6xbcunVLMJl32LBhifb29h7t27f3h3qlATpGv5cvXwocPJMnTw4cN27cKU7+kyvVt2/fPhHG7gqRoK5evToiPDz8cEhIyDDR81C23qAn/QD1ZtqWLVuGQV16K7oMOrFOnjx5DI9OnTpNAt0X7RNFfCpDVFTUj61btz7v6+u7u6Yf79Gjh7+MnlGdyxEXF/f1N998c87U1LTj77//bi26qvuTTz4Jg7oX07lzZ4wchYe0nWtvdVdc2aI1tC/ghGdccafGbBt4PoWrOIlMmP4WS2/KlfnDqkovTUq56n1f1V2v6bt1TVexkkiocLkihhuzzZs3H2M3GW827jOTWMUs6wJO/uErlRl1GCysRU/g7AuchdG/f//wnTt3tgUB6suIiIgZwutGRkalLi4uL7t37/4rfIzm5Lv/oMqFCxdaXbt27QgKhaIXXr9+jQ5pvuxLmVaJgIQKRFodlY66UP77ElSO/qxGcE5TlHKI55v7z0l4S4rPRBrlqLD6rJLfT1OQcoiS+vPPP2Oeu3HvOVMKJ8DjiiqxQR9Xq2cyAUFy2qyGRrmwAMqo7u3bt5v17t37aU39IzP4vMv9VMX/YDO33sqDhCjS1NQsysnJ0bhy5YoFKBKPQOmOA2Xw9Js3b3rh+FFSUlKE/wuC3zM9Pb3rWD9mzZrVKzAwcC98rxHcg1gQyv9t1KgRhijFsBLxMhSs6lJXVOty72WZN6gjpawtY919DXX6tpWVVVM40NigyfrkEqY4JHL/RVtIF+7DwpyEUayuBRgbGzfv2rUrxq3XY+UpZbIWWoFj2W8kcLKJ1lDAZIno6uoikxnjOJ6DewmK7jc4e3aZ7WrHjh3l58TDiwpBhyKeR8dhZWFJZSSbvNOYwIP9iqRaPnlkvhb3lK/lk5Y8yMvnpGx64S+//NI7LS2twiStqKgom7/++uvD8ePHy1vvq4wSNn5cXr16tc7Dhw8dfX19G3t6euqFhoZ+CePfl5jI1NT0kY2NzYulS5di+C4cD8M4fobrErZ/ZXEOujM9ZakCt4tIjv97ECrDeK65cePG1S9evBCEpHN3d7fGaBaVycWQx3gdHZ3HuNgA9K7yFXdBQUFD4De2btq0aSWqRn369Hnl4eFR/l10HPzwww9ncR+pgQMHRl24cKHcDoZGcNBffpSwc+59nTaVti84d1Okjcl0n2RceQn3ER2wNxYtWhR39uxZ861bt/48ZcoUO67ipIuq2o2tsJ7KMHyyUtjiaiDBxMTk8oIFC0rh+IiNjbhgAhd1RML4F7Z582bcssuKKws36M2TcVADxm6MLOQKx8dcWaQn1D9DWP4wHC+u5DJmOiOWARu14YYNGzDNAjhwZVhzlgb14gymCwey39HgpOsgfJcy4ETcDNATcYsNjISnW8Vvo6MKoyFk8fRZoP00btCgQT/C0RPemzHbAtoUglk78GNtXB4TzUpYXtLrkD6DHSGkFryNiliUEUmAlb8pqzy5TEhP4xR3pVc/sUF6DTR0V6FyBZ/7cxVnxfMBw2nTpgXk5+eb1/YLo0aNygLlKmfEiBF3WKd8nTX0Qj6XwcLCYs2OHTt2c/J1NGMnasFVDDMgqkCIX5OIIMR+P02OZVSkchhz/4Wzk8YzkUY5RPOcJqNnIslyiPed2FeiEwTDGuD+ppIOsSKM2Y3LczpX8t/v2k/rpaamOi5duvR4bm6uujw6GFCSi/bs2TMDFAN3TnIbJ+P+Hr96enq2bd68+bO2bdvO27lzJwqpreBoyf23EjObGediJ02aNDs8PHxdUVGRNrwPX7ly5d9qampXRJQkWUUBqFC35Gzkk7QMgO0CJ8Boi7SRUjYW57Gxrjp5SoUpSjrsVehFL2aCe54Mn5PEQ5LJ0lACsoVM5dZVq1ZJema7JMYIWcsaVD7+l09a8qCiPidFQGvBggWbEhMTV9eU0MHBwQ5kAz+Of45C3CsG43ChkRqNo42ZgSee1Quc+Z3I6kkkJ7s9kOssp0jCOSgjJ09tnINYjvIwqigTwXtPnuS/Wp2kNvmsRf77SVDfUObxTn/OnDnXQZ/qVpUtRxhtDO5hjbIj6EVvTpw40RV1mXv37m0BHakznrezs8u1t7f36du37z/p6elWBw4cmCxcdcycc19zZWFNkyXYL+F/D2f9UgWnDdOn+nEVnTZoZ0N9K4c9U0co7+4q6hlOFHbnZOeU/mjkyJF/N2vWLOnw4cNfwGdDb2/vOd27d3d2cnL6+X//+98yrmYngKBNyDgCUn2wxamw+oZ2dlPuvxCLCawuoYO6Gfefc0c48VLe0QHUWX7NWf6F5LN8ajK9V/S8MMSibiXfEwWdajjpFfduK+JZGYSr0RpUk38kndmuZBEZ712fRTJLj2Fx9FhdzGPn8d5ncvKPOkhIsJJIGuygwthByAfDkydPruDKZspYcP8tny1hg1gMU5y0mYKlzRo/etGfcf/ta1Qo5zKsZEIXGqwbitRX7JBwFQTOGrnLOjJ5OgiFm7dXhTKEI0lT8HKIO9meKGCeFfqZ8MWh8w4UmJiYRE6bNu3BoUOHeskjA1OnTn0IeXgl4X4udd68eRcKCwsb3L17t1NmZuavc+fOXQbKNCquOGNMuJKu2MPDQ2fv3r07Y2JiPtPT0ytcvHixP9yPM1xZOIkXTECncM+SQRhy/V1nNwtXC/IhOoOFlH6TQnzVj3GbysfP8qVRG1Q4tPfv33+Z6Xa4ogaNQ3oiYw4apnAfX9yvJJuN/3xzEKKcgWG4opnuh2H7hHvloGEKDVRJ7Mjn88NgWx6Ub3uAE194uoqwyjFczPhvq2gN4n11Evg+9bt1Q+/gwYO4urcvHB+w/gUN++hMwwgkWlCnhHKrMbyfyeoVTioVrhpC8kT6AGz/AT169DgIx0CuzEGCCxNwMqq/kZHR49WrV2N/0IkrW7QgjRVV2ey54ESFypw2qE+95Kp22gicTNiexLdCEVmdK8u+IevSpUvfsvzhuBBjb2/vXlpaKlzlpF2L/rWmCEjyaB/KILMI92XHI7iS68mc5BzfkuR9osRkcPyILvM+ZQhXkmeRxvpsQslRp1tQc2MQWZaOg0vUoUOHcJYPzoAK5Pg5mzWDKXmxXO3CpeWz7wg3vMznSRmeM4W1qjLksDLmUzUlCEKKwlTEoEGD3IyNjXXPnTvX8dWrVxgyRqp/iuEIW7VqVThmzBh/Ozu7E0zAlOTsrEQbG5tLmzZt0t63b98nUC7LZ8+e/eLk5PTVN998c2TChAkFfn5+qq6urlb3798/lJyc3Nfc3DxrxYoVT/r27fsXVxY+PJSTT6jn3FGjRj2/ePFiB3lWDHw2HI9DmPEAYwX5TYIgCGUGx2nh/sCPatC90KBewtNy4MTVRHYoExYcTw3YuH/Yp59+OkPsXIUVkPBZaCtBaJUvURnoSMNJ6Gi3EbU/VmbLwTqEzqiIKn4L+6cUlg5lcNzmAJ2COGEcV+MIVxVrs37PlPUd0lhR9b5OG9GtUISTBzgZr74TBe/dDXaPk9m9wlCJ6CDMqqXOF8mVrXpMo/6AIAhCsZBGiFFlQ3TJujCECcbrbcAUqUga/AiCIN7C3s3N7QgfnDhTp06dxZXNHH1XMFQjzmLtwQ4MGSONze5FFU5UmnEm7H2ubKZsNCfZVd048QJn23bIy8sbcezYsbFHjhxpo6amVqCurh4PskGRqqoq5kM/Jyensa2tbdK6deu8rK2tzzNlEWeRyWuVGq4q/wQODOVkIqc8pDIl+jx7TsTb4MSqzzjJrS5AA+oJTkaGVCUIMUoQBKHQsH1635s//vhD1v1rbcc/mY5rdQRtH/2wHJU5LoSrHjEkJPffasPI2qyGlEOI0R47d+78zcfHp6XUlB57+8jly5c7MbmdIN6lrY1hn3HfPk+ObIwEQRCEDCEHIUEQBCENlM2Jo84UOAzLjKGtRPd3kzTCPedEZ8JKI7Y75h8dnTYlJSVDL168OO7YsWNtEhIStIuLi7nCwkI1FRUVbtiwYTErVqy4bGxsfAnS+sKR2Llz5yI/Pz951S2cJdyEHTpyygPOWo5lz4dWsVeOpPcqo33ICIIg6hEK7CCs7fjH93FNWRwXreEYD0dvrvr9oN4VXEGGk+fOcrTNDvF+fQZHsi5BEAQhD8hBSBAEQUgDcuIoDhiGBx26PeGw4/7bt1aN3UMMp+3Jle3/g07LErplBEEQBEEQSo8yOC5wMlxTrmySn6YUfh91DNx37g1HoecJgiAIglBAyEFIEARBEASuiMSVnmg8wdCj6BzEGfcYRhSNHuhkxbCnJDQQBEEQBEEQBEEQBEEQhBJADkKCIAiCIAiCIAiCIAiCIAiCIAiCqEeQg1BG/Pnnn5Xe6IkTJ6rQ3SEIgiAIGs+pHARBEARBEATJiQTVKyoHlYMgCFlBDkI5dr7U6RIEQRAEjedUDoIgCIIgCILkRILqFZWDykEQhKwhB6GcOl/qdAmCIAiCxnMqB0EQBEEQBEFyIkH1ispB5SAIQh6Qg5AgCIIgCIIgCIIgCIIgCIIgCIIg6hHkICQIgiAIgiAIgiAIgiAIgiAIgiCIegQ5CAmCIAiCIAiCIAiCIAiCIAiCIAiiHkEOQoIgCIIgCIIgCIIgCIIgCIIgCIKoR/y/AAMAojs1gntCkMwAAAAASUVORK5CYII=);
-		background-size: auto 25px;
-	}
-
+/*
+	Dropdown
+*/
+.redactor-dropdown {
+  position: absolute;
+  top: 28px;
+  left: 0;
+  padding: 0;
+  min-width: 220px;
+  max-height: 254px;
+  overflow: auto;
+  background-color: #fff;
+  box-shadow: 0 1px 7px rgba(0, 0, 0, 0.25);
+  font-size: 14px;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+  line-height: 1.6em;
 }
-.redactor_toolbar li a:hover {
-	outline: none;
-	border-color: #98a6ba;
-	border-color: rgba(162, 185, 208, .8);
-	background-color: #d4dce9;
-	background-color: rgba(176, 199, 223, .5);
-}
-.redactor_toolbar li a:active,
-.redactor_toolbar li a.redactor_act {
-	outline: none;
-	border-color: #b5b5b5;
-	background-color: #ddd;
-}
-.redactor_button_disabled {
-	opacity: .3 ;
-}
-.redactor_button_disabled:hover {
-	outline: none;
-	border-color: transparent !important;
-	background-color: transparent !important;
-	cursor: default;
+.redactor-dropdown a {
+  display: block;
+  padding: 10px 15px;
+  color: #000;
+  text-decoration: none;
+  border-bottom: 1px solid rgba(0, 0, 0, 0.07);
+}
+.redactor-dropdown a:last-child {
+  border-bottom: none;
+}
+.redactor-dropdown a:hover {
+  background-color: #1f78d8;
+  color: #fff !important;
+  text-decoration: none;
+}
+.redactor-dropdown a.selected {
+  background-color: #000;
+  color: #fff;
+}
+.redactor-dropdown a.redactor-dropdown-link-inactive,
+.redactor-dropdown a.redactor-dropdown-link-inactive:hover {
+  background: none;
+  cursor: default;
+  color: #000 !important;
+  filter: alpha(opacity=40);
+  -moz-opacity: 0.4;
+  opacity: 0.4;
+}
+.redactor-dropdown a.redactor-dropdown-link-selected {
+  color: #fff;
+  background: #000;
 }
-
 /*
-	BUTTONS
-	step 25px
+	IMAGE BOX
 */
-body .redactor_toolbar li a.redactor_btn_html				{ background-position: 0px; }
-body .redactor_toolbar li a.redactor_btn_formatting		    { background-position: -25px; }
-body .redactor_toolbar li a.redactor_btn_bold				{ background-position: -50px; }
-body .redactor_toolbar li a.redactor_btn_italic			    { background-position: -75px; }
-body .redactor_toolbar li a.redactor_btn_deleted		 	{ background-position: -500px; }
-body .redactor_toolbar li a.redactor_btn_unorderedlist 	    { background-position: -100px; }
-body .redactor_toolbar li a.redactor_btn_orderedlist   	    { background-position: -125px; }
-body .redactor_toolbar li a.redactor_btn_outdent	 		{ background-position: -150px; }
-body .redactor_toolbar li a.redactor_btn_indent		 	  	{ background-position: -175px; }
-body .redactor_toolbar li a.redactor_btn_image		 		{ background-position: -200px; }
-body .redactor_toolbar li a.redactor_btn_video		 		{ background-position: -225px; }
-body .redactor_toolbar li a.redactor_btn_file		 		{ background-position: -250px; }
-body .redactor_toolbar li a.redactor_btn_table		 		{ background-position: -275px; }
-body .redactor_toolbar li a.redactor_btn_link		 		{ background-position: -300px; }
-body .redactor_toolbar li a.redactor_btn_fontcolor		 	{ background-position: -325px; }
-body .redactor_toolbar li a.redactor_btn_backcolor		 	{ background-position: -350px; }
-body .redactor_toolbar li a.redactor_btn_alignleft		  	{ background-position: -375px; }
-body .redactor_toolbar li a.redactor_btn_aligncenter		{ background-position: -400px; }
-body .redactor_toolbar li a.redactor_btn_alignright		  	{ background-position: -425px; }
-body .redactor_toolbar li a.redactor_btn_justify		 	{ background-position: -450px; }
-body .redactor_toolbar li a.redactor_btn_horizontalrule 	{ background-position: -475px; }
-body .redactor_toolbar li a.redactor_btn_underline		 	{ background-position: -525px; }
-
-body .redactor_toolbar li a.redactor_btn_fullscreen		 	{ background-position: -550px; }
-body .redactor_toolbar li a.redactor_btn_normalscreen		{ background-position: -575px; }
-body .redactor_toolbar li a.redactor_btn_clips		 		{ background-position: -600px; }
-
-body .redactor_toolbar li a.redactor_btn_alignment	 		{ background-position: -625px; }
-
-body .redactor_toolbar li a.redactor_btn_fontfamily	 		{ background-position: -650px; }
-body .redactor_toolbar li a.redactor_btn_fontsize	 		{ background-position: -675px; }
-
-body .redactor_toolbar li a.redactor_btn_direction	 		{ background-position: -700px; }
-body .redactor_toolbar li a.redactor_btn_lists		 		{ background-position: -725px; }
-body .redactor_toolbar li a.redactor_btn_font		 		{ background-position: -750px; }
-
-body .redactor_toolbar li a.redactor_btn_h1			 		{ background-position: -775px; }
-body .redactor_toolbar li a.redactor_btn_h2			 		{ background-position: -800px; }
-body .redactor_toolbar li a.redactor_btn_h3			 		{ background-position: -825px; }
-body .redactor_toolbar li a.redactor_btn_quote		 		{ background-position: -850px; }
-body .redactor_toolbar li a.redactor_btn_pre		 		{ background-position: -875px; }
-
+#redactor-image-box {
+  position: relative;
+  max-width: 100%;
+  display: inline-block;
+  line-height: 0;
+  outline: 1px dashed rgba(0, 0, 0, 0.6);
+}
+#redactor-image-editter {
+  position: absolute;
+  z-index: 5;
+  top: 50%;
+  left: 50%;
+  margin-top: -11px;
+  margin-left: -18px;
+  line-height: 1;
+  background-color: #000;
+  color: #fff;
+  font-size: 11px;
+  padding: 7px 10px;
+  cursor: pointer;
+}
+#redactor-image-resizer {
+  position: absolute;
+  z-index: 2;
+  line-height: 1;
+  cursor: nw-resize;
+  bottom: -4px;
+  right: -5px;
+  border: 1px solid #fff;
+  background-color: #000;
+  width: 8px;
+  height: 8px;
+}
 /*
-	Toolbar classes
+	LINK TOOLTIP
 */
-.redactor_format_blockquote {
-	padding-left: 10px;
-	color: #666 !important;
-	font-style: italic;
-}
-.redactor_format_pre {
-	font-family: monospace, sans-serif;
-}
-.redactor_format_h1,
-.redactor_format_h2,
-.redactor_format_h3,
-.redactor_format_h4,
-.redactor_format_h5 {
-	font-weight: bold;
-}
-.redactor_format_h1 {
-	font-size: 30px;
-	line-height: 36px;
-}
-.redactor_format_h2 {
-	font-size: 24px;
-	line-height: 36px;
-}
-.redactor_format_h3 {
-	font-size: 20px;
-	line-height: 30px;
-}
-.redactor_format_h4 {
-	font-size: 16px;
-	line-height: 26px;
-}
-.redactor_format_h5 {
-	font-size: 14px;
-	line-height: 23px;
+.redactor-link-tooltip {
+  position: absolute;
+  z-index: 99;
+  padding: 10px;
+  line-height: 1;
+  display: inline-block;
+  background-color: #000;
+  color: #555 !important;
+}
+.redactor-link-tooltip,
+.redactor-link-tooltip a {
+  font-size: 12px;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+}
+.redactor-link-tooltip a {
+  color: #ccc;
+  margin: 0 5px;
+  text-decoration: none;
+}
+.redactor-link-tooltip a:hover {
+  color: #fff;
 }
-
-
 /*
-	DROPDOWN
+	DROPAREA
 */
-.redactor_dropdown {
-	position: absolute;
-	top: 28px;
-	left: 0;
-	z-index: 2004;
-	padding: 10px;
-	width: 200px;
-	background-color: #fff;
-	box-shadow: 0 1px 5px #bbb;
-	font-size: 13px;
-	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif;
-	line-height: 21px;
-}
-.redactor_separator_drop {
-	padding: 0 !important;
-	border-top: 1px solid #ddd;
-	font-size: 0;
-	line-height: 0;
-}
-.redactor_dropdown a {
-	display: block;
-	padding: 3px 5px;
-	color: #000;
-	text-decoration: none;
-}
-.redactor_dropdown a:hover {
-	background-color: #dde4ef;
-	color: #444 !important;
-	text-decoration: none;
+#redactor-droparea {
+  position: relative;
+  overflow: hidden;
+  padding: 140px 20px;
+  border: 3px dashed rgba(0, 0, 0, 0.1);
+}
+#redactor-droparea.drag-hover {
+  background: rgba(200, 222, 250, 0.75);
+}
+#redactor-droparea.drag-drop {
+  background: rgba(250, 248, 200, 0.5);
+}
+#redactor-droparea-placeholder {
+  text-align: center;
+  font-size: 12px;
+  color: rgba(0, 0, 0, 0.7);
 }
-
-/* MODAL */
-#redactor_modal_overlay {
-	position: fixed;
-	top: 0;
-	left: 0;
-	z-index: 50000;
-	margin: auto;
-	width: 100%;
-	height: 100%;
-
-	background-color: #333 !important;
-	opacity: 0.50;
-	-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
-	filter:alpha(opacity=50);
+/*
+	PROGRESS
+*/
+#redactor-progress {
+  position: fixed;
+  top: 0;
+  left: 0;
+  width: 100%;
+  z-index: 1000000;
+  height: 10px;
 }
-
-#redactor_modal {
-	position: fixed;
-	top: 50%;
-	left: 50%;
-  	z-index: 50001;
-	padding: 0;
-  	border-radius: 3px;
-	background: #f5f5f5;
-	box-shadow: 0px 5px 60px #000;
-	color: #000;
-	text-shadow: 0 1px 0 #fff;
-	font-size: 12px !important;
-	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif;
-
+#redactor-progress span {
+  display: block;
+  width: 100%;
+  height: 100%;
+  background-color: #3d58a8;
+  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
+  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
+  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
+  -webkit-animation: progress-bar-stripes 2s linear infinite;
+  -o-animation: progress-bar-stripes 2s linear infinite;
+  animation: progress-bar-stripes 2s linear infinite;
+  background-size: 40px 40px;
+}
+@-webkit-keyframes progress-bar-stripes {
+  from {
+    background-position: 40px 0;
+  }
+  to {
+    background-position: 0 0;
+  }
+}
+@-o-keyframes progress-bar-stripes {
+  from {
+    background-position: 40px 0;
+  }
+  to {
+    background-position: 0 0;
+  }
+}
+@keyframes progress-bar-stripes {
+  from {
+    background-position: 40px 0;
+  }
+  to {
+    background-position: 0 0;
+  }
 }
-#redactor_modal header {
-	padding: 11px 30px 0 15px;
-	border-radius: 3px 3px 0 0;
-	font-weight: bold;
-	font-size: 12px;
+/*
+	MODAL
+*/
+#redactor-modal-overlay {
+  position: fixed;
+  top: 0;
+  left: 0;
+  margin: auto;
+  overflow: auto;
+  width: 100%;
+  height: 100%;
+  background-color: #000 !important;
+  filter: alpha(opacity=30);
+  -moz-opacity: 0.3;
+  opacity: 0.3;
+}
+#redactor-modal-box {
+  position: fixed;
+  top: 0;
+  left: 0;
+  bottom: 0;
+  right: 0;
+  overflow-x: hidden;
+  overflow-y: auto;
+}
+#redactor-modal {
+  outline: 0;
+  position: relative;
+  margin: auto;
+  margin-bottom: 20px;
+  padding: 0;
+  background: #fff;
+  color: #000;
+  font-size: 14px !important;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+  box-shadow: 0 1px 70px rgba(0, 0, 0, 0.5);
+}
+#redactor-modal header {
+  padding: 30px 40px 5px 40px;
+  font-size: 18px;
+  font-weight: bold;
 }
-#redactor_modal section {
-	padding: 20px 30px;
-
+#redactor-modal section {
+  padding: 30px 40px 50px 40px;
 }
-#redactor_modal_close {
-	position: absolute;
-	top: 5px;
-	right: 5px;
-	width: 20px;
-	height: 20px;
-	color: #777;
-	font-size: 20px;
-	cursor: pointer;
-}
-#redactor_modal_close:hover {
-	color: #000;
-}
-#redactor_modal label {
-	display: block !important;
-	float: none !important;
-	margin: 10px 0 3px 0 !important;
-	padding: 0 !important;
-	font-size: 12px !important;
-}
-#redactor_modal textarea {
-	display: block;
-	margin-top: 4px;
-}
-.redactor_input  {
-	width: 99%;
-	font-size: 14px;
-}
-.redactor_modal_box {
-	overflow: auto;
-	margin-bottom: 10px;
-	height: 350px;
-}
-#redactor_image_box {
-	overflow: auto;
-	margin-bottom: 10px;
-	height: 270px;
-}
-#redactor_image_box_select {
-	display: block;
-	margin-bottom: 15px !important;
-	width: 200px;
-}
-#redactor_image_box img {
-	margin-right: 10px;
-	margin-bottom: 10px;
-	max-width: 100px;
-	cursor: pointer;
-}
-#redactor_tabs {
-	margin-bottom: 18px;
-}
-#redactor_tabs a {
-	display: inline-block;
-	margin-right: 5px;
-	padding: 4px 14px;
-	border: 1px solid #d2d2d2;
-	border-radius: 10px;
-	background-color: #fff;
-	color: #000;
-	text-decoration: none;
-	font-size: 12px;
-	line-height: 1;
-}
-#redactor_tabs a:hover, #redactor_tabs a.redactor_tabs_act {
-	padding: 5px 15px;
-	border: none;
-	background-color: #ddd;
-	box-shadow: 0 1px 2px rgba(0, 0, 0, .4) inset;
-	color: #777 !important;
-	text-decoration: none !important;
-	text-shadow: 0 1px 0 #eee;
-}
-#redactor_modal footer {
-	padding: 9px 30px 20px 30px;
-	border-radius: 0 0 3px 3px;
-	text-align: right;
+#redactor-modal label {
+  display: block;
+  float: none !important;
+  margin: 15px 0 3px 0 !important;
+  padding: 0;
+}
+#redactor-modal input[type="radio"],
+#redactor-modal input[type="checkbox"] {
+  position: relative;
+  top: -1px;
+}
+#redactor-modal select {
+  width: 100%;
+}
+#redactor-modal input[type="text"],
+#redactor-modal input[type="password"],
+#redactor-modal input[type="email"],
+#redactor-modal input[type="url"],
+#redactor-modal textarea {
+  position: relative;
+  z-index: 2;
+  margin: 0;
+  padding: 5px 4px;
+  height: 28px;
+  border: 1px solid #ccc;
+  border-radius: 1px;
+  background-color: white;
+  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;
+  color: #333;
+  width: 100%;
+  font-size: 14px;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+  -moz-transition: border 0.3s ease-in;
+  transition: border 0.3s ease-in;
+}
+#redactor-modal input[type="text"]:focus,
+#redactor-modal input[type="password"]:focus,
+#redactor-modal input[type="email"]:focus,
+#redactor-modal input[type="url"]:focus,
+#redactor-modal textarea:focus {
+  outline: none;
+  border-color: #5ca9e4;
+  box-shadow: 0 0 0 2px rgba(70, 161, 231, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) inset;
+}
+#redactor-modal input[type="text"].redactor-input-error,
+#redactor-modal input[type="password"].redactor-input-error,
+#redactor-modal input[type="email"].redactor-input-error,
+#redactor-modal input[type="url"].redactor-input-error,
+#redactor-modal textarea.redactor-input-error {
+  border-color: #e82f2f;
+  box-shadow: 0 0 0 2px rgba(232, 47, 47, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) inset;
 }
-
-#redactor_modal input[type="radio"],
-#redactor_modal input[type="checkbox"] {
-	position: relative;
-	top: -1px;
-}
-#redactor_modal input[type="text"],
-#redactor_modal input[type="password"],
-#redactor_modal input[type="email"],
-#redactor_modal textarea {
-	position: relative;
-	z-index: 2;
-	margin: 0;
-	padding: 1px 2px;
-	height: 23px;
-	border: 1px solid #ccc;
-	border-radius: 1px;
-	background-color: white;
-	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;
-	color: #333;
-	font-size: 13px;
-	font-family: Helvetica, Arial, Tahoma, sans-serif;
-	line-height: 1;
-	-webkit-transition: border 0.3s ease-in;
-	-moz-transition: border 0.3s ease-in;
-	-ms-transition: border 0.3s ease-in;
-	-o-transition: border 0.3s ease-in;
-	transition: border 0.3s ease-in;
-}
-#redactor_modal textarea {
-	line-height: 1.4em;
-}
-#redactor_modal input:focus,
-#redactor_modal textarea:focus {
-	outline: none;
-	border-color: #5ca9e4;
-	box-shadow: 0 0 0 2px rgba(70, 161, 231, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2) inset;
-}
-.redactor_modal_btn {
-	position: relative;
-	display: inline-block;
-	margin-left: 8px;
-	padding: 6px 16px 5px 16px;
-	outline: none;
-	border: none;
-	border-radius: 3px;
-	background-color: #ddd;
-	color: #000;
-	text-align: center;
-	text-decoration: none;
-	font-weight: normal;
-	font-size: 12px;
-	font-family: Helvetica, Arial, Verdana, Tahoma, sans-serif;
-	line-height: 1;
-	cursor: pointer;
-}
-.redactor_modal_btn:hover {
-	color: #777;
-	background: none;
-	background: #bbb;
-	text-decoration: none;
-}
-.redactor_modal_delete_btn {
-	background: none;
-	color: #fff;
-	background-color: #b52525;
-}
-.redactor_modal_delete_btn:hover {
-	color: rgba(255, 255, 255, .6);
-	background-color: #881b1b;
-}
-.redactor_modal_action_btn {
-	background: none;
-	color: #fff;
-	background-color: #2461b5;
-}
-.redactor_modal_action_btn:hover {
-	color: rgba(255, 255, 255, .6);
-	background-color: #1a4580;
+#redactor-modal textarea {
+  display: block;
+  margin-top: 4px;
+  line-height: 1.4em;
+}
+/*
+	Tabs in Modal
+*/
+#redactor-modal-tabber {
+  margin-bottom: 15px;
+  font-size: 12px;
+}
+#redactor-modal-tabber a {
+  border: 1px solid #ddd;
+  line-height: 1;
+  padding: 8px 15px;
+  margin-right: -1px;
+  text-decoration: none;
+  color: #000;
+}
+#redactor-modal-tabber a:hover {
+  background-color: #1f78d8;
+  border-color: #1f78d8;
+  color: #fff;
+}
+#redactor-modal-tabber a.active {
+  cursor: default;
+  background-color: #ddd;
+  border-color: #ddd;
+  color: rgba(0, 0, 0, 0.6);
+}
+/*
+	List in Modal
+*/
+#redactor-modal #redactor-modal-list {
+  margin-left: 0;
+  padding-left: 0;
+  list-style: none;
+  max-height: 250px;
+  overflow-x: auto;
+}
+#redactor-modal #redactor-modal-list li {
+  border-bottom: 1px solid #ddd;
+}
+#redactor-modal #redactor-modal-list li:last-child {
+  border-bottom: none;
+}
+#redactor-modal #redactor-modal-list a {
+  padding: 10px 5px;
+  color: #000;
+  text-decoration: none;
+  font-size: 13px;
+  display: block;
+  position: relative;
 }
+#redactor-modal #redactor-modal-list a:hover {
+  background-color: #eee;
+}
+#redactor-modal-close {
+  position: absolute;
+  top: 10px;
+  right: 10px;
+  width: 30px;
+  height: 30px;
+  text-align: right;
+  color: #bbb;
+  font-size: 30px;
+  font-weight: 300;
+  cursor: pointer;
+  -webkit-appearance: none;
+  padding: 0;
+  border: 0;
+  background: 0;
+  outline: none;
+}
+#redactor-modal-close:hover {
+  color: #000;
+}
+#redactor-modal footer button {
+  position: relative;
+  width: 100%;
+  padding: 14px 16px;
+  margin: 0;
+  outline: none;
+  border: none;
+  background-color: #ddd;
+  color: #000;
+  text-align: center;
+  text-decoration: none;
+  font-weight: normal;
+  font-size: 12px;
+  font-family: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+  line-height: 1;
+  cursor: pointer;
+}
+#redactor-modal footer button:hover {
+  color: #777;
+  background: none;
+  background: #bbb;
+  text-decoration: none;
+}
+#redactor-modal footer button.redactor-modal-delete-btn {
+  background: none;
+  color: #fff;
+  background-color: #b52525;
+}
+#redactor-modal footer button.redactor-modal-delete-btn:hover {
+  color: rgba(255, 255, 255, 0.6);
+  background-color: #881b1b;
+}
+#redactor-modal footer button.redactor-modal-action-btn {
+  background: none;
+  color: #fff;
+  background-color: #2461b5;
+}
+#redactor-modal footer button.redactor-modal-action-btn:hover {
+  color: rgba(255, 255, 255, 0.6);
+  background-color: #1a4580;
+}
+/*
+	##############################################
 
-/* Drag and Drop Area */
-.redactor_droparea {
-	position: relative;
-    margin: auto;
-    margin-bottom: 5px;
-    width: 100%;
-}
-.redactor_droparea .redactor_dropareabox {
-	position: relative;
-	z-index: 1;
-    padding: 60px 0;
-    width: 99%;
-    border: 2px dashed #bbb;
-    background-color: #fff;
-    text-align: center;
-}
-.redactor_droparea .redactor_dropareabox, .redactor_dropalternative {
-    color: #555;
-    font-size: 12px;
-}
-.redactor_dropalternative {
-	margin: 4px 0 2px 0;
-}
-.redactor_dropareabox.hover {
-    border-color: #aaa;
-    background: #efe3b8;
-}
-.redactor_dropareabox.error {
-    border-color: #dcc3c3;
-    background: #f7e5e5;
-}
-.redactor_dropareabox.drop {
-    border-color: #e0e5d6;
-    background: #f4f4ee;
+	DROPDOWN FORMATTING
+
+	##############################################
+*/
+.redactor-dropdown .redactor-formatting-blockquote {
+  color: rgba(0, 0, 0, 0.4);
+  font-style: italic;
+}
+.redactor-dropdown .redactor-formatting-pre {
+  font-family: monospace, sans-serif;
+}
+.redactor-dropdown .redactor-formatting-h1 {
+  font-size: 36px;
+  line-height: 36px;
+  font-weight: bold;
+}
+.redactor-dropdown .redactor-formatting-h2 {
+  font-size: 24px;
+  line-height: 36px;
+  font-weight: bold;
+}
+.redactor-dropdown .redactor-formatting-h3 {
+  font-size: 21px;
+  line-height: 30px;
+  font-weight: bold;
+}
+.redactor-dropdown .redactor-formatting-h4 {
+  font-size: 18px;
+  line-height: 26px;
+  font-weight: bold;
+}
+.redactor-dropdown .redactor-formatting-h5 {
+  font-size: 16px;
+  line-height: 23px;
+  font-weight: bold;
 }
+/*
+	##############################################
 
-/* =Progress
------------------------------------------------------------------------------*/
-#redactor-progress-drag {
-	position: fixed;
-	top: 50%;
-	left: 50%;
-	width: 200px;
-	margin-left: -130px;
-	margin-top: -35px;
-	z-index: 10000;
-	padding: 30px;
-	background: rgba(0, 0, 0, .7);
-	box-shadow: none;
-}
-.redactor-progress {
-	height: 12px;
-	overflow: hidden;
-	background-color: #f4f4f4;
-	border-radius: 3px;
-	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
-	margin-bottom: 1.5em;
-}
-.redactor-progress .redactor-progress-bar {
-	top: 1px;
-	left: 1px;
-	position: relative;
-	background-color: #55aaff;
-	width: 0;
-	height: 12px;
-	-webkit-box-sizing: border-box;
-	-moz-box-sizing: border-box;
-	-ms-box-sizing: border-box;
-	box-sizing: border-box;
+	 CONTENT STYLES
 
+	##############################################
+*/
+.redactor-editor code,
+.redactor-editor pre {
+  font-family: Menlo, Monaco, monospace, sans-serif !important;
+  cursor: text;
+}
+.redactor-editor div,
+.redactor-editor p,
+.redactor-editor ul,
+.redactor-editor ol,
+.redactor-editor table,
+.redactor-editor dl,
+.redactor-editor blockquote,
+.redactor-editor pre {
+  font-size: 14px;
+  line-height: 1.6em;
+}
+.redactor-editor a {
+  color: #15c;
+  text-decoration: underline;
+}
+.redactor-editor object,
+.redactor-editor embed,
+.redactor-editor video,
+.redactor-editor img {
+  max-width: 100%;
+  width: auto;
+}
+.redactor-editor video,
+.redactor-editor img {
+  height: auto;
+}
+.redactor-editor div,
+.redactor-editor p,
+.redactor-editor ul,
+.redactor-editor ol,
+.redactor-editor table,
+.redactor-editor dl,
+.redactor-editor figure,
+.redactor-editor blockquote,
+.redactor-editor pre {
+  margin: 0;
+  margin-bottom: 15px;
+  border: none;
+  background: none;
+  box-shadow: none;
+}
+.redactor-editor iframe,
+.redactor-editor object,
+.redactor-editor hr {
+  margin-bottom: 15px;
+}
+.redactor-editor blockquote {
+  margin-left: 1.6em !important;
+  padding: 0;
+  text-align: left;
+  color: #777;
+  font-style: italic;
+}
+.redactor-editor blockquote:before,
+.redactor-editor blockquote:after {
+  content: '';
+}
+.redactor-editor ul,
+.redactor-editor ol {
+  padding-left: 2em;
+}
+.redactor-editor ul ul,
+.redactor-editor ol ol,
+.redactor-editor ul ol,
+.redactor-editor ol ul {
+  margin: 2px;
+  padding: 0;
+  padding-left: 2em;
+  border: none;
+}
+.redactor-editor ol ol li {
+  list-style-type: lower-alpha;
+}
+.redactor-editor ol ol ol li {
+  list-style-type: lower-roman;
+}
+.redactor-editor dl dt {
+  font-weight: bold;
+}
+.redactor-editor dd {
+  margin-left: 1em;
+}
+.redactor-editor table {
+  border-collapse: collapse;
+  font-size: 1em;
+  width: 100%;
+}
+.redactor-editor table td,
+.redactor-editor table th {
+  padding: 5px;
+  border: 1px solid #ddd;
+  vertical-align: top;
+}
+.redactor-editor table thead td,
+.redactor-editor table th {
+  font-weight: bold;
+  border-bottom-color: #888;
+}
+.redactor-editor code {
+  background-color: #d8d7d7;
+}
+.redactor-editor pre {
+  padding: 1em;
+  border: 1px solid #ddd;
+  border-radius: 3px;
+  background: #f8f8f8;
+  font-size: 90%;
 }
-.redactor-progress-striped .redactor-progress-bar {
-	background-image: url('data:image/gif;base64,R0lGODlhIAAQAIABAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExODE3QTgyOEM0MzAwRkUyMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY2MUMyQTlDMzgxMUUwOUFFQ0M4MEYwM0YzNUE2RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY2MUMyOTlDMzgxMUUwOUFFQ0M4MEYwM0YzNUE2RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTE4MTdBODI4QzQzMDBGRTIzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAxODAxMTc0MDcyMDY4MTE4MTdBODI4QzQzMDBGRTIzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQoAAQAsAAAAACAAEAAAAiwMjqkQ7Q/bmijaR+ndee7bLZ8VKmNUJieUVqvTHi8cz1Jtx0yOz7pt6L10BQAh+QQJCgABACwAAAAAIAAQAAACLYwNqctwD2GbKtpH6d157ts1nxUyY1Qup5QmK9Y6LxLPdGsHsTvv8uuzBXuhAgAh+QQJCgABACwAAAAAIAAQAAACLIx/oMsNCKNxdMk7K8VXbx55DhiKDAmZJ5qoFhu4LysrcFzf9QPvet4D0igFACH5BAkKAAEALAAAAAAgABAAAAIsjI8Hy+2QYnyUyWtqxVdvnngUGIoOiZgnmqkWG7gvKy9wXN81BO963gPSGAUAIfkECQoAAQAsAAAAACAAEAAAAixEjqkB7Q/bmijaR+ndee7bLZ8VKmNUJieUVqvTHi8cz1Jtx0yOz7pt6L10BQAh+QQJCgABACwAAAAAIAAQAAACLYQdqctxD2GbKtpH6d157ts1nxUyY1Qup5QmK9Y6LxLPdGsDsTvv8uuzBXuhAgAh+QQJCgABACwAAAAAIAAQAAACLIR/ocsdCKNxdMk7K8VXbx55DhiKDAmZJ5qoFgu4LysrcFzf9QPvet4D0igFACH5BAUKAAEALAAAAAAgABAAAAIshI8Xy+2RYnyUyWtqxVdvnngUGIoOiZgnmqkWC7gvKy9wXN81BO963gPSGAUAOw==');
+.redactor-editor hr {
+  display: block;
+  height: 1px;
+  border: 0;
+  border-top: 1px solid #ccc;
 }
-.redactor-progress-striped .redactor-progress-bar:after {
-	content: "";
-	position: absolute;
-	top: 0;
-	right: 0;
-	bottom: 0;
-	left: 0;
-	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFRTE5QjlCQTlDMkQxMUUwOUFFQ0M4MEYwM0YzNUE2RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNkRFQUIzNjlDMkUxMUUwOUFFQ0M4MEYwM0YzNUE2RCI+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z3JhZGllbnQ8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRTE5QjlCODlDMkQxMUUwOUFFQ0M4MEYwM0YzNUE2RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRTE5QjlCOTlDMkQxMUUwOUFFQ0M4MEYwM0YzNUE2RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq477Q0AAAD2SURBVHjaxFIxDsIwDLRF/1AmRp7AM9iYWHkD76AP6h9Qi1SGfqAMqGJg6XA4jts0RUwZiKLEsZ3L+Rwmoi0lDC6Ky4rAMuGO5DY5iuWH93oDegMuK8QA7JIYCMDpvwDDMBzNHCGtONYq2enjHKYLMObCp7dtu/+FDppDgyJpTemsrm/9l7L2ku4aUy4BTEmKR1hmVXV9OjfsqlqC7irAhBKxDnmOQdPc+ynKMXdenEELAFmzrnu8RoK6jpRhHkGJmFgdXmsByNf5Wx+fJPbigEI3OKrB77Bfy2VZzppqC0IfAtlIAusC9CNtUn/iIRXgnALwEWAA/+5+ZNOapmcAAAAASUVORK5CYII=');
+.redactor-editor h1,
+.redactor-editor h2,
+.redactor-editor h3,
+.redactor-editor h4,
+.redactor-editor h5,
+.redactor-editor h6 {
+  font-weight: bold;
+  color: #000;
+  padding: 0;
+  background: none;
+  text-rendering: optimizeLegibility;
+  margin: 0 0 .5em 0;
+}
+.redactor-editor h1,
+.redactor-editor h2,
+.redactor-editor h3,
+.redactor-editor h4 {
+  line-height: 1.3;
+}
+.redactor-editor h1 {
+  font-size: 36px;
+}
+.redactor-editor h2 {
+  font-size: 24px;
+  margin-bottom: .7em;
+}
+.redactor-editor h3 {
+  font-size: 21px;
+}
+.redactor-editor h4 {
+  font-size: 18px;
+}
+.redactor-editor h5 {
+  font-size: 16px;
+}
+.redactor-editor h6 {
+  font-size: 12px;
+  text-transform: uppercase;
 }
-
-
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,10 +1,10 @@
 /*
-	Redactor v9.1.9
-	Updated: Dec 12, 2013
+	Redactor 10.2.3
+	Updated: August 15, 2015
 
 	http://imperavi.com/redactor/
 
-	Copyright (c) 2009-2013, Imperavi LLC.
+	Copyright (c) 2009-2015, Imperavi LLC.
 	License: http://imperavi.com/redactor/license/
 
 	Usage: $('#content').redactor();
@@ -12,24 +12,22 @@
 
 (function($)
 {
-	var uuid = 0;
 
-	"use strict";
+	'use strict';
 
-	var Range = function(range)
+	if (!Function.prototype.bind)
 	{
-		this[0] = range.startOffset;
-		this[1] = range.endOffset;
-
-		this.range = range;
-
-		return this;
-	};
+		Function.prototype.bind = function(scope)
+		{
+			var fn = this;
+			return function()
+			{
+				return fn.apply(scope);
+			};
+		};
+	}
 
-	Range.prototype.equals = function()
-	{
-		return this[0] === this[1];
-	};
+	var uuid = 0;
 
 	// Plugin
 	$.fn.redactor = function(options)
@@ -42,19 +40,41 @@
 			this.each(function()
 			{
 				var instance = $.data(this, 'redactor');
-				if (typeof instance !== 'undefined' && $.isFunction(instance[options]))
+				var func;
+
+				if (options.search(/\./) != '-1')
+				{
+					func = options.split('.');
+					if (typeof instance[func[0]] != 'undefined')
+					{
+						func = instance[func[0]][func[1]];
+					}
+				}
+				else
+				{
+					func = instance[options];
+				}
+
+				if (typeof instance !== 'undefined' && $.isFunction(func))
+				{
+					var methodVal = func.apply(instance, args);
+					if (methodVal !== undefined && methodVal !== instance)
+					{
+						val.push(methodVal);
+					}
+				}
+				else
 				{
-					var methodVal = instance[options].apply(instance, args);
-					if (methodVal !== undefined && methodVal !== instance) val.push(methodVal);
+					$.error('No such method "' + options + '" for Redactor');
 				}
-				else return $.error('No such method "' + options + '" for Redactor');
 			});
 		}
 		else
 		{
 			this.each(function()
 			{
-				if (!$.data(this, 'redactor')) $.data(this, 'redactor', Redactor(this, options));
+				$.data(this, 'redactor', {});
+				$.data(this, 'redactor', Redactor(this, options));
 			});
 		}
 
@@ -70,216 +90,261 @@
 		return new Redactor.prototype.init(el, options);
 	}
 
+	// Functionality
 	$.Redactor = Redactor;
-	$.Redactor.VERSION = '9.1.9';
-	$.Redactor.opts = {
+	$.Redactor.VERSION = '10.2.3';
+	$.Redactor.modules = ['alignment', 'autosave', 'block', 'buffer', 'build', 'button',
+						  'caret', 'clean', 'code', 'core', 'dropdown', 'file', 'focus',
+						  'image', 'indent', 'inline', 'insert', 'keydown', 'keyup',
+						  'lang', 'line', 'link', 'linkify', 'list', 'modal', 'observe', 'paragraphize',
+						  'paste', 'placeholder', 'progress', 'selection', 'shortcuts',
+						  'tabifier', 'tidy',  'toolbar', 'upload', 'utils'];
 
-			// settings
-			rangy: false,
+	$.Redactor.opts = {
 
-			iframe: false,
-			fullpage: false,
-			css: false, // url
-
-			lang: 'en',
-			direction: 'ltr', // ltr or rtl
-
-			placeholder: false,
-
-			wym: false,
-			mobile: true,
-			cleanup: true,
-			tidyHtml: true,
-			pastePlainText: false,
-			removeEmptyTags: true,
-			templateVars: false,
-			xhtml: false,
-
-			visual: true,
-			focus: false,
-			tabindex: false,
-			autoresize: true,
-			minHeight: false,
-			maxHeight: false,
-			shortcuts: true,
-
-			autosave: false, // false or url
-			autosaveInterval: 60, // seconds
-
-			plugins: false, // array
-
-			linkAnchor: true,
-			linkEmail: true,
-			linkProtocol: 'http://',
-			linkNofollow: false,
-			linkSize: 50,
-
-			imageFloatMargin: '10px',
-			imageGetJson: false, // url (ex. /folder/images.json ) or false
-
-			imageUpload: false, // url
-			imageUploadParam: 'file', // input name
-			fileUpload: false, // url
-			fileUploadParam: 'file', // input name
-			clipboardUpload: true, // or false
-			clipboardUploadUrl: false, // url
-			dragUpload: true, // false
-
-			dnbImageTypes: ['image/png', 'image/jpeg', 'image/gif'], // or false
-
-			s3: false,
-			uploadFields: false,
-
-			observeImages: true,
-			observeLinks: true,
-
-			modalOverlay: true,
-
-			tabSpaces: false, // true or number of spaces
-			tabFocus: true,
-
-			air: false,
-			airButtons: ['formatting', '|', 'bold', 'italic', 'deleted', '|', 'unorderedlist', 'orderedlist', 'outdent', 'indent'],
-
-			toolbar: true,
-			toolbarFixed: false,
-			toolbarFixedTarget: document,
-			toolbarFixedTopOffset: 0, // pixels
-			toolbarFixedBox: false,
-			toolbarExternal: false, // ID selector
-			buttonSource: true,
-
-			buttonSeparator: '<li class="redactor_separator"></li>',
-
-			buttonsCustom: {},
-			buttonsAdd: [],
-			buttons: ['html', '|', 'formatting', '|', 'bold', 'italic', 'deleted', '|', 'unorderedlist', 'orderedlist', 'outdent', 'indent', '|', 'image', 'video', 'file', 'table', 'link', '|', 'alignment', '|', 'horizontalrule'], // 'underline', 'alignleft', 'aligncenter', 'alignright', 'justify'
-
-			activeButtons: ['deleted', 'italic', 'bold', 'underline', 'unorderedlist', 'orderedlist', 'alignleft', 'aligncenter', 'alignright', 'justify', 'table'],
-			activeButtonsStates: {
-				b: 'bold',
-				strong: 'bold',
-				i: 'italic',
-				em: 'italic',
-				del: 'deleted',
-				strike: 'deleted',
-				ul: 'unorderedlist',
-				ol: 'orderedlist',
-				u: 'underline',
-				tr: 'table',
-				td: 'table',
-				table: 'table'
-			},
-			activeButtonsAdd: false, // object, ex.: { tag: 'buttonName' }
-
-			formattingTags: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],
-
-			linebreaks: false,
-			paragraphy: true,
-			convertDivs: true,
-			convertLinks: true,
-			convertImageLinks: false,
-			convertVideoLinks: false,
-			formattingPre: false,
-			phpTags: false,
-
-			allowedTags: false,
-			deniedTags: ['html', 'head', 'link', 'body', 'meta', 'script', 'style', 'applet'],
-
-			boldTag: 'strong',
-			italicTag: 'em',
-
-			// private
-			indentValue: 20,
-			buffer: [],
-			rebuffer: [],
-			textareamode: false,
-			emptyHtml: '<p>&#x200b;</p>',
-			invisibleSpace: '&#x200b;',
-			rBlockTest: /^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,
-			alignmentTags: ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'DD', 'DL', 'DT', 'DIV', 'TD',
-								'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'ADDRESS', 'SECTION',
-								'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE'],
-			ownLine: ['area', 'body', 'head', 'hr', 'i?frame', 'link', 'meta', 'noscript', 'style', 'script', 'table', 'tbody', 'thead', 'tfoot'],
-			contOwnLine: ['li', 'dt', 'dt', 'h[1-6]', 'option', 'script'],
-			newLevel: ['blockquote', 'div', 'dl', 'fieldset', 'form', 'frameset', 'map', 'ol', 'p', 'pre', 'select', 'td', 'th', 'tr', 'ul'],
-			blockLevelElements: ['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'DD', 'DL', 'DT', 'DIV', 'LI',
-								'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'PRE', 'ADDRESS', 'SECTION',
-								'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE', 'TD'],
-			// lang
-			langs: {
-				en: {
-					html: 'HTML',
-					video: 'Insert Video',
-					image: 'Insert Image',
-					table: 'Table',
-					link: 'Link',
-					link_insert: 'Insert link',
-					link_edit: 'Edit link',
-					unlink: 'Unlink',
-					formatting: 'Formatting',
-					paragraph: 'Normal text',
-					quote: 'Quote',
-					code: 'Code',
-					header1: 'Header 1',
-					header2: 'Header 2',
-					header3: 'Header 3',
-					header4: 'Header 4',
-					header5: 'Header 5',
-					bold: 'Bold',
-					italic: 'Italic',
-					fontcolor: 'Font Color',
-					backcolor: 'Back Color',
-					unorderedlist: 'Unordered List',
-					orderedlist: 'Ordered List',
-					outdent: 'Outdent',
-					indent: 'Indent',
-					cancel: 'Cancel',
-					insert: 'Insert',
-					save: 'Save',
-					_delete: 'Delete',
-					insert_table: 'Insert Table',
-					insert_row_above: 'Add Row Above',
-					insert_row_below: 'Add Row Below',
-					insert_column_left: 'Add Column Left',
-					insert_column_right: 'Add Column Right',
-					delete_column: 'Delete Column',
-					delete_row: 'Delete Row',
-					delete_table: 'Delete Table',
-					rows: 'Rows',
-					columns: 'Columns',
-					add_head: 'Add Head',
-					delete_head: 'Delete Head',
-					title: 'Title',
-					image_position: 'Position',
-					none: 'None',
-					left: 'Left',
-					right: 'Right',
-					image_web_link: 'Image Web Link',
-					text: 'Text',
-					mailto: 'Email',
-					web: 'URL',
-					video_html_code: 'Video Embed Code',
-					file: 'Insert File',
-					upload: 'Upload',
-					download: 'Download',
-					choose: 'Choose',
-					or_choose: 'Or choose',
-					drop_file_here: 'Drop file here',
-					align_left: 'Align text to the left',
-					align_center: 'Center text',
-					align_right: 'Align text to the right',
-					align_justify: 'Justify text',
-					horizontalrule: 'Insert Horizontal Rule',
-					deleted: 'Deleted',
-					anchor: 'Anchor',
-					link_new_tab: 'Open link in new tab',
-					underline: 'Underline',
-					alignment: 'Alignment',
-					filename: 'Name (optional)',
-					edit: 'Edit'
-				}
+		// settings
+		lang: 'en',
+		direction: 'ltr', // ltr or rtl
+
+		plugins: false, // array
+
+		focus: false,
+		focusEnd: false,
+
+		placeholder: false,
+
+		visual: true,
+		tabindex: false,
+
+		minHeight: false,
+		maxHeight: false,
+
+		linebreaks: false,
+		replaceDivs: true,
+		paragraphize: true,
+		cleanStyleOnEnter: false,
+		enterKey: true,
+
+		cleanOnPaste: true,
+		cleanSpaces: true,
+		pastePlainText: false,
+
+		autosave: false, // false or url
+		autosaveName: false,
+		autosaveInterval: 60, // seconds
+		autosaveOnChange: false,
+		autosaveFields: false,
+
+		linkTooltip: true,
+		linkProtocol: 'http',
+		linkNofollow: false,
+		linkSize: 50,
+
+		imageEditable: true,
+		imageLink: true,
+		imagePosition: true,
+		imageFloatMargin: '10px',
+		imageResizable: true,
+
+		imageUpload: null,
+		imageUploadParam: 'file',
+
+		uploadImageField: false,
+
+		dragImageUpload: true,
+
+		fileUpload: null,
+		fileUploadParam: 'file',
+
+		dragFileUpload: true,
+
+		s3: false,
+
+		convertLinks: true,
+		convertUrlLinks: true,
+		convertImageLinks: true,
+		convertVideoLinks: true,
+
+		preSpaces: 4, // or false
+		tabAsSpaces: false, // true or number of spaces
+		tabKey: true,
+
+		scrollTarget: false,
+
+		toolbar: true,
+		toolbarFixed: true,
+		toolbarFixedTarget: document,
+		toolbarFixedTopOffset: 0, // pixels
+		toolbarExternal: false, // ID selector
+		toolbarOverflow: false,
+
+		source: true,
+		buttons: ['html', 'formatting', 'bold', 'italic', 'deleted', 'unorderedlist', 'orderedlist',
+				  'outdent', 'indent', 'image', 'file', 'link', 'alignment', 'horizontalrule'], // + 'underline'
+
+		buttonsHide: [],
+		buttonsHideOnMobile: [],
+
+		formatting: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],
+		formattingAdd: false,
+
+		tabifier: true,
+
+		deniedTags: ['script', 'style'],
+		allowedTags: false, // or array
+
+		paragraphizeBlocks: ['table', 'div', 'pre', 'form', 'ul', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'dl', 'blockquote', 'figcaption',
+							'address', 'section', 'header', 'footer', 'aside', 'article', 'object', 'style', 'script', 'iframe', 'select', 'input', 'textarea',
+							'button', 'option', 'map', 'area', 'math', 'hr', 'fieldset', 'legend', 'hgroup', 'nav', 'figure', 'details', 'menu', 'summary', 'p'],
+
+		removeComments: false,
+		replaceTags: [
+			['strike', 'del'],
+			['b', 'strong']
+		],
+		replaceStyles: [
+            ['font-weight:\\s?bold', "strong"],
+            ['font-style:\\s?italic', "em"],
+            ['text-decoration:\\s?underline', "u"],
+            ['text-decoration:\\s?line-through', 'del']
+        ],
+        removeDataAttr: false,
+
+		removeAttr: false, // or multi array
+		allowedAttr: false, // or multi array
+
+		removeWithoutAttr: ['span'], // or false
+		removeEmpty: ['p'], // or false;
+
+		activeButtons: ['deleted', 'italic', 'bold', 'underline', 'unorderedlist', 'orderedlist',
+						'alignleft', 'aligncenter', 'alignright', 'justify'],
+		activeButtonsStates: {
+			b: 'bold',
+			strong: 'bold',
+			i: 'italic',
+			em: 'italic',
+			del: 'deleted',
+			strike: 'deleted',
+			ul: 'unorderedlist',
+			ol: 'orderedlist',
+			u: 'underline'
+		},
+
+		shortcuts: {
+			'ctrl+shift+m, meta+shift+m': { func: 'inline.removeFormat' },
+			'ctrl+b, meta+b': { func: 'inline.format', params: ['bold'] },
+			'ctrl+i, meta+i': { func: 'inline.format', params: ['italic'] },
+			'ctrl+h, meta+h': { func: 'inline.format', params: ['superscript'] },
+			'ctrl+l, meta+l': { func: 'inline.format', params: ['subscript'] },
+			'ctrl+k, meta+k': { func: 'link.show' },
+			'ctrl+shift+7':   { func: 'list.toggle', params: ['orderedlist'] },
+			'ctrl+shift+8':   { func: 'list.toggle', params: ['unorderedlist'] }
+		},
+		shortcutsAdd: false,
+
+		// private
+		buffer: [],
+		rebuffer: [],
+		emptyHtml: '<p>&#x200b;</p>',
+		invisibleSpace: '&#x200b;',
+		imageTypes: ['image/png', 'image/jpeg', 'image/gif'],
+		indentValue: 20,
+		verifiedTags: 		['a', 'img', 'b', 'strong', 'sub', 'sup', 'i', 'em', 'u', 'small', 'strike', 'del', 'cite', 'ul', 'ol', 'li'], // and for span tag special rule
+		inlineTags: 		['strong', 'b', 'u', 'em', 'i', 'code', 'del', 'ins', 'samp', 'kbd', 'sup', 'sub', 'mark', 'var', 'cite', 'small'],
+		alignmentTags: 		['P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6',  'DL', 'DT', 'DD', 'DIV', 'TD', 'BLOCKQUOTE', 'OUTPUT', 'FIGCAPTION', 'ADDRESS', 'SECTION', 'HEADER', 'FOOTER', 'ASIDE', 'ARTICLE'],
+		blockLevelElements: ['PRE', 'UL', 'OL', 'LI'],
+		highContrast: false,
+		observe: {
+			dropdowns: []
+		},
+
+		// lang
+		langs: {
+			en: {
+				html: 'HTML',
+				video: 'Insert Video',
+				image: 'Insert Image',
+				table: 'Table',
+				link: 'Link',
+				link_insert: 'Insert link',
+				link_edit: 'Edit link',
+				unlink: 'Unlink',
+				formatting: 'Formatting',
+				paragraph: 'Normal text',
+				quote: 'Quote',
+				code: 'Code',
+				header1: 'Header 1',
+				header2: 'Header 2',
+				header3: 'Header 3',
+				header4: 'Header 4',
+				header5: 'Header 5',
+				bold: 'Bold',
+				italic: 'Italic',
+				fontcolor: 'Font Color',
+				backcolor: 'Back Color',
+				unorderedlist: 'Unordered List',
+				orderedlist: 'Ordered List',
+				outdent: 'Outdent',
+				indent: 'Indent',
+				cancel: 'Cancel',
+				insert: 'Insert',
+				save: 'Save',
+				_delete: 'Delete',
+				insert_table: 'Insert Table',
+				insert_row_above: 'Add Row Above',
+				insert_row_below: 'Add Row Below',
+				insert_column_left: 'Add Column Left',
+				insert_column_right: 'Add Column Right',
+				delete_column: 'Delete Column',
+				delete_row: 'Delete Row',
+				delete_table: 'Delete Table',
+				rows: 'Rows',
+				columns: 'Columns',
+				add_head: 'Add Head',
+				delete_head: 'Delete Head',
+				title: 'Title',
+				image_position: 'Position',
+				none: 'None',
+				left: 'Left',
+				right: 'Right',
+				center: 'Center',
+				image_web_link: 'Image Web Link',
+				text: 'Text',
+				mailto: 'Email',
+				web: 'URL',
+				video_html_code: 'Video Embed Code or Youtube/Vimeo Link',
+				file: 'Insert File',
+				upload: 'Upload',
+				download: 'Download',
+				choose: 'Choose',
+				or_choose: 'Or choose',
+				drop_file_here: 'Drop file here',
+				align_left: 'Align text to the left',
+				align_center: 'Center text',
+				align_right: 'Align text to the right',
+				align_justify: 'Justify text',
+				horizontalrule: 'Insert Horizontal Rule',
+				deleted: 'Deleted',
+				anchor: 'Anchor',
+				link_new_tab: 'Open link in new tab',
+				underline: 'Underline',
+				alignment: 'Alignment',
+				filename: 'Name (optional)',
+				edit: 'Edit',
+				upload_label: 'Drop file here or '
+			}
+		},
+
+		linkify: {
+			regexps: {
+				youtube: /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig,
+				vimeo: /https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,
+				image: /((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/ig,
+				url: /(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/ig,
 			}
+		},
+
+		codemirror: false
 	};
 
 	// Functionality
@@ -288,12 +353,17 @@
 		keyCode: {
 			BACKSPACE: 8,
 			DELETE: 46,
+			UP: 38,
 			DOWN: 40,
 			ENTER: 13,
+			SPACE: 32,
 			ESC: 27,
 			TAB: 9,
 			CTRL: 17,
 			META: 91,
+			SHIFT: 16,
+			ALT: 18,
+			RIGHT: 39,
 			LEFT: 37,
 			LEFT_WIN: 91
 		},
@@ -301,6985 +371,9106 @@
 		// Initialization
 		init: function(el, options)
 		{
-			this.rtePaste = false;
-			this.$element = this.$source = $(el);
+			this.$element = $(el);
 			this.uuid = uuid++;
 
-			// clonning options
-			var opts = $.extend(true, {}, $.Redactor.opts);
+			// if paste event detected = true
+			this.rtePaste = false;
+			this.$pasteBox = false;
 
-			// current settings
-			this.opts = $.extend(
-				{},
-				opts,
-				this.$element.data(),
-				options
-			);
+			this.loadOptions(options);
+			this.loadModules();
 
-			this.start = true;
-			this.dropdowns = [];
+			// formatting storage
+			this.formatting = {};
 
-			// get sizes
-			this.sourceHeight = this.$source.css('height');
-			this.sourceWidth = this.$source.css('width');
-
-			// dependency of the editor modes
-			if (this.opts.fullpage) this.opts.iframe = true;
-			if (this.opts.linebreaks) this.opts.paragraphy = false;
-			if (this.opts.paragraphy) this.opts.linebreaks = false;
-			if (this.opts.toolbarFixedBox) this.opts.toolbarFixed = true;
-
-			// the alias for iframe mode
-			this.document = document;
-			this.window = window;
-
-			// selection saved
-			this.savedSel = false;
-
-			// clean setup
-			this.cleanlineBefore = new RegExp('^<(/?' + this.opts.ownLine.join('|/?' ) + '|' + this.opts.contOwnLine.join('|') + ')[ >]');
-			this.cleanlineAfter = new RegExp('^<(br|/?' + this.opts.ownLine.join('|/?' ) + '|/' + this.opts.contOwnLine.join('|/') + ')[ >]');
-			this.cleannewLevel = new RegExp('^</?(' + this.opts.newLevel.join('|' ) + ')[ >]');
+			// block level tags
+			$.merge(this.opts.blockLevelElements, this.opts.alignmentTags);
+			this.reIsBlock = new RegExp('^(' + this.opts.blockLevelElements.join('|' ) + ')$', 'i');
 
-			// block level
-			this.rTestBlock = new RegExp('^(' + this.opts.blockLevelElements.join('|' ) + ')$', 'i');
+			// setup allowed and denied tags
+			this.tidy.setupAllowed();
 
-			// setup formatting permissions
-			if (this.opts.linebreaks === false)
+			// setup denied tags
+			if (this.opts.deniedTags !== false)
 			{
-				if (this.opts.allowedTags !== false)
+				var tags = ['html', 'head', 'link', 'body', 'meta', 'applet'];
+				for (var i = 0; i < tags.length; i++)
 				{
-					var arrSearch = ['strong', 'em', 'del'];
-					var arrAdd = ['b', 'i', 'strike'];
+					this.opts.deniedTags.push(tags[i]);
+				}
+			}
 
-					if ($.inArray('p', this.opts.allowedTags) === '-1') this.opts.allowedTags.push('p');
+			// load lang
+			this.lang.load();
 
-					for (i in arrSearch)
-					{
-						if ($.inArray(arrSearch[i], this.opts.allowedTags) != '-1') this.opts.allowedTags.push(arrAdd[i]);
-					}
-				}
+			// extend shortcuts
+			$.extend(this.opts.shortcuts, this.opts.shortcutsAdd);
 
-				if (this.opts.deniedTags !== false)
-				{
-					var pos = $.inArray('p', this.opts.deniedTags);
-					if (pos !== '-1') this.opts.deniedTags.splice(pos, pos);
-				}
-			}
+			// start callback
+			this.core.setCallback('start');
 
-			// ie & opera
-			if (this.browser('msie') || this.browser('opera'))
+			// build
+			this.start = true;
+			this.build.run();
+		},
+
+		loadOptions: function(options)
+		{
+			this.opts = $.extend(
+				{},
+				$.extend(true, {}, $.Redactor.opts),
+				this.$element.data(),
+				options
+			);
+		},
+		getModuleMethods: function(object)
+		{
+			return Object.getOwnPropertyNames(object).filter(function(property)
+			{
+				return typeof object[property] == 'function';
+			});
+		},
+		loadModules: function()
+		{
+			var len = $.Redactor.modules.length;
+			for (var i = 0; i < len; i++)
 			{
-				this.opts.buttons = this.removeFromArrayByValue(this.opts.buttons, 'horizontalrule');
+				this.bindModuleMethods($.Redactor.modules[i]);
 			}
+		},
+		bindModuleMethods: function(module)
+		{
+			if (typeof this[module] == 'undefined') return;
 
-			// load lang
-			this.opts.curLang = this.opts.langs[this.opts.lang];
+			// init module
+			this[module] = this[module]();
 
-			// Build
-			this.buildStart();
+			var methods = this.getModuleMethods(this[module]);
+			var len = methods.length;
 
+			// bind methods
+			for (var z = 0; z < len; z++)
+			{
+				this[module][methods[z]] = this[module][methods[z]].bind(this);
+			}
 		},
-		toolbarInit: function(lang)
+		alignment: function()
 		{
 			return {
-				html:
-				{
-					title: lang.html,
-					func: 'toggle'
-				},
-				formatting:
-				{
-					title: lang.formatting,
-					func: 'show',
-					dropdown:
-					{
-						p:
-						{
-							title: lang.paragraph,
-							func: 'formatBlocks'
-						},
-						blockquote:
-						{
-							title: lang.quote,
-							func: 'formatQuote',
-							className: 'redactor_format_blockquote'
-						},
-						pre:
-						{
-							title: lang.code,
-							func: 'formatBlocks',
-							className: 'redactor_format_pre'
-						},
-						h1:
-						{
-							title: lang.header1,
-							func: 'formatBlocks',
-							className: 'redactor_format_h1'
-						},
-						h2:
-						{
-							title: lang.header2,
-							func: 'formatBlocks',
-							className: 'redactor_format_h2'
-						},
-						h3:
-						{
-							title: lang.header3,
-							func: 'formatBlocks',
-							className: 'redactor_format_h3'
-						},
-						h4:
-						{
-							title: lang.header4,
-							func: 'formatBlocks',
-							className: 'redactor_format_h4'
-						},
-						h5:
-						{
-							title: lang.header5,
-							func: 'formatBlocks',
-							className: 'redactor_format_h5'
-						}
-					}
-				},
-				bold:
-				{
-					title: lang.bold,
-					exec: 'bold'
-				},
-				italic:
-				{
-					title: lang.italic,
-					exec: 'italic'
-				},
-				deleted:
-				{
-					title: lang.deleted,
-					exec: 'strikethrough'
-				},
-				underline:
+				left: function()
 				{
-					title: lang.underline,
-					exec: 'underline'
+					this.alignment.set('');
 				},
-				unorderedlist:
+				right: function()
 				{
-					title: '&bull; ' + lang.unorderedlist,
-					exec: 'insertunorderedlist'
+					this.alignment.set('right');
 				},
-				orderedlist:
+				center: function()
 				{
-					title: '1. ' + lang.orderedlist,
-					exec: 'insertorderedlist'
+					this.alignment.set('center');
 				},
-				outdent:
+				justify: function()
 				{
-					title: '< ' + lang.outdent,
-					func: 'indentingOutdent'
+					this.alignment.set('justify');
 				},
-				indent:
+				set: function(type)
 				{
-					title: '> ' + lang.indent,
-					func: 'indentingIndent'
-				},
-				image:
-				{
-					title: lang.image,
-					func: 'imageShow'
-				},
-				video:
-				{
-					title: lang.video,
-					func: 'videoShow'
-				},
-				file:
-				{
-					title: lang.file,
-					func: 'fileShow'
-				},
-				table:
-				{
-					title: lang.table,
-					func: 'show',
-					dropdown:
+					// focus
+					if (!this.utils.browser('msie')) this.$editor.focus();
+
+					this.buffer.set();
+					this.selection.save();
+
+					// get blocks
+					this.alignment.blocks = this.selection.getBlocks();
+					this.alignment.type = type;
+
+					// set alignment
+					if (this.alignment.isLinebreaksOrNoBlocks())
 					{
-						insert_table:
-						{
-							title: lang.insert_table,
-							func: 'tableShow'
-						},
-						separator_drop1:
-						{
-							name: 'separator'
-						},
-						insert_row_above:
-						{
-							title: lang.insert_row_above,
-							func: 'tableAddRowAbove'
-						},
-						insert_row_below:
-						{
-							title: lang.insert_row_below,
-							func: 'tableAddRowBelow'
-						},
-						insert_column_left:
-						{
-							title: lang.insert_column_left,
-							func: 'tableAddColumnLeft'
-						},
-						insert_column_right:
-						{
-							title: lang.insert_column_right,
-							func: 'tableAddColumnRight'
-						},
-						separator_drop2:
-						{
-							name: 'separator'
-						},
-						add_head:
-						{
-							title: lang.add_head,
-							func: 'tableAddHead'
-						},
-						delete_head:
-						{
-							title: lang.delete_head,
-							func: 'tableDeleteHead'
-						},
-						separator_drop3:
-						{
-							name: 'separator'
-						},
-						delete_column:
-						{
-							title: lang.delete_column,
-							func: 'tableDeleteColumn'
-						},
-						delete_row:
-						{
-							title: lang.delete_row,
-							func: 'tableDeleteRow'
-						},
-						delete_table:
-						{
-							title: lang.delete_table,
-							func: 'tableDeleteTable'
-						}
+						this.alignment.setText();
 					}
-				},
-				link: {
-					title: lang.link,
-					func: 'show',
-					dropdown:
+					else
 					{
-						link:
-						{
-							title: lang.link_insert,
-							func: 'linkShow'
-						},
-						unlink:
-						{
-							title: lang.unlink,
-							exec: 'unlink'
-						}
+						this.alignment.setBlocks();
 					}
+
+					// sync
+					this.selection.restore();
+					this.code.sync();
 				},
-				fontcolor:
-				{
-					title: lang.fontcolor,
-					func: 'show'
-				},
-				backcolor:
+				setText: function()
 				{
-					title: lang.backcolor,
-					func: 'show'
+					var wrapper = this.selection.wrap('div');
+					$(wrapper).attr('data-tagblock', 'redactor').css('text-align', this.alignment.type);
 				},
-				alignment:
+				setBlocks: function()
 				{
-					title: lang.alignment,
-					func: 'show',
-					dropdown:
+					$.each(this.alignment.blocks, $.proxy(function(i, el)
 					{
-						alignleft:
-						{
-							title: lang.align_left,
-							func: 'alignmentLeft'
-						},
-						aligncenter:
-						{
-							title: lang.align_center,
-							func: 'alignmentCenter'
-						},
-						alignright:
+						var $el = this.utils.getAlignmentElement(el);
+						if (!$el) return;
+
+						if (this.alignment.isNeedReplaceElement($el))
 						{
-							title: lang.align_right,
-							func: 'alignmentRight'
-						},
-						justify:
+							this.alignment.replaceElement($el);
+						}
+						else
 						{
-							title: lang.align_justify,
-							func: 'alignmentJustify'
+							this.alignment.alignElement($el);
 						}
-					}
-				},
-				alignleft:
-				{
-					title: lang.align_left,
-					func: 'alignmentLeft'
+
+					}, this));
 				},
-				aligncenter:
+				isLinebreaksOrNoBlocks: function()
 				{
-					title: lang.align_center,
-					func: 'alignmentCenter'
+					return (this.opts.linebreaks && this.alignment.blocks[0] === false);
 				},
-				alignright:
+				isNeedReplaceElement: function($el)
 				{
-					title: lang.align_right,
-					func: 'alignmentRight'
+					return (this.alignment.type === '' && typeof($el.data('tagblock')) !== 'undefined');
 				},
-				justify:
+				replaceElement: function($el)
 				{
-					title: lang.align_justify,
-					func: 'alignmentJustify'
+					$el.replaceWith($el.html());
 				},
-				horizontalrule:
+				alignElement: function($el)
 				{
-					exec: 'inserthorizontalrule',
-					title: lang.horizontalrule
+					$el.css('text-align', this.alignment.type);
+					this.utils.removeEmptyAttr($el, 'style');
 				}
-
-			}
+			};
 		},
-
-		// CALLBACKS
-		callback: function(type, event, data)
+		autosave: function()
 		{
-			var callback = this.opts[ type + 'Callback' ];
-			if ($.isFunction(callback))
-			{
-				if (event === false) return callback.call(this, data);
-				else return callback.call(this, event, data);
-			}
-			else return data;
-		},
+			return {
+				html: false,
+				enable: function()
+				{
+					if (!this.opts.autosave) return;
 
+					this.autosave.name = (this.opts.autosaveName) ? this.opts.autosaveName : this.$textarea.attr('name');
 
-		// DESTROY
-		destroy: function()
-		{
-			clearInterval(this.autosaveInterval);
+					if (this.opts.autosaveOnChange) return;
+					this.autosaveInterval = setInterval(this.autosave.load, this.opts.autosaveInterval * 1000);
+				},
+				onChange: function()
+				{
+					if (!this.opts.autosaveOnChange) return;
+					this.autosave.load();
+				},
+				load: function()
+				{
+					if (!this.opts.autosave) return;
 
-			$(window).off('.redactor');
-			this.$source.off('redactor-textarea');
-			this.$element.off('.redactor').removeData('redactor');
+					this.autosave.source = this.code.get();
 
-			var html = this.get();
+					if (this.autosave.html === this.autosave.source) return;
 
-			if (this.opts.textareamode)
-			{
-				this.$box.after(this.$source);
-				this.$box.remove();
-				this.$source.val(html).show();
-			}
-			else
-			{
-				var $elem = this.$editor;
-				if (this.opts.iframe) $elem = this.$element;
+					// data
+					var data = {};
+					data['name'] = this.autosave.name;
+					data[this.autosave.name] = this.autosave.source;
+					data = this.autosave.getHiddenFields(data);
 
-				this.$box.after($elem);
-				this.$box.remove();
+					// ajax
+					var jsxhr = $.ajax({
+						url: this.opts.autosave,
+						type: 'post',
+						data: data
+					});
 
-				$elem.removeClass('redactor_editor').removeClass('redactor_editor_wym').removeAttr('contenteditable').html(html).show();
-			}
+					jsxhr.done(this.autosave.success);
+				},
+				getHiddenFields: function(data)
+				{
+					if (this.opts.autosaveFields === false || typeof this.opts.autosaveFields !== 'object')
+					{
+						return data;
+					}
 
-			if (this.opts.air)
-			{
-				$('#redactor_air_' + this.uuid).remove();
-			}
-		},
+					$.each(this.opts.autosaveFields, $.proxy(function(k, v)
+					{
+						if (v !== null && v.toString().indexOf('#') === 0) v = $(v).val();
+						data[k] = v;
 
-		// API GET
-		getObject: function()
-		{
-			return $.extend({}, this);
-		},
-		getEditor: function()
-		{
-			return this.$editor;
-		},
-		getBox: function()
-		{
-			return this.$box;
-		},
-		getIframe: function()
-		{
-			return (this.opts.iframe) ? this.$frame : false;
-		},
-		getToolbar: function()
-		{
-			return (this.$toolbar) ? this.$toolbar : false;
-		},
+					}, this));
 
-		// CODE GET & SET
-		get: function()
-		{
-			return this.$source.val();
-		},
-		getCodeIframe: function()
-		{
-			this.$editor.removeAttr('contenteditable').removeAttr('dir');
-			var html = this.outerHtml(this.$frame.contents().children());
-			this.$editor.attr({ 'contenteditable': true, 'dir': this.opts.direction });
+					return data;
 
-			return html;
-		},
-		set: function(html, strip, placeholderRemove)
-		{
-			html = html.toString();
-			html = html.replace(/\$/g, '&#36;');
+				},
+				success: function(data)
+				{
+					var json;
+					try
+					{
+						json = $.parseJSON(data);
+					}
+					catch(e)
+					{
+						//data has already been parsed
+						json = data;
+					}
 
-			if (this.opts.fullpage) this.setCodeIframe(html);
-			else this.setEditor(html, strip);
+					var callbackName = (typeof json.error == 'undefined') ? 'autosave' :  'autosaveError';
 
-			if (html == '') placeholderRemove = false;
-			if (placeholderRemove !== false) this.placeholderRemove();
+					this.core.setCallback(callbackName, this.autosave.name, json);
+					this.autosave.html = this.autosave.source;
+				},
+				disable: function()
+				{
+					clearInterval(this.autosaveInterval);
+				}
+			};
 		},
-		setEditor: function(html, strip)
+		block: function()
 		{
+			return {
+				formatting: function(name)
+				{
+					this.block.clearStyle = false;
+					var type, value;
 
-			if (strip !== false)
-			{
-				html = this.cleanSavePreCode(html);
+					if (typeof this.formatting[name].data != 'undefined') type = 'data';
+					else if (typeof this.formatting[name].attr != 'undefined') type = 'attr';
+					else if (typeof this.formatting[name]['class'] != 'undefined') type = 'class';
 
-				html = this.cleanStripTags(html);
-				html = this.cleanConvertProtected(html);
-				html = this.cleanConvertInlineTags(html, true);
+					if (typeof this.formatting[name].clear != 'undefined')
+					{
+						this.block.clearStyle = true;
+					}
 
-				if (this.opts.linebreaks === false)	html = this.cleanConverters(html);
-				else html = html.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi, '$2<br>');
-			}
+					if (type) value = this.formatting[name][type];
 
-			// $ fix
-			html = html.replace(/&amp;#36;/g, '$');
+					this.block.format(this.formatting[name].tag, type, value);
 
-			html = this.cleanEmpty(html);
+				},
+				format: function(tag, type, value)
+				{
+					if (tag == 'quote') tag = 'blockquote';
 
-			this.$editor.html(html);
+					var formatTags = ['p', 'pre', 'blockquote', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
+					if ($.inArray(tag, formatTags) == -1) return;
 
-			// set no editable
-			this.setNonEditable();
-			this.setSpansVerified();
-			this.sync();
-		},
-		setCodeIframe: function(html)
-		{
-			var doc = this.iframePage();
-			this.$frame[0].src = "about:blank";
+					this.block.isRemoveInline = (tag == 'pre' || tag.search(/h[1-6]/i) != -1);
 
-			html = this.cleanConvertProtected(html);
-			html = this.cleanConvertInlineTags(html);
-			html = this.cleanRemoveSpaces(html);
+					// focus
+					if (!this.utils.browser('msie')) this.$editor.focus();
 
-			doc.open();
-			doc.write(html);
-			doc.close();
+					var html = $.trim(this.$editor.html());
+					this.block.isEmpty = this.utils.isEmpty(html);
 
-			// redefine editor for fullpage mode
-			if (this.opts.fullpage)
-			{
-				this.$editor = this.$frame.contents().find('body').attr({ 'contenteditable': true, 'dir': this.opts.direction });
-			}
+					// FF focus
+					if (this.utils.browser('mozilla') && !this.focus.isFocused())
+					{
+						if (this.block.isEmpty)
+						{
+							var $first;
+							if (!this.opts.linebreaks)
+							{
+								$first = this.$editor.children().first();
+								this.caret.setEnd($first);
+							}
+						}
+					}
 
-			// set no editable
-			this.setNonEditable();
-			this.setSpansVerified();
-			this.sync();
+					this.block.blocks = this.selection.getBlocks();
 
-		},
-		setFullpageOnInit: function(html)
-		{
-			html = this.cleanSavePreCode(html, true);
-			html = this.cleanConverters(html);
-			html = this.cleanEmpty(html);
+					this.block.blocksSize = this.block.blocks.length;
+					this.block.type = type;
+					this.block.value = value;
 
-			// set code
-			this.$editor.html(html);
+					this.buffer.set();
+					this.selection.save();
 
-			// set no editable
-			this.setNonEditable();
-			this.setSpansVerified();
-			this.sync();
-		},
-		setSpansVerified: function()
-		{
-			var spans = this.$editor.find('span');
-			var replacementTag = 'inline';
+					this.block.set(tag);
 
-			$.each(spans, function() {
-				var outer = this.outerHTML;
+					this.selection.restore();
+					this.code.sync();
+					this.observe.load();
 
-				// Replace opening tag
-				var regex = new RegExp('<' + this.tagName, 'gi');
-				var newTag = outer.replace(regex, '<' + replacementTag);
+				},
+				set: function(tag)
+				{
 
-				// Replace closing tag
-				regex = new RegExp('</' + this.tagName, 'gi');
-				newTag = newTag.replace(regex, '</' + replacementTag);
+					this.selection.get();
+					this.block.containerTag = this.range.commonAncestorContainer.tagName;
 
-				$(this).replaceWith(newTag);
-			});
+					if (this.range.collapsed)
+					{
+						this.block.setCollapsed(tag);
+					}
+					else
+					{
+						this.block.setMultiple(tag);
+					}
+				},
+				setCollapsed: function(tag)
+				{
+					if (this.opts.linebreaks && this.block.isEmpty && tag != 'p')
+					{
+						var node = document.createElement(tag);
+						this.$editor.html(node);
+						this.caret.setEnd(node);
 
-		},
-		setSpansVerifiedHtml: function(html)
-		{
-			html = html.replace(/<span(.*?)>/, '<inline$1>');
-			return html.replace(/<\/span>/, '</inline>');
-		},
-		setNonEditable: function()
-		{
-			this.$editor.find('.noneditable').attr('contenteditable', false);
-		},
+						return;
+					}
 
-		// SYNC
-		sync: function()
-		{
-			var html = '';
 
-			this.cleanUnverified();
+					var block = this.block.blocks[0];
+					if (block === false) return;
 
-			if (this.opts.fullpage) html = this.getCodeIframe();
-			else html = this.$editor.html();
+					if (block.tagName == 'LI')
+					{
+						if (tag != 'blockquote') return;
 
-			html = this.syncClean(html);
-			//html = this.cleanRemoveSpaces(html);
-			html = this.cleanRemoveEmptyTags(html);
+						this.block.formatListToBlockquote();
+						return;
+					}
 
-			// fix second level up ul, ol
-			html = html.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi, '<$1>$2</$1></li>');
+					var isContainerTable = (this.block.containerTag  == 'TD' || this.block.containerTag  == 'TH');
+					if (isContainerTable && !this.opts.linebreaks)
+					{
+						document.execCommand('formatblock', false, '<' + tag + '>');
 
-			if ($.trim(html) === '<br>') html = '';
+						block = this.selection.getBlock();
+						this.block.toggle($(block));
 
-			// xhtml
-			if (this.opts.xhtml)
-			{
-				var xhtmlTags = ['br', 'hr', 'img', 'link', 'input', 'meta'];
-				$.each(xhtmlTags, function(i,s)
-				{
-					html = html.replace(new RegExp('<' + s + '(.*?[^\/$]?)>', 'gi'), '<' + s + '$1 />');
-				});
+					}
+					else if (block.tagName.toLowerCase() != tag)
+					{
+						if (this.opts.linebreaks && tag == 'p')
+						{
+							$(block).append('<br>');
+							this.utils.replaceWithContents(block);
+						}
+						else
+						{
+							var $formatted = this.utils.replaceToTag(block, tag);
 
-			}
+							this.block.toggle($formatted);
 
-			// before callback
-			html = this.callback('syncBefore', false, html);
+							if (tag != 'p' && tag != 'blockquote') $formatted.find('img').remove();
+							if (this.block.isRemoveInline) this.utils.removeInlineTags($formatted);
+							if (tag == 'p' || this.block.headTag) $formatted.find('p').contents().unwrap();
 
-			this.$source.val(html);
+							this.block.formatTableWrapping($formatted);
+						}
+					}
+					else if (tag == 'blockquote' && block.tagName.toLowerCase() == tag)
+					{
+						// blockquote off
+						if (this.opts.linebreaks)
+						{
+							$(block).append('<br>');
+							this.utils.replaceWithContents(block);
+						}
+						else
+						{
+							var $el = this.utils.replaceToTag(block, 'p');
+							this.block.toggle($el);
+						}
+					}
+					else if (block.tagName.toLowerCase() == tag)
+					{
+						this.block.toggle($(block));
+					}
 
-			// onchange & after callback
-			this.callback('syncAfter', false, html);
 
-			if (this.start === false)
-			{
-				this.callback('change', false, html);
-			}
+					if (typeof this.block.type == 'undefined' && typeof this.block.value == 'undefined')
+					{
+						$(block).removeAttr('class').removeAttr('style');
+					}
+				},
+				setMultiple: function(tag)
+				{
+					var block = this.block.blocks[0];
+					var isContainerTable = (this.block.containerTag  == 'TD' || this.block.containerTag  == 'TH');
 
-		},
-		syncClean: function(html)
-		{
-			if (!this.opts.fullpage) html = this.cleanStripTags(html);
+					if (block !== false && this.block.blocksSize === 1)
+					{
+						if (block.tagName.toLowerCase() == tag &&  tag == 'blockquote')
+						{
+							// blockquote off
+							if (this.opts.linebreaks)
+							{
+								$(block).append('<br>');
+								this.utils.replaceWithContents(block);
+							}
+							else
+							{
+								var $el = this.utils.replaceToTag(block, 'p');
+								this.block.toggle($el);
+							}
+						}
+						else if (block.tagName == 'LI')
+						{
+							if (tag != 'blockquote') return;
 
-			html = $.trim(html);
+							this.block.formatListToBlockquote();
+						}
+						else if (this.block.containerTag == 'BLOCKQUOTE')
+						{
+							this.block.formatBlockquote(tag);
+						}
+						else if (this.opts.linebreaks && ((isContainerTable) || (this.range.commonAncestorContainer != block)))
+						{
+							this.block.formatWrap(tag);
+						}
+						else
+						{
+							if (this.opts.linebreaks && tag == 'p')
+							{
+								$(block).prepend('<br>').append('<br>');
+								this.utils.replaceWithContents(block);
+							}
+							else if (block.tagName === 'TD')
+							{
+								this.block.formatWrap(tag);
+							}
+							else
+							{
+								var $formatted = this.utils.replaceToTag(block, tag);
 
-			// removeplaceholder
-			html = this.placeholderRemoveFromCode(html);
+								this.block.toggle($formatted);
 
-			// remove space
-			html = html.replace(/&#x200b;/gi, '');
-			html = html.replace(/&#8203;/gi, '');
-			html = html.replace(/<\/a>&nbsp;/gi, '<\/a> ');
+								if (this.block.isRemoveInline) this.utils.removeInlineTags($formatted);
+								if (tag == 'p' || this.block.headTag) $formatted.find('p').contents().unwrap();
+							}
+						}
+					}
+					else
+					{
+						if (this.opts.linebreaks || tag != 'p')
+						{
+							if (tag == 'blockquote')
+							{
+								var count = 0;
+								for (var i = 0; i < this.block.blocksSize; i++)
+								{
+									if (this.block.blocks[i].tagName == 'BLOCKQUOTE') count++;
+								}
 
-			// link nofollow
-			if (this.opts.linkNofollow)
-			{
-				html = html.replace(/<a(.*?)rel="nofollow"(.*?)>/gi, '<a$1$2>');
-				html = html.replace(/<a(.*?)>/gi, '<a$1 rel="nofollow">');
-			}
+								// only blockquote selected
+								if (count == this.block.blocksSize)
+								{
+									$.each(this.block.blocks, $.proxy(function(i,s)
+									{
+										var $formatted = false;
+										if (this.opts.linebreaks)
+										{
+											$(s).prepend('<br>').append('<br>');
+											$formatted = this.utils.replaceWithContents(s);
+										}
+										else
+										{
+											$formatted = this.utils.replaceToTag(s, 'p');
+										}
+
+										if ($formatted && typeof this.block.type == 'undefined' && typeof this.block.value == 'undefined')
+										{
+											$formatted.removeAttr('class').removeAttr('style');
+										}
 
-			// php code fix
-			html = html.replace('<!--?php', '<?php');
-			html = html.replace('?-->', '?>');
+									}, this));
 
-			// revert no editable
-			html = html.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi, '<$1class="noeditable"$2$3>');
+									return;
+								}
 
-			html = html.replace(/ data-tagblock=""/gi, '');
-			html = html.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi, '</$1>');
+							}
 
-			// remove image resize
-			html = html.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/i, '$3<img$4>');
-			html = html.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/i, '');
-			html = html.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/i, '');
+							this.block.formatWrap(tag);
+						}
+						else
+						{
+							var classSize = 0;
+							var toggleType = false;
+							if (this.block.type == 'class')
+							{
+								toggleType = 'toggle';
+								classSize = $(this.block.blocks).filter('.' + this.block.value).length;
 
-			// remove font
-			html = html.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi, '$2');
+								if (this.block.blocksSize == classSize) toggleType = 'toggle';
+								else if (this.block.blocksSize > classSize) toggleType = 'set';
+								else if (classSize === 0) toggleType = 'set';
 
-			// remove spans
-			html = html.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi, '$2');
-			html = html.replace(/<inline>/gi, '<span>');
-			html = html.replace(/<inline /gi, '<span ');
-			html = html.replace(/<\/inline>/gi, '</span>');
-			html = html.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi, '');
-			html = html.replace(/<span>([\w\W]*?)<\/span>/gi, '$1');
+							}
 
-			// fixes
-			html = html.replace(/&amp;/gi, '&');
-			html = html.replace(//gi, '&trade;');
-			html = html.replace(//gi, '&copy;');
+							var exceptTags = ['ul', 'ol', 'li', 'td', 'th', 'dl', 'dt', 'dd'];
+							$.each(this.block.blocks, $.proxy(function(i,s)
+							{
+								if ($.inArray(s.tagName.toLowerCase(), exceptTags) != -1) return;
 
+								var $formatted = this.utils.replaceToTag(s, tag);
 
-			html = this.cleanReConvertProtected(html);
+								if (toggleType)
+								{
+									if (toggleType == 'toggle') this.block.toggle($formatted);
+									else if (toggleType == 'remove') this.block.remove($formatted);
+									else if (toggleType == 'set') this.block.setForce($formatted);
+								}
+								else this.block.toggle($formatted);
 
-			return html;
-		},
+								if (tag != 'p' && tag != 'blockquote') $formatted.find('img').remove();
+								if (this.block.isRemoveInline) this.utils.removeInlineTags($formatted);
+								if (tag == 'p' || this.block.headTag) $formatted.find('p').contents().unwrap();
 
+								if (typeof this.block.type == 'undefined' && typeof this.block.value == 'undefined')
+								{
+									$formatted.removeAttr('class').removeAttr('style');
+								}
 
-		// BUILD
-		buildStart: function()
-		{
-			// content
-			this.content = '';
 
-			// container
-			this.$box = $('<div class="redactor_box" />');
+							}, this));
+						}
+					}
+				},
+				setForce: function($el)
+				{
+					// remove style and class if the specified setting
+					if (this.block.clearStyle)
+					{
+						$el.removeAttr('class').removeAttr('style');
+					}
 
-			// textarea test
-			if (this.$source[0].tagName === 'TEXTAREA') this.opts.textareamode = true;
+					if (this.block.type == 'class')
+					{
+						$el.addClass(this.block.value);
+						return;
+					}
+					else if (this.block.type == 'attr' || this.block.type == 'data')
+					{
+						$el.attr(this.block.value.name, this.block.value.value);
+						return;
+					}
+				},
+				toggle: function($el)
+				{
+					// remove style and class if the specified setting
+					if (this.block.clearStyle)
+					{
+						$el.removeAttr('class').removeAttr('style');
+					}
 
-			// mobile
-			if (this.opts.mobile === false && this.isMobile())
-			{
-				this.buildMobile();
-			}
-			else
-			{
-				// get the content at the start
-				this.buildContent();
+					if (this.block.type == 'class')
+					{
+						$el.toggleClass(this.block.value);
+						return;
+					}
+					else if (this.block.type == 'attr' || this.block.type == 'data')
+					{
+						if ($el.attr(this.block.value.name) == this.block.value.value)
+						{
+							$el.removeAttr(this.block.value.name);
+						}
+						else
+						{
+							$el.attr(this.block.value.name, this.block.value.value);
+						}
 
-				if (this.opts.iframe)
+						return;
+					}
+					else
+					{
+						$el.removeAttr('style class');
+						return;
+					}
+				},
+				remove: function($el)
 				{
-					// build as iframe
-					this.opts.autoresize = false;
-					this.iframeStart();
-				}
-				else if (this.opts.textareamode) this.buildFromTextarea();
-				else this.buildFromElement();
+					$el.removeClass(this.block.value);
+				},
+				formatListToBlockquote: function()
+				{
+					var block = $(this.block.blocks[0]).closest('ul, ol', this.$editor[0]);
+
+					$(block).find('ul, ol').contents().unwrap();
+					$(block).find('li').append($('<br>')).contents().unwrap();
 
-				// options and final setup
-				if (!this.opts.iframe)
+					var $el = this.utils.replaceToTag(block, 'blockquote');
+					this.block.toggle($el);
+				},
+				formatBlockquote: function(tag)
 				{
-					this.buildOptions();
-					this.buildAfter();
-				}
-			}
-		},
-		buildMobile: function()
-		{
-			if (!this.opts.textareamode)
-			{
-				this.$editor = this.$source;
-				this.$editor.hide();
-				this.$source = this.buildCodearea(this.$editor);
-				this.$source.val(this.content);
-			}
+					document.execCommand('outdent');
+					document.execCommand('formatblock', false, tag);
 
-			this.$box.insertAfter(this.$source).append(this.$source);
-		},
-		buildContent: function()
-		{
-			if (this.opts.textareamode) this.content = $.trim(this.$source.val());
-			else this.content = $.trim(this.$source.html());
-		},
-		buildFromTextarea: function()
-		{
-			this.$editor = $('<div />');
-			this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source);
+					this.clean.clearUnverified();
+					this.$editor.find('p:empty').remove();
 
-			// enable
-			this.buildAddClasses(this.$editor);
-			this.buildEnable();
-		},
-		buildFromElement: function()
-		{
-			this.$editor = this.$source;
-			this.$source = this.buildCodearea(this.$editor);
-			this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source);
+					var formatted = this.selection.getBlock();
 
-			// enable
-			this.buildEnable();
-		},
-		buildCodearea: function($source)
-		{
-			return $('<textarea />').attr('name', $source.attr('id')).css('height', this.sourceHeight);
-		},
-		buildAddClasses: function(el)
-		{
-			// append textarea classes to editable layer
-			$.each(this.$source.get(0).className.split(/\s+/), function(i,s)
-			{
-				el.addClass('redactor_' + s);
-			});
-		},
-		buildEnable: function()
-		{
-			this.$editor.addClass('redactor_editor').attr({ 'contenteditable': true, 'dir': this.opts.direction });
-			this.$source.attr('dir', this.opts.direction).hide();
+					if (tag != 'p')
+					{
+						$(formatted).find('img').remove();
+					}
 
-			// set code
-			this.set(this.content, true, false);
-		},
-		buildOptions: function()
-		{
-			var $source = this.$editor;
-			if (this.opts.iframe) $source = this.$frame;
+					if (!this.opts.linebreaks)
+					{
+						this.block.toggle($(formatted));
+					}
 
-			// options
-			if (this.opts.tabindex) $source.attr('tabindex', this.opts.tabindex);
-			if (this.opts.minHeight) $source.css('min-height', this.opts.minHeight + 'px');
-			if (this.opts.maxHeight)
-			{
-				this.opts.autoresize = false;
-				this.sourceHeight = this.opts.maxHeight;
-			}
-			if (this.opts.wym) this.$editor.addClass('redactor_editor_wym');
-			if (!this.opts.autoresize) $source.css('height', this.sourceHeight);
-		},
-		buildAfter: function()
-		{
-			this.start = false;
+					this.$editor.find('ul, ol, tr, blockquote, p').each($.proxy(this.utils.removeEmpty, this));
 
-			// load toolbar
-			if (this.opts.toolbar)
-			{
-				this.opts.toolbar = this.toolbarInit(this.opts.curLang);
-				this.toolbarBuild();
-			}
+					if (this.opts.linebreaks && tag == 'p')
+					{
+						this.utils.replaceWithContents(formatted);
+					}
 
-			// modal templates
-			this.modalTemplatesInit();
+				},
+				formatWrap: function(tag)
+				{
+					if (this.block.containerTag == 'UL' || this.block.containerTag == 'OL')
+					{
+						if (tag == 'blockquote')
+						{
+							this.block.formatListToBlockquote();
+						}
+						else
+						{
+							return;
+						}
+					}
 
-			// plugins
-			this.buildPlugins();
+					var formatted = this.selection.wrap(tag);
+					if (formatted === false) return;
 
-			// enter, tab, etc.
-			this.buildBindKeyboard();
+					var $formatted = $(formatted);
 
-			// autosave
-			if (this.opts.autosave) this.autosave();
+					this.block.formatTableWrapping($formatted);
 
-			// observers
-			setTimeout($.proxy(this.observeStart, this), 4);
+					var $elements = $formatted.find(this.opts.blockLevelElements.join(',') + ', td, table, thead, tbody, tfoot, th, tr');
 
-			// FF fix
-			if (this.browser('mozilla'))
-			{
-				try {
-					this.document.execCommand('enableObjectResizing', false, false);
-					this.document.execCommand('enableInlineTableEditing', false, false);
-				} catch (e) {}
-			}
+					$elements.contents().unwrap();
 
-			// focus
-			if (this.opts.focus) setTimeout($.proxy(this.focus, this), 100);
+					if (tag != 'p' && tag != 'blockquote') $formatted.find('img').remove();
 
-			// code mode
-			if (!this.opts.visual)
-			{
-				setTimeout($.proxy(function()
-				{
-					this.opts.visual = true;
-					this.toggle(false);
+					$.each(this.block.blocks, $.proxy(this.utils.removeEmpty, this));
 
-				}, this), 200);
-			}
+					$formatted.append(this.selection.getMarker(2));
 
-			// init callback
-			this.callback('init');
-		},
-		buildBindKeyboard: function()
-		{
-			this.dblEnter = 0;
+					if (!this.opts.linebreaks)
+					{
+						this.block.toggle($formatted);
+					}
 
-			if (this.opts.dragUpload && this.opts.imageUpload !== false)
-			{
-				this.$editor.on('drop.redactor', $.proxy(this.buildEventDrop, this));
-			}
+					this.$editor.find('ul, ol, tr, blockquote, p').each($.proxy(this.utils.removeEmpty, this));
+					$formatted.find('blockquote:empty').remove();
 
-			this.$editor.on('paste.redactor', $.proxy(this.buildEventPaste, this));
-			this.$editor.on('keydown.redactor', $.proxy(this.buildEventKeydown, this));
-			this.$editor.on('keyup.redactor', $.proxy(this.buildEventKeyup, this));
+					if (this.block.isRemoveInline)
+					{
+						this.utils.removeInlineTags($formatted);
+					}
 
-			// textarea callback
-			if ($.isFunction(this.opts.textareaKeydownCallback))
-			{
-				this.$source.on('keydown.redactor-textarea', $.proxy(this.opts.textareaKeydownCallback, this));
-			}
+					if (this.opts.linebreaks && tag == 'p')
+					{
+						this.utils.replaceWithContents($formatted);
+					}
 
-			// focus callback
-			if ($.isFunction(this.opts.focusCallback))
-			{
-				this.$editor.on('focus.redactor', $.proxy(this.opts.focusCallback, this));
-			}
+					if (this.opts.linebreaks)
+					{
+						var $next = $formatted.next().next();
+						if ($next.size() != 0 && $next[0].tagName === 'BR')
+						{
+							$next.remove();
+						}
+					}
 
-			var clickedElement;
-			$(document).mousedown(function(e) {
-				clickedElement = $(e.target);
-			});
 
-			// blur callback
-			this.$editor.on('blur.redactor', $.proxy(function(e)
-			{
-				if (!$(clickedElement).hasClass('redactor_toolbar') && $(clickedElement).parents('.redactor_toolbar').size() == 0)
-				{
-					this.selectall = false;
-					if ($.isFunction(this.opts.blurCallback)) this.callback('blur', e);
-				}
-			}, this));
 
-		},
-		buildEventDrop: function(e)
-		{
-			e = e.originalEvent || e;
+				},
+				formatTableWrapping: function($formatted)
+				{
+					if ($formatted.closest('table', this.$editor[0]).length === 0) return;
 
-			if (window.FormData === undefined || !e.dataTransfer) return true;
+					if ($formatted.closest('tr', this.$editor[0]).length === 0) $formatted.wrap('<tr>');
+					if ($formatted.closest('td', this.$editor[0]).length === 0 && $formatted.closest('th').length === 0)
+					{
+						$formatted.wrap('<td>');
+					}
+				},
+				removeData: function(name, value)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).removeAttr('data-' + name);
 
-		    var length = e.dataTransfer.files.length;
-		    if (length == 0) return true;
+					this.code.sync();
+				},
+				setData: function(name, value)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).attr('data-' + name, value);
 
-		    e.preventDefault();
+					this.code.sync();
+				},
+				toggleData: function(name, value)
+				{
+					var blocks = this.selection.getBlocks();
+					$.each(blocks, function()
+					{
+						if ($(this).attr('data-' + name))
+						{
+							$(this).removeAttr('data-' + name);
+						}
+						else
+						{
+							$(this).attr('data-' + name, value);
+						}
+					});
+				},
+				removeAttr: function(attr, value)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).removeAttr(attr);
 
-	        var file = e.dataTransfer.files[0];
+					this.code.sync();
+				},
+				setAttr: function(attr, value)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).attr(attr, value);
 
-	        if (this.opts.dnbImageTypes !== false && this.opts.dnbImageTypes.indexOf(file.type) == -1)
-	        {
-		        return true;
-	        }
+					this.code.sync();
+				},
+				toggleAttr: function(attr, value)
+				{
+					var blocks = this.selection.getBlocks();
+					$.each(blocks, function()
+					{
+						if ($(this).attr(name))
+						{
+							$(this).removeAttr(name);
+						}
+						else
+						{
+							$(this).attr(name, value);
+						}
+					});
+				},
+				removeClass: function(className)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).removeClass(className);
 
-			this.bufferSet();
+					this.utils.removeEmptyAttr(blocks, 'class');
 
-			var progress = $('<div id="redactor-progress-drag" class="redactor-progress redactor-progress-striped"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div>');
-			$(document.body).append(progress);
+					this.code.sync();
+				},
+				setClass: function(className)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).addClass(className);
 
-			if (this.opts.s3 === false)
-			{
-				this.dragUploadAjax(this.opts.imageUpload, file, true, progress, e, this.opts.imageUploadParam);
-			}
-			else
-			{
-				this.s3uploadFile(file);
-			}
+					this.code.sync();
+				},
+				toggleClass: function(className)
+				{
+					var blocks = this.selection.getBlocks();
+					$(blocks).toggleClass(className);
 
+					this.code.sync();
+				}
+			};
 		},
-		buildEventPaste: function(e)
+		buffer: function()
 		{
-			var oldsafari = false;
-			if (this.browser('webkit') && navigator.userAgent.indexOf('Chrome') === -1)
-			{
-				var arr = this.browser('version').split('.');
-				if (arr[0] < 536) oldsafari = true;
-			}
-
-			if (oldsafari) return true;
-
-			// paste except opera (not webkit)
-			if (this.browser('opera')) return true;
-
-			// clipboard upload
-			if (this.opts.clipboardUpload && this.buildEventClipboardUpload(e)) return true;
-
-			if (this.opts.cleanup)
-			{
-				this.rtePaste = true;
-
-				this.selectionSave();
-
-				if (!this.selectall)
+			return {
+				set: function(type)
 				{
-					if (this.opts.autoresize === true && this.fullscreen !== true)
+					if (typeof type == 'undefined' || type == 'undo')
 					{
-						this.$editor.height(this.$editor.height());
-						this.saveScroll = this.document.body.scrollTop;
+						this.buffer.setUndo();
 					}
 					else
 					{
-						this.saveScroll = this.$editor.scrollTop();
+						this.buffer.setRedo();
 					}
-				}
+				},
+				setUndo: function()
+				{
+					this.selection.save();
+					this.opts.buffer.push(this.$editor.html());
+					this.selection.restore();
+				},
+				setRedo: function()
+				{
+					this.selection.save();
+					this.opts.rebuffer.push(this.$editor.html());
+					this.selection.restore();
+				},
+				getUndo: function()
+				{
+					this.$editor.html(this.opts.buffer.pop());
+				},
+				getRedo: function()
+				{
+					this.$editor.html(this.opts.rebuffer.pop());
+				},
+				add: function()
+				{
+					this.opts.buffer.push(this.$editor.html());
+				},
+				undo: function()
+				{
+					if (this.opts.buffer.length === 0) return;
 
-				var frag = this.extractContent();
+					this.buffer.set('redo');
+					this.buffer.getUndo();
 
-				setTimeout($.proxy(function()
-				{
-					var pastedFrag = this.extractContent();
-					this.$editor.append(frag);
+					this.selection.restore();
 
-					this.selectionRestore();
+					setTimeout($.proxy(this.observe.load, this), 50);
+				},
+				redo: function()
+				{
+					if (this.opts.rebuffer.length === 0) return;
 
-					var html = this.getFragmentHtml(pastedFrag);
-					this.pasteClean(html);
+					this.buffer.set('undo');
+					this.buffer.getRedo();
 
-					if (this.opts.autoresize === true && this.fullscreen !== true) this.$editor.css('height', 'auto');
+					this.selection.restore();
 
-				}, this), 1);
-			}
+					setTimeout($.proxy(this.observe.load, this), 50);
+				}
+			};
 		},
-		buildEventClipboardUpload: function(e)
+		build: function()
 		{
-			var event = e.originalEvent || e;
-			this.clipboardFilePaste = false;
-
-			if (typeof(event.clipboardData) === 'undefined') return false;
-			if (event.clipboardData.items)
-			{
-				var file = event.clipboardData.items[0].getAsFile();
-				if (file !== null)
+			return {
+				run: function()
 				{
-					this.bufferSet();
-					this.clipboardFilePaste = true;
-
-					var reader = new FileReader();
-					reader.onload = $.proxy(this.pasteClipboardUpload, this);
-			        reader.readAsDataURL(file);
+					this.build.createContainerBox();
+					this.build.loadContent();
+					this.build.loadEditor();
+					this.build.enableEditor();
+					this.build.setCodeAndCall();
+				},
+				isTextarea: function()
+				{
+					return (this.$element[0].tagName === 'TEXTAREA');
+				},
+				createContainerBox: function()
+				{
+					this.$box = $('<div class="redactor-box" role="application" />');
+				},
+				createTextarea: function()
+				{
+					this.$textarea = $('<textarea />').attr('name', this.build.getTextareaName());
+				},
+				getTextareaName: function()
+				{
+					return ((typeof(name) == 'undefined')) ? 'content-' + this.uuid : this.$element.attr('id');
+				},
+				loadContent: function()
+				{
+					var func = (this.build.isTextarea()) ? 'val' : 'html';
+					this.content = $.trim(this.$element[func]());
+				},
+				enableEditor: function()
+				{
+					this.$editor.attr({ 'contenteditable': true, 'dir': this.opts.direction });
+				},
+				loadEditor: function()
+				{
+					var func = (this.build.isTextarea()) ? 'fromTextarea' : 'fromElement';
+					this.build[func]();
+				},
+				fromTextarea: function()
+				{
+					this.$editor = $('<div />');
+					this.$textarea = this.$element;
+					this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element);
+					this.$editor.addClass('redactor-editor');
 
-			        return true;
-				}
-			}
+					this.$element.hide();
+				},
+				fromElement: function()
+				{
+					this.$editor = this.$element;
+					this.build.createTextarea();
+					this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea);
+					this.$editor.addClass('redactor-editor');
 
-			return false;
+					this.$textarea.hide();
+				},
+				setCodeAndCall: function()
+				{
+					// set code
+					this.code.set(this.content);
 
-		},
-		buildEventKeydown: function(e)
-		{
-			if (this.rtePaste) return false;
+					this.build.setOptions();
+					this.build.callEditor();
 
-			var key = e.which;
-			var ctrl = e.ctrlKey || e.metaKey;
-			var parent = this.getParent();
-			var current = this.getCurrent();
-			var block = this.getBlock();
-			var pre = false;
+					// code mode
+					if (this.opts.visual) return;
+					setTimeout($.proxy(this.code.showCode, this), 200);
+				},
+				callEditor: function()
+				{
+					this.build.disableMozillaEditing();
+					this.build.disableIeLinks();
+					this.build.setEvents();
+					this.build.setHelpers();
 
-			this.callback('keydown', e);
+					// load toolbar
+					if (this.opts.toolbar)
+					{
+						this.opts.toolbar = this.toolbar.init();
+						this.toolbar.build();
+					}
 
-			this.imageResizeHide(false);
+					// modal templates init
+					this.modal.loadTemplates();
 
-			// pre & down
-			if ((parent && $(parent).get(0).tagName === 'PRE') || (current && $(current).get(0).tagName === 'PRE'))
-			{
-				pre = true;
-				if (key === this.keyCode.DOWN) this.insertAfterLastElement(block);
-			}
+					// plugins
+					this.build.plugins();
 
-			// down
-			if (key === this.keyCode.DOWN)
-			{
-				if (parent && $(parent)[0].tagName === 'BLOCKQUOTE') this.insertAfterLastElement(parent);
-				if (current && $(current)[0].tagName === 'BLOCKQUOTE') this.insertAfterLastElement(current);
+					// observers
+					setTimeout($.proxy(this.observe.load, this), 4);
 
-				if (parent && $(parent)[0].tagName === 'P' && $(parent).parent()[0].tagName == 'BLOCKQUOTE')
-				{
-					this.insertAfterLastElement(parent, $(parent).parent()[0]);
-				}
-				if (current && $(current)[0].tagName === 'P' && parent && $(parent)[0].tagName == 'BLOCKQUOTE')
+					// init callback
+					this.core.setCallback('init');
+				},
+				setOptions: function()
 				{
-					this.insertAfterLastElement(current, parent);
-				}
-			}
+					// textarea direction
+					$(this.$textarea).attr('dir', this.opts.direction);
 
-			// shortcuts setup
-			if (ctrl && !e.shiftKey) this.shortcuts(e, key);
+					if (this.opts.linebreaks) this.$editor.addClass('redactor-linebreaks');
 
-			// buffer setup
-			if (ctrl && key === 90 && !e.shiftKey && !e.altKey) // z key
-			{
-				e.preventDefault();
-				if (this.opts.buffer.length) this.bufferUndo();
-				else this.document.execCommand('undo', false, false);
-				return;
-			}
-			// undo
-			else if (ctrl && key === 90 && e.shiftKey && !e.altKey)
-			{
-				e.preventDefault();
-				if (this.opts.rebuffer.length != 0) this.bufferRedo();
-				else this.document.execCommand('redo', false, false);
-				return;
-			}
+					if (this.opts.tabindex) this.$editor.attr('tabindex', this.opts.tabindex);
 
-			// select all
-			if (ctrl && key === 65) this.selectall = true;
-			else if (key != this.keyCode.LEFT_WIN && !ctrl) this.selectall = false;
+					if (this.opts.minHeight) this.$editor.css('minHeight', this.opts.minHeight);
+					if (this.opts.maxHeight) this.$editor.css('maxHeight', this.opts.maxHeight);
 
-			// enter
-			if (key == this.keyCode.ENTER && !e.shiftKey && !e.ctrlKey && !e.metaKey )
-			{
-				// In ie, opera in the tables are created paragraphs, fix it.
-				if (this.browser('msie') && (parent.nodeType == 1 && (parent.tagName == 'TD' || parent.tagName == 'TH')))
+				},
+				setEventDropUpload: function(e)
 				{
 					e.preventDefault();
-					this.bufferSet();
-					this.insertNode(document.createElement('br'));
-					this.callback('enter', e);
-					return false;
-				}
-
-				// blockquote exit
-				if (block && (block.tagName == 'BLOCKQUOTE' || $(block).parent()[0].tagName == 'BLOCKQUOTE'))
-				{
-					if (this.isEndOfElement())
-					{
-						if (this.dblEnter == 1)
-						{
-							var element;
-							var last;
-							if (block.tagName == 'BLOCKQUOTE')
-							{
-								last = 'br';
-								element = block;
-							}
-							else
-							{
-								last = 'p';
-								element = $(block).parent()[0];
-							}
-
-							e.preventDefault();
-							this.insertingAfterLastElement(element);
-							this.dblEnter = 0;
-
-							if (last == 'p')
-							{
-								$(block).parent().find('p').last().remove();
-							}
-							else
-							{
-								var tmp = $.trim($(block).html());
-								$(block).html(tmp.replace(/<br\s?\/?>$/i, ''));
-							}
 
-							return;
-						}
-						else this.dblEnter++;
-					}
-					else this.dblEnter++;
-				}
+					if (!this.opts.dragImageUpload || !this.opts.dragFileUpload) return;
 
-				// pre
-				if (pre === true) return this.buildEventKeydownPre(e, current);
-				else
+					var files = e.dataTransfer.files;
+					this.upload.directUpload(files[0], e);
+				},
+				setEventDrop: function(e)
 				{
-					if (!this.opts.linebreaks)
+					this.code.sync();
+					setTimeout(this.clean.clearUnverified, 1);
+					this.core.setCallback('drop', e);
+				},
+				setEvents: function()
+				{
+					// drop
+					this.$editor.on('drop.redactor', $.proxy(function(e)
 					{
-						// replace div to p
-						if (block && this.opts.rBlockTest.test(block.tagName))
-						{
-							// hit enter
-							this.bufferSet();
-
-							setTimeout($.proxy(function()
-							{
-								var blockElem = this.getBlock();
-								if (blockElem.tagName === 'DIV' && !$(blockElem).hasClass('redactor_editor'))
-								{
-									var node = $('<p>' + this.opts.invisibleSpace + '</p>');
-									$(blockElem).replaceWith(node);
-									this.selectionStart(node);
-								}
-
-							}, this), 1);
-						}
-						else if (block === false)
-						{
-							// hit enter
-							this.bufferSet();
-
-							var node = $('<p>' + this.opts.invisibleSpace + '</p>');
-							this.insertNode(node[0]);
-							this.selectionStart(node);
-							this.callback('enter', e);
-							return false;
-						}
+						e = e.originalEvent || e;
 
-					}
+						if (window.FormData === undefined || !e.dataTransfer) return true;
 
-					if (this.opts.linebreaks)
-					{
-						// replace div to br
-						if (block && this.opts.rBlockTest.test(block.tagName))
+						if (e.dataTransfer.files.length === 0)
 						{
-							// hit enter
-							this.bufferSet();
-
-							setTimeout($.proxy(function()
-							{
-								var blockElem = this.getBlock();
-								if ((blockElem.tagName === 'DIV' || blockElem.tagName === 'P') && !$(blockElem).hasClass('redactor_editor'))
-								{
-									this.replaceLineBreak(blockElem);
-								}
-
-							}, this), 1);
+							return this.build.setEventDrop(e);
 						}
 						else
 						{
-							return this.buildEventKeydownInsertLineBreak(e);
+							this.build.setEventDropUpload(e);
 						}
-					}
 
-					// blockquote, figcaption
-					if (block.tagName == 'BLOCKQUOTE' || block.tagName == 'FIGCAPTION')
-					{
-						return this.buildEventKeydownInsertLineBreak(e);
-					}
+						setTimeout(this.clean.clearUnverified, 1);
+						this.core.setCallback('drop', e);
 
-				}
+					}, this));
 
-				this.callback('enter', e);
-			}
-			else if (key === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey)) // Shift+Enter or Ctrl+Enter
-			{
-				this.bufferSet();
 
-				e.preventDefault();
-				this.insertLineBreak();
-			}
+					// click
+					this.$editor.on('click.redactor', $.proxy(function(e)
+					{
+						var event = this.core.getEvent();
+						var type = (event == 'click' || event == 'arrow') ? false : 'click';
 
-			// tab
-			if (key === this.keyCode.TAB && this.opts.shortcuts) return this.buildEventKeydownTab(e, pre);
+						this.core.addEvent(type);
+						this.utils.disableSelectAll();
+						this.core.setCallback('click', e);
 
-			// delete zero-width space before the removing
-			if (key === this.keyCode.BACKSPACE) this.buildEventKeydownBackspace(current);
+					}, this));
 
-		},
-		buildEventKeydownPre: function(e, current)
-		{
-			e.preventDefault();
-			this.bufferSet();
-			var html = $(current).parent().text();
-			this.insertNode(document.createTextNode('\n'));
-			if (html.search(/\s$/) == -1)
-			{
-				this.insertNode(document.createTextNode('\n'));
-			}
+					// paste
+					this.$editor.on('paste.redactor', $.proxy(this.paste.init, this));
 
-			this.sync();
-			this.callback('enter', e);
-			return false;
-		},
-		buildEventKeydownTab: function(e, pre)
-		{
-			if (!this.opts.tabFocus) return true;
-			if (this.isEmpty(this.get()) && this.opts.tabSpaces === false) return true;
+					// cut
+					this.$editor.on('cut.redactor', $.proxy(this.code.sync, this));
 
-			e.preventDefault();
+					// keydown
+					this.$editor.on('keydown.redactor', $.proxy(this.keydown.init, this));
 
-			if (pre === true && !e.shiftKey)
-			{
-				this.bufferSet();
-				this.insertNode(document.createTextNode('\t'));
-				this.sync();
-				return false;
+					// keyup
+					this.$editor.on('keyup.redactor', $.proxy(this.keyup.init, this));
 
-			}
-			else if (this.opts.tabSpaces !== false)
-			{
-				this.bufferSet();
-				this.insertNode(document.createTextNode(Array(this.opts.tabSpaces + 1).join('\u00a0')));
-				this.sync();
-				return false;
-			}
-			else
-			{
-				if (!e.shiftKey) this.indentingIndent();
-				else this.indentingOutdent();
-			}
+					// textarea keydown
+					if ($.isFunction(this.opts.codeKeydownCallback))
+					{
+						this.$textarea.on('keydown.redactor-textarea', $.proxy(this.opts.codeKeydownCallback, this));
+					}
 
-			return false;
-		},
-		buildEventKeydownBackspace: function(current)
-		{
-			if (typeof current.tagName !== 'undefined' && /^(H[1-6])$/i.test(current.tagName))
-			{
-				var node;
-				if (this.opts.linebreaks === false) node = $('<p>' + this.opts.invisibleSpace + '</p>');
-				else node = $('<br>' + this.opts.invisibleSpace);
+					// textarea keyup
+					if ($.isFunction(this.opts.codeKeyupCallback))
+					{
+						this.$textarea.on('keyup.redactor-textarea', $.proxy(this.opts.codeKeyupCallback, this));
+					}
 
-				$(current).replaceWith(node);
-				this.selectionStart(node);
-			}
+					// focus
+					this.$editor.on('focus.redactor', $.proxy(function(e)
+					{
+						if ($.isFunction(this.opts.focusCallback)) this.core.setCallback('focus', e);
 
-			if (typeof current.nodeValue !== 'undefined' && current.nodeValue !== null)
-			{
-				//var value = $.trim(current.nodeValue.replace(/[^\u0000-\u1C7F]/g, ''));
-				if (current.remove && current.nodeType === 3 && current.nodeValue.match(/[^/\u200B]/g) == null)
-				{
-					current.remove();
-				}
-			}
-		},
-		buildEventKeydownInsertLineBreak: function(e)
-		{
-			this.bufferSet();
-			e.preventDefault();
-			this.insertLineBreak();
-			this.callback('enter', e);
-			return;
-		},
-		buildEventKeyup: function(e)
-		{
-			if (this.rtePaste) return false;
+						if (this.selection.getCurrent() === false)
+						{
+							this.selection.get();
+							this.range.setStart(this.$editor[0], 0);
+							this.range.setEnd(this.$editor[0], 0);
+							this.selection.addRange();
+						}
 
-			var key = e.which;
-			var parent = this.getParent();
-			var current = this.getCurrent();
 
-			// replace to p before / after the table or body
-			if (!this.opts.linebreaks && current.nodeType == 3 && (parent == false || parent.tagName == 'BODY'))
-			{
-				var node = $('<p>').append($(current).clone());
-				$(current).replaceWith(node);
-				var next = $(node).next();
-				if (typeof(next[0]) !== 'undefined' && next[0].tagName == 'BR')
-				{
-					next.remove();
-				}
-				this.selectionEnd(node);
-			}
+					}, this));
 
-			// convert links
-			if ((this.opts.convertLinks || this.opts.convertImageLinks || this.opts.convertVideoLinks) && key === this.keyCode.ENTER)
-			{
-				this.buildEventKeyupConverters();
-			}
 
-			// if empty
-			if (key === this.keyCode.DELETE || key === this.keyCode.BACKSPACE)
-			{
-				return this.formatEmpty(e);
-			}
+					// blur
+					$(document).on('mousedown.redactor-blur.' + this.uuid, $.proxy(function(e)
+					{
+						if (this.start) return;
+						if (this.rtePaste) return;
 
-			this.callback('keyup', e);
-			this.sync();
-		},
-		buildEventKeyupConverters: function()
-		{
-			this.formatLinkify(this.opts.linkProtocol, this.opts.convertLinks, this.opts.convertImageLinks, this.opts.convertVideoLinks, this.opts.linkSize);
+						if ($(e.target).closest('.redactor-editor, .redactor-toolbar, .redactor-dropdown').size() !== 0)
+						{
+							return;
+						}
 
-			setTimeout($.proxy(function()
-			{
-				if (this.opts.convertImageLinks) this.observeImages();
-				if (this.opts.observeLinks) this.observeLinks();
-			}, this), 5);
-		},
-		buildPlugins: function()
-		{
-			if (!this.opts.plugins ) return;
+						this.utils.disableSelectAll();
+						if ($.isFunction(this.opts.blurCallback)) this.core.setCallback('blur', e);
 
-			$.each(this.opts.plugins, $.proxy(function(i, s)
-			{
-				if (RedactorPlugins[s])
+					}, this));
+
+				},
+				setHelpers: function()
 				{
-					$.extend(this, RedactorPlugins[s]);
-					if ($.isFunction( RedactorPlugins[ s ].init)) this.init();
-				}
+					// linkify
+					if (this.linkify.isEnabled())
+					{
+						this.linkify.format();
+					}
 
-			}, this ));
-		},
+					// placeholder
+					this.placeholder.enable();
 
-		// IFRAME
-		iframeStart: function()
-		{
-			this.iframeCreate();
+					// focus
+					if (this.opts.focus) setTimeout(this.focus.setStart, 100);
+					if (this.opts.focusEnd) setTimeout(this.focus.setEnd, 100);
 
-			if (this.opts.textareamode) this.iframeAppend(this.$source);
-			else
-			{
-				this.$sourceOld = this.$source.hide();
-				this.$source = this.buildCodearea(this.$sourceOld);
-				this.iframeAppend(this.$sourceOld);
-			}
-		},
-		iframeAppend: function(el)
-		{
-			this.$source.attr('dir', this.opts.direction).hide();
-			this.$box.insertAfter(el).append(this.$frame).append(this.$source);
-		},
-		iframeCreate: function()
-		{
-			this.$frame = $('<iframe style="width: 100%;" frameborder="0" />').one('load', $.proxy(function()
-			{
-				if (this.opts.fullpage)
+				},
+				plugins: function()
 				{
-					this.iframePage();
+					if (!this.opts.plugins) return;
+
+					$.each(this.opts.plugins, $.proxy(function(i, s)
+					{
+						var func = (typeof RedactorPlugins !== 'undefined' && typeof RedactorPlugins[s] !== 'undefined') ? RedactorPlugins : Redactor.fn;
+
+						if (!$.isFunction(func[s]))
+						{
+							return;
+						}
 
-					if (this.content === '') this.content = this.opts.invisibleSpace;
+						this[s] = func[s]();
 
-					this.$frame.contents()[0].write(this.content);
-					this.$frame.contents()[0].close();
+						// get methods
+						var methods = this.getModuleMethods(this[s]);
+						var len = methods.length;
 
-					var timer = setInterval($.proxy(function()
-					{
-						if (this.$frame.contents().find('body').html())
+						// bind methods
+						for (var z = 0; z < len; z++)
 						{
-							clearInterval(timer);
-							this.iframeLoad();
+							this[s][methods[z]] = this[s][methods[z]].bind(this);
 						}
 
-					}, this), 0);
-				}
-				else this.iframeLoad();
+						if ($.isFunction(this[s].init))
+						{
+							this[s].init();
+						}
 
-			}, this));
-		},
-		iframeDoc: function()
-		{
-			return this.$frame[0].contentWindow.document;
-		},
-		iframePage: function()
-		{
-			var doc = this.iframeDoc();
-			if (doc.documentElement) doc.removeChild(doc.documentElement);
 
-			return doc;
-		},
-		iframeAddCss: function(css)
-		{
-			css = css || this.opts.css;
+					}, this));
 
-			if (this.isString(css))
-			{
-				this.$frame.contents().find('head').append('<link rel="stylesheet" href="' + css + '" />');
-			}
+				},
+				disableMozillaEditing: function()
+				{
+					if (!this.utils.browser('mozilla')) return;
 
-			if ($.isArray(css))
-			{
-				$.each(css, $.proxy(function(i, url)
+					// FF fix
+					try {
+						document.execCommand('enableObjectResizing', false, false);
+						document.execCommand('enableInlineTableEditing', false, false);
+					} catch (e) {}
+				},
+				disableIeLinks: function()
 				{
-					this.iframeAddCss(url);
+					if (!this.utils.browser('msie')) return;
 
-				}, this));
-			}
+					// IE prevent converting links
+					document.execCommand("AutoUrlDetect", false, false);
+				}
+			};
 		},
-		iframeLoad: function()
+		button: function()
 		{
-			this.$editor = this.$frame.contents().find('body').attr({ 'contenteditable': true, 'dir': this.opts.direction });
-
-			// set document & window
-			if (this.$editor[0])
-			{
-				this.document = this.$editor[0].ownerDocument;
-				this.window = this.document.defaultView || window;
-			}
+			return {
+				build: function(btnName, btnObject)
+				{
+					var $button = $('<a href="#" class="re-icon re-' + btnName + '" rel="' + btnName + '" />').attr({'role': 'button', 'aria-label': btnObject.title, 'tabindex': '-1'});
 
-			// iframe css
-			this.iframeAddCss();
+					// click
+					if (btnObject.func || btnObject.command || btnObject.dropdown)
+					{
+						this.button.setEvent($button, btnName, btnObject);
+					}
 
-			if (this.opts.fullpage) this.setFullpageOnInit(this.$editor.html());
-			else this.set(this.content, true, false);
+					// dropdown
+					if (btnObject.dropdown)
+					{
+						$button.addClass('redactor-toolbar-link-dropdown').attr('aria-haspopup', true);
 
-			this.buildOptions();
-			this.buildAfter();
-		},
+						var $dropdown = $('<div class="redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-box-' + btnName + '" style="display: none;">');
+						$button.data('dropdown', $dropdown);
+						this.dropdown.build(btnName, $dropdown, btnObject.dropdown);
+					}
 
-		// PLACEHOLDER
-		placeholderStart: function(html)
-		{
-			if (this.isEmpty(html))
-			{
-				if (this.$element.attr('placeholder')) this.opts.placeholder = this.$element.attr('placeholder');
-				if (this.opts.placeholder === '') this.opts.placeholder = false;
+					// tooltip
+					if (this.utils.isDesktop())
+					{
+						this.button.createTooltip($button, btnName, btnObject.title);
+					}
 
-				if (this.opts.placeholder !== false)
+					return $button;
+				},
+				setEvent: function($button, btnName, btnObject)
 				{
-					this.opts.focus = false;
-					this.$editor.one('focus.redactor_placeholder', $.proxy(this.placeholderFocus, this));
+					$button.on('touchstart click', $.proxy(function(e)
+					{
+						if ($button.hasClass('redactor-button-disabled')) return false;
 
-					return $('<span class="redactor_placeholder" data-redactor="verified">').attr('contenteditable', false).text(this.opts.placeholder);
-				}
-			}
+						var type = 'func';
+						var callback = btnObject.func;
 
-			return false;
-		},
-		placeholderFocus: function()
-		{
-			this.$editor.find('span.redactor_placeholder').remove();
+						if (btnObject.command)
+						{
+							type = 'command';
+							callback = btnObject.command;
+						}
+						else if (btnObject.dropdown)
+						{
+							type = 'dropdown';
+							callback = false;
+						}
 
-			var html = '';
-			if (this.opts.linebreaks === false) html = this.opts.emptyHtml;
+						this.button.onClick(e, btnName, type, callback);
 
-			this.$editor.off('focus.redactor_placeholder');
-			this.$editor.html(html);
+					}, this));
+				},
+				createTooltip: function($button, name, title)
+				{
+					var $tooltip = $('<span>').addClass('redactor-toolbar-tooltip redactor-toolbar-tooltip-' + this.uuid + ' redactor-toolbar-tooltip-' + name).hide().html(title);
+					$tooltip.appendTo('body');
 
-			if (this.opts.linebreaks === false)
-			{
-				// place the cursor inside emptyHtml
-				this.selectionStart(this.$editor.children()[0]);
-			}
-			else
-			{
-				this.focus();
-			}
+					$button.on('mouseover', function()
+					{
+						if ($(this).hasClass('redactor-button-disabled')) return;
 
-			this.sync();
-		},
-		placeholderRemove: function()
-		{
-			this.opts.placeholder = false;
-			this.$editor.find('span.redactor_placeholder').remove();
-			this.$editor.off('focus.redactor_placeholder');
-		},
-		placeholderRemoveFromCode: function(html)
-		{
-			return html.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i, '');
-		},
+						var pos = $button.offset();
 
-		// SHORTCUTS
-		shortcuts: function(e, key)
-		{
+						$tooltip.show();
+						$tooltip.css({
+							top: (pos.top + $button.innerHeight()) + 'px',
+							left: (pos.left + $button.innerWidth()/2 - $tooltip.innerWidth()/2) + 'px'
+						});
+					});
 
-			if (!this.opts.shortcuts) return;
+					$button.on('mouseout', function()
+					{
+						$tooltip.hide();
+					});
 
-			if (!e.altKey)
-			{
-				if (key === 77) this.shortcutsLoad(e, 'removeFormat'); // Ctrl + m
-				else if (key === 66) this.shortcutsLoad(e, 'bold'); // Ctrl + b
-				else if (key === 73) this.shortcutsLoad(e, 'italic'); // Ctrl + i
+				},
+				onClick: function(e, btnName, type, callback)
+				{
+					this.button.caretOffset = this.caret.getOffset();
 
-				else if (key === 74) this.shortcutsLoad(e, 'insertunorderedlist'); // Ctrl + j
-				else if (key === 75) this.shortcutsLoad(e, 'insertorderedlist'); // Ctrl + k
+					e.preventDefault();
 
-				else if (key === 72) this.shortcutsLoad(e, 'superscript'); // Ctrl + h
-				else if (key === 76) this.shortcutsLoad(e, 'subscript'); // Ctrl + l
-			}
-			else
-			{
-				if (key === 48) this.shortcutsLoadFormat(e, 'p'); // ctrl + alt + 0
-				else if (key === 49) this.shortcutsLoadFormat(e, 'h1'); // ctrl + alt + 1
-				else if (key === 50) this.shortcutsLoadFormat(e, 'h2'); // ctrl + alt + 2
-				else if (key === 51) this.shortcutsLoadFormat(e, 'h3'); // ctrl + alt + 3
-				else if (key === 52) this.shortcutsLoadFormat(e, 'h4'); // ctrl + alt + 4
-				else if (key === 53) this.shortcutsLoadFormat(e, 'h5'); // ctrl + alt + 5
-				else if (key === 54) this.shortcutsLoadFormat(e, 'h6'); // ctrl + alt + 6
+					$(document).find('.redactor-toolbar-tooltip').hide();
 
-			}
+					if (this.utils.browser('msie')) e.returnValue = false;
 
-		},
-		shortcutsLoad: function(e, cmd)
-		{
-			e.preventDefault();
-			this.execCommand(cmd, false);
-		},
-		shortcutsLoadFormat: function(e, cmd)
-		{
-			e.preventDefault();
-			this.formatBlocks(cmd);
-		},
+					if (type == 'command') this.inline.format(callback);
+					else if (type == 'dropdown') this.dropdown.show(e, btnName);
+					else this.button.onClickCallback(e, callback, btnName);
+				},
+				onClickCallback: function(e, callback, btnName)
+				{
+					var func;
 
-		// FOCUS
-		focus: function()
-		{
-			if (!this.browser('opera')) this.window.setTimeout($.proxy(this.focusSet, this, true), 1);
-			else this.$editor.focus();
-		},
-		focusEnd: function()
-		{
-			this.focusSet();
-		},
-		focusSet: function(collapse)
-		{
-			this.$editor.focus();
+					if ($.isFunction(callback)) callback.call(this, btnName);
+					else if (callback.search(/\./) != '-1')
+					{
+						func = callback.split('.');
+						if (typeof this[func[0]] == 'undefined') return;
 
-			var range = this.getRange();
-			range.selectNodeContents(this.$editor[0]);
+						this[func[0]][func[1]](btnName);
+					}
+					else this[callback](btnName);
 
-			// collapse - controls the position of focus: the beginning (true), at the end (false).
-			range.collapse(collapse || false);
+					this.observe.buttons(e, btnName);
+				},
+				get: function(key)
+				{
+					return this.$toolbar.find('a.re-' + key);
+				},
+				setActive: function(key)
+				{
+					this.button.get(key).addClass('redactor-act');
+				},
+				setInactive: function(key)
+				{
+					this.button.get(key).removeClass('redactor-act');
+				},
+				setInactiveAll: function(key)
+				{
+					if (typeof key === 'undefined')
+					{
+						this.$toolbar.find('a.re-icon').removeClass('redactor-act');
+					}
+					else
+					{
+						this.$toolbar.find('a.re-icon').not('.re-' + key).removeClass('redactor-act');
+					}
+				},
+				setActiveInVisual: function()
+				{
+					this.$toolbar.find('a.re-icon').not('a.re-html, a.re-fullscreen').removeClass('redactor-button-disabled');
+				},
+				setInactiveInCode: function()
+				{
+					this.$toolbar.find('a.re-icon').not('a.re-html, a.re-fullscreen').addClass('redactor-button-disabled');
+				},
+				changeIcon: function(key, classname)
+				{
+					this.button.get(key).addClass('re-' + classname);
+				},
+				removeIcon: function(key, classname)
+				{
+					this.button.get(key).removeClass('re-' + classname);
+				},
+				setAwesome: function(key, name)
+				{
+					var $button = this.button.get(key);
+					$button.removeClass('redactor-btn-image').addClass('fa-redactor-btn');
+					$button.html('<i class="fa ' + name + '"></i>');
+				},
+				addCallback: function($btn, callback)
+				{
+					if ($btn == "buffer") return;
 
-			var sel = this.getSelection();
-			sel.removeAllRanges();
-			sel.addRange(range);
-		},
+					var type = (callback == 'dropdown') ? 'dropdown' : 'func';
+					var key = $btn.attr('rel');
+					$btn.on('touchstart click', $.proxy(function(e)
+					{
+						if ($btn.hasClass('redactor-button-disabled')) return false;
+						this.button.onClick(e, key, type, callback);
 
-		// TOGGLE
-		toggle: function(direct)
-		{
-			if (this.opts.visual) this.toggleCode(direct);
-			else this.toggleVisual();
-		},
-		toggleVisual: function()
-		{
-			var html = this.$source.hide().val();
+					}, this));
+				},
+				addDropdown: function($btn, dropdown)
+				{
+					$btn.addClass('redactor-toolbar-link-dropdown').attr('aria-haspopup', true);
 
-			if (typeof this.modified !== 'undefined')
-			{
-				this.modified = this.cleanRemoveSpaces(this.modified, false) !== this.cleanRemoveSpaces(html, false);
-			}
+					var key = $btn.attr('rel');
+					this.button.addCallback($btn, 'dropdown');
 
-			if (this.modified)
-			{
-				// don't remove the iframe even if cleared all.
-				if (this.opts.fullpage && html === '') this.setFullpageOnInit(html);
-				else
-				{
-					this.set(html);
-					if (this.opts.fullpage) this.buildBindKeyboard();
-				}
-			}
+					var $dropdown = $('<div class="redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-box-' + key + '" style="display: none;">');
+					$btn.data('dropdown', $dropdown);
 
-			if (this.opts.iframe) this.$frame.show();
-			else this.$editor.show();
+					// build dropdown
+					if (dropdown) this.dropdown.build(key, $dropdown, dropdown);
 
-			if (this.opts.fullpage) this.$editor.attr('contenteditable', true );
+					return $dropdown;
+				},
+				add: function(key, title)
+				{
+					if (!this.opts.toolbar) return;
 
-			this.$source.off('keydown.redactor-textarea-indenting');
+					if (this.button.isMobileUndoRedo(key)) return "buffer";
 
-			this.$editor.focus();
-			this.selectionRestore();
+					var btn = this.button.build(key, { title: title });
+					btn.addClass('redactor-btn-image');
 
-			this.observeStart();
-			this.buttonActiveVisual();
-			this.buttonInactive('html');
-			this.opts.visual = true;
-		},
-		toggleCode: function(direct)
-		{
-			if (direct !== false) this.selectionSave();
+					this.$toolbar.append($('<li>').append(btn));
 
-			var height = null;
-			if (this.opts.iframe)
-			{
-				height = this.$frame.height();
-				if (this.opts.fullpage) this.$editor.removeAttr('contenteditable');
-				this.$frame.hide();
-			}
-			else
-			{
-				height = this.$editor.innerHeight();
-				this.$editor.hide();
-			}
+					return btn;
+				},
+				addFirst: function(key, title)
+				{
+					if (!this.opts.toolbar) return;
 
-			var html = this.$source.val();
+					if (this.button.isMobileUndoRedo(key)) return "buffer";
 
-			// tidy html
-			if (html !== '' && this.opts.tidyHtml)
-			{
-				this.$source.val(this.cleanHtml(html));
-			}
+					var btn = this.button.build(key, { title: title });
+					btn.addClass('redactor-btn-image');
+					this.$toolbar.prepend($('<li>').append(btn));
 
-			this.modified = html;
+					return btn;
+				},
+				addAfter: function(afterkey, key, title)
+				{
+					if (!this.opts.toolbar) return;
 
-			this.$source.height(height).show().focus();
+					if (this.button.isMobileUndoRedo(key)) return "buffer";
 
-			// textarea indenting
-			this.$source.on('keydown.redactor-textarea-indenting', this.textareaIndenting);
+					var btn = this.button.build(key, { title: title });
+					btn.addClass('redactor-btn-image');
+					var $btn = this.button.get(afterkey);
 
-			this.buttonInactiveVisual();
-			this.buttonActive('html');
-			this.opts.visual = false;
-		},
-		textareaIndenting: function(e)
-		{
-			if (e.keyCode === 9)
-			{
-				var $el = $(this);
-				var start = $el.get(0).selectionStart;
-				$el.val($el.val().substring(0, start) + "\t" + $el.val().substring($el.get(0).selectionEnd));
-				$el.get(0).selectionStart = $el.get(0).selectionEnd = start + 1;
-				return false;
-			}
-		},
+					if ($btn.length !== 0) $btn.parent().after($('<li>').append(btn));
+					else this.$toolbar.append($('<li>').append(btn));
 
-		// AUTOSAVE
-		autosave: function()
-		{
-			var savedHtml = false;
-			this.autosaveInterval = setInterval($.proxy(function()
-			{
-				var html = this.get();
-				if (savedHtml !== html)
+					return btn;
+				},
+				addBefore: function(beforekey, key, title)
 				{
-					$.ajax({
-						url: this.opts.autosave,
-						type: 'post',
-						data: this.$source.attr('name') + '=' + escape(encodeURIComponent(html)),
-						success: $.proxy(function(data)
-						{
-							this.callback('autosave', false, data);
-							savedHtml = html;
+					if (!this.opts.toolbar) return;
 
-						}, this)
-					});
+					if (this.button.isMobileUndoRedo(key)) return "buffer";
+
+					var btn = this.button.build(key, { title: title });
+					btn.addClass('redactor-btn-image');
+					var $btn = this.button.get(beforekey);
+
+					if ($btn.length !== 0) $btn.parent().before($('<li>').append(btn));
+					else this.$toolbar.append($('<li>').append(btn));
+
+					return btn;
+				},
+				remove: function(key)
+				{
+					this.button.get(key).remove();
+				},
+				isMobileUndoRedo: function(key)
+				{
+					return (key == "undo" || key == "redo") && !this.utils.isDesktop();
 				}
-			}, this), this.opts.autosaveInterval*1000);
+			};
 		},
-
-		// TOOLBAR
-		toolbarBuild: function()
+		caret: function()
 		{
-			// extend buttons
-			if (this.opts.air)
-			{
-				this.opts.buttons = this.opts.airButtons;
-			}
-			else
-			{
-				if (!this.opts.buttonSource)
+			return {
+				setStart: function(node)
 				{
-					var index = this.opts.buttons.indexOf('html'), next = this.opts.buttons[index + 1];
-					this.opts.buttons.splice(index, 1);
-					if (next === '|') this.opts.buttons.splice(index, 1);
-				}
-			}
+					// inline tag
+					if (!this.utils.isBlock(node))
+					{
+						var space = this.utils.createSpaceElement();
 
-			$.extend(this.opts.toolbar, this.opts.buttonsCustom);
-			$.each(this.opts.buttonsAdd, $.proxy(function(i, s)
-			{
-				this.opts.buttons.push(s);
+						$(node).prepend(space);
+						this.caret.setEnd(space);
+					}
+					else
+					{
+						this.caret.set(node, 0, node, 0);
+					}
+				},
+				setEnd: function(node)
+				{
+					node = node[0] || node;
+					if (node.lastChild.nodeType == 1)
+					{
+						return this.caret.setAfter(node.lastChild);
+					}
 
-			}, this));
+					this.caret.set(node, 1, node, 1);
 
-			// formatting tags
-			if (this.opts.toolbar)
-			{
-				$.each(this.opts.toolbar.formatting.dropdown, $.proxy(function (i, s)
+				},
+				set: function(orgn, orgo, focn, foco)
 				{
-					if ($.inArray(i, this.opts.formattingTags ) == '-1') delete this.opts.toolbar.formatting.dropdown[i];
+					// focus
+					// disabled in 10.0.7
+					// if (!this.utils.browser('msie')) this.$editor.focus();
 
-				}, this));
-			}
+					orgn = orgn[0] || orgn;
+					focn = focn[0] || focn;
 
-			// if no buttons don't create a toolbar
-			if (this.opts.buttons.length === 0) return false;
+					if (this.utils.isBlockTag(orgn.tagName) && orgn.innerHTML === '')
+					{
+						orgn.innerHTML = this.opts.invisibleSpace;
+					}
 
-			// air enable
-			this.airEnable();
+					if (orgn.tagName == 'BR' && this.opts.linebreaks === false)
+					{
+						var parent = $(this.opts.emptyHtml)[0];
+						$(orgn).replaceWith(parent);
+						orgn = parent;
+						focn = orgn;
+					}
 
-			// toolbar build
-			this.$toolbar = $('<ul>').addClass('redactor_toolbar').attr('id', 'redactor_toolbar_' + this.uuid);
+					this.selection.get();
 
-			if (this.opts.air)
-			{
-				// air box
-				this.$air = $('<div class="redactor_air">').attr('id', 'redactor_air_' + this.uuid).hide();
-				this.$air.append(this.$toolbar);
-				$('body').append(this.$air);
-			}
-			else
-			{
-				if (this.opts.toolbarExternal) $(this.opts.toolbarExternal).html(this.$toolbar);
-				else this.$box.prepend(this.$toolbar);
-			}
+					try
+					{
+						this.range.setStart(orgn, orgo);
+						this.range.setEnd(focn, foco);
+					}
+					catch (e) {}
 
-			$.each(this.opts.buttons, $.proxy(function(i, btnName)
-			{
-				// separator
-				if ( btnName === '|' ) this.$toolbar.append($(this.opts.buttonSeparator));
-				else if(this.opts.toolbar[btnName])
+					this.selection.addRange();
+				},
+				setAfter: function(node)
 				{
-					var btnObject = this.opts.toolbar[btnName];
-					if (this.opts.fileUpload === false && btnName === 'file') return true;
-					this.$toolbar.append( $('<li>').append(this.buttonBuild(btnName, btnObject)));
-				}
+					try
+					{
+						var tag = $(node)[0].tagName;
+
+						// inline tag
+						if (tag != 'BR' && !this.utils.isBlock(node))
+						{
+							var space = this.utils.createSpaceElement();
+
+							$(node).after(space);
+							this.caret.setEnd(space);
+						}
+						else
+						{
+							if (tag != 'BR' && this.utils.browser('msie'))
+							{
+								this.caret.setStart($(node).next());
+							}
+							else
+							{
+								this.caret.setAfterOrBefore(node, 'after');
+							}
+						}
+					}
+					catch (e)
+					{
+						var space = this.utils.createSpaceElement();
+						$(node).after(space);
+						this.caret.setEnd(space);
+					}
+				},
+				setBefore: function(node)
+				{
+					// block tag
+					if (this.utils.isBlock(node))
+					{
+						this.caret.setEnd($(node).prev());
+					}
+					else
+					{
+						this.caret.setAfterOrBefore(node, 'before');
+					}
+				},
+				setAfterOrBefore: function(node, type)
+				{
+					// focus
+					if (!this.utils.browser('msie')) this.$editor.focus();
 
-			}, this));
+					node = node[0] || node;
 
-			this.$toolbar.find('a').attr('tabindex', '-1');
+					this.selection.get();
 
-			// fixed
-			if (this.opts.toolbarFixed)
-			{
-				this.toolbarObserveScroll();
-				$(this.opts.toolbarFixedTarget).on('scroll.redactor', $.proxy(this.toolbarObserveScroll, this));
-			}
+					if (type == 'after')
+					{
+						try {
 
-			// buttons response
-			if (this.opts.activeButtons)
-			{
-				var buttonActiveObserver = $.proxy(this.buttonActiveObserver, this);
-				this.$editor.on('mouseup.redactor keyup.redactor', buttonActiveObserver);
-			}
-		},
-		toolbarObserveScroll: function()
-		{
-			var scrollTop = $(this.opts.toolbarFixedTarget).scrollTop();
-			var boxTop = this.$box.offset().top;
-			var left = 0;
+							this.range.setStartAfter(node);
+							this.range.setEndAfter(node);
+						}
+						catch (e) {}
+					}
+					else
+					{
+						try {
+							this.range.setStartBefore(node);
+							this.range.setEndBefore(node);
+						}
+						catch (e) {}
+					}
 
-			var end = boxTop + this.$box.height() + 40;
 
-			if (scrollTop > boxTop)
-			{
-				var width = '100%';
-				if (this.opts.toolbarFixedBox)
+					this.range.collapse(false);
+					this.selection.addRange();
+				},
+				getOffsetOfElement: function(node)
 				{
-					left = this.$box.offset().left;
-					width = this.$box.innerWidth();
-					this.$toolbar.addClass('toolbar_fixed_box');
-				}
-
-				this.toolbarFixed = true;
-				this.$toolbar.css({
-					position: 'fixed',
-					width: width,
-					zIndex: 1005,
-					top: this.opts.toolbarFixedTopOffset + 'px',
-					left: left
-				});
+					node = node[0] || node;
 
-				if (scrollTop < end) this.$toolbar.css('visibility', 'visible');
-				else this.$toolbar.css('visibility', 'hidden');
-			}
-			else
-			{
-				this.toolbarFixed = false;
-				this.$toolbar.css({
-					position: 'relative',
-					width: 'auto',
-					top: 0,
-					left: left
-				});
+					this.selection.get();
 
-				if (this.opts.toolbarFixedBox) this.$toolbar.removeClass('toolbar_fixed_box');
-			}
-		},
+					var cloned = this.range.cloneRange();
+					cloned.selectNodeContents(node);
+					cloned.setEnd(this.range.endContainer, this.range.endOffset);
 
-		// AIR
-		airEnable: function()
-		{
-			if (!this.opts.air) return;
+					return $.trim(cloned.toString()).length;
+				},
+				getOffset: function()
+				{
+					var offset = 0;
+				    var sel = window.getSelection();
 
-			this.$editor.on('mouseup.redactor keyup.redactor', this, $.proxy(function(e)
-			{
-				var text = this.getSelectionText();
+				    if (sel.rangeCount > 0)
+				    {
+				        var range = window.getSelection().getRangeAt(0);
+				        var caretRange = range.cloneRange();
+				        caretRange.selectNodeContents(this.$editor[0]);
+				        caretRange.setEnd(range.endContainer, range.endOffset);
+				        offset = caretRange.toString().length;
+				    }
 
-				if (e.type === 'mouseup' && text != '') this.airShow(e);
-				if (e.type === 'keyup' && e.shiftKey && text != '')
+					return offset;
+				},
+				setOffset: function(start, end)
 				{
-					var $focusElem = $(this.getElement(this.getSelection().focusNode)), offset = $focusElem.offset();
-					offset.height = $focusElem.height();
-					this.airShow(offset, true);
-				}
+					if (typeof end == 'undefined') end = start;
+					if (!this.focus.isFocused()) this.focus.setStart();
 
-			}, this));
-		},
-		airShow: function (e, keyboard)
-		{
-			if (!this.opts.air) return;
+					var sel = this.selection.get();
+					var node, offset = 0;
+					var walker = document.createTreeWalker(this.$editor[0], NodeFilter.SHOW_TEXT, null, null);
 
-			var left, top;
-			$('.redactor_air').hide();
+					while (node == walker.nextNode())
+					{
+						offset += node.nodeValue.length;
+						if (offset > start)
+						{
+							this.range.setStart(node, node.nodeValue.length + start - offset);
+							start = Infinity;
+						}
 
-			if (keyboard)
-			{
-				left = e.left;
-				top = e.top + e.height + 14;
+						if (offset >= end)
+						{
+							this.range.setEnd(node, node.nodeValue.length + end - offset);
+							break;
+						}
+					}
 
-				if (this.opts.iframe)
+					this.range.collapse(false);
+					this.selection.addRange();
+				},
+				// deprecated
+				setToPoint: function(start, end)
 				{
-					top += this.$box.position().top - $(this.document).scrollTop();
-					left += this.$box.position().left;
-				}
-			}
-			else
-			{
-				var width = this.$air.innerWidth();
-
-				left = e.clientX;
-				if ($(this.document).width() < (left + width)) left -= width;
-
-				top = e.clientY + 14;
-				if (this.opts.iframe)
+					this.caret.setOffset(start, end);
+				},
+				getCoords: function()
 				{
-					top += this.$box.position().top;
-					left += this.$box.position().left;
+					return this.caret.getOffset();
 				}
-				else top += $( this.document ).scrollTop();
-			}
-
-			this.$air.css({
-				left: left + 'px',
-				top: top + 'px'
-			}).show();
-
-			this.airBindHide();
+			};
 		},
-		airBindHide: function()
+		clean: function()
 		{
-			if (!this.opts.air) return;
-
-			var hideHandler = $.proxy(function(doc)
-			{
-				$(doc).on('mousedown.redactor', $.proxy(function(e)
+			return {
+				onSet: function(html)
 				{
-					if ($( e.target ).closest(this.$toolbar).length === 0)
-					{
-						this.$air.fadeOut(100);
-						this.selectionRemove();
-						$(doc).off(e);
-					}
+					html = this.clean.savePreCode(html);
 
-				}, this)).on('keydown.redactor', $.proxy(function(e)
-				{
-					if (e.which === this.keyCode.ESC)
-					{
-						this.getSelection().collapseToStart();
-					}
+					// convert script tag
+					html = html.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi, '<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>');
 
-					this.$air.fadeOut(100);
-					$(doc).off(e);
+					// replace dollar sign to entity
+					html = html.replace(/\$/g, '&#36;');
 
-				}, this));
-			}, this);
+					// replace special characters in links
+					html = html.replace(/<a href="(.*?[^>]?)(.*?[^>]?)">/gi, '<a href="$1&reg$2">');
 
-			// Hide the toolbar at events in all documents (iframe)
-			hideHandler(document);
-			if (this.opts.iframe) hideHandler(this.document);
-		},
-		airBindMousemoveHide: function()
-		{
-			if (!this.opts.air) return;
+					if (this.opts.replaceDivs && !this.opts.linebreaks) html = this.clean.replaceDivs(html);
+					if (this.opts.linebreaks)  html = this.clean.replaceParagraphsToBr(html);
 
-			var hideHandler = $.proxy(function(doc)
-			{
-				$(doc).on('mousemove.redactor', $.proxy(function(e)
-				{
-					if ($( e.target ).closest(this.$toolbar).length === 0)
+					// save form tag
+					html = this.clean.saveFormTags(html);
+
+					// convert font tag to span
+					var $div = $('<div>');
+					$div.html(html);
+					var fonts = $div.find('font[style]');
+					if (fonts.length !== 0)
 					{
-						this.$air.fadeOut(100);
-						$(doc).off(e);
-					}
+						fonts.replaceWith(function()
+						{
+							var $el = $(this);
+							var $span = $('<span>').attr('style', $el.attr('style'));
+							return $span.append($el.contents());
+						});
 
-				}, this));
-			}, this);
+						html = $div.html();
+					}
 
-			// Hide the toolbar at events in all documents (iframe)
-			hideHandler(document);
-			if (this.opts.iframe) hideHandler(this.document);
-		},
+					$div.remove();
 
-		// DROPDOWNS
-		dropdownBuild: function($dropdown, dropdownObject)
-		{
-			$.each(dropdownObject, $.proxy(function(btnName, btnObject)
-			{
-				if (!btnObject.className) btnObject.className = '';
+					// remove font tag
+					html = html.replace(/<font(.*?)>/gi, '');
+					html = html.replace(/<\/font>/gi, '');
 
-				var $item;
-				if (btnObject.name === 'separator') $item = $('<a class="redactor_separator_drop">');
-				else
-				{
-					$item = $('<a href="#" class="' + btnObject.className + ' redactor_dropdown_' + btnName + '">' + btnObject.title + '</a>');
-					$item.on('click', $.proxy(function(e)
-					{
-						if (e.preventDefault) e.preventDefault();
-						if (this.browser('msie')) e.returnValue = false;
+					// tidy html
+					html = this.tidy.load(html);
 
-						if (btnObject.callback) btnObject.callback.call(this, btnName, $item, btnObject, e);
-						if (btnObject.exec) this.execCommand(btnObject.exec, btnName);
-						if (btnObject.func) this[btnObject.func](btnName);
+					// paragraphize
+					if (this.opts.paragraphize) html = this.paragraphize.load(html);
 
-						this.buttonActiveObserver();
-						if (this.opts.air) this.$air.fadeOut(100);
+					// verified
+					html = this.clean.setVerified(html);
 
-					}, this));
-				}
+					// convert inline tags
+					html = this.clean.convertInline(html);
 
-				$dropdown.append($item);
+					html = html.replace(/&amp;/g, '&');
 
-			}, this));
-		},
-		dropdownShow: function(e, key)
-		{
-			if (!this.opts.visual)
-			{
-				e.preventDefault();
-				return false;
-			}
+					return html;
+				},
+				onSync: function(html)
+				{
+					// remove spaces
+					html = html.replace(/\u200B/g, '');
+					html = html.replace(/&#x200b;/gi, '');
 
-			var $dropdown = this.$toolbar.find('.redactor_dropdown_box_' + key);
-			var $button = this.buttonGet(key);
+					if (this.opts.cleanSpaces)
+					{
+						html = html.replace(/&nbsp;/gi, ' ');
+					}
 
-			if ($button.hasClass('dropact')) this.dropdownHideAll();
-			else
-			{
-				this.dropdownHideAll();
+					if (html.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i) != -1)
+					{
+						return '';
+					}
 
-				this.buttonActive(key);
-				$button.addClass('dropact');
+					// reconvert script tag
+					html = html.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi, '<script$1>$2</script>');
 
-				var keyPosition = $button.position();
-				if (this.toolbarFixed)
-				{
-					keyPosition = $button.offset();
-				}
+					// restore form tag
+					html = this.clean.restoreFormTags(html);
 
-				// fix right placement
-				var dropdownWidth = $dropdown.width();
-				if ((keyPosition.left + dropdownWidth) > $(document).width())
-				{
-					keyPosition.left -= dropdownWidth;
-				}
+					var chars = {
+						'\u2122': '&trade;',
+						'\u00a9': '&copy;',
+						'\u2026': '&hellip;',
+						'\u2014': '&mdash;',
+						'\u2010': '&dash;'
+					};
+					// replace special characters
+					$.each(chars, function(i,s)
+					{
+						html = html.replace(new RegExp(i, 'g'), s);
+					});
 
-				var left = keyPosition.left + 'px';
-				var btnHeight = 29;
+					// remove last br in FF
+					if (this.utils.browser('mozilla'))
+					{
+						html = html.replace(/<br\s?\/?>$/gi, '');
+					}
 
-				var position = 'absolute';
-				var top = btnHeight + 'px';
+					// remove br in|of li tags
+					html = html.replace(new RegExp('<br\\s?/?></li>', 'gi'), '</li>');
+					html = html.replace(new RegExp('</li><br\\s?/?>', 'gi'), '</li>');
 
-				if (this.opts.toolbarFixed && this.toolbarFixed) position = 'fixed';
-				else if (!this.opts.air) top = keyPosition.top + btnHeight + 'px';
+					// remove empty attributes
+					html = html.replace(/<(.*?)rel="\s*?"(.*?[^>]?)>/gi, '<$1$2">');
+					html = html.replace(/<(.*?)style="\s*?"(.*?[^>]?)>/gi, '<$1$2">');
+					html = html.replace(/="">/gi, '>');
+					html = html.replace(/""">/gi, '">');
+					html = html.replace(/"">/gi, '">');
 
-				$dropdown.css({ position: position, left: left, top: top }).show();
-			}
+					// remove verified
+					html = html.replace(/<div(.*?)data-tagblock="redactor"(.*?[^>])>/gi, '<div$1$2>');
+					html = html.replace(/<(.*?) data-verified="redactor"(.*?[^>])>/gi, '<$1$2>');
 
+					var $div = $("<div/>").html($.parseHTML(html, document, true));
+					$div.find("span").removeAttr("rel");
 
-			var hdlHideDropDown = $.proxy(function(e)
-			{
-				this.dropdownHide(e, $dropdown);
+					$div.find('pre .redactor-invisible-space').each(function()
+					{
+						$(this).contents().unwrap();
+					});
 
-			}, this);
+					html = $div.html();
 
-			$(document).one('click', hdlHideDropDown);
-			this.$editor.one('click', hdlHideDropDown);
+					// remove rel attribute from img
+					html = html.replace(/<img(.*?[^>])rel="(.*?[^>])"(.*?[^>])>/gi, '<img$1$3>');
+					html = html.replace(/<span class="redactor-invisible-space">(.*?)<\/span>/gi, '$1');
 
-			e.stopPropagation();
-			this.$editor.focus();
-		},
-		dropdownHideAll: function()
-		{
-			this.$toolbar.find('a.dropact').removeClass('redactor_act').removeClass('dropact');
-			$('.redactor_dropdown').hide();
-		},
-		dropdownHide: function (e, $dropdown)
-		{
-			if (!$(e.target).hasClass('dropact'))
-			{
-				$dropdown.removeClass('dropact');
-				this.dropdownHideAll();
-			}
-		},
+					html = html.replace(/ data-save-url="(.*?[^>])"/gi, '');
 
-		// BUTTONS
-		buttonBuild: function(btnName, btnObject)
-		{
-			var $button = $('<a href="javascript:;" title="' + btnObject.title + '" tabindex="-1" class="redactor_btn redactor_btn_' + btnName + '"></a>');
+					// remove image resize
+					html = html.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi, '$3<img$4>');
+					html = html.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi, '');
+					html = html.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi, '');
 
-			$button.on('click', $.proxy(function(e)
-			{
-				if (e.preventDefault) e.preventDefault();
-				if (this.browser('msie')) e.returnValue = false;
+					// remove font tag
+					html = html.replace(/<font(.*?)>/gi, '');
+					html = html.replace(/<\/font>/gi, '');
 
-				if ($button.hasClass('redactor_button_disabled')) return false;
+					// tidy html
+					html = this.tidy.load(html);
 
-				if (this.isFocused() === false && !btnObject.exec)
-				{
-					this.$editor.focus();
-				}
+					// link nofollow
+					if (this.opts.linkNofollow)
+					{
+						html = html.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi, '<a$1$2>');
+						html = html.replace(/<a(.*?[^>])>/gi, '<a$1 rel="nofollow">');
+					}
 
-				if (btnObject.exec)
-				{
-					this.$editor.focus();
-					this.execCommand(btnObject.exec, btnName);
-					this.airBindMousemoveHide();
+					// reconvert inline
+					html = html.replace(/\sdata-redactor-(tag|class|style)="(.*?[^>])"/gi, '');
+					html = html.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>', 'gi'), '<$1$2>');
+					html = html.replace(new RegExp('<(.*?) data-verified="redactor">', 'gi'), '<$1>');
 
-				}
-				else if (btnObject.func && btnObject.func !== 'show')
-				{
-					this[btnObject.func](btnName);
-					this.airBindMousemoveHide();
+					html = html.replace(/&amp;/g, '&');
 
-				}
-				else if (btnObject.callback)
+					return html;
+				},
+				onPaste: function(html, setMode)
 				{
-					btnObject.callback.call(this, btnName, $button, btnObject, e);
-					this.airBindMousemoveHide();
+					html = $.trim(html);
+					html = html.replace(/\$/g, '&#36;');
 
-				}
-				else if (btnObject.dropdown)
-				{
-					this.dropdownShow(e, btnName);
-				}
+					// convert dirty spaces
+					html = html.replace(/<span class="s[0-9]">/gi, '<span>');
+					html = html.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi, ' ');
+					html = html.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi, '\t');
+					html = html.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi, ' ');
 
-				this.buttonActiveObserver(false, btnName);
+					if (this.opts.pastePlainText)
+					{
+						return this.clean.getPlainText(html);
+					}
 
-			}, this));
+					if (!this.utils.isSelectAll() && typeof setMode == 'undefined')
+					{
+						if (this.utils.isCurrentOrParent(['FIGCAPTION', 'A']))
+						{
+							return this.clean.getPlainText(html, false);
+						}
 
-			// dropdown
-			if (btnObject.dropdown)
-			{
-				var $dropdown = $('<div class="redactor_dropdown redactor_dropdown_box_' + btnName + '" style="display: none;">');
-				$dropdown.appendTo(this.$toolbar);
-				this.dropdownBuild($dropdown, btnObject.dropdown);
-			}
+						if (this.utils.isCurrentOrParent('PRE'))
+						{
+							html = html.replace(//g, '"');
+							html = html.replace(//g, '"');
+							html = html.replace(//g, '\'');
+							html = html.replace(//g, '\'');
 
-			return $button;
-		},
-		buttonGet: function(key)
-		{
-			if (!this.opts.toolbar) return false;
-			return $(this.$toolbar.find('a.redactor_btn_' + key));
-		},
-		buttonActiveToggle: function(key)
-		{
-			var btn = this.buttonGet(key);
+							return this.clean.getPreCode(html);
+						}
 
-			if (btn.hasClass('redactor_act')) btn.removeClass('redactor_act');
-			else btn.addClass('redactor_act');
-		},
-		buttonActive: function(key)
-		{
-			this.buttonGet(key).addClass('redactor_act');
-		},
-		buttonInactive: function(key)
-		{
-			this.buttonGet(key).removeClass('redactor_act');
-		},
-		buttonInactiveAll: function(btnName)
-		{
-			$.each(this.opts.toolbar, $.proxy(function(k)
-			{
-				if (k != btnName) this.buttonInactive(k);
+						if (this.utils.isCurrentOrParent(['BLOCKQUOTE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6']))
+						{
+							html = this.clean.getOnlyImages(html);
 
-			}, this));
-		},
-		buttonActiveVisual: function()
-		{
-			this.$toolbar.find('a.redactor_btn').not('a.redactor_btn_html').removeClass('redactor_button_disabled');
-		},
-		buttonInactiveVisual: function()
-		{
-			this.$toolbar.find('a.redactor_btn').not('a.redactor_btn_html').addClass('redactor_button_disabled');
-		},
-		buttonChangeIcon: function (key, classname)
-		{
-			this.buttonGet(key).addClass('redactor_btn_' + classname);
-		},
-		buttonRemoveIcon: function(key, classname)
-		{
-			this.buttonGet(key).removeClass('redactor_btn_' + classname);
-		},
-		buttonAddSeparator: function()
-		{
-			this.$toolbar.append($(this.opts.buttonSeparator));
-		},
-		buttonAddSeparatorAfter: function(key)
-		{
-			this.buttonGet(key).parent().after($(this.opts.buttonSeparator));
-		},
-		buttonAddSeparatorBefore: function(key)
-		{
-			this.buttonGet(key).parent().before($(this.opts.buttonSeparator));
-		},
-		buttonRemoveSeparatorAfter: function(key)
-		{
-			this.buttonGet(key).parent().next().remove();
-		},
-		buttonRemoveSeparatorBefore: function(key)
-		{
-			this.buttonGet(key).parent().prev().remove();
-		},
-		buttonSetRight: function(key)
-		{
-			if (!this.opts.toolbar) return;
-			this.buttonGet(key).parent().addClass('redactor_btn_right');
-		},
-		buttonSetLeft: function(key)
-		{
-			if (!this.opts.toolbar) return;
-			this.buttonGet(key).parent().removeClass('redactor_btn_right');
-		},
-		buttonAdd: function(key, title, callback, dropdown)
-		{
-			if (!this.opts.toolbar) return;
-			var btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown });
-			this.$toolbar.append( $('<li>').append(btn));
-		},
-		buttonAddFirst: function(key, title, callback, dropdown)
-		{
-			if (!this.opts.toolbar) return;
-			var btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown });
-			this.$toolbar.prepend($('<li>').append(btn));
-		},
-		buttonAddAfter: function(afterkey, key, title, callback, dropdown)
-		{
-			if (!this.opts.toolbar) return;
-			var btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown });
-			var $btn = this.buttonGet(afterkey);
+							if (!this.utils.browser('msie'))
+							{
+								var block = this.selection.getBlock();
+								if (block && block.tagName == 'P')
+								{
+									html = html.replace(/<img(.*?)>/gi, '<p><img$1></p>');
+								}
+							}
 
-			if ($btn.size() !== 0) $btn.parent().after($('<li>').append(btn));
-			else this.$toolbar.append($('<li>').append(btn));
-		},
-		buttonAddBefore: function(beforekey, key, title, callback, dropdown)
-		{
-			if (!this.opts.toolbar) return;
-			var btn = this.buttonBuild(key, { title: title, callback: callback, dropdown: dropdown });
-			var $btn = this.buttonGet(beforekey);
+							return html;
+						}
 
-			if ($btn.size() !== 0) $btn.parent().before($('<li>').append(btn));
-			else this.$toolbar.append($('<li>').append(btn));
-		},
-		buttonRemove: function (key, separator)
-		{
-			var $btn = this.buttonGet(key);
-			if (separator) $btn.parent().next().remove();
-			$btn.parent().removeClass('redactor_btn_right');
-			$btn.remove();
-		},
-		buttonActiveObserver: function(e, btnName)
-		{
-			var parent = this.getParent();
-			this.buttonInactiveAll(btnName);
+						if (this.utils.isCurrentOrParent(['TD']))
+						{
+							html = this.clean.onPasteTidy(html, 'td');
 
-			if (e === false && btnName !== 'html')
-			{
-				if ($.inArray(btnName, this.opts.activeButtons) != -1)
-				{
-					this.buttonActiveToggle(btnName);
-				}
-				return;
-			}
+							if (this.opts.linebreaks) html = this.clean.replaceParagraphsToBr(html);
 
-			if (parent && parent.tagName === 'A') this.$toolbar.find('a.redactor_dropdown_link').text(this.opts.curLang.link_edit);
-			else this.$toolbar.find('a.redactor_dropdown_link').text(this.opts.curLang.link_insert);
+							html = this.clean.replaceDivsToBr(html);
 
-			if (this.opts.activeButtonsAdd)
-			{
-				$.each(this.opts.activeButtonsAdd, $.proxy(function(i,s)
-				{
-					this.opts.activeButtons.push(s);
+							return html;
+						}
 
-				}, this));
 
-				$.extend(this.opts.activeButtonsStates, this.opts.activeButtonsAdd);
-			}
+						if (this.utils.isCurrentOrParent(['LI']))
+						{
+							return this.clean.onPasteTidy(html, 'li');
+						}
+					}
 
-			$.each(this.opts.activeButtonsStates, $.proxy(function(key, value)
-			{
-				if ($(parent).closest(key, this.$editor.get()[0]).length != 0)
-				{
-					this.buttonActive(value);
-				}
 
-			}, this));
+					html = this.clean.isSingleLine(html, setMode);
 
-			var $parent = $(parent).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
-			if ($parent.length)
-			{
-				var align = $parent.css('text-align');
+					if (!this.clean.singleLine)
+					{
+						if (this.opts.linebreaks)  html = this.clean.replaceParagraphsToBr(html);
+						if (this.opts.replaceDivs) html = this.clean.replaceDivs(html);
 
-				switch (align)
-				{
-					case 'right':
-						this.buttonActive('alignright');
-					break;
-					case 'center':
-						this.buttonActive('aligncenter');
-					break;
-					case 'justify':
-						this.buttonActive('justify');
-					break;
-					default:
-						this.buttonActive('alignleft');
-					break;
-				}
-			}
-		},
+						html = this.clean.saveFormTags(html);
+					}
 
-		// EXEC
-		execPasteFrag: function(html)
-		{
-			var sel = this.getSelection();
-			if (sel.getRangeAt && sel.rangeCount)
-			{
-            	range = sel.getRangeAt(0);
-				range.deleteContents();
 
-				var el = document.createElement("div");
-				el.innerHTML = html;
-				var frag = document.createDocumentFragment(), node, lastNode;
-				while ((node = el.firstChild))
-				{
-	                lastNode = frag.appendChild(node);
-				}
+					html = this.clean.onPasteWord(html);
+					html = this.clean.onPasteExtra(html);
 
-				var firstNode = frag.firstChild;
-				range.insertNode(frag);
+					html = this.clean.onPasteTidy(html, 'all');
 
-				if (lastNode)
-				{
-	                range = range.cloneRange();
-	                range.setStartAfter(lastNode);
-                    range.collapse(true);
-	                sel.removeAllRanges();
-	                sel.addRange(range);
-				}
-			}
-		},
-		exec: function(cmd, param, sync)
-		{
-			if (cmd === 'formatblock' && this.browser('msie')) param = '<' + param + '>';
 
-			if (cmd === 'inserthtml' && this.browser('msie'))
-			{
-				if (!this.isIe11())
+					// paragraphize
+					if (!this.clean.singleLine && this.opts.paragraphize)
+					{
+						html = this.paragraphize.load(html);
+					}
+
+					html = this.clean.removeDirtyStyles(html);
+					html = this.clean.onPasteRemoveSpans(html);
+					html = this.clean.onPasteRemoveEmpty(html);
+
+
+					html = this.clean.convertInline(html);
+
+					return html;
+				},
+				onPasteWord: function(html)
 				{
-					this.$editor.focus();
-					this.document.selection.createRange().pasteHTML(param);
-				}
-				else this.execPasteFrag(param);
-			}
-			else
-			{
-				this.document.execCommand(cmd, false, param);
-			}
+					// comments
+					html = html.replace(/<!--[\s\S]*?-->/gi, '');
 
-			if (sync !== false) this.sync();
-			this.callback('execCommand', cmd, param);
-		},
-		execCommand: function(cmd, param, sync)
-		{
-			if (!this.opts.visual)
-			{
-				this.$source.focus();
-				return false;
-			}
+					// style
+					html = html.replace(/<style[^>]*>[\s\S]*?<\/style>/gi, '');
 
-			if (cmd === 'inserthtml')
-			{
-				this.insertHtml(param, sync);
-				this.callback('execCommand', cmd, param);
-				return;
-			}
+					// op
+					html = html.replace(/<o\:p[^>]*>[\s\S]*?<\/o\:p>/gi, '');
 
-			// Stop formatting pre
-			if (this.currentOrParentIs('PRE') && !this.opts.formattingPre) return false;
+					if (html.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i))
+					{
+						// comments
+						html = html.replace(/<!--[\s\S]+?-->/gi, '');
 
-			// Lists
-			if (cmd === 'insertunorderedlist' || cmd === 'insertorderedlist') return this.execLists(cmd, param);
+						// scripts
+						html = html.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi, '');
 
-			// Unlink
-			if (cmd === 'unlink') return this.execUnlink(cmd, param);
+						// Convert <s> into <strike>
+						html = html.replace(/<(\/?)s>/gi, "<$1strike>");
 
-			// Usual exec
-			this.exec(cmd, param, sync);
+						// Replace nbsp entites to char since it's easier to handle
+						html = html.replace(/ /gi, ' ');
 
-			// Line
-			if (cmd === 'inserthorizontalrule') this.$editor.find('hr').removeAttr('id');
+						// Convert <span style="mso-spacerun:yes">___</span> to string of alternating
+						// breaking/non-breaking spaces of same length
+						html = html.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi, function(str, spaces) {
+							return (spaces.length > 0) ? spaces.replace(/./, " ").slice(Math.floor(spaces.length/2)).split("").join("\u00a0") : '';
+						});
 
-		},
-		execUnlink: function(cmd, param)
-		{
-			this.bufferSet();
+						html = this.clean.onPasteIeFixLinks(html);
 
-			var link = this.currentOrParentIs('A');
-			if (link)
-			{
-				$(link).replaceWith($(link).text());
+						// shapes
+						html = html.replace(/<img(.*?)v:shapes=(.*?)>/gi, '');
+						html = html.replace(/src="file\:\/\/(.*?)"/, 'src=""');
 
-				this.sync();
-				this.callback('execCommand', cmd, param);
-				return;
-			}
-		},
-		execLists: function(cmd, param)
-		{
-			this.bufferSet();
+						// lists
+						var $div = $("<div/>").html(html);
 
-			var parent = this.getParent();
-			var $list = $(parent).closest('ol, ul');
-			var remove = false;
+						var lastList = false;
+						var lastLevel = 1;
+						var listsIds = [];
 
-			if ($list.length)
-			{
-				remove = true;
-				var listTag = $list[0].tagName;
-			 	if ((cmd === 'insertunorderedlist' && listTag === 'OL')
-			 	|| (cmd === 'insertorderedlist' && listTag === 'UL'))
-			 	{
-				 	remove = false;
-				}
-			}
+						$div.find("p[style]").each(function()
+						{
+							var matches = $(this).attr('style').match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);
 
-			this.selectionSave();
+							if (matches)
+							{
+								var currentList = parseInt(matches[1]);
+								var currentLevel = parseInt(matches[2]);
+								var listType = $(this).html().match(/^[\w]+\./) ? "ol" : "ul";
 
-			// remove lists
-			if (remove)
-			{
-				var nodes = this.getNodes();
-				var elems = this.getBlocks(nodes);
+								var $li = $("<li/>").html($(this).html());
 
-				if (typeof nodes[0] != 'undefined' && nodes.length > 1 && nodes[0].nodeType == 3)
-				{
-					// fix the adding the first li to the array
-					elems.unshift(this.getBlock());
-				}
+								$li.html($li.html().replace(/^([\w\.]+)</, '<'));
+								$li.find("span:first").remove();
 
-				var data = '', replaced = '';
-				$.each(elems, $.proxy(function(i,s)
-				{
-					if (s.tagName == 'LI')
-					{
-						var $s = $(s);
-						var cloned = $s.clone();
-						cloned.find('ul', 'ol').remove();
+								if (currentLevel == 1 && $.inArray(currentList, listsIds) == -1)
+								{
+									var $list = $("<" + listType + "/>").attr({"data-level": currentLevel,
+																			   "data-list": currentList})
+																	  .html($li);
 
-						if (this.opts.linebreaks === false) data += this.outerHtml($('<p>').append(cloned.contents()));
-						else data += cloned.html() + '<br>';
+									$(this).replaceWith($list);
 
-						if (i == 0)
-						{
-							$s.addClass('redactor-replaced').empty();
-							replaced = this.outerHtml($s);
-						}
-						else $s.remove();
-					}
+									lastList = currentList;
+									listsIds.push(currentList);
+								}
+								else
+								{
+									if (currentLevel > lastLevel)
+									{
+										var $prevList = $div.find('[data-level="' + lastLevel + '"][data-list="' + lastList + '"]');
 
-				}, this));
+										var $lastList = $prevList;
 
-				html = this.$editor.html().replace(replaced, '</' + listTag + '>' + data + '<' + listTag + '>');
+										for(var i = lastLevel; i < currentLevel; i++)
+										{
+											$list = $("<" + listType + "/>");
 
-				this.$editor.html(html);
-				this.$editor.find(listTag + ':empty').remove();
+											$list.appendTo($lastList.find("li").last());
 
-			}
+											$lastList = $list;
+										}
 
-			// insert lists
-			else
-			{
-				var firstParent = this.getParent();
+										$lastList.attr({"data-level": currentLevel,
+														"data-list": currentList})
+												 .html($li);
 
-				this.document.execCommand(cmd);
+									}
+									else
+									{
+										var $prevList = $div.find('[data-level="' + currentLevel + '"][data-list="' + currentList + '"]').last();
 
-				var parent = this.getParent();
-				var $list = $(parent).closest('ol, ul');
+										$prevList.append($li);
+									}
 
-				if (firstParent && firstParent.tagName == 'TD')
-				{
-					$list.wrapAll('<td>');
-				}
+									lastLevel = currentLevel;
+									lastList = currentList;
 
-				if ($list.length)
-				{
-					// focus fix
-					var li = $list.children().first();
-					if ($.trim($(li).text()) == '')
-					{
-						var marker = $('<span id="selection-marker-1"></span>');
-						$(li).prepend(marker);
-					}
+									$(this).remove();
+								}
+							}
+						});
 
-					if ((this.browser('msie') || this.browser('mozilla')) && parent.tagName !== 'LI')
-					{
-						$(parent).replaceWith($(parent).html());
-					}
+						$div.find('[data-level][data-list]').removeAttr('data-level data-list');
+						html = $div.html();
 
-					var $listParent = $list.parent();
-					if (this.isParentRedactor($listParent) && this.nodeTestBlocks($listParent[0]))
-					{
-						$listParent.replaceWith($listParent.contents());
+						// remove ms word's bullet
+						html = html.replace(//g, '');
+						html = html.replace(/<p class="Mso(.*?)"/gi, '<p');
+
+						// classes
+						html = html.replace(/ class=\"(mso[^\"]*)\"/gi,	"");
+						html = html.replace(/ class=(mso\w+)/gi, "");
+
+						// remove ms word tags
+						html = html.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi, '$2');
+
+						// ms word break lines
+						html = html.replace(/\n/g, ' ');
+
+						// ms word lists break lines
+						html = html.replace(/<p>\n?<li>/gi, '<li>');
 					}
-				}
 
-				if (this.browser('mozilla')) this.$editor.focus();
-			}
+					return html;
+				},
+				onPasteExtra: function(html)
+				{
+					// remove google docs markers
+					html = html.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi, "$2");
+					html = html.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi, "$3");
 
-			this.selectionRestore();
-			$(marker).remove();
+					// google docs styles
+			 		html = html.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi, '<span style="font-weight: bold;"><span style="font-style: italic;">');
+			 		html = html.replace(/<span[^>]*font-style: italic[^>]*>/gi, '<span style="font-style: italic;">');
+					html = html.replace(/<span[^>]*font-weight: bold[^>]*>/gi, '<span style="font-weight: bold;">');
+					html = html.replace(/<span[^>]*text-decoration: underline[^>]*>/gi, '<span style="text-decoration: underline;">');
 
-			this.sync();
-			this.callback('execCommand', cmd, param);
-			return;
-		},
+					html = html.replace(/<img>/gi, '');
+					html = html.replace(/\n{3,}/gi, '\n');
+					html = html.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi, '$2');
 
-		// INDENTING
-		indentingIndent: function()
-		{
-			this.indentingStart('indent');
-		},
-		indentingOutdent: function()
-		{
-			this.indentingStart('outdent');
-		},
-		indentingStart: function(cmd)
-		{
-			this.bufferSet();
+					// remove dirty p
+					html = html.replace(/<p><p>/gi, '<p>');
+					html = html.replace(/<\/p><\/p>/gi, '</p>');
+					html = html.replace(/<li>(\s*|\t*|\n*)<p>/gi, '<li>');
+					html = html.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi, '</li>');
 
-			if (cmd === 'indent')
-			{
-				var block = this.getBlock();
+					// remove space between paragraphs
+					html = html.replace(/<\/p>\s<p/gi, '<\/p><p');
 
-				this.selectionSave();
+					// remove safari local images
+					html = html.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi, '');
 
-				if (block && block.tagName == 'LI')
+					// bullets
+					html = html.replace(/<p>([\w\W]*?)<\/p>/gi, '<li>$1</li>');
+
+					// FF fix
+					if (this.utils.browser('mozilla'))
+					{
+						html = html.replace(/<br\s?\/?>$/gi, '');
+					}
+
+					return html;
+				},
+				onPasteTidy: function(html, type)
 				{
-					// li
-					var parent = this.getParent();
+					// remove all tags except these
+					var tags = ['span', 'a', 'pre', 'blockquote', 'small', 'em', 'strong', 'code', 'kbd', 'mark', 'address', 'cite', 'var', 'samp', 'dfn', 'sup', 'sub', 'b', 'i', 'u', 'del',
+								'ol', 'ul', 'li', 'dl', 'dt', 'dd', 'p', 'br', 'video', 'audio', 'iframe', 'embed', 'param', 'object', 'img', 'table',
+								'td', 'th', 'tr', 'tbody', 'tfoot', 'thead', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
+					var tagsEmpty = false;
+					var attrAllowed =  [
+							['a', '*'],
+							['img', ['src', 'alt']],
+							['span', ['class', 'rel', 'data-verified']],
+							['iframe', '*'],
+							['video', '*'],
+							['audio', '*'],
+							['embed', '*'],
+							['object', '*'],
+							['param', '*'],
+							['source', '*']
+						];
+
+					if (type == 'all')
+					{
+						tagsEmpty = ['p', 'span', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
+						attrAllowed =  [
+							['table', 'class'],
+							['td', ['colspan', 'rowspan']],
+							['a', '*'],
+							['img', ['src', 'alt', 'data-redactor-inserted-image']],
+							['span', ['class', 'rel', 'data-verified']],
+							['iframe', '*'],
+							['video', '*'],
+							['audio', '*'],
+							['embed', '*'],
+							['object', '*'],
+							['param', '*'],
+							['source', '*']
+						];
+					}
+					else if (type == 'td')
+					{
+						// remove all tags except these and remove all table tags: tr, td etc
+						tags = ['ul', 'ol', 'li', 'span', 'a', 'small', 'em', 'strong', 'code', 'kbd', 'mark', 'cite', 'var', 'samp', 'dfn', 'sup', 'sub', 'b', 'i', 'u', 'del',
+								'ol', 'ul', 'li', 'dl', 'dt', 'dd', 'br', 'iframe', 'video', 'audio', 'embed', 'param', 'object', 'img', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
+
+					}
+					else if (type == 'li')
+					{
+						// only inline tags and ul, ol, li
+						tags = ['ul', 'ol', 'li', 'span', 'a', 'small', 'em', 'strong', 'code', 'kbd', 'mark', 'cite', 'var', 'samp', 'dfn', 'sup', 'sub', 'b', 'i', 'u', 'del', 'br',
+								'iframe', 'video', 'audio', 'embed', 'param', 'object', 'img'];
+					}
+
+					var options = {
+						deniedTags: (this.opts.deniedTags) ? this.opts.deniedTags : false,
+						allowedTags: (this.opts.allowedTags) ? this.opts.allowedTags : tags,
+						removeComments: true,
+						removePhp: true,
+						removeAttr: (this.opts.removeAttr) ? this.opts.removeAttr : false,
+						allowedAttr: (this.opts.allowedAttr) ? this.opts.allowedAttr : attrAllowed,
+						removeEmpty: tagsEmpty
+					};
 
-					var $list = $(parent).closest('ol, ul');
-					var listTag = $list[0].tagName;
+					return this.tidy.load(html, options);
+				},
+				onPasteRemoveEmpty: function(html)
+				{
+					html = html.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi, '');
 
-					var elems = this.getBlocks();
+					// remove br in the end
+					if (!this.opts.linebreaks) html = html.replace(/<br>$/i, '');
 
-					$.each(elems, function(i,s)
-					{
-						if (s.tagName == 'LI')
-						{
-							var $prev = $(s).prev();
-							if ($prev.size() != 0 && $prev[0].tagName == 'LI')
-							{
-								var $childList = $prev.children('ul, ol');
-								if ($childList.size() == 0)
-								{
-									$prev.append($('<' + listTag + '>').append(s));
-								}
-								else $childList.append(s);
-							}
-						}
-					});
-				}
-				// linebreaks
-				else if (block === false && this.opts.linebreaks === true)
+					return html;
+				},
+				onPasteRemoveSpans: function(html)
 				{
-					this.exec('formatBlock', 'blockquote');
-					var newblock = this.getBlock();
-					var block = $('<div data-tagblock="">').html($(newblock).html());
-					$(newblock).replaceWith(block);
+					html = html.replace(/<span>(.*?)<\/span>/gi, '$1');
+					html = html.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi, ' ');
 
-					var left = this.normalize($(block).css('margin-left')) + this.opts.indentValue;
-					$(block).css('margin-left', left + 'px');
-				}
-				else
+					return html;
+				},
+				onPasteIeFixLinks: function(html)
+				{
+					if (!this.utils.browser('msie')) return html;
+
+					var tmp = $.trim(html);
+					if (tmp.search(/^<a(.*?)>(.*?)<\/a>$/i) === 0)
+					{
+						html = html.replace(/^<a(.*?)>(.*?)<\/a>$/i, "$2");
+					}
+
+					return html;
+				},
+				isSingleLine: function(html, setMode)
 				{
-					// all block tags
-					var elements = this.getBlocks();
-					$.each(elements, $.proxy(function(i, elem)
+					this.clean.singleLine = false;
+
+					if (!this.utils.isSelectAll() && typeof setMode == 'undefined')
 					{
-						var $el = false;
+						var blocks = this.opts.blockLevelElements.join('|').replace('P|', '').replace('DIV|', '');
 
-						if (elem.tagName === 'TD') return;
+						var matchBlocks = html.match(new RegExp('</(' + blocks + ')>', 'gi'));
+						var matchContainers = html.match(/<\/(p|div)>/gi);
 
-						if ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)
-						{
-							$el = $(elem);
-						}
-						else
+						if (!matchBlocks && (matchContainers === null || (matchContainers && matchContainers.length <= 1)))
 						{
-							$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
+							var matchBR = html.match(/<br\s?\/?>/gi);
+							//var matchIMG = html.match(/<img(.*?[^>])>/gi);
+							if (!matchBR)
+							{
+								this.clean.singleLine = true;
+								html = html.replace(/<\/?(p|div)(.*?)>/gi, '');
+							}
 						}
+					}
 
-						var left = this.normalize($el.css('margin-left')) + this.opts.indentValue;
-						$el.css('margin-left', left + 'px');
-
-					}, this));
-				}
+					return html;
+				},
+				stripTags: function(input, allowed)
+				{
+				    allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');
+				    var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;
 
-				this.selectionRestore();
+				    return input.replace(tags, function ($0, $1) {
+				        return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';
+				    });
+				},
+				savePreCode: function(html)
+				{
+					html = this.clean.savePreFormatting(html);
+					html = this.clean.saveCodeFormatting(html);
 
-			}
-			// outdent
-			else
-			{
-				this.selectionSave();
+					html = this.clean.restoreSelectionMarker(html);
 
-				var block = this.getBlock();
-				if (block && block.tagName == 'LI')
+					return html;
+				},
+				savePreFormatting: function(html)
 				{
-					// li
-					var elems = this.getBlocks();
-					var index = 0;
+					var pre = html.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);
 
-					this.insideOutdent(block, index, elems);
-				}
-				else
-				{
-					// all block tags
-					var elements = this.getBlocks();
-					$.each(elements, $.proxy(function(i, elem)
+					if (pre !== null)
 					{
-						var $el = false;
-
-						if ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)
+						$.each(pre, $.proxy(function(i,s)
 						{
-							$el = $(elem);
-						}
-						else
-						{
-							$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
-						}
+							var arr = s.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);
 
-						var left = this.normalize($el.css('margin-left')) - this.opts.indentValue;
-						if (left <= 0)
-						{
-							// linebreaks
-							if (this.opts.linebreaks === true && typeof($el.data('tagblock')) !== 'undefined')
-							{
-								$el.replaceWith($el.html());
-							}
-							// all block tags
-							else
+							arr[2] = arr[2].replace(/<br\s?\/?>/g, '\n');
+							arr[2] = arr[2].replace(/&nbsp;/g, ' ');
+
+							if (this.opts.preSpaces)
 							{
-								$el.css('margin-left', '');
-								this.removeEmptyAttr($el, 'style');
+								arr[2] = arr[2].replace(/\t/g, Array(this.opts.preSpaces + 1).join(' '));
 							}
-						}
-						else
-						{
-							$el.css('margin-left', left + 'px');
-						}
 
-					}, this));
-				}
+							arr[2] = this.clean.encodeEntities(arr[2]);
 
+							// $ fix
+							arr[2] = arr[2].replace(/\$/g, '&#36;');
 
-				this.selectionRestore();
-			}
+							html = html.replace(s, '<pre' + arr[1] + '>' + arr[2] + '</pre>');
 
-			this.sync();
+						}, this));
+					}
 
-		},
-		insideOutdent: function (li, index, elems)
-		{
-			if (li && li.tagName == 'LI')
-			{
-				var $parent = $(li).parent().parent();
-				if ($parent.size() != 0 && $parent[0].tagName == 'LI')
-				{
-					$parent.after(li);
-				}
-				else
+					return html;
+				},
+				saveCodeFormatting: function(html)
 				{
-					if (typeof elems[index] != 'undefined')
-					{
-						li = elems[index];
-						index++;
+					var code = html.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);
 
-						this.insideOutdent(li, index, elems);
-					}
-					else
+					if (code !== null)
 					{
-						this.execCommand('insertunorderedlist');
+						$.each(code, $.proxy(function(i,s)
+						{
+							var arr = s.match(/<code(.*?)>([\w\W]*?)<\/code>/i);
+
+							arr[2] = arr[2].replace(/&nbsp;/g, ' ');
+							arr[2] = this.clean.encodeEntities(arr[2]);
+							arr[2] = arr[2].replace(/\$/g, '&#36;');
+
+							html = html.replace(s, '<code' + arr[1] + '>' + arr[2] + '</code>');
+						}, this));
 					}
-				}
-			}
-		},
 
-		// ALIGNMENT
-		alignmentLeft: function()
-		{
-			this.alignmentSet('', 'JustifyLeft');
-		},
-		alignmentRight: function()
-		{
-			this.alignmentSet('right', 'JustifyRight');
-		},
-		alignmentCenter: function()
-		{
-			this.alignmentSet('center', 'JustifyCenter');
-		},
-		alignmentJustify: function()
-		{
-			this.alignmentSet('justify', 'JustifyFull');
-		},
-		alignmentSet: function(type, cmd)
-		{
-			this.bufferSet();
-
-			if (this.oldIE())
-			{
-				this.document.execCommand(cmd, false, false);
-				return true;
-			}
-
-			this.selectionSave();
+					return html;
+				},
+				restoreSelectionMarker: function(html)
+				{
+					html = html.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot; data-verified=&quot;redactor&quot;&gt;&lt;\/span&gt;/g, '<span id="selection-marker-$1" class="redactor-selection-marker" data-verified="redactor"></span>');
 
-			var block = this.getBlock();
-			if (!block && this.opts.linebreaks)
-			{
-				// one element
-				this.exec('formatBlock', 'blockquote');
-				var newblock = this.getBlock();
-				var block = $('<div data-tagblock="">').html($(newblock).html());
-				$(newblock).replaceWith(block);
+					return html;
+				},
+				getTextFromHtml: function(html)
+				{
+					html = html.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi, '\n');
 
-				$(block).css('text-align', type);
-				this.removeEmptyAttr(block, 'style');
+					var tmp = document.createElement('div');
+					tmp.innerHTML = html;
+					html = tmp.textContent || tmp.innerText;
 
-				if (type == '' && typeof($(block).data('tagblock')) !== 'undefined')
-				{
-					$(block).replaceWith($(block).html());
-				}
-			}
-			else
-			{
-				var elements = this.getBlocks();
-				$.each(elements, $.proxy(function(i, elem)
+					return $.trim(html);
+				},
+				getPlainText: function(html, paragraphize)
 				{
-					var $el = false;
+					html = this.clean.getTextFromHtml(html);
+					html = html.replace(/\n/g, '<br />');
 
-					if ($.inArray(elem.tagName, this.opts.alignmentTags) !== -1)
-					{
-						$el = $(elem);
-					}
-					else
+					if (this.opts.paragraphize && typeof paragraphize == 'undefined' && !this.utils.browser('mozilla'))
 					{
-						$el = $(elem).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
+						html = this.paragraphize.load(html);
 					}
 
-					if ($el)
+					return html;
+				},
+				getPreCode: function(html)
+				{
+					html = html.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi, '<img$1$3>');
+					html = html.replace(/<img(.*?)>/gi, '&lt;img$1&gt;');
+					html = this.clean.getTextFromHtml(html);
+
+					if (this.opts.preSpaces)
 					{
-						$el.css('text-align', type);
-						this.removeEmptyAttr($el, 'style');
+						html = html.replace(/\t/g, Array(this.opts.preSpaces + 1).join(' '));
 					}
 
-				}, this));
-			}
+					html = this.clean.encodeEntities(html);
 
-			this.selectionRestore();
+					return html;
+				},
+				getOnlyImages: function(html)
+				{
+					html = html.replace(/<img(.*?)>/gi, '[img$1]');
 
-			this.sync();
-		},
+					// remove all tags
+					html = html.replace(/<([Ss]*?)>/gi, '');
 
-		// CLEAN
-		cleanEmpty: function(html)
-		{
-			var ph = this.placeholderStart(html);
-			if (ph !== false) return ph;
+					html = html.replace(/\[img(.*?)\]/gi, '<img$1>');
 
-			if (this.opts.linebreaks === false)
-			{
-				if (html === '') html = this.opts.emptyHtml;
-				else if (html.search(/^<hr\s?\/?>$/gi) !== -1) html = '<hr>' + this.opts.emptyHtml;
-			}
+					return html;
+				},
+				getOnlyLinksAndImages: function(html)
+				{
+					html = html.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi, '[a href="$2"]$4[/a]');
+					html = html.replace(/<img(.*?)>/gi, '[img$1]');
 
-			return html;
-		},
-		cleanConverters: function(html)
-		{
-			// convert div to p
-			if (this.opts.convertDivs) html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '<p$1>$2</p>');
-			if (this.opts.paragraphy) html = this.cleanParagraphy(html);
+					// remove all tags
+					html = html.replace(/<(.*?)>/gi, '');
 
-			return html;
-		},
-		cleanConvertProtected: function(html)
-		{
-			if (this.opts.templateVars)
-			{
-				html = html.replace(/\{\{(.*?)\}\}/gi, '<!-- template double $1 -->');
-				html = html.replace(/\{(.*?)\}/gi, '<!-- template $1 -->');
-			}
+					html = html.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi, '<a href="$1">$2</a>');
+					html = html.replace(/\[img(.*?)\]/gi, '<img$1>');
 
-			html = html.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi, '<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>');
-			html = html.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi, '<section$1 style="display: none;" rel="redactor-style-tag">$2</section>');
-			html = html.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi, '<section$1 rel="redactor-form-tag">$2</section>');
+					return html;
+				},
+				encodeEntities: function(str)
+				{
+					str = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"');
+					return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
+				},
+				removeDirtyStyles: function(html)
+				{
+					if (this.utils.browser('msie')) return html;
 
-			// php tags convertation
-			if (this.opts.phpTags) html = html.replace(/<\?php([\w\W]*?)\?>/gi, '<section style="display: none;" rel="redactor-php-tag">$1</section>');
-			else html = html.replace(/<\?php([\w\W]*?)\?>/gi, '');
+					var div = document.createElement('div');
+					div.innerHTML = html;
 
-			return html;
-		},
-		cleanReConvertProtected: function(html)
-		{
-			if (this.opts.templateVars)
-			{
-				html = html.replace(/<!-- template double (.*?) -->/gi, '{{$1}}');
-				html = html.replace(/<!-- template (.*?) -->/gi, '{$1}');
-			}
+					this.clean.clearUnverifiedRemove($(div));
 
-			html = html.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi, '<script$1 type="text/javascript">$2</script>');
-			html = html.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi, '<style$1>$2</style>');
-			html = html.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi, '<form$1$2>$3</form>');
+					html = div.innerHTML;
+					$(div).remove();
 
-			// php tags convertation
-			if (this.opts.phpTags) html = html.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi, '<?php\r\n$1\r\n?>');
+					return html;
+				},
+				clearUnverified: function()
+				{
+					if (this.utils.browser('msie')) return;
 
-			return html;
-		},
-		cleanRemoveSpaces: function(html, buffer)
-		{
-			if (buffer !== false)
-			{
-				var buffer = []
-				var matches = html.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);
-				if (matches === null) matches = [];
+					this.clean.clearUnverifiedRemove(this.$editor);
 
-				if (this.opts.phpTags)
-				{
-					var phpMatches = html.match(/<\?php([\w\W]*?)\?>/gi);
-					if (phpMatches) matches = $.merge(matches, phpMatches);
-				}
+					var headers = this.$editor.find('h1, h2, h3, h4, h5, h6');
+					headers.find('span').removeAttr('style');
+					headers.find(this.opts.verifiedTags.join(', ')).removeAttr('style');
 
-				if (matches)
+					this.code.sync();
+				},
+				clearUnverifiedRemove: function($editor)
 				{
-					$.each(matches, function(i, s)
+					$editor.find(this.opts.verifiedTags.join(', ')).removeAttr('style');
+					$editor.find('span').not('[data-verified="redactor"]').removeAttr('style');
+
+					$editor.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(i, s)
 					{
-						html = html.replace(s, 'buffer_' + i);
-						buffer.push(s);
+						var $s = $(s);
+						$s.attr('style', $s.attr('rel'));
 					});
-				}
-			}
 
-			html = html.replace(/\n/g, ' ');
-			html = html.replace(/[\t]*/g, '');
-			html = html.replace(/\n\s*\n/g, "\n");
-			html = html.replace(/^[\s\n]*/g, ' ');
-			html = html.replace(/[\s\n]*$/g, ' ');
-			html = html.replace( />\s{2,}</g, '> <'); // between inline tags can be only one space
+				},
+				cleanEmptyParagraph: function()
+				{
 
-			html = this.cleanReplacer(html, buffer);
+				},
+				setVerified: function(html)
+				{
+					if (this.utils.browser('msie')) return html;
 
-			html = html.replace(/\n\n/g, "\n");
+					html = html.replace(new RegExp('<img(.*?[^>])>', 'gi'), '<img$1 data-verified="redactor">');
+					html = html.replace(new RegExp('<span(.*?[^>])>', 'gi'), '<span$1 data-verified="redactor">');
 
-			return html;
-		},
-		cleanReplacer: function(html, buffer)
-		{
-			if (buffer === false) return html;
+					var matches = html.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>', 'gi'));
 
-			$.each(buffer, function(i,s)
-			{
-				html = html.replace('buffer_' + i, s);
-			});
+					if (matches)
+					{
+						var len = matches.length;
+						for (var i = 0; i < len; i++)
+						{
+							try {
 
-			return html;
-		},
-		cleanRemoveEmptyTags: function(html)
-		{
-			html = html.replace(/<span>([\w\W]*?)<\/span>/gi, '$1');
+								var newTag = matches[i].replace(/style="(.*?)"/i, 'style="$1" rel="$1"');
+								html = html.replace(matches[i], newTag);
 
-			// remove zero width-space
-			html = html.replace(/[\u200B-\u200D\uFEFF]/g, '');
+							}
+							catch (e) {}
+						}
+					}
 
-			var etagsInline = ["<b>\\s*</b>", "<b>&nbsp;</b>", "<em>\\s*</em>"]
-			var etags = ["<pre></pre>", "<blockquote>\\s*</blockquote>", "<dd></dd>", "<dt></dt>", "<ul></ul>", "<ol></ol>", "<li></li>", "<table></table>", "<tr></tr>", "<span>\\s*<span>", "<span>&nbsp;<span>", "<p>\\s*</p>", "<p></p>", "<p>&nbsp;</p>",  "<p>\\s*<br>\\s*</p>", "<div>\\s*</div>", "<div>\\s*<br>\\s*</div>"];
+					return html;
+				},
+				convertInline: function(html)
+				{
+					var $div = $('<div />').html(html);
 
-			if (this.opts.removeEmptyTags)
-			{
-				etags = etags.concat(etagsInline);
-			}
-			else etags = etagsInline;
+					var tags = this.opts.inlineTags;
+					tags.push('span');
 
-			var len = etags.length;
-			for (var i = 0; i < len; ++i)
-			{
-				html = html.replace(new RegExp(etags[i], 'gi'), "");
-			}
+					$div.find(tags.join(',')).each(function()
+					{
+						var $el = $(this);
+						var tag = this.tagName.toLowerCase();
+						$el.attr('data-redactor-tag', tag);
 
-			return html;
-		},
-		cleanParagraphy: function(html)
-		{
-			html = $.trim(html);
+						if (tag == 'span')
+						{
+							if ($el.attr('style')) $el.attr('data-redactor-style', $el.attr('style'));
+							else if ($el.attr('class')) $el.attr('data-redactor-class', $el.attr('class'));
+						}
 
-			if (this.opts.linebreaks === true) return html;
-			if (html === '' || html === '<p></p>') return this.opts.emptyHtml;
+					});
 
-			html = html + "\n";
+					html = $div.html();
+					$div.remove();
 
+					return html;
+				},
+				normalizeLists: function()
+				{
+					this.$editor.find('li').each(function(i,s)
+					{
+						var $next = $(s).next();
+						if ($next.length !== 0 && ($next[0].tagName == 'UL' || $next[0].tagName == 'OL'))
+						{
+							$(s).append($next);
+						}
 
-			var safes = [];
-			var matches = html.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);
-			if (!matches) matches = [];
+					});
+				},
+				removeSpaces: function(html)
+				{
+					html = html.replace(/\n/g, '');
+					html = html.replace(/[\t]*/g, '');
+					html = html.replace(/\n\s*\n/g, "\n");
+					html = html.replace(/^[\s\n]*/g, ' ');
+					html = html.replace(/[\s\n]*$/g, ' ');
+					html = html.replace( />\s{2,}</g, '> <'); // between inline tags can be only one space
+					html = html.replace(/\n\n/g, "\n");
+					html = html.replace(/\u200B/g, '');
 
-			var commentsMatches = html.match(/<!--([\w\W]*?)-->/gi);
-			if (commentsMatches) matches = $.merge(matches, commentsMatches);
+					return html;
+				},
+				replaceDivs: function(html)
+				{
+					if (this.opts.linebreaks)
+					{
+						html = html.replace(/<div><br\s?\/?><\/div>/gi, '<br />');
+						html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '$2<br />');
+					}
+					else
+					{
+						html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '<p$1>$2</p>');
+					}
 
-			if (this.opts.phpTags)
-			{
-				var phpMatches = html.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);
-				if (phpMatches) matches = $.merge(matches, phpMatches);
-			}
+					html = html.replace(/<div(.*?[^>])>/gi, '');
+					html = html.replace(/<\/div>/gi, '');
 
-			if (matches)
-			{
-				$.each(matches, function(i,s)
+					return html;
+				},
+				replaceDivsToBr: function(html)
 				{
-					safes[i] = s;
-					html = html.replace(s, '{replace' + i + '}\n');
-				});
-			}
+					html = html.replace(/<div\s(.*?)>/gi, '<p>');
+					html = html.replace(/<div><br\s?\/?><\/div>/gi, '<br /><br />');
+					html = html.replace(/<div>([\w\W]*?)<\/div>/gi, '$1<br /><br />');
 
-			html = html.replace(/<br \/>\s*<br \/>/gi, "\n\n");
-
-			function R(str, mod, r)
-			{
-				return html.replace(new RegExp(str, mod), r);
-			}
+					return html;
+				},
+				replaceParagraphsToBr: function(html)
+				{
+					html = html.replace(/<p\s(.*?)>/gi, '<p>');
+					html = html.replace(/<p><br\s?\/?><\/p>/gi, '<br />');
+					html = html.replace(/<p>([\w\W]*?)<\/p>/gi, '$1<br /><br />');
+					html = html.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi, '</blockquote>');
 
-			var blocks = '(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)';
+					return html;
+				},
+				saveFormTags: function(html)
+				{
+					return html.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi, '<section$1 rel="redactor-form-tag">$2</section>');
+				},
+				restoreFormTags: function(html)
+				{
+					return html.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi, '<form$1$2>$3</form>');
+				}
+			};
+		},
+		code: function()
+		{
+			return {
+				set: function(html)
+				{
+					html = $.trim(html.toString());
 
-			html = R('(<' + blocks + '[^>]*>)', 'gi', "\n$1");
-			html = R('(</' + blocks + '>)', 'gi', "$1\n\n");
-			html = R("\r\n", 'g', "\n");
-			html = R("\r", 'g', "\n");
-			html = R("/\n\n+/", 'g', "\n\n");
+					// clean
+					html = this.clean.onSet(html);
 
-			var htmls = html.split(new RegExp('\n\s*\n', 'g'), -1);
 
-			html = '';
-			for (var i in htmls)
-			{
-				if (htmls.hasOwnProperty(i))
-                {
-					if (htmls[i].search('{replace') == -1)
+					if (this.utils.browser('msie'))
 					{
-						htmls[i] = htmls[i].replace(/<p>\n\t<\/p>/gi, '');
-						htmls[i] = htmls[i].replace(/<p><\/p>/gi, '');
-
-						if (htmls[i] != '')
-						{
-							html += '<p>' +  htmls[i].replace(/^\n+|\n+$/g, "") + "</p>";
-						}
+						html = html.replace(/<span(.*?)id="selection-marker-(1|2)"(.*?)><\/span>/gi, '');
 					}
-					else html += htmls[i];
-				}
-			}
-
-			html = R('<p>\s*</p>', 'gi', '');
-			html = R('<p>([^<]+)</(div|address|form)>', 'gi', "<p>$1</p></$2>");
-			html = R('<p>\s*(</?' + blocks + '[^>]*>)\s*</p>', 'gi', "$1");
-			html = R("<p>(<li.+?)</p>", 'gi', "$1");
-			html = R('<p>\s*(</?' + blocks + '[^>]*>)', 'gi', "$1");
-
-			html = R('(</?' + blocks + '[^>]*>)\s*</p>', 'gi', "$1");
-			html = R('(</?' + blocks + '[^>]*>)\s*<br />', 'gi', "$1");
-			html = R('<br />(\s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)', 'gi', '$1');
-			html = R("\n</p>", 'gi', '</p>');
-
-			html = R('<li><p>', 'gi', '<li>');
-			html = R('</p></li>', 'gi', '</li>');
-			html = R('</li><p>', 'gi', '</li>');
-			//html = R('</ul><p>(.*?)</li>', 'gi', '</ul></li>');
-			/* html = R('</ol><p>', 'gi', '</ol>'); */
-			html = R('<p>\t?\n?<p>', 'gi', '<p>');
-			html = R('</dt><p>', 'gi', '</dt>');
-			html = R('</dd><p>', 'gi', '</dd>');
-			html = R('<br></p></blockquote>', 'gi', '</blockquote>');
-			html = R('<p>\t*</p>', 'gi', '');
 
-			// restore safes
-			$.each(safes, function(i,s)
-			{
-				html = html.replace('{replace' + i + '}', s);
-			});
+					this.$editor.html(html);
+					this.code.sync();
 
-			return $.trim(html);
-		},
-		cleanConvertInlineTags: function(html, set)
-		{
-			var boldTag = 'strong';
-			if (this.opts.boldTag === 'b') boldTag = 'b';
+					if (html !== '') this.placeholder.remove();
 
-			var italicTag = 'em';
-			if (this.opts.italicTag === 'i') italicTag = 'i';
+					setTimeout($.proxy(this.buffer.add, this), 15);
+					if (this.start === false) this.observe.load();
 
-			html = html.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi, '<' + italicTag + '>$1</' + italicTag + '>');
-			html = html.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi, '<' + boldTag + '>$1</' + boldTag + '>');
+				},
+				get: function()
+				{
+					var code = this.$textarea.val();
 
-			// bold, italic, del
-			if (this.opts.boldTag === 'strong') html = html.replace(/<b>([\w\W]*?)<\/b>/gi, '<strong>$1</strong>');
-			else html = html.replace(/<strong>([\w\W]*?)<\/strong>/gi, '<b>$1</b>');
+					if (this.opts.replaceDivs) code = this.clean.replaceDivs(code);
+					if (this.opts.linebreaks) code = this.clean.replaceParagraphsToBr(code);
 
-			if (this.opts.italicTag === 'em') html = html.replace(/<i>([\w\W]*?)<\/i>/gi, '<em>$1</em>');
-			else html = html.replace(/<em>([\w\W]*?)<\/em>/gi, '<i>$1</i>');
+					// indent code
+					code = this.tabifier.get(code);
 
-			if (set !== true)
-			{
-				html = html.replace(/<strike>([\w\W]*?)<\/strike>/gi, '<del>$1</del>');
-			}
-			else
-			{
-				html = html.replace(/<del>([\w\W]*?)<\/del>/gi, '<strike>$1</strike>');
-			}
+					return code;
+				},
+				sync: function()
+				{
+					setTimeout($.proxy(this.code.startSync, this), 10);
+				},
+				startSync: function()
+				{
+					var html = this.$editor.html();
 
-			return html;
-		},
-		cleanStripTags: function(html)
-		{
-			if (html == '' || typeof html == 'undefined') return html;
+					// is there a need to synchronize
+					if (this.code.syncCode && this.code.syncCode == html)
+					{
+						// do not sync
+						return;
+					}
 
-			var allowed = false;
-			if (this.opts.allowedTags !== false) allowed = true;
+					// save code
+					this.code.syncCode = html;
 
-			var arr = allowed === true ? this.opts.allowedTags : this.opts.deniedTags;
+					// before clean callback
+					html = this.core.setCallback('syncBefore', html);
 
-			var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;
-			html = html.replace(tags, function ($0, $1)
-			{
-				if (allowed === true) return $.inArray($1.toLowerCase(), arr) > '-1' ? $0 : '';
-				else return $.inArray($1.toLowerCase(), arr) > '-1' ? '' : $0;
-			});
+					// clean
+					html = this.clean.onSync(html);
 
-			html = this.cleanConvertInlineTags(html);
+					// set code
+					this.$textarea.val(html);
 
-			return html;
+					// after sync callback
+					this.core.setCallback('sync', html);
 
-		},
-		cleanSavePreCode: function(html, encode)
-		{
-			var pre = html.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);
-			if (pre !== null)
-			{
-				$.each(pre, $.proxy(function(i,s)
-				{
-					var arr = s.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);
+					if (this.start === false)
+					{
+						this.core.setCallback('change', html);
+					}
 
-					arr[3] = arr[3].replace(/&nbsp;/g, ' ');
+					this.start = false;
 
-					if (encode !== false) arr[3] = this.cleanEncodeEntities(arr[3]);
+					if (this.autosave.html == false)
+					{
+						this.autosave.html = this.code.get();
+					}
 
-					// $ fix
-					arr[3] = arr[3].replace(/\$/g, '&#36;');
+					if (this.opts.codemirror)
+					{
+						this.$textarea.next('.CodeMirror').each(function(i, el)
+						{
+							el.CodeMirror.setValue(html);
+						});
+					}
 
-					html = html.replace(s, '<' + arr[1] + arr[2] + '>' + arr[3] + '</' + arr[1] + '>');
+					//autosave
+					this.autosave.onChange();
+					this.autosave.enable();
+				},
+				toggle: function()
+				{
+					if (this.opts.visual)
+					{
+						this.code.showCode();
+					}
+					else
+					{
+						this.code.showVisual();
+					}
+				},
+				showCode: function()
+				{
+					this.selection.save();
 
-				}, this));
-			}
+					this.code.offset = this.caret.getOffset();
+					var scroll = $(window).scrollTop();
 
-			return html;
-		},
-		cleanEncodeEntities: function(str)
-		{
-			str = String(str).replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"');
-			return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
-		},
-		cleanUnverified: function()
-		{
-			// label, abbr, mark, meter, code, q, dfn, ins, time, kbd, var
-			var $elem = this.$editor.find('li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite');
+					var	width = this.$editor.innerWidth(),
+						height = this.$editor.innerHeight();
 
-			$elem.filter('[style*="background-color: transparent;"][style*="line-height"]')
-			.css('background-color', '')
-			.css('line-height', '');
+					this.$editor.hide();
 
-			$elem.filter('[style*="background-color: transparent;"]')
-			.css('background-color', '');
+					var html = this.$textarea.val();
 
-			$elem.css('line-height', '');
+					this.modified = this.clean.removeSpaces(html);
 
-			$.each($elem, $.proxy(function(i,s)
-			{
-				this.removeEmptyAttr(s, 'style');
-			}, this));
+					// indent code
+					html = this.tabifier.get(html);
 
-			// When we paste text in Safari is wrapping inserted div (remove it)
-			this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap();
-		},
-		cleanHtml: function(code)
-		{
-			var i = 0,
-			codeLength = code.length,
-			point = 0,
-			start = null,
-			end = null,
-			tag = '',
-			out = '',
-			cont = '';
+					// caret position sync
+					var start = 0, end = 0;
+					var $editorDiv = $("<div/>").append($.parseHTML(this.clean.onSync(this.$editor.html()), document, true));
+					var $selectionMarkers = $editorDiv.find("span.redactor-selection-marker");
 
-			this.cleanlevel = 0;
+					if ($selectionMarkers.length > 0)
+					{
+						var editorHtml = this.tabifier.get($editorDiv.html()).replace(/&amp;/g, '&');
 
-			for (; i < codeLength; i++)
-			{
-				point = i;
+						if ($selectionMarkers.length == 1)
+						{
+							start = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-1").prop("outerHTML"));
+							end   = start;
+						}
+						else if ($selectionMarkers.length == 2)
+						{
+							start = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-1").prop("outerHTML"));
+							end	 = this.utils.strpos(editorHtml, $editorDiv.find("#selection-marker-2").prop("outerHTML")) - $editorDiv.find("#selection-marker-1").prop("outerHTML").toString().length;
+						}
+					}
 
-				// if no more tags, copy and exit
-				if (-1 == code.substr(i).indexOf( '<' ))
-				{
-					out += code.substr(i);
+					this.selection.removeMarkers();
+					this.$textarea.val(html);
 
-					return this.cleanFinish(out);
-				}
+					if (this.opts.codemirror)
+					{
+						this.$textarea.next('.CodeMirror').each(function(i, el)
+						{
+							$(el).show();
+							el.CodeMirror.setValue(html);
+							el.CodeMirror.setSize('100%', height);
+							el.CodeMirror.refresh();
 
-				// copy verbatim until a tag
-				while (point < codeLength && code.charAt(point) != '<')
-				{
-					point++;
-				}
+							if (start == end)
+							{
+								el.CodeMirror.setCursor(el.CodeMirror.posFromIndex(start).line, el.CodeMirror.posFromIndex(end).ch);
+							}
+							else
+							{
+								el.CodeMirror.setSelection({line: el.CodeMirror.posFromIndex(start).line,
+															ch: el.CodeMirror.posFromIndex(start).ch},
+														  {line: el.CodeMirror.posFromIndex(end).line,
+														   ch:  el.CodeMirror.posFromIndex(end).ch});
+							}
 
-				if (i != point)
-				{
-					cont = code.substr(i, point - i);
-					if (!cont.match(/^\s{2,}$/g))
+							el.CodeMirror.focus();
+						});
+					}
+					else
 					{
-						if ('\n' == out.charAt(out.length - 1)) out += this.cleanGetTabs();
-						else if ('\n' == cont.charAt(0))
+						this.$textarea.height(height).show().focus();
+						this.$textarea.on('keydown.redactor-textarea-indenting', this.code.textareaIndenting);
+
+						$(window).scrollTop(scroll);
+
+						if (this.$textarea[0].setSelectionRange)
 						{
-							out += '\n' + this.cleanGetTabs();
-							cont = cont.replace(/^\s+/, '');
+							this.$textarea[0].setSelectionRange(start, end);
 						}
 
-						out += cont;
+						this.$textarea[0].scrollTop = 0;
 					}
 
-					if (cont.match(/\n/)) out += '\n' + this.cleanGetTabs();
-				}
-
-				start = point;
+					this.opts.visual = false;
 
-				// find the end of the tag
-				while (point < codeLength && '>' != code.charAt(point))
+					this.button.setInactiveInCode();
+					this.button.setActive('html');
+					this.core.setCallback('source', html);
+				},
+				showVisual: function()
 				{
-					point++;
-				}
+					var html;
 
-				tag = code.substr(start, point - start);
-				i = point;
+					if (this.opts.visual) return;
 
-				var t;
+					var start = 0, end = 0;
 
-				if ('!--' == tag.substr(1, 3))
-				{
-					if (!tag.match(/--$/))
+					if (this.opts.codemirror)
 					{
-						while ('-->' != code.substr(point, 3))
+						var selection;
+
+						this.$textarea.next('.CodeMirror').each(function(i, el)
 						{
-							point++;
-						}
-						point += 2;
-						tag = code.substr(start, point - start);
-						i = point;
-					}
+							selection = el.CodeMirror.listSelections();
 
-					if ('\n' != out.charAt(out.length - 1)) out += '\n';
+							start = el.CodeMirror.indexFromPos(selection[0].anchor);
+							end = el.CodeMirror.indexFromPos(selection[0].head);
 
-					out += this.cleanGetTabs();
-					out += tag + '>\n';
-				}
-				else if ('!' == tag[1])
-				{
-					out = this.placeTag(tag + '>', out);
-				}
-				else if ('?' == tag[1])
-				{
-					out += tag + '>\n';
-				}
-				else if (t = tag.match(/^<(script|style|pre)/i))
-				{
-					t[1] = t[1].toLowerCase();
-					tag = this.cleanTag(tag);
-					out = this.placeTag(tag, out);
-					end = String(code.substr(i + 1)).toLowerCase().indexOf('</' + t[1]);
+							html = el.CodeMirror.getValue();
+						});
+					}
+					else
+					{
+						start = this.$textarea.get(0).selectionStart;
+						end = this.$textarea.get(0).selectionEnd;
+
+						html = this.$textarea.hide().val();
+					}
 
-					if (end)
+					// if selection starts from end
+					if (start > end && end > 0)
 					{
-						cont = code.substr(i + 1, end);
-						i += end;
-						out += cont;
+						var tempStart = end;
+						var tempEnd = start;
+
+						start = tempStart;
+						end = tempEnd;
 					}
-				}
-				else
-				{
-					tag = this.cleanTag(tag);
-					out = this.placeTag(tag, out);
-				}
-			}
 
-			return this.cleanFinish( out );
-		},
-		cleanGetTabs: function()
-		{
-			var s = '';
-			for ( var j = 0; j < this.cleanlevel; j++ )
-			{
-				s += '\t';
-			}
+					start = this.code.enlargeOffset(html, start);
+					end = this.code.enlargeOffset(html, end);
 
-			return s;
-		},
-		cleanFinish: function(code)
-		{
-			code = code.replace( /\n\s*\n/g, '\n' );
-			code = code.replace( /^[\s\n]*/, '' );
-			code = code.replace( /[\s\n]*$/, '' );
-			code = code.replace( /<script(.*?)>\n<\/script>/gi, '<script$1></script>' );
+					html = html.substr(0, start) + this.selection.getMarkerAsHtml(1) + html.substr(start);
 
-			this.cleanlevel = 0;
+					if (end > start)
+					{
+						var markerLength = this.selection.getMarkerAsHtml(1).toString().length;
 
-			return code;
-		},
-		cleanTag: function (tag)
-		{
-			var tagout = '';
-			tag = tag.replace(/\n/g, ' ');
-			tag = tag.replace(/\s{2,}/g, ' ');
-			tag = tag.replace(/^\s+|\s+$/g, ' ');
+						html = html.substr(0, end + markerLength) + this.selection.getMarkerAsHtml(2) + html.substr(end + markerLength);
+					}
 
-			var suffix = '';
-			if (tag.match(/\/$/))
-			{
-				suffix = '/';
-				tag = tag.replace(/\/+$/, '');
-			}
 
-			var m;
-			while (m = /\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(tag))
-			{
-				if (m[2]) tagout += m[1].toLowerCase() + '=' + m[2];
-				else if (m[1]) tagout += m[1].toLowerCase();
 
-				tagout += ' ';
-				tag = tag.substr(m[0].length);
-			}
+					if (this.modified !== this.clean.removeSpaces(html))
+					{
+						this.code.set(html);
 
-			return tagout.replace(/\s*$/, '') + suffix + '>';
-		},
-		placeTag: function (tag, out)
-		{
-			var nl = tag.match(this.cleannewLevel);
-			if (tag.match(this.cleanlineBefore) || nl)
-			{
-				out = out.replace(/\s*$/, '');
-				out += '\n';
-			}
+					}
 
-			if (nl && '/' == tag.charAt(1)) this.cleanlevel--;
-			if ('\n' == out.charAt(out.length - 1)) out += this.cleanGetTabs();
-			if (nl && '/' != tag.charAt(1)) this.cleanlevel++;
+					if (this.opts.codemirror)
+					{
+						this.$textarea.next('.CodeMirror').hide();
+					}
 
-			out += tag;
+					this.$editor.show();
 
-			if (tag.match(this.cleanlineAfter) || tag.match(this.cleannewLevel))
-			{
-				out = out.replace(/ *$/, '');
-				out += '\n';
-			}
+					if (!this.utils.isEmpty(html))
+					{
+						this.placeholder.remove();
+					}
 
-			return out;
-		},
+					this.selection.restore();
 
-		// FORMAT
-		formatEmpty: function(e)
-		{
-			var html = $.trim(this.$editor.html());
+					this.$textarea.off('keydown.redactor-textarea-indenting');
 
-			if (this.opts.linebreaks)
-			{
-				if (html == '')
+					this.button.setActiveInVisual();
+					this.button.setInactive('html');
+					this.observe.load();
+					this.opts.visual = true;
+					this.core.setCallback('visual', html);
+				},
+				textareaIndenting: function(e)
 				{
-					e.preventDefault();
-					this.$editor.html('');
-					this.focus();
-				}
-			}
-			else
-			{
-				html = html.replace(/<br\s?\/?>/i, '');
-				var thtml = html.replace(/<p>\s?<\/p>/gi, '');
+					if (e.keyCode !== 9) return true;
+
+					var $el = this.$textarea;
+					var start = $el.get(0).selectionStart;
+					$el.val($el.val().substring(0, start) + "\t" + $el.val().substring($el.get(0).selectionEnd));
+					$el.get(0).selectionStart = $el.get(0).selectionEnd = start + 1;
 
-				if (html === '' || thtml === '')
+					return false;
+				},
+				enlargeOffset: function(html, offset)
 				{
-					e.preventDefault();
+					var htmlLength = html.length;
+					var c = 0;
 
-					var node = $(this.opts.emptyHtml).get(0);
-					this.$editor.html(node);
-					this.focus();
-				}
-			}
+					if (html[offset] == '>')
+					{
+						c++;
+					}
+					else
+					{
+						for(var i = offset; i <= htmlLength; i++)
+						{
+							c++;
 
-			this.sync();
+							if (html[i] == '>')
+							{
+								break;
+							}
+							else if (html[i] == '<' || i == htmlLength)
+							{
+								c = 0;
+								break;
+							}
+						}
+					}
+
+					return offset + c;
+				}
+			};
 		},
-		formatBlocks: function(tag)
+		core: function()
 		{
-			this.bufferSet();
-
-			var nodes = this.getBlocks();
-			this.selectionSave();
-
-			$.each(nodes, $.proxy(function(i, node)
-			{
-				if (node.tagName !== 'LI')
+			return {
+				getObject: function()
+				{
+					return $.extend({}, this);
+				},
+				getEditor: function()
+				{
+					return this.$editor;
+				},
+				getBox: function()
+				{
+					return this.$box;
+				},
+				getElement: function()
+				{
+					return this.$element;
+				},
+				getTextarea: function()
+				{
+					return this.$textarea;
+				},
+				getToolbar: function()
+				{
+					return (this.$toolbar) ? this.$toolbar : false;
+				},
+				addEvent: function(name)
+				{
+					this.core.event = name;
+				},
+				getEvent: function()
+				{
+					return this.core.event;
+				},
+				setCallback: function(type, e, data)
 				{
-					var parent = $(node).parent();
+					var eventName = type + 'Callback';
+					var eventNamespace = 'redactor';
+					var callback = this.opts[eventName];
 
-					if (tag === 'p')
+					if (this.$textarea)
 					{
-						if ((node.tagName === 'P'
-						&& parent.size() != 0
-						&& parent[0].tagName === 'BLOCKQUOTE')
-						||
-						node.tagName === 'BLOCKQUOTE')
-						{
-							this.formatQuote();
-							return;
-						}
-						else if (this.opts.linebreaks) return;
-						else
+						var returnValue = false;
+						var events = $._data(this.$textarea[0], 'events');
+
+						if (typeof events != 'undefined' && typeof events[eventName] != 'undefined')
 						{
-							this.formatBlock(tag, node);
+							$.each(events[eventName], $.proxy(function(key, value)
+							{
+								if (value['namespace'] == eventNamespace)
+								{
+									var data = (typeof data == 'undefined') ? [e] : [e, data];
+
+									returnValue = (typeof data == 'undefined') ? value.handler.call(this, e) : value.handler.call(this, e, data);
+								}
+							}, this));
 						}
+
+						if (returnValue) return returnValue;
+					}
+
+					if ($.isFunction(callback))
+					{
+						return (typeof data == 'undefined') ? callback.call(this, e) : callback.call(this, e, data);
 					}
 					else
 					{
-						this.formatBlock(tag, node);
+						return (typeof data == 'undefined') ? e : data;
 					}
-				}
-
-			}, this));
-
-			this.selectionRestore();
-			this.sync();
-		},
-		formatBlock: function(tag, block)
-		{
-			if (block === false) block = this.getBlock();
-			if (block === false)
-			{
-				if (this.opts.linebreaks === true) this.execCommand('formatblock', tag);
-				return true;
-			}
-
-			var contents = '';
-			if (tag !== 'pre')
-			{
-				contents = $(block).contents();
-			}
-			else
-			{
-				//contents = this.cleanEncodeEntities($(block).text());
-				contents = $(block).html();
-				if ($.trim(contents) === '')
+				},
+				destroy: function()
 				{
-					contents = '<span id="selection-marker-1"></span>';
-				}
-			}
+					this.opts.destroyed = true;
 
-			if (block.tagName === 'PRE') tag = 'p';
+					this.core.setCallback('destroy');
 
-			if (this.opts.linebreaks === true && tag === 'p')
-			{
-				$(block).replaceWith($('<div>').append(contents).html() + '<br>');
-			}
-			else
-			{
-				var parent = this.getParent();
+					// off events and remove data
+					this.$element.off('.redactor').removeData('redactor');
+					this.$editor.off('.redactor');
 
-				var node = $('<' + tag + '>').append(contents);
-				$(block).replaceWith(node);
+					$(document).off('mousedown.redactor-blur.' + this.uuid);
+					$(document).off('mousedown.redactor.' + this.uuid);
+					$(document).off('click.redactor-image-delete.' + this.uuid);
+					$(document).off('click.redactor-image-resize-hide.' + this.uuid);
+					$(document).off('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid);
+					$("body").off('scroll.redactor.' + this.uuid);
+					$(this.opts.toolbarFixedTarget).off('scroll.redactor.' + this.uuid);
 
-				if (parent && parent.tagName == 'TD')
-				{
-					$(node).wrapAll('<td>');
-				}
-			}
-		},
-		formatChangeTag: function(fromElement, toTagName, save)
-		{
-			if (save !== false) this.selectionSave();
+					// common
+					this.$editor.removeClass('redactor-editor redactor-linebreaks redactor-placeholder');
+					this.$editor.removeAttr('contenteditable');
 
-			var newElement = $('<' + toTagName + '/>');
-			$(fromElement).replaceWith(function() { return newElement.append($(this).contents()); });
+					var html = this.code.get();
 
-			if (save !== false) this.selectionRestore();
+					if (this.opts.toolbar)
+					{
+						// dropdowns off
+						this.$toolbar.find('a').each(function()
+						{
+							var $el = $(this);
+							if ($el.data('dropdown'))
+							{
+								$el.data('dropdown').remove();
+								$el.data('dropdown', {});
+							}
+						});
+					}
 
-			return newElement;
-		},
+					if (this.build.isTextarea())
+					{
+						this.$box.after(this.$element);
+						this.$box.remove();
+						this.$element.val(html).show();
+					}
+					else
+					{
+						this.$box.after(this.$editor);
+						this.$box.remove();
+						this.$element.html(html).show();
+					}
 
-		// QUOTE
-		formatQuote: function()
-		{
-			this.bufferSet();
+					// paste box
+					if (this.$pasteBox) this.$pasteBox.remove();
 
-			// paragraphy
-			if (this.opts.linebreaks === false)
-			{
-				this.selectionSave();
+					// modal
+					if (this.$modalBox) this.$modalBox.remove();
+					if (this.$modalOverlay) this.$modalOverlay.remove();
 
-				var blocks = this.getBlocks();
+					// buttons tooltip
+					$('.redactor-toolbar-tooltip-' + this.uuid).remove();
 
-				var blockquote = false;
-				var blocksLen = blocks.length;
-				if (blocks)
+					// autosave
+					clearInterval(this.autosaveInterval);
+				}
+			};
+		},
+		dropdown: function()
+		{
+			return {
+				build: function(name, $dropdown, dropdownObject)
 				{
-					var data = '';
-					var replaced = '';
-					var replace = false;
-					var paragraphsOnly = true;
-
-					$.each(blocks, function(i,s)
+					if (name == 'formatting' && this.opts.formattingAdd)
 					{
-						if (s.tagName !== 'P') paragraphsOnly = false;
-					});
-
-					$.each(blocks, $.proxy(function(i,s)
-					{
-						if (s.tagName === 'BLOCKQUOTE')
-						{
-							this.formatBlock('p', s, false);
-						}
-						else if (s.tagName === 'P')
+						$.each(this.opts.formattingAdd, $.proxy(function(i,s)
 						{
-							blockquote = $(s).parent();
-							// from blockquote
-							if (blockquote[0].tagName == 'BLOCKQUOTE')
+							var name = s.tag,
+								func;
+
+							if (typeof s['class'] != 'undefined')
 							{
-								var count = $(blockquote).children('p').size();
+								name = name + '-' + s['class'];
+							}
 
-								// one
-								if (count == 1)
-								{
-									$(blockquote).replaceWith(s);
-								}
-								// all
-								else if (count == blocksLen)
-								{
-									replace = 'blockquote';
-									data += this.outerHtml(s);
-								}
-								// some
-								else
-								{
-									replace = 'html';
-									data += this.outerHtml(s);
+							s.type = (this.utils.isBlockTag(s.tag)) ? 'block' : 'inline';
 
-									if (i == 0)
-									{
-										$(s).addClass('redactor-replaced').empty();
-										replaced = this.outerHtml(s);
-									}
-									else $(s).remove();
-								}
+							if (typeof s.func !== "undefined")
+							{
+								func = s.func;
 							}
-							// to blockquote
 							else
 							{
-								if (paragraphsOnly === false || blocks.length == 1)
-								{
-									this.formatBlock('blockquote', s, false);
-								}
-								else
-								{
-									replace = 'paragraphs';
-									data += this.outerHtml(s);
-								}
+								func = (s.type == 'inline') ? 'inline.formatting' : 'block.formatting';
 							}
 
-						}
-						else if (s.tagName !== 'LI')
-						{
-							this.formatBlock('blockquote', s, false);
-						}
+							if (this.opts.linebreaks && s.type == 'block' && s.tag == 'p') return;
 
-					}, this));
+							this.formatting[name] = {
+								tag: s.tag,
+								style: s.style,
+								'class': s['class'],
+								attr: s.attr,
+								data: s.data,
+								clear: s.clear
+							};
+
+							dropdownObject[name] = {
+								func: func,
+								title: s.title
+							};
+
+						}, this));
+					}
 
-					if (replace)
+					$.each(dropdownObject, $.proxy(function(btnName, btnObject)
 					{
-						if (replace == 'paragraphs')
-						{
-							$(blocks[0]).replaceWith('<blockquote>' + data + '</blockquote>');
-							$(blocks).remove();
-						}
-						else if (replace == 'blockquote')
-						{
-							$(blockquote).replaceWith(data);
-						}
-						else if (replace == 'html')
+						var $item = $('<a href="#" class="redactor-dropdown-' + btnName + '" role="button">' + btnObject.title + '</a>');
+						if (name == 'formatting') $item.addClass('redactor-formatting-' + btnName);
+
+						$item.on('click', $.proxy(function(e)
 						{
-							var html = this.$editor.html().replace(replaced, '</blockquote>' + data + '<blockquote>');
+							e.preventDefault();
 
-							this.$editor.html(html);
-							this.$editor.find('blockquote').each(function()
+							var type = 'func';
+							var callback = btnObject.func;
+							if (btnObject.command)
 							{
-								if ($.trim($(this).html()) == '') $(this).remove();
-							})
-						}
-					}
-				}
+								type = 'command';
+								callback = btnObject.command;
+							}
+							else if (btnObject.dropdown)
+							{
+								type = 'dropdown';
+								callback = btnObject.dropdown;
+							}
 
-				this.selectionRestore();
-			}
-			// linebreaks
-			else
-			{
-				var block = this.getBlock();
-				if (block.tagName === 'BLOCKQUOTE')
-				{
-					this.selectionSave();
+							if ($(e.target).hasClass('redactor-dropdown-link-inactive')) return;
 
-					var html = $.trim($(block).html());
-					var selection = $.trim(this.getSelectionHtml());
+							this.button.onClick(e, btnName, type, callback);
+							this.dropdown.hideAll();
 
-					html = html.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi, '');
+						}, this));
 
-					if (html == selection)
-					{
-						$(block).replaceWith($(block).html() + '<br>');
-					}
-					else
-					{
-						// replace
-						this.inlineFormat('tmp');
-						var tmp = this.$editor.find('tmp');
-						tmp.empty();
+						this.observe.addDropdown($item, btnName, btnObject);
 
-						var newhtml = this.$editor.html().replace('<tmp></tmp>', '</blockquote><span id="selection-marker-1">' + this.opts.invisibleSpace + '</span>' + selection + '<blockquote>');
+						$dropdown.append($item);
 
-						this.$editor.html(newhtml);
-						tmp.remove();
-						this.$editor.find('blockquote').each(function()
-						{
-							if ($.trim($(this).html()) == '') $(this).remove();
-						})
+					}, this));
+				},
+				show: function(e, key)
+				{
+					if (!this.opts.visual)
+					{
+						e.preventDefault();
+						return false;
 					}
 
-					this.selectionRestore();
-					this.$editor.find('span#selection-marker-1').attr('id', false);
-				}
-				else
-				{
-					var wrapper = this.selectionWrap('blockquote');
-					var html = $(wrapper).html();
+					var $button = this.button.get(key);
 
-					var blocksElemsRemove = ['ul', 'ol', 'table', 'tr', 'tbody', 'thead', 'tfoot', 'dl'];
-					$.each(blocksElemsRemove, function(i,s)
-					{
-						html = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');
-						html = html.replace(new RegExp('</' + s + '>', 'gi'), '');
-					});
+					// Always re-append it to the end of <body> so it always has the highest sub-z-index.
+					var $dropdown = $button.data('dropdown').appendTo(document.body);
 
-					var blocksElems = this.opts.blockLevelElements;
-					blocksElems.push('td');
-					$.each(blocksElems, function(i,s)
+					if (this.opts.highContrast)
 					{
-						html = html.replace(new RegExp('<' + s + '(.*?)>', 'gi'), '');
-						html = html.replace(new RegExp('</' + s + '>', 'gi'), '<br>');
-					});
+						$dropdown.addClass("redactor-dropdown-contrast");
+					}
 
-					$(wrapper).html(html);
-					this.selectionElement(wrapper);
-					var next = $(wrapper).next();
-					if (next.size() != 0 && next[0].tagName === 'BR')
+					if ($button.hasClass('dropact'))
 					{
-						next.remove();
+						this.dropdown.hideAll();
 					}
-				}
-			}
-
-			this.sync();
-		},
+					else
+					{
+						this.dropdown.hideAll();
+						this.observe.dropdowns();
 
-		// BLOCK
-		blockRemoveAttr: function(attr, value)
-		{
-			var nodes = this.getBlocks();
-			$(nodes).removeAttr(attr);
+						this.core.setCallback('dropdownShow', { dropdown: $dropdown, key: key, button: $button });
 
-			this.sync();
-		},
-		blockSetAttr: function(attr, value)
-		{
-			var nodes = this.getBlocks();
-			$(nodes).attr(attr, value);
+						this.button.setActive(key);
 
-			this.sync();
-		},
-		blockRemoveStyle: function(rule)
-		{
-			var nodes = this.getBlocks();
-			$(nodes).css(rule, '');
-			this.removeEmptyAttr(nodes, 'style');
+						$button.addClass('dropact');
 
-			this.sync();
-		},
-		blockSetStyle: function (rule, value)
-		{
-			var nodes = this.getBlocks();
-			$(nodes).css(rule, value);
+						var keyPosition = $button.offset();
 
-			this.sync();
-		},
-		blockRemoveClass: function(className)
-		{
-			var nodes = this.getBlocks();
-			$(nodes).removeClass(className);
-			this.removeEmptyAttr(nodes, 'class');
+						// fix right placement
+						var dropdownWidth = $dropdown.width();
+						if ((keyPosition.left + dropdownWidth) > $(document).width())
+						{
+							keyPosition.left = Math.max(0, keyPosition.left - dropdownWidth);
+						}
 
-			this.sync();
-		},
-		blockSetClass: function(className)
-		{
-			var nodes = this.getBlocks();
-			$(nodes).addClass(className);
+						var left = keyPosition.left + 'px';
+						if (this.$toolbar.hasClass('toolbar-fixed-box'))
+						{
+							var top = this.$toolbar.innerHeight() + this.opts.toolbarFixedTopOffset;
+							var position = 'fixed';
+							if (this.opts.toolbarFixedTarget !== document)
+							{
+								top = (this.$toolbar.innerHeight() + this.$toolbar.offset().top) + this.opts.toolbarFixedTopOffset;
+								position = 'absolute';
+							}
 
-			this.sync();
-		},
+							$dropdown.css({ position: position, left: left, top: top + 'px' }).show();
+						}
+						else
+						{
+							var top = ($button.innerHeight() + keyPosition.top) + 'px';
 
-		// INLINE
-		inlineRemoveClass: function(className)
-		{
-			this.selectionSave();
+							$dropdown.css({ position: 'absolute', left: left, top: top }).show();
+						}
 
-			this.inlineEachNodes(function(node)
-			{
-				$(node).removeClass(className);
-				this.removeEmptyAttr(node, 'class');
-			});
+						this.core.setCallback('dropdownShown', { dropdown: $dropdown, key: key, button: $button });
 
-			this.selectionRestore();
-			this.sync();
-		},
+						this.$dropdown = $dropdown;
+					}
 
-		inlineSetClass: function(className)
-		{
-			var current = this.getCurrent();
-			if (!$(current).hasClass(className)) this.inlineMethods('addClass', className);
-		},
-		inlineRemoveStyle: function (rule)
-		{
-			this.selectionSave();
 
-			this.inlineEachNodes(function(node)
-			{
-				$(node).css(rule, '');
-				this.removeEmptyAttr(node, 'style');
-			});
+					$(document).one('click.redactor-dropdown', $.proxy(this.dropdown.hide, this));
+					this.$editor.one('click.redactor-dropdown', $.proxy(this.dropdown.hide, this));
+					$(document).one('keyup.redactor-dropdown', $.proxy(this.dropdown.closeHandler, this));
 
-			this.selectionRestore();
-			this.sync();
-		},
-		inlineSetStyle: function(rule, value)
-		{
-			this.inlineMethods('css', rule, value);
-		},
-		inlineRemoveAttr: function (attr)
-		{
-			this.selectionSave();
+					// disable scroll whan dropdown scroll
+					$dropdown.on('mouseover.redactor-dropdown', $.proxy(this.utils.disableBodyScroll, this)).on('mouseout.redactor-dropdown', $.proxy(this.utils.enableBodyScroll, this));
 
-			var range = this.getRange(), node = this.getElement(), nodes = this.getNodes();
 
-			if (range.collapsed || range.startContainer === range.endContainer && node)
-			{
-				nodes = $( node );
-			}
+					e.stopPropagation();
+				},
+				closeHandler: function(e)
+				{
+					if (e.which != this.keyCode.ESC) return;
 
-			$(nodes).removeAttr(attr);
+					this.dropdown.hideAll();
+					this.$editor.focus();
+				},
+				hideAll: function()
+				{
+					this.$toolbar.find('a.dropact').removeClass('redactor-act').removeClass('dropact');
 
-			this.inlineUnwrapSpan();
+					this.utils.enableBodyScroll();
 
-			this.selectionRestore();
-			this.sync();
-		},
-		inlineSetAttr: function(attr, value)
-		{
-			this.inlineMethods('attr', attr, value );
-		},
-		inlineMethods: function(type, attr, value)
-		{
-			this.bufferSet();
-			this.selectionSave();
+					$('.redactor-dropdown-' + this.uuid).hide();
+					$('.redactor-dropdown-link-selected').removeClass('redactor-dropdown-link-selected');
 
-			var range = this.getRange()
-			var el = this.getElement();
 
-			if ((range.collapsed || range.startContainer === range.endContainer) && el && !this.nodeTestBlocks(el))
-			{
-				$(el)[type](attr, value);
-			}
-			else
-			{
-				this.document.execCommand('fontSize', false, 4 );
+					if (this.$dropdown)
+					{
+						this.$dropdown.off('.redactor-dropdown');
+						this.core.setCallback('dropdownHide', this.$dropdown);
 
-				var fonts = this.$editor.find('font');
-				$.each(fonts, $.proxy(function(i, s)
+						this.$dropdown = false;
+					}
+				},
+				hide: function (e)
 				{
-					this.inlineSetMethods(type, s, attr, value);
+					var $dropdown = $(e.target);
 
-				}, this));
-
-			}
+					if (!$dropdown.hasClass('dropact') && !$dropdown.hasClass('redactor-dropdown-link-inactive'))
+					{
+						$dropdown.removeClass('dropact');
+						$dropdown.off('mouseover mouseout');
 
-			this.selectionRestore();
-			this.sync();
+						this.dropdown.hideAll();
+					}
+				}
+			};
 		},
-		inlineSetMethods: function(type, s, attr, value)
+		file: function()
 		{
-			var parent = $(s).parent(), el;
-
-			var selectionHtml = this.getSelectionText();
-			var parentHtml = $(parent).text();
-			var selected = selectionHtml == parentHtml;
-
-			if (selected && parent && parent[0].tagName === 'INLINE' && parent[0].attributes.length != 0)
-			{
-				el = parent;
-				$(s).replaceWith($(s).html());
-			}
-			else
-			{
-				el = $('<inline>').append($(s).contents());
-				$(s).replaceWith(el);
-			}
-
+			return {
+				show: function()
+				{
+					this.modal.load('file', this.lang.get('file'), 700);
+					this.upload.init('#redactor-modal-file-upload', this.opts.fileUpload, this.file.insert);
 
-			$(el)[type](attr, value);
+					this.selection.save();
 
-			return el;
-		},
-		// Sort elements and execute callback
-		inlineEachNodes: function(callback)
-		{
-			var range = this.getRange(),
-				node = this.getElement(),
-				nodes = this.getNodes(),
-				collapsed;
+					this.selection.get();
+					var text = this.sel.toString();
 
-			if (range.collapsed || range.startContainer === range.endContainer && node)
-			{
-				nodes = $(node);
-				collapsed = true;
-			}
+					$('#redactor-filename').val(text);
 
-			$.each(nodes, $.proxy(function(i, node)
-			{
-				if (!collapsed && node.tagName !== 'INLINE')
+					this.modal.show();
+				},
+				insert: function(json, direct, e)
 				{
-					var selectionHtml = this.getSelectionText();
-					var parentHtml = $(node).parent().text();
-					var selected = selectionHtml == parentHtml;
-
-					if (selected && node.parentNode.tagName === 'INLINE' && !$(node.parentNode).hasClass('redactor_editor'))
+					// error callback
+					if (typeof json.error != 'undefined')
 					{
-						node = node.parentNode;
+						this.modal.close();
+						this.selection.restore();
+						this.core.setCallback('fileUploadError', json);
+						return;
 					}
-					else return;
-				}
-				callback.call(this, node);
-
-			}, this ) );
-		},
-		inlineUnwrapSpan: function()
-		{
-			var $spans = this.$editor.find('inline');
-
-			$.each($spans, $.proxy(function(i, span)
-			{
-				var $span = $(span);
-
-				if ($span.attr('class') === undefined && $span.attr('style') === undefined)
-				{
-					$span.contents().unwrap();
-				}
 
-			}, this));
-		},
-		inlineFormat: function(tag)
-		{
-			this.selectionSave();
+					var link;
+					if (typeof json == 'string')
+					{
+						link = json;
+					}
+					else
+					{
+						var text = $('#redactor-filename').val();
+						if (typeof text == 'undefined' || text === '') text = json.filename;
 
-			this.document.execCommand('fontSize', false, 4 );
+						link = '<a href="' + json.filelink + '" id="filelink-marker">' + text + '</a>';
+					}
 
-			var fonts = this.$editor.find('font');
-			var last;
-			$.each(fonts, function(i, s)
-			{
-				var el = $('<' + tag + '/>').append($(s).contents());
-				$(s).replaceWith(el);
-				last = el;
-			});
+					if (direct)
+					{
+						this.selection.removeMarkers();
+						var marker = this.selection.getMarker();
+						this.insert.nodeToCaretPositionFromPoint(e, marker);
+					}
+					else
+					{
+						this.modal.close();
+					}
 
-			this.selectionRestore();
+					this.selection.restore();
+					this.buffer.set();
 
-			this.sync();
-		},
-		inlineRemoveFormat: function(tag)
-		{
-			this.selectionSave();
+					this.insert.htmlWithoutClean(link);
 
-			var utag = tag.toUpperCase();
-			var nodes = this.getNodes();
-			var parent = $(this.getParent()).parent();
+					if (typeof json == 'string') return;
 
-			$.each(nodes, function(i, s)
-			{
-				if (s.tagName === utag) this.inlineRemoveFormatReplace(s);
-			});
+					var linkmarker = $(this.$editor.find('a#filelink-marker'));
+					if (linkmarker.length !== 0)
+					{
+						linkmarker.removeAttr('id').removeAttr('style');
+					}
+					else linkmarker = false;
 
-			if (parent && parent[0].tagName === utag) this.inlineRemoveFormatReplace(parent);
+					this.core.setCallback('fileUpload', linkmarker, json);
 
-			this.selectionRestore();
-			this.sync();
-		},
-		inlineRemoveFormatReplace: function(el)
-		{
-			$(el).replaceWith($(el).contents());
+				}
+			};
 		},
-
-		// INSERT
-		insertHtml: function (html, sync)
+		focus: function()
 		{
-			var current = this.getCurrent();
-			var parent = current.parentNode;
-
-			this.$editor.focus();
-
-			this.bufferSet();
+			return {
+				setStart: function()
+				{
+					this.$editor.focus();
 
-			var $html = $('<div>').append($.parseHTML(html));
-			html = $html.html();
+					var first = this.$editor.children().first();
 
-			html = this.cleanRemoveEmptyTags(html);
+					if (first.length === 0) return;
+					if (first[0].length === 0 || first[0].tagName == 'BR' || first[0].nodeType == 3)
+					{
+						return;
+					}
 
-			// Update value
-			$html = $('<div>').append($.parseHTML(html));
+					if (first[0].tagName == 'UL' || first[0].tagName == 'OL')
+					{
+						var child = first.find('li').first();
+						if (!this.utils.isBlock(child) && child.text() === '')
+						{
+							// empty inline tag in li
+							this.caret.setStart(child);
+							return;
+						}
+					}
 
-			var currBlock = this.getBlock();
+					if (this.opts.linebreaks && !this.utils.isBlockTag(first[0].tagName))
+					{
+						this.selection.get();
+						this.range.setStart(this.$editor[0], 0);
+						this.range.setEnd(this.$editor[0], 0);
+						this.selection.addRange();
 
-			if ($html.contents().length == 1)
-			{
-				var htmlTagName = $html.contents()[0].tagName;
+						return;
+					}
 
-				// If the inserted and received text tags match
-				if (htmlTagName != 'P' && htmlTagName == currBlock.tagName || htmlTagName == 'PRE')
+					// if node is tag
+					this.caret.setStart(first);
+				},
+				setEnd: function()
 				{
-					html = $html.text();
-					$html = $('<div>').append(html);
-				}
-			}
-
-			// add text in a paragraph
-			if (!this.opts.linebreaks && $html.contents().length == 1 && $html.contents()[0].nodeType == 3
-				&& (this.getRangeSelectedNodes().length > 2 || (!current || current.tagName == 'BODY' && !parent || parent.tagName == 'HTML')))
-			{
-				html = '<p>' + html + '</p>';
-			}
-
-			html = this.setSpansVerifiedHtml(html);
+					var last = this.$editor.children().last();
+					this.$editor.focus();
 
-			if ($html.contents().length > 1 && currBlock
-			|| $html.contents().is('p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article'))
-			{
-				if (this.browser('msie'))
-				{
-					if (!this.isIe11())
+					if (last.size() === 0) return;
+					if (this.utils.isEmpty(this.$editor.html()))
 					{
-						this.document.selection.createRange().pasteHTML(html);
+
+						this.selection.get();
+						this.range.collapse(true);
+						this.range.setStartAfter(last[0]);
+						this.range.setEnd(last[0], 0);
+						this.selection.addRange();
 					}
 					else
 					{
-						this.execPasteFrag(html);
-					}
-				}
-				else this.document.execCommand('inserthtml', false, html);
-			}
-			else this.insertHtmlAdvanced(html, false);
+						this.selection.get();
+						this.range.selectNodeContents(last[0]);
+						this.range.collapse(false);
+						this.selection.addRange();
 
-			if (this.selectall)
-			{
-				this.window.setTimeout($.proxy(function()
+					}
+				},
+				isFocused: function()
 				{
-					if (!this.opts.linebreaks) this.selectionEnd(this.$editor.contents().last());
-					else this.focusEnd();
+					var focusNode = document.getSelection().focusNode;
+					if (focusNode === null) return false;
 
-				}, this), 1);
-			}
-
-			this.observeStart();
+					if (this.opts.linebreaks && $(focusNode.parentNode).hasClass('redactor-linebreaks')) return true;
+					else if (!this.utils.isRedactorParent(focusNode.parentNode)) return false;
 
-			// set no editable
-			this.setNonEditable();
-
-			if (sync !== false) this.sync();
+					return this.$editor.is(':focus');
+				}
+			};
 		},
-		insertHtmlAdvanced: function(html, sync)
+		image: function()
 		{
-			html = this.setSpansVerifiedHtml(html);
-
-			var sel = this.getSelection();
-
-			if (sel.getRangeAt && sel.rangeCount)
-			{
-				var range = sel.getRangeAt(0);
-				range.deleteContents();
-
-				var el = this.document.createElement('div');
-				el.innerHTML = html;
-				var frag = this.document.createDocumentFragment(), node, lastNode;
-				while ((node = el.firstChild))
+			return {
+				show: function()
 				{
-					lastNode = frag.appendChild(node);
-				}
+					this.modal.load('image', this.lang.get('image'), 700);
+					this.upload.init('#redactor-modal-image-droparea', this.opts.imageUpload, this.image.insert);
 
-				range.insertNode(frag);
+					this.selection.save();
+					this.modal.show();
 
-				if (lastNode)
+				},
+				showEdit: function($image)
 				{
-					range = range.cloneRange();
-					range.setStartAfter(lastNode);
-					range.collapse(true);
-					sel.removeAllRanges();
-					sel.addRange(range);
-				}
-			}
-
-			if (sync !== false)
-			{
-				this.sync();
-			}
-
-		},
-		insertBeforeCursor: function(html)
-		{
-			html = this.setSpansVerifiedHtml(html);
+					var $link = $image.closest('a', this.$editor[0]);
 
-			var node = $(html);
+					this.modal.load('imageEdit', this.lang.get('edit'), 705);
 
-			var space = document.createElement("span");
-			space.innerHTML = "\u200B";
+					this.modal.createCancelButton();
+					this.image.buttonDelete = this.modal.createDeleteButton(this.lang.get('_delete'));
+					this.image.buttonSave = this.modal.createActionButton(this.lang.get('save'));
 
-			var range = this.getRange();
-			range.insertNode(space);
-			range.insertNode(node[0]);
-			range.collapse(false);
+					this.image.buttonDelete.on('click', $.proxy(function()
+					{
+						this.image.remove($image);
 
-			var sel = this.getSelection();
-			sel.removeAllRanges();
-			sel.addRange(range);
+					}, this));
 
-			this.sync();
-		},
-		insertText: function(html)
-		{
-			var $html = $($.parseHTML(html));
+					this.image.buttonSave.on('click', $.proxy(function()
+					{
+						this.image.update($image);
 
-			if ($html.length) html = $html.text();
+					}, this));
 
-			this.$editor.focus();
+					// hide link's tooltip
+					$('.redactor-link-tooltip').remove();
 
-			if (this.browser('msie') && !this.isIe11()) this.document.selection.createRange().pasteHTML(html);
-			else this.document.execCommand('inserthtml', false, html);
+					$('#redactor-image-title').val($image.attr('alt'));
 
-			this.sync();
-		},
-		insertNode: function(node)
-		{
-			node = node[0] || node;
+					if (!this.opts.imageLink) $('.redactor-image-link-option').hide();
+					else
+					{
+						var $redactorImageLink = $('#redactor-image-link');
 
-			if (node.tagName == 'SPAN')
-			{
-				var replacementTag = 'inline';
+						$redactorImageLink.attr('href', $image.attr('src'));
+						if ($link.length !== 0)
+						{
+							$redactorImageLink.val($link.attr('href'));
+							if ($link.attr('target') == '_blank') $('#redactor-image-link-blank').prop('checked', true);
+						}
+					}
 
-			    var outer = node.outerHTML;
+					if (!this.opts.imagePosition) $('.redactor-image-position-option').hide();
+					else
+					{
+						var floatValue = ($image.css('display') == 'block' && $image.css('float') == 'none') ? 'center' : $image.css('float');
+						$('#redactor-image-align').val(floatValue);
+					}
 
-			    // Replace opening tag
-			    var regex = new RegExp('<' + node.tagName, 'i');
-			    var newTag = outer.replace(regex, '<' + replacementTag);
-
-			    // Replace closing tag
-			    regex = new RegExp('</' + node.tagName, 'i');
-			    newTag = newTag.replace(regex, '</' + replacementTag);
-			    node = $(newTag)[0];
-			}
+					this.modal.show();
+					$('#redactor-image-title').focus();
 
-			var sel = this.getSelection();
-			if (sel.getRangeAt && sel.rangeCount)
-			{
-				// with delete contents
-				range = sel.getRangeAt(0);
-				range.deleteContents();
-				range.insertNode(node);
-				range.setEndAfter(node);
-				range.setStartAfter(node);
-				sel.removeAllRanges();
-				sel.addRange(range);
-			}
-		},
-		insertNodeToCaretPositionFromPoint: function(e, node)
-		{
-			var range;
-			var x = e.clientX, y = e.clientY;
-			if (this.document.caretPositionFromPoint)
-			{
-			    var pos = this.document.caretPositionFromPoint(x, y);
-			    range = this.getRange();
-			    range.setStart(pos.offsetNode, pos.offset);
-			    range.collapse(true);
-			    range.insertNode(node);
-			}
-			else if (this.document.caretRangeFromPoint)
-			{
-			    range = this.document.caretRangeFromPoint(x, y);
-			    range.insertNode(node);
-			}
-			else if (typeof document.body.createTextRange != "undefined")
-			{
-		        range = this.document.body.createTextRange();
-		        range.moveToPoint(x, y);
-		        var endRange = range.duplicate();
-		        endRange.moveToPoint(x, y);
-		        range.setEndPoint("EndToEnd", endRange);
-		        range.select();
-			}
+				},
+				setFloating: function($image)
+				{
+					var floating = $('#redactor-image-align').val();
 
-		},
-		insertAfterLastElement: function(element, parent)
-		{
-			if (typeof(parent) != 'undefined') element = parent;
+					var imageFloat = '';
+					var imageDisplay = '';
+					var imageMargin = '';
 
-			if (this.isEndOfElement())
-			{
-				if (this.opts.linebreaks)
-				{
-					var contents = $('<div>').append($.trim(this.$editor.html())).contents();
-					if (this.outerHtml(contents.last()[0]) != this.outerHtml(element))
-					{
-						return false;
-					}
-				}
-				else
-				{
-					if (this.$editor.contents().last()[0] !== element)
+					switch (floating)
 					{
-						return false;
+						case 'left':
+							imageFloat = 'left';
+							imageMargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';
+						break;
+						case 'right':
+							imageFloat = 'right';
+							imageMargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin;
+						break;
+						case 'center':
+							imageDisplay = 'block';
+							imageMargin = 'auto';
+						break;
 					}
-				}
-
-				this.insertingAfterLastElement(element);
-			}
-		},
-		insertingAfterLastElement: function(element)
-		{
-			this.bufferSet();
-
-			if (this.opts.linebreaks === false)
-			{
-				var node = $(this.opts.emptyHtml);
-				$(element).after(node);
-				this.selectionStart(node);
-			}
-			else
-			{
-				var node = $('<span id="selection-marker-1">' + this.opts.invisibleSpace + '</span>', this.document)[0];
-				$(element).after(node);
-				$(node).after(this.opts.invisibleSpace);
-				this.selectionRestore();
-				this.$editor.find('span#selection-marker-1').removeAttr('id');
-			}
-		},
-		insertLineBreak: function()
-		{
-			this.selectionSave();
-			this.$editor.find('#selection-marker-1').before('<br>' + (this.browser('webkit') ? this.opts.invisibleSpace : ''));
-			this.selectionRestore();
-		},
-		insertDoubleLineBreak: function()
-		{
-			this.selectionSave();
-			this.$editor.find('#selection-marker-1').before('<br><br>' + (this.browser('webkit') ? this.opts.invisibleSpace : ''));
-			this.selectionRestore();
-		},
-		replaceLineBreak: function(element)
-		{
-			//var node = this.document.createTextNode('\uFEFF');
-			var node = $('<br>' + this.opts.invisibleSpace);
-			$(element).replaceWith(node);
-			this.selectionStart(node);
-		},
-
-		// PASTE
-		pasteClean: function(html)
-		{
-			html = this.callback('pasteBefore', false, html);
 
-			// ie10 fix paste links
-			if (this.browser('msie'))
-			{
-				var tmp = $.trim(html);
-				if (tmp.search(/^<a(.*?)>(.*?)<\/a>$/i) == 0)
+					$image.css({ 'float': imageFloat, display: imageDisplay, margin: imageMargin });
+					$image.attr('rel', $image.attr('style'));
+				},
+				update: function($image)
 				{
-					html = html.replace(/^<a(.*?)>(.*?)<\/a>$/i, "$2");
-				}
-			}
+					this.image.hideResize();
+					this.buffer.set();
 
-			if (this.opts.pastePlainText)
-			{
-				var tmp = this.document.createElement('div');
-
-				html = html.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi, '\n');
+					var $link = $image.closest('a', this.$editor[0]);
 
-				tmp.innerHTML = html;
-				html = tmp.textContent || tmp.innerText;
+					var title = $('#redactor-image-title').val().replace(/(<([^>]+)>)/ig,"");
+					$image.attr('alt', title);
 
-				html = $.trim(html);
-				html = html.replace('\n', '<br>');
-				html = this.cleanParagraphy(html);
+					this.image.setFloating($image);
 
-				this.pasteInsert(html);
-				return false;
-			}
+					// as link
+					var link = $.trim($('#redactor-image-link').val());
+					var link = link.replace(/(<([^>]+)>)/ig,"");
+					if (link !== '')
+					{
+						// test url (add protocol)
+						var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';
+						var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');
+						var re2 = new RegExp('^' + pattern, 'i');
 
-			// clean up pre
-			if (this.currentOrParentIs('PRE'))
-			{
-				html = this.pastePre(html);
-				this.pasteInsert(html);
-				return true;
-			}
+						if (link.search(re) == -1 && link.search(re2) === 0 && this.opts.linkProtocol)
+						{
+							link = this.opts.linkProtocol + '://' + link;
+						}
 
-			// ms word list
-			html = html.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi, '<ul><li$2</li>');
-			html = html.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi, '<li$2</li>');
-			html = html.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi, '<li$2</li></ul>');
-			// one line
-			html = html.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi, '<ul><li$2</li></ul>');
-			// remove ms word's bullet
-			html = html.replace(//g, '');
-
-			// remove comments and php tags
-			html = html.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi, '');
-
-			// remove nbsp
-			html = html.replace(/(&nbsp;){2,}/gi, '&nbsp;');
-			html = html.replace(/&nbsp;/gi, ' ');
-
-			// remove google docs marker
-			html = html.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi, "$2");
-			html = html.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi, "$3");
-
-			// strip tags
-			html = this.cleanStripTags(html);
-
-			// prevert
-			html = html.replace(/<td><\/td>/gi, '[td]');
-			html = html.replace(/<td>&nbsp;<\/td>/gi, '[td]');
-			html = html.replace(/<td><br><\/td>/gi, '[td]');
-			html = html.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi, '[td colspan="$2"]$4[/td]');
-			html = html.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi, '[td rowspan="$2"]$4[/td]');
-			html = html.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi, '[a href="$2"]$4[/a]');
-			html = html.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi, '[iframe$1]$2[/iframe]');
-			html = html.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi, '[video$1]$2[/video]');
-			html = html.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi, '[audio$1]$2[/audio]');
-			html = html.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi, '[embed$1]$2[/embed]');
-			html = html.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi, '[object$1]$2[/object]');
-			html = html.replace(/<param(.*?)>/gi, '[param$1]');
-			html = html.replace(/<img(.*?)>/gi, '[img$1]');
-
-			// remove classes
-			html = html.replace(/ class="(.*?)"/gi, '');
-
-			// remove all attributes
-			html = html.replace(/<(\w+)([\w\W]*?)>/gi, '<$1>');
-
-			// remove empty
-			html = html.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, '');
-			html = html.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi, '$1');
-
-			// revert
-			html = html.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi, '<td colspan="$1">$2</td>');
-			html = html.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi, '<td rowspan="$1">$2</td>');
-			html = html.replace(/\[td\]/gi, '<td>&nbsp;</td>');
-			html = html.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi, '<a href="$1">$2</a>');
-			html = html.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi, '<iframe$1>$2</iframe>');
-			html = html.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi, '<video$1>$2</video>');
-			html = html.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi, '<audio$1>$2</audio>');
-			html = html.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi, '<embed$1>$2</embed>');
-			html = html.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi, '<object$1>$2</object>');
-			html = html.replace(/\[param(.*?)\]/gi, '<param$1>');
-			html = html.replace(/\[img(.*?)\]/gi, '<img$1>');
+						var target = ($('#redactor-image-link-blank').prop('checked')) ? true : false;
 
-			// convert div to p
-			if (this.opts.convertDivs)
-			{
-				html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '<p>$2</p>');
-				html = html.replace(/<\/div><p>/gi, '<p>');
-				html = html.replace(/<\/p><\/div>/gi, '</p>');
-			}
+						if ($link.length === 0)
+						{
+							var a = $('<a href="' + link + '">' + this.utils.getOuterHtml($image) + '</a>');
+							if (target) a.attr('target', '_blank');
 
-			if (this.currentOrParentIs('LI'))
-			{
-				html = html.replace(/<p>([\w\W]*?)<\/p>/gi, '$1<br>');
-			}
-			else
-			{
-				html = this.cleanParagraphy(html);
-			}
+							$image.replaceWith(a);
+						}
+						else
+						{
+							$link.attr('href', link);
+							if (target)
+							{
+								$link.attr('target', '_blank');
+							}
+							else
+							{
+								$link.removeAttr('target');
+							}
+						}
+					}
+					else if ($link.length !== 0)
+					{
+						$link.replaceWith(this.utils.getOuterHtml($image));
 
-			// remove span
-			html = html.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi, '$2');
+					}
 
-			// remove empty
-			html = html.replace(/<img>/gi, '');
-			html = html.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, '');
+					this.modal.close();
+					this.observe.images();
+					this.code.sync();
 
-			html = html.replace(/\n{3,}/gi, '\n');
 
-			// remove dirty p
-			html = html.replace(/<p><p>/gi, '<p>');
-			html = html.replace(/<\/p><\/p>/gi, '</p>');
+				},
+				setEditable: function($image)
+				{
+					if (this.opts.imageEditable)
+					{
+						$image.on('dragstart', $.proxy(this.image.onDrag, this));
+					}
 
-			html = html.replace(/<li>(\s*|\t*|\n*)<p>/gi, '<li>');
-			html = html.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi, '</li>');
+					var handler = $.proxy(function(e)
+					{
 
-			if (this.opts.linebreaks === true)
-			{
-				html = html.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi, '$2<br>');
-			}
+						this.observe.image = $image;
 
-			// remove empty finally
-			html = html.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, '');
+						this.image.resizer = this.image.loadEditableControls($image);
 
-			// remove safari local images
-			html = html.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi, '');
+						$(document).on('mousedown.redactor-image-resize-hide.' + this.uuid, $.proxy(this.image.hideResize, this));
 
-			// remove p in td
-			html = html.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi, '<td$1>$3</td>');
+						// resize
+						if (!this.opts.imageResizable) return;
 
-			// remove divs
-			html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '$2');
-			html = html.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, '$2');
-
-			// FF specific
-			this.pasteClipboardMozilla = false;
-			if (this.browser('mozilla'))
-			{
-				if (this.opts.clipboardUpload)
-				{
-					var matches = html.match(/<img src="data:image(.*?)"(.*?)>/gi);
-					if (matches !== null)
-					{
-						this.pasteClipboardMozilla = matches;
-						for (k in matches)
+						this.image.resizer.on('mousedown.redactor touchstart.redactor', $.proxy(function(e)
 						{
-							var img = matches[k].replace('<img', '<img data-mozilla-paste-image="' + k + '" ');
-							html = html.replace(matches[k], img);
-						}
-					}
-				}
+							this.image.setResizable(e, $image);
+						}, this));
 
-				// FF fix
-				while (/<br>$/gi.test(html))
-				{
-					html = html.replace(/<br>$/gi, '');
-				}
-			}
+					}, this);
 
-			// bullets again
-			html = html.replace(/<p>([\w\W]*?)<\/p>/gi, '<li>$1</li>');
 
-			// ie inserts a blank font tags when pasting
-			while (/<font>([\w\W]*?)<\/font>/gi.test(html))
-			{
-				html = html.replace(/<font>([\w\W]*?)<\/font>/gi, '$1');
-			}
+					$image.off('mousedown.redactor').on('mousedown.redactor', $.proxy(this.image.hideResize, this));
+					$image.off('click.redactor touchstart.redactor').on('click.redactor touchstart.redactor', handler);
+				},
+				setResizable: function(e, $image)
+				{
+					e.preventDefault();
 
-			// ms word lists breakline
-			html = html.replace(/<p>\n?<li>/gi, '<li>');
-			if (this.browser('msie') && !this.isIe11())
-			{
-				html = html.replace(/\n/g, '');
-			}
+				    this.image.resizeHandle = {
+				        x : e.pageX,
+				        y : e.pageY,
+				        el : $image,
+				        ratio: $image.width() / $image.height(),
+				        h: $image.height()
+				    };
+
+				    e = e.originalEvent || e;
+
+				    if (e.targetTouches)
+				    {
+				         this.image.resizeHandle.x = e.targetTouches[0].pageX;
+				         this.image.resizeHandle.y = e.targetTouches[0].pageY;
+				    }
 
-			this.pasteInsert(html);
+					this.image.startResize();
 
-		},
-		pastePre: function(s)
-		{
-			s = s.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi, '\n');
 
-			var tmp = this.document.createElement('div');
-			tmp.innerHTML = s;
-			return this.cleanEncodeEntities(tmp.textContent || tmp.innerText);
-		},
-		pasteInsert: function(html)
-		{
-			if (this.selectall)
-			{
-				if (!this.opts.linebreaks) this.$editor.html(this.opts.emptyHtml);
-				else this.$editor.html('');
+				},
+				startResize: function()
+				{
+					$(document).on('mousemove.redactor-image-resize touchmove.redactor-image-resize', $.proxy(this.image.moveResize, this));
+					$(document).on('mouseup.redactor-image-resize touchend.redactor-image-resize', $.proxy(this.image.stopResize, this));
+				},
+				moveResize: function(e)
+				{
+					e.preventDefault();
 
-				this.$editor.focus();
-			}
+					e = e.originalEvent || e;
 
-			html = this.callback('pasteAfter', false, html);
+					var height = this.image.resizeHandle.h;
 
-			this.insertHtml(html);
+		            if (e.targetTouches) height += (e.targetTouches[0].pageY -  this.image.resizeHandle.y);
+		            else height += (e.pageY -  this.image.resizeHandle.y);
 
-			this.selectall = false;
-			setTimeout($.proxy(function()
-			{
-				this.rtePaste = false;
+					var width = Math.round(height * this.image.resizeHandle.ratio);
 
-				// FF specific
-				if (this.browser('mozilla'))
-				{
-					this.$editor.find('p:empty').remove()
-				}
-				if (this.pasteClipboardMozilla !== false)
-				{
-					this.pasteClipboardUploadMozilla();
-				}
+					if (height < 50 || width < 100) return;
 
-			}, this), 100);
+					var height = Math.round(this.image.resizeHandle.el.width() / this.image.resizeHandle.ratio);
 
-			if (this.opts.autoresize && this.fullscreen !== true) $(this.document.body).scrollTop(this.saveScroll);
-			else this.$editor.scrollTop(this.saveScroll);
-		},
-		pasteClipboardUploadMozilla: function()
-		{
-			var imgs = this.$editor.find('img[data-mozilla-paste-image]');
-			$.each(imgs, $.proxy(function(i,s)
-			{
-				var $s = $(s);
-				var arr = s.src.split(",");
-				var data = arr[1]; // raw base64
-				var contentType = arr[0].split(";")[0].split(":")[1];
+					this.image.resizeHandle.el.attr({width: width, height: height});
+		            this.image.resizeHandle.el.width(width);
+		            this.image.resizeHandle.el.height(height);
 
-				$.post(this.opts.clipboardUploadUrl, {
-				    contentType: contentType,
-				    data: data
+		            this.code.sync();
 				},
-				$.proxy(function(data)
+				stopResize: function()
 				{
-					var json = (typeof data === 'string' ? $.parseJSON(data) : data);
-		        	$s.attr('src', json.filelink);
-		        	$s.removeAttr('data-mozilla-paste-image');
-
-		        	this.sync();
-
-					// upload callback
-					this.callback('imageUpload', $s, json);
+					this.handle = false;
+					$(document).off('.redactor-image-resize');
 
-				}, this));
+					this.image.hideResize();
+				},
+				onDrag: function(e)
+				{
+					if (this.$editor.find('#redactor-image-box').length !== 0)
+					{
+						e.preventDefault();
+						return false;
+					}
 
-			}, this));
-		},
-		pasteClipboardUpload: function(e)
-		{
-	        var result = e.target.result;
-			var arr = result.split(",");
-			var data = arr[1]; // raw base64
-			var contentType = arr[0].split(";")[0].split(":")[1];
+					this.$editor.on('drop.redactor-image-inside-drop', $.proxy(function()
+					{
+						setTimeout($.proxy(this.image.onDrop, this), 1);
 
-			if (this.opts.clipboardUpload)
-			{
-				$.post(this.opts.clipboardUploadUrl, {
-				    contentType: contentType,
-				    data: data
+					}, this));
+				},
+				onDrop: function()
+				{
+					this.image.fixImageSourceAfterDrop();
+					this.observe.images();
+					this.$editor.off('drop.redactor-image-inside-drop');
+					this.clean.clearUnverified();
+					this.code.sync();
+				},
+				fixImageSourceAfterDrop: function()
+				{
+					this.$editor.find('img[data-save-url]').each(function()
+					{
+						var $el = $(this);
+						$el.attr('src', $el.attr('data-save-url'));
+						$el.removeAttr('data-save-url');
+					});
 				},
-				$.proxy(function(data)
+				hideResize: function(e)
 				{
-					var json = (typeof data === 'string' ? $.parseJSON(data) : data);
+					if (e && $(e.target).closest('#redactor-image-box', this.$editor[0]).length !== 0) return;
+					if (e && e.target.tagName == 'IMG')
+					{
+						var $image = $(e.target);
+						$image.attr('data-save-url', $image.attr('src'));
+					}
+
+					var imageBox = this.$editor.find('#redactor-image-box');
+					if (imageBox.length === 0) return;
 
-					var html = '<img src="' + json.filelink + '" id="clipboard-image-marker" />';
-					this.execCommand('inserthtml', html, false);
+					$('#redactor-image-editter').remove();
+					$('#redactor-image-resizer').remove();
 
-					var image = $(this.$editor.find('img#clipboard-image-marker'));
+					imageBox.find('img').css({
+						marginTop: imageBox[0].style.marginTop,
+						marginBottom: imageBox[0].style.marginBottom,
+						marginLeft: imageBox[0].style.marginLeft,
+						marginRight: imageBox[0].style.marginRight
+					});
+
+					imageBox.css('margin', '');
+					imageBox.find('img').css('opacity', '');
+					imageBox.replaceWith(function()
+					{
+						return $(this).contents();
+					});
 
-					if (image.length) image.removeAttr('id');
-					else image = false;
+					$(document).off('mousedown.redactor-image-resize-hide.' + this.uuid);
 
-					this.sync();
 
-					// upload callback
-					if (image)
+					if (typeof this.image.resizeHandle !== 'undefined')
 					{
-						this.callback('imageUpload', image, json);
+						this.image.resizeHandle.el.attr('rel', this.image.resizeHandle.el.attr('style'));
 					}
 
+					this.code.sync();
 
-				}, this));
-			}
-			else
-			{
-	        	this.insertHtml('<img src="' + result + '" />');
-        	}
-		},
-
-		// BUFFER
-		bufferSet: function(html)
-		{
-			if (html !== undefined) this.opts.buffer.push(html);
-			else
-			{
-				this.selectionSave();
-				this.opts.buffer.push(this.$editor.html());
-				this.selectionRemoveMarkers('buffer');
-			}
-		},
-		bufferUndo: function()
-		{
-			if (this.opts.buffer.length === 0)
-			{
-				this.$editor.focus();
-				return;
-			}
-
-			// rebuffer
-			this.selectionSave();
-			this.opts.rebuffer.push(this.$editor.html());
-			this.selectionRestore(false, true);
-
-			this.$editor.html(this.opts.buffer.pop());
-
-			this.selectionRestore();
-			setTimeout($.proxy(this.observeStart, this), 100);
-		},
-		bufferRedo: function()
-		{
-			if (this.opts.rebuffer.length === 0)
-			{
-				this.$editor.focus();
-				return false;
-			}
-
-			// buffer
-			this.selectionSave();
-			this.opts.buffer.push(this.$editor.html());
-			this.selectionRestore(false, true);
+				},
+				loadResizableControls: function($image, imageBox)
+				{
+					if (this.opts.imageResizable && !this.utils.isMobile())
+					{
+						var imageResizer = $('<span id="redactor-image-resizer" data-redactor="verified"></span>');
 
-			this.$editor.html(this.opts.rebuffer.pop());
-			this.selectionRestore(true);
-			setTimeout($.proxy(this.observeStart, this), 4);
-		},
+						if (!this.utils.isDesktop())
+						{
+							imageResizer.css({ width: '15px', height: '15px' });
+						}
 
-		// OBSERVE
-		observeStart: function()
-		{
-			this.observeImages();
+						imageResizer.attr('contenteditable', false);
+						imageBox.append(imageResizer);
+						imageBox.append($image);
 
-			if (this.opts.observeLinks) this.observeLinks();
-		},
-		observeLinks: function()
-		{
-			this.$editor.find('a').on('click', $.proxy(this.linkObserver, this));
-			this.$editor.on('click.redactor', $.proxy(function(e)
-			{
-				this.linkObserverTooltipClose(e);
+						return imageResizer;
+					}
+					else
+					{
+						imageBox.append($image);
+						return false;
+					}
+				},
+				loadEditableControls: function($image)
+				{
+					var imageBox = $('<span id="redactor-image-box" data-redactor="verified">');
+					imageBox.css('float', $image.css('float')).attr('contenteditable', false);
 
-			}, this));
-			$(document).on('click.redactor', $.proxy(function(e)
-			{
-				this.linkObserverTooltipClose(e);
+					if ($image[0].style.margin != 'auto')
+					{
+						imageBox.css({
+							marginTop: $image[0].style.marginTop,
+							marginBottom: $image[0].style.marginBottom,
+							marginLeft: $image[0].style.marginLeft,
+							marginRight: $image[0].style.marginRight
+						});
 
-			}, this));
-		},
-		observeImages: function()
-		{
-			if (this.opts.observeImages === false) return false;
+						$image.css('margin', '');
+					}
+					else
+					{
+						imageBox.css({ 'display': 'block', 'margin': 'auto' });
+					}
 
-			this.$editor.find('img').each($.proxy(function(i, elem)
-			{
-				if (this.browser('msie')) $(elem).attr('unselectable', 'on');
-				this.imageResize(elem);
+					$image.css('opacity', '.5').after(imageBox);
 
-			}, this));
-		},
-		linkObserver: function(e)
-		{
-			var $link = $(e.target);
-			var pos = $link.offset();
-			if (this.opts.iframe)
-			{
-				var posFrame = this.$frame.offset();
-				pos.top = posFrame.top + (pos.top - $(this.document).scrollTop());
-				pos.left += posFrame.left;
-			}
 
-			var tooltip = $('<span class="redactor-link-tooltip"></span>');
+					if (this.opts.imageEditable)
+					{
+						// editter
+						this.image.editter = $('<span id="redactor-image-editter" data-redactor="verified">' + this.lang.get('edit') + '</span>');
+						this.image.editter.attr('contenteditable', false);
+						this.image.editter.on('click', $.proxy(function()
+						{
+							this.image.showEdit($image);
+						}, this));
 
-			var href = $link.attr('href');
-			if (href.length > 24) href = href.substring(0,24) + '...';
+						imageBox.append(this.image.editter);
 
-			var aLink = $('<a href="' + $link.attr('href') + '" target="_blank">' + href + '</a>').on('click', $.proxy(function(e)
-			{
-				this.linkObserverTooltipClose(false);
-			}, this));
+						// position correction
+						var editerWidth = this.image.editter.innerWidth();
+						this.image.editter.css('margin-left', '-' + editerWidth/2 + 'px');
+					}
 
-			var aEdit = $('<a href="#">' + this.opts.curLang.edit + '</a>').on('click', $.proxy(function(e)
-			{
-				e.preventDefault();
-				this.linkShow();
-				this.linkObserverTooltipClose(false);
+					return this.image.loadResizableControls($image, imageBox);
 
-			}, this));
+				},
+				remove: function(image)
+				{
+					var $image = $(image);
+					var $link = $image.closest('a', this.$editor[0]);
+					var $figure = $image.closest('figure', this.$editor[0]);
+					var $parent = $image.parent();
+					if ($('#redactor-image-box').length !== 0)
+					{
+						$parent = $('#redactor-image-box').parent();
+					}
 
-			var aUnlink = $('<a href="#">' + this.opts.curLang.unlink + '</a>').on('click', $.proxy(function(e)
-			{
-				e.preventDefault();
-				this.execCommand('unlink');
-				this.linkObserverTooltipClose(false);
-
-			}, this));
+					var $next;
+					if ($figure.length !== 0)
+					{
+						$next = $figure.next();
+						$figure.remove();
+					}
+					else if ($link.length !== 0)
+					{
+						$parent = $link.parent();
+						$link.remove();
+					}
+					else
+					{
+						$image.remove();
+					}
 
+					$('#redactor-image-box').remove();
 
-			tooltip.append(aLink);
-			tooltip.append(' | ');
-			tooltip.append(aEdit);
-			tooltip.append(' | ');
-			tooltip.append(aUnlink);
-			tooltip.css({
-				top: (pos.top + 20) + 'px',
-				left: pos.left + 'px'
-			});
+					if ($figure.length !== 0)
+					{
+						this.caret.setStart($next);
+					}
+					else
+					{
+						this.caret.setStart($parent);
+					}
 
-			$('.redactor-link-tooltip').remove();
-			$('body').append(tooltip);
-		},
-		linkObserverTooltipClose: function(e)
-		{
-			if (e !== false && e.target.tagName == 'A') return false;
-			$('.redactor-link-tooltip').remove();
-		},
+					// delete callback
+					this.core.setCallback('imageDelete', $image[0].src, $image);
 
-		// SELECTION
-		getSelection: function()
-		{
-			if (!this.opts.rangy) return this.document.getSelection();
-			else // rangy
-			{
-				if (!this.opts.iframe) return rangy.getSelection();
-				else return rangy.getSelection(this.$frame[0]);
-			}
-		},
-		getRange: function()
-		{
-			if (!this.opts.rangy)
-			{
-				if (this.document.getSelection)
+					this.modal.close();
+					this.code.sync();
+				},
+				insert: function(json, direct, e)
 				{
-					var sel = this.getSelection();
-					if (sel.getRangeAt && sel.rangeCount) return sel.getRangeAt(0);
-				}
+					// error callback
+					if (typeof json.error != 'undefined')
+					{
+						this.modal.close();
+						this.selection.restore();
+						this.core.setCallback('imageUploadError', json);
+						return;
+					}
 
-				return this.document.createRange();
-			}
-			else // rangy
-			{
-				if (!this.opts.iframe) return rangy.createRange();
-				else return rangy.createRange(this.iframeDoc());
-			}
-		},
-		selectionElement: function(node)
-		{
-			this.setCaret(node);
-		},
-		selectionStart: function(node)
-		{
-			this.selectionSet(node[0] || node, 0, null, 0);
-		},
-		selectionEnd: function(node)
-		{
-			this.selectionSet(node[0] || node, 1, null, 1);
-		},
-		selectionSet: function(orgn, orgo, focn, foco)
-		{
-			if (focn == null) focn = orgn;
-			if (foco == null) foco = orgo;
+					var $img;
+					if (typeof json == 'string')
+					{
+						$img = $(json).attr('data-redactor-inserted-image', 'true');
+					}
+					else
+					{
+						$img = $('<img>');
+						$img.attr('src', json.filelink).attr('data-redactor-inserted-image', 'true');
+					}
 
-			var sel = this.getSelection();
-			if (!sel) return;
 
-			var range = this.getRange();
-			range.setStart(orgn, orgo);
-			range.setEnd(focn, foco );
+					var node = $img;
+					var isP = this.utils.isCurrentOrParent('P');
+					if (isP)
+					{
+						// will replace
+						node = $('<blockquote />').append($img);
+					}
 
-			try {
-				sel.removeAllRanges();
-			} catch (e) {}
+					if (direct)
+					{
+						this.selection.removeMarkers();
+						var marker = this.selection.getMarker();
+						this.insert.nodeToCaretPositionFromPoint(e, marker);
+					}
+					else
+					{
+						this.modal.close();
+					}
 
-			sel.addRange(range);
-		},
-		selectionWrap: function(tag)
-		{
-			tag = tag.toLowerCase();
+					this.selection.restore();
+					this.buffer.set();
 
-			var block = this.getBlock();
-			if (block)
-			{
-				var wrapper = this.formatChangeTag(block, tag);
-				this.sync();
-				return wrapper;
-			}
+					this.insert.html(this.utils.getOuterHtml(node), false);
 
-			var sel = this.getSelection();
-			var range = sel.getRangeAt(0);
-			var wrapper = document.createElement(tag);
-			wrapper.appendChild(range.extractContents());
-			range.insertNode(wrapper);
+					var $image = this.$editor.find('img[data-redactor-inserted-image=true]').removeAttr('data-redactor-inserted-image');
 
-			this.selectionElement(wrapper);
+					if (isP)
+					{
+						$image.parent().contents().unwrap().wrap('<p />');
+					}
+					else if (this.opts.linebreaks)
+					{
+						if (!this.utils.isEmpty(this.code.get()))
+						{
+							$image.before('<br>');
+						}
 
-			return wrapper;
-		},
-		selectionAll: function()
-		{
-			var range = this.getRange();
-			range.selectNodeContents(this.$editor[0]);
+						$image.after('<br>');
+					}
 
-			var sel = this.getSelection();
-			sel.removeAllRanges();
-			sel.addRange(range);
-		},
-		selectionRemove: function()
-		{
-			this.getSelection().removeAllRanges();
-		},
-		getCaretOffset: function (element)
-		{
-			var caretOffset = 0;
+					if (typeof json == 'string') return;
 
-			var range = this.getRange();
-			var preCaretRange = range.cloneRange();
-			preCaretRange.selectNodeContents(element);
-			preCaretRange.setEnd(range.endContainer, range.endOffset);
-			caretOffset = $.trim(preCaretRange.toString()).length;
+					this.core.setCallback('imageUpload', $image, json);
 
-			return caretOffset;
-		},
-		getCaretOffsetRange: function()
-		{
-			return new Range(this.getSelection().getRangeAt(0));
+				}
+			};
 		},
-		setCaret: function (el, start, end)
+		indent: function()
 		{
-			if (typeof end === 'undefined') end = start;
-			el = el[0] || el;
+			return {
+				increase: function()
+				{
+					// focus
+					if (!this.utils.browser('msie')) this.$editor.focus();
 
-			var range = this.getRange();
-			range.selectNodeContents(el);
+					this.buffer.set();
+					this.selection.save();
 
-			var textNodes = this.getTextNodesIn(el);
-			var foundStart = false;
-			var charCount = 0, endCharCount;
+					var block = this.selection.getBlock();
 
-			if (textNodes.length == 1 && start)
-			{
-				range.setStart(textNodes[0], start);
-				range.setEnd(textNodes[0], end);
-			}
-			else
-			{
-				for (var i = 0, textNode; textNode = textNodes[i++];)
-				{
-					endCharCount = charCount + textNode.length;
-					if (!foundStart && start >= charCount && (start < endCharCount || (start == endCharCount && i < textNodes.length)))
+					if (block && block.tagName == 'LI')
 					{
-						range.setStart(textNode, start - charCount);
-						foundStart = true;
+						this.indent.increaseLists();
 					}
-
-					if (foundStart && end <= endCharCount)
+					else if (block === false && this.opts.linebreaks)
 					{
-						range.setEnd( textNode, end - charCount );
-						break;
+						this.indent.increaseText();
+					}
+					else
+					{
+						this.indent.increaseBlocks();
 					}
 
-					charCount = endCharCount;
-				}
-			}
-
-			var sel = this.getSelection();
-			sel.removeAllRanges();
-			sel.addRange( range );
-		},
-		getTextNodesIn: function (node)
-		{
-			var textNodes = [];
-
-			if (node.nodeType == 3) textNodes.push(node);
-			else
-			{
-				var children = node.childNodes;
-				for (var i = 0, len = children.length; i < len; ++i)
+					this.selection.restore();
+					this.code.sync();
+				},
+				increaseLists: function()
 				{
-					textNodes.push.apply(textNodes, this.getTextNodesIn(children[i]));
-				}
-			}
-
-			return textNodes;
-		},
+					document.execCommand('indent');
 
-		// GET ELEMENTS
-		getCurrent: function()
-		{
-			var el = false;
-			var sel = this.getSelection();
+					this.indent.fixEmptyIndent();
+					this.clean.normalizeLists();
+					this.clean.clearUnverified();
+				},
+				increaseBlocks: function()
+				{
+					$.each(this.selection.getBlocks(), $.proxy(function(i, elem)
+					{
+						if (elem.tagName === 'TD' || elem.tagName === 'TH') return;
 
-			if (sel && sel.rangeCount > 0) el = sel.getRangeAt(0).startContainer;
+						var $el = this.utils.getAlignmentElement(elem);
 
-			return this.isParentRedactor(el);
-		},
-		getParent: function(elem)
-		{
-			elem = elem || this.getCurrent();
-			if (elem) return this.isParentRedactor( $( elem ).parent()[0] );
-			else return false;
-		},
-		getBlock: function(node)
-		{
-			if (typeof node === 'undefined') node = this.getCurrent();
+						var left = this.utils.normalize($el.css('margin-left')) + this.opts.indentValue;
+						$el.css('margin-left', left + 'px');
 
-			while (node)
-			{
-				if (this.nodeTestBlocks(node))
+					}, this));
+				},
+				increaseText: function()
 				{
-					if ($(node).hasClass('redactor_editor')) return false;
-					return node;
-				}
+					var wrapper = this.selection.wrap('div');
+					$(wrapper).attr('data-tagblock', 'redactor');
+					$(wrapper).css('margin-left', this.opts.indentValue + 'px');
+				},
+				decrease: function()
+				{
+					this.buffer.set();
+					this.selection.save();
 
-				node = node.parentNode;
-			}
+					var block = this.selection.getBlock();
+					if (block && block.tagName == 'LI')
+					{
+						this.indent.decreaseLists();
+					}
+					else
+					{
+						this.indent.decreaseBlocks();
+					}
 
-			return false;
-		},
-		getBlocks: function(nodes)
-		{
-			var newnodes = [];
-			if (typeof nodes == 'undefined')
-			{
-				var range = this.getRange();
-				if (range && range.collapsed === true) return [this.getBlock()];
-				var nodes = this.getNodes(range);
-			}
+					this.selection.restore();
+					this.code.sync();
+				},
+				decreaseLists: function()
+				{
+					document.execCommand('outdent');
 
-			$.each(nodes, $.proxy(function(i,node)
-			{
-				if (this.opts.iframe === false && $(node).parents('div.redactor_editor').size() == 0) return false;
-				if (this.nodeTestBlocks(node)) newnodes.push(node);
+					var current = this.selection.getCurrent();
+					var $item = $(current).closest('li', this.$editor[0]);
 
-			}, this));
+					this.indent.fixEmptyIndent();
 
-			if (newnodes.length === 0) newnodes = [this.getBlock()];
+					if (!this.opts.linebreaks && $item.length === 0)
+					{
+						document.execCommand('formatblock', false, 'p');
+						this.$editor.find('ul, ol, blockquote, p').each($.proxy(this.utils.removeEmpty, this));
+					}
 
-			return newnodes;
-		},
-		nodeTestBlocks: function(node)
-		{
-			return node.nodeType == 1 && this.rTestBlock.test(node.nodeName);
-		},
-		tagTestBlock: function(tag)
-		{
-			return this.rTestBlock.test(tag);
-		},
-		getNodes: function(range, tag)
-		{
-			if (typeof range == 'undefined' || range == false) var range = this.getRange();
-			if (range && range.collapsed === true)
-			{
-				if (typeof tag === 'undefined' && this.tagTestBlock(tag))
-				{
-					var block = this.getBlock();
-					if (block.tagName == tag) return [block];
-					else return [];
-				}
-				else
+					this.clean.clearUnverified();
+				},
+				decreaseBlocks: function()
 				{
-					return [this.getCurrent()];
-				}
-			}
-
-			var nodes = [], finalnodes = [];
-
-			var sel = this.document.getSelection();
-			if (!sel.isCollapsed) nodes = this.getRangeSelectedNodes(sel.getRangeAt(0));
+					$.each(this.selection.getBlocks(), $.proxy(function(i, elem)
+					{
+						var $el = this.utils.getAlignmentElement(elem);
+						var left = this.utils.normalize($el.css('margin-left')) - this.opts.indentValue;
 
-			$.each(nodes, $.proxy(function(i,node)
-			{
-				if (this.opts.iframe === false && $(node).parents('div.redactor_editor').size() == 0) return false;
+						if (left <= 0)
+						{
+							if (this.opts.linebreaks && typeof($el.data('tagblock')) !== 'undefined')
+							{
+								$el.replaceWith($el.html() + '<br />');
+							}
+							else
+							{
+								$el.css('margin-left', '');
+								this.utils.removeEmptyAttr($el, 'style');
+							}
+						}
+						else
+						{
+							$el.css('margin-left', left + 'px');
+						}
 
-				if (typeof tag === 'undefined')
+					}, this));
+				},
+				fixEmptyIndent: function()
 				{
-					if ($.trim(node.textContent) != '')
+					var block = this.selection.getBlock();
+
+					if (this.range.collapsed && block && block.tagName == 'LI' && this.utils.isEmpty($(block).text()))
 					{
-						finalnodes.push(node);
+						var $block = $(block);
+						$block.find('span').not('.redactor-selection-marker').contents().unwrap();
+						$block.append('<br>');
 					}
 				}
-				else if (node.tagName == tag)
+			};
+		},
+		inline: function()
+		{
+			return {
+				formatting: function(name)
 				{
-					finalnodes.push(node);
-				}
+					var type, value;
 
-			}, this));
+					if (typeof this.formatting[name].style != 'undefined') type = 'style';
+					else if (typeof this.formatting[name]['class'] != 'undefined') type = 'class';
 
-			if (finalnodes.length == 0)
-			{
-				if (typeof tag === 'undefined' && this.tagTestBlock(tag))
-				{
-					var block = this.getBlock();
-					if (block.tagName == tag) return finalnodes.push(block);
-					else return [];
-				}
-				else
-				{
-					finalnodes.push(this.getCurrent());
-				}
-			}
+					if (type) value = this.formatting[name][type];
 
-			// last element filtering
-			var last = finalnodes[finalnodes.length-1];
-			if (this.nodeTestBlocks(last))
-			{
-				finalnodes = finalnodes.slice(0, -1);
-			}
+					this.inline.format(this.formatting[name].tag, type, value);
 
-			return finalnodes;
-		},
-		getElement: function(node)
-		{
-			if (!node) node = this.getCurrent();
-			while (node)
-			{
-				if (node.nodeType == 1)
+				},
+				format: function(tag, type, value)
 				{
-					if ($(node).hasClass('redactor_editor')) return false;
-					return node;
-				}
+					var current = this.selection.getCurrent();
+					if (current && current.tagName === 'TR') return;
 
-				node = node.parentNode;
-			}
+					// Stop formatting pre and headers
+					if (this.utils.isCurrentOrParent('PRE') || this.utils.isCurrentOrParentHeader()) return;
 
-			return false;
-		},
-		getRangeSelectedNodes: function(range)
-		{
-			range = range || this.getRange();
-			var node = range.startContainer;
-			var endNode = range.endContainer;
+					var tags = ['b', 'bold', 'i', 'italic', 'underline', 'strikethrough', 'deleted', 'superscript', 'subscript'];
+					var replaced = ['strong', 'strong', 'em', 'em', 'u', 'del', 'del', 'sup', 'sub'];
 
-			if (node == endNode) return [node];
+					for (var i = 0; i < tags.length; i++)
+					{
+						if (tag == tags[i]) tag = replaced[i];
+					}
 
-			var rangeNodes = [];
-			while (node && node != endNode)
-			{
-				rangeNodes.push(node = this.nextNode(node));
-			}
 
-			node = range.startContainer;
-			while (node && node != range.commonAncestorContainer)
-			{
-				rangeNodes.unshift(node);
-				node = node.parentNode;
-			}
+					if (this.opts.allowedTags)
+					{
+						if ($.inArray(tag, this.opts.allowedTags) == -1) return;
+					}
+					else
+					{
+						if ($.inArray(tag, this.opts.deniedTags) !== -1) return;
+					}
 
-			return rangeNodes;
-		},
-		nextNode: function(node)
-		{
-			if (node.hasChildNodes()) return node.firstChild;
-			else
-			{
-				while (node && !node.nextSibling)
-				{
-					node = node.parentNode;
-				}
+					this.inline.type = type || false;
+					this.inline.value = value || false;
 
-				if (!node) return null;
-				return node.nextSibling;
-			}
-		},
+					this.buffer.set();
 
-		// GET SELECTION HTML OR TEXT
-		getSelectionText: function()
-		{
-			return this.getSelection().toString();
-		},
-		getSelectionHtml: function()
-		{
-			var html = '';
-
-			var sel = this.getSelection();
-			if (sel.rangeCount)
-			{
-				var container = this.document.createElement( "div" );
-				var len = sel.rangeCount;
-				for (var i = 0; i < len; ++i)
-				{
-					container.appendChild(sel.getRangeAt(i).cloneContents());
-				}
-
-				html = container.innerHTML;
-			}
-
-			return this.syncClean(html);
-		},
-
-		// SAVE & RESTORE
-		selectionSave: function()
-		{
-			if (!this.isFocused()) this.$editor.focus();
-
-			if (!this.opts.rangy)
-			{
-				this.selectionCreateMarker(this.getRange());
-			}
-			// rangy
-			else
-			{
-				this.savedSel = rangy.saveSelection();
-			}
-		},
-		selectionCreateMarker: function(range, remove)
-		{
-			if (!range) return;
-
-			var node1 = $('<span id="selection-marker-1" class="redactor-selection-marker">' + this.opts.invisibleSpace + '</span>', this.document)[0];
-			var node2 = $('<span id="selection-marker-2" class="redactor-selection-marker">' + this.opts.invisibleSpace + '</span>', this.document)[0];
-
-			if (range.collapsed === true)
-			{
-				this.selectionSetMarker(range, node1, true);
-			}
-			else
-			{
-				this.selectionSetMarker(range, node1, true);
-				this.selectionSetMarker(range, node2, false);
-			}
-
-			this.savedSel = this.$editor.html();
-
-			this.selectionRestore(false, false);
-		},
-		selectionSetMarker: function(range, node, type)
-		{
-			var boundaryRange = range.cloneRange();
-
-			boundaryRange.collapse(type);
-
-			boundaryRange.insertNode(node);
-			boundaryRange.detach();
-		},
-		selectionRestore: function(replace, remove)
-		{
-			if (!this.opts.rangy)
-			{
-				if (replace === true && this.savedSel)
-				{
-					this.$editor.html(this.savedSel);
-				}
-
-				var node1 = this.$editor.find('span#selection-marker-1');
-				var node2 = this.$editor.find('span#selection-marker-2');
-
-				if (this.browser('mozilla'))
-				{
-					this.$editor.focus();
-				}
-				else if (!this.isFocused())
-				{
-					this.$editor.focus();
-				}
+					if (!this.utils.browser('msie') && !this.opts.linebreaks)
+					{
+						this.$editor.focus();
+					}
 
-				if (node1.length != 0 && node2.length != 0)
-				{
-					this.selectionSet(node1[0], 0, node2[0], 0);
-				}
-				else if (node1.length != 0)
-				{
-					this.selectionSet(node1[0], 0, null, 0);
-				}
+					this.selection.get();
 
-				if (remove !== false)
-				{
-					this.selectionRemoveMarkers();
-					this.savedSel = false;
-				}
-			}
-			// rangy
-			else
-			{
-				rangy.restoreSelection(this.savedSel);
-			}
-		},
-		selectionRemoveMarkers: function(type)
-		{
-			if (!this.opts.rangy)
-			{
-				$.each(this.$editor.find('span.redactor-selection-marker'), function()
-				{
-					var html = $.trim($(this).html().replace(/[^\u0000-\u1C7F]/g, ''));
-					if (html == '')
+					if (this.range.collapsed)
 					{
-						$(this).remove();
+						this.inline.formatCollapsed(tag);
 					}
 					else
 					{
-						$(this).removeAttr('class').removeAttr('id');
+						this.inline.formatMultiple(tag);
 					}
-				});
-			}
-			// rangy
-			else
-			{
-				rangy.removeMarkers(this.savedSel);
-			}
-		},
+				},
+				formatCollapsed: function(tag)
+				{
+					var current = this.selection.getCurrent();
+					var $parent = $(current).closest(tag + '[data-redactor-tag=' + tag + ']', this.$editor[0]);
 
-		// TABLE
-		tableShow: function()
-		{
-			this.selectionSave();
+					// inline there is
+					if ($parent.length !== 0 && (this.inline.type != 'style' && $parent[0].tagName != 'SPAN'))
+					{
+						// remove empty
+						if (this.utils.isEmpty($parent.text()))
+						{
+							this.caret.setAfter($parent[0]);
 
-			this.modalInit(this.opts.curLang.table, this.opts.modal_table, 300, $.proxy(function()
-			{
-				$('#redactor_insert_table_btn').click($.proxy(this.tableInsert, this));
+							$parent.remove();
+							this.code.sync();
+						}
+						else if (this.utils.isEndOfElement($parent))
+						{
+							this.caret.setAfter($parent[0]);
+						}
 
-				setTimeout(function()
-				{
-					$('#redactor_table_rows').focus();
+						return;
+					}
 
-				}, 200);
+					// create empty inline
+					var node = $('<' + tag + '>').attr('data-verified', 'redactor').attr('data-redactor-tag', tag);
+					node.html(this.opts.invisibleSpace);
 
-			}, this));
-		},
-		tableInsert: function()
-		{
-			var rows = $('#redactor_table_rows').val(),
-				columns = $('#redactor_table_columns').val(),
-				$table_box = $('<div></div>'),
-				tableId = Math.floor(Math.random() * 99999),
-				$table = $('<table id="table' + tableId + '"><tbody></tbody></table>'),
-				i, $row, z, $column;
+					node = this.inline.setFormat(node);
 
-			for (i = 0; i < rows; i++)
-			{
-				$row = $('<tr></tr>');
+					var node = this.insert.node(node);
+					this.caret.setEnd(node);
 
-				for (z = 0; z < columns; z++)
+					this.code.sync();
+				},
+				formatMultiple: function(tag)
 				{
-					$column = $('<td>' + this.opts.invisibleSpace + '</td>');
+					this.inline.formatConvert(tag);
 
-					// set the focus to the first td
-					if (i === 0 && z === 0) $column.append('<span id="selection-marker-1">' + this.opts.invisibleSpace + '</span>');
+					this.selection.save();
+					document.execCommand('strikethrough');
 
-					$($row).append($column);
-				}
+					this.$editor.find('strike').each($.proxy(function(i,s)
+					{
+						var $el = $(s);
 
-				$table.append($row);
-			}
+						this.inline.formatRemoveSameChildren($el, tag);
 
-			$table_box.append($table);
-			var html = $table_box.html();
+						var $span;
+						if (this.inline.type)
+						{
+							$span = $('<span>').attr('data-redactor-tag', tag).attr('data-verified', 'redactor');
+							$span = this.inline.setFormat($span);
+						}
+						else
+						{
+							$span = $('<' + tag + '>').attr('data-redactor-tag', tag).attr('data-verified', 'redactor');
+						}
 
-			this.modalClose();
-			this.selectionRestore();
+						$el.replaceWith($span.html($el.contents()));
+						var $parent = $span.parent();
 
-			var current = this.getBlock() || this.getCurrent();
+						// remove U tag if selected link + node
+						if ($span[0].tagName === 'A' && $parent && $parent[0].tagName === 'U')
+						{
+							$span.parent().replaceWith($span);
+						}
 
-			if (current && current.tagName != 'BODY') $(current).after(html)
-			else this.insertHtmlAdvanced(html, false);
+						if (tag == 'span')
+						{
+							if ($parent && $parent[0].tagName === 'SPAN' && this.inline.type === 'style')
+							{
+								var arr = this.inline.value.split(';');
 
-			this.selectionRestore();
+								for (var z = 0; z < arr.length; z++)
+								{
+									if (arr[z] === '') return;
+									var style = arr[z].split(':');
+									$parent.css(style[0], '');
 
-			var table = this.$editor.find('#table' + tableId);
-			this.buttonActiveObserver();
+									if (this.utils.removeEmptyAttr($parent, 'style'))
+									{
+										$parent.replaceWith($parent.contents());
+									}
 
-			table.find('span#selection-marker-1').remove();
-			table.removeAttr('id');
+								}
 
-			this.sync();
-		},
-		tableDeleteTable: function()
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			if ($table.size() == 0) return false;
+							}
+						}
 
-			this.bufferSet();
+					}, this));
 
-			$table.remove();
-			this.sync();
-		},
-		tableDeleteRow: function()
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			if ($table.size() == 0) return false;
+					// clear text decoration
+					if (tag != 'span')
+					{
+						this.$editor.find(this.opts.inlineTags.join(', ')).each($.proxy(function(i,s)
+						{
+							var $el = $(s);
 
-			this.bufferSet();
 
-			var $current_tr =  $(this.getParent()).closest('tr');
-			var $focus_tr = $current_tr.prev().length ? $current_tr.prev() : $current_tr.next();
-			if ($focus_tr.length)
-			{
-				var $focus_td = $focus_tr.children('td' ).first();
-				if ($focus_td.length)
-				{
-					$focus_td.prepend('<span id="selection-marker-1">' + this.opts.invisibleSpace + '</span>');
-				}
-			}
+							if (s.tagName === 'U' && s.attributes.length === 0)
+							{
+								$el.replaceWith($el.contents());
+								return;
+							}
 
-			$current_tr.remove();
-			this.selectionRestore();
-			this.sync();
-		},
-		tableDeleteColumn: function()
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			if ($table.size() == 0) return false;
+							var property = $el.css('text-decoration');
+							if (property === 'line-through')
+							{
+								$el.css('text-decoration', '');
+								this.utils.removeEmptyAttr($el, 'style');
+							}
+						}, this));
+					}
 
-			this.bufferSet();
+					if (tag != 'del')
+					{
+						var _this = this;
+						this.$editor.find('inline').each(function(i,s)
+						{
+							_this.utils.replaceToTag(s, 'del');
+						});
+					}
 
-			var $current_td =  $(this.getParent()).closest('td');
-			var index = $current_td.get(0).cellIndex;
+					this.selection.restore();
+					this.code.sync();
 
-			// Set the focus correctly
-			$table.find('tr').each($.proxy(function(i, elem)
-			{
-				var focusIndex = index - 1 < 0 ? index + 1 : index - 1;
-				if (i === 0)
+				},
+				formatRemoveSameChildren: function($el, tag)
 				{
-					$(elem).find('td').eq(focusIndex).prepend('<span id="selection-marker-1">' + this.opts.invisibleSpace + '</span>');
-				}
+					var self = this;
+					$el.children(tag).each(function()
+					{
+						var $child = $(this);
 
-				$(elem).find('td').eq(index).remove();
+						if (!$child.hasClass('redactor-selection-marker'))
+						{
+							if (self.inline.type == 'style')
+							{
+								var arr = self.inline.value.split(';');
 
-			}, this));
+								for (var z = 0; z < arr.length; z++)
+								{
+									if (arr[z] === '') return;
 
-			this.selectionRestore();
-			this.sync();
-		},
-		tableAddHead: function()
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			if ($table.size() == 0) return false;
+									var style = arr[z].split(':');
+									$child.css(style[0], '');
 
-			this.bufferSet();
+									if (self.utils.removeEmptyAttr($child , 'style'))
+									{
+										$child.replaceWith($child.contents());
+									}
 
-			if ($table.find('thead').size() !== 0) this.tableDeleteHead();
-			else
-			{
-				var tr = $table.find('tr').first().clone();
-				tr.find('td').html(this.opts.invisibleSpace);
-				$thead = $('<thead></thead>');
-				$thead.append(tr);
-				$table.prepend($thead);
+								}
+							}
+							else
+							{
+								$child.contents().unwrap();
+							}
+						}
 
-				this.sync();
-			}
-		},
-		tableDeleteHead: function()
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			var $thead = $table.find('thead');
+					});
+				},
+				formatConvert: function(tag)
+				{
+					this.selection.save();
 
-			if ($thead.size() == 0) return false;
+					var find = '';
+					if (this.inline.type == 'class') find = '[data-redactor-class=' + this.inline.value + ']';
+					else if (this.inline.type == 'style')
+					{
+						find = '[data-redactor-style="' + this.inline.value + '"]';
+					}
 
-			this.bufferSet();
+					var self = this;
+					if (tag != 'del')
+					{
+						this.$editor.find('del').each(function(i,s)
+						{
+							self.utils.replaceToTag(s, 'inline');
+						});
+					}
 
-			$thead.remove();
-			this.sync();
-		},
-		tableAddRowAbove: function()
-		{
-			this.tableAddRow('before');
-		},
-		tableAddRowBelow: function()
-		{
-			this.tableAddRow('after');
-		},
-		tableAddColumnLeft: function()
-		{
-			this.tableAddColumn('before');
-		},
-		tableAddColumnRight: function()
-		{
-			this.tableAddColumn('after');
-		},
-		tableAddRow: function(type)
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			if ($table.size() == 0) return false;
+					if (tag != 'span')
+					{
+						this.$editor.find(tag).each(function()
+						{
+							var $el = $(this);
+							$el.replaceWith($('<strike />').html($el.contents()));
 
-			this.bufferSet();
+						});
+					}
 
-			var $current_tr = $(this.getParent()).closest('tr');
-			var new_tr = $current_tr.clone();
-			new_tr.find('td').html(this.opts.invisibleSpace);
+					this.$editor.find('[data-redactor-tag="' + tag + '"]' + find).each(function()
+					{
+						if (find === '' && tag == 'span' && this.tagName.toLowerCase() == tag) return;
 
-			if (type === 'after') $current_tr.after(new_tr);
-			else $current_tr.before(new_tr);
+						var $el = $(this);
+						$el.replaceWith($('<strike />').html($el.contents()));
 
-			this.sync();
-		},
-		tableAddColumn: function (type)
-		{
-			var $table = $(this.getParent()).closest('table');
-			if (!this.isParentRedactor($table)) return false;
-			if ($table.size() == 0) return false;
+					});
 
-			this.bufferSet();
+					this.selection.restore();
+				},
+				setFormat: function(node)
+				{
+					switch (this.inline.type)
+					{
+						case 'class':
 
-			var index = 0;
+							if (node.hasClass(this.inline.value))
+							{
+								node.removeClass(this.inline.value);
+								node.removeAttr('data-redactor-class');
+							}
+							else
+							{
+								node.addClass(this.inline.value);
+								node.attr('data-redactor-class', this.inline.value);
+							}
 
-			var $current_tr = $(this.getParent()).closest('tr');
-			var $current_td =  $(this.getParent()).closest('td');
 
-			$current_tr.find('td').each($.proxy(function(i, elem)
-			{
-				if ($(elem)[0] === $current_td[0]) index = i;
+						break;
+						case 'style':
 
-			}, this));
+							node[0].style.cssText = this.inline.value;
+							node.attr('data-redactor-style', this.inline.value);
 
-			$table.find('tr').each($.proxy(function(i, elem)
-			{
-				var $current = $(elem).find('td').eq(index);
+						break;
+					}
 
-				var td = $current.clone();
-				td.html(this.opts.invisibleSpace);
+					return node;
+				},
+				removeStyle: function()
+				{
+					this.buffer.set();
+					var current = this.selection.getCurrent();
+					var nodes = this.selection.getInlines();
 
-				type === 'after' ? $current.after(td) : $current.before(td);
+					this.selection.save();
 
-			}, this));
+					if (current && current.tagName === 'SPAN')
+					{
+						var $s = $(current);
 
-			this.sync();
-		},
+						$s.removeAttr('style');
+						if ($s[0].attributes.length === 0)
+						{
+							$s.replaceWith($s.contents());
+						}
+					}
 
-		// VIDEO
-		videoShow: function()
-		{
-			this.selectionSave();
+					$.each(nodes, $.proxy(function(i,s)
+					{
+						var $s = $(s);
+						if ($.inArray(s.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$s.hasClass('redactor-selection-marker'))
+						{
+							$s.removeAttr('style');
+							if ($s[0].attributes.length === 0)
+							{
+								$s.replaceWith($s.contents());
+							}
+						}
+					}, this));
 
-			this.modalInit(this.opts.curLang.video, this.opts.modal_video, 600, $.proxy(function()
-			{
-				$('#redactor_insert_video_btn').click($.proxy(this.videoInsert, this));
+					this.selection.restore();
+					this.code.sync();
 
-				setTimeout(function()
+				},
+				removeStyleRule: function(name)
 				{
-					$('#redactor_insert_video_area').focus();
+					this.buffer.set();
+					var parent = this.selection.getParent();
+					var nodes = this.selection.getInlines();
 
-				}, 200);
+					this.selection.save();
 
-			}, this));
-		},
-		videoInsert: function ()
-		{
-			var data = $('#redactor_insert_video_area').val();
-			data = this.cleanStripTags(data);
+					if (parent && parent.tagName === 'SPAN')
+					{
+						var $s = $(parent);
+
+						$s.css(name, '');
+						this.utils.removeEmptyAttr($s, 'style');
+						if ($s[0].attributes.length === 0)
+						{
+							$s.replaceWith($s.contents());
+						}
+					}
+
+					$.each(nodes, $.proxy(function(i,s)
+					{
+						var $s = $(s);
+						if ($.inArray(s.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$s.hasClass('redactor-selection-marker'))
+						{
+							$s.css(name, '');
+							this.utils.removeEmptyAttr($s, 'style');
+							if ($s[0].attributes.length === 0)
+							{
+								$s.replaceWith($s.contents());
+							}
+						}
+					}, this));
 
-			this.selectionRestore();
+					this.selection.restore();
+					this.code.sync();
+				},
+				removeFormat: function()
+				{
+					this.buffer.set();
+					var current = this.selection.getCurrent();
 
-			var current = this.getBlock() || this.getCurrent();
+					this.selection.save();
 
-			if (current) $(current).after(data)
-			else this.insertHtmlAdvanced(data, false);
+					document.execCommand('removeFormat');
 
-			this.sync();
-			this.modalClose();
-		},
+					if (current && current.tagName === 'SPAN')
+					{
+						$(current).replaceWith($(current).contents());
+					}
 
-		// LINK
-		linkShow: function()
-		{
-			this.selectionSave();
 
-			var callback = $.proxy(function()
-			{
-				this.insert_link_node = false;
+					$.each(this.selection.getNodes(), $.proxy(function(i,s)
+					{
+						var $s = $(s);
+						if ($.inArray(s.tagName.toLowerCase(), this.opts.inlineTags) != -1 && !$s.hasClass('redactor-selection-marker'))
+						{
+							$s.replaceWith($s.contents());
+						}
+					}, this));
 
-				var sel = this.getSelection();
-				var url = '', text = '', target = '';
+					this.selection.restore();
+					this.code.sync();
 
-				var elem = this.getParent();
-				var par = $(elem).parent().get(0);
-				if (par && par.tagName === 'A')
+				},
+				toggleClass: function(className)
+				{
+					this.inline.format('span', 'class', className);
+				},
+				toggleStyle: function(value)
 				{
-					elem = par;
+					this.inline.format('span', 'style', value);
 				}
-
-				if (elem && elem.tagName === 'A')
+			};
+		},
+		insert: function()
+		{
+			return {
+				set: function(html, clean)
 				{
-					url = elem.href;
-					text = $(elem).text();
-					target = elem.target;
+					this.placeholder.remove();
 
-					this.insert_link_node = elem;
-				}
-				else text = sel.toString();
+					html = this.clean.setVerified(html);
 
-				$('.redactor_link_text').val(text);
+					if (typeof clean == 'undefined')
+					{
+						html = this.clean.onPaste(html, false);
+					}
 
-				var thref = self.location.href.replace(/\/$/i, '');
-				var turl = url.replace(thref, '');
+					this.$editor.html(html);
+					this.selection.remove();
+					this.focus.setEnd();
+					this.clean.normalizeLists();
+					this.code.sync();
+					this.observe.load();
 
-				// remove host from href
-				if (this.opts.linkProtocol === false)
+					if (typeof clean == 'undefined')
+					{
+						setTimeout($.proxy(this.clean.clearUnverified, this), 10);
+					}
+				},
+				text: function(text)
 				{
-					var re = new RegExp('^(http|ftp|https)://' + self.location.host, 'i');
-					turl = turl.replace(re, '');
-				}
+					this.placeholder.remove();
 
-				var tabs = $('#redactor_tabs').find('a');
+					text = text.toString();
+					text = $.trim(text);
+					text = this.clean.getPlainText(text, false);
 
-				if (this.opts.linkEmail === false) tabs.eq(1).remove();
-				if (this.opts.linkAnchor === false) tabs.eq(2).remove();
-				if (this.opts.linkEmail === false && this.opts.linkAnchor === false)
-				{
-					$('#redactor_tabs').remove();
-					$('#redactor_link_url').val(turl);
-				}
-				else
-				{
-					if (url.search('mailto:') === 0)
-					{
-						this.modalSetTab.call(this, 2);
+					this.$editor.focus();
 
-						$('#redactor_tab_selected').val(2);
-						$('#redactor_link_mailto').val(url.replace('mailto:', ''));
-					}
-					else if (turl.search(/^#/gi) === 0)
+					if (this.utils.browser('msie'))
 					{
-						this.modalSetTab.call(this, 3);
-
-						$('#redactor_tab_selected').val(3);
-						$('#redactor_link_anchor').val(turl.replace(/^#/gi, '' ));
+						this.insert.htmlIe(text);
 					}
 					else
 					{
-						$('#redactor_link_url').val(turl);
-					}
-				}
-
-				if (target === '_blank') $('#redactor_link_blank').prop('checked', true);
+						this.selection.get();
 
-				$('#redactor_insert_link_btn').click($.proxy(this.linkProcess, this));
-
-				setTimeout(function()
-				{
-					$('#redactor_link_url').focus();
+						this.range.deleteContents();
+						var el = document.createElement("div");
+						el.innerHTML = text;
+						var frag = document.createDocumentFragment(), node, lastNode;
+						while ((node = el.firstChild))
+						{
+							lastNode = frag.appendChild(node);
+						}
 
-				}, 200);
+						this.range.insertNode(frag);
 
-			}, this);
+						if (lastNode)
+						{
+							var range = this.range.cloneRange();
+							range.setStartAfter(lastNode);
+							range.collapse(true);
+							this.sel.removeAllRanges();
+							this.sel.addRange(range);
+						}
+					}
 
-			this.modalInit(this.opts.curLang.link, this.opts.modal_link, 460, callback);
+					this.code.sync();
+					this.clean.clearUnverified();
+				},
+				htmlWithoutClean: function(html)
+				{
+					this.insert.html(html, false);
+				},
+				html: function(html, clean)
+				{
+					this.placeholder.remove();
 
-		},
-		linkProcess: function()
-		{
-			var tab_selected = $('#redactor_tab_selected').val();
-			var link = '', text = '', target = '', targetBlank = '';
+					if (typeof clean == 'undefined') clean = true;
 
-			// url
-			if (tab_selected === '1')
-			{
-				link = $('#redactor_link_url').val();
-				text = $('#redactor_link_url_text').val();
+					if (!this.opts.linebreaks)
+					{
+						this.$editor.focus();
+					}
 
-				if ($('#redactor_link_blank').prop('checked'))
-				{
-					target = ' target="_blank"';
-					targetBlank = '_blank';
-				}
+					html = this.clean.setVerified(html);
 
-				// test url (add protocol)
-				var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}';
-				var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');
-				var re2 = new RegExp('^' + pattern, 'i');
+					if (clean)
+					{
+						html = this.clean.onPaste(html);
+					}
 
-				if (link.search(re) == -1 && link.search(re2) == 0 && this.opts.linkProtocol)
-				{
-					link = this.opts.linkProtocol + link;
-				}
-			}
-			// mailto
-			else if (tab_selected === '2')
-			{
-				link = 'mailto:' + $('#redactor_link_mailto').val();
-				text = $('#redactor_link_mailto_text').val();
-			}
-			// anchor
-			else if (tab_selected === '3')
-			{
-				link = '#' + $('#redactor_link_anchor').val();
-				text = $('#redactor_link_anchor_text').val();
-			}
+					if (this.utils.browser('msie'))
+					{
+						this.insert.htmlIe(html);
+					}
+					else
+					{
+						if (this.clean.singleLine) this.insert.execHtml(html);
+						else document.execCommand('insertHTML', false, html);
 
-			text = text.replace(/<|>/g, '');
-			this.linkInsert('<a href="' + link + '"' + target + '>' + text + '</a>', $.trim(text), link, targetBlank);
+						this.insert.htmlFixMozilla();
 
-		},
-		linkInsert: function (a, text, link, target)
-		{
-			this.selectionRestore();
+					}
 
-			if (text !== '')
-			{
-				if (this.insert_link_node)
-				{
-					this.bufferSet();
+					this.clean.normalizeLists();
 
-					$(this.insert_link_node).text(text).attr('href', link);
+					// remove empty paragraphs finaly
+					if (!this.opts.linebreaks)
+					{
+						this.$editor.find('p').each($.proxy(this.utils.removeEmpty, this));
+					}
 
-					if (target !== '') $(this.insert_link_node).attr('target', target);
-					else $(this.insert_link_node).removeAttr('target');
+					this.code.sync();
+					this.observe.load();
 
-					this.sync();
-				}
-				else
+					if (clean)
+					{
+						this.clean.clearUnverified();
+					}
+
+				},
+				htmlFixMozilla: function()
 				{
-					var $a = $(a).addClass('redactor-added-link');
-					this.exec('inserthtml', this.outerHtml($a), false);
-					this.$editor.find('a.redactor-added-link').removeAttr('style').removeClass('redactor-added-link').each(function()
+					// FF inserts empty p when content was selected dblclick
+					if (!this.utils.browser('mozilla')) return;
+
+					var $next = $(this.selection.getBlock()).next();
+					if ($next.length > 0 && $next[0].tagName == 'P' && $next.html() === '')
 					{
-						if (this.className == '') $(this).removeAttr('class');
-					});
-					this.sync();
-				}
-			}
+						$next.remove();
+					}
 
-			// link tooltip
-			setTimeout($.proxy(function()
-			{
+				},
+				htmlIe: function(html)
+				{
+					if (this.utils.isIe11())
+					{
+						var parent = this.utils.isCurrentOrParent('P');
+						var $html = $('<div>').append(html);
+						var blocksMatch = $html.contents().is('p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article');
 
-				if (this.opts.observeLinks) this.observeLinks();
+						if (parent && blocksMatch) this.insert.ie11FixInserting(parent, html);
+						else this.insert.ie11PasteFrag(html);
 
-			}, this), 5);
+						return;
+					}
 
-			this.modalClose();
-		},
+					document.selection.createRange().pasteHTML(html);
 
-		// FILE
-		fileShow: function ()
-		{
+				},
+				execHtml: function(html)
+				{
+					html = this.clean.setVerified(html);
 
-			this.selectionSave();
+					this.selection.get();
 
-			var callback = $.proxy(function()
-			{
-				var sel = this.getSelection();
+					this.range.deleteContents();
+
+					var el = document.createElement('div');
+					el.innerHTML = html;
+
+					var frag = document.createDocumentFragment(), node, lastNode;
+					while ((node = el.firstChild))
+					{
+						lastNode = frag.appendChild(node);
+					}
 
-				var text = '';
-				if (this.oldIE()) text = sel.text;
-				else text = sel.toString();
+					this.range.insertNode(frag);
 
-				$('#redactor_filename').val(text);
+					this.range.collapse(true);
+					this.caret.setAfter(lastNode);
 
-				// dragupload
-				if (!this.isMobile())
+				},
+				node: function(node, deleteContents)
 				{
-					this.draguploadInit('#redactor_file', {
-						url: this.opts.fileUpload,
-						uploadFields: this.opts.uploadFields,
-						success: $.proxy(this.fileCallback, this),
-						error: $.proxy( function(obj, json)
-						{
-							this.callback('fileUploadError', json);
+					node = node[0] || node;
 
-						}, this),
-						uploadParam: this.opts.fileUploadParam
-					});
-				}
+					var html = this.utils.getOuterHtml(node);
+					html = this.clean.setVerified(html);
 
-				this.uploadInit('redactor_file', {
-					auto: true,
-					url: this.opts.fileUpload,
-					success: $.proxy(this.fileCallback, this),
-					error: $.proxy(function(obj, json)
+					if (html.match(/</g) !== null)
 					{
-						this.callback('fileUploadError', json);
+						node = $(html)[0];
+					}
 
-					}, this)
-				});
+					this.selection.get();
+
+					if (deleteContents !== false)
+					{
+						this.range.deleteContents();
+					}
 
-			}, this);
+					this.range.insertNode(node);
+					this.range.collapse(false);
+					this.selection.addRange();
 
-			this.modalInit(this.opts.curLang.file, this.opts.modal_file, 500, callback);
-		},
-		fileCallback: function(json)
-		{
+					return node;
+				},
+				nodeToPoint: function(node, x, y)
+				{
+					node = node[0] || node;
 
-			this.selectionRestore();
+					this.selection.get();
 
-			if (json !== false)
-			{
+					var range;
+					if (document.caretPositionFromPoint)
+					{
+					    var pos = document.caretPositionFromPoint(x, y);
 
-				var text = $('#redactor_filename').val();
-				if (text === '') text = json.filename;
+					    this.range.setStart(pos.offsetNode, pos.offset);
+					    this.range.collapse(true);
+					    this.range.insertNode(node);
+					}
+					else if (document.caretRangeFromPoint)
+					{
+					    range = document.caretRangeFromPoint(x, y);
+					    range.insertNode(node);
+					}
+					else if (typeof document.body.createTextRange != "undefined")
+					{
+				        range = document.body.createTextRange();
+				        range.moveToPoint(x, y);
+				        var endRange = range.duplicate();
+				        endRange.moveToPoint(x, y);
+				        range.setEndPoint("EndToEnd", endRange);
+				        range.select();
+					}
+				},
+				nodeToCaretPositionFromPoint: function(e, node)
+				{
+					node = node[0] || node;
 
-				var link = '<a href="' + json.filelink + '" id="filelink-marker">' + text + '</a>';
+					var range;
+					var x = e.clientX, y = e.clientY;
+					if (document.caretPositionFromPoint)
+					{
+					    var pos = document.caretPositionFromPoint(x, y);
+					    var sel = document.getSelection();
+					    range = sel.getRangeAt(0);
+					    range.setStart(pos.offsetNode, pos.offset);
+					    range.collapse(true);
+					    range.insertNode(node);
+					}
+					else if (document.caretRangeFromPoint)
+					{
+					    range = document.caretRangeFromPoint(x, y);
+					    range.insertNode(node);
+					}
+					else if (typeof document.body.createTextRange != "undefined")
+					{
+				        range = document.body.createTextRange();
+				        range.moveToPoint(x, y);
+				        var endRange = range.duplicate();
+				        endRange.moveToPoint(x, y);
+				        range.setEndPoint("EndToEnd", endRange);
+				        range.select();
+					}
 
-				// chrome fix
-				if (this.browser('webkit') && !!this.window.chrome)
+				},
+				ie11FixInserting: function(parent, html)
 				{
-					link = link + '&nbsp;';
-				}
+					var node = document.createElement('span');
+					node.className = 'redactor-ie-paste';
+					this.insert.node(node);
 
-				this.execCommand('inserthtml', link, false);
+					var parHtml = $(parent).html();
 
-				var linkmarker = $(this.$editor.find('a#filelink-marker'));
-				if (linkmarker.size() != 0) linkmarker.removeAttr('id');
-				else linkmarker = false;
+					parHtml = '<p>' + parHtml.replace(/<span class="redactor-ie-paste"><\/span>/gi, '</p>' + html + '<p>') + '</p>';
+					parHtml = parHtml.replace(/<p><\/p>/gi, '');
+					$(parent).replaceWith(parHtml);
+				},
+				ie11PasteFrag: function(html)
+				{
+					this.selection.get();
+					this.range.deleteContents();
 
-				this.sync();
+					var el = document.createElement("div");
+					el.innerHTML = html;
 
-				// file upload callback
-				this.callback('fileUpload', linkmarker, json);
-			}
+					var frag = document.createDocumentFragment(), node, lastNode;
+					while ((node = el.firstChild))
+					{
+						lastNode = frag.appendChild(node);
+					}
 
-			this.modalClose();
+					this.range.insertNode(frag);
+					this.range.collapse(false);
+					this.selection.addRange();
+				}
+			};
 		},
-
-		// IMAGE
-		imageShow: function()
+		keydown: function()
 		{
-
-			this.selectionSave();
-
-			var callback = $.proxy(function()
-			{
-				// json
-				if (this.opts.imageGetJson)
+			return {
+				init: function(e)
 				{
-					$.getJSON(this.opts.imageGetJson, $.proxy(function(data)
-					{
-						var folders = {}, count = 0;
-
-						// folders
-						$.each(data, $.proxy(function(key, val)
-						{
-							if (typeof val.folder !== 'undefined')
-							{
-								count++;
-								folders[val.folder] = count;
-							}
-
-						}, this));
+					if (this.rtePaste) return;
 
-						var folderclass = false;
-						$.each(data, $.proxy(function(key, val)
-						{
-							// title
-							var thumbtitle = '';
-							if (typeof val.title !== 'undefined') thumbtitle = val.title;
+					var key = e.which;
+					var arrow = (key >= 37 && key <= 40);
 
-							var folderkey = 0;
-							if (!$.isEmptyObject(folders) && typeof val.folder !== 'undefined')
-							{
-								folderkey = folders[val.folder];
-								if (folderclass === false) folderclass = '.redactorfolder' + folderkey;
-							}
+					this.keydown.ctrl = e.ctrlKey || e.metaKey;
+					this.keydown.current = this.selection.getCurrent();
+					this.keydown.parent = this.selection.getParent();
+					this.keydown.block = this.selection.getBlock();
 
-							var img = $('<img src="' + val.thumb + '" class="redactorfolder redactorfolder' + folderkey + '" rel="' + val.image + '" title="' + thumbtitle + '" />');
-							$('#redactor_image_box').append(img);
-							$(img).click($.proxy(this.imageThumbClick, this));
+			        // detect tags
+					this.keydown.pre = this.utils.isTag(this.keydown.current, 'pre');
+					this.keydown.blockquote = this.utils.isTag(this.keydown.current, 'blockquote');
+					this.keydown.figcaption = this.utils.isTag(this.keydown.current, 'figcaption');
 
-						}, this));
+					// shortcuts setup
+					this.shortcuts.init(e, key);
 
-						// folders
-						if (!$.isEmptyObject(folders))
-						{
-							$('.redactorfolder').hide();
-							$(folderclass).show();
+					if (this.utils.isDesktop())
+					{
+						this.keydown.checkEvents(arrow, key);
+						this.keydown.setupBuffer(e, key);
+					}
 
-							var onchangeFunc = function(e)
-							{
-								$('.redactorfolder').hide();
-								$('.redactorfolder' + $(e.target).val()).show();
-							};
+					this.keydown.addArrowsEvent(arrow);
+					this.keydown.setupSelectAll(e, key);
 
-							var select = $('<select id="redactor_image_box_select">');
-							$.each( folders, function(k, v)
-							{
-								select.append( $('<option value="' + v + '">' + k + '</option>'));
-							});
+					// callback
+					var keydownStop = this.core.setCallback('keydown', e);
+					if (keydownStop === false)
+					{
+						e.preventDefault();
+						return false;
+					}
 
-							$('#redactor_image_box').before(select);
-							select.change(onchangeFunc);
+					// ie and ff exit from table
+					if (this.opts.enterKey && (this.utils.browser('msie') || this.utils.browser('mozilla')) && (key === this.keyCode.DOWN || key === this.keyCode.RIGHT))
+					{
+						var isEndOfTable = false;
+						var $table = false;
+						if (this.keydown.block && this.keydown.block.tagName === 'TD')
+						{
+							$table = $(this.keydown.block).closest('table', this.$editor[0]);
 						}
-					}, this));
-
-				}
-				else
-				{
-					$('#redactor_tabs').find('a').eq(1).remove();
-				}
 
-				if (this.opts.imageUpload || this.opts.s3)
-				{
-					// dragupload
-					if (!this.isMobile() && this.opts.s3 === false)
-					{
-						if ($('#redactor_file' ).length)
+						if ($table && $table.find('td').last()[0] === this.keydown.block)
 						{
-							this.draguploadInit('#redactor_file', {
-								url: this.opts.imageUpload,
-								uploadFields: this.opts.uploadFields,
-								success: $.proxy(this.imageCallback, this),
-								error: $.proxy(function(obj, json)
-								{
-									this.callback('imageUploadError', json);
+							isEndOfTable = true;
+						}
 
-								}, this),
-								uploadParam: this.opts.imageUploadParam
-							});
+						if (this.utils.isEndOfElement() && isEndOfTable)
+						{
+							var node = $(this.opts.emptyHtml);
+							$table.after(node);
+							this.caret.setStart(node);
 						}
 					}
 
-					if (this.opts.s3 === false)
-					{
-						// ajax upload
-						this.uploadInit('redactor_file', {
-							auto: true,
-							url: this.opts.imageUpload,
-							success: $.proxy(this.imageCallback, this),
-							error: $.proxy(function(obj, json)
-							{
-								this.callback('imageUploadError', json);
-
-							}, this)
-						});
-					}
-					// s3 upload
-					else
+					// down
+					if (this.opts.enterKey && key === this.keyCode.DOWN)
 					{
-						$('#redactor_file').on('change.redactor', $.proxy(this.s3handleFileSelect, this));
+						this.keydown.onArrowDown();
 					}
 
-				}
-				else
-				{
-					$('.redactor_tab').hide();
-					if (!this.opts.imageGetJson)
-					{
-						$('#redactor_tabs').remove();
-						$('#redactor_tab3').show();
-					}
-					else
+					// turn off enter key
+					if (!this.opts.enterKey && key === this.keyCode.ENTER)
 					{
-						var tabs = $('#redactor_tabs').find('a');
-						tabs.eq(0).remove();
-						tabs.eq(1).addClass('redactor_tabs_act');
-						$('#redactor_tab2').show();
+						e.preventDefault();
+						// remove selected
+						if (!this.range.collapsed) this.range.deleteContents();
+						return;
 					}
-				}
-
-				$('#redactor_upload_btn').click($.proxy(this.imageCallbackLink, this));
 
-				if (!this.opts.imageUpload && !this.opts.imageGetJson)
-				{
-					setTimeout(function()
+					// on enter
+					if (key == this.keyCode.ENTER && !e.shiftKey && !e.ctrlKey && !e.metaKey)
 					{
-						$('#redactor_file_link').focus();
+						var stop = this.core.setCallback('enter', e);
+						if (stop === false)
+						{
+							e.preventDefault();
+							return false;
+						}
 
-					}, 200);
-				}
+						if (this.keydown.blockquote && this.keydown.exitFromBlockquote(e) === true)
+						{
+							return false;
+						}
 
-			}, this);
+						var current, $next;
+						if (this.keydown.pre)
+						{
+							return this.keydown.insertNewLine(e);
+						}
+						else if (this.keydown.blockquote || this.keydown.figcaption)
+						{
+							current = this.selection.getCurrent();
+							$next = $(current).next();
 
-			this.modalInit(this.opts.curLang.image, this.opts.modal_image, 610, callback);
+							if ($next.length !== 0 && $next[0].tagName == 'BR')
+							{
+								return this.keydown.insertBreakLine(e);
+							}
+							else if (this.utils.isEndOfElement() && (current && current != 'SPAN'))
+							{
+								return this.keydown.insertDblBreakLine(e);
+							}
+							else
+							{
+								return this.keydown.insertBreakLine(e);
+							}
+						}
+						else if (this.opts.linebreaks && !this.keydown.block)
+						{
+							current = this.selection.getCurrent();
+							$next = $(this.keydown.current).next();
 
-		},
-		imageEdit: function(image)
-		{
-			var $el = image;
-			var parent = $el.parent().parent();
+							if ($next.length !== 0 && $next[0].tagName == 'BR')
+							{
+								return this.keydown.insertBreakLine(e);
+							}
+							else if (current !== false && $(current).hasClass('redactor-invisible-space'))
+							{
+								this.caret.setAfter(current);
+								$(current).contents().unwrap();
 
-			var callback = $.proxy(function()
-			{
-				$('#redactor_file_alt').val($el.attr('alt'));
-				$('#redactor_image_edit_src').attr('href', $el.attr('src'));
-				$('#redactor_form_image_align').val($el.css('float'));
+								return this.keydown.insertDblBreakLine(e);
+							}
+							else
+							{
+								if (this.utils.isEndOfEditor())
+								{
+									return this.keydown.insertDblBreakLine(e);
+								}
+								else if ($next.length === 0 && current === false && typeof $next.context != 'undefined')
+								{
+									return this.keydown.insertBreakLine(e);
+								}
 
-				if ($(parent).get(0).tagName === 'A')
-				{
-					$('#redactor_file_link').val($(parent).attr('href'));
+								return this.keydown.insertBreakLine(e);
+							}
 
-					if ($(parent).attr('target') == '_blank')
-					{
-						$('#redactor_link_blank').prop('checked', true);
-					}
-				}
+						}
+						else if (this.opts.linebreaks && this.keydown.block)
+						{
+							setTimeout($.proxy(this.keydown.replaceDivToBreakLine, this), 1);
+						}
+						// paragraphs
+						else if (!this.opts.linebreaks && this.keydown.block)
+						{
+							setTimeout($.proxy(this.keydown.replaceDivToParagraph, this), 1);
 
-				$('#redactor_image_delete_btn').click($.proxy(function()
-				{
-					this.imageRemove($el);
+							if (this.keydown.block.tagName === 'LI')
+							{
+								current = this.selection.getCurrent();
+								var $parent = $(current).closest('li', this.$editor[0]);
+								var $list = $parent.closest('ul,ol', this.$editor[0]);
 
-				}, this));
+								if ($parent.length !== 0 && this.utils.isEmpty($parent.html()) && $list.next().length === 0 && this.utils.isEmpty($list.find("li").last().html()))
+								{
+									$list.find("li").last().remove();
 
-				$('#redactorSaveBtn').click($.proxy(function()
-				{
-					this.imageSave($el);
+									var node = $(this.opts.emptyHtml);
+									$list.after(node);
+									this.caret.setStart(node);
 
-				}, this));
+									return false;
+								}
+							}
+						}
+						else if (!this.opts.linebreaks && !this.keydown.block)
+						{
+							return this.keydown.insertParagraph(e);
+						}
+					}
 
-			}, this);
+					// Shift+Enter or Ctrl+Enter
+					if (key === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey))
+					{
+						return this.keydown.onShiftEnter(e);
+					}
 
-			this.modalInit(this.opts.curLang.edit, this.opts.modal_image_edit, 380, callback);
 
-		},
-		imageRemove: function(el)
-		{
-			var parent = $(el).parent();
-			$(el).remove();
+					// tab or cmd + [
+					if (key === this.keyCode.TAB || e.metaKey && key === 221 || e.metaKey && key === 219)
+					{
+						return this.keydown.onTab(e, key);
+					}
 
-			if (parent.length && parent[0].tagName === 'P')
-			{
-				this.$editor.focus();
-				this.selectionStart(parent);
-			}
+					// image delete and backspace
+					if (key === this.keyCode.BACKSPACE || key === this.keyCode.DELETE)
+					{
+						var nodes = this.selection.getNodes();
 
-			// delete callback
-			this.callback('imageDelete', el);
+						if (nodes)
+						{
+							var len = nodes.length;
+							var last;
+							for (var i = 0; i < len; i++)
+							{
+								var children = $(nodes[i]).children('img');
+								if (children.length !== 0)
+								{
+									var self = this;
+									$.each(children, function(z,s)
+									{
+										var $s = $(s);
+										if ($s.css('float') != 'none') return;
 
-			this.modalClose();
-			this.sync();
-		},
-		imageSave: function(el)
-		{
-			var $el = $(el);
-			var parent = $el.parent();
+										// image delete callback
+										self.core.setCallback('imageDelete', s.src, $s);
+										last = s;
+									});
+								}
+								else if (nodes[i].tagName == 'IMG')
+								{
+									if (last != nodes[i])
+									{
+										// image delete callback
+										this.core.setCallback('imageDelete', nodes[i].src, $(nodes[i]));
+										last = nodes[i];
+									}
+								}
+							}
+						}
+					}
 
-			$el.attr('alt', $('#redactor_file_alt').val());
+					// backspace
+					if (key === this.keyCode.BACKSPACE)
+					{
+						// backspace as outdent
+						var block = this.selection.getBlock();
+						var indented = ($(block).css('margin-left') !== '0px');
+						if (block && indented && this.range.collapsed && this.utils.isStartOfElement())
+						{
+							this.indent.decrease();
+							e.preventDefault();
+							return;
+						}
 
-			var floating = $('#redactor_form_image_align').val();
+						// remove hr in FF
+						if (this.utils.browser('mozilla'))
+						{
+							var prev = this.selection.getPrev();
+							var prev2 = $(prev).prev()[0];
+							if (prev && prev.tagName === 'HR') $(prev).remove();
+							if (prev2 && prev2.tagName === 'HR') $(prev2).remove();
+						}
 
-			if (floating === 'left')
-			{
-				this.imageMargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';
-				$el.css({ 'float': 'left', 'margin': this.imageMargin });
-			}
-			else if (floating === 'right')
-			{
-				this.imageMargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + '';
-				$el.css({ 'float': 'right', 'margin': this.imageMargin });
-			}
-			else
-			{
-				this.imageMargin = '0px';
-				var imageBox = $el.closest('#redactor-image-box');
-				if (imageBox.size() != 0) imageBox.css({ 'float': '', 'margin': '' });
-				$el.css({ 'float': '', 'margin': '' });
-			}
+						this.keydown.removeInvisibleSpace();
+						this.keydown.removeEmptyListInTable(e);
+					}
 
-			// as link
-			var link = $.trim($('#redactor_file_link').val());
-			if (link !== '')
-			{
-				var target = false;
-				if ($('#redactor_link_blank').prop('checked'))
+					this.code.sync();
+				},
+				checkEvents: function(arrow, key)
 				{
-					target = true;
-				}
+					if (!arrow && (this.core.getEvent() == 'click' || this.core.getEvent() == 'arrow'))
+					{
+						this.core.addEvent(false);
 
-				if (parent.get(0).tagName !== 'A')
+						if (this.keydown.checkKeyEvents(key))
+						{
+							this.buffer.set();
+						}
+					}
+				},
+				checkKeyEvents: function(key)
 				{
-					var a = $('<a href="' + link + '">' + this.outerHtml(el) + '</a>');
+					var k = this.keyCode;
+					var keys = [k.BACKSPACE, k.DELETE, k.ENTER, k.ESC, k.TAB, k.CTRL, k.META, k.ALT, k.SHIFT];
 
-					if (target)
+					return ($.inArray(key, keys) == -1) ? true : false;
+
+				},
+				addArrowsEvent: function(arrow)
+				{
+					if (!arrow) return;
+
+					if ((this.core.getEvent() == 'click' || this.core.getEvent() == 'arrow'))
 					{
-						a.attr('target', '_blank');
+						this.core.addEvent(false);
+						return;
 					}
 
-					$el.replaceWith(a);
-				}
-				else
+				    this.core.addEvent('arrow');
+				},
+				setupBuffer: function(e, key)
 				{
-					parent.attr('href', link);
-					if (target)
+					if (this.keydown.ctrl && key === 90 && !e.shiftKey && !e.altKey && this.opts.buffer.length) // z key
 					{
-						parent.attr('target', '_blank');
+						e.preventDefault();
+						this.buffer.undo();
+						return;
+					}
+					// undo
+					else if (this.keydown.ctrl && key === 90 && e.shiftKey && !e.altKey && this.opts.rebuffer.length !== 0)
+					{
+						e.preventDefault();
+						this.buffer.redo();
+						return;
+					}
+					else if (!this.keydown.ctrl)
+					{
+						if (key == this.keyCode.BACKSPACE || key == this.keyCode.DELETE || (key == this.keyCode.ENTER && !e.ctrlKey && !e.shiftKey))
+						{
+							this.buffer.set();
+						}
+					}
+				},
+				setupSelectAll: function(e, key)
+				{
+					if (this.keydown.ctrl && key === 65)
+					{
+						this.utils.enableSelectAll();
+					}
+					else if (key != this.keyCode.LEFT_WIN && !this.keydown.ctrl)
+					{
+						this.utils.disableSelectAll();
+					}
+				},
+				onArrowDown: function()
+				{
+					var tags = [this.keydown.blockquote, this.keydown.pre, this.keydown.figcaption];
+
+					for (var i = 0; i < tags.length; i++)
+					{
+						if (tags[i])
+						{
+							this.keydown.insertAfterLastElement(tags[i]);
+							return false;
+						}
+					}
+				},
+				onShiftEnter: function(e)
+				{
+					this.buffer.set();
+
+					if (this.utils.isEndOfElement())
+					{
+						return this.keydown.insertDblBreakLine(e);
+					}
+
+					return this.keydown.insertBreakLine(e);
+				},
+				onTab: function(e, key)
+				{
+					if (!this.opts.tabKey) return true;
+					if (this.utils.isEmpty(this.code.get()) && this.opts.tabAsSpaces === false) return true;
+
+					e.preventDefault();
+
+					var node;
+					if (this.keydown.pre && !e.shiftKey)
+					{
+						node = (this.opts.preSpaces) ? document.createTextNode(Array(this.opts.preSpaces + 1).join('\u00a0')) : document.createTextNode('\t');
+						this.insert.node(node);
+						this.code.sync();
+					}
+					else if (this.opts.tabAsSpaces !== false)
+					{
+						node = document.createTextNode(Array(this.opts.tabAsSpaces + 1).join('\u00a0'));
+						this.insert.node(node);
+						this.code.sync();
 					}
 					else
 					{
-						parent.removeAttr('target');
+						if (e.metaKey && key === 219) this.indent.decrease();
+						else if (e.metaKey && key === 221) this.indent.increase();
+						else if (!e.shiftKey) this.indent.increase();
+						else this.indent.decrease();
 					}
-				}
-			}
-			else
-			{
-				if (parent.get(0).tagName === 'A')
+
+					return false;
+				},
+				replaceDivToBreakLine: function()
 				{
-					parent.replaceWith(this.outerHtml(el));
-				}
-			}
+					var blockElem = this.selection.getBlock();
+					var blockHtml = blockElem.innerHTML.replace(/<br\s?\/?>/gi, '');
+					if ((blockElem.tagName === 'DIV' || blockElem.tagName === 'P') && blockHtml === '' && !$(blockElem).hasClass('redactor-editor'))
+					{
+						var br = document.createElement('br');
 
-			this.modalClose();
-			this.observeImages();
-			this.sync();
+						$(blockElem).replaceWith(br);
+						this.caret.setBefore(br);
 
-		},
-		imageResizeHide: function(e)
-		{
-			if (e !== false && $(e.target).parent().size() != 0 && $(e.target).parent()[0].id === 'redactor-image-box')
-			{
-				return false;
-			}
+						this.code.sync();
 
-			var imageBox = this.$editor.find('#redactor-image-box');
-			if (imageBox.size() == 0)
-			{
-				return false;
-			}
+						return false;
+					}
+				},
+				replaceDivToParagraph: function()
+				{
+					var blockElem = this.selection.getBlock();
+					var blockHtml = blockElem.innerHTML.replace(/<br\s?\/?>/gi, '');
+					if (blockElem.tagName === 'DIV' && this.utils.isEmpty(blockHtml) && !$(blockElem).hasClass('redactor-editor'))
+					{
+						var p = document.createElement('p');
+						p.innerHTML = this.opts.invisibleSpace;
 
-			this.$editor.find('#redactor-image-editter, #redactor-image-resizer').remove();
+						$(blockElem).replaceWith(p);
+						this.caret.setStart(p);
 
+						this.code.sync();
 
-			if (this.imageMargin != '0px')
-			{
-				imageBox.find('img').css('margin', this.imageMargin);
-				imageBox.css('margin', '');
-				this.imageMargin = '0px';
-			}
+						return false;
+					}
+					else if (this.opts.cleanStyleOnEnter && blockElem.tagName == 'P')
+					{
+						$(blockElem).removeAttr('class').removeAttr('style');
+					}
+				},
+				insertParagraph: function(e)
+				{
+					e.preventDefault();
 
-			imageBox.find('img').css('opacity', '');
-			imageBox.replaceWith(function()
-			{
-				return $(this).contents();
-			});
+					this.selection.get();
 
-			$(document).off('click.redactor-image-resize-hide');
-			this.$editor.off('click.redactor-image-resize-hide');
-			this.$editor.off('keydown.redactor-image-delete');
+					var p = document.createElement('p');
+					p.innerHTML = this.opts.invisibleSpace;
 
-			this.sync()
+					this.range.deleteContents();
+					this.range.insertNode(p);
 
-		},
-		imageResize: function(image)
-		{
-			var $image = $(image);
+					this.caret.setStart(p);
 
-			$image.on('mousedown', $.proxy(function()
-			{
-				this.imageResizeHide(false);
-			}, this));
+					this.code.sync();
 
-			$image.on('dragstart', $.proxy(function()
-			{
-				this.$editor.on('drop.redactor-image-inside-drop', $.proxy(function()
+					return false;
+				},
+				exitFromBlockquote: function(e)
 				{
-					setTimeout($.proxy(function()
+					if (!this.utils.isEndOfElement()) return;
+
+					var tmp = $.trim($(this.keydown.block).html());
+					if (tmp.search(/(<br\s?\/?>){2}$/i) != -1)
 					{
-						this.observeImages();
-						this.$editor.off('drop.redactor-image-inside-drop');
-						this.sync();
+						e.preventDefault();
 
-					}, this), 1);
+						if (this.opts.linebreaks)
+						{
+							var br = document.createElement('br');
+							$(this.keydown.blockquote).after(br);
+
+							this.caret.setBefore(br);
+							$(this.keydown.block).html(tmp.replace(/<br\s?\/?>$/i, ''));
+						}
+						else
+						{
+							var node = $(this.opts.emptyHtml);
+							$(this.keydown.blockquote).after(node);
+							this.caret.setStart(node);
+						}
 
-				},this));
-			}, this));
+						return true;
 
-			$image.on('click', $.proxy(function(e)
-			{
-				if (this.$editor.find('#redactor-image-box').size() != 0)
+					}
+
+					return;
+
+				},
+				insertAfterLastElement: function(element)
 				{
-					return false;
-				}
+					if (!this.utils.isEndOfElement()) return;
+
+					this.buffer.set();
+
+					if (this.opts.linebreaks)
+					{
+						var contents = $('<div>').append($.trim(this.$editor.html())).contents();
+						var last = contents.last()[0];
+						if (last.tagName == 'SPAN' && last.innerHTML === '')
+						{
+							last = contents.prev()[0];
+						}
+
+						if (this.utils.getOuterHtml(last) != this.utils.getOuterHtml(element)) return;
 
-				var clicked = false,
-				start_x,
-				start_y,
-				ratio = $image.width() / $image.height(),
-				min_w = 20,
-				min_h = 10;
-
-				var imageResizer = this.imageResizeControls($image);
-
-				// resize
-				var isResizing = false;
-				imageResizer.on('mousedown', function(e)
+						var br = document.createElement('br');
+						$(element).after(br);
+						this.caret.setAfter(br);
+
+					}
+					else
+					{
+						if (this.$editor.contents().last()[0] !== element) return;
+
+						var node = $(this.opts.emptyHtml);
+						$(element).after(node);
+						this.caret.setStart(node);
+					}
+				},
+				insertNewLine: function(e)
 				{
-					isResizing = true;
 					e.preventDefault();
 
-					ratio = $image.width() / $image.height();
+					var node = document.createTextNode('\n');
+
+					this.selection.get();
 
-					start_x = Math.round(e.pageX - $image.eq(0).offset().left);
-					start_y = Math.round(e.pageY - $image.eq(0).offset().top);
+					this.range.deleteContents();
+					this.range.insertNode(node);
 
-				});
+					this.caret.setAfter(node);
 
-				$(this.document.body).on('mousemove', $.proxy(function(e)
+					this.code.sync();
+
+					return false;
+				},
+				insertBreakLine: function(e)
+				{
+					return this.keydown.insertBreakLineProcessing(e);
+				},
+				insertDblBreakLine: function(e)
+				{
+					return this.keydown.insertBreakLineProcessing(e, true);
+				},
+				insertBreakLineProcessing: function(e, dbl)
 				{
-					if (isResizing)
+					e.stopPropagation();
+
+					this.selection.get();
+
+					var br1 = document.createElement('br');
+
+					if (this.utils.browser('msie'))
+					{
+						this.range.collapse(false);
+						this.range.setEnd(this.range.endContainer, this.range.endOffset);
+					}
+					else
 					{
-						var mouse_x = Math.round(e.pageX - $image.eq(0).offset().left) - start_x;
-						var mouse_y = Math.round(e.pageY - $image.eq(0).offset().top) - start_y;
+						this.range.deleteContents();
+					}
 
-						var div_h = $image.height();
+					this.range.insertNode(br1);
 
-						var new_h = parseInt(div_h, 10) + mouse_y;
-						var new_w = Math.round(new_h * ratio);
+					// move br outside A tag
+					var $parentA = $(br1).parent("a");
+
+					if ($parentA.length > 0)
+					{
+						$parentA.find(br1).remove();
+						$parentA.after(br1);
+					}
 
-						if (new_w > min_w)
+					if (dbl === true)
+					{
+						var $next = $(br1).next();
+						if ($next.length !== 0 && $next[0].tagName === 'BR' && this.utils.isEndOfEditor())
 						{
-							$image.width(new_w);
+							this.caret.setAfter(br1);
+							this.code.sync();
+							return false;
+						}
 
-							if (new_w < 100)
-							{
-								this.imageEditter.css({
-									marginTop: '-7px',
-									marginLeft: '-13px',
-									fontSize: '9px',
-									padding: '3px 5px'
-								});
-							}
-							else
-							{
-								this.imageEditter.css({
-									marginTop: '-11px',
-									marginLeft: '-18px',
-									fontSize: '11px',
-									padding: '7px 10px'
-								});
-							}
+						var br2 = document.createElement('br');
+
+						this.range.insertNode(br2);
+						this.caret.setAfter(br2);
+					}
+					else
+					{
+						// caret does not move after the br visual
+						if (this.utils.browser('msie'))
+						{
+							var space = document.createElement('span');
+							space.innerHTML = '&#x200b;';
+
+							$(br1).after(space);
+							this.caret.setAfter(space);
+							$(space).remove();
 						}
+						else
+						{
+							var range = document.createRange();
+							range.setStartAfter(br1);
+							range.collapse(true);
+							var selection = window.getSelection();
+							selection.removeAllRanges();
+							selection.addRange(range);
 
-						start_x = Math.round(e.pageX - $image.eq(0).offset().left);
-						start_y = Math.round(e.pageY - $image.eq(0).offset().top);
+						}
+					}
 
-						this.sync()
+					this.code.sync();
+					return false;
+				},
+				removeInvisibleSpace: function()
+				{
+					var $current = $(this.keydown.current);
+					if ($current.text().search(/^\u200B$/g) === 0)
+					{
+						$current.remove();
 					}
-				}, this)).on('mouseup', function()
+				},
+				removeEmptyListInTable: function(e)
 				{
-					isResizing = false;
-				});
+					var $current = $(this.keydown.current);
+					var $parent = $(this.keydown.parent);
+					var td = $current.closest('td', this.$editor[0]);
+
+					if (td.length !== 0 && $current.closest('li', this.$editor[0]) && $parent.children('li').length === 1)
+					{
+						if (!this.utils.isEmpty($current.text())) return;
 
+						e.preventDefault();
+
+						$current.remove();
+						$parent.remove();
 
-				this.$editor.on('keydown.redactor-image-delete', $.proxy(function(e)
+						this.caret.setStart(td);
+					}
+				}
+			};
+		},
+		keyup: function()
+		{
+			return {
+				init: function(e)
 				{
+
+					if (this.rtePaste) return;
+
 					var key = e.which;
 
-					if (this.keyCode.BACKSPACE == key || this.keyCode.DELETE == key)
+					this.keyup.current = this.selection.getCurrent();
+					this.keyup.parent = this.selection.getParent();
+					var $parent = this.utils.isRedactorParent($(this.keyup.parent).parent());
+
+					// callback
+					var keyupStop = this.core.setCallback('keyup', e);
+					if (keyupStop === false)
 					{
-						this.bufferSet();
-						this.imageResizeHide(false);
-						this.imageRemove($image);
+						e.preventDefault();
+						return false;
 					}
 
-				}, this));
-
-				$(document).on('click.redactor-image-resize-hide', $.proxy(this.imageResizeHide, this));
-				this.$editor.on('click.redactor-image-resize-hide', $.proxy(this.imageResizeHide, this));
+					// replace to p before / after the table or body
+					if (!this.opts.linebreaks && this.keyup.current.nodeType === 3 && this.keyup.current.length <= 1 && (this.keyup.parent === false || this.keyup.parent.tagName == 'BODY'))
+					{
+						this.keyup.replaceToParagraph();
+					}
 
+					// replace div after lists
+					if (!this.opts.linebreaks && this.utils.isRedactorParent(this.keyup.current) && this.keyup.current.tagName === 'DIV')
+					{
+						this.keyup.replaceToParagraph(false);
+					}
 
-			}, this));
-		},
-		imageResizeControls: function($image)
-		{
-			var imageBox = $('<span id="redactor-image-box" data-redactor="verified">');
-			imageBox.css({
-				position: 'relative',
-				display: 'inline-block',
-				lineHeight: 0,
-				outline: '1px dashed rgba(0, 0, 0, .6)',
-				'float': $image.css('float')
-			});
-			imageBox.attr('contenteditable', false);
 
-			this.imageMargin = $image[0].style.margin;
-			if (this.imageMargin != '0px')
-			{
-				imageBox.css('margin', this.imageMargin);
-				$image.css('margin', '');
-			}
+					if (!this.opts.linebreaks && $(this.keyup.parent).hasClass('redactor-invisible-space') && ($parent === false || $parent[0].tagName == 'BODY'))
+					{
+						$(this.keyup.parent).contents().unwrap();
+						this.keyup.replaceToParagraph();
+					}
 
-			$image.css('opacity', .5).after(imageBox);
+					// linkify
+					if (this.linkify.isEnabled() && this.linkify.isKey(key)) this.linkify.format();
 
-			// editter
-			this.imageEditter = $('<span id="redactor-image-editter" data-redactor="verified">' + this.opts.curLang.edit + '</span>');
-			this.imageEditter.css({
-				position: 'absolute',
-				zIndex: 2,
-				top: '50%',
-				left: '50%',
-				marginTop: '-11px',
-				marginLeft: '-18px',
-				lineHeight: 1,
-				backgroundColor: '#000',
-				color: '#fff',
-				fontSize: '11px',
-				padding: '7px 10px',
-				cursor: 'pointer'
-			});
-			this.imageEditter.attr('contenteditable', false);
-			this.imageEditter.on('click', $.proxy(function()
-			{
-				this.imageEdit($image);
-			}, this));
-			imageBox.append(this.imageEditter);
-
-			// resizer
-			var imageResizer = $('<span id="redactor-image-resizer" data-redactor="verified"></span>');
-			imageResizer.css({
-				position: 'absolute',
-				zIndex: 2,
-				lineHeight: 1,
-				cursor: 'nw-resize',
-				bottom: '-4px',
-				right: '-5px',
-				border: '1px solid #fff',
-				backgroundColor: '#000',
-				width: '8px',
-				height: '8px'
-			});
-			imageResizer.attr('contenteditable', false);
-			imageBox.append(imageResizer);
+					if (key === this.keyCode.DELETE || key === this.keyCode.BACKSPACE)
+					{
+						if (this.utils.browser('mozilla'))
+						{
+							var td = $(this.keydown.current).closest('td', this.$editor[0]);
+							if (td.size() !== 0 && td.text() !== '')
+							{
+								e.preventDefault();
+								return false;
+							}
+						}
 
-			imageBox.append($image);
+						// clear unverified
+						this.clean.clearUnverified();
 
-			return imageResizer;
-		},
-		imageThumbClick: function(e)
-		{
-			var img = '<img id="image-marker" src="' + $(e.target).attr('rel') + '" alt="' + $(e.target).attr('title') + '" />';
+						if (this.observe.image)
+						{
+							e.preventDefault();
 
-			var parent = this.getParent();
-			if (this.opts.paragraphy && $(parent).closest('li').size() == 0) img = '<p>' + img + '</p>';
+							this.image.hideResize();
 
-			this.imageInsert(img, true);
-		},
-		imageCallbackLink: function()
-		{
-			var val = $('#redactor_file_link').val();
+							this.buffer.set();
+							this.image.remove(this.observe.image);
+							this.observe.image = false;
 
-			if (val !== '')
-			{
-				var data = '<img id="image-marker" src="' + val + '" />';
-				if (this.opts.linebreaks === false) data = '<p>' + data + '</p>';
+							return false;
+						}
 
-				this.imageInsert(data, true);
+						// remove empty paragraphs
+						this.$editor.find('p').each($.proxy(function(i, s)
+						{
+							this.utils.removeEmpty(i, $(s).html());
+						}, this));
 
-			}
-			else this.modalClose();
-		},
-		imageCallback: function(data)
-		{
-			this.imageInsert(data);
-		},
-		imageInsert: function(json, link)
-		{
-			this.selectionRestore();
+						// remove invisible space
+						if (this.opts.linebreaks && this.keyup.current && this.keyup.current.tagName == 'DIV' && this.utils.isEmpty(this.keyup.current.innerHTML))
+						{
+							$(this.keyup.current).after(this.selection.getMarkerAsHtml());
+							this.selection.restore();
+							$(this.keyup.current).remove();
+						}
 
-			if (json !== false)
-			{
-				var html = '';
-				if (link !== true)
+						// if empty
+						return this.keyup.formatEmpty(e);
+					}
+				},
+				replaceToParagraph: function(clone)
 				{
-					html = '<img id="image-marker" src="' + json.filelink + '" />';
+					var $current = $(this.keyup.current);
 
-					var parent = this.getParent();
-					if (this.opts.paragraphy && $(parent).closest('li').size() == 0)
+					var node;
+					if (clone === false)
 					{
-						html = '<p>' + html + '</p>';
+						node = $('<p>').append($current.html());
+					}
+					else
+					{
+						node = $('<p>').append($current.clone());
 					}
-				}
-				else
-				{
-					html = json;
-				}
 
-				this.execCommand('inserthtml', html, false);
+					$current.replaceWith(node);
+					var next = $(node).next();
+					if (typeof(next[0]) !== 'undefined' && next[0].tagName == 'BR')
+					{
+						next.remove();
+					}
 
-				var image = $(this.$editor.find('img#image-marker'));
+					this.caret.setEnd(node);
+				},
+				formatEmpty: function(e)
+				{
+					var html = $.trim(this.$editor.html());
 
-				if (image.length) image.removeAttr('id');
-				else image = false;
+					if (!this.utils.isEmpty(html)) return;
 
-				this.sync();
+					e.preventDefault();
 
-				// upload image callback
-				link !== true && this.callback('imageUpload', image, json);
-			}
+					if (this.opts.linebreaks)
+					{
+						this.$editor.html(this.selection.getMarkerAsHtml());
+						this.selection.restore();
+					}
+					else
+					{
+						this.$editor.html(this.opts.emptyHtml);
+						this.focus.setStart();
+					}
 
-			this.modalClose();
-			this.observeImages();
-		},
+					this.code.sync();
 
-		// MODAL
-		modalTemplatesInit: function()
+					return false;
+				}
+			};
+		},
+		lang: function()
 		{
-			$.extend( this.opts,
-			{
-				modal_file: String()
-				+ '<section>'
-					+ '<div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;">'
-							+ '<div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div>'
-					+ '</div>'
-					+ '<form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data">'
-						+ '<label>' + this.opts.curLang.filename + '</label>'
-						+ '<input type="text" id="redactor_filename" class="redactor_input" />'
-						+ '<div style="margin-top: 7px;">'
-							+ '<input type="file" id="redactor_file" name="' + this.opts.fileUploadParam + '" />'
-						+ '</div>'
-					+ '</form>'
-				+ '</section>',
-
-				modal_image_edit: String()
-				+ '<section>'
-					+ '<label>' + this.opts.curLang.title + '</label>'
-					+ '<input id="redactor_file_alt" class="redactor_input" />'
-					+ '<label>' + this.opts.curLang.link + '</label>'
-					+ '<input id="redactor_file_link" class="redactor_input" />'
-					+ '<label><input type="checkbox" id="redactor_link_blank"> ' + this.opts.curLang.link_new_tab + '</label>'
-					+ '<label>' + this.opts.curLang.image_position + '</label>'
-					+ '<select id="redactor_form_image_align">'
-						+ '<option value="none">' + this.opts.curLang.none + '</option>'
-						+ '<option value="left">' + this.opts.curLang.left + '</option>'
-						+ '<option value="right">' + this.opts.curLang.right + '</option>'
-					+ '</select>'
-				+ '</section>'
-				+ '<footer>'
-					+ '<button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">' + this.opts.curLang._delete + '</button>&nbsp;&nbsp;&nbsp;'
-					+ '<button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button>'
-					+ '<input type="button" name="save" class="redactor_modal_btn redactor_modal_action_btn" id="redactorSaveBtn" value="' + this.opts.curLang.save + '" />'
-				+ '</footer>',
-
-				modal_image: String()
-				+ '<section>'
-					+ '<div id="redactor_tabs">'
-						+ '<a href="#" class="redactor_tabs_act">' + this.opts.curLang.upload + '</a>'
-						+ '<a href="#">' + this.opts.curLang.choose + '</a>'
-						+ '<a href="#">' + this.opts.curLang.link + '</a>'
-					+ '</div>'
-					+ '<div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;">'
-							+ '<div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div>'
-					+ '</div>'
-					+ '<form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data">'
-						+ '<div id="redactor_tab1" class="redactor_tab">'
-							+ '<input type="file" id="redactor_file" name="' + this.opts.imageUploadParam + '" />'
-						+ '</div>'
-						+ '<div id="redactor_tab2" class="redactor_tab" style="display: none;">'
-							+ '<div id="redactor_image_box"></div>'
-						+ '</div>'
-					+ '</form>'
-					+ '<div id="redactor_tab3" class="redactor_tab" style="display: none;">'
-						+ '<label>' + this.opts.curLang.image_web_link + '</label>'
-						+ '<input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  />'
-					+ '</div>'
-				+ '</section>'
-				+ '<footer>'
-					+ '<button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button>'
-					+ '<input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn" value="' + this.opts.curLang.insert + '" />'
-				+ '</footer>',
-
-				modal_link: String()
-				+ '<section>'
-					+ '<form id="redactorInsertLinkForm" method="post" action="">'
-						+ '<div id="redactor_tabs">'
-							+ '<a href="#" class="redactor_tabs_act">URL</a>'
-							+ '<a href="#">Email</a>'
-							+ '<a href="#">' + this.opts.curLang.anchor + '</a>'
-						+ '</div>'
-						+ '<input type="hidden" id="redactor_tab_selected" value="1" />'
-						+ '<div class="redactor_tab" id="redactor_tab1">'
-							+ '<label>URL</label>'
-							+ '<input type="text" id="redactor_link_url" class="redactor_input"  />'
-							+ '<label>' + this.opts.curLang.text + '</label>'
-							+ '<input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" />'
-							+ '<label><input type="checkbox" id="redactor_link_blank"> ' + this.opts.curLang.link_new_tab + '</label>'
-						+ '</div>'
-						+ '<div class="redactor_tab" id="redactor_tab2" style="display: none;">'
-							+ '<label>Email</label>'
-							+ '<input type="text" id="redactor_link_mailto" class="redactor_input" />'
-							+ '<label>' + this.opts.curLang.text + '</label>'
-							+ '<input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" />'
-						+ '</div>'
-						+ '<div class="redactor_tab" id="redactor_tab3" style="display: none;">'
-							+ '<label>' + this.opts.curLang.anchor + '</label>'
-							+ '<input type="text" class="redactor_input" id="redactor_link_anchor"  />'
-							+ '<label>' + this.opts.curLang.text + '</label>'
-							+ '<input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" />'
-						+ '</div>'
-					+ '</form>'
-				+ '</section>'
-				+ '<footer>'
-					+ '<button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button>'
-					+ '<input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_link_btn" value="' + this.opts.curLang.insert + '" />'
-				+ '</footer>',
-
-				modal_table: String()
-				+ '<section>'
-					+ '<label>' + this.opts.curLang.rows + '</label>'
-					+ '<input type="text" size="5" value="2" id="redactor_table_rows" />'
-					+ '<label>' + this.opts.curLang.columns + '</label>'
-					+ '<input type="text" size="5" value="3" id="redactor_table_columns" />'
-				+ '</section>'
-				+ '<footer>'
-					+ '<button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button>'
-					+ '<input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_table_btn" value="' + this.opts.curLang.insert + '" />'
-				+ '</footer>',
-
-				modal_video: String()
-				+ '<section>'
-					+ '<form id="redactorInsertVideoForm">'
-						+ '<label>' + this.opts.curLang.video_html_code + '</label>'
-						+ '<textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea>'
-					+ '</form>'
-				+ '</section>'
-				+ '<footer>'
-					+ '<button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button>'
-					+ '<input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_video_btn" value="' + this.opts.curLang.insert + '" />'
-				+ '</footer>'
-
-			});
+			return {
+				load: function()
+				{
+					this.opts.curLang = this.opts.langs[this.opts.lang];
+				},
+				get: function(name)
+				{
+					return (typeof this.opts.curLang[name] != 'undefined') ? this.opts.curLang[name] : '';
+				}
+			};
 		},
-		modalInit: function(title, content, width, callback)
+		line: function()
 		{
-			var $redactorModalOverlay = $('#redactor_modal_overlay');
+			return {
+				insert: function()
+				{
+					this.buffer.set();
 
-			// modal overlay
-			if (!$redactorModalOverlay.length)
-			{
-				this.$overlay = $redactorModalOverlay = $('<div id="redactor_modal_overlay" style="display: none;"></div>');
-				$('body').prepend(this.$overlay);
-			}
+					var blocks = this.selection.getBlocks();
+ 					if (blocks[0] !== false && this.line.isExceptLastOrFirst(blocks))
+	 				{
+	 					if (!this.utils.browser('msie')) this.$editor.focus();
+	 					return;
+					}
 
-			if (this.opts.modalOverlay)
-			{
-				$redactorModalOverlay.show().on('click', $.proxy(this.modalClose, this));
-			}
+					if (this.utils.browser('msie'))
+					{
+						this.line.insertInIe();
+					}
+					else
+					{
+						this.line.insertInOthersBrowsers();
+					}
+				},
+				isExceptLastOrFirst: function(blocks)
+				{
+					var exceptTags = ['li', 'td', 'th', 'blockquote', 'figcaption', 'pre', 'dl', 'dt', 'dd'];
 
-			var $redactorModal = $('#redactor_modal');
+					var first = blocks[0].tagName.toLowerCase();
+					var last = this.selection.getLastBlock();
 
-			if (!$redactorModal.length)
-			{
-				this.$modal = $redactorModal = $('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><header id="redactor_modal_header"></header><div id="redactor_modal_inner"></div></div>');
-				$('body').append(this.$modal);
-			}
+					last = (typeof last == 'undefined') ? first : last.tagName.toLowerCase();
 
-			$('#redactor_modal_close').on('click', $.proxy(this.modalClose, this));
+					var firstFound = $.inArray(first, exceptTags) != -1;
+					var lastFound = $.inArray(last, exceptTags) != -1;
 
-			this.hdlModalClose = $.proxy(function(e)
-			{
-				if (e.keyCode === this.keyCode.ESC)
+					if ((firstFound && lastFound) || firstFound)
+					{
+						return true;
+					}
+				},
+				insertInIe: function()
+				{
+					this.utils.saveScroll();
+					this.buffer.set();
+
+					this.insert.node(document.createElement('hr'));
+
+					this.utils.restoreScroll();
+					this.code.sync();
+				},
+				insertInOthersBrowsers: function()
+				{
+					this.buffer.set();
+
+					var extra = '<p id="redactor-insert-line"><br /></p>';
+					if (this.opts.linebreaks) extra = '<br id="redactor-insert-line">';
+
+					document.execCommand('insertHtml', false, '<hr>' + extra);
+
+					this.line.setFocus();
+					this.code.sync();
+				},
+				setFocus: function()
+				{
+					var node = this.$editor.find('#redactor-insert-line');
+					var next = $(node).next()[0];
+					var target = next;
+					if (this.utils.browser('mozilla') && next && next.innerHTML === '')
+					{
+						target = $(next).next()[0];
+						$(next).remove();
+					}
+
+					if (target)
+					{
+						node.remove();
+
+						if (!this.opts.linebreaks)
+						{
+							this.$editor.focus();
+							this.line.setStart(target);
+						}
+
+					}
+					else
+					{
+
+						node.removeAttr('id');
+						this.line.setStart(node[0]);
+					}
+				},
+				setStart: function(node)
+				{
+					if (typeof node === 'undefined') return;
+
+					var textNode = document.createTextNode('\u200B');
+
+					this.selection.get();
+					this.range.setStart(node, 0);
+					this.range.insertNode(textNode);
+					this.range.collapse(true);
+					this.selection.addRange();
+
+				}
+			};
+		},
+		link: function()
+		{
+			return {
+				show: function(e)
+				{
+					if (typeof e != 'undefined' && e.preventDefault) e.preventDefault();
+
+					if (!this.observe.isCurrent('a'))
+					{
+						this.modal.load('link', this.lang.get('link_insert'), 600);
+					}
+					else
+					{
+						this.modal.load('link', this.lang.get('link_edit'), 600);
+					}
+
+					this.modal.createCancelButton();
+
+					var buttonText = !this.observe.isCurrent('a') ? this.lang.get('insert') : this.lang.get('edit');
+
+					this.link.buttonInsert = this.modal.createActionButton(buttonText);
+
+					this.selection.get();
+
+					this.link.getData();
+					this.link.cleanUrl();
+
+					if (this.link.target == '_blank') $('#redactor-link-blank').prop('checked', true);
+
+					this.link.$inputUrl = $('#redactor-link-url');
+					this.link.$inputText = $('#redactor-link-url-text');
+
+					this.link.$inputText.val(this.link.text);
+					this.link.$inputUrl.val(this.link.url);
+
+					this.link.buttonInsert.on('click', $.proxy(this.link.insert, this));
+
+					// hide link's tooltip
+					$('.redactor-link-tooltip').remove();
+
+					// show modal
+					this.selection.save();
+					this.modal.show();
+					this.link.$inputUrl.focus();
+				},
+				cleanUrl: function()
+				{
+					var thref = self.location.href.replace(/\/$/i, '');
+
+					if (typeof this.link.url !== "undefined")
+					{
+						this.link.url = this.link.url.replace(thref, '');
+						this.link.url = this.link.url.replace(/^\/#/, '#');
+						this.link.url = this.link.url.replace('mailto:', '');
+
+						// remove host from href
+						if (!this.opts.linkProtocol)
+						{
+							var re = new RegExp('^(http|ftp|https)://' + self.location.host, 'i');
+							this.link.url = this.link.url.replace(re, '');
+						}
+					}
+				},
+				getData: function()
+				{
+					this.link.$node = false;
+
+					var $el = $(this.selection.getCurrent()).closest('a', this.$editor[0]);
+					if ($el.length !== 0 && $el[0].tagName === 'A')
+					{
+						this.link.$node = $el;
+
+						this.link.url = $el.attr('href');
+						this.link.text = $el.text();
+						this.link.target = $el.attr('target');
+					}
+					else
+					{
+						this.link.text = this.sel.toString();
+						this.link.url = '';
+						this.link.target = '';
+					}
+
+				},
+				insert: function()
+				{
+					this.placeholder.remove();
+
+					var target = '';
+					var link = this.link.$inputUrl.val();
+					var text = this.link.$inputText.val().replace(/(<([^>]+)>)/ig,"");
+
+					if ($.trim(link) === '')
+					{
+						this.link.$inputUrl.addClass('redactor-input-error').on('keyup', function()
+						{
+							$(this).removeClass('redactor-input-error');
+							$(this).off('keyup');
+
+						});
+
+						return;
+					}
+
+					// mailto
+					if (link.search('@') != -1 && /(http|ftp|https):\/\//i.test(link) === false)
+					{
+						link = 'mailto:' + link;
+					}
+					// url, not anchor
+					else if (link.search('#') !== 0)
+					{
+						if ($('#redactor-link-blank').prop('checked'))
+						{
+							target = '_blank';
+						}
+
+						// test url (add protocol)
+						var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';
+						var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');
+						var re2 = new RegExp('^' + pattern, 'i');
+						var re3 = new RegExp('\.(html|php)$', 'i');
+						if (link.search(re) == -1 && link.search(re3) == -1 && link.search(re2) === 0 && this.opts.linkProtocol)
+						{
+							link = this.opts.linkProtocol + '://' + link;
+						}
+					}
+
+					this.link.set(text, link, target);
+					this.modal.close();
+				},
+				set: function(text, link, target)
+				{
+					text = $.trim(text.replace(/<|>/g, ''));
+
+					this.selection.restore();
+					var blocks = this.selection.getBlocks();
+
+					if (text === '' && link === '') return;
+					if (text === '' && link !== '') text = link;
+
+					if (this.link.$node)
+					{
+						this.buffer.set();
+
+						var $link = this.link.$node,
+							$el   = $link.children();
+
+						if ($el.length > 0)
+						{
+							while ($el.length)
+							{
+								$el = $el.children();
+							}
+
+							$el = $el.end();
+						}
+						else
+						{
+							$el = $link;
+						}
+
+						$link.attr('href', link);
+						$el.text(text);
+
+						if (target !== '')
+						{
+							$link.attr('target', target);
+						}
+						else
+						{
+							$link.removeAttr('target');
+						}
+
+						this.selection.selectElement($link);
+
+						this.code.sync();
+					}
+					else
+					{
+						if (this.utils.browser('mozilla') && this.link.text === '')
+						{
+							var $a = $('<a />').attr('href', link).text(text);
+							if (target !== '') $a.attr('target', target);
+
+							$a = $(this.insert.node($a));
+
+							if (this.opts.linebreaks)
+							{
+								$a.after('&nbsp;');
+							}
+
+							this.selection.selectElement($a);
+						}
+						else
+						{
+							var $a;
+							if (this.utils.browser('msie'))
+							{
+								$a = $('<a href="' + link + '">').text(text);
+								if (target !== '') $a.attr('target', target);
+
+								$a = $(this.insert.node($a));
+
+								if (this.selection.getText().match(/\s$/))
+								{
+									$a.after(" ");
+								}
+
+								this.selection.selectElement($a);
+							}
+							else
+							{
+								document.execCommand('createLink', false, link);
+
+								$a = $(this.selection.getCurrent()).closest('a', this.$editor[0]);
+								if (this.utils.browser('mozilla'))
+								{
+									$a = $('a[_moz_dirty=""]');
+								}
+
+								if (target !== '') $a.attr('target', target);
+								$a.removeAttr('style').removeAttr('_moz_dirty');
+
+								if (this.selection.getText().match(/\s$/))
+								{
+									$a.after(" ");
+								}
+
+								if (this.link.text !== '' || this.link.text != text)
+								{
+									if (!this.opts.linebreaks && blocks && blocks.length <= 1)
+									{
+										$a.text(text);
+									}
+									else if (this.opts.linebreaks)
+									{
+										$a.text(text);
+									}
+
+									this.selection.selectElement($a);
+								}
+							}
+						}
+
+						this.code.sync();
+						this.core.setCallback('insertedLink', $a);
+
+					}
+
+					// link tooltip
+					setTimeout($.proxy(function()
+					{
+						this.observe.links();
+
+					}, this), 5);
+				},
+				unlink: function(e)
+				{
+					if (typeof e != 'undefined' && e.preventDefault)
+					{
+						e.preventDefault();
+					}
+
+					var nodes = this.selection.getNodes();
+					if (!nodes) return;
+
+					this.buffer.set();
+
+					var len = nodes.length;
+					var links = [];
+					for (var i = 0; i < len; i++)
+					{
+						if (nodes[i].tagName === 'A')
+						{
+							links.push(nodes[i]);
+						}
+
+						var $node = $(nodes[i]).closest('a', this.$editor[0]);
+						$node.replaceWith($node.contents());
+					}
+
+					this.core.setCallback('deletedLink', links);
+
+					// hide link's tooltip
+					$('.redactor-link-tooltip').remove();
+
+					this.code.sync();
+
+				},
+				toggleClass: function(className)
+				{
+					this.link.setClass(className, 'toggleClass');
+				},
+				addClass: function(className)
+				{
+					this.link.setClass(className, 'addClass');
+				},
+				removeClass: function(className)
+				{
+					this.link.setClass(className, 'removeClass');
+				},
+				setClass: function(className, func)
+				{
+					var links = this.selection.getInlinesTags(['a']);
+					if (links === false) return;
+
+					$.each(links, function()
+					{
+						$(this)[func](className);
+					});
+				}
+			};
+		},
+		linkify: function()
+		{
+			return {
+				isKey: function(key)
+				{
+					return key == this.keyCode.ENTER || key == this.keyCode.SPACE;
+				},
+				isEnabled: function()
+				{
+					return this.opts.convertLinks && (this.opts.convertUrlLinks || this.opts.convertImageLinks || this.opts.convertVideoLinks) && !this.utils.isCurrentOrParent('PRE');
+				},
+				format: function()
+				{
+					var linkify = this.linkify,
+						opts    = this.opts;
+
+					this.$editor
+						.find(":not(iframe,img,a,pre)")
+						.addBack()
+						.contents()
+						.filter(function()
+						{
+							return this.nodeType === 3 && $.trim(this.nodeValue) != "" && !$(this).parent().is("pre") && (this.nodeValue.match(opts.linkify.regexps.youtube) || this.nodeValue.match(opts.linkify.regexps.vimeo) || this.nodeValue.match(opts.linkify.regexps.image) || this.nodeValue.match(opts.linkify.regexps.url));
+						})
+						.each(function()
+						{
+							var text = $(this).text(),
+								html = text;
+
+							if (opts.convertVideoLinks && (html.match(opts.linkify.regexps.youtube) || html.match(opts.linkify.regexps.vimeo)) )
+							{
+								html = linkify.convertVideoLinks(html);
+							}
+							else if (opts.convertImageLinks && html.match(opts.linkify.regexps.image))
+							{
+								html = linkify.convertImages(html);
+							}
+							else if (opts.convertUrlLinks)
+							{
+								html = linkify.convertLinks(html);
+							}
+
+							$(this).before(text.replace(text, html))
+								   .remove();
+						});
+
+
+					var objects = this.$editor.find('.redactor-linkify-object').each(function()
+					{
+						var $el = $(this);
+						$el.removeClass('redactor-linkify-object');
+						if ($el.attr('class') === '') $el.removeAttr('class');
+
+						return $el[0];
+
+					});
+
+					// callback
+					setTimeout($.proxy(function()
+					{
+						this.observe.load();
+						this.core.setCallback('linkify', objects);
+					}, this), 100);
+
+					// sync
+					this.code.sync();
+				},
+				convertVideoLinks: function(html)
+				{
+					var iframeStart = '<iframe class="redactor-linkify-object" width="500" height="281" src="',
+						iframeEnd = '" frameborder="0" allowfullscreen></iframe>';
+
+					if (html.match(this.opts.linkify.regexps.youtube))
+					{
+						html = html.replace(this.opts.linkify.regexps.youtube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);
+					}
+
+					if (html.match(this.opts.linkify.regexps.vimeo))
+					{
+						html = html.replace(this.opts.linkify.regexps.vimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);
+					}
+
+					return html;
+				},
+				convertImages: function(html)
+				{
+					var matches = html.match(this.opts.linkify.regexps.image);
+
+					if (matches)
+					{
+						html = html.replace(html, '<img src="' + matches + '" class="redactor-linkify-object" />');
+
+						if (this.opts.linebreaks)
+						{
+							if (!this.utils.isEmpty(this.code.get()))
+							{
+								html = '<br>' + html;
+							}
+						}
+
+						html += '<br>';
+					}
+
+					return html;
+				},
+				convertLinks: function(html)
+				{
+					var matches = html.match(this.opts.linkify.regexps.url);
+
+					if (matches)
+					{
+						matches = $.grep(matches, function(v, k) { return $.inArray(v, matches) === k; });
+
+						var length = matches.length;
+
+						for (var i = 0; i < length; i++)
+						{
+							var href = matches[i],
+								text = href,
+								linkProtocol = this.opts.linkProtocol + '://';
+
+							if (href.match(/(https?|ftp):\/\//i) !== null)
+							{
+								linkProtocol = "";
+							}
+
+							if (text.length > this.opts.linkSize)
+							{
+								text = text.substring(0, this.opts.linkSize) + '...';
+							}
+
+							if (text.search('%') === -1)
+							{
+								text = decodeURIComponent(text);
+							}
+
+							var regexB = "\\b";
+
+							if ($.inArray(href.slice(-1), ["/", "&", "="]) != -1)
+							{
+								regexB = "";
+							}
+
+							// escaping url
+							var regexp = new RegExp('(' + href.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + regexB + ')', 'g');
+
+							html = html.replace(regexp, '<a href="' + linkProtocol + $.trim(href) + '" class="redactor-linkify-object">' + $.trim(text) + '</a>');
+						}
+					}
+
+					return html;
+				}
+			};
+		},
+		list: function()
+		{
+			return {
+				toggle: function(cmd)
+				{
+					this.placeholder.remove();
+					if (!this.utils.browser('msie')) this.$editor.focus();
+
+					this.buffer.set();
+					this.selection.save();
+
+					var parent = this.selection.getParent();
+					var $list = $(parent).closest('ol, ul', this.$editor[0]);
+
+					if (!this.utils.isRedactorParent($list) && $list.length !== 0)
+					{
+						$list = false;
+					}
+
+					var isUnorderedCmdOrdered, isOrderedCmdUnordered;
+					var remove = false;
+					if ($list && $list.length)
+					{
+						remove = true;
+						var listTag = $list[0].tagName;
+
+						isUnorderedCmdOrdered = (cmd === 'orderedlist' && listTag === 'UL');
+						isOrderedCmdUnordered = (cmd === 'unorderedlist' && listTag === 'OL');
+					}
+
+					if (isUnorderedCmdOrdered)
+					{
+						this.utils.replaceToTag($list, 'ol');
+					}
+					else if (isOrderedCmdUnordered)
+					{
+						this.utils.replaceToTag($list, 'ul');
+					}
+					else
+					{
+						if (remove)
+						{
+							this.list.remove(cmd, $list);
+						}
+						else
+						{
+							this.list.insert(cmd);
+						}
+					}
+
+					this.selection.restore();
+					this.code.sync();
+
+				},
+				insert: function(cmd)
+				{
+					var current = this.selection.getCurrent();
+					var $td = $(current).closest('td, th', this.$editor[0]);
+
+					if (this.utils.browser('msie') && this.opts.linebreaks)
+					{
+						this.list.insertInIe(cmd);
+					}
+					else
+					{
+						document.execCommand('insert' + cmd);
+					}
+
+					var parent = this.selection.getParent();
+					var $list = $(parent).closest('ol, ul', this.$editor[0]);
+					if ($td.length !== 0)
+					{
+						var newTd = $td.clone();
+						$td.after(newTd).remove('');
+					}
+
+
+					if (this.utils.isEmpty($list.find('li').text()))
+					{
+						var $children = $list.children('li');
+						$children.find('br').remove();
+						$children.append(this.selection.getMarkerAsHtml());
+
+						if (this.opts.linebreaks && this.utils.browser('mozilla') && $children.size() == 2 && this.utils.isEmpty($children.eq(1).text()))
+						{
+							$children.eq(1).remove();
+						}
+					}
+
+					if ($list.length)
+					{
+						// remove block-element list wrapper
+						var $listParent = $list.parent();
+						if (this.utils.isRedactorParent($listParent) && $listParent[0].tagName != 'LI' && this.utils.isBlock($listParent[0]))
+						{
+							$listParent.replaceWith($listParent.contents());
+						}
+					}
+
+					if (!this.utils.browser('msie'))
+					{
+						this.$editor.focus();
+					}
+
+
+					this.clean.clearUnverified();
+				},
+				insertInIe: function(cmd)
+				{
+					var wrapper = this.selection.wrap('div');
+					var wrapperHtml = $(wrapper).html();
+
+					var tmpList = (cmd == 'orderedlist') ? $('<ol>') : $('<ul>');
+					var tmpLi = $('<li>');
+
+					if ($.trim(wrapperHtml) === '')
+					{
+						tmpLi.append(this.selection.getMarkerAsHtml());
+						tmpList.append(tmpLi);
+						this.$editor.find('#selection-marker-1').replaceWith(tmpList);
+					}
+					else
+					{
+						var items = wrapperHtml.split(/<br\s?\/?>/gi);
+						if (items)
+						{
+							for (var i = 0; i < items.length; i++)
+							{
+								if ($.trim(items[i]) !== '')
+								{
+									tmpList.append($('<li>').html(items[i]));
+								}
+							}
+						}
+						else
+						{
+							tmpLi.append(wrapperHtml);
+							tmpList.append(tmpLi);
+						}
+
+						$(wrapper).replaceWith(tmpList);
+					}
+				},
+				remove: function(cmd, $list)
+				{
+					if ($.inArray('ul', this.selection.getBlocks())) cmd = 'unorderedlist';
+
+					document.execCommand('insert' + cmd);
+
+					var $current = $(this.selection.getCurrent());
+					this.indent.fixEmptyIndent();
+
+					if (!this.opts.linebreaks && $current.closest('li, th, td', this.$editor[0]).length === 0)
+					{
+						document.execCommand('formatblock', false, 'p');
+						this.$editor.find('ul, ol, blockquote').each($.proxy(this.utils.removeEmpty, this));
+					}
+
+					var $table = $(this.selection.getCurrent()).closest('table', this.$editor[0]);
+					var $prev = $table.prev();
+					if (!this.opts.linebreaks && $table.length !== 0 && $prev.length !== 0 && $prev[0].tagName == 'BR')
+					{
+						$prev.remove();
+					}
+
+					this.clean.clearUnverified();
+
+
+				}
+			};
+		},
+		modal: function()
+		{
+			return {
+				callbacks: {},
+				loadTemplates: function()
+				{
+					this.opts.modal = {
+						imageEdit: String()
+						+ '<section id="redactor-modal-image-edit">'
+							+ '<label>' + this.lang.get('title') + '</label>'
+							+ '<input type="text" id="redactor-image-title" />'
+							+ '<label class="redactor-image-link-option">' + this.lang.get('link') + '</label>'
+							+ '<input type="text" id="redactor-image-link" class="redactor-image-link-option" aria-label="' + this.lang.get('link') + '" />'
+							+ '<label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank" aria-label="' + this.lang.get('link_new_tab') + '"> ' + this.lang.get('link_new_tab') + '</label>'
+							+ '<label class="redactor-image-position-option">' + this.lang.get('image_position') + '</label>'
+							+ '<select class="redactor-image-position-option" id="redactor-image-align" aria-label="' + this.lang.get('image_position') + '">'
+								+ '<option value="none">' + this.lang.get('none') + '</option>'
+								+ '<option value="left">' + this.lang.get('left') + '</option>'
+								+ '<option value="center">' + this.lang.get('center') + '</option>'
+								+ '<option value="right">' + this.lang.get('right') + '</option>'
+							+ '</select>'
+						+ '</section>',
+
+						image: String()
+						+ '<section id="redactor-modal-image-insert">'
+							+ '<div id="redactor-modal-image-droparea"></div>'
+ 						+ '</section>',
+
+						file: String()
+						+ '<section id="redactor-modal-file-insert">'
+							+ '<div id="redactor-modal-file-upload-box">'
+								+ '<label>' + this.lang.get('filename') + '</label>'
+								+ '<input type="text" id="redactor-filename" aria-label="' + this.lang.get('filename') + '" /><br><br>'
+								+ '<div id="redactor-modal-file-upload"></div>'
+							+ '</div>'
+						+ '</section>',
+
+						link: String()
+						+ '<section id="redactor-modal-link-insert">'
+							+ '<label>URL</label>'
+							+ '<input type="url" id="redactor-link-url" aria-label="URL" />'
+							+ '<label>' + this.lang.get('text') + '</label>'
+							+ '<input type="text" id="redactor-link-url-text" aria-label="' + this.lang.get('text') + '" />'
+							+ '<label><input type="checkbox" id="redactor-link-blank"> ' + this.lang.get('link_new_tab') + '</label>'
+						+ '</section>'
+					};
+
+
+					$.extend(this.opts, this.opts.modal);
+
+				},
+				addCallback: function(name, callback)
+				{
+					this.modal.callbacks[name] = callback;
+				},
+				createTabber: function($modal)
+				{
+					this.modal.$tabber = $('<div>').attr('id', 'redactor-modal-tabber');
+
+					$modal.prepend(this.modal.$tabber);
+				},
+				addTab: function(id, name, active)
+				{
+					var $tab = $('<a href="#" rel="tab' + id + '">').text(name);
+					if (active)
+					{
+						$tab.addClass('active');
+					}
+
+					var self = this;
+					$tab.on('click', function(e)
+					{
+						e.preventDefault();
+						$('.redactor-tab').hide();
+						$('.redactor-' + $(this).attr('rel')).show();
+
+						self.modal.$tabber.find('a').removeClass('active');
+						$(this).addClass('active');
+
+					});
+
+					this.modal.$tabber.append($tab);
+				},
+				addTemplate: function(name, template)
+				{
+					this.opts.modal[name] = template;
+				},
+				getTemplate: function(name)
+				{
+					return this.opts.modal[name];
+				},
+				getModal: function()
+				{
+					return this.$modalBody.find('section');
+				},
+				load: function(templateName, title, width)
+				{
+					this.modal.templateName = templateName;
+					this.modal.width = width;
+
+					this.modal.build();
+					this.modal.enableEvents();
+					this.modal.setTitle(title);
+					this.modal.setDraggable();
+					this.modal.setContent();
+
+					// callbacks
+					if (typeof this.modal.callbacks[templateName] != 'undefined')
+					{
+						this.modal.callbacks[templateName].call(this);
+					}
+
+				},
+				show: function()
+				{
+					this.utils.disableBodyScroll();
+
+					if (this.utils.isMobile())
+					{
+						this.modal.showOnMobile();
+					}
+					else
+					{
+						this.modal.showOnDesktop();
+					}
+
+					if (this.opts.highContrast)
+					{
+						this.$modalBox.addClass("redactor-modal-contrast");
+					}
+
+					this.$modalOverlay.show();
+					this.$modalBox.show();
+
+					this.$modal.attr('tabindex', '-1');
+					this.$modal.focus();
+
+					this.modal.setButtonsWidth();
+
+					this.utils.saveScroll();
+
+					// resize
+					if (!this.utils.isMobile())
+					{
+						setTimeout($.proxy(this.modal.showOnDesktop, this), 0);
+						$(window).on('resize.redactor-modal', $.proxy(this.modal.resize, this));
+					}
+
+					// modal shown callback
+					this.core.setCallback('modalOpened', this.modal.templateName, this.$modal);
+
+					// fix bootstrap modal focus
+					$(document).off('focusin.modal');
+
+					// enter
+					this.$modal.find('input[type=text],input[type=url],input[type=email]').on('keydown.redactor-modal', $.proxy(this.modal.setEnter, this));
+				},
+				showOnDesktop: function()
+				{
+					var height = this.$modal.outerHeight();
+					var windowHeight = $(window).height();
+					var windowWidth = $(window).width();
+
+					if (this.modal.width > windowWidth)
+					{
+						this.$modal.css({
+							width: '96%',
+							marginTop: (windowHeight/2 - height/2) + 'px'
+						});
+						return;
+					}
+
+					if (height > windowHeight)
+					{
+						this.$modal.css({
+							width: this.modal.width + 'px',
+							marginTop: '20px'
+						});
+					}
+					else
+					{
+						this.$modal.css({
+							width: this.modal.width + 'px',
+							marginTop: (windowHeight/2 - height/2) + 'px'
+						});
+					}
+				},
+				showOnMobile: function()
+				{
+					this.$modal.css({
+						width: '96%',
+						marginTop: '2%'
+					});
+
+				},
+				resize: function()
+				{
+					if (this.utils.isMobile())
+					{
+						this.modal.showOnMobile();
+					}
+					else
+					{
+						this.modal.showOnDesktop();
+					}
+				},
+				setTitle: function(title)
+				{
+					this.$modalHeader.html(title);
+				},
+				setContent: function()
+				{
+					this.$modalBody.html(this.modal.getTemplate(this.modal.templateName));
+				},
+				setDraggable: function()
+				{
+					if (typeof $.fn.draggable === 'undefined') return;
+
+					this.$modal.draggable({ handle: this.$modalHeader });
+					this.$modalHeader.css('cursor', 'move');
+				},
+				setEnter: function(e)
+				{
+					if (e.which != 13) return;
+
+					e.preventDefault();
+					this.$modal.find('button.redactor-modal-action-btn').click();
+				},
+				createCancelButton: function()
+				{
+					var button = $('<button>').addClass('redactor-modal-btn redactor-modal-close-btn').html(this.lang.get('cancel'));
+					button.on('click', $.proxy(this.modal.close, this));
+
+					this.$modalFooter.append(button);
+				},
+				createDeleteButton: function(label)
+				{
+					return this.modal.createButton(label, 'delete');
+				},
+				createActionButton: function(label)
+				{
+					return this.modal.createButton(label, 'action');
+				},
+				createButton: function(label, className)
+				{
+					var button = $('<button>').addClass('redactor-modal-btn').addClass('redactor-modal-' + className + '-btn').html(label);
+					this.$modalFooter.append(button);
+
+					return button;
+				},
+				setButtonsWidth: function()
+				{
+					var buttons = this.$modalFooter.find('button');
+					var buttonsSize = buttons.length;
+					if (buttonsSize === 0) return;
+
+					buttons.css('width', (100/buttonsSize) + '%');
+				},
+				build: function()
+				{
+					this.modal.buildOverlay();
+
+					this.$modalBox = $('<div id="redactor-modal-box"/>').hide();
+					this.$modal = $('<div id="redactor-modal" role="dialog" aria-labelledby="redactor-modal-header" />');
+					this.$modalHeader = $('<header id="redactor-modal-header"/>');
+					this.$modalClose = $('<button type="button" id="redactor-modal-close" tabindex="1" aria-label="Close" />').html('&times;');
+					this.$modalBody = $('<div id="redactor-modal-body" />');
+					this.$modalFooter = $('<footer />');
+
+					this.$modal.append(this.$modalHeader);
+					this.$modal.append(this.$modalClose);
+					this.$modal.append(this.$modalBody);
+					this.$modal.append(this.$modalFooter);
+					this.$modalBox.append(this.$modal);
+					this.$modalBox.appendTo(document.body);
+				},
+				buildOverlay: function()
+				{
+					this.$modalOverlay = $('<div id="redactor-modal-overlay">').hide();
+					$('body').prepend(this.$modalOverlay);
+				},
+				enableEvents: function()
+				{
+					this.$modalClose.on('click.redactor-modal', $.proxy(this.modal.close, this));
+					$(document).on('keyup.redactor-modal', $.proxy(this.modal.closeHandler, this));
+					this.$editor.on('keyup.redactor-modal', $.proxy(this.modal.closeHandler, this));
+					this.$modalBox.on('click.redactor-modal', $.proxy(this.modal.close, this));
+				},
+				disableEvents: function()
+				{
+					this.$modalClose.off('click.redactor-modal');
+					$(document).off('keyup.redactor-modal');
+					this.$editor.off('keyup.redactor-modal');
+					this.$modalBox.off('click.redactor-modal');
+					$(window).off('resize.redactor-modal');
+				},
+				closeHandler: function(e)
+				{
+					if (e.which != this.keyCode.ESC) return;
+
+					this.modal.close(false);
+				},
+				close: function(e)
+				{
+					if (e)
+					{
+						if (!$(e.target).hasClass('redactor-modal-close-btn') && e.target != this.$modalClose[0] && e.target != this.$modalBox[0])
+						{
+							return;
+						}
+
+						e.preventDefault();
+					}
+
+					if (!this.$modalBox) return;
+
+					this.modal.disableEvents();
+					this.utils.enableBodyScroll();
+
+					this.$modalOverlay.remove();
+
+					this.$modalBox.fadeOut('fast', $.proxy(function()
+					{
+						this.$modalBox.remove();
+
+						setTimeout($.proxy(this.utils.restoreScroll, this), 0);
+
+						if (e !== undefined) this.selection.restore();
+
+						$(document.body).css('overflow', this.modal.bodyOveflow);
+						this.core.setCallback('modalClosed', this.modal.templateName);
+
+					}, this));
+
+				}
+			};
+		},
+		observe: function()
+		{
+			return {
+				load: function()
+				{
+					if (typeof this.opts.destroyed != "undefined") return;
+
+					if (this.utils.browser('msie'))
+					{
+						var self = this;
+						this.$editor.find('pre, code').on('mouseover',function()
+						{
+							self.$editor.attr('contenteditable', false);
+							$(this).attr('contenteditable', true);
+
+						}).on('mouseout',function()
+						{
+							self.$editor.attr('contenteditable', true);
+							$(this).removeAttr('contenteditable');
+
+						});
+					}
+
+					this.observe.images();
+					this.observe.links();
+				},
+				toolbar: function(e, btnName)
+				{
+					this.observe.buttons(e, btnName);
+					this.observe.dropdowns();
+				},
+				isCurrent: function($el, $current)
+				{
+					if (typeof $current == 'undefined')
+					{
+						var $current = $(this.selection.getCurrent());
+					}
+
+					return $current.is($el) || $current.parents($el).length > 0;
+				},
+				dropdowns: function()
+				{
+					var $current = $(this.selection.getCurrent());
+
+					$.each(this.opts.observe.dropdowns, $.proxy(function(key, value)
+					{
+						var observe = value.observe,
+							element = observe.element,
+							$item   = value.item,
+							inValues = typeof observe['in'] != 'undefined' ? observe['in'] : false,
+							outValues = typeof observe['out'] != 'undefined' ? observe['out'] : false;
+
+						if ($current.closest(element).size() > 0)
+						{
+							this.observe.setDropdownProperties($item, inValues, outValues);
+						}
+						else
+						{
+							this.observe.setDropdownProperties($item, outValues, inValues);
+						}
+					}, this));
+				},
+				setDropdownProperties: function($item, addProperties, deleteProperties)
+				{
+					if (deleteProperties && typeof deleteProperties['attr'] != 'undefined')
+					{
+						this.observe.setDropdownAttr($item, deleteProperties.attr, true);
+					}
+
+					if (typeof addProperties['attr'] != 'undefined')
+					{
+						this.observe.setDropdownAttr($item, addProperties.attr);
+					}
+
+					if (typeof addProperties['title'] != 'undefined')
+					{
+						$item.text(addProperties['title']);
+					}
+				},
+				setDropdownAttr: function($item, properties, isDelete)
+				{
+					$.each(properties, function(key, value)
+					{
+						if (key == 'class')
+						{
+							if (!isDelete)
+							{
+								$item.addClass(value);
+							}
+							else
+							{
+								$item.removeClass(value);
+							}
+						}
+						else
+						{
+							if (!isDelete)
+							{
+								$item.attr(key, value);
+							}
+							else
+							{
+								$item.removeAttr(key);
+							}
+						}
+					});
+				},
+				addDropdown: function($item, btnName, btnObject)
+				{
+					if (typeof btnObject.observe == "undefined") return;
+
+					btnObject.item = $item;
+
+					this.opts.observe.dropdowns.push(btnObject);
+				},
+				buttons: function(e, btnName)
+				{
+					var current = this.selection.getCurrent();
+					var parent = this.selection.getParent();
+
+					if (e !== false)
+					{
+						this.button.setInactiveAll();
+					}
+					else
+					{
+						this.button.setInactiveAll(btnName);
+					}
+
+					if (e === false && btnName !== 'html')
+					{
+						if ($.inArray(btnName, this.opts.activeButtons) != -1) this.button.toggleActive(btnName);
+						return;
+					}
+
+					//var linkButtonName = (this.utils.isCurrentOrParent('A')) ? this.lang.get('link_edit') : this.lang.get('link_insert');
+					//$('body').find('a.redactor-dropdown-link').text(linkButtonName);
+
+					$.each(this.opts.activeButtonsStates, $.proxy(function(key, value)
+					{
+						var parentEl = $(parent).closest(key, this.$editor[0]);
+						var currentEl = $(current).closest(key, this.$editor[0]);
+
+						if (parentEl.length !== 0 && !this.utils.isRedactorParent(parentEl)) return;
+						if (!this.utils.isRedactorParent(currentEl)) return;
+						if (parentEl.length !== 0 || currentEl.closest(key, this.$editor[0]).length !== 0)
+						{
+							this.button.setActive(value);
+						}
+
+					}, this));
+
+					var $parent = $(parent).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
+					if (this.utils.isRedactorParent(parent) && $parent.length)
+					{
+						var align = ($parent.css('text-align') === '') ? 'left' : $parent.css('text-align');
+						this.button.setActive('align' + align);
+					}
+				},
+				addButton: function(tag, btnName)
+				{
+					this.opts.activeButtons.push(btnName);
+					this.opts.activeButtonsStates[tag] = btnName;
+				},
+				images: function()
+				{
+					this.$editor.find('img').each($.proxy(function(i, img)
+					{
+						var $img = $(img);
+
+						// IE fix (when we clicked on an image and then press backspace IE does goes to image's url)
+						$img.closest('a', this.$editor[0]).on('click', function(e) { e.preventDefault(); });
+
+						if (this.utils.browser('msie')) $img.attr('unselectable', 'on');
+
+						this.image.setEditable($img);
+
+					}, this));
+
+					$(document).on('click.redactor-image-delete.' + this.uuid, $.proxy(function(e)
+					{
+						this.observe.image = false;
+						if (e.target.tagName == 'IMG' && this.utils.isRedactorParent(e.target))
+						{
+							this.observe.image = (this.observe.image && this.observe.image == e.target) ? false : e.target;
+						}
+
+					}, this));
+
+				},
+				links: function()
+				{
+					if (!this.opts.linkTooltip) return;
+
+					this.$editor.find('a').on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.showTooltip, this));
+					this.$editor.on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
+					$(document).on('touchstart.redactor.' + this.uuid + ' click.redactor.' + this.uuid, $.proxy(this.observe.closeTooltip, this));
+				},
+				getTooltipPosition: function($link)
+				{
+					return $link.offset();
+				},
+				showTooltip: function(e)
+				{
+					var $el = $(e.target);
+
+					if ($el[0].tagName == 'IMG')
+						return;
+
+					if ($el[0].tagName !== 'A')
+						$el = $el.closest('a', this.$editor[0]);
+
+					if ($el[0].tagName !== 'A')
+						return;
+
+					var $link = $el;
+
+					var pos = this.observe.getTooltipPosition($link);
+					var tooltip = $('<span class="redactor-link-tooltip"></span>');
+
+					var href = $link.attr('href');
+					if (href === undefined)
+					{
+						href = '';
+					}
+
+					if (href.length > 24) href = href.substring(0, 24) + '...';
+
+					var aLink = $('<a href="' + $link.attr('href') + '" target="_blank" />').html(href).addClass('redactor-link-tooltip-action');
+					var aEdit = $('<a href="#" />').html(this.lang.get('edit')).on('click', $.proxy(this.link.show, this)).addClass('redactor-link-tooltip-action');
+					var aUnlink = $('<a href="#" />').html(this.lang.get('unlink')).on('click', $.proxy(this.link.unlink, this)).addClass('redactor-link-tooltip-action');
+
+					tooltip.append(aLink).append(' | ').append(aEdit).append(' | ').append(aUnlink);
+					tooltip.css({
+						top: (pos.top + parseInt($link.css('line-height'), 10)) + 'px',
+						left: pos.left + 'px'
+					});
+
+					$('.redactor-link-tooltip').remove();
+					$('body').append(tooltip);
+				},
+				closeTooltip: function(e)
+				{
+					e = e.originalEvent || e;
+
+					var target = e.target;
+					var $parent = $(target).closest('a', this.$editor[0]);
+					if ($parent.length !== 0 && $parent[0].tagName === 'A' && target.tagName !== 'A')
+					{
+						return;
+					}
+					else if ((target.tagName === 'A' && this.utils.isRedactorParent(target)) || $(target).hasClass('redactor-link-tooltip-action'))
+					{
+						return;
+					}
+
+					$('.redactor-link-tooltip').remove();
+				}
+
+			};
+		},
+		paragraphize: function()
+		{
+			return {
+				load: function(html)
+				{
+					if (this.opts.linebreaks) return html;
+					if (html === '' || html === '<p></p>') return this.opts.emptyHtml;
+
+					html = html + "\n";
+
+					this.paragraphize.safes = [];
+					this.paragraphize.z = 0;
+
+					html = html.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi, '</blockquote>');
+
+					html = this.paragraphize.getSafes(html);
+					html = this.paragraphize.getSafesComments(html);
+					html = this.paragraphize.replaceBreaksToNewLines(html);
+					html = this.paragraphize.replaceBreaksToParagraphs(html);
+					html = this.paragraphize.clear(html);
+					html = this.paragraphize.restoreSafes(html);
+
+					html = html.replace(new RegExp('<br\\s?/?>\n?<(' + this.opts.paragraphizeBlocks.join('|') + ')(.*?[^>])>', 'gi'), '<p><br /></p>\n<$1$2>');
+
+					return $.trim(html);
+				},
+				getSafes: function(html)
+				{
+					var $div = $('<div />').append(html);
+
+					// remove paragraphs in blockquotes
+					$div.find('blockquote p').replaceWith(function()
+					{
+						return $(this).append('<br />').contents();
+					});
+
+					html = $div.html();
+
+					$div.find(this.opts.paragraphizeBlocks.join(', ')).each($.proxy(function(i,s)
+					{
+						this.paragraphize.z++;
+						this.paragraphize.safes[this.paragraphize.z] = s.outerHTML;
+						html = html.replace(s.outerHTML, '\n{replace' + this.paragraphize.z + '}');
+
+					}, this));
+
+					return html;
+				},
+				getSafesComments: function(html)
+				{
+					var commentsMatches = html.match(/<!--([\w\W]*?)-->/gi);
+
+					if (!commentsMatches) return html;
+
+					$.each(commentsMatches, $.proxy(function(i,s)
+					{
+						this.paragraphize.z++;
+						this.paragraphize.safes[this.paragraphize.z] = s;
+						html = html.replace(s, '\n{replace' + this.paragraphize.z + '}');
+					}, this));
+
+					return html;
+				},
+				restoreSafes: function(html)
+				{
+					$.each(this.paragraphize.safes, function(i,s)
+					{
+						s = (typeof s !== 'undefined') ? s.replace(/\$/g, '&#36;') : s;
+						html = html.replace('{replace' + i + '}', s);
+
+					});
+
+					return html;
+				},
+				replaceBreaksToParagraphs: function(html)
+				{
+					var htmls = html.split(new RegExp('\n', 'g'), -1);
+
+					html = '';
+					if (htmls)
+					{
+						var len = htmls.length;
+						for (var i = 0; i < len; i++)
+						{
+							if (!htmls.hasOwnProperty(i)) return;
+
+							if (htmls[i].search('{replace') == -1)
+							{
+								htmls[i] = htmls[i].replace(/<p>\n\t?<\/p>/gi, '');
+								htmls[i] = htmls[i].replace(/<p><\/p>/gi, '');
+
+								if (htmls[i] !== '')
+								{
+									html += '<p>' +  htmls[i].replace(/^\n+|\n+$/g, "") + "</p>";
+								}
+							}
+							else html += htmls[i];
+						}
+					}
+
+					return html;
+				},
+				replaceBreaksToNewLines: function(html)
+				{
+					html = html.replace(/<br \/>\s*<br \/>/gi, "\n\n");
+					html = html.replace(/<br\s?\/?>\n?<br\s?\/?>/gi, "\n<br /><br />");
+
+					html = html.replace(new RegExp("\r\n", 'g'), "\n");
+					html = html.replace(new RegExp("\r", 'g'), "\n");
+					html = html.replace(new RegExp("/\n\n+/"), 'g', "\n\n");
+
+					return html;
+				},
+				clear: function(html)
+				{
+					html = html.replace(new RegExp('</blockquote></p>', 'gi'), '</blockquote>');
+					html = html.replace(new RegExp('<p></blockquote>', 'gi'), '</blockquote>');
+					html = html.replace(new RegExp('<p><blockquote>', 'gi'), '<blockquote>');
+					html = html.replace(new RegExp('<blockquote></p>', 'gi'), '<blockquote>');
+
+					html = html.replace(new RegExp('<p><p ', 'gi'), '<p ');
+					html = html.replace(new RegExp('<p><p>', 'gi'), '<p>');
+					html = html.replace(new RegExp('</p></p>', 'gi'), '</p>');
+					html = html.replace(new RegExp('<p>\\s?</p>', 'gi'), '');
+					html = html.replace(new RegExp("\n</p>", 'gi'), '</p>');
+					html = html.replace(new RegExp('<p>\t?\t?\n?<p>', 'gi'), '<p>');
+					html = html.replace(new RegExp('<p>\t*</p>', 'gi'), '');
+
+					return html;
+				}
+			};
+		},
+		paste: function()
+		{
+			return {
+				init: function(e)
+				{
+					if (!this.opts.cleanOnPaste)
+					{
+						setTimeout($.proxy(this.code.sync, this), 1);
+						return;
+					}
+
+					this.rtePaste = true;
+
+					this.buffer.set();
+					this.selection.save();
+					this.utils.saveScroll();
+
+					this.paste.createPasteBox();
+
+					$(window).on('scroll.redactor-freeze', $.proxy(function()
+					{
+						$(window).scrollTop(this.saveBodyScroll);
+
+					}, this));
+
+					setTimeout($.proxy(function()
+					{
+						var html = this.$pasteBox.html();
+
+						this.$pasteBox.remove();
+
+						this.selection.restore();
+						this.utils.restoreScroll();
+
+						this.paste.insert(html);
+
+						$(window).off('scroll.redactor-freeze');
+
+						if (this.linkify.isEnabled())
+						{
+							this.linkify.format();
+						}
+
+					}, this), 1);
+				},
+				createPasteBox: function()
+				{
+					this.$pasteBox = $('<div>').html('').attr('contenteditable', 'true').css({ position: 'fixed', width: 0, top: 0, left: '-9999px' });
+
+					if (this.utils.browser('msie'))
+					{
+						this.$box.append(this.$pasteBox);
+					}
+					else
+					{
+						// bootstrap modal
+						if ($('.modal-body').length > 0)
+						{
+
+							$('.modal.in .modal-body').append(this.$pasteBox);
+						}
+						else
+						{
+							$('body').append(this.$pasteBox);
+						}
+
+					}
+
+					this.$pasteBox.focus();
+				},
+				insert: function(html)
+				{
+					html = this.core.setCallback('pasteBefore', html);
+
+					// clean
+					html = (this.utils.isSelectAll()) ? this.clean.onPaste(html, false) : this.clean.onPaste(html);
+
+					html = this.core.setCallback('paste', html);
+
+					if (this.utils.isSelectAll())
+					{
+						this.insert.set(html, false);
+					}
+					else
+					{
+						this.insert.html(html, false);
+					}
+
+					this.utils.disableSelectAll();
+					this.rtePaste = false;
+
+					setTimeout($.proxy(this.clean.clearUnverified, this), 10);
+
+					// clean empty spans
+					setTimeout($.proxy(function()
+					{
+						var spans = this.$editor.find('span');
+						$.each(spans, function(i,s)
+						{
+							var html = s.innerHTML.replace(/\u200B/, '');
+							if (html === '' && s.attributes.length === 0) $(s).remove();
+
+						});
+
+					}, this), 10);
+
+				}
+			};
+		},
+		placeholder: function()
+		{
+			return {
+				enable: function()
+				{
+					if (!this.placeholder.is()) return;
+
+					this.$editor.attr('placeholder', this.$element.attr('placeholder'));
+
+					this.placeholder.toggle();
+					this.$editor.on('keydown.redactor-placeholder', $.proxy(this.placeholder.toggle, this));
+				},
+				toggle: function()
+				{
+					setTimeout($.proxy(function()
+					{
+						var func = this.utils.isEmpty(this.$editor.html(), false) ? 'addClass' : 'removeClass';
+						this.$editor[func]('redactor-placeholder');
+
+					}, this), 5);
+				},
+				remove: function()
+				{
+					this.$editor.removeClass('redactor-placeholder');
+				},
+				is: function()
+				{
+					if (this.opts.placeholder)
+					{
+						return this.$element.attr('placeholder', this.opts.placeholder);
+					}
+					else
+					{
+						return !(typeof this.$element.attr('placeholder') == 'undefined' || this.$element.attr('placeholder') === '');
+					}
+				}
+			};
+		},
+		progress: function()
+		{
+			return {
+				show: function()
+				{
+					$(document.body).append($('<div id="redactor-progress"><span></span></div>'));
+					$('#redactor-progress').fadeIn();
+				},
+				hide: function()
+				{
+					$('#redactor-progress').fadeOut(1500, function()
+					{
+						$(this).remove();
+					});
+				}
+
+			};
+		},
+		selection: function()
+		{
+			return {
+				get: function()
+				{
+					this.sel = document.getSelection();
+
+					if (document.getSelection && this.sel.getRangeAt && this.sel.rangeCount)
+					{
+						this.range = this.sel.getRangeAt(0);
+					}
+					else
+					{
+						this.range = document.createRange();
+					}
+				},
+				addRange: function()
+				{
+					try {
+						this.sel.removeAllRanges();
+					} catch (e) {}
+
+					this.sel.addRange(this.range);
+				},
+				getCurrent: function()
+				{
+					var el = false;
+
+					this.selection.get();
+
+					if (this.sel && this.sel.rangeCount > 0)
+					{
+						el = this.sel.getRangeAt(0).startContainer;
+					}
+
+					return this.utils.isRedactorParent(el);
+				},
+				getParent: function(elem)
+				{
+					elem = elem || this.selection.getCurrent();
+					if (elem)
+					{
+						return this.utils.isRedactorParent($(elem).parent()[0]);
+					}
+
+					return false;
+				},
+				getPrev: function()
+				{
+					return  window.getSelection().anchorNode.previousSibling;
+				},
+				getNext: function()
+				{
+					return window.getSelection().anchorNode.nextSibling;
+				},
+				getBlock: function(node)
+				{
+					node = node || this.selection.getCurrent();
+
+					while (node)
+					{
+						if (this.utils.isBlockTag(node.tagName))
+						{
+							return ($(node).hasClass('redactor-editor')) ? false : node;
+						}
+
+						node = node.parentNode;
+					}
+
+					return false;
+				},
+				getInlines: function(nodes, tags)
+				{
+					this.selection.get();
+
+					if (this.range && this.range.collapsed)
+					{
+						return false;
+					}
+
+					var inlines = [];
+					nodes = (typeof nodes == 'undefined' || nodes === false) ? this.selection.getNodes() : nodes;
+					var inlineTags = this.opts.inlineTags;
+					inlineTags.push('span');
+
+					if (typeof tags !== 'undefined')
+					{
+						for (var i = 0; i < tags.length; i++)
+						{
+							inlineTags.push(tags[i]);
+						}
+					}
+
+					$.each(nodes, $.proxy(function(i,node)
+					{
+						if ($.inArray(node.tagName.toLowerCase(), inlineTags) != -1)
+						{
+							inlines.push(node);
+						}
+
+					}, this));
+
+					return (inlines.length === 0) ? false : inlines;
+				},
+				getInlinesTags: function(tags)
+				{
+					this.selection.get();
+
+					if (this.range && this.range.collapsed)
+					{
+						return false;
+					}
+
+					var inlines = [];
+					var nodes =  this.selection.getNodes();
+					$.each(nodes, $.proxy(function(i,node)
+					{
+						if ($.inArray(node.tagName.toLowerCase(), tags) != -1)
+						{
+							inlines.push(node);
+						}
+
+					}, this));
+
+					return (inlines.length === 0) ? false : inlines;
+				},
+				getBlocks: function(nodes)
+				{
+					this.selection.get();
+
+					if (this.range && this.range.collapsed)
+					{
+						return [this.selection.getBlock()];
+					}
+
+					var blocks = [];
+					nodes = (typeof nodes == 'undefined') ? this.selection.getNodes() : nodes;
+					$.each(nodes, $.proxy(function(i,node)
+					{
+						if (this.utils.isBlock(node))
+						{
+							this.selection.lastBlock = node;
+							blocks.push(node);
+						}
+
+					}, this));
+
+					return (blocks.length === 0) ? [this.selection.getBlock()] : blocks;
+				},
+				getLastBlock: function()
+				{
+					return this.selection.lastBlock;
+				},
+				getNodes: function()
+				{
+					this.selection.get();
+
+					var startNode = this.selection.getNodesMarker(1);
+					var endNode = this.selection.getNodesMarker(2);
+
+					if (this.range.collapsed === false)
+					{
+					   if (window.getSelection) {
+					        var sel = window.getSelection();
+					        if (sel.rangeCount > 0) {
+
+					            var range = sel.getRangeAt(0);
+					            var startPointNode = range.startContainer, startOffset = range.startOffset;
+
+					            var boundaryRange = range.cloneRange();
+					            boundaryRange.collapse(false);
+					            boundaryRange.insertNode(endNode);
+					            boundaryRange.setStart(startPointNode, startOffset);
+					            boundaryRange.collapse(true);
+					            boundaryRange.insertNode(startNode);
+
+					            // Reselect the original text
+					            range.setStartAfter(startNode);
+					            range.setEndBefore(endNode);
+					            sel.removeAllRanges();
+					            sel.addRange(range);
+					        }
+					    }
+					}
+					else
+					{
+						this.selection.setNodesMarker(this.range, startNode, true);
+						endNode = startNode;
+					}
+
+					var nodes = [];
+					var counter = 0;
+
+					var self = this;
+					this.$editor.find('*').each(function()
+					{
+						if (this == startNode)
+						{
+							var parent = $(this).parent();
+							if (parent.length !== 0 && parent[0].tagName != 'BODY' && self.utils.isRedactorParent(parent[0]))
+							{
+								nodes.push(parent[0]);
+							}
+
+							nodes.push(this);
+							counter = 1;
+						}
+						else
+						{
+							if (counter > 0)
+							{
+								nodes.push(this);
+								counter = counter + 1;
+							}
+						}
+
+						if (this == endNode)
+						{
+							return false;
+						}
+
+					});
+
+					var finalNodes = [];
+					var len = nodes.length;
+					for (var i = 0; i < len; i++)
+					{
+						if (nodes[i].id != 'nodes-marker-1' && nodes[i].id != 'nodes-marker-2')
+						{
+							finalNodes.push(nodes[i]);
+						}
+					}
+
+					this.selection.removeNodesMarkers();
+
+					return finalNodes;
+
+				},
+				getNodesMarker: function(num)
+				{
+					return $('<span id="nodes-marker-' + num + '" class="redactor-nodes-marker" data-verified="redactor">' + this.opts.invisibleSpace + '</span>')[0];
+				},
+				setNodesMarker: function(range, node, type)
+				{
+					var range = range.cloneRange();
+
+					try {
+						range.collapse(type);
+						range.insertNode(node);
+					}
+					catch (e) {}
+				},
+				removeNodesMarkers: function()
+				{
+					$(document).find('span.redactor-nodes-marker').remove();
+					this.$editor.find('span.redactor-nodes-marker').remove();
+				},
+				fromPoint: function(start, end)
+				{
+					this.caret.setOffset(start, end);
+				},
+				wrap: function(tag)
+				{
+					this.selection.get();
+
+					if (this.range.collapsed) return false;
+
+					var wrapper = document.createElement(tag);
+					wrapper.appendChild(this.range.extractContents());
+					this.range.insertNode(wrapper);
+
+					return wrapper;
+				},
+				selectElement: function(node)
+				{
+					if (this.utils.browser('mozilla'))
+					{
+						node = node[0] || node;
+
+						var range = document.createRange();
+						range.selectNodeContents(node);
+					}
+					else
+					{
+						this.caret.set(node, 0, node, 1);
+					}
+				},
+				selectAll: function()
+				{
+					this.selection.get();
+					this.range.selectNodeContents(this.$editor[0]);
+					this.selection.addRange();
+				},
+				remove: function()
+				{
+					this.selection.get();
+					this.sel.removeAllRanges();
+				},
+				save: function()
+				{
+					this.selection.createMarkers();
+				},
+				createMarkers: function()
+				{
+					this.selection.get();
+
+					var node1 = this.selection.getMarker(1);
+
+					this.selection.setMarker(this.range, node1, true);
+					if (this.range.collapsed === false)
+					{
+						var node2 = this.selection.getMarker(2);
+						this.selection.setMarker(this.range, node2, false);
+					}
+
+					this.savedSel = this.$editor.html();
+				},
+				getMarker: function(num)
+				{
+					if (typeof num == 'undefined') num = 1;
+
+					return $('<span id="selection-marker-' + num + '" class="redactor-selection-marker"  data-verified="redactor">' + this.opts.invisibleSpace + '</span>')[0];
+				},
+				getMarkerAsHtml: function(num)
+				{
+					return this.utils.getOuterHtml(this.selection.getMarker(num));
+				},
+				setMarker: function(range, node, type)
+				{
+					range = range.cloneRange();
+
+					try {
+						range.collapse(type);
+						range.insertNode(node);
+
+					}
+					catch (e)
+					{
+						this.focus.setStart();
+					}
+
+				},
+				restore: function()
+				{
+					var node1 = this.$editor.find('span#selection-marker-1');
+					var node2 = this.$editor.find('span#selection-marker-2');
+
+					if (this.utils.browser('mozilla'))
+					{
+						this.$editor.focus();
+					}
+
+					if (node1.length !== 0 && node2.length !== 0)
+					{
+						this.caret.set(node1, 0, node2, 0);
+					}
+					else if (node1.length !== 0)
+					{
+						this.caret.set(node1, 0, node1, 0);
+					}
+					else
+					{
+						this.$editor.focus();
+					}
+
+					this.selection.removeMarkers();
+					this.savedSel = false;
+
+				},
+				removeMarkers: function()
+				{
+					this.$editor.find('span.redactor-selection-marker').each(function(i,s)
+					{
+						var text = $(s).text().replace(/\u200B/g, '');
+						if (text === '') $(s).remove();
+						else $(s).replaceWith(function() { return $(this).contents(); });
+					});
+				},
+				getText: function()
+				{
+					this.selection.get();
+
+					return this.sel.toString();
+				},
+				getHtml: function()
+				{
+					var html = '';
+
+					this.selection.get();
+					if (this.sel.rangeCount)
+					{
+						var container = document.createElement('div');
+						var len = this.sel.rangeCount;
+						for (var i = 0; i < len; ++i)
+						{
+							container.appendChild(this.sel.getRangeAt(i).cloneContents());
+						}
+
+						html = container.innerHTML;
+					}
+
+					return this.clean.onSync(html);
+				},
+				replaceSelection: function(html)
+				{
+					this.selection.get();
+					this.range.deleteContents();
+					var div = document.createElement("div");
+					div.innerHTML = html;
+					var frag = document.createDocumentFragment(), child;
+					while ((child = div.firstChild)) {
+						frag.appendChild(child);
+					}
+
+					this.range.insertNode(frag);
+				},
+				replaceWithHtml: function(html)
+				{
+					html = this.selection.getMarkerAsHtml(1) + html + this.selection.getMarkerAsHtml(2);
+
+					this.selection.get();
+
+					if (window.getSelection && window.getSelection().getRangeAt)
+					{
+						this.selection.replaceSelection(html);
+					}
+					else if (document.selection && document.selection.createRange)
+					{
+						this.range.pasteHTML(html);
+					}
+
+					this.selection.restore();
+					this.code.sync();
+				}
+			};
+		},
+		shortcuts: function()
+		{
+			return {
+				init: function(e, key)
+				{
+					// disable browser's hot keys for bold and italic
+					if (!this.opts.shortcuts)
+					{
+						if ((e.ctrlKey || e.metaKey) && (key === 66 || key === 73)) e.preventDefault();
+						return false;
+					}
+
+					$.each(this.opts.shortcuts, $.proxy(function(str, command)
+					{
+						var keys = str.split(',');
+						var len = keys.length;
+						for (var i = 0; i < len; i++)
+						{
+							if (typeof keys[i] === 'string')
+							{
+								this.shortcuts.handler(e, $.trim(keys[i]), $.proxy(function()
+								{
+									var func;
+									if (command.func.search(/\./) != '-1')
+									{
+										func = command.func.split('.');
+										if (typeof this[func[0]] != 'undefined')
+										{
+											this[func[0]][func[1]].apply(this, command.params);
+										}
+									}
+									else
+									{
+										this[command.func].apply(this, command.params);
+									}
+
+								}, this));
+							}
+
+						}
+
+					}, this));
+				},
+				handler: function(e, keys, origHandler)
+				{
+					// based on https://github.com/jeresig/jquery.hotkeys
+					var hotkeysSpecialKeys =
+					{
+						8: "backspace", 9: "tab", 10: "return", 13: "return", 16: "shift", 17: "ctrl", 18: "alt", 19: "pause",
+						20: "capslock", 27: "esc", 32: "space", 33: "pageup", 34: "pagedown", 35: "end", 36: "home",
+						37: "left", 38: "up", 39: "right", 40: "down", 45: "insert", 46: "del", 59: ";", 61: "=",
+						96: "0", 97: "1", 98: "2", 99: "3", 100: "4", 101: "5", 102: "6", 103: "7",
+						104: "8", 105: "9", 106: "*", 107: "+", 109: "-", 110: ".", 111 : "/",
+						112: "f1", 113: "f2", 114: "f3", 115: "f4", 116: "f5", 117: "f6", 118: "f7", 119: "f8",
+						120: "f9", 121: "f10", 122: "f11", 123: "f12", 144: "numlock", 145: "scroll", 173: "-", 186: ";", 187: "=",
+						188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\", 221: "]", 222: "'"
+					};
+
+
+					var hotkeysShiftNums =
+					{
+						"`": "~", "1": "!", "2": "@", "3": "#", "4": "$", "5": "%", "6": "^", "7": "&",
+						"8": "*", "9": "(", "0": ")", "-": "_", "=": "+", ";": ": ", "'": "\"", ",": "<",
+						".": ">",  "/": "?",  "\\": "|"
+					};
+
+					keys = keys.toLowerCase().split(" ");
+					var special = hotkeysSpecialKeys[e.keyCode],
+						character = String.fromCharCode( e.which ).toLowerCase(),
+						modif = "", possible = {};
+
+					$.each([ "alt", "ctrl", "meta", "shift"], function(index, specialKey)
+					{
+						if (e[specialKey + 'Key'] && special !== specialKey)
+						{
+							modif += specialKey + '+';
+						}
+					});
+
+
+					if (special) possible[modif + special] = true;
+					if (character)
+					{
+						possible[modif + character] = true;
+						possible[modif + hotkeysShiftNums[character]] = true;
+
+						// "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
+						if (modif === "shift+")
+						{
+							possible[hotkeysShiftNums[character]] = true;
+						}
+					}
+
+					for (var i = 0, len = keys.length; i < len; i++)
+					{
+						if (possible[keys[i]])
+						{
+							e.preventDefault();
+							return origHandler.apply(this, arguments);
+						}
+					}
+				}
+			};
+		},
+		tabifier: function()
+		{
+			return {
+				get: function(code)
+				{
+					if (!this.opts.tabifier) return code;
+
+					// clean setup
+					var ownLine = ['area', 'body', 'head', 'hr', 'i?frame', 'link', 'meta', 'noscript', 'style', 'script', 'table', 'tbody', 'thead', 'tfoot'];
+					var contOwnLine = ['li', 'dt', 'dt', 'h[1-6]', 'option', 'script'];
+					var newLevel = ['p', 'blockquote', 'div', 'dl', 'fieldset', 'form', 'frameset', 'map', 'ol', 'pre', 'select', 'td', 'th', 'tr', 'ul'];
+
+					this.tabifier.lineBefore = new RegExp('^<(/?' + ownLine.join('|/?' ) + '|' + contOwnLine.join('|') + ')[ >]');
+					this.tabifier.lineAfter = new RegExp('^<(br|/?' + ownLine.join('|/?' ) + '|/' + contOwnLine.join('|/') + ')[ >]');
+					this.tabifier.newLevel = new RegExp('^</?(' + newLevel.join('|' ) + ')[ >]');
+
+					var i = 0,
+					codeLength = code.length,
+					point = 0,
+					start = null,
+					end = null,
+					tag = '',
+					out = '',
+					cont = '';
+
+					this.tabifier.cleanlevel = 0;
+
+					for (; i < codeLength; i++)
+					{
+						point = i;
+
+						// if no more tags, copy and exit
+						if (-1 == code.substr(i).indexOf( '<' ))
+						{
+							out += code.substr(i);
+
+							return this.tabifier.finish(out);
+						}
+
+						// copy verbatim until a tag
+						while (point < codeLength && code.charAt(point) != '<')
+						{
+							point++;
+						}
+
+						if (i != point)
+						{
+							cont = code.substr(i, point - i);
+							if (!cont.match(/^\s{2,}$/g))
+							{
+								if ('\n' == out.charAt(out.length - 1)) out += this.tabifier.getTabs();
+								else if ('\n' == cont.charAt(0))
+								{
+									out += '\n' + this.tabifier.getTabs();
+									cont = cont.replace(/^\s+/, '');
+								}
+
+								out += cont;
+							}
+
+							if (cont.match(/\n/)) out += '\n' + this.tabifier.getTabs();
+						}
+
+						start = point;
+
+						// find the end of the tag
+						while (point < codeLength && '>' != code.charAt(point))
+						{
+							point++;
+						}
+
+						tag = code.substr(start, point - start);
+						i = point;
+
+						var t;
+
+						if ('!--' == tag.substr(1, 3))
+						{
+							if (!tag.match(/--$/))
+							{
+								while ('-->' != code.substr(point, 3))
+								{
+									point++;
+								}
+								point += 2;
+								tag = code.substr(start, point - start);
+								i = point;
+							}
+
+							if ('\n' != out.charAt(out.length - 1)) out += '\n';
+
+							out += this.tabifier.getTabs();
+							out += tag + '>\n';
+						}
+						else if ('!' == tag[1])
+						{
+							out = this.tabifier.placeTag(tag + '>', out);
+						}
+						else if ('?' == tag[1])
+						{
+							out += tag + '>\n';
+						}
+						else if (t = tag.match(/^<(script|style|pre)/i))
+						{
+							t[1] = t[1].toLowerCase();
+							tag = this.tabifier.cleanTag(tag);
+							out = this.tabifier.placeTag(tag, out);
+							end = String(code.substr(i + 1)).toLowerCase().indexOf('</' + t[1]);
+
+							if (end)
+							{
+								cont = code.substr(i + 1, end);
+								i += end;
+								out += cont;
+							}
+						}
+						else
+						{
+							tag = this.tabifier.cleanTag(tag);
+							out = this.tabifier.placeTag(tag, out);
+						}
+					}
+
+					return this.tabifier.finish(out);
+				},
+				getTabs: function()
+				{
+					var s = '';
+					for ( var j = 0; j < this.tabifier.cleanlevel; j++ )
+					{
+						s += '\t';
+					}
+
+					return s;
+				},
+				finish: function(code)
+				{
+					code = code.replace(/\n\s*\n/g, '\n');
+					code = code.replace(/^[\s\n]*/, '');
+					code = code.replace(/[\s\n]*$/, '');
+					code = code.replace(/<script(.*?)>\n<\/script>/gi, '<script$1></script>');
+
+					this.tabifier.cleanlevel = 0;
+
+					return code;
+				},
+				cleanTag: function (tag)
+				{
+					var tagout = '';
+					tag = tag.replace(/\n/g, ' ');
+					tag = tag.replace(/\s{2,}/g, ' ');
+					tag = tag.replace(/^\s+|\s+$/g, ' ');
+
+					var suffix = '';
+					if (tag.match(/\/$/))
+					{
+						suffix = '/';
+						tag = tag.replace(/\/+$/, '');
+					}
+
+					var m;
+					while (m = /\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(tag))
+					{
+						if (m[2]) tagout += m[1].toLowerCase() + '=' + m[2];
+						else if (m[1]) tagout += m[1].toLowerCase();
+
+						tagout += ' ';
+						tag = tag.substr(m[0].length);
+					}
+
+					return tagout.replace(/\s*$/, '') + suffix + '>';
+				},
+				placeTag: function (tag, out)
+				{
+					var nl = tag.match(this.tabifier.newLevel);
+
+					if (tag.match(this.tabifier.lineBefore) || nl)
+					{
+						out = out.replace(/\s*$/, '');
+						out += '\n';
+					}
+
+					if (nl && '/' == tag.charAt(1)) this.tabifier.cleanlevel--;
+					if ('\n' == out.charAt(out.length - 1)) out += this.tabifier.getTabs();
+					if (nl && '/' != tag.charAt(1)) this.tabifier.cleanlevel++;
+
+					out += tag;
+
+					if (tag.match(this.tabifier.lineAfter) || tag.match(this.tabifier.newLevel))
+					{
+						out = out.replace(/ *$/, '');
+						//out += '\n';
+					}
+
+					return out;
+				}
+			};
+		},
+		tidy: function()
+		{
+			return {
+				setupAllowed: function()
+				{
+					var index = $.inArray('span', this.opts.removeEmpty);
+					if (index !== -1)
+					{
+						this.opts.removeEmpty.splice(index, 1);
+					}
+
+					if (this.opts.allowedTags) this.opts.deniedTags = false;
+					if (this.opts.allowedAttr) this.opts.removeAttr = false;
+
+					if (this.opts.linebreaks) return;
+
+					var tags = ['p', 'section'];
+					if (this.opts.allowedTags) this.tidy.addToAllowed(tags);
+					if (this.opts.deniedTags) this.tidy.removeFromDenied(tags);
+
+				},
+				addToAllowed: function(tags)
+				{
+					var len = tags.length;
+					for (var i = 0; i < len; i++)
+					{
+						if ($.inArray(tags[i], this.opts.allowedTags) == -1)
+						{
+							this.opts.allowedTags.push(tags[i]);
+						}
+					}
+				},
+				removeFromDenied: function(tags)
+				{
+					var len = tags.length;
+					for (var i = 0; i < len; i++)
+					{
+						var pos = $.inArray(tags[i], this.opts.deniedTags);
+						if (pos != -1)
+						{
+							this.opts.deniedTags.splice(pos, 1);
+						}
+					}
+				},
+				load: function(html, options)
+				{
+					this.tidy.settings = {
+						deniedTags: this.opts.deniedTags,
+						allowedTags: this.opts.allowedTags,
+						removeComments: this.opts.removeComments,
+						replaceTags: this.opts.replaceTags,
+						replaceStyles: this.opts.replaceStyles,
+						removeDataAttr: this.opts.removeDataAttr,
+						removeAttr: this.opts.removeAttr,
+						allowedAttr: this.opts.allowedAttr,
+						removeWithoutAttr: this.opts.removeWithoutAttr,
+						removeEmpty: this.opts.removeEmpty
+					};
+
+					$.extend(this.tidy.settings, options);
+
+					html = this.tidy.removeComments(html);
+
+					// create container
+					this.tidy.$div = $('<div />').append(html);
+
+					// clean
+					this.tidy.replaceTags();
+					this.tidy.replaceStyles();
+					this.tidy.removeTags();
+
+					this.tidy.removeAttr();
+					this.tidy.removeEmpty();
+					this.tidy.removeParagraphsInLists();
+					this.tidy.removeDataAttr();
+					this.tidy.removeWithoutAttr();
+
+					html = this.tidy.$div.html();
+					this.tidy.$div.remove();
+
+					return html;
+				},
+				removeComments: function(html)
+				{
+					if (!this.tidy.settings.removeComments) return html;
+
+					return html.replace(/<!--[\s\S]*?-->/gi, '');
+				},
+				replaceTags: function(html)
+				{
+					if (!this.tidy.settings.replaceTags) return html;
+
+					var len = this.tidy.settings.replaceTags.length;
+					var replacement = [], rTags = [];
+					for (var i = 0; i < len; i++)
+					{
+						rTags.push(this.tidy.settings.replaceTags[i][1]);
+						replacement.push(this.tidy.settings.replaceTags[i][0]);
+					}
+
+					$.each(replacement, $.proxy(function(key, value)
+					{
+						this.tidy.$div.find(value).replaceWith(function()
+						{
+							return $("<" + rTags[key] + " />", {html: $(this).html()});
+						});
+					}, this));
+				},
+				replaceStyles: function()
+				{
+					if (!this.tidy.settings.replaceStyles) return;
+
+					var len = this.tidy.settings.replaceStyles.length;
+					this.tidy.$div.find('span').each($.proxy(function(n,s)
+					{
+						var $el = $(s);
+						var style = $el.attr('style');
+						for (var i = 0; i < len; i++)
+						{
+							if (style && style.match(new RegExp('^' + this.tidy.settings.replaceStyles[i][0], 'i')))
+							{
+								var tagName = this.tidy.settings.replaceStyles[i][1];
+								$el.replaceWith(function()
+								{
+									var tag = document.createElement(tagName);
+									return $(tag).append($(this).contents());
+								});
+							}
+						}
+
+					}, this));
+
+				},
+				removeTags: function()
+				{
+					if (!this.tidy.settings.deniedTags && this.tidy.settings.allowedTags)
+					{
+						this.tidy.$div.find('*').not(this.tidy.settings.allowedTags.join(',')).each(function(i, s)
+						{
+							if (s.innerHTML === '') $(s).remove();
+							else $(s).contents().unwrap();
+						});
+					}
+
+					if (this.tidy.settings.deniedTags)
+					{
+						this.tidy.$div.find(this.tidy.settings.deniedTags.join(',')).each(function(i, s)
+						{
+							if ($(s).hasClass('redactor-script-tag') || $(s).hasClass('redactor-selection-marker')) return;
+
+							if (s.innerHTML === '') $(s).remove();
+							else $(s).contents().unwrap();
+						});
+					}
+				},
+				removeAttr: function()
+				{
+					var len;
+					if (!this.tidy.settings.removeAttr && this.tidy.settings.allowedAttr)
+					{
+
+						var allowedAttrTags = [], allowedAttrData = [];
+						len = this.tidy.settings.allowedAttr.length;
+						for (var i = 0; i < len; i++)
+						{
+							allowedAttrTags.push(this.tidy.settings.allowedAttr[i][0]);
+							allowedAttrData.push(this.tidy.settings.allowedAttr[i][1]);
+						}
+
+
+						this.tidy.$div.find('*').each($.proxy(function(n,s)
+						{
+							var $el = $(s);
+							var pos = $.inArray($el[0].tagName.toLowerCase(), allowedAttrTags);
+							var attributesRemove = this.tidy.removeAttrGetRemoves(pos, allowedAttrData, $el);
+
+							if (attributesRemove)
+							{
+								$.each(attributesRemove, function(z,f) {
+									$el.removeAttr(f);
+								});
+							}
+						}, this));
+					}
+
+					if (this.tidy.settings.removeAttr)
+					{
+						len = this.tidy.settings.removeAttr.length;
+						for (var i = 0; i < len; i++)
+						{
+							var attrs = this.tidy.settings.removeAttr[i][1];
+							if ($.isArray(attrs)) attrs = attrs.join(' ');
+
+							this.tidy.$div.find(this.tidy.settings.removeAttr[i][0]).removeAttr(attrs);
+						}
+					}
+
+				},
+				removeAttrGetRemoves: function(pos, allowed, $el)
+				{
+					var attributesRemove = [];
+
+					// remove all attrs
+					if (pos == -1)
+					{
+						$.each($el[0].attributes, function(i, item)
+						{
+							attributesRemove.push(item.name);
+						});
+
+					}
+					// allow all attrs
+					else if (allowed[pos] == '*')
+					{
+						attributesRemove = [];
+					}
+					// allow specific attrs
+					else
+					{
+						$.each($el[0].attributes, function(i, item)
+						{
+							if ($.isArray(allowed[pos]))
+							{
+								if ($.inArray(item.name, allowed[pos]) == -1)
+								{
+									attributesRemove.push(item.name);
+								}
+							}
+							else if (allowed[pos] != item.name)
+							{
+								attributesRemove.push(item.name);
+							}
+
+						});
+					}
+
+					return attributesRemove;
+				},
+				removeAttrs: function (el, regex)
+				{
+					regex = new RegExp(regex, "g");
+					return el.each(function()
+					{
+						var self = $(this);
+						var len = this.attributes.length - 1;
+						for (var i = len; i >= 0; i--)
+						{
+							var item = this.attributes[i];
+							if (item && item.specified && item.name.search(regex)>=0)
+							{
+								self.removeAttr(item.name);
+							}
+						}
+					});
+				},
+				removeEmpty: function()
+				{
+					if (!this.tidy.settings.removeEmpty) return;
+
+					this.tidy.$div.find(this.tidy.settings.removeEmpty.join(',')).each(function()
+					{
+						var $el = $(this);
+						var text = $el.text();
+						text = text.replace(/\u200B/g, '');
+						text = text.replace(/&nbsp;/gi, '');
+						text = text.replace(/\s/g, '');
+
+		    	    	if (text === '' && $el.children().length === 0)
+		    	    	{
+			    	    	$el.remove();
+		    	    	}
+					});
+				},
+				removeParagraphsInLists: function()
+				{
+					this.tidy.$div.find('li p').contents().unwrap();
+				},
+				removeDataAttr: function()
+				{
+					if (!this.tidy.settings.removeDataAttr) return;
+
+					var tags = this.tidy.settings.removeDataAttr;
+					if ($.isArray(this.tidy.settings.removeDataAttr)) tags = this.tidy.settings.removeDataAttr.join(',');
+
+					this.tidy.removeAttrs(this.tidy.$div.find(tags), '^(data-)');
+
+				},
+				removeWithoutAttr: function()
+				{
+					if (!this.tidy.settings.removeWithoutAttr) return;
+
+					this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(',')).each(function()
+					{
+						if (this.attributes.length === 0)
+						{
+							$(this).contents().unwrap();
+						}
+					});
+				}
+			};
+		},
+		toolbar: function()
+		{
+			return {
+				init: function()
+				{
+					return {
+						html:
+						{
+							title: this.lang.get('html'),
+							func: 'code.toggle'
+						},
+						formatting:
+						{
+							title: this.lang.get('formatting'),
+							dropdown:
+							{
+								p:
+								{
+									title: this.lang.get('paragraph'),
+									func: 'block.format'
+								},
+								blockquote:
+								{
+									title: this.lang.get('quote'),
+									func: 'block.format'
+								},
+								pre:
+								{
+									title: this.lang.get('code'),
+									func: 'block.format'
+								},
+								h1:
+								{
+									title: this.lang.get('header1'),
+									func: 'block.format'
+								},
+								h2:
+								{
+									title: this.lang.get('header2'),
+									func: 'block.format'
+								},
+								h3:
+								{
+									title: this.lang.get('header3'),
+									func: 'block.format'
+								},
+								h4:
+								{
+									title: this.lang.get('header4'),
+									func: 'block.format'
+								},
+								h5:
+								{
+									title: this.lang.get('header5'),
+									func: 'block.format'
+								}
+							}
+						},
+						bold:
+						{
+							title: this.lang.get('bold'),
+							func: 'inline.format'
+						},
+						italic:
+						{
+							title: this.lang.get('italic'),
+							func: 'inline.format'
+						},
+						deleted:
+						{
+							title: this.lang.get('deleted'),
+							func: 'inline.format'
+						},
+						underline:
+						{
+							title: this.lang.get('underline'),
+							func: 'inline.format'
+						},
+						unorderedlist:
+						{
+							title: '&bull; ' + this.lang.get('unorderedlist'),
+							func: 'list.toggle'
+						},
+						orderedlist:
+						{
+							title: '1. ' + this.lang.get('orderedlist'),
+							func: 'list.toggle'
+						},
+						outdent:
+						{
+							title: '< ' + this.lang.get('outdent'),
+							func: 'indent.decrease'
+						},
+						indent:
+						{
+							title: '> ' + this.lang.get('indent'),
+							func: 'indent.increase'
+						},
+						image:
+						{
+							title: this.lang.get('image'),
+							func: 'image.show'
+						},
+						file:
+						{
+							title: this.lang.get('file'),
+							func: 'file.show'
+						},
+						link:
+						{
+							title: this.lang.get('link'),
+							dropdown:
+							{
+								link:
+								{
+									title: this.lang.get('link_insert'),
+									func: 'link.show',
+									observe: {
+										element: 'a',
+										in: {
+											title: this.lang.get('link_edit'),
+										},
+										out: {
+											title: this.lang.get('link_insert')
+										}
+									}
+								},
+								unlink:
+								{
+									title: this.lang.get('unlink'),
+									func: 'link.unlink',
+									observe: {
+										element: 'a',
+										out: {
+											attr: {
+												'class': 'redactor-dropdown-link-inactive',
+												'aria-disabled': true
+											}
+										}
+									}
+								}
+							}
+						},
+						alignment:
+						{
+							title: this.lang.get('alignment'),
+							dropdown:
+							{
+								left:
+								{
+									title: this.lang.get('align_left'),
+									func: 'alignment.left'
+								},
+								center:
+								{
+									title: this.lang.get('align_center'),
+									func: 'alignment.center'
+								},
+								right:
+								{
+									title: this.lang.get('align_right'),
+									func: 'alignment.right'
+								},
+								justify:
+								{
+									title: this.lang.get('align_justify'),
+									func: 'alignment.justify'
+								}
+							}
+						},
+						horizontalrule:
+						{
+							title: this.lang.get('horizontalrule'),
+							func: 'line.insert'
+						}
+					};
+				},
+				build: function()
 				{
-					this.modalClose();
-					return false;
-				}
-
-			}, this);
-
-			$(document).keyup(this.hdlModalClose);
-			this.$editor.keyup(this.hdlModalClose);
+					this.toolbar.hideButtons();
+					this.toolbar.hideButtonsOnMobile();
+					this.toolbar.isButtonSourceNeeded();
 
-			// set content
-			this.modalcontent = false;
-			if (content.indexOf('#') == 0)
-			{
-				this.modalcontent = $(content);
-				$('#redactor_modal_inner').empty().append(this.modalcontent.html());
-				this.modalcontent.html('');
+					if (this.opts.buttons.length === 0) return;
 
-			}
-			else
-			{
-				$('#redactor_modal_inner').empty().append(content);
-			}
+					this.$toolbar = this.toolbar.createContainer();
 
-			$redactorModal.find('#redactor_modal_header').html(title);
+					this.toolbar.setOverflow();
+					this.toolbar.append();
+					this.toolbar.setFormattingTags();
+					this.toolbar.loadButtons();
+					this.toolbar.setFixed();
 
-			// draggable
-			if (typeof $.fn.draggable !== 'undefined')
-			{
-				$redactorModal.draggable({ handle: '#redactor_modal_header' });
-				$redactorModal.find('#redactor_modal_header').css('cursor', 'move');
-			}
+					// buttons response
+					if (this.opts.activeButtons)
+					{
+						this.$editor.on('mouseup.redactor keyup.redactor focus.redactor', $.proxy(this.observe.toolbar, this));
+					}
 
-			var $redactor_tabs = $('#redactor_tabs');
+				},
+				createContainer: function()
+				{
+					return $('<ul>').addClass('redactor-toolbar').attr({'id': 'redactor-toolbar-' + this.uuid, 'role': 'toolbar'});
+				},
+				setFormattingTags: function()
+				{
+					$.each(this.opts.toolbar.formatting.dropdown, $.proxy(function (i, s)
+					{
+						if ($.inArray(i, this.opts.formatting) == -1) delete this.opts.toolbar.formatting.dropdown[i];
+					}, this));
 
-			// tabs
-			if ($redactor_tabs.length )
-			{
-				var that = this;
-				$redactor_tabs.find('a').each(function(i, s)
+				},
+				loadButtons: function()
 				{
-					i++;
-					$(s).on('click', function(e)
+					$.each(this.opts.buttons, $.proxy(function(i, btnName)
 					{
-						e.preventDefault();
+						if (!this.opts.toolbar[btnName]) return;
 
-						$redactor_tabs.find('a').removeClass('redactor_tabs_act');
-						$(this).addClass('redactor_tabs_act');
-						$('.redactor_tab').hide();
-						$('#redactor_tab' + i ).show();
-						$('#redactor_tab_selected').val(i);
+						if (btnName === 'file')
+						{
+							 if (this.opts.fileUpload === false) return;
+							 else if (!this.opts.fileUpload && this.opts.s3 === false) return;
+						}
 
-						if (that.isMobile() === false)
+						if (btnName === 'image')
 						{
-							var height = $redactorModal.outerHeight();
-							$redactorModal.css('margin-top', '-' + (height + 10) / 2 + 'px');
+							 if (this.opts.imageUpload === false) return;
+							 else if (!this.opts.imageUpload && this.opts.s3 === false) return;
 						}
-					});
-				});
-			}
 
-			$redactorModal.find('.redactor_btn_modal_close').on('click', $.proxy(this.modalClose, this));
+						var btnObject = this.opts.toolbar[btnName];
+						this.$toolbar.append($('<li>').append(this.button.build(btnName, btnObject)));
 
-			// save scroll
-			if (this.opts.autoresize === true)
-			{
-				this.saveModalScroll = this.document.body.scrollTop;
-			}
-			else
-			{
-				this.saveModalScroll = this.$editor.scrollTop();
-			}
+					}, this));
+				},
+				append: function()
+				{
+					if (this.opts.toolbarExternal)
+					{
+						this.$toolbar.addClass('redactor-toolbar-external');
+						$(this.opts.toolbarExternal).html(this.$toolbar);
+					}
+					else
+					{
+						this.$box.prepend(this.$toolbar);
+					}
+				},
+				setFixed: function()
+				{
+					if (!this.utils.isDesktop()) return;
+					if (this.opts.toolbarExternal) return;
+					if (!this.opts.toolbarFixed) return;
 
-			if (this.isMobile() === false)
-			{
-				$redactorModal.css({
-					position: 'fixed',
-					top: '-2000px',
-					left: '50%',
-					width: width + 'px',
-					marginLeft: '-' + (width + 60) / 2 + 'px'
-				}).show();
+					this.toolbar.observeScroll();
+					$(this.opts.toolbarFixedTarget).on('scroll.redactor.' + this.uuid, $.proxy(this.toolbar.observeScroll, this));
 
-				this.modalSaveBodyOveflow = $(document.body).css('overflow');
-				$(document.body).css('overflow', 'hidden');
+				},
+				setOverflow: function()
+				{
+					if (this.utils.isMobile() && this.opts.toolbarOverflow)
+					{
+						this.$toolbar.addClass('redactor-toolbar-overflow');
+					}
+				},
+				isButtonSourceNeeded: function()
+				{
+					if (this.opts.source) return;
 
-			}
-			else
-			{
-				$redactorModal.css({
-					position: 'fixed',
-					width: '100%',
-					height: '100%',
-					top: '0',
-					left: '0',
-					margin: '0',
-					minHeight: '300px'
-				}).show();
-			}
+					var index = this.opts.buttons.indexOf('html');
+					if (index !== -1)
+					{
+						this.opts.buttons.splice(index, 1);
+					}
+				},
+				hideButtons: function()
+				{
+					if (this.opts.buttonsHide.length === 0) return;
 
-			// callback
-			if (typeof callback === 'function') callback();
+					$.each(this.opts.buttonsHide, $.proxy(function(i, s)
+					{
+						var index = this.opts.buttons.indexOf(s);
+						this.opts.buttons.splice(index, 1);
 
-			if (this.isMobile() === false)
-			{
-				setTimeout(function()
+					}, this));
+				},
+				hideButtonsOnMobile: function()
 				{
-					var height = $redactorModal.outerHeight();
-					$redactorModal.css({
-						top: '50%',
-						height: 'auto',
-						minHeight: 'auto',
-						marginTop: '-' + (height + 10) / 2 + 'px'
-					});
-				}, 10);
-			}
+					if (!this.utils.isMobile() || this.opts.buttonsHideOnMobile.length === 0) return;
 
-		},
-		modalClose: function()
-		{
-			$('#redactor_modal_close').off('click', this.modalClose );
-			$('#redactor_modal').fadeOut('fast', $.proxy(function()
-			{
-				var redactorModalInner = $('#redactor_modal_inner');
+					$.each(this.opts.buttonsHideOnMobile, $.proxy(function(i, s)
+					{
+						var index = this.opts.buttons.indexOf(s);
+						this.opts.buttons.splice(index, 1);
 
-				if (this.modalcontent !== false)
+					}, this));
+				},
+				observeScroll: function()
 				{
-					this.modalcontent.html(redactorModalInner.html());
-					this.modalcontent = false;
-				}
+					var scrollTop = $(this.opts.toolbarFixedTarget).scrollTop();
+					var boxTop = 1;
 
-				redactorModalInner.html('');
+					if (this.opts.toolbarFixedTarget === document)
+					{
+						boxTop = this.$box.offset().top;
+					}
 
-				if (this.opts.modalOverlay)
+					if ((scrollTop + this.opts.toolbarFixedTopOffset) > boxTop)
+					{
+						this.toolbar.observeScrollEnable(scrollTop, boxTop);
+					}
+					else
+					{
+						this.toolbar.observeScrollDisable();
+					}
+				},
+				observeScrollEnable: function(scrollTop, boxTop)
 				{
-					$('#redactor_modal_overlay').hide().off('click', this.modalClose);
-				}
+					var top = this.opts.toolbarFixedTopOffset + scrollTop - boxTop;
+					var left = 0;
+					var end = boxTop + this.$box.height() - 32;
+					var width = this.$box.innerWidth();
+
+					this.$toolbar.addClass('toolbar-fixed-box');
+					this.$toolbar.css({
+						position: 'absolute',
+						width: width,
+						top: top + 'px',
+						left: left
+					});
 
-				$(document).unbind('keyup', this.hdlModalClose);
-				this.$editor.unbind('keyup', this.hdlModalClose);
+					if (scrollTop > end)
+						$('.redactor-dropdown-' + this.uuid + ':visible').hide();
 
-				this.selectionRestore();
+					this.toolbar.setDropdownsFixed();
+					this.$toolbar.css('visibility', (scrollTop < end) ? 'visible' : 'hidden');
+				},
+				observeScrollDisable: function()
+				{
+					this.$toolbar.css({
+						position: 'relative',
+						width: 'auto',
+						top: 0,
+						left: 0,
+						visibility: 'visible'
+					});
 
-				// restore scroll
-				if (this.opts.autoresize && this.saveModalScroll)
+					this.toolbar.unsetDropdownsFixed();
+					this.$toolbar.removeClass('toolbar-fixed-box');
+				},
+				setDropdownsFixed: function()
 				{
-					$(this.document.body).scrollTop(this.saveModalScroll);
-				}
-				else if (this.opts.autoresize === false && this.saveModalScroll)
+					var top = this.$toolbar.innerHeight() + this.opts.toolbarFixedTopOffset;
+					var position = 'fixed';
+					if (this.opts.toolbarFixedTarget !== document)
+					{
+						top = (this.$toolbar.innerHeight() + this.$toolbar.offset().top) + this.opts.toolbarFixedTopOffset;
+						position = 'absolute';
+					}
+
+					$('.redactor-dropdown-' + this.uuid).each(function()
+					{
+						$(this).css({ position: position, top: top + 'px' });
+					});
+				},
+				unsetDropdownsFixed: function()
 				{
-					this.$editor.scrollTop(this.saveModalScroll);
+					var top = (this.$toolbar.innerHeight() + this.$toolbar.offset().top);
+					$('.redactor-dropdown-' + this.uuid).each(function()
+					{
+						$(this).css({ position: 'absolute', top: top + 'px' });
+					});
 				}
-
-			}, this));
-
-
-			if (this.isMobile() === false)
-			{
-				$(document.body).css('overflow', this.modalSaveBodyOveflow ? this.modalSaveBodyOveflow : 'visible');
-			}
-
-			return false;
+			};
 		},
-		modalSetTab: function(num)
+		upload: function()
 		{
-			$('.redactor_tab').hide();
-			$('#redactor_tabs').find('a').removeClass('redactor_tabs_act').eq(num - 1).addClass('redactor_tabs_act');
-			$('#redactor_tab' + num).show();
-		},
+			return {
+				init: function(id, url, callback)
+				{
+					this.upload.direct = false;
+					this.upload.callback = callback;
+					this.upload.url = url;
+					this.upload.$el = $(id);
+					this.upload.$droparea = $('<div id="redactor-droparea" />');
 
-		// S3
-		s3handleFileSelect: function(e)
-		{
-			var files = e.target.files;
+					this.upload.$placeholdler = $('<div id="redactor-droparea-placeholder" />').text(this.lang.get('upload_label'));
+					this.upload.$input = $('<input type="file" name="file" />');
 
-			for (var i = 0, f; f = files[i]; i++)
-			{
-				this.s3uploadFile(f);
-			}
-		},
-		s3uploadFile: function(file)
-		{
-			this.s3executeOnSignedUrl(file, $.proxy(function(signedURL)
-			{
-				this.s3uploadToS3(file, signedURL);
-			}, this));
-		},
-		s3executeOnSignedUrl: function(file, callback)
-		{
-			var xhr = new XMLHttpRequest();
+					this.upload.$placeholdler.append(this.upload.$input);
+					this.upload.$droparea.append(this.upload.$placeholdler);
+					this.upload.$el.append(this.upload.$droparea);
+
+					this.upload.$droparea.off('redactor.upload');
+					this.upload.$input.off('redactor.upload');
 
-			var mark = '?';
-			if (this.opts.s3.search(/\?/) != '-1') mark = '&';
+					this.upload.$droparea.on('dragover.redactor.upload', $.proxy(this.upload.onDrag, this));
+					this.upload.$droparea.on('dragleave.redactor.upload', $.proxy(this.upload.onDragLeave, this));
 
-			xhr.open('GET', this.opts.s3 + mark + 'name=' + file.name + '&type=' + file.type, true);
+					// change
+					this.upload.$input.on('change.redactor.upload', $.proxy(function(e)
+					{
+						e = e.originalEvent || e;
+						this.upload.traverseFile(this.upload.$input[0].files[0], e);
+					}, this));
+
+					// drop
+					this.upload.$droparea.on('drop.redactor.upload', $.proxy(function(e)
+					{
+						e.preventDefault();
 
-			// Hack to pass bytes through unprocessed.
-			if (xhr.overrideMimeType) xhr.overrideMimeType('text/plain; charset=x-user-defined');
+						this.upload.$droparea.removeClass('drag-hover').addClass('drag-drop');
+						this.upload.onDrop(e);
 
-			xhr.onreadystatechange = function(e)
-			{
-				if (this.readyState == 4 && this.status == 200)
+					}, this));
+				},
+				directUpload: function(file, e)
 				{
-					$('#redactor-progress').fadeIn();
-					callback(decodeURIComponent(this.responseText));
-				}
-				else if(this.readyState == 4 && this.status != 200)
+					this.upload.direct = true;
+					this.upload.traverseFile(file, e);
+				},
+				onDrop: function(e)
 				{
-					//setProgress(0, 'Could not contact signing script. Status = ' + this.status);
-				}
-			};
-
-			xhr.send();
-		},
-		s3createCORSRequest: function(method, url)
-		{
-			var xhr = new XMLHttpRequest();
-			if ("withCredentials" in xhr)
-			{
-				xhr.open(method, url, true);
-			}
-			else if (typeof XDomainRequest != "undefined")
-			{
-				xhr = new XDomainRequest();
-				xhr.open(method, url);
-			}
-			else
-			{
-				xhr = null;
-			}
+					e = e.originalEvent || e;
+					var files = e.dataTransfer.files;
 
-			return xhr;
-		},
-		s3uploadToS3: function(file, url)
-		{
-			var xhr = this.s3createCORSRequest('PUT', url);
-			if (!xhr)
-			{
-				//setProgress(0, 'CORS not supported');
-			}
-			else
-			{
-				xhr.onload = $.proxy(function()
+					this.upload.traverseFile(files[0], e);
+				},
+				traverseFile: function(file, e)
 				{
-					if (xhr.status == 200)
+					if (this.opts.s3)
 					{
-						//setProgress(100, 'Upload completed.');
-
-						$('#redactor-progress, #redactor-progress-drag').hide();
-
-						var s3image = url.split('?');
-
-						if (!s3image[0])
-						{
-							 // url parsing is fail
-							 return false;
-						}
-
-						this.selectionRestore();
+						this.upload.setConfig(file);
+						this.upload.s3uploadFile(file);
+						return;
+					}
 
-						var html = '';
-						html = '<img id="image-marker" src="' + s3image[0] + '" />';
-						if (this.opts.paragraphy) html = '<p>' + html + '</p>';
+					var formData = !!window.FormData ? new FormData() : null;
+					if (window.FormData)
+					{
+						this.upload.setConfig(file);
 
-						this.execCommand('inserthtml', html, false);
+						var name = (this.upload.type == 'image') ? this.opts.imageUploadParam : this.opts.fileUploadParam;
+						formData.append(name, file);
+					}
 
-						var image = $(this.$editor.find('img#image-marker'));
+					this.progress.show();
+					this.core.setCallback('uploadStart', e, formData);
+					this.upload.sendData(formData, e);
+				},
+				setConfig: function(file)
+				{
+					this.upload.getType(file);
 
-						if (image.length) image.removeAttr('id');
-						else image = false;
+					if (this.upload.direct)
+					{
+						this.upload.url = (this.upload.type == 'image') ? this.opts.imageUpload : this.opts.fileUpload;
+						this.upload.callback = (this.upload.type == 'image') ? this.image.insert : this.file.insert;
+					}
+				},
+				getType: function(file)
+				{
+					this.upload.type = 'image';
+					if (this.opts.imageTypes.indexOf(file.type) == -1)
+					{
+						this.upload.type = 'file';
+					}
+				},
+				getHiddenFields: function(obj, fd)
+				{
+					if (obj === false || typeof obj !== 'object') return fd;
 
-						this.sync();
+					$.each(obj, $.proxy(function(k, v)
+					{
+						if (v !== null && v.toString().indexOf('#') === 0) v = $(v).val();
+						fd.append(k, v);
 
-						// upload image callback
-						this.callback('imageUpload', image, false);
+					}, this));
 
-						this.modalClose();
-						this.observeImages();
+					return fd;
 
+				},
+				sendData: function(formData, e)
+				{
+					// append hidden fields
+					if (this.upload.type == 'image')
+					{
+						formData = this.upload.getHiddenFields(this.opts.uploadImageFields, formData);
+						formData = this.upload.getHiddenFields(this.upload.imageFields, formData);
 					}
 					else
 					{
-						//setProgress(0, 'Upload error: ' + xhr.status);
+						formData = this.upload.getHiddenFields(this.opts.uploadFileFields, formData);
+						formData = this.upload.getHiddenFields(this.upload.fileFields, formData);
 					}
-				}, this);
 
-				xhr.onerror = function()
-				{
-					//setProgress(0, 'XHR error.');
-				};
+					var xhr = new XMLHttpRequest();
+					xhr.open('POST', this.upload.url);
+					xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
 
-				xhr.upload.onprogress = function(e)
-				{
-					/*
-					if (e.lengthComputable)
+					// complete
+					xhr.onreadystatechange = $.proxy(function()
 					{
-						var percentLoaded = Math.round((e.loaded / e.total) * 100);
-						setProgress(percentLoaded, percentLoaded == 100 ? 'Finalizing.' : 'Uploading.');
-					}
-					*/
-				};
+					    if (xhr.readyState == 4)
+					    {
+					        var data = xhr.responseText;
 
-				xhr.setRequestHeader('Content-Type', file.type);
-				xhr.setRequestHeader('x-amz-acl', 'public-read');
+							data = data.replace(/^\[/, '');
+							data = data.replace(/\]$/, '');
 
-				xhr.send(file);
-			}
-		},
+							var json;
+							try
+							{
+								json = (typeof data === 'string' ? $.parseJSON(data) : data);
+							}
+							catch(err)
+							{
+								json = {
+									error: true
+								};
+							}
 
-		// UPLOAD
-		uploadInit: function(el, options)
-		{
-			this.uploadOptions = {
-				url: false,
-				success: false,
-				error: false,
-				start: false,
-				trigger: false,
-				auto: false,
-				input: false
-			};
 
-			$.extend(this.uploadOptions, options);
+							this.progress.hide();
 
-			var $el = $('#' + el);
+							if (!this.upload.direct)
+							{
+								this.upload.$droparea.removeClass('drag-drop');
+							}
 
-			// Test input or form
-			if ($el.length && $el[0].tagName === 'INPUT')
-			{
-				this.uploadOptions.input = $el;
-				this.el = $($el[0].form);
-			}
-			else this.el = $el;
+							this.upload.callback(json, this.upload.direct, e);
+					    }
+					}, this);
 
-			this.element_action = this.el.attr('action');
 
-			// Auto or trigger
-			if (this.uploadOptions.auto)
-			{
-				$(this.uploadOptions.input).change($.proxy(function(e)
-				{
-					this.el.submit(function(e)
+					/*
+					xhr.upload.onprogress = $.proxy(function(e)
 					{
-						return false;
-					});
+						if (e.lengthComputable)
+						{
+							var complete = (e.loaded / e.total * 100 | 0);
+							//progress.value = progress.innerHTML = complete;
+						}
 
-					this.uploadSubmit(e);
+					}, this);
+					*/
 
-				}, this));
 
-			}
-			else if (this.uploadOptions.trigger)
-			{
-				$('#' + this.uploadOptions.trigger).click($.proxy(this.uploadSubmit, this));
-			}
-		},
-		uploadSubmit: function(e)
-		{
-			$('#redactor-progress').fadeIn();
-			this.uploadForm(this.element, this.uploadFrame());
-		},
-		uploadFrame: function()
-		{
-			this.id = 'f' + Math.floor(Math.random() * 99999);
+					xhr.send(formData);
+				},
+				onDrag: function(e)
+				{
+					e.preventDefault();
+					this.upload.$droparea.addClass('drag-hover');
+				},
+				onDragLeave: function(e)
+				{
+					e.preventDefault();
+					this.upload.$droparea.removeClass('drag-hover');
+				},
+				clearImageFields: function()
+				{
+					this.upload.imageFields = {};
+				},
+				addImageFields: function(name, value)
+				{
+					this.upload.imageFields[name] = value;
+				},
+				removeImageFields: function(name)
+				{
+					delete this.upload.imageFields[name];
+				},
+				clearFileFields: function()
+				{
+					this.upload.fileFields = {};
+				},
+				addFileFields: function(name, value)
+				{
+					this.upload.fileFields[name] = value;
+				},
+				removeFileFields: function(name)
+				{
+					delete this.upload.fileFields[name];
+				},
+
 
-			var d = this.document.createElement('div');
-			var iframe = '<iframe style="display:none" id="' + this.id + '" name="' + this.id + '"></iframe>';
+				// S3
+				s3uploadFile: function(file)
+				{
+					this.upload.s3executeOnSignedUrl(file, $.proxy(function(signedURL)
+					{
+						this.upload.s3uploadToS3(file, signedURL);
+					}, this));
+				},
+				s3executeOnSignedUrl: function(file, callback)
+				{
+					var xhr = new XMLHttpRequest();
+					var mark = (this.opts.s3.search(/\?/) !== '-1') ? '?' : '&';
+
+					xhr.open('GET', this.opts.s3 + mark + 'name=' + file.name + '&type=' + file.type, true);
+
+					// Hack to pass bytes through unprocessed.
+					if (xhr.overrideMimeType) xhr.overrideMimeType('text/plain; charset=x-user-defined');
+
+					var that = this;
+					xhr.onreadystatechange = function(e)
+					{
+						if (this.readyState == 4 && this.status == 200)
+						{
+							that.progress.show();
+							callback(decodeURIComponent(this.responseText));
+						}
+						else if (this.readyState == 4 && this.status != 200)
+						{
+							//setProgress(0, 'Could not contact signing script. Status = ' + this.status);
+						}
+					};
 
-			d.innerHTML = iframe;
-			$(d).appendTo("body");
+					xhr.send();
+				},
+				s3createCORSRequest: function(method, url)
+				{
+					var xhr = new XMLHttpRequest();
+					if ("withCredentials" in xhr)
+					{
+						xhr.open(method, url, true);
+					}
+					else if (typeof XDomainRequest != "undefined")
+					{
+						xhr = new XDomainRequest();
+						xhr.open(method, url);
+					}
+					else
+					{
+						xhr = null;
+					}
 
-			// Start
-			if (this.uploadOptions.start) this.uploadOptions.start();
+					return xhr;
+				},
+				s3uploadToS3: function(file, url)
+				{
+					var xhr = this.upload.s3createCORSRequest('PUT', url);
+					if (!xhr)
+					{
+						//setProgress(0, 'CORS not supported');
+					}
+					else
+					{
+						xhr.onload = $.proxy(function()
+						{
+							if (xhr.status == 200)
+							{
+								//setProgress(100, 'Upload completed.');
 
-			$( '#' + this.id ).load($.proxy(this.uploadLoaded, this));
+								this.progress.hide();
 
-			return this.id;
-		},
-		uploadForm: function(f, name)
-		{
-			if (this.uploadOptions.input)
-			{
-				var formId = 'redactorUploadForm' + this.id,
-					fileId = 'redactorUploadFile' + this.id;
+								var s3file = url.split('?');
 
-				this.form = $('<form  action="' + this.uploadOptions.url + '" method="POST" target="' + name + '" name="' + formId + '" id="' + formId + '" enctype="multipart/form-data" />');
+								if (!s3file[0])
+								{
+									 // url parsing is fail
+									 return false;
+								}
 
-				// append hidden fields
-				if (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')
-				{
-					$.each(this.opts.uploadFields, $.proxy(function(k, v)
-					{
-						if (v != null && v.toString().indexOf('#') === 0) v = $(v).val();
 
-						var hidden = $('<input/>', {
-							'type': "hidden",
-							'name': k,
-							'value': v
-						});
+								if (!this.upload.direct)
+								{
+									this.upload.$droparea.removeClass('drag-drop');
+								}
 
-						$(this.form).append(hidden);
+								var json = { filelink: s3file[0] };
+								if (this.upload.type == 'file')
+								{
+									var arr = s3file[0].split('/');
+									json.filename = arr[arr.length-1];
+								}
 
-					}, this));
-				}
+								this.upload.callback(json, this.upload.direct, false);
 
-				var oldElement = this.uploadOptions.input;
-				var newElement = $(oldElement).clone();
 
-				$(oldElement).attr('id', fileId).before(newElement).appendTo(this.form);
+							}
+							else
+							{
+								//setProgress(0, 'Upload error: ' + xhr.status);
+							}
+						}, this);
 
-				$(this.form).css('position', 'absolute')
-						.css('top', '-2000px')
-						.css('left', '-2000px')
-						.appendTo('body');
+						xhr.onerror = function() {};
 
-				this.form.submit();
+						xhr.upload.onprogress = function(e) {};
 
-			}
-			else
-			{
-				f.attr('target', name)
-					.attr('method', 'POST')
-					.attr('enctype', 'multipart/form-data')
-					.attr('action', this.uploadOptions.url);
+						xhr.setRequestHeader('Content-Type', file.type);
+						xhr.setRequestHeader('x-amz-acl', 'public-read');
 
-				this.element.submit();
-			}
+						xhr.send(file);
+					}
+				}
+			};
 		},
-		uploadLoaded: function()
+		utils: function()
 		{
-			var i = $( '#' + this.id)[0], d;
+			return {
+				isMobile: function()
+				{
+					return /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);
+				},
+				isDesktop: function()
+				{
+					return !/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent);
+				},
+				isString: function(obj)
+				{
+					return Object.prototype.toString.call(obj) == '[object String]';
+				},
+				isEmpty: function(html, removeEmptyTags)
+				{
+					html = html.replace(/[\u200B-\u200D\uFEFF]/g, '');
+					html = html.replace(/&nbsp;/gi, '');
+					html = html.replace(/<\/?br\s?\/?>/g, '');
+					html = html.replace(/\s/g, '');
+					html = html.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i, '');
+					html = html.replace(/<iframe(.*?[^>])>$/i, 'iframe');
+					html = html.replace(/<source(.*?[^>])>$/i, 'source');
 
-			if (i.contentDocument) d = i.contentDocument;
-			else if (i.contentWindow) d = i.contentWindow.document;
-			else d = window.frames[this.id].document;
+					// remove empty tags
+					if (removeEmptyTags !== false)
+					{
+						html = html.replace(/<[^\/>][^>]*><\/[^>]+>/gi, '');
+						html = html.replace(/<[^\/>][^>]*><\/[^>]+>/gi, '');
+					}
 
-			// Success
-			if (this.uploadOptions.success)
-			{
-				$('#redactor-progress').hide();
+					html = $.trim(html);
 
-				if (typeof d !== 'undefined')
+					return html === '';
+				},
+				normalize: function(str)
 				{
-					// Remove bizarre <pre> tag wrappers around our json data:
-					var rawString = d.body.innerHTML;
-					var jsonString = rawString.match(/\{(.|\n)*\}/)[0];
-
-					jsonString = jsonString.replace(/^\[/, '');
-					jsonString = jsonString.replace(/\]$/, '');
+					if (typeof(str) === 'undefined') return 0;
+					return parseInt(str.replace('px',''), 10);
+				},
+				hexToRgb: function(hex)
+				{
+					if (typeof hex == 'undefined') return;
+					if (hex.search(/^#/) == -1) return hex;
 
-					var json = $.parseJSON(jsonString);
+					var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
+					hex = hex.replace(shorthandRegex, function(m, r, g, b)
+					{
+						return r + r + g + g + b + b;
+					});
 
-					if (typeof json.error == 'undefined') this.uploadOptions.success(json);
+					var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
+					return 'rgb(' + parseInt(result[1], 16) + ', ' + parseInt(result[2], 16) + ', ' + parseInt(result[3], 16) + ')';
+				},
+				getOuterHtml: function(el)
+				{
+					return $('<div>').append($(el).eq(0).clone()).html();
+				},
+				getAlignmentElement: function(el)
+				{
+					if ($.inArray(el.tagName, this.opts.alignmentTags) !== -1)
+					{
+						return $(el);
+					}
 					else
 					{
-						this.uploadOptions.error(this, json);
-						this.modalClose();
+						return $(el).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
 					}
-				}
-				else
+				},
+				removeEmptyAttr: function(el, attr)
 				{
-					this.modalClose();
-					alert('Upload failed!');
-				}
-			}
-
-			this.el.attr('action', this.element_action);
-			this.el.attr('target', '');
-		},
-
-		// DRAGUPLOAD
-		draguploadInit: function (el, options)
-		{
-			this.draguploadOptions = $.extend({
-				url: false,
-				success: false,
-				error: false,
-				preview: false,
-				uploadFields: false,
-				text: this.opts.curLang.drop_file_here,
-				atext: this.opts.curLang.or_choose,
-				uploadParam: false
-			}, options);
-
-			if (window.FormData === undefined) return false;
-
-			this.droparea = $('<div class="redactor_droparea"></div>');
-			this.dropareabox = $('<div class="redactor_dropareabox">' + this.draguploadOptions.text + '</div>');
-			this.dropalternative = $('<div class="redactor_dropalternative">' + this.draguploadOptions.atext + '</div>');
-
-			this.droparea.append(this.dropareabox);
-
-			$(el).before(this.droparea);
-			$(el).before(this.dropalternative);
+					var $el = $(el);
+					if (typeof $el.attr(attr) == 'undefined')
+					{
+						return true;
+					}
 
-			// drag over
-			this.dropareabox.on('dragover', $.proxy(function()
-			{
-				return this.draguploadOndrag();
+					if ($el.attr(attr) === '')
+					{
+						$el.removeAttr(attr);
+						return true;
+					}
 
-			}, this));
+					return false;
+				},
+				removeEmpty: function(i, s)
+				{
+					var $s = $($.parseHTML(s));
 
-			// drag leave
-			this.dropareabox.on('dragleave', $.proxy(function()
-			{
-				return this.draguploadOndragleave();
+					$s.find('.redactor-invisible-space').removeAttr('style').removeAttr('class');
 
-			}, this));
+					if ($s.find('hr, br, img, iframe, source').length !== 0) return;
+					var text = $.trim($s.text());
 
-			// drop
-			this.dropareabox.get(0).ondrop = $.proxy(function(e)
-			{
-				e.preventDefault();
+					if (this.utils.isEmpty(text, false))
+					{
+						$s.remove();
+					}
+				},
 
-				this.dropareabox.removeClass('hover').addClass('drop');
+				// save and restore scroll
+				saveScroll: function()
+				{
+					this.saveEditorScroll = this.$editor.scrollTop();
+					this.saveBodyScroll = $(window).scrollTop();
 
-				this.dragUploadAjax(this.draguploadOptions.url, e.dataTransfer.files[0], false, false, false, this.draguploadOptions.uploadParam);
+					if (this.opts.scrollTarget) this.saveTargetScroll = $(this.opts.scrollTarget).scrollTop();
+				},
+				restoreScroll: function()
+				{
+					if (typeof this.saveScroll === 'undefined' && typeof this.saveBodyScroll === 'undefined') return;
 
-			}, this );
-		},
-		dragUploadAjax: function(url, file, directupload, progress, e, uploadParam)
-		{
+					$(window).scrollTop(this.saveBodyScroll);
+					this.$editor.scrollTop(this.saveEditorScroll);
 
+					if (this.opts.scrollTarget) $(this.opts.scrollTarget).scrollTop(this.saveTargetScroll);
+				},
 
-			if (!directupload)
-			{
-				var xhr = $.ajaxSettings.xhr();
-				if (xhr.upload)
+				// get invisible space element
+				createSpaceElement: function()
 				{
-					xhr.upload.addEventListener('progress', $.proxy(this.uploadProgress, this), false);
-				}
-
-				$.ajaxSetup({
-				  xhr: function () { return xhr; }
-				});
-			}
-
-			var fd = new FormData();
+					var space = document.createElement('span');
+					space.className = 'redactor-invisible-space';
+					space.innerHTML = this.opts.invisibleSpace;
 
-			// append file data
-			if (uploadParam !== false)
-			{
-				fd.append(uploadParam, file);
-			}
-			else
-			{
-				fd.append('file', file);
-			}
+					return space;
+				},
 
-			// append hidden fields
-			if (this.opts.uploadFields !== false && typeof this.opts.uploadFields === 'object')
-			{
-				$.each(this.opts.uploadFields, $.proxy(function(k, v)
+				// replace
+				removeInlineTags: function(node)
 				{
-					if (v != null && v.toString().indexOf('#') === 0) v = $(v).val();
-					fd.append(k, v);
+					var tags = this.opts.inlineTags;
+					tags.push('span');
 
-				}, this));
-			}
+					if (node.tagName == 'PRE') tags.push('a');
 
-			$.ajax({
-				url: url,
-				dataType: 'html',
-				data: fd,
-				cache: false,
-				contentType: false,
-				processData: false,
-				type: 'POST',
-				success: $.proxy(function(data)
-				{
-					data = data.replace(/^\[/, '');
-					data = data.replace(/\]$/, '');
+					$(node).find(tags.join(',')).not('span.redactor-selection-marker').contents().unwrap();
+				},
+				replaceWithContents: function(node, removeInlineTags)
+				{
+					var self = this;
+					$(node).replaceWith(function()
+					{
+						if (removeInlineTags === true) self.utils.removeInlineTags(this);
 
-					var json = (typeof data === 'string' ? $.parseJSON(data) : data);
+						return $(this).contents();
+					});
 
-					if (directupload)
+					return $(node);
+				},
+				replaceToTag: function(node, tag, removeInlineTags)
+				{
+					var replacement;
+					var self = this;
+					$(node).replaceWith(function()
 					{
-						progress.fadeOut('slow', function()
+						replacement = $('<' + tag + ' />').append($(this).contents());
+
+						for (var i = 0; i < this.attributes.length; i++)
 						{
-							$(this).remove();
-						});
+							replacement.attr(this.attributes[i].name, this.attributes[i].value);
+						}
 
-					    var $img = $('<img>');
-						$img.attr('src', json.filelink).attr('id', 'drag-image-marker');
+						if (removeInlineTags === true) self.utils.removeInlineTags(replacement);
 
-						this.insertNodeToCaretPositionFromPoint(e, $img[0]);
+						return replacement;
+					});
 
-						var image = $(this.$editor.find('img#drag-image-marker'));
-						if (image.length) image.removeAttr('id');
-						else image = false;
+					return replacement;
+				},
 
-						this.sync();
-						this.observeImages();
+				// start and end of element
+				isStartOfElement: function()
+				{
+					var block = this.selection.getBlock();
+					if (!block) return false;
 
-						// upload callback
-						if (image) this.callback('imageUpload', image, json);
+					var offset = this.caret.getOffsetOfElement(block);
 
-						// error callback
-						if (typeof json.error !== 'undefined') this.callback('imageUploadError', json);
-					}
-					else
+					return (offset === 0) ? true : false;
+				},
+				isEndOfElement: function(element)
+				{
+					if (typeof element == 'undefined')
 					{
-						if (typeof json.error == 'undefined')
-						{
-							this.draguploadOptions.success(json);
-						}
-						else
-						{
-							this.draguploadOptions.error(this, json);
-							this.draguploadOptions.success(false);
-						}
+						var element = this.selection.getBlock();
+						if (!element) return false;
 					}
 
-				}, this)
-			});
-		},
-		draguploadOndrag: function()
-		{
-			this.dropareabox.addClass('hover');
-			return false;
-		},
-		draguploadOndragleave: function()
-		{
-			this.dropareabox.removeClass('hover');
-			return false;
-		},
-		uploadProgress: function(e, text)
-		{
-			var percent = e.loaded ? parseInt(e.loaded / e.total * 100, 10) : e;
-			this.dropareabox.text('Loading ' + percent + '% ' + (text || ''));
-		},
-
-		// UTILS
-		isMobile: function()
-		{
-			return /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);
-		},
-		normalize: function(str)
-		{
-			if (typeof(str) === 'undefined') return 0;
-			return parseInt(str.replace('px',''), 10);
-		},
-		outerHtml: function(el)
-		{
-			return $('<div>').append($(el).eq(0).clone()).html();
-		},
-		isString: function(obj)
-		{
-			return Object.prototype.toString.call(obj) == '[object String]';
-		},
-		isEmpty: function(html)
-		{
-			html = html.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi, '');
-			html = html.replace(/\s/g, '');
-			html = html.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i, '');
-
-
-			return html == '';
-		},
-		isIe11: function()
-		{
-			return !!navigator.userAgent.match(/Trident\/7\./);
-		},
-		browser: function(browser)
-		{
-			var ua = navigator.userAgent.toLowerCase();
-			var match = /(opr)[\/]([\w.]+)/.exec( ua ) ||
-            /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
-            /(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua) ||
-            /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
-            /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
-            /(msie) ([\w.]+)/.exec( ua ) ||
-            ua.indexOf("trident") >= 0 && /(rv)(?::| )([\w.]+)/.exec( ua ) ||
-            ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
-            [];
+					var offset = this.caret.getOffsetOfElement(element);
+					var text = $.trim($(element).text()).replace(/\n\r\n/g, '');
 
-			if (browser == 'version') return match[2];
-			if (browser == 'webkit') return (match[1] == 'chrome' || match[1] == 'webkit');
-			if (match[1] == 'rv') return browser == 'msie';
-			if (match[1] == 'opr') return browser == 'webkit';
+					return (offset == text.length) ? true : false;
+				},
+				isStartOfEditor: function()
+				{
+					var offset = this.caret.getOffsetOfElement(this.$editor[0]);
 
-			return browser == match[1];
+					return (offset === 0) ? true : false;
+				},
+				isEndOfEditor: function()
+				{
+					var block = this.$editor[0];
 
-		},
-		oldIE: function()
-		{
-			if (this.browser('msie') && parseInt(this.browser('version'), 10) < 9) return true;
-			return false;
-		},
-		getFragmentHtml: function (fragment)
-		{
-			var cloned = fragment.cloneNode(true);
-			var div = this.document.createElement('div');
+					var offset = this.caret.getOffsetOfElement(block);
+					var text = $.trim($(block).html().replace(/(<([^>]+)>)/gi,''));
 
-			div.appendChild(cloned);
-			return div.innerHTML;
-		},
-		extractContent: function()
-		{
-			var node = this.$editor[0];
-			var frag = this.document.createDocumentFragment();
-			var child;
+					return (offset == text.length) ? true : false;
+				},
 
-			while ((child = node.firstChild))
-			{
-				frag.appendChild(child);
-			}
+				// test blocks
+				isBlock: function(block)
+				{
+					block = block[0] || block;
 
-			return frag;
-		},
-		isParentRedactor: function(el)
-		{
-			if (!el) return false;
-			if (this.opts.iframe) return el;
+					return block && this.utils.isBlockTag(block.tagName);
+				},
+				isBlockTag: function(tag)
+				{
+					if (typeof tag == 'undefined') return false;
 
-			if ($(el).parents('div.redactor_editor').length == 0 || $(el).hasClass('redactor_editor')) return false;
-			else return el;
-		},
-		currentOrParentIs: function(tagName)
-		{
-			var parent = this.getParent(), current = this.getCurrent();
-			return parent && parent.tagName === tagName ? parent : current && current.tagName === tagName ? current : false;
-		},
-		isEndOfElement: function()
-		{
-			var current = this.getBlock();
-			var offset = this.getCaretOffset(current);
+					return this.reIsBlock.test(tag);
+				},
 
-			var text = $.trim($(current).text()).replace(/\n\r\n/g, '');
+				// tag detection
+				isTag: function(current, tag)
+				{
+					var element = $(current).closest(tag, this.$editor[0]);
+					if (element.length == 1)
+					{
+						return element[0];
+					}
 
-			var len = text.length;
+					return false;
+				},
 
-			if (offset == len) return true;
-			else return false;
-		},
-		isFocused: function()
-		{
-			var el, sel = this.getSelection();
+				// select all
+				isSelectAll: function()
+				{
+					return this.selectAll;
+				},
+				enableSelectAll: function()
+				{
+					this.selectAll = true;
+				},
+				disableSelectAll: function()
+				{
+					this.selectAll = false;
+				},
 
-			if (sel && sel.rangeCount && sel.rangeCount > 0) el = sel.getRangeAt(0).startContainer;
-			if (!el) return false;
-			if (this.opts.iframe)
-			{
-				if (this.getCaretOffsetRange().equals()) return !this.$editor.is(el);
-				else return true;
-			}
+				// parents detection
+				isRedactorParent: function(el)
+				{
+					if (!el)
+					{
+						return false;
+					}
 
-			return $(el).closest('div.redactor_editor').length != 0;
-		},
-		removeEmptyAttr: function (el, attr)
-		{
-			if ($(el).attr(attr) == '') $(el).removeAttr(attr);
-		},
-		removeFromArrayByValue: function(array, value)
-		{
-			var index = null;
+					if ($(el).parents('.redactor-editor').length === 0 || $(el).hasClass('redactor-editor'))
+					{
+						return false;
+					}
 
-			while ((index = array.indexOf(value)) !== -1)
-			{
-				array.splice(index, 1);
-			}
+					return el;
+				},
+				isCurrentOrParentHeader: function()
+				{
+					return this.utils.isCurrentOrParent(['H1', 'H2', 'H3', 'H4', 'H5', 'H6']);
+				},
+				isCurrentOrParent: function(tagName)
+				{
+					var parent = this.selection.getParent();
+					var current = this.selection.getCurrent();
 
-			return array;
-		}
+					if ($.isArray(tagName))
+					{
+						var matched = 0;
+						$.each(tagName, $.proxy(function(i, s)
+						{
+							if (this.utils.isCurrentOrParentOne(current, parent, s))
+							{
+								matched++;
+							}
+						}, this));
 
-	};
+						return (matched === 0) ? false : true;
+					}
+					else
+					{
+						return this.utils.isCurrentOrParentOne(current, parent, tagName);
+					}
+				},
+				isCurrentOrParentOne: function(current, parent, tagName)
+				{
+					tagName = tagName.toUpperCase();
 
-	// constructor
-	Redactor.prototype.init.prototype = Redactor.prototype;
+					return parent && parent.tagName === tagName ? parent : current && current.tagName === tagName ? current : false;
+				},
 
-	// LINKIFY
-	$.Redactor.fn.formatLinkify = function(protocol, convertLinks, convertImageLinks, convertVideoLinks, linkSize)
-	{
-		var url1 = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,
-			url2 = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,
-			urlImage = /(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi,
-			urlYoutube = /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig,
-			urlVimeo = /https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/;
 
-		var childNodes = (this.$editor ? this.$editor.get(0) : this).childNodes, i = childNodes.length;
-		while (i--)
-		{
-			var n = childNodes[i];
-			if (n.nodeType === 3)
-			{
-				var html = n.nodeValue;
+				// browsers detection
+				isOldIe: function()
+				{
+					return (this.utils.browser('msie') && parseInt(this.utils.browser('version'), 10) < 9) ? true : false;
+				},
+				isLessIe10: function()
+				{
+					return (this.utils.browser('msie') && parseInt(this.utils.browser('version'), 10) < 10) ? true : false;
+				},
+				isIe11: function()
+				{
+					return !!navigator.userAgent.match(/Trident\/7\./);
+				},
+				browser: function(browser)
+				{
+					var ua = navigator.userAgent.toLowerCase();
+					var match = /(opr)[\/]([\w.]+)/.exec( ua ) ||
+		            /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
+		            /(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua) ||
+		            /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
+		            /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
+		            /(msie) ([\w.]+)/.exec( ua ) ||
+		            ua.indexOf("trident") >= 0 && /(rv)(?::| )([\w.]+)/.exec( ua ) ||
+		            ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
+		            [];
+
+					if (browser == 'safari') return (typeof match[3] != 'undefined') ? match[3] == 'safari' : false;
+					if (browser == 'version') return match[2];
+					if (browser == 'webkit') return (match[1] == 'chrome' || match[1] == 'opr' || match[1] == 'webkit');
+					if (match[1] == 'rv') return browser == 'msie';
+					if (match[1] == 'opr') return browser == 'webkit';
 
-				// youtube & vimeo
-				if (convertVideoLinks && html)
+					return browser == match[1];
+				},
+				strpos: function(haystack, needle, offset)
+				{
+					var i = haystack.indexOf(needle, offset);
+					return i >= 0 ? i : false;
+				},
+				disableBodyScroll: function()
 				{
-					var iframeStart = '<iframe width="500" height="281" src="',
-						iframeEnd = '" frameborder="0" allowfullscreen></iframe>';
 
-					if (html.match(urlYoutube))
-					{
-						html = html.replace(urlYoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);
-						$(n).after(html).remove();
-					}
-					else if (html.match(urlVimeo))
+					var $body = $('html');
+					var windowWidth = window.innerWidth;
+					if (!windowWidth)
 					{
-						html = html.replace(urlVimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);
-						$(n).after(html).remove();
+						var documentElementRect = document.documentElement.getBoundingClientRect();
+						windowWidth = documentElementRect.right - Math.abs(documentElementRect.left);
 					}
-				}
-
-				// image
-				if (convertImageLinks && html && html.match(urlImage))
-				{
-					html = html.replace(urlImage, '<img src="$1">');
 
-					$(n).after(html).remove();
-				}
-
-				// link
-				if (convertLinks && html && (html.match(url1) || html.match(url2)))
-				{
-					var href = (html.match(url1) || html.match(url2));
-					href = href[0];
-					if (href.length > linkSize) href = href.substring(0, linkSize) + '...';
+					var isOverflowing = document.body.clientWidth < windowWidth;
+					var scrollbarWidth = this.utils.measureScrollbar();
 
-					html = html.replace(/&/g, '&amp;')
-					.replace(/</g, '&lt;')
-					.replace(/>/g, '&gt;')
-					.replace(url1, '$1<a href="' + protocol + '$2">' + $.trim(href) + '</a>$3')
-					.replace(url2, '$1<a href="$2">' + $.trim(href) + '</a>$5');
+					$body.css('overflow', 'hidden');
+					if (isOverflowing) $body.css('padding-right', scrollbarWidth);
 
 
-					$(n).after(html).remove();
+				},
+				measureScrollbar: function()
+				{
+					var $body = $('body');
+					var scrollDiv = document.createElement('div');
+					scrollDiv.className = 'redactor-scrollbar-measure';
+
+					$body.append(scrollDiv);
+					var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
+					$body[0].removeChild(scrollDiv);
+					return scrollbarWidth;
+				},
+				enableBodyScroll: function()
+				{
+					$('html').css({ 'overflow': '', 'padding-right': '' });
+					$('body').remove('redactor-scrollbar-measure');
 				}
-			}
-			else if (n.nodeType === 1 && !/^(a|button|textarea)$/i.test(n.tagName))
-			{
-				$.Redactor.fn.formatLinkify.call(n, protocol, convertLinks, convertImageLinks, convertVideoLinks, linkSize);
-			}
+			};
 		}
 	};
 
+	$(window).on('load.tools.redactor', function()
+	{
+		$('[data-tools="redactor"]').redactor();
+	});
+
+	// constructor
+	Redactor.prototype.init.prototype = Redactor.prototype;
+
 })(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.less elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.less
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.less	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.less	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,1006 @@
+.clearfix() {
+	&:after {
+		content: "";
+		display: table;
+		clear: both;
+	}
+}
+.transition-redactor(@transition: all linear .2s) {
+	-moz-transition: @transition;
+	transition: @transition;
+}
+
+.opacity-redactor(@opacity: 100) {
+	filter: e(%("alpha(opacity=%d)", @opacity));
+	-moz-opacity: @opacity / 100;
+	opacity: @opacity / 100;
+}
+.box-sizing-redactor(@box-model) {
+	-webkit-box-sizing: @box-model;
+	-moz-box-sizing: @box-model;
+	box-sizing: @box-model;
+}
+.striped-redactor(@color: rgba(255, 255, 255, .2); @angle: 45deg) {
+	background-image: -webkit-linear-gradient(@angle, @color 25%, transparent 25%, transparent 50%, @color 50%, @color 75%, transparent 75%, transparent);
+	background-image: -o-linear-gradient(@angle, @color 25%, transparent 25%, transparent 50%, @color 50%, @color 75%, transparent 75%, transparent);
+	background-image: linear-gradient(@angle, @color 25%, transparent 25%, transparent 50%, @color 50%, @color 75%, transparent 75%, transparent);
+}
+
+.animation-redactor(@animation) {
+	-webkit-animation: @animation;
+	-o-animation: @animation;
+	animation: @animation;
+}
+
+// VARIABLES
+@redactorFontFamily: Arial, Helvetica, Verdana, Tahoma, sans-serif !important;
+@redactorCodeFontFamily: Menlo, Monaco, monospace, sans-serif !important;
+
+@redactorFontSize: 14px;
+@redactorLineHeight: 1.6em;
+
+/*
+	Icon font
+*/
+@font-face {
+	font-family: 'RedactorFont';
+	src: url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMggi/NUAAAC8AAAAYGNtYXAaVcx2AAABHAAAAExnYXNwAAAAEAAAAWgAAAAIZ2x5Zm8dIFkAAAFwAAATSGhlYWQACVb9AAAUuAAAADZoaGVhA+ECBQAAFPAAAAAkaG10eEEBA94AABUUAAAAkGxvY2FVlFE8AAAVpAAAAEptYXhwAC8AkgAAFfAAAAAgbmFtZRHEcG0AABYQAAABZnBvc3QAAwAAAAAXeAAAACAAAwIAAZAABQAAAUwBZgAAAEcBTAFmAAAA9QAZAIQAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmHwHg/+D/4AHgACAAAAABAAAAAAAAAAAAAAAgAAAAAAACAAAAAwAAABQAAwABAAAAFAAEADgAAAAKAAgAAgACAAEAIOYf//3//wAAAAAAIOYA//3//wAB/+MaBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwAAACUCAAGSAAQACQANAAA3EQURBQEFEQURATUXBwACAP4AAdv+SgG2/tySkiUBbgH+lAEBSgH+3AEBJv7/3G9sAAAGAAAASQIAAW4ABAAJAA4AEwAYAB0AABMhFSE1FSEVITUVIRUhNSczFSM1FTMVIzUVMxUjNZIBbv6SAW7+kgFu/pKSSUlJSUlJAW5JSW5JSW5JSdxJSW5JSW5JSQAAAAACAAAAJQH3AZIAFgAuAAAlLgMnBzIuAic+AyMXNh4CByUnMg4CBx4DIxcnHgMXNi4CBwH3Dik/XUABAR04Vjg+WDUYAQFNeEcZEv7MAQENHDMlHzIfEQEBASZUTDYHCSBIZj4lGCQaEARqFi5HLzJFKhJqDC1RZSzVPQoWIxkbJBQID0wCCQ4VDxo4KA8PAAACAG4AJQGSAZIABAAzAAA3IQchJzceAzMyPgI3PgMnNyMXDgMHDgMjIi4CJy4DNycjBx4DF24BJQH+3QFABRIUGg0QGBUQCAYKBgQBAUABAQEEBAQCCAgKBQYJCQcEAgUCAwEBPwEBAwcJCEkkJD8HCgYEBAYKBwcRFRkPtcMGCQkHAwMFAwEBAwUDAwcJCQbDtQ8ZFREHAAUAAP//AgABtwAGAA4AFgBHAF8AAAEzFTMVIzUfAQc1IzUzNS8BNxUzFSMVFx4DFRwBDgEHDgMHMh4CFx4DHwEjJzwBJjQjLgMrARUjNTMyHgIXBzMyPgI3PgM1NC4CJy4DKwEVAUkjS24mkZFvb96RkW9vDAMFAwECAwICBQUGBAECAgIBAQICAgEbIBMBAQIEBQUCCh0qCAwKCQM3DgMFBQMCAQIBAQEBAgECAwQGAw4BtpYgtv9cXEolSUhcXEklSlUDCAoNBwQJBwcCAwUDAgEBAQIBAQMEBANCLgEBAQIGBwYCSLYBAwUDRAECAgECBAQGAwQFBQQBAgIBATIAAAAAAwBtAAABkgGTAAMADAARAAAlIzcXBzM3MxczAyMDFyEVITUBI0YjI7ZKF2MXSmVbZQEBJP7c5nh4eUlJASb+2iRJSQAKAAAAJQIAAZIABAAJAA4AEwAYAB0AIgAnACwAMQAANxEFEQU3FzUHFTU3NScVJwcVFzUVJxU3NRUHFRc1NxUXNQclBxUXNRUnFTc1FQcVFzUAAgD+ALeSkpKSJW1tbW1tbSWSkgEkbW1tbW1tJQFuAf6UASUBSgFIbQFIAUq4AUgBSm8BSgFIbQFIAUrbSAFKAQEBSAFKbwFKAUhtAUgBSgAAAAIACQAlAgABkgAWAC4AACUOAxU1DgMHJj4CFzU0HgIXBT4DNxU1FD4CNy4DNRUmDgIXAgA5VTkcQVxAKA8RGEh3Thc2Vz/+PAY3S1UlECAxICYyHQw9Z0chCt8wRi8VAWsFDxsjGS1kUiwLaQETKUYxYBAUDwgDTRABCRMlGhoiFwkBPhAQJzkZAAAAAgBJAEkBtwFuAEcAjwAAAQ4DFRQeAhceAxc+Azc+AzU0LgInLgMHJg4CBwYiBiYHNAYmIicwLgE0NTQ+Ajc+Azc1DgMHJw4DFRQeAhceAxc+Azc+AzU0LgInLgMHJg4CBwYiBiYVJgYmIjUiJjQmNTQ+Ajc+Azc1DgMHATkJDQkEAwYKBgcOEBAJCA4NDAUGCAUDAwQHBQUKCgwGBQoICAMBAgIBAQEBAQEBAQMGCgYGDxITCxMhHBYJzQkNCQQDBwkHBg4QEQgIDg0MBgUIBQMCBQcFBAoLDAYFCQkIAwECAgEBAQEBAQEBAwcJBgcPERQLEyEcFwkBIgwYHBsQCxgUEgcICwgDAQECBggGBQ0MDwYIDA0KBgUIBAQBAQICBQECAgEBAQECAQQCBQEKEhQRCggQDAwDFwgQFBQNAQwYHBsQCxgUEgcICwgDAQECBggGBQ0MDwYIDA0KBgUIBAQBAQICBQECAgEBAQECAQQCBQEKEhQRCggQDAwDFwgQFBQNAAT//wBJAgABbgAEAAkADgASAAATIRUhNRchFSE1FSEVITUHNQcXAAIA/gC3AUn+twFJ/rclk5MBbklJbklJbklJSbdcWwAAAAUAAABJAgABbgAEAAkADgAaAG0AABMhFSE1FSEVITUVIRUhNSczNSM1IwcVNxUjFRc+Azc+Azc0PgE0NTQuAicuAyMiBioBByIOAiMVPgM3Mj4BMjM6AR4BFx4CFBUcAQYUBw4DBw4DDwEVMzUjPgM3MZIBbv6SAW7+kgFu/pKNRBgUFhYYIAUHBQMBAgICAQEBAQEDBAICBgcHBQEEAwQCAgMEBAICBAQDAgIDAwMCAgMDAwEBAgEBAQEBAgICAQQGCQULRC0BAwQEAgFuSUluSUluSUlrFF0GFAZJFJEFBwYEAQIDBAMBAgMDAwIDBwUFAgIEAgEBAQEBAhUBAgIBAQEBAQIBAQIDBAIBAgMCAQICAwMCAQUHCQYNExQBBAMFAgADAAAASQIAAW4ALAAxAGwAACUiLgInNTMeAzMyPgI1NC4CIyIOAgcjNT4DMzIeAhUUDgIjJzMVIzUnIg4CByMVDgMVFB4CFxUzHgMzMj4CNzMVDgMjIi4CNTQ+AjMyHgIXFSMuAyMBbgoUEhEIHgUKCwsGEyEZDg4ZIRMGCwsKBR4IERIUCh41KBcXKDUet5KSJQYLCwoFHgQHBQICBQcEHgUKCwsGBgsLCgUeCBESFAoeNSgXFyg1HgoUEhEIHgUKCwsGSQMGBwU0AgQDAQ0XHhESHhcNAQMEAjQFBwYDFyg1Hx41KBe3SUkvAQMEAhgFCw0OBwcNDQsGFwIEAwEBAwQCNAUHBgMXKDUeHzUoFwMGBwU0AgQDAQAAAAEAAAC3AgABAAAEAAATIRUhNQACAP4AAQBJSQABAJIASQGSAZIADAAAAQ8CFzcHNxc3DwEXAQcpQQvBC0ApQAvBC0EBWdYBOAE6AdgBOgE4AQAAAAQAAABJAgABbgAEAAkADgASAAATIRUhNRchFSE1FSEVITUHNRcHAAIA/gC3AUn+twFJ/re3k5MBbklJbklJbklJSbdcWwAAAAMAAAAlAgABkgAEAAkAEgAANxEFEQUBBREFEQc/ARcVJTU3FwACAP4AAdv+SgG2tiQwPv6Sbm4lAW4B/pQBAUoB/twBASa4AV5eSgFIk5MABAAlAAAB2wG3AAMAGgAeADUAAAEVJzMHHgIGDwEOAS4BJy4BNDY/AT4BHgEXARcnFTceATI2PwE+AS4BJy4CBg8BDgEeARcB29vbKgMDAQICcwIGBgYCAwMBAnQCBQYGAv5029sqAwYGBQJzAgEBAgMCBgYGAnICAgEDAgG33NwrAgYGBgJzAgEBAgMDBQYGAnMCAQECA/51AdvaKgMDAQJzAgUGBgMCAwECAnMCBQYGAgAABAAA/9sCAAHbAAMAGgAeADUAACU1Fwc3LgI2PwE+AR4BFx4BFAYPAQ4BIiYnBycXNQcuASIGDwEOAR4BFx4CNj8BPgEuAScBJdvbKgMDAQICcwIGBgYCAwMBAnQCBQYGAnTb2yoDBgYFAnMCAQECAwIGBgYCcgICAQMC/9zbASwCBgYGAnICAgEDAgMGBgUCcwIBAwN1AdzbKgMDAQJzAgUGBgMCAwECAnICBgYGAgABAG4AJQFuAZIAEgAAJREjESM1Ii4CNTQ+AjsBESMBSSRKFigeEREeKBaTJSUBSf63khEeKBcWKB4R/pMAAAAAAwAlAAEB3AG2AAoAVwB4AAAlMwcnMzUjNxcjFQcOAwcOAyMiLgInLgM1ND4CNz4DOwE1NC4CJy4DIyIOAgcOAwc1PgM3PgIyMzIeAhceAx0BIzU1IyIOAgcOAxUUHgIXHgMzMj4CNz4DPQEBkkpcXEpKXFxK6wIGBgcEAwgICQUIDw4LBQUHBQIDBQkGBQ8SFAwlAQMDAgMFBwgFBAoJCQQFCQkJBQQJCQkEBQkKCQUNFRENBQUIBQI0FQgMCggDAwUDAQECAwICBQUHAwUJCQcCAwUCApKRkZORkZMHBAYFBQECAwIBAgUHBQULDQ8JCRANCwQFBgUCCQMGBQQCAgICAQEBAgEBAwQFAy8CAwMCAQEBAQIFCAUGDhIXDXgYSwECAwICBgYIBQQGBgUCAgMCAQIEBgQECgsOBwQAAAAEACUASgHbAW4AAwAMAC0AegAANyM3FwczNzMXMwMjAyUVFA4CBw4DIyIuAicuAzU0PgI3PgM7ATcuAyMqAQ4BBw4DBxU+Azc+AzMyHgIXHgMdASMiDgIHDgMVFB4CFx4DMzI+Ajc+AzcVMzU0LgInrjUbGok4EUsSOE1ETQF/AQMFAwMHCQoFBAYGBQIDAwIBAgMEAwMJCw0IFiIFDhIWDQYKCgoFBAoJCgQFCgoJBQUJCgoFBAkHBgIDAwMBJg0WEw8GBgkGAwIFCAUFDA4QCQUJCQgEBAcHBgI3AgUIBsV1dXZHRwEf/uFlBAcOCwsEBAYEAwICAwICBQYHAwUJBwUCAgMCAWIFCAYCAQEBAQMCBAIwAwUEAwIBAgEBAQIDAQIEBgYDCQMEBwQFCw4QCgkPDgsFBQcFAgEBAwICBQUHAxh7DhcTDwUAAAIASQBJAbcBkwAEAIEAABMhFSE1Fx4DFx4DFRQOAgcOAyMiLgInLgMnFR4DFx4DMzI+Ajc+AzU0LgInLgMvAS4DJy4DNTQ+Ajc+AzMyHgIXHgMXNS4DJy4DIyIOAgcOAxUUHgIXHgMfAUkBbv6SvwQIBgYCAgMDAQIDBQQDCAkLBgYNDAwGBg0NDQYGCwwNBgYNDAwHDxoXEggHCwgDAgUHBAUMDxIKHAcNCQcDAgMDAQIDBQMDCAkKBgYLCgsGBQsLCgYGCwwLBgYLDAsGDBcUEQcICwcDAgQHBAUMERUNIAEAJSUxAgMFBAMDBgYHAwUICAYDAgQDAQECAwMCBQcIBEEDBAUDAgECAQEDBgkGBQ8SFQwJEA8NBgYKCggDCwIFBQQDAgUFBgMFBwcFAwIDAwEBAgMCAgQGBgM9AgUDBAEBAgEBAwcJBgYPERMLCA8ODAQFCgoJBQsAAAQAAABJAgABbgAEAAkADgATAAA/ARcHJxc3FwcnJScHFzcXJwcXNwAltiO4AbYluCMB/yO4JbYBuCO2Jdsdkh6TAZQekhwBHZIekwGUHpIcAAAAAAUAAP/bAgAB2wAEAAkADgATABgAABcRIREhASERIREHITUhFRUhNSEVFSE1IRUAAgD+AAHb/koBtkn+3AEk/twBJP7cASQlAgD+AAHc/kkBt5JJSW5JSW5JSQAAAwCTAEkBbQGSABcALwBbAAA3Mh4CFx4DFwYUDgEHDgMrATczNzIeAhceAhQXBhQOAQcOAysBNzMDMzI+Ajc+Ayc2LgInLgMnPgM3PgMnNi4CJy4DKwED+AcNCQkDBAMEAQEBBAQEAgkKDQcqASgBBQsIBwIDAwQBAQQCBAEICAsFKgEoZGQRGRgRCAYLBgQBAQMEBwQGCg8OCggMDQgFAwcDAwEBBAYLBgcQFBcOZAHeAQMEAwMICQwHBgsJCAIDBAMBYYECAgMDAgYHCQUFCQcGAgIEAgFN/uoDBQgGBQ4RFQsKEQ8NBgUJBgQBAQMFBwUECwwOCAsSDw0FBggFAv63AAADACUAAAHbAbcABAANABEAADcRIREhEyMDMzczFzMDBxcjNyUBtv5K/URMOBBLETdLIho0GgABt/5JAW7+20hIASU1eHgAAAACAEIAHwG8AZkAIQBLAAAlBycOAS4BJwcXBw4BIiYvAS4BNDY/AT4BMhYfAR4BFAYHJy4BIgYPAQ4BFBYXHgE+AT8BLgMnLgI2PwE+AhYXBxc3PgE0JicBvJQEBQsMCwYhHg8PJygnDw8PDw8P1w8nKCcPDw8QEA8lCxscHAvFCwwLCgsbHRsLJwMFBgUCCgwDBQhSBg8QEgl+JoYLCwoL9pQEAQECAwMgHg8PDw8PDxAmKCcP1w8QEA8PDycoJw9+CwoLC8YLGx0bCwoLAQsLJgIDBAUCChcXFQhSBgYBBAV9JYYLHBwbCwAAAAMAAABJAgABbgAEAAkADgAAEyEVITUXIRUhNRczFSM1AAIA/gCSAW7+kpPb2wFuSUluSUluSUkAAwAAAEkCAAFuAAQACQAOAAATIRUhNRUhFSE1FTMVIzUAAgD+AAFt/pPc3AFuSUluSUluSUkAAAADAAAASQIAAW4ABAAJAA4AABMhFSE1FSEVITUVIRUhNQAB//4BAf/+AQIA/gABbklJbklJbklJAAMAAABJAgABbgAEAAkADgAAEyEHIScHIRchNxchByEnbgElAf7dAW0B/wH9/wFtASUB/t0BAW5JSW5JSW5JSQAGAAAAJwIAAZUACAANABQAGAAdACEAADc1IxEhFTMRIQEhFSE1FyMVIRUhNQcjNxcXITUhFScXIzdJSQG3Sf5JAUn+kwFtSiX+twFu27hcXG3+2wElKSlJICdJASVK/twBSdzcSbcl3EltbSUlJW5JSQAAAAEAAAABAADCHXSvXw889QALAgAAAAAAz3WLJQAAAADPdYsl////2wIAAdsAAAAIAAIAAAAAAAAAAQAAAeD/4AAAAgD//wAAAgAAAQAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAbgIAAAACAABtAgAAAAIAAAkCAABJAgD//wIAAAACAAAAAgAAAAIAAJICAAAAAgAAAAIAACUCAAAAAgAAbgIAACUCAAAlAgAASQIAAAACAAAAAgAAkwIAACUCAABCAgAAAAIAAAACAAAAAgAAAAIAAAAAAAAAAAoAFAAeAEAAcAC4AQQBhgGoAfoCQAMCAyYDuARGBFQEcASUBLwFFgVuBY4GLgbUB4IHrAfaCFwIgAj2CRIJLglKCWoJpAAAAAEAAAAkAJAACgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAYAAAAAQAAAAAAAgAOAGoAAQAAAAAAAwAYAC4AAQAAAAAABAAYAHgAAQAAAAAABQAWABgAAQAAAAAABgAMAEYAAQAAAAAACgAoAJAAAwABBAkAAQAYAAAAAwABBAkAAgAOAGoAAwABBAkAAwAYAC4AAwABBAkABAAYAHgAAwABBAkABQAWABgAAwABBAkABgAYAFIAAwABBAkACgAoAJAAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQAVgBlAHIAcwBpAG8AbgAgADEALgAwAFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0UmVkYWN0b3JGb250AFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0AFIAZQBnAHUAbABhAHIAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('truetype'),
+		 url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AABIoAAoAAAAAEeAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAA9AAADgEAAA4Bg0Rie09TLzIAAA74AAAAYAAAAGAIIvzVY21hcAAAD1gAAABMAAAATBpVzHZnYXNwAAAPpAAAAAgAAAAIAAAAEGhlYWQAAA+sAAAANgAAADYACVb9aGhlYQAAD+QAAAAkAAAAJAPhAgVobXR4AAAQCAAAAJAAAACQQQED3m1heHAAABCYAAAABgAAAAYAJFAAbmFtZQAAEKAAAAFmAAABZhHEcG1wb3N0AAASCAAAACAAAAAgAAMAAAEABAQAAQEBDVJlZGFjdG9yRm9udAABAgABADr4HAL4GwP4GAQeCgAZU/+Lix4KABlT/4uLDAeKZviU+HQFHQAAAT8PHQAAAUQRHQAAAAkdAAAN+BIAJQEBDRkbHSAlKi80OT5DSE1SV1xhZmtwdXp/hImOk5idoqessba7wFJlZGFjdG9yRm9udFJlZGFjdG9yRm9udHUwdTF1MjB1RTYwMHVFNjAxdUU2MDJ1RTYwM3VFNjA0dUU2MDV1RTYwNnVFNjA3dUU2MDh1RTYwOXVFNjBBdUU2MEJ1RTYwQ3VFNjBEdUU2MEV1RTYwRnVFNjEwdUU2MTF1RTYxMnVFNjEzdUU2MTR1RTYxNXVFNjE2dUU2MTd1RTYxOHVFNjE5dUU2MUF1RTYxQnVFNjFDdUU2MUR1RTYxRXVFNjFGAAACAYkAIgAkAgABAAQABwAKAA0AQQCYAPEBSQH6Ai8CxwMhA98EGwTXBYEFkQW0BfEGLwagBxEHOgf0CLUJaQmsCfwKhAq5C0QLdAuiC9AMAQxo/JQO/JQO/JQO+5QOi7AVi/gB+JSLi/wB/JSLBfhv990V/EqLi/u5+EqLi/e5Bfu4+5QVi/dv9yb7Avsm+wEFDvcm+AIV+AKLi0L8AouL1AWL+wIV+AKLi0L8AouL1AWL+wIV+AKLi0L8AouL1AX7JvdwFdSLi0JCi4vUBYv7AhXUi4tCQouL1AWL+wIV1IuLQkKLi9QFDviLsBVky0yq+0KWCIshBYuLQMb7LPcT9z33GsW4i4sIiyEF92Wr9wT7QV77Cgj7yfdpFYvIBYuLb3ImSOFBtnqLiwiLfIvXBe6F9yJ7nGSl0PsO6Ps2YwgO9wLUFfe4i4tn+7iLi68FysoVnHmngrGLsounlJydnJ2Up4uyCIv3SUyLi/tXBYt8hoCDg4ODgId8i32Lf4+Dk4OTh5aLmgiL91dLi4v7SQWLZJRvnXkIDvfd+EoVrouL+yrWi4tr+wKLi/dKBbH7kxX3JS/7JS+L1fsDi4uw9wOLi9QF+3LTFfsl5/cl54tC9wOLi2b7A4uLQQWXNhWTg499i3iLf4mBhoSGg4SHgYmOio6KjYiNiI6GjoQIpklri3i5BYuMio2KjYaZhZKEiwiBi4tDbouL90q1iwWfi5mHk4MIVEcVmYsFk4uRjY+Pjo+NkYuUi5SJkoiOh4+FjYOLCH2Li1kFDve393oVRYuu9wyu+wwF+0r7DRXVi6LU7ouiQtWLJve6MIsm+7oFjGcV97iLi0L7uIuL1AUOi7AVi/gB+JSLi/wB/JSLBfdLrxX3JouL1Psmi4tCBYv3AhX3JouL1Psmi4tCBWb3SxX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBbD3cBWLQvcmi4vU+yaLBfe4ixX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBYv7AhX7AYuLQvcBi4vUBQ74lPdzFfss+xNAUIuLCIv1BftCgExsZEte9wr3BPdB92VrCIv1BYuLxV73PfsaCPxYLBWcsvcim+6RCIs/i5oFi4u2nOHVJs5vpIuLCItOBfs2s/sOLqVGCA73zfe2FXNsgGiLY4tpk3Ccd513n4Gji6CLnJKZmpqakpyLn4uehZt+mH+ZfJJ7i32LgIeChQiIiYmKiYuKi4mMioyKjoqPi5GLpJOknKOco6KcqJYIi6EFWXhlcnRrCPthixV0bH9oi2OLaZNwnXecd6CBoougi5ySmpqZmpKci5+LnoWbfph/mX2Seot+i3+IgoQIiImJioqLiYuKjIqMiY6Kj4uRi6SUpJujnKOinKmWCIuhBVh4ZnJzawgOi/gCFfiUi4tC/JSLi9QF90v7AhX33YuLQvvdi4vUBYv7AhX33YuLQvvdi4vUBWZCFYv3S/snL/cnMAUO9yb4AhX4AouLQvwCi4vUBYv7AhX4AouLQvwCi4vUBYv7AhX4AouLQvwCi4vUBfsh9hXPi4ufc4uL6HeLdYWLd6GRi0Jzi4t3Bav7JRWXl5KTjY6PkI2PjY+Mj4yPi5CLlIiThJCFkYKOf4uHi4aKhoqGioaKhokIi3YFkI6QjZCNkIyPjI+LkIuPio6IjoiMh4uGi4iLiImIiYeJh4eHiIiDgX18CIB+i3jPi4ufXosFjo+QkJGRCIuLBQ74AtQVcItyk3aYCIu/qYsFmIWZh5uLvYu0sIu5i7pisFmLe4t9h36FCG2Li78FoJikk6aL3IvMSYs6iztKSTqLCPtL90sV9yaLi0L7JouL1AVmuhV8i3yHfoUIbYuLcwWAfYR6i3iLeZJ5ln0Ii3SpiwWYhZqHmoubi5mPmJEIqYuLVwV2fnKDcIs6i0rNi9uL3MzN3Iumi6SDoH4Ii1dtiwV+kX2Pe4sIDov3lBX4lIuLQvyUi4vUBQ73m/ftFWL7a0qLgFL3VYuWxEuLtPdry4uWxPtVi4BSzIsFDov4AhX4lIuLQvyUi4vUBfdL+wIV992Li0L73YuL1AWL+wIV992Li0L73YuL1AX7S0IVi/dL9ycv+ycwBQ6LsBWL+AH4lIuL/AH8lIsF+G/33RX8SouL+7n4SouL97kF+0r7SxWvi7vqySyLQvwCi4vU9wL3JvcC+yYFDvhv+EsVi/tw+2/3cPdviwVhYBWShIyChoUI+wf7BwWFhoKMhJKEkoqUkJEI9wj3BwWQkJWKkYQI/CD8HxX3b4r7b/dvi/tuBbW1FZKElYqQkAj3B/cHBZCQipWEkoSRgo2FhQj7BvsHBYWGjYGRhQgO97n3kxWL93D3b/tv+2+KBbW3FYSSipSQkQj3B/cGBZGRlIqShJKEjIGGhgj7CPsHBYaGgYyFkgj7CPsJFftvjPdv+3CL928FYWEVhJKBjIaGCPsH+wcFhoaMgZKEkoSUipGRCPcG9wYFkZGJlIWSCA733bAVi/fdZ4uL+91Bi4v3JgVPi1q8i8iLx7y8x4sI9yeLi/wBZosFDvgm9yYV1Ysv+yUv9yXVi4v3J0GL5/cl5/slQYuL+ycF+3+EFYWCgoSBhoGGgIh/i3WLeZF+mH6XhZ2Looujkp2blpqXopGriwiwi4uUBYuUiJKFj4SQgo1/i3+Lf4l/iH+If4V+hAiLugWWkJeOl46XjZiMmIusi6KEmH6ZfZFyi2gIi/sMV4uLowWL1hV2iwV3i32IhIaDhoeCi36LgY6EkIWQhpOIlIuZi5aQkpaTlo+ai58Ii48FDvdC91kVVoum9wml+wkF+x37ChXDi5zS1oudRMOLPvezR4s++7MF+BPwFYuHBYt3h3uDgIOAf4V9i4GLg46GkYWRiJOLlIuYj5WTkJSQmY6giwihiwWt7RV9mXOSaYt8i36Kfol/iH6Hf4YIi1sFmJOYkJiPl46YjZmLl4uViJGHkoaOhIuCCIuCZYsFaYtyhXt/e3+DeItyi3SReZl+mH6ehaOLmIuXjZWQlpCTk5KUCItzwouL9w8Fi6+EpX2ZCA7U95QV+AKLi2b8AouLsAX3U1oVloeUhZGEkYSOgouCi36GgYKEgoR/iHuLe4t6jnuRepB6lHqXCItKBZqEm4Wch5yIm4mci7OLqZOfm5+alKOLq4ujhZ9/mn6bd5dwlAhvlgV3kX6ShZGFkIiTi5OLl4+UlJGTkZeOm4uai5mImoaZhpqEmYIIi8gFfJF8kHuPfI58jXuLaYtxg3h6d3uCdItui3WQeZd+l32hf61+CKuABQ6L928Vr6n3S/snZ277S/cmBYuLFfdL9yevbvtL+ydnqAX4lIsVZ6n7S/snr273S/cmBYuLFftL9ydnbvdL+yevqAUOi2YVi/iU+JSLi/yU/JSLBfhv+HAV/EqLi/xL+EqLi/hLBUL7JhX7uIuL1Pe4i4tCBYv7AhX7uIuL1Pe4i4tCBYv7AhX7uIuL1Pe4i4tCBQ73jPdyFZ6LmYiUg5ODj36LeYt6h3+DhIOEfYd3iwhii4vstIsFi/cVFZuLloiShJKFjoKLfYt+iIGEhYSFgIh7iwhii4vYtIsFJvuqFfCLBbWLqJKemp2ZlKKLqoulhZ9/mn+ZeZRzjZ+NmpKVl5aXkJuLoIungqB5mHqZcJJoiwgmi4v73QUOsIsVi/hL+EqLi/xL/EqLBfeR+AIVR4s/+7nDi5vT1oucQ8KLQPe5BWlWFaX7DFeLpfcMBQ74UPeKFfso+yiHjwV9h3uNfJMIamupbXx8BWJiSYtitAh8mgVitIvNtLQI92v3awW0tM2LtGIImnwFtGKLSWJiCGb3EhVuqFyKbm4I+1n7WgVtbotcp26ob7qLqKkIsrEFg4+EkIWScKaGsJ+gCN3dBZuapIyifwj7EvsRsWb3GvcaBaiojLpuqAgOi/gCFfiUi4tC/JSLi9QF9yb7AhX4AouLQvwCi4vUBfcn+wIV92+Li0L7b4uL1AUOi/gCFfiUi4tC/JSLi9QFi/sCFfgBi4tC/AGLi9QFi/sCFfdwi4tC+3CLi9QFDov4AhX4k4uLQvyTi4vUBYv7AhX4k4uLQvyTi4vUBYv7AhX4lIuLQvyUi4vUBQ73AvgCFfe4i4tC+7iLi9QF+wL7AhX4lIuLQvyUi4vUBfcC+wIV97iLi0L7uIuL1AUO1LIVi9RCi4v3ufhLi4tB1IuL+7j8S4sF99333RX8AYuL+3D4AYuL93AF1UIVZouL+0v73YuLZvgCi4v3cAX7b0IV+0yL5/cB5/sBBfcBZhX7uYuLsPe5i4tmBWL3AhW0QkKLq9QFDviUFPiUFYsMCgAAAAADAgABkAAFAAABTAFmAAAARwFMAWYAAAD1ABkAhAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOYfAeD/4P/gAeAAIAAAAAEAAAAAAAAAAAAAACAAAAAAAAIAAAADAAAAFAADAAEAAAAUAAQAOAAAAAoACAACAAIAAQAg5h///f//AAAAAAAg5gD//f//AAH/4xoEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAQAAhlBJsl8PPPUACwIAAAAAAM91iyUAAAAAz3WLJf///9sCAAHbAAAACAACAAAAAAAAAAEAAAHg/+AAAAIA//8AAAIAAAEAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAQAAAAIAAAACAAAAAgAAAAIAAG4CAAAAAgAAbQIAAAACAAAJAgAASQIA//8CAAAAAgAAAAIAAAACAACSAgAAAAIAAAACAAAlAgAAAAIAAG4CAAAlAgAAJQIAAEkCAAAAAgAAAAIAAJMCAAAlAgAAQgIAAAACAAAAAgAAAAIAAAACAAAAAABQAAAkAAAAAAAOAK4AAQAAAAAAAQAYAAAAAQAAAAAAAgAOAGoAAQAAAAAAAwAYAC4AAQAAAAAABAAYAHgAAQAAAAAABQAWABgAAQAAAAAABgAMAEYAAQAAAAAACgAoAJAAAwABBAkAAQAYAAAAAwABBAkAAgAOAGoAAwABBAkAAwAYAC4AAwABBAkABAAYAHgAAwABBAkABQAWABgAAwABBAkABgAYAFIAAwABBAkACgAoAJAAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQAVgBlAHIAcwBpAG8AbgAgADEALgAwAFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0UmVkYWN0b3JGb250AFIAZQBkAGEAYwB0AG8AcgBGAG8AbgB0AFIAZQBnAHUAbABhAHIAUgBlAGQAYQBjAHQAbwByAEYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('woff');
+	font-weight: normal;
+	font-style: normal;
+}
+
+
+/*
+	Box
+*/
+.redactor-box {
+	position: relative;
+	overflow: visible;
+	margin-bottom: 24px;
+
+	& textarea {
+		display: block;
+		position: relative;
+		margin: 0;
+		padding: 0;
+		width: 100%;
+		overflow: auto;
+		outline: none;
+		border: none;
+		background-color: #111;
+		box-shadow: none;
+		color: #ccc;
+		font-size: 13px;
+		font-family: @redactorCodeFontFamily;
+		resize: none;
+		&:focus {
+			outline: none;
+		}
+	}
+}
+.redactor-editor,
+.redactor-box {
+	background: #fff;
+}
+
+/*
+	Z-index setup
+*/
+.redactor-editor,
+.redactor-box,
+.redactor-box textarea {
+	z-index: auto;
+}
+.redactor-box-fullscreen {
+	z-index: 1051;
+}
+.redactor-toolbar {
+	z-index: 100;
+}
+.redactor-dropdown {
+	z-index: 1052;
+}
+#redactor-modal-overlay,
+#redactor-modal-box,
+#redactor-modal {
+	z-index: 1053;
+}
+
+/*
+	Fullscreen
+*/
+body .redactor-box-fullscreen {
+    position: fixed;
+    top: 0;
+    left: 0;
+    width: 100%;
+}
+
+/*
+	Utils
+*/
+.redactor-scrollbar-measure {
+	position: absolute;
+	top: -9999px;
+	width: 50px;
+	height: 50px;
+	overflow: scroll;
+}
+
+/*
+	Editor
+*/
+.redactor-editor {
+	position: relative;
+	overflow: auto;
+	margin: 0 !important;
+	padding: 20px;
+	min-height: 80px;
+	outline: none;
+	white-space: normal;
+	border: 1px solid #eee;
+	font-family: @redactorFontFamily;
+	font-size: @redactorFontSize;
+	line-height: @redactorLineHeight;
+	&:focus {
+		outline: none;
+	}
+}
+.toolbar-fixed-box + .redactor-editor {
+	padding-top: 32px !important;
+}
+
+/*
+	Placeholder
+*/
+.redactor-placeholder:after {
+	position: absolute;
+	top: 20px;
+	left: 20px;
+	content: attr(placeholder);
+	display: block; /* For Firefox */
+	color: #999 !important;
+	font-weight: normal !important;
+}
+
+
+/*
+	Toolbar
+*/
+.redactor-toolbar {
+	position: relative;
+	top: 0;
+	left: 0;
+	margin: 0 !important;
+	padding: 0 !important;
+	list-style: none !important;
+	font-size: 14px !important;
+	line-height: 1 !important;
+
+	background: #fff;
+	border: none;
+	box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
+
+	.clearfix;
+
+	&.redactor-toolbar-overflow {
+		overflow-y: auto;
+		height: 29px;
+		white-space: nowrap;
+	}
+	&.redactor-toolbar-external {
+		z-index: 999;
+		box-shadow: none;
+		border: 1px solid rgba(0, 0, 0, .1);
+	}
+	& li {
+		vertical-align: top;
+		display: inline-block;
+		margin: 0 !important;
+		padding: 0 !important;
+		outline: none;
+		list-style: none !important;
+		.box-sizing-redactor(content-box);
+	}
+	& li a {
+		display: block;
+		color: #333;
+		text-align: center;
+		padding: 9px 10px;
+		cursor: pointer;
+		outline: none;
+		border: none;
+		text-decoration: none;
+		cursor: pointer;
+		zoom: 1;
+		.box-sizing-redactor(content-box);
+	}
+	& li a {
+		&:hover {
+			outline: none;
+			background-color: rgba(31,120,216,1);
+			color: #fff;
+		}
+		&:hover i:before {
+			color: #fff;
+		}
+		&:active,
+		&.redactor-act {
+			outline: none;
+			background-color: #ccc;
+			color: #444;
+		}
+	}
+	& li a.redactor-btn-image {
+		width: 14px;
+	    height: 14px;
+	    background-position: center center;
+	    background-repeat: no-repeat;
+	}
+	& li a.fa-redactor-btn {
+		display: inline-block;
+		padding: 9px 10px 8px 10px;
+		line-height: 1;
+	}
+	& li a.redactor-button-disabled {
+		.opacity-redactor(30);
+		&:hover {
+			color: #333;
+			outline: none;
+			background-color: transparent !important;
+			cursor: default;
+		}
+	}
+	& li a.redactor-button-focus {
+		color:#fff;
+		background:#000;
+	}
+}
+
+/*
+	CodeMirror
+*/
+.redactor-box .CodeMirror {
+	display: none;
+}
+
+/*
+	Icons
+*/
+.re-icon {
+	font-family: 'RedactorFont';
+	speak: none;
+	font-style: normal;
+	font-weight: normal;
+	font-variant: normal;
+	text-transform: none;
+	line-height: 1;
+	-webkit-font-smoothing: antialiased;
+	-moz-osx-font-smoothing: grayscale;
+}
+.re-icon i:before {
+	position: relative;
+	font-size: 14px;
+}
+
+
+.re-video:before {
+	content: "\e600";
+}
+.re-unorderedlist:before {
+	content: "\e601";
+}
+.re-undo:before {
+	content: "\e602";
+}
+.re-underline:before {
+	content: "\e603";
+}
+.re-textdirection:before {
+	content: "\e604";
+}
+.re-fontcolor:before {
+	content: "\e605";
+}
+.re-table:before {
+	content: "\e606";
+}
+.re-redo:before {
+	content: "\e607";
+}
+.re-quote:before {
+	content: "\e608";
+}
+.re-outdent:before {
+	content: "\e609";
+}
+.re-orderedlist:before {
+	content: "\e60a";
+}
+.re-link:before {
+	content: "\e60b";
+}
+.re-horizontalrule:before {
+	content: "\e60c";
+}
+.re-italic:before {
+	content: "\e60d";
+}
+.re-indent:before {
+	content: "\e60e";
+}
+.re-image:before {
+	content: "\e60f";
+}
+.re-fullscreen:before {
+	content: "\e610";
+}
+.re-normalscreen:before {
+	content: "\e611";
+}
+.re-formatting:before {
+	content: "\e612";
+}
+.re-fontsize:before {
+	content: "\e613";
+}
+.re-fontfamily:before {
+	content: "\e614";
+}
+.re-deleted:before {
+	content: "\e615";
+}
+.re-html:before {
+	content: "\e616";
+}
+.re-clips:before {
+	content: "\e617";
+}
+.re-bold:before {
+	content: "\e618";
+}
+.re-backcolor:before {
+	content: "\e619";
+}
+.re-file:before {
+	content: "\e61a";
+}
+.re-alignright:before {
+	content: "\e61b";
+}
+.re-alignment:before,
+.re-alignleft:before {
+	content: "\e61c";
+}
+.re-alignjustify:before {
+	content: "\e61d";
+}
+.re-aligncenter:before {
+	content: "\e61e";
+}
+.re-gallery:before {
+	content: "\e61f";
+}
+
+
+/*
+	Toolbar tooltip
+*/
+.redactor-toolbar-tooltip {
+	position: absolute;
+	z-index: 1054;
+	text-align: center;
+	top: 0;
+	left: 0;
+	background: #000;
+	color: #fff;
+	padding: 5px 8px;
+	line-height: 1;
+	font-family: @redactorFontFamily;
+	font-size: 12px;
+	border-radius: 2px;
+}
+
+
+/*
+	Dropdown
+*/
+.redactor-dropdown {
+	position: absolute;
+	top: 28px;
+	left: 0;
+	padding: 0;
+	min-width: 220px;
+	max-height: 254px;
+	overflow: auto;
+	background-color: #fff;
+	box-shadow: 0 1px 7px rgba(0, 0, 0, .25);
+	font-size: @redactorFontSize;
+	font-family: @redactorFontFamily;
+	line-height: @redactorLineHeight;
+	& a {
+		display: block;
+		padding: 10px 15px;
+		color: #000;
+		text-decoration: none;
+		border-bottom: 1px solid rgba(0, 0, 0, .07);
+		&:last-child {
+			border-bottom: none;
+		}
+		&:hover {
+			background-color: rgba(31, 120, 216, 1);
+			color: #fff !important;
+			text-decoration: none;
+		}
+		&.selected {
+			background-color: #000;
+			color: #fff;
+		}
+        &.redactor-dropdown-link-inactive,
+        &.redactor-dropdown-link-inactive:hover {
+            background: none;
+            cursor: default;
+            color: #000 !important;
+            .opacity-redactor(40);
+        }
+		&.redactor-dropdown-link-selected {
+			color:#fff;
+			background:#000;
+		}
+	}
+}
+
+
+/*
+	IMAGE BOX
+*/
+#redactor-image-box {
+	position: relative;
+	max-width: 100%;
+	display: inline-block;
+	line-height: 0;
+	outline: 1px dashed rgba(0, 0, 0, .6),
+}
+#redactor-image-editter {
+	position: absolute;
+	z-index: 5;
+	top: 50%;
+	left: 50%;
+	margin-top: -11px;
+	margin-left: -18px;
+	line-height: 1;
+	background-color: #000;
+	color: #fff;
+	font-size: 11px;
+	padding: 7px 10px;
+	cursor: pointer;
+}
+#redactor-image-resizer {
+	position: absolute;
+	z-index: 2;
+	line-height: 1;
+	cursor: nw-resize;
+	bottom: -4px;
+	right: -5px;
+	border: 1px solid #fff;
+	background-color: #000;
+	width: 8px;
+	height: 8px;
+}
+
+
+
+/*
+	LINK TOOLTIP
+*/
+.redactor-link-tooltip {
+	position: absolute;
+	z-index: 99;
+	padding: 10px;
+	line-height: 1;
+	display: inline-block;
+	background-color: #000;
+	color: #555 !important;
+}
+.redactor-link-tooltip,
+.redactor-link-tooltip a {
+	font-size: 12px;
+	font-family: @redactorFontFamily;
+}
+.redactor-link-tooltip a {
+	color: #ccc;
+	margin: 0 5px;
+	text-decoration: none;
+	&:hover {
+		color: #fff;
+	}
+}
+
+/*
+	DROPAREA
+*/
+#redactor-droparea {
+	position: relative;
+	overflow: hidden;
+	padding: 140px 20px;
+	border: 3px dashed rgba(0, 0, 0, .1);
+	&.drag-hover {
+		background: rgba(200, 222, 250, 0.75);
+	}
+	&.drag-drop {
+		background: rgba(250, 248, 200, 0.5);
+	}
+}
+#redactor-droparea-placeholder {
+	text-align: center;
+	font-size: 12px;
+	color: rgba(0, 0, 0, .7);
+}
+
+
+/*
+	PROGRESS
+*/
+#redactor-progress {
+	position: fixed;
+	top: 0;
+	left: 0;
+	width: 100%;
+	z-index: 1000000;
+	height: 10px;
+}
+#redactor-progress span {
+	display: block;
+	width: 100%;
+	height: 100%;
+	background-color: #3d58a8;
+	.striped-redactor();
+	.animation-redactor(progress-bar-stripes 2s linear infinite);
+	background-size: 40px 40px;
+}
+
+@-webkit-keyframes progress-bar-stripes {
+	from { background-position: 40px 0; }
+	to { background-position: 0 0; }
+}
+@-o-keyframes progress-bar-stripes {
+	from { background-position: 40px 0; }
+	to { background-position: 0 0; }
+}
+@keyframes progress-bar-stripes {
+	from { background-position: 40px 0; }
+	to { background-position: 0 0; }
+}
+
+
+/*
+	MODAL
+*/
+#redactor-modal-overlay {
+	position: fixed;
+	top: 0;
+	left: 0;
+	margin: auto;
+	overflow: auto;
+	width: 100%;
+	height: 100%;
+	background-color: #000 !important;
+	.opacity-redactor(30);
+}
+#redactor-modal-box {
+	position: fixed;
+	top: 0;
+	left: 0;
+	bottom: 0;
+	right: 0;
+	overflow-x: hidden;
+	overflow-y: auto;
+}
+#redactor-modal {
+	outline:0;
+	position: relative;
+	margin: auto;
+	margin-bottom: 20px;
+	padding: 0;
+	background: #fff;
+	color: #000;
+	font-size: 14px !important;
+	font-family: @redactorFontFamily;
+	box-shadow: 0 1px 70px rgba(0, 0, 0, .5);
+
+	& header {
+		padding: 30px 40px 5px 40px;
+		font-size: 18px;
+		font-weight: bold;
+	}
+	& section {
+		padding: 30px 40px 50px 40px;
+	}
+	& label {
+		display: block;
+		float: none !important;
+		margin: 15px 0 3px 0 !important;
+		padding: 0;
+	}
+	& input[type="radio"],
+	& input[type="checkbox"] {
+		position: relative;
+		top: -1px;
+	}
+	& select {
+		width: 100%;
+	}
+	& input[type="text"],
+	& input[type="password"],
+	& input[type="email"],
+	& input[type="url"],
+	& textarea {
+		position: relative;
+		z-index: 2;
+		margin: 0;
+		padding: 5px 4px;
+		height: 28px;
+		border: 1px solid #ccc;
+		border-radius: 1px;
+		background-color: white;
+		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) inset;
+		color: #333;
+		width: 100%;
+		font-size: 14px;
+		font-family: @redactorFontFamily;
+		.transition-redactor(border 0.3s ease-in);
+		&:focus {
+			outline: none;
+			border-color: #5ca9e4;
+			box-shadow: 0 0 0 2px rgba(70, 161, 231, .3), 0 1px 2px rgba(0, 0, 0, .2) inset;
+		}
+		&.redactor-input-error {
+			border-color: #e82f2f;
+			box-shadow: 0 0 0 2px rgba(232, 47, 47, .3), 0 1px 2px rgba(0, 0, 0, .2) inset;
+		}
+	}
+	& textarea {
+		display: block;
+		margin-top: 4px;
+		line-height: 1.4em;
+	}
+
+}
+
+/*
+	Tabs in Modal
+*/
+#redactor-modal-tabber {
+	margin-bottom: 15px;
+	font-size: 12px;
+	& a {
+		border: 1px solid #ddd;
+		line-height: 1;
+		padding: 8px 15px;
+		margin-right: -1px;
+		text-decoration: none;
+		color: #000;
+		&:hover {
+			background-color: rgba(31,120,216,1);
+			border-color: rgba(31,120,216,1);
+			color: #fff;
+		}
+		&.active {
+			cursor: default;
+			background-color: #ddd;
+			border-color: #ddd;
+			color: rgba(0, 0, 0, .6);
+		}
+	}
+}
+
+
+/*
+	List in Modal
+*/
+#redactor-modal {
+	#redactor-modal-list {
+		margin-left: 0;
+		padding-left: 0;
+		list-style: none;
+		max-height: 250px;
+		overflow-x: auto;
+		& li {
+			border-bottom: 1px solid #ddd;
+			&:last-child {
+				border-bottom: none;
+			}
+		}
+
+		& a {
+			padding: 10px 5px;
+			color: #000;
+			text-decoration: none;
+			font-size: 13px;
+			display: block;
+			position: relative;
+			&:hover {
+				background-color: #eee;
+			}
+		}
+	}
+}
+
+#redactor-modal-close {
+	position: absolute;
+	top: 10px;
+	right: 10px;
+	width: 30px;
+	height: 30px;
+	text-align: right;
+	color: #bbb;
+	font-size: 30px;
+	font-weight: 300;
+	cursor: pointer;
+	-webkit-appearance: none;
+	padding:0;
+	border:0;
+	background:0;
+	outline:none;
+	&:hover {
+		color: #000;
+	}
+
+}
+#redactor-modal footer button {
+	position: relative;
+	width: 100%;
+	padding: 14px 16px;
+	margin: 0;
+	outline: none;
+	border: none;
+	background-color: #ddd;
+	color: #000;
+	text-align: center;
+	text-decoration: none;
+	font-weight: normal;
+	font-size: 12px;
+	font-family: @redactorFontFamily;
+	line-height: 1;
+	cursor: pointer;
+
+	&:hover {
+		color: #777;
+		background: none;
+		background: #bbb;
+		text-decoration: none;
+	}
+
+	&.redactor-modal-delete-btn {
+		background: none;
+		color: #fff;
+		background-color: #b52525;
+		&:hover {
+			color: rgba(255, 255, 255, .6);
+			background-color: #881b1b;
+		}
+	}
+	&.redactor-modal-action-btn {
+		background: none;
+		color: #fff;
+		background-color: #2461b5;
+		&:hover {
+			color: rgba(255, 255, 255, .6);
+			background-color: #1a4580;
+		}
+	}
+}
+
+
+/*
+	##############################################
+
+	DROPDOWN FORMATTING
+
+	##############################################
+*/
+.redactor-dropdown {
+	& .redactor-formatting-blockquote {
+		color: rgba(0, 0, 0, .4);
+		font-style: italic;
+	}
+	& .redactor-formatting-pre {
+		font-family: monospace, sans-serif;
+	}
+	& .redactor-formatting-h1 {
+		font-size: 36px;
+		line-height: 36px;
+		font-weight: bold;
+	}
+	& .redactor-formatting-h2 {
+		font-size: 24px;
+		line-height: 36px;
+		font-weight: bold;
+	}
+	& .redactor-formatting-h3 {
+		font-size: 21px;
+		line-height: 30px;
+		font-weight: bold;
+	}
+	& .redactor-formatting-h4 {
+		font-size: 18px;
+		line-height: 26px;
+		font-weight: bold;
+	}
+	& .redactor-formatting-h5 {
+		font-size: 16px;
+		line-height: 23px;
+		font-weight: bold;
+	}
+}
+
+
+/*
+	##############################################
+
+	 CONTENT STYLES
+
+	##############################################
+*/
+.redactor-editor {
+	code,
+	pre {
+		font-family: @redactorCodeFontFamily;
+		cursor: text;
+	}
+	div,
+	p,
+	ul,
+	ol,
+	table,
+	dl,
+	blockquote,
+	pre {
+		font-size: @redactorFontSize;
+		line-height: @redactorLineHeight;
+	}
+	a {
+		color: #15c;
+		text-decoration: underline;
+	}
+
+	object,
+	embed,
+	video,
+	img {
+		max-width: 100%;
+		width: auto;
+	}
+	video,
+	img {
+		height: auto;
+	}
+	div,
+	p,
+	ul,
+	ol,
+	table,
+	dl,
+	figure,
+	blockquote,
+	pre {
+	  margin: 0;
+	  margin-bottom: 15px;
+	  border: none;
+	  background: none;
+	  box-shadow: none;
+	}
+	iframe,
+	object,
+	hr {
+	  margin-bottom: 15px;
+	}
+	blockquote {
+	  margin-left: 1.6em !important;
+	  padding: 0;
+	  text-align: left;
+	  color: #777;
+	  font-style: italic;
+	  &:before,
+	  &:after {
+		  content: '';
+	  }
+	}
+	ul,
+	ol {
+	  padding-left: 2em;
+	}
+	ul ul,
+	ol ol,
+	ul ol,
+	ol ul {
+	  margin: 2px;
+	  padding: 0;
+	  padding-left: 2em;
+	  border: none;
+	}
+	ol ol li {
+		list-style-type: lower-alpha;
+	}
+	ol ol ol li {
+		list-style-type: lower-roman;
+	}
+	dl dt {
+	  font-weight: bold;
+	}
+	dd {
+	  margin-left: 1em;
+	}
+	table {
+	  border-collapse: collapse;
+	  font-size: 1em;
+	  width: 100%;
+	  & td,
+	  & th {
+		  padding: 5px;
+		  border: 1px solid #ddd;
+		  vertical-align: top;
+	  }
+	}
+	table thead td,
+	table th {
+	  font-weight: bold;
+	  border-bottom-color: #888;
+	}
+	code {
+	  background-color: #d8d7d7;
+	}
+	pre {
+	  padding: 1em;
+	  border: 1px solid #ddd;
+	  border-radius: 3px;
+	  background: #f8f8f8;
+	  font-size: 90%;
+	}
+	hr {
+	  display: block;
+	  height: 1px;
+	  border: 0;
+	  border-top: 1px solid #ccc;
+	}
+	h1,
+	h2,
+	h3,
+	h4,
+	h5,
+	h6 {
+		font-weight: bold;
+		color: #000;
+		padding: 0;
+		background: none;
+		text-rendering: optimizeLegibility;
+		margin: 0 0 .5em 0;
+	}
+	h1,
+	h2,
+	h3,
+	h4 {
+	  line-height: 1.3;
+	}
+	h1 {
+	  font-size: 36px;
+	}
+	h2 {
+	  font-size: 24px;
+	  margin-bottom: .7em;
+	}
+	h3 {
+	  font-size: 21px;
+	}
+	h4 {
+	  font-size: 18px;
+	}
+	h5 {
+	  font-size: 16px;
+	}
+	h6 {
+	  font-size: 12px;
+	  text-transform: uppercase;
+	}
+}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.min.js elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.min.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/redactor/redactor.min.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/redactor/redactor.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,12 +1,12 @@
 /*
-	Redactor v9.1.9
-	Updated: Dec 12, 2013
+	Redactor 10.2.3
+	Updated: August 15, 2015
 
 	http://imperavi.com/redactor/
 
-	Copyright (c) 2009-2013, Imperavi LLC.
+	Copyright (c) 2009-2015, Imperavi LLC.
 	License: http://imperavi.com/redactor/license/
 
 	Usage: $('#content').redactor();
 */
-(function(c){var a=0;"use strict";var d=function(e){this[0]=e.startOffset;this[1]=e.endOffset;this.range=e;return this;};d.prototype.equals=function(){return this[0]===this[1];};c.fn.redactor=function(f){var g=[];var e=Array.prototype.slice.call(arguments,1);if(typeof f==="string"){this.each(function(){var j=c.data(this,"redactor");if(typeof j!=="undefined"&&c.isFunction(j[f])){var h=j[f].apply(j,e);if(h!==undefined&&h!==j){g.push(h);}}else{return c.error('No such method "'+f+'" for Redactor');}});}else{this.each(function(){if(!c.data(this,"redactor")){c.data(this,"redactor",b(this,f));}});}if(g.length===0){return this;}else{if(g.length===1){return g[0];}else{return g;}}};function b(f,e){return new b.prototype.init(f,e);}c.Redactor=b;c.Redactor.VERSION="9.1.9";c.Redactor.opts={rangy:false,iframe:false,fullpage:false,css:false,lang:"en",direction:"ltr",placeholder:false,wym:false,mobile:true,cleanup:true,tidyHtml:true,pastePlainText:false,removeEmptyTags:true,templateVars:false,xhtml:false,visual:true,focus:false,tabindex:false,autoresize:true,minHeight:false,maxHeight:false,shortcuts:true,autosave:false,autosaveInterval:60,plugins:false,linkAnchor:true,linkEmail:true,linkProtocol:"http://",linkNofollow:false,linkSize:50,imageFloatMargin:"10px",imageGetJson:false,imageUpload:false,imageUploadParam:"file",fileUpload:false,fileUploadParam:"file",clipboardUpload:true,clipboardUploadUrl:false,dragUpload:true,dnbImageTypes:["image/png","image/jpeg","image/gif"],s3:false,uploadFields:false,observeImages:true,observeLinks:true,modalOverlay:true,tabSpaces:false,tabFocus:true,air:false,airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent"],toolbar:true,toolbarFixed:false,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:false,toolbarExternal:false,buttonSource:true,buttonSeparator:'<li class="redactor_separator"></li>',buttonsCustom:{},buttonsAdd:[],buttons:["html","|","formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","image","video","file","table","link","|","alignment","|","horizontalrule"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify","table"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline",tr:"table",td:"table",table:"table"},activeButtonsAdd:false,formattingTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],linebreaks:false,paragraphy:true,convertDivs:true,convertLinks:true,convertImageLinks:false,convertVideoLinks:false,formattingPre:false,phpTags:false,allowedTags:false,deniedTags:["html","head","link","body","meta","script","style","applet"],boldTag:"strong",italicTag:"em",indentValue:20,buffer:[],rebuffer:[],textareamode:false,emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],ownLine:["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],contOwnLine:["li","dt","dt","h[1-6]","option","script"],newLevel:["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"],blockLevelElements:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","LI","BLOCKQUOTE","OUTPUT","FIGCAPTION","PRE","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE","TD"],langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit"}}};b.fn=c.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(f,e){this.rtePaste=false;this.$element=this.$source=c(f);this.uuid=a++;var g=c.extend(true,{},c.Redactor.opts);this.opts=c.extend({},g,this.$element.data(),e);this.start=true;this.dropdowns=[];this.sourceHeight=this.$source.css("height");this.sourceWidth=this.$source.css("width");if(this.opts.fullpage){this.opts.iframe=true;}if(this.opts.linebreaks){this.opts.paragraphy=false;}if(this.opts.paragraphy){this.opts.linebreaks=false;}if(this.opts.toolbarFixedBox){this.opts.toolbarFixed=true;}this.document=document;this.window=window;this.savedSel=false;this.cleanlineBefore=new RegExp("^<(/?"+this.opts.ownLine.join("|/?")+"|"+this.opts.contOwnLine.join("|")+")[ >]");this.cleanlineAfter=new RegExp("^<(br|/?"+this.opts.ownLine.join("|/?")+"|/"+this.opts.contOwnLine.join("|/")+")[ >]");this.cleannewLevel=new RegExp("^</?("+this.opts.newLevel.join("|")+")[ >]");this.rTestBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i");if(this.opts.linebreaks===false){if(this.opts.allowedTags!==false){var h=["strong","em","del"];var j=["b","i","strike"];if(c.inArray("p",this.opts.allowedTags)==="-1"){this.opts.allowedTags.push("p");}for(i in h){if(c.inArray(h[i],this.opts.allowedTags)!="-1"){this.opts.allowedTags.push(j[i]);}}}if(this.opts.deniedTags!==false){var l=c.inArray("p",this.opts.deniedTags);if(l!=="-1"){this.opts.deniedTags.splice(l,l);}}}if(this.browser("msie")||this.browser("opera")){this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,"horizontalrule");}this.opts.curLang=this.opts.langs[this.opts.lang];this.buildStart();},toolbarInit:function(e){return{html:{title:e.html,func:"toggle"},formatting:{title:e.formatting,func:"show",dropdown:{p:{title:e.paragraph,func:"formatBlocks"},blockquote:{title:e.quote,func:"formatQuote",className:"redactor_format_blockquote"},pre:{title:e.code,func:"formatBlocks",className:"redactor_format_pre"},h1:{title:e.header1,func:"formatBlocks",className:"redactor_format_h1"},h2:{title:e.header2,func:"formatBlocks",className:"redactor_format_h2"},h3:{title:e.header3,func:"formatBlocks",className:"redactor_format_h3"},h4:{title:e.header4,func:"formatBlocks",className:"redactor_format_h4"},h5:{title:e.header5,func:"formatBlocks",className:"redactor_format_h5"}}},bold:{title:e.bold,exec:"bold"},italic:{title:e.italic,exec:"italic"},deleted:{title:e.deleted,exec:"strikethrough"},underline:{title:e.underline,exec:"underline"},unorderedlist:{title:"&bull; "+e.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+e.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+e.outdent,func:"indentingOutdent"},indent:{title:"> "+e.indent,func:"indentingIndent"},image:{title:e.image,func:"imageShow"},video:{title:e.video,func:"videoShow"},file:{title:e.file,func:"fileShow"},table:{title:e.table,func:"show",dropdown:{insert_table:{title:e.insert_table,func:"tableShow"},separator_drop1:{name:"separator"},insert_row_above:{title:e.insert_row_above,func:"tableAddRowAbove"},insert_row_below:{title:e.insert_row_below,func:"tableAddRowBelow"},insert_column_left:{title:e.insert_column_left,func:"tableAddColumnLeft"},insert_column_right:{title:e.insert_column_right,func:"tableAddColumnRight"},separator_drop2:{name:"separator"},add_head:{title:e.add_head,func:"tableAddHead"},delete_head:{title:e.delete_head,func:"tableDeleteHead"},separator_drop3:{name:"separator"},delete_column:{title:e.delete_column,func:"tableDeleteColumn"},delete_row:{title:e.delete_row,func:"tableDeleteRow"},delete_table:{title:e.delete_table,func:"tableDeleteTable"}}},link:{title:e.link,func:"show",dropdown:{link:{title:e.link_insert,func:"linkShow"},unlink:{title:e.unlink,exec:"unlink"}}},fontcolor:{title:e.fontcolor,func:"show"},backcolor:{title:e.backcolor,func:"show"},alignment:{title:e.alignment,func:"show",dropdown:{alignleft:{title:e.align_left,func:"alignmentLeft"},aligncenter:{title:e.align_center,func:"alignmentCenter"},alignright:{title:e.align_right,func:"alignmentRight"},justify:{title:e.align_justify,func:"alignmentJustify"}}},alignleft:{title:e.align_left,func:"alignmentLeft"},aligncenter:{title:e.align_center,func:"alignmentCenter"},alignright:{title:e.align_right,func:"alignmentRight"},justify:{title:e.align_justify,func:"alignmentJustify"},horizontalrule:{exec:"inserthorizontalrule",title:e.horizontalrule}};},callback:function(e,f,g){var h=this.opts[e+"Callback"];if(c.isFunction(h)){if(f===false){return h.call(this,g);}else{return h.call(this,f,g);}}else{return g;}},destroy:function(){clearInterval(this.autosaveInterval);c(window).off(".redactor");this.$source.off("redactor-textarea");this.$element.off(".redactor").removeData("redactor");var f=this.get();if(this.opts.textareamode){this.$box.after(this.$source);this.$box.remove();this.$source.val(f).show();}else{var e=this.$editor;if(this.opts.iframe){e=this.$element;}this.$box.after(e);this.$box.remove();e.removeClass("redactor_editor").removeClass("redactor_editor_wym").removeAttr("contenteditable").html(f).show();}if(this.opts.air){c("#redactor_air_"+this.uuid).remove();}},getObject:function(){return c.extend({},this);},getEditor:function(){return this.$editor;},getBox:function(){return this.$box;},getIframe:function(){return(this.opts.iframe)?this.$frame:false;},getToolbar:function(){return(this.$toolbar)?this.$toolbar:false;},get:function(){return this.$source.val();},getCodeIframe:function(){this.$editor.removeAttr("contenteditable").removeAttr("dir");var e=this.outerHtml(this.$frame.contents().children());this.$editor.attr({contenteditable:true,dir:this.opts.direction});return e;},set:function(e,f,g){e=e.toString();e=e.replace(/\$/g,"&#36;");if(this.opts.fullpage){this.setCodeIframe(e);}else{this.setEditor(e,f);}if(e==""){g=false;}if(g!==false){this.placeholderRemove();}},setEditor:function(e,f){if(f!==false){e=this.cleanSavePreCode(e);e=this.cleanStripTags(e);e=this.cleanConvertProtected(e);e=this.cleanConvertInlineTags(e,true);if(this.opts.linebreaks===false){e=this.cleanConverters(e);}else{e=e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>");}}e=e.replace(/&amp;#36;/g,"$");e=this.cleanEmpty(e);this.$editor.html(e);this.setNonEditable();this.setSpansVerified();this.sync();},setCodeIframe:function(e){var f=this.iframePage();this.$frame[0].src="about:blank";e=this.cleanConvertProtected(e);e=this.cleanConvertInlineTags(e);e=this.cleanRemoveSpaces(e);f.open();f.write(e);f.close();if(this.opts.fullpage){this.$editor=this.$frame.contents().find("body").attr({contenteditable:true,dir:this.opts.direction});}this.setNonEditable();this.setSpansVerified();this.sync();},setFullpageOnInit:function(e){e=this.cleanSavePreCode(e,true);e=this.cleanConverters(e);e=this.cleanEmpty(e);this.$editor.html(e);this.setNonEditable();this.setSpansVerified();this.sync();},setSpansVerified:function(){var f=this.$editor.find("span");var e="inline";c.each(f,function(){var g=this.outerHTML;var j=new RegExp("<"+this.tagName,"gi");var h=g.replace(j,"<"+e);j=new RegExp("</"+this.tagName,"gi");h=h.replace(j,"</"+e);c(this).replaceWith(h);});},setSpansVerifiedHtml:function(e){e=e.replace(/<span(.*?)>/,"<inline$1>");return e.replace(/<\/span>/,"</inline>");},setNonEditable:function(){this.$editor.find(".noneditable").attr("contenteditable",false);},sync:function(){var e="";this.cleanUnverified();if(this.opts.fullpage){e=this.getCodeIframe();}else{e=this.$editor.html();}e=this.syncClean(e);e=this.cleanRemoveEmptyTags(e);e=e.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi,"<$1>$2</$1></li>");if(c.trim(e)==="<br>"){e="";}if(this.opts.xhtml){var f=["br","hr","img","link","input","meta"];c.each(f,function(g,h){e=e.replace(new RegExp("<"+h+"(.*?[^/$]?)>","gi"),"<"+h+"$1 />");});}e=this.callback("syncBefore",false,e);this.$source.val(e);this.callback("syncAfter",false,e);if(this.start===false){this.callback("change",false,e);}},syncClean:function(e){if(!this.opts.fullpage){e=this.cleanStripTags(e);}e=c.trim(e);e=this.placeholderRemoveFromCode(e);e=e.replace(/&#x200b;/gi,"");e=e.replace(/&#8203;/gi,"");e=e.replace(/<\/a>&nbsp;/gi,"</a> ");if(this.opts.linkNofollow){e=e.replace(/<a(.*?)rel="nofollow"(.*?)>/gi,"<a$1$2>");e=e.replace(/<a(.*?)>/gi,'<a$1 rel="nofollow">');}e=e.replace("<!--?php","<?php");e=e.replace("?-->","?>");e=e.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi,'<$1class="noeditable"$2$3>');e=e.replace(/ data-tagblock=""/gi,"");e=e.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,"</$1>");e=e.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/i,"$3<img$4>");e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/i,"");e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/i,"");e=e.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2");e=e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2");e=e.replace(/<inline>/gi,"<span>");e=e.replace(/<inline /gi,"<span ");e=e.replace(/<\/inline>/gi,"</span>");e=e.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi,"");e=e.replace(/<span>([\w\W]*?)<\/span>/gi,"$1");e=e.replace(/&amp;/gi,"&");e=e.replace(//gi,"&trade;");e=e.replace(//gi,"&copy;");e=this.cleanReConvertProtected(e);return e;},buildStart:function(){this.content="";this.$box=c('<div class="redactor_box" />');if(this.$source[0].tagName==="TEXTAREA"){this.opts.textareamode=true;}if(this.opts.mobile===false&&this.isMobile()){this.buildMobile();}else{this.buildContent();if(this.opts.iframe){this.opts.autoresize=false;this.iframeStart();}else{if(this.opts.textareamode){this.buildFromTextarea();}else{this.buildFromElement();}}if(!this.opts.iframe){this.buildOptions();this.buildAfter();}}},buildMobile:function(){if(!this.opts.textareamode){this.$editor=this.$source;this.$editor.hide();this.$source=this.buildCodearea(this.$editor);this.$source.val(this.content);}this.$box.insertAfter(this.$source).append(this.$source);},buildContent:function(){if(this.opts.textareamode){this.content=c.trim(this.$source.val());}else{this.content=c.trim(this.$source.html());}},buildFromTextarea:function(){this.$editor=c("<div />");this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source);this.buildAddClasses(this.$editor);this.buildEnable();},buildFromElement:function(){this.$editor=this.$source;this.$source=this.buildCodearea(this.$editor);this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source);this.buildEnable();},buildCodearea:function(e){return c("<textarea />").attr("name",e.attr("id")).css("height",this.sourceHeight);},buildAddClasses:function(e){c.each(this.$source.get(0).className.split(/\s+/),function(f,g){e.addClass("redactor_"+g);});},buildEnable:function(){this.$editor.addClass("redactor_editor").attr({contenteditable:true,dir:this.opts.direction});this.$source.attr("dir",this.opts.direction).hide();this.set(this.content,true,false);},buildOptions:function(){var e=this.$editor;if(this.opts.iframe){e=this.$frame;}if(this.opts.tabindex){e.attr("tabindex",this.opts.tabindex);}if(this.opts.minHeight){e.css("min-height",this.opts.minHeight+"px");}if(this.opts.maxHeight){this.opts.autoresize=false;this.sourceHeight=this.opts.maxHeight;}if(this.opts.wym){this.$editor.addClass("redactor_editor_wym");}if(!this.opts.autoresize){e.css("height",this.sourceHeight);}},buildAfter:function(){this.start=false;if(this.opts.toolbar){this.opts.toolbar=this.toolbarInit(this.opts.curLang);this.toolbarBuild();}this.modalTemplatesInit();this.buildPlugins();this.buildBindKeyboard();if(this.opts.autosave){this.autosave();}setTimeout(c.proxy(this.observeStart,this),4);if(this.browser("mozilla")){try{this.document.execCommand("enableObjectResizing",false,false);this.document.execCommand("enableInlineTableEditing",false,false);}catch(f){}}if(this.opts.focus){setTimeout(c.proxy(this.focus,this),100);}if(!this.opts.visual){setTimeout(c.proxy(function(){this.opts.visual=true;this.toggle(false);},this),200);}this.callback("init");},buildBindKeyboard:function(){this.dblEnter=0;if(this.opts.dragUpload&&this.opts.imageUpload!==false){this.$editor.on("drop.redactor",c.proxy(this.buildEventDrop,this));}this.$editor.on("paste.redactor",c.proxy(this.buildEventPaste,this));this.$editor.on("keydown.redactor",c.proxy(this.buildEventKeydown,this));this.$editor.on("keyup.redactor",c.proxy(this.buildEventKeyup,this));if(c.isFunction(this.opts.textareaKeydownCallback)){this.$source.on("keydown.redactor-textarea",c.proxy(this.opts.textareaKeydownCallback,this));}if(c.isFunction(this.opts.focusCallback)){this.$editor.on("focus.redactor",c.proxy(this.opts.focusCallback,this));}var e;c(document).mousedown(function(f){e=c(f.target);});this.$editor.on("blur.redactor",c.proxy(function(f){if(!c(e).hasClass("redactor_toolbar")&&c(e).parents(".redactor_toolbar").size()==0){this.selectall=false;if(c.isFunction(this.opts.blurCallback)){this.callback("blur",f);}}},this));},buildEventDrop:function(j){j=j.originalEvent||j;if(window.FormData===undefined||!j.dataTransfer){return true;}var h=j.dataTransfer.files.length;if(h==0){return true;}j.preventDefault();var g=j.dataTransfer.files[0];if(this.opts.dnbImageTypes!==false&&this.opts.dnbImageTypes.indexOf(g.type)==-1){return true;}this.bufferSet();var f=c('<div id="redactor-progress-drag" class="redactor-progress redactor-progress-striped"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div>');c(document.body).append(f);if(this.opts.s3===false){this.dragUploadAjax(this.opts.imageUpload,g,true,f,j,this.opts.imageUploadParam);}else{this.s3uploadFile(g);}},buildEventPaste:function(g){var h=false;if(this.browser("webkit")&&navigator.userAgent.indexOf("Chrome")===-1){var f=this.browser("version").split(".");if(f[0]<536){h=true;}}if(h){return true;}if(this.browser("opera")){return true;}if(this.opts.clipboardUpload&&this.buildEventClipboardUpload(g)){return true;}if(this.opts.cleanup){this.rtePaste=true;this.selectionSave();if(!this.selectall){if(this.opts.autoresize===true&&this.fullscreen!==true){this.$editor.height(this.$editor.height());this.saveScroll=this.document.body.scrollTop;}else{this.saveScroll=this.$editor.scrollTop();}}var j=this.extractContent();setTimeout(c.proxy(function(){var e=this.extractContent();this.$editor.append(j);this.selectionRestore();var l=this.getFragmentHtml(e);this.pasteClean(l);if(this.opts.autoresize===true&&this.fullscreen!==true){this.$editor.css("height","auto");}},this),1);}},buildEventClipboardUpload:function(j){var h=j.originalEvent||j;this.clipboardFilePaste=false;if(typeof(h.clipboardData)==="undefined"){return false;}if(h.clipboardData.items){var g=h.clipboardData.items[0].getAsFile();if(g!==null){this.bufferSet();this.clipboardFilePaste=true;var f=new FileReader();f.onload=c.proxy(this.pasteClipboardUpload,this);f.readAsDataURL(g);return true;}}return false;},buildEventKeydown:function(n){if(this.rtePaste){return false;}var r=n.which;var f=n.ctrlKey||n.metaKey;var p=this.getParent();var o=this.getCurrent();var j=this.getBlock();var h=false;this.callback("keydown",n);this.imageResizeHide(false);if((p&&c(p).get(0).tagName==="PRE")||(o&&c(o).get(0).tagName==="PRE")){h=true;if(r===this.keyCode.DOWN){this.insertAfterLastElement(j);}}if(r===this.keyCode.DOWN){if(p&&c(p)[0].tagName==="BLOCKQUOTE"){this.insertAfterLastElement(p);}if(o&&c(o)[0].tagName==="BLOCKQUOTE"){this.insertAfterLastElement(o);}if(p&&c(p)[0].tagName==="P"&&c(p).parent()[0].tagName=="BLOCKQUOTE"){this.insertAfterLastElement(p,c(p).parent()[0]);}if(o&&c(o)[0].tagName==="P"&&p&&c(p)[0].tagName=="BLOCKQUOTE"){this.insertAfterLastElement(o,p);}}if(f&&!n.shiftKey){this.shortcuts(n,r);}if(f&&r===90&&!n.shiftKey&&!n.altKey){n.preventDefault();if(this.opts.buffer.length){this.bufferUndo();}else{this.document.execCommand("undo",false,false);}return;}else{if(f&&r===90&&n.shiftKey&&!n.altKey){n.preventDefault();if(this.opts.rebuffer.length!=0){this.bufferRedo();}else{this.document.execCommand("redo",false,false);}return;}}if(f&&r===65){this.selectall=true;}else{if(r!=this.keyCode.LEFT_WIN&&!f){this.selectall=false;}}if(r==this.keyCode.ENTER&&!n.shiftKey&&!n.ctrlKey&&!n.metaKey){if(this.browser("msie")&&(p.nodeType==1&&(p.tagName=="TD"||p.tagName=="TH"))){n.preventDefault();this.bufferSet();this.insertNode(document.createElement("br"));this.callback("enter",n);return false;}if(j&&(j.tagName=="BLOCKQUOTE"||c(j).parent()[0].tagName=="BLOCKQUOTE")){if(this.isEndOfElement()){if(this.dblEnter==1){var m;var q;if(j.tagName=="BLOCKQUOTE"){q="br";m=j;}else{q="p";m=c(j).parent()[0];}n.preventDefault();this.insertingAfterLastElement(m);this.dblEnter=0;if(q=="p"){c(j).parent().find("p").last().remove();}else{var l=c.trim(c(j).html());c(j).html(l.replace(/<br\s?\/?>$/i,""));}return;}else{this.dblEnter++;}}else{this.dblEnter++;}}if(h===true){return this.buildEventKeydownPre(n,o);}else{if(!this.opts.linebreaks){if(j&&this.opts.rBlockTest.test(j.tagName)){this.bufferSet();setTimeout(c.proxy(function(){var s=this.getBlock();if(s.tagName==="DIV"&&!c(s).hasClass("redactor_editor")){var e=c("<p>"+this.opts.invisibleSpace+"</p>");c(s).replaceWith(e);this.selectionStart(e);}},this),1);}else{if(j===false){this.bufferSet();var g=c("<p>"+this.opts.invisibleSpace+"</p>");this.insertNode(g[0]);this.selectionStart(g);this.callback("enter",n);return false;}}}if(this.opts.linebreaks){if(j&&this.opts.rBlockTest.test(j.tagName)){this.bufferSet();setTimeout(c.proxy(function(){var e=this.getBlock();if((e.tagName==="DIV"||e.tagName==="P")&&!c(e).hasClass("redactor_editor")){this.replaceLineBreak(e);}},this),1);}else{return this.buildEventKeydownInsertLineBreak(n);}}if(j.tagName=="BLOCKQUOTE"||j.tagName=="FIGCAPTION"){return this.buildEventKeydownInsertLineBreak(n);}}this.callback("enter",n);}else{if(r===this.keyCode.ENTER&&(n.ctrlKey||n.shiftKey)){this.bufferSet();n.preventDefault();this.insertLineBreak();}}if(r===this.keyCode.TAB&&this.opts.shortcuts){return this.buildEventKeydownTab(n,h);}if(r===this.keyCode.BACKSPACE){this.buildEventKeydownBackspace(o);}},buildEventKeydownPre:function(h,g){h.preventDefault();this.bufferSet();var f=c(g).parent().text();this.insertNode(document.createTextNode("\n"));if(f.search(/\s$/)==-1){this.insertNode(document.createTextNode("\n"));}this.sync();this.callback("enter",h);return false;},buildEventKeydownTab:function(g,f){if(!this.opts.tabFocus){return true;}if(this.isEmpty(this.get())&&this.opts.tabSpaces===false){return true;}g.preventDefault();if(f===true&&!g.shiftKey){this.bufferSet();this.insertNode(document.createTextNode("\t"));this.sync();return false;}else{if(this.opts.tabSpaces!==false){this.bufferSet();this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join("\u00a0")));this.sync();return false;}else{if(!g.shiftKey){this.indentingIndent();}else{this.indentingOutdent();}}}return false;},buildEventKeydownBackspace:function(f){if(typeof f.tagName!=="undefined"&&/^(H[1-6])$/i.test(f.tagName)){var e;if(this.opts.linebreaks===false){e=c("<p>"+this.opts.invisibleSpace+"</p>");}else{e=c("<br>"+this.opts.invisibleSpace);}c(f).replaceWith(e);this.selectionStart(e);}if(typeof f.nodeValue!=="undefined"&&f.nodeValue!==null){if(f.remove&&f.nodeType===3&&f.nodeValue.match(/[^/\u200B]/g)==null){f.remove();}}},buildEventKeydownInsertLineBreak:function(f){this.bufferSet();f.preventDefault();this.insertLineBreak();this.callback("enter",f);return;},buildEventKeyup:function(m){if(this.rtePaste){return false;}var f=m.which;var h=this.getParent();var l=this.getCurrent();if(!this.opts.linebreaks&&l.nodeType==3&&(h==false||h.tagName=="BODY")){var j=c("<p>").append(c(l).clone());c(l).replaceWith(j);var g=c(j).next();if(typeof(g[0])!=="undefined"&&g[0].tagName=="BR"){g.remove();}this.selectionEnd(j);}if((this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&f===this.keyCode.ENTER){this.buildEventKeyupConverters();}if(f===this.keyCode.DELETE||f===this.keyCode.BACKSPACE){return this.formatEmpty(m);}this.callback("keyup",m);this.sync();},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize);setTimeout(c.proxy(function(){if(this.opts.convertImageLinks){this.observeImages();}if(this.opts.observeLinks){this.observeLinks();}},this),5);},buildPlugins:function(){if(!this.opts.plugins){return;}c.each(this.opts.plugins,c.proxy(function(e,f){if(RedactorPlugins[f]){c.extend(this,RedactorPlugins[f]);if(c.isFunction(RedactorPlugins[f].init)){this.init();}}},this));},iframeStart:function(){this.iframeCreate();if(this.opts.textareamode){this.iframeAppend(this.$source);}else{this.$sourceOld=this.$source.hide();this.$source=this.buildCodearea(this.$sourceOld);this.iframeAppend(this.$sourceOld);}},iframeAppend:function(e){this.$source.attr("dir",this.opts.direction).hide();this.$box.insertAfter(e).append(this.$frame).append(this.$source);},iframeCreate:function(){this.$frame=c('<iframe style="width: 100%;" frameborder="0" />').one("load",c.proxy(function(){if(this.opts.fullpage){this.iframePage();if(this.content===""){this.content=this.opts.invisibleSpace;}this.$frame.contents()[0].write(this.content);this.$frame.contents()[0].close();var e=setInterval(c.proxy(function(){if(this.$frame.contents().find("body").html()){clearInterval(e);this.iframeLoad();}},this),0);}else{this.iframeLoad();}},this));},iframeDoc:function(){return this.$frame[0].contentWindow.document;},iframePage:function(){var e=this.iframeDoc();if(e.documentElement){e.removeChild(e.documentElement);}return e;},iframeAddCss:function(e){e=e||this.opts.css;if(this.isString(e)){this.$frame.contents().find("head").append('<link rel="stylesheet" href="'+e+'" />');}if(c.isArray(e)){c.each(e,c.proxy(function(g,f){this.iframeAddCss(f);},this));}},iframeLoad:function(){this.$editor=this.$frame.contents().find("body").attr({contenteditable:true,dir:this.opts.direction});if(this.$editor[0]){this.document=this.$editor[0].ownerDocument;this.window=this.document.defaultView||window;}this.iframeAddCss();if(this.opts.fullpage){this.setFullpageOnInit(this.$editor.html());}else{this.set(this.content,true,false);}this.buildOptions();this.buildAfter();},placeholderStart:function(e){if(this.isEmpty(e)){if(this.$element.attr("placeholder")){this.opts.placeholder=this.$element.attr("placeholder");}if(this.opts.placeholder===""){this.opts.placeholder=false;}if(this.opts.placeholder!==false){this.opts.focus=false;this.$editor.one("focus.redactor_placeholder",c.proxy(this.placeholderFocus,this));return c('<span class="redactor_placeholder" data-redactor="verified">').attr("contenteditable",false).text(this.opts.placeholder);}}return false;},placeholderFocus:function(){this.$editor.find("span.redactor_placeholder").remove();var e="";if(this.opts.linebreaks===false){e=this.opts.emptyHtml;}this.$editor.off("focus.redactor_placeholder");this.$editor.html(e);if(this.opts.linebreaks===false){this.selectionStart(this.$editor.children()[0]);}else{this.focus();}this.sync();},placeholderRemove:function(){this.opts.placeholder=false;this.$editor.find("span.redactor_placeholder").remove();this.$editor.off("focus.redactor_placeholder");},placeholderRemoveFromCode:function(e){return e.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i,"");},shortcuts:function(g,f){if(!this.opts.shortcuts){return;}if(!g.altKey){if(f===77){this.shortcutsLoad(g,"removeFormat");}else{if(f===66){this.shortcutsLoad(g,"bold");}else{if(f===73){this.shortcutsLoad(g,"italic");}else{if(f===74){this.shortcutsLoad(g,"insertunorderedlist");}else{if(f===75){this.shortcutsLoad(g,"insertorderedlist");}else{if(f===72){this.shortcutsLoad(g,"superscript");}else{if(f===76){this.shortcutsLoad(g,"subscript");}}}}}}}}else{if(f===48){this.shortcutsLoadFormat(g,"p");}else{if(f===49){this.shortcutsLoadFormat(g,"h1");}else{if(f===50){this.shortcutsLoadFormat(g,"h2");}else{if(f===51){this.shortcutsLoadFormat(g,"h3");}else{if(f===52){this.shortcutsLoadFormat(g,"h4");}else{if(f===53){this.shortcutsLoadFormat(g,"h5");}else{if(f===54){this.shortcutsLoadFormat(g,"h6");}}}}}}}}},shortcutsLoad:function(g,f){g.preventDefault();this.execCommand(f,false);},shortcutsLoadFormat:function(g,f){g.preventDefault();this.formatBlocks(f);},focus:function(){if(!this.browser("opera")){this.window.setTimeout(c.proxy(this.focusSet,this,true),1);}else{this.$editor.focus();}},focusEnd:function(){this.focusSet();},focusSet:function(g){this.$editor.focus();var e=this.getRange();e.selectNodeContents(this.$editor[0]);e.collapse(g||false);var f=this.getSelection();f.removeAllRanges();f.addRange(e);},toggle:function(e){if(this.opts.visual){this.toggleCode(e);}else{this.toggleVisual();}},toggleVisual:function(){var e=this.$source.hide().val();if(typeof this.modified!=="undefined"){this.modified=this.cleanRemoveSpaces(this.modified,false)!==this.cleanRemoveSpaces(e,false);}if(this.modified){if(this.opts.fullpage&&e===""){this.setFullpageOnInit(e);}else{this.set(e);if(this.opts.fullpage){this.buildBindKeyboard();}}}if(this.opts.iframe){this.$frame.show();}else{this.$editor.show();}if(this.opts.fullpage){this.$editor.attr("contenteditable",true);}this.$source.off("keydown.redactor-textarea-indenting");this.$editor.focus();this.selectionRestore();this.observeStart();this.buttonActiveVisual();this.buttonInactive("html");this.opts.visual=true;},toggleCode:function(g){if(g!==false){this.selectionSave();}var e=null;if(this.opts.iframe){e=this.$frame.height();if(this.opts.fullpage){this.$editor.removeAttr("contenteditable");}this.$frame.hide();}else{e=this.$editor.innerHeight();this.$editor.hide();}var f=this.$source.val();if(f!==""&&this.opts.tidyHtml){this.$source.val(this.cleanHtml(f));}this.modified=f;this.$source.height(e).show().focus();this.$source.on("keydown.redactor-textarea-indenting",this.textareaIndenting);this.buttonInactiveVisual();this.buttonActive("html");this.opts.visual=false;},textareaIndenting:function(g){if(g.keyCode===9){var f=c(this);var h=f.get(0).selectionStart;f.val(f.val().substring(0,h)+"\t"+f.val().substring(f.get(0).selectionEnd));f.get(0).selectionStart=f.get(0).selectionEnd=h+1;return false;}},autosave:function(){var e=false;this.autosaveInterval=setInterval(c.proxy(function(){var f=this.get();if(e!==f){c.ajax({url:this.opts.autosave,type:"post",data:this.$source.attr("name")+"="+escape(encodeURIComponent(f)),success:c.proxy(function(g){this.callback("autosave",false,g);e=f;},this)});}},this),this.opts.autosaveInterval*1000);},toolbarBuild:function(){if(this.opts.air){this.opts.buttons=this.opts.airButtons;}else{if(!this.opts.buttonSource){var f=this.opts.buttons.indexOf("html"),g=this.opts.buttons[f+1];this.opts.buttons.splice(f,1);if(g==="|"){this.opts.buttons.splice(f,1);}}}c.extend(this.opts.toolbar,this.opts.buttonsCustom);c.each(this.opts.buttonsAdd,c.proxy(function(h,j){this.opts.buttons.push(j);},this));if(this.opts.toolbar){c.each(this.opts.toolbar.formatting.dropdown,c.proxy(function(h,j){if(c.inArray(h,this.opts.formattingTags)=="-1"){delete this.opts.toolbar.formatting.dropdown[h];}},this));}if(this.opts.buttons.length===0){return false;}this.airEnable();this.$toolbar=c("<ul>").addClass("redactor_toolbar").attr("id","redactor_toolbar_"+this.uuid);if(this.opts.air){this.$air=c('<div class="redactor_air">').attr("id","redactor_air_"+this.uuid).hide();this.$air.append(this.$toolbar);c("body").append(this.$air);}else{if(this.opts.toolbarExternal){c(this.opts.toolbarExternal).html(this.$toolbar);}else{this.$box.prepend(this.$toolbar);}}c.each(this.opts.buttons,c.proxy(function(j,l){if(l==="|"){this.$toolbar.append(c(this.opts.buttonSeparator));}else{if(this.opts.toolbar[l]){var h=this.opts.toolbar[l];if(this.opts.fileUpload===false&&l==="file"){return true;}this.$toolbar.append(c("<li>").append(this.buttonBuild(l,h)));}}},this));this.$toolbar.find("a").attr("tabindex","-1");if(this.opts.toolbarFixed){this.toolbarObserveScroll();c(this.opts.toolbarFixedTarget).on("scroll.redactor",c.proxy(this.toolbarObserveScroll,this));}if(this.opts.activeButtons){var e=c.proxy(this.buttonActiveObserver,this);this.$editor.on("mouseup.redactor keyup.redactor",e);}},toolbarObserveScroll:function(){var j=c(this.opts.toolbarFixedTarget).scrollTop();var g=this.$box.offset().top;var h=0;var e=g+this.$box.height()+40;if(j>g){var f="100%";if(this.opts.toolbarFixedBox){h=this.$box.offset().left;f=this.$box.innerWidth();this.$toolbar.addClass("toolbar_fixed_box");}this.toolbarFixed=true;this.$toolbar.css({position:"fixed",width:f,zIndex:1005,top:this.opts.toolbarFixedTopOffset+"px",left:h});if(j<e){this.$toolbar.css("visibility","visible");}else{this.$toolbar.css("visibility","hidden");}}else{this.toolbarFixed=false;this.$toolbar.css({position:"relative",width:"auto",top:0,left:h});if(this.opts.toolbarFixedBox){this.$toolbar.removeClass("toolbar_fixed_box");}}},airEnable:function(){if(!this.opts.air){return;}this.$editor.on("mouseup.redactor keyup.redactor",this,c.proxy(function(g){var j=this.getSelectionText();if(g.type==="mouseup"&&j!=""){this.airShow(g);}if(g.type==="keyup"&&g.shiftKey&&j!=""){var f=c(this.getElement(this.getSelection().focusNode)),h=f.offset();h.height=f.height();this.airShow(h,true);}},this));},airShow:function(l,f){if(!this.opts.air){return;}var j,h;c(".redactor_air").hide();if(f){j=l.left;h=l.top+l.height+14;if(this.opts.iframe){h+=this.$box.position().top-c(this.document).scrollTop();j+=this.$box.position().left;}}else{var g=this.$air.innerWidth();j=l.clientX;if(c(this.document).width()<(j+g)){j-=g;}h=l.clientY+14;if(this.opts.iframe){h+=this.$box.position().top;j+=this.$box.position().left;}else{h+=c(this.document).scrollTop();}}this.$air.css({left:j+"px",top:h+"px"}).show();this.airBindHide();},airBindHide:function(){if(!this.opts.air){return;}var e=c.proxy(function(f){c(f).on("mousedown.redactor",c.proxy(function(g){if(c(g.target).closest(this.$toolbar).length===0){this.$air.fadeOut(100);this.selectionRemove();c(f).off(g);}},this)).on("keydown.redactor",c.proxy(function(g){if(g.which===this.keyCode.ESC){this.getSelection().collapseToStart();}this.$air.fadeOut(100);c(f).off(g);},this));},this);e(document);if(this.opts.iframe){e(this.document);}},airBindMousemoveHide:function(){if(!this.opts.air){return;}var e=c.proxy(function(f){c(f).on("mousemove.redactor",c.proxy(function(g){if(c(g.target).closest(this.$toolbar).length===0){this.$air.fadeOut(100);c(f).off(g);}},this));},this);e(document);if(this.opts.iframe){e(this.document);}},dropdownBuild:function(f,e){c.each(e,c.proxy(function(j,h){if(!h.className){h.className="";}var g;if(h.name==="separator"){g=c('<a class="redactor_separator_drop">');}else{g=c('<a href="#" class="'+h.className+" redactor_dropdown_"+j+'">'+h.title+"</a>");g.on("click",c.proxy(function(l){if(l.preventDefault){l.preventDefault();}if(this.browser("msie")){l.returnValue=false;}if(h.callback){h.callback.call(this,j,g,h,l);}if(h.exec){this.execCommand(h.exec,j);}if(h.func){this[h.func](j);}this.buttonActiveObserver();if(this.opts.air){this.$air.fadeOut(100);}},this));}f.append(g);},this));},dropdownShow:function(m,q){if(!this.opts.visual){m.preventDefault();return false;}var n=this.$toolbar.find(".redactor_dropdown_box_"+q);var f=this.buttonGet(q);if(f.hasClass("dropact")){this.dropdownHideAll();}else{this.dropdownHideAll();this.buttonActive(q);f.addClass("dropact");var r=f.position();if(this.toolbarFixed){r=f.offset();}var o=n.width();if((r.left+o)>c(document).width()){r.left-=o;}var h=r.left+"px";var j=29;var l="absolute";var p=j+"px";if(this.opts.toolbarFixed&&this.toolbarFixed){l="fixed";}else{if(!this.opts.air){p=r.top+j+"px";}}n.css({position:l,left:h,top:p}).show();}var g=c.proxy(function(s){this.dropdownHide(s,n);},this);c(document).one("click",g);this.$editor.one("click",g);m.stopPropagation();this.$editor.focus();},dropdownHideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact");c(".redactor_dropdown").hide();},dropdownHide:function(g,f){if(!c(g.target).hasClass("dropact")){f.removeClass("dropact");this.dropdownHideAll();}},buttonBuild:function(h,e){var f=c('<a href="javascript:;" title="'+e.title+'" tabindex="-1" class="redactor_btn redactor_btn_'+h+'"></a>');f.on("click",c.proxy(function(j){if(j.preventDefault){j.preventDefault();}if(this.browser("msie")){j.returnValue=false;}if(f.hasClass("redactor_button_disabled")){return false;}if(this.isFocused()===false&&!e.exec){this.$editor.focus();}if(e.exec){this.$editor.focus();this.execCommand(e.exec,h);this.airBindMousemoveHide();}else{if(e.func&&e.func!=="show"){this[e.func](h);this.airBindMousemoveHide();}else{if(e.callback){e.callback.call(this,h,f,e,j);this.airBindMousemoveHide();}else{if(e.dropdown){this.dropdownShow(j,h);}}}}this.buttonActiveObserver(false,h);},this));if(e.dropdown){var g=c('<div class="redactor_dropdown redactor_dropdown_box_'+h+'" style="display: none;">');g.appendTo(this.$toolbar);this.dropdownBuild(g,e.dropdown);}return f;},buttonGet:function(e){if(!this.opts.toolbar){return false;}return c(this.$toolbar.find("a.redactor_btn_"+e));},buttonActiveToggle:function(f){var e=this.buttonGet(f);if(e.hasClass("redactor_act")){e.removeClass("redactor_act");}else{e.addClass("redactor_act");}},buttonActive:function(e){this.buttonGet(e).addClass("redactor_act");},buttonInactive:function(e){this.buttonGet(e).removeClass("redactor_act");},buttonInactiveAll:function(e){c.each(this.opts.toolbar,c.proxy(function(f){if(f!=e){this.buttonInactive(f);}},this));},buttonActiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").removeClass("redactor_button_disabled");},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").addClass("redactor_button_disabled");},buttonChangeIcon:function(e,f){this.buttonGet(e).addClass("redactor_btn_"+f);},buttonRemoveIcon:function(e,f){this.buttonGet(e).removeClass("redactor_btn_"+f);},buttonAddSeparator:function(){this.$toolbar.append(c(this.opts.buttonSeparator));},buttonAddSeparatorAfter:function(e){this.buttonGet(e).parent().after(c(this.opts.buttonSeparator));},buttonAddSeparatorBefore:function(e){this.buttonGet(e).parent().before(c(this.opts.buttonSeparator));},buttonRemoveSeparatorAfter:function(e){this.buttonGet(e).parent().next().remove();},buttonRemoveSeparatorBefore:function(e){this.buttonGet(e).parent().prev().remove();},buttonSetRight:function(e){if(!this.opts.toolbar){return;}this.buttonGet(e).parent().addClass("redactor_btn_right");},buttonSetLeft:function(e){if(!this.opts.toolbar){return;}this.buttonGet(e).parent().removeClass("redactor_btn_right");},buttonAdd:function(f,g,j,h){if(!this.opts.toolbar){return;}var e=this.buttonBuild(f,{title:g,callback:j,dropdown:h});this.$toolbar.append(c("<li>").append(e));},buttonAddFirst:function(f,g,j,h){if(!this.opts.toolbar){return;}var e=this.buttonBuild(f,{title:g,callback:j,dropdown:h});this.$toolbar.prepend(c("<li>").append(e));},buttonAddAfter:function(m,f,h,l,j){if(!this.opts.toolbar){return;}var e=this.buttonBuild(f,{title:h,callback:l,dropdown:j});var g=this.buttonGet(m);if(g.size()!==0){g.parent().after(c("<li>").append(e));}else{this.$toolbar.append(c("<li>").append(e));}},buttonAddBefore:function(j,f,h,m,l){if(!this.opts.toolbar){return;}var e=this.buttonBuild(f,{title:h,callback:m,dropdown:l});var g=this.buttonGet(j);if(g.size()!==0){g.parent().before(c("<li>").append(e));}else{this.$toolbar.append(c("<li>").append(e));}},buttonRemove:function(e,g){var f=this.buttonGet(e);if(g){f.parent().next().remove();}f.parent().removeClass("redactor_btn_right");f.remove();},buttonActiveObserver:function(h,l){var f=this.getParent();this.buttonInactiveAll(l);if(h===false&&l!=="html"){if(c.inArray(l,this.opts.activeButtons)!=-1){this.buttonActiveToggle(l);}return;}if(f&&f.tagName==="A"){this.$toolbar.find("a.redactor_dropdown_link").text(this.opts.curLang.link_edit);}else{this.$toolbar.find("a.redactor_dropdown_link").text(this.opts.curLang.link_insert);}if(this.opts.activeButtonsAdd){c.each(this.opts.activeButtonsAdd,c.proxy(function(e,m){this.opts.activeButtons.push(m);},this));c.extend(this.opts.activeButtonsStates,this.opts.activeButtonsAdd);}c.each(this.opts.activeButtonsStates,c.proxy(function(e,m){if(c(f).closest(e,this.$editor.get()[0]).length!=0){this.buttonActive(m);}},this));var g=c(f).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(g.length){var j=g.css("text-align");switch(j){case"right":this.buttonActive("alignright");break;case"center":this.buttonActive("aligncenter");break;case"justify":this.buttonActive("justify");break;default:this.buttonActive("alignleft");break;}}},execPasteFrag:function(e){var j=this.getSelection();if(j.getRangeAt&&j.rangeCount){range=j.getRangeAt(0);range.deleteContents();var f=document.createElement("div");f.innerHTML=e;var m=document.createDocumentFragment(),h,g;while((h=f.firstChild)){g=m.appendChild(h);}var l=m.firstChild;range.insertNode(m);if(g){range=range.cloneRange();range.setStartAfter(g);range.collapse(true);j.removeAllRanges();j.addRange(range);}}},exec:function(f,g,e){if(f==="formatblock"&&this.browser("msie")){g="<"+g+">";}if(f==="inserthtml"&&this.browser("msie")){if(!this.isIe11()){this.$editor.focus();this.document.selection.createRange().pasteHTML(g);}else{this.execPasteFrag(g);}}else{this.document.execCommand(f,false,g);}if(e!==false){this.sync();}this.callback("execCommand",f,g);},execCommand:function(f,g,e){if(!this.opts.visual){this.$source.focus();return false;}if(f==="inserthtml"){this.insertHtml(g,e);this.callback("execCommand",f,g);return;}if(this.currentOrParentIs("PRE")&&!this.opts.formattingPre){return false;}if(f==="insertunorderedlist"||f==="insertorderedlist"){return this.execLists(f,g);}if(f==="unlink"){return this.execUnlink(f,g);}this.exec(f,g,e);if(f==="inserthorizontalrule"){this.$editor.find("hr").removeAttr("id");}},execUnlink:function(f,g){this.bufferSet();var e=this.currentOrParentIs("A");if(e){c(e).replaceWith(c(e).text());this.sync();this.callback("execCommand",f,g);return;}},execLists:function(j,h){this.bufferSet();var r=this.getParent();var o=c(r).closest("ol, ul");var n=false;if(o.length){n=true;var q=o[0].tagName;if((j==="insertunorderedlist"&&q==="OL")||(j==="insertorderedlist"&&q==="UL")){n=false;}}this.selectionSave();if(n){var f=this.getNodes();var g=this.getBlocks(f);if(typeof f[0]!="undefined"&&f.length>1&&f[0].nodeType==3){g.unshift(this.getBlock());}var m="",t="";c.each(g,c.proxy(function(w,x){if(x.tagName=="LI"){var v=c(x);var u=v.clone();u.find("ul","ol").remove();if(this.opts.linebreaks===false){m+=this.outerHtml(c("<p>").append(u.contents()));}else{m+=u.html()+"<br>";}if(w==0){v.addClass("redactor-replaced").empty();t=this.outerHtml(v);}else{v.remove();}}},this));html=this.$editor.html().replace(t,"</"+q+">"+m+"<"+q+">");this.$editor.html(html);this.$editor.find(q+":empty").remove();}else{var e=this.getParent();this.document.execCommand(j);var r=this.getParent();var o=c(r).closest("ol, ul");if(e&&e.tagName=="TD"){o.wrapAll("<td>");}if(o.length){var s=o.children().first();if(c.trim(c(s).text())==""){var l=c('<span id="selection-marker-1"></span>');c(s).prepend(l);}if((this.browser("msie")||this.browser("mozilla"))&&r.tagName!=="LI"){c(r).replaceWith(c(r).html());}var p=o.parent();if(this.isParentRedactor(p)&&this.nodeTestBlocks(p[0])){p.replaceWith(p.contents());}}if(this.browser("mozilla")){this.$editor.focus();}}this.selectionRestore();c(l).remove();this.sync();this.callback("execCommand",j,h);return;},indentingIndent:function(){this.indentingStart("indent");},indentingOutdent:function(){this.indentingStart("outdent");},indentingStart:function(h){this.bufferSet();if(h==="indent"){var j=this.getBlock();this.selectionSave();if(j&&j.tagName=="LI"){var o=this.getParent();var l=c(o).closest("ol, ul");var n=l[0].tagName;var f=this.getBlocks();c.each(f,function(t,u){if(u.tagName=="LI"){var r=c(u).prev();if(r.size()!=0&&r[0].tagName=="LI"){var q=r.children("ul, ol");if(q.size()==0){r.append(c("<"+n+">").append(u));}else{q.append(u);}}}});}else{if(j===false&&this.opts.linebreaks===true){this.exec("formatBlock","blockquote");var p=this.getBlock();var j=c('<div data-tagblock="">').html(c(p).html());c(p).replaceWith(j);var g=this.normalize(c(j).css("margin-left"))+this.opts.indentValue;c(j).css("margin-left",g+"px");}else{var e=this.getBlocks();c.each(e,c.proxy(function(r,s){var q=false;if(s.tagName==="TD"){return;}if(c.inArray(s.tagName,this.opts.alignmentTags)!==-1){q=c(s);}else{q=c(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);}var t=this.normalize(q.css("margin-left"))+this.opts.indentValue;q.css("margin-left",t+"px");},this));}}this.selectionRestore();}else{this.selectionSave();var j=this.getBlock();if(j&&j.tagName=="LI"){var f=this.getBlocks();var m=0;this.insideOutdent(j,m,f);}else{var e=this.getBlocks();c.each(e,c.proxy(function(r,s){var q=false;if(c.inArray(s.tagName,this.opts.alignmentTags)!==-1){q=c(s);}else{q=c(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);}var t=this.normalize(q.css("margin-left"))-this.opts.indentValue;if(t<=0){if(this.opts.linebreaks===true&&typeof(q.data("tagblock"))!=="undefined"){q.replaceWith(q.html());}else{q.css("margin-left","");this.removeEmptyAttr(q,"style");}}else{q.css("margin-left",t+"px");}},this));}this.selectionRestore();}this.sync();},insideOutdent:function(e,g,f){if(e&&e.tagName=="LI"){var h=c(e).parent().parent();if(h.size()!=0&&h[0].tagName=="LI"){h.after(e);}else{if(typeof f[g]!="undefined"){e=f[g];g++;this.insideOutdent(e,g,f);}else{this.execCommand("insertunorderedlist");}}}},alignmentLeft:function(){this.alignmentSet("","JustifyLeft");},alignmentRight:function(){this.alignmentSet("right","JustifyRight");},alignmentCenter:function(){this.alignmentSet("center","JustifyCenter");},alignmentJustify:function(){this.alignmentSet("justify","JustifyFull");},alignmentSet:function(f,h){this.bufferSet();if(this.oldIE()){this.document.execCommand(h,false,false);return true;}this.selectionSave();var j=this.getBlock();if(!j&&this.opts.linebreaks){this.exec("formatBlock","blockquote");var e=this.getBlock();var j=c('<div data-tagblock="">').html(c(e).html());c(e).replaceWith(j);c(j).css("text-align",f);this.removeEmptyAttr(j,"style");if(f==""&&typeof(c(j).data("tagblock"))!=="undefined"){c(j).replaceWith(c(j).html());}}else{var g=this.getBlocks();c.each(g,c.proxy(function(m,n){var l=false;if(c.inArray(n.tagName,this.opts.alignmentTags)!==-1){l=c(n);}else{l=c(n).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);}if(l){l.css("text-align",f);this.removeEmptyAttr(l,"style");}},this));}this.selectionRestore();this.sync();},cleanEmpty:function(e){var f=this.placeholderStart(e);if(f!==false){return f;}if(this.opts.linebreaks===false){if(e===""){e=this.opts.emptyHtml;}else{if(e.search(/^<hr\s?\/?>$/gi)!==-1){e="<hr>"+this.opts.emptyHtml;}}}return e;},cleanConverters:function(e){if(this.opts.convertDivs){e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>");}if(this.opts.paragraphy){e=this.cleanParagraphy(e);}return e;},cleanConvertProtected:function(e){if(this.opts.templateVars){e=e.replace(/\{\{(.*?)\}\}/gi,"<!-- template double $1 -->");e=e.replace(/\{(.*?)\}/gi,"<!-- template $1 -->");}e=e.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi,'<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>');e=e.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi,'<section$1 style="display: none;" rel="redactor-style-tag">$2</section>');e=e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>');if(this.opts.phpTags){e=e.replace(/<\?php([\w\W]*?)\?>/gi,'<section style="display: none;" rel="redactor-php-tag">$1</section>');}else{e=e.replace(/<\?php([\w\W]*?)\?>/gi,"");}return e;},cleanReConvertProtected:function(e){if(this.opts.templateVars){e=e.replace(/<!-- template double (.*?) -->/gi,"{{$1}}");e=e.replace(/<!-- template (.*?) -->/gi,"{$1}");}e=e.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi,'<script$1 type="text/javascript">$2<\/script>');e=e.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi,"<style$1>$2</style>");e=e.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>");if(this.opts.phpTags){e=e.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi,"<?php\r\n$1\r\n?>");}return e;},cleanRemoveSpaces:function(f,e){if(e!==false){var e=[];var h=f.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);if(h===null){h=[];}if(this.opts.phpTags){var g=f.match(/<\?php([\w\W]*?)\?>/gi);if(g){h=c.merge(h,g);}}if(h){c.each(h,function(j,l){f=f.replace(l,"buffer_"+j);e.push(l);});}}f=f.replace(/\n/g," ");f=f.replace(/[\t]*/g,"");f=f.replace(/\n\s*\n/g,"\n");f=f.replace(/^[\s\n]*/g," ");f=f.replace(/[\s\n]*$/g," ");f=f.replace(/>\s{2,}</g,"> <");f=this.cleanReplacer(f,e);f=f.replace(/\n\n/g,"\n");return f;},cleanReplacer:function(f,e){if(e===false){return f;}c.each(e,function(g,h){f=f.replace("buffer_"+g,h);});return f;},cleanRemoveEmptyTags:function(h){h=h.replace(/<span>([\w\W]*?)<\/span>/gi,"$1");h=h.replace(/[\u200B-\u200D\uFEFF]/g,"");var j=["<b>\\s*</b>","<b>&nbsp;</b>","<em>\\s*</em>"];var g=["<pre></pre>","<blockquote>\\s*</blockquote>","<dd></dd>","<dt></dt>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<p>\\s*</p>","<p></p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"];if(this.opts.removeEmptyTags){g=g.concat(j);}else{g=j;}var e=g.length;for(var f=0;f<e;++f){h=h.replace(new RegExp(g[f],"gi"),"");}return h;},cleanParagraphy:function(l){l=c.trim(l);if(this.opts.linebreaks===true){return l;}if(l===""||l==="<p></p>"){return this.opts.emptyHtml;}l=l+"\n";var n=[];var j=l.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);if(!j){j=[];}var m=l.match(/<!--([\w\W]*?)-->/gi);if(m){j=c.merge(j,m);}if(this.opts.phpTags){var f=l.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);if(f){j=c.merge(j,f);}}if(j){c.each(j,function(p,q){n[p]=q;l=l.replace(q,"{replace"+p+"}\n");});}l=l.replace(/<br \/>\s*<br \/>/gi,"\n\n");function h(s,p,q){return l.replace(new RegExp(s,p),q);}var e="(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";l=h("(<"+e+"[^>]*>)","gi","\n$1");l=h("(</"+e+">)","gi","$1\n\n");l=h("\r\n","g","\n");l=h("\r","g","\n");l=h("/\n\n+/","g","\n\n");var o=l.split(new RegExp("\ns*\n","g"),-1);l="";for(var g in o){if(o.hasOwnProperty(g)){if(o[g].search("{replace")==-1){o[g]=o[g].replace(/<p>\n\t<\/p>/gi,"");o[g]=o[g].replace(/<p><\/p>/gi,"");if(o[g]!=""){l+="<p>"+o[g].replace(/^\n+|\n+$/g,"")+"</p>";}}else{l+=o[g];}}}l=h("<p>s*</p>","gi","");l=h("<p>([^<]+)</(div|address|form)>","gi","<p>$1</p></$2>");l=h("<p>s*(</?"+e+"[^>]*>)s*</p>","gi","$1");l=h("<p>(<li.+?)</p>","gi","$1");l=h("<p>s*(</?"+e+"[^>]*>)","gi","$1");l=h("(</?"+e+"[^>]*>)s*</p>","gi","$1");l=h("(</?"+e+"[^>]*>)s*<br />","gi","$1");l=h("<br />(s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","gi","$1");l=h("\n</p>","gi","</p>");l=h("<li><p>","gi","<li>");l=h("</p></li>","gi","</li>");l=h("</li><p>","gi","</li>");l=h("<p>\t?\n?<p>","gi","<p>");l=h("</dt><p>","gi","</dt>");l=h("</dd><p>","gi","</dd>");l=h("<br></p></blockquote>","gi","</blockquote>");l=h("<p>\t*</p>","gi","");c.each(n,function(p,q){l=l.replace("{replace"+p+"}",q);});return c.trim(l);},cleanConvertInlineTags:function(e,h){var f="strong";if(this.opts.boldTag==="b"){f="b";}var g="em";if(this.opts.italicTag==="i"){g="i";}e=e.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi,"<"+g+">$1</"+g+">");e=e.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi,"<"+f+">$1</"+f+">");if(this.opts.boldTag==="strong"){e=e.replace(/<b>([\w\W]*?)<\/b>/gi,"<strong>$1</strong>");}else{e=e.replace(/<strong>([\w\W]*?)<\/strong>/gi,"<b>$1</b>");}if(this.opts.italicTag==="em"){e=e.replace(/<i>([\w\W]*?)<\/i>/gi,"<em>$1</em>");}else{e=e.replace(/<em>([\w\W]*?)<\/em>/gi,"<i>$1</i>");}if(h!==true){e=e.replace(/<strike>([\w\W]*?)<\/strike>/gi,"<del>$1</del>");}else{e=e.replace(/<del>([\w\W]*?)<\/del>/gi,"<strike>$1</strike>");}return e;},cleanStripTags:function(g){if(g==""||typeof g=="undefined"){return g;}var h=false;if(this.opts.allowedTags!==false){h=true;}var e=h===true?this.opts.allowedTags:this.opts.deniedTags;var f=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;g=g.replace(f,function(l,j){if(h===true){return c.inArray(j.toLowerCase(),e)>"-1"?l:"";}else{return c.inArray(j.toLowerCase(),e)>"-1"?"":l;}});g=this.cleanConvertInlineTags(g);return g;},cleanSavePreCode:function(e,f){var g=e.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);if(g!==null){c.each(g,c.proxy(function(j,l){var h=l.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);h[3]=h[3].replace(/&nbsp;/g," ");if(f!==false){h[3]=this.cleanEncodeEntities(h[3]);}h[3]=h[3].replace(/\$/g,"&#36;");e=e.replace(l,"<"+h[1]+h[2]+">"+h[3]+"</"+h[1]+">");},this));}return e;},cleanEncodeEntities:function(e){e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");},cleanUnverified:function(){var e=this.$editor.find("li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite");e.filter('[style*="background-color: transparent;"][style*="line-height"]').css("background-color","").css("line-height","");e.filter('[style*="background-color: transparent;"]').css("background-color","");e.css("line-height","");c.each(e,c.proxy(function(f,g){this.removeEmptyAttr(g,"style");},this));this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap();},cleanHtml:function(f){var j=0,m=f.length,l=0,e=null,g=null,p="",h="",o="";this.cleanlevel=0;for(;j<m;j++){l=j;if(-1==f.substr(j).indexOf("<")){h+=f.substr(j);return this.cleanFinish(h);}while(l<m&&f.charAt(l)!="<"){l++;}if(j!=l){o=f.substr(j,l-j);if(!o.match(/^\s{2,}$/g)){if("\n"==h.charAt(h.length-1)){h+=this.cleanGetTabs();}else{if("\n"==o.charAt(0)){h+="\n"+this.cleanGetTabs();o=o.replace(/^\s+/,"");}}h+=o;}if(o.match(/\n/)){h+="\n"+this.cleanGetTabs();}}e=l;while(l<m&&">"!=f.charAt(l)){l++;}p=f.substr(e,l-e);j=l;var n;if("!--"==p.substr(1,3)){if(!p.match(/--$/)){while("-->"!=f.substr(l,3)){l++;}l+=2;p=f.substr(e,l-e);j=l;}if("\n"!=h.charAt(h.length-1)){h+="\n";}h+=this.cleanGetTabs();h+=p+">\n";}else{if("!"==p[1]){h=this.placeTag(p+">",h);}else{if("?"==p[1]){h+=p+">\n";}else{if(n=p.match(/^<(script|style|pre)/i)){n[1]=n[1].toLowerCase();p=this.cleanTag(p);h=this.placeTag(p,h);g=String(f.substr(j+1)).toLowerCase().indexOf("</"+n[1]);if(g){o=f.substr(j+1,g);j+=g;h+=o;}}else{p=this.cleanTag(p);h=this.placeTag(p,h);}}}}}return this.cleanFinish(h);},cleanGetTabs:function(){var f="";for(var e=0;e<this.cleanlevel;e++){f+="\t";}return f;},cleanFinish:function(e){e=e.replace(/\n\s*\n/g,"\n");e=e.replace(/^[\s\n]*/,"");e=e.replace(/[\s\n]*$/,"");e=e.replace(/<script(.*?)>\n<\/script>/gi,"<script$1><\/script>");this.cleanlevel=0;return e;},cleanTag:function(f){var h="";f=f.replace(/\n/g," ");f=f.replace(/\s{2,}/g," ");f=f.replace(/^\s+|\s+$/g," ");var g="";if(f.match(/\/$/)){g="/";f=f.replace(/\/+$/,"");}var e;while(e=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(f)){if(e[2]){h+=e[1].toLowerCase()+"="+e[2];}else{if(e[1]){h+=e[1].toLowerCase();}}h+=" ";f=f.substr(e[0].length);}return h.replace(/\s*$/,"")+g+">";},placeTag:function(e,g){var f=e.match(this.cleannewLevel);if(e.match(this.cleanlineBefore)||f){g=g.replace(/\s*$/,"");g+="\n";}if(f&&"/"==e.charAt(1)){this.cleanlevel--;}if("\n"==g.charAt(g.length-1)){g+=this.cleanGetTabs();}if(f&&"/"!=e.charAt(1)){this.cleanlevel++;}g+=e;if(e.match(this.cleanlineAfter)||e.match(this.cleannewLevel)){g=g.replace(/ *$/,"");g+="\n";}return g;},formatEmpty:function(j){var f=c.trim(this.$editor.html());if(this.opts.linebreaks){if(f==""){j.preventDefault();this.$editor.html("");this.focus();}}else{f=f.replace(/<br\s?\/?>/i,"");var h=f.replace(/<p>\s?<\/p>/gi,"");if(f===""||h===""){j.preventDefault();var g=c(this.opts.emptyHtml).get(0);this.$editor.html(g);this.focus();}}this.sync();},formatBlocks:function(e){this.bufferSet();var f=this.getBlocks();this.selectionSave();c.each(f,c.proxy(function(g,j){if(j.tagName!=="LI"){var h=c(j).parent();if(e==="p"){if((j.tagName==="P"&&h.size()!=0&&h[0].tagName==="BLOCKQUOTE")||j.tagName==="BLOCKQUOTE"){this.formatQuote();return;}else{if(this.opts.linebreaks){return;}else{this.formatBlock(e,j);}}}else{this.formatBlock(e,j);}}},this));this.selectionRestore();this.sync();},formatBlock:function(e,j){if(j===false){j=this.getBlock();}if(j===false){if(this.opts.linebreaks===true){this.execCommand("formatblock",e);}return true;}var h="";if(e!=="pre"){h=c(j).contents();}else{h=c(j).html();if(c.trim(h)===""){h='<span id="selection-marker-1"></span>';}}if(j.tagName==="PRE"){e="p";}if(this.opts.linebreaks===true&&e==="p"){c(j).replaceWith(c("<div>").append(h).html()+"<br>");}else{var f=this.getParent();var g=c("<"+e+">").append(h);c(j).replaceWith(g);if(f&&f.tagName=="TD"){c(g).wrapAll("<td>");}}},formatChangeTag:function(g,e,f){if(f!==false){this.selectionSave();}var h=c("<"+e+"/>");c(g).replaceWith(function(){return h.append(c(this).contents());});if(f!==false){this.selectionRestore();}return h;},formatQuote:function(){this.bufferSet();if(this.opts.linebreaks===false){this.selectionSave();var e=this.getBlocks();var p=false;var u=e.length;if(e){var m="";var v="";var h=false;var r=true;c.each(e,function(w,x){if(x.tagName!=="P"){r=false;}});c.each(e,c.proxy(function(w,x){if(x.tagName==="BLOCKQUOTE"){this.formatBlock("p",x,false);}else{if(x.tagName==="P"){p=c(x).parent();if(p[0].tagName=="BLOCKQUOTE"){var y=c(p).children("p").size();if(y==1){c(p).replaceWith(x);}else{if(y==u){h="blockquote";m+=this.outerHtml(x);}else{h="html";m+=this.outerHtml(x);if(w==0){c(x).addClass("redactor-replaced").empty();v=this.outerHtml(x);}else{c(x).remove();}}}}else{if(r===false||e.length==1){this.formatBlock("blockquote",x,false);}else{h="paragraphs";m+=this.outerHtml(x);}}}else{if(x.tagName!=="LI"){this.formatBlock("blockquote",x,false);}}}},this));if(h){if(h=="paragraphs"){c(e[0]).replaceWith("<blockquote>"+m+"</blockquote>");c(e).remove();}else{if(h=="blockquote"){c(p).replaceWith(m);}else{if(h=="html"){var o=this.$editor.html().replace(v,"</blockquote>"+m+"<blockquote>");this.$editor.html(o);this.$editor.find("blockquote").each(function(){if(c.trim(c(this).html())==""){c(this).remove();}});}}}}}this.selectionRestore();}else{var j=this.getBlock();if(j.tagName==="BLOCKQUOTE"){this.selectionSave();var o=c.trim(c(j).html());var s=c.trim(this.getSelectionHtml());o=o.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi,"");if(o==s){c(j).replaceWith(c(j).html()+"<br>");}else{this.inlineFormat("tmp");var l=this.$editor.find("tmp");l.empty();var q=this.$editor.html().replace("<tmp></tmp>",'</blockquote><span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"+s+"<blockquote>");this.$editor.html(q);l.remove();this.$editor.find("blockquote").each(function(){if(c.trim(c(this).html())==""){c(this).remove();}});}this.selectionRestore();this.$editor.find("span#selection-marker-1").attr("id",false);}else{var g=this.selectionWrap("blockquote");var o=c(g).html();var t=["ul","ol","table","tr","tbody","thead","tfoot","dl"];c.each(t,function(w,x){o=o.replace(new RegExp("<"+x+"(.*?)>","gi"),"");o=o.replace(new RegExp("</"+x+">","gi"),"");});var f=this.opts.blockLevelElements;f.push("td");c.each(f,function(w,x){o=o.replace(new RegExp("<"+x+"(.*?)>","gi"),"");o=o.replace(new RegExp("</"+x+">","gi"),"<br>");});c(g).html(o);this.selectionElement(g);var n=c(g).next();if(n.size()!=0&&n[0].tagName==="BR"){n.remove();}}}this.sync();},blockRemoveAttr:function(e,g){var f=this.getBlocks();c(f).removeAttr(e);this.sync();},blockSetAttr:function(e,g){var f=this.getBlocks();c(f).attr(e,g);this.sync();},blockRemoveStyle:function(f){var e=this.getBlocks();c(e).css(f,"");this.removeEmptyAttr(e,"style");this.sync();},blockSetStyle:function(g,f){var e=this.getBlocks();c(e).css(g,f);this.sync();},blockRemoveClass:function(f){var e=this.getBlocks();c(e).removeClass(f);this.removeEmptyAttr(e,"class");this.sync();},blockSetClass:function(f){var e=this.getBlocks();c(e).addClass(f);this.sync();},inlineRemoveClass:function(e){this.selectionSave();this.inlineEachNodes(function(f){c(f).removeClass(e);this.removeEmptyAttr(f,"class");});this.selectionRestore();this.sync();},inlineSetClass:function(e){var f=this.getCurrent();if(!c(f).hasClass(e)){this.inlineMethods("addClass",e);}},inlineRemoveStyle:function(e){this.selectionSave();this.inlineEachNodes(function(f){c(f).css(e,"");this.removeEmptyAttr(f,"style");});this.selectionRestore();this.sync();},inlineSetStyle:function(f,e){this.inlineMethods("css",f,e);},inlineRemoveAttr:function(e){this.selectionSave();var g=this.getRange(),h=this.getElement(),f=this.getNodes();if(g.collapsed||g.startContainer===g.endContainer&&h){f=c(h);}c(f).removeAttr(e);this.inlineUnwrapSpan();this.selectionRestore();this.sync();},inlineSetAttr:function(e,f){this.inlineMethods("attr",e,f);},inlineMethods:function(h,e,j){this.bufferSet();this.selectionSave();var f=this.getRange();var g=this.getElement();if((f.collapsed||f.startContainer===f.endContainer)&&g&&!this.nodeTestBlocks(g)){c(g)[h](e,j);}else{this.document.execCommand("fontSize",false,4);var l=this.$editor.find("font");c.each(l,c.proxy(function(m,n){this.inlineSetMethods(h,n,e,j);},this));}this.selectionRestore();this.sync();},inlineSetMethods:function(j,o,g,l){var m=c(o).parent(),e;var n=this.getSelectionText();var h=c(m).text();var f=n==h;if(f&&m&&m[0].tagName==="INLINE"&&m[0].attributes.length!=0){e=m;c(o).replaceWith(c(o).html());}else{e=c("<inline>").append(c(o).contents());c(o).replaceWith(e);}c(e)[j](g,l);return e;},inlineEachNodes:function(j){var f=this.getRange(),g=this.getElement(),e=this.getNodes(),h;if(f.collapsed||f.startContainer===f.endContainer&&g){e=c(g);h=true;}c.each(e,c.proxy(function(m,o){if(!h&&o.tagName!=="INLINE"){var l=this.getSelectionText();var p=c(o).parent().text();var n=l==p;if(n&&o.parentNode.tagName==="INLINE"&&!c(o.parentNode).hasClass("redactor_editor")){o=o.parentNode;}else{return;}}j.call(this,o);},this));},inlineUnwrapSpan:function(){var e=this.$editor.find("inline");c.each(e,c.proxy(function(g,h){var f=c(h);if(f.attr("class")===undefined&&f.attr("style")===undefined){f.contents().unwrap();}},this));},inlineFormat:function(e){this.selectionSave();this.document.execCommand("fontSize",false,4);var g=this.$editor.find("font");var f;c.each(g,function(h,l){var j=c("<"+e+"/>").append(c(l).contents());c(l).replaceWith(j);f=j;});this.selectionRestore();this.sync();},inlineRemoveFormat:function(e){this.selectionSave();var f=e.toUpperCase();var g=this.getNodes();var h=c(this.getParent()).parent();c.each(g,function(j,l){if(l.tagName===f){this.inlineRemoveFormatReplace(l);}});if(h&&h[0].tagName===f){this.inlineRemoveFormatReplace(h);}this.selectionRestore();this.sync();},inlineRemoveFormatReplace:function(e){c(e).replaceWith(c(e).contents());},insertHtml:function(g,j){var m=this.getCurrent();var h=m.parentNode;this.$editor.focus();this.bufferSet();var e=c("<div>").append(c.parseHTML(g));g=e.html();g=this.cleanRemoveEmptyTags(g);e=c("<div>").append(c.parseHTML(g));var f=this.getBlock();if(e.contents().length==1){var l=e.contents()[0].tagName;if(l!="P"&&l==f.tagName||l=="PRE"){g=e.text();e=c("<div>").append(g);}}if(!this.opts.linebreaks&&e.contents().length==1&&e.contents()[0].nodeType==3&&(this.getRangeSelectedNodes().length>2||(!m||m.tagName=="BODY"&&!h||h.tagName=="HTML"))){g="<p>"+g+"</p>";}g=this.setSpansVerifiedHtml(g);if(e.contents().length>1&&f||e.contents().is("p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article")){if(this.browser("msie")){if(!this.isIe11()){this.document.selection.createRange().pasteHTML(g);}else{this.execPasteFrag(g);}}else{this.document.execCommand("inserthtml",false,g);}}else{this.insertHtmlAdvanced(g,false);}if(this.selectall){this.window.setTimeout(c.proxy(function(){if(!this.opts.linebreaks){this.selectionEnd(this.$editor.contents().last());}else{this.focusEnd();}},this),1);}this.observeStart();this.setNonEditable();if(j!==false){this.sync();}},insertHtmlAdvanced:function(f,l){f=this.setSpansVerifiedHtml(f);var m=this.getSelection();if(m.getRangeAt&&m.rangeCount){var e=m.getRangeAt(0);e.deleteContents();var g=this.document.createElement("div");g.innerHTML=f;var n=this.document.createDocumentFragment(),j,h;while((j=g.firstChild)){h=n.appendChild(j);}e.insertNode(n);if(h){e=e.cloneRange();e.setStartAfter(h);e.collapse(true);m.removeAllRanges();m.addRange(e);}}if(l!==false){this.sync();}},insertBeforeCursor:function(f){f=this.setSpansVerifiedHtml(f);var g=c(f);var j=document.createElement("span");j.innerHTML="\u200B";var e=this.getRange();e.insertNode(j);e.insertNode(g[0]);e.collapse(false);var h=this.getSelection();h.removeAllRanges();h.addRange(e);this.sync();},insertText:function(f){var e=c(c.parseHTML(f));if(e.length){f=e.text();}this.$editor.focus();if(this.browser("msie")&&!this.isIe11()){this.document.selection.createRange().pasteHTML(f);}else{this.document.execCommand("inserthtml",false,f);}this.sync();},insertNode:function(j){j=j[0]||j;if(j.tagName=="SPAN"){var e="inline";var f=j.outerHTML;var h=new RegExp("<"+j.tagName,"i");var g=f.replace(h,"<"+e);h=new RegExp("</"+j.tagName,"i");g=g.replace(h,"</"+e);j=c(g)[0];}var l=this.getSelection();if(l.getRangeAt&&l.rangeCount){range=l.getRangeAt(0);range.deleteContents();range.insertNode(j);range.setEndAfter(j);range.setStartAfter(j);l.removeAllRanges();l.addRange(range);}},insertNodeToCaretPositionFromPoint:function(l,j){var g;var f=l.clientX,n=l.clientY;if(this.document.caretPositionFromPoint){var m=this.document.caretPositionFromPoint(f,n);g=this.getRange();g.setStart(m.offsetNode,m.offset);g.collapse(true);g.insertNode(j);}else{if(this.document.caretRangeFromPoint){g=this.document.caretRangeFromPoint(f,n);g.insertNode(j);}else{if(typeof document.body.createTextRange!="undefined"){g=this.document.body.createTextRange();g.moveToPoint(f,n);var h=g.duplicate();h.moveToPoint(f,n);g.setEndPoint("EndToEnd",h);g.select();}}}},insertAfterLastElement:function(e,f){if(typeof(f)!="undefined"){e=f;}if(this.isEndOfElement()){if(this.opts.linebreaks){var g=c("<div>").append(c.trim(this.$editor.html())).contents();if(this.outerHtml(g.last()[0])!=this.outerHtml(e)){return false;}}else{if(this.$editor.contents().last()[0]!==e){return false;}}this.insertingAfterLastElement(e);}},insertingAfterLastElement:function(e){this.bufferSet();if(this.opts.linebreaks===false){var f=c(this.opts.emptyHtml);c(e).after(f);this.selectionStart(f);}else{var f=c('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>",this.document)[0];c(e).after(f);c(f).after(this.opts.invisibleSpace);this.selectionRestore();this.$editor.find("span#selection-marker-1").removeAttr("id");}},insertLineBreak:function(){this.selectionSave();this.$editor.find("#selection-marker-1").before("<br>"+(this.browser("webkit")?this.opts.invisibleSpace:""));this.selectionRestore();},insertDoubleLineBreak:function(){this.selectionSave();this.$editor.find("#selection-marker-1").before("<br><br>"+(this.browser("webkit")?this.opts.invisibleSpace:""));this.selectionRestore();},replaceLineBreak:function(e){var f=c("<br>"+this.opts.invisibleSpace);c(e).replaceWith(f);this.selectionStart(f);},pasteClean:function(g){g=this.callback("pasteBefore",false,g);if(this.browser("msie")){var f=c.trim(g);if(f.search(/^<a(.*?)>(.*?)<\/a>$/i)==0){g=g.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2");}}if(this.opts.pastePlainText){var f=this.document.createElement("div");g=g.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n");f.innerHTML=g;g=f.textContent||f.innerText;g=c.trim(g);g=g.replace("\n","<br>");g=this.cleanParagraphy(g);this.pasteInsert(g);return false;}if(this.currentOrParentIs("PRE")){g=this.pastePre(g);this.pasteInsert(g);return true;}g=g.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>");g=g.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>");g=g.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>");g=g.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>");g=g.replace(//g,"");g=g.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"");g=g.replace(/(&nbsp;){2,}/gi,"&nbsp;");g=g.replace(/&nbsp;/gi," ");g=g.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2");g=g.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3");g=this.cleanStripTags(g);g=g.replace(/<td><\/td>/gi,"[td]");g=g.replace(/<td>&nbsp;<\/td>/gi,"[td]");g=g.replace(/<td><br><\/td>/gi,"[td]");g=g.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td colspan="$2"]$4[/td]');g=g.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td rowspan="$2"]$4[/td]');g=g.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]');g=g.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]");g=g.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]");g=g.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]");g=g.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]");g=g.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]");g=g.replace(/<param(.*?)>/gi,"[param$1]");g=g.replace(/<img(.*?)>/gi,"[img$1]");g=g.replace(/ class="(.*?)"/gi,"");g=g.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>");g=g.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,"");g=g.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi,"$1");g=g.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td colspan="$1">$2</td>');g=g.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td rowspan="$1">$2</td>');g=g.replace(/\[td\]/gi,"<td>&nbsp;</td>");g=g.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>');g=g.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>");g=g.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>");g=g.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>");g=g.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>");g=g.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>");g=g.replace(/\[param(.*?)\]/gi,"<param$1>");g=g.replace(/\[img(.*?)\]/gi,"<img$1>");if(this.opts.convertDivs){g=g.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>");g=g.replace(/<\/div><p>/gi,"<p>");g=g.replace(/<\/p><\/div>/gi,"</p>");}if(this.currentOrParentIs("LI")){g=g.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br>");}else{g=this.cleanParagraphy(g);}g=g.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2");g=g.replace(/<img>/gi,"");g=g.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,"");g=g.replace(/\n{3,}/gi,"\n");g=g.replace(/<p><p>/gi,"<p>");g=g.replace(/<\/p><\/p>/gi,"</p>");g=g.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>");g=g.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>");if(this.opts.linebreaks===true){g=g.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>");}g=g.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,"");g=g.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,"");g=g.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi,"<td$1>$3</td>");g=g.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2");g=g.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2");this.pasteClipboardMozilla=false;if(this.browser("mozilla")){if(this.opts.clipboardUpload){var h=g.match(/<img src="data:image(.*?)"(.*?)>/gi);if(h!==null){this.pasteClipboardMozilla=h;for(k in h){var e=h[k].replace("<img",'<img data-mozilla-paste-image="'+k+'" ');g=g.replace(h[k],e);}}}while(/<br>$/gi.test(g)){g=g.replace(/<br>$/gi,"");}}g=g.replace(/<p>([\w\W]*?)<\/p>/gi,"<li>$1</li>");while(/<font>([\w\W]*?)<\/font>/gi.test(g)){g=g.replace(/<font>([\w\W]*?)<\/font>/gi,"$1");}g=g.replace(/<p>\n?<li>/gi,"<li>");if(this.browser("msie")&&!this.isIe11()){g=g.replace(/\n/g,"");}this.pasteInsert(g);},pastePre:function(f){f=f.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n");var e=this.document.createElement("div");e.innerHTML=f;return this.cleanEncodeEntities(e.textContent||e.innerText);},pasteInsert:function(e){if(this.selectall){if(!this.opts.linebreaks){this.$editor.html(this.opts.emptyHtml);}else{this.$editor.html("");}this.$editor.focus();}e=this.callback("pasteAfter",false,e);this.insertHtml(e);this.selectall=false;setTimeout(c.proxy(function(){this.rtePaste=false;if(this.browser("mozilla")){this.$editor.find("p:empty").remove();}if(this.pasteClipboardMozilla!==false){this.pasteClipboardUploadMozilla();}},this),100);if(this.opts.autoresize&&this.fullscreen!==true){c(this.document.body).scrollTop(this.saveScroll);}else{this.$editor.scrollTop(this.saveScroll);}},pasteClipboardUploadMozilla:function(){var e=this.$editor.find("img[data-mozilla-paste-image]");c.each(e,c.proxy(function(h,j){var g=c(j);var f=j.src.split(",");var l=f[1];var m=f[0].split(";")[0].split(":")[1];c.post(this.opts.clipboardUploadUrl,{contentType:m,data:l},c.proxy(function(o){var n=(typeof o==="string"?c.parseJSON(o):o);g.attr("src",n.filelink);g.removeAttr("data-mozilla-paste-image");this.sync();this.callback("imageUpload",g,n);},this));},this));},pasteClipboardUpload:function(j){var g=j.target.result;var f=g.split(",");var h=f[1];var l=f[0].split(";")[0].split(":")[1];if(this.opts.clipboardUpload){c.post(this.opts.clipboardUploadUrl,{contentType:l,data:h},c.proxy(function(n){var m=(typeof n==="string"?c.parseJSON(n):n);var e='<img src="'+m.filelink+'" id="clipboard-image-marker" />';this.execCommand("inserthtml",e,false);var o=c(this.$editor.find("img#clipboard-image-marker"));if(o.length){o.removeAttr("id");}else{o=false;}this.sync();if(o){this.callback("imageUpload",o,m);}},this));}else{this.insertHtml('<img src="'+g+'" />');}},bufferSet:function(e){if(e!==undefined){this.opts.buffer.push(e);}else{this.selectionSave();this.opts.buffer.push(this.$editor.html());this.selectionRemoveMarkers("buffer");}},bufferUndo:function(){if(this.opts.buffer.length===0){this.$editor.focus();return;}this.selectionSave();this.opts.rebuffer.push(this.$editor.html());this.selectionRestore(false,true);this.$editor.html(this.opts.buffer.pop());this.selectionRestore();setTimeout(c.proxy(this.observeStart,this),100);},bufferRedo:function(){if(this.opts.rebuffer.length===0){this.$editor.focus();return false;}this.selectionSave();this.opts.buffer.push(this.$editor.html());this.selectionRestore(false,true);this.$editor.html(this.opts.rebuffer.pop());this.selectionRestore(true);setTimeout(c.proxy(this.observeStart,this),4);},observeStart:function(){this.observeImages();if(this.opts.observeLinks){this.observeLinks();}},observeLinks:function(){this.$editor.find("a").on("click",c.proxy(this.linkObserver,this));this.$editor.on("click.redactor",c.proxy(function(f){this.linkObserverTooltipClose(f);},this));c(document).on("click.redactor",c.proxy(function(f){this.linkObserverTooltipClose(f);},this));},observeImages:function(){if(this.opts.observeImages===false){return false;}this.$editor.find("img").each(c.proxy(function(e,f){if(this.browser("msie")){c(f).attr("unselectable","on");}this.imageResize(f);},this));},linkObserver:function(h){var j=c(h.target);var m=j.offset();if(this.opts.iframe){var g=this.$frame.offset();m.top=g.top+(m.top-c(this.document).scrollTop());m.left+=g.left;}var p=c('<span class="redactor-link-tooltip"></span>');var f=j.attr("href");if(f.length>24){f=f.substring(0,24)+"...";}var l=c('<a href="'+j.attr("href")+'" target="_blank">'+f+"</a>").on("click",c.proxy(function(q){this.linkObserverTooltipClose(false);},this));var n=c('<a href="#">'+this.opts.curLang.edit+"</a>").on("click",c.proxy(function(q){q.preventDefault();this.linkShow();this.linkObserverTooltipClose(false);},this));var o=c('<a href="#">'+this.opts.curLang.unlink+"</a>").on("click",c.proxy(function(q){q.preventDefault();this.execCommand("unlink");this.linkObserverTooltipClose(false);},this));p.append(l);p.append(" | ");p.append(n);p.append(" | ");p.append(o);p.css({top:(m.top+20)+"px",left:m.left+"px"});c(".redactor-link-tooltip").remove();c("body").append(p);},linkObserverTooltipClose:function(f){if(f!==false&&f.target.tagName=="A"){return false;}c(".redactor-link-tooltip").remove();},getSelection:function(){if(!this.opts.rangy){return this.document.getSelection();}else{if(!this.opts.iframe){return rangy.getSelection();}else{return rangy.getSelection(this.$frame[0]);}}},getRange:function(){if(!this.opts.rangy){if(this.document.getSelection){var e=this.getSelection();if(e.getRangeAt&&e.rangeCount){return e.getRangeAt(0);}}return this.document.createRange();}else{if(!this.opts.iframe){return rangy.createRange();}else{return rangy.createRange(this.iframeDoc());}}},selectionElement:function(e){this.setCaret(e);},selectionStart:function(e){this.selectionSet(e[0]||e,0,null,0);},selectionEnd:function(e){this.selectionSet(e[0]||e,1,null,1);},selectionSet:function(n,m,l,h){if(l==null){l=n;}if(h==null){h=m;}var g=this.getSelection();if(!g){return;}var f=this.getRange();f.setStart(n,m);f.setEnd(l,h);try{g.removeAllRanges();}catch(j){}g.addRange(f);},selectionWrap:function(e){e=e.toLowerCase();var h=this.getBlock();if(h){var j=this.formatChangeTag(h,e);this.sync();return j;}var g=this.getSelection();var f=g.getRangeAt(0);var j=document.createElement(e);j.appendChild(f.extractContents());f.insertNode(j);this.selectionElement(j);return j;},selectionAll:function(){var e=this.getRange();e.selectNodeContents(this.$editor[0]);var f=this.getSelection();f.removeAllRanges();f.addRange(e);},selectionRemove:function(){this.getSelection().removeAllRanges();},getCaretOffset:function(h){var e=0;var g=this.getRange();var f=g.cloneRange();f.selectNodeContents(h);f.setEnd(g.endContainer,g.endOffset);e=c.trim(f.toString()).length;return e;},getCaretOffsetRange:function(){return new d(this.getSelection().getRangeAt(0));},setCaret:function(h,f,m){if(typeof m==="undefined"){m=f;}h=h[0]||h;var o=this.getRange();o.selectNodeContents(h);var p=this.getTextNodesIn(h);var l=false;var e=0,q;if(p.length==1&&f){o.setStart(p[0],f);o.setEnd(p[0],m);}else{for(var n=0,j;j=p[n++];){q=e+j.length;if(!l&&f>=e&&(f<q||(f==q&&n<p.length))){o.setStart(j,f-e);l=true;}if(l&&m<=q){o.setEnd(j,m-e);break;}e=q;}}var g=this.getSelection();g.removeAllRanges();g.addRange(o);},getTextNodesIn:function(j){var h=[];if(j.nodeType==3){h.push(j);}else{var g=j.childNodes;for(var f=0,e=g.length;f<e;++f){h.push.apply(h,this.getTextNodesIn(g[f]));}}return h;},getCurrent:function(){var e=false;var f=this.getSelection();if(f&&f.rangeCount>0){e=f.getRangeAt(0).startContainer;}return this.isParentRedactor(e);},getParent:function(e){e=e||this.getCurrent();if(e){return this.isParentRedactor(c(e).parent()[0]);}else{return false;}},getBlock:function(e){if(typeof e==="undefined"){e=this.getCurrent();}while(e){if(this.nodeTestBlocks(e)){if(c(e).hasClass("redactor_editor")){return false;}return e;}e=e.parentNode;}return false;},getBlocks:function(f){var g=[];if(typeof f=="undefined"){var e=this.getRange();if(e&&e.collapsed===true){return[this.getBlock()];}var f=this.getNodes(e);}c.each(f,c.proxy(function(h,j){if(this.opts.iframe===false&&c(j).parents("div.redactor_editor").size()==0){return false;}if(this.nodeTestBlocks(j)){g.push(j);}},this));if(g.length===0){g=[this.getBlock()];}return g;},nodeTestBlocks:function(e){return e.nodeType==1&&this.rTestBlock.test(e.nodeName);},tagTestBlock:function(e){return this.rTestBlock.test(e);},getNodes:function(g,e){if(typeof g=="undefined"||g==false){var g=this.getRange();}if(g&&g.collapsed===true){if(typeof e==="undefined"&&this.tagTestBlock(e)){var m=this.getBlock();if(m.tagName==e){return[m];}else{return[];}}else{return[this.getCurrent()];}}var f=[],l=[];var j=this.document.getSelection();if(!j.isCollapsed){f=this.getRangeSelectedNodes(j.getRangeAt(0));}c.each(f,c.proxy(function(n,o){if(this.opts.iframe===false&&c(o).parents("div.redactor_editor").size()==0){return false;}if(typeof e==="undefined"){if(c.trim(o.textContent)!=""){l.push(o);}}else{if(o.tagName==e){l.push(o);}}},this));if(l.length==0){if(typeof e==="undefined"&&this.tagTestBlock(e)){var m=this.getBlock();if(m.tagName==e){return l.push(m);}else{return[];}}else{l.push(this.getCurrent());}}var h=l[l.length-1];if(this.nodeTestBlocks(h)){l=l.slice(0,-1);}return l;},getElement:function(e){if(!e){e=this.getCurrent();}while(e){if(e.nodeType==1){if(c(e).hasClass("redactor_editor")){return false;}return e;}e=e.parentNode;}return false;},getRangeSelectedNodes:function(f){f=f||this.getRange();var g=f.startContainer;var e=f.endContainer;if(g==e){return[g];}var h=[];while(g&&g!=e){h.push(g=this.nextNode(g));}g=f.startContainer;while(g&&g!=f.commonAncestorContainer){h.unshift(g);g=g.parentNode;}return h;},nextNode:function(e){if(e.hasChildNodes()){return e.firstChild;}else{while(e&&!e.nextSibling){e=e.parentNode;}if(!e){return null;}return e.nextSibling;}},getSelectionText:function(){return this.getSelection().toString();},getSelectionHtml:function(){var h="";var j=this.getSelection();if(j.rangeCount){var f=this.document.createElement("div");var e=j.rangeCount;for(var g=0;g<e;++g){f.appendChild(j.getRangeAt(g).cloneContents());}h=f.innerHTML;}return this.syncClean(h);},selectionSave:function(){if(!this.isFocused()){this.$editor.focus();}if(!this.opts.rangy){this.selectionCreateMarker(this.getRange());}else{this.savedSel=rangy.saveSelection();}},selectionCreateMarker:function(h,e){if(!h){return;}var g=c('<span id="selection-marker-1" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0];var f=c('<span id="selection-marker-2" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0];if(h.collapsed===true){this.selectionSetMarker(h,g,true);}else{this.selectionSetMarker(h,g,true);this.selectionSetMarker(h,f,false);}this.savedSel=this.$editor.html();this.selectionRestore(false,false);},selectionSetMarker:function(e,g,f){var h=e.cloneRange();h.collapse(f);h.insertNode(g);h.detach();},selectionRestore:function(h,e){if(!this.opts.rangy){if(h===true&&this.savedSel){this.$editor.html(this.savedSel);}var g=this.$editor.find("span#selection-marker-1");var f=this.$editor.find("span#selection-marker-2");if(this.browser("mozilla")){this.$editor.focus();}else{if(!this.isFocused()){this.$editor.focus();}}if(g.length!=0&&f.length!=0){this.selectionSet(g[0],0,f[0],0);}else{if(g.length!=0){this.selectionSet(g[0],0,null,0);}}if(e!==false){this.selectionRemoveMarkers();this.savedSel=false;}}else{rangy.restoreSelection(this.savedSel);}},selectionRemoveMarkers:function(e){if(!this.opts.rangy){c.each(this.$editor.find("span.redactor-selection-marker"),function(){var f=c.trim(c(this).html().replace(/[^\u0000-\u1C7F]/g,""));if(f==""){c(this).remove();}else{c(this).removeAttr("class").removeAttr("id");}});}else{rangy.removeMarkers(this.savedSel);}},tableShow:function(){this.selectionSave();this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,c.proxy(function(){c("#redactor_insert_table_btn").click(c.proxy(this.tableInsert,this));setTimeout(function(){c("#redactor_table_rows").focus();},200);},this));},tableInsert:function(){var r=c("#redactor_table_rows").val(),f=c("#redactor_table_columns").val(),n=c("<div></div>"),e=Math.floor(Math.random()*99999),p=c('<table id="table'+e+'"><tbody></tbody></table>'),g,l,m,o;for(g=0;g<r;g++){l=c("<tr></tr>");for(m=0;m<f;m++){o=c("<td>"+this.opts.invisibleSpace+"</td>");if(g===0&&m===0){o.append('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>");}c(l).append(o);}p.append(l);}n.append(p);var h=n.html();this.modalClose();this.selectionRestore();var j=this.getBlock()||this.getCurrent();if(j&&j.tagName!="BODY"){c(j).after(h);}else{this.insertHtmlAdvanced(h,false);}this.selectionRestore();var q=this.$editor.find("#table"+e);this.buttonActiveObserver();q.find("span#selection-marker-1").remove();q.removeAttr("id");this.sync();},tableDeleteTable:function(){var e=c(this.getParent()).closest("table");if(!this.isParentRedactor(e)){return false;}if(e.size()==0){return false;}this.bufferSet();e.remove();this.sync();},tableDeleteRow:function(){var e=c(this.getParent()).closest("table");if(!this.isParentRedactor(e)){return false;}if(e.size()==0){return false;}this.bufferSet();var h=c(this.getParent()).closest("tr");var f=h.prev().length?h.prev():h.next();if(f.length){var g=f.children("td").first();if(g.length){g.prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>");}}h.remove();this.selectionRestore();this.sync();},tableDeleteColumn:function(){var g=c(this.getParent()).closest("table");if(!this.isParentRedactor(g)){return false;}if(g.size()==0){return false;}this.bufferSet();var e=c(this.getParent()).closest("td");var f=e.get(0).cellIndex;g.find("tr").each(c.proxy(function(h,j){var l=f-1<0?f+1:f-1;if(h===0){c(j).find("td").eq(l).prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>");}c(j).find("td").eq(f).remove();},this));this.selectionRestore();this.sync();},tableAddHead:function(){var e=c(this.getParent()).closest("table");if(!this.isParentRedactor(e)){return false;}if(e.size()==0){return false;}this.bufferSet();if(e.find("thead").size()!==0){this.tableDeleteHead();}else{var f=e.find("tr").first().clone();f.find("td").html(this.opts.invisibleSpace);$thead=c("<thead></thead>");$thead.append(f);e.prepend($thead);this.sync();}},tableDeleteHead:function(){var e=c(this.getParent()).closest("table");if(!this.isParentRedactor(e)){return false;}var f=e.find("thead");if(f.size()==0){return false;}this.bufferSet();f.remove();this.sync();},tableAddRowAbove:function(){this.tableAddRow("before");},tableAddRowBelow:function(){this.tableAddRow("after");},tableAddColumnLeft:function(){this.tableAddColumn("before");},tableAddColumnRight:function(){this.tableAddColumn("after");},tableAddRow:function(f){var e=c(this.getParent()).closest("table");if(!this.isParentRedactor(e)){return false;}if(e.size()==0){return false;}this.bufferSet();var g=c(this.getParent()).closest("tr");var h=g.clone();h.find("td").html(this.opts.invisibleSpace);if(f==="after"){g.after(h);}else{g.before(h);}this.sync();},tableAddColumn:function(h){var g=c(this.getParent()).closest("table");if(!this.isParentRedactor(g)){return false;}if(g.size()==0){return false;}this.bufferSet();var f=0;var j=c(this.getParent()).closest("tr");var e=c(this.getParent()).closest("td");j.find("td").each(c.proxy(function(l,m){if(c(m)[0]===e[0]){f=l;}},this));g.find("tr").each(c.proxy(function(l,n){var m=c(n).find("td").eq(f);var o=m.clone();o.html(this.opts.invisibleSpace);h==="after"?m.after(o):m.before(o);},this));this.sync();},videoShow:function(){this.selectionSave();this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,c.proxy(function(){c("#redactor_insert_video_btn").click(c.proxy(this.videoInsert,this));setTimeout(function(){c("#redactor_insert_video_area").focus();},200);},this));},videoInsert:function(){var e=c("#redactor_insert_video_area").val();e=this.cleanStripTags(e);this.selectionRestore();var f=this.getBlock()||this.getCurrent();if(f){c(f).after(e);}else{this.insertHtmlAdvanced(e,false);}this.sync();this.modalClose();},linkShow:function(){this.selectionSave();var e=c.proxy(function(){this.insert_link_node=false;var g=this.getSelection();var f="",o="",j="";var h=this.getParent();var l=c(h).parent().get(0);if(l&&l.tagName==="A"){h=l;}if(h&&h.tagName==="A"){f=h.href;o=c(h).text();j=h.target;this.insert_link_node=h;}else{o=g.toString();}c(".redactor_link_text").val(o);var q=self.location.href.replace(/\/$/i,"");var n=f.replace(q,"");if(this.opts.linkProtocol===false){var p=new RegExp("^(http|ftp|https)://"+self.location.host,"i");n=n.replace(p,"");}var m=c("#redactor_tabs").find("a");if(this.opts.linkEmail===false){m.eq(1).remove();}if(this.opts.linkAnchor===false){m.eq(2).remove();}if(this.opts.linkEmail===false&&this.opts.linkAnchor===false){c("#redactor_tabs").remove();c("#redactor_link_url").val(n);}else{if(f.search("mailto:")===0){this.modalSetTab.call(this,2);c("#redactor_tab_selected").val(2);c("#redactor_link_mailto").val(f.replace("mailto:",""));}else{if(n.search(/^#/gi)===0){this.modalSetTab.call(this,3);c("#redactor_tab_selected").val(3);c("#redactor_link_anchor").val(n.replace(/^#/gi,""));}else{c("#redactor_link_url").val(n);}}}if(j==="_blank"){c("#redactor_link_blank").prop("checked",true);}c("#redactor_insert_link_btn").click(c.proxy(this.linkProcess,this));setTimeout(function(){c("#redactor_link_url").focus();},200);},this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,e);},linkProcess:function(){var j=c("#redactor_tab_selected").val();var g="",n="",l="",m="";if(j==="1"){g=c("#redactor_link_url").val();n=c("#redactor_link_url_text").val();if(c("#redactor_link_blank").prop("checked")){l=' target="_blank"';m="_blank";}var h="((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}";var f=new RegExp("^(http|ftp|https)://"+h,"i");var e=new RegExp("^"+h,"i");if(g.search(f)==-1&&g.search(e)==0&&this.opts.linkProtocol){g=this.opts.linkProtocol+g;}}else{if(j==="2"){g="mailto:"+c("#redactor_link_mailto").val();n=c("#redactor_link_mailto_text").val();}else{if(j==="3"){g="#"+c("#redactor_link_anchor").val();n=c("#redactor_link_anchor_text").val();}}}n=n.replace(/<|>/g,"");this.linkInsert('<a href="'+g+'"'+l+">"+n+"</a>",c.trim(n),g,m);},linkInsert:function(e,j,f,h){this.selectionRestore();if(j!==""){if(this.insert_link_node){this.bufferSet();c(this.insert_link_node).text(j).attr("href",f);if(h!==""){c(this.insert_link_node).attr("target",h);}else{c(this.insert_link_node).removeAttr("target");}this.sync();}else{var g=c(e).addClass("redactor-added-link");this.exec("inserthtml",this.outerHtml(g),false);this.$editor.find("a.redactor-added-link").removeAttr("style").removeClass("redactor-added-link").each(function(){if(this.className==""){c(this).removeAttr("class");}});this.sync();}}setTimeout(c.proxy(function(){if(this.opts.observeLinks){this.observeLinks();}},this),5);this.modalClose();},fileShow:function(){this.selectionSave();var e=c.proxy(function(){var f=this.getSelection();var g="";if(this.oldIE()){g=f.text;}else{g=f.toString();}c("#redactor_filename").val(g);if(!this.isMobile()){this.draguploadInit("#redactor_file",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:c.proxy(this.fileCallback,this),error:c.proxy(function(j,h){this.callback("fileUploadError",h);},this),uploadParam:this.opts.fileUploadParam});}this.uploadInit("redactor_file",{auto:true,url:this.opts.fileUpload,success:c.proxy(this.fileCallback,this),error:c.proxy(function(j,h){this.callback("fileUploadError",h);},this)});},this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,e);},fileCallback:function(f){this.selectionRestore();if(f!==false){var h=c("#redactor_filename").val();if(h===""){h=f.filename;}var g='<a href="'+f.filelink+'" id="filelink-marker">'+h+"</a>";if(this.browser("webkit")&&!!this.window.chrome){g=g+"&nbsp;";}this.execCommand("inserthtml",g,false);var e=c(this.$editor.find("a#filelink-marker"));if(e.size()!=0){e.removeAttr("id");}else{e=false;}this.sync();this.callback("fileUpload",e,f);}this.modalClose();},imageShow:function(){this.selectionSave();var e=c.proxy(function(){if(this.opts.imageGetJson){c.getJSON(this.opts.imageGetJson,c.proxy(function(m){var h={},l=0;c.each(m,c.proxy(function(o,p){if(typeof p.folder!=="undefined"){l++;h[p.folder]=l;}},this));var j=false;c.each(m,c.proxy(function(r,s){var q="";if(typeof s.title!=="undefined"){q=s.title;}var o=0;if(!c.isEmptyObject(h)&&typeof s.folder!=="undefined"){o=h[s.folder];if(j===false){j=".redactorfolder"+o;}}var p=c('<img src="'+s.thumb+'" class="redactorfolder redactorfolder'+o+'" rel="'+s.image+'" title="'+q+'" />');c("#redactor_image_box").append(p);c(p).click(c.proxy(this.imageThumbClick,this));},this));if(!c.isEmptyObject(h)){c(".redactorfolder").hide();c(j).show();var n=function(o){c(".redactorfolder").hide();c(".redactorfolder"+c(o.target).val()).show();};var g=c('<select id="redactor_image_box_select">');c.each(h,function(p,o){g.append(c('<option value="'+o+'">'+p+"</option>"));});c("#redactor_image_box").before(g);g.change(n);}},this));}else{c("#redactor_tabs").find("a").eq(1).remove();}if(this.opts.imageUpload||this.opts.s3){if(!this.isMobile()&&this.opts.s3===false){if(c("#redactor_file").length){this.draguploadInit("#redactor_file",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:c.proxy(this.imageCallback,this),error:c.proxy(function(h,g){this.callback("imageUploadError",g);},this),uploadParam:this.opts.imageUploadParam});}}if(this.opts.s3===false){this.uploadInit("redactor_file",{auto:true,url:this.opts.imageUpload,success:c.proxy(this.imageCallback,this),error:c.proxy(function(h,g){this.callback("imageUploadError",g);},this)});}else{c("#redactor_file").on("change.redactor",c.proxy(this.s3handleFileSelect,this));}}else{c(".redactor_tab").hide();if(!this.opts.imageGetJson){c("#redactor_tabs").remove();c("#redactor_tab3").show();}else{var f=c("#redactor_tabs").find("a");f.eq(0).remove();f.eq(1).addClass("redactor_tabs_act");c("#redactor_tab2").show();}}c("#redactor_upload_btn").click(c.proxy(this.imageCallbackLink,this));if(!this.opts.imageUpload&&!this.opts.imageGetJson){setTimeout(function(){c("#redactor_file_link").focus();},200);}},this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,e);},imageEdit:function(g){var e=g;var f=e.parent().parent();var h=c.proxy(function(){c("#redactor_file_alt").val(e.attr("alt"));c("#redactor_image_edit_src").attr("href",e.attr("src"));c("#redactor_form_image_align").val(e.css("float"));if(c(f).get(0).tagName==="A"){c("#redactor_file_link").val(c(f).attr("href"));if(c(f).attr("target")=="_blank"){c("#redactor_link_blank").prop("checked",true);}}c("#redactor_image_delete_btn").click(c.proxy(function(){this.imageRemove(e);},this));c("#redactorSaveBtn").click(c.proxy(function(){this.imageSave(e);},this));},this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,h);},imageRemove:function(f){var e=c(f).parent();c(f).remove();if(e.length&&e[0].tagName==="P"){this.$editor.focus();this.selectionStart(e);}this.callback("imageDelete",f);this.modalClose();this.sync();},imageSave:function(h){var f=c(h);var g=f.parent();f.attr("alt",c("#redactor_file_alt").val());var n=c("#redactor_form_image_align").val();if(n==="left"){this.imageMargin="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";f.css({"float":"left",margin:this.imageMargin});}else{if(n==="right"){this.imageMargin="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+"";f.css({"float":"right",margin:this.imageMargin});}else{this.imageMargin="0px";var l=f.closest("#redactor-image-box");if(l.size()!=0){l.css({"float":"",margin:""});}f.css({"float":"",margin:""});}}var j=c.trim(c("#redactor_file_link").val());if(j!==""){var m=false;if(c("#redactor_link_blank").prop("checked")){m=true;}if(g.get(0).tagName!=="A"){var e=c('<a href="'+j+'">'+this.outerHtml(h)+"</a>");if(m){e.attr("target","_blank");}f.replaceWith(e);}else{g.attr("href",j);if(m){g.attr("target","_blank");}else{g.removeAttr("target");}}}else{if(g.get(0).tagName==="A"){g.replaceWith(this.outerHtml(h));}}this.modalClose();this.observeImages();this.sync();},imageResizeHide:function(g){if(g!==false&&c(g.target).parent().size()!=0&&c(g.target).parent()[0].id==="redactor-image-box"){return false;}var f=this.$editor.find("#redactor-image-box");if(f.size()==0){return false;}this.$editor.find("#redactor-image-editter, #redactor-image-resizer").remove();if(this.imageMargin!="0px"){f.find("img").css("margin",this.imageMargin);f.css("margin","");this.imageMargin="0px";}f.find("img").css("opacity","");f.replaceWith(function(){return c(this).contents();});c(document).off("click.redactor-image-resize-hide");this.$editor.off("click.redactor-image-resize-hide");this.$editor.off("keydown.redactor-image-delete");this.sync();},imageResize:function(f){var e=c(f);e.on("mousedown",c.proxy(function(){this.imageResizeHide(false);},this));e.on("dragstart",c.proxy(function(){this.$editor.on("drop.redactor-image-inside-drop",c.proxy(function(){setTimeout(c.proxy(function(){this.observeImages();this.$editor.off("drop.redactor-image-inside-drop");this.sync();},this),1);},this));},this));e.on("click",c.proxy(function(l){if(this.$editor.find("#redactor-image-box").size()!=0){return false;}var n=false,q,p,m=e.width()/e.height(),o=20,j=10;var g=this.imageResizeControls(e);var h=false;g.on("mousedown",function(r){h=true;r.preventDefault();m=e.width()/e.height();q=Math.round(r.pageX-e.eq(0).offset().left);p=Math.round(r.pageY-e.eq(0).offset().top);});c(this.document.body).on("mousemove",c.proxy(function(v){if(h){var s=Math.round(v.pageX-e.eq(0).offset().left)-q;var r=Math.round(v.pageY-e.eq(0).offset().top)-p;var u=e.height();var w=parseInt(u,10)+r;var t=Math.round(w*m);if(t>o){e.width(t);if(t<100){this.imageEditter.css({marginTop:"-7px",marginLeft:"-13px",fontSize:"9px",padding:"3px 5px"});}else{this.imageEditter.css({marginTop:"-11px",marginLeft:"-18px",fontSize:"11px",padding:"7px 10px"});}}q=Math.round(v.pageX-e.eq(0).offset().left);p=Math.round(v.pageY-e.eq(0).offset().top);this.sync();}},this)).on("mouseup",function(){h=false;});this.$editor.on("keydown.redactor-image-delete",c.proxy(function(s){var r=s.which;if(this.keyCode.BACKSPACE==r||this.keyCode.DELETE==r){this.bufferSet();this.imageResizeHide(false);this.imageRemove(e);}},this));c(document).on("click.redactor-image-resize-hide",c.proxy(this.imageResizeHide,this));this.$editor.on("click.redactor-image-resize-hide",c.proxy(this.imageResizeHide,this));},this));},imageResizeControls:function(f){var g=c('<span id="redactor-image-box" data-redactor="verified">');g.css({position:"relative",display:"inline-block",lineHeight:0,outline:"1px dashed rgba(0, 0, 0, .6)","float":f.css("float")});g.attr("contenteditable",false);this.imageMargin=f[0].style.margin;if(this.imageMargin!="0px"){g.css("margin",this.imageMargin);f.css("margin","");}f.css("opacity",0.5).after(g);this.imageEditter=c('<span id="redactor-image-editter" data-redactor="verified">'+this.opts.curLang.edit+"</span>");this.imageEditter.css({position:"absolute",zIndex:2,top:"50%",left:"50%",marginTop:"-11px",marginLeft:"-18px",lineHeight:1,backgroundColor:"#000",color:"#fff",fontSize:"11px",padding:"7px 10px",cursor:"pointer"});this.imageEditter.attr("contenteditable",false);this.imageEditter.on("click",c.proxy(function(){this.imageEdit(f);},this));g.append(this.imageEditter);var e=c('<span id="redactor-image-resizer" data-redactor="verified"></span>');e.css({position:"absolute",zIndex:2,lineHeight:1,cursor:"nw-resize",bottom:"-4px",right:"-5px",border:"1px solid #fff",backgroundColor:"#000",width:"8px",height:"8px"});e.attr("contenteditable",false);g.append(e);g.append(f);return e;},imageThumbClick:function(h){var f='<img id="image-marker" src="'+c(h.target).attr("rel")+'" alt="'+c(h.target).attr("title")+'" />';var g=this.getParent();if(this.opts.paragraphy&&c(g).closest("li").size()==0){f="<p>"+f+"</p>";}this.imageInsert(f,true);},imageCallbackLink:function(){var f=c("#redactor_file_link").val();if(f!==""){var e='<img id="image-marker" src="'+f+'" />';if(this.opts.linebreaks===false){e="<p>"+e+"</p>";}this.imageInsert(e,true);}else{this.modalClose();}},imageCallback:function(e){this.imageInsert(e);},imageInsert:function(f,h){this.selectionRestore();if(f!==false){var e="";if(h!==true){e='<img id="image-marker" src="'+f.filelink+'" />';var g=this.getParent();if(this.opts.paragraphy&&c(g).closest("li").size()==0){e="<p>"+e+"</p>";}}else{e=f;}this.execCommand("inserthtml",e,false);var j=c(this.$editor.find("img#image-marker"));if(j.length){j.removeAttr("id");}else{j=false;}this.sync();h!==true&&this.callback("imageUpload",j,f);}this.modalClose();this.observeImages();},modalTemplatesInit:function(){c.extend(this.opts,{modal_file:String()+'<section><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>'+this.opts.curLang.filename+'</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="'+this.opts.fileUploadParam+'" /></div></form></section>',modal_image_edit:String()+"<section><label>"+this.opts.curLang.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+this.opts.curLang.link+'</label><input id="redactor_file_link" class="redactor_input" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+"</label><label>"+this.opts.curLang.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+this.opts.curLang.none+'</option><option value="left">'+this.opts.curLang.left+'</option><option value="right">'+this.opts.curLang.right+'</option></select></section><footer><button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">'+this.opts.curLang._delete+'</button>&nbsp;&nbsp;&nbsp;<button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="save" class="redactor_modal_btn redactor_modal_action_btn" id="redactorSaveBtn" value="'+this.opts.curLang.save+'" /></footer>',modal_image:String()+'<section><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">'+this.opts.curLang.upload+'</a><a href="#">'+this.opts.curLang.choose+'</a><a href="#">'+this.opts.curLang.link+'</a></div><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="'+this.opts.imageUploadParam+'" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+this.opts.curLang.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_link:String()+'<section><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">URL</a><a href="#">Email</a><a href="#">'+this.opts.curLang.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+this.opts.curLang.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_link_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_table:String()+"<section><label>"+this.opts.curLang.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+this.opts.curLang.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_table_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_video:String()+'<section><form id="redactorInsertVideoForm"><label>'+this.opts.curLang.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_video_btn" value="'+this.opts.curLang.insert+'" /></footer>'});},modalInit:function(m,h,f,n){var e=c("#redactor_modal_overlay");if(!e.length){this.$overlay=e=c('<div id="redactor_modal_overlay" style="display: none;"></div>');c("body").prepend(this.$overlay);}if(this.opts.modalOverlay){e.show().on("click",c.proxy(this.modalClose,this));}var j=c("#redactor_modal");if(!j.length){this.$modal=j=c('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><header id="redactor_modal_header"></header><div id="redactor_modal_inner"></div></div>');c("body").append(this.$modal);}c("#redactor_modal_close").on("click",c.proxy(this.modalClose,this));this.hdlModalClose=c.proxy(function(o){if(o.keyCode===this.keyCode.ESC){this.modalClose();return false;}},this);c(document).keyup(this.hdlModalClose);this.$editor.keyup(this.hdlModalClose);this.modalcontent=false;if(h.indexOf("#")==0){this.modalcontent=c(h);c("#redactor_modal_inner").empty().append(this.modalcontent.html());this.modalcontent.html("");}else{c("#redactor_modal_inner").empty().append(h);}j.find("#redactor_modal_header").html(m);if(typeof c.fn.draggable!=="undefined"){j.draggable({handle:"#redactor_modal_header"});j.find("#redactor_modal_header").css("cursor","move");}var l=c("#redactor_tabs");if(l.length){var g=this;l.find("a").each(function(o,p){o++;c(p).on("click",function(r){r.preventDefault();l.find("a").removeClass("redactor_tabs_act");c(this).addClass("redactor_tabs_act");c(".redactor_tab").hide();c("#redactor_tab"+o).show();c("#redactor_tab_selected").val(o);if(g.isMobile()===false){var q=j.outerHeight();j.css("margin-top","-"+(q+10)/2+"px");}});});}j.find(".redactor_btn_modal_close").on("click",c.proxy(this.modalClose,this));if(this.opts.autoresize===true){this.saveModalScroll=this.document.body.scrollTop;}else{this.saveModalScroll=this.$editor.scrollTop();}if(this.isMobile()===false){j.css({position:"fixed",top:"-2000px",left:"50%",width:f+"px",marginLeft:"-"+(f+60)/2+"px"}).show();this.modalSaveBodyOveflow=c(document.body).css("overflow");c(document.body).css("overflow","hidden");}else{j.css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show();}if(typeof n==="function"){n();}if(this.isMobile()===false){setTimeout(function(){var o=j.outerHeight();j.css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(o+10)/2+"px"});},10);}},modalClose:function(){c("#redactor_modal_close").off("click",this.modalClose);c("#redactor_modal").fadeOut("fast",c.proxy(function(){var e=c("#redactor_modal_inner");if(this.modalcontent!==false){this.modalcontent.html(e.html());this.modalcontent=false;}e.html("");if(this.opts.modalOverlay){c("#redactor_modal_overlay").hide().off("click",this.modalClose);}c(document).unbind("keyup",this.hdlModalClose);this.$editor.unbind("keyup",this.hdlModalClose);this.selectionRestore();if(this.opts.autoresize&&this.saveModalScroll){c(this.document.body).scrollTop(this.saveModalScroll);}else{if(this.opts.autoresize===false&&this.saveModalScroll){this.$editor.scrollTop(this.saveModalScroll);}}},this));if(this.isMobile()===false){c(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible");}return false;},modalSetTab:function(e){c(".redactor_tab").hide();c("#redactor_tabs").find("a").removeClass("redactor_tabs_act").eq(e-1).addClass("redactor_tabs_act");c("#redactor_tab"+e).show();},s3handleFileSelect:function(l){var h=l.target.files;for(var g=0,j;j=h[g];g++){this.s3uploadFile(j);}},s3uploadFile:function(e){this.s3executeOnSignedUrl(e,c.proxy(function(f){this.s3uploadToS3(e,f);},this));},s3executeOnSignedUrl:function(e,h){var f=new XMLHttpRequest();var g="?";if(this.opts.s3.search(/\?/)!="-1"){g="&";}f.open("GET",this.opts.s3+g+"name="+e.name+"&type="+e.type,true);if(f.overrideMimeType){f.overrideMimeType("text/plain; charset=x-user-defined");}f.onreadystatechange=function(j){if(this.readyState==4&&this.status==200){c("#redactor-progress").fadeIn();h(decodeURIComponent(this.responseText));}else{if(this.readyState==4&&this.status!=200){}}};f.send();},s3createCORSRequest:function(g,e){var f=new XMLHttpRequest();if("withCredentials" in f){f.open(g,e,true);}else{if(typeof XDomainRequest!="undefined"){f=new XDomainRequest();f.open(g,e);}else{f=null;}}return f;},s3uploadToS3:function(f,e){var g=this.s3createCORSRequest("PUT",e);if(!g){}else{g.onload=c.proxy(function(){if(g.status==200){c("#redactor-progress, #redactor-progress-drag").hide();var l=e.split("?");if(!l[0]){return false;}this.selectionRestore();var h="";h='<img id="image-marker" src="'+l[0]+'" />';if(this.opts.paragraphy){h="<p>"+h+"</p>";}this.execCommand("inserthtml",h,false);var j=c(this.$editor.find("img#image-marker"));if(j.length){j.removeAttr("id");}else{j=false;}this.sync();this.callback("imageUpload",j,false);this.modalClose();this.observeImages();}else{}},this);g.onerror=function(){};g.upload.onprogress=function(h){};g.setRequestHeader("Content-Type",f.type);g.setRequestHeader("x-amz-acl","public-read");g.send(f);}},uploadInit:function(g,e){this.uploadOptions={url:false,success:false,error:false,start:false,trigger:false,auto:false,input:false};c.extend(this.uploadOptions,e);var f=c("#"+g);if(f.length&&f[0].tagName==="INPUT"){this.uploadOptions.input=f;this.el=c(f[0].form);}else{this.el=f;}this.element_action=this.el.attr("action");if(this.uploadOptions.auto){c(this.uploadOptions.input).change(c.proxy(function(h){this.el.submit(function(j){return false;});this.uploadSubmit(h);},this));}else{if(this.uploadOptions.trigger){c("#"+this.uploadOptions.trigger).click(c.proxy(this.uploadSubmit,this));}}},uploadSubmit:function(f){c("#redactor-progress").fadeIn();this.uploadForm(this.element,this.uploadFrame());},uploadFrame:function(){this.id="f"+Math.floor(Math.random()*99999);var f=this.document.createElement("div");var e='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';f.innerHTML=e;c(f).appendTo("body");if(this.uploadOptions.start){this.uploadOptions.start();}c("#"+this.id).load(c.proxy(this.uploadLoaded,this));return this.id;},uploadForm:function(j,h){if(this.uploadOptions.input){var l="redactorUploadForm"+this.id,e="redactorUploadFile"+this.id;this.form=c('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+h+'" name="'+l+'" id="'+l+'" enctype="multipart/form-data" />');if(this.opts.uploadFields!==false&&typeof this.opts.uploadFields==="object"){c.each(this.opts.uploadFields,c.proxy(function(n,f){if(f!=null&&f.toString().indexOf("#")===0){f=c(f).val();}var o=c("<input/>",{type:"hidden",name:n,value:f});c(this.form).append(o);},this));}var g=this.uploadOptions.input;var m=c(g).clone();c(g).attr("id",e).before(m).appendTo(this.form);c(this.form).css("position","absolute").css("top","-2000px").css("left","-2000px").appendTo("body");this.form.submit();}else{j.attr("target",h).attr("method","POST").attr("enctype","multipart/form-data").attr("action",this.uploadOptions.url);this.element.submit();}},uploadLoaded:function(){var h=c("#"+this.id)[0],j;if(h.contentDocument){j=h.contentDocument;}else{if(h.contentWindow){j=h.contentWindow.document;}else{j=window.frames[this.id].document;}}if(this.uploadOptions.success){c("#redactor-progress").hide();if(typeof j!=="undefined"){var g=j.body.innerHTML;var f=g.match(/\{(.|\n)*\}/)[0];f=f.replace(/^\[/,"");f=f.replace(/\]$/,"");var e=c.parseJSON(f);if(typeof e.error=="undefined"){this.uploadOptions.success(e);}else{this.uploadOptions.error(this,e);this.modalClose();}}else{this.modalClose();alert("Upload failed!");}}this.el.attr("action",this.element_action);this.el.attr("target","");},draguploadInit:function(f,e){this.draguploadOptions=c.extend({url:false,success:false,error:false,preview:false,uploadFields:false,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:false},e);if(window.FormData===undefined){return false;}this.droparea=c('<div class="redactor_droparea"></div>');this.dropareabox=c('<div class="redactor_dropareabox">'+this.draguploadOptions.text+"</div>");this.dropalternative=c('<div class="redactor_dropalternative">'+this.draguploadOptions.atext+"</div>");this.droparea.append(this.dropareabox);c(f).before(this.droparea);c(f).before(this.dropalternative);this.dropareabox.on("dragover",c.proxy(function(){return this.draguploadOndrag();},this));this.dropareabox.on("dragleave",c.proxy(function(){return this.draguploadOndragleave();},this));this.dropareabox.get(0).ondrop=c.proxy(function(g){g.preventDefault();this.dropareabox.removeClass("hover").addClass("drop");this.dragUploadAjax(this.draguploadOptions.url,g.dataTransfer.files[0],false,false,false,this.draguploadOptions.uploadParam);},this);},dragUploadAjax:function(h,l,f,g,n,m){if(!f){var o=c.ajaxSettings.xhr();if(o.upload){o.upload.addEventListener("progress",c.proxy(this.uploadProgress,this),false);}c.ajaxSetup({xhr:function(){return o;}});}var j=new FormData();if(m!==false){j.append(m,l);}else{j.append("file",l);}if(this.opts.uploadFields!==false&&typeof this.opts.uploadFields==="object"){c.each(this.opts.uploadFields,c.proxy(function(p,e){if(e!=null&&e.toString().indexOf("#")===0){e=c(e).val();}j.append(p,e);},this));}c.ajax({url:h,dataType:"html",data:j,cache:false,contentType:false,processData:false,type:"POST",success:c.proxy(function(q){q=q.replace(/^\[/,"");q=q.replace(/\]$/,"");var p=(typeof q==="string"?c.parseJSON(q):q);if(f){g.fadeOut("slow",function(){c(this).remove();});var e=c("<img>");e.attr("src",p.filelink).attr("id","drag-image-marker");this.insertNodeToCaretPositionFromPoint(n,e[0]);var r=c(this.$editor.find("img#drag-image-marker"));if(r.length){r.removeAttr("id");}else{r=false;}this.sync();this.observeImages();if(r){this.callback("imageUpload",r,p);}if(typeof p.error!=="undefined"){this.callback("imageUploadError",p);}}else{if(typeof p.error=="undefined"){this.draguploadOptions.success(p);}else{this.draguploadOptions.error(this,p);this.draguploadOptions.success(false);}}},this)});},draguploadOndrag:function(){this.dropareabox.addClass("hover");return false;},draguploadOndragleave:function(){this.dropareabox.removeClass("hover");return false;},uploadProgress:function(g,h){var f=g.loaded?parseInt(g.loaded/g.total*100,10):g;this.dropareabox.text("Loading "+f+"% "+(h||""));},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent);},normalize:function(e){if(typeof(e)==="undefined"){return 0;}return parseInt(e.replace("px",""),10);},outerHtml:function(e){return c("<div>").append(c(e).eq(0).clone()).html();},isString:function(e){return Object.prototype.toString.call(e)=="[object String]";},isEmpty:function(e){e=e.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi,"");e=e.replace(/\s/g,"");e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,"");return e=="";},isIe11:function(){return !!navigator.userAgent.match(/Trident\/7\./);},browser:function(f){var g=navigator.userAgent.toLowerCase();var e=/(opr)[\/]([\w.]+)/.exec(g)||/(chrome)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||g.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(g)||g.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||[];if(f=="version"){return e[2];}if(f=="webkit"){return(e[1]=="chrome"||e[1]=="webkit");}if(e[1]=="rv"){return f=="msie";}if(e[1]=="opr"){return f=="webkit";}return f==e[1];},oldIE:function(){if(this.browser("msie")&&parseInt(this.browser("version"),10)<9){return true;}return false;},getFragmentHtml:function(f){var e=f.cloneNode(true);var g=this.document.createElement("div");g.appendChild(e);return g.innerHTML;},extractContent:function(){var e=this.$editor[0];var g=this.document.createDocumentFragment();var f;while((f=e.firstChild)){g.appendChild(f);}return g;},isParentRedactor:function(e){if(!e){return false;}if(this.opts.iframe){return e;}if(c(e).parents("div.redactor_editor").length==0||c(e).hasClass("redactor_editor")){return false;}else{return e;}},currentOrParentIs:function(e){var f=this.getParent(),g=this.getCurrent();return f&&f.tagName===e?f:g&&g.tagName===e?g:false;},isEndOfElement:function(){var f=this.getBlock();var h=this.getCaretOffset(f);var g=c.trim(c(f).text()).replace(/\n\r\n/g,"");var e=g.length;if(h==e){return true;}else{return false;}},isFocused:function(){var e,f=this.getSelection();if(f&&f.rangeCount&&f.rangeCount>0){e=f.getRangeAt(0).startContainer;}if(!e){return false;}if(this.opts.iframe){if(this.getCaretOffsetRange().equals()){return !this.$editor.is(e);}else{return true;}}return c(e).closest("div.redactor_editor").length!=0;},removeEmptyAttr:function(f,e){if(c(f).attr(e)==""){c(f).removeAttr(e);}},removeFromArrayByValue:function(g,f){var e=null;while((e=g.indexOf(f))!==-1){g.splice(e,1);}return g;}};b.prototype.init.prototype=b.prototype;c.Redactor.fn.formatLinkify=function(x,u,m,r,j){var s=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,q=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,e=/(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi,w=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig,t=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/;var v=(this.$editor?this.$editor.get(0):this).childNodes,l=v.length;while(l--){var h=v[l];if(h.nodeType===3){var p=h.nodeValue;if(r&&p){var o='<iframe width="500" height="281" src="',g='" frameborder="0" allowfullscreen></iframe>';if(p.match(w)){p=p.replace(w,o+"//www.youtube.com/embed/$1"+g);c(h).after(p).remove();}else{if(p.match(t)){p=p.replace(t,o+"//player.vimeo.com/video/$2"+g);c(h).after(p).remove();}}}if(m&&p&&p.match(e)){p=p.replace(e,'<img src="$1">');c(h).after(p).remove();}if(u&&p&&(p.match(s)||p.match(q))){var f=(p.match(s)||p.match(q));f=f[0];if(f.length>j){f=f.substring(0,j)+"...";}p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(s,'$1<a href="'+x+'$2">'+c.trim(f)+"</a>$3").replace(q,'$1<a href="$2">'+c.trim(f)+"</a>$5");c(h).after(p).remove();}}else{if(h.nodeType===1&&!/^(a|button|textarea)$/i.test(h.tagName)){c.Redactor.fn.formatLinkify.call(h,x,u,m,r,j);}}}};})(jQuery);
\ No newline at end of file
+eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('(C($){\'lC lA\';if(!js.5K.9T){js.5K.9T=C(jt){E fn=q;F C(){F fn.8E(jt)}}}E 2G=0;$.fn.I=C(3Y){E 2J=[];E jw=9i.5K.de.5Z(kU,1);if(1s 3Y===\'6W\'){q.1z(C(){E 6Z=$.1f(q,\'I\');E 1C;if(3Y.3L(/\\./)!=\'-1\'){1C=3Y.4p(\'.\');if(1s 6Z[1C[0]]!=\'1y\'){1C=6Z[1C[0]][1C[1]]}}M{1C=6Z[3Y]}if(1s 6Z!==\'1y\'&&$.5s(1C)){E bo=1C.8E(6Z,jw);if(bo!==1y&&bo!==6Z){2J.2R(bo)}}M{$.6X(\'lu lv aS "\'+3Y+\'" 2C 43\')}})}M{q.1z(C(){$.1f(q,\'I\',{});$.1f(q,\'I\',43(q,3Y))})}if(2J.12===0)F q;M if(2J.12===1)F 2J[0];M F 2J};C 43(el,3Y){F 29 43.5K.3N(el,3Y)}$.43=43;$.43.lI=\'10.2.3\';$.43.bI=[\'3a\',\'3o\',\'R\',\'28\',\'2r\',\'1u\',\'1T\',\'1v\',\'1d\',\'1W\',\'1o\',\'22\',\'2m\',\'N\',\'3B\',\'25\',\'1Y\',\'1D\',\'2x\',\'1H\',\'3M\',\'V\',\'2z\',\'2e\',\'1a\',\'1R\',\'2W\',\'5u\',\'3e\',\'5I\',\'J\',\'6i\',\'2I\',\'1I\',\'1B\',\'1w\',\'L\'];$.43.G={1H:\'en\',cX:\'lo\',8F:O,2m:O,ix:O,3e:O,6e:1r,6H:O,as:O,9O:O,1K:O,6r:1r,2W:1r,kG:O,bu:1r,jg:1r,gq:1r,hg:O,3o:O,bU:O,8M:60,bR:O,aF:O,jz:1r,5g:\'8U\',hd:O,dh:50,cA:1r,ij:1r,im:1r,8o:\'lT\',cE:1r,7J:4d,hH:\'22\',lZ:O,ht:1r,7D:4d,hJ:\'22\',hq:1r,7P:O,bs:1r,dk:1r,dj:1r,8C:1r,6T:4,aR:O,fw:1r,8h:O,1B:1r,fP:1r,6B:1k,6z:0,9M:O,fR:O,4B:1r,4k:[\'B\',\'3b\',\'4n\',\'4m\',\'5W\',\'5n\',\'5o\',\'7a\',\'3B\',\'N\',\'22\',\'V\',\'3a\',\'aE\'],dK:[],dW:[],3b:[\'p\',\'26\',\'2H\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'],cu:O,2I:1r,49:[\'3V\',\'1p\'],4t:O,bL:[\'3T\',\'1j\',\'2H\',\'69\',\'3s\',\'ol\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\',\'dl\',\'26\',\'7G\',\'c4\',\'4h\',\'7S\',\'cR\',\'eC\',\'eH\',\'41\',\'1p\',\'3V\',\'4R\',\'7F\',\'3E\',\'2v\',\'1u\',\'3Z\',\'k7\',\'kS\',\'lR\',\'hr\',\'kd\',\'m0\',\'kY\',\'kZ\',\'70\',\'l0\',\'lk\',\'lb\',\'p\'],6C:O,5F:[[\'7U\',\'4l\'],[\'b\',\'5e\']],5r:[[\'3P-7z:\\\\s?4n\',"5e"],[\'3P-1p:\\\\s?4m\',"em"],[\'1g-80:\\\\s?5p\',"u"],[\'1g-80:\\\\s?3M-fc\',\'4l\']],5m:O,1L:O,4T:O,6N:[\'1i\'],3S:[\'p\'],bq:[\'5W\',\'4m\',\'4n\',\'5p\',\'5n\',\'5o\',\'l5\',\'lj\',\'l8\',\'9r\'],bJ:{b:\'4n\',5e:\'4n\',i:\'4m\',em:\'4m\',4l:\'5W\',7U:\'5W\',3s:\'5n\',ol:\'5o\',u:\'5p\'},6i:{\'4f+6L+m, 5k+6L+m\':{1C:\'25.c6\'},\'4f+b, 5k+b\':{1C:\'25.31\',6j:[\'4n\']},\'4f+i, 5k+i\':{1C:\'25.31\',6j:[\'4m\']},\'4f+h, 5k+h\':{1C:\'25.31\',6j:[\'eK\']},\'4f+l, 5k+l\':{1C:\'25.31\',6j:[\'eP\']},\'4f+k, 5k+k\':{1C:\'V.2O\'},\'4f+6L+7\':{1C:\'2e.3j\',6j:[\'5o\']},\'4f+6L+8\':{1C:\'2e.3j\',6j:[\'5n\']}},kH:O,28:[],9L:[],6s:\'<p>&#aZ;</p>\',5R:\'&#aZ;\',hQ:[\'N/j0\',\'N/lf\',\'N/jR\'],b7:20,c2:[\'a\',\'1M\',\'b\',\'5e\',\'7Z\',\'7V\',\'i\',\'em\',\'u\',\'9h\',\'7U\',\'4l\',\'9u\',\'3s\',\'ol\',\'li\'],4N:[\'5e\',\'b\',\'u\',\'em\',\'i\',\'1d\',\'4l\',\'ld\',\'bz\',\'aO\',\'7V\',\'7Z\',\'7O\',\'E\',\'9u\',\'9h\'],8q:[\'P\',\'ec\',\'e9\',\'e3\',\'ef\',\'eg\',\'ee\',\'le\',\'lc\',\'l9\',\'7p\',\'6w\',\'bd\',\'la\',\'hm\',\'lg\',\'lm\',\'l2\',\'l3\',\'nF\',\'n8\'],9a:[\'8P\',\'8y\',\'8t\',\'5y\'],cH:O,1R:{7r:[]},ku:{en:{B:\'n7\',6E:\'6x j5\',N:\'6x j7\',3T:\'bP\',V:\'bW\',bx:\'6x V\',dB:\'iY V\',6t:\'n6\',3b:\'n4\',kE:\'n9 1g\',e1:\'ne\',1d:\'jc\',iC:\'8Y 1\',fz:\'8Y 2\',fy:\'8Y 3\',fF:\'8Y 4\',fv:\'8Y 5\',4n:\'nb\',4m:\'n3\',mV:\'mU iL\',mR:\'mW iL\',5n:\'mX iO\',5o:\'n1 iO\',7a:\'mZ\',3B:\'mY\',iR:\'ng\',1Y:\'6x\',3m:\'nx\',ir:\'9y\',nv:\'6x bP\',nz:\'9m bO nE\',nD:\'9m bO nB\',nu:\'9m bK iT\',nt:\'9m bK iU\',nk:\'9y bK\',no:\'9y bO\',mj:\'9y bP\',mi:\'mh\',mf:\'mg\',mk:\'9m iH\',mp:\'9y iH\',1J:\'mn\',cP:\'mm\',5z:\'me\',2c:\'iT\',4z:\'iU\',5E:\'j4\',md:\'j7 m6 bW\',1g:\'m5\',d5:\'m4\',m2:\'cM\',m3:\'j5 m7 jc or m8/mc bW\',22:\'6x ma\',1w:\'m9\',mq:\'mr\',jb:\'mI\',mH:\'mG jb\',mF:\'iZ 22 j2\',fm:\'j3 1g iX iW 2c\',fs:\'j4 1g\',fI:\'j3 1g iX iW 4z\',fJ:\'mK 1g\',aE:\'6x mO mN\',5W:\'mM\',gg:\'mL\',at:\'mE V in 29 5C\',5p:\'mD\',3a:\'mw\',6h:\'mv (mu)\',7e:\'iY\',ev:\'iZ 22 j2 or \'}},2z:{4w:{6K:/5w?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:mt\\.be\\/|6K\\.bw\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.\\-]*(?:[\'"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig,6F:/5w?:\\/\\/(7f\\.)?6F.bw\\/(\\d+)($|\\/)/,N:/((5w?|7f)[^\\s]+\\.)(mx?g|j0|jR)(\\?[^\\s-]+)?/ig,2h:/(5w?:\\/\\/(?:7f\\.|(?!7f))[^\\s\\.]+\\.[^\\s]{2,}|7f\\.[^\\s]+\\.[^\\s]{2,})/ig,}},8l:O};43.fn=$.43.5K={3t:{7x:8,8n:46,mC:38,ci:40,6R:13,kT:32,am:27,ce:9,fh:17,fg:91,fj:16,fi:18,g8:39,mA:37,iA:91},3N:C(el,3Y){q.$2k=$(el);q.2G=2G++;q.7k=O;q.$5b=O;q.kJ(3Y);q.kD();q.3b={};$.mz(q.G.9a,q.G.8q);q.hG=29 2l(\'^(\'+q.G.9a.3d(\'|\')+\')$\',\'i\');q.1I.jY();if(q.G.49!==O){E 2d=[\'B\',\'dO\',\'V\',\'3c\',\'5k\',\'my\'];2C(E i=0;i<2d.12;i++){q.G.49.2R(2d[i])}}q.1H.2K();$.7w(q.G.6i,q.G.kH);q.1W.2q(\'2b\');q.2b=1r;q.2r.es()},kJ:C(3Y){q.G=$.7w({},$.7w(1r,{},$.43.G),q.$2k.1f(),3Y)},cN:C(41){F gU.ms(41).dc(C(ab){F 1s 41[ab]==\'C\'})},kD:C(){E 2o=$.43.bI.12;2C(E i=0;i<2o;i++){q.kK($.43.bI[i])}},kK:C(6y){if(1s q[6y]==\'1y\')F;q[6y]=q[6y]();E 6l=q.cN(q[6y]);E 2o=6l.12;2C(E z=0;z<2o;z++){q[6y][6l[z]]=q[6y][6l[z]].9T(q)}},3a:C(){F{2c:C(){q.3a.1U(\'\')},4z:C(){q.3a.1U(\'4z\')},5E:C(){q.3a.1U(\'5E\')},9r:C(){q.3a.1U(\'9r\')},1U:C(1m){if(!q.L.1P(\'2F\'))q.$T.2m();q.28.1U();q.J.3m();q.3a.1Z=q.J.42();q.3a.1m=1m;if(q.3a.kw()){q.3a.k4()}M{q.3a.k3()}q.J.3g();q.1d.1S()},k4:C(){E 4P=q.J.62(\'1j\');$(4P).1c(\'1f-9z\',\'I\').1O(\'1g-5a\',q.3a.1m)},k3:C(){$.1z(q.3a.1Z,$.1e(C(i,el){E $el=q.L.bp(el);if(!$el)F;if(q.3a.jV($el)){q.3a.jT($el)}M{q.3a.k0($el)}},q))},kw:C(){F(q.G.1K&&q.3a.1Z[0]===O)},jV:C($el){F(q.3a.1m===\'\'&&1s($el.1f(\'9z\'))!==\'1y\')},jT:C($el){$el.2u($el.B())},k0:C($el){$el.1O(\'1g-5a\',q.3a.1m);q.L.5H($el,\'1p\')}}},3o:C(){F{B:O,a7:C(){if(!q.G.3o)F;q.3o.1x=(q.G.bU)?q.G.bU:q.$2v.1c(\'1x\');if(q.G.bR)F;q.8M=mo(q.3o.2K,q.G.8M*nr)},gr:C(){if(!q.G.bR)F;q.3o.2K()},2K:C(){if(!q.G.3o)F;q.3o.4B=q.1d.1b();if(q.3o.B===q.3o.4B)F;E 1f={};1f[\'1x\']=q.3o.1x;1f[q.3o.1x]=q.3o.4B;1f=q.3o.71(1f);E kk=$.ns({2h:q.G.3o,1m:\'nm\',1f:1f});kk.nC(q.3o.kt)},71:C(1f){if(q.G.aF===O||1s q.G.aF!==\'41\'){F 1f}$.1z(q.G.aF,$.1e(C(k,v){if(v!==4d&&v.4s().4I(\'#\')===0)v=$(v).2J();1f[k]=v},q));F 1f},kt:C(1f){E 2P;52{2P=$.iw(1f)}4U(e){2P=1f}E kg=(1s 2P.6X==\'1y\')?\'3o\':\'lO\';q.1W.2q(kg,q.3o.1x,2P);q.3o.B=q.3o.4B},lM:C(){i0(q.8M)}}},R:C(){F{3b:C(1x){q.R.a2=O;E 1m,1E;if(1s q.3b[1x].1f!=\'1y\')1m=\'1f\';M if(1s q.3b[1x].1c!=\'1y\')1m=\'1c\';M if(1s q.3b[1x][\'1G\']!=\'1y\')1m=\'1G\';if(1s q.3b[1x].9d!=\'1y\'){q.R.a2=1r}if(1m)1E=q.3b[1x][1m];q.R.31(q.3b[1x].Y,1m,1E)},31:C(Y,1m,1E){if(Y==\'e1\')Y=\'26\';E ke=[\'p\',\'2H\',\'26\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'];if($.3q(Y,ke)==-1)F;q.R.8H=(Y==\'2H\'||Y.3L(/h[1-6]/i)!=-1);if(!q.L.1P(\'2F\'))q.$T.2m();E B=$.3k(q.$T.B());q.R.3z=q.L.3z(B);if(q.L.1P(\'4g\')&&!q.2m.cp()){if(q.R.3z){E $3H;if(!q.G.1K){$3H=q.$T.3O().3H();q.1T.3J($3H)}}}q.R.1Z=q.J.42();q.R.7i=q.R.1Z.12;q.R.1m=1m;q.R.1E=1E;q.28.1U();q.J.3m();q.R.1U(Y);q.J.3g();q.1d.1S();q.1R.2K()},1U:C(Y){q.J.1b();q.R.6c=q.14.kO.1n;if(q.14.4Y){q.R.kn(Y)}M{q.R.k9(Y)}},kn:C(Y){if(q.G.1K&&q.R.3z&&Y!=\'p\'){E Q=1k.3y(Y);q.$T.B(Q);q.1T.3J(Q);F}E R=q.R.1Z[0];if(R===O)F;if(R.1n==\'5y\'){if(Y!=\'26\')F;q.R.aB();F}E b0=(q.R.6c==\'6w\'||q.R.6c==\'cz\');if(b0&&!q.G.1K){1k.47(\'a0\',O,\'<\'+Y+\'>\');R=q.J.4a();q.R.3j($(R))}M if(R.1n.3f()!=Y){if(q.G.1K&&Y==\'p\'){$(R).1F(\'<br>\');q.L.6p(R)}M{E $1X=q.L.4J(R,Y);q.R.3j($1X);if(Y!=\'p\'&&Y!=\'26\')$1X.1h(\'1M\').1t();if(q.R.8H)q.L.56($1X);if(Y==\'p\'||q.R.bX)$1X.1h(\'p\').2a().44();q.R.bT($1X)}}M if(Y==\'26\'&&R.1n.3f()==Y){if(q.G.1K){$(R).1F(\'<br>\');q.L.6p(R)}M{E $el=q.L.4J(R,\'p\');q.R.3j($el)}}M if(R.1n.3f()==Y){q.R.3j($(R))}if(1s q.R.1m==\'1y\'&&1s q.R.1E==\'1y\'){$(R).1L(\'1G\').1L(\'1p\')}},k9:C(Y){E R=q.R.1Z[0];E b0=(q.R.6c==\'6w\'||q.R.6c==\'cz\');if(R!==O&&q.R.7i===1){if(R.1n.3f()==Y&&Y==\'26\'){if(q.G.1K){$(R).1F(\'<br>\');q.L.6p(R)}M{E $el=q.L.4J(R,\'p\');q.R.3j($el)}}M if(R.1n==\'5y\'){if(Y!=\'26\')F;q.R.aB()}M if(q.R.6c==\'bd\'){q.R.fE(Y)}M if(q.G.1K&&((b0)||(q.14.kO!=R))){q.R.ap(Y)}M{if(q.G.1K&&Y==\'p\'){$(R).6u(\'<br>\').1F(\'<br>\');q.L.6p(R)}M if(R.1n===\'6w\'){q.R.ap(Y)}M{E $1X=q.L.4J(R,Y);q.R.3j($1X);if(q.R.8H)q.L.56($1X);if(Y==\'p\'||q.R.bX)$1X.1h(\'p\').2a().44()}}}M{if(q.G.1K||Y!=\'p\'){if(Y==\'26\'){E bQ=0;2C(E i=0;i<q.R.7i;i++){if(q.R.1Z[i].1n==\'bd\')bQ++}if(bQ==q.R.7i){$.1z(q.R.1Z,$.1e(C(i,s){E $1X=O;if(q.G.1K){$(s).6u(\'<br>\').1F(\'<br>\');$1X=q.L.6p(s)}M{$1X=q.L.4J(s,\'p\')}if($1X&&1s q.R.1m==\'1y\'&&1s q.R.1E==\'1y\'){$1X.1L(\'1G\').1L(\'1p\')}},q));F}}q.R.ap(Y)}M{E 8V=0;E 5M=O;if(q.R.1m==\'1G\'){5M=\'3j\';8V=$(q.R.1Z).dc(\'.\'+q.R.1E).12;if(q.R.7i==8V)5M=\'3j\';M if(q.R.7i>8V)5M=\'1U\';M if(8V===0)5M=\'1U\'}E 8g=[\'3s\',\'ol\',\'li\',\'2Z\',\'5S\',\'dl\',\'dt\',\'dd\'];$.1z(q.R.1Z,$.1e(C(i,s){if($.3q(s.1n.3f(),8g)!=-1)F;E $1X=q.L.4J(s,Y);if(5M){if(5M==\'3j\')q.R.3j($1X);M if(5M==\'1t\')q.R.1t($1X);M if(5M==\'1U\')q.R.fH($1X)}M q.R.3j($1X);if(Y!=\'p\'&&Y!=\'26\')$1X.1h(\'1M\').1t();if(q.R.8H)q.L.56($1X);if(Y==\'p\'||q.R.bX)$1X.1h(\'p\').2a().44();if(1s q.R.1m==\'1y\'&&1s q.R.1E==\'1y\'){$1X.1L(\'1G\').1L(\'1p\')}},q))}}},fH:C($el){if(q.R.a2){$el.1L(\'1G\').1L(\'1p\')}if(q.R.1m==\'1G\'){$el.2f(q.R.1E);F}M if(q.R.1m==\'1c\'||q.R.1m==\'1f\'){$el.1c(q.R.1E.1x,q.R.1E.1E);F}},3j:C($el){if(q.R.a2){$el.1L(\'1G\').1L(\'1p\')}if(q.R.1m==\'1G\'){$el.7C(q.R.1E);F}M if(q.R.1m==\'1c\'||q.R.1m==\'1f\'){if($el.1c(q.R.1E.1x)==q.R.1E.1E){$el.1L(q.R.1E.1x)}M{$el.1c(q.R.1E.1x,q.R.1E.1E)}F}M{$el.1L(\'1p 1G\');F}},1t:C($el){$el.2U(q.R.1E)},aB:C(){E R=$(q.R.1Z[0]).2p(\'3s, ol\',q.$T[0]);$(R).1h(\'3s, ol\').2a().44();$(R).1h(\'li\').1F($(\'<br>\')).2a().44();E $el=q.L.4J(R,\'26\');q.R.3j($el)},fE:C(Y){1k.47(\'7a\');1k.47(\'a0\',O,Y);q.1v.4y();q.$T.1h(\'p:g2\').1t();E 1X=q.J.4a();if(Y!=\'p\'){$(1X).1h(\'1M\').1t()}if(!q.G.1K){q.R.3j($(1X))}q.$T.1h(\'3s, ol, 6S, 26, p\').1z($.1e(q.L.3S,q));if(q.G.1K&&Y==\'p\'){q.L.6p(1X)}},ap:C(Y){if(q.R.6c==\'8y\'||q.R.6c==\'8t\'){if(Y==\'26\'){q.R.aB()}M{F}}E 1X=q.J.62(Y);if(1X===O)F;E $1X=$(1X);q.R.bT($1X);E $fq=$1X.1h(q.G.9a.3d(\',\')+\', 2Z, 3T, dP, dJ, dQ, 5S, 6S\');$fq.2a().44();if(Y!=\'p\'&&Y!=\'26\')$1X.1h(\'1M\').1t();$.1z(q.R.1Z,$.1e(q.L.3S,q));$1X.1F(q.J.6Q(2));if(!q.G.1K){q.R.3j($1X)}q.$T.1h(\'3s, ol, 6S, 26, p\').1z($.1e(q.L.3S,q));$1X.1h(\'26:g2\').1t();if(q.R.8H){q.L.56($1X)}if(q.G.1K&&Y==\'p\'){q.L.6p($1X)}if(q.G.1K){E $1N=$1X.1N().1N();if($1N.82()!=0&&$1N[0].1n===\'5l\'){$1N.1t()}}},bT:C($1X){if($1X.2p(\'3T\',q.$T[0]).12===0)F;if($1X.2p(\'6S\',q.$T[0]).12===0)$1X.62(\'<6S>\');if($1X.2p(\'2Z\',q.$T[0]).12===0&&$1X.2p(\'5S\').12===0){$1X.62(\'<2Z>\')}},i6:C(1x,1E){E 1Z=q.J.42();$(1Z).1L(\'1f-\'+1x);q.1d.1S()},nj:C(1x,1E){E 1Z=q.J.42();$(1Z).1c(\'1f-\'+1x,1E);q.1d.1S()},nh:C(1x,1E){E 1Z=q.J.42();$.1z(1Z,C(){if($(q).1c(\'1f-\'+1x)){$(q).1L(\'1f-\'+1x)}M{$(q).1c(\'1f-\'+1x,1E)}})},1L:C(1c,1E){E 1Z=q.J.42();$(1Z).1L(1c);q.1d.1S()},nq:C(1c,1E){E 1Z=q.J.42();$(1Z).1c(1c,1E);q.1d.1S()},mQ:C(1c,1E){E 1Z=q.J.42();$.1z(1Z,C(){if($(q).1c(1x)){$(q).1L(1x)}M{$(q).1c(1x,1E)}})},2U:C(3G){E 1Z=q.J.42();$(1Z).2U(3G);q.L.5H(1Z,\'1G\');q.1d.1S()},8W:C(3G){E 1Z=q.J.42();$(1Z).2f(3G);q.1d.1S()},7C:C(3G){E 1Z=q.J.42();$(1Z).7C(3G);q.1d.1S()}}},28:C(){F{1U:C(1m){if(1s 1m==\'1y\'||1m==\'9v\'){q.28.fM()}M{q.28.fQ()}},fM:C(){q.J.3m();q.G.28.2R(q.$T.B());q.J.3g()},fQ:C(){q.J.3m();q.G.9L.2R(q.$T.B());q.J.3g()},fT:C(){q.$T.B(q.G.28.fV())},ez:C(){q.$T.B(q.G.9L.fV())},bZ:C(){q.G.28.2R(q.$T.B())},9v:C(){if(q.G.28.12===0)F;q.28.1U(\'bG\');q.28.fT();q.J.3g();3u($.1e(q.1R.2K,q),50)},bG:C(){if(q.G.9L.12===0)F;q.28.1U(\'9v\');q.28.ez();q.J.3g();3u($.1e(q.1R.2K,q),50)}}},2r:C(){F{es:C(){q.2r.eo();q.2r.eU();q.2r.eN();q.2r.f0();q.2r.et()},ay:C(){F(q.$2k[0].1n===\'n2\')},eo:C(){q.$2N=$(\'<1j 1G="I-2N" 9D="mB" />\')},eF:C(){q.$2v=$(\'<2v />\').1c(\'1x\',q.2r.ep())},ep:C(){F((1s(1x)==\'1y\'))?\'cT-\'+q.2G:q.$2k.1c(\'id\')},eU:C(){E 1C=(q.2r.ay())?\'2J\':\'B\';q.cT=$.3k(q.$2k[1C]())},f0:C(){q.$T.1c({\'5c\':1r,\'hR\':q.G.cX})},eN:C(){E 1C=(q.2r.ay())?\'eL\':\'eM\';q.2r[1C]()},eL:C(){q.$T=$(\'<1j />\');q.$2v=q.$2k;q.$2N.ex(q.$2k).1F(q.$T).1F(q.$2k);q.$T.2f(\'I-T\');q.$2k.3p()},eM:C(){q.$T=q.$2k;q.2r.eF();q.$2N.ex(q.$T).1F(q.$T).1F(q.$2v);q.$T.2f(\'I-T\');q.$2v.3p()},et:C(){q.1d.1U(q.cT);q.2r.hP();q.2r.hO();if(q.G.6e)F;3u($.1e(q.1d.ck,q),ag)},hO:C(){q.2r.it();q.2r.ii();q.2r.hx();q.2r.il();if(q.G.1B){q.G.1B=q.1B.3N();q.1B.2r()}q.1a.j9();q.2r.8F();3u($.1e(q.1R.2K,q),4);q.1W.2q(\'3N\')},hP:C(){$(q.$2v).1c(\'hR\',q.G.cX);if(q.G.1K)q.$T.2f(\'I-1K\');if(q.G.6H)q.$T.1c(\'6H\',q.G.6H);if(q.G.as)q.$T.1O(\'as\',q.G.as);if(q.G.9O)q.$T.1O(\'9O\',q.G.9O)},hD:C(e){e.2t();if(!q.G.ht||!q.G.hq)F;E 5T=e.9Z.5T;q.1w.hL(5T[0],e)},hy:C(e){q.1d.1S();3u(q.1v.4y,1);q.1W.2q(\'58\',e)},hx:C(){q.$T.on(\'58.I\',$.1e(C(e){e=e.87||e;if(3l.9V===1y||!e.9Z)F 1r;if(e.9Z.5T.12===0){F q.2r.hy(e)}M{q.2r.hD(e)}3u(q.1v.4y,1);q.1W.2q(\'58\',e)},q));q.$T.on(\'2A.I\',$.1e(C(e){E 8c=q.1W.76();E 1m=(8c==\'2A\'||8c==\'57\')?O:\'2A\';q.1W.9k(1m);q.L.8u();q.1W.2q(\'2A\',e)},q));q.$T.on(\'5u.I\',$.1e(q.5u.3N,q));q.$T.on(\'np.I\',$.1e(q.1d.1S,q));q.$T.on(\'1D.I\',$.1e(q.1D.3N,q));q.$T.on(\'2x.I\',$.1e(q.2x.3N,q));if($.5s(q.G.hW)){q.$2v.on(\'1D.I-2v\',$.1e(q.G.hW,q))}if($.5s(q.G.hX)){q.$2v.on(\'2x.I-2v\',$.1e(q.G.hX,q))}q.$T.on(\'2m.I\',$.1e(C(e){if($.5s(q.G.nn))q.1W.2q(\'2m\',e);if(q.J.3v()===O){q.J.1b();q.14.2Q(q.$T[0],0);q.14.3J(q.$T[0],0);q.J.4b()}},q));$(1k).on(\'68.I-ct.\'+q.2G,$.1e(C(e){if(q.2b)F;if(q.7k)F;if($(e.1Q).2p(\'.I-T, .I-1B, .I-1o\').82()!==0){F}q.L.8u();if($.5s(q.G.ni))q.1W.2q(\'ct\',e)},q))},il:C(){if(q.2z.b6()){q.2z.31()}q.3e.a7();if(q.G.2m)3u(q.2m.2Q,6G);if(q.G.ix)3u(q.2m.3J,6G)},8F:C(){if(!q.G.8F)F;$.1z(q.G.8F,$.1e(C(i,s){E 1C=(1s cO!==\'1y\'&&1s cO[s]!==\'1y\')?cO:43.fn;if(!$.5s(1C[s])){F}q[s]=1C[s]();E 6l=q.cN(q[s]);E 2o=6l.12;2C(E z=0;z<2o;z++){q[s][6l[z]]=q[s][6l[z]].9T(q)}if($.5s(q[s].3N)){q[s].3N()}},q))},it:C(){if(!q.L.1P(\'4g\'))F;52{1k.47(\'nw\',O,O);1k.47(\'ny\',O,O)}4U(e){}},ii:C(){if(!q.L.1P(\'2F\'))F;1k.47("nf",O,O)}}},1u:C(){F{2r:C(2i,2T){E $1u=$(\'<a 2j="#" 1G="3I-8f 3I-\'+2i+\'" 3X="\'+2i+\'" />\').1c({\'9D\':\'1u\',\'4Q-2M\':2T.1J,\'6H\':\'-1\'});if(2T.1C||2T.4x||2T.1o){q.1u.ih($1u,2i,2T)}if(2T.1o){$1u.2f(\'I-1B-V-1o\').1c(\'4Q-i9\',1r);E $1o=$(\'<1j 1G="I-1o I-1o-\'+q.2G+\' I-1o-2N-\'+2i+\'" 1p="72: 5z;">\');$1u.1f(\'1o\',$1o);q.1o.2r(2i,$1o,2T.1o)}if(q.L.7n()){q.1u.i3($1u,2i,2T.1J)}F $1u},ih:C($1u,2i,2T){$1u.on(\'5B 2A\',$.1e(C(e){if($1u.3r(\'I-1u-7c\'))F O;E 1m=\'1C\';E 2y=2T.1C;if(2T.4x){1m=\'4x\';2y=2T.4x}M if(2T.1o){1m=\'1o\';2y=O}q.1u.9X(e,2i,1m,2y)},q))},i3:C($1u,1x,1J){E $3n=$(\'<1i>\').2f(\'I-1B-3n I-1B-3n-\'+q.2G+\' I-1B-3n-\'+1x).3p().B(1J);$3n.ax(\'3c\');$1u.on(\'a8\',C(){if($(q).3r(\'I-1u-7c\'))F;E 3x=$1u.2D();$3n.2O();$3n.1O({2X:(3x.2X+$1u.6b())+\'px\',2c:(3x.2c+$1u.7t()/2-$3n.7t()/2)+\'px\'})});$1u.on(\'a9\',C(){$3n.3p()})},9X:C(e,2i,1m,2y){q.1u.n0=q.1T.an();e.2t();$(1k).1h(\'.I-1B-3n\').3p();if(q.L.1P(\'2F\'))e.8s=O;if(1m==\'4x\')q.25.31(2y);M if(1m==\'1o\')q.1o.2O(e,2i);M q.1u.i4(e,2y,2i)},i4:C(e,2y,2i){E 1C;if($.5s(2y))2y.5Z(q,2i);M if(2y.3L(/\\./)!=\'-1\'){1C=2y.4p(\'.\');if(1s q[1C[0]]==\'1y\')F;q[1C[0]][1C[1]](2i)}M q[2y](2i);q.1R.4k(e,2i)},1b:C(1l){F q.$1B.1h(\'a.3I-\'+1l)},8j:C(1l){q.1u.1b(1l).2f(\'I-8K\')},gD:C(1l){q.1u.1b(1l).2U(\'I-8K\')},bV:C(1l){if(1s 1l===\'1y\'){q.$1B.1h(\'a.3I-8f\').2U(\'I-8K\')}M{q.$1B.1h(\'a.3I-8f\').6q(\'.3I-\'+1l).2U(\'I-8K\')}},gI:C(){q.$1B.1h(\'a.3I-8f\').6q(\'a.3I-B, a.3I-i2\').2U(\'I-1u-7c\')},gc:C(){q.$1B.1h(\'a.3I-8f\').6q(\'a.3I-B, a.3I-i2\').2f(\'I-1u-7c\')},mS:C(1l,aP){q.1u.1b(1l).2f(\'3I-\'+aP)},mT:C(1l,aP){q.1u.1b(1l).2U(\'3I-\'+aP)},m1:C(1l,1x){E $1u=q.1u.1b(1l);$1u.2U(\'I-23-N\').2f(\'fa-I-23\');$1u.B(\'<i 1G="fa \'+1x+\'"></i>\')},cL:C($23,2y){if($23=="28")F;E 1m=(2y==\'1o\')?\'1o\':\'1C\';E 1l=$23.1c(\'3X\');$23.on(\'5B 2A\',$.1e(C(e){if($23.3r(\'I-1u-7c\'))F O;q.1u.9X(e,1l,1m,2y)},q))},dn:C($23,1o){$23.2f(\'I-1B-V-1o\').1c(\'4Q-i9\',1r);E 1l=$23.1c(\'3X\');q.1u.cL($23,\'1o\');E $1o=$(\'<1j 1G="I-1o I-1o-\'+q.2G+\' I-1o-2N-\'+1l+\'" 1p="72: 5z;">\');$23.1f(\'1o\',$1o);if(1o)q.1o.2r(1l,$1o,1o);F $1o},bZ:C(1l,1J){if(!q.G.1B)F;if(q.1u.8J(1l))F"28";E 23=q.1u.2r(1l,{1J:1J});23.2f(\'I-23-N\');q.$1B.1F($(\'<li>\').1F(23));F 23},nc:C(1l,1J){if(!q.G.1B)F;if(q.1u.8J(1l))F"28";E 23=q.1u.2r(1l,{1J:1J});23.2f(\'I-23-N\');q.$1B.6u($(\'<li>\').1F(23));F 23},na:C(ho,1l,1J){if(!q.G.1B)F;if(q.1u.8J(1l))F"28";E 23=q.1u.2r(1l,{1J:1J});23.2f(\'I-23-N\');E $23=q.1u.1b(ho);if($23.12!==0)$23.1q().3C($(\'<li>\').1F(23));M q.$1B.1F($(\'<li>\').1F(23));F 23},n5:C(gA,1l,1J){if(!q.G.1B)F;if(q.1u.8J(1l))F"28";E 23=q.1u.2r(1l,{1J:1J});23.2f(\'I-23-N\');E $23=q.1u.1b(gA);if($23.12!==0)$23.1q().bi($(\'<li>\').1F(23));M q.$1B.1F($(\'<li>\').1F(23));F 23},1t:C(1l){q.1u.1b(1l).1t()},8J:C(1l){F(1l=="9v"||1l=="bG")&&!q.L.7n()}}},1T:C(){F{2Q:C(Q){if(!q.L.6J(Q)){E 3h=q.L.aN();$(Q).6u(3h);q.1T.3J(3h)}M{q.1T.1U(Q,0,Q,0)}},3J:C(Q){Q=Q[0]||Q;if(Q.gz.bH==1){F q.1T.55(Q.gz)}q.1T.1U(Q,1,Q,1)},1U:C(4O,gv,7o,gw){4O=4O[0]||4O;7o=7o[0]||7o;if(q.L.7L(4O.1n)&&4O.3A===\'\'){4O.3A=q.G.5R}if(4O.1n==\'5l\'&&q.G.1K===O){E 1q=$(q.G.6s)[0];$(4O).2u(1q);4O=1q;7o=4O}q.J.1b();52{q.14.2Q(4O,gv);q.14.3J(7o,gw)}4U(e){}q.J.4b()},55:C(Q){52{E Y=$(Q)[0].1n;if(Y!=\'5l\'&&!q.L.6J(Q)){E 3h=q.L.aN();$(Q).3C(3h);q.1T.3J(3h)}M{if(Y!=\'5l\'&&q.L.1P(\'2F\')){q.1T.2Q($(Q).1N())}M{q.1T.db(Q,\'3C\')}}}4U(e){E 3h=q.L.aN();$(Q).3C(3h);q.1T.3J(3h)}},cd:C(Q){if(q.L.6J(Q)){q.1T.3J($(Q).4D())}M{q.1T.db(Q,\'bi\')}},db:C(Q,1m){if(!q.L.1P(\'2F\'))q.$T.2m();Q=Q[0]||Q;q.J.1b();if(1m==\'3C\'){52{q.14.9p(Q);q.14.l6(Q)}4U(e){}}M{52{q.14.l4(Q);q.14.jL(Q)}4U(e){}}q.14.48(O);q.J.4b()},8D:C(Q){Q=Q[0]||Q;q.J.1b();E aQ=q.14.7I();aQ.95(Q);aQ.3J(q.14.cG,q.14.d8);F $.3k(aQ.4s()).12},an:C(){E 2D=0;E 2V=3l.4E();if(2V.7b>0){E 14=3l.4E().6f(0);E aH=14.7I();aH.95(q.$T[0]);aH.3J(14.cG,14.d8);2D=aH.4s().12}F 2D},dC:C(2b,2g){if(1s 2g==\'1y\')2g=2b;if(!q.2m.cp())q.2m.2Q();E 2V=q.J.1b();E Q,2D=0;E ge=1k.ll(q.$T[0],ln.kX,4d,4d);53(Q==ge.kV()){2D+=Q.6o.12;if(2D>2b){q.14.2Q(Q,Q.6o.12+2b-2D);2b=l1}if(2D>=2g){q.14.3J(Q,Q.6o.12+2g-2D);6k}}q.14.48(O);q.J.4b()},l7:C(2b,2g){q.1T.dC(2b,2g)},kW:C(){F q.1T.an()}}},1v:C(){F{go:C(B){B=q.1v.h7(B);B=B.K(/<3V(.*?[^>]?)>([\\w\\W]*?)<\\/3V>/gi,\'<2H 1G="I-3V-Y" 1p="72: 5z;" $1>$2</2H>\');B=B.K(/\\$/g,\'&#36;\');B=B.K(/<a 2j="(.*?[^>]?)(.*?[^>]?)">/gi,\'<a 2j="$1&lh$2">\');if(q.G.6r&&!q.G.1K)B=q.1v.6r(B);if(q.G.1K)B=q.1v.9q(B);B=q.1v.c0(B);E $1j=$(\'<1j>\');$1j.B(B);E d6=$1j.1h(\'3P[1p]\');if(d6.12!==0){d6.2u(C(){E $el=$(q);E $1i=$(\'<1i>\').1c(\'1p\',$el.1c(\'1p\'));F $1i.1F($el.2a())});B=$1j.B()}$1j.1t();B=B.K(/<3P(.*?)>/gi,\'\');B=B.K(/<\\/3P>/gi,\'\');B=q.1I.2K(B);if(q.G.2W)B=q.2W.2K(B);B=q.1v.7Q(B);B=q.1v.c1(B);B=B.K(/&9F;/g,\'&\');F B},9Y:C(B){B=B.K(/\\5X/g,\'\');B=B.K(/&#aZ;/gi,\'\');if(q.G.gq){B=B.K(/&5i;/gi,\' \')}if(B.3L(/^<p>(||\\s||<br\\s?\\/?>||&5i;)<\\/p>$/i)!=-1){F\'\'}B=B.K(/<2H 1G="I-3V-Y" 1p="72: 5z;"(.*?[^>]?)>([\\w\\W]*?)<\\/2H>/gi,\'<3V$1>$2</3V>\');B=q.1v.gm(B);E gL={\'\\lP\':\'&lQ;\',\'\\lN\':\'&lJ;\',\'\\lK\':\'&lL;\',\'\\lS\':\'&lY;\',\'\\lX\':\'&lW;\'};$.1z(gL,C(i,s){B=B.K(29 2l(i,\'g\'),s)});if(q.L.1P(\'4g\')){B=B.K(/<br\\s?\\/?>$/gi,\'\')}B=B.K(29 2l(\'<br\\\\s?/?></li>\',\'gi\'),\'</li>\');B=B.K(29 2l(\'</li><br\\\\s?/?>\',\'gi\'),\'</li>\');B=B.K(/<(.*?)3X="\\s*?"(.*?[^>]?)>/gi,\'<$1$2">\');B=B.K(/<(.*?)1p="\\s*?"(.*?[^>]?)>/gi,\'<$1$2">\');B=B.K(/="">/gi,\'>\');B=B.K(/""">/gi,\'">\');B=B.K(/"">/gi,\'">\');B=B.K(/<1j(.*?)1f-9z="I"(.*?[^>])>/gi,\'<1j$1$2>\');B=B.K(/<(.*?) 1f-3K="I"(.*?[^>])>/gi,\'<$1$2>\');E $1j=$("<1j/>").B($.ei(B,1k,1r));$1j.1h("1i").1L("3X");$1j.1h(\'2H .I-7H-3h\').1z(C(){$(q).2a().44()});B=$1j.B();B=B.K(/<1M(.*?[^>])3X="(.*?[^>])"(.*?[^>])>/gi,\'<1M$1$3>\');B=B.K(/<1i 1G="I-7H-3h">(.*?)<\\/1i>/gi,\'$1\');B=B.K(/ 1f-3m-2h="(.*?[^>])"/gi,\'\');B=B.K(/<1i(.*?)id="I-N-2N"(.*?[^>])>([\\w\\W]*?)<1M(.*?)><\\/1i>/gi,\'$3<1M$4>\');B=B.K(/<1i(.*?)id="I-N-9g"(.*?[^>])>(.*?)<\\/1i>/gi,\'\');B=B.K(/<1i(.*?)id="I-N-5D"(.*?[^>])>(.*?)<\\/1i>/gi,\'\');B=B.K(/<3P(.*?)>/gi,\'\');B=B.K(/<\\/3P>/gi,\'\');B=q.1I.2K(B);if(q.G.hd){B=B.K(/<a(.*?)3X="hb"(.*?[^>])>/gi,\'<a$1$2>\');B=B.K(/<a(.*?[^>])>/gi,\'<a$1 3X="hb">\')}B=B.K(/\\lU-I-(Y|1G|1p)="(.*?[^>])"/gi,\'\');B=B.K(29 2l(\'<(.*?) 1f-3K="I"(.*?[^>])>\',\'gi\'),\'<$1$2>\');B=B.K(29 2l(\'<(.*?) 1f-3K="I">\',\'gi\'),\'<$1>\');B=B.K(/&9F;/g,\'&\');F B},8B:C(B,9b){B=$.3k(B);B=B.K(/\\$/g,\'&#36;\');B=B.K(/<1i 1G="s[0-9]">/gi,\'<1i>\');B=B.K(/<1i 1G="ha-lV-3h">&5i;<\\/1i>/gi,\' \');B=B.K(/<1i 1G="ha-5C-1i"[^>]*>\\t<\\/1i>/gi,\'\\t\');B=B.K(/<1i[^>]*>(\\s|&5i;)<\\/1i>/gi,\' \');if(q.G.hg){F q.1v.aC(B)}if(!q.L.8m()&&1s 9b==\'1y\'){if(q.L.4Z([\'hm\',\'A\'])){F q.1v.aC(B,O)}if(q.L.4Z(\'8P\')){B=B.K(//g,\'"\');B=B.K(//g,\'"\');B=B.K(//g,\'\\\'\');B=B.K(//g,\'\\\'\');F q.1v.hl(B)}if(q.L.4Z([\'bd\',\'ec\',\'e9\',\'e3\',\'ef\',\'eg\',\'ee\'])){B=q.1v.hf(B);if(!q.L.1P(\'2F\')){E R=q.J.4a();if(R&&R.1n==\'P\'){B=B.K(/<1M(.*?)>/gi,\'<p><1M$1></p>\')}}F B}if(q.L.4Z([\'6w\'])){B=q.1v.aI(B,\'2Z\');if(q.G.1K)B=q.1v.9q(B);B=q.1v.gn(B);F B}if(q.L.4Z([\'5y\'])){F q.1v.aI(B,\'li\')}}B=q.1v.gM(B,9b);if(!q.1v.9l){if(q.G.1K)B=q.1v.9q(B);if(q.G.6r)B=q.1v.6r(B);B=q.1v.c0(B)}B=q.1v.hk(B);B=q.1v.gV(B);B=q.1v.aI(B,\'h0\');if(!q.1v.9l&&q.G.2W){B=q.2W.2K(B)}B=q.1v.he(B);B=q.1v.gO(B);B=q.1v.gT(B);B=q.1v.c1(B);F B},hk:C(B){B=B.K(/<!--[\\s\\S]*?-->/gi,\'\');B=B.K(/<1p[^>]*>[\\s\\S]*?<\\/1p>/gi,\'\');B=B.K(/<o\\:p[^>]*>[\\s\\S]*?<\\/o\\:p>/gi,\'\');if(B.1V(/1G="?gY|1p="[^"]*\\hj-|1p=\'[^\'\']*\\hj-|w:lH/i)){B=B.K(/<!--[\\s\\S]+?-->/gi,\'\');B=B.K(/<(!|3V[^>]*>.*?<\\/3V(?=[>\\s])|\\/?(\\?lx(:\\w+)?|1M|5k|V|1p|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\'\');B=B.K(/<(\\/?)s>/gi,"<$lp>");B=B.K(/ /gi,\' \');B=B.K(/<1i\\s+1p\\s*=\\s*"\\s*aL-lq\\s*:\\s*lr\\s*;?\\s*"\\s*>([\\s\\bg]*)<\\/1i>/gi,C(5h,bc){F(bc.12>0)?bc.K(/./," ").de(8p.ly(bc.12/2)).4p("").3d("\\bg"):\'\'});B=q.1v.gN(B);B=B.K(/<1M(.*?)v:lz=(.*?)>/gi,\'\');B=B.K(/4r="22\\:\\/\\/(.*?)"/,\'4r=""\');E $1j=$("<1j/>").B(B);E 5V=O;E 9K=1;E d7=[];$1j.1h("p[1p]").1z(C(){E 3Q=$(q).1c(\'1p\').1V(/aL\\-2e\\:l([0-9]+)\\lF([0-9]+)/);if(3Q){E 64=5J(3Q[1]);E 5U=5J(3Q[2]);E da=$(q).B().1V(/^[\\w]+\\./)?"ol":"3s";E $li=$("<li/>").B($(q).B());$li.B($li.B().K(/^([\\w\\.]+)</,\'<\'));$li.1h("1i:3H").1t();if(5U==1&&$.3q(64,d7)==-1){E $2e=$("<"+da+"/>").1c({"1f-7s":5U,"1f-2e":64}).B($li);$(q).2u($2e);5V=64;d7.2R(64)}M{if(5U>9K){E $b1=$1j.1h(\'[1f-7s="\'+9K+\'"][1f-2e="\'+5V+\'"]\');E $5V=$b1;2C(E i=9K;i<5U;i++){$2e=$("<"+da+"/>");$2e.ax($5V.1h("li").30());$5V=$2e}$5V.1c({"1f-7s":5U,"1f-2e":64}).B($li)}M{E $b1=$1j.1h(\'[1f-7s="\'+5U+\'"][1f-2e="\'+64+\'"]\').30();$b1.1F($li)}9K=5U;5V=64;$(q).1t()}}});$1j.1h(\'[1f-7s][1f-2e]\').1L(\'1f-7s 1f-2e\');B=$1j.B();B=B.K(//g,\'\');B=B.K(/<p 1G="gY(.*?)"/gi,\'<p\');B=B.K(/ 1G=\\"(aL[^\\"]*)\\"/gi,"");B=B.K(/ 1G=(aL\\w+)/gi,"");B=B.K(/<o:p(.*?)>([\\w\\W]*?)<\\/o:p>/gi,\'$2\');B=B.K(/\\n/g,\' \');B=B.K(/<p>\\n?<li>/gi,\'<li>\')}F B},gV:C(B){B=B.K(/<b\\lB="gW-4B-2s(.*?)">([\\w\\W]*?)<\\/b>/gi,"$2");B=B.K(/<b(.*?)id="lw-gW-nL(.*?)">([\\w\\W]*?)<\\/b>/gi,"$3");B=B.K(/<1i[^>]*(3P-1p: 4m; 3P-7z: 4n|3P-7z: 4n; 3P-1p: 4m)[^>]*>/gi,\'<1i 1p="3P-7z: 4n;"><1i 1p="3P-1p: 4m;">\');B=B.K(/<1i[^>]*3P-1p: 4m[^>]*>/gi,\'<1i 1p="3P-1p: 4m;">\');B=B.K(/<1i[^>]*3P-7z: 4n[^>]*>/gi,\'<1i 1p="3P-7z: 4n;">\');B=B.K(/<1i[^>]*1g-80: 5p[^>]*>/gi,\'<1i 1p="1g-80: 5p;">\');B=B.K(/<1M>/gi,\'\');B=B.K(/\\n{3,}/gi,\'\\n\');B=B.K(/<3P(.*?)>([\\w\\W]*?)<\\/3P>/gi,\'$2\');B=B.K(/<p><p>/gi,\'<p>\');B=B.K(/<\\/p><\\/p>/gi,\'</p>\');B=B.K(/<li>(\\s*|\\t*|\\n*)<p>/gi,\'<li>\');B=B.K(/<\\/p>(\\s*|\\t*|\\n*)<\\/li>/gi,\'</li>\');B=B.K(/<\\/p>\\s<p/gi,\'<\\/p><p\');B=B.K(/<1M 4r="89-qp-2h\\:\\/\\/(.*?)"(.*?)>/gi,\'\');B=B.K(/<p>([\\w\\W]*?)<\\/p>/gi,\'<li>$1</li>\');if(q.L.1P(\'4g\')){B=B.K(/<br\\s?\\/?>$/gi,\'\')}F B},aI:C(B,1m){E 2d=[\'1i\',\'a\',\'2H\',\'26\',\'9h\',\'em\',\'5e\',\'1d\',\'aO\',\'7O\',\'c4\',\'9u\',\'E\',\'bz\',\'cc\',\'7V\',\'7Z\',\'b\',\'i\',\'u\',\'4l\',\'ol\',\'3s\',\'li\',\'dl\',\'dt\',\'dd\',\'p\',\'br\',\'6E\',\'9C\',\'4R\',\'7g\',\'9I\',\'41\',\'1M\',\'3T\',\'2Z\',\'5S\',\'6S\',\'dJ\',\'dQ\',\'dP\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'];E ca=O;E cb=[[\'a\',\'*\'],[\'1M\',[\'4r\',\'7l\']],[\'1i\',[\'1G\',\'3X\',\'1f-3K\']],[\'4R\',\'*\'],[\'6E\',\'*\'],[\'9C\',\'*\'],[\'7g\',\'*\'],[\'41\',\'*\'],[\'9I\',\'*\'],[\'4B\',\'*\']];if(1m==\'h0\'){ca=[\'p\',\'1i\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\'];cb=[[\'3T\',\'1G\'],[\'2Z\',[\'qM\',\'qE\']],[\'a\',\'*\'],[\'1M\',[\'4r\',\'7l\',\'1f-I-9J-N\']],[\'1i\',[\'1G\',\'3X\',\'1f-3K\']],[\'4R\',\'*\'],[\'6E\',\'*\'],[\'9C\',\'*\'],[\'7g\',\'*\'],[\'41\',\'*\'],[\'9I\',\'*\'],[\'4B\',\'*\']]}M if(1m==\'2Z\'){2d=[\'3s\',\'ol\',\'li\',\'1i\',\'a\',\'9h\',\'em\',\'5e\',\'1d\',\'aO\',\'7O\',\'9u\',\'E\',\'bz\',\'cc\',\'7V\',\'7Z\',\'b\',\'i\',\'u\',\'4l\',\'ol\',\'3s\',\'li\',\'dl\',\'dt\',\'dd\',\'br\',\'4R\',\'6E\',\'9C\',\'7g\',\'9I\',\'41\',\'1M\',\'h1\',\'h2\',\'h3\',\'h4\',\'h5\',\'h6\']}M if(1m==\'li\'){2d=[\'3s\',\'ol\',\'li\',\'1i\',\'a\',\'9h\',\'em\',\'5e\',\'1d\',\'aO\',\'7O\',\'9u\',\'E\',\'bz\',\'cc\',\'7V\',\'7Z\',\'b\',\'i\',\'u\',\'4l\',\'br\',\'4R\',\'6E\',\'9C\',\'7g\',\'9I\',\'41\',\'1M\']}E 3Y={49:(q.G.49)?q.G.49:O,4t:(q.G.4t)?q.G.4t:2d,6C:1r,pG:1r,1L:(q.G.1L)?q.G.1L:O,4T:(q.G.4T)?q.G.4T:cb,3S:ca};F q.1I.2K(B,3Y)},gT:C(B){B=B.K(/<(p|h[1-6])>(|\\s|\\n|\\t|<br\\s?\\/?>)<\\/(p|h[1-6])>/gi,\'\');if(!q.G.1K)B=B.K(/<br>$/i,\'\');F B},gO:C(B){B=B.K(/<1i>(.*?)<\\/1i>/gi,\'$1\');B=B.K(/<1i[^>]*>\\s|&5i;<\\/1i>/gi,\' \');F B},gN:C(B){if(!q.L.1P(\'2F\'))F B;E 5x=$.3k(B);if(5x.3L(/^<a(.*?)>(.*?)<\\/a>$/i)===0){B=B.K(/^<a(.*?)>(.*?)<\\/a>$/i,"$2")}F B},gM:C(B,9b){q.1v.9l=O;if(!q.L.8m()&&1s 9b==\'1y\'){E 1Z=q.G.9a.3d(\'|\').K(\'P|\',\'\').K(\'7p|\',\'\');E gQ=B.1V(29 2l(\'</(\'+1Z+\')>\',\'gi\'));E bk=B.1V(/<\\/(p|1j)>/gi);if(!gQ&&(bk===4d||(bk&&bk.12<=1))){E gR=B.1V(/<br\\s?\\/?>/gi);if(!gR){q.1v.9l=1r;B=B.K(/<\\/?(p|1j)(.*?)>/gi,\'\')}}}F B},pu:C(3E,5q){5q=(((5q||\'\')+\'\').3f().1V(/<[a-z][a-7E-9]*>/g)||[]).3d(\'\');E 2d=/<\\/?([a-z][a-7E-9]*)\\b[^>]*>/gi;F 3E.K(2d,C($0,$1){F 5q.4I(\'<\'+$1.3f()+\'>\')>-1?$0:\'\'})},h7:C(B){B=q.1v.h8(B);B=q.1v.hi(B);B=q.1v.hh(B);F B},h8:C(B){E 2H=B.1V(/<2H(.*?)>([\\w\\W]*?)<\\/2H>/gi);if(2H!==4d){$.1z(2H,$.1e(C(i,s){E 2B=s.1V(/<2H(.*?)>([\\w\\W]*?)<\\/2H>/i);2B[2]=2B[2].K(/<br\\s?\\/?>/g,\'\\n\');2B[2]=2B[2].K(/&5i;/g,\' \');if(q.G.6T){2B[2]=2B[2].K(/\\t/g,9i(q.G.6T+1).3d(\' \'))}2B[2]=q.1v.bj(2B[2]);2B[2]=2B[2].K(/\\$/g,\'&#36;\');B=B.K(s,\'<2H\'+2B[1]+\'>\'+2B[2]+\'</2H>\')},q))}F B},hi:C(B){E 1d=B.1V(/<1d(.*?)>([\\w\\W]*?)<\\/1d>/gi);if(1d!==4d){$.1z(1d,$.1e(C(i,s){E 2B=s.1V(/<1d(.*?)>([\\w\\W]*?)<\\/1d>/i);2B[2]=2B[2].K(/&5i;/g,\' \');2B[2]=q.1v.bj(2B[2]);2B[2]=2B[2].K(/\\$/g,\'&#36;\');B=B.K(s,\'<1d\'+2B[1]+\'>\'+2B[2]+\'</1d>\')},q))}F B},hh:C(B){B=B.K(/&lt;1i id=&63;J-2s-([0-9])&63; 1G=&63;I-J-2s&63; 1f-3K=&63;I&63;&gt;&lt;\\/1i&gt;/g,\'<1i id="J-2s-$1" 1G="I-J-2s" 1f-3K="I"></1i>\');F B},cf:C(B){B=B.K(/<br\\s?\\/?>|<\\/H[1-6]>|<\\/p>|<\\/1j>|<\\/li>|<\\/2Z>/gi,\'\\n\');E 5x=1k.3y(\'1j\');5x.3A=B;B=5x.pr||5x.pz;F $.3k(B)},aC:C(B,2W){B=q.1v.cf(B);B=B.K(/\\n/g,\'<br />\');if(q.G.2W&&1s 2W==\'1y\'&&!q.L.1P(\'4g\')){B=q.2W.2K(B)}F B},hl:C(B){B=B.K(/<1M(.*?) 1p="(.*?)"(.*?[^>])>/gi,\'<1M$1$3>\');B=B.K(/<1M(.*?)>/gi,\'&lt;1M$1&gt;\');B=q.1v.cf(B);if(q.G.6T){B=B.K(/\\t/g,9i(q.G.6T+1).3d(\' \'))}B=q.1v.bj(B);F B},hf:C(B){B=B.K(/<1M(.*?)>/gi,\'[1M$1]\');B=B.K(/<([qc]*?)>/gi,\'\');B=B.K(/\\[1M(.*?)\\]/gi,\'<1M$1>\');F B},pW:C(B){B=B.K(/<a(.*?)2j="(.*?)"(.*?)>([\\w\\W]*?)<\\/a>/gi,\'[a 2j="$2"]$4[/a]\');B=B.K(/<1M(.*?)>/gi,\'[1M$1]\');B=B.K(/<(.*?)>/gi,\'\');B=B.K(/\\[a 2j="(.*?)"\\]([\\w\\W]*?)\\[\\/a\\]/gi,\'<a 2j="$1">$2</a>\');B=B.K(/\\[1M(.*?)\\]/gi,\'<1M$1>\');F B},bj:C(5h){5h=5Y(5h).K(/&9F;/g,\'&\').K(/&lt;/g,\'<\').K(/&gt;/g,\'>\').K(/&63;/g,\'"\');F 5h.K(/&/g,\'&9F;\').K(/</g,\'&lt;\').K(/>/g,\'&gt;\').K(/"/g,\'&63;\')},he:C(B){if(q.L.1P(\'2F\'))F B;E 1j=1k.3y(\'1j\');1j.3A=B;q.1v.c8($(1j));B=1j.3A;$(1j).1t();F B},4y:C(){if(q.L.1P(\'2F\'))F;q.1v.c8(q.$T);E c9=q.$T.1h(\'h1, h2, h3, h4, h5, h6\');c9.1h(\'1i\').1L(\'1p\');c9.1h(q.G.c2.3d(\', \')).1L(\'1p\');q.1d.1S()},c8:C($T){$T.1h(q.G.c2.3d(\', \')).1L(\'1p\');$T.1h(\'1i\').6q(\'[1f-3K="I"]\').1L(\'1p\');$T.1h(\'1i[1f-3K="I"], 1M[1f-3K="I"]\').1z(C(i,s){E $s=$(s);$s.1c(\'1p\',$s.1c(\'3X\'))})},pQ:C(){},7Q:C(B){if(q.L.1P(\'2F\'))F B;B=B.K(29 2l(\'<1M(.*?[^>])>\',\'gi\'),\'<1M$1 1f-3K="I">\');B=B.K(29 2l(\'<1i(.*?[^>])>\',\'gi\'),\'<1i$1 1f-3K="I">\');E 3Q=B.1V(29 2l(\'<(1i|1M)(.*?)1p="(.*?)"(.*?[^>])>\',\'gi\'));if(3Q){E 2o=3Q.12;2C(E i=0;i<2o;i++){52{E gK=3Q[i].K(/1p="(.*?)"/i,\'1p="$1" 3X="$1"\');B=B.K(3Q[i],gK)}4U(e){}}}F B},c1:C(B){E $1j=$(\'<1j />\').B(B);E 2d=q.G.4N;2d.2R(\'1i\');$1j.1h(2d.3d(\',\')).1z(C(){E $el=$(q);E Y=q.1n.3f();$el.1c(\'1f-I-Y\',Y);if(Y==\'1i\'){if($el.1c(\'1p\'))$el.1c(\'1f-I-1p\',$el.1c(\'1p\'));M if($el.1c(\'1G\'))$el.1c(\'1f-I-1G\',$el.1c(\'1G\'))}});B=$1j.B();$1j.1t();F B},ar:C(){q.$T.1h(\'li\').1z(C(i,s){E $1N=$(s).1N();if($1N.12!==0&&($1N[0].1n==\'8y\'||$1N[0].1n==\'8t\')){$(s).1F($1N)}})},cB:C(B){B=B.K(/\\n/g,\'\');B=B.K(/[\\t]*/g,\'\');B=B.K(/\\n\\s*\\n/g,"\\n");B=B.K(/^[\\s\\n]*/g,\' \');B=B.K(/[\\s\\n]*$/g,\' \');B=B.K(/>\\s{2,}</g,\'> <\');B=B.K(/\\n\\n/g,"\\n");B=B.K(/\\5X/g,\'\');F B},6r:C(B){if(q.G.1K){B=B.K(/<1j><br\\s?\\/?><\\/1j>/gi,\'<br />\');B=B.K(/<1j(.*?)>([\\w\\W]*?)<\\/1j>/gi,\'$2<br />\')}M{B=B.K(/<1j(.*?)>([\\w\\W]*?)<\\/1j>/gi,\'<p$1>$2</p>\')}B=B.K(/<1j(.*?[^>])>/gi,\'\');B=B.K(/<\\/1j>/gi,\'\');F B},gn:C(B){B=B.K(/<1j\\s(.*?)>/gi,\'<p>\');B=B.K(/<1j><br\\s?\\/?><\\/1j>/gi,\'<br /><br />\');B=B.K(/<1j>([\\w\\W]*?)<\\/1j>/gi,\'$1<br /><br />\');F B},9q:C(B){B=B.K(/<p\\s(.*?)>/gi,\'<p>\');B=B.K(/<p><br\\s?\\/?><\\/p>/gi,\'<br />\');B=B.K(/<p>([\\w\\W]*?)<\\/p>/gi,\'$1<br /><br />\');B=B.K(/(<br\\s?\\/?>){1,}\\n?<\\/26>/gi,\'</26>\');F B},c0:C(B){F B.K(/<69(.*?)>([\\w\\W]*?)<\\/69>/gi,\'<4h$1 3X="I-69-Y">$2</4h>\')},gm:C(B){F B.K(/<4h(.*?) 3X="I-69-Y"(.*?)>([\\w\\W]*?)<\\/4h>/gi,\'<69$1$2>$3</69>\')}}},1d:C(){F{1U:C(B){B=$.3k(B.4s());B=q.1v.go(B);if(q.L.1P(\'2F\')){B=B.K(/<1i(.*?)id="J-2s-(1|2)"(.*?)><\\/1i>/gi,\'\')}q.$T.B(B);q.1d.1S();if(B!==\'\')q.3e.1t();3u($.1e(q.28.bZ,q),15);if(q.2b===O)q.1R.2K()},1b:C(){E 1d=q.$2v.2J();if(q.G.6r)1d=q.1v.6r(1d);if(q.G.1K)1d=q.1v.9q(1d);1d=q.2I.1b(1d);F 1d},1S:C(){3u($.1e(q.1d.gp,q),10)},gp:C(){E B=q.$T.B();if(q.1d.c5&&q.1d.c5==B){F}q.1d.c5=B;B=q.1W.2q(\'q9\',B);B=q.1v.9Y(B);q.$2v.2J(B);q.1W.2q(\'1S\',B);if(q.2b===O){q.1W.2q(\'iz\',B)}q.2b=O;if(q.3o.B==O){q.3o.B=q.1d.1b()}if(q.G.8l){q.$2v.1N(\'.3D\').1z(C(i,el){el.3D.gk(B)})}q.3o.gr();q.3o.a7()},3j:C(){if(q.G.6e){q.1d.ck()}M{q.1d.gf()}},ck:C(){q.J.3m();q.1d.2D=q.1T.an();E 6m=$(3l).3U();E 2L=q.$T.7t(),3i=q.$T.6b();q.$T.3p();E B=q.$2v.2J();q.gE=q.1v.cB(B);B=q.2I.1b(B);E 2b=0,2g=0;E $6Y=$("<1j/>").1F($.ei(q.1v.9Y(q.$T.B()),1k,1r));E $aj=$6Y.1h("1i.I-J-2s");if($aj.12>0){E al=q.2I.1b($6Y.B()).K(/&9F;/g,\'&\');if($aj.12==1){2b=q.L.bh(al,$6Y.1h("#J-2s-1").6a("7T"));2g=2b}M if($aj.12==2){2b=q.L.bh(al,$6Y.1h("#J-2s-1").6a("7T"));2g=q.L.bh(al,$6Y.1h("#J-2s-2").6a("7T"))-$6Y.1h("#J-2s-1").6a("7T").4s().12}}q.J.8O();q.$2v.2J(B);if(q.G.8l){q.$2v.1N(\'.3D\').1z(C(i,el){$(el).2O();el.3D.gk(B);el.3D.q4(\'6G%\',3i);el.3D.q5();if(2b==2g){el.3D.pP(el.3D.7M(2b).3M,el.3D.7M(2g).ch)}M{el.3D.pO({3M:el.3D.7M(2b).3M,ch:el.3D.7M(2b).ch},{3M:el.3D.7M(2g).3M,ch:el.3D.7M(2g).ch})}el.3D.2m()})}M{q.$2v.3i(3i).2O().2m();q.$2v.on(\'1D.I-2v-gJ\',q.1d.gC);$(3l).3U(6m);if(q.$2v[0].gd){q.$2v[0].gd(2b,2g)}q.$2v[0].3U=0}q.G.6e=O;q.1u.gc();q.1u.8j(\'B\');q.1W.2q(\'4B\',B)},gf:C(){E B;if(q.G.6e)F;E 2b=0,2g=0;if(q.G.8l){E J;q.$2v.1N(\'.3D\').1z(C(i,el){J=el.3D.pA();2b=el.3D.gj(J[0].gg);2g=el.3D.gj(J[0].dO);B=el.3D.pB()})}M{2b=q.$2v.1b(0).cv;2g=q.$2v.1b(0).co;B=q.$2v.3p().2J()}if(2b>2g&&2g>0){E gs=2g;E gu=2b;2b=gs;2g=gu}2b=q.1d.cn(B,2b);2g=q.1d.cn(B,2g);B=B.4q(0,2b)+q.J.5f(1)+B.4q(2b);if(2g>2b){E cx=q.J.5f(1).4s().12;B=B.4q(0,2g+cx)+q.J.5f(2)+B.4q(2g+cx)}if(q.gE!==q.1v.cB(B)){q.1d.1U(B)}if(q.G.8l){q.$2v.1N(\'.3D\').3p()}q.$T.2O();if(!q.L.3z(B)){q.3e.1t()}q.J.3g();q.$2v.2Y(\'1D.I-2v-gJ\');q.1u.gI();q.1u.gD(\'B\');q.1R.2K();q.G.6e=1r;q.1W.2q(\'6e\',B)},gC:C(e){if(e.3t!==9)F 1r;E $el=q.$2v;E 2b=$el.1b(0).cv;$el.2J($el.2J().aV(0,2b)+"\\t"+$el.2J().aV($el.1b(0).co));$el.1b(0).cv=$el.1b(0).co=2b+1;F O},cn:C(B,2D){E cs=B.12;E c=0;if(B[2D]==\'>\'){c++}M{2C(E i=2D;i<=cs;i++){c++;if(B[i]==\'>\'){6k}M if(B[i]==\'<\'||i==cs){c=0;6k}}}F 2D+c}}},1W:C(){F{pC:C(){F $.7w({},q)},pD:C(){F q.$T},pL:C(){F q.$2N},pM:C(){F q.$2k},pN:C(){F q.$2v},pJ:C(){F(q.$1B)?q.$1B:O},9k:C(1x){q.1W.8c=1x},76:C(){F q.1W.8c},2q:C(1m,e,1f){E ah=1m+\'pI\';E ia=\'I\';E 2y=q.G[ah];if(q.$2v){E 8s=O;E 8r=$.pE(q.$2v[0],\'8r\');if(1s 8r!=\'1y\'&&1s 8r[ah]!=\'1y\'){$.1z(8r[ah],$.1e(C(1l,1E){if(1E[\'qI\']==ia){E 1f=(1s 1f==\'1y\')?[e]:[e,1f];8s=(1s 1f==\'1y\')?1E.7W.5Z(q,e):1E.7W.5Z(q,e,1f)}},q))}if(8s)F 8s}if($.5s(2y)){F(1s 1f==\'1y\')?2y.5Z(q,e):2y.5Z(q,e,1f)}M{F(1s 1f==\'1y\')?e:1f}},ib:C(){q.G.je=1r;q.1W.2q(\'ib\');q.$2k.2Y(\'.I\').i6(\'I\');q.$T.2Y(\'.I\');$(1k).2Y(\'68.I-ct.\'+q.2G);$(1k).2Y(\'68.I.\'+q.2G);$(1k).2Y(\'2A.I-N-75.\'+q.2G);$(1k).2Y(\'2A.I-N-4M-3p.\'+q.2G);$(1k).2Y(\'5B.I.\'+q.2G+\' 2A.I.\'+q.2G);$("3c").2Y(\'6m.I.\'+q.2G);$(q.G.6B).2Y(\'6m.I.\'+q.2G);q.$T.2U(\'I-T I-1K I-3e\');q.$T.1L(\'5c\');E B=q.1d.1b();if(q.G.1B){q.$1B.1h(\'a\').1z(C(){E $el=$(q);if($el.1f(\'1o\')){$el.1f(\'1o\').1t();$el.1f(\'1o\',{})}})}if(q.2r.ay()){q.$2N.3C(q.$2k);q.$2N.1t();q.$2k.2J(B).2O()}M{q.$2N.3C(q.$T);q.$2N.1t();q.$2k.B(B).2O()}if(q.$5b)q.$5b.1t();if(q.$4C)q.$4C.1t();if(q.$81)q.$81.1t();$(\'.I-1B-3n-\'+q.2G).1t();i0(q.8M)}}},1o:C(){F{2r:C(1x,$1o,cr){if(1x==\'3b\'&&q.G.cu){$.1z(q.G.cu,$.1e(C(i,s){E 1x=s.Y,1C;if(1s s[\'1G\']!=\'1y\'){1x=1x+\'-\'+s[\'1G\']}s.1m=(q.L.7L(s.Y))?\'R\':\'25\';if(1s s.1C!=="1y"){1C=s.1C}M{1C=(s.1m==\'25\')?\'25.3b\':\'R.3b\'}if(q.G.1K&&s.1m==\'R\'&&s.Y==\'p\')F;q.3b[1x]={Y:s.Y,1p:s.1p,\'1G\':s[\'1G\'],1c:s.1c,1f:s.1f,9d:s.9d};cr[1x]={1C:1C,1J:s.1J}},q))}$.1z(cr,$.1e(C(2i,2T){E $2w=$(\'<a 2j="#" 1G="I-1o-\'+2i+\'" 9D="1u">\'+2T.1J+\'</a>\');if(1x==\'3b\')$2w.2f(\'I-3b-\'+2i);$2w.on(\'2A\',$.1e(C(e){e.2t();E 1m=\'1C\';E 2y=2T.1C;if(2T.4x){1m=\'4x\';2y=2T.4x}M if(2T.1o){1m=\'1o\';2y=2T.1o}if($(e.1Q).3r(\'I-1o-V-dA\'))F;q.1u.9X(e,2i,1m,2y);q.1o.7d()},q));q.1R.dn($2w,2i,2T);$1o.1F($2w)},q))},2O:C(e,1l){if(!q.G.6e){e.2t();F O}E $1u=q.1u.1b(1l);E $1o=$1u.1f(\'1o\').ax(1k.3c);if(q.G.cH){$1o.2f("I-1o-iI")}if($1u.3r(\'77\')){q.1o.7d()}M{q.1o.7d();q.1R.7r();q.1W.2q(\'qS\',{1o:$1o,1l:1l,1u:$1u});q.1u.8j(1l);$1u.2f(\'77\');E 7h=$1u.2D();E cq=$1o.2L();if((7h.2c+cq)>$(1k).2L()){7h.2c=8p.qR(0,7h.2c-cq)}E 2c=7h.2c+\'px\';if(q.$1B.3r(\'1B-7Y-2N\')){E 2X=q.$1B.6b()+q.G.6z;E 4e=\'7Y\';if(q.G.6B!==1k){2X=(q.$1B.6b()+q.$1B.2D().2X)+q.G.6z;4e=\'9x\'}$1o.1O({4e:4e,2c:2c,2X:2X+\'px\'}).2O()}M{E 2X=($1u.6b()+7h.2X)+\'px\';$1o.1O({4e:\'9x\',2c:2c,2X:2X}).2O()}q.1W.2q(\'qO\',{1o:$1o,1l:1l,1u:$1u});q.$1o=$1o}$(1k).cm(\'2A.I-1o\',$.1e(q.1o.3p,q));q.$T.cm(\'2A.I-1o\',$.1e(q.1o.3p,q));$(1k).cm(\'2x.I-1o\',$.1e(q.1o.8T,q));$1o.on(\'a8.I-1o\',$.1e(q.L.dH,q)).on(\'a9.I-1o\',$.1e(q.L.aK,q));e.kN()},8T:C(e){if(e.7m!=q.3t.am)F;q.1o.7d();q.$T.2m()},7d:C(){q.$1B.1h(\'a.77\').2U(\'I-8K\').2U(\'77\');q.L.aK();$(\'.I-1o-\'+q.2G).3p();$(\'.I-1o-V-iu\').2U(\'I-1o-V-iu\');if(q.$1o){q.$1o.2Y(\'.I-1o\');q.1W.2q(\'qk\',q.$1o);q.$1o=O}},3p:C(e){E $1o=$(e.1Q);if(!$1o.3r(\'77\')&&!$1o.3r(\'I-1o-V-dA\')){$1o.2U(\'77\');$1o.2Y(\'a8 a9\');q.1o.7d()}}}},22:C(){F{2O:C(){q.1a.2K(\'22\',q.1H.1b(\'22\'),iy);q.1w.3N(\'#I-1a-22-1w\',q.G.7D,q.22.1Y);q.J.3m();q.J.1b();E 1g=q.2V.4s();$(\'#I-6h\').2J(1g);q.1a.2O()},1Y:C(2P,4V,e){if(1s 2P.6X!=\'1y\'){q.1a.4j();q.J.3g();q.1W.2q(\'qj\',2P);F}E V;if(1s 2P==\'6W\'){V=2P}M{E 1g=$(\'#I-6h\').2J();if(1s 1g==\'1y\'||1g===\'\')1g=2P.6h;V=\'<a 2j="\'+2P.9t+\'" id="9t-2s">\'+1g+\'</a>\'}if(4V){q.J.8O();E 2s=q.J.6Q();q.1Y.c3(e,2s)}M{q.1a.4j()}q.J.3g();q.28.1U();q.1Y.eA(V);if(1s 2P==\'6W\')F;E 8X=$(q.$T.1h(\'a#9t-2s\'));if(8X.12!==0){8X.1L(\'id\').1L(\'1p\')}M 8X=O;q.1W.2q(\'7D\',8X,2P)}}},2m:C(){F{2Q:C(){q.$T.2m();E 3H=q.$T.3O().3H();if(3H.12===0)F;if(3H[0].12===0||3H[0].1n==\'5l\'||3H[0].bH==3){F}if(3H[0].1n==\'8y\'||3H[0].1n==\'8t\'){E 4A=3H.1h(\'li\').3H();if(!q.L.6J(4A)&&4A.1g()===\'\'){q.1T.2Q(4A);F}}if(q.G.1K&&!q.L.7L(3H[0].1n)){q.J.1b();q.14.2Q(q.$T[0],0);q.14.3J(q.$T[0],0);q.J.4b();F}q.1T.2Q(3H)},3J:C(){E 30=q.$T.3O().30();q.$T.2m();if(30.82()===0)F;if(q.L.3z(q.$T.B())){q.J.1b();q.14.48(1r);q.14.9p(30[0]);q.14.3J(30[0],0);q.J.4b()}M{q.J.1b();q.14.95(30[0]);q.14.48(O);q.J.4b()}},cp:C(){E 93=1k.4E().93;if(93===4d)F O;if(q.G.1K&&$(93.e8).3r(\'I-1K\'))F 1r;M if(!q.L.4v(93.e8))F O;F q.$T.is(\':2m\')}}},N:C(){F{2O:C(){q.1a.2K(\'N\',q.1H.1b(\'N\'),iy);q.1w.3N(\'#I-1a-N-4c\',q.G.7J,q.N.1Y);q.J.3m();q.1a.2O()},hK:C($N){E $V=$N.2p(\'a\',q.$T[0]);q.1a.2K(\'j8\',q.1H.1b(\'7e\'),qf);q.1a.cI();q.N.iq=q.1a.iS(q.1H.1b(\'ir\'));q.N.ik=q.1a.cJ(q.1H.1b(\'3m\'));q.N.iq.on(\'2A\',$.1e(C(){q.N.1t($N)},q));q.N.ik.on(\'2A\',$.1e(C(){q.N.hA($N)},q));$(\'.I-V-3n\').1t();$(\'#I-N-1J\').2J($N.1c(\'7l\'));if(!q.G.ij)$(\'.I-N-V-3Z\').3p();M{E $cw=$(\'#I-N-V\');$cw.1c(\'2j\',$N.1c(\'4r\'));if($V.12!==0){$cw.2J($V.1c(\'2j\'));if($V.1c(\'1Q\')==\'7v\')$(\'#I-N-V-8a\').6a(\'bC\',1r)}}if(!q.G.im)$(\'.I-N-4e-3Z\').3p();M{E ip=($N.1O(\'72\')==\'R\'&&$N.1O(\'7K\')==\'5z\')?\'5E\':$N.1O(\'7K\');$(\'#I-N-5a\').2J(ip)}q.1a.2O();$(\'#I-N-1J\').2m()},hz:C($N){E io=$(\'#I-N-5a\').2J();E b4=\'\';E cC=\'\';E 9G=\'\';fe(io){9o\'2c\':b4=\'2c\';9G=\'0 \'+q.G.8o+\' \'+q.G.8o+\' 0\';6k;9o\'4z\':b4=\'4z\';9G=\'0 0 \'+q.G.8o+\' \'+q.G.8o;6k;9o\'5E\':cC=\'R\';9G=\'ad\';6k}$N.1O({\'7K\':b4,72:cC,4G:9G});$N.1c(\'3X\',$N.1c(\'1p\'))},hA:C($N){q.N.7u();q.28.1U();E $V=$N.2p(\'a\',q.$T[0]);E 1J=$(\'#I-N-1J\').2J().K(/(<([^>]+)>)/ig,"");$N.1c(\'7l\',1J);q.N.hz($N);E V=$.3k($(\'#I-N-V\').2J());E V=V.K(/(<([^>]+)>)/ig,"");if(V!==\'\'){E 7A=\'((kb--)?[a-7E-9]+(-[a-7E-9]+)*\\\\.)+[a-z]{2,}\';E 3I=29 2l(\'^(8U|8d|5w)://\'+7A,\'i\');E bA=29 2l(\'^\'+7A,\'i\');if(V.3L(3I)==-1&&V.3L(bA)===0&&q.G.5g){V=q.G.5g+\'://\'+V}E 1Q=($(\'#I-N-V-8a\').6a(\'bC\'))?1r:O;if($V.12===0){E a=$(\'<a 2j="\'+V+\'">\'+q.L.5N($N)+\'</a>\');if(1Q)a.1c(\'1Q\',\'7v\');$N.2u(a)}M{$V.1c(\'2j\',V);if(1Q){$V.1c(\'1Q\',\'7v\')}M{$V.1L(\'1Q\')}}}M if($V.12!==0){$V.2u(q.L.5N($N))}q.1a.4j();q.1R.9W();q.1d.1S()},jC:C($N){if(q.G.cA){$N.on(\'qz\',$.1e(q.N.bD,q))}E 7W=$.1e(C(e){q.1R.N=$N;q.N.9g=q.N.gb($N);$(1k).on(\'68.I-N-4M-3p.\'+q.2G,$.1e(q.N.7u,q));if(!q.G.cE)F;q.N.9g.on(\'68.I 5B.I\',$.1e(C(e){q.N.hB(e,$N)},q))},q);$N.2Y(\'68.I\').on(\'68.I\',$.1e(q.N.7u,q));$N.2Y(\'2A.I 5B.I\').on(\'2A.I 5B.I\',7W)},hB:C(e,$N){e.2t();q.N.4i={x:e.hC,y:e.b9,el:$N,cD:$N.2L()/$N.3i(),h:$N.3i()};e=e.87||e;if(e.9e){q.N.4i.x=e.9e[0].hC;q.N.4i.y=e.9e[0].b9}q.N.hE()},hE:C(){$(1k).on(\'qv.I-N-4M qu.I-N-4M\',$.1e(q.N.hs,q));$(1k).on(\'g3.I-N-4M qq.I-N-4M\',$.1e(q.N.hw,q))},hs:C(e){e.2t();e=e.87||e;E 3i=q.N.4i.h;if(e.9e)3i+=(e.9e[0].b9-q.N.4i.y);M 3i+=(e.b9-q.N.4i.y);E 2L=8p.hu(3i*q.N.4i.cD);if(3i<50||2L<6G)F;E 3i=8p.hu(q.N.4i.el.2L()/q.N.4i.cD);q.N.4i.el.1c({2L:2L,3i:3i});q.N.4i.el.2L(2L);q.N.4i.el.3i(3i);q.1d.1S()},hw:C(){q.iJ=O;$(1k).2Y(\'.I-N-4M\');q.N.7u()},bD:C(e){if(q.$T.1h(\'#I-N-2N\').12!==0){e.2t();F O}q.$T.on(\'58.I-N-hv-58\',$.1e(C(){3u($.1e(q.N.au,q),1)},q))},au:C(){q.N.hF();q.1R.9W();q.$T.2Y(\'58.I-N-hv-58\');q.1v.4y();q.1d.1S()},hF:C(){q.$T.1h(\'1M[1f-3m-2h]\').1z(C(){E $el=$(q);$el.1c(\'4r\',$el.1c(\'1f-3m-2h\'));$el.1L(\'1f-3m-2h\')})},7u:C(e){if(e&&$(e.1Q).2p(\'#I-N-2N\',q.$T[0]).12!==0)F;if(e&&e.1Q.1n==\'bF\'){E $N=$(e.1Q);$N.1c(\'1f-3m-2h\',$N.1c(\'4r\'))}E 3F=q.$T.1h(\'#I-N-2N\');if(3F.12===0)F;$(\'#I-N-5D\').1t();$(\'#I-N-9g\').1t();3F.1h(\'1M\').1O({6d:3F[0].1p.6d,bE:3F[0].1p.bE,bm:3F[0].1p.bm,bt:3F[0].1p.bt});3F.1O(\'4G\',\'\');3F.1h(\'1M\').1O(\'hI\',\'\');3F.2u(C(){F $(q).2a()});$(1k).2Y(\'68.I-N-4M-3p.\'+q.2G);if(1s q.N.4i!==\'1y\'){q.N.4i.el.1c(\'3X\',q.N.4i.el.1c(\'1p\'))}q.1d.1S()},hM:C($N,3F){if(q.G.cE&&!q.L.6A()){E 9B=$(\'<1i id="I-N-9g" 1f-I="3K"></1i>\');if(!q.L.7n()){9B.1O({2L:\'hT\',3i:\'hT\'})}9B.1c(\'5c\',O);3F.1F(9B);3F.1F($N);F 9B}M{3F.1F($N);F O}},gb:C($N){E 3F=$(\'<1i id="I-N-2N" 1f-I="3K">\');3F.1O(\'7K\',$N.1O(\'7K\')).1c(\'5c\',O);if($N[0].1p.4G!=\'ad\'){3F.1O({6d:$N[0].1p.6d,bE:$N[0].1p.bE,bm:$N[0].1p.bm,bt:$N[0].1p.bt});$N.1O(\'4G\',\'\')}M{3F.1O({\'72\':\'R\',\'4G\':\'ad\'})}$N.1O(\'hI\',\'.5\').3C(3F);if(q.G.cA){q.N.5D=$(\'<1i id="I-N-5D" 1f-I="3K">\'+q.1H.1b(\'7e\')+\'</1i>\');q.N.5D.1c(\'5c\',O);q.N.5D.on(\'2A\',$.1e(C(){q.N.hK($N)},q));3F.1F(q.N.5D);E hN=q.N.5D.7t();q.N.5D.1O(\'4G-2c\',\'-\'+hN/2+\'px\')}F q.N.hM($N,3F)},1t:C(N){E $N=$(N);E $V=$N.2p(\'a\',q.$T[0]);E $70=$N.2p(\'70\',q.$T[0]);E $1q=$N.1q();if($(\'#I-N-2N\').12!==0){$1q=$(\'#I-N-2N\').1q()}E $1N;if($70.12!==0){$1N=$70.1N();$70.1t()}M if($V.12!==0){$1q=$V.1q();$V.1t()}M{$N.1t()}$(\'#I-N-2N\').1t();if($70.12!==0){q.1T.2Q($1N)}M{q.1T.2Q($1q)}q.1W.2q(\'cj\',$N[0].4r,$N);q.1a.4j();q.1d.1S()},1Y:C(2P,4V,e){if(1s 2P.6X!=\'1y\'){q.1a.4j();q.J.3g();q.1W.2q(\'oe\',2P);F}E $1M;if(1s 2P==\'6W\'){$1M=$(2P).1c(\'1f-I-9J-N\',\'1r\')}M{$1M=$(\'<1M>\');$1M.1c(\'4r\',2P.9t).1c(\'1f-I-9J-N\',\'1r\')}E Q=$1M;E cy=q.L.4Z(\'P\');if(cy){Q=$(\'<26 />\').1F($1M)}if(4V){q.J.8O();E 2s=q.J.6Q();q.1Y.c3(e,2s)}M{q.1a.4j()}q.J.3g();q.28.1U();q.1Y.B(q.L.5N(Q),O);E $N=q.$T.1h(\'1M[1f-I-9J-N=1r]\').1L(\'1f-I-9J-N\');if(cy){$N.1q().2a().44().62(\'<p />\')}M if(q.G.1K){if(!q.L.3z(q.1d.1b())){$N.bi(\'<br>\')}$N.3C(\'<br>\')}if(1s 2P==\'6W\')F;q.1W.2q(\'7J\',$N,2P)}}},3B:C(){F{bB:C(){if(!q.L.1P(\'2F\'))q.$T.2m();q.28.1U();q.J.3m();E R=q.J.4a();if(R&&R.1n==\'5y\'){q.3B.ek()}M if(R===O&&q.G.1K){q.3B.eV()}M{q.3B.ej()}q.J.3g();q.1d.1S()},ek:C(){1k.47(\'3B\');q.3B.a1();q.1v.ar();q.1v.4y()},ej:C(){$.1z(q.J.42(),$.1e(C(i,4X){if(4X.1n===\'6w\'||4X.1n===\'cz\')F;E $el=q.L.bp(4X);E 2c=q.L.eb($el.1O(\'4G-2c\'))+q.G.b7;$el.1O(\'4G-2c\',2c+\'px\')},q))},eV:C(){E 4P=q.J.62(\'1j\');$(4P).1c(\'1f-9z\',\'I\');$(4P).1O(\'4G-2c\',q.G.b7+\'px\')},9j:C(){q.28.1U();q.J.3m();E R=q.J.4a();if(R&&R.1n==\'5y\'){q.3B.eY()}M{q.3B.fb()}q.J.3g();q.1d.1S()},eY:C(){1k.47(\'7a\');E 1A=q.J.3v();E $2w=$(1A).2p(\'li\',q.$T[0]);q.3B.a1();if(!q.G.1K&&$2w.12===0){1k.47(\'a0\',O,\'p\');q.$T.1h(\'3s, ol, 26, p\').1z($.1e(q.L.3S,q))}q.1v.4y()},fb:C(){$.1z(q.J.42(),$.1e(C(i,4X){E $el=q.L.bp(4X);E 2c=q.L.eb($el.1O(\'4G-2c\'))-q.G.b7;if(2c<=0){if(q.G.1K&&1s($el.1f(\'9z\'))!==\'1y\'){$el.2u($el.B()+\'<br />\')}M{$el.1O(\'4G-2c\',\'\');q.L.5H($el,\'1p\')}}M{$el.1O(\'4G-2c\',2c+\'px\')}},q))},a1:C(){E R=q.J.4a();if(q.14.4Y&&R&&R.1n==\'5y\'&&q.L.3z($(R).1g())){E $R=$(R);$R.1h(\'1i\').6q(\'.I-J-2s\').2a().44();$R.1F(\'<br>\')}}}},25:C(){F{3b:C(1x){E 1m,1E;if(1s q.3b[1x].1p!=\'1y\')1m=\'1p\';M if(1s q.3b[1x][\'1G\']!=\'1y\')1m=\'1G\';if(1m)1E=q.3b[1x][1m];q.25.31(q.3b[1x].Y,1m,1E)},31:C(Y,1m,1E){E 1A=q.J.3v();if(1A&&1A.1n===\'o9\')F;if(q.L.4Z(\'8P\')||q.L.fk())F;E 2d=[\'b\',\'4n\',\'i\',\'4m\',\'5p\',\'eZ\',\'5W\',\'eK\',\'eP\'];E eG=[\'5e\',\'5e\',\'em\',\'em\',\'u\',\'4l\',\'4l\',\'7V\',\'7Z\'];2C(E i=0;i<2d.12;i++){if(Y==2d[i])Y=eG[i]}if(q.G.4t){if($.3q(Y,q.G.4t)==-1)F}M{if($.3q(Y,q.G.49)!==-1)F}q.25.1m=1m||O;q.25.1E=1E||O;q.28.1U();if(!q.L.1P(\'2F\')&&!q.G.1K){q.$T.2m()}q.J.1b();if(q.14.4Y){q.25.eQ(Y)}M{q.25.eR(Y)}},eQ:C(Y){E 1A=q.J.3v();E $1q=$(1A).2p(Y+\'[1f-I-Y=\'+Y+\']\',q.$T[0]);if($1q.12!==0&&(q.25.1m!=\'1p\'&&$1q[0].1n!=\'6M\')){if(q.L.3z($1q.1g())){q.1T.55($1q[0]);$1q.1t();q.1d.1S()}M if(q.L.6D($1q)){q.1T.55($1q[0])}F}E Q=$(\'<\'+Y+\'>\').1c(\'1f-3K\',\'I\').1c(\'1f-I-Y\',Y);Q.B(q.G.5R);Q=q.25.cl(Q);E Q=q.1Y.Q(Q);q.1T.3J(Q);q.1d.1S()},eR:C(Y){q.25.eD(Y);q.J.3m();1k.47(\'eZ\');q.$T.1h(\'7U\').1z($.1e(C(i,s){E $el=$(s);q.25.eS($el,Y);E $1i;if(q.25.1m){$1i=$(\'<1i>\').1c(\'1f-I-Y\',Y).1c(\'1f-3K\',\'I\');$1i=q.25.cl($1i)}M{$1i=$(\'<\'+Y+\'>\').1c(\'1f-I-Y\',Y).1c(\'1f-3K\',\'I\')}$el.2u($1i.B($el.2a()));E $1q=$1i.1q();if($1i[0].1n===\'A\'&&$1q&&$1q[0].1n===\'U\'){$1i.1q().2u($1i)}if(Y==\'1i\'){if($1q&&$1q[0].1n===\'6M\'&&q.25.1m===\'1p\'){E 2B=q.25.1E.4p(\';\');2C(E z=0;z<2B.12;z++){if(2B[z]===\'\')F;E 1p=2B[z].4p(\':\');$1q.1O(1p[0],\'\');if(q.L.5H($1q,\'1p\')){$1q.2u($1q.2a())}}}}},q));if(Y!=\'1i\'){q.$T.1h(q.G.4N.3d(\', \')).1z($.1e(C(i,s){E $el=$(s);if(s.1n===\'U\'&&s.4u.12===0){$el.2u($el.2a());F}E ab=$el.1O(\'1g-80\');if(ab===\'3M-fc\'){$el.1O(\'1g-80\',\'\');q.L.5H($el,\'1p\')}},q))}if(Y!=\'4l\'){E eT=q;q.$T.1h(\'25\').1z(C(i,s){eT.L.4J(s,\'4l\')})}q.J.3g();q.1d.1S()},eS:C($el,Y){E 3w=q;$el.3O(Y).1z(C(){E $4A=$(q);if(!$4A.3r(\'I-J-2s\')){if(3w.25.1m==\'1p\'){E 2B=3w.25.1E.4p(\';\');2C(E z=0;z<2B.12;z++){if(2B[z]===\'\')F;E 1p=2B[z].4p(\':\');$4A.1O(1p[0],\'\');if(3w.L.5H($4A,\'1p\')){$4A.2u($4A.2a())}}}M{$4A.2a().44()}}})},eD:C(Y){q.J.3m();E 1h=\'\';if(q.25.1m==\'1G\')1h=\'[1f-I-1G=\'+q.25.1E+\']\';M if(q.25.1m==\'1p\'){1h=\'[1f-I-1p="\'+q.25.1E+\'"]\'}E 3w=q;if(Y!=\'4l\'){q.$T.1h(\'4l\').1z(C(i,s){3w.L.4J(s,\'25\')})}if(Y!=\'1i\'){q.$T.1h(Y).1z(C(){E $el=$(q);$el.2u($(\'<7U />\').B($el.2a()))})}q.$T.1h(\'[1f-I-Y="\'+Y+\'"]\'+1h).1z(C(){if(1h===\'\'&&Y==\'1i\'&&q.1n.3f()==Y)F;E $el=$(q);$el.2u($(\'<7U />\').B($el.2a()))});q.J.3g()},cl:C(Q){fe(q.25.1m){9o\'1G\':if(Q.3r(q.25.1E)){Q.2U(q.25.1E);Q.1L(\'1f-I-1G\')}M{Q.2f(q.25.1E);Q.1c(\'1f-I-1G\',q.25.1E)}6k;9o\'1p\':Q[0].1p.oj=q.25.1E;Q.1c(\'1f-I-1p\',q.25.1E);6k}F Q},ok:C(){q.28.1U();E 1A=q.J.3v();E 21=q.J.e7();q.J.3m();if(1A&&1A.1n===\'6M\'){E $s=$(1A);$s.1L(\'1p\');if($s[0].4u.12===0){$s.2u($s.2a())}}$.1z(21,$.1e(C(i,s){E $s=$(s);if($.3q(s.1n.3f(),q.G.4N)!=-1&&!$s.3r(\'I-J-2s\')){$s.1L(\'1p\');if($s[0].4u.12===0){$s.2u($s.2a())}}},q));q.J.3g();q.1d.1S()},ov:C(1x){q.28.1U();E 1q=q.J.5Q();E 21=q.J.e7();q.J.3m();if(1q&&1q.1n===\'6M\'){E $s=$(1q);$s.1O(1x,\'\');q.L.5H($s,\'1p\');if($s[0].4u.12===0){$s.2u($s.2a())}}$.1z(21,$.1e(C(i,s){E $s=$(s);if($.3q(s.1n.3f(),q.G.4N)!=-1&&!$s.3r(\'I-J-2s\')){$s.1O(1x,\'\');q.L.5H($s,\'1p\');if($s[0].4u.12===0){$s.2u($s.2a())}}},q));q.J.3g();q.1d.1S()},c6:C(){q.28.1U();E 1A=q.J.3v();q.J.3m();1k.47(\'c6\');if(1A&&1A.1n===\'6M\'){$(1A).2u($(1A).2a())}$.1z(q.J.6V(),$.1e(C(i,s){E $s=$(s);if($.3q(s.1n.3f(),q.G.4N)!=-1&&!$s.3r(\'I-J-2s\')){$s.2u($s.2a())}},q));q.J.3g();q.1d.1S()},7C:C(3G){q.25.31(\'1i\',\'1G\',3G)},ow:C(1E){q.25.31(\'1i\',\'1p\',1E)}}},1Y:C(){F{1U:C(B,1v){q.3e.1t();B=q.1v.7Q(B);if(1s 1v==\'1y\'){B=q.1v.8B(B,O)}q.$T.B(B);q.J.1t();q.2m.3J();q.1v.ar();q.1d.1S();q.1R.2K();if(1s 1v==\'1y\'){3u($.1e(q.1v.4y,q),10)}},1g:C(1g){q.3e.1t();1g=1g.4s();1g=$.3k(1g);1g=q.1v.aC(1g,O);q.$T.2m();if(q.L.1P(\'2F\')){q.1Y.c7(1g)}M{q.J.1b();q.14.4S();E el=1k.3y("1j");el.3A=1g;E 4L=1k.9P(),Q,5G;53((Q=el.9N)){5G=4L.83(Q)}q.14.3R(4L);if(5G){E 14=q.14.7I();14.9p(5G);14.48(1r);q.2V.9E();q.2V.4b(14)}}q.1d.1S();q.1v.4y()},eA:C(B){q.1Y.B(B,O)},B:C(B,1v){q.3e.1t();if(1s 1v==\'1y\')1v=1r;if(!q.G.1K){q.$T.2m()}B=q.1v.7Q(B);if(1v){B=q.1v.8B(B)}if(q.L.1P(\'2F\')){q.1Y.c7(B)}M{if(q.1v.9l)q.1Y.fS(B);M 1k.47(\'ox\',O,B);q.1Y.ew()}q.1v.ar();if(!q.G.1K){q.$T.1h(\'p\').1z($.1e(q.L.3S,q))}q.1d.1S();q.1R.2K();if(1v){q.1v.4y()}},ew:C(){if(!q.L.1P(\'4g\'))F;E $1N=$(q.J.4a()).1N();if($1N.12>0&&$1N[0].1n==\'P\'&&$1N.B()===\'\'){$1N.1t()}},c7:C(B){if(q.L.iK()){E 1q=q.L.4Z(\'P\');E $B=$(\'<1j>\').1F(B);E ga=$B.2a().is(\'p, :7S, dl, 3s, ol, 1j, 3T, 2Z, 26, 2H, c4, 4h, 7S, cR, eC, eH\');if(1q&&ga)q.1Y.fX(1q,B);M q.1Y.ff(B);F}1k.J.8b().jF(B)},fS:C(B){B=q.1v.7Q(B);q.J.1b();q.14.4S();E el=1k.3y(\'1j\');el.3A=B;E 4L=1k.9P(),Q,5G;53((Q=el.9N)){5G=4L.83(Q)}q.14.3R(4L);q.14.48(1r);q.1T.55(5G)},Q:C(Q,4S){Q=Q[0]||Q;E B=q.L.5N(Q);B=q.1v.7Q(B);if(B.1V(/</g)!==4d){Q=$(B)[0]}q.J.1b();if(4S!==O){q.14.4S()}q.14.3R(Q);q.14.48(O);q.J.4b();F Q},oy:C(Q,x,y){Q=Q[0]||Q;q.J.1b();E 14;if(1k.aD){E 3x=1k.aD(x,y);q.14.2Q(3x.fL,3x.2D);q.14.48(1r);q.14.3R(Q)}M if(1k.a5){14=1k.a5(x,y);14.3R(Q)}M if(1s 1k.3c.9Q!="1y"){14=1k.3c.9Q();14.9S(x,y);E 85=14.fN();85.9S(x,y);14.fO("fW",85);14.7F()}},c3:C(e,Q){Q=Q[0]||Q;E 14;E x=e.ou,y=e.ot;if(1k.aD){E 3x=1k.aD(x,y);E 2V=1k.4E();14=2V.6f(0);14.2Q(3x.fL,3x.2D);14.48(1r);14.3R(Q)}M if(1k.a5){14=1k.a5(x,y);14.3R(Q)}M if(1s 1k.3c.9Q!="1y"){14=1k.3c.9Q();14.9S(x,y);E 85=14.fN();85.9S(x,y);14.fO("fW",85);14.7F()}},fX:C(1q,B){E Q=1k.3y(\'1i\');Q.3G=\'I-ie-5u\';q.1Y.Q(Q);E 7N=$(1q).B();7N=\'<p>\'+7N.K(/<1i 1G="I-ie-5u"><\\/1i>/gi,\'</p>\'+B+\'<p>\')+\'</p>\';7N=7N.K(/<p><\\/p>/gi,\'\');$(1q).2u(7N)},ff:C(B){q.J.1b();q.14.4S();E el=1k.3y("1j");el.3A=B;E 4L=1k.9P(),Q,5G;53((Q=el.9N)){5G=4L.83(Q)}q.14.3R(4L);q.14.48(O);q.J.4b()}}},1D:C(){F{3N:C(e){if(q.7k)F;E 1l=e.7m;E 57=(1l>=37&&1l<=40);q.1D.4f=e.8w||e.6I;q.1D.1A=q.J.3v();q.1D.1q=q.J.5Q();q.1D.R=q.J.4a();q.1D.2H=q.L.aa(q.1D.1A,\'2H\');q.1D.26=q.L.aa(q.1D.1A,\'26\');q.1D.7G=q.L.aa(q.1D.1A,\'7G\');q.6i.3N(e,1l);if(q.L.7n()){q.1D.ft(57,1l);q.1D.fu(e,1l)}q.1D.fl(57);q.1D.fG(e,1l);E g7=q.1W.2q(\'1D\',e);if(g7===O){e.2t();F O}if(q.G.bu&&(q.L.1P(\'2F\')||q.L.1P(\'4g\'))&&(1l===q.3t.ci||1l===q.3t.g8)){E cg=O;E $3T=O;if(q.1D.R&&q.1D.R.1n===\'6w\'){$3T=$(q.1D.R).2p(\'3T\',q.$T[0])}if($3T&&$3T.1h(\'2Z\').30()[0]===q.1D.R){cg=1r}if(q.L.6D()&&cg){E Q=$(q.G.6s);$3T.3C(Q);q.1T.2Q(Q)}}if(q.G.bu&&1l===q.3t.ci){q.1D.fC()}if(!q.G.bu&&1l===q.3t.6R){e.2t();if(!q.14.4Y)q.14.4S();F}if(1l==q.3t.6R&&!e.6O&&!e.8w&&!e.6I){E g0=q.1W.2q(\'os\',e);if(g0===O){e.2t();F O}if(q.1D.26&&q.1D.kI(e)===1r){F O}E 1A,$1N;if(q.1D.2H){F q.1D.kB(e)}M if(q.1D.26||q.1D.7G){1A=q.J.3v();$1N=$(1A).1N();if($1N.12!==0&&$1N[0].1n==\'5l\'){F q.1D.6U(e)}M if(q.L.6D()&&(1A&&1A!=\'6M\')){F q.1D.9H(e)}M{F q.1D.6U(e)}}M if(q.G.1K&&!q.1D.R){1A=q.J.3v();$1N=$(q.1D.1A).1N();if($1N.12!==0&&$1N[0].1n==\'5l\'){F q.1D.6U(e)}M if(1A!==O&&$(1A).3r(\'I-7H-3h\')){q.1T.55(1A);$(1A).2a().44();F q.1D.9H(e)}M{if(q.L.dI()){F q.1D.9H(e)}M if($1N.12===0&&1A===O&&1s $1N.o7!=\'1y\'){F q.1D.6U(e)}F q.1D.6U(e)}}M if(q.G.1K&&q.1D.R){3u($.1e(q.1D.fA,q),1)}M if(!q.G.1K&&q.1D.R){3u($.1e(q.1D.hU,q),1);if(q.1D.R.1n===\'5y\'){1A=q.J.3v();E $1q=$(1A).2p(\'li\',q.$T[0]);E $2e=$1q.2p(\'3s,ol\',q.$T[0]);if($1q.12!==0&&q.L.3z($1q.B())&&$2e.1N().12===0&&q.L.3z($2e.1h("li").30().B())){$2e.1h("li").30().1t();E Q=$(q.G.6s);$2e.3C(Q);q.1T.2Q(Q);F O}}}M if(!q.G.1K&&!q.1D.R){F q.1D.kF(e)}}if(1l===q.3t.6R&&(e.8w||e.6O)){F q.1D.fB(e)}if(1l===q.3t.ce||e.6I&&1l===dS||e.6I&&1l===dG){F q.1D.fx(e,1l)}if(1l===q.3t.7x||1l===q.3t.8n){E 21=q.J.6V();if(21){E 2o=21.12;E 30;2C(E i=0;i<2o;i++){E 3O=$(21[i]).3O(\'1M\');if(3O.12!==0){E 3w=q;$.1z(3O,C(z,s){E $s=$(s);if($s.1O(\'7K\')!=\'5z\')F;3w.1W.2q(\'cj\',s.4r,$s);30=s})}M if(21[i].1n==\'bF\'){if(30!=21[i]){q.1W.2q(\'cj\',21[i].4r,$(21[i]));30=21[i]}}}}}if(1l===q.3t.7x){E R=q.J.4a();E fp=($(R).1O(\'4G-2c\')!==\'nP\');if(R&&fp&&q.14.4Y&&q.L.ic()){q.3B.9j();e.2t();F}if(q.L.1P(\'4g\')){E 4D=q.J.jp();E bl=$(4D).4D()[0];if(4D&&4D.1n===\'fr\')$(4D).1t();if(bl&&bl.1n===\'fr\')$(bl).1t()}q.1D.k2();q.1D.k1(e)}q.1d.1S()},ft:C(57,1l){if(!57&&(q.1W.76()==\'2A\'||q.1W.76()==\'57\')){q.1W.9k(O);if(q.1D.fo(1l)){q.28.1U()}}},fo:C(1l){E k=q.3t;E 51=[k.7x,k.8n,k.6R,k.am,k.ce,k.fh,k.fg,k.fi,k.fj];F($.3q(1l,51)==-1)?1r:O},fl:C(57){if(!57)F;if((q.1W.76()==\'2A\'||q.1W.76()==\'57\')){q.1W.9k(O);F}q.1W.9k(\'57\')},fu:C(e,1l){if(q.1D.4f&&1l===90&&!e.6O&&!e.fD&&q.G.28.12){e.2t();q.28.9v();F}M if(q.1D.4f&&1l===90&&e.6O&&!e.fD&&q.G.9L.12!==0){e.2t();q.28.bG();F}M if(!q.1D.4f){if(1l==q.3t.7x||1l==q.3t.8n||(1l==q.3t.6R&&!e.8w&&!e.6O)){q.28.1U()}}},fG:C(e,1l){if(q.1D.4f&&1l===65){q.L.fZ()}M if(1l!=q.3t.iA&&!q.1D.4f){q.L.8u()}},fC:C(){E 2d=[q.1D.26,q.1D.2H,q.1D.7G];2C(E i=0;i<2d.12;i++){if(2d[i]){q.1D.kx(2d[i]);F O}}},fB:C(e){q.28.1U();if(q.L.6D()){F q.1D.9H(e)}F q.1D.6U(e)},fx:C(e,1l){if(!q.G.fw)F 1r;if(q.L.3z(q.1d.1b())&&q.G.aR===O)F 1r;e.2t();E Q;if(q.1D.2H&&!e.6O){Q=(q.G.6T)?1k.8A(9i(q.G.6T+1).3d(\'\\bg\')):1k.8A(\'\\t\');q.1Y.Q(Q);q.1d.1S()}M if(q.G.aR!==O){Q=1k.8A(9i(q.G.aR+1).3d(\'\\bg\'));q.1Y.Q(Q);q.1d.1S()}M{if(e.6I&&1l===dG)q.3B.9j();M if(e.6I&&1l===dS)q.3B.bB();M if(!e.6O)q.3B.bB();M q.3B.9j()}F O},fA:C(){E 4H=q.J.4a();E aT=4H.3A.K(/<br\\s?\\/?>/gi,\'\');if((4H.1n===\'7p\'||4H.1n===\'P\')&&aT===\'\'&&!$(4H).3r(\'I-T\')){E br=1k.3y(\'br\');$(4H).2u(br);q.1T.cd(br);q.1d.1S();F O}},hU:C(){E 4H=q.J.4a();E aT=4H.3A.K(/<br\\s?\\/?>/gi,\'\');if(4H.1n===\'7p\'&&q.L.3z(aT)&&!$(4H).3r(\'I-T\')){E p=1k.3y(\'p\');p.3A=q.G.5R;$(4H).2u(p);q.1T.2Q(p);q.1d.1S();F O}M if(q.G.kG&&4H.1n==\'P\'){$(4H).1L(\'1G\').1L(\'1p\')}},kF:C(e){e.2t();q.J.1b();E p=1k.3y(\'p\');p.3A=q.G.5R;q.14.4S();q.14.3R(p);q.1T.2Q(p);q.1d.1S();F O},kI:C(e){if(!q.L.6D())F;E 5x=$.3k($(q.1D.R).B());if(5x.3L(/(<br\\s?\\/?>){2}$/i)!=-1){e.2t();if(q.G.1K){E br=1k.3y(\'br\');$(q.1D.26).3C(br);q.1T.cd(br);$(q.1D.R).B(5x.K(/<br\\s?\\/?>$/i,\'\'))}M{E Q=$(q.G.6s);$(q.1D.26).3C(Q);q.1T.2Q(Q)}F 1r}F},kx:C(2k){if(!q.L.6D())F;q.28.1U();if(q.G.1K){E 2a=$(\'<1j>\').1F($.3k(q.$T.B())).2a();E 30=2a.30()[0];if(30.1n==\'6M\'&&30.3A===\'\'){30=2a.4D()[0]}if(q.L.5N(30)!=q.L.5N(2k))F;E br=1k.3y(\'br\');$(2k).3C(br);q.1T.55(br)}M{if(q.$T.2a().30()[0]!==2k)F;E Q=$(q.G.6s);$(2k).3C(Q);q.1T.2Q(Q)}},kB:C(e){e.2t();E Q=1k.8A(\'\\n\');q.J.1b();q.14.4S();q.14.3R(Q);q.1T.55(Q);q.1d.1S();F O},6U:C(e){F q.1D.cF(e)},9H:C(e){F q.1D.cF(e,1r)},cF:C(e,kv){e.kN();q.J.1b();E 5v=1k.3y(\'br\');if(q.L.1P(\'2F\')){q.14.48(O);q.14.3J(q.14.cG,q.14.d8)}M{q.14.4S()}q.14.3R(5v);E $b3=$(5v).1q("a");if($b3.12>0){$b3.1h(5v).1t();$b3.3C(5v)}if(kv===1r){E $1N=$(5v).1N();if($1N.12!==0&&$1N[0].1n===\'5l\'&&q.L.dI()){q.1T.55(5v);q.1d.1S();F O}E d9=1k.3y(\'br\');q.14.3R(d9);q.1T.55(d9)}M{if(q.L.1P(\'2F\')){E 3h=1k.3y(\'1i\');3h.3A=\'&#aZ;\';$(5v).3C(3h);q.1T.55(3h);$(3h).1t()}M{E 14=1k.8b();14.9p(5v);14.48(1r);E J=3l.4E();J.9E();J.4b(14)}}q.1d.1S();F O},k2:C(){E $1A=$(q.1D.1A);if($1A.1g().3L(/^\\5X$/g)===0){$1A.1t()}},k1:C(e){E $1A=$(q.1D.1A);E $1q=$(q.1D.1q);E 2Z=$1A.2p(\'2Z\',q.$T[0]);if(2Z.12!==0&&$1A.2p(\'li\',q.$T[0])&&$1q.3O(\'li\').12===1){if(!q.L.3z($1A.1g()))F;e.2t();$1A.1t();$1q.1t();q.1T.2Q(2Z)}}}},2x:C(){F{3N:C(e){if(q.7k)F;E 1l=e.7m;q.2x.1A=q.J.3v();q.2x.1q=q.J.5Q();E $1q=q.L.4v($(q.2x.1q).1q());E jU=q.1W.2q(\'2x\',e);if(jU===O){e.2t();F O}if(!q.G.1K&&q.2x.1A.bH===3&&q.2x.1A.12<=1&&(q.2x.1q===O||q.2x.1q.1n==\'eh\')){q.2x.b8()}if(!q.G.1K&&q.L.4v(q.2x.1A)&&q.2x.1A.1n===\'7p\'){q.2x.b8(O)}if(!q.G.1K&&$(q.2x.1q).3r(\'I-7H-3h\')&&($1q===O||$1q[0].1n==\'eh\')){$(q.2x.1q).2a().44();q.2x.b8()}if(q.2z.b6()&&q.2z.k5(1l))q.2z.31();if(1l===q.3t.8n||1l===q.3t.7x){if(q.L.1P(\'4g\')){E 2Z=$(q.1D.1A).2p(\'2Z\',q.$T[0]);if(2Z.82()!==0&&2Z.1g()!==\'\'){e.2t();F O}}q.1v.4y();if(q.1R.N){e.2t();q.N.7u();q.28.1U();q.N.1t(q.1R.N);q.1R.N=O;F O}q.$T.1h(\'p\').1z($.1e(C(i,s){q.L.3S(i,$(s).B())},q));if(q.G.1K&&q.2x.1A&&q.2x.1A.1n==\'7p\'&&q.L.3z(q.2x.1A.3A)){$(q.2x.1A).3C(q.J.5f());q.J.3g();$(q.2x.1A).1t()}F q.2x.kr(e)}},b8:C(8N){E $1A=$(q.2x.1A);E Q;if(8N===O){Q=$(\'<p>\').1F($1A.B())}M{Q=$(\'<p>\').1F($1A.8N())}$1A.2u(Q);E 1N=$(Q).1N();if(1s(1N[0])!==\'1y\'&&1N[0].1n==\'5l\'){1N.1t()}q.1T.3J(Q)},kr:C(e){E B=$.3k(q.$T.B());if(!q.L.3z(B))F;e.2t();if(q.G.1K){q.$T.B(q.J.5f());q.J.3g()}M{q.$T.B(q.G.6s);q.2m.2Q()}q.1d.1S();F O}}},1H:C(){F{2K:C(){q.G.bY=q.G.ku[q.G.1H]},1b:C(1x){F(1s q.G.bY[1x]!=\'1y\')?q.G.bY[1x]:\'\'}}},3M:C(){F{1Y:C(){q.28.1U();E 1Z=q.J.42();if(1Z[0]!==O&&q.3M.kl(1Z)){if(!q.L.1P(\'2F\'))q.$T.2m();F}if(q.L.1P(\'2F\')){q.3M.a3()}M{q.3M.ki()}},kl:C(1Z){E 8g=[\'li\',\'2Z\',\'5S\',\'26\',\'7G\',\'2H\',\'dl\',\'dt\',\'dd\'];E 3H=1Z[0].1n.3f();E 30=q.J.ji();30=(1s 30==\'1y\')?3H:30.1n.3f();E d2=$.3q(3H,8g)!=-1;E kh=$.3q(30,8g)!=-1;if((d2&&kh)||d2){F 1r}},a3:C(){q.L.8k();q.28.1U();q.1Y.Q(1k.3y(\'hr\'));q.L.aX();q.1d.1S()},ki:C(){q.28.1U();E d3=\'<p id="I-1Y-3M"><br /></p>\';if(q.G.1K)d3=\'<br id="I-1Y-3M">\';1k.47(\'nJ\',O,\'<hr>\'+d3);q.3M.km();q.1d.1S()},km:C(){E Q=q.$T.1h(\'#I-1Y-3M\');E 1N=$(Q).1N()[0];E 1Q=1N;if(q.L.1P(\'4g\')&&1N&&1N.3A===\'\'){1Q=$(1N).1N()[0];$(1N).1t()}if(1Q){Q.1t();if(!q.G.1K){q.$T.2m();q.3M.2Q(1Q)}}M{Q.1L(\'id\');q.3M.2Q(Q[0])}},2Q:C(Q){if(1s Q===\'1y\')F;E kM=1k.8A(\'\\5X\');q.J.1b();q.14.2Q(Q,0);q.14.3R(kM);q.14.48(1r);q.J.4b()}}},V:C(){F{2O:C(e){if(1s e!=\'1y\'&&e.2t)e.2t();if(!q.1R.cY(\'a\')){q.1a.2K(\'V\',q.1H.1b(\'bx\'),ko)}M{q.1a.2K(\'V\',q.1H.1b(\'dB\'),ko)}q.1a.cI();E kA=!q.1R.cY(\'a\')?q.1H.1b(\'1Y\'):q.1H.1b(\'7e\');q.V.kz=q.1a.cJ(kA);q.J.1b();q.V.kj();q.V.kp();if(q.V.1Q==\'7v\')$(\'#I-V-8a\').6a(\'bC\',1r);q.V.$8R=$(\'#I-V-2h\');q.V.$d4=$(\'#I-V-2h-1g\');q.V.$d4.2J(q.V.1g);q.V.$8R.2J(q.V.2h);q.V.kz.on(\'2A\',$.1e(q.V.1Y,q));$(\'.I-V-3n\').1t();q.J.3m();q.1a.2O();q.V.$8R.2m()},kp:C(){E ks=3w.kf.2j.K(/\\/$/i,\'\');if(1s q.V.2h!=="1y"){q.V.2h=q.V.2h.K(ks,\'\');q.V.2h=q.V.2h.K(/^\\/#/,\'#\');q.V.2h=q.V.2h.K(\'d5:\',\'\');if(!q.G.5g){E 3I=29 2l(\'^(8U|8d|5w)://\'+3w.kf.nT,\'i\');q.V.2h=q.V.2h.K(3I,\'\')}}},kj:C(){q.V.$Q=O;E $el=$(q.J.3v()).2p(\'a\',q.$T[0]);if($el.12!==0&&$el[0].1n===\'A\'){q.V.$Q=$el;q.V.2h=$el.1c(\'2j\');q.V.1g=$el.1g();q.V.1Q=$el.1c(\'1Q\')}M{q.V.1g=q.2V.4s();q.V.2h=\'\';q.V.1Q=\'\'}},1Y:C(){q.3e.1t();E 1Q=\'\';E V=q.V.$8R.2J();E 1g=q.V.$d4.2J().K(/(<([^>]+)>)/ig,"");if($.3k(V)===\'\'){q.V.$8R.2f(\'I-3E-6X\').on(\'2x\',C(){$(q).2U(\'I-3E-6X\');$(q).2Y(\'2x\')});F}if(V.3L(\'@\')!=-1&&/(8U|8d|5w):\\/\\//i.ac(V)===O){V=\'d5:\'+V}M if(V.3L(\'#\')!==0){if($(\'#I-V-8a\').6a(\'bC\')){1Q=\'7v\'}E 7A=\'((kb--)?[a-7E-9]+(-[a-7E-9]+)*\\\\.)+[a-z]{2,}\';E 3I=29 2l(\'^(8U|8d|5w)://\'+7A,\'i\');E bA=29 2l(\'^\'+7A,\'i\');E jW=29 2l(\'\\.(B|o1)$\',\'i\');if(V.3L(3I)==-1&&V.3L(jW)==-1&&V.3L(bA)===0&&q.G.5g){V=q.G.5g+\'://\'+V}}q.V.1U(1g,V,1Q);q.1a.4j()},1U:C(1g,V,1Q){1g=$.3k(1g.K(/<|>/g,\'\'));q.J.3g();E 1Z=q.J.42();if(1g===\'\'&&V===\'\')F;if(1g===\'\'&&V!==\'\')1g=V;if(q.V.$Q){q.28.1U();E $V=q.V.$Q,$el=$V.3O();if($el.12>0){53($el.12){$el=$el.3O()}$el=$el.2g()}M{$el=$V}$V.1c(\'2j\',V);$el.1g(1g);if(1Q!==\'\'){$V.1c(\'1Q\',1Q)}M{$V.1L(\'1Q\')}q.J.9s($V);q.1d.1S()}M{if(q.L.1P(\'4g\')&&q.V.1g===\'\'){E $a=$(\'<a />\').1c(\'2j\',V).1g(1g);if(1Q!==\'\')$a.1c(\'1Q\',1Q);$a=$(q.1Y.Q($a));if(q.G.1K){$a.3C(\'&5i;\')}q.J.9s($a)}M{E $a;if(q.L.1P(\'2F\')){$a=$(\'<a 2j="\'+V+\'">\').1g(1g);if(1Q!==\'\')$a.1c(\'1Q\',1Q);$a=$(q.1Y.Q($a));if(q.J.dr().1V(/\\s$/)){$a.3C(" ")}q.J.9s($a)}M{1k.47(\'nW\',O,V);$a=$(q.J.3v()).2p(\'a\',q.$T[0]);if(q.L.1P(\'4g\')){$a=$(\'a[ka=""]\')}if(1Q!==\'\')$a.1c(\'1Q\',1Q);$a.1L(\'1p\').1L(\'ka\');if(q.J.dr().1V(/\\s$/)){$a.3C(" ")}if(q.V.1g!==\'\'||q.V.1g!=1g){if(!q.G.1K&&1Z&&1Z.12<=1){$a.1g(1g)}M if(q.G.1K){$a.1g(1g)}q.J.9s($a)}}}q.1d.1S();q.1W.2q(\'nV\',$a)}3u($.1e(C(){q.1R.5A()},q),5)},6t:C(e){if(1s e!=\'1y\'&&e.2t){e.2t()}E 21=q.J.6V();if(!21)F;q.28.1U();E 2o=21.12;E 5A=[];2C(E i=0;i<2o;i++){if(21[i].1n===\'A\'){5A.2R(21[i])}E $Q=$(21[i]).2p(\'a\',q.$T[0]);$Q.2u($Q.2a())}q.1W.2q(\'nX\',5A);$(\'.I-V-3n\').1t();q.1d.1S()},7C:C(3G){q.V.8W(3G,\'7C\')},2f:C(3G){q.V.8W(3G,\'2f\')},2U:C(3G){q.V.8W(3G,\'2U\')},8W:C(3G,1C){E 5A=q.J.jh([\'a\']);if(5A===O)F;$.1z(5A,C(){$(q)[1C](3G)})}}},2z:C(){F{k5:C(1l){F 1l==q.3t.6R||1l==q.3t.kT},b6:C(){F q.G.bs&&(q.G.dk||q.G.dj||q.G.8C)&&!q.L.4Z(\'8P\')},31:C(){E 2z=q.2z,G=q.G;q.$T.1h(":6q(4R,1M,a,2H)").nZ().2a().dc(C(){F q.bH===3&&$.3k(q.6o)!=""&&!$(q).1q().is("2H")&&(q.6o.1V(G.2z.4w.6K)||q.6o.1V(G.2z.4w.6F)||q.6o.1V(G.2z.4w.N)||q.6o.1V(G.2z.4w.2h))}).1z(C(){E 1g=$(q).1g(),B=1g;if(G.8C&&(B.1V(G.2z.4w.6K)||B.1V(G.2z.4w.6F))){B=2z.8C(B)}M if(G.dj&&B.1V(G.2z.4w.N)){B=2z.j1(B)}M if(G.dk){B=2z.bs(B)}$(q).bi(1g.K(1g,B)).1t()});E ky=q.$T.1h(\'.I-2z-41\').1z(C(){E $el=$(q);$el.2U(\'I-2z-41\');if($el.1c(\'1G\')===\'\')$el.1L(\'1G\');F $el[0]});3u($.1e(C(){q.1R.2K();q.1W.2q(\'2z\',ky)},q),6G);q.1d.1S()},8C:C(B){E dm=\'<4R 1G="I-2z-41" 2L="p9" 3i="pa" 4r="\',di=\'" pb="0" p7></4R>\';if(B.1V(q.G.2z.4w.6K)){B=B.K(q.G.2z.4w.6K,dm+\'//7f.6K.bw/7g/$1\'+di)}if(B.1V(q.G.2z.4w.6F)){B=B.K(q.G.2z.4w.6F,dm+\'//p4.6F.bw/6E/$2\'+di)}F B},j1:C(B){E 3Q=B.1V(q.G.2z.4w.N);if(3Q){B=B.K(B,\'<1M 4r="\'+3Q+\'" 1G="I-2z-41" />\');if(q.G.1K){if(!q.L.3z(q.1d.1b())){B=\'<br>\'+B}}B+=\'<br>\'}F B},bs:C(B){E 3Q=B.1V(q.G.2z.4w.2h);if(3Q){3Q=$.pe(3Q,C(v,k){F $.3q(v,3Q)===k});E 12=3Q.12;2C(E i=0;i<12;i++){E 2j=3Q[i],1g=2j,5g=q.G.5g+\'://\';if(2j.1V(/(5w?|8d):\\/\\//i)!==4d){5g=""}if(1g.12>q.G.dh){1g=1g.aV(0,q.G.dh)+\'...\'}if(1g.3L(\'%\')===-1){1g=hn(1g)}E df="\\\\b";if($.3q(2j.de(-1),["/","&","="])!=-1){df=""}E iV=29 2l(\'(\'+2j.K(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,"\\\\$&")+df+\')\',\'g\');B=B.K(iV,\'<a 2j="\'+5g+$.3k(2j)+\'" 1G="I-2z-41">\'+$.3k(1g)+\'</a>\')}}F B}}},2e:C(){F{3j:C(4F){q.3e.1t();if(!q.L.1P(\'2F\'))q.$T.2m();q.28.1U();q.J.3m();E 1q=q.J.5Q();E $2e=$(1q).2p(\'ol, 3s\',q.$T[0]);if(!q.L.4v($2e)&&$2e.12!==0){$2e=O}E d1,d0;E 1t=O;if($2e&&$2e.12){1t=1r;E dg=$2e[0].1n;d1=(4F===\'5o\'&&dg===\'8y\');d0=(4F===\'5n\'&&dg===\'8t\')}if(d1){q.L.4J($2e,\'ol\')}M if(d0){q.L.4J($2e,\'3s\')}M{if(1t){q.2e.1t(4F,$2e)}M{q.2e.1Y(4F)}}q.J.3g();q.1d.1S()},1Y:C(4F){E 1A=q.J.3v();E $2Z=$(1A).2p(\'2Z, 5S\',q.$T[0]);if(q.L.1P(\'2F\')&&q.G.1K){q.2e.a3(4F)}M{1k.47(\'1Y\'+4F)}E 1q=q.J.5Q();E $2e=$(1q).2p(\'ol, 3s\',q.$T[0]);if($2Z.12!==0){E ja=$2Z.8N();$2Z.3C(ja).1t(\'\')}if(q.L.3z($2e.1h(\'li\').1g())){E $3O=$2e.3O(\'li\');$3O.1h(\'br\').1t();$3O.1F(q.J.5f());if(q.G.1K&&q.L.1P(\'4g\')&&$3O.82()==2&&q.L.3z($3O.eq(1).1g())){$3O.eq(1).1t()}}if($2e.12){E $88=$2e.1q();if(q.L.4v($88)&&$88[0].1n!=\'5y\'&&q.L.6J($88[0])){$88.2u($88.2a())}}if(!q.L.1P(\'2F\')){q.$T.2m()}q.1v.4y()},a3:C(4F){E 4P=q.J.62(\'1j\');E a4=$(4P).B();E 86=(4F==\'5o\')?$(\'<ol>\'):$(\'<3s>\');E 8S=$(\'<li>\');if($.3k(a4)===\'\'){8S.1F(q.J.5f());86.1F(8S);q.$T.1h(\'#J-2s-1\').2u(86)}M{E 8i=a4.4p(/<br\\s?\\/?>/gi);if(8i){2C(E i=0;i<8i.12;i++){if($.3k(8i[i])!==\'\'){86.1F($(\'<li>\').B(8i[i]))}}}M{8S.1F(a4);86.1F(8S)}$(4P).2u(86)}},1t:C(4F,$2e){if($.3q(\'3s\',q.J.42()))4F=\'5n\';1k.47(\'1Y\'+4F);E $1A=$(q.J.3v());q.3B.a1();if(!q.G.1K&&$1A.2p(\'li, 5S, 2Z\',q.$T[0]).12===0){1k.47(\'a0\',O,\'p\');q.$T.1h(\'3s, ol, 26\').1z($.1e(q.L.3S,q))}E $3T=$(q.J.3v()).2p(\'3T\',q.$T[0]);E $4D=$3T.4D();if(!q.G.1K&&$3T.12!==0&&$4D.12!==0&&$4D[0].1n==\'5l\'){$4D.1t()}q.1v.4y()}}},1a:C(){F{ao:{},j9:C(){q.G.1a={j8:5Y()+\'<4h id="I-1a-N-7e">\'+\'<2M>\'+q.1H.1b(\'1J\')+\'</2M>\'+\'<3E 1m="1g" id="I-N-1J" />\'+\'<2M 1G="I-N-V-3Z">\'+q.1H.1b(\'V\')+\'</2M>\'+\'<3E 1m="1g" id="I-N-V" 1G="I-N-V-3Z" 4Q-2M="\'+q.1H.1b(\'V\')+\'" />\'+\'<2M 1G="I-N-V-3Z"><3E 1m="j6" id="I-N-V-8a" 4Q-2M="\'+q.1H.1b(\'at\')+\'"> \'+q.1H.1b(\'at\')+\'</2M>\'+\'<2M 1G="I-N-4e-3Z">\'+q.1H.1b(\'cP\')+\'</2M>\'+\'<7F 1G="I-N-4e-3Z" id="I-N-5a" 4Q-2M="\'+q.1H.1b(\'cP\')+\'">\'+\'<3Z 1E="5z">\'+q.1H.1b(\'5z\')+\'</3Z>\'+\'<3Z 1E="2c">\'+q.1H.1b(\'2c\')+\'</3Z>\'+\'<3Z 1E="5E">\'+q.1H.1b(\'5E\')+\'</3Z>\'+\'<3Z 1E="4z">\'+q.1H.1b(\'4z\')+\'</3Z>\'+\'</7F>\'+\'</4h>\',N:5Y()+\'<4h id="I-1a-N-1Y">\'+\'<1j id="I-1a-N-4c"></1j>\'+\'</4h>\',22:5Y()+\'<4h id="I-1a-22-1Y">\'+\'<1j id="I-1a-22-1w-2N">\'+\'<2M>\'+q.1H.1b(\'6h\')+\'</2M>\'+\'<3E 1m="1g" id="I-6h" 4Q-2M="\'+q.1H.1b(\'6h\')+\'" /><br><br>\'+\'<1j id="I-1a-22-1w"></1j>\'+\'</1j>\'+\'</4h>\',V:5Y()+\'<4h id="I-1a-V-1Y">\'+\'<2M>cM</2M>\'+\'<3E 1m="2h" id="I-V-2h" 4Q-2M="cM" />\'+\'<2M>\'+q.1H.1b(\'1g\')+\'</2M>\'+\'<3E 1m="1g" id="I-V-2h-1g" 4Q-2M="\'+q.1H.1b(\'1g\')+\'" />\'+\'<2M><3E 1m="j6" id="I-V-8a"> \'+q.1H.1b(\'at\')+\'</2M>\'+\'</4h>\'};$.7w(q.G,q.G.1a)},cL:C(1x,2y){q.1a.ao[1x]=2y},oT:C($1a){q.1a.$8L=$(\'<1j>\').1c(\'id\',\'I-1a-8L\');$1a.6u(q.1a.$8L)},oY:C(id,1x,8I){E $5C=$(\'<a 2j="#" 3X="5C\'+id+\'">\').1g(1x);if(8I){$5C.2f(\'8I\')}E 3w=q;$5C.on(\'2A\',C(e){e.2t();$(\'.I-5C\').3p();$(\'.I-\'+$(q).1c(\'3X\')).2O();3w.1a.$8L.1h(\'a\').2U(\'8I\');$(q).2f(\'8I\')});q.1a.$8L.1F($5C)},oD:C(1x,iG){q.G.1a[1x]=iG},iB:C(1x){F q.G.1a[1x]},oL:C(){F q.$az.1h(\'4h\')},2K:C(6g,1J,2L){q.1a.6g=6g;q.1a.2L=2L;q.1a.2r();q.1a.iN();q.1a.iF(1J);q.1a.jS();q.1a.iE();if(1s q.1a.ao[6g]!=\'1y\'){q.1a.ao[6g].5Z(q)}},2O:C(){q.L.dH();if(q.L.6A()){q.1a.do()}M{q.1a.av()}if(q.G.cH){q.$4C.2f("I-1a-iI")}q.$81.2O();q.$4C.2O();q.$1a.1c(\'6H\',\'-1\');q.$1a.2m();q.1a.iP();q.L.8k();if(!q.L.6A()){3u($.1e(q.1a.av,q),0);$(3l).on(\'4M.I-1a\',$.1e(q.1a.4M,q))}q.1W.2q(\'pl\',q.1a.6g,q.$1a);$(1k).2Y(\'pd.1a\');q.$1a.1h(\'3E[1m=1g],3E[1m=2h],3E[1m=p1]\').on(\'1D.I-1a\',$.1e(q.1a.iQ,q))},av:C(){E 3i=q.$1a.p2();E a6=$(3l).3i();E 7q=$(3l).2L();if(q.1a.2L>7q){q.$1a.1O({2L:\'96%\',6d:(a6/2-3i/2)+\'px\'});F}if(3i>a6){q.$1a.1O({2L:q.1a.2L+\'px\',6d:\'p6\'})}M{q.$1a.1O({2L:q.1a.2L+\'px\',6d:(a6/2-3i/2)+\'px\'})}},do:C(){q.$1a.1O({2L:\'96%\',6d:\'2%\'})},4M:C(){if(q.L.6A()){q.1a.do()}M{q.1a.av()}},iF:C(1J){q.$8Z.B(1J)},iE:C(){q.$az.B(q.1a.iB(q.1a.6g))},jS:C(){if(1s $.fn.iD===\'1y\')F;q.$1a.iD({iJ:q.$8Z});q.$8Z.1O(\'nK\',\'nH\')},iQ:C(e){if(e.7m!=13)F;e.2t();q.$1a.1h(\'1u.I-1a-7B-23\').2A()},cI:C(){E 1u=$(\'<1u>\').2f(\'I-1a-23 I-1a-4j-23\').B(q.1H.1b(\'iR\'));1u.on(\'2A\',$.1e(q.1a.4j,q));q.$8Q.1F(1u)},iS:C(2M){F q.1a.cK(2M,\'75\')},cJ:C(2M){F q.1a.cK(2M,\'7B\')},cK:C(2M,3G){E 1u=$(\'<1u>\').2f(\'I-1a-23\').2f(\'I-1a-\'+3G+\'-23\').B(2M);q.$8Q.1F(1u);F 1u},iP:C(){E 4k=q.$8Q.1h(\'1u\');E cQ=4k.12;if(cQ===0)F;4k.1O(\'2L\',(6G/cQ)+\'%\')},2r:C(){q.1a.iM();q.$4C=$(\'<1j id="I-1a-2N"/>\').3p();q.$1a=$(\'<1j id="I-1a" 9D="nI" 4Q-nN="I-1a-7S" />\');q.$8Z=$(\'<7S id="I-1a-7S"/>\');q.$8v=$(\'<1u 1m="1u" id="I-1a-4j" 6H="1" 4Q-2M="nS" />\').B(\'&nR;\');q.$az=$(\'<1j id="I-1a-3c" />\');q.$8Q=$(\'<cR />\');q.$1a.1F(q.$8Z);q.$1a.1F(q.$8v);q.$1a.1F(q.$az);q.$1a.1F(q.$8Q);q.$4C.1F(q.$1a);q.$4C.ax(1k.3c)},iM:C(){q.$81=$(\'<1j id="I-1a-op">\').3p();$(\'3c\').6u(q.$81)},iN:C(){q.$8v.on(\'2A.I-1a\',$.1e(q.1a.4j,q));$(1k).on(\'2x.I-1a\',$.1e(q.1a.8T,q));q.$T.on(\'2x.I-1a\',$.1e(q.1a.8T,q));q.$4C.on(\'2A.I-1a\',$.1e(q.1a.4j,q))},jd:C(){q.$8v.2Y(\'2A.I-1a\');$(1k).2Y(\'2x.I-1a\');q.$T.2Y(\'2x.I-1a\');q.$4C.2Y(\'2A.I-1a\');$(3l).2Y(\'4M.I-1a\')},8T:C(e){if(e.7m!=q.3t.am)F;q.1a.4j(O)},4j:C(e){if(e){if(!$(e.1Q).3r(\'I-1a-4j-23\')&&e.1Q!=q.$8v[0]&&e.1Q!=q.$4C[0]){F}e.2t()}if(!q.$4C)F;q.1a.jd();q.L.aK();q.$81.1t();q.$4C.jr(\'oh\',$.1e(C(){q.$4C.1t();3u($.1e(q.L.aX,q),0);if(e!==1y)q.J.3g();$(1k.3c).1O(\'aY\',q.1a.of);q.1W.2q(\'pp\',q.1a.6g)},q))}}},1R:C(){F{2K:C(){if(1s q.G.je!="1y")F;if(q.L.1P(\'2F\')){E 3w=q;q.$T.1h(\'2H, 1d\').on(\'a8\',C(){3w.$T.1c(\'5c\',O);$(q).1c(\'5c\',1r)}).on(\'a9\',C(){3w.$T.1c(\'5c\',1r);$(q).1L(\'5c\')})}q.1R.9W();q.1R.5A()},1B:C(e,2i){q.1R.4k(e,2i);q.1R.7r()},cY:C($el,$1A){if(1s $1A==\'1y\'){E $1A=$(q.J.3v())}F $1A.is($el)||$1A.fY($el).12>0},7r:C(){E $1A=$(q.J.3v());$.1z(q.G.1R.7r,$.1e(C(1l,1E){E 1R=1E.1R,2k=1R.2k,$2w=1E.2w,cW=1s 1R[\'in\']!=\'1y\'?1R[\'in\']:O,cZ=1s 1R[\'2n\']!=\'1y\'?1R[\'2n\']:O;if($1A.2p(2k).82()>0){q.1R.cV($2w,cW,cZ)}M{q.1R.cV($2w,cZ,cW)}},q))},cV:C($2w,8z,ak){if(ak&&1s ak[\'1c\']!=\'1y\'){q.1R.cS($2w,ak.1c,1r)}if(1s 8z[\'1c\']!=\'1y\'){q.1R.cS($2w,8z.1c)}if(1s 8z[\'1J\']!=\'1y\'){$2w.1g(8z[\'1J\'])}},cS:C($2w,jE,cU){$.1z(jE,C(1l,1E){if(1l==\'1G\'){if(!cU){$2w.2f(1E)}M{$2w.2U(1E)}}M{if(!cU){$2w.1c(1l,1E)}M{$2w.1L(1l)}}})},dn:C($2w,2i,2T){if(1s 2T.1R=="1y")F;2T.2w=$2w;q.G.1R.7r.2R(2T)},4k:C(e,2i){E 1A=q.J.3v();E 1q=q.J.5Q();if(e!==O){q.1u.bV()}M{q.1u.bV(2i)}if(e===O&&2i!==\'B\'){if($.3q(2i,q.G.bq)!=-1)q.1u.q7(2i);F}$.1z(q.G.bJ,$.1e(C(1l,1E){E ae=$(1q).2p(1l,q.$T[0]);E bN=$(1A).2p(1l,q.$T[0]);if(ae.12!==0&&!q.L.4v(ae))F;if(!q.L.4v(bN))F;if(ae.12!==0||bN.2p(1l,q.$T[0]).12!==0){q.1u.8j(1E)}},q));E $1q=$(1q).2p(q.G.8q.4s().3f(),q.$T[0]);if(q.L.4v(1q)&&$1q.12){E 5a=($1q.1O(\'1g-5a\')===\'\')?\'2c\':$1q.1O(\'1g-5a\');q.1u.8j(\'5a\'+5a)}},q1:C(Y,2i){q.G.bq.2R(2i);q.G.bJ[Y]=2i},9W:C(){q.$T.1h(\'1M\').1z($.1e(C(i,1M){E $1M=$(1M);$1M.2p(\'a\',q.$T[0]).on(\'2A\',C(e){e.2t()});if(q.L.1P(\'2F\'))$1M.1c(\'pX\',\'on\');q.N.jC($1M)},q));$(1k).on(\'2A.I-N-75.\'+q.2G,$.1e(C(e){q.1R.N=O;if(e.1Q.1n==\'bF\'&&q.L.4v(e.1Q)){q.1R.N=(q.1R.N&&q.1R.N==e.1Q)?O:e.1Q}},q))},5A:C(){if(!q.G.jz)F;q.$T.1h(\'a\').on(\'5B.I.\'+q.2G+\' 2A.I.\'+q.2G,$.1e(q.1R.jB,q));q.$T.on(\'5B.I.\'+q.2G+\' 2A.I.\'+q.2G,$.1e(q.1R.bM,q));$(1k).on(\'5B.I.\'+q.2G+\' 2A.I.\'+q.2G,$.1e(q.1R.bM,q))},jI:C($V){F $V.2D()},jB:C(e){E $el=$(e.1Q);if($el[0].1n==\'bF\')F;if($el[0].1n!==\'A\')$el=$el.2p(\'a\',q.$T[0]);if($el[0].1n!==\'A\')F;E $V=$el;E 3x=q.1R.jI($V);E 3n=$(\'<1i 1G="I-V-3n"></1i>\');E 2j=$V.1c(\'2j\');if(2j===1y){2j=\'\'}if(2j.12>24)2j=2j.aV(0,24)+\'...\';E jP=$(\'<a 2j="\'+$V.1c(\'2j\')+\'" 1Q="7v" />\').B(2j).2f(\'I-V-3n-7B\');E jQ=$(\'<a 2j="#" />\').B(q.1H.1b(\'7e\')).on(\'2A\',$.1e(q.V.2O,q)).2f(\'I-V-3n-7B\');E jN=$(\'<a 2j="#" />\').B(q.1H.1b(\'6t\')).on(\'2A\',$.1e(q.V.6t,q)).2f(\'I-V-3n-7B\');3n.1F(jP).1F(\' | \').1F(jQ).1F(\' | \').1F(jN);3n.1O({2X:(3x.2X+5J($V.1O(\'3M-3i\'),10))+\'px\',2c:3x.2c+\'px\'});$(\'.I-V-3n\').1t();$(\'3c\').1F(3n)},bM:C(e){e=e.87||e;E 1Q=e.1Q;E $1q=$(1Q).2p(\'a\',q.$T[0]);if($1q.12!==0&&$1q[0].1n===\'A\'&&1Q.1n!==\'A\'){F}M if((1Q.1n===\'A\'&&q.L.4v(1Q))||$(1Q).3r(\'I-V-3n-7B\')){F}$(\'.I-V-3n\').1t()}}},2W:C(){F{2K:C(B){if(q.G.1K)F B;if(B===\'\'||B===\'<p></p>\')F q.G.6s;B=B+"\\n";q.2W.aA=[];q.2W.z=0;B=B.K(/(<br\\s?\\/?>){1,}\\n?<\\/26>/gi,\'</26>\');B=q.2W.jK(B);B=q.2W.jy(B);B=q.2W.jf(B);B=q.2W.jj(B);B=q.2W.9d(B);B=q.2W.jk(B);B=B.K(29 2l(\'<br\\\\s?/?>\\n?<(\'+q.G.bL.3d(\'|\')+\')(.*?[^>])>\',\'gi\'),\'<p><br /></p>\\n<$1$2>\');F $.3k(B)},jK:C(B){E $1j=$(\'<1j />\').1F(B);$1j.1h(\'26 p\').2u(C(){F $(q).1F(\'<br />\').2a()});B=$1j.B();$1j.1h(q.G.bL.3d(\', \')).1z($.1e(C(i,s){q.2W.z++;q.2W.aA[q.2W.z]=s.7T;B=B.K(s.7T,\'\\n{K\'+q.2W.z+\'}\')},q));F B},jy:C(B){E bS=B.1V(/<!--([\\w\\W]*?)-->/gi);if(!bS)F B;$.1z(bS,$.1e(C(i,s){q.2W.z++;q.2W.aA[q.2W.z]=s;B=B.K(s,\'\\n{K\'+q.2W.z+\'}\')},q));F B},jk:C(B){$.1z(q.2W.aA,C(i,s){s=(1s s!==\'1y\')?s.K(/\\$/g,\'&#36;\'):s;B=B.K(\'{K\'+i+\'}\',s)});F B},jj:C(B){E 4K=B.4p(29 2l(\'\\n\',\'g\'),-1);B=\'\';if(4K){E 2o=4K.12;2C(E i=0;i<2o;i++){if(!4K.qJ(i))F;if(4K[i].3L(\'{K\')==-1){4K[i]=4K[i].K(/<p>\\n\\t?<\\/p>/gi,\'\');4K[i]=4K[i].K(/<p><\\/p>/gi,\'\');if(4K[i]!==\'\'){B+=\'<p>\'+4K[i].K(/^\\n+|\\n+$/g,"")+"</p>"}}M B+=4K[i]}}F B},jf:C(B){B=B.K(/<br \\/>\\s*<br \\/>/gi,"\\n\\n");B=B.K(/<br\\s?\\/?>\\n?<br\\s?\\/?>/gi,"\\n<br /><br />");B=B.K(29 2l("\\r\\n",\'g\'),"\\n");B=B.K(29 2l("\\r",\'g\'),"\\n");B=B.K(29 2l("/\\n\\n+/"),\'g\',"\\n\\n");F B},9d:C(B){B=B.K(29 2l(\'</26></p>\',\'gi\'),\'</26>\');B=B.K(29 2l(\'<p></26>\',\'gi\'),\'</26>\');B=B.K(29 2l(\'<p><26>\',\'gi\'),\'<26>\');B=B.K(29 2l(\'<26></p>\',\'gi\'),\'<26>\');B=B.K(29 2l(\'<p><p \',\'gi\'),\'<p \');B=B.K(29 2l(\'<p><p>\',\'gi\'),\'<p>\');B=B.K(29 2l(\'</p></p>\',\'gi\'),\'</p>\');B=B.K(29 2l(\'<p>\\\\s?</p>\',\'gi\'),\'\');B=B.K(29 2l("\\n</p>",\'gi\'),\'</p>\');B=B.K(29 2l(\'<p>\\t?\\t?\\n?<p>\',\'gi\'),\'<p>\');B=B.K(29 2l(\'<p>\\t*</p>\',\'gi\'),\'\');F B}}},5u:C(){F{3N:C(e){if(!q.G.jg){3u($.1e(q.1d.1S,q),1);F}q.7k=1r;q.28.1U();q.J.3m();q.L.8k();q.5u.jo();$(3l).on(\'6m.I-jn\',$.1e(C(){$(3l).3U(q.aJ)},q));3u($.1e(C(){E B=q.$5b.B();q.$5b.1t();q.J.3g();q.L.aX();q.5u.1Y(B);$(3l).2Y(\'6m.I-jn\');if(q.2z.b6()){q.2z.31()}},q),1)},jo:C(){q.$5b=$(\'<1j>\').B(\'\').1c(\'5c\',\'1r\').1O({4e:\'7Y\',2L:0,2X:0,2c:\'-qN\'});if(q.L.1P(\'2F\')){q.$2N.1F(q.$5b)}M{if($(\'.1a-3c\').12>0){$(\'.1a.in .1a-3c\').1F(q.$5b)}M{$(\'3c\').1F(q.$5b)}}q.$5b.2m()},1Y:C(B){B=q.1W.2q(\'qi\',B);B=(q.L.8m())?q.1v.8B(B,O):q.1v.8B(B);B=q.1W.2q(\'5u\',B);if(q.L.8m()){q.1Y.1U(B,O)}M{q.1Y.B(B,O)}q.L.8u();q.7k=O;3u($.1e(q.1v.4y,q),10);3u($.1e(C(){E jq=q.$T.1h(\'1i\');$.1z(jq,C(i,s){E B=s.3A.K(/\\5X/,\'\');if(B===\'\'&&s.4u.12===0)$(s).1t()})},q),10)}}},3e:C(){F{a7:C(){if(!q.3e.is())F;q.$T.1c(\'3e\',q.$2k.1c(\'3e\'));q.3e.3j();q.$T.on(\'1D.I-3e\',$.1e(q.3e.3j,q))},3j:C(){3u($.1e(C(){E 1C=q.L.3z(q.$T.B(),O)?\'2f\':\'2U\';q.$T[1C](\'I-3e\')},q),5)},1t:C(){q.$T.2U(\'I-3e\')},is:C(){if(q.G.3e){F q.$2k.1c(\'3e\',q.G.3e)}M{F!(1s q.$2k.1c(\'3e\')==\'1y\'||q.$2k.1c(\'3e\')===\'\')}}}},5I:C(){F{2O:C(){$(1k.3c).1F($(\'<1j id="I-5I"><1i></1i></1j>\'));$(\'#I-5I\').qt()},3p:C(){$(\'#I-5I\').jr(qr,C(){$(q).1t()})}}},J:C(){F{1b:C(){q.2V=1k.4E();if(1k.4E&&q.2V.6f&&q.2V.7b){q.14=q.2V.6f(0)}M{q.14=1k.8b()}},4b:C(){52{q.2V.9E()}4U(e){}q.2V.4b(q.14)},3v:C(){E el=O;q.J.1b();if(q.2V&&q.2V.7b>0){el=q.2V.6f(0).jl}F q.L.4v(el)},5Q:C(4X){4X=4X||q.J.3v();if(4X){F q.L.4v($(4X).1q()[0])}F O},jp:C(){F 3l.4E().jv.qw},qh:C(){F 3l.4E().jv.qG},4a:C(Q){Q=Q||q.J.3v();53(Q){if(q.L.7L(Q.1n)){F($(Q).3r(\'I-T\'))?O:Q}Q=Q.e8}F O},e7:C(21,2d){q.J.1b();if(q.14&&q.14.4Y){F O}E 67=[];21=(1s 21==\'1y\'||21===O)?q.J.6V():21;E 4N=q.G.4N;4N.2R(\'1i\');if(1s 2d!==\'1y\'){2C(E i=0;i<2d.12;i++){4N.2R(2d[i])}}$.1z(21,$.1e(C(i,Q){if($.3q(Q.1n.3f(),4N)!=-1){67.2R(Q)}},q));F(67.12===0)?O:67},jh:C(2d){q.J.1b();if(q.14&&q.14.4Y){F O}E 67=[];E 21=q.J.6V();$.1z(21,$.1e(C(i,Q){if($.3q(Q.1n.3f(),2d)!=-1){67.2R(Q)}},q));F(67.12===0)?O:67},42:C(21){q.J.1b();if(q.14&&q.14.4Y){F[q.J.4a()]}E 1Z=[];21=(1s 21==\'1y\')?q.J.6V():21;$.1z(21,$.1e(C(i,Q){if(q.L.6J(Q)){q.J.jm=Q;1Z.2R(Q)}},q));F(1Z.12===0)?[q.J.4a()]:1Z},ji:C(){F q.J.jm},6V:C(){q.J.1b();E 7R=q.J.dX(1);E 9f=q.J.dX(2);if(q.14.4Y===O){if(3l.4E){E 2V=3l.4E();if(2V.7b>0){E 14=2V.6f(0);E jx=14.jl,ed=14.ed;E 84=14.7I();84.48(O);84.3R(9f);84.2Q(jx,ed);84.48(1r);84.3R(7R);14.9p(7R);14.jL(9f);2V.9E();2V.4b(14)}}}M{q.J.jJ(q.14,7R,1r);9f=7R}E 21=[];E 9c=0;E 3w=q;q.$T.1h(\'*\').1z(C(){if(q==7R){E 1q=$(q).1q();if(1q.12!==0&&1q[0].1n!=\'eh\'&&3w.L.4v(1q[0])){21.2R(1q[0])}21.2R(q);9c=1}M{if(9c>0){21.2R(q);9c=9c+1}}if(q==9f){F O}});E e6=[];E 2o=21.12;2C(E i=0;i<2o;i++){if(21[i].id!=\'21-2s-1\'&&21[i].id!=\'21-2s-2\'){e6.2R(21[i])}}q.J.jM();F e6},dX:C(5P){F $(\'<1i id="21-2s-\'+5P+\'" 1G="I-21-2s" 1f-3K="I">\'+q.G.5R+\'</1i>\')[0]},jJ:C(14,Q,1m){E 14=14.7I();52{14.48(1m);14.3R(Q)}4U(e){}},jM:C(){$(1k).1h(\'1i.I-21-2s\').1t();q.$T.1h(\'1i.I-21-2s\').1t()},qd:C(2b,2g){q.1T.dC(2b,2g)},62:C(Y){q.J.1b();if(q.14.4Y)F O;E 4P=1k.3y(Y);4P.83(q.14.ps());q.14.3R(4P);F 4P},9s:C(Q){if(q.L.1P(\'4g\')){Q=Q[0]||Q;E 14=1k.8b();14.95(Q)}M{q.1T.1U(Q,0,Q,1)}},af:C(){q.J.1b();q.14.95(q.$T[0]);q.J.4b()},1t:C(){q.J.1b();q.2V.9E()},3m:C(){q.J.jO()},jO:C(){q.J.1b();E 6n=q.J.6Q(1);q.J.dE(q.14,6n,1r);if(q.14.4Y===O){E 92=q.J.6Q(2);q.J.dE(q.14,92,O)}q.jA=q.$T.B()},6Q:C(5P){if(1s 5P==\'1y\')5P=1;F $(\'<1i id="J-2s-\'+5P+\'" 1G="I-J-2s"  1f-3K="I">\'+q.G.5R+\'</1i>\')[0]},5f:C(5P){F q.L.5N(q.J.6Q(5P))},dE:C(14,Q,1m){14=14.7I();52{14.48(1m);14.3R(Q)}4U(e){q.2m.2Q()}},3g:C(){E 6n=q.$T.1h(\'1i#J-2s-1\');E 92=q.$T.1h(\'1i#J-2s-2\');if(q.L.1P(\'4g\')){q.$T.2m()}if(6n.12!==0&&92.12!==0){q.1T.1U(6n,0,92,0)}M if(6n.12!==0){q.1T.1U(6n,0,6n,0)}M{q.$T.2m()}q.J.8O();q.jA=O},8O:C(){q.$T.1h(\'1i.I-J-2s\').1z(C(i,s){E 1g=$(s).1g().K(/\\5X/g,\'\');if(1g===\'\')$(s).1t();M $(s).2u(C(){F $(q).2a()})})},dr:C(){q.J.1b();F q.2V.4s()},pY:C(){E B=\'\';q.J.1b();if(q.2V.7b){E ds=1k.3y(\'1j\');E 2o=q.2V.7b;2C(E i=0;i<2o;++i){ds.83(q.2V.6f(i).pZ())}B=ds.3A}F q.1v.9Y(B)},jG:C(B){q.J.1b();q.14.4S();E 1j=1k.3y("1j");1j.3A=B;E 4L=1k.9P(),4A;53((4A=1j.9N)){4L.83(4A)}q.14.3R(4L)},q8:C(B){B=q.J.5f(1)+B+q.J.5f(2);q.J.1b();if(3l.4E&&3l.4E().6f){q.J.jG(B)}M if(1k.J&&1k.J.8b){q.14.jF(B)}q.J.3g();q.1d.1S()}}},6i:C(){F{3N:C(e,1l){if(!q.G.6i){if((e.8w||e.6I)&&(1l===66||1l===73))e.2t();F O}$.1z(q.G.6i,$.1e(C(5h,4x){E 51=5h.4p(\',\');E 2o=51.12;2C(E i=0;i<2o;i++){if(1s 51[i]===\'6W\'){q.6i.7W(e,$.3k(51[i]),$.1e(C(){E 1C;if(4x.1C.3L(/\\./)!=\'-1\'){1C=4x.1C.4p(\'.\');if(1s q[1C[0]]!=\'1y\'){q[1C[0]][1C[1]].8E(q,4x.6j)}}M{q[4x.1C].8E(q,4x.6j)}},q))}}},q))},7W:C(e,51,kP){E kC={8:"pv",9:"5C",10:"F",13:"F",16:"6L",17:"4f",18:"7l",19:"qP",20:"qn",27:"qe",32:"3h",33:"pt",34:"o8",35:"2g",36:"oc",37:"2c",38:"oq",39:"4z",40:"nQ",45:"1Y",46:"4l",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",6G:"4",o2:"5",o4:"6",o5:"7",pn:"8",po:"9",oF:"*",oN:"+",oW:"-",oO:".",oR:"/",od:"f1",oS:"f2",oQ:"f3",oP:"f4",oU:"f5",oX:"f6",oV:"f7",oM:"f8",oE:"f9",oB:"oC",oG:"oH",oK:"oJ",oI:"oZ",p0:"6m",pi:"-",ph:";",pg:"=",pf:",",pj:"-",pk:".",pm:"/",pc:"`",dG:"[",p5:"\\\\",dS:"]",p3:"\'"};E dM={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"p8","=":"+",";":": ","\'":"\\"",",":"<",".":">","/":"?","\\\\":"|"};51=51.3f().4p(" ");E bn=kC[e.3t],8G=5Y.oA(e.7m).3f(),74="",79={};$.1z(["7l","4f","5k","6L"],C(4W,by){if(e[by+\'oz\']&&bn!==by){74+=by+\'+\'}});if(bn)79[74+bn]=1r;if(8G){79[74+8G]=1r;79[74+dM[8G]]=1r;if(74==="6L+"){79[dM[8G]]=1r}}2C(E i=0,2o=51.12;i<2o;i++){if(79[51[i]]){e.2t();F kP.8E(q,kU)}}}}},2I:C(){F{1b:C(1d){if(!q.G.2I)F 1d;E dv=[\'kS\',\'3c\',\'dO\',\'hr\',\'i?nY\',\'V\',\'5k\',\'o0\',\'1p\',\'3V\',\'3T\',\'dJ\',\'dP\',\'dQ\'];E du=[\'li\',\'dt\',\'dt\',\'h[1-6]\',\'3Z\',\'3V\'];E 8x=[\'p\',\'26\',\'1j\',\'dl\',\'kd\',\'69\',\'nU\',\'k7\',\'ol\',\'2H\',\'7F\',\'2Z\',\'5S\',\'6S\',\'3s\'];q.2I.kq=29 2l(\'^<(/?\'+dv.3d(\'|/?\')+\'|\'+du.3d(\'|\')+\')[ >]\');q.2I.kc=29 2l(\'^<(br|/?\'+dv.3d(\'|/?\')+\'|/\'+du.3d(\'|/\')+\')[ >]\');q.2I.8x=29 2l(\'^</?(\'+8x.3d(\'|\')+\')[ >]\');E i=0,aU=1d.12,3W=0,2b=4d,2g=4d,Y=\'\',2n=\'\',5j=\'\';q.2I.94=0;2C(;i<aU;i++){3W=i;if(-1==1d.4q(i).4I(\'<\')){2n+=1d.4q(i);F q.2I.dq(2n)}53(3W<aU&&1d.5O(3W)!=\'<\'){3W++}if(i!=3W){5j=1d.4q(i,3W-i);if(!5j.1V(/^\\s{2,}$/g)){if(\'\\n\'==2n.5O(2n.12-1))2n+=q.2I.7y();M if(\'\\n\'==5j.5O(0)){2n+=\'\\n\'+q.2I.7y();5j=5j.K(/^\\s+/,\'\')}2n+=5j}if(5j.1V(/\\n/))2n+=\'\\n\'+q.2I.7y()}2b=3W;53(3W<aU&&\'>\'!=1d.5O(3W)){3W++}Y=1d.4q(2b,3W-2b);i=3W;E t;if(\'!--\'==Y.4q(1,3)){if(!Y.1V(/--$/)){53(\'-->\'!=1d.4q(3W,3)){3W++}3W+=2;Y=1d.4q(2b,3W-2b);i=3W}if(\'\\n\'!=2n.5O(2n.12-1))2n+=\'\\n\';2n+=q.2I.7y();2n+=Y+\'>\\n\'}M if(\'!\'==Y[1]){2n=q.2I.aW(Y+\'>\',2n)}M if(\'?\'==Y[1]){2n+=Y+\'>\\n\'}M if(t=Y.1V(/^<(3V|1p|2H)/i)){t[1]=t[1].3f();Y=q.2I.dy(Y);2n=q.2I.aW(Y,2n);2g=5Y(1d.4q(i+1)).3f().4I(\'</\'+t[1]);if(2g){5j=1d.4q(i+1,2g);i+=2g;2n+=5j}}M{Y=q.2I.dy(Y);2n=q.2I.aW(Y,2n)}}F q.2I.dq(2n)},7y:C(){E s=\'\';2C(E j=0;j<q.2I.94;j++){s+=\'\\t\'}F s},dq:C(1d){1d=1d.K(/\\n\\s*\\n/g,\'\\n\');1d=1d.K(/^[\\s\\n]*/,\'\');1d=1d.K(/[\\s\\n]*$/,\'\');1d=1d.K(/<3V(.*?)>\\n<\\/3V>/gi,\'<3V$1></3V>\');q.2I.94=0;F 1d},dy:C(Y){E 8e=\'\';Y=Y.K(/\\n/g,\' \');Y=Y.K(/\\s{2,}/g,\' \');Y=Y.K(/^\\s+|\\s+$/g,\' \');E dF=\'\';if(Y.1V(/\\/$/)){dF=\'/\';Y=Y.K(/\\/+$/,\'\')}E m;53(m=/\\s*([^= ]+)(?:=(([\'"\']).*?\\3|[^ ]+))?/.5d(Y)){if(m[2])8e+=m[1].3f()+\'=\'+m[2];M if(m[1])8e+=m[1].3f();8e+=\' \';Y=Y.4q(m[0].12)}F 8e.K(/\\s*$/,\'\')+dF+\'>\'},aW:C(Y,2n){E nl=Y.1V(q.2I.8x);if(Y.1V(q.2I.kq)||nl){2n=2n.K(/\\s*$/,\'\');2n+=\'\\n\'}if(nl&&\'/\'==Y.5O(1))q.2I.94--;if(\'\\n\'==2n.5O(2n.12-1))2n+=q.2I.7y();if(nl&&\'/\'!=Y.5O(1))q.2I.94++;2n+=Y;if(Y.1V(q.2I.kc)||Y.1V(q.2I.8x)){2n=2n.K(/ *$/,\'\')}F 2n}}},1I:C(){F{jY:C(){E 4W=$.3q(\'1i\',q.G.3S);if(4W!==-1){q.G.3S.9n(4W,1)}if(q.G.4t)q.G.49=O;if(q.G.4T)q.G.1L=O;if(q.G.1K)F;E 2d=[\'p\',\'4h\'];if(q.G.4t)q.1I.jX(2d);if(q.G.49)q.1I.k8(2d)},jX:C(2d){E 2o=2d.12;2C(E i=0;i<2o;i++){if($.3q(2d[i],q.G.4t)==-1){q.G.4t.2R(2d[i])}}},k8:C(2d){E 2o=2d.12;2C(E i=0;i<2o;i++){E 3x=$.3q(2d[i],q.G.49);if(3x!=-1){q.G.49.9n(3x,1)}}},2K:C(B,3Y){q.1I.2E={49:q.G.49,4t:q.G.4t,6C:q.G.6C,5F:q.G.5F,5r:q.G.5r,5m:q.G.5m,1L:q.G.1L,4T:q.G.4T,6N:q.G.6N,3S:q.G.3S};$.7w(q.1I.2E,3Y);B=q.1I.6C(B);q.1I.$1j=$(\'<1j />\').1F(B);q.1I.5F();q.1I.5r();q.1I.k6();q.1I.1L();q.1I.3S();q.1I.kR();q.1I.5m();q.1I.6N();B=q.1I.$1j.B();q.1I.$1j.1t();F B},6C:C(B){if(!q.1I.2E.6C)F B;F B.K(/<!--[\\s\\S]*?-->/gi,\'\')},5F:C(B){if(!q.1I.2E.5F)F B;E 2o=q.1I.2E.5F.12;E 5L=[],e2=[];2C(E i=0;i<2o;i++){e2.2R(q.1I.2E.5F[i][1]);5L.2R(q.1I.2E.5F[i][0])}$.1z(5L,$.1e(C(1l,1E){q.1I.$1j.1h(1E).2u(C(){F $("<"+e2[1l]+" />",{B:$(q).B()})})},q))},5r:C(){if(!q.1I.2E.5r)F;E 2o=q.1I.2E.5r.12;q.1I.$1j.1h(\'1i\').1z($.1e(C(n,s){E $el=$(s);E 1p=$el.1c(\'1p\');2C(E i=0;i<2o;i++){if(1p&&1p.1V(29 2l(\'^\'+q.1I.2E.5r[i][0],\'i\'))){E 1n=q.1I.2E.5r[i][1];$el.2u(C(){E Y=1k.3y(1n);F $(Y).1F($(q).2a())})}}},q))},k6:C(){if(!q.1I.2E.49&&q.1I.2E.4t){q.1I.$1j.1h(\'*\').6q(q.1I.2E.4t.3d(\',\')).1z(C(i,s){if(s.3A===\'\')$(s).1t();M $(s).2a().44()})}if(q.1I.2E.49){q.1I.$1j.1h(q.1I.2E.49.3d(\',\')).1z(C(i,s){if($(s).3r(\'I-3V-Y\')||$(s).3r(\'I-J-2s\'))F;if(s.3A===\'\')$(s).1t();M $(s).2a().44()})}},1L:C(){E 2o;if(!q.1I.2E.1L&&q.1I.2E.4T){E e4=[],e5=[];2o=q.1I.2E.4T.12;2C(E i=0;i<2o;i++){e4.2R(q.1I.2E.4T[i][0]);e5.2R(q.1I.2E.4T[i][1])}q.1I.$1j.1h(\'*\').1z($.1e(C(n,s){E $el=$(s);E 3x=$.3q($el[0].1n.3f(),e4);E 5t=q.1I.kQ(3x,e5,$el);if(5t){$.1z(5t,C(z,f){$el.1L(f)})}},q))}if(q.1I.2E.1L){2o=q.1I.2E.1L.12;2C(E i=0;i<2o;i++){E 9w=q.1I.2E.1L[i][1];if($.b2(9w))9w=9w.3d(\' \');q.1I.$1j.1h(q.1I.2E.1L[i][0]).1L(9w)}}},kQ:C(3x,5q,$el){E 5t=[];if(3x==-1){$.1z($el[0].4u,C(i,2w){5t.2R(2w.1x)})}M if(5q[3x]==\'*\'){5t=[]}M{$.1z($el[0].4u,C(i,2w){if($.b2(5q[3x])){if($.3q(2w.1x,5q[3x])==-1){5t.2R(2w.1x)}}M if(5q[3x]!=2w.1x){5t.2R(2w.1x)}})}F 5t},kL:C(el,ba){ba=29 2l(ba,"g");F el.1z(C(){E 3w=$(q);E 2o=q.4u.12-1;2C(E i=2o;i>=0;i--){E 2w=q.4u[i];if(2w&&2w.nM&&2w.1x.3L(ba)>=0){3w.1L(2w.1x)}}})},3S:C(){if(!q.1I.2E.3S)F;q.1I.$1j.1h(q.1I.2E.3S.3d(\',\')).1z(C(){E $el=$(q);E 1g=$el.1g();1g=1g.K(/\\5X/g,\'\');1g=1g.K(/&5i;/gi,\'\');1g=1g.K(/\\s/g,\'\');if(1g===\'\'&&$el.3O().12===0){$el.1t()}})},kR:C(){q.1I.$1j.1h(\'li p\').2a().44()},5m:C(){if(!q.1I.2E.5m)F;E 2d=q.1I.2E.5m;if($.b2(q.1I.2E.5m))2d=q.1I.2E.5m.3d(\',\');q.1I.kL(q.1I.$1j.1h(2d),\'^(1f-)\')},6N:C(){if(!q.1I.2E.6N)F;q.1I.$1j.1h(q.1I.2E.6N.3d(\',\')).1z(C(){if(q.4u.12===0){$(q).2a().44()}})}}},1B:C(){F{3N:C(){F{B:{1J:q.1H.1b(\'B\'),1C:\'1d.3j\'},3b:{1J:q.1H.1b(\'3b\'),1o:{p:{1J:q.1H.1b(\'kE\'),1C:\'R.31\'},26:{1J:q.1H.1b(\'e1\'),1C:\'R.31\'},2H:{1J:q.1H.1b(\'1d\'),1C:\'R.31\'},h1:{1J:q.1H.1b(\'iC\'),1C:\'R.31\'},h2:{1J:q.1H.1b(\'fz\'),1C:\'R.31\'},h3:{1J:q.1H.1b(\'fy\'),1C:\'R.31\'},h4:{1J:q.1H.1b(\'fF\'),1C:\'R.31\'},h5:{1J:q.1H.1b(\'fv\'),1C:\'R.31\'}}},4n:{1J:q.1H.1b(\'4n\'),1C:\'25.31\'},4m:{1J:q.1H.1b(\'4m\'),1C:\'25.31\'},5W:{1J:q.1H.1b(\'5W\'),1C:\'25.31\'},5p:{1J:q.1H.1b(\'5p\'),1C:\'25.31\'},5n:{1J:\'&nO; \'+q.1H.1b(\'5n\'),1C:\'2e.3j\'},5o:{1J:\'1. \'+q.1H.1b(\'5o\'),1C:\'2e.3j\'},7a:{1J:\'< \'+q.1H.1b(\'7a\'),1C:\'3B.9j\'},3B:{1J:\'> \'+q.1H.1b(\'3B\'),1C:\'3B.bB\'},N:{1J:q.1H.1b(\'N\'),1C:\'N.2O\'},22:{1J:q.1H.1b(\'22\'),1C:\'22.2O\'},V:{1J:q.1H.1b(\'V\'),1o:{V:{1J:q.1H.1b(\'bx\'),1C:\'V.2O\',1R:{2k:\'a\',in:{1J:q.1H.1b(\'dB\'),},2n:{1J:q.1H.1b(\'bx\')}}},6t:{1J:q.1H.1b(\'6t\'),1C:\'V.6t\',1R:{2k:\'a\',2n:{1c:{\'1G\':\'I-1o-V-dA\',\'4Q-7c\':1r}}}}}},3a:{1J:q.1H.1b(\'3a\'),1o:{2c:{1J:q.1H.1b(\'fm\'),1C:\'3a.2c\'},5E:{1J:q.1H.1b(\'fs\'),1C:\'3a.5E\'},4z:{1J:q.1H.1b(\'fI\'),1C:\'3a.4z\'},9r:{1J:q.1H.1b(\'fJ\'),1C:\'3a.9r\'}}},aE:{1J:q.1H.1b(\'aE\'),1C:\'3M.1Y\'}}},2r:C(){q.1B.ey();q.1B.eB();q.1B.eu();if(q.G.4k.12===0)F;q.$1B=q.1B.g9();q.1B.fU();q.1B.1F();q.1B.g5();q.1B.g6();q.1B.fK();if(q.G.bq){q.$T.on(\'g3.I 2x.I 2m.I\',$.1e(q.1R.1B,q))}},g9:C(){F $(\'<3s>\').2f(\'I-1B\').1c({\'id\':\'I-1B-\'+q.2G,\'9D\':\'1B\'})},g5:C(){$.1z(q.G.1B.3b.1o,$.1e(C(i,s){if($.3q(i,q.G.3b)==-1)75 q.G.1B.3b.1o[i]},q))},g6:C(){$.1z(q.G.4k,$.1e(C(i,2i){if(!q.G.1B[2i])F;if(2i===\'22\'){if(q.G.7D===O)F;M if(!q.G.7D&&q.G.7P===O)F}if(2i===\'N\'){if(q.G.7J===O)F;M if(!q.G.7J&&q.G.7P===O)F}E 2T=q.G.1B[2i];q.$1B.1F($(\'<li>\').1F(q.1u.2r(2i,2T)))},q))},1F:C(){if(q.G.9M){q.$1B.2f(\'I-1B-oo\');$(q.G.9M).B(q.$1B)}M{q.$2N.6u(q.$1B)}},fK:C(){if(!q.L.7n())F;if(q.G.9M)F;if(!q.G.fP)F;q.1B.dU();$(q.G.6B).on(\'6m.I.\'+q.2G,$.1e(q.1B.dU,q))},fU:C(){if(q.L.6A()&&q.G.fR){q.$1B.2f(\'I-1B-aY\')}},eu:C(){if(q.G.4B)F;E 4W=q.G.4k.4I(\'B\');if(4W!==-1){q.G.4k.9n(4W,1)}},ey:C(){if(q.G.dK.12===0)F;$.1z(q.G.dK,$.1e(C(i,s){E 4W=q.G.4k.4I(s);q.G.4k.9n(4W,1)},q))},eB:C(){if(!q.L.6A()||q.G.dW.12===0)F;$.1z(q.G.dW,$.1e(C(i,s){E 4W=q.G.4k.4I(s);q.G.4k.9n(4W,1)},q))},dU:C(){E 3U=$(q.G.6B).3U();E 6v=1;if(q.G.6B===1k){6v=q.$2N.2D().2X}if((3U+q.G.6z)>6v){q.1B.er(3U,6v)}M{q.1B.eW()}},er:C(3U,6v){E 2X=q.G.6z+3U-6v;E 2c=0;E 2g=6v+q.$2N.3i()-32;E 2L=q.$2N.7t();q.$1B.2f(\'1B-7Y-2N\');q.$1B.1O({4e:\'9x\',2L:2L,2X:2X+\'px\',2c:2c});if(3U>2g)$(\'.I-1o-\'+q.2G+\':dw\').3p();q.1B.eJ();q.$1B.1O(\'eX\',(3U<2g)?\'dw\':\'hV\')},eW:C(){q.$1B.1O({4e:\'ob\',2L:\'ad\',2X:0,2c:0,eX:\'dw\'});q.1B.eO();q.$1B.2U(\'1B-7Y-2N\')},eJ:C(){E 2X=q.$1B.6b()+q.G.6z;E 4e=\'7Y\';if(q.G.6B!==1k){2X=(q.$1B.6b()+q.$1B.2D().2X)+q.G.6z;4e=\'9x\'}$(\'.I-1o-\'+q.2G).1z(C(){$(q).1O({4e:4e,2X:2X+\'px\'})})},eO:C(){E 2X=(q.$1B.6b()+q.$1B.2D().2X);$(\'.I-1o-\'+q.2G).1z(C(){$(q).1O({4e:\'9x\',2X:2X+\'px\'})})}}},1w:C(){F{3N:C(id,2h,2y){q.1w.4V=O;q.1w.2y=2y;q.1w.2h=2h;q.1w.$el=$(id);q.1w.$4c=$(\'<1j id="I-4c" />\');q.1w.$e0=$(\'<1j id="I-4c-3e" />\').1g(q.1H.1b(\'ev\'));q.1w.$3E=$(\'<3E 1m="22" 1x="22" />\');q.1w.$e0.1F(q.1w.$3E);q.1w.$4c.1F(q.1w.$e0);q.1w.$el.1F(q.1w.$4c);q.1w.$4c.2Y(\'I.1w\');q.1w.$3E.2Y(\'I.1w\');q.1w.$4c.on(\'pq.I.1w\',$.1e(q.1w.bD,q));q.1w.$4c.on(\'oi.I.1w\',$.1e(q.1w.iv,q));q.1w.$3E.on(\'iz.I.1w\',$.1e(C(e){e=e.87||e;q.1w.9R(q.1w.$3E[0].5T[0],e)},q));q.1w.$4c.on(\'58.I.1w\',$.1e(C(e){e.2t();q.1w.$4c.2U(\'7X-dL\').2f(\'7X-58\');q.1w.au(e)},q))},hL:C(22,e){q.1w.4V=1r;q.1w.9R(22,e)},au:C(e){e=e.87||e;E 5T=e.9Z.5T;q.1w.9R(5T[0],e)},9R:C(22,e){if(q.G.7P){q.1w.dZ(22);q.1w.i1(22);F}E 4o=!!3l.9V?29 9V():4d;if(3l.9V){q.1w.dZ(22);E 1x=(q.1w.1m==\'N\')?q.G.hH:q.G.hJ;4o.1F(1x,22)}q.5I.2O();q.1W.2q(\'og\',e,4o);q.1w.hp(4o,e)},dZ:C(22){q.1w.hS(22);if(q.1w.4V){q.1w.2h=(q.1w.1m==\'N\')?q.G.7J:q.G.7D;q.1w.2y=(q.1w.1m==\'N\')?q.N.1Y:q.22.1Y}},hS:C(22){q.1w.1m=\'N\';if(q.G.hQ.4I(22.1m)==-1){q.1w.1m=\'22\'}},71:C(7j,fd){if(7j===O||1s 7j!==\'41\')F fd;$.1z(7j,$.1e(C(k,v){if(v!==4d&&v.4s().4I(\'#\')===0)v=$(v).2J();fd.1F(k,v)},q));F fd},hp:C(4o,e){if(q.1w.1m==\'N\'){4o=q.1w.71(q.G.qs,4o);4o=q.1w.71(q.1w.bv,4o)}M{4o=q.1w.71(q.G.qy,4o);4o=q.1w.71(q.1w.9U,4o)}E 2S=29 bf();2S.aM(\'qx\',q.1w.2h);2S.dY("X-qo-qg","bf");2S.i7=$.1e(C(){if(2S.dR==4){E 1f=2S.gx;1f=1f.K(/^\\[/,\'\');1f=1f.K(/\\]$/,\'\');E 2P;52{2P=(1s 1f===\'6W\'?$.iw(1f):1f)}4U(nG){2P={6X:1r}}q.5I.3p();if(!q.1w.4V){q.1w.$4c.2U(\'7X-58\')}q.1w.2y(2P,q.1w.4V,e)}},q);2S.dz(4o)},bD:C(e){e.2t();q.1w.$4c.2f(\'7X-dL\')},iv:C(e){e.2t();q.1w.$4c.2U(\'7X-dL\')},ql:C(){q.1w.bv={}},qA:C(1x,1E){q.1w.bv[1x]=1E},qB:C(1x){75 q.1w.bv[1x]},qQ:C(){q.1w.9U={}},qT:C(1x,1E){q.1w.9U[1x]=1E},qL:C(1x){75 q.1w.9U[1x]},i1:C(22){q.1w.hZ(22,$.1e(C(hY){q.1w.gG(22,hY)},q))},hZ:C(22,2y){E 2S=29 bf();E 7O=(q.G.7P.3L(/\\?/)!==\'-1\')?\'?\':\'&\';2S.aM(\'qD\',q.G.7P+7O+\'1x=\'+22.1x+\'&1m=\'+22.1m,1r);if(2S.i5)2S.i5(\'1g/qC; qH=x-qK-qF\');E i8=q;2S.i7=C(e){if(q.dR==4&&q.dp==ag){i8.5I.2O();2y(hn(q.gx))}M if(q.dR==4&&q.dp!=ag){}};2S.dz()},gF:C(aS,2h){E 2S=29 bf();if("pw"in 2S){2S.aM(aS,2h,1r)}M if(1s gH!="1y"){2S=29 gH();2S.aM(aS,2h)}M{2S=4d}F 2S},gG:C(22,2h){E 2S=q.1w.gF(\'py\',2h);if(!2S){}M{2S.q3=$.1e(C(){if(2S.dp==ag){q.5I.3p();E ai=2h.4p(\'?\');if(!ai[0]){F O}if(!q.1w.4V){q.1w.$4c.2U(\'7X-58\')}E 2P={9t:ai[0]};if(q.1w.1m==\'22\'){E 2B=ai[0].4p(\'/\');2P.6h=2B[2B.12-1]}q.1w.2y(2P,q.1w.4V,O)}M{}},q);2S.q2=C(){};2S.1w.q6=C(e){};2S.dY(\'qb-qa\',22.1m);2S.dY(\'x-q0-pT\',\'pS-pU\');2S.dz(22)}}}},L:C(){F{6A:C(){F/(hc|h9|gS|gP)/.ac(aq.aw)},7n:C(){F!/(hc|h9|pR|gS|gP)/.ac(aq.aw)},pK:C(7j){F gU.5K.4s.5Z(7j)==\'[41 5Y]\'},3z:C(B,gZ){B=B.K(/[\\5X-\\pF\\pH]/g,\'\');B=B.K(/&5i;/gi,\'\');B=B.K(/<\\/?br\\s?\\/?>/g,\'\');B=B.K(/\\s/g,\'\');B=B.K(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i,\'\');B=B.K(/<4R(.*?[^>])>$/i,\'4R\');B=B.K(/<4B(.*?[^>])>$/i,\'4B\');if(gZ!==O){B=B.K(/<[^\\/>][^>]*><\\/[^>]+>/gi,\'\');B=B.K(/<[^\\/>][^>]*><\\/[^>]+>/gi,\'\')}B=$.3k(B);F B===\'\'},eb:C(5h){if(1s(5h)===\'1y\')F 0;F 5J(5h.K(\'px\',\'\'),10)},qm:C(6P){if(1s 6P==\'1y\')F;if(6P.3L(/^#/)==-1)F 6P;E gX=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;6P=6P.K(gX,C(m,r,g,b){F r+r+g+g+b+b});E bb=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.5d(6P);F\'lD(\'+5J(bb[1],16)+\', \'+5J(bb[2],16)+\', \'+5J(bb[3],16)+\')\'},5N:C(el){F $(\'<1j>\').1F($(el).eq(0).8N()).B()},bp:C(el){if($.3q(el.1n,q.G.8q)!==-1){F $(el)}M{F $(el).2p(q.G.8q.4s().3f(),q.$T[0])}},5H:C(el,1c){E $el=$(el);if(1s $el.1c(1c)==\'1y\'){F 1r}if($el.1c(1c)===\'\'){$el.1L(1c);F 1r}F O},3S:C(i,s){E $s=$($.ei(s));$s.1h(\'.I-7H-3h\').1L(\'1p\').1L(\'1G\');if($s.1h(\'hr, br, 1M, 4R, 4B\').12!==0)F;E 1g=$.3k($s.1g());if(q.L.3z(1g,O)){$s.1t()}},8k:C(){q.gl=q.$T.3U();q.aJ=$(3l).3U();if(q.G.8h)q.gh=$(q.G.8h).3U()},aX:C(){if(1s q.8k===\'1y\'&&1s q.aJ===\'1y\')F;$(3l).3U(q.aJ);q.$T.3U(q.gl);if(q.G.8h)$(q.G.8h).3U(q.gh)},aN:C(){E 3h=1k.3y(\'1i\');3h.3G=\'I-7H-3h\';3h.3A=q.G.5R;F 3h},56:C(Q){E 2d=q.G.4N;2d.2R(\'1i\');if(Q.1n==\'8P\')2d.2R(\'a\');$(Q).1h(2d.3d(\',\')).6q(\'1i.I-J-2s\').2a().44()},6p:C(Q,56){E 3w=q;$(Q).2u(C(){if(56===1r)3w.L.56(q);F $(q).2a()});F $(Q)},4J:C(Q,Y,56){E 5L;E 3w=q;$(Q).2u(C(){5L=$(\'<\'+Y+\' />\').1F($(q).2a());2C(E i=0;i<q.4u.12;i++){5L.1c(q.4u[i].1x,q.4u[i].1E)}if(56===1r)3w.L.56(5L);F 5L});F 5L},ic:C(){E R=q.J.4a();if(!R)F O;E 2D=q.1T.8D(R);F(2D===0)?1r:O},6D:C(2k){if(1s 2k==\'1y\'){E 2k=q.J.4a();if(!2k)F O}E 2D=q.1T.8D(2k);E 1g=$.3k($(2k).1g()).K(/\\n\\r\\n/g,\'\');F(2D==1g.12)?1r:O},nA:C(){E 2D=q.1T.8D(q.$T[0]);F(2D===0)?1r:O},dI:C(){E R=q.$T[0];E 2D=q.1T.8D(R);E 1g=$.3k($(R).B().K(/(<([^>]+)>)/gi,\'\'));F(2D==1g.12)?1r:O},6J:C(R){R=R[0]||R;F R&&q.L.7L(R.1n)},7L:C(Y){if(1s Y==\'1y\')F O;F q.hG.ac(Y)},aa:C(1A,Y){E 2k=$(1A).2p(Y,q.$T[0]);if(2k.12==1){F 2k[0]}F O},8m:C(){F q.af},fZ:C(){q.af=1r},8u:C(){q.af=O},4v:C(el){if(!el){F O}if($(el).fY(\'.I-T\').12===0||$(el).3r(\'I-T\')){F O}F el},fk:C(){F q.L.4Z([\'ec\',\'e9\',\'e3\',\'ef\',\'eg\',\'ee\'])},4Z:C(1n){E 1q=q.J.5Q();E 1A=q.J.3v();if($.b2(1n)){E dV=0;$.1z(1n,$.1e(C(i,s){if(q.L.dN(1A,1q,s)){dV++}},q));F(dV===0)?O:1r}M{F q.L.dN(1A,1q,1n)}},dN:C(1A,1q,1n){1n=1n.mJ();F 1q&&1q.1n===1n?1q:1A&&1A.1n===1n?1A:O},mb:C(){F(q.L.1P(\'2F\')&&5J(q.L.1P(\'b5\'),10)<9)?1r:O},ml:C(){F(q.L.1P(\'2F\')&&5J(q.L.1P(\'b5\'),10)<10)?1r:O},iK:C(){F!!aq.aw.1V(/nd\\/7\\./)},1P:C(1P){E 54=aq.aw.3f();E 1V=/(dD)[\\/]([\\w.]+)/.5d(54)||/(g1)[ \\/]([\\w.]+)/.5d(54)||/(89)[ \\/]([\\w.]+).*(ea)[ \\/]([\\w.]+)/.5d(54)||/(89)[ \\/]([\\w.]+)/.5d(54)||/(ls)(?:.*b5|)[ \\/]([\\w.]+)/.5d(54)||/(2F) ([\\w.]+)/.5d(54)||54.4I("o3")>=0&&/(dT)(?::| )([\\w.]+)/.5d(54)||54.4I("mP")<0&&/(4g)(?:.*? dT:([\\w.]+)|)/.5d(54)||[];if(1P==\'ea\')F(1s 1V[3]!=\'1y\')?1V[3]==\'ea\':O;if(1P==\'b5\')F 1V[2];if(1P==\'89\')F(1V[1]==\'g1\'||1V[1]==\'dD\'||1V[1]==\'89\');if(1V[1]==\'dT\')F 1P==\'2F\';if(1V[1]==\'dD\')F 1P==\'89\';F 1P==1V[1]},bh:C(gB,gy,2D){E i=gB.4I(gy,2D);F i>=0?i:O},dH:C(){E $3c=$(\'B\');E 7q=3l.7t;if(!7q){E dx=1k.lG.lE();7q=dx.4z-8p.pV(dx.2c)}E eI=1k.3c.g4<7q;E aG=q.L.eE();$3c.1O(\'aY\',\'hV\');if(eI)$3c.1O(\'jZ-4z\',aG)},eE:C(){E $3c=$(\'3c\');E 78=1k.3y(\'1j\');78.3G=\'I-jD-jH\';$3c.1F(78);E aG=78.om-78.g4;$3c[0].o6(78);F aG},aK:C(){$(\'B\').1O({\'aY\':\'\',\'jZ-4z\':\'\'});$(\'3c\').1t(\'I-jD-jH\')}}}};$(3l).on(\'2K.ju.I\',C(){$(\'[1f-ju="I"]\').I()});43.5K.3N.5K=43.5K})(oa);',62,1668,'||||||||||||||||||||||||||this|||||||||||html|function||var|return|opts||redactor|selection|replace|utils|else|image|false||node|block||editor||link|||tag||||length||range||||||modal|get|attr|code|proxy|data|text|find|span|div|document|key|type|tagName|dropdown|style|parent|true|typeof|remove|button|clean|upload|name|undefined|each|current|toolbar|func|keydown|value|append|class|lang|tidy|title|linebreaks|removeAttr|img|next|css|browser|target|observe|sync|caret|set|match|core|formatted|insert|blocks||nodes|file|btn||inline|blockquote||buffer|new|contents|start|left|tags|list|addClass|end|url|btnName|href|element|RegExp|focus|out|len|closest|setCallback|build|marker|preventDefault|replaceWith|textarea|item|keyup|callback|linkify|click|arr|for|offset|settings|msie|uuid|pre|tabifier|val|load|width|label|box|show|json|setStart|push|xhr|btnObject|removeClass|sel|paragraphize|top|off|td|last|format|||||||||alignment|formatting|body|join|placeholder|toLowerCase|restore|space|height|toggle|trim|window|save|tooltip|autosave|hide|inArray|hasClass|ul|keyCode|setTimeout|getCurrent|self|pos|createElement|isEmpty|innerHTML|indent|after|CodeMirror|input|imageBox|className|first|re|setEnd|verified|search|line|init|children|font|matches|insertNode|removeEmpty|table|scrollTop|script|point|rel|options|option||object|getBlocks|Redactor|unwrap|||execCommand|collapse|deniedTags|getBlock|addRange|droparea|null|position|ctrl|mozilla|section|resizeHandle|close|buttons|del|italic|bold|formData|split|substr|src|toString|allowedTags|attributes|isRedactorParent|regexps|command|clearUnverified|right|child|source|modalBox|prev|getSelection|cmd|margin|blockElem|indexOf|replaceToTag|htmls|frag|resize|inlineTags|orgn|wrapper|aria|iframe|deleteContents|allowedAttr|catch|direct|index|elem|collapsed|isCurrentOrParent||keys|try|while|ua|setAfter|removeInlineTags|arrow|drop||align|pasteBox|contenteditable|exec|strong|getMarkerAsHtml|linkProtocol|str|nbsp|cont|meta|BR|removeDataAttr|unorderedlist|orderedlist|underline|allowed|replaceStyles|isFunction|attributesRemove|paste|br1|https|tmp|LI|none|links|touchstart|tab|editter|center|replaceTags|lastNode|removeEmptyAttr|progress|parseInt|prototype|replacement|toggleType|getOuterHtml|charAt|num|getParent|invisibleSpace|th|files|currentLevel|lastList|deleted|u200B|String|call|||wrap|quot|currentList|||inlines|mousedown|form|prop|innerHeight|containerTag|marginTop|visual|getRangeAt|templateName|filename|shortcuts|params|break|methods|scroll|node1|nodeValue|replaceWithContents|not|replaceDivs|emptyHtml|unlink|prepend|boxTop|TD|Insert|module|toolbarFixedTopOffset|isMobile|toolbarFixedTarget|removeComments|isEndOfElement|video|vimeo|100|tabindex|metaKey|isBlock|youtube|shift|SPAN|removeWithoutAttr|shiftKey|hex|getMarker|ENTER|tr|preSpaces|insertBreakLine|getNodes|string|error|editorDiv|instance|figure|getHiddenFields|display||modif|delete|getEvent|dropact|scrollDiv|possible|outdent|rangeCount|disabled|hideAll|edit|www|embed|keyPosition|blocksSize|obj|rtePaste|alt|which|isDesktop|focn|DIV|windowWidth|dropdowns|level|innerWidth|hideResize|_blank|extend|BACKSPACE|getTabs|weight|pattern|action|toggleClass|fileUpload|z0|select|figcaption|invisible|cloneRange|imageUpload|float|isBlockTag|posFromIndex|parHtml|mark|s3|setVerified|startNode|header|outerHTML|strike|sup|handler|drag|fixed|sub|decoration|modalOverlay|size|appendChild|boundaryRange|endRange|tmpList|originalEvent|listParent|webkit|blank|createRange|event|ftp|tagout|icon|exceptTags|scrollTarget|items|setActive|saveScroll|codemirror|isSelectAll|DELETE|imageFloatMargin|Math|alignmentTags|events|returnValue|OL|disableSelectAll|modalClose|ctrlKey|newLevel|UL|addProperties|createTextNode|onPaste|convertVideoLinks|getOffsetOfElement|apply|plugins|character|isRemoveInline|active|isMobileUndoRedo|act|tabber|autosaveInterval|clone|removeMarkers|PRE|modalFooter|inputUrl|tmpLi|closeHandler|http|classSize|setClass|linkmarker|Header|modalHeader|||node2|focusNode|cleanlevel|selectNodeContents|||||blockLevelElements|setMode|counter|clear|targetTouches|endNode|resizer|small|Array|decrease|addEvent|singleLine|Add|splice|case|setStartAfter|replaceParagraphsToBr|justify|selectElement|filelink|cite|undo|attrs|absolute|Delete|tagblock||imageResizer|audio|role|removeAllRanges|amp|imageMargin|insertDblBreakLine|param|inserted|lastLevel|rebuffer|toolbarExternal|firstChild|maxHeight|createDocumentFragment|createTextRange|traverseFile|moveToPoint|bind|fileFields|FormData|images|onClick|onSync|dataTransfer|formatblock|fixEmptyIndent|clearStyle|insertInIe|wrapperHtml|caretRangeFromPoint|windowHeight|enable|mouseover|mouseout|isTag|property|test|auto|parentEl|selectAll|200|eventName|s3file|selectionMarkers|deleteProperties|editorHtml|ESC|getOffset|callbacks|formatWrap|navigator|normalizeLists|minHeight|link_new_tab|onDrop|showOnDesktop|userAgent|appendTo|isTextarea|modalBody|safes|formatListToBlockquote|getPlainText|caretPositionFromPoint|horizontalrule|autosaveFields|scrollbarWidth|caretRange|onPasteTidy|saveBodyScroll|enableBodyScroll|mso|open|createSpaceElement|kbd|classname|cloned|tabAsSpaces|method|blockHtml|codeLength|substring|placeTag|restoreScroll|overflow|x200b|isContainerTable|prevList|isArray|parentA|imageFloat|version|isEnabled|indentValue|replaceToParagraph|pageY|regex|result|spaces|BLOCKQUOTE||XMLHttpRequest|u00a0|strpos|before|encodeEntities|matchContainers|prev2|marginLeft|special|methodVal|getAlignmentElement|activeButtons||convertLinks|marginRight|enterKey|imageFields|com|link_insert|specialKey|samp|re2|increase|checked|onDrag|marginBottom|IMG|redo|nodeType|modules|activeButtonsStates|Column|paragraphizeBlocks|closeTooltip|currentEl|Row|Table|count|autosaveOnChange|commentsMatches|formatTableWrapping|autosaveName|setInactiveAll|Link|headTag|curLang|add|saveFormTags|convertInline|verifiedTags|nodeToCaretPositionFromPoint|address|syncCode|removeFormat|htmlIe|clearUnverifiedRemove|headers|tagsEmpty|attrAllowed|dfn|setBefore|TAB|getTextFromHtml|isEndOfTable||DOWN|imageDelete|showCode|setFormat|one|enlargeOffset|selectionEnd|isFocused|dropdownWidth|dropdownObject|htmlLength|blur|formattingAdd|selectionStart|redactorImageLink|markerLength|isP|TH|imageEditable|removeSpaces|imageDisplay|ratio|imageResizable|insertBreakLineProcessing|endContainer|highContrast|createCancelButton|createActionButton|createButton|addCallback|URL|getModuleMethods|RedactorPlugins|image_position|buttonsSize|footer|setDropdownAttr|content|isDelete|setDropdownProperties|inValues|direction|isCurrent|outValues|isOrderedCmdUnordered|isUnorderedCmdOrdered|firstFound|extra|inputText|mailto|fonts|listsIds|endOffset|br2|listType|setAfterOrBefore|filter||slice|regexB|listTag|linkSize|iframeEnd|convertImageLinks|convertUrlLinks||iframeStart|addDropdown|showOnMobile|status|finish|getText|container||contOwnLine|ownLine|visible|documentElementRect|cleanTag|send|inactive|link_edit|setOffset|opr|setMarker|suffix|219|disableBodyScroll|isEndOfEditor|tbody|buttonsHide|hover|hotkeysShiftNums|isCurrentOrParentOne|head|thead|tfoot|readyState|221|rv|observeScroll|matched|buttonsHideOnMobile|getNodesMarker|setRequestHeader|setConfig|placeholdler|quote|rTags|H3|allowedAttrTags|allowedAttrData|finalNodes|getInlines|parentNode|H2|safari|normalize|H1|startOffset|H6|H4|H5|BODY|parseHTML|increaseBlocks|increaseLists||||createContainerBox|getTextareaName||observeScrollEnable|run|setCodeAndCall|isButtonSourceNeeded|upload_label|htmlFixMozilla|insertAfter|hideButtons|getRedo|htmlWithoutClean|hideButtonsOnMobile|aside|formatConvert|measureScrollbar|createTextarea|replaced|article|isOverflowing|setDropdownsFixed|superscript|fromTextarea|fromElement|loadEditor|unsetDropdownsFixed|subscript|formatCollapsed|formatMultiple|formatRemoveSameChildren|_this|loadContent|increaseText|observeScrollDisable|visibility|decreaseLists|strikethrough|enableEditor|||||||||||decreaseBlocks|through||switch|ie11PasteFrag|META|CTRL|ALT|SHIFT|isCurrentOrParentHeader|addArrowsEvent|align_left||checkKeyEvents|indented|elements|HR|align_center|checkEvents|setupBuffer|header5|tabKey|onTab|header3|header2|replaceDivToBreakLine|onShiftEnter|onArrowDown|altKey|formatBlockquote|header4|setupSelectAll|setForce|align_right|align_justify|setFixed|offsetNode|setUndo|duplicate|setEndPoint|toolbarFixed|setRedo|toolbarOverflow|execHtml|getUndo|setOverflow|pop|EndToEnd|ie11FixInserting|parents|enableSelectAll|stop|chrome|empty|mouseup|clientWidth|setFormattingTags|loadButtons|keydownStop|RIGHT|createContainer|blocksMatch|loadEditableControls|setInactiveInCode|setSelectionRange|walker|showVisual|anchor|saveTargetScroll||indexFromPos|setValue|saveEditorScroll|restoreFormTags|replaceDivsToBr|onSet|startSync|cleanSpaces|onChange|tempStart||tempEnd|orgo|foco|responseText|needle|lastChild|beforekey|haystack|textareaIndenting|setInactive|modified|s3createCORSRequest|s3uploadToS3|XDomainRequest|setActiveInVisual|indenting|newTag|chars|isSingleLine|onPasteIeFixLinks|onPasteRemoveSpans|Android|matchBlocks|matchBR|BlackBerry|onPasteRemoveEmpty|Object|onPasteExtra|internal|shorthandRegex|Mso|removeEmptyTags|all|||||||savePreCode|savePreFormatting|iPod|Apple|nofollow|iPhone|linkNofollow|removeDirtyStyles|getOnlyImages|pastePlainText|restoreSelectionMarker|saveCodeFormatting|bmso|onPasteWord|getPreCode|FIGCAPTION|decodeURIComponent|afterkey|sendData|dragFileUpload||moveResize|dragImageUpload|round|inside|stopResize|setEvents|setEventDrop|setFloating|update|setResizable|pageX|setEventDropUpload|startResize|fixImageSourceAfterDrop|reIsBlock|imageUploadParam|opacity|fileUploadParam|showEdit|directUpload|loadResizableControls|editerWidth|callEditor|setOptions|imageTypes|dir|getType|15px|replaceDivToParagraph|hidden|codeKeydownCallback|codeKeyupCallback|signedURL|s3executeOnSignedUrl|clearInterval|s3uploadFile|fullscreen|createTooltip|onClickCallback|overrideMimeType|removeData|onreadystatechange|that|haspopup|eventNamespace|destroy|isStartOfElement|||||setEvent|disableIeLinks|imageLink|buttonSave|setHelpers|imagePosition||floating|floatValue|buttonDelete|_delete||disableMozillaEditing|selected|onDragLeave|parseJSON|focusEnd|700|change|LEFT_WIN|getTemplate|header1|draggable|setContent|setTitle|template|Head|contrast|handle|isIe11|Color|buildOverlay|enableEvents|List|setButtonsWidth|setEnter|cancel|createDeleteButton|Left|Right|regexp|the|to|Edit|Drop|png|convertImages|here|Align|Center|Video|checkbox|Image|imageEdit|loadTemplates|newTd|choose|Code|disableEvents|destroyed|replaceBreaksToNewLines|cleanOnPaste|getInlinesTags|getLastBlock|replaceBreaksToParagraphs|restoreSafes|startContainer|lastBlock|freeze|createPasteBox|getPrev|spans|fadeOut|Function|scope|tools|anchorNode|args|startPointNode|getSafesComments|linkTooltip|savedSel|showTooltip|setEditable|scrollbar|properties|pasteHTML|replaceSelection|measure|getTooltipPosition|setNodesMarker|getSafes|setEndBefore|removeNodesMarkers|aUnlink|createMarkers|aLink|aEdit|gif|setDraggable|replaceElement|keyupStop|isNeedReplaceElement|re3|addToAllowed|setupAllowed|padding|alignElement|removeEmptyListInTable|removeInvisibleSpace|setBlocks|setText|isKey|removeTags|map|removeFromDenied|setMultiple|_moz_dirty|xn|lineAfter|fieldset|formatTags|location|callbackName|lastFound|insertInOthersBrowsers|getData|jsxhr|isExceptLastOrFirst|setFocus|setCollapsed|600|cleanUrl|lineBefore|formatEmpty|thref|success|langs|dbl|isLinebreaksOrNoBlocks|insertAfterLastElement|objects|buttonInsert|buttonText|insertNewLine|hotkeysSpecialKeys|loadModules|paragraph|insertParagraph|cleanStyleOnEnter|shortcutsAdd|exitFromBlockquote|loadOptions|bindModuleMethods|removeAttrs|textNode|stopPropagation|commonAncestorContainer|origHandler|removeAttrGetRemoves|removeParagraphsInLists|area|SPACE|arguments|nextNode|getCoords|SHOW_TEXT|hgroup|nav|details|Infinity|HEADER|FOOTER|setStartBefore|alignleft|setEndAfter|setToPoint|alignright|DD|OUTPUT|summary|DT|ins|DL|jpeg|ADDRESS|reg||aligncenter|menu|createTreeWalker|SECTION|NodeFilter|ltr|1strike|spacerun|yes|opera||No|such|docs|xml|floor|shapes|strict|sid|use|rgb|getBoundingClientRect|slevel|documentElement|WordDocument|VERSION|copy|u2026|hellip|disable|u00a9|autosaveError|u2122|trade|math|u2014|10px|sdata|converted|dash|u2010|mdash|uploadImageField|legend|setAwesome|web|video_html_code|Email|Text|Web|Embed|Youtube|Upload|File|isOldIe|Vimeo|image_web_link|None|columns|Columns|Rows|rows|delete_table|add_head|isLessIe10|Position|Title|setInterval|delete_head|download|Download|getOwnPropertyNames|youtu|optional|Name|Alignment|jpe|applet|merge|LEFT|application|UP|Underline|Open|drop_file_here|Or|or_choose|Choose|toUpperCase|Justify|Anchor|Deleted|Rule|Horizontal|compatible|toggleAttr|backcolor|changeIcon|removeIcon|Font|fontcolor|Back|Unordered|Indent|Outdent|caretOffset|Ordered|TEXTAREA|Italic|Formatting|addBefore|Unlink|HTML|ARTICLE|Normal|addAfter|Bold|addFirst|Trident|Quote|AutoUrlDetect|Cancel|toggleData|blurCallback|setData|delete_column||post|focusCallback|delete_row|cut|setAttr|1000|ajax|insert_column_right|insert_column_left|insert_table|enableObjectResizing|Save|enableInlineTableEditing|insert_row_above|isStartOfEditor|Below|done|insert_row_below|Above|ASIDE|err|move|dialog|insertHtml|cursor|guid|specified|labelledby|bull|0px|down|times|Close|host|frameset|insertedLink|createLink|deletedLink|frame|addBack|noscript|php|101|trident|102|103|removeChild|context|pagedown|TR|jQuery|relative|home|112|imageUploadError|bodyOveflow|uploadStart|fast|dragleave|cssText|removeStyle||offsetWidth||external|overlay|up||enter|clientY|clientX|removeStyleRule|toggleStyle|insertHTML|nodeToPoint|Key|fromCharCode|121|f10|addTemplate|120|106|122|f11|144|f12|123|getModal|119|107|110|115|114|111|113|createTabber|116|118|109|117|addTab|numlock|145|email|outerHeight|222|player|220|20px|allowfullscreen|_|500|281|frameborder|192|focusin|grep|188|187|186|173|189|190|modalOpened|191|104|105|modalClosed|dragover|textContent|extractContents|pageup|stripTags|backspace|withCredentials||PUT|innerText|listSelections|getValue|getObject|getEditor|_data|u200D|removePhp|uFEFF|Callback|getToolbar|isString|getBox|getElement|getTextarea|setSelection|setCursor|cleanEmptyParagraph|iPad|public|acl|read|abs|getOnlyLinksAndImages|unselectable|getHtml|cloneContents|amz|addButton|onerror|onload|setSize|refresh|onprogress|toggleActive|replaceWithHtml|syncBefore|Type|Content|Ss|fromPoint|esc|705|With|getNext|pasteBefore|fileUploadError|dropdownHide|clearImageFields|hexToRgb|capslock|Requested|fake|touchend|1500|uploadImageFields|fadeIn|touchmove|mousemove|previousSibling|POST|uploadFileFields|dragstart|addImageFields|removeImageFields|plain|GET|rowspan|defined|nextSibling|charset|namespace|hasOwnProperty|user|removeFileFields|colspan|9999px|dropdownShown|pause|clearFileFields|max|dropdownShow|addFileFields'.split('|'),0,{}))
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/top-bar.js elefant-elefant_1_3_11_rc/apps/admin/js/top-bar.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/top-bar.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/top-bar.js	2015-09-05 21:13:59.000000000 -0500
@@ -119,38 +119,6 @@
 };
 
 /**
- * Translates strings of text in .js files.
- * Usage:
- *
- *     <script>
- *     $(function () {
- *         // This will make the text available to $.i18n()
- *         $.i18n_append ({
- *             'Some text': '{"Some text"}',
- *             'Another string': '{"Another string"}'
- *         });
- *         
- *         // Now fetch a translated string
- *         console.log ($.i18n ('Some text'));
- *     });
- *     </script>
- */
-(function ($) {
-	var strings = {};
-
-	$.i18n_append = function (obj) {
-		strings = $.extend (strings, obj);
-	};
-
-	$.i18n = function (text) {
-		if (strings[text]) {
-			return strings[text];
-		}
-		return text;
-	};
-})(jQuery);
-
-/**
  * Displays the update notice if one is available. This is a JSONP
  * response handler.
  */
@@ -182,25 +150,25 @@
 	var sliding_up = false;
 
 	// fetch data for admin toolbar
-	$('body').append ('<div id="admin-bar"><div id="admin-links"></div><a href="/"><img id="admin-logo" src="/apps/admin/css/admin/spacer.png" alt="" /></a></div><div id="preview-bar"><a href="#" class="admin-tools-hide-preview" data-title="'+$.i18n("Back to Edit Mode")+'"></a></div>');
+	$('body').append ('<div id="admin-bar"><div id="admin-links"></div><a href="/"><img id="admin-logo" src="/apps/admin/css/admin/spacer.png" alt="" /></a></div><div id="preview-bar"><a href="#" class="admin-tools-hide-preview" data-title="'+$.i18n("Back to Edit Mode")+'"><i class="fa fa-lg fa-pencil"></i></a></div>');
 	$.get ('/admin/head/links', function (res) {
 		$('#admin-logo').attr ('src', res.logo).attr ('alt', res.name);
 		$('#admin-links').append (res.links);
 	
 		// show/hide tools menu
-		if ($.elefant_custom) {
+		if (!res.is_apps) {
 			// custom tools menu
 			var admin_tools = $('#admin-bar'),
 				admin_tools_list = $('#admin-tools-list');
-
+			
 			$('#admin-bar>a').after ('<span id="admin-tools-arrow"></span>');
 
 			function toggle_custom_tools_open () {
-				admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast');
+				admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast', function(){admin_tools_list.css ('overflow-y', 'auto');});
 			}
 
 			function toggle_custom_tools_close () {
-				admin_tools_list.stop ().slideUp ('slow');
+				admin_tools_list.stop ().css ('overflow-y', 'hidden').slideUp ('slow');
 			}
 
 			function toggle_custom_tools (e) {
@@ -213,9 +181,9 @@
 				}
 
 				if (admin_tools_list.is (':visible')) {
-					admin_tools_list.stop ().slideUp ('fast');
+					admin_tools_list.stop ().css ('overflow-y', 'hidden').slideUp ('fast');
 				} else {
-					admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast');
+					admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast', function(){admin_tools_list.css ('overflow-y', 'auto');});
 					$('#admin-tools-list a')[0].focus ();
 				}
 			
@@ -228,7 +196,7 @@
 				$('#admin-tools-arrow').on ('MSPointerDown', toggle_custom_tools);
 			} else {
 				admin_tools.hover (
-					function () {},
+					function(){if(admin_tools_list.is(':visible')){toggle_custom_tools_open();}},
 					toggle_custom_tools_close
 				);
 
@@ -244,11 +212,11 @@
 				admin_tools_list = $('#admin-tools-list');
 
 			function toggle_tools_open () {
-				admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast');
+				admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast', function(){admin_tools_list.css ('overflow-y', 'auto');});
 			}
 
 			function toggle_tools_close () {
-				admin_tools_list.stop ().slideUp ('slow');
+				admin_tools_list.stop ().css ('overflow-y', 'hidden').slideUp ('slow');
 			}
 
 			function toggle_tools (e) {
@@ -261,9 +229,9 @@
 				}
 
 				if (admin_tools_list.is (':visible')) {
-					admin_tools_list.stop ().slideUp ('fast');
+					admin_tools_list.stop ().css ('overflow-y', 'hidden').slideUp ('fast');
 				} else {
-					admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast');
+					admin_tools_list.stop ().css ('height', 'auto').slideDown ('fast', function(){admin_tools_list.css ('overflow-y', 'auto');});
 					$('#admin-tools-list a')[0].focus ();
 				}
 			
@@ -338,10 +306,10 @@
 		var major_minor = $.elefant_version.replace (/\.[0-9]+$/, '');
 
 		$.ajax ({
-			url: 'https://raw.github.com/jbroadway/elefant-updates/master/releases/' + major_minor + '.js?callback=elefant_update_response',
+			url: '/admin/head/updates/' + major_minor + '?callback=elefant_update_response',
 			type: 'GET',
 			dataType: 'jsonp',
-			callback: 'elefant_update_response'
+			callback: elefant_update_response
 		});
 
 		$.cookie ('elefant_update_checked', 1, { expires: 1, path: '/' });
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/closedhand.cur and elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/closedhand.cur differ
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/collapsed.png and elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/collapsed.png differ
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/cursorGrab.png and elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/cursorGrab.png differ
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/cursorGrabbing.png and elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/cursorGrabbing.png differ
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/expanded.png and elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/expanded.png differ
Binary files elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/openhand.cur and elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/openhand.cur differ
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css
--- elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/css/tree-drag-drop.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,92 @@
+/* CSS Document */
+
+
+.treeDragDrop{
+	-moz-user-select: none; 
+	-khtml-user-select: none; 
+    -webkit-user-select: none; 
+    -o-user-select: none; 
+	font-family: 'Helvetica Neue', Arial, 'Liberation Sans', FreeSans, sans-serif;
+}
+
+.treeDragDrop .tdd-trashbin{
+	border:dashed #999 1px;
+	min-height:44px;
+	padding:10px;
+}
+
+.treeDragDrop .tdd-tree{
+	border:solid #999 1px;
+	min-height:44px;
+	padding:10px;
+}
+
+
+
+.treeDragDrop ul, .tdd-dragContainer ul{
+	margin:0;
+	padding:0;
+}
+
+.treeDragDrop li, .tdd-dragContainer li{
+	list-style:none;
+	margin:0;
+	padding:10px 10px 10px 25px;
+	border:solid #ddd 1px;
+	border-top: 0px;
+	font-size:13px;
+	line-height:20px;
+	display:block;
+	cursor:move;
+}
+
+.treeDragDrop li:first-child, .tdd-dragContainer li:first-child {
+	border-top: 1px solid #ddd;
+}
+
+body:not(.cursorGrabbing) .treeDragDrop li, .tdd-dragContainer li{
+	cursor: url(cursorGrab.png), move;
+}
+
+.treeDragDrop li.tdd-collapsed{
+	background: url(collapsed.png) no-repeat 8px 10px;
+}
+
+.treeDragDrop li.tdd-expanded{
+	background: url(expanded.png) no-repeat 8px 10px;
+}
+
+.treeDragDrop .tdd-after, .treeDragDrop .tdd-before, .treeDragDrop .tdd-append{
+	height:6px;
+	margin:0;
+	/* border:solid #E4426B 1px; */
+	background:#93278f;
+	width:100px;
+}
+
+.tdd-selected{
+	opacity:0.4
+}
+
+.tdd-dragContainer{
+	position:absolute;
+	z-index:999;
+}
+
+li.ui-draggable-dragging, .ui-draggable-dragging li{
+	list-style:none;
+}
+
+body.cursorGrabbing{
+	cursor: url(cursorGrabbing.png), move;
+}
+
+.treeDragDrop .tdd-tree i{
+	cursor: pointer;
+}
+
+
+.treeDragDrop .tdd-tree i:hover{
+	color:#93278f;
+}
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,6 @@
+/*! jQuery UI - v1.9.1 - 2012-11-22
+* http://jqueryui.com
+* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.datepicker.js
+* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
+
+(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){e.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/tree-drag-drop.js elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/tree-drag-drop.js
--- elefant-elefant_1_3_10_beta/apps/admin/js/tree-drag-drop/tree-drag-drop.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/js/tree-drag-drop/tree-drag-drop.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,337 @@
+/*global window, $, jQuery*/
+
+/**
+ * Note: This script is a modified version of
+ * apps/navigation/js/tree-drag-drop/tree-drag-drop.js
+ */
+
+if (typeof String.prototype.trim !== 'function') {
+	String.prototype.trim = function () {
+		"use strict";
+		return this.replace(/^\s+|\s+$/g, '');
+	};
+}
+
+(function ($, undef) {
+	"use strict";
+
+	$.treeDragDrop = {
+		
+		defaults: {			
+			selectedClass: "tdd-selected",
+			collapsedClass: "tdd-collapsed",
+			expandedClass: "tdd-expanded",
+			beforeClass: "tdd-before", 
+			afterClass: "tdd-after",
+			cursorGrabbingUrl: null,
+			inFolderThreshhold: 100,
+			cursorAt: {left: 10, top: -40}, 
+			dragContainer: $('<div class="tdd-dragContainer" />'),			
+			marker: $('<div />'),
+			attributes: ["id", "class"],
+			getUrl: null,
+			updateUrl: null		
+		}		
+	};
+	
+	// helpers
+	
+	function debug(txt) {
+		if (window.console && window.console.log) {
+			window.console.log(txt);
+		}
+	}
+	
+	function getContext(el) {
+		return $('.treeDragDrop').first ();
+	}
+	
+	function getOptions(el) {
+		return $('.treeDragDrop').first ().data ("options");
+	}
+	
+	function serializeTree(el) {
+		var tool, tools, obj, data = [];
+		el.find('.section').each(function (index, node) {
+			obj = {};
+			tools = [];
+			obj.name = node.getAttribute('data-section');
+			$(node).find('.tool').each(function (index, subnode) {
+				tool = {};
+				tool.name = subnode.getAttribute('data-name');
+				tool.handler = subnode.getAttribute('data-handler');
+				tools.push(tool);
+			});
+			obj.tools = tools;
+			data.push(obj);
+		});
+		return data;
+	}
+		
+	function sendTree(data, updateUrl) {
+		if (updateUrl !== null) {
+			$.post(updateUrl, {
+				data: serializeTree(data), 
+				autofill: data.find('.special').length
+			}, function (res) {
+				//debug (res);
+				//TODO: error handling
+				return true;
+			});
+		}	
+	}
+	// handlers	
+		
+	$.treeDragDrop.handlers = {
+		
+		handleDraggableStart: function (e, o) {
+			var options = getOptions($(e.target));			
+			$(e.target).addClass(getOptions($(e.target)).selectedClass);
+			document.onmousemove = function () {
+				return false;
+			};
+			$("body").css("cursor", "url(" + options.cursorGrabbingUrl + ") , move").addClass("cursorGrabbing");
+		},
+		
+		handleDraggableDrag: function (e, o) {				
+		},
+		
+		handleDraggableStop: function (e, o) {
+			
+			var ctx = getContext($(e.target)),
+				options = getOptions($(e.target)),		
+				tree = $(".tdd-tree", ctx);		
+			
+			// remove the mousemove Listener			
+			$("li, .tdd-tree", ctx).unbind("mousemove");
+			
+			// remove sections from trashbin
+			$(".tdd-trashbin .section:not(.special)").remove();
+			
+			// build the array and post the ajax
+			sendTree(tree, options.updateUrl);
+			
+			$("body").removeClass("cursorGrabbing").css("cursor", "auto");
+		},
+		
+		handleDroppableOut: function (e, o) {
+			$(e.target).unbind("mousemove");						
+		},
+		
+		handleDroppableOver: function (e, o) {
+			var	options = getOptions($(e.target)),
+				selectedClass = options.selectedClass,
+				beforeClass = options.beforeClass,
+				afterClass = options.afterClass,
+				draggable = $(o.draggable),
+				dropable = $(e.target),
+				marker = options.marker;
+
+			marker.show ();
+
+			if (dropable.is('li')) {
+				// bind MouseMove to the item to check if the draggable should be appended or placed before or after the item 
+				dropable.bind('mousemove', function (mme) {
+					
+					var target = $(mme.target),						
+						x = mme.pageX - $(mme.target).offset().left,
+						y = mme.pageY - $(mme.target).offset().top,
+						threshhold = options.inFolderThreshhold;
+					
+					// threshhold for apending or placing before/ater
+					// will grow according to the deepness of nesting
+					
+					if (target.find('ul').length !== 0) {
+						threshhold = Math.min(options.inFolderThreshhold * (target.find('ul').length + 1), target.width() * 0.75);
+					}
+					
+					marker.removeClass(beforeClass, afterClass);
+					
+					if (target.parents('.tdd-trashbin').length !== 0) {						
+						target.parents('.tdd-trashbin').append(marker);
+					} else if (target.hasClass('section') && draggable.hasClass('tool')) {
+						marker.addClass(afterClass);
+						if (target.children('.tools').length === 0) {
+							target.append('<ul class="tools"></ul>');
+						}
+						target.children('.tools').prepend(marker);
+					} else if (draggable.hasClass('special')) {
+						marker.addClass(beforeClass);
+						target.parents('.tdd-tree').append(marker);
+					} else if (draggable.hasClass('section') && target.hasClass('special')) {
+						marker.addClass(beforeClass);
+						target.before(marker);
+					} else {
+						if (target.parent().hasClass('tools') && !draggable.hasClass('tool')) return;
+						if (target.parent().hasClass('tdd-tree') && draggable.hasClass('tool')) return;
+						// append to item
+						if (y < target.height() / 2) {
+							marker.addClass(beforeClass);
+							target.before(marker);
+						// place after item
+						} else {
+							marker.addClass(afterClass);
+							target.after(marker);
+						}
+					}
+				});
+				
+			// if tree is empty items may be put in the ul 
+			} else if (dropable.hasClass("tdd-tree") && draggable.hasClass('section')) {
+				marker.removeClass(beforeClass, afterClass);
+				marker.addClass(beforeClass);
+				dropable.append(marker);
+				if (dropable.children('.special').length !== 0) dropable.append(dropable.children('.special'));
+			} else if (dropable.hasClass("tdd-trashbin")) {
+				dropable.append(marker);
+			}
+		},
+		
+		handleDroppableDrop: function (e, o) {
+			
+			var	draggable = $(o.draggable),
+				dropable = $(e.target),
+				marker = $.treeDragDrop.defaults.marker,
+				ctx = draggable.data("tddCtx");
+				if (!ctx) return;
+				var options = ctx.data("options");
+				
+			// remove selection	
+			draggable.removeClass(options.selectedClass);
+			
+			// if its the trashbin put them all next to each other (no nesting)
+			if (dropable.parents(".tdd-trashbin").length !== 0 || dropable.hasClass("tdd-trashbin")) {
+				$(".tdd-trashbin").append(draggable);	
+				$("li", draggable).each(function (index, value) {
+					$(".tdd-trashbin").append(value);
+				});
+				
+			} else if (draggable.hasClass('tool') && dropable.hasClass('tdd-tree')) {
+				return;
+			// put the item directly in the tree ul if it contains no other element	
+			} else if (dropable.hasClass("tdd-tree") && $(".tdd-tree").children().length === 0) {
+				$(".tdd-tree").append(draggable);
+			// otherwise put it before the marker, which will be detached asap
+			} else {				
+				marker.before(draggable);
+			}			
+			marker.hide();
+			//clean up empty uls if its not the tree or trashbin
+			$("ul", ctx).not(".tdd-trashbin, .tdd-tree").each(function () {
+				if ($(this).children().length === 0) {
+					$(this).remove();					
+				}
+			});	
+		},
+		
+		handleOpenModal: function() {
+			var title = '', html = '<form id="treeModal" \
+				onsubmit="if($.treeDragDrop.handlers.handleAddCategory()) { $.close_dialog (); } return false;">\
+				<span class="caption error"></span>\
+				<label for="add-category">Category Name<br><input type="text" id="add-category" style="width: 95%" /></label><br><br>\
+				<input type="submit" value="Add" style="float:right" />\
+			</form>';
+			$.open_dialog('New Catagory',html,{width:250,height:200});
+			$('#treeModal #add-category')[0].focus();
+		},
+		
+		handleAddCategory: function () {
+			var modal = $('#treeModal'), name = modal.find('input#add-category');
+			if (name.val() == '') {
+				modal.find('.error').text('Category name must be specified.');
+				return false;
+			}
+			var id = 'cat_'+ name.val().toLowerCase().replace(/ /g,'_');
+			if ($('.treeDragDrop #'+ id).length) {
+				modal.find('.error').text('Category name already in use.');
+				return false;
+			}
+			modal.find('.error').text('');
+			var node = document.createElement("LI");
+			node.id = id;
+			node.setAttribute('data-section', name.val());
+			node.setAttribute('class', 'section');
+			node.innerHTML = '<b>'+ name.val() +'</b><ul class="tools"></ul>';
+			$(".tree .tdd-tree").append(node);
+			if (node.previousElementSibling && /special/.test(node.previousElementSibling.className)) {
+				$(node.previousElementSibling).before(node);
+			}
+			$(node).data('tddCtx',$(node).closest('.treeDragDrop'));
+			name.val("");
+			
+			$('.treeDragDrop').treeDragDrop({ // rebind drag/drop for new node.
+				updateUrl: "/admin/api/toolbar",
+				cursorGrabbingUrl: (window.is_msie) ? "/apps/admin/js/tree-drag-drop/css/closedhand.cur" : "/apps/admin/js/tree-drag-drop/css/cursorGrabbing.png"
+			}, '#'+ id); 
+			return true
+		}
+	};
+	
+	
+	// the Prototype
+		
+	$.fn.treeDragDrop = function (options, node) {
+		
+		//extend the global default with the options for the element
+		options = $.extend({}, $.treeDragDrop.defaults, options);
+						
+		return this.each(function () {
+			var ctx = $(this),
+				data = ctx.data('treeDragDrop');
+			
+			node = (node)?node:"li";
+			
+			// init the element(s)
+			if (!data || node !== "li") {	
+				$(node, ctx).draggable({ 
+					addClasses: false,
+					cursorAt:  $.treeDragDrop.defaults.cursorAt,
+					helper: "clone",
+					appendTo: "body",
+					opacity: 0.2,
+					delay: 10,
+					start: $.treeDragDrop.handlers.handleDraggableStart,
+					stop: $.treeDragDrop.handlers.handleDraggableStop
+				}).droppable({
+					addClasses: false,
+					greedy: false,
+					tolerance: "pointer",
+					drop: $.treeDragDrop.handlers.handleDroppableDrop,
+					over: $.treeDragDrop.handlers.handleDroppableOver,
+					out: $.treeDragDrop.handlers.handleDroppableOut
+					
+				}).bind("onselectstart", function () { 
+					return false;
+				}).attr("unselectable", "on").data("tddCtx", ctx);
+			}
+			// init the tree(s)
+			if (!data) {
+				$(".tdd-tree, .tdd-trashbin", ctx).droppable({
+					addClasses: false,				
+					tolerance: "pointer",
+					drop: $.treeDragDrop.handlers.handleDroppableDrop,
+					over: $.treeDragDrop.handlers.handleDroppableOver,
+					out: $.treeDragDrop.handlers.handleDroppableOut				
+				}).bind("onselectstart", function () {return false; }).attr("unselectable", "on");
+				
+				
+				$.treeDragDrop.defaults.marker.bind("mousemove", function () { return false; });
+				$.treeDragDrop.defaults.marker.bind("mouseover", function () { return false; });
+				
+			
+				ctx.data('options',  options);											
+				ctx.data('treeDragDrop', {inited: true});				
+			}				
+		});
+	};
+	
+}(jQuery));
+
+// Cheap test for MSIE
+window.is_msie = (window.navigator.userAgent.indexOf ('MSIE ') > -1);
+
+$('.treeDragDrop').treeDragDrop({
+	updateUrl: "/admin/api/toolbar",
+	cursorGrabbingUrl: (window.is_msie) ? "/apps/admin/js/tree-drag-drop/css/closedhand.cur" : "/apps/admin/js/tree-drag-drop/css/cursorGrabbing.png"
+}); 
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/lib/API.php elefant-elefant_1_3_11_rc/apps/admin/lib/API.php
--- elefant-elefant_1_3_10_beta/apps/admin/lib/API.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/lib/API.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,50 @@
+<?php
+
+namespace admin;
+
+use \Appconf;
+
+class API extends \Restful {
+
+	public function post_toolbar () {
+		$this->controller->require_acl('admin','admin/toolbar');
+		$out = array();
+		if (isset($_POST['data']) && count($_POST['data'])) {
+			foreach ($_POST['data'] as $section) {
+				if (count($section['tools'])) {
+					$out[$section['name']] = array();
+					foreach ($section['tools'] as $tool) {
+						$out[$section['name']][$tool['handler']] = $tool['name'];
+					}
+				}
+			}
+		}
+		if (isset($_POST['autofill']) && $_POST['autofill'] > 0) {
+			$out[Appconf::admin('General','autofill_column')]['*'] = '*';
+		}
+		return Toolbar::save($out);
+	}
+	
+	public function get_async() {
+		if (!isset($_GET['page'])) return $this->error('No page route given.');
+		// parse any GET values from the original URL
+		$params = explode('?',$_GET['page']);
+		unset($_GET['page']);
+		$route = $params[0];
+		if(isset($params[1])) $params = explode('&',$params[1]);
+		foreach ($params as $param) {
+			list($key,$value) = explode('=',$param);
+			$_GET[$key] = $value;
+		}
+		// Set relevant URL globals that should contain the route value
+		$_SERVER['REQUEST_URI'] = $_COOKIE['elefant_last_page'] = $_GET['redirect'] = ($route == '/') ? '/index' : $route;
+		// This is sort of a hack to prevent any layouts from being rendered.
+		\Page::$bypass_layout = true; 
+		return array(
+			'path'=>$route,
+			'html'=>$this->controller->run ($route, $_GET, false),
+			'page'=>(array) $this->controller->page(),
+			'extra'=>array('site_name'=>conf('General','site_name'))
+		);
+	}
+}
Files elefant-elefant_1_3_10_beta/apps/admin/lib/Diff.php and elefant-elefant_1_3_11_rc/apps/admin/lib/Diff.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/lib/ExtendedAPI.php and elefant-elefant_1_3_11_rc/apps/admin/lib/ExtendedAPI.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/lib/Functions.php and elefant-elefant_1_3_11_rc/apps/admin/lib/Functions.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/lib/Layout.php elefant-elefant_1_3_11_rc/apps/admin/lib/Layout.php
--- elefant-elefant_1_3_10_beta/apps/admin/lib/Layout.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/lib/Layout.php	2015-09-05 21:13:59.000000000 -0500
@@ -97,6 +97,9 @@
 	 * Check whether a layout exists.
 	 */
 	public static function exists ($name) {
+		if ($name === 'default') {
+			return true;
+		}
 		return (file_exists ('layouts/' . $name . '.html') || file_exists ('layouts/' . $name . '/' . $name . '.html'));
 	}
 }
Files elefant-elefant_1_3_10_beta/apps/admin/lib/Lock.php and elefant-elefant_1_3_11_rc/apps/admin/lib/Lock.php are identical
Files elefant-elefant_1_3_10_beta/apps/admin/lib/Notifier.php and elefant-elefant_1_3_11_rc/apps/admin/lib/Notifier.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/lib/Toolbar.php elefant-elefant_1_3_11_rc/apps/admin/lib/Toolbar.php
--- elefant-elefant_1_3_10_beta/apps/admin/lib/Toolbar.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/lib/Toolbar.php	2015-09-05 21:13:59.000000000 -0500
@@ -5,138 +5,148 @@
 use \Appconf;
 use \DB;
 use \User;
+use \Ini;
 
 /**
  * Fetches apps for the Elefant toolbar.
  */
 class Toolbar {
-	public static $custom_tools_file = 'conf/tools.php';
-	public static $custom_tools = null;
-
-	public static $tools = null;
-
-	public static $installed_apps = null;
-
-	/**
-	 * Callback to sort links by their `name` key.
-	 */
-	public static function link_sort ($a, $b) {
-		if ($a['name'] == $b['name']) {
-			return 0;
-		}
-		return ($a['name'] < $b['name']) ? -1 : 1;
-	}
+	public static $apps = false;
+	public static $tools = false;
+	public static $compiled = false;
+	public static $autofill = false;
 
 	/**
 	 * Check if an app is compatible with the current user's platform.
 	 */
 	public static function is_compatible ($appconf) {
 		if (isset ($appconf['Admin']['platforms'])) {
-                $device_list = explode (',', $appconf['Admin']['platforms']);
-                foreach ($device_list as $device) {
-                        if (detect (trim ($device))) {
-                                return true;
-                        }
-                }
-        } else {
-                // No Admin/platforms conf entry so assume app is compatible
-                return true;
-        }
+			$device_list = explode (',', $appconf['Admin']['platforms']);
+			foreach ($device_list as $device) {
+				if (detect (trim ($device))) return true;
+			}
+        } else return true; // No Admin/platforms conf entry so assume app is compatible
         return false;
 	}
-
-	public static function custom_tools ($controller) {
-		if (self::$custom_tools !== null) {
-			return self::$custom_tools;
-		}
-
-		if (! file_exists (self::$custom_tools_file)) {
-			self::$custom_tools = false;
-			return self::$custom_tools;
+	
+	/**
+	 * Simple wrapper for processing custom tools and apps
+	 */
+	public static function compile ($c, $editing = false, $recache = false) {
+		if (self::$compiled !== false && !$recache) 
+			return self::$compiled;
+		
+		$apps = self::apps($c, $editing, $recache);
+		$tools = self::tools ($c, $editing, $recache);
+		foreach ($tools as $column => $group) {
+			// filter out resources that are already in use
+			$apps = array_diff_key($apps, $group);
 		}
-
-		self::$custom_tools = parse_ini_file (self::$custom_tools_file, true);
-		$add_extras_under = false;
-		$first_column = false;
-		$original_tools = array ();
-
-		if (self::$custom_tools !== false) {
-			foreach (self::$custom_tools as $column => $tools) {
-				if ($first_column === false) {
-					$first_column = $column;
+		return self::$compiled = array($tools, $apps);
+	}
+	
+	/**
+	 * Parse and cache custom tools list.
+	 * Sets cache to empty array if tools file
+	 * doesn't exist or is unspecified.
+	 */
+	public static function tools ($c, $editing = false, $recache = false) {
+		if (self::$tools !== false && !$recache)
+			return self::$tools;
+		
+		if (conf('Paths','toolbar') && !file_exists (conf('Paths','toolbar')))
+			return self::$tools = array();
+		$path = (conf('Paths','toolbar'))?conf('Paths','toolbar'):'conf/tools.php';
+		$tools = parse_ini_file ($path, true);
+		$first = false;
+
+		if ($tools !== false) {
+			foreach ($tools as $column => $group) {
+				if ($first === false) {
+					$first = true;
+					// check if we need to add an upgrade link
+					$ver = $c->installed ('elefant', ELEFANT_VERSION);
+					if ($ver !== true && !$editing) {
+						$tools[$column]['admin/upgrade'] = array (
+							'handler' => 'admin/upgrade',
+							'name' => 'Website Core',
+							'class' => 'needs-upgrade'
+						);
+					}
 				}
-
-				foreach ($tools as $handler => $name) {
+				$_column = $column;
+				$i = 0;
+				$j = 2;
+				foreach ($group as $handler => $name) {
 					if ($handler === '*') {
-						$add_extras_under = $column;
-						unset (self::$custom_tools[$column][$handler]);
-						continue;
+						self::$autofill = $column;
+						unset($tools[$column]);
+						break;
 					}
-
-					$original_tools[] = $handler;
-		
-					if ($handler === 'admin/pages' && ! Appconf::admin ('General', 'show_all_pages')) {
-						unset (self::$custom_tools[$column][$handler]);
-						continue;
+					
+					if (++$i > 7 && !$editing) {
+						$i = 0;
+						$column = $_column .' ('. $j++ .')';
+						$tools[$column] = array();
 					}
 					
 					$app = substr ($handler, 0, strpos ($handler, '/'));
 
 					// for app/admin and app/index handlers, verify acl on app alone
 					// for app/custom-name handlers, verify acl on both app and handler
-					if (
-							(preg_match ('/^' . preg_quote ($app, '/') . '\/(admin|index)$/', $handler)
-								&&
-							User::require_acl ($app))
-						||
-							User::require_acl ($app, $handler)
-					) {
+					if ($editing || (
+						(preg_match ('/^'. preg_quote ($app, '/') .'\/(admin|index)$/', $handler) && User::require_acl ($app))
+						|| 
+						User::require_acl ($app, $handler)
+					)) {
 						// Ok
 					} else {
 						// Can't access this app
-						unset (self::$custom_tools[$column][$handler]);
+						unset ($tools[$_column][$handler]);
 						continue;
 					}
 
 					$appconf = Appconf::get ($app);
 
 					if (! self::is_compatible ($appconf)) {
-						// App not compatible with this platform
-						unset (self::$custom_tools[$column][$handler]);
+						// App not compatible with this platform 
+						unset ($tools[$_column][$handler]);
 						continue;
 					}
+					
+					// remove resource from original section
+					if ($column !== $_column) unset ($tools[$_column][$handler]);
 
 					if (isset ($appconf['Admin']['install'])) {
-						$ver = $controller->installed ($app, $appconf['Admin']['version']);
+						$ver = $c->installed ($app, $appconf['Admin']['version']);
 
 						if ($ver === true) {
 							// installed
-							self::$custom_tools[$column][$handler] = array (
+							$tools[$column][$handler] = array (
 								'handler' => $handler,
 								'name' => __ ($name),
 								'class' => false
 							);
 						} elseif ($ver === false) {
 							// not installed
-							$name = __ ($name) . ' (' . __ ('click to install') . ')';
-							unset (self::$custom_tools[$column][$handler]);
-							self::$custom_tools[$column][$handler] = array (
-								'handler' => $appconf['Admin']['install'],
+							unset($tools[$column][$handler]);
+							$tools[$column][$appconf['Admin']['install']] = array (
+								'handler' => $handler,
 								'name' => $name,
-								'class' => 'needs-upgrade'
+								'class' => 'not-installed'
 							);
 						} else {
 							// needs upgrade
-							$name = __ ($name) . ' (' . __ ('click to upgrade') . ')';
-							self::$custom_tools[$column][$handler] = array (
-								'handler' => $appconf['Admin']['upgrade'],
+							unset($tools[$column][$handler]);
+							$tools[$column][$appconf['Admin']['upgrade']] = array (
+								'handler' => $handler,
 								'name' => $name,
 								'class' => 'needs-upgrade'
 							);
 						}
 					} else {
 						// no installer, as you were
-						self::$custom_tools[$column][$handler] = array (
+						$tools[$column][$handler] = array (
 							'handler' => $handler,
 							'name' => __ ($name),
 							'class' => false
@@ -144,154 +154,103 @@
 					}
 				}
 			}
-		}
+			// Clean out unused sections
+			foreach ($tools as $section => $group) {
+				if (count ($group) === 0) {
+					unset ($tools[$section]);
+				}
+			}
+		} else $tools = array();
+		return self::$tools = $tools;
+	}
+	
+	/**
+	 * Parse and cache available apps.
+	 */
+	public static function apps ($controller, $editing = false, $recache = false) {
+		if (self::$apps !== null && !recache) return self::$apps;
+		
+		$apps = array();
+		$tools = array();
 		
-		// check if we need to add an upgrade link
 		$ver = $controller->installed ('elefant', ELEFANT_VERSION);
-		if ($ver !== true) {
-			self::$custom_tools[$first_column]['admin/upgrade'] = array (
+		if ($ver !== true && !$editing) {
+			$tools['admin/upgrade'] = array(
 				'handler' => 'admin/upgrade',
-				'name' => ' ' . __ ('Click to upgrade'),
+				'name' => 'Website Core',
 				'class' => 'needs-upgrade'
 			);
 		}
 		
-		// check if we need to add additional apps
-		if ($add_extras_under !== false) {
-			// parse each and determine whether to add it to the list
-			$extras = array ();
-			$res = glob ('apps/*/conf/config.php');
-			foreach ($res as $file) {
-				$app = preg_replace ('/^apps\/(.*)\/conf\/config\.php$/i', '\1', $file);
-
-				if (! User::require_acl ($app)) {
-					// Can't access this app
-					continue;
-				}
-
-				$appconf = Appconf::get ($app);
-
-				if (! self::is_compatible ($appconf)) {
-					// App not compatible with this platform
-					continue;
-				}
-				
-				if (isset ($appconf['Admin']['handler'])) {
-					if (in_array ($appconf['Admin']['handler'], $original_tools)) {
-						continue;
-					}
+		// Grab tools the new way.
+		$res = glob ('apps/*/conf/tools.php');
+		foreach ($res as $file) {
+			$app = preg_replace ('/^apps\/(.*)\/conf\/tools\.php$/i', '\1', $file);
+			$appconf = Appconf::get ($app);
 
-					if (! preg_match ('/\/(admin|index)$/', $appconf['Admin']['handler']) && ! User::require_acl ($appconf['Admin']['handler'])) {
-						// A non /admin or /index handler should get an additional
-						// access check (e.g., admin/versions).
-						continue;
-					}
+			if (! self::is_compatible ($appconf)) {
+				// App not compatible with this platform
+				continue;
+			}
+			
+			if (isset($appconf['Admin']['install'])) {
+				$ver = $controller->installed ($app, $appconf['Admin']['version']);
+			} else $ver = true;
+			
+			// Do not allow uninstalled apps to autofill from tools.php
+			if ($ver === false) continue;
+			
+			$apps[] = $app;
+			$resources = parse_ini_file($file);
+			
+			foreach($resources as $handler => $name) {
+				// ACL check.
+				$app = substr ($handler, 0, strpos ($handler, '/'));
+				if ($editing || (
+					(preg_match ('/^'. preg_quote ($app, '/') .'\/(admin|index)$/', $handler) && User::require_acl ($app))
+					|| 
+					User::require_acl ($handler)
+				)) {/* Ok */} else continue;
 				
-					if (isset ($appconf['Admin']['install'])) {
-						$ver = $controller->installed ($app, $appconf['Admin']['version']);
-
+				if (preg_match ('/\/(admin|index)$/', $handler)) {
 						if ($ver === true) {
-							// installed
-							$extras[$appconf['Admin']['handler']] = array (
-								'handler' => $appconf['Admin']['handler'],
-								'name' => $appconf['Admin']['name'],
+							$tools[$handler] = array(
+								'handler' => $handler,
+								'name' => __($name),
 								'class' => false
 							);
-						} elseif ($ver === false) {
-							// not installed
-							$appconf['Admin']['name'] .= ' (' . __ ('click to install') . ')';
-							$extras[$appconf['Admin']['install']] = array (
-								'handler' => $appconf['Admin']['install'],
-								'name' => $appconf['Admin']['name'],
-								'class' => 'needs-upgrade'
-							);
 						} else {
-							// needs upgrade
-							$appconf['Admin']['name'] .= ' (' . __ ('click to upgrade') . ')';
-							$extras[$appconf['Admin']['upgrade']] = array (
-								'handler' => $appconf['Admin']['upgrade'],
-								'name' => $appconf['Admin']['name'],
+							$tools[$appconf['Admin']['upgrade']] = array(
+								'handler' => $handler,
+								'name' => __($name),
 								'class' => 'needs-upgrade'
 							);
 						}
-					} else {
-						// no installer, as you were
-						$extras[$appconf['Admin']['handler']] = array (
-							'handler' => $appconf['Admin']['handler'],
-							'name' => $appconf['Admin']['name'],
-							'class' => false
-						);
-					}
-				}
-			}
-
-			uasort ($extras, 'admin\Toolbar::link_sort');
-			$count = 0;
-			foreach ($extras as $handler => $extra) {
-				if ($count >= 14) {
-					self::$custom_tools['&nbsp;'][$handler] = $extra;
-				} elseif ($count >= 7) {
-					self::$custom_tools['&nbsp;&nbsp;'][$handler] = $extra;
 				} else {
-					self::$custom_tools[$add_extras_under][$handler] = $extra;
+					$tools[$handler] = array(
+						'handler' => $handler,
+						'name' => __($name),
+						'class' => false
+					);
 				}
-				$count++;
-			}
-		}
-
-		foreach (self::$custom_tools as $section => $tools) {
-			if (count ($tools) === 0) {
-				unset (self::$custom_tools[$section]);
 			}
 		}
 		
-		return self::$custom_tools;
-	}
-	
-	/**
-	 * Parse the apps for a list of tools.
-	 */
-	public static function parse_apps ($controller) {
-		if (self::$tools !== null) {
-			return self::$tools;
-		}
-
-		$ver = $controller->installed ('elefant', ELEFANT_VERSION);
-		if ($ver === true) {
-			self::$tools = array (
-				'admin/pages' => array (
-					'handler' => 'admin/pages',
-					'name' => ' ' . __ ('Web Pages'),
-					'class' => false
-				)
-			);
-		} else {
-			self::$tools = array (
-				'admin/upgrade' => array (
-					'handler' => 'admin/upgrade',
-					'name' => ' ' . __ ('Click to upgrade'),
-					'class' => 'needs-upgrade'
-				),
-				'admin/pages' => array (
-					'handler' => 'admin/pages',
-					'name' => ' ' . __ ('Web Pages')
-				)
-			);
+		if ((! Appconf::admin ('General', 'show_all_pages') || ! User::require_acl ('admin/pages')) && !$editing) {
+			unset ($tools['admin/pages']);
 		}
 		
-		if (! Appconf::admin ('General', 'show_all_pages') || ! User::require_acl ('admin/pages')) {
-			unset (self::$tools['admin/pages']);
-		}
-
+		// Grab tools the old way
 		// parse each app to determine whether to add it to the list
 		$res = glob ('apps/*/conf/config.php');
 		foreach ($res as $file) {
 			$app = preg_replace ('/^apps\/(.*)\/conf\/config\.php$/i', '\1', $file);
-
-			if (! User::require_acl ($app)) {
-				// Can't access this app
-				continue;
-			}
+			
+			// Skip if app already autoloaded from tools.php
+			if (in_array($app,$apps)) continue;
+			
+			// Can't access this app
+			if (! User::require_acl ($app) && !$editing) continue;
 			
 			$appconf = Appconf::get ($app);
 
@@ -299,9 +258,14 @@
 				// App not compatible with this platform
 				continue;
 			}
+			
+			if (isset($appconf['Admin']['toolbar']) && $appconf['Admin']['toolbar'] == 'Off') {
+				// App specifies to be excluded from toolbar auto-parsing
+				continue;
+			}
 
 			if (isset ($appconf['Admin']['handler'])) {
-				if (! preg_match ('/\/(admin|index)$/', $appconf['Admin']['handler']) && ! User::require_acl ($appconf['Admin']['handler'])) {
+				if (! preg_match ('/\/(admin|index)$/', $appconf['Admin']['handler']) && ! User::require_acl ($appconf['Admin']['handler']) && !$editing) {
 					// A non /admin or /index handler should get an additional
 					// access check (e.g., admin/versions).
 					continue;
@@ -312,29 +276,38 @@
 
 					if ($ver === true) {
 						// installed
-						self::$tools[$appconf['Admin']['handler']] = $appconf['Admin'];
-						self::$tools[$appconf['Admin']['handler']]['class'] = false;
+						$tools[$appconf['Admin']['handler']] = $appconf['Admin'];
+						$tools[$appconf['Admin']['handler']]['class'] = false;
 					} elseif ($ver === false) {
 						// not installed
-						$appconf['Admin']['name'] .= ' (' . __ ('click to install') . ')';
-						self::$tools[$appconf['Admin']['install']] = $appconf['Admin'];
-						self::$tools[$appconf['Admin']['install']]['class'] = 'not-installed';
+						$tools[$appconf['Admin']['install']] = $appconf['Admin'];
+						$tools[$appconf['Admin']['install']]['class'] = 'not-installed';
 					} else {
 						// needs upgrade
-						$appconf['Admin']['name'] .= ' (' . __ ('click to upgrade') . ')';
-						self::$tools[$appconf['Admin']['upgrade']] = $appconf['Admin'];
-						self::$tools[$appconf['Admin']['upgrade']]['class'] = 'needs-upgrade';
+						$tools[$appconf['Admin']['upgrade']] = $appconf['Admin'];
+						$tools[$appconf['Admin']['upgrade']]['class'] = 'needs-upgrade';
 					}
 				} else {
 					// no installer, as you were
-					self::$tools[$appconf['Admin']['handler']] = $appconf['Admin'];
-					self::$tools[$appconf['Admin']['handler']]['class'] = false;
+					$tools[$appconf['Admin']['handler']] = $appconf['Admin'];
+					$tools[$appconf['Admin']['handler']]['class'] = false;
 				}
 			}
 		}
-		
-		uasort (self::$tools, 'admin\Toolbar::link_sort');
-
-		return self::$tools;
+		uasort ($tools, function ($a, $b) {
+			if ($a['name'] == $b['name']) {
+				return 0;
+			}
+			return ($a['name'] < $b['name']) ? -1 : 1;
+		});
+		return self::$apps = $tools;
+	}
+	
+	/**
+	 * Simple wrapper for saving the toolbar list.
+	 */
+	public static function save ($data){
+		$path = (conf('Paths','toolbar'))?conf('Paths','toolbar'):'conf/tools.php';
+		return (bool) Ini::write($data, $path);
 	}
 }
Files elefant-elefant_1_3_10_beta/apps/admin/models/ExtendedFields.php and elefant-elefant_1_3_11_rc/apps/admin/models/ExtendedFields.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/models/Versions.php elefant-elefant_1_3_11_rc/apps/admin/models/Versions.php
--- elefant-elefant_1_3_10_beta/apps/admin/models/Versions.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/models/Versions.php	2015-09-05 21:13:59.000000000 -0500
@@ -215,4 +215,35 @@
 			'select distinct class from #prefix#versions order by class asc'
 		);
 	}
+	
+	/**
+	 * Get the display name for a class.
+	 */
+	public static function display_name ($name) {
+		if (isset ($name::$display_name)) {
+			return $name::$display_name;
+		}
+		
+		if (strpos ($name, '\\') !== false) {
+			return substr ($name, strrpos ($name, '\\') + 1);
+		}
+		
+		return $name;
+	}
+	
+	/**
+	 * Get the plural name for a class.
+	 */
+	public static function plural_name ($name) {
+		if (isset ($name::$plural_name)) {
+			return $name::$plural_name;
+		}
+		
+		if (strpos ($name, '\\') !== false) {
+			$name = substr ($name, strrpos ($name, '\\') + 1);
+		}
+		
+		$ar = new ActiveResource;
+		return $ar->pluralize ($name);
+	}
 }
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/models/Webpage.php elefant-elefant_1_3_11_rc/apps/admin/models/Webpage.php
--- elefant-elefant_1_3_10_beta/apps/admin/models/Webpage.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/models/Webpage.php	2015-09-05 21:13:59.000000000 -0500
@@ -52,6 +52,16 @@
 	 * user-defined properties.
 	 */
 	public $_extended_field = 'extra';
+	
+	/**
+	 * Display name for this model type.
+	 */
+	public static $display_name = 'Web Page';
+	
+	/**
+	 * Plural display name for this model type.
+	 */
+	public static $plural_name = 'Web Pages';
 
 	/**
 	 * Override the getter for head to include the description
Files elefant-elefant_1_3_10_beta/apps/admin/views/add/head.html and elefant-elefant_1_3_11_rc/apps/admin/views/add/head.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/add.html elefant-elefant_1_3_11_rc/apps/admin/views/add.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/add.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/add.html	2015-09-05 21:13:59.000000000 -0500
@@ -10,8 +10,8 @@
 <p>{"Body"}: <span class="notice" id="body-notice">{"You must enter body content."}</span><br />
 <textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
 
-<h4><a href="#" onclick="return webpage_show_extra_options (this)" class="extra-options-link"><span class="arrow arrow-off"></span>{"Extra Options"}</a></h4>
-<div id="extra-options">
+<h4>{"Extra Options"}</h4>
+
 <p>{"Page layout"}:<br />
 <select name="layout">
 {% foreach admin\Layout::options() as _layout, _name %}
@@ -29,8 +29,9 @@
 <span class="notice" id="layout-notice">{"The layout you entered doesn't exist."}</span></p>
 <p>{"Description"}:<br /><textarea name="description" cols="60" rows="4">{{ description }}</textarea></p>
 <p>{"Keywords (comma-separated)"}:<br /><textarea name="keywords" cols="60" rows="4">{{ keywords }}</textarea></p>
-</div>
+
 {! admin/util/extended?extends=Webpage&name=Pages !}
+
 <p>
 	<input type="submit" value="{"Add Page"}" class="autosave-clear" />&nbsp;
 	<input type="submit" value="{"Preview"}" onclick="return webpage_preview (this.form)" />&nbsp;
Files elefant-elefant_1_3_10_beta/apps/admin/views/base.html and elefant-elefant_1_3_11_rc/apps/admin/views/base.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/compare.html elefant-elefant_1_3_11_rc/apps/admin/views/compare.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/compare.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/compare.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,16 +1,22 @@
 <p><a href="/admin/versions?type={{ class }}&id={{ pkey }}">&laquo; {"Other versions"}</a></p>
 
 <p>
-<table>
+<table width="100%">
 	<tr>
 		<th>{"Field"}</th>
-		<th width="45%">{{ ts|gmdate ('F j, Y - g:ia', strtotime (%s)) }} <a href="/admin/restore?id={{ $_GET['id'] }}">{"Restore"}</a></th>
-		<th width="45%">{"Current"}</th>
+		{% if ! is_current %}
+		<th width="43%">{{ ts|gmdate ('F j, Y - g:ia', strtotime (%s)) }} <a href="/admin/restore?id={{ $_GET['id'] }}">{"Restore"}</a></th>
+		<th width="43%">{"Current"}</th>
+		{% else %}
+		<th width="80%">{"Current"} <a href="/admin/restore?id={{ $_GET['id'] }}">{"Restore"}</a></th>
+		{% end %}
 	</tr>
 {% foreach fields %}
 	<tr{% if loop_value['diff'] %} class="different"{% end %}>
 		<td>{{ loop_index|ucfirst|str_replace ('_', ' ', %s) }}</td>
+		{% if ! is_current %}
 		<td>{{ loop_value['old']|none }}</td>
+		{% end %}
 		<td>{{ loop_value['cur']|none }}</td>
 	</tr>
 {% end %}
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/default-validation.html elefant-elefant_1_3_11_rc/apps/admin/views/default-validation.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/default-validation.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/default-validation.html	2015-09-05 21:13:59.000000000 -0500
@@ -4,7 +4,12 @@
 $(function () {
 	$('#{{ _form }}').verify_values ({
 		handler: '{{ _rules }}',
-		callback: function (failed) {
+		callback: function (failed, dont_scroll) {
+			if (! dont_scroll) {
+				// scroll to top of form
+				$('#{{ _form }}')[0].scrollIntoView ();
+			}
+
 			// highlight the failed elements
 			for (var i = 0; i < failed.length; i++) {
 				$('#' + failed[i] + '-notice').show ();
Files elefant-elefant_1_3_10_beta/apps/admin/views/edit/head.html and elefant-elefant_1_3_11_rc/apps/admin/views/edit/head.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/edit.html elefant-elefant_1_3_11_rc/apps/admin/views/edit.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/edit.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/edit.html	2015-09-05 21:13:59.000000000 -0500
@@ -10,8 +10,8 @@
 <p>{"Body"}: <span class="notice" id="body-notice">{"You must enter body content."}</span><br />
 <textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
 
-<h4><a href="#" onclick="return webpage_show_extra_options (this)" class="extra-options-link"><span class="arrow arrow-off"></span>{"Extra Options"}</a></h4>
-<div id="extra-options">
+<h4>{"Extra Options"}</h4>
+
 <p>{"Page layout"}:<br />
 <select name="layout">
 {% foreach admin\Layout::options() as _layout, _name %}
@@ -29,8 +29,9 @@
 <span class="notice" id="layout-notice">{"The layout you entered doesn't exist."}</span></p>
 <p>{"Description"}:<br /><textarea name="description" cols="60" rows="4">{{ description }}</textarea></p>
 <p>{"Keywords (comma-separated)"}:<br /><textarea name="keywords" cols="60" rows="4">{{ keywords }}</textarea></p>
-</div>
+
 {! admin/util/extended?extends=Webpage&name=Pages&values=[extra|none]&id=[id] !}
+
 <p>
 	<input type="submit" value="{"Save Page"}" class="autosave-clear" />&nbsp;
 	<input type="submit" value="{"Save &amp; Keep Editing"}" id="bgsave" />&nbsp;
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/editable.html elefant-elefant_1_3_11_rc/apps/admin/views/editable.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/editable.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/editable.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,3 +1,5 @@
-<p class="admin-options">
-	{% if User::require_acl ('admin/edit', 'admin/add') %}<a href="/admin/add" title="{"Add Page"}" class="editable-add" data-trigger="a"></a>{% end %}{% if locked %}<a href="javascript:void(0)" title="{"Editing Locked"}" class="editable-lock"></a>{% else %}{% if User::require_acl ('admin/edit') %}<a href="/admin/edit?page={{ id }}" title="{"Edit Page"}" class="editable-edit" data-trigger="e"></a>{% end %}{% if User::require_acl ('admin/versions') %}<a href="/admin/versions?type=Webpage&id={{ id }}" title="{"Versions"}" class="editable-versions" data-trigger="v"></a>{% end %}{% if User::require_acl ('admin/delete') %}<a href="/admin/delete" data-page="{{ id }}" title="{"Delete Page"}" onclick="return $.confirm_and_post (this, '{"Are you sure you want to delete the current page?"}');" class="editable-delete" data-trigger="d"></a>{% end %}{% end %}
+{! admin/util/fontawesome !}
+
+<p class="admin-options admin-options-page">
+	{% if User::require_acl ('admin/edit', 'admin/add') %}<a href="/admin/add" title="{"Add Page"}" class="editable-add" data-trigger="a"><i class="fa fa-lg fa-plus"></i></a>{% end %}{% if locked %}<a href="javascript:void(0)" title="{"Editing Locked"}" class="editable-lock"><i class="fa fa-lg fa-lock"></i></a>{% else %}{% if User::require_acl ('admin/edit') %}<a href="/admin/edit?page={{ id }}" title="{% if conf ('General', 'page_editor') %}{"Edit Properties"}{% else %}{"Edit Page"}{% end %}" class="editable-edit" data-trigger="e"><i class="fa fa-lg fa-pencil"></i></a>{% end %}{% if User::require_acl ('admin/versions') %}<a href="/admin/versions?type=Webpage&id={{ id }}" title="{"Versions"}" class="editable-versions" data-trigger="v"><i class="fa fa-lg fa-files-o"></i></a>{% end %}{% if User::require_acl ('admin/delete') %}<a href="/admin/delete" data-page="{{ id }}" title="{"Delete Page"}" onclick="return $.confirm_and_post (this, '{"Are you sure you want to delete the current page?"}');" class="editable-delete" data-trigger="d"><i class="fa fa-lg fa-trash-o"></i></a>{% end %}{% end %}
 </p>
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/extended.html elefant-elefant_1_3_11_rc/apps/admin/views/extended.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/extended.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/extended.html	2015-09-05 21:13:59.000000000 -0500
@@ -19,6 +19,8 @@
 				<option value="select">{"Drop down"}</option>
 				<option value="file">{"File link"}</option>
 				<option value="image">{"Image link"}</option>
+				<option value="date">{"Date input"}</option>
+				<option value="datetime">{"Date/time input"}</option>
 {% foreach custom as field_id, field_name %}
 				<option value="{{field_id}}">{{field_name|__}}</option>
 {% end %}
@@ -58,6 +60,8 @@
 					<option value="select"\{{#if select}} selected\{{/if}}>{"Drop down"}</option>
 					<option value="file"\{{#if file}} selected\{{/if}}>{"File link"}</option>
 					<option value="image"\{{#if image}} selected\{{/if}}>{"Image link"}</option>
+					<option value="date"\{{#if date}} selected\{{/if}}>{"Date input"}</option>
+					<option value="datetime"\{{#if datetime}} selected\{{/if}}>{"Date/time input"}</option>
 {% foreach custom as field_id, field_name %}
 					<option value="{{field_id}}"\{{#if {{field_id}}\}} selected \{{/if}}>{{field_name|__}}</option>
 {% end %}
@@ -182,7 +186,7 @@
 	
 	.submit-buttons {
 		position: absolute;
-		bottom: 0px;
+		bottom: 10px;
 		right: 8px;
 	}
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/head/links.html elefant-elefant_1_3_11_rc/apps/admin/views/head/links.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/head/links.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/head/links.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,30 +1,47 @@
-{% if ! custom %}
+<style>
+	#admin-tools-list li a.not-installed:after {
+		content: " ({"click to install"})";
+	}
+	#admin-tools-list li a.needs-upgrade:after {
+		content: " ({"click to upgrade"})";
+	}
+</style>
+{% if is_apps %}
 	<a href="#preview" class="admin-tools-show-preview" data-trigger="p" data-trigger-label="{"Toggle preview mode"}">{"Preview"}</a>
 	<a href="/" id="admin-tools-website" data-trigger="w" data-trigger-label="{"Go to website"}">{"Website"}</a>
-	<span id="admin-tools" data-trigger="t" data-trigger-label="{"Toggle tools menu"}">{"Tools"} &nbsp; &nbsp;
-	<ul id="admin-tools-list">
-	{% foreach tools %}
-		<li><a href="/{{ loop_index }}"{% if loop_value['class'] %}class="{{ loop_value['class'] }}"{% end %}>{{ loop_value['name']|i18n_get }}</a></li>
+	{% if count($data->tools) || $data->editable %}
+		<span id="admin-tools" data-trigger="t" data-trigger-label="{"Toggle tools menu"}">{"Tools"} &nbsp; &nbsp;
+		<ul id="admin-tools-list">
+		{% if editable %}<li><a href="/admin/toolbar"><em>{"Edit Toolbar"}</em></a></li>{% end %}
+		{% foreach tools %}
+			<li><a href="/{{ loop_index }}"{% if loop_value['class'] %} class="{{ loop_value['class'] }}"{% end %}>{{ loop_value['name']|__ }}</a></li>
+		{% end %}
+		</ul>
+		</span>
 	{% end %}
-	</ul>
-	</span>
 	<a href="/user" id="admin-tools-user" data-trigger="u" data-trigger-label="{"Go to user profile"}">{{ user }}</a>
 	<a href="/user/logout" id="admin-tools-logout" data-trigger="q" data-trigger-label="{"Log out"}">{"Log out"}</a>
 {% else %}
 	<a href="#preview" class="admin-tools-show-preview" data-trigger="p" data-trigger-label="{"Toggle preview mode"}">{"Preview"}</a>
 	<a href="/" id="admin-tools-website" data-trigger="w" data-trigger-label="{"Go to website"}">{"Website"}</a>
-	<div id="admin-tools-list" class="admin-tools-custom">
-	{% foreach tools as section, _tools %}
-		<div class="admin-tools-section">
-		<h3 class="admin-tools-section-header">{{section|__}}</h3>
-		<ul class="admin-tools-list">
-		{% foreach _tools as _tool %}
-			<li><a href="/{{ _tool['handler'] }}"{% if _tool['class'] %}class="{{ _tool['class'] }}"{% end %}>{{ _tool['name']|__ }}</a></li>
+	{% if count($data->tools) || $data->editable %}
+		<div id="admin-tools-list" class="admin-tools-custom">
+		{% if editable %}<a class="admin-tools-edit" href="/admin/toolbar">{"Edit Toolbar"}</a>{% end %}
+		<?php $data->row_count = 0; ?>
+		{% foreach tools as section, group %}
+			<?php $data->row_count++; ?>
+			<div class="admin-tools-section">
+			<h3 class="admin-tools-section-header">{{section|__}}</h3>
+			<ul class="admin-tools-list">
+			{% foreach group as tool %}
+				<li><a href="/{{ loop_index }}"{% if tool['class'] %}class="{{ tool['class'] }}"{% end %}>{{ tool['name']|__ }}</a></li>
+			{% end %}
+			</ul>
+			</div>
+			{% if row_count % 5 === 0 %}<br class="clear">{% end %}
 		{% end %}
-		</ul>
 		</div>
 	{% end %}
-	</div>
 	<a href="/user" id="admin-tools-user" data-trigger="u" data-trigger-label="{"Go to user profile"}">{{ user }}</a>
 	<a href="/user/logout" id="admin-tools-logout" data-trigger="q" data-trigger-label="{"Log out"}">{"Log out"}</a>
-{% end %}
+{% end %}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/admin/views/index.html and elefant-elefant_1_3_11_rc/apps/admin/views/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/admin/views/locked.html and elefant-elefant_1_3_11_rc/apps/admin/views/locked.html are identical
Files elefant-elefant_1_3_10_beta/apps/admin/views/pages.html and elefant-elefant_1_3_11_rc/apps/admin/views/pages.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/settings.html elefant-elefant_1_3_11_rc/apps/admin/views/settings.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/settings.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/settings.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,40 @@
+<div class="form">
+
+<form method="post" id="{{_form}}">
+
+<p>
+	{"Site name"}:<br />
+	<input type="text" name="site_name" size="40" value="{{ site_name|quotes }}" />
+	<span class="notice" id="site_name-notice">{"Please enter a name for your website."}</span>
+</p>
+
+<p>
+	{"Site domain"}:<br />
+	<input type="text" name="site_domain" size="40" value="{{ site_domain|quotes }}" />
+	<span class="notice" id="site_domain-notice">{"Please enter a domain name for your website."}</span>
+</p>
+
+<p>
+	{"Email address"}:<br />
+	<input type="text" name="email_from" size="40" value="{{ email_from|quotes }}" />
+	<span class="notice" id="email_from-notice">{"Please enter a valid email address."}</span>
+</p>
+
+<input type="hidden" name="timezone" value="{{ timezone|quotes }}" />
+<input type="hidden" name="default_layout" value="{{ default_layout|quotes }}" />
+
+<p>
+	{"Google Analytics ID"}:<br />
+	<input type="text" name="google_analytics_id" size="40" value="{{ google_analytics_id|quotes }}" />
+</p>
+
+
+<p>
+	<input type="submit" value="{"Save Settings"}" />
+	&nbsp;
+	<a href="/" onclick="return confirm ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
+</p>
+
+</form>
+
+</div>
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/toolbar.html elefant-elefant_1_3_11_rc/apps/admin/views/toolbar.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/toolbar.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/toolbar.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,89 @@
+<!--[if IE]>
+<style>
+body:not(.cursorGrabbing) .treeDragDrop li, .tdd-dragContainer li{
+	cursor: url(/apps/admin/js/tree-drag-drop/css/openhand.cur), move;
+}
+</style>
+<![endif]-->
+<style>
+.trashbin {
+	width:48%; 
+	float:right;
+}
+
+.tree {
+	width:48%; 
+	float:left;
+}
+
+.caption {
+	display:block;
+	margin-top:10px;
+}
+
+.inline-caption {
+	display:inline-block;
+	font-size:13px;
+	float:right;
+	font-weight:initial;
+	margin-top:5px;
+}
+
+.tool.needs-upgrade, .tool.not-installed {
+	/*color: #93278f;
+	font-weight: bold;*/
+}
+
+.error {
+	color:red;
+}
+
+.special {
+	/*font-style:italic;*/
+}
+
+</style>
+
+<div class="treeDragDrop">
+	<div class="tree">
+		<h4>{"Toolbar Menu"}<a class="inline-caption" href="javascript:;" onclick="$.treeDragDrop.handlers.handleOpenModal();">{"Add Category"}</a></h4>
+		<p class="caption">{"Drag resources to the toolbar tree to include them in the toolbar."}</p>
+		<ul class="tdd-tree">
+		{% if tools|count %}{% foreach tools as section, group %}
+			<li id="cat_{{ section|str_replace(' ','_',%s)|strtolower }}" class="section" data-section="{{ section }}"><b>{{ section }}</b>
+				<ul class="tools">
+				{% if group|count %}
+				{% foreach group as tool %}
+					<li id="res_{{ tool['handler']|str_replace(' ','_',%s)|strtolower }}" 
+						class="tool{% if tool['class'] %} {{ tool['class'] }}{% end %}"
+						title="/{{ tool['handler'] }}" 
+						data-name="{{ tool['name'] }}" 
+						data-handler="{{ tool['handler'] }}"
+					>{{ tool['name'] }}</li>
+				{% end %}
+				{% end %}
+				</ul>
+			</li>
+		{% end %}{% end %}
+		{% if autofill %}<li id="cat_*" class="special" data-name="{{ autofill }}" data-handler="*"><b>{{ autofill }}</b> ({"new apps will automatically be added here"})</li>{% end %}
+		</ul>
+	</div>
+	<div class="trashbin">
+		<h4> {"Available Resources"}</h4>
+		<p class="caption">{"Drag resources here to remove them from the toolbar."}</p>
+		<ul class="tdd-trashbin">
+		{% foreach apps as app %}
+			<li id="res_{{ app['handler']|str_replace(' ','_',%s)|strtolower }}" 
+				class="tool{% if app['class'] %} {{ app['class'] }}{% end %}" 
+				title="/{{ app['handler'] }}"
+				data-name="{{ app['name'] }}" 
+				data-handler="{{ app['handler'] }}"
+			>{{ app['name'] }}</li>
+		{% end %}
+		{% if autofill === false %}
+			<li id="cat_*" class="special" data-name="{{ \Appconf::admin('General','autofill_column') }}" data-handler="*"><b>{{ \Appconf::admin('General','autofill_column') }}</b> ({"new apps will automatically be added here"})</li>
+		{% end %}
+		</ul>
+	</div>
+</div>
+<br clear="both" />
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/util/analytics.html elefant-elefant_1_3_11_rc/apps/admin/views/util/analytics.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/util/analytics.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/util/analytics.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,10 @@
+<script>
+  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
+  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
+  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
+  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
+
+  ga('create', '{{analytics_id}}', 'auto');
+  ga('send', 'pageview');
+
+</script>
Files elefant-elefant_1_3_10_beta/apps/admin/views/util/codemirror.html and elefant-elefant_1_3_11_rc/apps/admin/views/util/codemirror.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/util/extended.html elefant-elefant_1_3_11_rc/apps/admin/views/util/extended.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/util/extended.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/util/extended.html	2015-09-05 21:13:59.000000000 -0500
@@ -19,6 +19,34 @@
 				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
 			{% end %}
 		</p>
+	{% elseif field->type === 'date' %}
+		<p>
+			{{field->label|__}}:<br />
+			<input	type="text"
+					name="_extended[{{field->name}}]"
+					id="_extended_{{field->name}}"
+					value="{{field->value|quotes}}"
+					class="datewidget-date"
+					size="20"
+			/>
+			{% if field->required %}
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
+	{% elseif field->type === 'datetime' %}
+		<p>
+			{{field->label|__}}:<br />
+			<input	type="text"
+					name="_extended[{{field->name}}]"
+					id="_extended_{{field->name}}"
+					value="{{field->value|quotes}}"
+					class="datewidget-datetime"
+					size="20"
+			/>
+			{% if field->required %}
+				<span class="notice" id="_extended_{{field->name}}_notice">{{field->label|__}} {"is required"}.</span>
+			{% end %}
+		</p>
 	{% elseif field->type === 'textarea' %}
 		<p>
 			{{field->label|__}}:<br />
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/util/wysiwyg.html elefant-elefant_1_3_11_rc/apps/admin/views/util/wysiwyg.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/util/wysiwyg.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/util/wysiwyg.html	2015-09-05 21:13:59.000000000 -0500
@@ -7,49 +7,18 @@
 	 */
 	$.fn.extend ({
 		wysiwyg: function (options) {
-			var defaults = {
-				lang: '{{language}}',
-				convertDivs: false,
-				observeLinks: false,
-				plugins: ['links', 'imagebrowser', 'filebrowser', 'dynamic'],
-				buttons: [
-					'formatting', '|', 'bold', 'italic', 'deleted', '|',
-					'alignment', 'horizontalrule', '|', 'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
-					'link_unlink', 'imagebrowser', 'filebrowser', 'table', '|',
-					'undo', 'html', 'dynamic'
-				],
-				buttonsCustom: {
-					undo: {
-						title: '{"Undo"}',
-						dropdown: {
-							point1: {
-								title: '{"Undo"}',
-								callback: undo
-							},
-							point2: {
-								title: '{"Redo"}',
-								callback: redo
-							}
-						}
-					},
-					link_unlink: {
-						title: '{"Link"}',
-						dropdown: {
-							point1: {
-								title: '{"Insert Link"}',
-								callback: RedactorPlugins.links.insert
-							},
-							point2: {
-								title: '{"Unlink"}',
-								exec: 'unlink'
-							}
-						}
+			var buttons = {{buttons|json_encode}},
+				defaults = {
+					lang: '{{language}}',
+					replaceDivs: false,
+					linkTooltip: false,
+					buttonSource: true,
+					plugins: ['links', 'imagebrowser', 'filebrowser', 'table', 'undo', 'dynamic'],
+					buttons: buttons,
+					focusCallback: function (evt) {
+						autosave_focused = true;
 					}
-				},
-				focusCallback: function (evt) {
-					autosave_focused = true;
-				}
-			};
+				};
 
 			options = $.extend (defaults, options);
 
@@ -60,19 +29,12 @@
 	});
 
 	{% if field_id %}
+	document.getElementById ('{{ field_id }}').setAttribute ('data-wysiwyg', 1);
 	$('#{{ field_id }}').wysiwyg ();
 	{% end %}
 
-	RedactorPlugins.links.editor_id = '#{{ field_id }}';
-
-	function undo () {
-		//obj.exec.command.call (obj, 'undo');
-		$('#{{ field_id }}').redactor ('execCommand', 'undo');
-	}
-
-	function redo () {
-		//obj.exec.command.call (obj, 'redo');
-		$('#{{ field_id }}').redactor ('execCommand', 'redo');
+	if (RedactorPlugins && RedactorPlugins.links) {
+		RedactorPlugins.links.editor_id = '#{{ field_id }}';
 	}
 });
 </script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/admin/views/versions.html elefant-elefant_1_3_11_rc/apps/admin/views/versions.html
--- elefant-elefant_1_3_10_beta/apps/admin/views/versions.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/admin/views/versions.html	2015-09-05 21:13:59.000000000 -0500
@@ -6,11 +6,13 @@
 <input type="hidden" name="id" value="{{ id }}" />
 {"Type"}: <select name="type" onchange="this.form.submit ()">
 {% foreach classes %}
-	<option value="{{ loop_value }}" {% if type == $data->loop_value %}selected{% end %}>{{ loop_value }}</option>
+	<option value="{{ loop_value }}" {% if type == $data->loop_value %}selected{% end %}>{{ loop_value|Versions::plural_name|__ }}</option>
 {% end %}
 </select>
 </form>
 </p>
+{% else %}
+<p><a href="/admin/versions?type={{type|urlencode}}">&laquo; {"All"} {{plural}}</a></p>
 {% end %}
 
 <p style="float: left">
@@ -56,12 +58,12 @@
 			<td>{{ loop_value->user|admin_filter_user_name }}</td>
 		{% if loop_index == 0 %}
 			{% if deleted %}
-				<td><a href="/admin/compare?id={{ loop_value->id }}">{"View current"}</a></td>
+				<td><a href="/admin/compare?id={{ loop_value->id }}&current=yes"><strong>{"View current (deleted)"}</strong></a></td>
 			{% else %}
-				<td><strong>{"Current version"}</strong></td>
+				<td><a href="/admin/compare?id={{ loop_value->id }}&current=yes"><strong>{"Current version"}</strong></a></td>
 			{% end %}
 		{% else %}
-			<td><a href="/admin/compare?id={{ loop_value->id }}">{"Compare to current"}</a></td>
+			<td><a href="/admin/compare?id={{ loop_value->id }}&current=no">{"Compare to current"}</a></td>
 		{% end %}
 		</tr>
 	{% end %}
diff -urBNs elefant-elefant_1_3_10_beta/apps/api/conf/cli.php elefant-elefant_1_3_11_rc/apps/api/conf/cli.php
--- elefant-elefant_1_3_10_beta/apps/api/conf/cli.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/api/conf/cli.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,6 @@
+; <?php /*
+
+commands[api/create-token] = Generate or reset an API token and secret key for a user.
+commands[api/get-token] = Fetch or generate an API token and secret key for a user.
+
+; */ ?>
Files elefant-elefant_1_3_10_beta/apps/api/conf/config.php and elefant-elefant_1_3_11_rc/apps/api/conf/config.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/api/handlers/create-token.php elefant-elefant_1_3_11_rc/apps/api/handlers/create-token.php
--- elefant-elefant_1_3_10_beta/apps/api/handlers/create-token.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/api/handlers/create-token.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,25 @@
+<?php
+
+/**
+ * Generate or reset an API token and secret key for the specified user.
+ * Note that resetting an API token and secret key will cause any use
+ * of the old one to fail.
+ */
+
+if (! $this->cli) die ("Must be run from the command line.\n");
+
+$page->layout = false;
+
+if (! isset ($_SERVER['argv'][2])) {
+	Cli::out ('Usage: ./elefant api/create-token <user-id>', 'info');
+	return;
+}
+
+$user = new User ($_SERVER['argv'][2]);
+if ($user->error) {
+	Cli::out ('Error: User not found.', 'error');
+	return;
+}
+
+list ($token, $key) = api\Api::create_token ($user->id);
+echo $token . ':' . $key . "\n";
diff -urBNs elefant-elefant_1_3_10_beta/apps/api/handlers/get-token.php elefant-elefant_1_3_11_rc/apps/api/handlers/get-token.php
--- elefant-elefant_1_3_10_beta/apps/api/handlers/get-token.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/api/handlers/get-token.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,30 @@
+<?php
+
+/**
+ * Fetch or generate an API token and secret key for the specified user.
+ * Will not regenerate but will create if a token does not exist.
+ */
+
+if (! $this->cli) die ("Must be run from the command line.\n");
+
+$page->layout = false;
+
+if (! isset ($_SERVER['argv'][2])) {
+	Cli::out ('Usage: ./elefant api/get-token <user-id>', 'info');
+	return;
+}
+
+$user = new User ($_SERVER['argv'][2]);
+if ($user->error) {
+	Cli::out ('Error: User not found.', 'error');
+	return;
+}
+
+$a = api\Api::query ()->where ('user_id', $user->id)->single ();
+if ($a && ! $a->error) {
+	echo $a->token . ':' . $a->api_key . "\n";
+	return;
+}
+
+list ($token, $key) = api\Api::create_token ($user->id);
+echo $token . ':' . $key . "\n";
diff -urBNs elefant-elefant_1_3_10_beta/apps/api/handlers/index.php elefant-elefant_1_3_11_rc/apps/api/handlers/index.php
--- elefant-elefant_1_3_10_beta/apps/api/handlers/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/api/handlers/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,4 +4,4 @@
  * Default handler, simply forwards to the current version of the API.
  */
 
-$this->redirect ('/api/' . $appconf['Api']['current_version']);
+$this->redirect ('/api/' . Appconf::api('Api','current_version'));
diff -urBNs elefant-elefant_1_3_10_beta/apps/api/handlers/v1.php elefant-elefant_1_3_11_rc/apps/api/handlers/v1.php
--- elefant-elefant_1_3_10_beta/apps/api/handlers/v1.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/api/handlers/v1.php	2015-09-05 21:13:59.000000000 -0500
@@ -39,6 +39,8 @@
 
 $error = false;
 
+$appconf = Appconf::get('api');
+
 if (! isset ($appconf['Objects'][$this->params[0]])) {
 	$error = 'Invalid request object: ' . $this->params[0];
 } else {
diff -urBNs elefant-elefant_1_3_10_beta/apps/api/models/Api.php elefant-elefant_1_3_11_rc/apps/api/models/Api.php
--- elefant-elefant_1_3_10_beta/apps/api/models/Api.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/api/models/Api.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,7 @@
 <?php
 
+namespace api;
+
 /**
  * Elefant CMS - http://www.elefantcms.com/
  *
@@ -32,13 +34,13 @@
  *
  * To create new tokens, use:
  *
- *   list ($token, $key) = Api::create_token ($user_id);
+ *   list ($token, $key) = api\Api::create_token ($user_id);
  *
  * To authenticate, use the `user\Auth\HMAC` authentication scheme:
  *
  *   $this->require_auth (user\Auth\HMAC::init ($this, $cache));
  */
-class Api extends Model {
+class Api extends \Model {
 	/**
 	 * The database table name.
 	 */
@@ -57,12 +59,11 @@
 	 * API access.
 	 */
 	public static function create_token ($user_id) {
-		$a = Api::query ()
+		$a = self::query ()
 			->where ('user_id', $user_id)
-			->fetch ();
+			->single ();
 
-		if (count ($a) > 0) {
-			$a = $a[0];
+		if ($a && ! $a->error) {
 			$a->token = md5 (uniqid (mt_rand (), 1));
 			$a->api_key = md5 (uniqid (mt_rand (), 1));
 		} else {
Files elefant-elefant_1_3_10_beta/apps/blocks/conf/acl.php and elefant-elefant_1_3_11_rc/apps/blocks/conf/acl.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/conf/config.php and elefant-elefant_1_3_11_rc/apps/blocks/conf/config.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/forms/add.php and elefant-elefant_1_3_11_rc/apps/blocks/forms/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/forms/edit.php and elefant-elefant_1_3_11_rc/apps/blocks/forms/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/handlers/add.php and elefant-elefant_1_3_11_rc/apps/blocks/handlers/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/handlers/admin.php and elefant-elefant_1_3_11_rc/apps/blocks/handlers/admin.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/handlers/bgsave.php and elefant-elefant_1_3_11_rc/apps/blocks/handlers/bgsave.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/handlers/delete.php and elefant-elefant_1_3_11_rc/apps/blocks/handlers/delete.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blocks/handlers/edit.php elefant-elefant_1_3_11_rc/apps/blocks/handlers/edit.php
--- elefant-elefant_1_3_10_beta/apps/blocks/handlers/edit.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blocks/handlers/edit.php	2015-09-05 21:13:59.000000000 -0500
@@ -22,6 +22,7 @@
 $f = new Form ('post', 'blocks/edit');
 $f->verify_csrf = false;
 if ($f->submit ()) {
+	$b->id = $_POST['id'];
 	$b->title = $_POST['title'];
 	$b->body = $_POST['body'];
 	$b->access = $_POST['access'];
diff -urBNs elefant-elefant_1_3_10_beta/apps/blocks/handlers/group.php elefant-elefant_1_3_11_rc/apps/blocks/handlers/group.php
--- elefant-elefant_1_3_10_beta/apps/blocks/handlers/group.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blocks/handlers/group.php	2015-09-05 21:13:59.000000000 -0500
@@ -47,7 +47,7 @@
  * making them a powerful way to build site content.
  *
  * You can also specify a `units` parameter, which specifies the width of
- * each `div` as a `unit-%d` class, for example:
+ * each `div` as an `e-col-%d` class, for example:
  *
  *     {! blocks/group
  *        ?id[]=sidebar-promo
@@ -56,19 +56,18 @@
  *
  * This will output:
  *
- *     <div class="block unit-75" id="block-sidebar-promo">
+ *     <div class="block e-col-75" id="block-sidebar-promo">
  *         <h2>Block title</h2>
  *         <p>Block contents...</p>
  *     </div>
- *     <div class="block unit-25" id="block-sidebar-support">
+ *     <div class="block e-col-25" id="block-sidebar-support">
  *         <h2>Block title</h2>
  *         <p>Block contents...</p>
  *     </div>
  *
- * These can be styled and used to implement grid-based and responsive
- * layouts. Here is a very basic example grid system implementation:
- *
- * https://gist.github.com/jbroadway/5d027fddfadabb56aff0
+ * The use of units will automatically include the `admin/util/minimal-grid`
+ * helper, which provides a very minimal responsive grid system for
+ * page content.
  */
 
 $ids = (count ($this->params) > 0) ? $this->params : (isset ($data['id']) ? $data['id'] : array ());
@@ -83,6 +82,7 @@
 $level = (isset ($data['level']) && preg_match ('/^h[1-6]$/', $data['level'])) ? $data['level'] : 'h3';
 $divs = isset ($data['divs']) ? true : false;
 if (isset ($data['units'])) {
+	echo $this->run ('admin/util/minimal-grid');
 	$units = explode (',', $data['units']);
 	$divs = true;
 } else {
@@ -121,7 +121,7 @@
 foreach ($ids as $k => $id) {
 	if (! isset ($list[$id])) {
 		if ($divs) {
-			printf ('<div class="block block-missing" id="block-%s">' . PHP_EOL, $units[$k], $b->id);
+			printf ('<div class="e-col-%d block block-missing" id="block-%s">' . PHP_EOL, $units[$k], $id);
 		}
 
 		if (User::require_acl ('admin', 'admin/edit', 'blocks')) {
@@ -147,7 +147,7 @@
 	}
 
 	if ($divs) {
-		printf ('<div class="block unit-%d" id="block-%s">' . PHP_EOL, $units[$k], $b->id);
+		printf ('<div class="e-col-%d block" id="block-%s">' . PHP_EOL, $units[$k], $b->id);
 	}
 
 	if ($b->show_title == 'yes') {
Files elefant-elefant_1_3_10_beta/apps/blocks/handlers/index.php and elefant-elefant_1_3_11_rc/apps/blocks/handlers/index.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/models/Block.php and elefant-elefant_1_3_11_rc/apps/blocks/models/Block.php are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/views/add/head.html and elefant-elefant_1_3_11_rc/apps/blocks/views/add/head.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blocks/views/add.html elefant-elefant_1_3_11_rc/apps/blocks/views/add.html
--- elefant-elefant_1_3_10_beta/apps/blocks/views/add.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blocks/views/add.html	2015-09-05 21:13:59.000000000 -0500
@@ -10,8 +10,8 @@
 <p>{"Body"}: <span class="notice" id="body-notice">{"You must enter body content."}</span><br />
 <textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
 
-<h4><a href="#" onclick="return webpage_show_extra_options (this)" class="extra-options-link"><span class="arrow arrow-off"></span>{"Extra Options"}</a></h4>
-<div id="extra-options">
+<h4>{"Extra Options"}</h4>
+
 <p>{"Access"}:<br />
 <select name="access">
 {% foreach User::access_list () %}
@@ -24,7 +24,7 @@
 	<option value="{{ loop_index }}"{% if loop_index == $data->show_title %} selected{% end %}>{{ loop_value|none }}</option>
 {% end %}
 </select></p>
-</div>
+
 <p>
 	<input type="submit" value="{"Add Block"}" class="autosave-clear" />&nbsp;
 	<a href="javascript:history.go(-1)" onclick="return $.cancel_autosave ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
Files elefant-elefant_1_3_10_beta/apps/blocks/views/admin.html and elefant-elefant_1_3_11_rc/apps/blocks/views/admin.html are identical
Files elefant-elefant_1_3_10_beta/apps/blocks/views/edit/head.html and elefant-elefant_1_3_11_rc/apps/blocks/views/edit/head.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blocks/views/edit.html elefant-elefant_1_3_11_rc/apps/blocks/views/edit.html
--- elefant-elefant_1_3_10_beta/apps/blocks/views/edit.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blocks/views/edit.html	2015-09-05 21:13:59.000000000 -0500
@@ -10,8 +10,8 @@
 <p>{"Body"}: <span class="notice" id="body-notice">{"You must enter body content."}</span><br />
 <textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
 
-<h4><a href="#" onclick="return webpage_show_extra_options (this)" class="extra-options-link"><span class="arrow arrow-off"></span>{"Extra Options"}</a></h4>
-<div id="extra-options">
+<h4>{"Extra Options"}</h4>
+
 <p>{"Access"}:<br />
 <select name="access">
 {% foreach User::access_list () %}
@@ -24,7 +24,7 @@
 	<option value="{{ loop_index }}"{% if loop_index == $data->show_title %} selected{% end %}>{{ loop_value|none }}</option>
 {% end %}
 </select></p>
-</div>
+
 <p>
 	<input type="submit" value="{"Save Block"}" class="autosave-clear" />&nbsp;
 	<input type="submit" value="{"Save &amp; Keep Editing"}" id="bgsave" />&nbsp;
diff -urBNs elefant-elefant_1_3_10_beta/apps/blocks/views/editable.html elefant-elefant_1_3_11_rc/apps/blocks/views/editable.html
--- elefant-elefant_1_3_10_beta/apps/blocks/views/editable.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blocks/views/editable.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,11 +1,13 @@
+{! admin/util/fontawesome !}
+
 <p class="admin-options">
 {% if title %}
 	{% if locked %}
 		<a href="javascript:void(0)" title="{"Editing Locked"}" class="ediable-lock"></a>
 	{% else %}
-		{% if User::require_acl ('admin', 'blocks') %}{% if new_id %}{% if User::require_acl ('admin/add') %}<a href="/blocks/add?id={{ new_id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Page-Specific Block"}" class="editable-add"></a>{% end %}{% end %}<a href="/blocks/edit?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Edit Block"}" class="editable-edit"></a>{% end %}{% if User::require_acl ('admin', 'admin/versions', 'blocks') %}<a href="/admin/versions?type=Block&id={{ id }}" title="{"Versions"}" class="editable-versions"></a>{% end %}{% if User::require_acl ('admin', 'admin/delete', 'blocks') %}<a href="/blocks/delete" data-id="{{ id }}" data-return="{{ $_SERVER.REQUEST_URI }}" title="{"Delete Block"}" onclick="return $.confirm_and_post {% if new_id %}(this, '{"Are you sure you want to delete the default block? This will remove it from all pages using this block"}'){% else %} (this, '{"Are you sure you want to delete the current block?"}') {% end %};" class="editable-delete"></a>{% end %}
+		{% if User::require_acl ('admin', 'blocks') %}{% if new_id %}{% if User::require_acl ('admin/add') %}<a href="/blocks/add?id={{ new_id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Page-Specific Block"}" class="editable-add"><i class="fa fa-lg fa-plus"></i></a>{% end %}{% end %}<a href="/blocks/edit?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Edit Block"}" class="editable-edit"><i class="fa fa-lg fa-pencil"></i></a>{% end %}{% if User::require_acl ('admin', 'admin/versions', 'blocks') %}<a href="/admin/versions?type=Block&id={{ id }}" title="{"Versions"}" class="editable-versions"><i class="fa fa-lg fa-files-o"></i></a>{% end %}{% if User::require_acl ('admin', 'admin/delete', 'blocks') %}<a href="/blocks/delete" data-id="{{ id }}" data-return="{{ $_SERVER.REQUEST_URI }}" title="{"Delete Block"}" onclick="return $.confirm_and_post {% if new_id %}(this, '{"Are you sure you want to delete the default block? This will remove it from all pages using this block"}'){% else %} (this, '{"Are you sure you want to delete the current block?"}') {% end %};" class="editable-delete"><i class="fa fa-lg fa-trash-o"></i></a>{% end %}
 	{% end %}
 {% else %}
-	{% if User::require_acl ('admin', 'blocks', 'admin/add') %}<a href="/blocks/add?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Block"}" class="editable-add"></a>{% end %}
+	{% if User::require_acl ('admin', 'blocks', 'admin/add') %}<a href="/blocks/add?id={{ id }}&return={{ $_SERVER.REQUEST_URI }}" title="{"Add Block"}" class="editable-add"><i class="fa fa-lg fa-plus"></i></a>{% end %}
 {% end %}
 </p>
Files elefant-elefant_1_3_10_beta/apps/blog/conf/acl.php and elefant-elefant_1_3_11_rc/apps/blog/conf/acl.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/cli.php and elefant-elefant_1_3_11_rc/apps/blog/conf/cli.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/conf/config.php elefant-elefant_1_3_11_rc/apps/blog/conf/config.php
--- elefant-elefant_1_3_10_beta/apps/blog/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -29,6 +29,10 @@
 
 post_format = html
 
+; A footer message to show at the bottom of each post.
+
+post_footer = ""
+
 ; Here you can choose a service to use for blog comments.
 ; Supported platforms are Facebook and Disqus, or a custom
 ; handler name that implements an alternate comment system.
@@ -39,8 +43,8 @@
 ; the comments/embed handler from the comments app at
 ; https://github.com/jbroadway/comments
 
-comments = facebook
-;comments = disqus
+comments = disqus
+;comments = facebook
 ;comments = comments/embed
 
 ; Show related posts in a "You might also like" box at the bottom
Files elefant-elefant_1_3_10_beta/apps/blog/conf/embed.php and elefant-elefant_1_3_11_rc/apps/blog/conf/embed.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/helpers.php and elefant-elefant_1_3_11_rc/apps/blog/conf/helpers.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/upgrade_1.1.3_mysql.sql and elefant-elefant_1_3_11_rc/apps/blog/conf/upgrade_1.1.3_mysql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/upgrade_1.1.3_pgsql.sql and elefant-elefant_1_3_11_rc/apps/blog/conf/upgrade_1.1.3_pgsql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/upgrade_1.1.3_sqlite.sql and elefant-elefant_1_3_11_rc/apps/blog/conf/upgrade_1.1.3_sqlite.sql are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/upgrade_1.1.4_mysql.sql and elefant-elefant_1_3_11_rc/apps/blog/conf/upgrade_1.1.4_mysql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/upgrade_1.1.4_pgsql.sql and elefant-elefant_1_3_11_rc/apps/blog/conf/upgrade_1.1.4_pgsql.sql are identical
Files elefant-elefant_1_3_10_beta/apps/blog/conf/upgrade_1.1.4_sqlite.sql and elefant-elefant_1_3_11_rc/apps/blog/conf/upgrade_1.1.4_sqlite.sql are identical
Files elefant-elefant_1_3_10_beta/apps/blog/css/default.jpg and elefant-elefant_1_3_11_rc/apps/blog/css/default.jpg are identical
Files elefant-elefant_1_3_10_beta/apps/blog/css/jquery.tagit.css and elefant-elefant_1_3_11_rc/apps/blog/css/jquery.tagit.css are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/css/related.css elefant-elefant_1_3_11_rc/apps/blog/css/related.css
--- elefant-elefant_1_3_10_beta/apps/blog/css/related.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/css/related.css	2015-09-05 21:13:59.000000000 -0500
@@ -28,7 +28,8 @@
 			width: 100%;
 			height: 0;
 		}
-		.thumbnail {
+		.thumbnail,
+		.thumbnail-preview {
 			position: absolute;
 			top: 0;
 			left: 0;
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/forms/add.php elefant-elefant_1_3_11_rc/apps/blog/forms/add.php
--- elefant-elefant_1_3_10_beta/apps/blog/forms/add.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/forms/add.php	1969-12-31 18:00:00.000000000 -0600
@@ -1,19 +0,0 @@
-; <?php /*
-
-[title]
-
-not empty = 1
-
-[ts]
-
-not empty = 1
-
-[author]
-
-not empty = 1
-
-[body]
-
-not empty = 1
-
-; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/forms/edit.php elefant-elefant_1_3_11_rc/apps/blog/forms/edit.php
--- elefant-elefant_1_3_10_beta/apps/blog/forms/edit.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/forms/edit.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,19 +1,7 @@
 ; <?php /*
 
-[title]
-
-not empty = 1
-
 [ts]
 
 not empty = 1
 
-[author]
-
-not empty = 1
-
-[body]
-
-not empty = 1
-
 ; */ ?>
Files elefant-elefant_1_3_10_beta/apps/blog/forms/settings.php and elefant-elefant_1_3_11_rc/apps/blog/forms/settings.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/add.php elefant-elefant_1_3_11_rc/apps/blog/handlers/add.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/add.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/add.php	2015-09-05 21:13:59.000000000 -0500
@@ -8,75 +8,20 @@
 
 $this->require_acl ('admin', 'blog', 'admin/add');
 
-$f = new Form ('post', 'blog/add');
-$f->verify_csrf = false;
-if ($f->submit ()) {
-	$autopost_pom = ($_POST['autopost_pom'] == 'yes') ? true : false;
-	unset ($_POST['autopost_pom']);
-
-	$p = new blog\Post ($_POST);
-	$p->put ();
-	Versions::add ($p);
-	if (! $p->error) {
-		$this->add_notification (__ ('Blog post added.'));
-
-		// add tags
-		if ($_POST['published'] == 'yes' && ! empty ($_POST['tags'])) {
-			$tags = explode (',', $_POST['tags']);
-			foreach ($tags as $tag) {
-				$tr = trim ($tag);
-				DB::execute ('insert into #prefix#blog_tag (id) values (?)', $tr);
-				DB::execute (
-					'insert into #prefix#blog_post_tag (tag_id, post_id) values (?, ?)',
-					$tr,
-					$p->id
-				);
-			}
-		}
-
-		// autopost
-		if ($_POST['published'] == 'yes') {
-			require_once ('apps/blog/lib/Filters.php');
-
-			if ($autopost_pom) {
-				$pom = new Pingomatic;
-				$pom->post ($appconf['Blog']['title'], 'http://' . $_SERVER['HTTP_HOST'] . '/blog');
-			}
-		}
-
-		// reset blog rss cache
-		$cache->delete ('blog_rss');
-
-		$_POST['page'] = 'blog/post/' . $p->id . '/' . URLify::filter ($p->title);
-		$this->hook ('blog/add', $_POST);
-		$this->redirect ('/blog/admin');
-	}
-	$page->title = __ ('An Error Occurred');
-	echo __ ('Error Message') . ': ' . $p->error;
+$p = new blog\Post (array (
+	'title' => '',
+	'ts' => gmdate ('Y-m-d H:i:s'),
+	'author' => User::val ('name'),
+	'body' => '',
+	'tags' => '',
+	'extra' => '',
+	'published' => 'no'
+));
+$p->put ();
+Versions::add ($p);
+if (! $p->error) {
+	$this->redirect ('/blog/edit?id=' . $p->id);
 } else {
-	$p = new blog\Post;
-	$p->author = User::val ('name');
-	$p->ts = gmdate ('Y-m-d H:i:s');
-	$p->yes_no = array ('yes' => __ ('Yes'), 'no' => __ ('No'), 'que' => __ ('Scheduled'));
-	$p->autopost_pom = 'yes';
-
-	$p->failed = $f->failed;
-	$p = $f->merge_values ($p);
-	$p->tag_list = explode (',', $p->tags);
-	$page->title = __ ('Add Blog Post');
-	if (Appconf::blog ('Blog', 'post_format') === 'html') {
-		$this->run ('admin/util/wysiwyg');
-	} else {
-		$this->run ('admin/util/wysiwyg', array ('field_id' => false));
-		$this->run (
-			'admin/util/codemirror',
-			array (
-				'field_id' => 'webpage-body',
-				'mode' => 'markdown',
-				'lineWrapping' => true
-			)
-		);
-	}
-	echo $tpl->render ('blog/add/head', $p);
-	echo $tpl->render ('blog/add', $p);
+	$this->add_notification (__ ('An Error Occurred'));
+	$this->redirect ('/blog/admin');
 }
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/admin.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/admin.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/archive.php elefant-elefant_1_3_11_rc/apps/blog/handlers/archive.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/archive.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/archive.php	2015-09-05 21:13:59.000000000 -0500
@@ -29,12 +29,19 @@
 $page->year = $year;
 $page->month = str_pad ($month, 2, '0', STR_PAD_LEFT);
 
+$footer = Appconf::blog ('Blog', 'post_footer');
+$footer_stripped = strip_tags ($footer);
+$footer = ($footer && ! empty ($footer_stripped))
+	? $tpl->run_includes ($footer)
+	: false;
+
 if (Appconf::blog ('Blog', 'post_format') === 'markdown') {
 	require_once ('apps/blog/lib/markdown.php');
 }
 
 foreach ($posts as $post) {
-	$post->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
+	$post->url = '/blog/post/' . $post->id . '/';
+	$post->fullurl = $post->url . URLify::filter ($post->title);
 	$post->tag_list = (strlen ($post->tags) > 0) ? explode (',', $post->tags) : array ();
 	$post->social_buttons = $appconf['Social Buttons'];
 	if (Appconf::blog ('Blog', 'post_format') === 'html') {
@@ -45,6 +52,8 @@
 	if ($preview_chars) {
 		$post->body = blog_filter_truncate ($post->body, $preview_chars)
 			. ' <a href="' . $post->url . '">' . __ ('Read more') . '</a>';
+	} else {
+		$post->footer = $footer;
 	}
 	echo $tpl->render ('blog/post', $post);
 }
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/archives.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/archives.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/bgsave.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/bgsave.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/by.php elefant-elefant_1_3_11_rc/apps/blog/handlers/by.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/by.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/by.php	2015-09-05 21:13:59.000000000 -0500
@@ -26,6 +26,12 @@
 $page->more = ($page->count > $page->last) ? true : false;
 $page->next = $page->num + 2;
 
+$footer = Appconf::blog ('Blog', 'post_footer');
+$footer_stripped = strip_tags ($footer);
+$footer = ($footer && ! empty ($footer_stripped))
+	? $tpl->run_includes ($footer)
+	: false;
+
 if (Appconf::blog ('Blog', 'post_format') === 'markdown') {
 	require_once ('apps/blog/lib/markdown.php');
 }
@@ -42,6 +48,8 @@
 	if ($preview_chars) {
 		$post->body = blog_filter_truncate ($post->body, $preview_chars)
 			. ' <a href="' . $post->url . '">' . __ ('Read more') . '</a>';
+	} else {
+		$post->footer = $footer;
 	}
 	echo $tpl->render ('blog/post', $post);
 }
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/bymonth.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/bymonth.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/commentcount.php elefant-elefant_1_3_11_rc/apps/blog/handlers/commentcount.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/commentcount.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/commentcount.php	2015-09-05 21:13:59.000000000 -0500
@@ -11,7 +11,7 @@
 	case 'facebook':
 		printf (
 			'<a href="%s">%s %s</a>',
-			$data['url'],
+			$data['fullurl'],
 			$this->run ('social/facebook/commentcount', $data),
 			__ ('comments')
 		);
@@ -20,7 +20,7 @@
 		if ($appconf['Blog']['comments'] != false) {
 			printf (
 				'<a href="%s">%s %s</a>',
-				$data['url'],
+				$data['fullurl'],
 				$this->run (
 					$appconf['Blog']['comments'],
 					array (
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/delete.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/delete.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/disqus/commentcount.php elefant-elefant_1_3_11_rc/apps/blog/handlers/disqus/commentcount.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/disqus/commentcount.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/disqus/commentcount.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,16 +4,22 @@
  * Display the Disqus comment count for a blog post.
  */
 
+$shortname = $appconf['Blog']['disqus_shortname'];
+
+if ($shortname === '') {
+	return;
+}
+
 if (self::$called['blog/disqus/commentcount'] === 1) {
 	echo $tpl->render ('blog/disqus/commentcount', array (
-		'shortname' => $appconf['Blog']['disqus_shortname'],
+		'shortname' => $shortname,
 		'identifier' => $data['id']
 	));
 }
 
 printf (
 	'<a href="%s#disqus_thread" data-disqus-identifier="%s">%s</a>',
-	$data['url'],
+	$data['fullurl'],
 	$data['id'],
 	__ ('comments')
 );
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/disqus/comments.php elefant-elefant_1_3_11_rc/apps/blog/handlers/disqus/comments.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/disqus/comments.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/disqus/comments.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,9 +4,15 @@
  * Embeds Disqus comments into the current blog post.
  */
 
+$shortname = $appconf['Blog']['disqus_shortname'];
+
+if ($shortname === '') {
+	return;
+}
+
 echo $tpl->render ('blog/disqus/comments', array (
-	'shortname' => $appconf['Blog']['disqus_shortname'],
+	'shortname' => $shortname,
 	'identifier' => $data['id'],
-	'permalink' => $data['url'],
+	'permalink' => $data['fullurl'],
 	'title' => $data['title']
 ));
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/edit.php elefant-elefant_1_3_11_rc/apps/blog/handlers/edit.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/edit.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/edit.php	2015-09-05 21:13:59.000000000 -0500
@@ -22,15 +22,6 @@
 $f = new Form ('post', 'blog/edit');
 $f->verify_csrf = false;
 if ($f->submit ()) {
-	$autopost_pom = ($_POST['autopost_pom'] == 'yes') ? true : false;
-	unset ($_POST['autopost_pom']);
-
-	if ($p->published == 'no' && $_POST['published'] == 'yes') {
-		$autopost = true;
-	} else {
-		$autopost = false;
-	}
-
 	$p->title = $_POST['title'];
 	$p->author = $_POST['author'];
 	$p->ts = $_POST['ts'];
@@ -63,14 +54,6 @@
 
 		require_once ('apps/blog/lib/Filters.php');
 
-		// autopost
-		if ($autopost) {
-			if ($autopost_pom) {
-				$pom = new Pingomatic;
-				$pom->post ($appconf['Blog']['title'], 'http://' . $_SERVER['HTTP_HOST'] . '/blog');
-			}
-		}
-
 		// reset blog rss cache
 		$cache->delete ('blog_rss');
 
@@ -82,13 +65,16 @@
 	$page->title = __ ('An Error Occurred');
 	echo __ ('Error Message') . ': ' . $p->error;
 } else {
-	$p->yes_no = array ('yes' => __ ('Yes'), 'no' => __ ('No'), 'que' => __ ('Scheduled'));
-	$p->autopost_pom = 'yes';
 	$p->tag_list = explode (',', $p->tags);
 
 	$p->failed = $f->failed;
 	$p = $f->merge_values ($p);
-	$page->title = __ ('Edit Blog Post') . ': ' . $p->title;
+	if ($p->title === '') {
+		$page->title = __ ('Add Blog Post');
+	} else {
+		$page->title = __ ('Edit Blog Post') . ': ' . $p->title;
+	}
+	$page->add_script ('/apps/blog/css/related.css');
 	if (Appconf::blog ('Blog', 'post_format') === 'html') {
 		$this->run ('admin/util/wysiwyg');
 	} else {
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/headlines.php elefant-elefant_1_3_11_rc/apps/blog/handlers/headlines.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/headlines.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/headlines.php	2015-09-05 21:13:59.000000000 -0500
@@ -3,11 +3,21 @@
 /**
  * Displays the latest blog posts as a bulleted list of links.
  *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('blog/headlines');
+ *
+ * In a view template, call it like this:
+ *
+ *     {! blog/headlines !}
+ *
  * Parameters:
  *
- * - `limit`: Number of posts to show (default=10)
- * - `tag`: Show posts by this tag only (optional)
- * - `dates`: Show post dates (yes, no, default=no)
+ * - `limit` - Number of posts to show (default=10)
+ * - `tag` - Show posts with this tag only (optional)
+ * - `dates` - Show post dates (yes, no, default=no)
+ *
+ * Also available in the dynamic objects menu as "Blog: Headlines".
  */
 
 if (! $this->internal) {
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/import/blogger.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/import/blogger.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/import/csv.php elefant-elefant_1_3_11_rc/apps/blog/handlers/import/csv.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/import/csv.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/import/csv.php	2015-09-05 21:13:59.000000000 -0500
@@ -15,16 +15,26 @@
 	if (move_uploaded_file ($_FILES['import_file']['tmp_name'], 'cache/blog_csv_import.csv')) {
 		$file = 'cache/blog_csv_import.csv';
 
-		$res = blog\CsvParser::parse ($file);
+		set_time_limit (0);
+		ini_set ('auto_detect_line_endings', true);
 
-		if (is_array ($res)) {
-			$headers = array_shift ($res);
-			$samples = array ();
-			for ($i = 0; $i < 3; $i++) {
-				if (isset ($res[$i])) {
-					$samples[] = $res[$i];
+		$headers = array ();
+		$samples = array ();
+		if (($f = fopen ($file, 'r')) !== false) {
+			while (($row = fgetcsv ($f, 0, ',')) !== false) {
+				if (count ($row) === 1 && $row[0] === null) {
+					// ignore blank lines, which come through as array(null)
+					continue;
+				}
+				if (count ($headers) === 0) {
+					$headers = $row;
+				} elseif (count ($samples) < 3) {
+					$samples[] = $row;
+				} else {
+					break;
 				}
 			}
+			fclose ($f);
 
 			require_once ('apps/blog/lib/Filters.php');
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/import/csv2.php elefant-elefant_1_3_11_rc/apps/blog/handlers/import/csv2.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/import/csv2.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/import/csv2.php	2015-09-05 21:13:59.000000000 -0500
@@ -19,8 +19,20 @@
 	return;
 }
 
-$res = blog\CsvParser::parse ($file);
-if (! $res) {
+set_time_limit (0);
+ini_set ('auto_detect_line_endings', true);
+
+$res = array ();
+if (($f = fopen ($file, 'r')) !== false) {
+	while (($row = fgetcsv ($f, 0, ',')) !== false) {
+		if (count ($row) === 1 && $row[0] === null) {
+			// ignore blank lines, which come through as array(null)
+			continue;
+		}
+		$res[] = $row;
+	}
+	fclose ($f);
+} else {
 	echo '<p>' . __ ('Unable to parse the uploaded file.') . '</p>';
 	echo '<p><a href="/blog/import">' . __ ('Back') . '</a></p>';
 	return;
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/import/wordpress.php elefant-elefant_1_3_11_rc/apps/blog/handlers/import/wordpress.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/import/wordpress.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/import/wordpress.php	2015-09-05 21:13:59.000000000 -0500
@@ -31,7 +31,9 @@
 	if (move_uploaded_file ($_FILES['import_file']['tmp_name'], 'cache/blog_' . $_FILES['import_file']['name'])) {
 		$file = 'cache/blog_' . $_FILES['import_file']['name'];
 		
-		$imported = 0;
+		$imported_posts = $imported_pages = 0;
+		
+		$links = array ();
 
 		try {
 			$posts = new SimpleXMLElement (file_get_contents ($file));
@@ -40,52 +42,99 @@
 				$dc = $entry->children ('http://purl.org/dc/elements/1.1/');
 				$content = $entry->children ('http://purl.org/rss/1.0/modules/content/');
 				$wp = $entry->children ('http://wordpress.org/export/1.2/');
-				$published = $wp->status == 'publish' ? 'yes' : 'no';
+				
+				switch ($wp->post_type) {
+					
+					case 'post':
+						
+						$published = $wp->status == 'publish' ? 'yes' : 'no';
+
+						$body = str_replace ("\n", "<br />\n", (string) $content->encoded);
+						$body = preg_replace_callback (
+							'|"https?://[^"]+?/wp-content/uploads/([^"]+)?"|i',
+							'blog_import_wordpress_fix_links',
+							$body
+						);
+
+						$post = array (
+							'title' => (string) $entry->title,
+							'author' => (string) $dc->creator,
+							'ts' => gmdate ('Y-m-d H:i:s', strtotime ($entry->pubDate)),
+							'published' => $published,
+							'body' => $body,
+							'tags' => ''
+						);
+						$sep = '';
+						for ($i = 0; $i < count ($entry->category); $i++) {
+							if ('uncategorized' != ($tag = urldecode ($entry->category[$i]->attributes ()->nicename))) {
+								$post['tags'] .= $sep . $tag;
+							}
+							$sep = ', ';
+						}
+						$p = new blog\Post ($post);
+						if ($p->put ()) {
+							Versions::add ($p);
+
+							// add tags
+							if ($published == 'yes' && ! empty ($post['tags'])) {
+								$tags = explode (',', $post['tags']);
+								foreach ($tags as $tag) {
+									$tr = trim ($tag);
+									DB::execute ('insert into #prefix#blog_tag (id) values (?)', $tr);
+									DB::execute (
+										'insert into #prefix#blog_post_tag (tag_id, post_id) values (?, ?)',
+										$tr,
+										$p->id
+									);
+								}
+							}
+							
+							$links[url_get_fullpath ((string)$entry->link)] = '/blog/post/' . $p->id;
+
+							$imported_posts ++;
+						}						
+						
+						break;
+					
+					case 'page':
+						
+						if ($wp->status == 'publish') {
+							
+							$body = str_replace ("\n", "<br />\n", (string) $content->encoded);
+							$body = preg_replace_callback (
+								'|"https?://[^"]+?/wp-content/uploads/([^"]+)?"|i',
+								'blog_import_wordpress_fix_links',
+								$body
+							);
 
-				$body = str_replace ("\n", "<br />\n", (string) $content->encoded);
-				$body = preg_replace_callback (
-					'|"https?://[^"]+?/wp-content/uploads/([^"]+)?"|i',
-					'blog_import_wordpress_fix_links',
-					$body
-				);
-
-				$post = array (
-					'title' => (string) $entry->title,
-					'author' => (string) $dc->creator,
-					'ts' => gmdate ('Y-m-d H:i:s', strtotime ($entry->pubDate)),
-					'published' => $published,
-					'body' => $body,
-					'tags' => ''
-				);
-				$sep = '';
-				for ($i = 0; $i < count ($entry->category); $i++) {
-					$post['tags'] .= $sep . $entry->category[$i]->attributes ()->nicename;
-					$sep = ', ';
-				}
-				$p = new blog\Post ($post);
-				if ($p->put ()) {
-					Versions::add ($p);
-
-					// add tags
-					if ($published == 'yes' && ! empty ($post['tags'])) {
-						$tags = explode (',', $post['tags']);
-						foreach ($tags as $tag) {
-							$tr = trim ($tag);
-							DB::execute ('insert into #prefix#blog_tag (id) values (?)', $tr);
-							DB::execute (
-								'insert into #prefix#blog_post_tag (tag_id, post_id) values (?, ?)',
-								$tr,
-								$p->id
+							$page_data = array (
+								'id' => $wp->post_name,
+								'title' => (string) $entry->title,
+								'body' => $body
 							);
+							
+							$wp = new Webpage ($page_data);
+							$wp->put ();
+							Versions::add ($wp);
+							if ($wp->error) {
+								throw new Exception (__ ('Cannot create page') . ': ' . $wp->error);
+							}
+							
+							$links[url_get_fullpath ((string)$entry->link)] = '/' . $page_data['id'];
+							
+							$imported_pages ++;
 						}
-					}
-
-					$imported++;
+						
+						break;					
 				}
+				
 			}
 			
-			echo '<p>' . __ ('Imported %d posts.', $imported) . '</p>';
-			echo '<p><a href="/blog/admin">' . __ ('Continue') . '</a></p>';
+			echo $tpl->render ('blog/import/wordpress_done', array (
+				'imported_posts' => $imported_posts,
+				'imported_pages' => $imported_pages,
+				'links' => $links
+			));
 		} catch (Exception $e) {
 			echo '<p><strong>' . __ ('Error importing file') . ': ' . $e->getMessage () . '</strong></p>';
 			echo '<p><a href="/blog/admin">' . __ ('Back') . '</a></p>';
@@ -98,4 +147,4 @@
 
 $o = new StdClass;
 
-echo $tpl->render ('blog/import/wordpress', $o);
+echo $tpl->render ('blog/import/wordpress', $o);
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/import.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/import.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/index.php elefant-elefant_1_3_11_rc/apps/blog/handlers/index.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -26,6 +26,12 @@
 $page->more = ($page->count > $page->last) ? true : false;
 $page->next = $page->num + 2;
 
+$footer = Appconf::blog ('Blog', 'post_footer');
+$footer_stripped = strip_tags ($footer);
+$footer = ($footer && ! empty ($footer_stripped))
+	? $tpl->run_includes ($footer)
+	: false;
+
 if (! is_array ($posts) || count ($posts) === 0) {
 	echo '<p>' . __ ('No posts yet... :(') . '</p>';
 	if (User::require_acl ('admin', 'blog', 'admin/add')) {
@@ -40,8 +46,10 @@
 		require_once ('apps/blog/lib/markdown.php');
 	}
 
-	foreach ($posts as $post) {
-		$post->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
+	foreach ($posts as $_post) {
+		$post = $_post->orig();
+		$post->url = '/blog/post/' . $post->id . '/';
+		$post->fullurl = $post->url . URLify::filter ($post->title);
 		$post->tag_list = (strlen ($post->tags) > 0) ? explode (',', $post->tags) : array ();
 		$post->social_buttons = Appconf::blog ('Social Buttons');
 		if (Appconf::blog ('Blog', 'post_format') === 'html') {
@@ -52,6 +60,8 @@
 		if ($preview_chars) {
 			$post->body = blog_filter_truncate ($post->body, $preview_chars)
 				. ' <a href="' . $post->url . '">' . __ ('Read more') . '</a>';
+		} else {
+			$post->footer = $footer;
 		}
 		echo $tpl->render ('blog/post', $post);
 	}
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/post.php elefant-elefant_1_3_11_rc/apps/blog/handlers/post.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/post.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/post.php	2015-09-05 21:13:59.000000000 -0500
@@ -16,8 +16,12 @@
 $p = new blog\Post ($this->params[0]);
 
 // post not found
-if ($p->error || $p->published === 'no') {
-    return $this->error (404, __ ('Post not found'), '<p>' . __ ('Hmm, we can\'t seem to find the post you wanted at the moment.') . '</p>');
+if ($p->error) {
+	return $this->error (404, __ ('Post not found'), '<p>' . __ ('Hmm, we can\'t seem to find the post you wanted at the moment.') . '</p>');
+}
+
+if ($p->published === 'no' && ! User::require_acl ('admin', 'blog')) {
+	return $this->error (404, __ ('Post not found'), '<p>' . __ ('Hmm, we can\'t seem to find the post you wanted at the moment.') . '</p>');
 }
 
 // published if it was scheduled and it's time
@@ -35,7 +39,8 @@
 
 $post = $p->orig ();
 $post->full = true;
-$post->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
+$post->url = '/blog/post/' . $post->id . '/';
+$post->fullurl = $post->url . URLify::filter ($post->title);
 $post->tag_list = (strlen ($post->tags) > 0) ? explode (',', $post->tags) : array ();
 if (Appconf::blog ('Blog', 'post_format') === 'html') {
 	$post->body = $tpl->run_includes ($post->body);
@@ -46,6 +51,12 @@
 $post->social_buttons = Appconf::blog ('Social Buttons');
 $post->related = Appconf::blog ('Blog', 'show_related_posts');
 
+$footer = Appconf::blog ('Blog', 'post_footer');
+$footer_stripped = strip_tags ($footer);
+$post->footer = ($footer && ! empty ($footer_stripped))
+	? $tpl->run_includes ($footer)
+	: false;
+
 echo $tpl->render ('blog/post', $post);
 
 switch (Appconf::blog ('Blog', 'comments')) {
@@ -73,13 +84,35 @@
 	$_SERVER['HTTP_HOST']
 ));
 
-// add opengraph meta tags
+// add opengraph/twitter card meta tags
+$url = ($this->is_https () ? 'https' : 'http') . '://' . $_SERVER['HTTP_HOST'] . $post->fullurl;
+$desc = blog_filter_truncate (strip_tags ($post->body), 300);
+
+$page->add_meta ('og:type', 'article', 'property');
+$page->add_meta ('og:site_name', conf ('General', 'site_name'), 'property');
 $page->add_meta ('og:title', $post->title, 'property');
+$page->add_meta ('og:description', $desc, 'property');
+$page->add_meta ('og:url', $url, 'property');
 
 if ($post->thumbnail !== '') {
 	$page->add_meta (
 		'og:image',
-		'//'. $_SERVER['HTTP_HOST'] . $post->thumbnail,
+		($this->is_https () ? 'https' : 'http') . '://'. $_SERVER['HTTP_HOST'] . $post->thumbnail,
 		'property'
 	);
 }
+
+$page->add_meta ('twitter:card', 'summary_large_image');
+$twitter_id = Appconf::user ('Twitter', 'twitter_id');
+if (is_string ($twitter_id) && $twitter_id !== '') {
+	$page->add_meta ('twitter:site', '@' . $twitter_id);
+}
+$page->add_meta ('twitter:title', $post->title);
+$page->add_meta ('twitter:description', $desc);
+
+if ($post->thumbnail !== '') {
+	$page->add_meta (
+		'twitter:image',
+		($this->is_https () ? 'https' : 'http') . '://'. $_SERVER['HTTP_HOST'] . $post->thumbnail
+	);
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/postsfeed.php elefant-elefant_1_3_11_rc/apps/blog/handlers/postsfeed.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/postsfeed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/postsfeed.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,24 @@
 <?php
 
+/**
+ * Display the fully browsable latest posts.
+ *
+ * In PHP code, call it like this:
+ *
+ *     $this->run ('blog/postsfeed');
+ *
+ * In a view template, call it like this:
+ *
+ *     {! blog/postsfeed !}
+ *
+ * Parameters:
+ *
+ * - `number` - Number of posts to show (default=5)
+ * - `tag` - Show posts with this tag only (optional)
+ *
+ * Also available in the dynamic objects menu as "Blog: Latest Posts".
+ */
+
 require_once ('apps/blog/lib/Filters.php');
 
 $preview_chars = (int) Appconf::blog('Blog', 'preview_chars') ? (int) Appconf::blog('Blog', 'preview_chars') : false;
@@ -34,10 +53,12 @@
 		echo '<p class="hide-in-preview"><a href="/blog/add">' . __ ('Add Blog Post') . '</a></p>';
 	}
 
-	foreach ($posts as $post) {
-		$post->url = '/blog/post/' . $post->id . '/' . URLify::filter ($post->title);
+	foreach ($posts as $_post) {
+		$post = $_post->orig();
+		$post->url = '/blog/post/' . $post->id . '/';
+		$post->fullurl = $post->url . URLify::filter ($post->title);
 		$post->tag_list = (strlen ($post->tags) > 0) ? explode (',', $post->tags) : array ();
-		$post->social_buttons = $appconf['Social Buttons'];
+		$post->social_buttons = Appconf::blog ('Social Buttons');
 		if (Appconf::blog ('Blog', 'post_format') === 'html') {
 			$post->body = $tpl->run_includes ($post->body);
 		} else {
@@ -45,7 +66,7 @@
 		}
 		if ($preview_chars) {
 			$post->body = blog_filter_truncate ($post->body, $preview_chars)
-				. ' <a href="' . $post->url . '">' . __ ('Read more') . '</a>';
+				. ' <a href="' . $post->fullurl . '">' . __ ('Read more') . '</a>';
 		}
 		echo $tpl->render ('blog/post', $post);
 	}
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/preview.php elefant-elefant_1_3_11_rc/apps/blog/handlers/preview.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/preview.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/preview.php	2015-09-05 21:13:59.000000000 -0500
@@ -10,7 +10,6 @@
 $post = new blog\Post ($_POST);
 
 $page->id = 'blog';
-$page->title = Appconf::blog ('Blog', 'title');
 $page->layout = Appconf::blog ('Blog', 'post_layout');
 
 if (Appconf::blog ('Blog', 'post_format') === 'html') {
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/publish-queue.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/publish-queue.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/related.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/related.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/rss.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/rss.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/rssviewer.php elefant-elefant_1_3_11_rc/apps/blog/handlers/rssviewer.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/rssviewer.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/rssviewer.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,9 +4,19 @@
  * Renders the specified RSS feed `url` as a list of links.
  * Caches the feed for 30 minutes between updates.
  *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('blog/rssviewer', array ('url' => 'http://...'));
+ *
+ * In a view template, call it like this:
+ *
+ *     {! blog/rssviewer?url=http://... !}
+ *
  * Parameters:
  *
  * - `url`: The URL of the RSS feed to be displayed.
+ *
+ * Also available in the dynamic objects menu as "Blog: RSS Viewer".
  */
 
 require_once ('apps/blog/lib/simplepie/autoloader.php');
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/settings.php elefant-elefant_1_3_11_rc/apps/blog/handlers/settings.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/settings.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/settings.php	2015-09-05 21:13:59.000000000 -0500
@@ -18,6 +18,7 @@
 	'comments' => $appconf['Blog']['comments'],
 	'preview_chars' => $appconf['Blog']['preview_chars'],
 	'post_format' => $appconf['Blog']['post_format'],
+	'post_footer' => $appconf['Blog']['post_footer'],
 	'show_related_posts' => $appconf['Blog']['show_related_posts'],
 	'disqus_shortname' => $appconf['Blog']['disqus_shortname'],
 	'social_twitter' => $appconf['Social Buttons']['twitter'],
@@ -33,6 +34,7 @@
 			'post_layout' => $_POST['post_layout'],
 			'preview_chars' => (! empty ($_POST['preview_chars'])) ? (int) $_POST['preview_chars'] : false,
 			'post_format' => $_POST['post_format'],
+			'post_footer' => $_POST['post_footer'],
 			'comments' => ($_POST['comments'] === 'none') ? false : $_POST['comments'],
 			'show_related_posts' => ($_POST['show_related_posts'] === 'yes') ? true : false,
 			'disqus_shortname' => $_POST['disqus_shortname']
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/tag.php elefant-elefant_1_3_11_rc/apps/blog/handlers/tag.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/tag.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/tag.php	2015-09-05 21:13:59.000000000 -0500
@@ -26,6 +26,12 @@
 $page->more = ($page->count > $page->last) ? true : false;
 $page->next = $page->num + 2;
 
+$footer = Appconf::blog ('Blog', 'post_footer');
+$footer_stripped = strip_tags ($footer);
+$footer = ($footer && ! empty ($footer_stripped))
+	? $tpl->run_includes ($footer)
+	: false;
+
 if (Appconf::blog ('Blog', 'post_format') === 'markdown') {
 	require_once ('apps/blog/lib/markdown.php');
 }
@@ -42,6 +48,8 @@
 	if ($preview_chars) {
 		$post->body = blog_filter_truncate ($post->body, $preview_chars)
 			. ' <a href="' . $post->url . '">' . __ ('Read more') . '</a>';
+	} else {
+		$post->footer = $footer;
 	}
 	echo $tpl->render ('blog/post', $post);
 }
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/taglist.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/taglist.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/handlers/tags.php elefant-elefant_1_3_11_rc/apps/blog/handlers/tags.php
--- elefant-elefant_1_3_10_beta/apps/blog/handlers/tags.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/handlers/tags.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,6 +2,16 @@
 
 /**
  * Renders a tag cloud, with more frequently used tags appearing larger.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('blog/tags');
+ *
+ * In a view template, call it like this:
+ *
+ *     {! blog/tags !}
+ *
+ * Also available in the dynamic objects menu as "Blog: Tag Cloud".
  */
 
 if (! $this->internal) {
Files elefant-elefant_1_3_10_beta/apps/blog/handlers/upgrade.php and elefant-elefant_1_3_11_rc/apps/blog/handlers/upgrade.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/js/autocomplete.js and elefant-elefant_1_3_11_rc/apps/blog/js/autocomplete.js are identical
Files elefant-elefant_1_3_10_beta/apps/blog/js/jquery.timepicker.js and elefant-elefant_1_3_11_rc/apps/blog/js/jquery.timepicker.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/js/tag-it.js elefant-elefant_1_3_11_rc/apps/blog/js/tag-it.js
--- elefant-elefant_1_3_10_beta/apps/blog/js/tag-it.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/js/tag-it.js	2015-09-05 21:13:59.000000000 -0500
@@ -90,7 +90,7 @@
                 this.options.singleFieldNode = this.element;
                 this.element.css('display', 'none');
             } else {
-                this.tagList = this.element.find('ul, ol').andSelf().last();
+                this.tagList = this.element.find('ul, ol').addBack().last();
             }
 
             this._tagInput = $('<input type="text">').addClass('ui-widget-content');
Files elefant-elefant_1_3_10_beta/apps/blog/lib/Bitly.php and elefant-elefant_1_3_11_rc/apps/blog/lib/Bitly.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/CsvParser.php and elefant-elefant_1_3_11_rc/apps/blog/lib/CsvParser.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/Filters.php and elefant-elefant_1_3_11_rc/apps/blog/lib/Filters.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/Functions.php and elefant-elefant_1_3_11_rc/apps/blog/lib/Functions.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/Pingomatic.php and elefant-elefant_1_3_11_rc/apps/blog/lib/Pingomatic.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/Twitter.php and elefant-elefant_1_3_11_rc/apps/blog/lib/Twitter.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/markdown.php and elefant-elefant_1_3_11_rc/apps/blog/lib/markdown.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/autoloader.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/autoloader.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/.DS_Store and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/.DS_Store are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Author.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Author.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Cache/Base.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Cache/Base.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Cache/DB.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Cache/DB.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Cache/File.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Cache/File.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Cache/Memcache.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Cache/Memcache.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Cache/MySQL.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Cache/MySQL.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Cache.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Cache.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Caption.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Caption.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Category.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Category.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Content/Type/Sniffer.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Content/Type/Sniffer.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Copyright.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Copyright.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Core.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Core.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Credit.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Credit.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Decode/HTML/Entities.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Decode/HTML/Entities.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Enclosure.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Enclosure.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Exception.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Exception.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/File.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/File.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/HTTP/Parser.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/HTTP/Parser.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/IRI.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/IRI.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Item.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Item.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Locator.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Locator.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Misc.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Misc.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Net/IPv6.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Net/IPv6.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Parse/Date.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Parse/Date.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Parser.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Parser.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Rating.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Rating.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Registry.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Registry.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Restriction.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Restriction.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Sanitize.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Sanitize.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/Source.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/Source.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/XML/Declaration/Parser.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/XML/Declaration/Parser.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie/gzdecode.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie/gzdecode.php are identical
Files elefant-elefant_1_3_10_beta/apps/blog/lib/simplepie/library/SimplePie.php and elefant-elefant_1_3_11_rc/apps/blog/lib/simplepie/library/SimplePie.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/models/Post.php elefant-elefant_1_3_11_rc/apps/blog/models/Post.php
--- elefant-elefant_1_3_10_beta/apps/blog/models/Post.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/models/Post.php	2015-09-05 21:13:59.000000000 -0500
@@ -51,6 +51,16 @@
 	 * user-defined properties.
 	 */
 	public $_extended_field = 'extra';
+	
+	/**
+	 * Display name for this model type.
+	 */
+	public static $display_name = 'Blog Post';
+	
+	/**
+	 * Plural display name for this model type.
+	 */
+	public static $plural_name = 'Blog Posts';
 
 	public static function _publish_queued ($posts) {
 		foreach (array_keys ($posts) as $k) {
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/add/head.html elefant-elefant_1_3_11_rc/apps/blog/views/add/head.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/add/head.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/add/head.html	1969-12-31 18:00:00.000000000 -0600
@@ -1,98 +0,0 @@
-<script type="text/javascript" src="/js/json2.js"></script>
-<script type="text/javascript" src="/js/jstorage.js"></script>
-<script type="text/javascript" src="/js/jquery.autosave.js"></script>
-<style type="text/css">
-/* css for timepicker */
-.ui-timepicker-div .ui-widget-header{ margin-bottom: 8px; }
-.ui-timepicker-div dl{ text-align: left; }
-.ui-timepicker-div dl dt{ height: 25px; }
-.ui-timepicker-div dl dd{ margin: -25px 0 10px 65px; }
-.ui-timepicker-div td { font-size: 90%; }
-</style>
-<script type="text/javascript" src="/apps/blog/js/jquery.timepicker.js"></script>
-<link rel="stylesheet" type="text/css" href="/apps/blog/css/jquery.tagit.css" />
-<script type="text/javascript" src="/apps/blog/js/autocomplete.js"></script>
-<script type="text/javascript" src="/apps/blog/js/tag-it.js"></script>
-<script type="text/javascript" src="/js/jquery.verify_values.js"></script>
-<script type="text/javascript">
-var tagit_available_tags = [];
-$(function () {
-	function subtract_array (a1, a2) {
-		var result = [];
-		for (var i = 0; i < a1.length; i++) {
-			if ($.inArray (a1[i], a2) == -1) {
-				result.push (a1[i]);
-			}
-		}
-		return result;
-	};
-	$.getJSON ('/blog/taglist', function (res) {
-		tagit_available_tags = res;
-	});
-	$('#ts').datetimepicker ({
-		timeFormat: 'hh:mm:ss',
-		dateFormat: 'yy-mm-dd',
-		hourGrid: 4,
-		minuteGrid: 10
-	});
-	$('#tagit').tagit ({
-		singleFieldNode: document.getElementById ('tags'),
-		allowSpaces: true,
-		singleField: true,
-		caseSensitive: false,
-		tagSource: function (search, showChoices) {
-			var filter = search.term.toLowerCase ();
-			var choices = $.grep (tagit_available_tags, function (element) {
-				return (element.toLowerCase ().indexOf(filter) === 0);
-			});
-			showChoices (subtract_array (choices, $('#tagit').tagit ('assignedTags')));
-		}
-	});
-	$('#add-form').verify_values ({
-		handler: 'blog/add',
-		callback: function (failed) {
-			// highlight the failed elements
-			for (var i = 0; i < failed.length; i++) {
-				$('#' + failed[i] + '-notice').show ();
-			}
-		},
-		reset: function (fields) {
-			for (var i = 0; i < fields.length; i++) {
-				$('#' + fields[i] + '-notice').hide ();
-			}
-		}
-	});
-	{% foreach failed %}
-	$('#{{ loop_value }}-notice').show ();
-	{% end %}
-
-	$('#add-form').autosave ();
-});
-function webpage_show_extra_options (link) {
-	var eo = $('#extra-options');
-	if (eo.css ('display') == 'none') {
-		eo.slideDown ('fast', function () {
-			window.scrollTo (0, 1000);
-		});
-		$(link).find ('.arrow').removeClass ('arrow-off');
-	} else {
-		eo.slideUp ('fast', function () {
-			$(this).css ('display', 'none');
-		});
-		$(link).find ('.arrow').addClass ('arrow-off');
-	}
-	return false;
-}
-function webpage_preview (f) {
-	var t = f.target,
-		a = f.action;
-
-	f.target = 'elefant-preview';
-	f.action = '/blog/preview';
-	f.submit ();
-
-	f.target = t;
-	f.action = a;
-	return false;
-}
-</script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/add.html elefant-elefant_1_3_11_rc/apps/blog/views/add.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/add.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/add.html	1969-12-31 18:00:00.000000000 -0600
@@ -1,107 +0,0 @@
-{! user/util/userchooser !}
-{! filemanager/util/browser !}
-
-<div class="form">
-
-<p class="autosave-notice">{"Auto-saved data found for this form."} <a href="#" class="autosave-restore">{"Click here to restore."}</a></p>
-
-<form method="POST" id="add-form">
-
-<p>{"Title"}:<br /><input type="text" name="title" size="80" value="{{ title }}" />
-<span class="notice" id="title-notice">{"You must enter a title."}</span></p>
-
-<div id="thumbnail-div">
-	{"Thumbnail"}:<br />
-	<img src="{% if thumbnail == '' %}//:0{% else %}{{thumbnail|quotes}}{% end %}" id="thumbnail-preview" /><br />
-	<input type="hidden" name="thumbnail" id="thumbnail" size="40" value="{{ thumbnail|quotes }}" />
-	<input type="submit" id="thumbnail-browse" value="{"Choose"}" />
-</div>
-
-<p>{"Author"}:<br /><input type="text" name="author" id="author" size="30" value="{{ author }}" />
-<input type="submit" value="{"Choose"}" id="users" />
-<span class="notice" id="author-notice">{"You must enter an author."}</span></p>
-
-<p>{"Date/Time"}:<br /><input type="text" name="ts" id="ts" size="30" value="{{ ts }}" />
-<span class="notice" id="ts-notice">{"You must select a date/time."}</span></p>
-
-<p>{"Body"}: <span class="notice" id="body-notice">{"You must enter body content."}</span><br />
-<textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
-
-<h4><a href="#" onclick="return webpage_show_extra_options (this)" class="extra-options-link"><span class="arrow arrow-off"></span>{"Extra Options"}</a></h4>
-<div id="extra-options">
-<p>{"Published"}:
-<select name="published">
-{% foreach yes_no %}
-	<option value="{{ loop_index }}"{% if loop_index == $data->published %} selected{% end %}>{{ loop_value|none }}</option>
-{% end %}
-</select></p>
-<p>{"Tags (comma-separated)"}:
-<ul id="tagit" style="width: 580px; padding-top: 0px; margin-top: -16px">
-{% foreach tag_list %}
-	<li>{{ loop_value }}</li>
-{% end %}
-</ul>
-<input type="hidden" name="tags" id="tags"></p>
-<p>{"Auto-post options"}:<br />
-<input type="checkbox" name="autopost_pom" id="autopost_pom" value="yes" {% if autopost_tw %}checked{% end %} /> <label for="autopost_pom">Ping-o-matic</label><br />
-</p>
-</div>
-
-{! admin/util/extended?extends=blog\Post&name=Blog+Posts !}
-
-<p>
-	<input type="submit" value="{"Add Blog Post"}" class="autosave-clear" />&nbsp;
-	<input type="submit" value="{"Preview"}" onclick="return webpage_preview (this.form)" />&nbsp;
-	<a href="javascript:history.go(-1)" onclick="return $.cancel_autosave ('{"Are you sure you want to cancel and lose any changes?"}')">{"Cancel"}</a>
-</p>
-</form>
-
-</div>
-<div class="clear"></div>
-
-<style>
-#add-form {
-	position: relative;
-}
-#thumbnail-div {
-	position: absolute;
-	top: 0;
-	right: 0;
-	width: 150px;
-}
-#thumbnail-preview {
-	width: 150px;
-	height: 100px;
-	margin-bottom: 5px;
-}
-</style>
-
-<script>
-$(function () {
-	$('#users').click (function () {
-		$.userchooser ({
-			set_name_value: '#author'
-		});
-		return false;
-	});
-
-	{% if Appconf::blog ('Blog', 'post_format') === 'markdown' %}
-	$('.CodeMirror').before (
-		'<a href="http://daringfireball.net/projects/markdown/basics" target="_blank" id="markdown-link">' + $.i18n ('Markdown formatting') + '</a>'
-	);
-	{% end %}
-
-	$('#thumbnail-browse').click (function (e) {
-		e.preventDefault ();
-		$.filebrowser ({
-			allowed: ['jpg', 'jpeg', 'png', 'gif'],
-			set_value: '#thumbnail',
-			title: "{"Choose an image"}",
-			thumbs: true,
-			callback: function (file) {
-				$('#thumbnail-preview').attr ('src', file);
-			}
-		});
-	});
-});
-</script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/admin.html elefant-elefant_1_3_11_rc/apps/blog/views/admin.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/admin.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/admin.html	2015-09-05 21:13:59.000000000 -0500
@@ -19,7 +19,7 @@
 	{% end %}
 	</div>
 	<div class="e-col-50 e-no-padding" style="text-align: right">
-		<input type="text" name="q" id="search-query" size="40" value="{{q|quotes}}" />
+		<input type="text" name="q" id="search-query" size="40" value="{{q}}" />
 		<button>{"Search"}</button>
 		{% if q != '' %}
 		<button onclick="window.location.href = '/blog/admin'; return false">{"Clear"}</button>
Files elefant-elefant_1_3_10_beta/apps/blog/views/archive.html and elefant-elefant_1_3_11_rc/apps/blog/views/archive.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/archives.html and elefant-elefant_1_3_11_rc/apps/blog/views/archives.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/by.html and elefant-elefant_1_3_11_rc/apps/blog/views/by.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/bymonth.html and elefant-elefant_1_3_11_rc/apps/blog/views/bymonth.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/disqus/commentcount.html elefant-elefant_1_3_11_rc/apps/blog/views/disqus/commentcount.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/disqus/commentcount.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/disqus/commentcount.html	2015-09-05 21:13:59.000000000 -0500
@@ -4,7 +4,7 @@
     (function () {
         var s = document.createElement('script'); s.async = true;
         s.type = 'text/javascript';
-        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
+        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
         (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
     }());
 </script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/disqus/comments.html elefant-elefant_1_3_11_rc/apps/blog/views/disqus/comments.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/disqus/comments.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/disqus/comments.html	2015-09-05 21:13:59.000000000 -0500
@@ -3,11 +3,11 @@
     var disqus_shortname = '{{shortname}}';
     var disqus_title = '{{title}}';
     var disqus_identifier = '{{identifier}}';
-    var disqus_url = 'http://{{$_SERVER.HTTP_HOST}}{{permalink}}';
+    var disqus_url = 'http{% if $this->controller->is_https() %}s{% end %}://{{$_SERVER.HTTP_HOST}}{{permalink}}';
 
     (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
-        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
+        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
 </script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/edit/head.html elefant-elefant_1_3_11_rc/apps/blog/views/edit/head.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/edit/head.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/edit/head.html	2015-09-05 21:13:59.000000000 -0500
@@ -8,10 +8,13 @@
 .ui-timepicker-div dl dt{ height: 25px; }
 .ui-timepicker-div dl dd{ margin: -25px 0 10px 65px; }
 .ui-timepicker-div td { font-size: 90%; }
+
+.ui-datepicker { z-index: 9999 !important; }
+.ui-timepicker { z-index: 9999 !important; }
 </style>
 <script type="text/javascript" src="/apps/blog/js/jquery.timepicker.js"></script>
 <link rel="stylesheet" type="text/css" href="/apps/blog/css/jquery.tagit.css" />
-<script type="text/javascript" src="/apps/blog/js/autocomplete.js"></script>
+<!-- script type="text/javascript" src="/apps/blog/js/autocomplete.js"></script -->
 <script type="text/javascript" src="/apps/blog/js/tag-it.js"></script>
 <script type="text/javascript" src="/js/jquery.bgsave.js"></script>
 <script type="text/javascript" src="/js/jquery.verify_values.js"></script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/edit.html elefant-elefant_1_3_11_rc/apps/blog/views/edit.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/edit.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/edit.html	2015-09-05 21:13:59.000000000 -0500
@@ -7,12 +7,18 @@
 
 <form method="POST" id="edit-form">
 
-<p>{"Title"}:<br /><input type="text" name="title" size="80" value="{{ title|quotes }}" />
+<p>{"Title"}:<br /><input type="text" name="title" size="65" value="{{ title|quotes }}" />
 <span class="notice" id="title-notice">{"You must enter a title."}</span></p>
 
 <div id="thumbnail-div">
 	{"Thumbnail"}:<br />
-	<img src="{% if thumbnail == '' %}//:0{% else %}{{thumbnail|quotes}}{% end %}" id="thumbnail-preview" /><br />
+	<div class="thumbnail-wrapper">
+		<div class="thumbnail" id="thumbnail-preview"
+		{% if thumbnail !== '' %}
+			style="background-image: url({{thumbnail|urlencode}}')"
+		{% end %}
+		></div>
+	</div>
 	<input type="hidden" name="thumbnail" id="thumbnail" size="40" value="{{ thumbnail|quotes }}" />
 	<input type="submit" id="thumbnail-browse" value="{"Choose"}" />
 </div>
@@ -24,17 +30,18 @@
 <p>{"Date/Time"}:<br /><input type="text" name="ts" id="ts" size="30" value="{{ ts }}" />
 <span class="notice" id="ts-notice">{"You must select a date/time."}</span></p>
 
-<p>{"Body"}: <span class="notice" id="body-notice">{"You must enter body content."}</span><br />
-<textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
+<div>
+{"Status"}:<br />
+<p class="toggle" data-field="published">
+	<a href="#" data-value="no">{"Draft"}</a
+	><a href="#" data-value="yes">{"Published"}</a
+	><a href="#" data-value="que">{"Scheduled"}</a>
+</p>
+<input type="hidden" name="published" id="published" value="{{ published }}" />
+</div>
+
+<p><textarea name="body" id="webpage-body" cols="90" rows="28">{{ body }}</textarea></p>
 
-<h4><a href="#" onclick="return webpage_show_extra_options (this)" class="extra-options-link"><span class="arrow arrow-off"></span>{"Extra Options"}</a></h4>
-<div id="extra-options">
-<p>{"Published"}:
-<select name="published">
-{% foreach yes_no %}
-	<option value="{{ loop_index }}"{% if loop_index == $data->published %} selected{% end %}>{{ loop_value|none }}</option>
-{% end %}
-</select></p>
 <p>{"Tags (comma-separated)"}:
 <ul id="tagit" style="width: 580px; padding-top: 0px; margin-top: -16px">
 {% foreach tag_list %}
@@ -42,10 +49,6 @@
 {% end %}
 </ul>
 <input type="hidden" name="tags" id="tags"></p>
-<p>{"Auto-post options"}:<br />
-<input type="checkbox" name="autopost_pom" id="autopost_pom" value="yes" {% if autopost_tw %}checked{% end %} /> <label for="autopost_pom">Ping-o-matic</label><br />
-</p>
-</div>
 
 {! admin/util/extended?extends=blog\Post&name=Blog+Posts&values=[extra|none]&id=[id] !}
 
@@ -71,9 +74,7 @@
 	right: 0;
 	width: 150px;
 }
-#thumbnail-preview {
-	width: 150px;
-	height: 100px;
+.thumbnail-wrapper {
 	margin-bottom: 5px;
 }
 </style>
@@ -86,6 +87,33 @@
 		});
 		return false;
 	});
+	
+	/**
+	 * Takes the following HTML and enables a toggle on them:
+	 *
+	 * <p class="toggle" data-field="published">
+	 *     <a href="#" data-value="no">{"Draft"}</a>
+	 *     <!-- etc -->
+	 * </p>
+	 * <input type="hidden" name="published" id="published" value="{{published}}" />
+	 */
+	$('.toggle').each (function () {
+		var $this = $(this),
+			field = $this.data ('field'),
+			$field = $('#' + field);
+		
+		$this.find ('a').removeClass ('toggle-active').click (function (e) {
+			e.preventDefault ();
+
+			var val = $(this).data ('value');
+			$field.val (val);
+
+			$this.find ('a').removeClass ('toggle-active');
+			$(this).addClass ('toggle-active');
+		});
+
+		$this.find ('a[data-value={{published}}]').addClass ('toggle-active');
+	});
 
 	{% if Appconf::blog ('Blog', 'post_format') === 'markdown' %}
 	$('.CodeMirror').before (
@@ -101,7 +129,7 @@
 			title: "{"Choose an image"}",
 			thumbs: true,
 			callback: function (file) {
-				$('#thumbnail-preview').attr ('src', file);
+				$('#thumbnail-preview').css ('background-image', 'url(\'' + encodeURI (file) + '\')');
 			}
 		});
 	});
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/headlines.html elefant-elefant_1_3_11_rc/apps/blog/views/headlines.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/headlines.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/headlines.html	2015-09-05 21:13:59.000000000 -0500
@@ -2,7 +2,7 @@
 	{! admin/util/dates !}
 {% end %}
 
-<ul>
+<ul class="blog-headlines">
 {% foreach posts %}
 	<li>{% if dates %}{{ loop_value->ts|I18n::short_date }} {% end %}<a href="/blog/post/{{ loop_value->id }}/{{ loop_value->title|URLify::filter }}">{{ loop_value->title }}</a></li>
 {% end %}
Files elefant-elefant_1_3_10_beta/apps/blog/views/import/blogger.html and elefant-elefant_1_3_11_rc/apps/blog/views/import/blogger.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/import/csv.html and elefant-elefant_1_3_11_rc/apps/blog/views/import/csv.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/import/csv2.html and elefant-elefant_1_3_11_rc/apps/blog/views/import/csv2.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/import/wordpress.html and elefant-elefant_1_3_11_rc/apps/blog/views/import/wordpress.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/import/wordpress_done.html elefant-elefant_1_3_11_rc/apps/blog/views/import/wordpress_done.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/import/wordpress_done.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/import/wordpress_done.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,16 @@
+<p>
+	{"Imported"} {{ imported_posts }} {"posts"}<br />
+	{"Imported"} {{ imported_pages }} {"pages"}
+</p>
+
+<p><em>{"Please add these lines to .htaccess file in order to keep old links working"}:</em></p>
+
+<code>
+	{% foreach links as _old_link, _new_link %}
+		redirect 301 {{ _old_link }} {{ _new_link }}<br />
+	{% end %}	
+</code>
+
+<p></p>
+
+<p><a href="/blog/admin">{"Continue"}</a></p>
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/blog/views/import.html and elefant-elefant_1_3_11_rc/apps/blog/views/import.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/index.html and elefant-elefant_1_3_11_rc/apps/blog/views/index.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/post.html elefant-elefant_1_3_11_rc/apps/blog/views/post.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/post.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/post.html	2015-09-05 21:13:59.000000000 -0500
@@ -2,7 +2,7 @@
 
 <div class="blog-post{% if full %} blog-post-full{% end %} block">
 {% if ! full %}
-<h3><a href="{{ url }}">{{ title }}</a></h3>
+<h3><a href="{{ fullurl }}">{{ title }}</a></h3>
 {% end %}
 <p class="blog-info info">{{ ts|I18n::date_time }}<span class="blog-by"> - {" by "} <a href="/blog/by/{{ author }}">{{ author }}</a></span>
 {% if User::require_acl ('admin', 'blog') %}
@@ -10,6 +10,13 @@
 {% end %}
 </p>
 {{ body|none }}
+
+{% if footer %}
+<div class="blog-footer">
+{{ footer|none }}
+</div>
+{% end %}
+
 {% if count ($data->tag_list) > 0 %}
 <div class="blog-tags info">
 {"Tags"}: 
@@ -19,8 +26,9 @@
 </div>
 <hr />
 {% end %}
+
 <div class="blog-comments">
-{{ controller.run ('blog/commentcount', $data)|none }}&nbsp;
+{% if ! full %}{{ controller.run ('blog/commentcount', $data)|none }}{% end %}&nbsp;
 {% if social_buttons['facebook'] %}
 	{{ controller.run ('social/facebook/like', $data)|none }}
 {% end %}
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/related.html elefant-elefant_1_3_11_rc/apps/blog/views/related.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/related.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/related.html	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
 				<a href="/blog/post/{{post->id}}/{{post->title|URLify::filter}}">
 					<div class="thumbnail"
 						{% if post->thumbnail != '' %}
-							style="background-image: url('/{{post->thumbnail|Image::resize (%s, 400, 300, 'cover', 'ext')}}')"
+							style="background-image: url('/{{post->thumbnail|Image::resize (%s, 400, 264, 'cover', 'ext')}}')"
 						{% end %}
 					></div>
 				</a>
Files elefant-elefant_1_3_10_beta/apps/blog/views/rss.html and elefant-elefant_1_3_11_rc/apps/blog/views/rss.html are identical
Files elefant-elefant_1_3_10_beta/apps/blog/views/rssviewer.html and elefant-elefant_1_3_11_rc/apps/blog/views/rssviewer.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/settings.html elefant-elefant_1_3_11_rc/apps/blog/views/settings.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/settings.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/settings.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,12 +1,27 @@
+{! admin/util/wysiwyg?field_id=post-footer !}
+
 <div class="form">
 
 <form method="post" id="{{_form}}">
 
+<h4>{"Basic Settings"}</h4>
+
 <p>{"Blog title"}:<br />
 <input type="text" name="title" size="40" value="{{ title|quotes }}" />
 <span class="notice" id="title-notice">{"You must enter a blog title."}</span></p>
 
-<p>{"Page layout"}:<br />
+<p>{"Edit posts with"}:<br />
+<select name="post_format" id="post_format">
+	<option value="html"{% if post_format === 'html' %} selected{% end %}>{"WYSIWYG editor"}</option>
+	<option value="markdown"{% if post_format === 'markdown' %} selected{% end %}>{"Markdown formatting"}</option>
+</select>
+<span class="notice" id="post_format-notice">{"Please choose a post format."}</span></p>
+
+<p>{"Limit post previews (# of chars)"}:<br />
+<input type="text" name="preview_chars" size="20" value="{{ preview_chars|quotes }}" />
+<span class="notice" id="preview_chars-notice">{"Preview must be a number of characters."}</span></p>
+
+<p>{"Blog page layout"}:<br />
 <select name="layout">
 {% foreach admin\Layout::options () as _layout, _name %}
 	<option value="{{ _layout }}"{% if _layout == $data->layout %} selected{% end %}>{{ _name }}</option>
@@ -20,6 +35,18 @@
 {% end %}
 </select></p>
 
+<h4>{"Post Footer Settings"}</h4>
+
+<p>{"Footer message"}:<br />
+<textarea name="post_footer" id="post-footer">{{post_footer}}</textarea>
+</p>
+
+<p>{"Social buttons"}:<br />
+<input type="checkbox" name="social_twitter" value="yes"{% if social_twitter %} checked{% end %} /> {"Twitter"}<br />
+<input type="checkbox" name="social_facebook" value="yes"{% if social_facebook %} checked{% end %} /> {"Facebook"}<br />
+<input type="checkbox" name="social_google" value="yes"{% if social_google %} checked{% end %} /> {"Google"}<br />
+</p>
+
 <p>{"Comments"}:<br />
 <select name="comments" id="comments">
 	<option value="none"{% if comments === false %} selected{% end %}>{"Off"}</option>
@@ -30,6 +57,10 @@
 	{% end %}
 </select></p>
 
+<p id="disqus_shortname">{"Disqus shortname"}:<br />
+<input type="text" name="disqus_shortname" size="30" value="{{ disqus_shortname|quotes }}" />
+</p>
+
 <p>{"Show related posts"}:<br />
 <select name="show_related_posts">
 	<option value="no"{% if ! show_related_posts %} selected{% end %}>{"No"}</option>
@@ -37,27 +68,6 @@
 </select>
 </p>
 
-<p>{"Edit posts with"}:<br />
-<select name="post_format" id="post_format">
-	<option value="html"{% if post_format === 'html' %} selected{% end %}>{"WYSIWYG editor"}</option>
-	<option value="markdown"{% if post_format === 'markdown' %} selected{% end %}>{"Markdown formatting"}</option>
-</select>
-<span class="notice" id="post_format-notice">{"Please choose a post format."}</span></p>
-
-<p>{"Limit post previews (# of chars)"}:<br />
-<input type="text" name="preview_chars" size="20" value="{{ preview_chars|quotes }}" />
-<span class="notice" id="preview_chars-notice">{"Preview must be a number of characters."}</span></p>
-
-<p id="disqus_shortname">{"Disqus shortname"}:<br />
-<input type="text" name="disqus_shortname" size="30" value="{{ disqus_shortname|quotes }}" />
-</p>
-
-<p>{"Social buttons"}:<br />
-<input type="checkbox" name="social_twitter" value="yes"{% if social_twitter %} checked{% end %} /> {"Twitter"}<br />
-<input type="checkbox" name="social_facebook" value="yes"{% if social_facebook %} checked{% end %} /> {"Facebook"}<br />
-<input type="checkbox" name="social_google" value="yes"{% if social_google %} checked{% end %} /> {"Google"}<br />
-</p>
-
 <p>
 	<input type="submit" value="{"Save Settings"}" />
 	&nbsp;
@@ -85,3 +95,10 @@
 	});
 });
 </script>
+
+<style>
+div.redactor-editor, div.redactor-box textarea {
+	height: 160px !important;
+	max-height: 160px !important;
+}
+</style>
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/blog/views/tag.html and elefant-elefant_1_3_11_rc/apps/blog/views/tag.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/blog/views/tags.html elefant-elefant_1_3_11_rc/apps/blog/views/tags.html
--- elefant-elefant_1_3_10_beta/apps/blog/views/tags.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/blog/views/tags.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,3 +1,5 @@
+<div class="blog-tags">
 {% foreach tags %}
-<a href="/blog/tag/{{ loop_index|strtolower }}" style="padding-right: 5px; font-size: {{ loop_value }}em">{{ loop_index }}</a>
+<a href="/blog/tag/{{ loop_index|strtolower }}" class="blog-tag" style="padding-right: 5px; font-size: {{ loop_value }}em">{{ loop_index }}</a>
 {% end %}
+</div>
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/appconf.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/appconf.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/backup.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/backup.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/build-app.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/build-app.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/handlers/bundle-translations.php elefant-elefant_1_3_11_rc/apps/cli/handlers/bundle-translations.php
--- elefant-elefant_1_3_10_beta/apps/cli/handlers/bundle-translations.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/handlers/bundle-translations.php	2015-09-05 21:13:59.000000000 -0500
@@ -35,10 +35,12 @@
 $include = array ();
 
 foreach ($index as $string) {
-	foreach ($string['src'] as $source) {
-		if (strpos ($source, 'apps/' . $app . '/') === 0) {
-			$include[] = $string['orig'];
-			break;
+	if (isset ($string['src']) && is_array ($string['src'])) {
+		foreach ($string['src'] as $source) {
+			if (strpos ($source, 'apps/' . $app . '/') === 0) {
+				$include[] = $string['orig'];
+				break;
+			}
 		}
 	}
 }
@@ -75,7 +77,7 @@
 		);
 		$sep = ",\r";
 	}
-	$out .= "\n\t)\n);\n\n?>";
+	$out .= "\n\t)\n);\n";
 
 	file_put_contents ('apps/' . $app . '/lang/' . $code . '.php', $out);
 }
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/clear-cache.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/clear-cache.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/handlers/conf.php elefant-elefant_1_3_11_rc/apps/cli/handlers/conf.php
--- elefant-elefant_1_3_10_beta/apps/cli/handlers/conf.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/handlers/conf.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,7 @@
 <?php
 
 /**
- * GEt or set a global setting.
+ * Get or set a global setting.
  *
  * Usage:
  *
@@ -16,6 +16,9 @@
  *
  *     # List configuration options in the Mailer section
  *     ./elefant conf Mailer                     # email_from, email_name, etc.
+ *
+ *     # Set the database driver
+ *     ./elefant conf Database.master.driver sqlite
  */
 
 if (! $this->cli) die ('Must be run from the command line.');
@@ -24,6 +27,7 @@
 
 $valid_section_name = '/^[a-zA-Z0-9 _-]+$/';
 $valid_setting_name = '/^[a-zA-Z0-9\/ _-]+$/';
+$valid_inner_name = '/^[a-zA-Z0-9\/ _-]+$/';
 
 // there's a value to update
 if (isset ($_SERVER['argv'][3])) {
@@ -31,13 +35,16 @@
 	$value = $_SERVER['argv'][3];
 
 	// make sure they provide a specific and valid setting name
-	if (count ($parts) !== 2) {
+	if (count ($parts) === 3) {
+		list ($section, $setting, $inner) = $parts;
+	} elseif (count ($parts) === 2) {
+		list ($section, $setting) = $parts;
+		$inner = null;
+	} else {
 		Cli::out ('Please provide a setting name to update its value.', 'error');
 		return;
 	}
 	
-	list ($section, $setting) = $parts;
-	
 	if (! preg_match ($valid_section_name, $section)) {
 		Cli::out ('Invalid section name: ' . $section, 'error');
 		return;
@@ -47,10 +54,19 @@
 		Cli::out ('Invalid setting name: ' . $setting, 'error');
 		return;
 	}
+
+	if ($inner !== null && ! preg_match ($valid_inner_name, $inner)) {
+		Cli::out ('Invalid setting key name: ' . $inner, 'error');
+		return;
+	}
 	
 	// build an updated config to save
 	$settings = conf ();
-	$merged = array_replace_recursive ($settings, array ($section => array ($setting => $value)));
+	if ($inner !== null) {
+		$merged = array_replace_recursive ($settings, array ($section => array ($setting => array ($inner => $value))));
+	} else {
+		$merged = array_replace_recursive ($settings, array ($section => array ($setting => $value)));
+	}
 
 	if (! Ini::write ($merged, 'conf/' . ELEFANT_ENV . '.php')) {
 		Cli::out ('Unable to save changes to: conf/' . ELEFANT_ENV . '.php', 'error');
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/handlers/crud-app.php elefant-elefant_1_3_11_rc/apps/cli/handlers/crud-app.php
--- elefant-elefant_1_3_10_beta/apps/cli/handlers/crud-app.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/handlers/crud-app.php	2015-09-05 21:13:59.000000000 -0500
@@ -88,7 +88,7 @@
 			$pkey = $regs[1];
 		}
 
-	// natch name alone
+	// match name alone
 	} elseif (preg_match ('/^[a-zA-Z0-9_]+$/', $_SERVER['argv'][$i])) {
 
 		// automatically promote 'id' field to primary key if unspecified
@@ -191,7 +191,7 @@
 );
 
 file_put_contents (
-	'apps/' . $plural . '/models/' . ucfirst ($name) . '.php',
+	'apps/' . $plural . '/models/' . cli\Filter::camel ($name) . '.php',
 	$tpl->render ('cli/crud-app/model', $data)
 );
 
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/encrypt-password.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/encrypt-password.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/export-db.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/export-db.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/generate-key.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/generate-key.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/generate-password.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/generate-password.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/handlers/helper-docs.php elefant-elefant_1_3_11_rc/apps/cli/handlers/helper-docs.php
--- elefant-elefant_1_3_10_beta/apps/cli/handlers/helper-docs.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/handlers/helper-docs.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,52 @@
+<?php
+
+/**
+ * Show the documentation for a helper, found in the first comment
+ * block in the source file.
+ */
+
+if (! $this->cli) {
+	die ('Must be run from the command line.');
+}
+
+$page->layout = false;
+
+if (! isset ($_SERVER['argv'][2])) {
+	Cli::out ('Usage: ./elefant helper-docs <helper>', 'error');
+	die;
+}
+
+$helper = $_SERVER['argv'][2];
+
+list ($app, $handler) = explode ('/', $helper, 2);
+$route = 'apps/' . $app . '/handlers/' . $handler . '.php';
+
+if (! file_exists ($route)) {
+	Cli::out ('Helper not found in ' . $route, 'error');
+	die;
+}
+
+echo "\n# Helper: " . $helper . "\n\n";
+
+// Get the comment itself
+$comments = array_filter (
+	token_get_all (file_get_contents ($route)),
+	function ($entry) {
+		return $entry[0] == T_DOC_COMMENT;
+	}
+);
+
+$comments = array_shift ($comments);
+if (! isset ($comments[1])) {
+	echo "No documentation found.\n\n";
+	die;
+}
+
+$docs = $comments[1];
+
+// remove comment block tags
+$docs = preg_replace ('/^\/\*\*?/', '', $docs);
+$docs = preg_replace ('/\*\/$/', '', $docs);
+$docs = preg_replace ('/\n[ \t]+?\* ?/', "\n", $docs);
+
+echo trim ($docs) . "\n\n";
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/import-db.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/import-db.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/handlers/index.php elefant-elefant_1_3_11_rc/apps/cli/handlers/index.php
--- elefant-elefant_1_3_10_beta/apps/cli/handlers/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/handlers/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -23,7 +23,8 @@
 Usage:
 
   <info>$ cd /path/to/my/site
-  $ ./elefant COMMAND</info>
+  $ ./elefant COMMAND
+  $ ./elefant --env=staging COMMAND</info>
 
 Commands:
 
@@ -42,6 +43,7 @@
   <info>clear-cache</info>                           Clear the cache and compiled templates
   <info>clear-cache <key></info>                     Clear a particular cached object
   <info>list-helpers</info>                          List available server-side helpers
+  <info>helper-docs <helper></info>                  Show documentation for a helper
   <info>generate-key</info>                          Generate a random 32 character key
   <info>generate-password <length(8)></info>         Generate a random password
   <info>encrypt-password <password></info>           Encrypt a password for the db
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/install.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/install.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/list-helpers.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/list-helpers.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/permissions.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/permissions.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/update.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/update.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/handlers/version.php and elefant-elefant_1_3_11_rc/apps/cli/handlers/version.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/lib/CRUDHelpers.php elefant-elefant_1_3_11_rc/apps/cli/lib/CRUDHelpers.php
--- elefant-elefant_1_3_10_beta/apps/cli/lib/CRUDHelpers.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/lib/CRUDHelpers.php	2015-09-05 21:13:59.000000000 -0500
@@ -17,7 +17,7 @@
 		$out .= sprintf (
 			"\t\t<th width=\"%d%%\">{\" %s \"}</th>\n",
 			$width,
-			ucfirst ($fields[$i]->name)
+			cli\Filter::label ($fields[$i]->name)
 		);
 	}
 	return $out;
Files elefant-elefant_1_3_10_beta/apps/cli/lib/Cli.php and elefant-elefant_1_3_11_rc/apps/cli/lib/Cli.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/lib/Filter.php elefant-elefant_1_3_11_rc/apps/cli/lib/Filter.php
--- elefant-elefant_1_3_10_beta/apps/cli/lib/Filter.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/lib/Filter.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,53 @@
+<?php
+
+namespace cli;
+
+class Filter {
+	/**
+	 * Replace underscores with spaces. Doesn't change
+	 * capitalization.
+	 *
+	 * Usage:
+	 *
+	 *     {{field->name|cli\Filter::spaces}}
+	 */
+	public static function spaces ($name) {
+		return str_replace ('_', ' ', $name);
+	}
+
+	/**
+	 * Create a label from a field name. Replaces underscores,
+	 * and capitalizes the first word.
+	 *
+	 * Usage:
+	 *
+	 *     {{field->name|cli\Filter::label}}
+	 */
+	public static function label ($name) {
+		return ucfirst (str_replace ('_', ' ', $name));
+	}
+	
+	/**
+	 * Create a label from a field name. Replaces underscores,
+	 * capitalizes all words, and sanitizes.
+	 *
+	 * Usage:
+	 *
+	 *     {{field->name|cli\Filter::title}}
+	 */
+	public static function title ($name) {
+		return ucwords (str_replace ('_', ' ', $name));
+	}
+	
+	/**
+	 * Create a class name from a string, converting underscores
+	 * to CamelCase.
+	 *
+	 * Usage:
+	 *
+	 *     {{appname|cli\Filter::camel}}
+	 */
+	public static function camel ($name) {
+		return str_replace (' ', '', ucwords (str_replace ('_', ' ', $name)));
+	}
+}
Files elefant-elefant_1_3_10_beta/apps/cli/lib/Functions.php and elefant-elefant_1_3_11_rc/apps/cli/lib/Functions.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/lib/Updater.php and elefant-elefant_1_3_11_rc/apps/cli/lib/Updater.php are identical
Files elefant-elefant_1_3_10_beta/apps/cli/tests/CliTest.php and elefant-elefant_1_3_11_rc/apps/cli/tests/CliTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/build-app/admin_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/build-app/admin_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/build-app/admin_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/build-app/admin_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -4,6 +4,4 @@
 $this->require_admin ();
 
 $page->layout = 'admin';
-$page->title = '{{appname|ucfirst}} admin';
-
-{{close_tag|none}}
\ No newline at end of file
+$page->title = '{{appname|cli\Filter::label}} admin';
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/build-app/config.html elefant-elefant_1_3_11_rc/apps/cli/views/build-app/config.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/build-app/config.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/build-app/config.html	2015-09-05 21:13:59.000000000 -0500
@@ -3,7 +3,8 @@
 [Admin]
 
 handler = {{appname}}/admin
-name = {{appname|ucfirst}}
+name = {{appname|cli\Filter::title}}
 
 
-; */ {{close_tag|none}}
\ No newline at end of file
+; */ {{close_tag|none}}
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/build-app/index_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/build-app/index_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/build-app/index_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/build-app/index_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,5 @@
 {{open_tag|none}}
 
 
-$page->title = '{{appname|ucfirst}} home';
+$page->title = '{{appname|cli\Filter::label}} home';
 echo $tpl->render ('{{appname}}/index', array ());
-
-{{close_tag|none}}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/cli/views/build-app/index_view.html and elefant-elefant_1_3_11_rc/apps/cli/views/build-app/index_view.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/acl.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/acl.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/acl.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/acl.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,6 @@
 ; {{open_tag|none}} /*
 
-{{plural}} = "Manage {{plural}}"
+{{plural}} = "Manage {{plural|cli\Filter::title}}"
+
+; */ {{close_tag|none}}
 
-; */ {{close_tag|none}}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/add_form.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/add_form.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/add_form.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/add_form.html	2015-09-05 21:13:59.000000000 -0500
@@ -7,4 +7,5 @@
 
 {% end %}
 {% end %}
-; */ {{close_tag|none}}
\ No newline at end of file
+; */ {{close_tag|none}}
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/add_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/add_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/add_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/add_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -4,13 +4,13 @@
 $this->require_acl ('admin', '{{plural}}', 'admin/add');
 
 $page->layout = 'admin';
-$page->title = __ ('Add {{appname|ucfirst}}');
+$page->title = __ ('Add {{appname|cli\Filter::title}}');
 
 $form = new Form ('post', $this);
 
 echo $form->handle (function ($form) {
 	// Create and save a new {{appname}} 
-	${{appname}} = new {{plural}}{{backslash}}{{appname|ucfirst}} (array (
+	${{appname}} = new {{plural}}{{backslash}}{{appname|cli\Filter::camel}} (array (
 {% for key, field in fields %}
 {% if field->name !== $data->pkey %}
 		'{{field->name}}' => $_POST['{{field->name}}']{{field->comma}} 
@@ -22,7 +22,7 @@
 	if (${{appname}}->error) {
 		// Failed to save
 		error_log ('Error adding {{appname}}: ' . DB::error ());
-		$form->controller->add_notification (__ ('Unable to save {{appname}}.'));
+		$form->controller->add_notification (__ ('Unable to save {{appname|cli\Filter::spaces}}.'));
 		return false;
 	}
 
@@ -30,8 +30,6 @@
 	Versions::add (${{appname}});
 
 	// Notify the user and redirect on success
-	$form->controller->add_notification (__ ('{{appname|ucfirst}} added.'));
+	$form->controller->add_notification (__ ('{{appname|cli\Filter::label}} added.'));
 	$form->controller->redirect ('/{{plural}}/admin');
 });
-
-{{close_tag|none}}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/add_view.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/add_view.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/add_view.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/add_view.html	2015-09-05 21:13:59.000000000 -0500
@@ -5,7 +5,11 @@
 {% inc cli/crud-app/types/[field->type] %}
 {% end %}
 
-<p><input type="submit" value="\{"Add {{appname|ucfirst}}"}" /></p>
+<p>
+	<input type="submit" value="\{"Add {{appname|cli\Filter::title}}"}" />
+	&nbsp;
+	<a href="/{{plural}}/admin" onclick="return confirm ('\{"Are you sure you want to cancel and lose any changes?"}')">\{"Cancel"}</a>
+</p>
 
 </form>
 </div>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/admin_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/admin_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/admin_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/admin_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -4,7 +4,7 @@
 $this->require_acl ('admin', '{{plural}}');
 
 $page->layout = 'admin';
-$page->title = __ ('{{plural|ucfirst}}');
+$page->title = __ ('{{plural|cli\Filter::title}}');
 
 // Calculate the offset
 $limit = 20;
@@ -12,8 +12,8 @@
 $offset = ($num - 1) * $limit;
 
 // Fetch the items and total items
-$items = {{plural}}{{backslash}}{{appname|ucfirst}}::query ()->fetch ($limit, $offset);
-$total = {{plural}}{{backslash}}{{appname|ucfirst}}::query ()->count ();
+$items = {{plural}}{{backslash}}{{appname|cli\Filter::camel}}::query ()->fetch ($limit, $offset);
+$total = {{plural}}{{backslash}}{{appname|cli\Filter::camel}}::query ()->count ();
 
 // Check for error, e.g., if table hasn't been created yet
 if ($items === false) {
@@ -37,5 +37,3 @@
 		'url' => '/{{plural}}/admin/%d'
 	)
 );
-
-{{close_tag|none}}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/admin_view.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/admin_view.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/admin_view.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/admin_view.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,5 @@
 \{% if User::require_acl ('admin/add') %}
-<p><a href="/{{plural}}/add">\{"Add {{appname|ucfirst}}"}</a></p>
+<p><a href="/{{plural}}/add">\{"Add {{appname|cli\Filter::title}}"}</a></p>
 \{% end %}
 
 <p>
@@ -19,7 +19,7 @@
 			|
 			<a	href="/{{plural}}/delete"
 				data-id="\{{ loop_value->id }}"
-				onclick="return $.confirm_and_post (this, '\{"Are you sure you want to delete this {{appname}}?"}')">\{"Delete"}</a>
+				onclick="return $.confirm_and_post (this, '\{"Are you sure you want to delete this {{appname|cli\Filter::spaces}}?"}')">\{"Delete"}</a>
 			\{% end %}
 		</td>
 	</tr>
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/config.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/config.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/config.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/config.html	2015-09-05 21:13:59.000000000 -0500
@@ -2,11 +2,12 @@
 
 [Admin]
 
-name = {{plural|ucfirst}}
+name = {{plural|cli\Filter::title}}
 
 version = 0.1.0
 handler = {{plural}}/admin
 install = {{plural}}/install
 upgrade = {{plural}}/upgrade
 
-; */ {{close_tag|none}}
\ No newline at end of file
+; */ {{close_tag|none}}
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/delete_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/delete_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/delete_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/delete_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -7,16 +7,14 @@
 	$this->redirect ('/{{plural}}/admin');
 }
 
-${{appname}} = new {{plural}}{{backslash}}{{appname|ucfirst}};
+${{appname}} = new {{plural}}{{backslash}}{{appname|cli\Filter::camel}};
 ${{appname}}->remove ($_POST['id']);
 
 if (${{appname}}->error) {
 	error_log ('Error deleting {{appname}}: ' . DB::error ());
-	$this->add_notification (__ ('Unable to delete {{appname}}.'));
+	$this->add_notification (__ ('Unable to delete {{appname|cli\Filter::spaces}}.'));
 	$this->redirect ('/{{plural}}/admin');
 }
 
-$this->add_notification (__ ('{{appname|ucfirst}} deleted.'));
+$this->add_notification (__ ('{{appname|cli\Filter::label}} deleted.'));
 $this->redirect ('/{{plural}}/admin');
-
-{{close_tag|none}}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/edit_form.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/edit_form.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/edit_form.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/edit_form.html	2015-09-05 21:13:59.000000000 -0500
@@ -7,4 +7,5 @@
 
 {% end %}
 {% end %}
-; */ {{close_tag|none}}
\ No newline at end of file
+; */ {{close_tag|none}}
+
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/edit_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/edit_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/edit_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/edit_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -4,11 +4,11 @@
 $this->require_acl ('admin', '{{plural}}', 'admin/edit');
 
 $page->layout = 'admin';
-$page->title = __ ('Edit {{appname|ucfirst}}');
+$page->title = __ ('Edit {{appname|cli\Filter::title}}');
 
 $form = new Form ('post', $this);
 
-$form->data = new {{plural}}{{backslash}}{{appname|ucfirst}} ($_GET['id']);
+$form->data = new {{plural}}{{backslash}}{{appname|cli\Filter::camel}} ($_GET['id']);
 
 echo $form->handle (function ($form) {
 	// Update the {{appname}} 
@@ -23,7 +23,7 @@
 	if (${{appname}}->error) {
 		// Failed to save
 		error_log ('Error updating {{appname}}: ' . DB::error ());
-		$form->controller->add_notification (__ ('Unable to save {{appname}}.'));
+		$form->controller->add_notification (__ ('Unable to save {{appname|cli\Filter::spaces}}.'));
 		return false;
 	}
 
@@ -31,8 +31,6 @@
 	Versions::add (${{appname}});
 
 	// Notify the user and redirect on success
-	$form->controller->add_notification (__ ('{{appname|ucfirst}} saved.'));
+	$form->controller->add_notification (__ ('{{appname|cli\Filter::label}} saved.'));
 	$form->controller->redirect ('/{{plural}}/admin');
 });
-
-{{close_tag|none}}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/edit_view.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/edit_view.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/edit_view.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/edit_view.html	2015-09-05 21:13:59.000000000 -0500
@@ -5,7 +5,11 @@
 {% inc cli/crud-app/types/[field->type] %}
 {% end %}
 
-<p><input type="submit" value="\{"Save {{appname|ucfirst}}"}" /></p>
+<p>
+	<input type="submit" value="\{"Save {{appname|cli\Filter::title}}"}" />
+	&nbsp;
+	<a href="/{{plural}}/admin" onclick="return confirm ('\{"Are you sure you want to cancel and lose any changes?"}')">\{"Cancel"}</a>
+</p>
 
 </form>
 </div>
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/index_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/index_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/index_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/index_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,5 @@
 {{open_tag|none}}
 
 
-$page->title = __ ('{{plural|ucfirst}} home');
+$page->title = __ ('{{plural|cli\Filter::title}} home');
 echo $tpl->render ('{{plural}}/index', array ());
-
-{{close_tag|none}}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/index_view.html and elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/index_view.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/install_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/install_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/install_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/install_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -57,5 +57,3 @@
 $this->mark_installed ($this->app, $version);
 
 printf ('<p><a href="/%s/admin">%s</a></p>', $this->app, __ ('Done.'));
-
-{{close_tag|none}}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/install_mysql.html and elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/install_mysql.html are identical
Files elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/install_pgsql.html and elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/install_pgsql.html are identical
Files elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/install_sqlite.html and elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/install_sqlite.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/model.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/model.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/model.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/model.html	2015-09-05 21:13:59.000000000 -0500
@@ -3,9 +3,7 @@
 
 namespace {{plural}};
 
-class {{appname|ucfirst}} extends \Model {
+class {{appname|cli\Filter::camel}} extends \Model {
 	public $table = '#prefix#{{plural}}';
 	public $key = '{{pkey}}';
 }
-
-{{close_tag|none}}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/checkbox.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/checkbox.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/checkbox.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/checkbox.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,5 @@
 <p>
-	\{"{{field->name|ucfirst}}"}: <span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name}}."}</span>
+	\{"{{field->name|cli\Filter::label}}"}: <span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name|cli\Filter::spaces}}."}</span>
 \{% for _key, _value in array () %}
 	<br />
 	<label>
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/date.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/date.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/date.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/date.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,8 @@
 \{! admin/util/datewidget !}
 
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<input type="text" name="{{field->name}}" class="datewidget-date" value="\{{ {{field->name}}|quotes }}" />
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/datetime.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/datetime.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/datetime.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/datetime.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,8 @@
 \{! admin/util/datewidget !}
 
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<input type="text" name="{{field->name}}" class="datewidget-datetime" value="\{{ {{field->name}}|quotes }}" />
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/email.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/email.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/email.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/email.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,6 +1,6 @@
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<input type="{{field->type}}" name="{{field->name}}" value="\{{ {{field->name}}|quotes }}" />
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/password.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/password.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/password.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/password.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,6 +1,6 @@
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<input type="{{field->type}}" name="{{field->name}}" value="\{{ {{field->name}}|quotes }}" />
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
Files elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/pkey.html and elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/pkey.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/radio.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/radio.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/radio.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/radio.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,5 @@
 <p>
-	\{"{{field->name|ucfirst}}"}: <span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name}}."}</span>
+	\{"{{field->name|cli\Filter::label}}"}: <span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name|cli\Filter::spaces}}."}</span>
 \{% for _key, _value in array () %}
 	<br />
 	<label>
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/select.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/select.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/select.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/select.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,11 +1,11 @@
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<select name="{{field->name}}">
 		<option value="">- select -</option>
 \{% for _key, _value in array () %}
 		<option value="\{{_key|quotes}}"\{% if _key == $data->{{field->name}} %} selected\{% end %}>\{{_value}}</option>
 \{% end %}
 	</select>
-	<span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/text.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/text.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/text.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/text.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,6 +1,6 @@
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<input type="{{field->type}}" name="{{field->name}}" value="\{{ {{field->name}}|quotes }}" />
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/textarea.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/textarea.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/textarea.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/textarea.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,6 +1,6 @@
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<textarea name="{{field->name}}" cols="60" rows="4">\{{ {{field->name}} }}</textarea>
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/time.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/time.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/time.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/time.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,5 @@
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<select name="{{field->name}}">
 		<option value="">- select -</option>
 		<option value="00:00:00"\{% if {{field->name}} == '00:00:00' %} selected\{% end %}>12:00am</option>
@@ -51,6 +51,6 @@
 		<option value="23:00:00"\{% if {{field->name}} == '23:00:00' %} selected\{% end %}>11:00pm</option>
 		<option value="23:30:00"\{% if {{field->name}} == '23:30:00' %} selected\{% end %}>11:30pm</option>
 	</select>
-	<span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please choose a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/wysiwyg.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/wysiwyg.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/types/wysiwyg.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/types/wysiwyg.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,7 @@
 \{! admin/util/wysiwyg?field_id={{field->name}}-wysiwyg !}
 <p>
-	\{"{{field->name|ucfirst}}"}:<br />
+	\{"{{field->name|cli\Filter::label}}"}:<br />
 	<textarea name="{{field->name}}" id="{{field->name}}-wysiwyg" rows="4" cols="60">\{{ {{field->name}} }}</textarea>
-	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name}}."}</span>
+	<span class="notice" id="{{field->name}}-notice">\{"Please enter a {{field->name|cli\Filter::spaces}}."}</span>
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/upgrade_handler.html elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/upgrade_handler.html
--- elefant-elefant_1_3_10_beta/apps/cli/views/crud-app/upgrade_handler.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/cli/views/crud-app/upgrade_handler.html	2015-09-05 21:13:59.000000000 -0500
@@ -63,5 +63,3 @@
 $this->mark_installed ($this->app, $version);
 
 printf ('<p><a href="/%s/admin">%s</a></p>', $this->app, __ ('Done.'));
-
-{{close_tag|none}}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/designer/conf/acl.php and elefant-elefant_1_3_11_rc/apps/designer/conf/acl.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/conf/config.php and elefant-elefant_1_3_11_rc/apps/designer/conf/config.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/css/add_layout.css and elefant-elefant_1_3_11_rc/apps/designer/css/add_layout.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/css/add_stylesheet.css and elefant-elefant_1_3_11_rc/apps/designer/css/add_stylesheet.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/css/edit_layout.css and elefant-elefant_1_3_11_rc/apps/designer/css/edit_layout.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/css/edit_stylesheet.css and elefant-elefant_1_3_11_rc/apps/designer/css/edit_stylesheet.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/forms/addlayout.php and elefant-elefant_1_3_11_rc/apps/designer/forms/addlayout.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/forms/addstylesheet.php and elefant-elefant_1_3_11_rc/apps/designer/forms/addstylesheet.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/forms/editlayout.php and elefant-elefant_1_3_11_rc/apps/designer/forms/editlayout.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/forms/editstylesheet.php and elefant-elefant_1_3_11_rc/apps/designer/forms/editstylesheet.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/forms/installer.php and elefant-elefant_1_3_11_rc/apps/designer/forms/installer.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/add/layout.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/add/layout.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/add/stylesheet.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/add/stylesheet.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/bgsave.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/bgsave.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/csspreview.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/csspreview.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/delete.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/delete.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/edit/layout.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/edit/layout.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/edit/stylesheet.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/edit/stylesheet.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/index.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/index.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/installer.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/installer.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/makedefault.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/makedefault.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/handlers/preview.php and elefant-elefant_1_3_11_rc/apps/designer/handlers/preview.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/CONTRIBUTING.md and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/CONTRIBUTING.md are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/README.md and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/README.md are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/comment/comment.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/comment/comment.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/dialog/dialog.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/dialog/dialog.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/dialog/dialog.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/dialog/dialog.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/display/placeholder.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/display/placeholder.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/edit/closebrackets.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/edit/closebrackets.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/edit/closetag.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/edit/closetag.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/edit/continuecomment.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/edit/continuecomment.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/edit/continuelist.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/edit/continuelist.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/edit/matchbrackets.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/edit/matchbrackets.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/edit/trailingspace.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/edit/trailingspace.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/fold/brace-fold.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/fold/brace-fold.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/fold/foldcode.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/fold/foldcode.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/fold/indent-fold.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/fold/indent-fold.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/fold/xml-fold.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/fold/xml-fold.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/html-hint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/html-hint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/javascript-hint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/javascript-hint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/pig-hint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/pig-hint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/python-hint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/python-hint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/show-hint.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/show-hint.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/show-hint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/show-hint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/hint/xml-hint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/hint/xml-hint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/lint/coffeescript-lint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/lint/coffeescript-lint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/lint/javascript-lint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/lint/javascript-lint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/lint/json-lint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/lint/json-lint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/lint/lint.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/lint/lint.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/lint/lint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/lint/lint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/merge/dep/diff_match_patch.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/merge/dep/diff_match_patch.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/merge/merge.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/merge/merge.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/merge/merge.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/merge/merge.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/mode/loadmode.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/mode/loadmode.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/mode/multiplex.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/mode/multiplex.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/mode/multiplex_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/mode/multiplex_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/mode/overlay.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/mode/overlay.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/runmode/colorize.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/runmode/colorize.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/runmode/runmode-standalone.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/runmode/runmode-standalone.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/runmode/runmode.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/runmode/runmode.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/runmode/runmode.node.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/runmode/runmode.node.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/search/match-highlighter.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/search/match-highlighter.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/search/search.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/search/search.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/search/searchcursor.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/search/searchcursor.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/selection/active-line.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/selection/active-line.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/addon/selection/mark-selection.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/addon/selection/mark-selection.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/bin/compress and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/bin/compress are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/bin/lint and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/bin/lint are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/bin/source-highlight and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/bin/source-highlight are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/bower.json and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/bower.json are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/compress.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/compress.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/css/baboon.png and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/css/baboon.png are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/css/baboon_vector.svg and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/css/baboon_vector.svg are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/css/docs.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/css/docs.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/activeline.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/activeline.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/bidi.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/bidi.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/btree.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/btree.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/buffers.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/buffers.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/changemode.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/changemode.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/closebrackets.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/closebrackets.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/closetag.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/closetag.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/complete.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/complete.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/emacs.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/emacs.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/folding.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/folding.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/fullscreen.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/fullscreen.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/html5complete.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/html5complete.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/indentwrap.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/indentwrap.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/lint.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/lint.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/loadmode.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/loadmode.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/marker.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/marker.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/markselection.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/markselection.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/matchhighlighter.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/matchhighlighter.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/merge.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/merge.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/multiplex.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/multiplex.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/mustache.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/mustache.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/placeholder.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/placeholder.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/preview.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/preview.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/resize.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/resize.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/runmode.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/runmode.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/search.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/search.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/spanaffectswrapping_shim.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/spanaffectswrapping_shim.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/theme.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/theme.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/trailingspace.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/trailingspace.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/variableheight.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/variableheight.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/vim.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/vim.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/visibletabs.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/visibletabs.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/widget.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/widget.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/demo/xmlcomplete.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/demo/xmlcomplete.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/baboon.png and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/baboon.png are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/baboon_vector.svg and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/baboon_vector.svg are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/compress.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/compress.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/docs.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/docs.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/internals.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/internals.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/manual.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/manual.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/modes.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/modes.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/oldrelease.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/oldrelease.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/realworld.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/realworld.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/reporting.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/reporting.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/upgrade_v2.2.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/upgrade_v2.2.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/doc/upgrade_v3.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/doc/upgrade_v3.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/internals.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/internals.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/keymap/emacs.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/keymap/emacs.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/keymap/extra.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/keymap/extra.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/keymap/vim.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/keymap/vim.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/lib/codemirror.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/lib/codemirror.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/lib/codemirror.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/lib/codemirror.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/manual.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/manual.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/apl/apl.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/apl/apl.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/apl/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/apl/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/asterisk/asterisk.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/asterisk/asterisk.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/asterisk/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/asterisk/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/clike/clike.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/clike/clike.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/clike/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/clike/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/clike/scala.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/clike/scala.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/clojure/clojure.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/clojure/clojure.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/clojure/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/clojure/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/cobol/cobol.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/cobol/cobol.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/cobol/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/cobol/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/coffeescript/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/coffeescript/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/coffeescript/coffeescript.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/coffeescript/coffeescript.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/coffeescript/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/coffeescript/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/commonlisp/commonlisp.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/commonlisp/commonlisp.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/commonlisp/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/commonlisp/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/css/css.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/css/css.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/css/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/css/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/css/scss.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/css/scss.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/css/scss_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/css/scss_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/css/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/css/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/d/d.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/d/d.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/d/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/d/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/diff/diff.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/diff/diff.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/diff/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/diff/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ecl/ecl.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ecl/ecl.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ecl/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ecl/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/erlang/erlang.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/erlang/erlang.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/erlang/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/erlang/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/gas/gas.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/gas/gas.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/gas/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/gas/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/gfm/gfm.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/gfm/gfm.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/gfm/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/gfm/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/gfm/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/gfm/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/go/go.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/go/go.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/go/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/go/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/groovy/groovy.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/groovy/groovy.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/groovy/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/groovy/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haml/haml.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haml/haml.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haml/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haml/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haml/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haml/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haskell/haskell.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haskell/haskell.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haskell/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haskell/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haxe/haxe.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haxe/haxe.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/haxe/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/haxe/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/htmlembedded/htmlembedded.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/htmlembedded/htmlembedded.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/htmlembedded/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/htmlembedded/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/htmlmixed/htmlmixed.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/htmlmixed/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/htmlmixed/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/http/http.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/http/http.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/http/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/http/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/javascript/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/javascript/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/javascript/javascript.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/javascript/javascript.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/javascript/typescript.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/javascript/typescript.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/jinja2/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/jinja2/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/jinja2/jinja2.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/jinja2/jinja2.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/less/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/less/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/less/less.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/less/less.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/livescript/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/livescript/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/livescript/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/livescript/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/livescript/livescript.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/livescript/livescript.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/livescript/livescript.ls and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/livescript/livescript.ls are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/lua/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/lua/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/lua/lua.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/lua/lua.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/markdown/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/markdown/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/markdown/markdown.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/markdown/markdown.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/markdown/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/markdown/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/meta.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/meta.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/mirc/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/mirc/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/mirc/mirc.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/mirc/mirc.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ntriples/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ntriples/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ntriples/ntriples.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ntriples/ntriples.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ocaml/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ocaml/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ocaml/ocaml.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ocaml/ocaml.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/pascal/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/pascal/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/pascal/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/pascal/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/pascal/pascal.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/pascal/pascal.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/perl/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/perl/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/perl/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/perl/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/perl/perl.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/perl/perl.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/php/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/php/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/php/php.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/php/php.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/pig/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/pig/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/pig/pig.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/pig/pig.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/properties/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/properties/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/properties/properties.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/properties/properties.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/python/LICENSE.txt and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/python/LICENSE.txt are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/python/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/python/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/python/python.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/python/python.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/q/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/q/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/q/q.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/q/q.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/r/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/r/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/r/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/r/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/r/r.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/r/r.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rpm/changes/changes.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rpm/changes/changes.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rpm/changes/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rpm/changes/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rpm/spec/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rpm/spec/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rpm/spec/spec.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rpm/spec/spec.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rpm/spec/spec.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rpm/spec/spec.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rst/LICENSE.txt and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rst/LICENSE.txt are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rst/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rst/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rst/rst.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rst/rst.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ruby/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ruby/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ruby/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ruby/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/ruby/ruby.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/ruby/ruby.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rust/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rust/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/rust/rust.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/rust/rust.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sass/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sass/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sass/sass.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sass/sass.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/scheme/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/scheme/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/scheme/scheme.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/scheme/scheme.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/shell/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/shell/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/shell/shell.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/shell/shell.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sieve/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sieve/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sieve/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sieve/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sieve/sieve.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sieve/sieve.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/smalltalk/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/smalltalk/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/smalltalk/smalltalk.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/smalltalk/smalltalk.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/smarty/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/smarty/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/smarty/smarty.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/smarty/smarty.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sparql/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sparql/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sparql/sparql.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sparql/sparql.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sql/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sql/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/sql/sql.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/sql/sql.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/stex/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/stex/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/stex/stex.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/stex/stex.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/stex/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/stex/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tcl/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tcl/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tcl/tcl.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tcl/tcl.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tiddlywiki/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tiddlywiki/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tiddlywiki/tiddlywiki.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tiki/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tiki/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tiki/tiki.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tiki/tiki.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/tiki/tiki.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/tiki/tiki.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/turtle/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/turtle/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/turtle/turtle.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/turtle/turtle.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/vb/LICENSE.txt and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/vb/LICENSE.txt are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/vb/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/vb/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/vb/vb.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/vb/vb.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/vbscript/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/vbscript/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/vbscript/vbscript.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/vbscript/vbscript.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/velocity/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/velocity/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/velocity/velocity.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/velocity/velocity.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/verilog/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/verilog/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/verilog/verilog.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/verilog/verilog.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/xml/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/xml/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/xml/xml.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/xml/xml.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/xquery/LICENSE and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/xquery/LICENSE are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/xquery/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/xquery/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/xquery/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/xquery/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/xquery/xquery.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/xquery/xquery.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/yaml/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/yaml/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/yaml/yaml.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/yaml/yaml.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/z80/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/z80/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/mode/z80/z80.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/mode/z80/z80.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/oldrelease.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/oldrelease.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/package.json and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/package.json are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/comment_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/comment_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/doc_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/doc_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/driver.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/driver.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/emacs_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/emacs_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/index.html and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/lint/acorn.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/lint/acorn.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/lint/lint.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/lint/lint.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/lint/parse-js.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/lint/parse-js.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/lint/walk.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/lint/walk.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/mode_test.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/mode_test.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/mode_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/mode_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/phantom_driver.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/phantom_driver.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/run.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/run.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/test/vim_test.js and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/test/vim_test.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/ambiance-mobile.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/ambiance-mobile.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/ambiance.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/ambiance.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/blackboard.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/blackboard.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/cobalt.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/cobalt.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/eclipse.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/eclipse.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/elegant.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/elegant.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/erlang-dark.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/erlang-dark.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/lesser-dark.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/lesser-dark.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/midnight.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/midnight.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/monokai.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/monokai.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/neat.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/neat.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/night.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/night.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/rubyblue.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/rubyblue.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/solarized.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/solarized.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/twilight.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/twilight.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/vibrant-ink.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/vibrant-ink.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/xq-dark.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/xq-dark.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/codemirror/theme/xq-light.css and elefant-elefant_1_3_11_rc/apps/designer/js/codemirror/theme/xq-light.css are identical
Files elefant-elefant_1_3_10_beta/apps/designer/js/jquery.bindWithDelay.js and elefant-elefant_1_3_11_rc/apps/designer/js/jquery.bindWithDelay.js are identical
Files elefant-elefant_1_3_10_beta/apps/designer/lib/Functions.php and elefant-elefant_1_3_11_rc/apps/designer/lib/Functions.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/designer/lib/GithubFetcher.php elefant-elefant_1_3_11_rc/apps/designer/lib/GithubFetcher.php
--- elefant-elefant_1_3_10_beta/apps/designer/lib/GithubFetcher.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/designer/lib/GithubFetcher.php	2015-09-05 21:13:59.000000000 -0500
@@ -71,6 +71,7 @@
 			curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
 			curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
 			curl_setopt ($ch, CURLOPT_URL, $url);
+			curl_setproxy ($ch, $url);
 			$res = curl_exec ($ch);
 			curl_close ($ch);
 			return $res;
Files elefant-elefant_1_3_10_beta/apps/designer/lib/GithubInstaller.php and elefant-elefant_1_3_11_rc/apps/designer/lib/GithubInstaller.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/lib/Installer.php and elefant-elefant_1_3_11_rc/apps/designer/lib/Installer.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/lib/PclZip.php and elefant-elefant_1_3_11_rc/apps/designer/lib/PclZip.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/designer/lib/ZipInstaller.php elefant-elefant_1_3_11_rc/apps/designer/lib/ZipInstaller.php
--- elefant-elefant_1_3_10_beta/apps/designer/lib/ZipInstaller.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/designer/lib/ZipInstaller.php	2015-09-05 21:13:59.000000000 -0500
@@ -91,6 +91,7 @@
 			curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
 			curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
 			curl_setopt ($ch, CURLOPT_URL, $url);
+			curl_setproxy ($ch, $url);
 			$res = curl_exec ($ch);
 			curl_close ($ch);
 		} else {
Files elefant-elefant_1_3_10_beta/apps/designer/lib/Zipper.php and elefant-elefant_1_3_11_rc/apps/designer/lib/Zipper.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/tests/GithubFetcherTest.php and elefant-elefant_1_3_11_rc/apps/designer/tests/GithubFetcherTest.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/tests/ZipperTest.php and elefant-elefant_1_3_11_rc/apps/designer/tests/ZipperTest.php are identical
Files elefant-elefant_1_3_10_beta/apps/designer/views/add/layout.html and elefant-elefant_1_3_11_rc/apps/designer/views/add/layout.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/views/add/stylesheet.html and elefant-elefant_1_3_11_rc/apps/designer/views/add/stylesheet.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/designer/views/edit/layout.html elefant-elefant_1_3_11_rc/apps/designer/views/edit/layout.html
--- elefant-elefant_1_3_10_beta/apps/designer/views/edit/layout.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/designer/views/edit/layout.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,7 @@
 <p class="autosave-notice">{"Auto-saved data found."} <a href="#" class="autosave-restore">{"Click to restore."}</a></p>
 
 <form method="POST" id="edit-form">
-<p style="text-align: right; margin-bottom: -10px; margin-top: -20px">
+<p style="text-align: right; margin-bottom: 2px; margin-top: -20px">
 	<span class="notice" id="body-notice">&nbsp; {"You must enter body content."}</span>
 	<span id="bgsave-status"></span>
 	<input type="submit" value="{"Save Layout"}" class="autosave-clear" />&nbsp;
@@ -73,7 +73,7 @@
 	{% end %}
 
 	// increase editor and preview height if window is tall enough
-	$('.CodeMirror').height ($(window).height () / 2 - 45);
+	$('.CodeMirror').height ($(window).height () / 2 - 65);
 	$('#preview').height ($(window).height () / 2 - 65);
 	$('html,body').css ({overflow: 'hidden'});
 
Files elefant-elefant_1_3_10_beta/apps/designer/views/edit/stylesheet.html and elefant-elefant_1_3_11_rc/apps/designer/views/edit/stylesheet.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/views/index.html and elefant-elefant_1_3_11_rc/apps/designer/views/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/views/installed.html and elefant-elefant_1_3_11_rc/apps/designer/views/installed.html are identical
Files elefant-elefant_1_3_10_beta/apps/designer/views/installer.html and elefant-elefant_1_3_11_rc/apps/designer/views/installer.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/conf/acl.php and elefant-elefant_1_3_11_rc/apps/filemanager/conf/acl.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/conf/config.php and elefant-elefant_1_3_11_rc/apps/filemanager/conf/config.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/conf/embed.php elefant-elefant_1_3_11_rc/apps/filemanager/conf/embed.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/conf/embed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/conf/embed.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,6 +4,7 @@
 
 label = "Images: Editable Photo"
 icon = picture-o
+acl = filemanager
 
 key[type] = hidden
 key[filter] = "Image::generate_key"
@@ -16,6 +17,9 @@
 height[type] = text
 height[initial] = 200
 
+link[label] = "Link (optional)"
+link[type] = text
+
 [filemanager/slideshow]
 
 label = "Images: Slideshow"
@@ -31,8 +35,11 @@
 autoplay[require] = "apps/filemanager/lib/Functions.php"
 autoplay[callback] = "filemanager_yes_no"
 
-dimensions[label] = "Dimensions (format: WIDTHxHEIGHT)"
-dimensions[type] = text
+speed[label] = "Transition Speed (milliseconds)"
+speed[type] = text
+
+ratio[label] = "Ratio (format: WIDTH:HEIGHT)"
+ratio[type] = text
 
 [filemanager/gallery]
 
@@ -61,24 +68,27 @@
 
 [filemanager/audio]
 
-label = "Embedded Audio (MP3)"
+label = "Audio Player (MP3)"
 icon = headphones
+acl = filemanager
 
 file[label] = MP3 Audio
 file[type] = file
 
 [filemanager/video]
 
-label = "Embedded Video (MP4)"
+label = "Video Player (MP4)"
 icon = video-camera
+acl = filemanager
 
 file[label] = MP4 Video
 file[type] = file
 
 [filemanager/swf]
 
-label = "Embedded Flash (SWF)"
-icon = "/apps/filemanager/css/icon-swf.png"
+label = "Flash Player (SWF)"
+icon = flash
+acl = filemanager
 
 file[label] = SWF Flash File
 file[type] = file
Files elefant-elefant_1_3_10_beta/apps/filemanager/conf/helpers.php and elefant-elefant_1_3_11_rc/apps/filemanager/conf/helpers.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/colorbox/colorbox.css and elefant-elefant_1_3_11_rc/apps/filemanager/css/colorbox/colorbox.css are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/colorbox/controls.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/colorbox/controls.png are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/colorbox/loading.gif and elefant-elefant_1_3_11_rc/apps/filemanager/css/colorbox/loading.gif are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/current.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/current.png are identical
Binary files elefant-elefant_1_3_10_beta/apps/filemanager/css/cycle2/next.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/cycle2/next.png differ
Binary files elefant-elefant_1_3_10_beta/apps/filemanager/css/cycle2/prev.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/cycle2/prev.png differ
Binary files elefant-elefant_1_3_10_beta/apps/filemanager/css/cycle2/spinner.gif and elefant-elefant_1_3_11_rc/apps/filemanager/css/cycle2/spinner.gif differ
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/css/cycle2.css elefant-elefant_1_3_11_rc/apps/filemanager/css/cycle2.css
--- elefant-elefant_1_3_10_beta/apps/filemanager/css/cycle2.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/css/cycle2.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,102 @@
+.slideshow-nav
+{
+    position: absolute;
+    right: 0;
+}
+.cycle-slideshow
+{
+    min-width: 480px;
+    position: relative;
+    background: url(/apps/filemanager/css/cycle2/spinner.gif) 50% 50% no-repeat;
+    width: 100%;
+    max-width: 100%;
+    height: 100%;
+    margin: 0;
+    padding: 0;
+    overflow: hidden;
+}
+.cycle-slideshow IMG
+{
+    position: absolute;
+    top: 0;
+    left: 0;
+    padding: 0;
+    display: block;
+    /* forced big images */
+    width: 2000px;
+    height: 1500px;
+    /* height drives width */
+    width: auto;
+    height: 100%;
+    /* width drives height */
+    width: 100%;
+    height: auto;
+    /* fill screen and maintain aspect ratio */
+    width: auto;
+    height: auto;
+    min-width: 100%;
+    min-height: 100%;
+    /*overflow: hidden;*/
+}
+.cycle-slideshow IMG:first-child
+{
+    position: static;
+    z-index: 100;
+}
+.cycle-overlay
+{
+    /*font-family: tahoma, arial;*/
+    position: absolute;
+    right: 0;
+    width: 30%;
+    z-index: 600;
+    background: black;
+    color: white;
+    padding: 15px;
+    opacity: 0.5;
+}
+.cycle-prev, .cycle-next
+{
+    position: absolute;
+    top: 0;
+    width: 30%;
+    opacity: 0;
+    filter: alpha(opacity=0);
+    z-index: 800;
+    height: 100%;
+    cursor: pointer;
+}
+.cycle-prev
+{
+    left: 0;
+    background: url(/apps/filemanager/css/cycle2/prev.png) 25% 50% no-repeat;
+}
+.cycle-next
+{
+    right: 0;
+    background: url(/apps/filemanager/css/cycle2/next.png) 75% 50% no-repeat;
+}
+.cycle-prev:hover, .cycle-next:hover
+{
+    opacity: 0.5;
+    filter: alpha(opacity=50);
+}
+.disabled
+{
+    opacity: 0.5;
+    filter: alpha(opacity=50);
+}
+.cycle-paused:after
+{
+    content: attr(data-paused-text);
+    color: white;
+    background: black;
+    padding: 10px;
+    z-index: 500;
+    position: absolute;
+    top: 0;
+    left: 0;
+    border-radius: 0;
+    opacity: 0.5;
+    filter: alpha(opacity=50);
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/css/filebrowser.css elefant-elefant_1_3_11_rc/apps/filemanager/css/filebrowser.css
--- elefant-elefant_1_3_10_beta/apps/filemanager/css/filebrowser.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/css/filebrowser.css	2015-09-05 21:13:59.000000000 -0500
@@ -84,3 +84,15 @@
 	border-collapse: collapse;
 	border: 2px solid #B347AF;
 }
+
+@media (max-width: 480px) {
+	#filebrowser-upload {
+		float: none;
+		margin-bottom: 8px;
+	}
+	
+	#filebrowser-col-a,
+	#filebrowser-col-b {
+		width: 97%;
+	}
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/css/filemanager.css elefant-elefant_1_3_11_rc/apps/filemanager/css/filemanager.css
--- elefant-elefant_1_3_10_beta/apps/filemanager/css/filemanager.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/css/filemanager.css	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
 	height: 100%;
 	border: 2px dashed #e5e5e5;
 	margin: -8px 0px -8px 0px;
-	padding: 16px 0px 6px 16px;
+	padding: 16px 0px 16px 16px;
 }
 
 	#filemanager-dropzone form, #filemanager-dropzone p {
@@ -20,7 +20,7 @@
 		color: #e5e5e5;
 		font-size: 48px;
 		float: right;
-		margin-top: -62px;
+		margin-top: -46px;
 		padding-right: 16px;
 	}
 
@@ -85,3 +85,11 @@
 	background-color: #fefefe;
 	z-index: 1000;
 }
+
+#avpw_fullscreen_bg {
+	z-index: 100001 !important;
+}
+
+.avpw_is_fullscreen #avpw_controls {
+	z-index: 100002 !important;
+}
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/gallery.css and elefant-elefant_1_3_11_rc/apps/filemanager/css/gallery.css are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/gallery_embedded.css and elefant-elefant_1_3_11_rc/apps/filemanager/css/gallery_embedded.css are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/icon-swf.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/icon-swf.png are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/mediaelement/background.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/mediaelement/background.png are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/mediaelement/bigplay.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/mediaelement/bigplay.png are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/mediaelement/controls.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/mediaelement/controls.png are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/mediaelement/loading.gif and elefant-elefant_1_3_11_rc/apps/filemanager/css/mediaelement/loading.gif are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/mediaelement/mediaelementplayer.css and elefant-elefant_1_3_11_rc/apps/filemanager/css/mediaelement/mediaelementplayer.css are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/multi-file.css and elefant-elefant_1_3_11_rc/apps/filemanager/css/multi-file.css are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/multi-image.css and elefant-elefant_1_3_11_rc/apps/filemanager/css/multi-image.css are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/css/notcurrent.png and elefant-elefant_1_3_11_rc/apps/filemanager/css/notcurrent.png are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/api.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/api.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/audio.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/audio.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/audio.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/audio.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,24 @@
 <?php
 
 /**
- * Audio file embed handler. Used by the file manager in the WYSIWYG
- * editor when it recognizes an MP3 audio file being embedded.
+ * Embeds an audio player.
+ *
+ * Used by the file manager in the WYSIWYG editor when it recognizes an MP3
+ * audio file being embedded.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('filemanager/audio', array ('file' => 'my-song.mp3'));
+ *
+ * In a template, call it like this:
+ *
+ *     {! filemanager/audio?file=my-song.mp3 !}
+ *
+ * Parameters:
+ *
+ * - `file` - The MP3 file to play
+ *
+ * Also available in the dynamic objects menu as "Audio Player (MP3)".
  */
 
 if (! isset (self::$called['filemanager/mediaelement'])) {
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/edit/img.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/edit/img.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/edit.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/embed.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/embed.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/gallery.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/gallery.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/gallery.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/gallery.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,9 +1,10 @@
 <?php
 
 /**
- * Photo gallery embed handler. Creates a gallery of the images
- * from the specified folder. Used by the WYSIWYG editor's dynamic
- * objects menu, or manually via:
+ * Embeds a photo gallery.
+ *
+ * Creates a gallery of the images from the specified folder. Used by the
+ * WYSIWYG editor's dynamic objects menu, or manually via:
  *
  *     {! filemanager/gallery?path=foldername !}
  *
@@ -18,6 +19,8 @@
  * by the `filemanager_path` option in your config file.
  * `filelist` can either be an array or a string with each file path delimited
  * by `|`.
+ *
+ * Also available in the dynamic objects menu as "Images: Gallery".
  */
 
 require_once ('apps/filemanager/lib/Functions.php');
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/index.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/index.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -41,7 +41,7 @@
 }
 
 if ($appconf['General']['aviary_key']) {
-	$page->add_script ('http://feather.aviary.com/js/feather.js');
+	$page->add_script ('https://dme0ih8comzn4.cloudfront.net/imaging/v1/editor.js');
 	$o->aviary_key = $appconf['General']['aviary_key'];
 } else {
 	$o->aviary_key = false;
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/mediaelement.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/mediaelement.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/photo.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/photo.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/photo.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/photo.php	2015-09-05 21:13:59.000000000 -0500
@@ -11,12 +11,12 @@
  *
  * Options:
  *
- * - key:     A unique ID for the photo spot (alphanumeric, no spaces).
- * - width:   The width of the photo spot (default: 300).
- * - height:  The height of the photo spot (default: 200).
- * - alt:     Text for the alt attribute.
- * - class:   Class name(s) for the class attribute.
- * - default: The path to a default photo, otherwise a placehold.it image is used.
+ * - `key`     - A unique ID for the photo spot (alphanumeric, no spaces).
+ * - `width`   - The width of the photo spot (default = 300).
+ * - `height`  - The height of the photo spot (default = 200).
+ * - `alt`     - Text for the alt attribute.
+ * - `class`   - Class name(s) for the class attribute.
+ * - `default` - The path to a default photo, otherwise a placehold.it image is used.
  */
 
 if (! $this->internal) {
@@ -44,9 +44,13 @@
 
 if (! $this->internal) {
 	if (isset ($data['photo'])) {
-		$photo = preg_replace ('|^/files/|', '', $data['photo']);
-		if (! FileManager::verify_file ($photo)) {
+		if (! preg_match ('|^/files/|', $data['photo'])) {
 			$data['photo'] = null;
+		} else {
+			$photo = preg_replace ('|^/files/|', '', $data['photo']);
+			if (! FileManager::verify_file ($photo)) {
+				$data['photo'] = null;
+			}
 		}
 	} else {
 		$data['photo'] = null;
@@ -55,6 +59,11 @@
 
 $data['photo'] = Image::for_key ($data['key'], $data['photo']);
 
+if ((! isset ($data['link']) || ! $data['link'] || $data['link'] === '') && $data['photo'] !== null) {
+	$photo = preg_replace ('|^/files/|', '', $data['photo']);
+	$data['link'] = FileManager::prop ($photo, 'link');
+}
+
 if ($data['photo']) {
 	$data['src'] = '/' . Image::resize ($data['photo'], $data['width'], $data['height'], 'cover', 'ext');
 } elseif (isset ($data['default'])) {
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/properties.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/properties.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/properties.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/properties.php	2015-09-05 21:13:59.000000000 -0500
@@ -16,7 +16,8 @@
 		'filemanager/properties',
 		array (
 			'file' => $file,
-			'desc' => FileManager::prop ($file, 'desc')
+			'desc' => FileManager::prop ($file, 'desc'),
+			'link' => FileManager::prop ($file, 'link')
 		)
 	)
 );
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/proxy.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/proxy.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/redactor/images.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/redactor/images.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/redactor/upload.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/redactor/upload.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/settings.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/settings.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/slideshow.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/slideshow.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/slideshow.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/slideshow.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,16 +1,17 @@
 <?php
 
 /**
- * Slideshow embed handler. Creates a slideshow of the images from the
- * specified folder. Used by the WYSIWYG editor's dynamic objects menu,
- * or manually via:
+ * Creates a slideshow of the images from the specified folder.
+ *
+ * Found in the WYSIWYG editor's dynamic objects menu as "Images: Slideshow",
+ * or add this to a template:
  *
  *     {! filemanager/slideshow?path=foldername !}
  *
  * The `foldername` is a folder of images inside `/files/` or the directory set
  * by the 'filemanager_path' option in your config file.
  *
- *  * Alternatively, it can be used via:
+ *  * Alternatively, it can be used via this template tag:
  *
  *      {! filemanager/slideshow?files=filelist&name=idsuffix !}
  *
@@ -20,10 +21,13 @@
  * by `|` or a glob pattern like 'stuff/*_light.jpg'.
  * `idsuffix` will be appended to the CSS id of the slideshow.
  *
- * To limit the photo dimensions to a certain size, add a `dimensions`
- * parameter in the form `WIDTHxHEIGH`, for example:
+ * To set the transition speed in milliseconds add a `speed`
+ * parameter in the form `SPEED`
+ *
+ * To set the photo ratio, add a `ratio`
+ * parameter in the form `WIDTH:HEIGH`, for example:
  *
- *     {! filemanager/slideshow?path=foldername&dimensions=500x300 !}
+ *     {! filemanager/slideshow?path=foldername&ratio=4:3&speed=1500 !}
  *
  * Note that this will also reorient photos that have been uploaded from
  * devices that don't automatically correct the photo orientation, based
@@ -102,17 +106,24 @@
 	return;
 }
 
-if (isset ($data['dimensions']) && strpos ($data['dimensions'], 'x')) {
-	list ($width, $height) = explode ('x', $data['dimensions']);
-	$width = (int) $width;
-	$height = (int) $height;
-	$files = array_map (
-		function ($file) use ($width, $height) {
-			Image::reorient ($file);
-			return Image::resize ($file, $width, $height);
-		},
-		$files
-	);
+if (isset ($data['speed'])) {
+	$speed = $data['speed'];
+} else {
+	$speed = "2000";
+}
+
+// get links for each file
+$prop_files = array_map (function ($file) {
+	return preg_replace ('/^files\//', '', $file);
+}, $files);
+$prop_links = FileManager::prop ($prop_files, 'link');
+$links = array ();
+foreach ($prop_links as $f => $link) {
+	$links['files/' . $f] = $link;
+}
+
+if (isset ($data['ratio'])) {
+	$ratio = $data['ratio'];
 }
 
 // rewrite if proxy is set
@@ -122,12 +133,16 @@
 	}
 }
 
-$page->add_script ('/apps/filemanager/js/jquery.cycle.all.min.js');
+$page->add_style ('/apps/filemanager/css/cycle2.css');
+$page->add_script ('/apps/filemanager/js/jquery.cycle2.js');
 echo $tpl->render (
 	'filemanager/slideshow', 
 	array (
 		'files' => $files,
 		'name' => $name,
-		'timeout' => $timeout
+		'timeout' => $timeout,
+		'speed' => $speed,
+		'ratio' => $ratio,
+		'links' => $links
 	)
 );
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/swf.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/swf.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/swf.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/swf.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,24 @@
 <?php
 
 /**
- * Flash file embed handler. Used by the file manager in the WYSIWYG
- * editor when it recognizes an SWF file being embedded.
+ * Embeds a flash player.
+ *
+ * Used by the file manager in the WYSIWYG editor when it recognizes an
+ * SWF file being embedded.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('filemanager/swf', array ('file' => 'flash-file.swf'));
+ *
+ * In a template, call it like this:
+ *
+ *     {! filemanager/swf?file=flash-file.swf !}
+ *
+ * Parameters:
+ *
+ * - `file` - The SWF file to play
+ *
+ * Also available in the dynamic objects menu as "Flash Player (SWF)".
  */
 
 $data['div'] = preg_replace ('/[^a-zA-Z0-9-]+/', '-', trim ($data['file'], '/'));
Files elefant-elefant_1_3_10_beta/apps/filemanager/handlers/upgrade.php and elefant-elefant_1_3_11_rc/apps/filemanager/handlers/upgrade.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/upload/drop.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/upload/drop.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/upload/drop.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/upload/drop.php	2015-09-05 21:13:59.000000000 -0500
@@ -37,6 +37,11 @@
 	return;
 }
 
+if (preg_match ('/\.php$/i', $_FILES['file']['name'])) {
+	echo json_encode (array ('success' => false, 'error' => __ ('Cannot upload PHP files due to security.')));
+	return;
+}
+
 // some browsers may urlencode the file name
 $_FILES['file']['name'] = urldecode ($_FILES['file']['name']);
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/upload.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/upload.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/upload.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/upload.php	2015-09-05 21:13:59.000000000 -0500
@@ -55,6 +55,12 @@
 		echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
 		return;
 	}
+	if (preg_match ('/\.php$/i', $_FILES['file']['name'][$i])) {
+		$page->title = __ ('Invalid File Name') . ': ' . $_FILES['file']['name'][$i];
+		echo '<p>' . __ ('Cannot upload PHP files due to security.') . '</p>';
+		echo '<p><a href="/filemanager">' . __ ('Back') . '</a></p>';
+		return;
+	}
 }
 
 $count = 0;
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/util/browser.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/util/browser.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/util/browser.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/util/browser.php	2015-09-05 21:13:59.000000000 -0500
@@ -5,7 +5,7 @@
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run ('filemanager/util/browser');
  *
@@ -13,7 +13,7 @@
  *
  *      {! filemanager/util/browser !}
  *
- * 2. Use the $.filebrowser() function to open the dialog window:
+ * ### 2. Use the $.filebrowser() function to open the dialog window:
  *
  *      $.filebrowser ({
  *          allowed: ['jpg', 'jpeg', 'png', 'gif'],
@@ -27,14 +27,14 @@
  *
  * Options:
  *
- * - allowed:   An array of allowed file extensions.
- * - callback:  A function to call with the chosen file link.
- * - set_value: The selector of an input field to update with the
+ * - `allowed`   - An array of allowed file extensions.
+ * - `callback`  - A function to call with the chosen file link.
+ * - `set_value` - The selector of an input field to update with the
  *   chosen file link.
- * - thumbs:    Whether to show thumbnails instead of file names.
+ * - `thumbs`    - Whether to show thumbnails instead of file names.
  *   Note: also automatically sets allowed list to jpeg, png, and
  *   gif formats so you don't have to set allowed explicitly.
- * - title:     A custom title for the dialog window.
+ * - `title`     - A custom title for the dialog window.
  */
 
 echo $this->run ('admin/util/modal');
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/util/multi-file.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/util/multi-file.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/util/multi-file.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/util/multi-file.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,11 +2,11 @@
 
 /**
  * Provides a multi-file selector based on the file browser
- * from filemanager/util/browser.
+ * from [filemanager/util/browser](/helper/filemanager/util/browser).
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run ('filemanager/util/multi-file');
  *
@@ -14,7 +14,7 @@
  *
  *     {! filemanager/util/multi-file !}
  *
- * 2. Create the HTML elements for the input field and the
+ * ### 2. Create the HTML elements for the input field and the
  * preview area:
  *
  *     <p>
@@ -23,7 +23,7 @@
  *         <input type="hidden" name="files" id="files" />
  *     </p>
  *
- * 3. Use the $.multi_file() function to initialize the plugin:
+ * ### 3. Use the `$.multi_file()` function to initialize the plugin:
  *
  *     $.multi_image ({
  *         field: '#files',
@@ -37,8 +37,8 @@
  *
  * Options:
  *
- * - field:   The selector of an input field to update with the list.
- * - preview: The selector of an element to use to contain the list preview.
+ * - `field`   - The selector of an input field to update with the list.
+ * - `preview` - The selector of an element to use to contain the list preview.
  */
 
 echo $this->run ('filemanager/util/browser');
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/util/multi-image.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/util/multi-image.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/util/multi-image.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/util/multi-image.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,11 +2,11 @@
 
 /**
  * Provides a multi-image selector based on the image browser
- * from filemanager/util/browser.
+ * from [filemanager/util/browser](/helper/filemanager/util/browser).
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run ('filemanager/util/multi-image');
  *
@@ -14,7 +14,7 @@
  *
  *     {! filemanager/util/multi-image !}
  *
- * 2. Create the HTML elements for the input field and the
+ * ### 2. Create the HTML elements for the input field and the
  * preview area:
  *
  *     <p>
@@ -23,7 +23,7 @@
  *         <input type="hidden" name="images" id="images" />
  *     </p>
  *
- * 3. Use the $.multi_image() function to initialize the plugin:
+ * ### 3. Use the `$.multi_image()` function to initialize the plugin:
  *
  *     $.multi_image ({
  *         field: '#images',
@@ -37,8 +37,8 @@
  *
  * Options:
  *
- * - field:   The selector of an input field to update with the list.
- * - preview: The selector of an element to use to contain the list preview.
+ * - `field`   - The selector of an input field to update with the list.
+ * - `preview` - The selector of an element to use to contain the list preview.
  */
 
 echo $this->run ('filemanager/util/browser');
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/handlers/video.php elefant-elefant_1_3_11_rc/apps/filemanager/handlers/video.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/handlers/video.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/handlers/video.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,24 @@
 <?php
 
 /**
- * Video file embed handler. Used by the file manager in the WYSIWYG
- * editor when it recognizes an MP4 video file being embedded.
+ * Embeds a video player.
+ *
+ * Used by the file manager in the WYSIWYG editor when it recognizes
+ * an MP4 video file being embedded.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('filemanager/audio', array ('file' => 'my-video.mp4'));
+ *
+ * In a template, call it like this:
+ *
+ *     {! filemanager/audio?file=my-video.mp4 !}
+ *
+ * Parameters:
+ *
+ * - `file` - The MP4 file to play
+ *
+ * Also available in the dynamic objects menu as "Video Player (MP4)".
  */
 
 if (! isset (self::$called['filemanager/mediaelement'])) {
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/expressInstall.swf and elefant-elefant_1_3_11_rc/apps/filemanager/js/expressInstall.swf are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/filemanager.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/filemanager.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/flashmediaelement.swf and elefant-elefant_1_3_11_rc/apps/filemanager/js/flashmediaelement.swf are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.colorbox.min.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.colorbox.min.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.cycle.all.min.js elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.cycle.all.min.js
--- elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.cycle.all.min.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.cycle.all.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,22 +1,1543 @@
-/*
+/*!
  * jQuery Cycle Plugin (with Transition Definitions)
  * Examples and documentation at: http://jquery.malsup.com/cycle/
- * Copyright (c) 2007-2010 M. Alsup
- * Version: 2.81 (19-MAR-2010)
- * Dual licensed under the MIT and GPL licenses:
- * http://www.opensource.org/licenses/mit-license.php
- * http://www.gnu.org/licenses/gpl.html
- * Requires: jQuery v1.2.6 or later
+ * Copyright (c) 2007-2013 M. Alsup
+ * Version: 3.0.3 (11-JUL-2013)
+ * Dual licensed under the MIT and GPL licenses.
+ * http://jquery.malsup.com/license.html
+ * Requires: jQuery v1.7.1 or later
  */
-(function($){var ver="2.81";if($.support==undefined){$.support={opacity:!($.browser.msie)};}function debug(s){if($.fn.cycle.debug){log(s);}}function log(){if(window.console&&window.console.log){window.console.log("[cycle] "+Array.prototype.join.call(arguments," "));}}$.fn.cycle=function(options,arg2){var o={s:this.selector,c:this.context};if(this.length===0&&options!="stop"){if(!$.isReady&&o.s){log("DOM not ready, queuing slideshow");$(function(){$(o.s,o.c).cycle(options,arg2);});return this;}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this;}return this.each(function(){var opts=handleArguments(this,options,arg2);if(opts===false){return;}opts.updateActivePagerLink=opts.updateActivePagerLink||$.fn.cycle.updateActivePagerLink;if(this.cycleTimeout){clearTimeout(this.cycleTimeout);}this.cycleTimeout=this.cyclePause=0;var $cont=$(this);var $slides=opts.slideExpr?$(opts.slideExpr,this):$cont.children();var els=$slides.get();if(els.length<2){log("terminating; too few slides: "+els.length);return;}var opts2=buildOptions($cont,$slides,els,opts,o);if(opts2===false){return;}var startTime=opts2.continuous?10:getTimeout(opts2.currSlide,opts2.nextSlide,opts2,!opts2.rev);if(startTime){startTime+=(opts2.delay||0);if(startTime<10){startTime=10;}debug("first timeout: "+startTime);this.cycleTimeout=setTimeout(function(){go(els,opts2,0,!opts2.rev);},startTime);}});};function handleArguments(cont,options,arg2){if(cont.cycleStop==undefined){cont.cycleStop=0;}if(options===undefined||options===null){options={};}if(options.constructor==String){switch(options){case"destroy":case"stop":var opts=$(cont).data("cycle.opts");if(!opts){return false;}cont.cycleStop++;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);}cont.cycleTimeout=0;$(cont).removeData("cycle.opts");if(options=="destroy"){destroy(opts);}return false;case"toggle":cont.cyclePause=(cont.cyclePause===1)?0:1;return false;case"pause":cont.cyclePause=1;return false;case"resume":cont.cyclePause=0;if(arg2===true){options=$(cont).data("cycle.opts");if(!options){log("options not found, can not resume");return false;}if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}go(options.elements,options,1,1);}return false;case"prev":case"next":var opts=$(cont).data("cycle.opts");if(!opts){log('options not found, "prev/next" ignored');return false;}$.fn.cycle[options](opts);return false;default:options={fx:options};}return options;}else{if(options.constructor==Number){var num=options;options=$(cont).data("cycle.opts");if(!options){log("options not found, can not advance slide");return false;}if(num<0||num>=options.elements.length){log("invalid slide index: "+num);return false;}options.nextSlide=num;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}if(typeof arg2=="string"){options.oneTimeFx=arg2;}go(options.elements,options,1,num>=options.currSlide);return false;}}return options;}function removeFilter(el,opts){if(!$.support.opacity&&opts.cleartype&&el.style.filter){try{el.style.removeAttribute("filter");}catch(smother){}}}function destroy(opts){if(opts.next){$(opts.next).unbind(opts.prevNextEvent);}if(opts.prev){$(opts.prev).unbind(opts.prevNextEvent);}if(opts.pager||opts.pagerAnchorBuilder){$.each(opts.pagerAnchors||[],function(){this.unbind().remove();});}opts.pagerAnchors=null;if(opts.destroy){opts.destroy(opts);}}function buildOptions($cont,$slides,els,options,o){var opts=$.extend({},$.fn.cycle.defaults,options||{},$.metadata?$cont.metadata():$.meta?$cont.data():{});if(opts.autostop){opts.countdown=opts.autostopCount||els.length;}var cont=$cont[0];$cont.data("cycle.opts",opts);opts.$cont=$cont;opts.stopCount=cont.cycleStop;opts.elements=els;opts.before=opts.before?[opts.before]:[];opts.after=opts.after?[opts.after]:[];opts.after.unshift(function(){opts.busy=0;});if(!$.support.opacity&&opts.cleartype){opts.after.push(function(){removeFilter(this,opts);});}if(opts.continuous){opts.after.push(function(){go(els,opts,0,!opts.rev);});}saveOriginalOpts(opts);if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($slides);}if($cont.css("position")=="static"){$cont.css("position","relative");}if(opts.width){$cont.width(opts.width);}if(opts.height&&opts.height!="auto"){$cont.height(opts.height);}if(opts.startingSlide){opts.startingSlide=parseInt(opts.startingSlide);}if(opts.random){opts.randomMap=[];for(var i=0;i<els.length;i++){opts.randomMap.push(i);}opts.randomMap.sort(function(a,b){return Math.random()-0.5;});opts.randomIndex=1;opts.startingSlide=opts.randomMap[1];}else{if(opts.startingSlide>=els.length){opts.startingSlide=0;}}opts.currSlide=opts.startingSlide||0;var first=opts.startingSlide;$slides.css({position:"absolute",top:0,left:0}).hide().each(function(i){var z=first?i>=first?els.length-(i-first):first-i:els.length-i;$(this).css("z-index",z);});$(els[first]).css("opacity",1).show();removeFilter(els[first],opts);if(opts.fit&&opts.width){$slides.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}var reshape=opts.containerResize&&!$cont.innerHeight();if(reshape){var maxw=0,maxh=0;for(var j=0;j<els.length;j++){var $e=$(els[j]),e=$e[0],w=$e.outerWidth(),h=$e.outerHeight();if(!w){w=e.offsetWidth||e.width||$e.attr("width");}if(!h){h=e.offsetHeight||e.height||$e.attr("height");}maxw=w>maxw?w:maxw;maxh=h>maxh?h:maxh;}if(maxw>0&&maxh>0){$cont.css({width:maxw+"px",height:maxh+"px"});}}if(opts.pause){$cont.hover(function(){this.cyclePause++;},function(){this.cyclePause--;});}if(supportMultiTransitions(opts)===false){return false;}var requeue=false;options.requeueAttempts=options.requeueAttempts||0;$slides.each(function(){var $el=$(this);this.cycleH=(opts.fit&&opts.height)?opts.height:($el.height()||this.offsetHeight||this.height||$el.attr("height")||0);this.cycleW=(opts.fit&&opts.width)?opts.width:($el.width()||this.offsetWidth||this.width||$el.attr("width")||0);if($el.is("img")){var loadingIE=($.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var loadingFF=($.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var loadingOp=($.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var loadingOther=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(loadingIE||loadingFF||loadingOp||loadingOther){if(o.s&&opts.requeueOnImageNotLoaded&&++options.requeueAttempts<100){log(options.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){$(o.s,o.c).cycle(options);},opts.requeueTimeout);requeue=true;return false;}else{log("could not determine size of image: "+this.src,this.cycleW,this.cycleH);}}}return true;});if(requeue){return false;}opts.cssBefore=opts.cssBefore||{};opts.animIn=opts.animIn||{};opts.animOut=opts.animOut||{};$slides.not(":eq("+first+")").css(opts.cssBefore);if(opts.cssFirst){$($slides[first]).css(opts.cssFirst);}if(opts.timeout){opts.timeout=parseInt(opts.timeout);if(opts.speed.constructor==String){opts.speed=$.fx.speeds[opts.speed]||parseInt(opts.speed);}if(!opts.sync){opts.speed=opts.speed/2;}var buffer=opts.fx=="shuffle"?500:250;while((opts.timeout-opts.speed)<buffer){opts.timeout+=opts.speed;}}if(opts.easing){opts.easeIn=opts.easeOut=opts.easing;}if(!opts.speedIn){opts.speedIn=opts.speed;}if(!opts.speedOut){opts.speedOut=opts.speed;}opts.slideCount=els.length;opts.currSlide=opts.lastSlide=first;if(opts.random){if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{opts.nextSlide=opts.startingSlide>=(els.length-1)?0:opts.startingSlide+1;}if(!opts.multiFx){var init=$.fn.cycle.transitions[opts.fx];if($.isFunction(init)){init($cont,$slides,opts);}else{if(opts.fx!="custom"&&!opts.multiFx){log("unknown transition: "+opts.fx,"; slideshow terminating");return false;}}}var e0=$slides[first];if(opts.before.length){opts.before[0].apply(e0,[e0,e0,opts,true]);}if(opts.after.length>1){opts.after[1].apply(e0,[e0,e0,opts,true]);}if(opts.next){$(opts.next).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?-1:1);});}if(opts.prev){$(opts.prev).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?1:-1);});}if(opts.pager||opts.pagerAnchorBuilder){buildPager(els,opts);}exposeAddSlide(opts,els);return opts;}function saveOriginalOpts(opts){opts.original={before:[],after:[]};opts.original.cssBefore=$.extend({},opts.cssBefore);opts.original.cssAfter=$.extend({},opts.cssAfter);opts.original.animIn=$.extend({},opts.animIn);opts.original.animOut=$.extend({},opts.animOut);$.each(opts.before,function(){opts.original.before.push(this);});$.each(opts.after,function(){opts.original.after.push(this);});}function supportMultiTransitions(opts){var i,tx,txs=$.fn.cycle.transitions;if(opts.fx.indexOf(",")>0){opts.multiFx=true;opts.fxs=opts.fx.replace(/\s*/g,"").split(",");for(i=0;i<opts.fxs.length;i++){var fx=opts.fxs[i];tx=txs[fx];if(!tx||!txs.hasOwnProperty(fx)||!$.isFunction(tx)){log("discarding unknown transition: ",fx);opts.fxs.splice(i,1);i--;}}if(!opts.fxs.length){log("No valid transitions named; slideshow terminating.");return false;}}else{if(opts.fx=="all"){opts.multiFx=true;opts.fxs=[];for(p in txs){tx=txs[p];if(txs.hasOwnProperty(p)&&$.isFunction(tx)){opts.fxs.push(p);}}}}if(opts.multiFx&&opts.randomizeEffects){var r1=Math.floor(Math.random()*20)+30;for(i=0;i<r1;i++){var r2=Math.floor(Math.random()*opts.fxs.length);opts.fxs.push(opts.fxs.splice(r2,1)[0]);}debug("randomized fx sequence: ",opts.fxs);}return true;}function exposeAddSlide(opts,els){opts.addSlide=function(newSlide,prepend){var $s=$(newSlide),s=$s[0];if(!opts.autostopCount){opts.countdown++;}els[prepend?"unshift":"push"](s);if(opts.els){opts.els[prepend?"unshift":"push"](s);}opts.slideCount=els.length;$s.css("position","absolute");$s[prepend?"prependTo":"appendTo"](opts.$cont);if(prepend){opts.currSlide++;opts.nextSlide++;}if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($s);}if(opts.fit&&opts.width){$s.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}s.cycleH=(opts.fit&&opts.height)?opts.height:$s.height();s.cycleW=(opts.fit&&opts.width)?opts.width:$s.width();$s.css(opts.cssBefore);if(opts.pager||opts.pagerAnchorBuilder){$.fn.cycle.createPagerAnchor(els.length-1,s,$(opts.pager),els,opts);}if($.isFunction(opts.onAddSlide)){opts.onAddSlide($s);}else{$s.hide();}};}$.fn.cycle.resetState=function(opts,fx){fx=fx||opts.fx;opts.before=[];opts.after=[];opts.cssBefore=$.extend({},opts.original.cssBefore);opts.cssAfter=$.extend({},opts.original.cssAfter);opts.animIn=$.extend({},opts.original.animIn);opts.animOut=$.extend({},opts.original.animOut);opts.fxFn=null;$.each(opts.original.before,function(){opts.before.push(this);});$.each(opts.original.after,function(){opts.after.push(this);});var init=$.fn.cycle.transitions[fx];if($.isFunction(init)){init(opts.$cont,$(opts.elements),opts);}};function go(els,opts,manual,fwd){if(manual&&opts.busy&&opts.manualTrump){debug("manualTrump in go(), stopping active transition");$(els).stop(true,true);opts.busy=false;}if(opts.busy){debug("transition active, ignoring new tx request");return;}var p=opts.$cont[0],curr=els[opts.currSlide],next=els[opts.nextSlide];if(p.cycleStop!=opts.stopCount||p.cycleTimeout===0&&!manual){return;}if(!manual&&!p.cyclePause&&((opts.autostop&&(--opts.countdown<=0))||(opts.nowrap&&!opts.random&&opts.nextSlide<opts.currSlide))){if(opts.end){opts.end(opts);}return;}if((manual||!p.cyclePause)&&(opts.nextSlide!=opts.currSlide)){var fx=opts.fx;curr.cycleH=curr.cycleH||$(curr).height();curr.cycleW=curr.cycleW||$(curr).width();next.cycleH=next.cycleH||$(next).height();next.cycleW=next.cycleW||$(next).width();if(opts.multiFx){if(opts.lastFx==undefined||++opts.lastFx>=opts.fxs.length){opts.lastFx=0;}fx=opts.fxs[opts.lastFx];opts.currFx=fx;}if(opts.oneTimeFx){fx=opts.oneTimeFx;opts.oneTimeFx=null;}$.fn.cycle.resetState(opts,fx);if(opts.before.length){$.each(opts.before,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});}var after=function(){$.each(opts.after,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});};debug("tx firing; currSlide: "+opts.currSlide+"; nextSlide: "+opts.nextSlide);opts.busy=1;if(opts.fxFn){opts.fxFn(curr,next,opts,after,fwd);}else{if($.isFunction($.fn.cycle[opts.fx])){$.fn.cycle[opts.fx](curr,next,opts,after,manual&&opts.fastOnEvent);}else{$.fn.cycle.custom(curr,next,opts,after,manual&&opts.fastOnEvent);}}}opts.lastSlide=opts.currSlide;if(opts.random){opts.currSlide=opts.nextSlide;if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];if(opts.nextSlide==opts.currSlide){opts.nextSlide=(opts.currSlide==opts.slideCount-1)?0:opts.currSlide+1;}}else{var roll=(opts.nextSlide+1)==els.length;opts.nextSlide=roll?0:opts.nextSlide+1;opts.currSlide=roll?els.length-1:opts.nextSlide-1;}if(opts.pager){opts.updateActivePagerLink(opts.pager,opts.currSlide,opts.activePagerClass);}var ms=0;if(opts.timeout&&!opts.continuous){ms=getTimeout(curr,next,opts,fwd);}else{if(opts.continuous&&p.cyclePause){ms=10;}}if(ms>0){p.cycleTimeout=setTimeout(function(){go(els,opts,0,!opts.rev);},ms);}}$.fn.cycle.updateActivePagerLink=function(pager,currSlide,clsName){$(pager).each(function(){$(this).find("a").removeClass(clsName).filter("a:eq("+currSlide+")").addClass(clsName);});};function getTimeout(curr,next,opts,fwd){if(opts.timeoutFn){var t=opts.timeoutFn(curr,next,opts,fwd);while((t-opts.speed)<250){t+=opts.speed;}debug("calculated timeout: "+t+"; speed: "+opts.speed);if(t!==false){return t;}}return opts.timeout;}$.fn.cycle.next=function(opts){advance(opts,opts.rev?-1:1);};$.fn.cycle.prev=function(opts){advance(opts,opts.rev?1:-1);};function advance(opts,val){var els=opts.elements;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}if(opts.random&&val<0){opts.randomIndex--;if(--opts.randomIndex==-2){opts.randomIndex=els.length-2;}else{if(opts.randomIndex==-1){opts.randomIndex=els.length-1;}}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{if(opts.random){opts.nextSlide=opts.randomMap[opts.randomIndex];}else{opts.nextSlide=opts.currSlide+val;if(opts.nextSlide<0){if(opts.nowrap){return false;}opts.nextSlide=els.length-1;}else{if(opts.nextSlide>=els.length){if(opts.nowrap){return false;}opts.nextSlide=0;}}}}var cb=opts.onPrevNextEvent||opts.prevNextClick;if($.isFunction(cb)){cb(val>0,opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,val>=0);return false;}function buildPager(els,opts){var $p=$(opts.pager);$.each(els,function(i,o){$.fn.cycle.createPagerAnchor(i,o,$p,els,opts);});opts.updateActivePagerLink(opts.pager,opts.startingSlide,opts.activePagerClass);}$.fn.cycle.createPagerAnchor=function(i,el,$p,els,opts){var a;if($.isFunction(opts.pagerAnchorBuilder)){a=opts.pagerAnchorBuilder(i,el);debug("pagerAnchorBuilder("+i+", el) returned: "+a);}else{a='<a href="#">'+(i+1)+"</a>";}if(!a){return;}var $a=$(a);if($a.parents("body").length===0){var arr=[];if($p.length>1){$p.each(function(){var $clone=$a.clone(true);$(this).append($clone);arr.push($clone[0]);});$a=$(arr);}else{$a.appendTo($p);}}opts.pagerAnchors=opts.pagerAnchors||[];opts.pagerAnchors.push($a);$a.bind(opts.pagerEvent,function(e){e.preventDefault();opts.nextSlide=i;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}var cb=opts.onPagerEvent||opts.pagerClick;if($.isFunction(cb)){cb(opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,opts.currSlide<i);});if(!/^click/.test(opts.pagerEvent)&&!opts.allowPagerClickBubble){$a.bind("click.cycle",function(){return false;});}if(opts.pauseOnPagerHover){$a.hover(function(){opts.$cont[0].cyclePause++;},function(){opts.$cont[0].cyclePause--;});}};$.fn.cycle.hopsFromLast=function(opts,fwd){var hops,l=opts.lastSlide,c=opts.currSlide;if(fwd){hops=c>l?c-l:opts.slideCount-l;}else{hops=c<l?l-c:l+opts.slideCount-c;}return hops;};function clearTypeFix($slides){debug("applying clearType background-color hack");function hex(s){s=parseInt(s).toString(16);return s.length<2?"0"+s:s;}function getBg(e){for(;e&&e.nodeName.toLowerCase()!="html";e=e.parentNode){var v=$.css(e,"background-color");if(v.indexOf("rgb")>=0){var rgb=v.match(/\d+/g);return"#"+hex(rgb[0])+hex(rgb[1])+hex(rgb[2]);}if(v&&v!="transparent"){return v;}}return"#ffffff";}$slides.each(function(){$(this).css("background-color",getBg(this));});}$.fn.cycle.commonReset=function(curr,next,opts,w,h,rev){$(opts.elements).not(curr).hide();opts.cssBefore.opacity=1;opts.cssBefore.display="block";if(w!==false&&next.cycleW>0){opts.cssBefore.width=next.cycleW;}if(h!==false&&next.cycleH>0){opts.cssBefore.height=next.cycleH;}opts.cssAfter=opts.cssAfter||{};opts.cssAfter.display="none";$(curr).css("zIndex",opts.slideCount+(rev===true?1:0));$(next).css("zIndex",opts.slideCount+(rev===true?0:1));};$.fn.cycle.custom=function(curr,next,opts,cb,speedOverride){var $l=$(curr),$n=$(next);var speedIn=opts.speedIn,speedOut=opts.speedOut,easeIn=opts.easeIn,easeOut=opts.easeOut;$n.css(opts.cssBefore);if(speedOverride){if(typeof speedOverride=="number"){speedIn=speedOut=speedOverride;}else{speedIn=speedOut=1;}easeIn=easeOut=null;}var fn=function(){$n.animate(opts.animIn,speedIn,easeIn,cb);};$l.animate(opts.animOut,speedOut,easeOut,function(){if(opts.cssAfter){$l.css(opts.cssAfter);}if(!opts.sync){fn();}});if(opts.sync){fn();}};$.fn.cycle.transitions={fade:function($cont,$slides,opts){$slides.not(":eq("+opts.currSlide+")").css("opacity",0);opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.opacity=0;});opts.animIn={opacity:1};opts.animOut={opacity:0};opts.cssBefore={top:0,left:0};}};$.fn.cycle.ver=function(){return ver;};$.fn.cycle.defaults={fx:"fade",timeout:4000,timeoutFn:null,continuous:0,speed:1000,speedIn:null,speedOut:null,next:null,prev:null,onPrevNextEvent:null,prevNextEvent:"click.cycle",pager:null,onPagerEvent:null,pagerEvent:"click.cycle",allowPagerClickBubble:false,pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!$.support.opacity,cleartypeNoBg:false,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:true,requeueOnImageNotLoaded:true,requeueTimeout:250,activePagerClass:"activeSlide",updateActivePagerLink:null};})(jQuery);
-/*
+;(function($, undefined) {
+"use strict";
+
+var ver = '3.0.3';
+
+function debug(s) {
+	if ($.fn.cycle.debug)
+		log(s);
+}		
+function log() {
+	/*global console */
+	if (window.console && console.log)
+		console.log('[cycle] ' + Array.prototype.join.call(arguments,' '));
+}
+$.expr[':'].paused = function(el) {
+	return el.cyclePause;
+};
+
+
+// the options arg can be...
+//   a number  - indicates an immediate transition should occur to the given slide index
+//   a string  - 'pause', 'resume', 'toggle', 'next', 'prev', 'stop', 'destroy' or the name of a transition effect (ie, 'fade', 'zoom', etc)
+//   an object - properties to control the slideshow
+//
+// the arg2 arg can be...
+//   the name of an fx (only used in conjunction with a numeric value for 'options')
+//   the value true (only used in first arg == 'resume') and indicates
+//	 that the resume should occur immediately (not wait for next timeout)
+
+$.fn.cycle = function(options, arg2) {
+	var o = { s: this.selector, c: this.context };
+
+	// in 1.3+ we can fix mistakes with the ready state
+	if (this.length === 0 && options != 'stop') {
+		if (!$.isReady && o.s) {
+			log('DOM not ready, queuing slideshow');
+			$(function() {
+				$(o.s,o.c).cycle(options,arg2);
+			});
+			return this;
+		}
+		// is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()
+		log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));
+		return this;
+	}
+
+	// iterate the matched nodeset
+	return this.each(function() {
+		var opts = handleArguments(this, options, arg2);
+		if (opts === false)
+			return;
+
+		opts.updateActivePagerLink = opts.updateActivePagerLink || $.fn.cycle.updateActivePagerLink;
+		
+		// stop existing slideshow for this container (if there is one)
+		if (this.cycleTimeout)
+			clearTimeout(this.cycleTimeout);
+		this.cycleTimeout = this.cyclePause = 0;
+		this.cycleStop = 0; // issue #108
+
+		var $cont = $(this);
+		var $slides = opts.slideExpr ? $(opts.slideExpr, this) : $cont.children();
+		var els = $slides.get();
+
+		if (els.length < 2) {
+			log('terminating; too few slides: ' + els.length);
+			return;
+		}
+
+		var opts2 = buildOptions($cont, $slides, els, opts, o);
+		if (opts2 === false)
+			return;
+
+		var startTime = opts2.continuous ? 10 : getTimeout(els[opts2.currSlide], els[opts2.nextSlide], opts2, !opts2.backwards);
+
+		// if it's an auto slideshow, kick it off
+		if (startTime) {
+			startTime += (opts2.delay || 0);
+			if (startTime < 10)
+				startTime = 10;
+			debug('first timeout: ' + startTime);
+			this.cycleTimeout = setTimeout(function(){go(els,opts2,0,!opts.backwards);}, startTime);
+		}
+	});
+};
+
+function triggerPause(cont, byHover, onPager) {
+	var opts = $(cont).data('cycle.opts');
+	if (!opts)
+		return;
+	var paused = !!cont.cyclePause;
+	if (paused && opts.paused)
+		opts.paused(cont, opts, byHover, onPager);
+	else if (!paused && opts.resumed)
+		opts.resumed(cont, opts, byHover, onPager);
+}
+
+// process the args that were passed to the plugin fn
+function handleArguments(cont, options, arg2) {
+	if (cont.cycleStop === undefined)
+		cont.cycleStop = 0;
+	if (options === undefined || options === null)
+		options = {};
+	if (options.constructor == String) {
+		switch(options) {
+		case 'destroy':
+		case 'stop':
+			var opts = $(cont).data('cycle.opts');
+			if (!opts)
+				return false;
+			cont.cycleStop++; // callbacks look for change
+			if (cont.cycleTimeout)
+				clearTimeout(cont.cycleTimeout);
+			cont.cycleTimeout = 0;
+			if (opts.elements)
+				$(opts.elements).stop();
+			$(cont).removeData('cycle.opts');
+			if (options == 'destroy')
+				destroy(cont, opts);
+			return false;
+		case 'toggle':
+			cont.cyclePause = (cont.cyclePause === 1) ? 0 : 1;
+			checkInstantResume(cont.cyclePause, arg2, cont);
+			triggerPause(cont);
+			return false;
+		case 'pause':
+			cont.cyclePause = 1;
+			triggerPause(cont);
+			return false;
+		case 'resume':
+			cont.cyclePause = 0;
+			checkInstantResume(false, arg2, cont);
+			triggerPause(cont);
+			return false;
+		case 'prev':
+		case 'next':
+			opts = $(cont).data('cycle.opts');
+			if (!opts) {
+				log('options not found, "prev/next" ignored');
+				return false;
+			}
+			if (typeof arg2 == 'string') 
+				opts.oneTimeFx = arg2;
+			$.fn.cycle[options](opts);
+			return false;
+		default:
+			options = { fx: options };
+		}
+		return options;
+	}
+	else if (options.constructor == Number) {
+		// go to the requested slide
+		var num = options;
+		options = $(cont).data('cycle.opts');
+		if (!options) {
+			log('options not found, can not advance slide');
+			return false;
+		}
+		if (num < 0 || num >= options.elements.length) {
+			log('invalid slide index: ' + num);
+			return false;
+		}
+		options.nextSlide = num;
+		if (cont.cycleTimeout) {
+			clearTimeout(cont.cycleTimeout);
+			cont.cycleTimeout = 0;
+		}
+		if (typeof arg2 == 'string')
+			options.oneTimeFx = arg2;
+		go(options.elements, options, 1, num >= options.currSlide);
+		return false;
+	}
+	return options;
+	
+	function checkInstantResume(isPaused, arg2, cont) {
+		if (!isPaused && arg2 === true) { // resume now!
+			var options = $(cont).data('cycle.opts');
+			if (!options) {
+				log('options not found, can not resume');
+				return false;
+			}
+			if (cont.cycleTimeout) {
+				clearTimeout(cont.cycleTimeout);
+				cont.cycleTimeout = 0;
+			}
+			go(options.elements, options, 1, !options.backwards);
+		}
+	}
+}
+
+function removeFilter(el, opts) {
+	if (!$.support.opacity && opts.cleartype && el.style.filter) {
+		try { el.style.removeAttribute('filter'); }
+		catch(smother) {} // handle old opera versions
+	}
+}
+
+// unbind event handlers
+function destroy(cont, opts) {
+	if (opts.next)
+		$(opts.next).unbind(opts.prevNextEvent);
+	if (opts.prev)
+		$(opts.prev).unbind(opts.prevNextEvent);
+	
+	if (opts.pager || opts.pagerAnchorBuilder)
+		$.each(opts.pagerAnchors || [], function() {
+			this.unbind().remove();
+		});
+	opts.pagerAnchors = null;
+	$(cont).unbind('mouseenter.cycle mouseleave.cycle');
+	if (opts.destroy) // callback
+		opts.destroy(opts);
+}
+
+// one-time initialization
+function buildOptions($cont, $slides, els, options, o) {
+	var startingSlideSpecified;
+	// support metadata plugin (v1.0 and v2.0)
+	var opts = $.extend({}, $.fn.cycle.defaults, options || {}, $.metadata ? $cont.metadata() : $.meta ? $cont.data() : {});
+	var meta = $.isFunction($cont.data) ? $cont.data(opts.metaAttr) : null;
+	if (meta)
+		opts = $.extend(opts, meta);
+	if (opts.autostop)
+		opts.countdown = opts.autostopCount || els.length;
+
+	var cont = $cont[0];
+	$cont.data('cycle.opts', opts);
+	opts.$cont = $cont;
+	opts.stopCount = cont.cycleStop;
+	opts.elements = els;
+	opts.before = opts.before ? [opts.before] : [];
+	opts.after = opts.after ? [opts.after] : [];
+
+	// push some after callbacks
+	if (!$.support.opacity && opts.cleartype)
+		opts.after.push(function() { removeFilter(this, opts); });
+	if (opts.continuous)
+		opts.after.push(function() { go(els,opts,0,!opts.backwards); });
+
+	saveOriginalOpts(opts);
+
+	// clearType corrections
+	if (!$.support.opacity && opts.cleartype && !opts.cleartypeNoBg)
+		clearTypeFix($slides);
+
+	// container requires non-static position so that slides can be position within
+	if ($cont.css('position') == 'static')
+		$cont.css('position', 'relative');
+	if (opts.width)
+		$cont.width(opts.width);
+	if (opts.height && opts.height != 'auto')
+		$cont.height(opts.height);
+
+	if (opts.startingSlide !== undefined) {
+		opts.startingSlide = parseInt(opts.startingSlide,10);
+		if (opts.startingSlide >= els.length || opts.startSlide < 0)
+			opts.startingSlide = 0; // catch bogus input
+		else 
+			startingSlideSpecified = true;
+	}
+	else if (opts.backwards)
+		opts.startingSlide = els.length - 1;
+	else
+		opts.startingSlide = 0;
+
+	// if random, mix up the slide array
+	if (opts.random) {
+		opts.randomMap = [];
+		for (var i = 0; i < els.length; i++)
+			opts.randomMap.push(i);
+		opts.randomMap.sort(function(a,b) {return Math.random() - 0.5;});
+		if (startingSlideSpecified) {
+			// try to find the specified starting slide and if found set start slide index in the map accordingly
+			for ( var cnt = 0; cnt < els.length; cnt++ ) {
+				if ( opts.startingSlide == opts.randomMap[cnt] ) {
+					opts.randomIndex = cnt;
+				}
+			}
+		}
+		else {
+			opts.randomIndex = 1;
+			opts.startingSlide = opts.randomMap[1];
+		}
+	}
+	else if (opts.startingSlide >= els.length)
+		opts.startingSlide = 0; // catch bogus input
+	opts.currSlide = opts.startingSlide || 0;
+	var first = opts.startingSlide;
+
+	// set position and zIndex on all the slides
+	$slides.css({position: 'absolute', top:0, left:0}).hide().each(function(i) {
+		var z;
+		if (opts.backwards)
+			z = first ? i <= first ? els.length + (i-first) : first-i : els.length-i;
+		else
+			z = first ? i >= first ? els.length - (i-first) : first-i : els.length-i;
+		$(this).css('z-index', z);
+	});
+
+	// make sure first slide is visible
+	$(els[first]).css('opacity',1).show(); // opacity bit needed to handle restart use case
+	removeFilter(els[first], opts);
+
+	// stretch slides
+	if (opts.fit) {
+		if (!opts.aspect) {
+	        if (opts.width)
+	            $slides.width(opts.width);
+	        if (opts.height && opts.height != 'auto')
+	            $slides.height(opts.height);
+		} else {
+			$slides.each(function(){
+				var $slide = $(this);
+				var ratio = (opts.aspect === true) ? $slide.width()/$slide.height() : opts.aspect;
+				if( opts.width && $slide.width() != opts.width ) {
+					$slide.width( opts.width );
+					$slide.height( opts.width / ratio );
+				}
+
+				if( opts.height && $slide.height() < opts.height ) {
+					$slide.height( opts.height );
+					$slide.width( opts.height * ratio );
+				}
+			});
+		}
+	}
+
+	if (opts.center && ((!opts.fit) || opts.aspect)) {
+		$slides.each(function(){
+			var $slide = $(this);
+			$slide.css({
+				"margin-left": opts.width ?
+					((opts.width - $slide.width()) / 2) + "px" :
+					0,
+				"margin-top": opts.height ?
+					((opts.height - $slide.height()) / 2) + "px" :
+					0
+			});
+		});
+	}
+
+	if (opts.center && !opts.fit && !opts.slideResize) {
+		$slides.each(function(){
+			var $slide = $(this);
+			$slide.css({
+				"margin-left": opts.width ? ((opts.width - $slide.width()) / 2) + "px" : 0,
+				"margin-top": opts.height ? ((opts.height - $slide.height()) / 2) + "px" : 0
+			});
+		});
+	}
+		
+	// stretch container
+	var reshape = (opts.containerResize || opts.containerResizeHeight) && $cont.innerHeight() < 1;
+	if (reshape) { // do this only if container has no size http://tinyurl.com/da2oa9
+		var maxw = 0, maxh = 0;
+		for(var j=0; j < els.length; j++) {
+			var $e = $(els[j]), e = $e[0], w = $e.outerWidth(), h = $e.outerHeight();
+			if (!w) w = e.offsetWidth || e.width || $e.attr('width');
+			if (!h) h = e.offsetHeight || e.height || $e.attr('height');
+			maxw = w > maxw ? w : maxw;
+			maxh = h > maxh ? h : maxh;
+		}
+		if (opts.containerResize && maxw > 0 && maxh > 0)
+			$cont.css({width:maxw+'px',height:maxh+'px'});
+		if (opts.containerResizeHeight && maxh > 0)
+			$cont.css({height:maxh+'px'});
+	}
+
+	var pauseFlag = false;  // https://github.com/malsup/cycle/issues/44
+	if (opts.pause)
+		$cont.bind('mouseenter.cycle', function(){
+			pauseFlag = true;
+			this.cyclePause++;
+			triggerPause(cont, true);
+		}).bind('mouseleave.cycle', function(){
+				if (pauseFlag)
+					this.cyclePause--;
+				triggerPause(cont, true);
+		});
+
+	if (supportMultiTransitions(opts) === false)
+		return false;
+
+	// apparently a lot of people use image slideshows without height/width attributes on the images.
+	// Cycle 2.50+ requires the sizing info for every slide; this block tries to deal with that.
+	var requeue = false;
+	options.requeueAttempts = options.requeueAttempts || 0;
+	$slides.each(function() {
+		// try to get height/width of each slide
+		var $el = $(this);
+		this.cycleH = (opts.fit && opts.height) ? opts.height : ($el.height() || this.offsetHeight || this.height || $el.attr('height') || 0);
+		this.cycleW = (opts.fit && opts.width) ? opts.width : ($el.width() || this.offsetWidth || this.width || $el.attr('width') || 0);
+
+		if ( $el.is('img') ) {
+			var loading = (this.cycleH === 0 && this.cycleW === 0 && !this.complete);
+			// don't requeue for images that are still loading but have a valid size
+			if (loading) {
+				if (o.s && opts.requeueOnImageNotLoaded && ++options.requeueAttempts < 100) { // track retry count so we don't loop forever
+					log(options.requeueAttempts,' - img slide not loaded, requeuing slideshow: ', this.src, this.cycleW, this.cycleH);
+					setTimeout(function() {$(o.s,o.c).cycle(options);}, opts.requeueTimeout);
+					requeue = true;
+					return false; // break each loop
+				}
+				else {
+					log('could not determine size of image: '+this.src, this.cycleW, this.cycleH);
+				}
+			}
+		}
+		return true;
+	});
+
+	if (requeue)
+		return false;
+
+	opts.cssBefore = opts.cssBefore || {};
+	opts.cssAfter = opts.cssAfter || {};
+	opts.cssFirst = opts.cssFirst || {};
+	opts.animIn = opts.animIn || {};
+	opts.animOut = opts.animOut || {};
+
+	$slides.not(':eq('+first+')').css(opts.cssBefore);
+	$($slides[first]).css(opts.cssFirst);
+
+	if (opts.timeout) {
+		opts.timeout = parseInt(opts.timeout,10);
+		// ensure that timeout and speed settings are sane
+		if (opts.speed.constructor == String)
+			opts.speed = $.fx.speeds[opts.speed] || parseInt(opts.speed,10);
+		if (!opts.sync)
+			opts.speed = opts.speed / 2;
+		
+		var buffer = opts.fx == 'none' ? 0 : opts.fx == 'shuffle' ? 500 : 250;
+		while((opts.timeout - opts.speed) < buffer) // sanitize timeout
+			opts.timeout += opts.speed;
+	}
+	if (opts.easing)
+		opts.easeIn = opts.easeOut = opts.easing;
+	if (!opts.speedIn)
+		opts.speedIn = opts.speed;
+	if (!opts.speedOut)
+		opts.speedOut = opts.speed;
+
+	opts.slideCount = els.length;
+	opts.currSlide = opts.lastSlide = first;
+	if (opts.random) {
+		if (++opts.randomIndex == els.length)
+			opts.randomIndex = 0;
+		opts.nextSlide = opts.randomMap[opts.randomIndex];
+	}
+	else if (opts.backwards)
+		opts.nextSlide = opts.startingSlide === 0 ? (els.length-1) : opts.startingSlide-1;
+	else
+		opts.nextSlide = opts.startingSlide >= (els.length-1) ? 0 : opts.startingSlide+1;
+
+	// run transition init fn
+	if (!opts.multiFx) {
+		var init = $.fn.cycle.transitions[opts.fx];
+		if ($.isFunction(init))
+			init($cont, $slides, opts);
+		else if (opts.fx != 'custom' && !opts.multiFx) {
+			log('unknown transition: ' + opts.fx,'; slideshow terminating');
+			return false;
+		}
+	}
+
+	// fire artificial events
+	var e0 = $slides[first];
+	if (!opts.skipInitializationCallbacks) {
+		if (opts.before.length)
+			opts.before[0].apply(e0, [e0, e0, opts, true]);
+		if (opts.after.length)
+			opts.after[0].apply(e0, [e0, e0, opts, true]);
+	}
+	if (opts.next)
+		$(opts.next).bind(opts.prevNextEvent,function(){return advance(opts,1);});
+	if (opts.prev)
+		$(opts.prev).bind(opts.prevNextEvent,function(){return advance(opts,0);});
+	if (opts.pager || opts.pagerAnchorBuilder)
+		buildPager(els,opts);
+
+	exposeAddSlide(opts, els);
+
+	return opts;
+}
+
+// save off original opts so we can restore after clearing state
+function saveOriginalOpts(opts) {
+	opts.original = { before: [], after: [] };
+	opts.original.cssBefore = $.extend({}, opts.cssBefore);
+	opts.original.cssAfter  = $.extend({}, opts.cssAfter);
+	opts.original.animIn	= $.extend({}, opts.animIn);
+	opts.original.animOut   = $.extend({}, opts.animOut);
+	$.each(opts.before, function() { opts.original.before.push(this); });
+	$.each(opts.after,  function() { opts.original.after.push(this); });
+}
+
+function supportMultiTransitions(opts) {
+	var i, tx, txs = $.fn.cycle.transitions;
+	// look for multiple effects
+	if (opts.fx.indexOf(',') > 0) {
+		opts.multiFx = true;
+		opts.fxs = opts.fx.replace(/\s*/g,'').split(',');
+		// discard any bogus effect names
+		for (i=0; i < opts.fxs.length; i++) {
+			var fx = opts.fxs[i];
+			tx = txs[fx];
+			if (!tx || !txs.hasOwnProperty(fx) || !$.isFunction(tx)) {
+				log('discarding unknown transition: ',fx);
+				opts.fxs.splice(i,1);
+				i--;
+			}
+		}
+		// if we have an empty list then we threw everything away!
+		if (!opts.fxs.length) {
+			log('No valid transitions named; slideshow terminating.');
+			return false;
+		}
+	}
+	else if (opts.fx == 'all') {  // auto-gen the list of transitions
+		opts.multiFx = true;
+		opts.fxs = [];
+		for (var p in txs) {
+			if (txs.hasOwnProperty(p)) {
+				tx = txs[p];
+				if (txs.hasOwnProperty(p) && $.isFunction(tx))
+					opts.fxs.push(p);
+			}
+		}
+	}
+	if (opts.multiFx && opts.randomizeEffects) {
+		// munge the fxs array to make effect selection random
+		var r1 = Math.floor(Math.random() * 20) + 30;
+		for (i = 0; i < r1; i++) {
+			var r2 = Math.floor(Math.random() * opts.fxs.length);
+			opts.fxs.push(opts.fxs.splice(r2,1)[0]);
+		}
+		debug('randomized fx sequence: ',opts.fxs);
+	}
+	return true;
+}
+
+// provide a mechanism for adding slides after the slideshow has started
+function exposeAddSlide(opts, els) {
+	opts.addSlide = function(newSlide, prepend) {
+		var $s = $(newSlide), s = $s[0];
+		if (!opts.autostopCount)
+			opts.countdown++;
+		els[prepend?'unshift':'push'](s);
+		if (opts.els)
+			opts.els[prepend?'unshift':'push'](s); // shuffle needs this
+		opts.slideCount = els.length;
+
+		// add the slide to the random map and resort
+		if (opts.random) {
+			opts.randomMap.push(opts.slideCount-1);
+			opts.randomMap.sort(function(a,b) {return Math.random() - 0.5;});
+		}
+
+		$s.css('position','absolute');
+		$s[prepend?'prependTo':'appendTo'](opts.$cont);
+
+		if (prepend) {
+			opts.currSlide++;
+			opts.nextSlide++;
+		}
+
+		if (!$.support.opacity && opts.cleartype && !opts.cleartypeNoBg)
+			clearTypeFix($s);
+
+		if (opts.fit && opts.width)
+			$s.width(opts.width);
+		if (opts.fit && opts.height && opts.height != 'auto')
+			$s.height(opts.height);
+		s.cycleH = (opts.fit && opts.height) ? opts.height : $s.height();
+		s.cycleW = (opts.fit && opts.width) ? opts.width : $s.width();
+
+		$s.css(opts.cssBefore);
+
+		if (opts.pager || opts.pagerAnchorBuilder)
+			$.fn.cycle.createPagerAnchor(els.length-1, s, $(opts.pager), els, opts);
+
+		if ($.isFunction(opts.onAddSlide))
+			opts.onAddSlide($s);
+		else
+			$s.hide(); // default behavior
+	};
+}
+
+// reset internal state; we do this on every pass in order to support multiple effects
+$.fn.cycle.resetState = function(opts, fx) {
+	fx = fx || opts.fx;
+	opts.before = []; opts.after = [];
+	opts.cssBefore = $.extend({}, opts.original.cssBefore);
+	opts.cssAfter  = $.extend({}, opts.original.cssAfter);
+	opts.animIn	= $.extend({}, opts.original.animIn);
+	opts.animOut   = $.extend({}, opts.original.animOut);
+	opts.fxFn = null;
+	$.each(opts.original.before, function() { opts.before.push(this); });
+	$.each(opts.original.after,  function() { opts.after.push(this); });
+
+	// re-init
+	var init = $.fn.cycle.transitions[fx];
+	if ($.isFunction(init))
+		init(opts.$cont, $(opts.elements), opts);
+};
+
+// this is the main engine fn, it handles the timeouts, callbacks and slide index mgmt
+function go(els, opts, manual, fwd) {
+	var p = opts.$cont[0], curr = els[opts.currSlide], next = els[opts.nextSlide];
+
+	// opts.busy is true if we're in the middle of an animation
+	if (manual && opts.busy && opts.manualTrump) {
+		// let manual transitions requests trump active ones
+		debug('manualTrump in go(), stopping active transition');
+		$(els).stop(true,true);
+		opts.busy = 0;
+		clearTimeout(p.cycleTimeout);
+	}
+
+	// don't begin another timeout-based transition if there is one active
+	if (opts.busy) {
+		debug('transition active, ignoring new tx request');
+		return;
+	}
+
+
+	// stop cycling if we have an outstanding stop request
+	if (p.cycleStop != opts.stopCount || p.cycleTimeout === 0 && !manual)
+		return;
+
+	// check to see if we should stop cycling based on autostop options
+	if (!manual && !p.cyclePause && !opts.bounce &&
+		((opts.autostop && (--opts.countdown <= 0)) ||
+		(opts.nowrap && !opts.random && opts.nextSlide < opts.currSlide))) {
+		if (opts.end)
+			opts.end(opts);
+		return;
+	}
+
+	// if slideshow is paused, only transition on a manual trigger
+	var changed = false;
+	if ((manual || !p.cyclePause) && (opts.nextSlide != opts.currSlide)) {
+		changed = true;
+		var fx = opts.fx;
+		// keep trying to get the slide size if we don't have it yet
+		curr.cycleH = curr.cycleH || $(curr).height();
+		curr.cycleW = curr.cycleW || $(curr).width();
+		next.cycleH = next.cycleH || $(next).height();
+		next.cycleW = next.cycleW || $(next).width();
+
+		// support multiple transition types
+		if (opts.multiFx) {
+			if (fwd && (opts.lastFx === undefined || ++opts.lastFx >= opts.fxs.length))
+				opts.lastFx = 0;
+			else if (!fwd && (opts.lastFx === undefined || --opts.lastFx < 0))
+				opts.lastFx = opts.fxs.length - 1;
+			fx = opts.fxs[opts.lastFx];
+		}
+
+		// one-time fx overrides apply to:  $('div').cycle(3,'zoom');
+		if (opts.oneTimeFx) {
+			fx = opts.oneTimeFx;
+			opts.oneTimeFx = null;
+		}
+
+		$.fn.cycle.resetState(opts, fx);
+
+		// run the before callbacks
+		if (opts.before.length)
+			$.each(opts.before, function(i,o) {
+				if (p.cycleStop != opts.stopCount) return;
+				o.apply(next, [curr, next, opts, fwd]);
+			});
+
+		// stage the after callacks
+		var after = function() {
+			opts.busy = 0;
+			$.each(opts.after, function(i,o) {
+				if (p.cycleStop != opts.stopCount) return;
+				o.apply(next, [curr, next, opts, fwd]);
+			});
+			if (!p.cycleStop) {
+				// queue next transition
+				queueNext();
+			}
+		};
+
+		debug('tx firing('+fx+'); currSlide: ' + opts.currSlide + '; nextSlide: ' + opts.nextSlide);
+		
+		// get ready to perform the transition
+		opts.busy = 1;
+		if (opts.fxFn) // fx function provided?
+			opts.fxFn(curr, next, opts, after, fwd, manual && opts.fastOnEvent);
+		else if ($.isFunction($.fn.cycle[opts.fx])) // fx plugin ?
+			$.fn.cycle[opts.fx](curr, next, opts, after, fwd, manual && opts.fastOnEvent);
+		else
+			$.fn.cycle.custom(curr, next, opts, after, fwd, manual && opts.fastOnEvent);
+	}
+	else {
+		queueNext();
+	}
+
+	if (changed || opts.nextSlide == opts.currSlide) {
+		// calculate the next slide
+		var roll;
+		opts.lastSlide = opts.currSlide;
+		if (opts.random) {
+			opts.currSlide = opts.nextSlide;
+			if (++opts.randomIndex == els.length) {
+				opts.randomIndex = 0;
+				opts.randomMap.sort(function(a,b) {return Math.random() - 0.5;});
+			}
+			opts.nextSlide = opts.randomMap[opts.randomIndex];
+			if (opts.nextSlide == opts.currSlide)
+				opts.nextSlide = (opts.currSlide == opts.slideCount - 1) ? 0 : opts.currSlide + 1;
+		}
+		else if (opts.backwards) {
+			roll = (opts.nextSlide - 1) < 0;
+			if (roll && opts.bounce) {
+				opts.backwards = !opts.backwards;
+				opts.nextSlide = 1;
+				opts.currSlide = 0;
+			}
+			else {
+				opts.nextSlide = roll ? (els.length-1) : opts.nextSlide-1;
+				opts.currSlide = roll ? 0 : opts.nextSlide+1;
+			}
+		}
+		else { // sequence
+			roll = (opts.nextSlide + 1) == els.length;
+			if (roll && opts.bounce) {
+				opts.backwards = !opts.backwards;
+				opts.nextSlide = els.length-2;
+				opts.currSlide = els.length-1;
+			}
+			else {
+				opts.nextSlide = roll ? 0 : opts.nextSlide+1;
+				opts.currSlide = roll ? els.length-1 : opts.nextSlide-1;
+			}
+		}
+	}
+	if (changed && opts.pager)
+		opts.updateActivePagerLink(opts.pager, opts.currSlide, opts.activePagerClass);
+	
+	function queueNext() {
+		// stage the next transition
+		var ms = 0, timeout = opts.timeout;
+		if (opts.timeout && !opts.continuous) {
+			ms = getTimeout(els[opts.currSlide], els[opts.nextSlide], opts, fwd);
+         if (opts.fx == 'shuffle')
+            ms -= opts.speedOut;
+      }
+		else if (opts.continuous && p.cyclePause) // continuous shows work off an after callback, not this timer logic
+			ms = 10;
+		if (ms > 0)
+			p.cycleTimeout = setTimeout(function(){ go(els, opts, 0, !opts.backwards); }, ms);
+	}
+}
+
+// invoked after transition
+$.fn.cycle.updateActivePagerLink = function(pager, currSlide, clsName) {
+   $(pager).each(function() {
+       $(this).children().removeClass(clsName).eq(currSlide).addClass(clsName);
+   });
+};
+
+// calculate timeout value for current transition
+function getTimeout(curr, next, opts, fwd) {
+	if (opts.timeoutFn) {
+		// call user provided calc fn
+		var t = opts.timeoutFn.call(curr,curr,next,opts,fwd);
+		while (opts.fx != 'none' && (t - opts.speed) < 250) // sanitize timeout
+			t += opts.speed;
+		debug('calculated timeout: ' + t + '; speed: ' + opts.speed);
+		if (t !== false)
+			return t;
+	}
+	return opts.timeout;
+}
+
+// expose next/prev function, caller must pass in state
+$.fn.cycle.next = function(opts) { advance(opts,1); };
+$.fn.cycle.prev = function(opts) { advance(opts,0);};
+
+// advance slide forward or back
+function advance(opts, moveForward) {
+	var val = moveForward ? 1 : -1;
+	var els = opts.elements;
+	var p = opts.$cont[0], timeout = p.cycleTimeout;
+	if (timeout) {
+		clearTimeout(timeout);
+		p.cycleTimeout = 0;
+	}
+	if (opts.random && val < 0) {
+		// move back to the previously display slide
+		opts.randomIndex--;
+		if (--opts.randomIndex == -2)
+			opts.randomIndex = els.length-2;
+		else if (opts.randomIndex == -1)
+			opts.randomIndex = els.length-1;
+		opts.nextSlide = opts.randomMap[opts.randomIndex];
+	}
+	else if (opts.random) {
+		opts.nextSlide = opts.randomMap[opts.randomIndex];
+	}
+	else {
+		opts.nextSlide = opts.currSlide + val;
+		if (opts.nextSlide < 0) {
+			if (opts.nowrap) return false;
+			opts.nextSlide = els.length - 1;
+		}
+		else if (opts.nextSlide >= els.length) {
+			if (opts.nowrap) return false;
+			opts.nextSlide = 0;
+		}
+	}
+
+	var cb = opts.onPrevNextEvent || opts.prevNextClick; // prevNextClick is deprecated
+	if ($.isFunction(cb))
+		cb(val > 0, opts.nextSlide, els[opts.nextSlide]);
+	go(els, opts, 1, moveForward);
+	return false;
+}
+
+function buildPager(els, opts) {
+	var $p = $(opts.pager);
+	$.each(els, function(i,o) {
+		$.fn.cycle.createPagerAnchor(i,o,$p,els,opts);
+	});
+	opts.updateActivePagerLink(opts.pager, opts.startingSlide, opts.activePagerClass);
+}
+
+$.fn.cycle.createPagerAnchor = function(i, el, $p, els, opts) {
+	var a;
+	if ($.isFunction(opts.pagerAnchorBuilder)) {
+		a = opts.pagerAnchorBuilder(i,el);
+		debug('pagerAnchorBuilder('+i+', el) returned: ' + a);
+	}
+	else
+		a = '<a href="#">'+(i+1)+'</a>';
+		
+	if (!a)
+		return;
+	var $a = $(a);
+	// don't reparent if anchor is in the dom
+	if ($a.parents('body').length === 0) {
+		var arr = [];
+		if ($p.length > 1) {
+			$p.each(function() {
+				var $clone = $a.clone(true);
+				$(this).append($clone);
+				arr.push($clone[0]);
+			});
+			$a = $(arr);
+		}
+		else {
+			$a.appendTo($p);
+		}
+	}
+
+	opts.pagerAnchors =  opts.pagerAnchors || [];
+	opts.pagerAnchors.push($a);
+	
+	var pagerFn = function(e) {
+		e.preventDefault();
+		opts.nextSlide = i;
+		var p = opts.$cont[0], timeout = p.cycleTimeout;
+		if (timeout) {
+			clearTimeout(timeout);
+			p.cycleTimeout = 0;
+		}
+		var cb = opts.onPagerEvent || opts.pagerClick; // pagerClick is deprecated
+		if ($.isFunction(cb))
+			cb(opts.nextSlide, els[opts.nextSlide]);
+		go(els,opts,1,opts.currSlide < i); // trigger the trans
+//		return false; // <== allow bubble
+	};
+	
+	if ( /mouseenter|mouseover/i.test(opts.pagerEvent) ) {
+		$a.hover(pagerFn, function(){/* no-op */} );
+	}
+	else {
+		$a.bind(opts.pagerEvent, pagerFn);
+	}
+	
+	if ( ! /^click/.test(opts.pagerEvent) && !opts.allowPagerClickBubble)
+		$a.bind('click.cycle', function(){return false;}); // suppress click
+	
+	var cont = opts.$cont[0];
+	var pauseFlag = false; // https://github.com/malsup/cycle/issues/44
+	if (opts.pauseOnPagerHover) {
+		$a.hover(
+			function() { 
+				pauseFlag = true;
+				cont.cyclePause++; 
+				triggerPause(cont,true,true);
+			}, function() { 
+				if (pauseFlag)
+					cont.cyclePause--; 
+				triggerPause(cont,true,true);
+			} 
+		);
+	}
+};
+
+// helper fn to calculate the number of slides between the current and the next
+$.fn.cycle.hopsFromLast = function(opts, fwd) {
+	var hops, l = opts.lastSlide, c = opts.currSlide;
+	if (fwd)
+		hops = c > l ? c - l : opts.slideCount - l;
+	else
+		hops = c < l ? l - c : l + opts.slideCount - c;
+	return hops;
+};
+
+// fix clearType problems in ie6 by setting an explicit bg color
+// (otherwise text slides look horrible during a fade transition)
+function clearTypeFix($slides) {
+	debug('applying clearType background-color hack');
+	function hex(s) {
+		s = parseInt(s,10).toString(16);
+		return s.length < 2 ? '0'+s : s;
+	}
+	function getBg(e) {
+		for ( ; e && e.nodeName.toLowerCase() != 'html'; e = e.parentNode) {
+			var v = $.css(e,'background-color');
+			if (v && v.indexOf('rgb') >= 0 ) {
+				var rgb = v.match(/\d+/g);
+				return '#'+ hex(rgb[0]) + hex(rgb[1]) + hex(rgb[2]);
+			}
+			if (v && v != 'transparent')
+				return v;
+		}
+		return '#ffffff';
+	}
+	$slides.each(function() { $(this).css('background-color', getBg(this)); });
+}
+
+// reset common props before the next transition
+$.fn.cycle.commonReset = function(curr,next,opts,w,h,rev) {
+	$(opts.elements).not(curr).hide();
+	if (typeof opts.cssBefore.opacity == 'undefined')
+		opts.cssBefore.opacity = 1;
+	opts.cssBefore.display = 'block';
+	if (opts.slideResize && w !== false && next.cycleW > 0)
+		opts.cssBefore.width = next.cycleW;
+	if (opts.slideResize && h !== false && next.cycleH > 0)
+		opts.cssBefore.height = next.cycleH;
+	opts.cssAfter = opts.cssAfter || {};
+	opts.cssAfter.display = 'none';
+	$(curr).css('zIndex',opts.slideCount + (rev === true ? 1 : 0));
+	$(next).css('zIndex',opts.slideCount + (rev === true ? 0 : 1));
+};
+
+// the actual fn for effecting a transition
+$.fn.cycle.custom = function(curr, next, opts, cb, fwd, speedOverride) {
+	var $l = $(curr), $n = $(next);
+	var speedIn = opts.speedIn, speedOut = opts.speedOut, easeIn = opts.easeIn, easeOut = opts.easeOut, animInDelay = opts.animInDelay, animOutDelay = opts.animOutDelay;
+	$n.css(opts.cssBefore);
+	if (speedOverride) {
+		if (typeof speedOverride == 'number')
+			speedIn = speedOut = speedOverride;
+		else
+			speedIn = speedOut = 1;
+		easeIn = easeOut = null;
+	}
+	var fn = function() {
+		$n.delay(animInDelay).animate(opts.animIn, speedIn, easeIn, function() {
+			cb();
+		});
+	};
+	$l.delay(animOutDelay).animate(opts.animOut, speedOut, easeOut, function() {
+		$l.css(opts.cssAfter);
+		if (!opts.sync) 
+			fn();
+	});
+	if (opts.sync) fn();
+};
+
+// transition definitions - only fade is defined here, transition pack defines the rest
+$.fn.cycle.transitions = {
+	fade: function($cont, $slides, opts) {
+		$slides.not(':eq('+opts.currSlide+')').css('opacity',0);
+		opts.before.push(function(curr,next,opts) {
+			$.fn.cycle.commonReset(curr,next,opts);
+			opts.cssBefore.opacity = 0;
+		});
+		opts.animIn	   = { opacity: 1 };
+		opts.animOut   = { opacity: 0 };
+		opts.cssBefore = { top: 0, left: 0 };
+	}
+};
+
+$.fn.cycle.ver = function() { return ver; };
+
+// override these globally if you like (they are all optional)
+$.fn.cycle.defaults = {
+    activePagerClass: 'activeSlide', // class name used for the active pager link
+    after:            null,     // transition callback (scope set to element that was shown):  function(currSlideElement, nextSlideElement, options, forwardFlag)
+    allowPagerClickBubble: false, // allows or prevents click event on pager anchors from bubbling
+    animIn:           null,     // properties that define how the slide animates in
+    animInDelay:      0,        // allows delay before next slide transitions in	
+    animOut:          null,     // properties that define how the slide animates out
+    animOutDelay:     0,        // allows delay before current slide transitions out
+    aspect:           false,    // preserve aspect ratio during fit resizing, cropping if necessary (must be used with fit option)
+    autostop:         0,        // true to end slideshow after X transitions (where X == slide count)
+    autostopCount:    0,        // number of transitions (optionally used with autostop to define X)
+    backwards:        false,    // true to start slideshow at last slide and move backwards through the stack
+    before:           null,     // transition callback (scope set to element to be shown):     function(currSlideElement, nextSlideElement, options, forwardFlag)
+    center:           null,     // set to true to have cycle add top/left margin to each slide (use with width and height options)
+    cleartype:        !$.support.opacity,  // true if clearType corrections should be applied (for IE)
+    cleartypeNoBg:    false,    // set to true to disable extra cleartype fixing (leave false to force background color setting on slides)
+    containerResize:  1,        // resize container to fit largest slide
+    containerResizeHeight:  0,  // resize containers height to fit the largest slide but leave the width dynamic
+    continuous:       0,        // true to start next transition immediately after current one completes
+    cssAfter:         null,     // properties that defined the state of the slide after transitioning out
+    cssBefore:        null,     // properties that define the initial state of the slide before transitioning in
+    delay:            0,        // additional delay (in ms) for first transition (hint: can be negative)
+    easeIn:           null,     // easing for "in" transition
+    easeOut:          null,     // easing for "out" transition
+    easing:           null,     // easing method for both in and out transitions
+    end:              null,     // callback invoked when the slideshow terminates (use with autostop or nowrap options): function(options)
+    fastOnEvent:      0,        // force fast transitions when triggered manually (via pager or prev/next); value == time in ms
+    fit:              0,        // force slides to fit container
+    fx:               'fade',   // name of transition effect (or comma separated names, ex: 'fade,scrollUp,shuffle')
+    fxFn:             null,     // function used to control the transition: function(currSlideElement, nextSlideElement, options, afterCalback, forwardFlag)
+    height:           'auto',   // container height (if the 'fit' option is true, the slides will be set to this height as well)
+    manualTrump:      true,     // causes manual transition to stop an active transition instead of being ignored
+    metaAttr:         'cycle',  // data- attribute that holds the option data for the slideshow
+    next:             null,     // element, jQuery object, or jQuery selector string for the element to use as event trigger for next slide
+    nowrap:           0,        // true to prevent slideshow from wrapping
+    onPagerEvent:     null,     // callback fn for pager events: function(zeroBasedSlideIndex, slideElement)
+    onPrevNextEvent:  null,     // callback fn for prev/next events: function(isNext, zeroBasedSlideIndex, slideElement)
+    pager:            null,     // element, jQuery object, or jQuery selector string for the element to use as pager container
+    pagerAnchorBuilder: null,   // callback fn for building anchor links:  function(index, DOMelement)
+    pagerEvent:       'click.cycle', // name of event which drives the pager navigation
+    pause:            0,        // true to enable "pause on hover"
+    pauseOnPagerHover: 0,       // true to pause when hovering over pager link
+    prev:             null,     // element, jQuery object, or jQuery selector string for the element to use as event trigger for previous slide
+    prevNextEvent:    'click.cycle',// event which drives the manual transition to the previous or next slide
+    random:           0,        // true for random, false for sequence (not applicable to shuffle fx)
+    randomizeEffects: 1,        // valid when multiple effects are used; true to make the effect sequence random
+    requeueOnImageNotLoaded: true, // requeue the slideshow if any image slides are not yet loaded
+    requeueTimeout:   250,      // ms delay for requeue
+    rev:              0,        // causes animations to transition in reverse (for effects that support it such as scrollHorz/scrollVert/shuffle)
+    shuffle:          null,     // coords for shuffle animation, ex: { top:15, left: 200 }
+    skipInitializationCallbacks: false, // set to true to disable the first before/after callback that occurs prior to any transition
+    slideExpr:        null,     // expression for selecting slides (if something other than all children is required)
+    slideResize:      1,        // force slide width/height to fixed size before every transition
+    speed:            1000,     // speed of the transition (any valid fx speed value)
+    speedIn:          null,     // speed of the 'in' transition
+    speedOut:         null,     // speed of the 'out' transition
+    startingSlide:    undefined,// zero-based index of the first slide to be displayed
+    sync:             1,        // true if in/out transitions should occur simultaneously
+    timeout:          4000,     // milliseconds between slide transitions (0 to disable auto advance)
+    timeoutFn:        null,     // callback for determining per-slide timeout value:  function(currSlideElement, nextSlideElement, options, forwardFlag)
+    updateActivePagerLink: null,// callback fn invoked to update the active pager link (adds/removes activePagerClass style)
+    width:            null      // container width (if the 'fit' option is true, the slides will be set to this width as well)
+};
+
+})(jQuery);
+
+
+/*!
  * jQuery Cycle Plugin Transition Definitions
  * This script is a plugin for the jQuery Cycle Plugin
  * Examples and documentation at: http://malsup.com/jquery/cycle/
- * Copyright (c) 2007-2008 M. Alsup
- * Version:	 2.72
+ * Copyright (c) 2007-2010 M. Alsup
+ * Version:	 2.73
  * Dual licensed under the MIT and GPL licenses:
  * http://www.opensource.org/licenses/mit-license.php
  * http://www.gnu.org/licenses/gpl.html
  */
-(function($){$.fn.cycle.transitions.none=function($cont,$slides,opts){opts.fxFn=function(curr,next,opts,after){$(next).show();$(curr).hide();after();};};$.fn.cycle.transitions.scrollUp=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssBefore={top:h,left:0};opts.cssFirst={top:0};opts.animIn={top:0};opts.animOut={top:-h};};$.fn.cycle.transitions.scrollDown=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssFirst={top:0};opts.cssBefore={top:-h,left:0};opts.animIn={top:0};opts.animOut={top:h};};$.fn.cycle.transitions.scrollLeft=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst={left:0};opts.cssBefore={left:w,top:0};opts.animIn={left:0};opts.animOut={left:0-w};};$.fn.cycle.transitions.scrollRight=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst={left:0};opts.cssBefore={left:-w,top:0};opts.animIn={left:0};opts.animOut={left:w};};$.fn.cycle.transitions.scrollHorz=function($cont,$slides,opts){$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts,fwd){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.left=fwd?(next.cycleW-1):(1-next.cycleW);opts.animOut.left=fwd?-curr.cycleW:curr.cycleW;});opts.cssFirst={left:0};opts.cssBefore={top:0};opts.animIn={left:0};opts.animOut={top:0};};$.fn.cycle.transitions.scrollVert=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push(function(curr,next,opts,fwd){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.top=fwd?(1-next.cycleH):(next.cycleH-1);opts.animOut.top=fwd?curr.cycleH:-curr.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0};opts.animIn={top:0};opts.animOut={left:0};};$.fn.cycle.transitions.slideX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;});opts.cssBefore={left:0,top:0,width:0};opts.animIn={width:"show"};opts.animOut={width:0};};$.fn.cycle.transitions.slideY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;});opts.cssBefore={left:0,top:0,height:0};opts.animIn={height:"show"};opts.animOut={height:0};};$.fn.cycle.transitions.shuffle=function($cont,$slides,opts){var i,w=$cont.css("overflow","visible").width();$slides.css({left:0,top:0});opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);});if(!opts.speedAdjusted){opts.speed=opts.speed/2;opts.speedAdjusted=true;}opts.random=0;opts.shuffle=opts.shuffle||{left:-w,top:15};opts.els=[];for(i=0;i<$slides.length;i++){opts.els.push($slides[i]);}for(i=0;i<opts.currSlide;i++){opts.els.push(opts.els.shift());}opts.fxFn=function(curr,next,opts,cb,fwd){var $el=fwd?$(curr):$(next);$(next).css(opts.cssBefore);var count=opts.slideCount;$el.animate(opts.shuffle,opts.speedIn,opts.easeIn,function(){var hops=$.fn.cycle.hopsFromLast(opts,fwd);for(var k=0;k<hops;k++){fwd?opts.els.push(opts.els.shift()):opts.els.unshift(opts.els.pop());}if(fwd){for(var i=0,len=opts.els.length;i<len;i++){$(opts.els[i]).css("z-index",len-i+count);}}else{var z=$(curr).css("z-index");$el.css("z-index",parseInt(z)+1+count);}$el.animate({left:0,top:0},opts.speedOut,opts.easeOut,function(){$(fwd?this:curr).hide();if(cb){cb();}});});};opts.cssBefore={display:"block",opacity:1,top:0,left:0};};$.fn.cycle.transitions.turnUp=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=next.cycleH;opts.animIn.height=next.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0,height:0};opts.animIn={top:0};opts.animOut={height:0};};$.fn.cycle.transitions.turnDown=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0,top:0,height:0};opts.animOut={height:0};};$.fn.cycle.transitions.turnLeft=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=next.cycleW;opts.animIn.width=next.cycleW;});opts.cssBefore={top:0,width:0};opts.animIn={left:0};opts.animOut={width:0};};$.fn.cycle.transitions.turnRight=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW;});opts.cssBefore={top:0,left:0,width:0};opts.animIn={left:0};opts.animOut={width:0};};$.fn.cycle.transitions.zoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false,true);opts.cssBefore.top=next.cycleH/2;opts.cssBefore.left=next.cycleW/2;opts.animIn={top:0,left:0,width:next.cycleW,height:next.cycleH};opts.animOut={width:0,height:0,top:curr.cycleH/2,left:curr.cycleW/2};});opts.cssFirst={top:0,left:0};opts.cssBefore={width:0,height:0};};$.fn.cycle.transitions.fadeZoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false);opts.cssBefore.left=next.cycleW/2;opts.cssBefore.top=next.cycleH/2;opts.animIn={top:0,left:0,width:next.cycleW,height:next.cycleH};});opts.cssBefore={width:0,height:0};opts.animOut={opacity:0};};$.fn.cycle.transitions.blindX=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW;});opts.cssBefore={left:w,top:0};opts.animIn={left:0};opts.animOut={left:w};};$.fn.cycle.transitions.blindY=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssBefore={top:h,left:0};opts.animIn={top:0};opts.animOut={top:h};};$.fn.cycle.transitions.blindZ=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();var w=$cont.width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssBefore={top:h,left:w};opts.animIn={top:0,left:0};opts.animOut={top:h,left:w};};$.fn.cycle.transitions.growX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=this.cycleW/2;opts.animIn={left:0,width:this.cycleW};opts.animOut={left:0};});opts.cssBefore={width:0,top:0};};$.fn.cycle.transitions.growY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=this.cycleH/2;opts.animIn={top:0,height:this.cycleH};opts.animOut={top:0};});opts.cssBefore={height:0,left:0};};$.fn.cycle.transitions.curtainX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true,true);opts.cssBefore.left=next.cycleW/2;opts.animIn={left:0,width:this.cycleW};opts.animOut={left:curr.cycleW/2,width:0};});opts.cssBefore={top:0,width:0};};$.fn.cycle.transitions.curtainY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false,true);opts.cssBefore.top=next.cycleH/2;opts.animIn={top:0,height:next.cycleH};opts.animOut={top:curr.cycleH/2,height:0};});opts.cssBefore={left:0,height:0};};$.fn.cycle.transitions.cover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);if(d=="right"){opts.cssBefore.left=-w;}else{if(d=="up"){opts.cssBefore.top=h;}else{if(d=="down"){opts.cssBefore.top=-h;}else{opts.cssBefore.left=w;}}}});opts.animIn={left:0,top:0};opts.animOut={opacity:1};opts.cssBefore={top:0,left:0};};$.fn.cycle.transitions.uncover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(d=="right"){opts.animOut.left=w;}else{if(d=="up"){opts.animOut.top=-h;}else{if(d=="down"){opts.animOut.top=h;}else{opts.animOut.left=-w;}}}});opts.animIn={left:0,top:0};opts.animOut={opacity:1};opts.cssBefore={top:0,left:0};};$.fn.cycle.transitions.toss=function($cont,$slides,opts){var w=$cont.css("overflow","visible").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(!opts.animOut.left&&!opts.animOut.top){opts.animOut={left:w*2,top:-h/2,opacity:0};}else{opts.animOut.opacity=0;}});opts.cssBefore={left:0,top:0};opts.animIn={left:0};};$.fn.cycle.transitions.wipe=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.cssBefore=opts.cssBefore||{};var clip;if(opts.clip){if(/l2r/.test(opts.clip)){clip="rect(0px 0px "+h+"px 0px)";}else{if(/r2l/.test(opts.clip)){clip="rect(0px "+w+"px "+h+"px "+w+"px)";}else{if(/t2b/.test(opts.clip)){clip="rect(0px "+w+"px 0px 0px)";}else{if(/b2t/.test(opts.clip)){clip="rect("+h+"px "+w+"px "+h+"px 0px)";}else{if(/zoom/.test(opts.clip)){var top=parseInt(h/2);var left=parseInt(w/2);clip="rect("+top+"px "+left+"px "+top+"px "+left+"px)";}}}}}}opts.cssBefore.clip=opts.cssBefore.clip||clip||"rect(0px 0px 0px 0px)";var d=opts.cssBefore.clip.match(/(\d+)/g);var t=parseInt(d[0]),r=parseInt(d[1]),b=parseInt(d[2]),l=parseInt(d[3]);opts.before.push(function(curr,next,opts){if(curr==next){return;}var $curr=$(curr),$next=$(next);$.fn.cycle.commonReset(curr,next,opts,true,true,false);opts.cssAfter.display="block";var step=1,count=parseInt((opts.speedIn/13))-1;(function f(){var tt=t?t-parseInt(step*(t/count)):0;var ll=l?l-parseInt(step*(l/count)):0;var bb=b<h?b+parseInt(step*((h-b)/count||1)):h;var rr=r<w?r+parseInt(step*((w-r)/count||1)):w;$next.css({clip:"rect("+tt+"px "+rr+"px "+bb+"px "+ll+"px)"});(step++<=count)?setTimeout(f,13):$curr.css("display","none");})();});opts.cssBefore={display:"block",opacity:1,top:0,left:0};opts.animIn={left:0};opts.animOut={left:0};};})(jQuery);
\ No newline at end of file
+(function($) {
+"use strict";
+
+//
+// These functions define slide initialization and properties for the named
+// transitions. To save file size feel free to remove any of these that you
+// don't need.
+//
+$.fn.cycle.transitions.none = function($cont, $slides, opts) {
+	opts.fxFn = function(curr,next,opts,after){
+		$(next).show();
+		$(curr).hide();
+		after();
+	};
+};
+
+// not a cross-fade, fadeout only fades out the top slide
+$.fn.cycle.transitions.fadeout = function($cont, $slides, opts) {
+	$slides.not(':eq('+opts.currSlide+')').css({ display: 'block', 'opacity': 1 });
+	opts.before.push(function(curr,next,opts,w,h,rev) {
+		$(curr).css('zIndex',opts.slideCount + (rev !== true ? 1 : 0));
+		$(next).css('zIndex',opts.slideCount + (rev !== true ? 0 : 1));
+	});
+	opts.animIn.opacity = 1;
+	opts.animOut.opacity = 0;
+	opts.cssBefore.opacity = 1;
+	opts.cssBefore.display = 'block';
+	opts.cssAfter.zIndex = 0;
+};
+
+// scrollUp/Down/Left/Right
+$.fn.cycle.transitions.scrollUp = function($cont, $slides, opts) {
+	$cont.css('overflow','hidden');
+	opts.before.push($.fn.cycle.commonReset);
+	var h = $cont.height();
+	opts.cssBefore.top = h;
+	opts.cssBefore.left = 0;
+	opts.cssFirst.top = 0;
+	opts.animIn.top = 0;
+	opts.animOut.top = -h;
+};
+$.fn.cycle.transitions.scrollDown = function($cont, $slides, opts) {
+	$cont.css('overflow','hidden');
+	opts.before.push($.fn.cycle.commonReset);
+	var h = $cont.height();
+	opts.cssFirst.top = 0;
+	opts.cssBefore.top = -h;
+	opts.cssBefore.left = 0;
+	opts.animIn.top = 0;
+	opts.animOut.top = h;
+};
+$.fn.cycle.transitions.scrollLeft = function($cont, $slides, opts) {
+	$cont.css('overflow','hidden');
+	opts.before.push($.fn.cycle.commonReset);
+	var w = $cont.width();
+	opts.cssFirst.left = 0;
+	opts.cssBefore.left = w;
+	opts.cssBefore.top = 0;
+	opts.animIn.left = 0;
+	opts.animOut.left = 0-w;
+};
+$.fn.cycle.transitions.scrollRight = function($cont, $slides, opts) {
+	$cont.css('overflow','hidden');
+	opts.before.push($.fn.cycle.commonReset);
+	var w = $cont.width();
+	opts.cssFirst.left = 0;
+	opts.cssBefore.left = -w;
+	opts.cssBefore.top = 0;
+	opts.animIn.left = 0;
+	opts.animOut.left = w;
+};
+$.fn.cycle.transitions.scrollHorz = function($cont, $slides, opts) {
+	$cont.css('overflow','hidden').width();
+	opts.before.push(function(curr, next, opts, fwd) {
+		if (opts.rev)
+			fwd = !fwd;
+		$.fn.cycle.commonReset(curr,next,opts);
+		opts.cssBefore.left = fwd ? (next.cycleW-1) : (1-next.cycleW);
+		opts.animOut.left = fwd ? -curr.cycleW : curr.cycleW;
+	});
+	opts.cssFirst.left = 0;
+	opts.cssBefore.top = 0;
+	opts.animIn.left = 0;
+	opts.animOut.top = 0;
+};
+$.fn.cycle.transitions.scrollVert = function($cont, $slides, opts) {
+	$cont.css('overflow','hidden');
+	opts.before.push(function(curr, next, opts, fwd) {
+		if (opts.rev)
+			fwd = !fwd;
+		$.fn.cycle.commonReset(curr,next,opts);
+		opts.cssBefore.top = fwd ? (1-next.cycleH) : (next.cycleH-1);
+		opts.animOut.top = fwd ? curr.cycleH : -curr.cycleH;
+	});
+	opts.cssFirst.top = 0;
+	opts.cssBefore.left = 0;
+	opts.animIn.top = 0;
+	opts.animOut.left = 0;
+};
+
+// slideX/slideY
+$.fn.cycle.transitions.slideX = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$(opts.elements).not(curr).hide();
+		$.fn.cycle.commonReset(curr,next,opts,false,true);
+		opts.animIn.width = next.cycleW;
+	});
+	opts.cssBefore.left = 0;
+	opts.cssBefore.top = 0;
+	opts.cssBefore.width = 0;
+	opts.animIn.width = 'show';
+	opts.animOut.width = 0;
+};
+$.fn.cycle.transitions.slideY = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$(opts.elements).not(curr).hide();
+		$.fn.cycle.commonReset(curr,next,opts,true,false);
+		opts.animIn.height = next.cycleH;
+	});
+	opts.cssBefore.left = 0;
+	opts.cssBefore.top = 0;
+	opts.cssBefore.height = 0;
+	opts.animIn.height = 'show';
+	opts.animOut.height = 0;
+};
+
+// shuffle
+$.fn.cycle.transitions.shuffle = function($cont, $slides, opts) {
+	var i, w = $cont.css('overflow', 'visible').width();
+	$slides.css({left: 0, top: 0});
+	opts.before.push(function(curr,next,opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,true,true);
+	});
+	// only adjust speed once!
+	if (!opts.speedAdjusted) {
+		opts.speed = opts.speed / 2; // shuffle has 2 transitions
+		opts.speedAdjusted = true;
+	}
+	opts.random = 0;
+	opts.shuffle = opts.shuffle || {left:-w, top:15};
+	opts.els = [];
+	for (i=0; i < $slides.length; i++)
+		opts.els.push($slides[i]);
+
+	for (i=0; i < opts.currSlide; i++)
+		opts.els.push(opts.els.shift());
+
+	// custom transition fn (hat tip to Benjamin Sterling for this bit of sweetness!)
+	opts.fxFn = function(curr, next, opts, cb, fwd) {
+		if (opts.rev)
+			fwd = !fwd;
+		var $el = fwd ? $(curr) : $(next);
+		$(next).css(opts.cssBefore);
+		var count = opts.slideCount;
+		$el.animate(opts.shuffle, opts.speedIn, opts.easeIn, function() {
+			var hops = $.fn.cycle.hopsFromLast(opts, fwd);
+			for (var k=0; k < hops; k++) {
+				if (fwd)
+					opts.els.push(opts.els.shift());
+				else
+					opts.els.unshift(opts.els.pop());
+			}
+			if (fwd) {
+				for (var i=0, len=opts.els.length; i < len; i++)
+					$(opts.els[i]).css('z-index', len-i+count);
+			}
+			else {
+				var z = $(curr).css('z-index');
+				$el.css('z-index', parseInt(z,10)+1+count);
+			}
+			$el.animate({left:0, top:0}, opts.speedOut, opts.easeOut, function() {
+				$(fwd ? this : curr).hide();
+				if (cb) cb();
+			});
+		});
+	};
+	$.extend(opts.cssBefore, { display: 'block', opacity: 1, top: 0, left: 0 });
+};
+
+// turnUp/Down/Left/Right
+$.fn.cycle.transitions.turnUp = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,false);
+		opts.cssBefore.top = next.cycleH;
+		opts.animIn.height = next.cycleH;
+		opts.animOut.width = next.cycleW;
+	});
+	opts.cssFirst.top = 0;
+	opts.cssBefore.left = 0;
+	opts.cssBefore.height = 0;
+	opts.animIn.top = 0;
+	opts.animOut.height = 0;
+};
+$.fn.cycle.transitions.turnDown = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,false);
+		opts.animIn.height = next.cycleH;
+		opts.animOut.top   = curr.cycleH;
+	});
+	opts.cssFirst.top = 0;
+	opts.cssBefore.left = 0;
+	opts.cssBefore.top = 0;
+	opts.cssBefore.height = 0;
+	opts.animOut.height = 0;
+};
+$.fn.cycle.transitions.turnLeft = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,false,true);
+		opts.cssBefore.left = next.cycleW;
+		opts.animIn.width = next.cycleW;
+	});
+	opts.cssBefore.top = 0;
+	opts.cssBefore.width = 0;
+	opts.animIn.left = 0;
+	opts.animOut.width = 0;
+};
+$.fn.cycle.transitions.turnRight = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,false,true);
+		opts.animIn.width = next.cycleW;
+		opts.animOut.left = curr.cycleW;
+	});
+	$.extend(opts.cssBefore, { top: 0, left: 0, width: 0 });
+	opts.animIn.left = 0;
+	opts.animOut.width = 0;
+};
+
+// zoom
+$.fn.cycle.transitions.zoom = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,false,false,true);
+		opts.cssBefore.top = next.cycleH/2;
+		opts.cssBefore.left = next.cycleW/2;
+		$.extend(opts.animIn, { top: 0, left: 0, width: next.cycleW, height: next.cycleH });
+		$.extend(opts.animOut, { width: 0, height: 0, top: curr.cycleH/2, left: curr.cycleW/2 });
+	});
+	opts.cssFirst.top = 0;
+	opts.cssFirst.left = 0;
+	opts.cssBefore.width = 0;
+	opts.cssBefore.height = 0;
+};
+
+// fadeZoom
+$.fn.cycle.transitions.fadeZoom = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,false,false);
+		opts.cssBefore.left = next.cycleW/2;
+		opts.cssBefore.top = next.cycleH/2;
+		$.extend(opts.animIn, { top: 0, left: 0, width: next.cycleW, height: next.cycleH });
+	});
+	opts.cssBefore.width = 0;
+	opts.cssBefore.height = 0;
+	opts.animOut.opacity = 0;
+};
+
+// blindX
+$.fn.cycle.transitions.blindX = function($cont, $slides, opts) {
+	var w = $cont.css('overflow','hidden').width();
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts);
+		opts.animIn.width = next.cycleW;
+		opts.animOut.left   = curr.cycleW;
+	});
+	opts.cssBefore.left = w;
+	opts.cssBefore.top = 0;
+	opts.animIn.left = 0;
+	opts.animOut.left = w;
+};
+// blindY
+$.fn.cycle.transitions.blindY = function($cont, $slides, opts) {
+	var h = $cont.css('overflow','hidden').height();
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts);
+		opts.animIn.height = next.cycleH;
+		opts.animOut.top   = curr.cycleH;
+	});
+	opts.cssBefore.top = h;
+	opts.cssBefore.left = 0;
+	opts.animIn.top = 0;
+	opts.animOut.top = h;
+};
+// blindZ
+$.fn.cycle.transitions.blindZ = function($cont, $slides, opts) {
+	var h = $cont.css('overflow','hidden').height();
+	var w = $cont.width();
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts);
+		opts.animIn.height = next.cycleH;
+		opts.animOut.top   = curr.cycleH;
+	});
+	opts.cssBefore.top = h;
+	opts.cssBefore.left = w;
+	opts.animIn.top = 0;
+	opts.animIn.left = 0;
+	opts.animOut.top = h;
+	opts.animOut.left = w;
+};
+
+// growX - grow horizontally from centered 0 width
+$.fn.cycle.transitions.growX = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,false,true);
+		opts.cssBefore.left = this.cycleW/2;
+		opts.animIn.left = 0;
+		opts.animIn.width = this.cycleW;
+		opts.animOut.left = 0;
+	});
+	opts.cssBefore.top = 0;
+	opts.cssBefore.width = 0;
+};
+// growY - grow vertically from centered 0 height
+$.fn.cycle.transitions.growY = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,false);
+		opts.cssBefore.top = this.cycleH/2;
+		opts.animIn.top = 0;
+		opts.animIn.height = this.cycleH;
+		opts.animOut.top = 0;
+	});
+	opts.cssBefore.height = 0;
+	opts.cssBefore.left = 0;
+};
+
+// curtainX - squeeze in both edges horizontally
+$.fn.cycle.transitions.curtainX = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,false,true,true);
+		opts.cssBefore.left = next.cycleW/2;
+		opts.animIn.left = 0;
+		opts.animIn.width = this.cycleW;
+		opts.animOut.left = curr.cycleW/2;
+		opts.animOut.width = 0;
+	});
+	opts.cssBefore.top = 0;
+	opts.cssBefore.width = 0;
+};
+// curtainY - squeeze in both edges vertically
+$.fn.cycle.transitions.curtainY = function($cont, $slides, opts) {
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,false,true);
+		opts.cssBefore.top = next.cycleH/2;
+		opts.animIn.top = 0;
+		opts.animIn.height = next.cycleH;
+		opts.animOut.top = curr.cycleH/2;
+		opts.animOut.height = 0;
+	});
+	opts.cssBefore.height = 0;
+	opts.cssBefore.left = 0;
+};
+
+// cover - curr slide covered by next slide
+$.fn.cycle.transitions.cover = function($cont, $slides, opts) {
+	var d = opts.direction || 'left';
+	var w = $cont.css('overflow','hidden').width();
+	var h = $cont.height();
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts);
+		opts.cssAfter.display = '';
+		if (d == 'right')
+			opts.cssBefore.left = -w;
+		else if (d == 'up')
+			opts.cssBefore.top = h;
+		else if (d == 'down')
+			opts.cssBefore.top = -h;
+		else
+			opts.cssBefore.left = w;
+	});
+	opts.animIn.left = 0;
+	opts.animIn.top = 0;
+	opts.cssBefore.top = 0;
+	opts.cssBefore.left = 0;
+};
+
+// uncover - curr slide moves off next slide
+$.fn.cycle.transitions.uncover = function($cont, $slides, opts) {
+	var d = opts.direction || 'left';
+	var w = $cont.css('overflow','hidden').width();
+	var h = $cont.height();
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,true,true);
+		if (d == 'right')
+			opts.animOut.left = w;
+		else if (d == 'up')
+			opts.animOut.top = -h;
+		else if (d == 'down')
+			opts.animOut.top = h;
+		else
+			opts.animOut.left = -w;
+	});
+	opts.animIn.left = 0;
+	opts.animIn.top = 0;
+	opts.cssBefore.top = 0;
+	opts.cssBefore.left = 0;
+};
+
+// toss - move top slide and fade away
+$.fn.cycle.transitions.toss = function($cont, $slides, opts) {
+	var w = $cont.css('overflow','visible').width();
+	var h = $cont.height();
+	opts.before.push(function(curr, next, opts) {
+		$.fn.cycle.commonReset(curr,next,opts,true,true,true);
+		// provide default toss settings if animOut not provided
+		if (!opts.animOut.left && !opts.animOut.top)
+			$.extend(opts.animOut, { left: w*2, top: -h/2, opacity: 0 });
+		else
+			opts.animOut.opacity = 0;
+	});
+	opts.cssBefore.left = 0;
+	opts.cssBefore.top = 0;
+	opts.animIn.left = 0;
+};
+
+// wipe - clip animation
+$.fn.cycle.transitions.wipe = function($cont, $slides, opts) {
+	var w = $cont.css('overflow','hidden').width();
+	var h = $cont.height();
+	opts.cssBefore = opts.cssBefore || {};
+	var clip;
+	if (opts.clip) {
+		if (/l2r/.test(opts.clip))
+			clip = 'rect(0px 0px '+h+'px 0px)';
+		else if (/r2l/.test(opts.clip))
+			clip = 'rect(0px '+w+'px '+h+'px '+w+'px)';
+		else if (/t2b/.test(opts.clip))
+			clip = 'rect(0px '+w+'px 0px 0px)';
+		else if (/b2t/.test(opts.clip))
+			clip = 'rect('+h+'px '+w+'px '+h+'px 0px)';
+		else if (/zoom/.test(opts.clip)) {
+			var top = parseInt(h/2,10);
+			var left = parseInt(w/2,10);
+			clip = 'rect('+top+'px '+left+'px '+top+'px '+left+'px)';
+		}
+	}
+
+	opts.cssBefore.clip = opts.cssBefore.clip || clip || 'rect(0px 0px 0px 0px)';
+
+	var d = opts.cssBefore.clip.match(/(\d+)/g);
+	var t = parseInt(d[0],10), r = parseInt(d[1],10), b = parseInt(d[2],10), l = parseInt(d[3],10);
+
+	opts.before.push(function(curr, next, opts) {
+		if (curr == next) return;
+		var $curr = $(curr), $next = $(next);
+		$.fn.cycle.commonReset(curr,next,opts,true,true,false);
+		opts.cssAfter.display = 'block';
+
+		var step = 1, count = parseInt((opts.speedIn / 13),10) - 1;
+		(function f() {
+			var tt = t ? t - parseInt(step * (t/count),10) : 0;
+			var ll = l ? l - parseInt(step * (l/count),10) : 0;
+			var bb = b < h ? b + parseInt(step * ((h-b)/count || 1),10) : h;
+			var rr = r < w ? r + parseInt(step * ((w-r)/count || 1),10) : w;
+			$next.css({ clip: 'rect('+tt+'px '+rr+'px '+bb+'px '+ll+'px)' });
+			(step++ <= count) ? setTimeout(f, 13) : $curr.css('display', 'none');
+		})();
+	});
+	$.extend(opts.cssBefore, { display: 'block', opacity: 1, top: 0, left: 0 });
+	opts.animIn	   = { left: 0 };
+	opts.animOut   = { left: 0 };
+};
+
+})(jQuery);
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.cycle2.js elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.cycle2.js
--- elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.cycle2.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.cycle2.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,1547 @@
+/*!
+* jQuery Cycle2; version: 2.1.6 build: 20141007
+* http://jquery.malsup.com/cycle2/
+* Copyright (c) 2014 M. Alsup; Dual licensed: MIT/GPL
+*/
+
+/* Cycle2 core engine */
+;(function($) {
+"use strict";
+
+var version = '2.1.6';
+
+$.fn.cycle = function( options ) {
+    // fix mistakes with the ready state
+    var o;
+    if ( this.length === 0 && !$.isReady ) {
+        o = { s: this.selector, c: this.context };
+        $.fn.cycle.log('requeuing slideshow (dom not ready)');
+        $(function() {
+            $( o.s, o.c ).cycle(options);
+        });
+        return this;
+    }
+
+    return this.each(function() {
+        var data, opts, shortName, val;
+        var container = $(this);
+        var log = $.fn.cycle.log;
+
+        if ( container.data('cycle.opts') )
+            return; // already initialized
+
+        if ( container.data('cycle-log') === false || 
+            ( options && options.log === false ) ||
+            ( opts && opts.log === false) ) {
+            log = $.noop;
+        }
+
+        log('--c2 init--');
+        data = container.data();
+        for (var p in data) {
+            // allow props to be accessed sans 'cycle' prefix and log the overrides
+            if (data.hasOwnProperty(p) && /^cycle[A-Z]+/.test(p) ) {
+                val = data[p];
+                shortName = p.match(/^cycle(.*)/)[1].replace(/^[A-Z]/, lowerCase);
+                log(shortName+':', val, '('+typeof val +')');
+                data[shortName] = val;
+            }
+        }
+
+        opts = $.extend( {}, $.fn.cycle.defaults, data, options || {});
+
+        opts.timeoutId = 0;
+        opts.paused = opts.paused || false; // #57
+        opts.container = container;
+        opts._maxZ = opts.maxZ;
+
+        opts.API = $.extend ( { _container: container }, $.fn.cycle.API );
+        opts.API.log = log;
+        opts.API.trigger = function( eventName, args ) {
+            opts.container.trigger( eventName, args );
+            return opts.API;
+        };
+
+        container.data( 'cycle.opts', opts );
+        container.data( 'cycle.API', opts.API );
+
+        // opportunity for plugins to modify opts and API
+        opts.API.trigger('cycle-bootstrap', [ opts, opts.API ]);
+
+        opts.API.addInitialSlides();
+        opts.API.preInitSlideshow();
+
+        if ( opts.slides.length )
+            opts.API.initSlideshow();
+    });
+};
+
+$.fn.cycle.API = {
+    opts: function() {
+        return this._container.data( 'cycle.opts' );
+    },
+    addInitialSlides: function() {
+        var opts = this.opts();
+        var slides = opts.slides;
+        opts.slideCount = 0;
+        opts.slides = $(); // empty set
+        
+        // add slides that already exist
+        slides = slides.jquery ? slides : opts.container.find( slides );
+
+        if ( opts.random ) {
+            slides.sort(function() {return Math.random() - 0.5;});
+        }
+
+        opts.API.add( slides );
+    },
+
+    preInitSlideshow: function() {
+        var opts = this.opts();
+        opts.API.trigger('cycle-pre-initialize', [ opts ]);
+        var tx = $.fn.cycle.transitions[opts.fx];
+        if (tx && $.isFunction(tx.preInit))
+            tx.preInit( opts );
+        opts._preInitialized = true;
+    },
+
+    postInitSlideshow: function() {
+        var opts = this.opts();
+        opts.API.trigger('cycle-post-initialize', [ opts ]);
+        var tx = $.fn.cycle.transitions[opts.fx];
+        if (tx && $.isFunction(tx.postInit))
+            tx.postInit( opts );
+    },
+
+    initSlideshow: function() {
+        var opts = this.opts();
+        var pauseObj = opts.container;
+        var slideOpts;
+        opts.API.calcFirstSlide();
+
+        if ( opts.container.css('position') == 'static' )
+            opts.container.css('position', 'relative');
+
+        $(opts.slides[opts.currSlide]).css({
+            opacity: 1,
+            display: 'block',
+            visibility: 'visible'
+        });
+        opts.API.stackSlides( opts.slides[opts.currSlide], opts.slides[opts.nextSlide], !opts.reverse );
+
+        if ( opts.pauseOnHover ) {
+            // allow pauseOnHover to specify an element
+            if ( opts.pauseOnHover !== true )
+                pauseObj = $( opts.pauseOnHover );
+
+            pauseObj.hover(
+                function(){ opts.API.pause( true ); }, 
+                function(){ opts.API.resume( true ); }
+            );
+        }
+
+        // stage initial transition
+        if ( opts.timeout ) {
+            slideOpts = opts.API.getSlideOpts( opts.currSlide );
+            opts.API.queueTransition( slideOpts, slideOpts.timeout + opts.delay );
+        }
+
+        opts._initialized = true;
+        opts.API.updateView( true );
+        opts.API.trigger('cycle-initialized', [ opts ]);
+        opts.API.postInitSlideshow();
+    },
+
+    pause: function( hover ) {
+        var opts = this.opts(),
+            slideOpts = opts.API.getSlideOpts(),
+            alreadyPaused = opts.hoverPaused || opts.paused;
+
+        if ( hover )
+            opts.hoverPaused = true; 
+        else
+            opts.paused = true;
+
+        if ( ! alreadyPaused ) {
+            opts.container.addClass('cycle-paused');
+            opts.API.trigger('cycle-paused', [ opts ]).log('cycle-paused');
+
+            if ( slideOpts.timeout ) {
+                clearTimeout( opts.timeoutId );
+                opts.timeoutId = 0;
+                
+                // determine how much time is left for the current slide
+                opts._remainingTimeout -= ( $.now() - opts._lastQueue );
+                if ( opts._remainingTimeout < 0 || isNaN(opts._remainingTimeout) )
+                    opts._remainingTimeout = undefined;
+            }
+        }
+    },
+
+    resume: function( hover ) {
+        var opts = this.opts(),
+            alreadyResumed = !opts.hoverPaused && !opts.paused,
+            remaining;
+
+        if ( hover )
+            opts.hoverPaused = false; 
+        else
+            opts.paused = false;
+
+    
+        if ( ! alreadyResumed ) {
+            opts.container.removeClass('cycle-paused');
+            // #gh-230; if an animation is in progress then don't queue a new transition; it will
+            // happen naturally
+            if ( opts.slides.filter(':animated').length === 0 )
+                opts.API.queueTransition( opts.API.getSlideOpts(), opts._remainingTimeout );
+            opts.API.trigger('cycle-resumed', [ opts, opts._remainingTimeout ] ).log('cycle-resumed');
+        }
+    },
+
+    add: function( slides, prepend ) {
+        var opts = this.opts();
+        var oldSlideCount = opts.slideCount;
+        var startSlideshow = false;
+        var len;
+
+        if ( $.type(slides) == 'string')
+            slides = $.trim( slides );
+
+        $( slides ).each(function(i) {
+            var slideOpts;
+            var slide = $(this);
+
+            if ( prepend )
+                opts.container.prepend( slide );
+            else
+                opts.container.append( slide );
+
+            opts.slideCount++;
+            slideOpts = opts.API.buildSlideOpts( slide );
+
+            if ( prepend )
+                opts.slides = $( slide ).add( opts.slides );
+            else
+                opts.slides = opts.slides.add( slide );
+
+            opts.API.initSlide( slideOpts, slide, --opts._maxZ );
+
+            slide.data('cycle.opts', slideOpts);
+            opts.API.trigger('cycle-slide-added', [ opts, slideOpts, slide ]);
+        });
+
+        opts.API.updateView( true );
+
+        startSlideshow = opts._preInitialized && (oldSlideCount < 2 && opts.slideCount >= 1);
+        if ( startSlideshow ) {
+            if ( !opts._initialized )
+                opts.API.initSlideshow();
+            else if ( opts.timeout ) {
+                len = opts.slides.length;
+                opts.nextSlide = opts.reverse ? len - 1 : 1;
+                if ( !opts.timeoutId ) {
+                    opts.API.queueTransition( opts );
+                }
+            }
+        }
+    },
+
+    calcFirstSlide: function() {
+        var opts = this.opts();
+        var firstSlideIndex;
+        firstSlideIndex = parseInt( opts.startingSlide || 0, 10 );
+        if (firstSlideIndex >= opts.slides.length || firstSlideIndex < 0)
+            firstSlideIndex = 0;
+
+        opts.currSlide = firstSlideIndex;
+        if ( opts.reverse ) {
+            opts.nextSlide = firstSlideIndex - 1;
+            if (opts.nextSlide < 0)
+                opts.nextSlide = opts.slides.length - 1;
+        }
+        else {
+            opts.nextSlide = firstSlideIndex + 1;
+            if (opts.nextSlide == opts.slides.length)
+                opts.nextSlide = 0;
+        }
+    },
+
+    calcNextSlide: function() {
+        var opts = this.opts();
+        var roll;
+        if ( opts.reverse ) {
+            roll = (opts.nextSlide - 1) < 0;
+            opts.nextSlide = roll ? opts.slideCount - 1 : opts.nextSlide-1;
+            opts.currSlide = roll ? 0 : opts.nextSlide+1;
+        }
+        else {
+            roll = (opts.nextSlide + 1) == opts.slides.length;
+            opts.nextSlide = roll ? 0 : opts.nextSlide+1;
+            opts.currSlide = roll ? opts.slides.length-1 : opts.nextSlide-1;
+        }
+    },
+
+    calcTx: function( slideOpts, manual ) {
+        var opts = slideOpts;
+        var tx;
+
+        if ( opts._tempFx )
+            tx = $.fn.cycle.transitions[opts._tempFx];
+        else if ( manual && opts.manualFx )
+            tx = $.fn.cycle.transitions[opts.manualFx];
+
+        if ( !tx )
+            tx = $.fn.cycle.transitions[opts.fx];
+
+        opts._tempFx = null;
+        this.opts()._tempFx = null;
+
+        if (!tx) {
+            tx = $.fn.cycle.transitions.fade;
+            opts.API.log('Transition "' + opts.fx + '" not found.  Using fade.');
+        }
+        return tx;
+    },
+
+    prepareTx: function( manual, fwd ) {
+        var opts = this.opts();
+        var after, curr, next, slideOpts, tx;
+
+        if ( opts.slideCount < 2 ) {
+            opts.timeoutId = 0;
+            return;
+        }
+        if ( manual && ( !opts.busy || opts.manualTrump ) ) {
+            opts.API.stopTransition();
+            opts.busy = false;
+            clearTimeout(opts.timeoutId);
+            opts.timeoutId = 0;
+        }
+        if ( opts.busy )
+            return;
+        if ( opts.timeoutId === 0 && !manual )
+            return;
+
+        curr = opts.slides[opts.currSlide];
+        next = opts.slides[opts.nextSlide];
+        slideOpts = opts.API.getSlideOpts( opts.nextSlide );
+        tx = opts.API.calcTx( slideOpts, manual );
+
+        opts._tx = tx;
+
+        if ( manual && slideOpts.manualSpeed !== undefined )
+            slideOpts.speed = slideOpts.manualSpeed;
+
+        // if ( opts.nextSlide === opts.currSlide )
+        //     opts.API.calcNextSlide();
+
+        // ensure that:
+        //      1. advancing to a different slide
+        //      2. this is either a manual event (prev/next, pager, cmd) or 
+        //              a timer event and slideshow is not paused
+        if ( opts.nextSlide != opts.currSlide && 
+            (manual || (!opts.paused && !opts.hoverPaused && opts.timeout) )) { // #62
+
+            opts.API.trigger('cycle-before', [ slideOpts, curr, next, fwd ]);
+            if ( tx.before )
+                tx.before( slideOpts, curr, next, fwd );
+
+            after = function() {
+                opts.busy = false;
+                // #76; bail if slideshow has been destroyed
+                if (! opts.container.data( 'cycle.opts' ) )
+                    return;
+
+                if (tx.after)
+                    tx.after( slideOpts, curr, next, fwd );
+                opts.API.trigger('cycle-after', [ slideOpts, curr, next, fwd ]);
+                opts.API.queueTransition( slideOpts);
+                opts.API.updateView( true );
+            };
+
+            opts.busy = true;
+            if (tx.transition)
+                tx.transition(slideOpts, curr, next, fwd, after);
+            else
+                opts.API.doTransition( slideOpts, curr, next, fwd, after);
+
+            opts.API.calcNextSlide();
+            opts.API.updateView();
+        } else {
+            opts.API.queueTransition( slideOpts );
+        }
+    },
+
+    // perform the actual animation
+    doTransition: function( slideOpts, currEl, nextEl, fwd, callback) {
+        var opts = slideOpts;
+        var curr = $(currEl), next = $(nextEl);
+        var fn = function() {
+            // make sure animIn has something so that callback doesn't trigger immediately
+            next.animate(opts.animIn || { opacity: 1}, opts.speed, opts.easeIn || opts.easing, callback);
+        };
+
+        next.css(opts.cssBefore || {});
+        curr.animate(opts.animOut || {}, opts.speed, opts.easeOut || opts.easing, function() {
+            curr.css(opts.cssAfter || {});
+            if (!opts.sync) {
+                fn();
+            }
+        });
+        if (opts.sync) {
+            fn();
+        }
+    },
+
+    queueTransition: function( slideOpts, specificTimeout ) {
+        var opts = this.opts();
+        var timeout = specificTimeout !== undefined ? specificTimeout : slideOpts.timeout;
+        if (opts.nextSlide === 0 && --opts.loop === 0) {
+            opts.API.log('terminating; loop=0');
+            opts.timeout = 0;
+            if ( timeout ) {
+                setTimeout(function() {
+                    opts.API.trigger('cycle-finished', [ opts ]);
+                }, timeout);
+            }
+            else {
+                opts.API.trigger('cycle-finished', [ opts ]);
+            }
+            // reset nextSlide
+            opts.nextSlide = opts.currSlide;
+            return;
+        }
+        if ( opts.continueAuto !== undefined ) {
+            if ( opts.continueAuto === false || 
+                ($.isFunction(opts.continueAuto) && opts.continueAuto() === false )) {
+                opts.API.log('terminating automatic transitions');
+                opts.timeout = 0;
+                if ( opts.timeoutId )
+                    clearTimeout(opts.timeoutId);
+                return;
+            }
+        }
+        if ( timeout ) {
+            opts._lastQueue = $.now();
+            if ( specificTimeout === undefined )
+                opts._remainingTimeout = slideOpts.timeout;
+
+            if ( !opts.paused && ! opts.hoverPaused ) {
+                opts.timeoutId = setTimeout(function() { 
+                    opts.API.prepareTx( false, !opts.reverse ); 
+                }, timeout );
+            }
+        }
+    },
+
+    stopTransition: function() {
+        var opts = this.opts();
+        if ( opts.slides.filter(':animated').length ) {
+            opts.slides.stop(false, true);
+            opts.API.trigger('cycle-transition-stopped', [ opts ]);
+        }
+
+        if ( opts._tx && opts._tx.stopTransition )
+            opts._tx.stopTransition( opts );
+    },
+
+    // advance slide forward or back
+    advanceSlide: function( val ) {
+        var opts = this.opts();
+        clearTimeout(opts.timeoutId);
+        opts.timeoutId = 0;
+        opts.nextSlide = opts.currSlide + val;
+        
+        if (opts.nextSlide < 0)
+            opts.nextSlide = opts.slides.length - 1;
+        else if (opts.nextSlide >= opts.slides.length)
+            opts.nextSlide = 0;
+
+        opts.API.prepareTx( true,  val >= 0 );
+        return false;
+    },
+
+    buildSlideOpts: function( slide ) {
+        var opts = this.opts();
+        var val, shortName;
+        var slideOpts = slide.data() || {};
+        for (var p in slideOpts) {
+            // allow props to be accessed sans 'cycle' prefix and log the overrides
+            if (slideOpts.hasOwnProperty(p) && /^cycle[A-Z]+/.test(p) ) {
+                val = slideOpts[p];
+                shortName = p.match(/^cycle(.*)/)[1].replace(/^[A-Z]/, lowerCase);
+                opts.API.log('['+(opts.slideCount-1)+']', shortName+':', val, '('+typeof val +')');
+                slideOpts[shortName] = val;
+            }
+        }
+
+        slideOpts = $.extend( {}, $.fn.cycle.defaults, opts, slideOpts );
+        slideOpts.slideNum = opts.slideCount;
+
+        try {
+            // these props should always be read from the master state object
+            delete slideOpts.API;
+            delete slideOpts.slideCount;
+            delete slideOpts.currSlide;
+            delete slideOpts.nextSlide;
+            delete slideOpts.slides;
+        } catch(e) {
+            // no op
+        }
+        return slideOpts;
+    },
+
+    getSlideOpts: function( index ) {
+        var opts = this.opts();
+        if ( index === undefined )
+            index = opts.currSlide;
+
+        var slide = opts.slides[index];
+        var slideOpts = $(slide).data('cycle.opts');
+        return $.extend( {}, opts, slideOpts );
+    },
+    
+    initSlide: function( slideOpts, slide, suggestedZindex ) {
+        var opts = this.opts();
+        slide.css( slideOpts.slideCss || {} );
+        if ( suggestedZindex > 0 )
+            slide.css( 'zIndex', suggestedZindex );
+
+        // ensure that speed settings are sane
+        if ( isNaN( slideOpts.speed ) )
+            slideOpts.speed = $.fx.speeds[slideOpts.speed] || $.fx.speeds._default;
+        if ( !slideOpts.sync )
+            slideOpts.speed = slideOpts.speed / 2;
+
+        slide.addClass( opts.slideClass );
+    },
+
+    updateView: function( isAfter, isDuring, forceEvent ) {
+        var opts = this.opts();
+        if ( !opts._initialized )
+            return;
+        var slideOpts = opts.API.getSlideOpts();
+        var currSlide = opts.slides[ opts.currSlide ];
+
+        if ( ! isAfter && isDuring !== true ) {
+            opts.API.trigger('cycle-update-view-before', [ opts, slideOpts, currSlide ]);
+            if ( opts.updateView < 0 )
+                return;
+        }
+
+        if ( opts.slideActiveClass ) {
+            opts.slides.removeClass( opts.slideActiveClass )
+                .eq( opts.currSlide ).addClass( opts.slideActiveClass );
+        }
+
+        if ( isAfter && opts.hideNonActive )
+            opts.slides.filter( ':not(.' + opts.slideActiveClass + ')' ).css('visibility', 'hidden');
+
+        if ( opts.updateView === 0 ) {
+            setTimeout(function() {
+                opts.API.trigger('cycle-update-view', [ opts, slideOpts, currSlide, isAfter ]);
+            }, slideOpts.speed / (opts.sync ? 2 : 1) );
+        }
+
+        if ( opts.updateView !== 0 )
+            opts.API.trigger('cycle-update-view', [ opts, slideOpts, currSlide, isAfter ]);
+        
+        if ( isAfter )
+            opts.API.trigger('cycle-update-view-after', [ opts, slideOpts, currSlide ]);
+    },
+
+    getComponent: function( name ) {
+        var opts = this.opts();
+        var selector = opts[name];
+        if (typeof selector === 'string') {
+            // if selector is a child, sibling combinator, adjancent selector then use find, otherwise query full dom
+            return (/^\s*[\>|\+|~]/).test( selector ) ? opts.container.find( selector ) : $( selector );
+        }
+        if (selector.jquery)
+            return selector;
+        
+        return $(selector);
+    },
+
+    stackSlides: function( curr, next, fwd ) {
+        var opts = this.opts();
+        if ( !curr ) {
+            curr = opts.slides[opts.currSlide];
+            next = opts.slides[opts.nextSlide];
+            fwd = !opts.reverse;
+        }
+
+        // reset the zIndex for the common case:
+        // curr slide on top,  next slide beneath, and the rest in order to be shown
+        $(curr).css('zIndex', opts.maxZ);
+
+        var i;
+        var z = opts.maxZ - 2;
+        var len = opts.slideCount;
+        if (fwd) {
+            for ( i = opts.currSlide + 1; i < len; i++ )
+                $( opts.slides[i] ).css( 'zIndex', z-- );
+            for ( i = 0; i < opts.currSlide; i++ )
+                $( opts.slides[i] ).css( 'zIndex', z-- );
+        }
+        else {
+            for ( i = opts.currSlide - 1; i >= 0; i-- )
+                $( opts.slides[i] ).css( 'zIndex', z-- );
+            for ( i = len - 1; i > opts.currSlide; i-- )
+                $( opts.slides[i] ).css( 'zIndex', z-- );
+        }
+
+        $(next).css('zIndex', opts.maxZ - 1);
+    },
+
+    getSlideIndex: function( el ) {
+        return this.opts().slides.index( el );
+    }
+
+}; // API
+
+// default logger
+$.fn.cycle.log = function log() {
+    /*global console:true */
+    if (window.console && console.log)
+        console.log('[cycle2] ' + Array.prototype.join.call(arguments, ' ') );
+};
+
+$.fn.cycle.version = function() { return 'Cycle2: ' + version; };
+
+// helper functions
+
+function lowerCase(s) {
+    return (s || '').toLowerCase();
+}
+
+// expose transition object
+$.fn.cycle.transitions = {
+    custom: {
+    },
+    none: {
+        before: function( opts, curr, next, fwd ) {
+            opts.API.stackSlides( next, curr, fwd );
+            opts.cssBefore = { opacity: 1, visibility: 'visible', display: 'block' };
+        }
+    },
+    fade: {
+        before: function( opts, curr, next, fwd ) {
+            var css = opts.API.getSlideOpts( opts.nextSlide ).slideCss || {};
+            opts.API.stackSlides( curr, next, fwd );
+            opts.cssBefore = $.extend(css, { opacity: 0, visibility: 'visible', display: 'block' });
+            opts.animIn = { opacity: 1 };
+            opts.animOut = { opacity: 0 };
+        }
+    },
+    fadeout: {
+        before: function( opts , curr, next, fwd ) {
+            var css = opts.API.getSlideOpts( opts.nextSlide ).slideCss || {};
+            opts.API.stackSlides( curr, next, fwd );
+            opts.cssBefore = $.extend(css, { opacity: 1, visibility: 'visible', display: 'block' });
+            opts.animOut = { opacity: 0 };
+        }
+    },
+    scrollHorz: {
+        before: function( opts, curr, next, fwd ) {
+            opts.API.stackSlides( curr, next, fwd );
+            var w = opts.container.css('overflow','hidden').width();
+            opts.cssBefore = { left: fwd ? w : - w, top: 0, opacity: 1, visibility: 'visible', display: 'block' };
+            opts.cssAfter = { zIndex: opts._maxZ - 2, left: 0 };
+            opts.animIn = { left: 0 };
+            opts.animOut = { left: fwd ? -w : w };
+        }
+    }
+};
+
+// @see: http://jquery.malsup.com/cycle2/api
+$.fn.cycle.defaults = {
+    allowWrap:        true,
+    autoSelector:     '.cycle-slideshow[data-cycle-auto-init!=false]',
+    delay:            0,
+    easing:           null,
+    fx:              'fade',
+    hideNonActive:    true,
+    loop:             0,
+    manualFx:         undefined,
+    manualSpeed:      undefined,
+    manualTrump:      true,
+    maxZ:             100,
+    pauseOnHover:     false,
+    reverse:          false,
+    slideActiveClass: 'cycle-slide-active',
+    slideClass:       'cycle-slide',
+    slideCss:         { position: 'absolute', top: 0, left: 0 },
+    slides:          '> img',
+    speed:            500,
+    startingSlide:    0,
+    sync:             true,
+    timeout:          4000,
+    updateView:       0
+};
+
+// automatically find and run slideshows
+$(document).ready(function() {
+    $( $.fn.cycle.defaults.autoSelector ).cycle();
+});
+
+})(jQuery);
+
+/*! Cycle2 autoheight plugin; Copyright (c) M.Alsup, 2012; version: 20130913 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    autoHeight: 0, // setting this option to false disables autoHeight logic
+    autoHeightSpeed: 250,
+    autoHeightEasing: null
+});    
+
+$(document).on( 'cycle-initialized', function( e, opts ) {
+    var autoHeight = opts.autoHeight;
+    var t = $.type( autoHeight );
+    var resizeThrottle = null;
+    var ratio;
+
+    if ( t !== 'string' && t !== 'number' )
+        return;
+
+    // bind events
+    opts.container.on( 'cycle-slide-added cycle-slide-removed', initAutoHeight );
+    opts.container.on( 'cycle-destroyed', onDestroy );
+
+    if ( autoHeight == 'container' ) {
+        opts.container.on( 'cycle-before', onBefore );
+    }
+    else if ( t === 'string' && /\d+\:\d+/.test( autoHeight ) ) { 
+        // use ratio
+        ratio = autoHeight.match(/(\d+)\:(\d+)/);
+        ratio = ratio[1] / ratio[2];
+        opts._autoHeightRatio = ratio;
+    }
+
+    // if autoHeight is a number then we don't need to recalculate the sentinel
+    // index on resize
+    if ( t !== 'number' ) {
+        // bind unique resize handler per slideshow (so it can be 'off-ed' in onDestroy)
+        opts._autoHeightOnResize = function () {
+            clearTimeout( resizeThrottle );
+            resizeThrottle = setTimeout( onResize, 50 );
+        };
+
+        $(window).on( 'resize orientationchange', opts._autoHeightOnResize );
+    }
+
+    setTimeout( onResize, 30 );
+
+    function onResize() {
+        initAutoHeight( e, opts );
+    }
+});
+
+function initAutoHeight( e, opts ) {
+    var clone, height, sentinelIndex;
+    var autoHeight = opts.autoHeight;
+
+    if ( autoHeight == 'container' ) {
+        height = $( opts.slides[ opts.currSlide ] ).outerHeight();
+        opts.container.height( height );
+    }
+    else if ( opts._autoHeightRatio ) { 
+        opts.container.height( opts.container.width() / opts._autoHeightRatio );
+    }
+    else if ( autoHeight === 'calc' || ( $.type( autoHeight ) == 'number' && autoHeight >= 0 ) ) {
+        if ( autoHeight === 'calc' )
+            sentinelIndex = calcSentinelIndex( e, opts );
+        else if ( autoHeight >= opts.slides.length )
+            sentinelIndex = 0;
+        else 
+            sentinelIndex = autoHeight;
+
+        // only recreate sentinel if index is different
+        if ( sentinelIndex == opts._sentinelIndex )
+            return;
+
+        opts._sentinelIndex = sentinelIndex;
+        if ( opts._sentinel )
+            opts._sentinel.remove();
+
+        // clone existing slide as sentinel
+        clone = $( opts.slides[ sentinelIndex ].cloneNode(true) );
+        
+        // #50; remove special attributes from cloned content
+        clone.removeAttr( 'id name rel' ).find( '[id],[name],[rel]' ).removeAttr( 'id name rel' );
+
+        clone.css({
+            position: 'static',
+            visibility: 'hidden',
+            display: 'block'
+        }).prependTo( opts.container ).addClass('cycle-sentinel cycle-slide').removeClass('cycle-slide-active');
+        clone.find( '*' ).css( 'visibility', 'hidden' );
+
+        opts._sentinel = clone;
+    }
+}    
+
+function calcSentinelIndex( e, opts ) {
+    var index = 0, max = -1;
+
+    // calculate tallest slide index
+    opts.slides.each(function(i) {
+        var h = $(this).height();
+        if ( h > max ) {
+            max = h;
+            index = i;
+        }
+    });
+    return index;
+}
+
+function onBefore( e, opts, outgoing, incoming, forward ) {
+    var h = $(incoming).outerHeight();
+    opts.container.animate( { height: h }, opts.autoHeightSpeed, opts.autoHeightEasing );
+}
+
+function onDestroy( e, opts ) {
+    if ( opts._autoHeightOnResize ) {
+        $(window).off( 'resize orientationchange', opts._autoHeightOnResize );
+        opts._autoHeightOnResize = null;
+    }
+    opts.container.off( 'cycle-slide-added cycle-slide-removed', initAutoHeight );
+    opts.container.off( 'cycle-destroyed', onDestroy );
+    opts.container.off( 'cycle-before', onBefore );
+
+    if ( opts._sentinel ) {
+        opts._sentinel.remove();
+        opts._sentinel = null;
+    }
+}
+
+})(jQuery);
+
+/*! caption plugin for Cycle2;  version: 20130306 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    caption:          '> .cycle-caption',
+    captionTemplate:  '{{slideNum}} / {{slideCount}}',
+    overlay:          '> .cycle-overlay',
+    overlayTemplate:  '<div>{{title}}</div><div>{{desc}}</div>',
+    captionModule:    'caption'
+});    
+
+$(document).on( 'cycle-update-view', function( e, opts, slideOpts, currSlide ) {
+    if ( opts.captionModule !== 'caption' )
+        return;
+    var el;
+    $.each(['caption','overlay'], function() {
+        var name = this; 
+        var template = slideOpts[name+'Template'];
+        var el = opts.API.getComponent( name );
+        if( el.length && template ) {
+            el.html( opts.API.tmpl( template, slideOpts, opts, currSlide ) );
+            el.show();
+        }
+        else {
+            el.hide();
+        }
+    });
+});
+
+$(document).on( 'cycle-destroyed', function( e, opts ) {
+    var el;
+    $.each(['caption','overlay'], function() {
+        var name = this, template = opts[name+'Template'];
+        if ( opts[name] && template ) {
+            el = opts.API.getComponent( 'caption' );
+            el.empty();
+        }
+    });
+});
+
+})(jQuery);
+
+/*! command plugin for Cycle2;  version: 20140415 */
+(function($) {
+"use strict";
+
+var c2 = $.fn.cycle;
+
+$.fn.cycle = function( options ) {
+    var cmd, cmdFn, opts;
+    var args = $.makeArray( arguments );
+
+    if ( $.type( options ) == 'number' ) {
+        return this.cycle( 'goto', options );
+    }
+
+    if ( $.type( options ) == 'string' ) {
+        return this.each(function() {
+            var cmdArgs;
+            cmd = options;
+            opts = $(this).data('cycle.opts');
+
+            if ( opts === undefined ) {
+                c2.log('slideshow must be initialized before sending commands; "' + cmd + '" ignored');
+                return;
+            }
+            else {
+                cmd = cmd == 'goto' ? 'jump' : cmd; // issue #3; change 'goto' to 'jump' internally
+                cmdFn = opts.API[ cmd ];
+                if ( $.isFunction( cmdFn )) {
+                    cmdArgs = $.makeArray( args );
+                    cmdArgs.shift();
+                    return cmdFn.apply( opts.API, cmdArgs );
+                }
+                else {
+                    c2.log( 'unknown command: ', cmd );
+                }
+            }
+        });
+    }
+    else {
+        return c2.apply( this, arguments );
+    }
+};
+
+// copy props
+$.extend( $.fn.cycle, c2 );
+
+$.extend( c2.API, {
+    next: function() {
+        var opts = this.opts();
+        if ( opts.busy && ! opts.manualTrump )
+            return;
+
+        var count = opts.reverse ? -1 : 1;
+        if ( opts.allowWrap === false && ( opts.currSlide + count ) >= opts.slideCount )
+            return;
+
+        opts.API.advanceSlide( count );
+        opts.API.trigger('cycle-next', [ opts ]).log('cycle-next');
+    },
+
+    prev: function() {
+        var opts = this.opts();
+        if ( opts.busy && ! opts.manualTrump )
+            return;
+        var count = opts.reverse ? 1 : -1;
+        if ( opts.allowWrap === false && ( opts.currSlide + count ) < 0 )
+            return;
+
+        opts.API.advanceSlide( count );
+        opts.API.trigger('cycle-prev', [ opts ]).log('cycle-prev');
+    },
+
+    destroy: function() {
+        this.stop(); //#204
+
+        var opts = this.opts();
+        var clean = $.isFunction( $._data ) ? $._data : $.noop;  // hack for #184 and #201
+        clearTimeout(opts.timeoutId);
+        opts.timeoutId = 0;
+        opts.API.stop();
+        opts.API.trigger( 'cycle-destroyed', [ opts ] ).log('cycle-destroyed');
+        opts.container.removeData();
+        clean( opts.container[0], 'parsedAttrs', false );
+
+        // #75; remove inline styles
+        if ( ! opts.retainStylesOnDestroy ) {
+            opts.container.removeAttr( 'style' );
+            opts.slides.removeAttr( 'style' );
+            opts.slides.removeClass( opts.slideActiveClass );
+        }
+        opts.slides.each(function() {
+            var slide = $(this);
+            slide.removeData();
+            slide.removeClass( opts.slideClass );
+            clean( this, 'parsedAttrs', false );
+        });
+    },
+
+    jump: function( index, fx ) {
+        // go to the requested slide
+        var fwd;
+        var opts = this.opts();
+        if ( opts.busy && ! opts.manualTrump )
+            return;
+        var num = parseInt( index, 10 );
+        if (isNaN(num) || num < 0 || num >= opts.slides.length) {
+            opts.API.log('goto: invalid slide index: ' + num);
+            return;
+        }
+        if (num == opts.currSlide) {
+            opts.API.log('goto: skipping, already on slide', num);
+            return;
+        }
+        opts.nextSlide = num;
+        clearTimeout(opts.timeoutId);
+        opts.timeoutId = 0;
+        opts.API.log('goto: ', num, ' (zero-index)');
+        fwd = opts.currSlide < opts.nextSlide;
+        opts._tempFx = fx;
+        opts.API.prepareTx( true, fwd );
+    },
+
+    stop: function() {
+        var opts = this.opts();
+        var pauseObj = opts.container;
+        clearTimeout(opts.timeoutId);
+        opts.timeoutId = 0;
+        opts.API.stopTransition();
+        if ( opts.pauseOnHover ) {
+            if ( opts.pauseOnHover !== true )
+                pauseObj = $( opts.pauseOnHover );
+            pauseObj.off('mouseenter mouseleave');
+        }
+        opts.API.trigger('cycle-stopped', [ opts ]).log('cycle-stopped');
+    },
+
+    reinit: function() {
+        var opts = this.opts();
+        opts.API.destroy();
+        opts.container.cycle();
+    },
+
+    remove: function( index ) {
+        var opts = this.opts();
+        var slide, slideToRemove, slides = [], slideNum = 1;
+        for ( var i=0; i < opts.slides.length; i++ ) {
+            slide = opts.slides[i];
+            if ( i == index ) {
+                slideToRemove = slide;
+            }
+            else {
+                slides.push( slide );
+                $( slide ).data('cycle.opts').slideNum = slideNum;
+                slideNum++;
+            }
+        }
+        if ( slideToRemove ) {
+            opts.slides = $( slides );
+            opts.slideCount--;
+            $( slideToRemove ).remove();
+            if (index == opts.currSlide)
+                opts.API.advanceSlide( 1 );
+            else if ( index < opts.currSlide )
+                opts.currSlide--;
+            else
+                opts.currSlide++;
+
+            opts.API.trigger('cycle-slide-removed', [ opts, index, slideToRemove ]).log('cycle-slide-removed');
+            opts.API.updateView();
+        }
+    }
+
+});
+
+// listen for clicks on elements with data-cycle-cmd attribute
+$(document).on('click.cycle', '[data-cycle-cmd]', function(e) {
+    // issue cycle command
+    e.preventDefault();
+    var el = $(this);
+    var command = el.data('cycle-cmd');
+    var context = el.data('cycle-context') || '.cycle-slideshow';
+    $(context).cycle(command, el.data('cycle-arg'));
+});
+
+
+})(jQuery);
+
+/*! hash plugin for Cycle2;  version: 20130905 */
+(function($) {
+"use strict";
+
+$(document).on( 'cycle-pre-initialize', function( e, opts ) {
+    onHashChange( opts, true );
+
+    opts._onHashChange = function() {
+        onHashChange( opts, false );
+    };
+
+    $( window ).on( 'hashchange', opts._onHashChange);
+});
+
+$(document).on( 'cycle-update-view', function( e, opts, slideOpts ) {
+    if ( slideOpts.hash && ( '#' + slideOpts.hash ) != window.location.hash ) {
+        opts._hashFence = true;
+        window.location.hash = slideOpts.hash;
+    }
+});
+
+$(document).on( 'cycle-destroyed', function( e, opts) {
+    if ( opts._onHashChange ) {
+        $( window ).off( 'hashchange', opts._onHashChange );
+    }
+});
+
+function onHashChange( opts, setStartingSlide ) {
+    var hash;
+    if ( opts._hashFence ) {
+        opts._hashFence = false;
+        return;
+    }
+    
+    hash = window.location.hash.substring(1);
+
+    opts.slides.each(function(i) {
+        if ( $(this).data( 'cycle-hash' ) == hash ) {
+            if ( setStartingSlide === true ) {
+                opts.startingSlide = i;
+            }
+            else {
+                var fwd = opts.currSlide < i;
+                opts.nextSlide = i;
+                opts.API.prepareTx( true, fwd );
+            }
+            return false;
+        }
+    });
+}
+
+})(jQuery);
+
+/*! loader plugin for Cycle2;  version: 20131121 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    loader: false
+});
+
+$(document).on( 'cycle-bootstrap', function( e, opts ) {
+    var addFn;
+
+    if ( !opts.loader )
+        return;
+
+    // override API.add for this slideshow
+    addFn = opts.API.add;
+    opts.API.add = add;
+
+    function add( slides, prepend ) {
+        var slideArr = [];
+        if ( $.type( slides ) == 'string' )
+            slides = $.trim( slides );
+        else if ( $.type( slides) === 'array' ) {
+            for (var i=0; i < slides.length; i++ )
+                slides[i] = $(slides[i])[0];
+        }
+
+        slides = $( slides );
+        var slideCount = slides.length;
+
+        if ( ! slideCount )
+            return;
+
+        slides.css('visibility','hidden').appendTo('body').each(function(i) { // appendTo fixes #56
+            var count = 0;
+            var slide = $(this);
+            var images = slide.is('img') ? slide : slide.find('img');
+            slide.data('index', i);
+            // allow some images to be marked as unimportant (and filter out images w/o src value)
+            images = images.filter(':not(.cycle-loader-ignore)').filter(':not([src=""])');
+            if ( ! images.length ) {
+                --slideCount;
+                slideArr.push( slide );
+                return;
+            }
+
+            count = images.length;
+            images.each(function() {
+                // add images that are already loaded
+                if ( this.complete ) {
+                    imageLoaded();
+                }
+                else {
+                    $(this).load(function() {
+                        imageLoaded();
+                    }).on("error", function() {
+                        if ( --count === 0 ) {
+                            // ignore this slide
+                            opts.API.log('slide skipped; img not loaded:', this.src);
+                            if ( --slideCount === 0 && opts.loader == 'wait') {
+                                addFn.apply( opts.API, [ slideArr, prepend ] );
+                            }
+                        }
+                    });
+                }
+            });
+
+            function imageLoaded() {
+                if ( --count === 0 ) {
+                    --slideCount;
+                    addSlide( slide );
+                }
+            }
+        });
+
+        if ( slideCount )
+            opts.container.addClass('cycle-loading');
+        
+
+        function addSlide( slide ) {
+            var curr;
+            if ( opts.loader == 'wait' ) {
+                slideArr.push( slide );
+                if ( slideCount === 0 ) {
+                    // #59; sort slides into original markup order
+                    slideArr.sort( sorter );
+                    addFn.apply( opts.API, [ slideArr, prepend ] );
+                    opts.container.removeClass('cycle-loading');
+                }
+            }
+            else {
+                curr = $(opts.slides[opts.currSlide]);
+                addFn.apply( opts.API, [ slide, prepend ] );
+                curr.show();
+                opts.container.removeClass('cycle-loading');
+            }
+        }
+
+        function sorter(a, b) {
+            return a.data('index') - b.data('index');
+        }
+    }
+});
+
+})(jQuery);
+
+/*! pager plugin for Cycle2;  version: 20140415 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    pager:            '> .cycle-pager',
+    pagerActiveClass: 'cycle-pager-active',
+    pagerEvent:       'click.cycle',
+    pagerEventBubble: undefined,
+    pagerTemplate:    '<span>&bull;</span>'
+});
+
+$(document).on( 'cycle-bootstrap', function( e, opts, API ) {
+    // add method to API
+    API.buildPagerLink = buildPagerLink;
+});
+
+$(document).on( 'cycle-slide-added', function( e, opts, slideOpts, slideAdded ) {
+    if ( opts.pager ) {
+        opts.API.buildPagerLink ( opts, slideOpts, slideAdded );
+        opts.API.page = page;
+    }
+});
+
+$(document).on( 'cycle-slide-removed', function( e, opts, index, slideRemoved ) {
+    if ( opts.pager ) {
+        var pagers = opts.API.getComponent( 'pager' );
+        pagers.each(function() {
+            var pager = $(this);
+            $( pager.children()[index] ).remove();
+        });
+    }
+});
+
+$(document).on( 'cycle-update-view', function( e, opts, slideOpts ) {
+    var pagers;
+
+    if ( opts.pager ) {
+        pagers = opts.API.getComponent( 'pager' );
+        pagers.each(function() {
+           $(this).children().removeClass( opts.pagerActiveClass )
+            .eq( opts.currSlide ).addClass( opts.pagerActiveClass );
+        });
+    }
+});
+
+$(document).on( 'cycle-destroyed', function( e, opts ) {
+    var pager = opts.API.getComponent( 'pager' );
+
+    if ( pager ) {
+        pager.children().off( opts.pagerEvent ); // #202
+        if ( opts.pagerTemplate )
+            pager.empty();
+    }
+});
+
+function buildPagerLink( opts, slideOpts, slide ) {
+    var pagerLink;
+    var pagers = opts.API.getComponent( 'pager' );
+    pagers.each(function() {
+        var pager = $(this);
+        if ( slideOpts.pagerTemplate ) {
+            var markup = opts.API.tmpl( slideOpts.pagerTemplate, slideOpts, opts, slide[0] );
+            pagerLink = $( markup ).appendTo( pager );
+        }
+        else {
+            pagerLink = pager.children().eq( opts.slideCount - 1 );
+        }
+        pagerLink.on( opts.pagerEvent, function(e) {
+            if ( ! opts.pagerEventBubble )
+                e.preventDefault();
+            opts.API.page( pager, e.currentTarget);
+        });
+    });
+}
+
+function page( pager, target ) {
+    /*jshint validthis:true */
+    var opts = this.opts();
+    if ( opts.busy && ! opts.manualTrump )
+        return;
+
+    var index = pager.children().index( target );
+    var nextSlide = index;
+    var fwd = opts.currSlide < nextSlide;
+    if (opts.currSlide == nextSlide) {
+        return; // no op, clicked pager for the currently displayed slide
+    }
+    opts.nextSlide = nextSlide;
+    opts._tempFx = opts.pagerFx;
+    opts.API.prepareTx( true, fwd );
+    opts.API.trigger('cycle-pager-activated', [opts, pager, target ]);
+}
+
+})(jQuery);
+
+/*! prevnext plugin for Cycle2;  version: 20140408 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    next:           '> .cycle-next',
+    nextEvent:      'click.cycle',
+    disabledClass:  'disabled',
+    prev:           '> .cycle-prev',
+    prevEvent:      'click.cycle',
+    swipe:          false
+});
+
+$(document).on( 'cycle-initialized', function( e, opts ) {
+    opts.API.getComponent( 'next' ).on( opts.nextEvent, function(e) {
+        e.preventDefault();
+        opts.API.next();
+    });
+
+    opts.API.getComponent( 'prev' ).on( opts.prevEvent, function(e) {
+        e.preventDefault();
+        opts.API.prev();
+    });
+
+    if ( opts.swipe ) {
+        var nextEvent = opts.swipeVert ? 'swipeUp.cycle' : 'swipeLeft.cycle swipeleft.cycle';
+        var prevEvent = opts.swipeVert ? 'swipeDown.cycle' : 'swipeRight.cycle swiperight.cycle';
+        opts.container.on( nextEvent, function(e) {
+            opts._tempFx = opts.swipeFx;
+            opts.API.next();
+        });
+        opts.container.on( prevEvent, function() {
+            opts._tempFx = opts.swipeFx;
+            opts.API.prev();
+        });
+    }
+});
+
+$(document).on( 'cycle-update-view', function( e, opts, slideOpts, currSlide ) {
+    if ( opts.allowWrap )
+        return;
+
+    var cls = opts.disabledClass;
+    var next = opts.API.getComponent( 'next' );
+    var prev = opts.API.getComponent( 'prev' );
+    var prevBoundry = opts._prevBoundry || 0;
+    var nextBoundry = (opts._nextBoundry !== undefined)?opts._nextBoundry:opts.slideCount - 1;
+
+    if ( opts.currSlide == nextBoundry )
+        next.addClass( cls ).prop( 'disabled', true );
+    else
+        next.removeClass( cls ).prop( 'disabled', false );
+
+    if ( opts.currSlide === prevBoundry )
+        prev.addClass( cls ).prop( 'disabled', true );
+    else
+        prev.removeClass( cls ).prop( 'disabled', false );
+});
+
+
+$(document).on( 'cycle-destroyed', function( e, opts ) {
+    opts.API.getComponent( 'prev' ).off( opts.nextEvent );
+    opts.API.getComponent( 'next' ).off( opts.prevEvent );
+    opts.container.off( 'swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle' );
+});
+
+})(jQuery);
+
+/*! progressive loader plugin for Cycle2;  version: 20130315 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    progressive: false
+});
+
+$(document).on( 'cycle-pre-initialize', function( e, opts ) {
+    if ( !opts.progressive )
+        return;
+
+    var API = opts.API;
+    var nextFn = API.next;
+    var prevFn = API.prev;
+    var prepareTxFn = API.prepareTx;
+    var type = $.type( opts.progressive );
+    var slides, scriptEl;
+
+    if ( type == 'array' ) {
+        slides = opts.progressive;
+    }
+    else if ($.isFunction( opts.progressive ) ) {
+        slides = opts.progressive( opts );
+    }
+    else if ( type == 'string' ) {
+        scriptEl = $( opts.progressive );
+        slides = $.trim( scriptEl.html() );
+        if ( !slides )
+            return;
+        // is it json array?
+        if ( /^(\[)/.test( slides ) ) {
+            try {
+                slides = $.parseJSON( slides );
+            }
+            catch(err) {
+                API.log( 'error parsing progressive slides', err );
+                return;
+            }
+        }
+        else {
+            // plain text, split on delimeter
+            slides = slides.split( new RegExp( scriptEl.data('cycle-split') || '\n') );
+            
+            // #95; look for empty slide
+            if ( ! slides[ slides.length - 1 ] )
+                slides.pop();
+        }
+    }
+
+
+
+    if ( prepareTxFn ) {
+        API.prepareTx = function( manual, fwd ) {
+            var index, slide;
+
+            if ( manual || slides.length === 0 ) {
+                prepareTxFn.apply( opts.API, [ manual, fwd ] );
+                return;
+            }
+
+            if ( fwd && opts.currSlide == ( opts.slideCount-1) ) {
+                slide = slides[ 0 ];
+                slides = slides.slice( 1 );
+                opts.container.one('cycle-slide-added', function(e, opts ) {
+                    setTimeout(function() {
+                        opts.API.advanceSlide( 1 );
+                    },50);
+                });
+                opts.API.add( slide );
+            }
+            else if ( !fwd && opts.currSlide === 0 ) {
+                index = slides.length-1;
+                slide = slides[ index ];
+                slides = slides.slice( 0, index );
+                opts.container.one('cycle-slide-added', function(e, opts ) {
+                    setTimeout(function() {
+                        opts.currSlide = 1;
+                        opts.API.advanceSlide( -1 );
+                    },50);
+                });
+                opts.API.add( slide, true );
+            }
+            else {
+                prepareTxFn.apply( opts.API, [ manual, fwd ] );
+            }
+        };
+    }
+
+    if ( nextFn ) {
+        API.next = function() {
+            var opts = this.opts();
+            if ( slides.length && opts.currSlide == ( opts.slideCount - 1 ) ) {
+                var slide = slides[ 0 ];
+                slides = slides.slice( 1 );
+                opts.container.one('cycle-slide-added', function(e, opts ) {
+                    nextFn.apply( opts.API );
+                    opts.container.removeClass('cycle-loading');
+                });
+                opts.container.addClass('cycle-loading');
+                opts.API.add( slide );
+            }
+            else {
+                nextFn.apply( opts.API );    
+            }
+        };
+    }
+    
+    if ( prevFn ) {
+        API.prev = function() {
+            var opts = this.opts();
+            if ( slides.length && opts.currSlide === 0 ) {
+                var index = slides.length-1;
+                var slide = slides[ index ];
+                slides = slides.slice( 0, index );
+                opts.container.one('cycle-slide-added', function(e, opts ) {
+                    opts.currSlide = 1;
+                    opts.API.advanceSlide( -1 );
+                    opts.container.removeClass('cycle-loading');
+                });
+                opts.container.addClass('cycle-loading');
+                opts.API.add( slide, true );
+            }
+            else {
+                prevFn.apply( opts.API );
+            }
+        };
+    }
+});
+
+})(jQuery);
+
+/*! tmpl plugin for Cycle2;  version: 20121227 */
+(function($) {
+"use strict";
+
+$.extend($.fn.cycle.defaults, {
+    tmplRegex: '{{((.)?.*?)}}'
+});
+
+$.extend($.fn.cycle.API, {
+    tmpl: function( str, opts /*, ... */) {
+        var regex = new RegExp( opts.tmplRegex || $.fn.cycle.defaults.tmplRegex, 'g' );
+        var args = $.makeArray( arguments );
+        args.shift();
+        return str.replace(regex, function(_, str) {
+            var i, j, obj, prop, names = str.split('.');
+            for (i=0; i < args.length; i++) {
+                obj = args[i];
+                if ( ! obj )
+                    continue;
+                if (names.length > 1) {
+                    prop = obj;
+                    for (j=0; j < names.length; j++) {
+                        obj = prop;
+                        prop = prop[ names[j] ] || str;
+                    }
+                } else {
+                    prop = obj[str];
+                }
+
+                if ($.isFunction(prop))
+                    return prop.apply(obj, args);
+                if (prop !== undefined && prop !== null && prop != str)
+                    return prop;
+            }
+            return str;
+        });
+    }
+});    
+
+})(jQuery);
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.cycle2.js.map elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.cycle2.js.map
--- elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.cycle2.js.map	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.cycle2.js.map	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+{"version":3,"file":"build/jquery.cycle2.min.js","sources":["build/jquery.cycle2.js"],"names":["$","lowerCase","s","toLowerCase","version","fn","cycle","options","o","this","length","isReady","each","data","opts","shortName","val","container","log","noop","p","hasOwnProperty","test","match","replace","extend","defaults","timeoutId","paused","_maxZ","maxZ","API","_container","trigger","eventName","args","addInitialSlides","preInitSlideshow","slides","initSlideshow","selector","c","context","slideCount","jquery","find","random","sort","Math","add","tx","transitions","fx","isFunction","preInit","_preInitialized","postInitSlideshow","postInit","slideOpts","pauseObj","calcFirstSlide","css","currSlide","opacity","display","visibility","stackSlides","nextSlide","reverse","pauseOnHover","hover","pause","resume","timeout","getSlideOpts","queueTransition","delay","_initialized","updateView","alreadyPaused","hoverPaused","addClass","clearTimeout","_remainingTimeout","now","_lastQueue","isNaN","undefined","alreadyResumed","removeClass","filter","prepend","len","oldSlideCount","startSlideshow","type","trim","slide","append","buildSlideOpts","initSlide","firstSlideIndex","parseInt","startingSlide","calcNextSlide","roll","calcTx","manual","_tempFx","manualFx","fade","prepareTx","fwd","after","curr","next","busy","manualTrump","stopTransition","_tx","manualSpeed","speed","before","transition","doTransition","currEl","nextEl","callback","animate","animIn","easeIn","easing","cssBefore","animOut","easeOut","cssAfter","sync","specificTimeout","loop","setTimeout","continueAuto","stop","advanceSlide","slideNum","e","index","suggestedZindex","slideCss","speeds","_default","slideClass","isAfter","isDuring","slideActiveClass","eq","hideNonActive","getComponent","name","i","z","getSlideIndex","el","window","console","Array","prototype","join","call","arguments","custom","none","fadeout","scrollHorz","w","width","left","top","zIndex","allowWrap","autoSelector","position","document","ready","jQuery","initAutoHeight","clone","height","sentinelIndex","autoHeight","outerHeight","_autoHeightRatio","calcSentinelIndex","_sentinelIndex","_sentinel","remove","cloneNode","removeAttr","prependTo","max","h","onBefore","outgoing","incoming","autoHeightSpeed","autoHeightEasing","onDestroy","_autoHeightOnResize","off","on","onResize","ratio","t","resizeThrottle","caption","captionTemplate","overlay","overlayTemplate","captionModule","template","html","tmpl","show","hide","empty","c2","cmd","cmdFn","makeArray","cmdArgs","shift","apply","count","prev","destroy","clean","_data","removeData","retainStylesOnDestroy","jump","num","reinit","slideToRemove","push","preventDefault","command","onHashChange","setStartingSlide","hash","_hashFence","location","substring","_onHashChange","loader","addSlide","slideArr","sorter","addFn","a","b","appendTo","imageLoaded","images","is","complete","load","src","buildPagerLink","pagerLink","pagers","pager","pagerTemplate","markup","children","pagerEvent","pagerEventBubble","page","currentTarget","target","pagerFx","pagerActiveClass","slideAdded","nextEvent","disabledClass","prevEvent","swipe","swipeVert","swipeFx","cls","prevBoundry","_prevBoundry","nextBoundry","_nextBoundry","prop","progressive","scriptEl","nextFn","prevFn","prepareTxFn","parseJSON","err","split","RegExp","pop","slice","one","tmplRegex","str","regex","_","j","obj","names"],"mappings":";;;;;CAOC,SAAUA,GACX,YA8lBA,SAASC,GAAUC,GACf,OAAQA,GAAK,IAAIC,cA7lBrB,GAAIC,GAAU,OAEdJ,GAAEK,GAAGC,MAAQ,SAAUC,GAEnB,GAAIC,EACJ,OAAqB,KAAhBC,KAAKC,QAAiBV,EAAEW,QAStBF,KAAKG,KAAK,WACb,GAAIC,GAAMC,EAAMC,EAAWC,EACvBC,EAAYjB,EAAES,MACdS,EAAMlB,EAAEK,GAAGC,MAAMY,GAErB,KAAKD,EAAUJ,KAAK,cAApB,EAGKI,EAAUJ,KAAK,gBAAiB,GAC/BN,GAAWA,EAAQW,OAAQ,GAC3BJ,GAAQA,EAAKI,OAAQ,KACvBA,EAAMlB,EAAEmB,MAGZD,EAAI,eACJL,EAAOI,EAAUJ,MACjB,KAAK,GAAIO,KAAKP,GAENA,EAAKQ,eAAeD,IAAM,eAAeE,KAAKF,KAC9CJ,EAAMH,EAAKO,GACXL,EAAYK,EAAEG,MAAM,cAAc,GAAGC,QAAQ,SAAUvB,GACvDiB,EAAIH,EAAU,IAAKC,EAAK,UAAWA,GAAK,KACxCH,EAAKE,GAAaC,EAI1BF,GAAOd,EAAEyB,UAAYzB,EAAEK,GAAGC,MAAMoB,SAAUb,EAAMN,OAEhDO,EAAKa,UAAY,EACjBb,EAAKc,OAASd,EAAKc,SAAU,EAC7Bd,EAAKG,UAAYA,EACjBH,EAAKe,MAAQf,EAAKgB,KAElBhB,EAAKiB,IAAM/B,EAAEyB,QAAWO,WAAYf,GAAajB,EAAEK,GAAGC,MAAMyB,KAC5DjB,EAAKiB,IAAIb,IAAMA,EACfJ,EAAKiB,IAAIE,QAAU,SAAUC,EAAWC,GAEpC,MADArB,GAAKG,UAAUgB,QAASC,EAAWC,GAC5BrB,EAAKiB,KAGhBd,EAAUJ,KAAM,aAAcC,GAC9BG,EAAUJ,KAAM,YAAaC,EAAKiB,KAGlCjB,EAAKiB,IAAIE,QAAQ,mBAAqBnB,EAAMA,EAAKiB,MAEjDjB,EAAKiB,IAAIK,mBACTtB,EAAKiB,IAAIM,mBAEJvB,EAAKwB,OAAO5B,QACbI,EAAKiB,IAAIQ,oBA1Db/B,GAAMN,EAAGO,KAAK+B,SAAUC,EAAGhC,KAAKiC,SAChC1C,EAAEK,GAAGC,MAAMY,IAAI,uCACflB,EAAE,WACEA,EAAGQ,EAAEN,EAAGM,EAAEiC,GAAInC,MAAMC,KAEjBE,OAyDfT,EAAEK,GAAGC,MAAMyB,KACPjB,KAAM,WACF,MAAOL,MAAKuB,WAAWnB,KAAM,eAEjCuB,iBAAkB,WACd,GAAItB,GAAOL,KAAKK,OACZwB,EAASxB,EAAKwB,MAClBxB,GAAK6B,WAAa,EAClB7B,EAAKwB,OAAStC,IAGdsC,EAASA,EAAOM,OAASN,EAASxB,EAAKG,UAAU4B,KAAMP,GAElDxB,EAAKgC,QACNR,EAAOS,KAAK,WAAY,MAAOC,MAAKF,SAAW,KAGnDhC,EAAKiB,IAAIkB,IAAKX,IAGlBD,iBAAkB,WACd,GAAIvB,GAAOL,KAAKK,MAChBA,GAAKiB,IAAIE,QAAQ,wBAA0BnB,GAC3C,IAAIoC,GAAKlD,EAAEK,GAAGC,MAAM6C,YAAYrC,EAAKsC,GACjCF,IAAMlD,EAAEqD,WAAWH,EAAGI,UACtBJ,EAAGI,QAASxC,GAChBA,EAAKyC,iBAAkB,GAG3BC,kBAAmB,WACf,GAAI1C,GAAOL,KAAKK,MAChBA,GAAKiB,IAAIE,QAAQ,yBAA2BnB,GAC5C,IAAIoC,GAAKlD,EAAEK,GAAGC,MAAM6C,YAAYrC,EAAKsC,GACjCF,IAAMlD,EAAEqD,WAAWH,EAAGO,WACtBP,EAAGO,SAAU3C,IAGrByB,cAAe,WACX,GAEImB,GAFA5C,EAAOL,KAAKK,OACZ6C,EAAW7C,EAAKG,SAEpBH,GAAKiB,IAAI6B,iBAE8B,UAAlC9C,EAAKG,UAAU4C,IAAI,aACpB/C,EAAKG,UAAU4C,IAAI,WAAY,YAEnC7D,EAAEc,EAAKwB,OAAOxB,EAAKgD,YAAYD,KAC3BE,QAAS,EACTC,QAAS,QACTC,WAAY,YAEhBnD,EAAKiB,IAAImC,YAAapD,EAAKwB,OAAOxB,EAAKgD,WAAYhD,EAAKwB,OAAOxB,EAAKqD,YAAarD,EAAKsD,SAEjFtD,EAAKuD,eAEDvD,EAAKuD,gBAAiB,IACvBV,EAAW3D,EAAGc,EAAKuD,eAEvBV,EAASW,MACL,WAAYxD,EAAKiB,IAAIwC,OAAO,IAC5B,WAAYzD,EAAKiB,IAAIyC,QAAQ,MAKhC1D,EAAK2D,UACNf,EAAY5C,EAAKiB,IAAI2C,aAAc5D,EAAKgD,WACxChD,EAAKiB,IAAI4C,gBAAiBjB,EAAWA,EAAUe,QAAU3D,EAAK8D,QAGlE9D,EAAK+D,cAAe,EACpB/D,EAAKiB,IAAI+C,YAAY,GACrBhE,EAAKiB,IAAIE,QAAQ,qBAAuBnB,IACxCA,EAAKiB,IAAIyB,qBAGbe,MAAO,SAAUD,GACb,GAAIxD,GAAOL,KAAKK,OACZ4C,EAAY5C,EAAKiB,IAAI2C,eACrBK,EAAgBjE,EAAKkE,aAAelE,EAAKc,MAExC0C,GACDxD,EAAKkE,aAAc,EAEnBlE,EAAKc,QAAS,EAEXmD,IACHjE,EAAKG,UAAUgE,SAAS,gBACxBnE,EAAKiB,IAAIE,QAAQ,gBAAkBnB,IAAQI,IAAI,gBAE1CwC,EAAUe,UACXS,aAAcpE,EAAKa,WACnBb,EAAKa,UAAY,EAGjBb,EAAKqE,mBAAuBnF,EAAEoF,MAAQtE,EAAKuE,YACtCvE,EAAKqE,kBAAoB,GAAKG,MAAMxE,EAAKqE,sBAC1CrE,EAAKqE,kBAAoBI,WAKzCf,OAAQ,SAAUF,GACd,GAAIxD,GAAOL,KAAKK,OACZ0E,GAAkB1E,EAAKkE,cAAgBlE,EAAKc,MAG3C0C,GACDxD,EAAKkE,aAAc,EAEnBlE,EAAKc,QAAS,EAGX4D,IACH1E,EAAKG,UAAUwE,YAAY,gBAGqB,IAA3C3E,EAAKwB,OAAOoD,OAAO,aAAahF,QACjCI,EAAKiB,IAAI4C,gBAAiB7D,EAAKiB,IAAI2C,eAAgB5D,EAAKqE,mBAC5DrE,EAAKiB,IAAIE,QAAQ,iBAAmBnB,EAAMA,EAAKqE,oBAAsBjE,IAAI,mBAIjF+B,IAAK,SAAUX,EAAQqD,GACnB,GAGIC,GAHA9E,EAAOL,KAAKK,OACZ+E,EAAgB/E,EAAK6B,WACrBmD,GAAiB,CAGE,WAAlB9F,EAAE+F,KAAKzD,KACRA,EAAStC,EAAEgG,KAAM1D,IAErBtC,EAAGsC,GAAS1B,KAAK,WACb,GAAI8C,GACAuC,EAAQjG,EAAES,KAETkF,GACD7E,EAAKG,UAAU0E,QAASM,GAExBnF,EAAKG,UAAUiF,OAAQD,GAE3BnF,EAAK6B,aACLe,EAAY5C,EAAKiB,IAAIoE,eAAgBF,GAGjCnF,EAAKwB,OADJqD,EACa3F,EAAGiG,GAAQhD,IAAKnC,EAAKwB,QAErBxB,EAAKwB,OAAOW,IAAKgD,GAEnCnF,EAAKiB,IAAIqE,UAAW1C,EAAWuC,IAASnF,EAAKe,OAE7CoE,EAAMpF,KAAK,aAAc6C,GACzB5C,EAAKiB,IAAIE,QAAQ,qBAAuBnB,EAAM4C,EAAWuC,MAG7DnF,EAAKiB,IAAI+C,YAAY,GAErBgB,EAAiBhF,EAAKyC,iBAAoC,EAAhBsC,GAAqB/E,EAAK6B,YAAc,EAC7EmD,IACKhF,EAAK+D,aAED/D,EAAK2D,UACXmB,EAAM9E,EAAKwB,OAAO5B,OAClBI,EAAKqD,UAAYrD,EAAKsD,QAAUwB,EAAM,EAAI,EACpC9E,EAAKa,WACPb,EAAKiB,IAAI4C,gBAAiB7D,IAL9BA,EAAKiB,IAAIQ,kBAWrBqB,eAAgB,WACZ,GACIyC,GADAvF,EAAOL,KAAKK,MAEhBuF,GAAkBC,SAAUxF,EAAKyF,eAAiB,EAAG,KACjDF,GAAmBvF,EAAKwB,OAAO5B,QAA4B,EAAlB2F,KACzCA,EAAkB,GAEtBvF,EAAKgD,UAAYuC,EACZvF,EAAKsD,SACNtD,EAAKqD,UAAYkC,EAAkB,EAC/BvF,EAAKqD,UAAY,IACjBrD,EAAKqD,UAAYrD,EAAKwB,OAAO5B,OAAS,KAG1CI,EAAKqD,UAAYkC,EAAkB,EAC/BvF,EAAKqD,WAAarD,EAAKwB,OAAO5B,SAC9BI,EAAKqD,UAAY,KAI7BqC,cAAe,WACX,GACIC,GADA3F,EAAOL,KAAKK,MAEXA,GAAKsD,SACNqC,EAAQ3F,EAAKqD,UAAY,EAAK,EAC9BrD,EAAKqD,UAAYsC,EAAO3F,EAAK6B,WAAa,EAAI7B,EAAKqD,UAAU,EAC7DrD,EAAKgD,UAAY2C,EAAO,EAAI3F,EAAKqD,UAAU,IAG3CsC,EAAQ3F,EAAKqD,UAAY,GAAMrD,EAAKwB,OAAO5B,OAC3CI,EAAKqD,UAAYsC,EAAO,EAAI3F,EAAKqD,UAAU,EAC3CrD,EAAKgD,UAAY2C,EAAO3F,EAAKwB,OAAO5B,OAAO,EAAII,EAAKqD,UAAU,IAItEuC,OAAQ,SAAUhD,EAAWiD,GACzB,GACIzD,GADApC,EAAO4C,CAkBX,OAfK5C,GAAK8F,QACN1D,EAAKlD,EAAEK,GAAGC,MAAM6C,YAAYrC,EAAK8F,SAC3BD,GAAU7F,EAAK+F,WACrB3D,EAAKlD,EAAEK,GAAGC,MAAM6C,YAAYrC,EAAK+F,WAE/B3D,IACFA,EAAKlD,EAAEK,GAAGC,MAAM6C,YAAYrC,EAAKsC,KAErCtC,EAAK8F,QAAU,KACfnG,KAAKK,OAAO8F,QAAU,KAEjB1D,IACDA,EAAKlD,EAAEK,GAAGC,MAAM6C,YAAY2D,KAC5BhG,EAAKiB,IAAIb,IAAI,eAAiBJ,EAAKsC,GAAK,8BAErCF,GAGX6D,UAAW,SAAUJ,EAAQK,GACzB,GACIC,GAAOC,EAAMC,EAAMzD,EAAWR,EAD9BpC,EAAOL,KAAKK,MAGhB,OAAKA,GAAK6B,WAAa,OACnB7B,EAAKa,UAAY,KAGhBgF,GAAa7F,EAAKsG,OAAQtG,EAAKuG,cAChCvG,EAAKiB,IAAIuF,iBACTxG,EAAKsG,MAAO,EACZlC,aAAapE,EAAKa,WAClBb,EAAKa,UAAY,QAEhBb,EAAKsG,OAEc,IAAnBtG,EAAKa,WAAoBgF,KAG9BO,EAAOpG,EAAKwB,OAAOxB,EAAKgD,WACxBqD,EAAOrG,EAAKwB,OAAOxB,EAAKqD,WACxBT,EAAY5C,EAAKiB,IAAI2C,aAAc5D,EAAKqD,WACxCjB,EAAKpC,EAAKiB,IAAI2E,OAAQhD,EAAWiD,GAEjC7F,EAAKyG,IAAMrE,EAENyD,GAAoCpB,SAA1B7B,EAAU8D,cACrB9D,EAAU+D,MAAQ/D,EAAU8D,aAS3B1G,EAAKqD,WAAarD,EAAKgD,YACvB6C,IAAY7F,EAAKc,SAAWd,EAAKkE,aAAelE,EAAK2D,UAEtD3D,EAAKiB,IAAIE,QAAQ,gBAAkByB,EAAWwD,EAAMC,EAAMH,IACrD9D,EAAGwE,QACJxE,EAAGwE,OAAQhE,EAAWwD,EAAMC,EAAMH,GAEtCC,EAAQ,WACJnG,EAAKsG,MAAO,EAENtG,EAAKG,UAAUJ,KAAM,gBAGvBqC,EAAG+D,OACH/D,EAAG+D,MAAOvD,EAAWwD,EAAMC,EAAMH,GACrClG,EAAKiB,IAAIE,QAAQ,eAAiByB,EAAWwD,EAAMC,EAAMH,IACzDlG,EAAKiB,IAAI4C,gBAAiBjB,GAC1B5C,EAAKiB,IAAI+C,YAAY,KAGzBhE,EAAKsG,MAAO,EACRlE,EAAGyE,WACHzE,EAAGyE,WAAWjE,EAAWwD,EAAMC,EAAMH,EAAKC,GAE1CnG,EAAKiB,IAAI6F,aAAclE,EAAWwD,EAAMC,EAAMH,EAAKC,GAEvDnG,EAAKiB,IAAIyE,gBACT1F,EAAKiB,IAAI+C,cAEThE,EAAKiB,IAAI4C,gBAAiBjB,OAKlCkE,aAAc,SAAUlE,EAAWmE,EAAQC,EAAQd,EAAKe,GACpD,GAAIjH,GAAO4C,EACPwD,EAAOlH,EAAE6H,GAASV,EAAOnH,EAAE8H,GAC3BzH,EAAK,WAEL8G,EAAKa,QAAQlH,EAAKmH,SAAYlE,QAAS,GAAIjD,EAAK2G,MAAO3G,EAAKoH,QAAUpH,EAAKqH,OAAQJ,GAGvFZ,GAAKtD,IAAI/C,EAAKsH,eACdlB,EAAKc,QAAQlH,EAAKuH,YAAevH,EAAK2G,MAAO3G,EAAKwH,SAAWxH,EAAKqH,OAAQ,WACtEjB,EAAKrD,IAAI/C,EAAKyH,cACTzH,EAAK0H,MACNnI,MAGJS,EAAK0H,MACLnI,KAIRsE,gBAAiB,SAAUjB,EAAW+E,GAClC,GAAI3H,GAAOL,KAAKK,OACZ2D,EAA8Bc,SAApBkD,EAAgCA,EAAkB/E,EAAUe,OAC1E,OAAuB,KAAnB3D,EAAKqD,WAAmC,MAAdrD,EAAK4H,MAC/B5H,EAAKiB,IAAIb,IAAI,uBACbJ,EAAK2D,QAAU,EACVA,EACDkE,WAAW,WACP7H,EAAKiB,IAAIE,QAAQ,kBAAoBnB,KACtC2D,GAGH3D,EAAKiB,IAAIE,QAAQ,kBAAoBnB,SAGzCA,EAAKqD,UAAYrD,EAAKgD,YAGCyB,SAAtBzE,EAAK8H,eACD9H,EAAK8H,gBAAiB,GACtB5I,EAAEqD,WAAWvC,EAAK8H,eAAiB9H,EAAK8H,kBAAmB,IAC5D9H,EAAKiB,IAAIb,IAAI,qCACbJ,EAAK2D,QAAU,OACV3D,EAAKa,WACNuD,aAAapE,EAAKa,kBAIzB8C,IACD3D,EAAKuE,WAAarF,EAAEoF,MACKG,SAApBkD,IACD3H,EAAKqE,kBAAoBzB,EAAUe,SAEjC3D,EAAKc,QAAYd,EAAKkE,cACxBlE,EAAKa,UAAYgH,WAAW,WACxB7H,EAAKiB,IAAIgF,WAAW,GAAQjG,EAAKsD,UAClCK,OAKf6C,eAAgB,WACZ,GAAIxG,GAAOL,KAAKK,MACXA,GAAKwB,OAAOoD,OAAO,aAAahF,SACjCI,EAAKwB,OAAOuG,MAAK,GAAO,GACxB/H,EAAKiB,IAAIE,QAAQ,4BAA8BnB,KAG9CA,EAAKyG,KAAOzG,EAAKyG,IAAID,gBACtBxG,EAAKyG,IAAID,eAAgBxG,IAIjCgI,aAAc,SAAU9H,GACpB,GAAIF,GAAOL,KAAKK,MAWhB,OAVAoE,cAAapE,EAAKa,WAClBb,EAAKa,UAAY,EACjBb,EAAKqD,UAAYrD,EAAKgD,UAAY9C,EAE9BF,EAAKqD,UAAY,EACjBrD,EAAKqD,UAAYrD,EAAKwB,OAAO5B,OAAS,EACjCI,EAAKqD,WAAarD,EAAKwB,OAAO5B,SACnCI,EAAKqD,UAAY,GAErBrD,EAAKiB,IAAIgF,WAAW,EAAO/F,GAAO,IAC3B,GAGXmF,eAAgB,SAAUF,GACtB,GACIjF,GAAKD,EADLD,EAAOL,KAAKK,OAEZ4C,EAAYuC,EAAMpF,UACtB,KAAK,GAAIO,KAAKsC,GAENA,EAAUrC,eAAeD,IAAM,eAAeE,KAAKF,KACnDJ,EAAM0C,EAAUtC,GAChBL,EAAYK,EAAEG,MAAM,cAAc,GAAGC,QAAQ,SAAUvB,GACvDa,EAAKiB,IAAIb,IAAI,KAAKJ,EAAK6B,WAAW,GAAG,IAAK5B,EAAU,IAAKC,EAAK,UAAWA,GAAK,KAC9E0C,EAAU3C,GAAaC,EAI/B0C,GAAY1D,EAAEyB,UAAYzB,EAAEK,GAAGC,MAAMoB,SAAUZ,EAAM4C,GACrDA,EAAUqF,SAAWjI,EAAK6B,UAE1B,WAEWe,GAAU3B,UACV2B,GAAUf,iBACVe,GAAUI,gBACVJ,GAAUS,gBACVT,GAAUpB,OACnB,MAAM0G,IAGR,MAAOtF,IAGXgB,aAAc,SAAUuE,GACpB,GAAInI,GAAOL,KAAKK,MACDyE,UAAV0D,IACDA,EAAQnI,EAAKgD,UAEjB,IAAImC,GAAQnF,EAAKwB,OAAO2G,GACpBvF,EAAY1D,EAAEiG,GAAOpF,KAAK,aAC9B,OAAOb,GAAEyB,UAAYX,EAAM4C,IAG/B0C,UAAW,SAAU1C,EAAWuC,EAAOiD,GACnC,GAAIpI,GAAOL,KAAKK,MAChBmF,GAAMpC,IAAKH,EAAUyF,cAChBD,EAAkB,GACnBjD,EAAMpC,IAAK,SAAUqF,GAGpB5D,MAAO5B,EAAU+D,SAClB/D,EAAU+D,MAAQzH,EAAEoD,GAAGgG,OAAO1F,EAAU+D,QAAUzH,EAAEoD,GAAGgG,OAAOC,UAC5D3F,EAAU8E,OACZ9E,EAAU+D,MAAQ/D,EAAU+D,MAAQ,GAExCxB,EAAMhB,SAAUnE,EAAKwI,aAGzBxE,WAAY,SAAUyE,EAASC,GAC3B,GAAI1I,GAAOL,KAAKK,MAChB,IAAMA,EAAK+D,aAAX,CAEA,GAAInB,GAAY5C,EAAKiB,IAAI2C,eACrBZ,EAAYhD,EAAKwB,OAAQxB,EAAKgD,YAE3ByF,GAAWC,KAAa,IAC3B1I,EAAKiB,IAAIE,QAAQ,4BAA8BnB,EAAM4C,EAAWI,IAC3DhD,EAAKgE,WAAa,KAItBhE,EAAK2I,kBACN3I,EAAKwB,OAAOmD,YAAa3E,EAAK2I,kBACzBC,GAAI5I,EAAKgD,WAAYmB,SAAUnE,EAAK2I,kBAGxCF,GAAWzI,EAAK6I,eACjB7I,EAAKwB,OAAOoD,OAAQ,SAAW5E,EAAK2I,iBAAmB,KAAM5F,IAAI,aAAc,UAE1D,IAApB/C,EAAKgE,YACN6D,WAAW,WACP7H,EAAKiB,IAAIE,QAAQ,qBAAuBnB,EAAM4C,EAAWI,EAAWyF,KACrE7F,EAAU+D,OAAS3G,EAAK0H,KAAO,EAAI,IAGjB,IAApB1H,EAAKgE,YACNhE,EAAKiB,IAAIE,QAAQ,qBAAuBnB,EAAM4C,EAAWI,EAAWyF,IAEnEA,GACDzI,EAAKiB,IAAIE,QAAQ,2BAA6BnB,EAAM4C,EAAWI,OAGvE8F,aAAc,SAAUC,GACpB,GAAI/I,GAAOL,KAAKK,OACZ0B,EAAW1B,EAAK+I,EACpB,OAAwB,gBAAbrH,GAEA,gBAAkBlB,KAAMkB,GAAa1B,EAAKG,UAAU4B,KAAML,GAAaxC,EAAGwC,GAEjFA,EAASI,OACFJ,EAEJxC,EAAEwC,IAGb0B,YAAa,SAAUgD,EAAMC,EAAMH,GAC/B,GAAIlG,GAAOL,KAAKK,MACVoG,KACFA,EAAOpG,EAAKwB,OAAOxB,EAAKgD,WACxBqD,EAAOrG,EAAKwB,OAAOxB,EAAKqD,WACxB6C,GAAOlG,EAAKsD,SAKhBpE,EAAEkH,GAAMrD,IAAI,SAAU/C,EAAKgB,KAE3B,IAAIgI,GACAC,EAAIjJ,EAAKgB,KAAO,EAChB8D,EAAM9E,EAAK6B,UACf,IAAIqE,EAAK,CACL,IAAM8C,EAAIhJ,EAAKgD,UAAY,EAAO8B,EAAJkE,EAASA,IACnC9J,EAAGc,EAAKwB,OAAOwH,IAAKjG,IAAK,SAAUkG,IACvC,KAAMD,EAAI,EAAGA,EAAIhJ,EAAKgD,UAAWgG,IAC7B9J,EAAGc,EAAKwB,OAAOwH,IAAKjG,IAAK,SAAUkG,SAEtC,CACD,IAAMD,EAAIhJ,EAAKgD,UAAY,EAAGgG,GAAK,EAAGA,IAClC9J,EAAGc,EAAKwB,OAAOwH,IAAKjG,IAAK,SAAUkG,IACvC,KAAMD,EAAIlE,EAAM,EAAGkE,EAAIhJ,EAAKgD,UAAWgG,IACnC9J,EAAGc,EAAKwB,OAAOwH,IAAKjG,IAAK,SAAUkG,KAG3C/J,EAAEmH,GAAMtD,IAAI,SAAU/C,EAAKgB,KAAO,IAGtCkI,cAAe,SAAUC,GACrB,MAAOxJ,MAAKK,OAAOwB,OAAO2G,MAAOgB,KAMzCjK,EAAEK,GAAGC,MAAMY,IAAM,WAETgJ,OAAOC,SAAWA,QAAQjJ,KAC1BiJ,QAAQjJ,IAAI,YAAckJ,MAAMC,UAAUC,KAAKC,KAAKC,UAAW,OAGvExK,EAAEK,GAAGC,MAAMF,QAAU,WAAa,MAAO,WAAaA,GAStDJ,EAAEK,GAAGC,MAAM6C,aACPsH,UAEAC,MACIhD,OAAQ,SAAU5G,EAAMoG,EAAMC,EAAMH,GAChClG,EAAKiB,IAAImC,YAAaiD,EAAMD,EAAMF,GAClClG,EAAKsH,WAAcrE,QAAS,EAAGE,WAAY,UAAWD,QAAS,WAGvE8C,MACIY,OAAQ,SAAU5G,EAAMoG,EAAMC,EAAMH,GAChC,GAAInD,GAAM/C,EAAKiB,IAAI2C,aAAc5D,EAAKqD,WAAYgF,YAClDrI,GAAKiB,IAAImC,YAAagD,EAAMC,EAAMH,GAClClG,EAAKsH,UAAYpI,EAAEyB,OAAOoC,GAAOE,QAAS,EAAGE,WAAY,UAAWD,QAAS,UAC7ElD,EAAKmH,QAAWlE,QAAS,GACzBjD,EAAKuH,SAAYtE,QAAS,KAGlC4G,SACIjD,OAAQ,SAAU5G,EAAOoG,EAAMC,EAAMH,GACjC,GAAInD,GAAM/C,EAAKiB,IAAI2C,aAAc5D,EAAKqD,WAAYgF,YAClDrI,GAAKiB,IAAImC,YAAagD,EAAMC,EAAMH,GAClClG,EAAKsH,UAAYpI,EAAEyB,OAAOoC,GAAOE,QAAS,EAAGE,WAAY,UAAWD,QAAS,UAC7ElD,EAAKuH,SAAYtE,QAAS,KAGlC6G,YACIlD,OAAQ,SAAU5G,EAAMoG,EAAMC,EAAMH,GAChClG,EAAKiB,IAAImC,YAAagD,EAAMC,EAAMH,EAClC,IAAI6D,GAAI/J,EAAKG,UAAU4C,IAAI,WAAW,UAAUiH,OAChDhK,GAAKsH,WAAc2C,KAAM/D,EAAM6D,GAAMA,EAAGG,IAAK,EAAGjH,QAAS,EAAGE,WAAY,UAAWD,QAAS,SAC5FlD,EAAKyH,UAAa0C,OAAQnK,EAAKe,MAAQ,EAAGkJ,KAAM,GAChDjK,EAAKmH,QAAW8C,KAAM,GACtBjK,EAAKuH,SAAY0C,KAAM/D,GAAO6D,EAAIA,MAM9C7K,EAAEK,GAAGC,MAAMoB,UACPwJ,WAAkB,EAClBC,aAAkB,gDAClBvG,MAAkB,EAClBuD,OAAkB,KAClB/E,GAAiB,OACjBuG,eAAkB,EAClBjB,KAAkB,EAClB7B,SAAkBtB,OAClBiC,YAAkBjC,OAClB8B,aAAkB,EAClBvF,KAAkB,IAClBuC,cAAkB,EAClBD,SAAkB,EAClBqF,iBAAkB,qBAClBH,WAAkB,cAClBH,UAAoBiC,SAAU,WAAYJ,IAAK,EAAGD,KAAM,GACxDzI,OAAiB,QACjBmF,MAAkB,IAClBlB,cAAkB,EAClBiC,MAAkB,EAClB/D,QAAkB,IAClBK,WAAkB,GAItB9E,EAAEqL,UAAUC,MAAM,WACdtL,EAAGA,EAAEK,GAAGC,MAAMoB,SAASyJ,cAAe7K,WAGvCiL;AAGH,SAAUvL,GACV,YAkDA,SAASwL,GAAgBxC,EAAGlI,GACxB,GAAI2K,GAAOC,EAAQC,EACfC,EAAa9K,EAAK8K,UAEtB,IAAmB,aAAdA,EACDF,EAAS1L,EAAGc,EAAKwB,OAAQxB,EAAKgD,YAAc+H,cAC5C/K,EAAKG,UAAUyK,OAAQA,OAEtB,IAAK5K,EAAKgL,iBACXhL,EAAKG,UAAUyK,OAAQ5K,EAAKG,UAAU6J,QAAUhK,EAAKgL,sBAEpD,IAAoB,SAAfF,GAAmD,UAAxB5L,EAAE+F,KAAM6F,IAA4BA,GAAc,EAAM,CASzF,GAPID,EADgB,SAAfC,EACeG,EAAmB/C,EAAGlI,GAChC8K,GAAc9K,EAAKwB,OAAO5B,OAChB,EAEAkL,EAGfD,GAAiB7K,EAAKkL,eACvB,MAEJlL,GAAKkL,eAAiBL,EACjB7K,EAAKmL,WACNnL,EAAKmL,UAAUC,SAGnBT,EAAQzL,EAAGc,EAAKwB,OAAQqJ,GAAgBQ,WAAU,IAGlDV,EAAMW,WAAY,eAAgBvJ,KAAM,qBAAsBuJ,WAAY,eAE1EX,EAAM5H,KACFuH,SAAU,SACVnH,WAAY,SACZD,QAAS,UACVqI,UAAWvL,EAAKG,WAAYgE,SAAS,8BAA8BQ,YAAY,sBAClFgG,EAAM5I,KAAM,KAAMgB,IAAK,aAAc,UAErC/C,EAAKmL,UAAYR,GAIzB,QAASM,GAAmB/C,EAAGlI,GAC3B,GAAImI,GAAQ,EAAGqD,EAAM,EAUrB,OAPAxL,GAAKwB,OAAO1B,KAAK,SAASkJ,GACtB,GAAIyC,GAAIvM,EAAES,MAAMiL,QACXa,GAAID,IACLA,EAAMC,EACNtD,EAAQa,KAGTb,EAGX,QAASuD,GAAUxD,EAAGlI,EAAM2L,EAAUC,GAClC,GAAIH,GAAIvM,EAAE0M,GAAUb,aACpB/K,GAAKG,UAAU+G,SAAW0D,OAAQa,GAAKzL,EAAK6L,gBAAiB7L,EAAK8L,kBAGtE,QAASC,GAAW7D,EAAGlI,GACdA,EAAKgM,sBACN9M,EAAEkK,QAAQ6C,IAAK,2BAA4BjM,EAAKgM,qBAChDhM,EAAKgM,oBAAsB,MAE/BhM,EAAKG,UAAU8L,IAAK,wCAAyCvB,GAC7D1K,EAAKG,UAAU8L,IAAK,kBAAmBF,GACvC/L,EAAKG,UAAU8L,IAAK,eAAgBP,GAE/B1L,EAAKmL,YACNnL,EAAKmL,UAAUC,SACfpL,EAAKmL,UAAY,MA1HzBjM,EAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChBkK,WAAY,EACZe,gBAAiB,IACjBC,iBAAkB,OAGtB5M,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,GAqC9C,QAASmM,KACLzB,EAAgBxC,EAAGlI,GArCvB,GAGIoM,GAHAtB,EAAa9K,EAAK8K,WAClBuB,EAAInN,EAAE+F,KAAM6F,GACZwB,EAAiB,MAGV,WAAND,GAAwB,WAANA,KAIvBrM,EAAKG,UAAU+L,GAAI,wCAAyCxB,GAC5D1K,EAAKG,UAAU+L,GAAI,kBAAmBH,GAEnB,aAAdjB,EACD9K,EAAKG,UAAU+L,GAAI,eAAgBR,GAEvB,WAANW,GAAkB,WAAW7L,KAAMsK,KAEzCsB,EAAQtB,EAAWrK,MAAM,gBACzB2L,EAAQA,EAAM,GAAKA,EAAM,GACzBpM,EAAKgL,iBAAmBoB,GAKjB,WAANC,IAEDrM,EAAKgM,oBAAsB,WACvB5H,aAAckI,GACdA,EAAiBzE,WAAYsE,EAAU,KAG3CjN,EAAEkK,QAAQ8C,GAAI,2BAA4BlM,EAAKgM,sBAGnDnE,WAAYsE,EAAU,QAqFvB1B;AAGH,SAAUvL,GACV,YAEAA,GAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChB2L,QAAkB,mBAClBC,gBAAkB,gCAClBC,QAAkB,mBAClBC,gBAAkB,0CAClBC,cAAkB,YAGtBzN,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,EAAM4C,EAAWI,GAC/D,GAA4B,YAAvBhD,EAAK2M,cAAV,CAGAzN,EAAEY,MAAM,UAAU,WAAY,WAC1B,GAAIiJ,GAAOpJ,KACPiN,EAAWhK,EAAUmG,EAAK,YAC1BI,EAAKnJ,EAAKiB,IAAI6H,aAAcC,EAC5BI,GAAGvJ,QAAUgN,GACbzD,EAAG0D,KAAM7M,EAAKiB,IAAI6L,KAAMF,EAAUhK,EAAW5C,EAAMgD,IACnDmG,EAAG4D,QAGH5D,EAAG6D,YAKf9N,EAAEqL,UAAU2B,GAAI,kBAAmB,SAAUhE,EAAGlI,GAC5C,GAAImJ,EACJjK,GAAEY,MAAM,UAAU,WAAY,WAC1B,GAAIiJ,GAAOpJ,KAAMiN,EAAW5M,EAAK+I,EAAK,WACjC/I,GAAK+I,IAAS6D,IACfzD,EAAKnJ,EAAKiB,IAAI6H,aAAc,WAC5BK,EAAG8D,cAKZxC;AAGH,SAAUvL,GACV,YAEA,IAAIgO,GAAKhO,EAAEK,GAAGC,KAEdN,GAAEK,GAAGC,MAAQ,SAAUC,GACnB,GAAI0N,GAAKC,EAAOpN,EACZqB,EAAOnC,EAAEmO,UAAW3D,UAExB,OAA0B,UAArBxK,EAAE+F,KAAMxF,GACFE,KAAKH,MAAO,OAAQC,GAGL,UAArBP,EAAE+F,KAAMxF,GACFE,KAAKG,KAAK,WACb,GAAIwN,EAIJ,OAHAH,GAAM1N,EACNO,EAAOd,EAAES,MAAMI,KAAK,cAEN0E,SAATzE,MACDkN,GAAG9M,IAAI,2DAA6D+M,EAAM,cAI1EA,EAAa,QAAPA,EAAgB,OAASA,EAC/BC,EAAQpN,EAAKiB,IAAKkM,GACbjO,EAAEqD,WAAY6K,IACfE,EAAUpO,EAAEmO,UAAWhM,GACvBiM,EAAQC,QACDH,EAAMI,MAAOxN,EAAKiB,IAAKqM,QAG9BJ,GAAG9M,IAAK,oBAAqB+M,MAMlCD,EAAGM,MAAO7N,KAAM+J,YAK/BxK,EAAEyB,OAAQzB,EAAEK,GAAGC,MAAO0N,GAEtBhO,EAAEyB,OAAQuM,EAAGjM,KACToF,KAAM,WACF,GAAIrG,GAAOL,KAAKK,MAChB,KAAKA,EAAKsG,MAAUtG,EAAKuG,YAAzB,CAGA,GAAIkH,GAAQzN,EAAKsD,QAAU,GAAK,CAC3BtD,GAAKoK,aAAc,GAAWpK,EAAKgD,UAAYyK,GAAWzN,EAAK6B,aAGpE7B,EAAKiB,IAAI+G,aAAcyF,GACvBzN,EAAKiB,IAAIE,QAAQ,cAAgBnB,IAAQI,IAAI,iBAGjDsN,KAAM,WACF,GAAI1N,GAAOL,KAAKK,MAChB,KAAKA,EAAKsG,MAAUtG,EAAKuG,YAAzB,CAEA,GAAIkH,GAAQzN,EAAKsD,QAAU,EAAI,EAC1BtD,GAAKoK,aAAc,GAAWpK,EAAKgD,UAAYyK,EAAU,IAG9DzN,EAAKiB,IAAI+G,aAAcyF,GACvBzN,EAAKiB,IAAIE,QAAQ,cAAgBnB,IAAQI,IAAI,iBAGjDuN,QAAS,WACLhO,KAAKoI,MAEL,IAAI/H,GAAOL,KAAKK,OACZ4N,EAAQ1O,EAAEqD,WAAYrD,EAAE2O,OAAU3O,EAAE2O,MAAQ3O,EAAEmB,IAClD+D,cAAapE,EAAKa,WAClBb,EAAKa,UAAY,EACjBb,EAAKiB,IAAI8G,OACT/H,EAAKiB,IAAIE,QAAS,mBAAqBnB,IAASI,IAAI,mBACpDJ,EAAKG,UAAU2N,aACfF,EAAO5N,EAAKG,UAAU,GAAI,eAAe,GAGlCH,EAAK+N,wBACR/N,EAAKG,UAAUmL,WAAY,SAC3BtL,EAAKwB,OAAO8J,WAAY,SACxBtL,EAAKwB,OAAOmD,YAAa3E,EAAK2I,mBAElC3I,EAAKwB,OAAO1B,KAAK,WACb,GAAIqF,GAAQjG,EAAES,KACdwF,GAAM2I,aACN3I,EAAMR,YAAa3E,EAAKwI,YACxBoF,EAAOjO,KAAM,eAAe,MAIpCqO,KAAM,SAAU7F,EAAO7F,GAEnB,GAAI4D,GACAlG,EAAOL,KAAKK,MAChB,KAAKA,EAAKsG,MAAUtG,EAAKuG,YAAzB,CAEA,GAAI0H,GAAMzI,SAAU2C,EAAO,GAC3B,IAAI3D,MAAMyJ,IAAc,EAANA,GAAWA,GAAOjO,EAAKwB,OAAO5B,OAE5C,WADAI,GAAKiB,IAAIb,IAAI,8BAAgC6N,EAGjD,IAAIA,GAAOjO,EAAKgD,UAEZ,WADAhD,GAAKiB,IAAIb,IAAI,mCAAoC6N,EAGrDjO,GAAKqD,UAAY4K,EACjB7J,aAAapE,EAAKa,WAClBb,EAAKa,UAAY,EACjBb,EAAKiB,IAAIb,IAAI,SAAU6N,EAAK,iBAC5B/H,EAAMlG,EAAKgD,UAAYhD,EAAKqD,UAC5BrD,EAAK8F,QAAUxD,EACftC,EAAKiB,IAAIgF,WAAW,EAAMC,KAG9B6B,KAAM,WACF,GAAI/H,GAAOL,KAAKK,OACZ6C,EAAW7C,EAAKG,SACpBiE,cAAapE,EAAKa,WAClBb,EAAKa,UAAY,EACjBb,EAAKiB,IAAIuF,iBACJxG,EAAKuD,eACDvD,EAAKuD,gBAAiB,IACvBV,EAAW3D,EAAGc,EAAKuD,eACvBV,EAASoJ,IAAI,0BAEjBjM,EAAKiB,IAAIE,QAAQ,iBAAmBnB,IAAQI,IAAI,kBAGpD8N,OAAQ,WACJ,GAAIlO,GAAOL,KAAKK,MAChBA,GAAKiB,IAAI0M,UACT3N,EAAKG,UAAUX,SAGnB4L,OAAQ,SAAUjD,GAGd,IAAM,GADFhD,GAAOgJ,EADPnO,EAAOL,KAAKK,OACUwB,KAAayG,EAAW,EACxCe,EAAE,EAAGA,EAAIhJ,EAAKwB,OAAO5B,OAAQoJ,IACnC7D,EAAQnF,EAAKwB,OAAOwH,GACfA,GAAKb,EACNgG,EAAgBhJ,GAGhB3D,EAAO4M,KAAMjJ,GACbjG,EAAGiG,GAAQpF,KAAK,cAAckI,SAAWA,EACzCA,IAGHkG,KACDnO,EAAKwB,OAAStC,EAAGsC,GACjBxB,EAAK6B,aACL3C,EAAGiP,GAAgB/C,SACfjD,GAASnI,EAAKgD,UACdhD,EAAKiB,IAAI+G,aAAc,GACjBG,EAAQnI,EAAKgD,UACnBhD,EAAKgD,YAELhD,EAAKgD,YAEThD,EAAKiB,IAAIE,QAAQ,uBAAyBnB,EAAMmI,EAAOgG,IAAiB/N,IAAI,uBAC5EJ,EAAKiB,IAAI+C,iBAOrB9E,EAAEqL,UAAU2B,GAAG,cAAe,mBAAoB,SAAShE,GAEvDA,EAAEmG,gBACF,IAAIlF,GAAKjK,EAAES,MACP2O,EAAUnF,EAAGpJ,KAAK,aAClB6B,EAAUuH,EAAGpJ,KAAK,kBAAoB,kBAC1Cb,GAAE0C,GAASpC,MAAM8O,EAASnF,EAAGpJ,KAAK,iBAInC0K;AAGH,SAAUvL,GACV,YAyBA,SAASqP,GAAcvO,EAAMwO,GACzB,GAAIC,EACJ,OAAKzO,GAAK0O,gBACN1O,EAAK0O,YAAa,IAItBD,EAAOrF,OAAOuF,SAASF,KAAKG,UAAU,OAEtC5O,GAAKwB,OAAO1B,KAAK,SAASkJ,GACtB,GAAK9J,EAAES,MAAMI,KAAM,eAAkB0O,EAAO,CACxC,GAAKD,KAAqB,EACtBxO,EAAKyF,cAAgBuD,MAEpB,CACD,GAAI9C,GAAMlG,EAAKgD,UAAYgG,CAC3BhJ,GAAKqD,UAAY2F,EACjBhJ,EAAKiB,IAAIgF,WAAW,EAAMC,GAE9B,OAAO,MA1CnBhH,EAAEqL,UAAU2B,GAAI,uBAAwB,SAAUhE,EAAGlI,GACjDuO,EAAcvO,GAAM,GAEpBA,EAAK6O,cAAgB,WACjBN,EAAcvO,GAAM,IAGxBd,EAAGkK,QAAS8C,GAAI,aAAclM,EAAK6O,iBAGvC3P,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,EAAM4C,GAC/CA,EAAU6L,MAAU,IAAM7L,EAAU6L,MAAUrF,OAAOuF,SAASF,OAC/DzO,EAAK0O,YAAa,EAClBtF,OAAOuF,SAASF,KAAO7L,EAAU6L,QAIzCvP,EAAEqL,UAAU2B,GAAI,kBAAmB,SAAUhE,EAAGlI,GACvCA,EAAK6O,eACN3P,EAAGkK,QAAS6C,IAAK,aAAcjM,EAAK6O,kBA4BzCpE;AAGH,SAAUvL,GACV,YAEAA,GAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChBkO,QAAQ,IAGZ5P,EAAEqL,UAAU2B,GAAI,kBAAmB,SAAUhE,EAAGlI,GAU5C,QAASmC,GAAKX,EAAQqD,GA6DlB,QAASkK,GAAU5J,GACf,GAAIiB,EACgB,SAAfpG,EAAK8O,QACNE,EAASZ,KAAMjJ,GACK,IAAftD,IAEDmN,EAAS/M,KAAMgN,GACfC,EAAM1B,MAAOxN,EAAKiB,KAAO+N,EAAUnK,IACnC7E,EAAKG,UAAUwE,YAAY,oBAI/ByB,EAAOlH,EAAEc,EAAKwB,OAAOxB,EAAKgD,YAC1BkM,EAAM1B,MAAOxN,EAAKiB,KAAOkE,EAAON,IAChCuB,EAAK2G,OACL/M,EAAKG,UAAUwE,YAAY,kBAInC,QAASsK,GAAOE,EAAGC,GACf,MAAOD,GAAEpP,KAAK,SAAWqP,EAAErP,KAAK,SAhFpC,GAAIiP,KACJ,IAAyB,UAApB9P,EAAE+F,KAAMzD,GACTA,EAAStC,EAAEgG,KAAM1D,OAChB,IAAyB,UAApBtC,EAAE+F,KAAMzD,GACd,IAAK,GAAIwH,GAAE,EAAGA,EAAIxH,EAAO5B,OAAQoJ,IAC7BxH,EAAOwH,GAAK9J,EAAEsC,EAAOwH,IAAI,EAGjCxH,GAAStC,EAAGsC,EACZ,IAAIK,GAAaL,EAAO5B,MAEjBiC,KAGPL,EAAOuB,IAAI,aAAa,UAAUsM,SAAS,QAAQvP,KAAK,SAASkJ,GAkC7D,QAASsG,KACY,MAAV7B,MACD5L,EACFkN,EAAU5J,IApClB,GAAIsI,GAAQ,EACRtI,EAAQjG,EAAES,MACV4P,EAASpK,EAAMqK,GAAG,OAASrK,EAAQA,EAAMpD,KAAK,MAIlD,OAHAoD,GAAMpF,KAAK,QAASiJ,GAEpBuG,EAASA,EAAO3K,OAAO,8BAA8BA,OAAO,kBACrD2K,EAAO3P,QAMd6N,EAAQ8B,EAAO3P,WACf2P,GAAOzP,KAAK,WAEHH,KAAK8P,SACNH,IAGApQ,EAAES,MAAM+P,KAAK,WACTJ,MACDpD,GAAG,QAAS,WACM,MAAVuB,IAEHzN,EAAKiB,IAAIb,IAAI,iCAAkCT,KAAKgQ,KAC9B,MAAf9N,GAAmC,QAAf7B,EAAK8O,QAC5BI,EAAM1B,MAAOxN,EAAKiB,KAAO+N,EAAUnK,aAnBjDhD,MACFmN,GAASZ,KAAMjJ,MAiClBtD,GACD7B,EAAKG,UAAUgE,SAAS,kBAnEhC,GAAI+K,EAEElP,GAAK8O,SAIXI,EAAQlP,EAAKiB,IAAIkB,IACjBnC,EAAKiB,IAAIkB,IAAMA,MAwFhBsI;AAGH,SAAUvL,GACV,YAsDA,SAAS0Q,GAAgB5P,EAAM4C,EAAWuC,GACtC,GAAI0K,GACAC,EAAS9P,EAAKiB,IAAI6H,aAAc,QACpCgH,GAAOhQ,KAAK,WACR,GAAIiQ,GAAQ7Q,EAAES,KACd,IAAKiD,EAAUoN,cAAgB,CAC3B,GAAIC,GAASjQ,EAAKiB,IAAI6L,KAAMlK,EAAUoN,cAAepN,EAAW5C,EAAMmF,EAAM,GAC5E0K,GAAY3Q,EAAG+Q,GAASZ,SAAUU,OAGlCF,GAAYE,EAAMG,WAAWtH,GAAI5I,EAAK6B,WAAa,EAEvDgO,GAAU3D,GAAIlM,EAAKmQ,WAAY,SAASjI,GAC7BlI,EAAKoQ,kBACRlI,EAAEmG,iBACNrO,EAAKiB,IAAIoP,KAAMN,EAAO7H,EAAEoI,mBAKpC,QAASD,GAAMN,EAAOQ,GAElB,GAAIvQ,GAAOL,KAAKK,MAChB,KAAKA,EAAKsG,MAAUtG,EAAKuG,YAAzB,CAGA,GAAI4B,GAAQ4H,EAAMG,WAAW/H,MAAOoI,GAChClN,EAAY8E,EACZjC,EAAMlG,EAAKgD,UAAYK,CACvBrD,GAAKgD,WAAaK,IAGtBrD,EAAKqD,UAAYA,EACjBrD,EAAK8F,QAAU9F,EAAKwQ,QACpBxQ,EAAKiB,IAAIgF,WAAW,EAAMC,GAC1BlG,EAAKiB,IAAIE,QAAQ,yBAA0BnB,EAAM+P,EAAOQ,MAvF5DrR,EAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChBmP,MAAkB,iBAClBU,iBAAkB,qBAClBN,WAAkB,cAClBC,iBAAkB3L,OAClBuL,cAAkB,wBAGtB9Q,EAAEqL,UAAU2B,GAAI,kBAAmB,SAAUhE,EAAGlI,EAAMiB,GAElDA,EAAI2O,eAAiBA,IAGzB1Q,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,EAAM4C,EAAW8N,GAC1D1Q,EAAK+P,QACN/P,EAAKiB,IAAI2O,eAAiB5P,EAAM4C,EAAW8N,GAC3C1Q,EAAKiB,IAAIoP,KAAOA,KAIxBnR,EAAEqL,UAAU2B,GAAI,sBAAuB,SAAUhE,EAAGlI,EAAMmI,GACtD,GAAKnI,EAAK+P,MAAQ,CACd,GAAID,GAAS9P,EAAKiB,IAAI6H,aAAc,QACpCgH,GAAOhQ,KAAK,WACR,GAAIiQ,GAAQ7Q,EAAES,KACdT,GAAG6Q,EAAMG,WAAW/H,IAASiD,cAKzClM,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,GAC9C,GAAI8P,EAEC9P,GAAK+P,QACND,EAAS9P,EAAKiB,IAAI6H,aAAc,SAChCgH,EAAOhQ,KAAK,WACTZ,EAAES,MAAMuQ,WAAWvL,YAAa3E,EAAKyQ,kBACnC7H,GAAI5I,EAAKgD,WAAYmB,SAAUnE,EAAKyQ,uBAKjDvR,EAAEqL,UAAU2B,GAAI,kBAAmB,SAAUhE,EAAGlI,GAC5C,GAAI+P,GAAQ/P,EAAKiB,IAAI6H,aAAc,QAE9BiH,KACDA,EAAMG,WAAWjE,IAAKjM,EAAKmQ,YACtBnQ,EAAKgQ,eACND,EAAM9C,YA0CfxC;AAGH,SAAUvL,GACV,YAEAA,GAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChByF,KAAgB,gBAChBsK,UAAgB,cAChBC,cAAgB,WAChBlD,KAAgB,gBAChBmD,UAAgB,cAChBC,OAAgB,IAGpB5R,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,GAW9C,GAVAA,EAAKiB,IAAI6H,aAAc,QAASoD,GAAIlM,EAAK2Q,UAAW,SAASzI,GACzDA,EAAEmG,iBACFrO,EAAKiB,IAAIoF,SAGbrG,EAAKiB,IAAI6H,aAAc,QAASoD,GAAIlM,EAAK6Q,UAAW,SAAS3I,GACzDA,EAAEmG,iBACFrO,EAAKiB,IAAIyM,SAGR1N,EAAK8Q,MAAQ,CACd,GAAIH,GAAY3Q,EAAK+Q,UAAY,gBAAkB,kCAC/CF,EAAY7Q,EAAK+Q,UAAY,kBAAoB,mCACrD/Q,GAAKG,UAAU+L,GAAIyE,EAAW,WAC1B3Q,EAAK8F,QAAU9F,EAAKgR,QACpBhR,EAAKiB,IAAIoF,SAEbrG,EAAKG,UAAU+L,GAAI2E,EAAW,WAC1B7Q,EAAK8F,QAAU9F,EAAKgR,QACpBhR,EAAKiB,IAAIyM,YAKrBxO,EAAEqL,UAAU2B,GAAI,oBAAqB,SAAUhE,EAAGlI,GAC9C,IAAKA,EAAKoK,UAAV,CAGA,GAAI6G,GAAMjR,EAAK4Q,cACXvK,EAAOrG,EAAKiB,IAAI6H,aAAc,QAC9B4E,EAAO1N,EAAKiB,IAAI6H,aAAc,QAC9BoI,EAAclR,EAAKmR,cAAgB,EACnCC,EAAqC3M,SAAtBzE,EAAKqR,aAA4BrR,EAAKqR,aAAarR,EAAK6B,WAAa,CAEnF7B,GAAKgD,WAAaoO,EACnB/K,EAAKlC,SAAU8M,GAAMK,KAAM,YAAY,GAEvCjL,EAAK1B,YAAasM,GAAMK,KAAM,YAAY,GAEzCtR,EAAKgD,YAAckO,EACpBxD,EAAKvJ,SAAU8M,GAAMK,KAAM,YAAY,GAEvC5D,EAAK/I,YAAasM,GAAMK,KAAM,YAAY,MAIlDpS,EAAEqL,UAAU2B,GAAI,kBAAmB,SAAUhE,EAAGlI,GAC5CA,EAAKiB,IAAI6H,aAAc,QAASmD,IAAKjM,EAAK2Q,WAC1C3Q,EAAKiB,IAAI6H,aAAc,QAASmD,IAAKjM,EAAK6Q,WAC1C7Q,EAAKG,UAAU8L,IAAK,sGAGrBxB;AAGH,SAAUvL,GACV,YAEAA,GAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChB2Q,aAAa,IAGjBrS,EAAEqL,UAAU2B,GAAI,uBAAwB,SAAUhE,EAAGlI,GACjD,GAAMA,EAAKuR,YAAX,CAGA,GAKI/P,GAAQgQ,EALRvQ,EAAMjB,EAAKiB,IACXwQ,EAASxQ,EAAIoF,KACbqL,EAASzQ,EAAIyM,KACbiE,EAAc1Q,EAAIgF,UAClBhB,EAAO/F,EAAE+F,KAAMjF,EAAKuR,YAGxB,IAAa,SAARtM,EACDzD,EAASxB,EAAKuR,gBAEb,IAAIrS,EAAEqD,WAAYvC,EAAKuR,aACxB/P,EAASxB,EAAKuR,YAAavR,OAE1B,IAAa,UAARiF,EAAmB,CAGzB,GAFAuM,EAAWtS,EAAGc,EAAKuR,aACnB/P,EAAStC,EAAEgG,KAAMsM,EAAS3E,SACpBrL,EACF,MAEJ,IAAK,QAAQhB,KAAMgB,GACf,IACIA,EAAStC,EAAE0S,UAAWpQ,GAE1B,MAAMqQ,GAEF,WADA5Q,GAAIb,IAAK,mCAAoCyR,OAMjDrQ,GAASA,EAAOsQ,MAAO,GAAIC,QAAQP,EAASzR,KAAK,gBAAkB,OAG5DyB,EAAQA,EAAO5B,OAAS,IAC3B4B,EAAOwQ,MAMdL,IACD1Q,EAAIgF,UAAY,SAAUJ,EAAQK,GAC9B,GAAIiC,GAAOhD,CAEX,OAAKU,IAA4B,IAAlBrE,EAAO5B,WAClB+R,GAAYnE,MAAOxN,EAAKiB,KAAO4E,EAAQK,SAItCA,GAAOlG,EAAKgD,WAAehD,EAAK6B,WAAW,GAC5CsD,EAAQ3D,EAAQ,GAChBA,EAASA,EAAOyQ,MAAO,GACvBjS,EAAKG,UAAU+R,IAAI,oBAAqB,SAAShK,EAAGlI,GAChD6H,WAAW,WACP7H,EAAKiB,IAAI+G,aAAc,IACzB,MAENhI,EAAKiB,IAAIkB,IAAKgD,IAEPe,GAA0B,IAAnBlG,EAAKgD,UAanB2O,EAAYnE,MAAOxN,EAAKiB,KAAO4E,EAAQK,KAZvCiC,EAAQ3G,EAAO5B,OAAO,EACtBuF,EAAQ3D,EAAQ2G,GAChB3G,EAASA,EAAOyQ,MAAO,EAAG9J,GAC1BnI,EAAKG,UAAU+R,IAAI,oBAAqB,SAAShK,EAAGlI,GAChD6H,WAAW,WACP7H,EAAKgD,UAAY,EACjBhD,EAAKiB,IAAI+G,aAAc,KACzB,MAENhI,EAAKiB,IAAIkB,IAAKgD,GAAO,OAQ5BsM,IACDxQ,EAAIoF,KAAO,WACP,GAAIrG,GAAOL,KAAKK,MAChB,IAAKwB,EAAO5B,QAAUI,EAAKgD,WAAehD,EAAK6B,WAAa,EAAM,CAC9D,GAAIsD,GAAQ3D,EAAQ,EACpBA,GAASA,EAAOyQ,MAAO,GACvBjS,EAAKG,UAAU+R,IAAI,oBAAqB,SAAShK,EAAGlI,GAChDyR,EAAOjE,MAAOxN,EAAKiB,KACnBjB,EAAKG,UAAUwE,YAAY,mBAE/B3E,EAAKG,UAAUgE,SAAS,iBACxBnE,EAAKiB,IAAIkB,IAAKgD,OAGdsM,GAAOjE,MAAOxN,EAAKiB,OAK1ByQ,IACDzQ,EAAIyM,KAAO,WACP,GAAI1N,GAAOL,KAAKK,MAChB,IAAKwB,EAAO5B,QAA6B,IAAnBI,EAAKgD,UAAkB,CACzC,GAAImF,GAAQ3G,EAAO5B,OAAO,EACtBuF,EAAQ3D,EAAQ2G,EACpB3G,GAASA,EAAOyQ,MAAO,EAAG9J,GAC1BnI,EAAKG,UAAU+R,IAAI,oBAAqB,SAAShK,EAAGlI,GAChDA,EAAKgD,UAAY,EACjBhD,EAAKiB,IAAI+G,aAAc,IACvBhI,EAAKG,UAAUwE,YAAY,mBAE/B3E,EAAKG,UAAUgE,SAAS,iBACxBnE,EAAKiB,IAAIkB,IAAKgD,GAAO,OAGrBuM,GAAOlE,MAAOxN,EAAKiB,WAMhCwJ;AAGH,SAAUvL,GACV,YAEAA,GAAEyB,OAAOzB,EAAEK,GAAGC,MAAMoB,UAChBuR,UAAW,kBAGfjT,EAAEyB,OAAOzB,EAAEK,GAAGC,MAAMyB,KAChB6L,KAAM,SAAUsF,EAAKpS,GACjB,GAAIqS,GAAQ,GAAIN,QAAQ/R,EAAKmS,WAAajT,EAAEK,GAAGC,MAAMoB,SAASuR,UAAW,KACrE9Q,EAAOnC,EAAEmO,UAAW3D,UAExB,OADArI,GAAKkM,QACE6E,EAAI1R,QAAQ2R,EAAO,SAASC,EAAGF,GAClC,GAAIpJ,GAAGuJ,EAAGC,EAAKlB,EAAMmB,EAAQL,EAAIN,MAAM,IACvC,KAAK9I,EAAE,EAAGA,EAAI3H,EAAKzB,OAAQoJ,IAEvB,GADAwJ,EAAMnR,EAAK2H,GACX,CAEA,GAAIyJ,EAAM7S,OAAS,EAEf,IADA0R,EAAOkB,EACFD,EAAE,EAAGA,EAAIE,EAAM7S,OAAQ2S,IACxBC,EAAMlB,EACNA,EAAOA,EAAMmB,EAAMF,KAAQH,MAG/Bd,GAAOkB,EAAIJ,EAGf,IAAIlT,EAAEqD,WAAW+O,GACb,MAAOA,GAAK9D,MAAMgF,EAAKnR,EAC3B,IAAaoD,SAAT6M,GAA+B,OAATA,GAAiBA,GAAQc,EAC/C,MAAOd,GAEf,MAAOc,SAKhB3H","sourceRoot":"http://malsup.github.io/"}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.filebrowser.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.filebrowser.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.filedrop.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.filedrop.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.filemanager.js elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.filemanager.js
--- elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.filemanager.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.filemanager.js	2015-09-05 21:13:59.000000000 -0500
@@ -307,9 +307,16 @@
 
 	$.filemanager_prop = function (form) {
 		var file = form.elements.file.value,
-			desc = form.elements.desc.value;
+			desc = form.elements.desc.value,
+			link = form.elements.link.value,
+			data = {
+				props: {
+					desc: desc,
+					link: link
+				}
+			};
 
-		$.post ('/filemanager/api/prop/' + file, {prop: 'desc', value: desc}, function (res) {
+		$.post ('/filemanager/api/prop/' + file, data, function (res) {
 			$.close_dialog ();
 			$.add_notification (res.data.msg);
 		});
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.multi-file.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.multi-file.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.multi-image.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.multi-image.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.photoswitcher.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.photoswitcher.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/jquery.tmpl.beta1.min.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/jquery.tmpl.beta1.min.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/mediaelement-and-player.min.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/mediaelement-and-player.min.js are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/js/swfobject.js and elefant-elefant_1_3_11_rc/apps/filemanager/js/swfobject.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/lib/API.php elefant-elefant_1_3_11_rc/apps/filemanager/lib/API.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/lib/API.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/lib/API.php	2015-09-05 21:13:59.000000000 -0500
@@ -135,12 +135,40 @@
 
 	/**
 	 * Handle property update requests (/filemanager/api/prop).
+	 *
+	 * If passed a `props` array, the key/value pairs will be
+	 * saved as properties and returned as a `props` field in
+	 * the response.
+	 *
+	 * Otherwise, individual `prop` and `value` parameters can
+	 * be used to set an individual property's value.
 	 */
 	public function post_prop () {
 		$file = urldecode (join ('/', func_get_args ()));
 		if (! FileManager::verify_file ($file)) {
 			return $this->error (__ ('Invalid file name'));
 		}
+		
+		// handle multiple properties at once
+		if (isset ($_POST['props'])) {
+			if (! is_array ($_POST['props'])) {
+				return $this->error (__ ('Invalid properties'));
+			}
+			
+			foreach ($_POST['props'] as $k => $v) {
+				if (FileManager::prop ($file, $k, $v) === false) {
+					return $this->error (__ ('Error saving properties.'));
+				}
+			}
+			
+			return array (
+				'file' => $file,
+				'props' => $_POST['props'],
+				'msg' => __ ('Properties saved.')
+			);
+		}
+		
+		// handle a single property
 		if (! isset ($_POST['prop'])) {
 			return $this->error (__ ('Missing property name'));
 		}
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/lib/FileManager.php elefant-elefant_1_3_11_rc/apps/filemanager/lib/FileManager.php
--- elefant-elefant_1_3_10_beta/apps/filemanager/lib/FileManager.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/lib/FileManager.php	2015-09-05 21:13:59.000000000 -0500
@@ -220,6 +220,7 @@
 		}
 
 		$new = $folder . '/' . basename ($file);
+		$new = ltrim ($new, '/');
 		if (! rename (self::root () . $file, self::root () . $new)) {
 			self::$error = __ ('Unable to move') . ' ' . $file;
 			return false;
@@ -404,6 +405,9 @@
 		if (! preg_match ('/^[a-zA-Z0-9 _-]+\.[a-zA-Z0-9_-]+$/', $name)) {
 			return false;
 		}
+		if (preg_match ('/\.php$/i', $name)) {
+			return false;
+		}
 		return true;
 	}
 
Files elefant-elefant_1_3_10_beta/apps/filemanager/lib/Functions.php and elefant-elefant_1_3_11_rc/apps/filemanager/lib/Functions.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/lib/Image.php and elefant-elefant_1_3_11_rc/apps/filemanager/lib/Image.php are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/audio.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/audio.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/edit.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/edit.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/gallery/embedded.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/gallery/embedded.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/gallery.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/gallery.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/index.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/mediaelement.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/mediaelement.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/views/photo.html elefant-elefant_1_3_11_rc/apps/filemanager/views/photo.html
--- elefant-elefant_1_3_10_beta/apps/filemanager/views/photo.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/views/photo.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,10 +1,10 @@
 {% if ! User::require_acl ('admin', 'filemanager') %}
-<img src="{{src}}"
+{% if link %}<a href="{{link}}">{% end %}<img src="{{src}}"
 	 id="photo-{{key}}"
 	 style="width: {{width}}px; height: {{height}}px"
 	 alt="{{alt}}"
 	 {% if class %} class="{{class}}"{% end %}
-/>
+/>{% if link %}</a>{% end %}
 {% else %}
 <div id="photo-{{key}}-wrapper" title="{'Edit Photo'} ({{width}}x{{height}})">
 	<img src="{{src}}"
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/views/properties.html elefant-elefant_1_3_11_rc/apps/filemanager/views/properties.html
--- elefant-elefant_1_3_10_beta/apps/filemanager/views/properties.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/views/properties.html	2015-09-05 21:13:59.000000000 -0500
@@ -2,6 +2,11 @@
 <input type="hidden" name="file" value="{{file}}" />
 
 <p>
+	{"Link"}:<br />
+	<input type="text" id="link" size="50" value="{{link}}" />
+</p>
+
+<p>
 	{"Description"}:<br />
 	<textarea id="desc" rows="4" cols="70">{{desc}}</textarea>
 </p>
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/views/settings.html elefant-elefant_1_3_11_rc/apps/filemanager/views/settings.html
--- elefant-elefant_1_3_10_beta/apps/filemanager/views/settings.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/views/settings.html	2015-09-05 21:13:59.000000000 -0500
@@ -2,12 +2,12 @@
 <form method="post" id="{{_form}}">
 
 <p>
-	<strong>{"Aviary image editor"}</strong><br />
-    <a href="http://developers.aviary.com/">{"Register your website here to generate your Aviary credentials."}</a>
+	<strong>{"Adobe Image Editor"}</strong><br />
+    <a href="https://creativesdk.adobe.com/" target="_blank">{"Register your website as an Adobe Creative SDK app here to generate your credentials."}</a>
 </p>
 
 <p>
-	{"Aviary Key"}:<br />
+	{"Adobe Application Client ID"}:<br />
     <input type="text" name="aviary_key" value="{{ aviary_key|quotes }}" size="40" />
 </p>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/filemanager/views/slideshow.html elefant-elefant_1_3_11_rc/apps/filemanager/views/slideshow.html
--- elefant-elefant_1_3_10_beta/apps/filemanager/views/slideshow.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/filemanager/views/slideshow.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,39 +1,30 @@
-<script type="text/javascript"> 
-$(window).load (function () {
-	$('#slideshow-{{name}}').cycle ({
-		fx: 'fade',
-		pager: '#slideshow-{{name}}-nav',
-		timeout: {{timeout}},
-		startingSlide: Math.floor (Math.random () * 5)
-	});
-});
-</script>
-<style type="text/css">
-#slideshow-{{name}}-nav {
-	margin-left: 48%;
-	margin-top: 10px;
-}
-#slideshow-{{name}}-nav a {
-	display: block;
-	width: 10px;
-	height: 10px;
-	background: url(/apps/filemanager/css/notcurrent.png) no-repeat;
-	float: left;
-	text-indent: -9999px;
-	border: 0;
-	margin-right: 3px;
-	text-decoration: none;
-}
+<div id="slideshow-{{name}}" class="cycle-slideshow crop"
+	data-cycle-fx="fade"
+	data-cycle-pause-on-hover="true"
+	data-cycle-timeout="{{ timeout }}"
+	data-cycle-slides="> a" 
+	{% if speed %} data-cycle-speed="{{ speed }}" {% end %}
+	{% if ratio %} data-cycle-auto-height="{{ ratio }}" {% end %}
+	data-cycle-prev="#prev"
+	data-cycle-next="#next"
+	data-cycle-manual-fx="scrollHorz"
+	data-cycle-manual-speed="200"
+	data-paused-text="{"paused"}">
+	<div id="prev" class="cycle-prev"></div>
+	<div id="next" class="cycle-next"></div>
+	<!-- <div class="cycle-overlay"></div> -->
+	{% foreach files %}
+		{% if isset ($data->links[$data->loop_value]) %}
+			<a href="{{links[$data->loop_value]}}" {% if loop_index > 0 %}style="display: none"{% end %}><img src="/{{ loop_value }}" alt="" /></a>
+		{% else %}
+			<a href="#" {% if loop_index > 0 %}style="display: none"{% end %}><img src="/{{ loop_value }}" alt="" /></a>
+		{% end %}
+	{% end %}
+</div>
+<br style="clear: both" />
 
-#slideshow-{{name}}-nav a.activeSlide {
-	background: url(/apps/filemanager/css/current.png) no-repeat;
+<style>
+.cycle-prev, .cycle-next {
+	width: 20% !important;
 }
 </style>
-
-<div id="slideshow-{{name}}">
-{% foreach files %}
-	<img src="/{{ loop_value }}" alt="" {% if loop_index > 0 %}style="display: none"{% end %} />
-{% end %}
-</div>
-<div id="slideshow-{{name}}-nav"></div>
-<br style="clear: both" />
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/swf.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/swf.html are identical
Files elefant-elefant_1_3_10_beta/apps/filemanager/views/video.html and elefant-elefant_1_3_11_rc/apps/filemanager/views/video.html are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/conf/acl.php and elefant-elefant_1_3_11_rc/apps/navigation/conf/acl.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/conf/config.php elefant-elefant_1_3_11_rc/apps/navigation/conf/config.php
--- elefant-elefant_1_3_10_beta/apps/navigation/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,4 +1,4 @@
-; <?php
+; <?php /*
 
 [Admin]
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/conf/embed.php elefant-elefant_1_3_11_rc/apps/navigation/conf/embed.php
--- elefant-elefant_1_3_10_beta/apps/navigation/conf/embed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/conf/embed.php	2015-09-05 21:13:59.000000000 -0500
@@ -28,13 +28,16 @@
 [navigation/breadcrumb]
 
 label = "Navigation: Breadcrumb"
+icon = ellipsis-h
 
 [navigation/languages]
 
 label = "Navigation: Languages"
+icon = globe
 
 [navigation/redirect]
 
 label = "Multilingual Homepage Redirect"
+icon = globe
 
 ; */ ?>
Files elefant-elefant_1_3_10_beta/apps/navigation/conf/helpers.php and elefant-elefant_1_3_11_rc/apps/navigation/conf/helpers.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/css/dropmenu.css and elefant-elefant_1_3_11_rc/apps/navigation/css/dropmenu.css are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/css/icon-nav-contextual.png and elefant-elefant_1_3_11_rc/apps/navigation/css/icon-nav-contextual.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/css/icon-nav-section.png and elefant-elefant_1_3_11_rc/apps/navigation/css/icon-nav-section.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/css/icon-nav-top.png and elefant-elefant_1_3_11_rc/apps/navigation/css/icon-nav-top.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/css/icon-sitemap.png and elefant-elefant_1_3_11_rc/apps/navigation/css/icon-sitemap.png are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/admin.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/admin.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/admin.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/admin.php	2015-09-05 21:13:59.000000000 -0500
@@ -10,7 +10,7 @@
 $page->title = __ ('Navigation');
 $page->layout = 'admin';
 
-$page->add_script ('<script src="/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js"></script>', 'tail');
+$page->add_script ('<script src="/js/jquery-ui/jquery-ui.min.js"></script>', 'tail');
 $page->add_script ('<script src="/apps/navigation/js/tree-drag-drop/tree-drag-drop.js"></script>', 'tail');
 $page->add_style ('/apps/admin/css/font-awesome/css/font-awesome.min.css');
 
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/admin_tree.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/admin_tree.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/api.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/api.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/breadcrumb.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/breadcrumb.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/breadcrumb.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/breadcrumb.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,7 +2,19 @@
 
 /**
  * Displays a breadcrumb menu using a bulleted list that you can
- * apply CSS to with the `breadcrumb` class, for example:
+ * apply CSS to with the `breadcrumb` class.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/breadcrumb');
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/breadcrumb !}
+ *
+ * Also available in the dynamic objects menu as "Navigation: Breadcrumb".
+ *
+ * A CSS styling example:
  *
  *     .breadcrumb {
  *         list-style-type: none;
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/contextual.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/contextual.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/contextual.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/contextual.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,6 +4,16 @@
  * Displays contextual navigation, opening and closing
  * sections based on the currently active page. Shows
  * All parents and children of the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/contextual');
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/contextual !}
+ *
+ * Also available in the dynamic objects menu as "Navigation: Contextual".
  */
 
 $n = Link::nav ();
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/cookie.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/cookie.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/dropmenu.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/dropmenu.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/dropmenu.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/dropmenu.php	2015-09-05 21:13:59.000000000 -0500
@@ -5,11 +5,14 @@
  *
  * Usage:
  *
- * 1. Embed the drop menu in your layout file like this:
+ * ### 1. Embed the drop menu in your layout file like this:
  *
  *     {! navigation/dropmenu !}
  *
- * 2. Customize the menu in your design stylesheet.
+ * ### 2. Customize the menu in your design stylesheet.
+ *
+ * See [apps/navigation/css/dropmenu.css](/apps/navigation/css/dropmenu.css)
+ * for the default styles you can override.
  */
 
 $n = Link::nav ();
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/hook/delete.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/hook/delete.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/hook/edit.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/hook/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/index.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/index.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/handlers/json.php and elefant-elefant_1_3_11_rc/apps/navigation/handlers/json.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/languages.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/languages.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/languages.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/languages.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,10 +2,20 @@
 
 /**
  * Displays the top-level navigation as a bulleted list
- * when [I18n][multilingual] is enabled, which will show
+ * when `[I18n][multilingual]` is enabled, which will show
  * a list of languages linking to their homepages, with
  * `class="current"` added to the current page's `<li>`
  * element for custom styling.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/languages');
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/languages !}
+ *
+ * Also available in the dynamic objects menu as "Navigation: Languages".
  */
 
 if (! conf ('I18n', 'multilingual')) {
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/map.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/map.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/map.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/map.php	2015-09-05 21:13:59.000000000 -0500
@@ -3,6 +3,16 @@
 /**
  * Displays a complete site map as a multi-level
  * bulleted list.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/map');
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/map !}
+ *
+ * Also available in the dynamic objects menu as "Navigation: Site Map".
  */
 
 $n = Link::nav ();
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/pager.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/pager.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/pager.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/pager.php	2015-09-05 21:13:59.000000000 -0500
@@ -5,43 +5,127 @@
  *
  * Usage:
  *
- * 1. Set your data as follows:
+ * ### 1. Set your data as follows:
  *
  *     $limit = 20;
- *     $num = $this->params[0]; // from the URL, e.g. /myapp/handler/#
- *     $offset = $num * $limit;
+ *     $num = isset ($this->params[0])
+ *         ? $this->params[0] // from the URL, e.g. /myapp/handler/#
+ *         : 1;
+ *     $offset = ($num - 1) * $limit;
  *
  *     $items = MyModel::query ()->fetch ($limit, $offset);
+ *     $total = MyModel::query ()->count ();
  *
  *     $data = array (
  *         'limit' => $limit,
- *         'total' => MyModel::query ()->count (),
+ *         'total' => $total,
  *         'items' => $items,
  *         'count' => count ($items),
+ *         'single' => __ ('page'),
+ *         'plural' => __ ('pages'),
  *         'url' => '/myapp/handler/%d'
  *     );
  *
  *     echo $tpl->render ('myapp/view', $data);
  *
- * 2. In your template
+ * ### 2. In your template
  *
- *     {! navigation/pager?style=text&url=[url]&total=[total]&count=[count]&limit=[limit] !}
+ * Text pager:
+ *
+ *     {! navigation/pager
+ *         ?style=text
+ *         &url=[url]
+ *         &total=[total]
+ *         &count=[count]
+ *         &limit=[limit] !}
  *
  * Will show:
  *
  *     << Newer results              Older results >>
  *
- *     {! navigation/pager?style=numbers&url=[url]&total=[total]&count=[count]&limit=[limit] !}
+ * -----
+ *
+ * Text pager with a custom label:
+ *
+ *     {! navigation/pager
+ *         ?style=text
+ *         &url=[url]
+ *         &total=[total]
+ *         &count=[count]
+ *         &limit=[limit]
+ *         &label=pages !}
+ *
+ * Will show:
+ *
+ *     << Newer pages              Older pages >>
+ *
+ * -----
+ * 
+ * Numeric pager:
+ *
+ *     {! navigation/pager
+ *         ?style=numbers
+ *         &url=[url]
+ *         &total=[total]
+ *         &count=[count]
+ *         &limit=[limit] !}
  *
  * Will show:
  *
  *     << 1 2 3 4 >>
  *
- *     {! navigation/pager?style=results&url=[url]&total=[total]&count=[count]&limit=[limit] !}
+ * -----
+ * 
+ * Numeric pager with extra links:
+ *
+ *     {! navigation/pager
+ *         ?style=numbers
+ *         &url=[url]
+ *         &total=[total]
+ *         &count=[count]
+ *         &limit=[limit]
+ *         &extra[all]=All pages
+ *         &extra[/search]=Search !}
  *
  * Will show:
  *
- *     1 to 20 of 32 results:
+ *     << 1 2 3 4 >> All pages Search
+ *
+ * 'All pages' will link to '/myapp/handler/all' based on the 'url' value
+ * in the PHP code above, while 'Search' will link to '/search', an
+ * external link.
+ *
+ * -----
+ *
+ * Standard "X to Y of Z results" pager with a custom label:
+ *
+ *     {! navigation/pager
+ *         ?style=results
+ *         &url=[url]
+ *         &total=[total]
+ *         &count=[count]
+ *         &limit=[limit]
+ *         &single=page
+ *         &plural=pages !}
+ *
+ * Will show:
+ *
+ *     1 to 20 of 32 pages:
+ *
+ * -----
+ * 
+ * Short-form pager:
+ *
+ *     {! navigation/pager
+ *         ?style=short
+ *         &url=[url]
+ *         &total=[total]
+ *         &count=[count]
+ *         &limit=[limit] !}
+ *
+ * Will show:
+ *
+ *     1-20 of 32:
  *
  * All elements can be styled with CSS classes.
  */
@@ -49,7 +133,7 @@
 $o = new StdClass;
 
 // the pager template to display
-$styles = array ('text', 'numbers', 'results');
+$styles = array ('text', 'numbers', 'results', 'short');
 if (! isset ($data['style']) || ! in_array ($data['style'], $styles)) {
 	$data['style'] = 'text';
 }
@@ -58,11 +142,17 @@
 $o->total = $data['total']; // total number of results
 $o->count = $data['count']; // count of results in this set
 $o->url = str_replace ('&amp;', '&', $data['url']); // the url format for building pager links
+$o->single = isset ($data['single']) ? $data['single'] : __ ('result');
+$o->plural = isset ($data['plural']) ? $data['plural'] : __ ('results');
+$o->extra = (isset ($data['extra']) && is_array ($data['extra'])) ? $data['extra'] : array ();
 
 // the page number from the current url, or zero
-$url = str_replace ('%d', '([0-9]+)', preg_quote ($o->url));
-$o->num = (preg_match ('|' . $url . '|', $_SERVER['REQUEST_URI'], $matches))
-	? (int) $matches[1]
+$url = str_replace ('%d', '([a-zA-Z0-9]+)', preg_quote ($o->url));
+$o->orig = (preg_match ('|' . $url . '|', $_SERVER['REQUEST_URI'], $matches))
+	? $matches[1]
+	: 1;
+$o->num = is_numeric ($o->orig)
+	? (int) $o->orig
 	: 1;
 
 $o->offset = ($o->num - 1) * $o->limit; // item offset
@@ -78,6 +168,26 @@
 $o->first_link = sprintf ($o->url, 1);
 $o->last_link = sprintf ($o->url, $o->last_screen);
 
+foreach ($o->extra as $val => $label) {
+	if (strpos ($val, '/') !== false) {
+		$o->extra[$val] = array (
+			'label' => $label,
+			'url' => $val,
+			'key' => $val
+		);
+	} else {
+		$label_url = str_replace ('%d', '%s', $o->url);
+		$_url = sprintf ($label_url, $val);
+		$o->extra[$val] = array (
+			'label' => $label,
+			'url' => $_url,
+			'key' => $val
+		);
+	}
+}
+
+$o->is_extra = isset ($o->extra[$o->orig]);
+
 $o->links = array ();
 $start = ($o->num - 3 > 0) ? $o->num - 3 : 1;
 $end = ($o->num + 3 <= $o->last_screen) ? $o->num + 3 : $o->last_screen;
@@ -90,12 +200,29 @@
 if ($data['style'] === 'results') {
 	echo '<div class="pager">';
 	if ($o->total == 0) {
-		echo __ ('No results.');
+		echo __ ('No %s.', $o->plural);
+	} elseif ($o->total == 1) {
+		echo __ ('1 %s:', $o->single);
+	} else {
+		echo __ (
+			'%d to %d of %d %s:',
+			($o->offset + 1),
+			$o->last,
+			$o->total,
+			$o->label
+		);
+	}
+	echo '</div>';
+	return;
+} elseif ($data['style'] === 'short') {
+	echo '<div class="pager">';
+	if ($o->total == 0) {
+		echo __ ('No %s.', $o->plural);
 	} elseif ($o->total == 1) {
-		echo __ ('1 result:');
+		echo __ ('1 %s:', $o->single);
 	} else {
 		echo __ (
-			'%d to %d of %d results:',
+			'%d-%d of %d:',
 			($o->offset + 1),
 			$o->last,
 			$o->total
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/redirect.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/redirect.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/redirect.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/redirect.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,7 +1,17 @@
 <?php
 
 /**
- * Redirect users to the language homepage.
+ * Redirect users to the current language homepage link.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/redirect');
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/redirect !}
+ *
+ * Also available in the dynamic objects menu as "Multilingual Homepage Redirect".
  */
 
 $url = Link::href ($i18n->language);
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/section.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/section.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/section.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/section.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,6 +4,22 @@
  * Displays a single section of the navigation as a
  * bulleted list, with `class="current"` added to
  * the current page's `<li>` element for custom styling.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/section', array ('section' => 'page-id'));
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/languages?section=page-id !}
+ *
+ * To pass a dynamic value to `section` in a template:
+ *
+ *     {! navigation/languages?section=[id] !}
+ *
+ * This passes the template's `$data->id` as the `section` value.
+ *
+ * Also available in the dynamic objects menu as "Navigation: Section".
  */
 
 $n = Link::nav ();
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/handlers/top.php elefant-elefant_1_3_11_rc/apps/navigation/handlers/top.php
--- elefant-elefant_1_3_10_beta/apps/navigation/handlers/top.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/handlers/top.php	2015-09-05 21:13:59.000000000 -0500
@@ -4,6 +4,16 @@
  * Displays the top-level navigation as a bulleted list,
  * with `class="current"` added to the current page's
  * `<li>` element for custom styling.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('navigation/breadcrumb');
+ *
+ * In a template, call it like this:
+ *
+ *     {! navigation/breadcrumb !}
+ *
+ * Also available in the dynamic objects menu as "Navigation: Top Level".
  */
 
 if (conf ('I18n', 'multilingual')) {
Files elefant-elefant_1_3_10_beta/apps/navigation/js/dropmenu.js and elefant-elefant_1_3_11_rc/apps/navigation/js/dropmenu.js are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/apple/bg.jpg and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/apple/bg.jpg are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/apple/d.png and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/apple/d.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/apple/dot_for_ie.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/apple/dot_for_ie.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/apple/style.css and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/apple/style.css are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/apple/throbber.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/apple/throbber.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/classic/d.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/classic/d.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/classic/d.png and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/classic/d.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/classic/dot_for_ie.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/classic/dot_for_ie.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/classic/style.css and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/classic/style.css are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/classic/throbber.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/classic/throbber.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default/d.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default/d.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default/d.png and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default/d.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default/style.css and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default/style.css are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default/throbber.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default/throbber.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default-rtl/d.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default-rtl/d.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default-rtl/d.png and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default-rtl/d.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default-rtl/dots.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default-rtl/dots.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default-rtl/style.css and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default-rtl/style.css are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/themes/default-rtl/throbber.gif and elefant-elefant_1_3_11_rc/apps/navigation/js/themes/default-rtl/throbber.gif are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/closedhand.cur and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/closedhand.cur are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/collapsed.png and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/collapsed.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/cursorGrab.png and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/cursorGrab.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/expanded.png and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/expanded.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/openhand.cur and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/openhand.cur are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/css/tree-drag-drop.css are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js and elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/jquery-ui-1.9.1.custom.min.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/tree-drag-drop.js elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/tree-drag-drop.js
--- elefant-elefant_1_3_10_beta/apps/navigation/js/tree-drag-drop/tree-drag-drop.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/js/tree-drag-drop/tree-drag-drop.js	2015-09-05 21:13:59.000000000 -0500
@@ -39,11 +39,11 @@
 	}
 			
 	function getContext(el) {
-		return el.closest(".treeDragDrop");
+		return $(".treeDragDrop").first ();
 	}
 	
 	function getOptions(el) {
-		return el.closest(".treeDragDrop").data("options");
+		return $(".treeDragDrop").first ().data("options");
 	}
 	
 	function serializeTree(el, ctx) {
@@ -86,7 +86,7 @@
 		if (updateUrl !== null) {
 			ajaxData = {tree: treeData};
 			$.post(updateUrl, ajaxData, function (res) {
-				//console.log (res.data.msg);
+				//debug (res.data.msg);
 				//TODO: error handling
 				return true;
 			});
@@ -108,13 +108,18 @@
 	$.treeDragDrop.handlers = {
 				
 		handleDraggableStart: function (e, o) {			
-			debug("handleDraggableStart");	
+			debug("handleDraggableStart");
+
 			var options = getOptions($(e.target));			
+
+			// Add selected class to element being dragged
 			$(e.target).addClass(getOptions($(e.target)).selectedClass);
+
 			document.onmousemove = function () {
 				return false;
-			};	
-			
+			};
+
+			// Set cursor to grabbing			
 			$("body").css("cursor", "url(" + options.cursorGrabbingUrl + ") , move").addClass("cursorGrabbing");
 		},
 		
@@ -127,14 +132,16 @@
 			
 			var ctx = getContext($(e.target)),
 				options = getOptions($(e.target)),			
-				tree = $(".tdd-tree", ctx);			
-			// remove the mousemove Listener			
+				tree = $(".tdd-tree", ctx);
+
+			// Remove the mousemove listener and selected class
 			$("li, .tdd-tree", ctx).unbind("mousemove").removeClass(options.selectedClass);
 			
-			// build the array and post the ajax
+			// Build the array and post the ajax
 			debug("handleDraggableStop: sendTree");
 			sendTree(tree, options.updateUrl);
-			
+
+			// Reset cursor to default
 			$("body").removeClass("cursorGrabbing").css("cursor", "auto");
 		},
 		
@@ -148,45 +155,50 @@
 				selectedClass = options.selectedClass,
 				beforeClass = options.beforeClass,
 				afterClass = options.afterClass,
-				marker = options.marker;		
+				marker = options.marker;
+
+			marker.show ();
 			
 			if ($(e.target).is("li")) {
-				// bind MouseMove to the item to check if the draggable should be appended or placed before or after the item 
+				// Bind mousemove to the item to check if the draggable should be appended or placed before or after the item 
 				$(e.target).bind("mousemove", function (mme) {
 					
-					var target = $(mme.target),						
+					var target = $(mme.target),
 						x = mme.pageX - $(mme.target).offset().left,
 						y = mme.pageY - $(mme.target).offset().top,
 						threshhold = options.inFolderThreshhold;
 					
-					// threshhold for apending or placing before/ater
+					// Threshhold for apending or placing before/after
 					// will grow according to the deepness of nesting
-					
 					if (target.find("ul").length !== 0) {
 						threshhold = Math.min(options.inFolderThreshhold * (target.find("ul").length + 1), target.width() * 0.75);
 					}
 					
 					marker.removeClass(beforeClass, afterClass);
 										
-					// prevent dropping items in itself
+					// Prevent dropping an item in itself
 					if (target.hasClass(selectedClass) || target.parents("." + selectedClass).length !== 0) {
 						marker.detach();
+
+					// Add to trashbin
 					} else if (target.parents(".tdd-trashbin").length !== 0) {						
 						target.parents(".tdd-trashbin").append(marker);						
+
+					// Add to tree
 					} else {
-						// append to item
+						// Append to item
 						if (x > threshhold) {							
-							// append to ul if there is one
+							// Append to ul if there is one
 							if (target.is("li") && target.children("ul").length !== 0) {
 								target.children("ul").append(marker);
 							} else if (target.is("li")) {
 								target.append(marker);
 							}
-						// place before item	
+						// Place before item	
 						} else if (y < target.height() / 2) {
 							marker.addClass(beforeClass);
 							target.before(marker);
-						// place after item
+						// Place after item
 						} else {
 							marker.addClass(afterClass);
 							target.after(marker);
@@ -215,45 +227,47 @@
 			debug("handleDroppableDrop");
 			
 			var	draggable = $(o.draggable),
-				dropable = $(e.target),
+				droppable = $(e.target),
 				marker = $.treeDragDrop.defaults.marker,
 				ctx = draggable.data("tddCtx"),
 				options = ctx.data("options");
 				
-			// remove selection	
+			// Remove selected class
 			draggable.removeClass(options.selectedClass);
-			
-			// if its the trashbin put them all next to each other (no nesting)
-			if (dropable.parents(".tdd-trashbin").length !== 0 || dropable.hasClass("tdd-trashbin")) {
+
+			// If it's in the trashbin, put them all next to each other (no nesting)
+			if (droppable.parents(".tdd-trashbin").length !== 0 || droppable.hasClass("tdd-trashbin")) {
 				$(".tdd-trashbin").append(draggable);	
 				$("li", draggable).each(function (index, value) {
 					$(".tdd-trashbin").append(value);
 				});				
 				
-			// put the item directly in the tree ul if it contains no other element	
-			} else if (dropable.hasClass("tdd-tree") && $(".tdd-tree").children().length === 0) {
+			// Put the item directly in the tree ul if it contains no other element	
+			} else if (droppable.hasClass("tdd-tree") && $(".tdd-tree").children().length === 0) {
 				$(".tdd-tree").append(draggable);
-			// otherwise put it before the marker, which will be detached asap
-			} else {				
+
+			// Otherwise put it before the marker, which will be detached asap
+			} else {
 				marker.before(draggable);				
 				if (draggable.parent().is("li")) {					
 					draggable.wrap("<ul></ul>");				
 				}
-			}			
-			marker.detach();
-			//clean up empty uls if its not the tree or trashbin
+			}
+
+			marker.hide();
+
+			// Clean up empty ul's if it's not the tree or trashbin
 			$("ul", ctx).not(".tdd-trashbin, .tdd-tree").each(function () {
 				if ($(this).children().length === 0) {
 					debug($(this));
 					$(this).remove();					
 				}
-			});	
-			// adjust expand/collapse icons 
-			
+			});
+
+			// Adjust expand/collapse icons
 			updateFolderIcons(ctx, options);
 		},
-		
-		
+				
 		// toggle expand/collapse
 		handleClick: function (e) {
 			
@@ -291,18 +305,17 @@
 	};
 	
 	
-	// the Prototype
-		
+	// The prototype
 	$.fn.treeDragDrop = function (options) {
 		
-		//extend the global default with the options for the element
+		// Extend the global default with the options for the element
 		options = $.extend({}, $.treeDragDrop.defaults, options);
 						
 		return this.each(function () {
 			var ctx = $(this),
 				data = ctx.data('treeDragDrop');
 			
-			// init the element
+			// Initialize the element
 			if (!data) {	
 				$("li", ctx).draggable({ 
 					addClasses: false,
@@ -352,11 +365,13 @@
 	
 }(jQuery));
 
+// Cheap test for MSIE
+window.is_msie = (window.navigator.userAgent.indexOf ('MSIE ') > -1);
 
 $('.treeDragDrop').treeDragDrop({
 	collapsedClass: "fa-folder", 
 	expandedClass: "fa-folder-open", 
 	updateUrl: "/navigation/api/update",
-	cursorGrabbingUrl: ($.browser.msie) ? "/apps/navigation/js/tree-drag-drop/css/closedhand.cur" : "/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png"
+	cursorGrabbingUrl: (window.is_msie) ? "/apps/navigation/js/tree-drag-drop/css/closedhand.cur" : "/apps/navigation/js/tree-drag-drop/css/cursorGrabbing.png"
 }); 
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/lib/Functions.php elefant-elefant_1_3_11_rc/apps/navigation/lib/Functions.php
--- elefant-elefant_1_3_10_beta/apps/navigation/lib/Functions.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/lib/Functions.php	2015-09-05 21:13:59.000000000 -0500
@@ -92,7 +92,16 @@
 	$pages = array ();
 	$res = DB::fetch ("select id, title, menu_title, access from #prefix#webpage where access != 'private'");
 
-	//Adds apps to Navigation
+	//Adds apps to Navigation, the new way
+	$nav = Appconf::options ('nav');
+	foreach ($nav as $id => $title) {
+		$appObj = new StdClass ();
+		$appObj->id = $id;
+		$appObj->title = $title;
+		$res[] = $appObj;
+	}
+
+	// Add apps to Navigation, the old way	
 	$apps = glob ('apps/*');
 	foreach ($apps as $app) {
 		$app = str_replace ('apps/', '', $app);
Files elefant-elefant_1_3_10_beta/apps/navigation/lib/Link.php and elefant-elefant_1_3_11_rc/apps/navigation/lib/Link.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/lib/Navigation.php and elefant-elefant_1_3_11_rc/apps/navigation/lib/Navigation.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/lib/Tree.php and elefant-elefant_1_3_11_rc/apps/navigation/lib/Tree.php are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/pix/trash.png and elefant-elefant_1_3_11_rc/apps/navigation/pix/trash.png are identical
Files elefant-elefant_1_3_10_beta/apps/navigation/views/admin.html and elefant-elefant_1_3_11_rc/apps/navigation/views/admin.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/views/pager/numbers.html elefant-elefant_1_3_11_rc/apps/navigation/views/pager/numbers.html
--- elefant-elefant_1_3_10_beta/apps/navigation/views/pager/numbers.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/views/pager/numbers.html	2015-09-05 21:13:59.000000000 -0500
@@ -2,13 +2,20 @@
 	<div class="pager-numbers">
 		<span class="pager-number pager-first"><a href="{{ first_link|none }}">&laquo;</a></span>
 {% foreach links %}
-	{% if loop_index === $data->num %}
+	{% if loop_index === $data->num && ! $data->is_extra %}
 		<span class="pager-number pager-current">{{ loop_index }}</span>
 	{% else %}
 		<span class="pager-number"><a href="{{ loop_value|none }}">{{ loop_index }}</a></span>
 	{% end %}
 {% end %}
 		<span class="pager-number pager-last"><a href="{{ last_link|none }}">&raquo;</a></span>
+{% foreach extra as extra %}
+	{% if $data->extra['url'] == $_SERVER['REQUEST_URI'] || $data->orig === $data->extra['key'] %}
+		<span class="pager-extra pager-current">{{ extra['label']|__ }}</span>
+	{% else %}
+		<span class="pager-extra"><a href="{{ extra['url']|none }}">{{ extra['label']|__ }}</a></span>
+	{% end %}
+{% end %}
 	</div>
 
 	<br clear="both" />
diff -urBNs elefant-elefant_1_3_10_beta/apps/navigation/views/pager/text.html elefant-elefant_1_3_11_rc/apps/navigation/views/pager/text.html
--- elefant-elefant_1_3_10_beta/apps/navigation/views/pager/text.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/navigation/views/pager/text.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,11 +1,11 @@
 <div class="pager">
 	<div class="pager-text">
 {% if num > 1 %}
-		<span class="pager-previous"><a href="{{ prev_link|none }}">&laquo; {" Newer results "}</a></span>
+		<span class="pager-previous"><a href="{{ prev_link|none }}">&laquo; {" Newer "} {{plural}}</a></span>
 {% end %}
 
 {% if more %}
-		<span class="pager-next"><a href="{{ next_link|none }}">{" Older results "} &raquo;</a></span>
+		<span class="pager-next"><a href="{{ next_link|none }}">{" Older "} {{plural}} &raquo;</a></span>
 {% end %}
 	</div>
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/conf/config.php elefant-elefant_1_3_11_rc/apps/social/conf/config.php
--- elefant-elefant_1_3_10_beta/apps/social/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -6,4 +6,8 @@
 
 [Facebook]
 
+[Admin]
+
+name = Social
+
 ; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/conf/embed.php elefant-elefant_1_3_11_rc/apps/social/conf/embed.php
--- elefant-elefant_1_3_10_beta/apps/social/conf/embed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/conf/embed.php	2015-09-05 21:13:59.000000000 -0500
@@ -8,7 +8,7 @@
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^http://.+$|"
+url[regex] = "/^http:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 [social/facebook/like-box]
@@ -20,7 +20,7 @@
 url[label] = Facebook Page URL
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^http://.+$|"
+url[regex] = "/^http:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 width[label] = Width
@@ -62,29 +62,29 @@
 [social/facebook/comments]
 
 label = Facebook: Comments
-icon = /apps/social/css/icon-facebook-comments.png
+icon = facebook
 
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^http://.+$|"
+url[regex] = "/^http:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 [social/facebook/commentcount]
 
 label = Facebook: Comment Count
-icon = /apps/social/css/icon-facebook-commentcount.png
+icon = facebook
 
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^http://.+$|"
+url[regex] = "/^http:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 [social/twitter/follow]
 
 label = Twitter: Follow
-icon = /apps/social/css/icon-twitter-follow.png
+icon = twitter
 
 twitter_id[label] = Twitter ID
 twitter_id[type] = text
@@ -127,7 +127,7 @@
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^http://.+$|"
+url[regex] = "/^http:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 via[label] = Twitter ID
@@ -141,7 +141,7 @@
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^http://.+$|"
+url[regex] = "/^http:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 [social/video/youtube]
@@ -152,7 +152,7 @@
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^https?://.+$|"
+url[regex] = "/^https?:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 width[label] = Player width
@@ -167,6 +167,35 @@
 height[not empty] = 1
 height[message] = Please enter a player height.
 
+[social/video/vine]
+
+label = "Video: Vine"
+icon = video-camera
+
+url[label] = Link
+url[type] = text
+url[not empty] = 1
+url[regex] = "/^https?:\/\/vine\.co\/v\/[a-zA-Z0-9_-]+$/"
+url[message] = Please enter a valid vine.co URL.
+
+size[label] = Player width/height
+size[type] = select
+size[require] = "apps/social/lib/Functions.php"
+size[callback] = vine_size
+size[initial] = "600"
+
+audio[label] = Mute video by default?
+audio[type] = select
+audio[require] = "apps/social/lib/Functions.php"
+audio[callback] = social_yes_no
+audio[initial] = "yes"
+
+embed[label] = Embed Type
+embed[type] = select
+embed[require] = "apps/social/lib/Functions.php"
+embed[callback] = vine_embed
+embed[initial] = "simple"
+
 [social/google/maps]
 
 label = "Google: Map"
@@ -213,7 +242,7 @@
 url[label] = Link
 url[type] = text
 url[not empty] = 1
-url[regex] = "|^https?://.+$|"
+url[regex] = "/^https?:\/\/.+$/"
 url[message] = Please enter a valid URL.
 
 width[label] = Player width
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/conf/helpers.php elefant-elefant_1_3_11_rc/apps/social/conf/helpers.php
--- elefant-elefant_1_3_10_beta/apps/social/conf/helpers.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/conf/helpers.php	2015-09-05 21:13:59.000000000 -0500
@@ -10,4 +10,5 @@
 social/twitter/follow = 1
 social/twitter/tweet = 1
 social/video/vimeo = 1
+social/video/vine = 1
 social/video/youtube = 1
Files elefant-elefant_1_3_10_beta/apps/social/css/icon-facebook-commentcount.png and elefant-elefant_1_3_11_rc/apps/social/css/icon-facebook-commentcount.png are identical
Files elefant-elefant_1_3_10_beta/apps/social/css/icon-facebook-comments.png and elefant-elefant_1_3_11_rc/apps/social/css/icon-facebook-comments.png are identical
Files elefant-elefant_1_3_10_beta/apps/social/css/icon-twitter-follow.png and elefant-elefant_1_3_11_rc/apps/social/css/icon-twitter-follow.png are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/commentcount.php elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/commentcount.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/commentcount.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/commentcount.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Embeds a facebook comment count into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a facebook comment count into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/facebook/commentcount');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/facebook/commentcount !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL to request a comment count for (optional).
+ *
+ * Also available in the dynamic objects menu as "Facebook: Comment Count".
  */
 
 if (! isset (self::$called['social/facebook/init'])) {
@@ -10,6 +23,6 @@
 }
 
 if (strpos ($data['url'], '/') === 0) {
-	$data['url'] = 'http://' . $_SERVER['HTTP_HOST'] . $data['url'];
+	$data['url'] = '//' . $_SERVER['HTTP_HOST'] . $data['url'];
 }
 echo $tpl->render ('social/facebook/commentcount', $data);
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/comments.php elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/comments.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/comments.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/comments.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Embeds facebook comments into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds facebook comments into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/facebook/comments');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/facebook/comments !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL to pull comments for (optional).
+ *
+ * Also available in the dynamic objects menu as "Facebook: Comments".
  */
 
 if (! isset (self::$called['social/facebook/init'])) {
Files elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/init.php and elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/init.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/like-box.php elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/like-box.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/like-box.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/like-box.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Embeds a facebook like-box into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a facebook like-box into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/facebook/like-box');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/facebook/like-box !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL to request a comment count for (optional).
+ *
+ * Also available in the dynamic objects menu as "Facebook: Like-Box".
  */
 
 if (! isset (self::$called['social/facebook/init'])) {
@@ -10,6 +23,6 @@
 }
 
 if (strpos ($data['url'], '/') === 0) {
-	$data['url'] = 'http://' . $_SERVER['HTTP_HOST'] . $data['url'];
+	$data['url'] = '//' . $_SERVER['HTTP_HOST'] . $data['url'];
 }
 echo $tpl->render ('social/facebook/like-box', $data);
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/like.php elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/like.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/facebook/like.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/facebook/like.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Embeds a facebook Like button into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a facebook Like button into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/facebook/like');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/facebook/like !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL to request a comment count for (optional).
+ *
+ * Also available in the dynamic objects menu as "Facebook: Like Button".
  */
 
 if (! isset (self::$called['social/facebook/init'])) {
@@ -10,6 +23,6 @@
 }
 
 if (strpos ($data['url'], '/') === 0) {
-	$data['url'] = 'http://' . $_SERVER['HTTP_HOST'] . $data['url'];
+	$data['url'] = '//' . $_SERVER['HTTP_HOST'] . $data['url'];
 }
 echo $tpl->render ('social/facebook/like', $data);
Files elefant-elefant_1_3_10_beta/apps/social/handlers/google/init.php and elefant-elefant_1_3_11_rc/apps/social/handlers/google/init.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/google/maps.php elefant-elefant_1_3_11_rc/apps/social/handlers/google/maps.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/google/maps.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/google/maps.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,14 +1,43 @@
 <?php
 
 /**
- * Embeds a Google map into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a Google map into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run (
+ *         'social/google/maps',
+ *         array (
+ *             'address' => '123 Broadway',
+ *             'city' => 'New York',
+ *             'state' => 'NY',
+ *             'country' => 'USA',
+ *             'zip' => 10203
+ *         )
+ *     );
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/google/maps?
+ *         ?address=123 Broadway
+ *         &city=New York
+ *         &state=NY
+ *         &country=USA
+ *         &zip=10203 !}
+ *
+ * Parameters:
+ *
+ * - `address` - Street address
+ * - `city` - City
+ * - `state` - State/province
+ * - `country` - Country
+ * - `zip` - Zip/postal code
+ * - `width` = Width of map (default=100%)
+ * - `height` = Height of map (default=400px)
+ *
+ * Also available in the dynamic objects menu as "Google: Map".
  */
 
-if (self::$called['social/google/maps'] == 1) {
-	echo '<script src="//maps.googleapis.com/maps/api/js?sensor=false"></script>';
-}
-
 $data['map_id'] = rand ();
 
 $data['width'] = (isset ($data['width']) && ! empty ($data['width'])) ? $data['width'] : '100%';
@@ -16,4 +45,7 @@
 $data['width'] = is_numeric ($data['width']) ? $data['width'] . 'px' : $data['width'];
 $data['height'] = is_numeric ($data['height']) ? $data['height'] . 'px' : $data['height'];
 
+$page->add_script ($tpl->render ('social/google/maps_loader', $data));
+$page->add_script ($tpl->render ('social/google/maps_script', $data));
+
 echo $tpl->render ('social/google/maps', $data);
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/google/plusone.php elefant-elefant_1_3_11_rc/apps/social/handlers/google/plusone.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/google/plusone.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/google/plusone.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,6 +2,20 @@
 
 /**
  * Embeds a Google +1 button.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/google/plusone');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/google/plusone !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL to request a comment count for (optional).
+ *
+ * Also available in the dynamic objects menu as "Google: +1 Button".
  */
 
 if (! isset (self::$called['social/google/init'])) {
@@ -9,6 +23,6 @@
 }
 
 if (strpos ($data['url'], '/') === 0) {
-	$data['url'] = 'http://' . $_SERVER['HTTP_HOST'] . $data['url'];
+	$data['url'] = '//' . $_SERVER['HTTP_HOST'] . $data['url'];
 }
 echo $tpl->render ('social/google/plusone', $data);
Files elefant-elefant_1_3_10_beta/apps/social/handlers/index.php and elefant-elefant_1_3_11_rc/apps/social/handlers/index.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/feed.php elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/feed.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/feed.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/feed.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,26 @@
 <?php
 
 /**
- * Embeds a twitter feed widget into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a Twitter feed widget into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/twitter/feed', array ('twitter_id' => 'twitter_handle'));
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/twitter/feed?twitter_id=twitter_handle !}
+ *
+ * Parameters:
+ *
+ * - `twitter_id` - The Twitter ID to show a feed of (default = Twitter ID setting).
+ * - `num_of_tweets` - Number of tweets to show (default = 5)
+ * - `show_dates` - Whether to show the tweet dates (default = no)
+ *
+ * Also available in the dynamic objects menu as "Twitter: Feed".
+ *
+ * > Note: Requires you to register a Twitter app, then enter your
+ * > Twitter app credentials on the Accounts > Settings screen.
  */
 
 if (! isset ($data['twitter_id'])) {
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/follow.php elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/follow.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/follow.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/follow.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Embeds a twitter Follow button into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a Twitter Follow button into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/twitter/follow');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/twitter/follow !}
+ *
+ * Parameters:
+ *
+ * - `twitter_id` - The Twitter ID to follow (default = Twitter ID setting).
+ *
+ * Also available in the dynamic objects menu as "Twitter: Follow".
  */
 
 if (! isset (self::$called['social/twitter/init'])) {
Files elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/init.php and elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/init.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/tweet.php elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/tweet.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/twitter/tweet.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/twitter/tweet.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Embeds a twitter Tweet This button into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a Twitter Tweet This button into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('social/twitter/tweet');
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/twitter/tweet !}
+ *
+ * Parameters:
+ *
+ * - `twitter_id` - The Twitter ID to mention (default = Twitter ID setting).
+ *
+ * Also available in the dynamic objects menu as "Twitter: Share".
  */
 
 if (! isset (self::$called['social/twitter/init'])) {
@@ -15,6 +28,6 @@
 }
 
 if (strpos ($data['url'], '/') === 0) {
-	$data['url'] = 'http://' . $_SERVER['HTTP_HOST'] . $data['url'];
+	$data['url'] = '//' . $_SERVER['HTTP_HOST'] . $data['url'];
 }
 echo $tpl->render ('social/twitter/tweet', $data);
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/video/vimeo.php elefant-elefant_1_3_11_rc/apps/social/handlers/video/vimeo.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/video/vimeo.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/video/vimeo.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,13 +1,31 @@
 <?php
 
 /**
- * Embeds a Vimeo video into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a Vimeo video into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run (
+ *         'social/video/vimeo',
+ *         array ('url' => 'http://youtu.be/xyz')
+ *     );
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/video/vimeo?url=http://youtu.be/xyz !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL of the video page.
+ * - `width` - The width of the video player (default = 640)
+ * - `height` - The height of the video player (default = 360)
+ *
+ * Also available in the dynamic objects menu as "Video: Vimeo".
  */
 
 $data['video'] = substr (parse_url ($data['url'], PHP_URL_PATH), 1);
 
-$data['width'] = isset ($data['width']) ? $data['width'] : 480;
-$data['height'] = isset ($data['height']) ? $data['height'] : 270;
+$data['width'] = isset ($data['width']) ? $data['width'] : 640;
+$data['height'] = isset ($data['height']) ? $data['height'] : 360;
 
 echo $tpl->render ('social/video/vimeo', $data);
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/video/vine.php elefant-elefant_1_3_11_rc/apps/social/handlers/video/vine.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/video/vine.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/video/vine.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,30 @@
+<?php
+
+/**
+ * Embeds a Vine.co video into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run (
+ *         'social/video/vine',
+ *         array ('url' => 'http://vine.co/xyz')
+ *     );
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/video/vine?url=http://vine.co/xyz !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL of the video page.
+ * - `size` - The width and height of the video player (default = 600)
+ * - `audio` - Mute player? (default = yes)
+ * - `embed` - Embed type (simple or postcard, default = simple)
+ *
+ * Also available in the dynamic objects menu as "Video: Vine".
+ */
+$data['audio'] = ($data['audio'] == 'yes') ? 0 : 1;
+$data['size'] = isset ($data['size']) ? $data['size'] : '600';
+$data['embed'] = isset ($data['embed']) ? $data['embed'] : 'simple';
+$page->add_script("https://platform.vine.co/static/scripts/embed.js");
+echo $tpl->render ('social/video/vine', $data);
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/handlers/video/youtube.php elefant-elefant_1_3_11_rc/apps/social/handlers/video/youtube.php
--- elefant-elefant_1_3_10_beta/apps/social/handlers/video/youtube.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/handlers/video/youtube.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,26 @@
 <?php
 
 /**
- * Embeds a YouTube video into the current page. Used by
- * the WYSIWYG editor's dynamic objects menu.
+ * Embeds a YouTube video into the current page.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run (
+ *         'social/video/youtube',
+ *         array ('url' => 'http://youtu.be/xyz')
+ *     );
+ *
+ * In a template, call it like this:
+ *
+ *     {! social/video/youtube?url=http://youtu.be/xyz !}
+ *
+ * Parameters:
+ *
+ * - `url` - The URL of the video page.
+ * - `width` - The width of the video player (default = 480)
+ * - `height` - The height of the video player (default = 303)
+ *
+ * Also available in the dynamic objects menu as "Video: YouTube".
  */
 
 $query = parse_url ($data['url'], PHP_URL_QUERY);
Files elefant-elefant_1_3_10_beta/apps/social/lib/Filter.php and elefant-elefant_1_3_11_rc/apps/social/lib/Filter.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/lib/Functions.php elefant-elefant_1_3_11_rc/apps/social/lib/Functions.php
--- elefant-elefant_1_3_10_beta/apps/social/lib/Functions.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/lib/Functions.php	2015-09-05 21:13:59.000000000 -0500
@@ -23,6 +23,29 @@
 }
 
 /**
+ * Get size options for vine videos
+ * Dynamic Objects dialog.
+ */
+function vine_size () {
+	return array (
+		(object) array ('key' => '600', 'value' => '600px'),
+		(object) array ('key' => '480', 'value' => '480px'),
+		(object) array ('key' => '300', 'value' => '300px')
+	);
+}
+
+/**
+ * Get embed types for vine videos
+ * Dynamic Objects dialog.
+ */
+function vine_embed () {
+	return array (
+		(object) array('key' => 'simple', 'value' => 'Borderless Layout'),
+		(object) array('key' => 'postcard', 'value' => 'Postcard Layout')
+	);
+}
+
+/**
  * Get light/dark choice for Facebook embed options.
  */
 function facebook_light_dark () {
Files elefant-elefant_1_3_10_beta/apps/social/views/facebook/commentcount.html and elefant-elefant_1_3_11_rc/apps/social/views/facebook/commentcount.html are identical
Files elefant-elefant_1_3_10_beta/apps/social/views/facebook/comments.html and elefant-elefant_1_3_11_rc/apps/social/views/facebook/comments.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/facebook/init.html elefant-elefant_1_3_11_rc/apps/social/views/facebook/init.html
--- elefant-elefant_1_3_10_beta/apps/social/views/facebook/init.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/facebook/init.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,2 +1,2 @@
 <div id="fb-root"></div>
-<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
+<script src="//connect.facebook.net/en_US/all.js#xfbml=1"></script>
Files elefant-elefant_1_3_10_beta/apps/social/views/facebook/like-box.html and elefant-elefant_1_3_11_rc/apps/social/views/facebook/like-box.html are identical
Files elefant-elefant_1_3_10_beta/apps/social/views/facebook/like.html and elefant-elefant_1_3_11_rc/apps/social/views/facebook/like.html are identical
Files elefant-elefant_1_3_10_beta/apps/social/views/google/init.html and elefant-elefant_1_3_11_rc/apps/social/views/google/init.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/google/maps.html elefant-elefant_1_3_11_rc/apps/social/views/google/maps.html
--- elefant-elefant_1_3_10_beta/apps/social/views/google/maps.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/google/maps.html	2015-09-05 21:13:59.000000000 -0500
@@ -1,28 +1 @@
-<script type="text/javascript">
-var map_{{map_id}};
-var my_maps = (my_maps) ? my_maps : [];
-var my_markers = (my_markers) ? my_markers : [];
-$(function () {
-	var georeq = {address: '{{address}}, {{city}}, {{state}}, {{country}} {{zip}}'},
-		geocoder = new google.maps.Geocoder (),
-		map_opts = {
-			zoom: 14,
-			center: new google.maps.LatLng (-34.397, 150.644),
-			mapTypeId: google.maps.MapTypeId.ROADMAP
-		};
-	map_{{map_id}} = new google.maps.Map (document.getElementById ("map-{{map_id}}"), map_opts);
-	my_maps.push (map_{{map_id}});
-
-	geocoder.geocode (georeq, function (results, status) {
-		if (status == google.maps.GeocoderStatus.OK) {
-			map_{{map_id}}.setCenter (results[0].geometry.location);
-			var marker = new google.maps.Marker ({
-				map: map_{{map_id}},
-				position: results[0].geometry.location
-			});
-			my_markers.push (marker);
-		}
-	});
-});
-</script>
 <div id="map-{{map_id}}" class="googlemap" style="width:{{width}}; height:{{height}}"></div>
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/google/maps_loader.html elefant-elefant_1_3_11_rc/apps/social/views/google/maps_loader.html
--- elefant-elefant_1_3_10_beta/apps/social/views/google/maps_loader.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/google/maps_loader.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,11 @@
+<script>
+function google_maps_init () {}
+
+$(function () {
+	script = document.createElement ('script');
+	script.type = 'text/javascript';
+	script.async = true;
+	script.src = '//maps.googleapis.com/maps/api/js?sensor=false&callback=google_maps_init';
+	document.body.appendChild (script);
+});
+</script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/google/maps_script.html elefant-elefant_1_3_11_rc/apps/social/views/google/maps_script.html
--- elefant-elefant_1_3_10_beta/apps/social/views/google/maps_script.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/google/maps_script.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,38 @@
+<script>
+var map_{{map_id}};
+var my_maps = (my_maps) ? my_maps : [];
+var my_markers = (my_markers) ? my_markers : [];
+
+$(function () {
+	function google_maps_init_{{map_id}} () {
+		if (typeof google === 'undefined' || typeof google.maps === 'undefined' || typeof google.maps.Geocoder === 'undefined') {
+			setTimeout (google_maps_init_{{map_id}}, 50);
+			return;
+		}
+
+		var georeq = {address: "{{address}}, {{city}}, {{state}}, {{country}} {{zip}}"},
+			geocoder = new google.maps.Geocoder (),
+			map_opts = {
+				zoom: 14,
+				center: new google.maps.LatLng (-34.397, 150.644),
+				mapTypeId: google.maps.MapTypeId.ROADMAP
+			};
+		map_{{map_id}} = new google.maps.Map (document.getElementById ("map-{{map_id}}"), map_opts);
+		my_maps.push (map_{{map_id}});
+
+		geocoder.geocode (georeq, function (results, status) {
+			console.log (status);
+			console.log (results);
+			if (status == google.maps.GeocoderStatus.OK) {
+				map_{{map_id}}.setCenter (results[0].geometry.location);
+				var marker = new google.maps.Marker ({
+					map: map_{{map_id}},
+					position: results[0].geometry.location
+				});
+				my_markers.push (marker);
+			}
+		});
+	}
+	google_maps_init_{{map_id}} ();
+});
+</script>
Files elefant-elefant_1_3_10_beta/apps/social/views/google/plusone.html and elefant-elefant_1_3_11_rc/apps/social/views/google/plusone.html are identical
Files elefant-elefant_1_3_10_beta/apps/social/views/index.html and elefant-elefant_1_3_11_rc/apps/social/views/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/social/views/twitter/feed.html and elefant-elefant_1_3_11_rc/apps/social/views/twitter/feed.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/twitter/follow.html elefant-elefant_1_3_11_rc/apps/social/views/twitter/follow.html
--- elefant-elefant_1_3_10_beta/apps/social/views/twitter/follow.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/twitter/follow.html	2015-09-05 21:13:59.000000000 -0500
@@ -1 +1 @@
-<a href="http://twitter.com/{{ twitter_id }}" class="twitter-follow-button" data-show-count="false">Follow @{{ twitter_id }}</a>
+<a href="//twitter.com/{{ twitter_id }}" class="twitter-follow-button" data-show-count="false">Follow @{{ twitter_id }}</a>
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/twitter/init.html elefant-elefant_1_3_11_rc/apps/social/views/twitter/init.html
--- elefant-elefant_1_3_10_beta/apps/social/views/twitter/init.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/twitter/init.html	2015-09-05 21:13:59.000000000 -0500
@@ -1 +1 @@
-<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
+<script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/twitter/tweet.html elefant-elefant_1_3_11_rc/apps/social/views/twitter/tweet.html
--- elefant-elefant_1_3_10_beta/apps/social/views/twitter/tweet.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/twitter/tweet.html	2015-09-05 21:13:59.000000000 -0500
@@ -1 +1 @@
-<a href="http://twitter.com/share" class="twitter-share-button" data-url="{{ url }}" data-text="{{ title }}" {% if via != '' %}data-via="{{ via }}" {% end %} data-count="horizontal">Tweet</a>
+<a href="//twitter.com/share" class="twitter-share-button" data-url="{{ url }}" data-text="{{ title }}" {% if via != '' %}data-via="{{ via }}" {% end %} data-count="horizontal">Tweet</a>
Files elefant-elefant_1_3_10_beta/apps/social/views/video/vimeo.html and elefant-elefant_1_3_11_rc/apps/social/views/video/vimeo.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/social/views/video/vine.html elefant-elefant_1_3_11_rc/apps/social/views/video/vine.html
--- elefant-elefant_1_3_10_beta/apps/social/views/video/vine.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/social/views/video/vine.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+<iframe src="{{url}}/embed/{{embed}}?audio={{audio}}" width="{{size}}" height="{{size}}" frameborder="0"></iframe>
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/apps/social/views/video/youtube.html and elefant-elefant_1_3_11_rc/apps/social/views/video/youtube.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/conf/acl.php and elefant-elefant_1_3_11_rc/apps/translator/conf/acl.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/translator/conf/config.php elefant-elefant_1_3_11_rc/apps/translator/conf/config.php
--- elefant-elefant_1_3_10_beta/apps/translator/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/translator/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,4 +1,4 @@
-; <?php
+; <?php /*
 
 [Admin]
 
Files elefant-elefant_1_3_10_beta/apps/translator/forms/add.php and elefant-elefant_1_3_11_rc/apps/translator/forms/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/forms/settings.php and elefant-elefant_1_3_11_rc/apps/translator/forms/settings.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/add.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/api.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/api.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/translator/handlers/build.php elefant-elefant_1_3_11_rc/apps/translator/handlers/build.php
--- elefant-elefant_1_3_10_beta/apps/translator/handlers/build.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/translator/handlers/build.php	2015-09-05 21:13:59.000000000 -0500
@@ -43,7 +43,11 @@
 	$list = array ();
 }
 
-set_time_limit (90);
+try {
+	set_time_limit (90);
+} catch (Exception $e) {
+	// let it slide
+}
 
 foreach ($sources as $source) {
 	$files = glob ($source);
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/delete.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/delete.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/edit.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/index.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/index.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/makedefault.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/makedefault.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/settings.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/settings.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/handlers/sources.php and elefant-elefant_1_3_11_rc/apps/translator/handlers/sources.php are identical
Files elefant-elefant_1_3_10_beta/apps/translator/lib/Functions.php and elefant-elefant_1_3_11_rc/apps/translator/lib/Functions.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/translator/lib/Translator.php elefant-elefant_1_3_11_rc/apps/translator/lib/Translator.php
--- elefant-elefant_1_3_10_beta/apps/translator/lib/Translator.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/translator/lib/Translator.php	2015-09-05 21:13:59.000000000 -0500
@@ -79,12 +79,12 @@
 			$out .= sprintf (
 				"%s\t'%s' => '%s'",
 				$sep,
-				str_replace ('\'', '\\\'', stripslashes ($k)),
-				str_replace ('\'', '&apos;', stripslashes ($v))
+				str_replace ('\'', '\\\'', $k),
+				str_replace ('\'', '&apos;', $v)
 			);
 			$sep = ",\n";
 		}
-		$out .= "\n);\n\n?>";
+		$out .= "\n);\n";
 
 		if (! file_put_contents ('lang/' . $lang . '.php', $out)) {
 			return false;
Files elefant-elefant_1_3_10_beta/apps/translator/views/add.html and elefant-elefant_1_3_11_rc/apps/translator/views/add.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/views/edit.html and elefant-elefant_1_3_11_rc/apps/translator/views/edit.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/views/edit_search.html and elefant-elefant_1_3_11_rc/apps/translator/views/edit_search.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/views/edit_source.html and elefant-elefant_1_3_11_rc/apps/translator/views/edit_source.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/views/index.html and elefant-elefant_1_3_11_rc/apps/translator/views/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/views/settings.html and elefant-elefant_1_3_11_rc/apps/translator/views/settings.html are identical
Files elefant-elefant_1_3_10_beta/apps/translator/views/sources.html and elefant-elefant_1_3_11_rc/apps/translator/views/sources.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/conf/acl.php and elefant-elefant_1_3_11_rc/apps/user/conf/acl.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/config.php elefant-elefant_1_3_11_rc/apps/user/conf/config.php
--- elefant-elefant_1_3_10_beta/apps/user/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -35,6 +35,11 @@
 
 default_role = "member"
 
+; This setting allows multiple logins from different machines on the same
+; user account at the same time, without logging your other sessions out.
+
+multi_login = Off
+
 [Custom Handlers]
 
 ; You can override some of the built-in handlers with your own
@@ -72,9 +77,9 @@
 [Admin]
 
 handler = user/admin
-name = Members
+name = Accounts
 install = user/upgrade
 upgrade = user/upgrade
-version = 1.1.3-stable
+version = 1.1.5-stable
 
 ; */ ?>
Files elefant-elefant_1_3_10_beta/apps/user/conf/embed.php and elefant-elefant_1_3_11_rc/apps/user/conf/embed.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/conf/helpers.php and elefant-elefant_1_3_11_rc/apps/user/conf/helpers.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/nav.php elefant-elefant_1_3_11_rc/apps/user/conf/nav.php
--- elefant-elefant_1_3_10_beta/apps/user/conf/nav.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/nav.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,7 @@
+; <?php /*
+
+user/login = Login
+user/signup = Sign Up
+user/logout = Log Out
+
+; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.3_mysql.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.3_mysql.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.3_mysql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.3_mysql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+alter table `#prefix#user` change column `password` `password` varchar(128) not null;
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.3_pgsql.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.3_pgsql.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.3_pgsql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.3_pgsql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+alter table "#prefix#user" alter column "password" type varchar(128);
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.3_sqlite.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.3_sqlite.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.3_sqlite.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.3_sqlite.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,32 @@
+begin transaction;
+alter table `#prefix#user` rename to `tmp_user`;
+create table #prefix#user (
+	id integer primary key,
+	email char(72) unique not null,
+	password char(128) not null,
+	session_id char(32) unique,
+	expires datetime not null,
+	name char(72) not null,
+	type char(32) not null,
+	signed_up datetime not null,
+	updated datetime not null,
+	userdata text not null,
+	phone char(32) not null default '',
+	address char(48) not null default '',
+	address2 char(48) not null default '',
+	city char(48) not null default '',
+	state char(3) not null default '',
+	country char(3) not null default '',
+	zip char(16) not null default '',
+	title char(48) not null default '',
+	company char(48) not null default '',
+	photo char(128) not null default '',
+	about text not null default '',
+	website char(128) not null default ''
+);
+create index #prefix#user_email_password on #prefix#user (email, password);
+create index #prefix#user_session_id on #prefix#user (session_id);
+insert into `#prefix#user` (id, email, password, session_id, expires, name, type, signed_up, updated, userdata)
+	select id, email, password, session_id, expires, name, type, signed_up, updated, userdata from `tmp_user`;
+drop table `tmp_user`;
+commit;
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.4_mysql.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.4_mysql.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.4_mysql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.4_mysql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,7 @@
+create table #prefix#user_session (
+	session_id char(32) not null primary key,
+	expires datetime not null,
+	user_id int not null,
+	index (user_id, expires),
+	index (expires)
+);
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.4_pgsql.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.4_pgsql.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.4_pgsql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.4_pgsql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,8 @@
+create table #prefix#user_session (
+	session_id varchar(32) not null primary key,
+	expires timestampe not null,
+	user_id integer not null
+);
+
+create index #prefix#user_session_user on #prefix#user_session (user_id, expires);
+create index #prefix#user_session_expires on #prefix#user_session (expires);
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.4_sqlite.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.4_sqlite.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.4_sqlite.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.4_sqlite.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,8 @@
+create table #prefix#user_session (
+	session_id char(32) not null primary key,
+	expires datetime not null,
+	user_id int not null
+);
+
+create index #prefix#user_session_user on #prefix#user_session (user_id, expires);
+create index #prefix#user_session_expires on #prefix#user_session (expires);
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.5_mysql.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.5_mysql.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.5_mysql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.5_mysql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+alter table #prefix#user add column fax char(32) not null default '' after phone;
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.5_pgsql.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.5_pgsql.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.5_pgsql.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.5_pgsql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+alter table #prefix#user add column fax char(32) not null default '' after phone;
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.5_sqlite.sql elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.5_sqlite.sql
--- elefant-elefant_1_3_10_beta/apps/user/conf/upgrade_1.1.5_sqlite.sql	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/conf/upgrade_1.1.5_sqlite.sql	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1 @@
+alter table #prefix#user add column fax char(32) not null default '' after phone;
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/css/details.css elefant-elefant_1_3_11_rc/apps/user/css/details.css
--- elefant-elefant_1_3_10_beta/apps/user/css/details.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/css/details.css	2015-09-05 21:13:59.000000000 -0500
@@ -24,4 +24,77 @@
 }
 .note-delete {
 	font-weight: normal;
-}
\ No newline at end of file
+}
+
+#social-link-form select {
+	margin-left: 6px;
+	margin-right: 6px;
+}
+
+.ui-tabs-panel {
+	padding-top: 20px;
+}
+
+.ui-tabs-hide {
+	display: none;
+}
+
+.ui-tabs-nav {
+	list-style: none;
+	border-bottom: 1px solid #93278f;
+	padding: 0px;
+	margin: 0px;
+	padding-bottom: 2px;
+}
+
+.ui-state-default {
+	display: inline;
+	margin: 0px;
+	padding: 0px;
+}
+
+	.ui-state-default a {
+		text-decoration: none;
+		margin: 0px;
+		line-height: 20px;
+		padding: 5px 10px 5px 10px;
+		background: #e5e5e5;
+		color: #222;
+		border-right: 1px solid #ccc;
+		outline: none;
+	}
+	
+	.ui-state-default a:hover {
+		background: #dddddd; /* Old browsers */
+		background: -moz-linear-gradient(top,  #dddddd 0%, #cccccc 100%); /* FF3.6+ */
+		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
+		background: -webkit-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
+		background: -o-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Opera 11.10+ */
+		background: -ms-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* IE10+ */
+		background: linear-gradient(to bottom,  #dddddd 0%,#cccccc 100%); /* W3C */
+		color: #93278f;
+	}
+
+	.ui-state-active a {
+		background: #dddddd; /* Old browsers */
+		background: -moz-linear-gradient(top,  #dddddd 0%, #cccccc 100%); /* FF3.6+ */
+		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
+		background: -webkit-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
+		background: -o-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Opera 11.10+ */
+		background: -ms-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* IE10+ */
+		background: linear-gradient(to bottom,  #dddddd 0%,#cccccc 100%); /* W3C */
+		color: #93278f;
+		border-right: 0px;
+		outline: none;
+	}
+	
+	.ui-state-active a:hover {
+		background: #dddddd; /* Old browsers */
+		background: -moz-linear-gradient(top,  #dddddd 0%, #cccccc 100%); /* FF3.6+ */
+		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dddddd), color-stop(100%,#cccccc)); /* Chrome,Safari4+ */
+		background: -webkit-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Chrome10+,Safari5.1+ */
+		background: -o-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* Opera 11.10+ */
+		background: -ms-linear-gradient(top,  #dddddd 0%,#cccccc 100%); /* IE10+ */
+		background: linear-gradient(to bottom,  #dddddd 0%,#cccccc 100%); /* W3C */
+		color: #93278f;
+	}
Files elefant-elefant_1_3_10_beta/apps/user/css/userchooser.css and elefant-elefant_1_3_11_rc/apps/user/css/userchooser.css are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/add.php and elefant-elefant_1_3_11_rc/apps/user/forms/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/edit.php and elefant-elefant_1_3_11_rc/apps/user/forms/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/login/newuser.php and elefant-elefant_1_3_11_rc/apps/user/forms/login/newuser.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/newpass.php and elefant-elefant_1_3_11_rc/apps/user/forms/newpass.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/recover.php and elefant-elefant_1_3_11_rc/apps/user/forms/recover.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/role/add.php and elefant-elefant_1_3_11_rc/apps/user/forms/role/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/role/edit.php and elefant-elefant_1_3_11_rc/apps/user/forms/role/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/settings.php and elefant-elefant_1_3_11_rc/apps/user/forms/settings.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/signup.php and elefant-elefant_1_3_11_rc/apps/user/forms/signup.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/forms/update.php and elefant-elefant_1_3_11_rc/apps/user/forms/update.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/add.php and elefant-elefant_1_3_11_rc/apps/user/handlers/add.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/admin.php elefant-elefant_1_3_11_rc/apps/user/handlers/admin.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/admin.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/admin.php	2015-09-05 21:13:59.000000000 -0500
@@ -27,7 +27,7 @@
 	->where_search ($q, $q_fields, $q_exact)
 	->count ();
 
-$page->title = __ ('Members');
+$page->title = __ ('Accounts');
 echo $tpl->render ('user/admin', array (
 	'limit' => $limit,
 	'total' => $count,
Files elefant-elefant_1_3_10_beta/apps/user/handlers/api/link.php and elefant-elefant_1_3_11_rc/apps/user/handlers/api/link.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/api/note.php and elefant-elefant_1_3_11_rc/apps/user/handlers/api/note.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/chooser/addform.php and elefant-elefant_1_3_11_rc/apps/user/handlers/chooser/addform.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/chooser/adduser.php and elefant-elefant_1_3_11_rc/apps/user/handlers/chooser/adduser.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/chooser.php and elefant-elefant_1_3_11_rc/apps/user/handlers/chooser.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/delete.php and elefant-elefant_1_3_11_rc/apps/user/handlers/delete.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/details.php elefant-elefant_1_3_11_rc/apps/user/handlers/details.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/details.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/details.php	2015-09-05 21:13:59.000000000 -0500
@@ -14,14 +14,24 @@
 
 $user = new User ($_GET['id']);
 if ($user->error) {
-	$page->title = __ ('Member not found');
+	$page->title = __ ('Account not found');
 	printf ('<p><a href="/user/admin">&laquo; %s</a></p>', __ ('Back'));
 	return;
 }
 
-$page->title = __ ('Member') . ': ' . Template::sanitize ($user->name);
+$user = $user->orig ();
+
+$tabs = Appconf::options ('user');
+foreach ($tabs as $handler => $name) {
+	$user->tabs[$name] = $this->run ($handler, array ('user' => $user->id));
+}
+
+$page->title = Template::sanitize ($user->name);
+$page->add_style ('/apps/user/css/details.css');
+$page->add_script ('/js/jquery-migrate-1.2.1.js');
+$page->add_script ('/js/jquery-ui/jquery-ui.min.js');
+$page->add_script ('/apps/user/js/jquery.tools.min.js');
 $page->add_script ('/apps/user/js/react/react.js');
 $page->add_script ('/apps/user/js/build/links.js');
 $page->add_script ('/apps/user/js/build/notes.js');
-$page->add_style ('/apps/user/css/details.css');
-echo $tpl->render ('user/details', $user->orig ());
+echo $tpl->render ('user/details', $user);
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/edit.php elefant-elefant_1_3_11_rc/apps/user/handlers/edit.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/edit.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/edit.php	2015-09-05 21:13:59.000000000 -0500
@@ -24,6 +24,7 @@
 	$u->photo = $_POST['photo'];
 	$u->about = $_POST['about'];
 	$u->phone = $_POST['phone'];
+	$u->fax = $_POST['fax'];
 	$u->address = $_POST['address'];
 	$u->address2 = $_POST['address2'];
 	$u->city = $_POST['city'];
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/export.php elefant-elefant_1_3_11_rc/apps/user/handlers/export.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/export.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/export.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,55 @@
+<?php
+
+/**
+ * Export users as CSV.
+ */
+
+$this->require_acl ('admin', 'user');
+
+$page->layout = false;
+header ('Cache-control: private');
+header ('Content-Type: text/plain');
+header ('Content-Disposition: attachment; filename=accounts-' . gmdate ('Y-m-d') . '.csv');
+
+$res = DB::fetch (
+	'select
+		if(
+			locate(" ", name) > 0,
+			substring(name, 1, locate(" ", name) - 1),
+			name
+		) as first_name,
+		if(
+			locate(" ", name) > 0,
+			substring(name, locate(" ", name) + 1),
+			null
+		) as last_name,
+		email, phone, address, address2 as address_2, city, state,
+		country, zip, title, company, website, about
+	 from
+	 	#prefix#user
+	 order by last_name asc, first_name asc'
+);
+
+if (! is_array ($res)) {
+	return;
+}
+
+if (count ($res) > 0) {
+	$keys = array_keys ((array) $res[0]);
+	$keys = array_map ('user\Filter::csv_header', $keys);
+	echo join (',', $keys) . "\n";
+}
+
+foreach ($res as $row) {
+	$sep = '';
+	foreach ((array) $row as $k => $v) {
+		$v = str_replace ('"', '""', $v);
+		if (strpos ($v, ',') !== false) {
+			$v = '"' . $v . '"';
+		}
+		$v = str_replace (array ("\n", "\r"), array ('\\n', '\\r'), $v);
+		echo $sep . $v;
+		$sep = ',';
+	}
+	echo "\n";
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/import/csv.php elefant-elefant_1_3_11_rc/apps/user/handlers/import/csv.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/import/csv.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/import/csv.php	2015-09-05 21:13:59.000000000 -0500
@@ -15,16 +15,26 @@
 	if (move_uploaded_file ($_FILES['import_file']['tmp_name'], 'cache/user_csv_import.csv')) {
 		$file = 'cache/user_csv_import.csv';
 
-		$res = blog\CsvParser::parse ($file);
+		set_time_limit (0);
+		ini_set ('auto_detect_line_endings', true);
 
-		if (is_array ($res)) {
-			$headers = array_shift ($res);
-			$samples = array ();
-			for ($i = 0; $i < 3; $i++) {
-				if (isset ($res[$i])) {
-					$samples[] = $res[$i];
+		$headers = array ();
+		$samples = array ();
+		if (($f = fopen ($file, 'r')) !== false) {
+			while (($row = fgetcsv ($f, 0, ',')) !== false) {
+				if (count ($row) === 1 && $row[0] === null) {
+					// ignore blank lines, which come through as array(null)
+					continue;
+				}
+				if (count ($headers) === 0) {
+					$headers = $row;
+				} elseif (count ($samples) < 3) {
+					$samples[] = $row;
+				} else {
+					break;
 				}
 			}
+			fclose ($f);
 
 			require_once ('apps/blog/lib/Filters.php');
 
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/import/csv2.php elefant-elefant_1_3_11_rc/apps/user/handlers/import/csv2.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/import/csv2.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/import/csv2.php	2015-09-05 21:13:59.000000000 -0500
@@ -19,8 +19,20 @@
 	return;
 }
 
-$res = blog\CsvParser::parse ($file);
-if (! $res) {
+set_time_limit (0);
+ini_set ('auto_detect_line_endings', true);
+
+$res = array ();
+if (($f = fopen ($file, 'r')) !== false) {
+	while (($row = fgetcsv ($f, 0, ',')) !== false) {
+		if (count ($row) === 1 && $row[0] === null) {
+			// ignore blank lines, which come through as array(null)
+			continue;
+		}
+		$res[] = $row;
+	}
+	fclose ($f);
+} else {
 	echo '<p>' . __ ('Unable to parse the uploaded file.') . '</p>';
 	echo '<p><a href="/user/import">' . __ ('Back') . '</a></p>';
 	return;
@@ -37,6 +49,7 @@
 $photo = false;
 $about = false;
 $phone = false;
+$fax = false;
 $address = false;
 $address2 = false;
 $city = false;
@@ -67,6 +80,7 @@
 		'photo' => ($photo !== false) ? $row[$photo] : '',
 		'about' => ($about !== false) ? $row[$about] : '',
 		'phone' => ($phone !== false) ? $row[$phone] : '',
+		'fax' => ($fax !== false) ? $row[$fax] : '',
 		'address' => ($address !== false) ? $row[$address] : '',
 		'address2' => ($address2 !== false) ? $row[$address2] : '',
 		'city' => ($city !== false) ? $row[$city] : '',
Files elefant-elefant_1_3_10_beta/apps/user/handlers/import/vcf.php and elefant-elefant_1_3_11_rc/apps/user/handlers/import/vcf.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/import.php and elefant-elefant_1_3_11_rc/apps/user/handlers/import.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/index.php elefant-elefant_1_3_11_rc/apps/user/handlers/index.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -8,6 +8,8 @@
 $res = $this->override ('user/index');
 if ($res) { echo $res; return; }
 
+$page->id = 'user';
+
 if (! $this->params[0]) {
 	if (! User::require_login ()) {
 		$page->title = __ ('Members');
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/facebook.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/facebook.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/google.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/google.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/newpersona.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/newpersona.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/newuser.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/newuser.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/openid.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/openid.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/persona.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/persona.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/login/twitter.php and elefant-elefant_1_3_11_rc/apps/user/handlers/login/twitter.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/login.php elefant-elefant_1_3_11_rc/apps/user/handlers/login.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/login.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/login.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,8 +1,21 @@
 <?php
 
 /**
- * Default log in handler. You can specify a `redirect` value
- * to send them to after logging in.
+ * Default log in handler.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('user/login');
+ *
+ * In a template, call it like this:
+ *
+ *     {! user/login !}
+ *
+ * Parameters:
+ *
+ * - `redirect` - A URL to redirect to upon successful login (default = `/user`)
+ *
+ * Also available in the dynamic objects menu as "User: Login".
  */
 
 // Check for a custom handler override
@@ -30,6 +43,11 @@
 	$_POST['redirect'] = '/user';
 }
 
+$redir = parse_url ($_POST['redirect']);
+if ($redir === false || $_POST['redirect'] !== $redir['path'] && $_POST['redirect'] !== $redir['path'] . '?' . $redir['query']) {
+	$_POST['redirect'] = '/user';
+}
+
 if (! User::require_login ()) {
 	if (! $this->internal && ! empty ($_POST['username'])) {
 		echo '<p>' . __ ('Incorrect email or password, please try again.') . '</p>';
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/logout.php elefant-elefant_1_3_11_rc/apps/user/handlers/logout.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/logout.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/logout.php	2015-09-05 21:13:59.000000000 -0500
@@ -17,5 +17,10 @@
 	$_GET['redirect'] = '/';
 }
 
+$redir = parse_url ($_GET['redirect']);
+if ($redir === false || $_GET['redirect'] !== $redir['path'] && $_GET['redirect'] !== $redir['path'] . '?' . $redir['query']) {
+	$_GET['redirect'] = '/';
+}
+
 Lock::clear ();
 echo User::logout ($_GET['redirect']);
Files elefant-elefant_1_3_10_beta/apps/user/handlers/newpass.php and elefant-elefant_1_3_11_rc/apps/user/handlers/newpass.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/recover.php and elefant-elefant_1_3_11_rc/apps/user/handlers/recover.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/role/add.php and elefant-elefant_1_3_11_rc/apps/user/handlers/role/add.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/role/delete.php and elefant-elefant_1_3_11_rc/apps/user/handlers/role/delete.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/role/edit.php and elefant-elefant_1_3_11_rc/apps/user/handlers/role/edit.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/roles.php and elefant-elefant_1_3_11_rc/apps/user/handlers/roles.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/handlers/settings.php and elefant-elefant_1_3_11_rc/apps/user/handlers/settings.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/sidebar.php elefant-elefant_1_3_11_rc/apps/user/handlers/sidebar.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/sidebar.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/sidebar.php	2015-09-05 21:13:59.000000000 -0500
@@ -2,6 +2,16 @@
 
 /**
  * User login/registration sidebar handler.
+ *
+ * In PHP code, call it like this:
+ *
+ *     echo $this->run ('user/sidebar');
+ *
+ * In a template, call it like this:
+ *
+ *     {! user/sidebar !}
+ *
+ * Also available in the dynamic objects menu as "User: Sidebar".
  */
 $appconf['User']['login_methods'] = is_array ($appconf['User']['login_methods'])
 	? $appconf['User']['login_methods']
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/signup.php elefant-elefant_1_3_11_rc/apps/user/handlers/signup.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/signup.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/signup.php	2015-09-05 21:13:59.000000000 -0500
@@ -12,6 +12,11 @@
  *     {! user/signup?redirect=/welcome !}
  */
 
+// If they're already logged in, redirect them
+if (User::require_login ()) {
+	$this->redirect ('/user');
+}
+
 // Check for a custom handler override
 $res = $this->override ('user/signup');
 if ($res) { echo $res; return; }
Files elefant-elefant_1_3_10_beta/apps/user/handlers/too-many-attempts.php and elefant-elefant_1_3_11_rc/apps/user/handlers/too-many-attempts.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/update.php elefant-elefant_1_3_11_rc/apps/user/handlers/update.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/update.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/update.php	2015-09-05 21:13:59.000000000 -0500
@@ -27,6 +27,11 @@
 $page->title = __ ('Update Profile');
 
 echo $form->handle (function ($form) use ($u, $page) {
+	if (user\Rules::email_in_use ($_POST['email'], User::val ('id'))) {
+		$form->failed[] = 'email-in-use';
+		return false;
+	}
+
 	$u->name = $_POST['name'];
 	$u->email = $_POST['email'];
 	if (! empty ($_POST['password'])) {
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/upgrade.php elefant-elefant_1_3_11_rc/apps/user/handlers/upgrade.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/upgrade.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/upgrade.php	2015-09-05 21:13:59.000000000 -0500
@@ -12,39 +12,41 @@
 
 $page->title = __ ('Upgrading User App');
 
-$db = DB::get_connection (1);
-$dbtype = $db->getAttribute (PDO::ATTR_DRIVER_NAME);
-switch ($dbtype) {
-	case 'pgsql':
-		DB::execute ('alter table "#prefix#user" alter column "password" type varchar(128)');
-		break;
-	case 'mysql':
-		DB::execute ('alter table `#prefix#user` change column `password` `password` varchar(128) not null');
-		break;
-	case 'sqlite':
-		DB::execute ('begin transaction');
-		DB::execute ('alter table `#prefix#user` rename to `tmp_user`');
-		DB::execute ('create table #prefix#user (
-			id integer primary key,
-			email char(72) unique not null,
-			password char(128) not null,
-			session_id char(32) unique,
-			expires datetime not null,
-			name char(72) not null,
-			type char(32) not null,
-			signed_up datetime not null,
-			updated datetime not null,
-			userdata text not null
-		)');
-		DB::execute ('create index #prefix#user_email_password on #prefix#user (email, password)');
-		DB::execute ('create index #prefix#user_session_id on #prefix#user (session_id)');
-		DB::execute ('insert into `#prefix#user` (id, email, password, session_id, expires, name, type, signed_up, updated, userdata)
-			select id, email, password, session_id, expires, name, type, signed_up, updated, userdata from `tmp_user`');
-		DB::execute ('drop table `tmp_user`');
-		DB::execute ('commit');
-		break;
+// grab the database driver
+$conn = conf ('Database', 'master');
+$driver = $conn['driver'];
+
+// check if upgrade script exists and if so, run it
+$base_version = preg_replace ('/-.*$/', '', $version);
+$file = 'apps/' . $this->app . '/conf/upgrade_' . $base_version . '_' . $driver . '.sql';
+if (file_exists ($file)) {
+    // begin the transaction
+    DB::beginTransaction ();
+
+    // parse the database schema into individual queries
+    $sql = sql_split (file_get_contents ($file));
+
+    // execute each query in turn
+    foreach ($sql as $query) {
+        if (! DB::execute ($query)) {
+            // show error and rollback on failures
+            printf (
+                '<p class="visible-notice">%s: %s</p><p>%s</p>',
+                __ ('Error'),
+                DB::error (),
+                __ ('Install failed.')
+            );
+            DB::rollback ();
+            return;
+        }
+    }
+
+    // commit the transaction
+    DB::commit ();
 }
 
+// add your upgrade logic here
+
 echo '<p>' . __ ('Done.') . '</p>';
 
 $this->mark_installed ('user', $appconf['Admin']['version']);
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/handlers/util/userchooser.php elefant-elefant_1_3_11_rc/apps/user/handlers/util/userchooser.php
--- elefant-elefant_1_3_10_beta/apps/user/handlers/util/userchooser.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/handlers/util/userchooser.php	2015-09-05 21:13:59.000000000 -0500
@@ -5,7 +5,7 @@
  *
  * Usage:
  *
- * 1. Load this handler either in your handler:
+ * ### 1. Load this handler either in your handler:
  *
  *     $this->run ('user/util/userchooser');
  *
@@ -13,7 +13,7 @@
  *
  *     {! user/util/userchooser !}
  *
- * 2. User the $.userchooser() function to open the dialog window:
+ * ### 2. User the `$.userchooser()` function to open the dialog window:
  *
  *     $.userchooser ({
  *         set_id_value: '#field-id',
@@ -27,13 +27,13 @@
  *
  * Options:
  *
- * - callback:        A function to call with the user id, name, and email.
- * - chosen:          A list of users that shouldn't be selectable.
- * - chosen_visible:  Whether to display the disabled chosen users or hide them.
- * - set_id_value:    The selector of an input or element to update with the user id.
- * - set_name_value:  The selector of an input or element to update with the user name.
- * - set_email_value: The selector of an input or element to update with the user email.
- * - set_mailto:      The selector of a link to set the mailto: value for.
+ * - `callback`        - A function to call with the user id, name, and email.
+ * - `chosen`          - A list of users that shouldn't be selectable.
+ * - `chosen_visible`  - Whether to display the disabled chosen users or hide them.
+ * - `set_id_value`    - The selector of an input or element to update with the user id.
+ * - `set_name_value`  - The selector of an input or element to update with the user name.
+ * - `set_email_value` - The selector of an input or element to update with the user email.
+ * - `set_mailto`      - The selector of a link to set the mailto: value for.
  */
 
 $this->run ('admin/util/fontawesome');
Files elefant-elefant_1_3_10_beta/apps/user/handlers/verify.php and elefant-elefant_1_3_11_rc/apps/user/handlers/verify.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/js/build/links.js elefant-elefant_1_3_11_rc/apps/user/js/build/links.js
--- elefant-elefant_1_3_10_beta/apps/user/js/build/links.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/js/build/links.js	2015-09-05 21:13:59.000000000 -0500
@@ -53,7 +53,7 @@
 var LinkForm = React.createClass ({displayName: 'LinkForm',
 	render: function () {
 		return (
-			React.DOM.form( {onSubmit:this.handleSubmit}, 
+			React.DOM.form( {id:"social-link-form", onSubmit:this.handleSubmit}, 
 				React.DOM.p(null, 
 					React.DOM.input( {type:"text", ref:"handle", placeholder:this.props.i18n.link_placeholder, size:"35"} ),
 					React.DOM.select( {ref:"service"}, 
Files elefant-elefant_1_3_10_beta/apps/user/js/build/notes.js and elefant-elefant_1_3_11_rc/apps/user/js/build/notes.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/jquery.adduser.js and elefant-elefant_1_3_11_rc/apps/user/js/jquery.adduser.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/js/jquery.tools.min.js elefant-elefant_1_3_11_rc/apps/user/js/jquery.tools.min.js
--- elefant-elefant_1_3_10_beta/apps/user/js/jquery.tools.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/js/jquery.tools.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,13 @@
+/*!
+ * jQuery Tools v1.2.7 - The missing UI library for the Web
+ * 
+ * dateinput/dateinput.js
+ * rangeinput/rangeinput.js
+ * 
+ * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
+ * 
+ * http://flowplayer.org/tools/
+ * 
+ */
+(function(a,b){a.tools=a.tools||{version:"v1.2.7"};var c=[],d={},e,f=[75,76,38,39,74,72,40,37],g={};e=a.tools.dateinput={conf:{format:"mm/dd/yy",formatter:"default",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:b,max:b,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},addFormatter:function(a,b){d[a]=b},localize:function(b,c){a.each(c,function(a,b){c[a]=b.split(",")}),g[b]=c}},e.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});function h(a,b){return(new Date(a,b+1,0)).getDate()}function i(a,b){a=""+a,b=b||2;while(a.length<b)a="0"+a;return a}var j=a("<a/>");function k(a,b,c,e){var f=b.getDate(),h=b.getDay(),k=b.getMonth(),l=b.getFullYear(),m={d:f,dd:i(f),ddd:g[e].shortDays[h],dddd:g[e].days[h],m:k+1,mm:i(k+1),mmm:g[e].shortMonths[k],mmmm:g[e].months[k],yy:String(l).slice(2),yyyy:l},n=d[a](c,b,m,e);return j.html(n).html()}e.addFormatter("default",function(a,b,c,d){return a.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,function(a){return a in c?c[a]:a})}),e.addFormatter("prefixed",function(a,b,c,d){return a.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,function(a,b){return b in c?c[b]:a})});function l(a){return parseInt(a,10)}function m(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()}function n(a){if(a!==b){if(a.constructor==Date)return a;if(typeof a=="string"){var c=a.split("-");if(c.length==3)return new Date(l(c[0]),l(c[1])-1,l(c[2]));if(!/^-?\d+$/.test(a))return;a=l(a)}var d=new Date;d.setDate(d.getDate()+a);return d}}function o(d,e){var i=this,j=new Date,o=j.getFullYear(),p=e.css,q=g[e.lang],r=a("#"+p.root),s=r.find("#"+p.title),t,u,v,w,x,y,z=d.attr("data-value")||e.value||d.val(),A=d.attr("min")||e.min,B=d.attr("max")||e.max,C,D;A===0&&(A="0"),z=n(z)||j,A=n(A||new Date(o+e.yearRange[0],1,1)),B=n(B||new Date(o+e.yearRange[1]+1,1,-1));if(!q)throw"Dateinput: invalid language: "+e.lang;if(d.attr("type")=="date"){var D=d.clone(),E=D.wrap("<div/>").parent().html(),F=a(E.replace(/type/i,"type=text data-orig-type"));e.value&&F.val(e.value),d.replaceWith(F),d=F}d.addClass(p.input);var G=d.add(i);if(!r.length){r=a("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",p.root),r.children().eq(0).attr("id",p.head).end().eq(1).attr("id",p.body).children().eq(0).attr("id",p.days).end().eq(1).attr("id",p.weeks).end().end().end().find("a").eq(0).attr("id",p.prev).end().eq(1).attr("id",p.next),s=r.find("#"+p.head).find("div").attr("id",p.title);if(e.selectors){var H=a("<select/>").attr("id",p.month),I=a("<select/>").attr("id",p.year);s.html(H.add(I))}var J=r.find("#"+p.days);for(var K=0;K<7;K++)J.append(a("<span/>").text(q.shortDays[(K+e.firstDay)%7]));a("body").append(r)}e.trigger&&(t=a("<a/>").attr("href","#").addClass(p.trigger).click(function(a){e.toggle?i.toggle():i.show();return a.preventDefault()}).insertAfter(d));var L=r.find("#"+p.weeks);I=r.find("#"+p.year),H=r.find("#"+p.month);function M(b,c,e){z=b,w=b.getFullYear(),x=b.getMonth(),y=b.getDate(),e||(e=a.Event("api")),e.type=="click"&&!a.browser.msie&&d.focus(),e.type="beforeChange",G.trigger(e,[b]);e.isDefaultPrevented()||(d.val(k(c.formatter,b,c.format,c.lang)),e.type="change",G.trigger(e),d.data("date",b),i.hide(e))}function N(b){b.type="onShow",G.trigger(b),a(document).on("keydown.d",function(b){if(b.ctrlKey)return!0;var c=b.keyCode;if(c==8||c==46){d.val("");return i.hide(b)}if(c==27||c==9)return i.hide(b);if(a(f).index(c)>=0){if(!C){i.show(b);return b.preventDefault()}var e=a("#"+p.weeks+" a"),g=a("."+p.focus),h=e.index(g);g.removeClass(p.focus);if(c==74||c==40)h+=7;else if(c==75||c==38)h-=7;else if(c==76||c==39)h+=1;else if(c==72||c==37)h-=1;h>41?(i.addMonth(),g=a("#"+p.weeks+" a:eq("+(h-42)+")")):h<0?(i.addMonth(-1),g=a("#"+p.weeks+" a:eq("+(h+42)+")")):g=e.eq(h),g.addClass(p.focus);return b.preventDefault()}if(c==34)return i.addMonth();if(c==33)return i.addMonth(-1);if(c==36)return i.today();c==13&&(a(b.target).is("select")||a("."+p.focus).click());return a([16,17,18,9]).index(c)>=0}),a(document).on("click.d",function(b){var c=b.target;!a(c).parents("#"+p.root).length&&c!=d[0]&&(!t||c!=t[0])&&i.hide(b)})}a.extend(i,{show:function(b){if(!(d.attr("readonly")||d.attr("disabled")||C)){b=b||a.Event(),b.type="onBeforeShow",G.trigger(b);if(b.isDefaultPrevented())return;a.each(c,function(){this.hide()}),C=!0,H.off("change").change(function(){i.setValue(l(I.val()),l(a(this).val()))}),I.off("change").change(function(){i.setValue(l(a(this).val()),l(H.val()))}),u=r.find("#"+p.prev).off("click").click(function(a){u.hasClass(p.disabled)||i.addMonth(-1);return!1}),v=r.find("#"+p.next).off("click").click(function(a){v.hasClass(p.disabled)||i.addMonth();return!1}),i.setValue(z);var f=d.offset();/iPad/i.test(navigator.userAgent)&&(f.top-=a(window).scrollTop()),r.css({top:f.top+e.offset[0]+d.outerHeight(true),left:f.left+e.offset[1]}),e.speed?r.show(e.speed,function(){N(b)}):(r.show(),N(b));return i}},setValue:function(c,d,f){var g=l(d)>=-1?new Date(l(c),l(d),l(f==b||isNaN(f)?1:f)):c||z;g<A?g=A:g>B&&(g=B),typeof c=="string"&&(g=n(c)),c=g.getFullYear(),d=g.getMonth(),f=g.getDate(),d==-1?(d=11,c--):d==12&&(d=0,c++);if(!C){M(g,e);return i}x=d,w=c,y=f;var k=new Date(c,d,1-e.firstDay),o=k.getDay(),r=h(c,d),t=h(c,d-1),D;if(e.selectors){H.empty(),a.each(q.months,function(b,d){A<new Date(c,b+1,1)&&B>new Date(c,b,0)&&H.append(a("<option/>").html(d).attr("value",b))}),I.empty();var E=j.getFullYear();for(var F=E+e.yearRange[0];F<E+e.yearRange[1];F++)A<new Date(F+1,0,1)&&B>new Date(F,0,0)&&I.append(a("<option/>").text(F));H.val(d),I.val(c)}else s.html(q.months[d]+" "+c);L.empty(),u.add(v).removeClass(p.disabled);for(var G=o?0:-7,J,K;G<(o?42:35);G++)J=a("<a/>"),G%7===0&&(D=a("<div/>").addClass(p.week),L.append(D)),G<o?(J.addClass(p.off),K=t-o+G+1,g=new Date(c,d-1,K)):G<o+r?(K=G-o+1,g=new Date(c,d,K),m(z,g)?J.attr("id",p.current).addClass(p.focus):m(j,g)&&J.attr("id",p.today)):(J.addClass(p.off),K=G-r-o+1,g=new Date(c,d+1,K)),A&&g<A&&J.add(u).addClass(p.disabled),B&&g>B&&J.add(v).addClass(p.disabled),J.attr("href","#"+K).text(K).data("date",g),D.append(J);L.find("a").click(function(b){var c=a(this);c.hasClass(p.disabled)||(a("#"+p.current).removeAttr("id"),c.attr("id",p.current),M(c.data("date"),e,b));return!1}),p.sunday&&L.find("."+p.week).each(function(){var b=e.firstDay?7-e.firstDay:0;a(this).children().slice(b,b+1).addClass(p.sunday)});return i},setMin:function(a,b){A=n(a),b&&z<A&&i.setValue(A);return i},setMax:function(a,b){B=n(a),b&&z>B&&i.setValue(B);return i},today:function(){return i.setValue(j)},addDay:function(a){return this.setValue(w,x,y+(a||1))},addMonth:function(a){var b=x+(a||1),c=h(w,b),d=y<=c?y:c;return this.setValue(w,b,d)},addYear:function(a){return this.setValue(w+(a||1),x,y)},destroy:function(){d.add(document).off("click.d keydown.d"),r.add(t).remove(),d.removeData("dateinput").removeClass(p.input),D&&d.replaceWith(D)},hide:function(b){if(C){b=a.Event(),b.type="onHide",G.trigger(b);if(b.isDefaultPrevented())return;a(document).off("click.d keydown.d"),r.hide(),C=!1}return i},toggle:function(){return i.isOpen()?i.hide():i.show()},getConf:function(){return e},getInput:function(){return d},getCalendar:function(){return r},getValue:function(a){return a?k(e.formatter,z,a,e.lang):z},isOpen:function(){return C}}),a.each(["onBeforeShow","onShow","change","onHide"],function(b,c){a.isFunction(e[c])&&a(i).on(c,e[c]),i[c]=function(b){b&&a(i).on(c,b);return i}}),e.editable||d.on("focus.d click.d",i.show).keydown(function(b){var c=b.keyCode;if(C||a(f).index(c)<0)(c==8||c==46)&&d.val("");else{i.show(b);return b.preventDefault()}return b.shiftKey||b.ctrlKey||b.altKey||c==9?!0:b.preventDefault()}),n(d.val())&&M(z,e)}a.expr[":"].date=function(b){var c=b.getAttribute("type");return c&&c=="date"||a(b).data("dateinput")},a.fn.dateinput=function(b){if(this.data("dateinput"))return this;b=a.extend(!0,{},e.conf,b),a.each(b.css,function(a,c){!c&&a!="prefix"&&(b.css[a]=(b.css.prefix||"")+(c||a))});var d;this.each(function(){var e=new o(a(this),b);c.push(e);var f=e.getInput().data("dateinput",e);d=d?d.add(f):f});return d?d:this}})(jQuery);
+(function(a){a.tools=a.tools||{version:"v1.2.7"};var b;b=a.tools.rangeinput={conf:{min:0,max:100,step:"any",steps:0,value:0,precision:undefined,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var c,d;a.fn.drag=function(b){document.ondragstart=function(){return!1},b=a.extend({x:!0,y:!0,drag:!0},b),c=c||a(document).on("mousedown mouseup",function(e){var f=a(e.target);if(e.type=="mousedown"&&f.data("drag")){var g=f.position(),h=e.pageX-g.left,i=e.pageY-g.top,j=!0;c.on("mousemove.drag",function(a){var c=a.pageX-h,e=a.pageY-i,g={};b.x&&(g.left=c),b.y&&(g.top=e),j&&(f.trigger("dragStart"),j=!1),b.drag&&f.css(g),f.trigger("drag",[e,c]),d=f}),e.preventDefault()}else try{d&&d.trigger("dragEnd")}finally{c.off("mousemove.drag"),d=null}});return this.data("drag",!0)};function e(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}function f(a,b){var c=parseInt(a.css(b),10);if(c)return c;var d=a[0].currentStyle;return d&&d.width&&parseInt(d.width,10)}function g(a){var b=a.data("events");return b&&b.onSlide}function h(b,c){var d=this,h=c.css,i=a("<div><div/><a href='#'/></div>").data("rangeinput",d),j,k,l,m,n;b.before(i);var o=i.addClass(h.slider).find("a").addClass(h.handle),p=i.find("div").addClass(h.progress);a.each("min,max,step,value".split(","),function(a,d){var e=b.attr(d);parseFloat(e)&&(c[d]=parseFloat(e,10))});var q=c.max-c.min,r=c.step=="any"?0:c.step,s=c.precision;s===undefined&&(s=r.toString().split("."),s=s.length===2?s[1].length:0);if(b.attr("type")=="range"){var t=b.clone().wrap("<div/>").parent().html(),u=a(t.replace(/type/i,"type=text data-orig-type"));u.val(c.value),b.replaceWith(u),b=u}b.addClass(h.input);var v=a(d).add(b),w=!0;function x(a,f,g,h){g===undefined?g=f/m*q:h&&(g-=c.min),r&&(g=Math.round(g/r)*r);if(f===undefined||r)f=g*m/q;if(isNaN(g))return d;f=Math.max(0,Math.min(f,m)),g=f/m*q;if(h||!j)g+=c.min;j&&(h?f=m-f:g=c.max-g),g=e(g,s);var i=a.type=="click";if(w&&k!==undefined&&!i){a.type="onSlide",v.trigger(a,[g,f]);if(a.isDefaultPrevented())return d}var l=i?c.speed:0,t=i?function(){a.type="change",v.trigger(a,[g])}:null;j?(o.animate({top:f},l,t),c.progress&&p.animate({height:m-f+o.height()/2},l)):(o.animate({left:f},l,t),c.progress&&p.animate({width:f+o.width()/2},l)),k=g,n=f,b.val(g);return d}a.extend(d,{getValue:function(){return k},setValue:function(b,c){y();return x(c||a.Event("api"),undefined,b,!0)},getConf:function(){return c},getProgress:function(){return p},getHandle:function(){return o},getInput:function(){return b},step:function(b,e){e=e||a.Event();var f=c.step=="any"?1:c.step;d.setValue(k+f*(b||1),e)},stepUp:function(a){return d.step(a||1)},stepDown:function(a){return d.step(-a||-1)}}),a.each("onSlide,change".split(","),function(b,e){a.isFunction(c[e])&&a(d).on(e,c[e]),d[e]=function(b){b&&a(d).on(e,b);return d}}),o.drag({drag:!1}).on("dragStart",function(){y(),w=g(a(d))||g(b)}).on("drag",function(a,c,d){if(b.is(":disabled"))return!1;x(a,j?c:d)}).on("dragEnd",function(a){a.isDefaultPrevented()||(a.type="change",v.trigger(a,[k]))}).click(function(a){return a.preventDefault()}),i.click(function(a){if(b.is(":disabled")||a.target==o[0])return a.preventDefault();y();var c=j?o.height()/2:o.width()/2;x(a,j?m-l-c+a.pageY:a.pageX-l-c)}),c.keyboard&&b.keydown(function(c){if(!b.attr("readonly")){var e=c.keyCode,f=a([75,76,38,33,39]).index(e)!=-1,g=a([74,72,40,34,37]).index(e)!=-1;if((f||g)&&!(c.shiftKey||c.altKey||c.ctrlKey)){f?d.step(e==33?10:1,c):g&&d.step(e==34?-10:-1,c);return c.preventDefault()}}}),b.blur(function(b){var c=a(this).val();c!==k&&d.setValue(c,b)}),a.extend(b[0],{stepUp:d.stepUp,stepDown:d.stepDown});function y(){j=c.vertical||f(i,"height")>f(i,"width"),j?(m=f(i,"height")-f(o,"height"),l=i.offset().top+m):(m=f(i,"width")-f(o,"width"),l=i.offset().left)}function z(){y(),d.setValue(c.value!==undefined?c.value:c.min)}z(),m||a(window).load(z)}a.expr[":"].range=function(b){var c=b.getAttribute("type");return c&&c=="range"||a(b).filter("input").data("rangeinput")},a.fn.rangeinput=function(c){if(this.data("rangeinput"))return this;c=a.extend(!0,{},b.conf,c);var d;this.each(function(){var b=new h(a(this),a.extend(!0,{},c)),e=b.getInput().data("rangeinput",b);d=d?d.add(e):e});return d?d:this}})(jQuery);
Files elefant-elefant_1_3_10_beta/apps/user/js/jquery.userchooser.js and elefant-elefant_1_3_11_rc/apps/user/js/jquery.userchooser.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/js/jsx/links.js elefant-elefant_1_3_11_rc/apps/user/js/jsx/links.js
--- elefant-elefant_1_3_10_beta/apps/user/js/jsx/links.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/js/jsx/links.js	2015-09-05 21:13:59.000000000 -0500
@@ -53,7 +53,7 @@
 var LinkForm = React.createClass ({
 	render: function () {
 		return (
-			<form onSubmit={this.handleSubmit}>
+			<form id="social-link-form" onSubmit={this.handleSubmit}>
 				<p>
 					<input type="text" ref="handle" placeholder={this.props.i18n.link_placeholder} size="35" />
 					<select ref="service">
Files elefant-elefant_1_3_10_beta/apps/user/js/jsx/notes.js and elefant-elefant_1_3_11_rc/apps/user/js/jsx/notes.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/persona.js and elefant-elefant_1_3_11_rc/apps/user/js/persona.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/react/JSXTransformer.js and elefant-elefant_1_3_11_rc/apps/user/js/react/JSXTransformer.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/react/react-with-addons.js and elefant-elefant_1_3_11_rc/apps/user/js/react/react-with-addons.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/react/react-with-addons.min.js and elefant-elefant_1_3_11_rc/apps/user/js/react/react-with-addons.min.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/react/react.js and elefant-elefant_1_3_11_rc/apps/user/js/react/react.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/js/react/react.min.js and elefant-elefant_1_3_11_rc/apps/user/js/react/react.min.js are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/API/Link.php and elefant-elefant_1_3_11_rc/apps/user/lib/API/Link.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/API/Note.php and elefant-elefant_1_3_11_rc/apps/user/lib/API/Note.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/Auth/Basic.php and elefant-elefant_1_3_11_rc/apps/user/lib/Auth/Basic.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/Auth/HMAC.php and elefant-elefant_1_3_11_rc/apps/user/lib/Auth/HMAC.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/Data.php and elefant-elefant_1_3_11_rc/apps/user/lib/Data.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/lib/Filter.php elefant-elefant_1_3_11_rc/apps/user/lib/Filter.php
--- elefant-elefant_1_3_10_beta/apps/user/lib/Filter.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/lib/Filter.php	2015-09-05 21:13:59.000000000 -0500
@@ -9,4 +9,8 @@
 	public static function resource_id ($resource) {
 		return str_replace ('/', '-', $resource);
 	}
+	
+	public static function csv_header ($header) {
+		return ucwords (str_replace ('_', ' ', $header));
+	}
 }
Files elefant-elefant_1_3_10_beta/apps/user/lib/LightOpenID.php and elefant-elefant_1_3_11_rc/apps/user/lib/LightOpenID.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/lib/Rules.php elefant-elefant_1_3_11_rc/apps/user/lib/Rules.php
--- elefant-elefant_1_3_10_beta/apps/user/lib/Rules.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/lib/Rules.php	2015-09-05 21:13:59.000000000 -0500
@@ -6,10 +6,31 @@
  * Custom form rules for the user app.
  */
 class Rules {
+	/**
+	 * Ensure new role name doesn't already exist.
+	 */
 	public static function new_role ($role) {
 		if (isset (\User::acl ()->rules[$role])) {
 			return false;
 		}
 		return true;
 	}
+	
+	/**
+	 * Ensure new email address doesn't already belong to another user.
+	 * If no `$user_id` is provided, will use `User::val ('id')` to limit
+	 * the email address search by the current user. If `$user_id` is
+	 * set to `false`, it will not limit by a user ID.
+	 */
+	public static function email_in_use ($email, $user_id = null) {
+		$user_id = ($user_id === null) ? $user_id : \User::val ('id');
+
+		$q = \User::query ()->where ('email', $email);
+		
+		if ($user_id !== false) {
+			$q->where ('id != ?', $user_id);
+		}
+		
+		return (bool) $q->count ();
+	}
 }
Files elefant-elefant_1_3_10_beta/apps/user/lib/tmhOAuth.php and elefant-elefant_1_3_11_rc/apps/user/lib/tmhOAuth.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/tmhUtilities.php and elefant-elefant_1_3_11_rc/apps/user/lib/tmhUtilities.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/lib/vCard.php and elefant-elefant_1_3_11_rc/apps/user/lib/vCard.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/models/Link.php and elefant-elefant_1_3_11_rc/apps/user/models/Link.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/models/Note.php and elefant-elefant_1_3_11_rc/apps/user/models/Note.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/models/Session.php elefant-elefant_1_3_11_rc/apps/user/models/Session.php
--- elefant-elefant_1_3_10_beta/apps/user/models/Session.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/models/Session.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,91 @@
+<?php
+
+namespace user;
+
+/**
+ * Stores session IDs for user logins.
+ *
+ * Fields:
+ *
+ * - session_id
+ * - expires
+ * - user_id
+ */
+class Session extends \Model {
+	public $table = '#prefix#user_session';
+	
+	public $key = 'session_id';
+	
+	public static $expires = 2592000; // 1 month
+	
+	/**
+	 * Generate a unique ID for a new session.
+	 */
+	public static function generate_id () {
+		return md5 (uniqid (mt_rand (), 1));
+	}
+	
+	/**
+	 * Create a new session for a user. Returns the new Session
+	 * object.
+	 */
+	public static function create ($user) {
+		$s = new Session (array (
+			'session_id' => self::generate_id (),
+			'expires' => gmdate ('Y-m-d H:i:s', time () + self::$expires),
+			'user_id' => $user
+		));
+		$try = 0;
+		while (! $s->put ()) {
+			$s->session_id = self::generate_id ();
+			$try++;
+			if ($try === 10) {
+				// give up after 10 tries
+				return false;
+			}
+		}
+		return $s;
+	}
+	
+	/**
+	 * Fetch user for a given session ID.
+	 */
+	public static function fetch_user ($id) {
+		return \DB::single (
+			'select u.* from #prefix#user_session s left join #prefix#user u on s.user_id = u.id
+			 where s.session_id = ? and s.expires > ?',
+			 $id,
+			 gmdate ('Y-m-d H:i:s')
+		);
+	}
+	
+	/**
+	 * Clear a single session ID.
+	 */
+	public static function clear ($id) {
+		return \DB::execute (
+			'delete from #prefix#user_session where session_id = ?',
+			$id
+		);
+	}
+	
+	/**
+	 * Clear all session IDs for a given user.
+	 */
+	public static function clear_all ($user) {
+		return \DB::execute (
+			'delete from #prefix#user_session where user_id = ?',
+			$user
+		);
+	}
+	
+	/**
+	 * Clear all expired sessions.
+	 */
+	public static function clear_expired () {
+		return \DB::execute (
+			'delete from #prefix#user_session where expires <= ?',
+			gmdate ('Y-m-d H:i:s')
+		);
+	}
+}
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/models/User.php elefant-elefant_1_3_11_rc/apps/user/models/User.php
--- elefant-elefant_1_3_10_beta/apps/user/models/User.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/models/User.php	2015-09-05 21:13:59.000000000 -0500
@@ -47,6 +47,19 @@
  * - signed_up
  * - updated
  * - userdata
+ * - phone
+ * - fax
+ * - address
+ * - address2
+ * - city
+ * - state
+ * - country
+ * - zip
+ * - title
+ * - company
+ * - photo
+ * - about
+ * - website
  *
  * Basic usage of additional methods:
  *
@@ -102,6 +115,12 @@
 	 * This is the static User object for the current user.
 	 */
 	public static $user = FALSE;
+	
+	/**
+	 * Session object for storing session IDs and expiry times,
+	 * when `multi_login` is enabled.
+	 */
+	public static $session = null;
 
 	/**
 	 * Acl object for `require_acl()` method. Get and set via `User::acl()`.
@@ -148,6 +167,10 @@
 		return $pass;
 	}
 
+	/**
+	 * Initializes the PHP session with the right settings
+	 * and save handler.
+	 */
 	public static function init_session ($name = false, $duration = false, $path = '/', $domain = false, $secure = false, $httponly = true) {
 		if (! isset ($_SESSION)) {
 			$name = $name ? $name : conf ('General', 'session_name');
@@ -206,13 +229,13 @@
 		);
 
 		// Check if they've exceeded their login attempt limit
-		global $cache, $controller;
-		$appconf = parse_ini_file ('apps/user/conf/config.php', TRUE);
+		global $controller;
+		$cache = $controller->cache ();
 		$attempts = $cache->get ('_user_login_attempts_' . session_id ());
 		if (! $attempts) {
 			$attempts = 0;
 		}
-		if ($attempts > $appconf['User']['login_attempt_limit']) {
+		if ($attempts > Appconf::user ('User', 'login_attempt_limit')) {
 			$called[$user] = FALSE;
 			$controller->redirect ('/user/too-many-attempts');
 		}
@@ -220,18 +243,29 @@
 		if ($u && crypt ($pass, $u->password) == $u->password) {
 			$class = get_called_class ();
 			self::$user = new $class ((array) $u, FALSE);
-			self::$user->session_id = md5 (uniqid (mt_rand (), 1));
-			self::$user->expires = gmdate ('Y-m-d H:i:s', time () + 2592000); // 1 month
-			$try = 0;
-			while (! self::$user->put ()) {
-				self::$user->session_id = md5 (uniqid (mt_rand (), 1));
-				$try++;
-				if ($try == 5) {
+			if (Appconf::user ('User', 'multi_login')) {
+				self::$session = user\Session::create ($u->id);
+				if (self::$session === false) {
 					$called[$user] = FALSE;
-					return FALSE;
+					return false;
 				}
+				self::$user->session_id = self::$session->session_id;
+				self::$user->expires = self::$session->expires;
+				$_SESSION['session_id'] = self::$user->session_id;
+			} else {
+				self::$user->session_id = md5 (uniqid (mt_rand (), 1));
+				self::$user->expires = gmdate ('Y-m-d H:i:s', time () + 2592000); // 1 month
+				$try = 0;
+				while (! self::$user->put ()) {
+					self::$user->session_id = md5 (uniqid (mt_rand (), 1));
+					$try++;
+					if ($try == 5) {
+						$called[$user] = FALSE;
+						return FALSE;
+					}
+				}
+				$_SESSION['session_id'] = self::$user->session_id;
 			}
-			$_SESSION['session_id'] = self::$user->session_id;
 
 			// Save the user agent so we can verify it against future sessions,
 			// and remove the login attempts cache item
@@ -244,8 +278,8 @@
 
 		// Increment the number of attempts they've made
 		$attempts++;
-		if (! $cache->add ('_user_login_attempts_' . session_id (), $attempts, 0, $appconf['User']['block_attempts_for'])) {
-			$cache->replace ('_user_login_attempts_' . session_id (), $attempts, 0, $appconf['User']['block_attempts_for']);
+		if (! $cache->add ('_user_login_attempts_' . session_id (), $attempts, 0, Appconf::user ('User', 'block_attempts_for'))) {
+			$cache->replace ('_user_login_attempts_' . session_id (), $attempts, 0, Appconf::user ('User', 'block_attempts_for'));
 		}
 
 		$called[$user] = FALSE;
@@ -269,12 +303,19 @@
 			}
 
 			if (isset ($_SESSION['session_id'])) {
-				$u = DB::single (
-					'select * from `#prefix#user` where session_id = ? and expires > ?',
-					$_SESSION['session_id'],
-					gmdate ('Y-m-d H:i:s')
-				);
-				if ($u) {
+				if (Appconf::user ('User', 'multi_login')) {
+					$u = \user\Session::fetch_user ($_SESSION['session_id']);
+					if (is_object ($u)) {
+						$u->session_id = $_SESSION['session_id'];
+					}
+				} else {
+					$u = DB::single (
+						'select * from `#prefix#user` where session_id = ? and expires > ?',
+						$_SESSION['session_id'],
+						gmdate ('Y-m-d H:i:s')
+					);
+				}
+				if (is_object ($u)) {
 					// Verify user agent as a last step (make hijacking harder)
 					global $cache;
 					$ua = $cache->get ('_user_session_agent_' . $_SESSION['session_id']);
@@ -481,7 +522,10 @@
 		if (self::$user === FALSE) {
 			self::require_login ();
 		}
-		if (! empty (self::$user->session_id)) {
+		if (Appconf::user ('User', 'multi_login')) {
+			user\Session::clear ($_SESSION['session_id']);
+			user\Session::clear_expired ();
+		} elseif (! empty (self::$user->session_id)) {
 			self::$user->expires = gmdate ('Y-m-d H:i:s', time () - 100000);
 			self::$user->put ();
 		}
Files elefant-elefant_1_3_10_beta/apps/user/models/User_OpenID.php and elefant-elefant_1_3_11_rc/apps/user/models/User_OpenID.php are identical
Files elefant-elefant_1_3_10_beta/apps/user/pix/facebook.png and elefant-elefant_1_3_11_rc/apps/user/pix/facebook.png are identical
Files elefant-elefant_1_3_10_beta/apps/user/pix/google.png and elefant-elefant_1_3_11_rc/apps/user/pix/google.png are identical
Files elefant-elefant_1_3_10_beta/apps/user/pix/openid.png and elefant-elefant_1_3_11_rc/apps/user/pix/openid.png are identical
Files elefant-elefant_1_3_10_beta/apps/user/pix/persona.png and elefant-elefant_1_3_11_rc/apps/user/pix/persona.png are identical
Files elefant-elefant_1_3_10_beta/apps/user/pix/twitter.png and elefant-elefant_1_3_11_rc/apps/user/pix/twitter.png are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/add.html elefant-elefant_1_3_11_rc/apps/user/views/add.html
--- elefant-elefant_1_3_10_beta/apps/user/views/add.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/add.html	2015-09-05 21:13:59.000000000 -0500
@@ -57,6 +57,11 @@
 </p>
 
 <p>
+	{"Fax"}:<br />
+	<input type="text" name="fax" size="30" value="{{ fax|quotes }}" />
+</p>
+
+<p>
 	{"Address"}:<br />
 	<input type="text" name="address" size="40" value="{{ address|quotes }}" />
 </p>
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/admin.html elefant-elefant_1_3_11_rc/apps/user/views/admin.html
--- elefant-elefant_1_3_10_beta/apps/user/views/admin.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/admin.html	2015-09-05 21:13:59.000000000 -0500
@@ -3,9 +3,11 @@
 
 <div class="e-row-variable" style="margin-bottom: 20px">
 	<div class="e-col-50 e-no-padding">
-		<a href="/user/add">{"Add Member"}</a>
+		<a href="/user/add">{"Add"}</a>
 		&nbsp;|&nbsp;
-		<a href="/user/import">{"Import Members"}</a>
+		<a href="/user/import">{"Import"}</a>
+		&nbsp;|&nbsp;
+		<a href="/user/export">{"Export"}</a>
 		{% if User::require_acl ('user/roles') %}
 		&nbsp;|&nbsp;
 		<a href="/user/roles">{"Roles"}</a>
@@ -14,7 +16,7 @@
 		&nbsp;|&nbsp;
 		<a href="/user/settings">{"Settings"}</a>
 		&nbsp;|&nbsp;
-		<a href="/admin/extended?extends=User&name=Members">{"Custom Fields"}</a>
+		<a href="/admin/extended?extends=User&name=Accounts">{"Custom Fields"}</a>
 		{% end %}
 	</div>
 	<div class="e-col-50 e-no-padding" style="text-align: right">
Files elefant-elefant_1_3_10_beta/apps/user/views/chooser/addform.html and elefant-elefant_1_3_11_rc/apps/user/views/chooser/addform.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/details.html elefant-elefant_1_3_11_rc/apps/user/views/details.html
--- elefant-elefant_1_3_10_beta/apps/user/views/details.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/details.html	2015-09-05 21:13:59.000000000 -0500
@@ -9,16 +9,15 @@
 	<a href="/user/delete?id={{id}}" onclick="return confirm ('{"Are you sure you want to delete this user?"}');">{"Delete"}</a>
 </p>
 
-<h4>{"Contact information"}</h4>
-
 {% if photo != '' %}
 <img src="{{photo}}" id="photo" />
 {% end %}
 
 <p>
-	<b>{"Email"}:</b> <a href="mailto:{{email}}">{{email}}</a><br />
-	<b>{"Phone"}:</b> {{phone}}<br />
-	<b>{"Website"}:</b> <a href="{{website}}">{{website}}</a>
+	<b>{"Email"}:</b> <a href="mailto:{{email}}">{{email}}</a>
+	{% if phone != '' %}<br /><b>{"Phone"}:</b> {{phone}}{% end %}
+	{% if fax != '' %}<br /><b>{"Fax"}:</b> {{fax}}{% end %}
+	{% if website != '' %}<br /><b>{"Website"}:</b> <a href="{{website}}">{{website}}</a>{% end %}
 </p>
 
 <p>
@@ -36,13 +35,21 @@
 <p><b>{"About"}:</b><br />{{about}}</p>
 {% end %}
 
-<h4 class="clear-photo">{"Social links"}</h4>
-
-<div id="links"></div>
-
-<h4>{"Notes"}</h4>
-
-<div id="notes"></div>
+<div id="tabs" class="clear-photo">
+	<ul id="tab-list">
+		<li><a href="#tab-notes">{"Notes"}</a></li>
+		<li><a href="#tab-social">{"Social"}</a></li>
+	{% foreach tabs as _name, _content %}
+		<li><a href="#tab-{{_name|URLify::filter}}">{{_name|__}}</a></li>
+	{% end %}
+	</ul>
+
+	<div id="tab-notes"></div>
+	<div id="tab-social"></div>
+{% foreach tabs as _name, _content %}
+	<div id="tab-{{_name|URLify::filter}}">{{_content|none}}</div>
+{% end %}
+</div>
 
 <script>
 var I18N = {
@@ -62,6 +69,9 @@
 </script>
 
 <script>
+$(function () {
+	$('#tabs').tabs ();
+});
 React.renderComponent (
 	LinkBox ({
 		init_url: '/user/api/link/{{id}}',
@@ -71,7 +81,7 @@
 		current_user: {{User::val ('id')}},
 		i18n: I18N
 	}),
-	document.getElementById ('links')
+	document.getElementById ('tab-social')
 );
 React.renderComponent (
 	NoteBox ({
@@ -82,6 +92,6 @@
 		current_user: {{User::val ('id')}},
 		i18n: I18N
 	}),
-	document.getElementById ('notes')
+	document.getElementById ('tab-notes')
 );
 </script>
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/edit.html elefant-elefant_1_3_11_rc/apps/user/views/edit.html
--- elefant-elefant_1_3_10_beta/apps/user/views/edit.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/edit.html	2015-09-05 21:13:59.000000000 -0500
@@ -13,12 +13,19 @@
 <span class="notice" id="verify_pass-notice">{"Your password doesn't match."}</span></p>
 
 {% if User::require_acl ('user/edit_roles') %}
-	<p>{"Member role"}:<br />
+	<p>{"Member role"}:
+	{% if ! in_array ($data->type, $data->types) %}
+		<input type="hidden" name="type" value="{{type}}" />
+		<b>{{type|ucfirst}}</b>
+	{% else %}
+	<br />
 	<select name="type">
 	{% foreach types %}
 		<option value="{{ loop_value }}"{% if type === $data->loop_value %} selected {% end %}>{{ loop_value|ucfirst }}</option>
 	{% end %}
-	</select></p>
+	</select>
+	{% end %}
+	</p>
 {% else %}
 	<input type="hidden" name="type" value="{{type}}" />
 {% end %}
@@ -57,6 +64,11 @@
 </p>
 
 <p>
+	{"Fax"}:<br />
+	<input type="text" name="fax" size="30" value="{{ fax|quotes }}" />
+</p>
+
+<p>
 	{"Address"}:<br />
 	<input type="text" name="address" size="40" value="{{ address }}" />
 </p>
Files elefant-elefant_1_3_10_beta/apps/user/views/email/recover.html and elefant-elefant_1_3_11_rc/apps/user/views/email/recover.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/email/verification.html and elefant-elefant_1_3_11_rc/apps/user/views/email/verification.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/import/csv.html and elefant-elefant_1_3_11_rc/apps/user/views/import/csv.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/import/csv2.html elefant-elefant_1_3_11_rc/apps/user/views/import/csv2.html
--- elefant-elefant_1_3_10_beta/apps/user/views/import/csv2.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/import/csv2.html	2015-09-05 21:13:59.000000000 -0500
@@ -29,6 +29,7 @@
 	<option value="photo">{"Photo"}</option>
 	<option value="about">{"About"}</option>
 	<option value="phone">{"Phone"}</option>
+	<option value="fax">{"Fax"}</option>
 	<option value="address">{"Address"}</option>
 	<option value="address2">{"Address line 2"}</option>
 	<option value="city">{"City"}</option>
Files elefant-elefant_1_3_10_beta/apps/user/views/import/vcf.html and elefant-elefant_1_3_11_rc/apps/user/views/import/vcf.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/import.html and elefant-elefant_1_3_11_rc/apps/user/views/import.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/index.html and elefant-elefant_1_3_11_rc/apps/user/views/index.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/login/newuser.html and elefant-elefant_1_3_11_rc/apps/user/views/login/newuser.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/login/openid.html and elefant-elefant_1_3_11_rc/apps/user/views/login/openid.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/login.html and elefant-elefant_1_3_11_rc/apps/user/views/login.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/newpass.html and elefant-elefant_1_3_11_rc/apps/user/views/newpass.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/recover.html and elefant-elefant_1_3_11_rc/apps/user/views/recover.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/role/add.html and elefant-elefant_1_3_11_rc/apps/user/views/role/add.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/role/edit.html elefant-elefant_1_3_11_rc/apps/user/views/role/edit.html
--- elefant-elefant_1_3_10_beta/apps/user/views/role/edit.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/role/edit.html	2015-09-05 21:13:59.000000000 -0500
@@ -16,7 +16,7 @@
 		<td><input type="checkbox" name="resources[default]" id="resources-default" value="on" /> <label for="resources-default">{"Default access for this role"} <span class="notice" style="display: inline">({"selected means allow everything by default"})</span></label></td>
 	</tr>
 	{% foreach _resources as resource, label %}
-	<tr>
+	<tr title="{{resource}}">
 		<td><input type="checkbox" name="resources[{{resource}}]" id="resources-{{resource|user\Filter::resource_id}}" value="on" /> <label for="resources-{{resource|user\Filter::resource_id}}" style="display: inline-block; width: 95%">{{label|__}}</label></td>
 	</tr>
 		{% if resource == 'user/edit_roles' %}
Files elefant-elefant_1_3_10_beta/apps/user/views/roles.html and elefant-elefant_1_3_11_rc/apps/user/views/roles.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/settings.html and elefant-elefant_1_3_11_rc/apps/user/views/settings.html are identical
Files elefant-elefant_1_3_10_beta/apps/user/views/sidebar.html and elefant-elefant_1_3_11_rc/apps/user/views/sidebar.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/signup.html elefant-elefant_1_3_11_rc/apps/user/views/signup.html
--- elefant-elefant_1_3_10_beta/apps/user/views/signup.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/signup.html	2015-09-05 21:13:59.000000000 -0500
@@ -14,6 +14,10 @@
 <p><input type="submit" value="{"Sign Up"}" /></p>
 </form>
 
+<p>{"Already a member?"} <a href="/user/login">{"Log in here"}</a><br />
+<a href="/user/recover">{"Forgot your password?"}</a></p>
+
+
 <script type="text/javascript" src="/js/jquery.verify_values.js"></script>
 <script type="text/javascript">
 $(function () {
diff -urBNs elefant-elefant_1_3_10_beta/apps/user/views/update.html elefant-elefant_1_3_11_rc/apps/user/views/update.html
--- elefant-elefant_1_3_10_beta/apps/user/views/update.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/apps/user/views/update.html	2015-09-05 21:13:59.000000000 -0500
@@ -5,8 +5,14 @@
 <form method="POST" id="{{_form}}" enctype="multipart/form-data">
 <p>{"Your name"}:<br /><input type="text" name="name" size="40" value="{{ name }}" />
 <span class="notice" id="name-notice">{"You must enter a name."}</span></p>
-<p>{"Email address"}:<br /><input type="text" name="email" size="40" value="{{ email }}" />
-<span class="notice" id="email-notice">{"You must enter an email address."}</span></p>
+
+<p>
+	{"Email address"}:<br />
+	<input type="text" name="email" size="40" value="{{ email }}" />
+	<span class="notice" id="email-notice">{"You must enter an email address."}</span>
+	<span class="notice" id="email-in-use-notice">{"There is already an account that belongs to this email address."}</span>
+</p>
+
 <p>{"Change password"}:<br /><input type="password" name="password" size="20" value="{{ password }}" />
 <span class="notice" id="password-notice">{"Your password must be at least 6 characters."}</span></p>
 <p>{"Verify new password"}:<br /><input type="password" name="verify_pass" size="20" value="{{ verify_pass }}" />
Files elefant-elefant_1_3_10_beta/cache/.htaccess and elefant-elefant_1_3_11_rc/cache/.htaccess are identical
Files elefant-elefant_1_3_10_beta/composer.json and elefant-elefant_1_3_11_rc/composer.json are identical
Files elefant-elefant_1_3_10_beta/conf/.htaccess and elefant-elefant_1_3_11_rc/conf/.htaccess are identical
Files elefant-elefant_1_3_10_beta/conf/acl.php and elefant-elefant_1_3_11_rc/conf/acl.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/conf/config.php elefant-elefant_1_3_11_rc/conf/config.php
--- elefant-elefant_1_3_10_beta/conf/config.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/config.php	2015-09-05 21:13:59.000000000 -0500
@@ -128,6 +128,11 @@
 
 access_control_list = conf/acl.php
 
+; The path to your custom tools list. Note: Leave
+; the leading slashes out of the path.
+
+toolbar = conf/tools.php
+
 [Database]
 
 ; Database settings go here. Driver must be a valid PDO driver.
@@ -240,4 +245,13 @@
 ;transport[type] = file
 ;transport[folder] = cache/mailer
 
+[Proxy]
+
+; Proxy configuration for cURL.
+; Keep commented if no proxy used.
+;url = "http://1.2.3.4"
+;port = 8080
+;skip_urls = "localhost,localhost.local"
+;skip_ips = "127.0.0.1,192.168.1.1"
+
 ; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/conf/defaults.php elefant-elefant_1_3_11_rc/conf/defaults.php
--- elefant-elefant_1_3_10_beta/conf/defaults.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/defaults.php	2015-09-05 21:13:59.000000000 -0500
@@ -128,6 +128,11 @@
 
 access_control_list = conf/acl.php
 
+; The path to your custom tools list. Note: Leave
+; the leading slashes out of the path.
+
+toolbar = conf/tools.php
+
 [Database]
 
 ; Database settings go here. Driver must be a valid PDO driver.
@@ -240,4 +245,13 @@
 ;transport[type] = file
 ;transport[folder] = cache/mailer
 
+[Proxy]
+
+; Proxy configuration for cURL.
+; Keep commented if no proxy used.
+;url = "http://1.2.3.4"
+;port = 8080
+;skip_urls = "localhost,localhost.local"
+;skip_ips = "127.0.0.1,192.168.1.1"
+
 ; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/conf/install_mysql.sql elefant-elefant_1_3_11_rc/conf/install_mysql.sql
--- elefant-elefant_1_3_10_beta/conf/install_mysql.sql	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/install_mysql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -39,6 +39,7 @@
 	updated datetime not null,
 	userdata text not null,
 	phone char(32) not null default '',
+	fax char(32) not null default '',
 	address char(48) not null default '',
 	address2 char(48) not null default '',
 	city char(48) not null default '',
@@ -56,6 +57,14 @@
 
 insert into #prefix#user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, now(), 'Admin User', 'admin', now(), now(), '[]');
 
+create table #prefix#user_session (
+	session_id char(32) not null primary key,
+	expires datetime not null,
+	user_id int not null,
+	index (user_id, expires),
+	index (expires)
+);
+
 create table #prefix#user_openid (
 	token char(200) primary key,
 	user_id int not null
@@ -100,7 +109,7 @@
 
 create table #prefix#blog_post (
 	id int not null auto_increment primary key,
-	title char(72) not null,
+	title char(128) not null,
 	ts datetime not null,
 	author char(32) not null,
 	published enum('yes','no','que') not null,
@@ -113,11 +122,11 @@
 ) default charset=utf8;
 
 create table #prefix#blog_tag (
-	id char(24) not null primary key
+	id char(48) not null primary key
 ) default charset=utf8;
 
 create table #prefix#blog_post_tag (
-	tag_id char(24) not null,
+	tag_id char(48) not null,
 	post_id int not null,
 	primary key (tag_id, post_id)
 ) default charset=utf8;
diff -urBNs elefant-elefant_1_3_10_beta/conf/install_pgsql.sql elefant-elefant_1_3_11_rc/conf/install_pgsql.sql
--- elefant-elefant_1_3_10_beta/conf/install_pgsql.sql	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/install_pgsql.sql	2015-09-05 21:13:59.000000000 -0500
@@ -47,6 +47,7 @@
 	updated timestamp not null,
 	userdata text not null,
 	phone char(32) not null default '',
+	fax char(32) not null default '',
 	address char(48) not null default '',
 	address2 char(48) not null default '',
 	city char(48) not null default '',
@@ -65,6 +66,15 @@
 
 insert into #prefix#user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, now(), 'Admin User', 'admin', now(), now(), '[]');
 
+create table #prefix#user_session (
+	session_id varchar(32) not null primary key,
+	expires timestamp not null,
+	user_id integer not null
+);
+
+create index #prefix#user_session_user on #prefix#user_session (user_id, expires);
+create index #prefix#user_session_expires on #prefix#user_session (expires);
+
 create table #prefix#user_openid (
 	token varchar(200) primary key,
 	user_id integer not null
@@ -121,7 +131,7 @@
 
 create table #prefix#blog_post (
 	id integer not null default nextval('#prefix#blog_post_id_seq') primary key,
-	title varchar(72) not null,
+	title varchar(128) not null,
 	ts timestamp not null,
 	author varchar(32) not null,
 	published varchar(3) not null,
@@ -136,11 +146,11 @@
 create index #prefix#blog_post_pts on #prefix#blog_post (ts, published);
 
 create table #prefix#blog_tag (
-	id varchar(24) not null primary key
+	id varchar(48) not null primary key
 );
 
 create table #prefix#blog_post_tag (
-	tag_id varchar(24) not null,
+	tag_id varchar(48) not null,
 	post_id integer not null,
 	primary key (tag_id, post_id)
 );
diff -urBNs elefant-elefant_1_3_10_beta/conf/install_sqlite.sql elefant-elefant_1_3_11_rc/conf/install_sqlite.sql
--- elefant-elefant_1_3_10_beta/conf/install_sqlite.sql	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/install_sqlite.sql	2015-09-05 21:13:59.000000000 -0500
@@ -41,6 +41,7 @@
 	updated datetime not null,
 	userdata text not null,
 	phone char(32) not null default '',
+	fax char(32) not null default '',
 	address char(48) not null default '',
 	address2 char(48) not null default '',
 	city char(48) not null default '',
@@ -59,6 +60,15 @@
 
 insert into #prefix#user (id, email, password, session_id, expires, name, type, signed_up, updated, userdata) values (1, 'you@example.com', '$2a$07$1QeR9mu2doQxY0uBcpFlrOIfDxq0BwpR8FsImCgWvAL4Fz9jDByxi', null, (DATETIME('now')), 'Admin User', 'admin', (DATETIME('now')), (DATETIME('now')), '[]');
 
+create table #prefix#user_session (
+	session_id char(32) not null primary key,
+	expires datetime not null,
+	user_id int not null
+);
+
+create index #prefix#user_session_user on #prefix#user_session (user_id, expires);
+create index #prefix#user_session_expires on #prefix#user_session (expires);
+
 create table #prefix#user_openid (
 	token char(200) primary key,
 	user_id int not null
@@ -107,7 +117,7 @@
 
 create table #prefix#blog_post (
 	id integer primary key,
-	title char(72) not null,
+	title char(128) not null,
 	ts datetime not null,
 	author char(32) not null,
 	published char(3) not null,
@@ -121,12 +131,12 @@
 create index #prefix#blog_post_pts on #prefix#blog_post (ts, published);
 
 create table #prefix#blog_tag (
-	id char(24) not null,
+	id char(48) not null,
 	primary key (id)
 );
 
 create table #prefix#blog_post_tag (
-	tag_id char(24) not null,
+	tag_id char(48) not null,
 	post_id int not null,
 	primary key (tag_id, post_id)
 );
Files elefant-elefant_1_3_10_beta/conf/navigation.json and elefant-elefant_1_3_11_rc/conf/navigation.json are identical
Files elefant-elefant_1_3_10_beta/conf/package.xml and elefant-elefant_1_3_11_rc/conf/package.xml are identical
Files elefant-elefant_1_3_10_beta/conf/product.php and elefant-elefant_1_3_11_rc/conf/product.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/conf/routes.php elefant-elefant_1_3_11_rc/conf/routes.php
--- elefant-elefant_1_3_10_beta/conf/routes.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/routes.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,19 @@
+; <?php /*
+
+[Disable]
+; 404s only the /admin resource, leaves /admin/* still accessable
+;/admin = true
+
+; 404s /admin/* resources, leaves the /admin resource still accessable
+;/admin = false
+
+[Redirect]
+
+;/login = /user/login
+
+[Alias]
+
+; Ex: /mod/toolbar gets routed to /admin/toolbar
+;/mod = /admin
+
+; */ ?>
Files elefant-elefant_1_3_10_beta/conf/site.db and elefant-elefant_1_3_11_rc/conf/site.db are identical
Files elefant-elefant_1_3_10_beta/conf/test.php and elefant-elefant_1_3_11_rc/conf/test.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/conf/tools.default.php elefant-elefant_1_3_11_rc/conf/tools.default.php
--- elefant-elefant_1_3_10_beta/conf/tools.default.php	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/tools.default.php	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,23 @@
+; <?php /*
+
+[Content]
+
+admin/pages = Web Pages
+blog/admin = Blog Posts
+blocks/admin = Content Blocks
+filemanager/index = Files
+
+[Administration]
+
+user/admin = Accounts
+navigation/admin = Navigation
+designer/admin = Designer
+translator/index = Languages
+admin/settings = Site Settings
+admin/versions = Versions
+
+[Extras]
+
+* = *
+
+; */ ?>
diff -urBNs elefant-elefant_1_3_10_beta/conf/tools.php elefant-elefant_1_3_11_rc/conf/tools.php
--- elefant-elefant_1_3_10_beta/conf/tools.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/tools.php	2015-09-05 21:13:59.000000000 -0500
@@ -9,10 +9,11 @@
 
 [Administration]
 
-user/admin = Members
+user/admin = Accounts
 navigation/admin = Navigation
 designer/admin = Designer
 translator/index = Languages
+admin/settings = Site Settings
 admin/versions = Versions
 
 [Extras]
diff -urBNs elefant-elefant_1_3_10_beta/conf/version.php elefant-elefant_1_3_11_rc/conf/version.php
--- elefant-elefant_1_3_10_beta/conf/version.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/conf/version.php	2015-09-05 21:13:59.000000000 -0500
@@ -1 +1 @@
-<?php define ('ELEFANT_VERSION', '1.3.10');
+<?php define ('ELEFANT_VERSION', '1.3.11');
Files elefant-elefant_1_3_10_beta/css/960.css and elefant-elefant_1_3_11_rc/css/960.css are identical
Files elefant-elefant_1_3_10_beta/css/960_compiled.css and elefant-elefant_1_3_11_rc/css/960_compiled.css are identical
Files elefant-elefant_1_3_10_beta/css/mobile.css and elefant-elefant_1_3_11_rc/css/mobile.css are identical
Files elefant-elefant_1_3_10_beta/css/print.css and elefant-elefant_1_3_11_rc/css/print.css are identical
Files elefant-elefant_1_3_10_beta/css/reset.css and elefant-elefant_1_3_11_rc/css/reset.css are identical
diff -urBNs elefant-elefant_1_3_10_beta/css/style.css elefant-elefant_1_3_11_rc/css/style.css
--- elefant-elefant_1_3_10_beta/css/style.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/css/style.css	2015-09-05 21:13:59.000000000 -0500
@@ -142,6 +142,7 @@
 #body.index-body #slideshow-homepage img {
 	max-width: 940px;
 	width: 940px;
+	min-height:initial;
 }
 
 .index-body table td {
Files elefant-elefant_1_3_10_beta/css/text.css and elefant-elefant_1_3_11_rc/css/text.css are identical
diff -urBNs elefant-elefant_1_3_10_beta/elefant elefant-elefant_1_3_11_rc/elefant
--- elefant-elefant_1_3_10_beta/elefant	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/elefant	2015-09-05 21:13:59.000000000 -0500
@@ -33,7 +33,12 @@
  * Usage:
  *
  *     $ cd /path/to/my/site
- *     $ elefant COMMAND
+ *     $ ./elefant COMMAND
+ *
+ * To set the ELEFANT_ENV environment variable and use a specific configuration,
+ * call via:
+ *
+ *     $ ./elefant --env=production COMMAND
  */
 
 // Prevent non-CLI access
@@ -57,6 +62,15 @@
 // Remove the script name
 array_shift ($argv);
 
+// Set ELEFANT_ENV based on --env=production parameter
+if (isset ($argv[0]) && strpos ($argv[0], '--env=') === 0) {
+	$env = str_replace ('--env=', '', $argv[0]);
+	array_shift ($argv);
+	$argc--;
+} else {
+	$env = 'config';
+}
+
 if (count ($argv) === 0) {
 	// No command, use default handler
 	$handler = 'cli/index';
@@ -85,6 +99,4 @@
 foreach ($argv as $k => $v) {
 	$argv[$k] = escapeshellarg ($v);
 }
-system ('php index.php ' . $handler . ' ' . join (' ', $argv));
-
-?>
\ No newline at end of file
+system ('export ELEFANT_ENV=' . escapeshellarg ($env) . ' && php index.php ' . $handler . ' ' . join (' ', $argv));
Files elefant-elefant_1_3_10_beta/favicon.ico and elefant-elefant_1_3_11_rc/favicon.ico are identical
Files elefant-elefant_1_3_10_beta/files/.htaccess and elefant-elefant_1_3_11_rc/files/.htaccess are identical
Files elefant-elefant_1_3_10_beta/files/design/bg.png and elefant-elefant_1_3_11_rc/files/design/bg.png are identical
Files elefant-elefant_1_3_10_beta/files/homepage/photo1.jpg and elefant-elefant_1_3_11_rc/files/homepage/photo1.jpg are identical
Files elefant-elefant_1_3_10_beta/files/homepage/photo2.jpg and elefant-elefant_1_3_11_rc/files/homepage/photo2.jpg are identical
Files elefant-elefant_1_3_10_beta/files/homepage/photo3.jpg and elefant-elefant_1_3_11_rc/files/homepage/photo3.jpg are identical
Files elefant-elefant_1_3_10_beta/files/homepage/photo4.jpg and elefant-elefant_1_3_11_rc/files/homepage/photo4.jpg are identical
Files elefant-elefant_1_3_10_beta/index.php and elefant-elefant_1_3_11_rc/index.php are identical
Files elefant-elefant_1_3_10_beta/install/cache/.htaccess and elefant-elefant_1_3_11_rc/install/cache/.htaccess are identical
Files elefant-elefant_1_3_10_beta/install/css/style.css and elefant-elefant_1_3_11_rc/install/css/style.css are identical
Files elefant-elefant_1_3_10_beta/install/css/title.png and elefant-elefant_1_3_11_rc/install/css/title.png are identical
diff -urBNs elefant-elefant_1_3_10_beta/install/index.php elefant-elefant_1_3_11_rc/install/index.php
--- elefant-elefant_1_3_10_beta/install/index.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/install/index.php	2015-09-05 21:13:59.000000000 -0500
@@ -187,9 +187,9 @@
 		if ($_SERVER['REQUEST_METHOD'] == 'POST') {
 			// got the settings, save them
 			$config = file_get_contents ('../conf/config.php');
-			$config = preg_replace ('/site_name = .*/', 'site_name = "' . $_POST['site_name'] . '"', $config, 1);
-			$config = preg_replace ('/email_from = .*/', 'email_from = "' . $_POST['email_from'] . '"', $config, 1);
-			$config = preg_replace ('/site_key = .*/', 'site_key = "' . md5 (uniqid (rand (), true)) . '"', $config, 1);
+			$config = preg_replace ('/site_name = .*(?:\r\n|\r|\n)/', 'site_name = "' . $_POST['site_name'] . '"'. PHP_EOL, $config, 1);
+			$config = preg_replace ('/email_from = .*(?:\r\n|\r|\n)/', 'email_from = "' . $_POST['email_from'] . '"'. PHP_EOL, $config, 1);
+			$config = preg_replace ('/site_key = .*(?:\r\n|\r|\n)/', 'site_key = "' . md5 (uniqid (rand (), true)) . '"'. PHP_EOL, $config, 1);
 			if (! file_put_contents ('../conf/config.php', $config)) {
 				$data['error'] = __ ('Failed to write to conf/config.php');
 			} else {
Files elefant-elefant_1_3_10_beta/install/layouts/database.html and elefant-elefant_1_3_11_rc/install/layouts/database.html are identical
Files elefant-elefant_1_3_10_beta/install/layouts/dbinfo.html and elefant-elefant_1_3_11_rc/install/layouts/dbinfo.html are identical
Files elefant-elefant_1_3_10_beta/install/layouts/finished.html and elefant-elefant_1_3_11_rc/install/layouts/finished.html are identical
Files elefant-elefant_1_3_10_beta/install/layouts/introduction.html and elefant-elefant_1_3_11_rc/install/layouts/introduction.html are identical
Files elefant-elefant_1_3_10_beta/install/layouts/license.html and elefant-elefant_1_3_11_rc/install/layouts/license.html are identical
Files elefant-elefant_1_3_10_beta/install/layouts/requirements.html and elefant-elefant_1_3_11_rc/install/layouts/requirements.html are identical
Files elefant-elefant_1_3_10_beta/install/layouts/settings.html and elefant-elefant_1_3_11_rc/install/layouts/settings.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-1.11.3.min.js elefant-elefant_1_3_11_rc/js/jquery-1.11.3.min.js
--- elefant-elefant_1_3_10_beta/js/jquery-1.11.3.min.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-1.11.3.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,5 @@
+/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
+!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
+
+return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){
+return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});
Files elefant-elefant_1_3_10_beta/js/jquery-1.8.3.min.js and elefant-elefant_1_3_11_rc/js/jquery-1.8.3.min.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-migrate-1.2.1.js elefant-elefant_1_3_11_rc/js/jquery-migrate-1.2.1.js
--- elefant-elefant_1_3_10_beta/js/jquery-migrate-1.2.1.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-migrate-1.2.1.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,1041 @@
+/*!
+ * jQuery Migrate - v1.2.1 - 2013-05-08
+ * https://github.com/jquery/jquery-migrate
+ * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
+ */
+(function( jQuery, window, undefined ) {
+// See http://bugs.jquery.com/ticket/13335
+// "use strict";
+
+
+var warnedAbout = {};
+
+// List of warnings already given; public read only
+jQuery.migrateWarnings = [];
+
+// Set to true to prevent console output; migrateWarnings still maintained
+// jQuery.migrateMute = false;
+
+// Show a message on the console so devs know we're active
+if ( !jQuery.migrateMute && window.console && window.console.log ) {
+	window.console.log("JQMIGRATE: Logging is active");
+}
+
+// Set to false to disable traces that appear with warnings
+if ( jQuery.migrateTrace === undefined ) {
+	jQuery.migrateTrace = true;
+}
+
+// Forget any warnings we've already given; public
+jQuery.migrateReset = function() {
+	warnedAbout = {};
+	jQuery.migrateWarnings.length = 0;
+};
+
+function migrateWarn( msg) {
+	var console = window.console;
+	if ( !warnedAbout[ msg ] ) {
+		warnedAbout[ msg ] = true;
+		jQuery.migrateWarnings.push( msg );
+		if ( console && console.warn && !jQuery.migrateMute ) {
+			console.warn( "JQMIGRATE: " + msg );
+			if ( jQuery.migrateTrace && console.trace ) {
+				console.trace();
+			}
+		}
+	}
+}
+
+function migrateWarnProp( obj, prop, value, msg ) {
+	if ( Object.defineProperty ) {
+		// On ES5 browsers (non-oldIE), warn if the code tries to get prop;
+		// allow property to be overwritten in case some other plugin wants it
+		try {
+			Object.defineProperty( obj, prop, {
+				configurable: true,
+				enumerable: true,
+				get: function() {
+					migrateWarn( msg );
+					return value;
+				},
+				set: function( newValue ) {
+					migrateWarn( msg );
+					value = newValue;
+				}
+			});
+			return;
+		} catch( err ) {
+			// IE8 is a dope about Object.defineProperty, can't warn there
+		}
+	}
+
+	// Non-ES5 (or broken) browser; just set the property
+	jQuery._definePropertyBroken = true;
+	obj[ prop ] = value;
+}
+
+if ( document.compatMode === "BackCompat" ) {
+	// jQuery has never supported or tested Quirks Mode
+	migrateWarn( "jQuery is not compatible with Quirks Mode" );
+}
+
+
+var attrFn = jQuery( "<input/>", { size: 1 } ).attr("size") && jQuery.attrFn,
+	oldAttr = jQuery.attr,
+	valueAttrGet = jQuery.attrHooks.value && jQuery.attrHooks.value.get ||
+		function() { return null; },
+	valueAttrSet = jQuery.attrHooks.value && jQuery.attrHooks.value.set ||
+		function() { return undefined; },
+	rnoType = /^(?:input|button)$/i,
+	rnoAttrNodeType = /^[238]$/,
+	rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
+	ruseDefault = /^(?:checked|selected)$/i;
+
+// jQuery.attrFn
+migrateWarnProp( jQuery, "attrFn", attrFn || {}, "jQuery.attrFn is deprecated" );
+
+jQuery.attr = function( elem, name, value, pass ) {
+	var lowerName = name.toLowerCase(),
+		nType = elem && elem.nodeType;
+
+	if ( pass ) {
+		// Since pass is used internally, we only warn for new jQuery
+		// versions where there isn't a pass arg in the formal params
+		if ( oldAttr.length < 4 ) {
+			migrateWarn("jQuery.fn.attr( props, pass ) is deprecated");
+		}
+		if ( elem && !rnoAttrNodeType.test( nType ) &&
+			(attrFn ? name in attrFn : jQuery.isFunction(jQuery.fn[name])) ) {
+			return jQuery( elem )[ name ]( value );
+		}
+	}
+
+	// Warn if user tries to set `type`, since it breaks on IE 6/7/8; by checking
+	// for disconnected elements we don't warn on $( "<button>", { type: "button" } ).
+	if ( name === "type" && value !== undefined && rnoType.test( elem.nodeName ) && elem.parentNode ) {
+		migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8");
+	}
+
+	// Restore boolHook for boolean property/attribute synchronization
+	if ( !jQuery.attrHooks[ lowerName ] && rboolean.test( lowerName ) ) {
+		jQuery.attrHooks[ lowerName ] = {
+			get: function( elem, name ) {
+				// Align boolean attributes with corresponding properties
+				// Fall back to attribute presence where some booleans are not supported
+				var attrNode,
+					property = jQuery.prop( elem, name );
+				return property === true || typeof property !== "boolean" &&
+					( attrNode = elem.getAttributeNode(name) ) && attrNode.nodeValue !== false ?
+
+					name.toLowerCase() :
+					undefined;
+			},
+			set: function( elem, value, name ) {
+				var propName;
+				if ( value === false ) {
+					// Remove boolean attributes when set to false
+					jQuery.removeAttr( elem, name );
+				} else {
+					// value is true since we know at this point it's type boolean and not false
+					// Set boolean attributes to the same name and set the DOM property
+					propName = jQuery.propFix[ name ] || name;
+					if ( propName in elem ) {
+						// Only set the IDL specifically if it already exists on the element
+						elem[ propName ] = true;
+					}
+
+					elem.setAttribute( name, name.toLowerCase() );
+				}
+				return name;
+			}
+		};
+
+		// Warn only for attributes that can remain distinct from their properties post-1.9
+		if ( ruseDefault.test( lowerName ) ) {
+			migrateWarn( "jQuery.fn.attr('" + lowerName + "') may use property instead of attribute" );
+		}
+	}
+
+	return oldAttr.call( jQuery, elem, name, value );
+};
+
+// attrHooks: value
+jQuery.attrHooks.value = {
+	get: function( elem, name ) {
+		var nodeName = ( elem.nodeName || "" ).toLowerCase();
+		if ( nodeName === "button" ) {
+			return valueAttrGet.apply( this, arguments );
+		}
+		if ( nodeName !== "input" && nodeName !== "option" ) {
+			migrateWarn("jQuery.fn.attr('value') no longer gets properties");
+		}
+		return name in elem ?
+			elem.value :
+			null;
+	},
+	set: function( elem, value ) {
+		var nodeName = ( elem.nodeName || "" ).toLowerCase();
+		if ( nodeName === "button" ) {
+			return valueAttrSet.apply( this, arguments );
+		}
+		if ( nodeName !== "input" && nodeName !== "option" ) {
+			migrateWarn("jQuery.fn.attr('value', val) no longer sets properties");
+		}
+		// Does not return so that setAttribute is also used
+		elem.value = value;
+	}
+};
+
+
+var matched, browser,
+	oldInit = jQuery.fn.init,
+	oldParseJSON = jQuery.parseJSON,
+	// Note: XSS check is done below after string is trimmed
+	rquickExpr = /^([^<]*)(<[\w\W]+>)([^>]*)$/;
+
+// $(html) "looks like html" rule change
+jQuery.fn.init = function( selector, context, rootjQuery ) {
+	var match;
+
+	if ( selector && typeof selector === "string" && !jQuery.isPlainObject( context ) &&
+			(match = rquickExpr.exec( jQuery.trim( selector ) )) && match[ 0 ] ) {
+		// This is an HTML string according to the "old" rules; is it still?
+		if ( selector.charAt( 0 ) !== "<" ) {
+			migrateWarn("$(html) HTML strings must start with '<' character");
+		}
+		if ( match[ 3 ] ) {
+			migrateWarn("$(html) HTML text after last tag is ignored");
+		}
+		// Consistently reject any HTML-like string starting with a hash (#9521)
+		// Note that this may break jQuery 1.6.x code that otherwise would work.
+		if ( match[ 0 ].charAt( 0 ) === "#" ) {
+			migrateWarn("HTML string cannot start with a '#' character");
+			jQuery.error("JQMIGRATE: Invalid selector string (XSS)");
+		}
+		// Now process using loose rules; let pre-1.8 play too
+		if ( context && context.context ) {
+			// jQuery object as context; parseHTML expects a DOM object
+			context = context.context;
+		}
+		if ( jQuery.parseHTML ) {
+			return oldInit.call( this, jQuery.parseHTML( match[ 2 ], context, true ),
+					context, rootjQuery );
+		}
+	}
+	return oldInit.apply( this, arguments );
+};
+jQuery.fn.init.prototype = jQuery.fn;
+
+// Let $.parseJSON(falsy_value) return null
+jQuery.parseJSON = function( json ) {
+	if ( !json && json !== null ) {
+		migrateWarn("jQuery.parseJSON requires a valid JSON string");
+		return null;
+	}
+	return oldParseJSON.apply( this, arguments );
+};
+
+jQuery.uaMatch = function( ua ) {
+	ua = ua.toLowerCase();
+
+	var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
+		/(webkit)[ \/]([\w.]+)/.exec( ua ) ||
+		/(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
+		/(msie) ([\w.]+)/.exec( ua ) ||
+		ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
+		[];
+
+	return {
+		browser: match[ 1 ] || "",
+		version: match[ 2 ] || "0"
+	};
+};
+
+// Don't clobber any existing jQuery.browser in case it's different
+if ( !jQuery.browser ) {
+	matched = jQuery.uaMatch( navigator.userAgent );
+	browser = {};
+
+	if ( matched.browser ) {
+		browser[ matched.browser ] = true;
+		browser.version = matched.version;
+	}
+
+	// Chrome is Webkit, but Webkit is also Safari.
+	if ( browser.chrome ) {
+		browser.webkit = true;
+	} else if ( browser.webkit ) {
+		browser.safari = true;
+	}
+
+	jQuery.browser = browser;
+}
+
+// Warn if the code tries to get jQuery.browser
+migrateWarnProp( jQuery, "browser", jQuery.browser, "jQuery.browser is deprecated" );
+
+jQuery.sub = function() {
+	function jQuerySub( selector, context ) {
+		return new jQuerySub.fn.init( selector, context );
+	}
+	jQuery.extend( true, jQuerySub, this );
+	jQuerySub.superclass = this;
+	jQuerySub.fn = jQuerySub.prototype = this();
+	jQuerySub.fn.constructor = jQuerySub;
+	jQuerySub.sub = this.sub;
+	jQuerySub.fn.init = function init( selector, context ) {
+		if ( context && context instanceof jQuery && !(context instanceof jQuerySub) ) {
+			context = jQuerySub( context );
+		}
+
+		return jQuery.fn.init.call( this, selector, context, rootjQuerySub );
+	};
+	jQuerySub.fn.init.prototype = jQuerySub.fn;
+	var rootjQuerySub = jQuerySub(document);
+	migrateWarn( "jQuery.sub() is deprecated" );
+	return jQuerySub;
+};
+
+
+// Ensure that $.ajax gets the new parseJSON defined in core.js
+jQuery.ajaxSetup({
+	converters: {
+		"text json": jQuery.parseJSON
+	}
+});
+
+
+var oldFnData = jQuery.fn.data;
+
+jQuery.fn.data = function( name ) {
+	var ret, evt,
+		elem = this[0];
+
+	// Handles 1.7 which has this behavior and 1.8 which doesn't
+	if ( elem && name === "events" && arguments.length === 1 ) {
+		ret = jQuery.data( elem, name );
+		evt = jQuery._data( elem, name );
+		if ( ( ret === undefined || ret === evt ) && evt !== undefined ) {
+			migrateWarn("Use of jQuery.fn.data('events') is deprecated");
+			return evt;
+		}
+	}
+	return oldFnData.apply( this, arguments );
+};
+
+
+var rscriptType = /\/(java|ecma)script/i,
+	oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;
+
+jQuery.fn.andSelf = function() {
+	migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");
+	return oldSelf.apply( this, arguments );
+};
+
+// Since jQuery.clean is used internally on older versions, we only shim if it's missing
+if ( !jQuery.clean ) {
+	jQuery.clean = function( elems, context, fragment, scripts ) {
+		// Set context per 1.8 logic
+		context = context || document;
+		context = !context.nodeType && context[0] || context;
+		context = context.ownerDocument || context;
+
+		migrateWarn("jQuery.clean() is deprecated");
+
+		var i, elem, handleScript, jsTags,
+			ret = [];
+
+		jQuery.merge( ret, jQuery.buildFragment( elems, context ).childNodes );
+
+		// Complex logic lifted directly from jQuery 1.8
+		if ( fragment ) {
+			// Special handling of each script element
+			handleScript = function( elem ) {
+				// Check if we consider it executable
+				if ( !elem.type || rscriptType.test( elem.type ) ) {
+					// Detach the script and store it in the scripts array (if provided) or the fragment
+					// Return truthy to indicate that it has been handled
+					return scripts ?
+						scripts.push( elem.parentNode ? elem.parentNode.removeChild( elem ) : elem ) :
+						fragment.appendChild( elem );
+				}
+			};
+
+			for ( i = 0; (elem = ret[i]) != null; i++ ) {
+				// Check if we're done after handling an executable script
+				if ( !( jQuery.nodeName( elem, "script" ) && handleScript( elem ) ) ) {
+					// Append to fragment and handle embedded scripts
+					fragment.appendChild( elem );
+					if ( typeof elem.getElementsByTagName !== "undefined" ) {
+						// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration
+						jsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName("script") ), handleScript );
+
+						// Splice the scripts into ret after their former ancestor and advance our index beyond them
+						ret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );
+						i += jsTags.length;
+					}
+				}
+			}
+		}
+
+		return ret;
+	};
+}
+
+var eventAdd = jQuery.event.add,
+	eventRemove = jQuery.event.remove,
+	eventTrigger = jQuery.event.trigger,
+	oldToggle = jQuery.fn.toggle,
+	oldLive = jQuery.fn.live,
+	oldDie = jQuery.fn.die,
+	ajaxEvents = "ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",
+	rajaxEvent = new RegExp( "\\b(?:" + ajaxEvents + ")\\b" ),
+	rhoverHack = /(?:^|\s)hover(\.\S+|)\b/,
+	hoverHack = function( events ) {
+		if ( typeof( events ) !== "string" || jQuery.event.special.hover ) {
+			return events;
+		}
+		if ( rhoverHack.test( events ) ) {
+			migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'");
+		}
+		return events && events.replace( rhoverHack, "mouseenter$1 mouseleave$1" );
+	};
+
+// Event props removed in 1.9, put them back if needed; no practical way to warn them
+if ( jQuery.event.props && jQuery.event.props[ 0 ] !== "attrChange" ) {
+	jQuery.event.props.unshift( "attrChange", "attrName", "relatedNode", "srcElement" );
+}
+
+// Undocumented jQuery.event.handle was "deprecated" in jQuery 1.7
+if ( jQuery.event.dispatch ) {
+	migrateWarnProp( jQuery.event, "handle", jQuery.event.dispatch, "jQuery.event.handle is undocumented and deprecated" );
+}
+
+// Support for 'hover' pseudo-event and ajax event warnings
+jQuery.event.add = function( elem, types, handler, data, selector ){
+	if ( elem !== document && rajaxEvent.test( types ) ) {
+		migrateWarn( "AJAX events should be attached to document: " + types );
+	}
+	eventAdd.call( this, elem, hoverHack( types || "" ), handler, data, selector );
+};
+jQuery.event.remove = function( elem, types, handler, selector, mappedTypes ){
+	eventRemove.call( this, elem, hoverHack( types ) || "", handler, selector, mappedTypes );
+};
+
+jQuery.fn.error = function() {
+	var args = Array.prototype.slice.call( arguments, 0);
+	migrateWarn("jQuery.fn.error() is deprecated");
+	args.splice( 0, 0, "error" );
+	if ( arguments.length ) {
+		return this.bind.apply( this, args );
+	}
+	// error event should not bubble to window, although it does pre-1.7
+	this.triggerHandler.apply( this, args );
+	return this;
+};
+
+jQuery.fn.toggle = function( fn, fn2 ) {
+
+	// Don't mess with animation or css toggles
+	if ( !jQuery.isFunction( fn ) || !jQuery.isFunction( fn2 ) ) {
+		return oldToggle.apply( this, arguments );
+	}
+	migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");
+
+	// Save reference to arguments for access in closure
+	var args = arguments,
+		guid = fn.guid || jQuery.guid++,
+		i = 0,
+		toggler = function( event ) {
+			// Figure out which function to execute
+			var lastToggle = ( jQuery._data( this, "lastToggle" + fn.guid ) || 0 ) % i;
+			jQuery._data( this, "lastToggle" + fn.guid, lastToggle + 1 );
+
+			// Make sure that clicks stop
+			event.preventDefault();
+
+			// and execute the function
+			return args[ lastToggle ].apply( this, arguments ) || false;
+		};
+
+	// link all the functions, so any of them can unbind this click handler
+	toggler.guid = guid;
+	while ( i < args.length ) {
+		args[ i++ ].guid = guid;
+	}
+
+	return this.click( toggler );
+};
+
+jQuery.fn.live = function( types, data, fn ) {
+	migrateWarn("jQuery.fn.live() is deprecated");
+	if ( oldLive ) {
+		return oldLive.apply( this, arguments );
+	}
+	jQuery( this.context ).on( types, this.selector, data, fn );
+	return this;
+};
+
+jQuery.fn.die = function( types, fn ) {
+	migrateWarn("jQuery.fn.die() is deprecated");
+	if ( oldDie ) {
+		return oldDie.apply( this, arguments );
+	}
+	jQuery( this.context ).off( types, this.selector || "**", fn );
+	return this;
+};
+
+// Turn global events into document-triggered events
+jQuery.event.trigger = function( event, data, elem, onlyHandlers  ){
+	if ( !elem && !rajaxEvent.test( event ) ) {
+		migrateWarn( "Global events are undocumented and deprecated" );
+	}
+	return eventTrigger.call( this,  event, data, elem || document, onlyHandlers  );
+};
+jQuery.each( ajaxEvents.split("|"),
+	function( _, name ) {
+		jQuery.event.special[ name ] = {
+			setup: function() {
+				var elem = this;
+
+				// The document needs no shimming; must be !== for oldIE
+				if ( elem !== document ) {
+					jQuery.event.add( document, name + "." + jQuery.guid, function() {
+						jQuery.event.trigger( name, null, elem, true );
+					});
+					jQuery._data( this, name, jQuery.guid++ );
+				}
+				return false;
+			},
+			teardown: function() {
+				if ( this !== document ) {
+					jQuery.event.remove( document, name + "." + jQuery._data( this, name ) );
+				}
+				return false;
+			}
+		};
+	}
+);
+
+
+})( jQuery, window );/*!
+ * jQuery Migrate - v1.2.1 - 2013-05-08
+ * https://github.com/jquery/jquery-migrate
+ * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
+ */
+(function( jQuery, window, undefined ) {
+// See http://bugs.jquery.com/ticket/13335
+// "use strict";
+
+
+var warnedAbout = {};
+
+// List of warnings already given; public read only
+jQuery.migrateWarnings = [];
+
+// Set to true to prevent console output; migrateWarnings still maintained
+// jQuery.migrateMute = false;
+
+// Show a message on the console so devs know we're active
+if ( !jQuery.migrateMute && window.console && window.console.log ) {
+	window.console.log("JQMIGRATE: Logging is active");
+}
+
+// Set to false to disable traces that appear with warnings
+if ( jQuery.migrateTrace === undefined ) {
+	jQuery.migrateTrace = true;
+}
+
+// Forget any warnings we've already given; public
+jQuery.migrateReset = function() {
+	warnedAbout = {};
+	jQuery.migrateWarnings.length = 0;
+};
+
+function migrateWarn( msg) {
+	var console = window.console;
+	if ( !warnedAbout[ msg ] ) {
+		warnedAbout[ msg ] = true;
+		jQuery.migrateWarnings.push( msg );
+		if ( console && console.warn && !jQuery.migrateMute ) {
+			console.warn( "JQMIGRATE: " + msg );
+			if ( jQuery.migrateTrace && console.trace ) {
+				console.trace();
+			}
+		}
+	}
+}
+
+function migrateWarnProp( obj, prop, value, msg ) {
+	if ( Object.defineProperty ) {
+		// On ES5 browsers (non-oldIE), warn if the code tries to get prop;
+		// allow property to be overwritten in case some other plugin wants it
+		try {
+			Object.defineProperty( obj, prop, {
+				configurable: true,
+				enumerable: true,
+				get: function() {
+					migrateWarn( msg );
+					return value;
+				},
+				set: function( newValue ) {
+					migrateWarn( msg );
+					value = newValue;
+				}
+			});
+			return;
+		} catch( err ) {
+			// IE8 is a dope about Object.defineProperty, can't warn there
+		}
+	}
+
+	// Non-ES5 (or broken) browser; just set the property
+	jQuery._definePropertyBroken = true;
+	obj[ prop ] = value;
+}
+
+if ( document.compatMode === "BackCompat" ) {
+	// jQuery has never supported or tested Quirks Mode
+	migrateWarn( "jQuery is not compatible with Quirks Mode" );
+}
+
+
+var attrFn = jQuery( "<input/>", { size: 1 } ).attr("size") && jQuery.attrFn,
+	oldAttr = jQuery.attr,
+	valueAttrGet = jQuery.attrHooks.value && jQuery.attrHooks.value.get ||
+		function() { return null; },
+	valueAttrSet = jQuery.attrHooks.value && jQuery.attrHooks.value.set ||
+		function() { return undefined; },
+	rnoType = /^(?:input|button)$/i,
+	rnoAttrNodeType = /^[238]$/,
+	rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
+	ruseDefault = /^(?:checked|selected)$/i;
+
+// jQuery.attrFn
+migrateWarnProp( jQuery, "attrFn", attrFn || {}, "jQuery.attrFn is deprecated" );
+
+jQuery.attr = function( elem, name, value, pass ) {
+	var lowerName = name.toLowerCase(),
+		nType = elem && elem.nodeType;
+
+	if ( pass ) {
+		// Since pass is used internally, we only warn for new jQuery
+		// versions where there isn't a pass arg in the formal params
+		if ( oldAttr.length < 4 ) {
+			migrateWarn("jQuery.fn.attr( props, pass ) is deprecated");
+		}
+		if ( elem && !rnoAttrNodeType.test( nType ) &&
+			(attrFn ? name in attrFn : jQuery.isFunction(jQuery.fn[name])) ) {
+			return jQuery( elem )[ name ]( value );
+		}
+	}
+
+	// Warn if user tries to set `type`, since it breaks on IE 6/7/8; by checking
+	// for disconnected elements we don't warn on $( "<button>", { type: "button" } ).
+	if ( name === "type" && value !== undefined && rnoType.test( elem.nodeName ) && elem.parentNode ) {
+		migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8");
+	}
+
+	// Restore boolHook for boolean property/attribute synchronization
+	if ( !jQuery.attrHooks[ lowerName ] && rboolean.test( lowerName ) ) {
+		jQuery.attrHooks[ lowerName ] = {
+			get: function( elem, name ) {
+				// Align boolean attributes with corresponding properties
+				// Fall back to attribute presence where some booleans are not supported
+				var attrNode,
+					property = jQuery.prop( elem, name );
+				return property === true || typeof property !== "boolean" &&
+					( attrNode = elem.getAttributeNode(name) ) && attrNode.nodeValue !== false ?
+
+					name.toLowerCase() :
+					undefined;
+			},
+			set: function( elem, value, name ) {
+				var propName;
+				if ( value === false ) {
+					// Remove boolean attributes when set to false
+					jQuery.removeAttr( elem, name );
+				} else {
+					// value is true since we know at this point it's type boolean and not false
+					// Set boolean attributes to the same name and set the DOM property
+					propName = jQuery.propFix[ name ] || name;
+					if ( propName in elem ) {
+						// Only set the IDL specifically if it already exists on the element
+						elem[ propName ] = true;
+					}
+
+					elem.setAttribute( name, name.toLowerCase() );
+				}
+				return name;
+			}
+		};
+
+		// Warn only for attributes that can remain distinct from their properties post-1.9
+		if ( ruseDefault.test( lowerName ) ) {
+			migrateWarn( "jQuery.fn.attr('" + lowerName + "') may use property instead of attribute" );
+		}
+	}
+
+	return oldAttr.call( jQuery, elem, name, value );
+};
+
+// attrHooks: value
+jQuery.attrHooks.value = {
+	get: function( elem, name ) {
+		var nodeName = ( elem.nodeName || "" ).toLowerCase();
+		if ( nodeName === "button" ) {
+			return valueAttrGet.apply( this, arguments );
+		}
+		if ( nodeName !== "input" && nodeName !== "option" ) {
+			migrateWarn("jQuery.fn.attr('value') no longer gets properties");
+		}
+		return name in elem ?
+			elem.value :
+			null;
+	},
+	set: function( elem, value ) {
+		var nodeName = ( elem.nodeName || "" ).toLowerCase();
+		if ( nodeName === "button" ) {
+			return valueAttrSet.apply( this, arguments );
+		}
+		if ( nodeName !== "input" && nodeName !== "option" ) {
+			migrateWarn("jQuery.fn.attr('value', val) no longer sets properties");
+		}
+		// Does not return so that setAttribute is also used
+		elem.value = value;
+	}
+};
+
+
+var matched, browser,
+	oldInit = jQuery.fn.init,
+	oldParseJSON = jQuery.parseJSON,
+	// Note: XSS check is done below after string is trimmed
+	rquickExpr = /^([^<]*)(<[\w\W]+>)([^>]*)$/;
+
+// $(html) "looks like html" rule change
+jQuery.fn.init = function( selector, context, rootjQuery ) {
+	var match;
+
+	if ( selector && typeof selector === "string" && !jQuery.isPlainObject( context ) &&
+			(match = rquickExpr.exec( jQuery.trim( selector ) )) && match[ 0 ] ) {
+		// This is an HTML string according to the "old" rules; is it still?
+		if ( selector.charAt( 0 ) !== "<" ) {
+			migrateWarn("$(html) HTML strings must start with '<' character");
+		}
+		if ( match[ 3 ] ) {
+			migrateWarn("$(html) HTML text after last tag is ignored");
+		}
+		// Consistently reject any HTML-like string starting with a hash (#9521)
+		// Note that this may break jQuery 1.6.x code that otherwise would work.
+		if ( match[ 0 ].charAt( 0 ) === "#" ) {
+			migrateWarn("HTML string cannot start with a '#' character");
+			jQuery.error("JQMIGRATE: Invalid selector string (XSS)");
+		}
+		// Now process using loose rules; let pre-1.8 play too
+		if ( context && context.context ) {
+			// jQuery object as context; parseHTML expects a DOM object
+			context = context.context;
+		}
+		if ( jQuery.parseHTML ) {
+			return oldInit.call( this, jQuery.parseHTML( match[ 2 ], context, true ),
+					context, rootjQuery );
+		}
+	}
+	return oldInit.apply( this, arguments );
+};
+jQuery.fn.init.prototype = jQuery.fn;
+
+// Let $.parseJSON(falsy_value) return null
+jQuery.parseJSON = function( json ) {
+	if ( !json && json !== null ) {
+		migrateWarn("jQuery.parseJSON requires a valid JSON string");
+		return null;
+	}
+	return oldParseJSON.apply( this, arguments );
+};
+
+jQuery.uaMatch = function( ua ) {
+	ua = ua.toLowerCase();
+
+	var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
+		/(webkit)[ \/]([\w.]+)/.exec( ua ) ||
+		/(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
+		/(msie) ([\w.]+)/.exec( ua ) ||
+		ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
+		[];
+
+	return {
+		browser: match[ 1 ] || "",
+		version: match[ 2 ] || "0"
+	};
+};
+
+// Don't clobber any existing jQuery.browser in case it's different
+if ( !jQuery.browser ) {
+	matched = jQuery.uaMatch( navigator.userAgent );
+	browser = {};
+
+	if ( matched.browser ) {
+		browser[ matched.browser ] = true;
+		browser.version = matched.version;
+	}
+
+	// Chrome is Webkit, but Webkit is also Safari.
+	if ( browser.chrome ) {
+		browser.webkit = true;
+	} else if ( browser.webkit ) {
+		browser.safari = true;
+	}
+
+	jQuery.browser = browser;
+}
+
+// Warn if the code tries to get jQuery.browser
+migrateWarnProp( jQuery, "browser", jQuery.browser, "jQuery.browser is deprecated" );
+
+jQuery.sub = function() {
+	function jQuerySub( selector, context ) {
+		return new jQuerySub.fn.init( selector, context );
+	}
+	jQuery.extend( true, jQuerySub, this );
+	jQuerySub.superclass = this;
+	jQuerySub.fn = jQuerySub.prototype = this();
+	jQuerySub.fn.constructor = jQuerySub;
+	jQuerySub.sub = this.sub;
+	jQuerySub.fn.init = function init( selector, context ) {
+		if ( context && context instanceof jQuery && !(context instanceof jQuerySub) ) {
+			context = jQuerySub( context );
+		}
+
+		return jQuery.fn.init.call( this, selector, context, rootjQuerySub );
+	};
+	jQuerySub.fn.init.prototype = jQuerySub.fn;
+	var rootjQuerySub = jQuerySub(document);
+	migrateWarn( "jQuery.sub() is deprecated" );
+	return jQuerySub;
+};
+
+
+// Ensure that $.ajax gets the new parseJSON defined in core.js
+jQuery.ajaxSetup({
+	converters: {
+		"text json": jQuery.parseJSON
+	}
+});
+
+
+var oldFnData = jQuery.fn.data;
+
+jQuery.fn.data = function( name ) {
+	var ret, evt,
+		elem = this[0];
+
+	// Handles 1.7 which has this behavior and 1.8 which doesn't
+	if ( elem && name === "events" && arguments.length === 1 ) {
+		ret = jQuery.data( elem, name );
+		evt = jQuery._data( elem, name );
+		if ( ( ret === undefined || ret === evt ) && evt !== undefined ) {
+			migrateWarn("Use of jQuery.fn.data('events') is deprecated");
+			return evt;
+		}
+	}
+	return oldFnData.apply( this, arguments );
+};
+
+
+var rscriptType = /\/(java|ecma)script/i,
+	oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;
+
+jQuery.fn.andSelf = function() {
+	migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");
+	return oldSelf.apply( this, arguments );
+};
+
+// Since jQuery.clean is used internally on older versions, we only shim if it's missing
+if ( !jQuery.clean ) {
+	jQuery.clean = function( elems, context, fragment, scripts ) {
+		// Set context per 1.8 logic
+		context = context || document;
+		context = !context.nodeType && context[0] || context;
+		context = context.ownerDocument || context;
+
+		migrateWarn("jQuery.clean() is deprecated");
+
+		var i, elem, handleScript, jsTags,
+			ret = [];
+
+		jQuery.merge( ret, jQuery.buildFragment( elems, context ).childNodes );
+
+		// Complex logic lifted directly from jQuery 1.8
+		if ( fragment ) {
+			// Special handling of each script element
+			handleScript = function( elem ) {
+				// Check if we consider it executable
+				if ( !elem.type || rscriptType.test( elem.type ) ) {
+					// Detach the script and store it in the scripts array (if provided) or the fragment
+					// Return truthy to indicate that it has been handled
+					return scripts ?
+						scripts.push( elem.parentNode ? elem.parentNode.removeChild( elem ) : elem ) :
+						fragment.appendChild( elem );
+				}
+			};
+
+			for ( i = 0; (elem = ret[i]) != null; i++ ) {
+				// Check if we're done after handling an executable script
+				if ( !( jQuery.nodeName( elem, "script" ) && handleScript( elem ) ) ) {
+					// Append to fragment and handle embedded scripts
+					fragment.appendChild( elem );
+					if ( typeof elem.getElementsByTagName !== "undefined" ) {
+						// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration
+						jsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName("script") ), handleScript );
+
+						// Splice the scripts into ret after their former ancestor and advance our index beyond them
+						ret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );
+						i += jsTags.length;
+					}
+				}
+			}
+		}
+
+		return ret;
+	};
+}
+
+var eventAdd = jQuery.event.add,
+	eventRemove = jQuery.event.remove,
+	eventTrigger = jQuery.event.trigger,
+	oldToggle = jQuery.fn.toggle,
+	oldLive = jQuery.fn.live,
+	oldDie = jQuery.fn.die,
+	ajaxEvents = "ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",
+	rajaxEvent = new RegExp( "\\b(?:" + ajaxEvents + ")\\b" ),
+	rhoverHack = /(?:^|\s)hover(\.\S+|)\b/,
+	hoverHack = function( events ) {
+		if ( typeof( events ) !== "string" || jQuery.event.special.hover ) {
+			return events;
+		}
+		if ( rhoverHack.test( events ) ) {
+			migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'");
+		}
+		return events && events.replace( rhoverHack, "mouseenter$1 mouseleave$1" );
+	};
+
+// Event props removed in 1.9, put them back if needed; no practical way to warn them
+if ( jQuery.event.props && jQuery.event.props[ 0 ] !== "attrChange" ) {
+	jQuery.event.props.unshift( "attrChange", "attrName", "relatedNode", "srcElement" );
+}
+
+// Undocumented jQuery.event.handle was "deprecated" in jQuery 1.7
+if ( jQuery.event.dispatch ) {
+	migrateWarnProp( jQuery.event, "handle", jQuery.event.dispatch, "jQuery.event.handle is undocumented and deprecated" );
+}
+
+// Support for 'hover' pseudo-event and ajax event warnings
+jQuery.event.add = function( elem, types, handler, data, selector ){
+	if ( elem !== document && rajaxEvent.test( types ) ) {
+		migrateWarn( "AJAX events should be attached to document: " + types );
+	}
+	eventAdd.call( this, elem, hoverHack( types || "" ), handler, data, selector );
+};
+jQuery.event.remove = function( elem, types, handler, selector, mappedTypes ){
+	eventRemove.call( this, elem, hoverHack( types ) || "", handler, selector, mappedTypes );
+};
+
+jQuery.fn.error = function() {
+	var args = Array.prototype.slice.call( arguments, 0);
+	migrateWarn("jQuery.fn.error() is deprecated");
+	args.splice( 0, 0, "error" );
+	if ( arguments.length ) {
+		return this.bind.apply( this, args );
+	}
+	// error event should not bubble to window, although it does pre-1.7
+	this.triggerHandler.apply( this, args );
+	return this;
+};
+
+jQuery.fn.toggle = function( fn, fn2 ) {
+
+	// Don't mess with animation or css toggles
+	if ( !jQuery.isFunction( fn ) || !jQuery.isFunction( fn2 ) ) {
+		return oldToggle.apply( this, arguments );
+	}
+	migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");
+
+	// Save reference to arguments for access in closure
+	var args = arguments,
+		guid = fn.guid || jQuery.guid++,
+		i = 0,
+		toggler = function( event ) {
+			// Figure out which function to execute
+			var lastToggle = ( jQuery._data( this, "lastToggle" + fn.guid ) || 0 ) % i;
+			jQuery._data( this, "lastToggle" + fn.guid, lastToggle + 1 );
+
+			// Make sure that clicks stop
+			event.preventDefault();
+
+			// and execute the function
+			return args[ lastToggle ].apply( this, arguments ) || false;
+		};
+
+	// link all the functions, so any of them can unbind this click handler
+	toggler.guid = guid;
+	while ( i < args.length ) {
+		args[ i++ ].guid = guid;
+	}
+
+	return this.click( toggler );
+};
+
+jQuery.fn.live = function( types, data, fn ) {
+	migrateWarn("jQuery.fn.live() is deprecated");
+	if ( oldLive ) {
+		return oldLive.apply( this, arguments );
+	}
+	jQuery( this.context ).on( types, this.selector, data, fn );
+	return this;
+};
+
+jQuery.fn.die = function( types, fn ) {
+	migrateWarn("jQuery.fn.die() is deprecated");
+	if ( oldDie ) {
+		return oldDie.apply( this, arguments );
+	}
+	jQuery( this.context ).off( types, this.selector || "**", fn );
+	return this;
+};
+
+// Turn global events into document-triggered events
+jQuery.event.trigger = function( event, data, elem, onlyHandlers  ){
+	if ( !elem && !rajaxEvent.test( event ) ) {
+		migrateWarn( "Global events are undocumented and deprecated" );
+	}
+	return eventTrigger.call( this,  event, data, elem || document, onlyHandlers  );
+};
+jQuery.each( ajaxEvents.split("|"),
+	function( _, name ) {
+		jQuery.event.special[ name ] = {
+			setup: function() {
+				var elem = this;
+
+				// The document needs no shimming; must be !== for oldIE
+				if ( elem !== document ) {
+					jQuery.event.add( document, name + "." + jQuery.guid, function() {
+						jQuery.event.trigger( name, null, elem, true );
+					});
+					jQuery._data( this, name, jQuery.guid++ );
+				}
+				return false;
+			},
+			teardown: function() {
+				if ( this !== document ) {
+					jQuery.event.remove( document, name + "." + jQuery._data( this, name ) );
+				}
+				return false;
+			}
+		};
+	}
+);
+
+
+})( jQuery, window );
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/external/jquery/jquery.js elefant-elefant_1_3_11_rc/js/jquery-ui/external/jquery/jquery.js
--- elefant-elefant_1_3_10_beta/js/jquery-ui/external/jquery/jquery.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/external/jquery/jquery.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,9789 @@
+/*!
+ * jQuery JavaScript Library v1.10.2
+ * http://jquery.com/
+ *
+ * Includes Sizzle.js
+ * http://sizzlejs.com/
+ *
+ * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
+ * Released under the MIT license
+ * http://jquery.org/license
+ *
+ * Date: 2013-07-03T13:48Z
+ */
+(function( window, undefined ) {
+
+// Can't do this because several apps including ASP.NET trace
+// the stack via arguments.caller.callee and Firefox dies if
+// you try to trace through "use strict" call chains. (#13335)
+// Support: Firefox 18+
+//"use strict";
+var
+	// The deferred used on DOM ready
+	readyList,
+
+	// A central reference to the root jQuery(document)
+	rootjQuery,
+
+	// Support: IE<10
+	// For `typeof xmlNode.method` instead of `xmlNode.method !== undefined`
+	core_strundefined = typeof undefined,
+
+	// Use the correct document accordingly with window argument (sandbox)
+	location = window.location,
+	document = window.document,
+	docElem = document.documentElement,
+
+	// Map over jQuery in case of overwrite
+	_jQuery = window.jQuery,
+
+	// Map over the $ in case of overwrite
+	_$ = window.$,
+
+	// [[Class]] -> type pairs
+	class2type = {},
+
+	// List of deleted data cache ids, so we can reuse them
+	core_deletedIds = [],
+
+	core_version = "1.10.2",
+
+	// Save a reference to some core methods
+	core_concat = core_deletedIds.concat,
+	core_push = core_deletedIds.push,
+	core_slice = core_deletedIds.slice,
+	core_indexOf = core_deletedIds.indexOf,
+	core_toString = class2type.toString,
+	core_hasOwn = class2type.hasOwnProperty,
+	core_trim = core_version.trim,
+
+	// Define a local copy of jQuery
+	jQuery = function( selector, context ) {
+		// The jQuery object is actually just the init constructor 'enhanced'
+		return new jQuery.fn.init( selector, context, rootjQuery );
+	},
+
+	// Used for matching numbers
+	core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
+
+	// Used for splitting on whitespace
+	core_rnotwhite = /\S+/g,
+
+	// Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)
+	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
+
+	// A simple way to check for HTML strings
+	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
+	// Strict HTML recognition (#11290: must start with <)
+	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
+
+	// Match a standalone tag
+	rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
+
+	// JSON RegExp
+	rvalidchars = /^[\],:{}\s]*$/,
+	rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g,
+	rvalidescape = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
+	rvalidtokens = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
+
+	// Matches dashed string for camelizing
+	rmsPrefix = /^-ms-/,
+	rdashAlpha = /-([\da-z])/gi,
+
+	// Used by jQuery.camelCase as callback to replace()
+	fcamelCase = function( all, letter ) {
+		return letter.toUpperCase();
+	},
+
+	// The ready event handler
+	completed = function( event ) {
+
+		// readyState === "complete" is good enough for us to call the dom ready in oldIE
+		if ( document.addEventListener || event.type === "load" || document.readyState === "complete" ) {
+			detach();
+			jQuery.ready();
+		}
+	},
+	// Clean-up method for dom ready events
+	detach = function() {
+		if ( document.addEventListener ) {
+			document.removeEventListener( "DOMContentLoaded", completed, false );
+			window.removeEventListener( "load", completed, false );
+
+		} else {
+			document.detachEvent( "onreadystatechange", completed );
+			window.detachEvent( "onload", completed );
+		}
+	};
+
+jQuery.fn = jQuery.prototype = {
+	// The current version of jQuery being used
+	jquery: core_version,
+
+	constructor: jQuery,
+	init: function( selector, context, rootjQuery ) {
+		var match, elem;
+
+		// HANDLE: $(""), $(null), $(undefined), $(false)
+		if ( !selector ) {
+			return this;
+		}
+
+		// Handle HTML strings
+		if ( typeof selector === "string" ) {
+			if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
+				// Assume that strings that start and end with <> are HTML and skip the regex check
+				match = [ null, selector, null ];
+
+			} else {
+				match = rquickExpr.exec( selector );
+			}
+
+			// Match html or make sure no context is specified for #id
+			if ( match && (match[1] || !context) ) {
+
+				// HANDLE: $(html) -> $(array)
+				if ( match[1] ) {
+					context = context instanceof jQuery ? context[0] : context;
+
+					// scripts is true for back-compat
+					jQuery.merge( this, jQuery.parseHTML(
+						match[1],
+						context && context.nodeType ? context.ownerDocument || context : document,
+						true
+					) );
+
+					// HANDLE: $(html, props)
+					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
+						for ( match in context ) {
+							// Properties of context are called as methods if possible
+							if ( jQuery.isFunction( this[ match ] ) ) {
+								this[ match ]( context[ match ] );
+
+							// ...and otherwise set as attributes
+							} else {
+								this.attr( match, context[ match ] );
+							}
+						}
+					}
+
+					return this;
+
+				// HANDLE: $(#id)
+				} else {
+					elem = document.getElementById( match[2] );
+
+					// Check parentNode to catch when Blackberry 4.6 returns
+					// nodes that are no longer in the document #6963
+					if ( elem && elem.parentNode ) {
+						// Handle the case where IE and Opera return items
+						// by name instead of ID
+						if ( elem.id !== match[2] ) {
+							return rootjQuery.find( selector );
+						}
+
+						// Otherwise, we inject the element directly into the jQuery object
+						this.length = 1;
+						this[0] = elem;
+					}
+
+					this.context = document;
+					this.selector = selector;
+					return this;
+				}
+
+			// HANDLE: $(expr, $(...))
+			} else if ( !context || context.jquery ) {
+				return ( context || rootjQuery ).find( selector );
+
+			// HANDLE: $(expr, context)
+			// (which is just equivalent to: $(context).find(expr)
+			} else {
+				return this.constructor( context ).find( selector );
+			}
+
+		// HANDLE: $(DOMElement)
+		} else if ( selector.nodeType ) {
+			this.context = this[0] = selector;
+			this.length = 1;
+			return this;
+
+		// HANDLE: $(function)
+		// Shortcut for document ready
+		} else if ( jQuery.isFunction( selector ) ) {
+			return rootjQuery.ready( selector );
+		}
+
+		if ( selector.selector !== undefined ) {
+			this.selector = selector.selector;
+			this.context = selector.context;
+		}
+
+		return jQuery.makeArray( selector, this );
+	},
+
+	// Start with an empty selector
+	selector: "",
+
+	// The default length of a jQuery object is 0
+	length: 0,
+
+	toArray: function() {
+		return core_slice.call( this );
+	},
+
+	// Get the Nth element in the matched element set OR
+	// Get the whole matched element set as a clean array
+	get: function( num ) {
+		return num == null ?
+
+			// Return a 'clean' array
+			this.toArray() :
+
+			// Return just the object
+			( num < 0 ? this[ this.length + num ] : this[ num ] );
+	},
+
+	// Take an array of elements and push it onto the stack
+	// (returning the new matched element set)
+	pushStack: function( elems ) {
+
+		// Build a new jQuery matched element set
+		var ret = jQuery.merge( this.constructor(), elems );
+
+		// Add the old object onto the stack (as a reference)
+		ret.prevObject = this;
+		ret.context = this.context;
+
+		// Return the newly-formed element set
+		return ret;
+	},
+
+	// Execute a callback for every element in the matched set.
+	// (You can seed the arguments with an array of args, but this is
+	// only used internally.)
+	each: function( callback, args ) {
+		return jQuery.each( this, callback, args );
+	},
+
+	ready: function( fn ) {
+		// Add the callback
+		jQuery.ready.promise().done( fn );
+
+		return this;
+	},
+
+	slice: function() {
+		return this.pushStack( core_slice.apply( this, arguments ) );
+	},
+
+	first: function() {
+		return this.eq( 0 );
+	},
+
+	last: function() {
+		return this.eq( -1 );
+	},
+
+	eq: function( i ) {
+		var len = this.length,
+			j = +i + ( i < 0 ? len : 0 );
+		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
+	},
+
+	map: function( callback ) {
+		return this.pushStack( jQuery.map(this, function( elem, i ) {
+			return callback.call( elem, i, elem );
+		}));
+	},
+
+	end: function() {
+		return this.prevObject || this.constructor(null);
+	},
+
+	// For internal use only.
+	// Behaves like an Array's method, not like a jQuery method.
+	push: core_push,
+	sort: [].sort,
+	splice: [].splice
+};
+
+// Give the init function the jQuery prototype for later instantiation
+jQuery.fn.init.prototype = jQuery.fn;
+
+jQuery.extend = jQuery.fn.extend = function() {
+	var src, copyIsArray, copy, name, options, clone,
+		target = arguments[0] || {},
+		i = 1,
+		length = arguments.length,
+		deep = false;
+
+	// Handle a deep copy situation
+	if ( typeof target === "boolean" ) {
+		deep = target;
+		target = arguments[1] || {};
+		// skip the boolean and the target
+		i = 2;
+	}
+
+	// Handle case when target is a string or something (possible in deep copy)
+	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
+		target = {};
+	}
+
+	// extend jQuery itself if only one argument is passed
+	if ( length === i ) {
+		target = this;
+		--i;
+	}
+
+	for ( ; i < length; i++ ) {
+		// Only deal with non-null/undefined values
+		if ( (options = arguments[ i ]) != null ) {
+			// Extend the base object
+			for ( name in options ) {
+				src = target[ name ];
+				copy = options[ name ];
+
+				// Prevent never-ending loop
+				if ( target === copy ) {
+					continue;
+				}
+
+				// Recurse if we're merging plain objects or arrays
+				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
+					if ( copyIsArray ) {
+						copyIsArray = false;
+						clone = src && jQuery.isArray(src) ? src : [];
+
+					} else {
+						clone = src && jQuery.isPlainObject(src) ? src : {};
+					}
+
+					// Never move original objects, clone them
+					target[ name ] = jQuery.extend( deep, clone, copy );
+
+				// Don't bring in undefined values
+				} else if ( copy !== undefined ) {
+					target[ name ] = copy;
+				}
+			}
+		}
+	}
+
+	// Return the modified object
+	return target;
+};
+
+jQuery.extend({
+	// Unique for each copy of jQuery on the page
+	// Non-digits removed to match rinlinejQuery
+	expando: "jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" ),
+
+	noConflict: function( deep ) {
+		if ( window.$ === jQuery ) {
+			window.$ = _$;
+		}
+
+		if ( deep && window.jQuery === jQuery ) {
+			window.jQuery = _jQuery;
+		}
+
+		return jQuery;
+	},
+
+	// Is the DOM ready to be used? Set to true once it occurs.
+	isReady: false,
+
+	// A counter to track how many items to wait for before
+	// the ready event fires. See #6781
+	readyWait: 1,
+
+	// Hold (or release) the ready event
+	holdReady: function( hold ) {
+		if ( hold ) {
+			jQuery.readyWait++;
+		} else {
+			jQuery.ready( true );
+		}
+	},
+
+	// Handle when the DOM is ready
+	ready: function( wait ) {
+
+		// Abort if there are pending holds or we're already ready
+		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
+			return;
+		}
+
+		// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
+		if ( !document.body ) {
+			return setTimeout( jQuery.ready );
+		}
+
+		// Remember that the DOM is ready
+		jQuery.isReady = true;
+
+		// If a normal DOM Ready event fired, decrement, and wait if need be
+		if ( wait !== true && --jQuery.readyWait > 0 ) {
+			return;
+		}
+
+		// If there are functions bound, to execute
+		readyList.resolveWith( document, [ jQuery ] );
+
+		// Trigger any bound ready events
+		if ( jQuery.fn.trigger ) {
+			jQuery( document ).trigger("ready").off("ready");
+		}
+	},
+
+	// See test/unit/core.js for details concerning isFunction.
+	// Since version 1.3, DOM methods and functions like alert
+	// aren't supported. They return false on IE (#2968).
+	isFunction: function( obj ) {
+		return jQuery.type(obj) === "function";
+	},
+
+	isArray: Array.isArray || function( obj ) {
+		return jQuery.type(obj) === "array";
+	},
+
+	isWindow: function( obj ) {
+		/* jshint eqeqeq: false */
+		return obj != null && obj == obj.window;
+	},
+
+	isNumeric: function( obj ) {
+		return !isNaN( parseFloat(obj) ) && isFinite( obj );
+	},
+
+	type: function( obj ) {
+		if ( obj == null ) {
+			return String( obj );
+		}
+		return typeof obj === "object" || typeof obj === "function" ?
+			class2type[ core_toString.call(obj) ] || "object" :
+			typeof obj;
+	},
+
+	isPlainObject: function( obj ) {
+		var key;
+
+		// Must be an Object.
+		// Because of IE, we also have to check the presence of the constructor property.
+		// Make sure that DOM nodes and window objects don't pass through, as well
+		if ( !obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
+			return false;
+		}
+
+		try {
+			// Not own constructor property must be Object
+			if ( obj.constructor &&
+				!core_hasOwn.call(obj, "constructor") &&
+				!core_hasOwn.call(obj.constructor.prototype, "isPrototypeOf") ) {
+				return false;
+			}
+		} catch ( e ) {
+			// IE8,9 Will throw exceptions on certain host objects #9897
+			return false;
+		}
+
+		// Support: IE<9
+		// Handle iteration over inherited properties before own properties.
+		if ( jQuery.support.ownLast ) {
+			for ( key in obj ) {
+				return core_hasOwn.call( obj, key );
+			}
+		}
+
+		// Own properties are enumerated firstly, so to speed up,
+		// if last one is own, then all properties are own.
+		for ( key in obj ) {}
+
+		return key === undefined || core_hasOwn.call( obj, key );
+	},
+
+	isEmptyObject: function( obj ) {
+		var name;
+		for ( name in obj ) {
+			return false;
+		}
+		return true;
+	},
+
+	error: function( msg ) {
+		throw new Error( msg );
+	},
+
+	// data: string of html
+	// context (optional): If specified, the fragment will be created in this context, defaults to document
+	// keepScripts (optional): If true, will include scripts passed in the html string
+	parseHTML: function( data, context, keepScripts ) {
+		if ( !data || typeof data !== "string" ) {
+			return null;
+		}
+		if ( typeof context === "boolean" ) {
+			keepScripts = context;
+			context = false;
+		}
+		context = context || document;
+
+		var parsed = rsingleTag.exec( data ),
+			scripts = !keepScripts && [];
+
+		// Single tag
+		if ( parsed ) {
+			return [ context.createElement( parsed[1] ) ];
+		}
+
+		parsed = jQuery.buildFragment( [ data ], context, scripts );
+		if ( scripts ) {
+			jQuery( scripts ).remove();
+		}
+		return jQuery.merge( [], parsed.childNodes );
+	},
+
+	parseJSON: function( data ) {
+		// Attempt to parse using the native JSON parser first
+		if ( window.JSON && window.JSON.parse ) {
+			return window.JSON.parse( data );
+		}
+
+		if ( data === null ) {
+			return data;
+		}
+
+		if ( typeof data === "string" ) {
+
+			// Make sure leading/trailing whitespace is removed (IE can't handle it)
+			data = jQuery.trim( data );
+
+			if ( data ) {
+				// Make sure the incoming data is actual JSON
+				// Logic borrowed from http://json.org/json2.js
+				if ( rvalidchars.test( data.replace( rvalidescape, "@" )
+					.replace( rvalidtokens, "]" )
+					.replace( rvalidbraces, "")) ) {
+
+					return ( new Function( "return " + data ) )();
+				}
+			}
+		}
+
+		jQuery.error( "Invalid JSON: " + data );
+	},
+
+	// Cross-browser xml parsing
+	parseXML: function( data ) {
+		var xml, tmp;
+		if ( !data || typeof data !== "string" ) {
+			return null;
+		}
+		try {
+			if ( window.DOMParser ) { // Standard
+				tmp = new DOMParser();
+				xml = tmp.parseFromString( data , "text/xml" );
+			} else { // IE
+				xml = new ActiveXObject( "Microsoft.XMLDOM" );
+				xml.async = "false";
+				xml.loadXML( data );
+			}
+		} catch( e ) {
+			xml = undefined;
+		}
+		if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
+			jQuery.error( "Invalid XML: " + data );
+		}
+		return xml;
+	},
+
+	noop: function() {},
+
+	// Evaluates a script in a global context
+	// Workarounds based on findings by Jim Driscoll
+	// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
+	globalEval: function( data ) {
+		if ( data && jQuery.trim( data ) ) {
+			// We use execScript on Internet Explorer
+			// We use an anonymous function so that context is window
+			// rather than jQuery in Firefox
+			( window.execScript || function( data ) {
+				window[ "eval" ].call( window, data );
+			} )( data );
+		}
+	},
+
+	// Convert dashed to camelCase; used by the css and data modules
+	// Microsoft forgot to hump their vendor prefix (#9572)
+	camelCase: function( string ) {
+		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
+	},
+
+	nodeName: function( elem, name ) {
+		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
+	},
+
+	// args is for internal usage only
+	each: function( obj, callback, args ) {
+		var value,
+			i = 0,
+			length = obj.length,
+			isArray = isArraylike( obj );
+
+		if ( args ) {
+			if ( isArray ) {
+				for ( ; i < length; i++ ) {
+					value = callback.apply( obj[ i ], args );
+
+					if ( value === false ) {
+						break;
+					}
+				}
+			} else {
+				for ( i in obj ) {
+					value = callback.apply( obj[ i ], args );
+
+					if ( value === false ) {
+						break;
+					}
+				}
+			}
+
+		// A special, fast, case for the most common use of each
+		} else {
+			if ( isArray ) {
+				for ( ; i < length; i++ ) {
+					value = callback.call( obj[ i ], i, obj[ i ] );
+
+					if ( value === false ) {
+						break;
+					}
+				}
+			} else {
+				for ( i in obj ) {
+					value = callback.call( obj[ i ], i, obj[ i ] );
+
+					if ( value === false ) {
+						break;
+					}
+				}
+			}
+		}
+
+		return obj;
+	},
+
+	// Use native String.trim function wherever possible
+	trim: core_trim && !core_trim.call("\uFEFF\xA0") ?
+		function( text ) {
+			return text == null ?
+				"" :
+				core_trim.call( text );
+		} :
+
+		// Otherwise use our own trimming functionality
+		function( text ) {
+			return text == null ?
+				"" :
+				( text + "" ).replace( rtrim, "" );
+		},
+
+	// results is for internal usage only
+	makeArray: function( arr, results ) {
+		var ret = results || [];
+
+		if ( arr != null ) {
+			if ( isArraylike( Object(arr) ) ) {
+				jQuery.merge( ret,
+					typeof arr === "string" ?
+					[ arr ] : arr
+				);
+			} else {
+				core_push.call( ret, arr );
+			}
+		}
+
+		return ret;
+	},
+
+	inArray: function( elem, arr, i ) {
+		var len;
+
+		if ( arr ) {
+			if ( core_indexOf ) {
+				return core_indexOf.call( arr, elem, i );
+			}
+
+			len = arr.length;
+			i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;
+
+			for ( ; i < len; i++ ) {
+				// Skip accessing in sparse arrays
+				if ( i in arr && arr[ i ] === elem ) {
+					return i;
+				}
+			}
+		}
+
+		return -1;
+	},
+
+	merge: function( first, second ) {
+		var l = second.length,
+			i = first.length,
+			j = 0;
+
+		if ( typeof l === "number" ) {
+			for ( ; j < l; j++ ) {
+				first[ i++ ] = second[ j ];
+			}
+		} else {
+			while ( second[j] !== undefined ) {
+				first[ i++ ] = second[ j++ ];
+			}
+		}
+
+		first.length = i;
+
+		return first;
+	},
+
+	grep: function( elems, callback, inv ) {
+		var retVal,
+			ret = [],
+			i = 0,
+			length = elems.length;
+		inv = !!inv;
+
+		// Go through the array, only saving the items
+		// that pass the validator function
+		for ( ; i < length; i++ ) {
+			retVal = !!callback( elems[ i ], i );
+			if ( inv !== retVal ) {
+				ret.push( elems[ i ] );
+			}
+		}
+
+		return ret;
+	},
+
+	// arg is for internal usage only
+	map: function( elems, callback, arg ) {
+		var value,
+			i = 0,
+			length = elems.length,
+			isArray = isArraylike( elems ),
+			ret = [];
+
+		// Go through the array, translating each of the items to their
+		if ( isArray ) {
+			for ( ; i < length; i++ ) {
+				value = callback( elems[ i ], i, arg );
+
+				if ( value != null ) {
+					ret[ ret.length ] = value;
+				}
+			}
+
+		// Go through every key on the object,
+		} else {
+			for ( i in elems ) {
+				value = callback( elems[ i ], i, arg );
+
+				if ( value != null ) {
+					ret[ ret.length ] = value;
+				}
+			}
+		}
+
+		// Flatten any nested arrays
+		return core_concat.apply( [], ret );
+	},
+
+	// A global GUID counter for objects
+	guid: 1,
+
+	// Bind a function to a context, optionally partially applying any
+	// arguments.
+	proxy: function( fn, context ) {
+		var args, proxy, tmp;
+
+		if ( typeof context === "string" ) {
+			tmp = fn[ context ];
+			context = fn;
+			fn = tmp;
+		}
+
+		// Quick check to determine if target is callable, in the spec
+		// this throws a TypeError, but we will just return undefined.
+		if ( !jQuery.isFunction( fn ) ) {
+			return undefined;
+		}
+
+		// Simulated bind
+		args = core_slice.call( arguments, 2 );
+		proxy = function() {
+			return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
+		};
+
+		// Set the guid of unique handler to the same of original handler, so it can be removed
+		proxy.guid = fn.guid = fn.guid || jQuery.guid++;
+
+		return proxy;
+	},
+
+	// Multifunctional method to get and set values of a collection
+	// The value/s can optionally be executed if it's a function
+	access: function( elems, fn, key, value, chainable, emptyGet, raw ) {
+		var i = 0,
+			length = elems.length,
+			bulk = key == null;
+
+		// Sets many values
+		if ( jQuery.type( key ) === "object" ) {
+			chainable = true;
+			for ( i in key ) {
+				jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
+			}
+
+		// Sets one value
+		} else if ( value !== undefined ) {
+			chainable = true;
+
+			if ( !jQuery.isFunction( value ) ) {
+				raw = true;
+			}
+
+			if ( bulk ) {
+				// Bulk operations run against the entire set
+				if ( raw ) {
+					fn.call( elems, value );
+					fn = null;
+
+				// ...except when executing function values
+				} else {
+					bulk = fn;
+					fn = function( elem, key, value ) {
+						return bulk.call( jQuery( elem ), value );
+					};
+				}
+			}
+
+			if ( fn ) {
+				for ( ; i < length; i++ ) {
+					fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
+				}
+			}
+		}
+
+		return chainable ?
+			elems :
+
+			// Gets
+			bulk ?
+				fn.call( elems ) :
+				length ? fn( elems[0], key ) : emptyGet;
+	},
+
+	now: function() {
+		return ( new Date() ).getTime();
+	},
+
+	// A method for quickly swapping in/out CSS properties to get correct calculations.
+	// Note: this method belongs to the css module but it's needed here for the support module.
+	// If support gets modularized, this method should be moved back to the css module.
+	swap: function( elem, options, callback, args ) {
+		var ret, name,
+			old = {};
+
+		// Remember the old values, and insert the new ones
+		for ( name in options ) {
+			old[ name ] = elem.style[ name ];
+			elem.style[ name ] = options[ name ];
+		}
+
+		ret = callback.apply( elem, args || [] );
+
+		// Revert the old values
+		for ( name in options ) {
+			elem.style[ name ] = old[ name ];
+		}
+
+		return ret;
+	}
+});
+
+jQuery.ready.promise = function( obj ) {
+	if ( !readyList ) {
+
+		readyList = jQuery.Deferred();
+
+		// Catch cases where $(document).ready() is called after the browser event has already occurred.
+		// we once tried to use readyState "interactive" here, but it caused issues like the one
+		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
+		if ( document.readyState === "complete" ) {
+			// Handle it asynchronously to allow scripts the opportunity to delay ready
+			setTimeout( jQuery.ready );
+
+		// Standards-based browsers support DOMContentLoaded
+		} else if ( document.addEventListener ) {
+			// Use the handy event callback
+			document.addEventListener( "DOMContentLoaded", completed, false );
+
+			// A fallback to window.onload, that will always work
+			window.addEventListener( "load", completed, false );
+
+		// If IE event model is used
+		} else {
+			// Ensure firing before onload, maybe late but safe also for iframes
+			document.attachEvent( "onreadystatechange", completed );
+
+			// A fallback to window.onload, that will always work
+			window.attachEvent( "onload", completed );
+
+			// If IE and not a frame
+			// continually check to see if the document is ready
+			var top = false;
+
+			try {
+				top = window.frameElement == null && document.documentElement;
+			} catch(e) {}
+
+			if ( top && top.doScroll ) {
+				(function doScrollCheck() {
+					if ( !jQuery.isReady ) {
+
+						try {
+							// Use the trick by Diego Perini
+							// http://javascript.nwbox.com/IEContentLoaded/
+							top.doScroll("left");
+						} catch(e) {
+							return setTimeout( doScrollCheck, 50 );
+						}
+
+						// detach all dom ready events
+						detach();
+
+						// and execute any waiting functions
+						jQuery.ready();
+					}
+				})();
+			}
+		}
+	}
+	return readyList.promise( obj );
+};
+
+// Populate the class2type map
+jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
+	class2type[ "[object " + name + "]" ] = name.toLowerCase();
+});
+
+function isArraylike( obj ) {
+	var length = obj.length,
+		type = jQuery.type( obj );
+
+	if ( jQuery.isWindow( obj ) ) {
+		return false;
+	}
+
+	if ( obj.nodeType === 1 && length ) {
+		return true;
+	}
+
+	return type === "array" || type !== "function" &&
+		( length === 0 ||
+		typeof length === "number" && length > 0 && ( length - 1 ) in obj );
+}
+
+// All jQuery objects should point back to these
+rootjQuery = jQuery(document);
+/*!
+ * Sizzle CSS Selector Engine v1.10.2
+ * http://sizzlejs.com/
+ *
+ * Copyright 2013 jQuery Foundation, Inc. and other contributors
+ * Released under the MIT license
+ * http://jquery.org/license
+ *
+ * Date: 2013-07-03
+ */
+(function( window, undefined ) {
+
+var i,
+	support,
+	cachedruns,
+	Expr,
+	getText,
+	isXML,
+	compile,
+	outermostContext,
+	sortInput,
+
+	// Local document vars
+	setDocument,
+	document,
+	docElem,
+	documentIsHTML,
+	rbuggyQSA,
+	rbuggyMatches,
+	matches,
+	contains,
+
+	// Instance-specific data
+	expando = "sizzle" + -(new Date()),
+	preferredDoc = window.document,
+	dirruns = 0,
+	done = 0,
+	classCache = createCache(),
+	tokenCache = createCache(),
+	compilerCache = createCache(),
+	hasDuplicate = false,
+	sortOrder = function( a, b ) {
+		if ( a === b ) {
+			hasDuplicate = true;
+			return 0;
+		}
+		return 0;
+	},
+
+	// General-purpose constants
+	strundefined = typeof undefined,
+	MAX_NEGATIVE = 1 << 31,
+
+	// Instance methods
+	hasOwn = ({}).hasOwnProperty,
+	arr = [],
+	pop = arr.pop,
+	push_native = arr.push,
+	push = arr.push,
+	slice = arr.slice,
+	// Use a stripped-down indexOf if we can't use a native one
+	indexOf = arr.indexOf || function( elem ) {
+		var i = 0,
+			len = this.length;
+		for ( ; i < len; i++ ) {
+			if ( this[i] === elem ) {
+				return i;
+			}
+		}
+		return -1;
+	},
+
+	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
+
+	// Regular expressions
+
+	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
+	whitespace = "[\\x20\\t\\r\\n\\f]",
+	// http://www.w3.org/TR/css3-syntax/#characters
+	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
+
+	// Loosely modeled on CSS identifier characters
+	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
+	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
+	identifier = characterEncoding.replace( "w", "w#" ),
+
+	// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors
+	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace +
+		"*(?:([*^$|!~]?=)" + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]",
+
+	// Prefer arguments quoted,
+	//   then not containing pseudos/brackets,
+	//   then attribute selectors/non-parenthetical expressions,
+	//   then anything else
+	// These preferences are here to reduce the number of selectors
+	//   needing tokenize in the PSEUDO preFilter
+	pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace( 3, 8 ) + ")*)|.*)\\)|)",
+
+	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
+	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),
+
+	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
+	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),
+
+	rsibling = new RegExp( whitespace + "*[+~]" ),
+	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*)" + whitespace + "*\\]", "g" ),
+
+	rpseudo = new RegExp( pseudos ),
+	ridentifier = new RegExp( "^" + identifier + "$" ),
+
+	matchExpr = {
+		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
+		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
+		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
+		"ATTR": new RegExp( "^" + attributes ),
+		"PSEUDO": new RegExp( "^" + pseudos ),
+		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
+			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
+			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
+		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
+		// For use in libraries implementing .is()
+		// We use this for POS matching in `select`
+		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
+			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
+	},
+
+	rnative = /^[^{]+\{\s*\[native \w/,
+
+	// Easily-parseable/retrievable ID or TAG or CLASS selectors
+	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
+
+	rinputs = /^(?:input|select|textarea|button)$/i,
+	rheader = /^h\d$/i,
+
+	rescape = /'|\\/g,
+
+	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
+	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
+	funescape = function( _, escaped, escapedWhitespace ) {
+		var high = "0x" + escaped - 0x10000;
+		// NaN means non-codepoint
+		// Support: Firefox
+		// Workaround erroneous numeric interpretation of +"0x"
+		return high !== high || escapedWhitespace ?
+			escaped :
+			// BMP codepoint
+			high < 0 ?
+				String.fromCharCode( high + 0x10000 ) :
+				// Supplemental Plane codepoint (surrogate pair)
+				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
+	};
+
+// Optimize for push.apply( _, NodeList )
+try {
+	push.apply(
+		(arr = slice.call( preferredDoc.childNodes )),
+		preferredDoc.childNodes
+	);
+	// Support: Android<4.0
+	// Detect silently failing push.apply
+	arr[ preferredDoc.childNodes.length ].nodeType;
+} catch ( e ) {
+	push = { apply: arr.length ?
+
+		// Leverage slice if possible
+		function( target, els ) {
+			push_native.apply( target, slice.call(els) );
+		} :
+
+		// Support: IE<9
+		// Otherwise append directly
+		function( target, els ) {
+			var j = target.length,
+				i = 0;
+			// Can't trust NodeList.length
+			while ( (target[j++] = els[i++]) ) {}
+			target.length = j - 1;
+		}
+	};
+}
+
+function Sizzle( selector, context, results, seed ) {
+	var match, elem, m, nodeType,
+		// QSA vars
+		i, groups, old, nid, newContext, newSelector;
+
+	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
+		setDocument( context );
+	}
+
+	context = context || document;
+	results = results || [];
+
+	if ( !selector || typeof selector !== "string" ) {
+		return results;
+	}
+
+	if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
+		return [];
+	}
+
+	if ( documentIsHTML && !seed ) {
+
+		// Shortcuts
+		if ( (match = rquickExpr.exec( selector )) ) {
+			// Speed-up: Sizzle("#ID")
+			if ( (m = match[1]) ) {
+				if ( nodeType === 9 ) {
+					elem = context.getElementById( m );
+					// Check parentNode to catch when Blackberry 4.6 returns
+					// nodes that are no longer in the document #6963
+					if ( elem && elem.parentNode ) {
+						// Handle the case where IE, Opera, and Webkit return items
+						// by name instead of ID
+						if ( elem.id === m ) {
+							results.push( elem );
+							return results;
+						}
+					} else {
+						return results;
+					}
+				} else {
+					// Context is not a document
+					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
+						contains( context, elem ) && elem.id === m ) {
+						results.push( elem );
+						return results;
+					}
+				}
+
+			// Speed-up: Sizzle("TAG")
+			} else if ( match[2] ) {
+				push.apply( results, context.getElementsByTagName( selector ) );
+				return results;
+
+			// Speed-up: Sizzle(".CLASS")
+			} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {
+				push.apply( results, context.getElementsByClassName( m ) );
+				return results;
+			}
+		}
+
+		// QSA path
+		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
+			nid = old = expando;
+			newContext = context;
+			newSelector = nodeType === 9 && selector;
+
+			// qSA works strangely on Element-rooted queries
+			// We can work around this by specifying an extra ID on the root
+			// and working up from there (Thanks to Andrew Dupont for the technique)
+			// IE 8 doesn't work on object elements
+			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
+				groups = tokenize( selector );
+
+				if ( (old = context.getAttribute("id")) ) {
+					nid = old.replace( rescape, "\\$&" );
+				} else {
+					context.setAttribute( "id", nid );
+				}
+				nid = "[id='" + nid + "'] ";
+
+				i = groups.length;
+				while ( i-- ) {
+					groups[i] = nid + toSelector( groups[i] );
+				}
+				newContext = rsibling.test( selector ) && context.parentNode || context;
+				newSelector = groups.join(",");
+			}
+
+			if ( newSelector ) {
+				try {
+					push.apply( results,
+						newContext.querySelectorAll( newSelector )
+					);
+					return results;
+				} catch(qsaError) {
+				} finally {
+					if ( !old ) {
+						context.removeAttribute("id");
+					}
+				}
+			}
+		}
+	}
+
+	// All others
+	return select( selector.replace( rtrim, "$1" ), context, results, seed );
+}
+
+/**
+ * Create key-value caches of limited size
+ * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
+ *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
+ *	deleting the oldest entry
+ */
+function createCache() {
+	var keys = [];
+
+	function cache( key, value ) {
+		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
+		if ( keys.push( key += " " ) > Expr.cacheLength ) {
+			// Only keep the most recent entries
+			delete cache[ keys.shift() ];
+		}
+		return (cache[ key ] = value);
+	}
+	return cache;
+}
+
+/**
+ * Mark a function for special use by Sizzle
+ * @param {Function} fn The function to mark
+ */
+function markFunction( fn ) {
+	fn[ expando ] = true;
+	return fn;
+}
+
+/**
+ * Support testing using an element
+ * @param {Function} fn Passed the created div and expects a boolean result
+ */
+function assert( fn ) {
+	var div = document.createElement("div");
+
+	try {
+		return !!fn( div );
+	} catch (e) {
+		return false;
+	} finally {
+		// Remove from its parent by default
+		if ( div.parentNode ) {
+			div.parentNode.removeChild( div );
+		}
+		// release memory in IE
+		div = null;
+	}
+}
+
+/**
+ * Adds the same handler for all of the specified attrs
+ * @param {String} attrs Pipe-separated list of attributes
+ * @param {Function} handler The method that will be applied
+ */
+function addHandle( attrs, handler ) {
+	var arr = attrs.split("|"),
+		i = attrs.length;
+
+	while ( i-- ) {
+		Expr.attrHandle[ arr[i] ] = handler;
+	}
+}
+
+/**
+ * Checks document order of two siblings
+ * @param {Element} a
+ * @param {Element} b
+ * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
+ */
+function siblingCheck( a, b ) {
+	var cur = b && a,
+		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
+			( ~b.sourceIndex || MAX_NEGATIVE ) -
+			( ~a.sourceIndex || MAX_NEGATIVE );
+
+	// Use IE sourceIndex if available on both nodes
+	if ( diff ) {
+		return diff;
+	}
+
+	// Check if b follows a
+	if ( cur ) {
+		while ( (cur = cur.nextSibling) ) {
+			if ( cur === b ) {
+				return -1;
+			}
+		}
+	}
+
+	return a ? 1 : -1;
+}
+
+/**
+ * Returns a function to use in pseudos for input types
+ * @param {String} type
+ */
+function createInputPseudo( type ) {
+	return function( elem ) {
+		var name = elem.nodeName.toLowerCase();
+		return name === "input" && elem.type === type;
+	};
+}
+
+/**
+ * Returns a function to use in pseudos for buttons
+ * @param {String} type
+ */
+function createButtonPseudo( type ) {
+	return function( elem ) {
+		var name = elem.nodeName.toLowerCase();
+		return (name === "input" || name === "button") && elem.type === type;
+	};
+}
+
+/**
+ * Returns a function to use in pseudos for positionals
+ * @param {Function} fn
+ */
+function createPositionalPseudo( fn ) {
+	return markFunction(function( argument ) {
+		argument = +argument;
+		return markFunction(function( seed, matches ) {
+			var j,
+				matchIndexes = fn( [], seed.length, argument ),
+				i = matchIndexes.length;
+
+			// Match elements found at the specified indexes
+			while ( i-- ) {
+				if ( seed[ (j = matchIndexes[i]) ] ) {
+					seed[j] = !(matches[j] = seed[j]);
+				}
+			}
+		});
+	});
+}
+
+/**
+ * Detect xml
+ * @param {Element|Object} elem An element or a document
+ */
+isXML = Sizzle.isXML = function( elem ) {
+	// documentElement is verified for cases where it doesn't yet exist
+	// (such as loading iframes in IE - #4833)
+	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
+	return documentElement ? documentElement.nodeName !== "HTML" : false;
+};
+
+// Expose support vars for convenience
+support = Sizzle.support = {};
+
+/**
+ * Sets document-related variables once based on the current document
+ * @param {Element|Object} [doc] An element or document object to use to set the document
+ * @returns {Object} Returns the current document
+ */
+setDocument = Sizzle.setDocument = function( node ) {
+	var doc = node ? node.ownerDocument || node : preferredDoc,
+		parent = doc.defaultView;
+
+	// If no document and documentElement is available, return
+	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
+		return document;
+	}
+
+	// Set our document
+	document = doc;
+	docElem = doc.documentElement;
+
+	// Support tests
+	documentIsHTML = !isXML( doc );
+
+	// Support: IE>8
+	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
+	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
+	// IE6-8 do not support the defaultView property so parent will be undefined
+	if ( parent && parent.attachEvent && parent !== parent.top ) {
+		parent.attachEvent( "onbeforeunload", function() {
+			setDocument();
+		});
+	}
+
+	/* Attributes
+	---------------------------------------------------------------------- */
+
+	// Support: IE<8
+	// Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)
+	support.attributes = assert(function( div ) {
+		div.className = "i";
+		return !div.getAttribute("className");
+	});
+
+	/* getElement(s)By*
+	---------------------------------------------------------------------- */
+
+	// Check if getElementsByTagName("*") returns only elements
+	support.getElementsByTagName = assert(function( div ) {
+		div.appendChild( doc.createComment("") );
+		return !div.getElementsByTagName("*").length;
+	});
+
+	// Check if getElementsByClassName can be trusted
+	support.getElementsByClassName = assert(function( div ) {
+		div.innerHTML = "<div class='a'></div><div class='a i'></div>";
+
+		// Support: Safari<4
+		// Catch class over-caching
+		div.firstChild.className = "i";
+		// Support: Opera<10
+		// Catch gEBCN failure to find non-leading classes
+		return div.getElementsByClassName("i").length === 2;
+	});
+
+	// Support: IE<10
+	// Check if getElementById returns elements by name
+	// The broken getElementById methods don't pick up programatically-set names,
+	// so use a roundabout getElementsByName test
+	support.getById = assert(function( div ) {
+		docElem.appendChild( div ).id = expando;
+		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
+	});
+
+	// ID find and filter
+	if ( support.getById ) {
+		Expr.find["ID"] = function( id, context ) {
+			if ( typeof context.getElementById !== strundefined && documentIsHTML ) {
+				var m = context.getElementById( id );
+				// Check parentNode to catch when Blackberry 4.6 returns
+				// nodes that are no longer in the document #6963
+				return m && m.parentNode ? [m] : [];
+			}
+		};
+		Expr.filter["ID"] = function( id ) {
+			var attrId = id.replace( runescape, funescape );
+			return function( elem ) {
+				return elem.getAttribute("id") === attrId;
+			};
+		};
+	} else {
+		// Support: IE6/7
+		// getElementById is not reliable as a find shortcut
+		delete Expr.find["ID"];
+
+		Expr.filter["ID"] =  function( id ) {
+			var attrId = id.replace( runescape, funescape );
+			return function( elem ) {
+				var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
+				return node && node.value === attrId;
+			};
+		};
+	}
+
+	// Tag
+	Expr.find["TAG"] = support.getElementsByTagName ?
+		function( tag, context ) {
+			if ( typeof context.getElementsByTagName !== strundefined ) {
+				return context.getElementsByTagName( tag );
+			}
+		} :
+		function( tag, context ) {
+			var elem,
+				tmp = [],
+				i = 0,
+				results = context.getElementsByTagName( tag );
+
+			// Filter out possible comments
+			if ( tag === "*" ) {
+				while ( (elem = results[i++]) ) {
+					if ( elem.nodeType === 1 ) {
+						tmp.push( elem );
+					}
+				}
+
+				return tmp;
+			}
+			return results;
+		};
+
+	// Class
+	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
+		if ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {
+			return context.getElementsByClassName( className );
+		}
+	};
+
+	/* QSA/matchesSelector
+	---------------------------------------------------------------------- */
+
+	// QSA and matchesSelector support
+
+	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
+	rbuggyMatches = [];
+
+	// qSa(:focus) reports false when true (Chrome 21)
+	// We allow this because of a bug in IE8/9 that throws an error
+	// whenever `document.activeElement` is accessed on an iframe
+	// So, we allow :focus to pass through QSA all the time to avoid the IE error
+	// See http://bugs.jquery.com/ticket/13378
+	rbuggyQSA = [];
+
+	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
+		// Build QSA regex
+		// Regex strategy adopted from Diego Perini
+		assert(function( div ) {
+			// Select is set to empty string on purpose
+			// This is to test IE's treatment of not explicitly
+			// setting a boolean content attribute,
+			// since its presence should be enough
+			// http://bugs.jquery.com/ticket/12359
+			div.innerHTML = "<select><option selected=''></option></select>";
+
+			// Support: IE8
+			// Boolean attributes and "value" are not treated correctly
+			if ( !div.querySelectorAll("[selected]").length ) {
+				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
+			}
+
+			// Webkit/Opera - :checked should return selected option elements
+			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
+			// IE8 throws error here and will not see later tests
+			if ( !div.querySelectorAll(":checked").length ) {
+				rbuggyQSA.push(":checked");
+			}
+		});
+
+		assert(function( div ) {
+
+			// Support: Opera 10-12/IE8
+			// ^= $= *= and empty values
+			// Should not select anything
+			// Support: Windows 8 Native Apps
+			// The type attribute is restricted during .innerHTML assignment
+			var input = doc.createElement("input");
+			input.setAttribute( "type", "hidden" );
+			div.appendChild( input ).setAttribute( "t", "" );
+
+			if ( div.querySelectorAll("[t^='']").length ) {
+				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
+			}
+
+			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
+			// IE8 throws error here and will not see later tests
+			if ( !div.querySelectorAll(":enabled").length ) {
+				rbuggyQSA.push( ":enabled", ":disabled" );
+			}
+
+			// Opera 10-11 does not throw on post-comma invalid pseudos
+			div.querySelectorAll("*,:x");
+			rbuggyQSA.push(",.*:");
+		});
+	}
+
+	if ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||
+		docElem.mozMatchesSelector ||
+		docElem.oMatchesSelector ||
+		docElem.msMatchesSelector) )) ) {
+
+		assert(function( div ) {
+			// Check to see if it's possible to do matchesSelector
+			// on a disconnected node (IE 9)
+			support.disconnectedMatch = matches.call( div, "div" );
+
+			// This should fail with an exception
+			// Gecko does not error, returns false instead
+			matches.call( div, "[s!='']:x" );
+			rbuggyMatches.push( "!=", pseudos );
+		});
+	}
+
+	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
+	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );
+
+	/* Contains
+	---------------------------------------------------------------------- */
+
+	// Element contains another
+	// Purposefully does not implement inclusive descendent
+	// As in, an element does not contain itself
+	contains = rnative.test( docElem.contains ) || docElem.compareDocumentPosition ?
+		function( a, b ) {
+			var adown = a.nodeType === 9 ? a.documentElement : a,
+				bup = b && b.parentNode;
+			return a === bup || !!( bup && bup.nodeType === 1 && (
+				adown.contains ?
+					adown.contains( bup ) :
+					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
+			));
+		} :
+		function( a, b ) {
+			if ( b ) {
+				while ( (b = b.parentNode) ) {
+					if ( b === a ) {
+						return true;
+					}
+				}
+			}
+			return false;
+		};
+
+	/* Sorting
+	---------------------------------------------------------------------- */
+
+	// Document order sorting
+	sortOrder = docElem.compareDocumentPosition ?
+	function( a, b ) {
+
+		// Flag for duplicate removal
+		if ( a === b ) {
+			hasDuplicate = true;
+			return 0;
+		}
+
+		var compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b );
+
+		if ( compare ) {
+			// Disconnected nodes
+			if ( compare & 1 ||
+				(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {
+
+				// Choose the first element that is related to our preferred document
+				if ( a === doc || contains(preferredDoc, a) ) {
+					return -1;
+				}
+				if ( b === doc || contains(preferredDoc, b) ) {
+					return 1;
+				}
+
+				// Maintain original order
+				return sortInput ?
+					( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
+					0;
+			}
+
+			return compare & 4 ? -1 : 1;
+		}
+
+		// Not directly comparable, sort on existence of method
+		return a.compareDocumentPosition ? -1 : 1;
+	} :
+	function( a, b ) {
+		var cur,
+			i = 0,
+			aup = a.parentNode,
+			bup = b.parentNode,
+			ap = [ a ],
+			bp = [ b ];
+
+		// Exit early if the nodes are identical
+		if ( a === b ) {
+			hasDuplicate = true;
+			return 0;
+
+		// Parentless nodes are either documents or disconnected
+		} else if ( !aup || !bup ) {
+			return a === doc ? -1 :
+				b === doc ? 1 :
+				aup ? -1 :
+				bup ? 1 :
+				sortInput ?
+				( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
+				0;
+
+		// If the nodes are siblings, we can do a quick check
+		} else if ( aup === bup ) {
+			return siblingCheck( a, b );
+		}
+
+		// Otherwise we need full lists of their ancestors for comparison
+		cur = a;
+		while ( (cur = cur.parentNode) ) {
+			ap.unshift( cur );
+		}
+		cur = b;
+		while ( (cur = cur.parentNode) ) {
+			bp.unshift( cur );
+		}
+
+		// Walk down the tree looking for a discrepancy
+		while ( ap[i] === bp[i] ) {
+			i++;
+		}
+
+		return i ?
+			// Do a sibling check if the nodes have a common ancestor
+			siblingCheck( ap[i], bp[i] ) :
+
+			// Otherwise nodes in our document sort first
+			ap[i] === preferredDoc ? -1 :
+			bp[i] === preferredDoc ? 1 :
+			0;
+	};
+
+	return doc;
+};
+
+Sizzle.matches = function( expr, elements ) {
+	return Sizzle( expr, null, null, elements );
+};
+
+Sizzle.matchesSelector = function( elem, expr ) {
+	// Set document vars if needed
+	if ( ( elem.ownerDocument || elem ) !== document ) {
+		setDocument( elem );
+	}
+
+	// Make sure that attribute selectors are quoted
+	expr = expr.replace( rattributeQuotes, "='$1']" );
+
+	if ( support.matchesSelector && documentIsHTML &&
+		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
+		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {
+
+		try {
+			var ret = matches.call( elem, expr );
+
+			// IE 9's matchesSelector returns false on disconnected nodes
+			if ( ret || support.disconnectedMatch ||
+					// As well, disconnected nodes are said to be in a document
+					// fragment in IE 9
+					elem.document && elem.document.nodeType !== 11 ) {
+				return ret;
+			}
+		} catch(e) {}
+	}
+
+	return Sizzle( expr, document, null, [elem] ).length > 0;
+};
+
+Sizzle.contains = function( context, elem ) {
+	// Set document vars if needed
+	if ( ( context.ownerDocument || context ) !== document ) {
+		setDocument( context );
+	}
+	return contains( context, elem );
+};
+
+Sizzle.attr = function( elem, name ) {
+	// Set document vars if needed
+	if ( ( elem.ownerDocument || elem ) !== document ) {
+		setDocument( elem );
+	}
+
+	var fn = Expr.attrHandle[ name.toLowerCase() ],
+		// Don't get fooled by Object.prototype properties (jQuery #13807)
+		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
+			fn( elem, name, !documentIsHTML ) :
+			undefined;
+
+	return val === undefined ?
+		support.attributes || !documentIsHTML ?
+			elem.getAttribute( name ) :
+			(val = elem.getAttributeNode(name)) && val.specified ?
+				val.value :
+				null :
+		val;
+};
+
+Sizzle.error = function( msg ) {
+	throw new Error( "Syntax error, unrecognized expression: " + msg );
+};
+
+/**
+ * Document sorting and removing duplicates
+ * @param {ArrayLike} results
+ */
+Sizzle.uniqueSort = function( results ) {
+	var elem,
+		duplicates = [],
+		j = 0,
+		i = 0;
+
+	// Unless we *know* we can detect duplicates, assume their presence
+	hasDuplicate = !support.detectDuplicates;
+	sortInput = !support.sortStable && results.slice( 0 );
+	results.sort( sortOrder );
+
+	if ( hasDuplicate ) {
+		while ( (elem = results[i++]) ) {
+			if ( elem === results[ i ] ) {
+				j = duplicates.push( i );
+			}
+		}
+		while ( j-- ) {
+			results.splice( duplicates[ j ], 1 );
+		}
+	}
+
+	return results;
+};
+
+/**
+ * Utility function for retrieving the text value of an array of DOM nodes
+ * @param {Array|Element} elem
+ */
+getText = Sizzle.getText = function( elem ) {
+	var node,
+		ret = "",
+		i = 0,
+		nodeType = elem.nodeType;
+
+	if ( !nodeType ) {
+		// If no nodeType, this is expected to be an array
+		for ( ; (node = elem[i]); i++ ) {
+			// Do not traverse comment nodes
+			ret += getText( node );
+		}
+	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
+		// Use textContent for elements
+		// innerText usage removed for consistency of new lines (see #11153)
+		if ( typeof elem.textContent === "string" ) {
+			return elem.textContent;
+		} else {
+			// Traverse its children
+			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
+				ret += getText( elem );
+			}
+		}
+	} else if ( nodeType === 3 || nodeType === 4 ) {
+		return elem.nodeValue;
+	}
+	// Do not include comment or processing instruction nodes
+
+	return ret;
+};
+
+Expr = Sizzle.selectors = {
+
+	// Can be adjusted by the user
+	cacheLength: 50,
+
+	createPseudo: markFunction,
+
+	match: matchExpr,
+
+	attrHandle: {},
+
+	find: {},
+
+	relative: {
+		">": { dir: "parentNode", first: true },
+		" ": { dir: "parentNode" },
+		"+": { dir: "previousSibling", first: true },
+		"~": { dir: "previousSibling" }
+	},
+
+	preFilter: {
+		"ATTR": function( match ) {
+			match[1] = match[1].replace( runescape, funescape );
+
+			// Move the given value to match[3] whether quoted or unquoted
+			match[3] = ( match[4] || match[5] || "" ).replace( runescape, funescape );
+
+			if ( match[2] === "~=" ) {
+				match[3] = " " + match[3] + " ";
+			}
+
+			return match.slice( 0, 4 );
+		},
+
+		"CHILD": function( match ) {
+			/* matches from matchExpr["CHILD"]
+				1 type (only|nth|...)
+				2 what (child|of-type)
+				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
+				4 xn-component of xn+y argument ([+-]?\d*n|)
+				5 sign of xn-component
+				6 x of xn-component
+				7 sign of y-component
+				8 y of y-component
+			*/
+			match[1] = match[1].toLowerCase();
+
+			if ( match[1].slice( 0, 3 ) === "nth" ) {
+				// nth-* requires argument
+				if ( !match[3] ) {
+					Sizzle.error( match[0] );
+				}
+
+				// numeric x and y parameters for Expr.filter.CHILD
+				// remember that false/true cast respectively to 0/1
+				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
+				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );
+
+			// other types prohibit arguments
+			} else if ( match[3] ) {
+				Sizzle.error( match[0] );
+			}
+
+			return match;
+		},
+
+		"PSEUDO": function( match ) {
+			var excess,
+				unquoted = !match[5] && match[2];
+
+			if ( matchExpr["CHILD"].test( match[0] ) ) {
+				return null;
+			}
+
+			// Accept quoted arguments as-is
+			if ( match[3] && match[4] !== undefined ) {
+				match[2] = match[4];
+
+			// Strip excess characters from unquoted arguments
+			} else if ( unquoted && rpseudo.test( unquoted ) &&
+				// Get excess from tokenize (recursively)
+				(excess = tokenize( unquoted, true )) &&
+				// advance to the next closing parenthesis
+				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {
+
+				// excess is a negative index
+				match[0] = match[0].slice( 0, excess );
+				match[2] = unquoted.slice( 0, excess );
+			}
+
+			// Return only captures needed by the pseudo filter method (type and argument)
+			return match.slice( 0, 3 );
+		}
+	},
+
+	filter: {
+
+		"TAG": function( nodeNameSelector ) {
+			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
+			return nodeNameSelector === "*" ?
+				function() { return true; } :
+				function( elem ) {
+					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
+				};
+		},
+
+		"CLASS": function( className ) {
+			var pattern = classCache[ className + " " ];
+
+			return pattern ||
+				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
+				classCache( className, function( elem ) {
+					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "" );
+				});
+		},
+
+		"ATTR": function( name, operator, check ) {
+			return function( elem ) {
+				var result = Sizzle.attr( elem, name );
+
+				if ( result == null ) {
+					return operator === "!=";
+				}
+				if ( !operator ) {
+					return true;
+				}
+
+				result += "";
+
+				return operator === "=" ? result === check :
+					operator === "!=" ? result !== check :
+					operator === "^=" ? check && result.indexOf( check ) === 0 :
+					operator === "*=" ? check && result.indexOf( check ) > -1 :
+					operator === "$=" ? check && result.slice( -check.length ) === check :
+					operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
+					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
+					false;
+			};
+		},
+
+		"CHILD": function( type, what, argument, first, last ) {
+			var simple = type.slice( 0, 3 ) !== "nth",
+				forward = type.slice( -4 ) !== "last",
+				ofType = what === "of-type";
+
+			return first === 1 && last === 0 ?
+
+				// Shortcut for :nth-*(n)
+				function( elem ) {
+					return !!elem.parentNode;
+				} :
+
+				function( elem, context, xml ) {
+					var cache, outerCache, node, diff, nodeIndex, start,
+						dir = simple !== forward ? "nextSibling" : "previousSibling",
+						parent = elem.parentNode,
+						name = ofType && elem.nodeName.toLowerCase(),
+						useCache = !xml && !ofType;
+
+					if ( parent ) {
+
+						// :(first|last|only)-(child|of-type)
+						if ( simple ) {
+							while ( dir ) {
+								node = elem;
+								while ( (node = node[ dir ]) ) {
+									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
+										return false;
+									}
+								}
+								// Reverse direction for :only-* (if we haven't yet done so)
+								start = dir = type === "only" && !start && "nextSibling";
+							}
+							return true;
+						}
+
+						start = [ forward ? parent.firstChild : parent.lastChild ];
+
+						// non-xml :nth-child(...) stores cache data on `parent`
+						if ( forward && useCache ) {
+							// Seek `elem` from a previously-cached index
+							outerCache = parent[ expando ] || (parent[ expando ] = {});
+							cache = outerCache[ type ] || [];
+							nodeIndex = cache[0] === dirruns && cache[1];
+							diff = cache[0] === dirruns && cache[2];
+							node = nodeIndex && parent.childNodes[ nodeIndex ];
+
+							while ( (node = ++nodeIndex && node && node[ dir ] ||
+
+								// Fallback to seeking `elem` from the start
+								(diff = nodeIndex = 0) || start.pop()) ) {
+
+								// When found, cache indexes on `parent` and break
+								if ( node.nodeType === 1 && ++diff && node === elem ) {
+									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
+									break;
+								}
+							}
+
+						// Use previously-cached element index if available
+						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
+							diff = cache[1];
+
+						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
+						} else {
+							// Use the same loop as above to seek `elem` from the start
+							while ( (node = ++nodeIndex && node && node[ dir ] ||
+								(diff = nodeIndex = 0) || start.pop()) ) {
+
+								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
+									// Cache the index of each encountered element
+									if ( useCache ) {
+										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
+									}
+
+									if ( node === elem ) {
+										break;
+									}
+								}
+							}
+						}
+
+						// Incorporate the offset, then check against cycle size
+						diff -= last;
+						return diff === first || ( diff % first === 0 && diff / first >= 0 );
+					}
+				};
+		},
+
+		"PSEUDO": function( pseudo, argument ) {
+			// pseudo-class names are case-insensitive
+			// http://www.w3.org/TR/selectors/#pseudo-classes
+			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
+			// Remember that setFilters inherits from pseudos
+			var args,
+				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
+					Sizzle.error( "unsupported pseudo: " + pseudo );
+
+			// The user may use createPseudo to indicate that
+			// arguments are needed to create the filter function
+			// just as Sizzle does
+			if ( fn[ expando ] ) {
+				return fn( argument );
+			}
+
+			// But maintain support for old signatures
+			if ( fn.length > 1 ) {
+				args = [ pseudo, pseudo, "", argument ];
+				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
+					markFunction(function( seed, matches ) {
+						var idx,
+							matched = fn( seed, argument ),
+							i = matched.length;
+						while ( i-- ) {
+							idx = indexOf.call( seed, matched[i] );
+							seed[ idx ] = !( matches[ idx ] = matched[i] );
+						}
+					}) :
+					function( elem ) {
+						return fn( elem, 0, args );
+					};
+			}
+
+			return fn;
+		}
+	},
+
+	pseudos: {
+		// Potentially complex pseudos
+		"not": markFunction(function( selector ) {
+			// Trim the selector passed to compile
+			// to avoid treating leading and trailing
+			// spaces as combinators
+			var input = [],
+				results = [],
+				matcher = compile( selector.replace( rtrim, "$1" ) );
+
+			return matcher[ expando ] ?
+				markFunction(function( seed, matches, context, xml ) {
+					var elem,
+						unmatched = matcher( seed, null, xml, [] ),
+						i = seed.length;
+
+					// Match elements unmatched by `matcher`
+					while ( i-- ) {
+						if ( (elem = unmatched[i]) ) {
+							seed[i] = !(matches[i] = elem);
+						}
+					}
+				}) :
+				function( elem, context, xml ) {
+					input[0] = elem;
+					matcher( input, null, xml, results );
+					return !results.pop();
+				};
+		}),
+
+		"has": markFunction(function( selector ) {
+			return function( elem ) {
+				return Sizzle( selector, elem ).length > 0;
+			};
+		}),
+
+		"contains": markFunction(function( text ) {
+			return function( elem ) {
+				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
+			};
+		}),
+
+		// "Whether an element is represented by a :lang() selector
+		// is based solely on the element's language value
+		// being equal to the identifier C,
+		// or beginning with the identifier C immediately followed by "-".
+		// The matching of C against the element's language value is performed case-insensitively.
+		// The identifier C does not have to be a valid language name."
+		// http://www.w3.org/TR/selectors/#lang-pseudo
+		"lang": markFunction( function( lang ) {
+			// lang value must be a valid identifier
+			if ( !ridentifier.test(lang || "") ) {
+				Sizzle.error( "unsupported lang: " + lang );
+			}
+			lang = lang.replace( runescape, funescape ).toLowerCase();
+			return function( elem ) {
+				var elemLang;
+				do {
+					if ( (elemLang = documentIsHTML ?
+						elem.lang :
+						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {
+
+						elemLang = elemLang.toLowerCase();
+						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
+					}
+				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
+				return false;
+			};
+		}),
+
+		// Miscellaneous
+		"target": function( elem ) {
+			var hash = window.location && window.location.hash;
+			return hash && hash.slice( 1 ) === elem.id;
+		},
+
+		"root": function( elem ) {
+			return elem === docElem;
+		},
+
+		"focus": function( elem ) {
+			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
+		},
+
+		// Boolean properties
+		"enabled": function( elem ) {
+			return elem.disabled === false;
+		},
+
+		"disabled": function( elem ) {
+			return elem.disabled === true;
+		},
+
+		"checked": function( elem ) {
+			// In CSS3, :checked should return both checked and selected elements
+			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
+			var nodeName = elem.nodeName.toLowerCase();
+			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
+		},
+
+		"selected": function( elem ) {
+			// Accessing this property makes selected-by-default
+			// options in Safari work properly
+			if ( elem.parentNode ) {
+				elem.parentNode.selectedIndex;
+			}
+
+			return elem.selected === true;
+		},
+
+		// Contents
+		"empty": function( elem ) {
+			// http://www.w3.org/TR/selectors/#empty-pseudo
+			// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),
+			//   not comment, processing instructions, or others
+			// Thanks to Diego Perini for the nodeName shortcut
+			//   Greater than "@" means alpha characters (specifically not starting with "#" or "?")
+			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
+				if ( elem.nodeName > "@" || elem.nodeType === 3 || elem.nodeType === 4 ) {
+					return false;
+				}
+			}
+			return true;
+		},
+
+		"parent": function( elem ) {
+			return !Expr.pseudos["empty"]( elem );
+		},
+
+		// Element/input types
+		"header": function( elem ) {
+			return rheader.test( elem.nodeName );
+		},
+
+		"input": function( elem ) {
+			return rinputs.test( elem.nodeName );
+		},
+
+		"button": function( elem ) {
+			var name = elem.nodeName.toLowerCase();
+			return name === "input" && elem.type === "button" || name === "button";
+		},
+
+		"text": function( elem ) {
+			var attr;
+			// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
+			// use getAttribute instead to test this case
+			return elem.nodeName.toLowerCase() === "input" &&
+				elem.type === "text" &&
+				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === elem.type );
+		},
+
+		// Position-in-collection
+		"first": createPositionalPseudo(function() {
+			return [ 0 ];
+		}),
+
+		"last": createPositionalPseudo(function( matchIndexes, length ) {
+			return [ length - 1 ];
+		}),
+
+		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
+			return [ argument < 0 ? argument + length : argument ];
+		}),
+
+		"even": createPositionalPseudo(function( matchIndexes, length ) {
+			var i = 0;
+			for ( ; i < length; i += 2 ) {
+				matchIndexes.push( i );
+			}
+			return matchIndexes;
+		}),
+
+		"odd": createPositionalPseudo(function( matchIndexes, length ) {
+			var i = 1;
+			for ( ; i < length; i += 2 ) {
+				matchIndexes.push( i );
+			}
+			return matchIndexes;
+		}),
+
+		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
+			var i = argument < 0 ? argument + length : argument;
+			for ( ; --i >= 0; ) {
+				matchIndexes.push( i );
+			}
+			return matchIndexes;
+		}),
+
+		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
+			var i = argument < 0 ? argument + length : argument;
+			for ( ; ++i < length; ) {
+				matchIndexes.push( i );
+			}
+			return matchIndexes;
+		})
+	}
+};
+
+Expr.pseudos["nth"] = Expr.pseudos["eq"];
+
+// Add button/input type pseudos
+for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
+	Expr.pseudos[ i ] = createInputPseudo( i );
+}
+for ( i in { submit: true, reset: true } ) {
+	Expr.pseudos[ i ] = createButtonPseudo( i );
+}
+
+// Easy API for creating new setFilters
+function setFilters() {}
+setFilters.prototype = Expr.filters = Expr.pseudos;
+Expr.setFilters = new setFilters();
+
+function tokenize( selector, parseOnly ) {
+	var matched, match, tokens, type,
+		soFar, groups, preFilters,
+		cached = tokenCache[ selector + " " ];
+
+	if ( cached ) {
+		return parseOnly ? 0 : cached.slice( 0 );
+	}
+
+	soFar = selector;
+	groups = [];
+	preFilters = Expr.preFilter;
+
+	while ( soFar ) {
+
+		// Comma and first run
+		if ( !matched || (match = rcomma.exec( soFar )) ) {
+			if ( match ) {
+				// Don't consume trailing commas as valid
+				soFar = soFar.slice( match[0].length ) || soFar;
+			}
+			groups.push( tokens = [] );
+		}
+
+		matched = false;
+
+		// Combinators
+		if ( (match = rcombinators.exec( soFar )) ) {
+			matched = match.shift();
+			tokens.push({
+				value: matched,
+				// Cast descendant combinators to space
+				type: match[0].replace( rtrim, " " )
+			});
+			soFar = soFar.slice( matched.length );
+		}
+
+		// Filters
+		for ( type in Expr.filter ) {
+			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
+				(match = preFilters[ type ]( match ))) ) {
+				matched = match.shift();
+				tokens.push({
+					value: matched,
+					type: type,
+					matches: match
+				});
+				soFar = soFar.slice( matched.length );
+			}
+		}
+
+		if ( !matched ) {
+			break;
+		}
+	}
+
+	// Return the length of the invalid excess
+	// if we're just parsing
+	// Otherwise, throw an error or return tokens
+	return parseOnly ?
+		soFar.length :
+		soFar ?
+			Sizzle.error( selector ) :
+			// Cache the tokens
+			tokenCache( selector, groups ).slice( 0 );
+}
+
+function toSelector( tokens ) {
+	var i = 0,
+		len = tokens.length,
+		selector = "";
+	for ( ; i < len; i++ ) {
+		selector += tokens[i].value;
+	}
+	return selector;
+}
+
+function addCombinator( matcher, combinator, base ) {
+	var dir = combinator.dir,
+		checkNonElements = base && dir === "parentNode",
+		doneName = done++;
+
+	return combinator.first ?
+		// Check against closest ancestor/preceding element
+		function( elem, context, xml ) {
+			while ( (elem = elem[ dir ]) ) {
+				if ( elem.nodeType === 1 || checkNonElements ) {
+					return matcher( elem, context, xml );
+				}
+			}
+		} :
+
+		// Check against all ancestor/preceding elements
+		function( elem, context, xml ) {
+			var data, cache, outerCache,
+				dirkey = dirruns + " " + doneName;
+
+			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
+			if ( xml ) {
+				while ( (elem = elem[ dir ]) ) {
+					if ( elem.nodeType === 1 || checkNonElements ) {
+						if ( matcher( elem, context, xml ) ) {
+							return true;
+						}
+					}
+				}
+			} else {
+				while ( (elem = elem[ dir ]) ) {
+					if ( elem.nodeType === 1 || checkNonElements ) {
+						outerCache = elem[ expando ] || (elem[ expando ] = {});
+						if ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {
+							if ( (data = cache[1]) === true || data === cachedruns ) {
+								return data === true;
+							}
+						} else {
+							cache = outerCache[ dir ] = [ dirkey ];
+							cache[1] = matcher( elem, context, xml ) || cachedruns;
+							if ( cache[1] === true ) {
+								return true;
+							}
+						}
+					}
+				}
+			}
+		};
+}
+
+function elementMatcher( matchers ) {
+	return matchers.length > 1 ?
+		function( elem, context, xml ) {
+			var i = matchers.length;
+			while ( i-- ) {
+				if ( !matchers[i]( elem, context, xml ) ) {
+					return false;
+				}
+			}
+			return true;
+		} :
+		matchers[0];
+}
+
+function condense( unmatched, map, filter, context, xml ) {
+	var elem,
+		newUnmatched = [],
+		i = 0,
+		len = unmatched.length,
+		mapped = map != null;
+
+	for ( ; i < len; i++ ) {
+		if ( (elem = unmatched[i]) ) {
+			if ( !filter || filter( elem, context, xml ) ) {
+				newUnmatched.push( elem );
+				if ( mapped ) {
+					map.push( i );
+				}
+			}
+		}
+	}
+
+	return newUnmatched;
+}
+
+function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
+	if ( postFilter && !postFilter[ expando ] ) {
+		postFilter = setMatcher( postFilter );
+	}
+	if ( postFinder && !postFinder[ expando ] ) {
+		postFinder = setMatcher( postFinder, postSelector );
+	}
+	return markFunction(function( seed, results, context, xml ) {
+		var temp, i, elem,
+			preMap = [],
+			postMap = [],
+			preexisting = results.length,
+
+			// Get initial elements from seed or context
+			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),
+
+			// Prefilter to get matcher input, preserving a map for seed-results synchronization
+			matcherIn = preFilter && ( seed || !selector ) ?
+				condense( elems, preMap, preFilter, context, xml ) :
+				elems,
+
+			matcherOut = matcher ?
+				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
+				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?
+
+					// ...intermediate processing is necessary
+					[] :
+
+					// ...otherwise use results directly
+					results :
+				matcherIn;
+
+		// Find primary matches
+		if ( matcher ) {
+			matcher( matcherIn, matcherOut, context, xml );
+		}
+
+		// Apply postFilter
+		if ( postFilter ) {
+			temp = condense( matcherOut, postMap );
+			postFilter( temp, [], context, xml );
+
+			// Un-match failing elements by moving them back to matcherIn
+			i = temp.length;
+			while ( i-- ) {
+				if ( (elem = temp[i]) ) {
+					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
+				}
+			}
+		}
+
+		if ( seed ) {
+			if ( postFinder || preFilter ) {
+				if ( postFinder ) {
+					// Get the final matcherOut by condensing this intermediate into postFinder contexts
+					temp = [];
+					i = matcherOut.length;
+					while ( i-- ) {
+						if ( (elem = matcherOut[i]) ) {
+							// Restore matcherIn since elem is not yet a final match
+							temp.push( (matcherIn[i] = elem) );
+						}
+					}
+					postFinder( null, (matcherOut = []), temp, xml );
+				}
+
+				// Move matched elements from seed to results to keep them synchronized
+				i = matcherOut.length;
+				while ( i-- ) {
+					if ( (elem = matcherOut[i]) &&
+						(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {
+
+						seed[temp] = !(results[temp] = elem);
+					}
+				}
+			}
+
+		// Add elements to results, through postFinder if defined
+		} else {
+			matcherOut = condense(
+				matcherOut === results ?
+					matcherOut.splice( preexisting, matcherOut.length ) :
+					matcherOut
+			);
+			if ( postFinder ) {
+				postFinder( null, results, matcherOut, xml );
+			} else {
+				push.apply( results, matcherOut );
+			}
+		}
+	});
+}
+
+function matcherFromTokens( tokens ) {
+	var checkContext, matcher, j,
+		len = tokens.length,
+		leadingRelative = Expr.relative[ tokens[0].type ],
+		implicitRelative = leadingRelative || Expr.relative[" "],
+		i = leadingRelative ? 1 : 0,
+
+		// The foundational matcher ensures that elements are reachable from top-level context(s)
+		matchContext = addCombinator( function( elem ) {
+			return elem === checkContext;
+		}, implicitRelative, true ),
+		matchAnyContext = addCombinator( function( elem ) {
+			return indexOf.call( checkContext, elem ) > -1;
+		}, implicitRelative, true ),
+		matchers = [ function( elem, context, xml ) {
+			return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
+				(checkContext = context).nodeType ?
+					matchContext( elem, context, xml ) :
+					matchAnyContext( elem, context, xml ) );
+		} ];
+
+	for ( ; i < len; i++ ) {
+		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
+			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
+		} else {
+			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );
+
+			// Return special upon seeing a positional matcher
+			if ( matcher[ expando ] ) {
+				// Find the next relative operator (if any) for proper handling
+				j = ++i;
+				for ( ; j < len; j++ ) {
+					if ( Expr.relative[ tokens[j].type ] ) {
+						break;
+					}
+				}
+				return setMatcher(
+					i > 1 && elementMatcher( matchers ),
+					i > 1 && toSelector(
+						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
+						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
+					).replace( rtrim, "$1" ),
+					matcher,
+					i < j && matcherFromTokens( tokens.slice( i, j ) ),
+					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
+					j < len && toSelector( tokens )
+				);
+			}
+			matchers.push( matcher );
+		}
+	}
+
+	return elementMatcher( matchers );
+}
+
+function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
+	// A counter to specify which element is currently being matched
+	var matcherCachedRuns = 0,
+		bySet = setMatchers.length > 0,
+		byElement = elementMatchers.length > 0,
+		superMatcher = function( seed, context, xml, results, expandContext ) {
+			var elem, j, matcher,
+				setMatched = [],
+				matchedCount = 0,
+				i = "0",
+				unmatched = seed && [],
+				outermost = expandContext != null,
+				contextBackup = outermostContext,
+				// We must always have either seed elements or context
+				elems = seed || byElement && Expr.find["TAG"]( "*", expandContext && context.parentNode || context ),
+				// Use integer dirruns iff this is the outermost matcher
+				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);
+
+			if ( outermost ) {
+				outermostContext = context !== document && context;
+				cachedruns = matcherCachedRuns;
+			}
+
+			// Add elements passing elementMatchers directly to results
+			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
+			for ( ; (elem = elems[i]) != null; i++ ) {
+				if ( byElement && elem ) {
+					j = 0;
+					while ( (matcher = elementMatchers[j++]) ) {
+						if ( matcher( elem, context, xml ) ) {
+							results.push( elem );
+							break;
+						}
+					}
+					if ( outermost ) {
+						dirruns = dirrunsUnique;
+						cachedruns = ++matcherCachedRuns;
+					}
+				}
+
+				// Track unmatched elements for set filters
+				if ( bySet ) {
+					// They will have gone through all possible matchers
+					if ( (elem = !matcher && elem) ) {
+						matchedCount--;
+					}
+
+					// Lengthen the array for every element, matched or not
+					if ( seed ) {
+						unmatched.push( elem );
+					}
+				}
+			}
+
+			// Apply set filters to unmatched elements
+			matchedCount += i;
+			if ( bySet && i !== matchedCount ) {
+				j = 0;
+				while ( (matcher = setMatchers[j++]) ) {
+					matcher( unmatched, setMatched, context, xml );
+				}
+
+				if ( seed ) {
+					// Reintegrate element matches to eliminate the need for sorting
+					if ( matchedCount > 0 ) {
+						while ( i-- ) {
+							if ( !(unmatched[i] || setMatched[i]) ) {
+								setMatched[i] = pop.call( results );
+							}
+						}
+					}
+
+					// Discard index placeholder values to get only actual matches
+					setMatched = condense( setMatched );
+				}
+
+				// Add matches to results
+				push.apply( results, setMatched );
+
+				// Seedless set matches succeeding multiple successful matchers stipulate sorting
+				if ( outermost && !seed && setMatched.length > 0 &&
+					( matchedCount + setMatchers.length ) > 1 ) {
+
+					Sizzle.uniqueSort( results );
+				}
+			}
+
+			// Override manipulation of globals by nested matchers
+			if ( outermost ) {
+				dirruns = dirrunsUnique;
+				outermostContext = contextBackup;
+			}
+
+			return unmatched;
+		};
+
+	return bySet ?
+		markFunction( superMatcher ) :
+		superMatcher;
+}
+
+compile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {
+	var i,
+		setMatchers = [],
+		elementMatchers = [],
+		cached = compilerCache[ selector + " " ];
+
+	if ( !cached ) {
+		// Generate a function of recursive functions that can be used to check each element
+		if ( !group ) {
+			group = tokenize( selector );
+		}
+		i = group.length;
+		while ( i-- ) {
+			cached = matcherFromTokens( group[i] );
+			if ( cached[ expando ] ) {
+				setMatchers.push( cached );
+			} else {
+				elementMatchers.push( cached );
+			}
+		}
+
+		// Cache the compiled function
+		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );
+	}
+	return cached;
+};
+
+function multipleContexts( selector, contexts, results ) {
+	var i = 0,
+		len = contexts.length;
+	for ( ; i < len; i++ ) {
+		Sizzle( selector, contexts[i], results );
+	}
+	return results;
+}
+
+function select( selector, context, results, seed ) {
+	var i, tokens, token, type, find,
+		match = tokenize( selector );
+
+	if ( !seed ) {
+		// Try to minimize operations if there is only one group
+		if ( match.length === 1 ) {
+
+			// Take a shortcut and set the context if the root selector is an ID
+			tokens = match[0] = match[0].slice( 0 );
+			if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
+					support.getById && context.nodeType === 9 && documentIsHTML &&
+					Expr.relative[ tokens[1].type ] ) {
+
+				context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
+				if ( !context ) {
+					return results;
+				}
+				selector = selector.slice( tokens.shift().value.length );
+			}
+
+			// Fetch a seed set for right-to-left matching
+			i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
+			while ( i-- ) {
+				token = tokens[i];
+
+				// Abort if we hit a combinator
+				if ( Expr.relative[ (type = token.type) ] ) {
+					break;
+				}
+				if ( (find = Expr.find[ type ]) ) {
+					// Search, expanding context for leading sibling combinators
+					if ( (seed = find(
+						token.matches[0].replace( runescape, funescape ),
+						rsibling.test( tokens[0].type ) && context.parentNode || context
+					)) ) {
+
+						// If seed is empty or no tokens remain, we can return early
+						tokens.splice( i, 1 );
+						selector = seed.length && toSelector( tokens );
+						if ( !selector ) {
+							push.apply( results, seed );
+							return results;
+						}
+
+						break;
+					}
+				}
+			}
+		}
+	}
+
+	// Compile and execute a filtering function
+	// Provide `match` to avoid retokenization if we modified the selector above
+	compile( selector, match )(
+		seed,
+		context,
+		!documentIsHTML,
+		results,
+		rsibling.test( selector )
+	);
+	return results;
+}
+
+// One-time assignments
+
+// Sort stability
+support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;
+
+// Support: Chrome<14
+// Always assume duplicates if they aren't passed to the comparison function
+support.detectDuplicates = hasDuplicate;
+
+// Initialize against the default document
+setDocument();
+
+// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
+// Detached nodes confoundingly follow *each other*
+support.sortDetached = assert(function( div1 ) {
+	// Should return 1, but returns 4 (following)
+	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
+});
+
+// Support: IE<8
+// Prevent attribute/property "interpolation"
+// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
+if ( !assert(function( div ) {
+	div.innerHTML = "<a href='#'></a>";
+	return div.firstChild.getAttribute("href") === "#" ;
+}) ) {
+	addHandle( "type|href|height|width", function( elem, name, isXML ) {
+		if ( !isXML ) {
+			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
+		}
+	});
+}
+
+// Support: IE<9
+// Use defaultValue in place of getAttribute("value")
+if ( !support.attributes || !assert(function( div ) {
+	div.innerHTML = "<input/>";
+	div.firstChild.setAttribute( "value", "" );
+	return div.firstChild.getAttribute( "value" ) === "";
+}) ) {
+	addHandle( "value", function( elem, name, isXML ) {
+		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
+			return elem.defaultValue;
+		}
+	});
+}
+
+// Support: IE<9
+// Use getAttributeNode to fetch booleans when getAttribute lies
+if ( !assert(function( div ) {
+	return div.getAttribute("disabled") == null;
+}) ) {
+	addHandle( booleans, function( elem, name, isXML ) {
+		var val;
+		if ( !isXML ) {
+			return (val = elem.getAttributeNode( name )) && val.specified ?
+				val.value :
+				elem[ name ] === true ? name.toLowerCase() : null;
+		}
+	});
+}
+
+jQuery.find = Sizzle;
+jQuery.expr = Sizzle.selectors;
+jQuery.expr[":"] = jQuery.expr.pseudos;
+jQuery.unique = Sizzle.uniqueSort;
+jQuery.text = Sizzle.getText;
+jQuery.isXMLDoc = Sizzle.isXML;
+jQuery.contains = Sizzle.contains;
+
+
+})( window );
+// String to Object options format cache
+var optionsCache = {};
+
+// Convert String-formatted options into Object-formatted ones and store in cache
+function createOptions( options ) {
+	var object = optionsCache[ options ] = {};
+	jQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {
+		object[ flag ] = true;
+	});
+	return object;
+}
+
+/*
+ * Create a callback list using the following parameters:
+ *
+ *	options: an optional list of space-separated options that will change how
+ *			the callback list behaves or a more traditional option object
+ *
+ * By default a callback list will act like an event callback list and can be
+ * "fired" multiple times.
+ *
+ * Possible options:
+ *
+ *	once:			will ensure the callback list can only be fired once (like a Deferred)
+ *
+ *	memory:			will keep track of previous values and will call any callback added
+ *					after the list has been fired right away with the latest "memorized"
+ *					values (like a Deferred)
+ *
+ *	unique:			will ensure a callback can only be added once (no duplicate in the list)
+ *
+ *	stopOnFalse:	interrupt callings when a callback returns false
+ *
+ */
+jQuery.Callbacks = function( options ) {
+
+	// Convert options from String-formatted to Object-formatted if needed
+	// (we check in cache first)
+	options = typeof options === "string" ?
+		( optionsCache[ options ] || createOptions( options ) ) :
+		jQuery.extend( {}, options );
+
+	var // Flag to know if list is currently firing
+		firing,
+		// Last fire value (for non-forgettable lists)
+		memory,
+		// Flag to know if list was already fired
+		fired,
+		// End of the loop when firing
+		firingLength,
+		// Index of currently firing callback (modified by remove if needed)
+		firingIndex,
+		// First callback to fire (used internally by add and fireWith)
+		firingStart,
+		// Actual callback list
+		list = [],
+		// Stack of fire calls for repeatable lists
+		stack = !options.once && [],
+		// Fire callbacks
+		fire = function( data ) {
+			memory = options.memory && data;
+			fired = true;
+			firingIndex = firingStart || 0;
+			firingStart = 0;
+			firingLength = list.length;
+			firing = true;
+			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
+				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
+					memory = false; // To prevent further calls using add
+					break;
+				}
+			}
+			firing = false;
+			if ( list ) {
+				if ( stack ) {
+					if ( stack.length ) {
+						fire( stack.shift() );
+					}
+				} else if ( memory ) {
+					list = [];
+				} else {
+					self.disable();
+				}
+			}
+		},
+		// Actual Callbacks object
+		self = {
+			// Add a callback or a collection of callbacks to the list
+			add: function() {
+				if ( list ) {
+					// First, we save the current length
+					var start = list.length;
+					(function add( args ) {
+						jQuery.each( args, function( _, arg ) {
+							var type = jQuery.type( arg );
+							if ( type === "function" ) {
+								if ( !options.unique || !self.has( arg ) ) {
+									list.push( arg );
+								}
+							} else if ( arg && arg.length && type !== "string" ) {
+								// Inspect recursively
+								add( arg );
+							}
+						});
+					})( arguments );
+					// Do we need to add the callbacks to the
+					// current firing batch?
+					if ( firing ) {
+						firingLength = list.length;
+					// With memory, if we're not firing then
+					// we should call right away
+					} else if ( memory ) {
+						firingStart = start;
+						fire( memory );
+					}
+				}
+				return this;
+			},
+			// Remove a callback from the list
+			remove: function() {
+				if ( list ) {
+					jQuery.each( arguments, function( _, arg ) {
+						var index;
+						while( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
+							list.splice( index, 1 );
+							// Handle firing indexes
+							if ( firing ) {
+								if ( index <= firingLength ) {
+									firingLength--;
+								}
+								if ( index <= firingIndex ) {
+									firingIndex--;
+								}
+							}
+						}
+					});
+				}
+				return this;
+			},
+			// Check if a given callback is in the list.
+			// If no argument is given, return whether or not list has callbacks attached.
+			has: function( fn ) {
+				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
+			},
+			// Remove all callbacks from the list
+			empty: function() {
+				list = [];
+				firingLength = 0;
+				return this;
+			},
+			// Have the list do nothing anymore
+			disable: function() {
+				list = stack = memory = undefined;
+				return this;
+			},
+			// Is it disabled?
+			disabled: function() {
+				return !list;
+			},
+			// Lock the list in its current state
+			lock: function() {
+				stack = undefined;
+				if ( !memory ) {
+					self.disable();
+				}
+				return this;
+			},
+			// Is it locked?
+			locked: function() {
+				return !stack;
+			},
+			// Call all callbacks with the given context and arguments
+			fireWith: function( context, args ) {
+				if ( list && ( !fired || stack ) ) {
+					args = args || [];
+					args = [ context, args.slice ? args.slice() : args ];
+					if ( firing ) {
+						stack.push( args );
+					} else {
+						fire( args );
+					}
+				}
+				return this;
+			},
+			// Call all the callbacks with the given arguments
+			fire: function() {
+				self.fireWith( this, arguments );
+				return this;
+			},
+			// To know if the callbacks have already been called at least once
+			fired: function() {
+				return !!fired;
+			}
+		};
+
+	return self;
+};
+jQuery.extend({
+
+	Deferred: function( func ) {
+		var tuples = [
+				// action, add listener, listener list, final state
+				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
+				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
+				[ "notify", "progress", jQuery.Callbacks("memory") ]
+			],
+			state = "pending",
+			promise = {
+				state: function() {
+					return state;
+				},
+				always: function() {
+					deferred.done( arguments ).fail( arguments );
+					return this;
+				},
+				then: function( /* fnDone, fnFail, fnProgress */ ) {
+					var fns = arguments;
+					return jQuery.Deferred(function( newDefer ) {
+						jQuery.each( tuples, function( i, tuple ) {
+							var action = tuple[ 0 ],
+								fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
+							// deferred[ done | fail | progress ] for forwarding actions to newDefer
+							deferred[ tuple[1] ](function() {
+								var returned = fn && fn.apply( this, arguments );
+								if ( returned && jQuery.isFunction( returned.promise ) ) {
+									returned.promise()
+										.done( newDefer.resolve )
+										.fail( newDefer.reject )
+										.progress( newDefer.notify );
+								} else {
+									newDefer[ action + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
+								}
+							});
+						});
+						fns = null;
+					}).promise();
+				},
+				// Get a promise for this deferred
+				// If obj is provided, the promise aspect is added to the object
+				promise: function( obj ) {
+					return obj != null ? jQuery.extend( obj, promise ) : promise;
+				}
+			},
+			deferred = {};
+
+		// Keep pipe for back-compat
+		promise.pipe = promise.then;
+
+		// Add list-specific methods
+		jQuery.each( tuples, function( i, tuple ) {
+			var list = tuple[ 2 ],
+				stateString = tuple[ 3 ];
+
+			// promise[ done | fail | progress ] = list.add
+			promise[ tuple[1] ] = list.add;
+
+			// Handle state
+			if ( stateString ) {
+				list.add(function() {
+					// state = [ resolved | rejected ]
+					state = stateString;
+
+				// [ reject_list | resolve_list ].disable; progress_list.lock
+				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
+			}
+
+			// deferred[ resolve | reject | notify ]
+			deferred[ tuple[0] ] = function() {
+				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
+				return this;
+			};
+			deferred[ tuple[0] + "With" ] = list.fireWith;
+		});
+
+		// Make the deferred a promise
+		promise.promise( deferred );
+
+		// Call given func if any
+		if ( func ) {
+			func.call( deferred, deferred );
+		}
+
+		// All done!
+		return deferred;
+	},
+
+	// Deferred helper
+	when: function( subordinate /* , ..., subordinateN */ ) {
+		var i = 0,
+			resolveValues = core_slice.call( arguments ),
+			length = resolveValues.length,
+
+			// the count of uncompleted subordinates
+			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,
+
+			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
+			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),
+
+			// Update function for both resolve and progress values
+			updateFunc = function( i, contexts, values ) {
+				return function( value ) {
+					contexts[ i ] = this;
+					values[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;
+					if( values === progressValues ) {
+						deferred.notifyWith( contexts, values );
+					} else if ( !( --remaining ) ) {
+						deferred.resolveWith( contexts, values );
+					}
+				};
+			},
+
+			progressValues, progressContexts, resolveContexts;
+
+		// add listeners to Deferred subordinates; treat others as resolved
+		if ( length > 1 ) {
+			progressValues = new Array( length );
+			progressContexts = new Array( length );
+			resolveContexts = new Array( length );
+			for ( ; i < length; i++ ) {
+				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
+					resolveValues[ i ].promise()
+						.done( updateFunc( i, resolveContexts, resolveValues ) )
+						.fail( deferred.reject )
+						.progress( updateFunc( i, progressContexts, progressValues ) );
+				} else {
+					--remaining;
+				}
+			}
+		}
+
+		// if we're not waiting on anything, resolve the master
+		if ( !remaining ) {
+			deferred.resolveWith( resolveContexts, resolveValues );
+		}
+
+		return deferred.promise();
+	}
+});
+jQuery.support = (function( support ) {
+
+	var all, a, input, select, fragment, opt, eventName, isSupported, i,
+		div = document.createElement("div");
+
+	// Setup
+	div.setAttribute( "className", "t" );
+	div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
+
+	// Finish early in limited (non-browser) environments
+	all = div.getElementsByTagName("*") || [];
+	a = div.getElementsByTagName("a")[ 0 ];
+	if ( !a || !a.style || !all.length ) {
+		return support;
+	}
+
+	// First batch of tests
+	select = document.createElement("select");
+	opt = select.appendChild( document.createElement("option") );
+	input = div.getElementsByTagName("input")[ 0 ];
+
+	a.style.cssText = "top:1px;float:left;opacity:.5";
+
+	// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
+	support.getSetAttribute = div.className !== "t";
+
+	// IE strips leading whitespace when .innerHTML is used
+	support.leadingWhitespace = div.firstChild.nodeType === 3;
+
+	// Make sure that tbody elements aren't automatically inserted
+	// IE will insert them into empty tables
+	support.tbody = !div.getElementsByTagName("tbody").length;
+
+	// Make sure that link elements get serialized correctly by innerHTML
+	// This requires a wrapper element in IE
+	support.htmlSerialize = !!div.getElementsByTagName("link").length;
+
+	// Get the style information from getAttribute
+	// (IE uses .cssText instead)
+	support.style = /top/.test( a.getAttribute("style") );
+
+	// Make sure that URLs aren't manipulated
+	// (IE normalizes it by default)
+	support.hrefNormalized = a.getAttribute("href") === "/a";
+
+	// Make sure that element opacity exists
+	// (IE uses filter instead)
+	// Use a regex to work around a WebKit issue. See #5145
+	support.opacity = /^0.5/.test( a.style.opacity );
+
+	// Verify style float existence
+	// (IE uses styleFloat instead of cssFloat)
+	support.cssFloat = !!a.style.cssFloat;
+
+	// Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
+	support.checkOn = !!input.value;
+
+	// Make sure that a selected-by-default option has a working selected property.
+	// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
+	support.optSelected = opt.selected;
+
+	// Tests for enctype support on a form (#6743)
+	support.enctype = !!document.createElement("form").enctype;
+
+	// Makes sure cloning an html5 element does not cause problems
+	// Where outerHTML is undefined, this still works
+	support.html5Clone = document.createElement("nav").cloneNode( true ).outerHTML !== "<:nav></:nav>";
+
+	// Will be defined later
+	support.inlineBlockNeedsLayout = false;
+	support.shrinkWrapBlocks = false;
+	support.pixelPosition = false;
+	support.deleteExpando = true;
+	support.noCloneEvent = true;
+	support.reliableMarginRight = true;
+	support.boxSizingReliable = true;
+
+	// Make sure checked status is properly cloned
+	input.checked = true;
+	support.noCloneChecked = input.cloneNode( true ).checked;
+
+	// Make sure that the options inside disabled selects aren't marked as disabled
+	// (WebKit marks them as disabled)
+	select.disabled = true;
+	support.optDisabled = !opt.disabled;
+
+	// Support: IE<9
+	try {
+		delete div.test;
+	} catch( e ) {
+		support.deleteExpando = false;
+	}
+
+	// Check if we can trust getAttribute("value")
+	input = document.createElement("input");
+	input.setAttribute( "value", "" );
+	support.input = input.getAttribute( "value" ) === "";
+
+	// Check if an input maintains its value after becoming a radio
+	input.value = "t";
+	input.setAttribute( "type", "radio" );
+	support.radioValue = input.value === "t";
+
+	// #11217 - WebKit loses check when the name is after the checked attribute
+	input.setAttribute( "checked", "t" );
+	input.setAttribute( "name", "t" );
+
+	fragment = document.createDocumentFragment();
+	fragment.appendChild( input );
+
+	// Check if a disconnected checkbox will retain its checked
+	// value of true after appended to the DOM (IE6/7)
+	support.appendChecked = input.checked;
+
+	// WebKit doesn't clone checked state correctly in fragments
+	support.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;
+
+	// Support: IE<9
+	// Opera does not clone events (and typeof div.attachEvent === undefined).
+	// IE9-10 clones events bound via attachEvent, but they don't trigger with .click()
+	if ( div.attachEvent ) {
+		div.attachEvent( "onclick", function() {
+			support.noCloneEvent = false;
+		});
+
+		div.cloneNode( true ).click();
+	}
+
+	// Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)
+	// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)
+	for ( i in { submit: true, change: true, focusin: true }) {
+		div.setAttribute( eventName = "on" + i, "t" );
+
+		support[ i + "Bubbles" ] = eventName in window || div.attributes[ eventName ].expando === false;
+	}
+
+	div.style.backgroundClip = "content-box";
+	div.cloneNode( true ).style.backgroundClip = "";
+	support.clearCloneStyle = div.style.backgroundClip === "content-box";
+
+	// Support: IE<9
+	// Iteration over object's inherited properties before its own.
+	for ( i in jQuery( support ) ) {
+		break;
+	}
+	support.ownLast = i !== "0";
+
+	// Run tests that need a body at doc ready
+	jQuery(function() {
+		var container, marginDiv, tds,
+			divReset = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
+			body = document.getElementsByTagName("body")[0];
+
+		if ( !body ) {
+			// Return for frameset docs that don't have a body
+			return;
+		}
+
+		container = document.createElement("div");
+		container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
+
+		body.appendChild( container ).appendChild( div );
+
+		// Support: IE8
+		// Check if table cells still have offsetWidth/Height when they are set
+		// to display:none and there are still other visible table cells in a
+		// table row; if so, offsetWidth/Height are not reliable for use when
+		// determining if an element has been hidden directly using
+		// display:none (it is still safe to use offsets if a parent element is
+		// hidden; don safety goggles and see bug #4512 for more information).
+		div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
+		tds = div.getElementsByTagName("td");
+		tds[ 0 ].style.cssText = "padding:0;margin:0;border:0;display:none";
+		isSupported = ( tds[ 0 ].offsetHeight === 0 );
+
+		tds[ 0 ].style.display = "";
+		tds[ 1 ].style.display = "none";
+
+		// Support: IE8
+		// Check if empty table cells still have offsetWidth/Height
+		support.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );
+
+		// Check box-sizing and margin behavior.
+		div.innerHTML = "";
+		div.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
+
+		// Workaround failing boxSizing test due to offsetWidth returning wrong value
+		// with some non-1 values of body zoom, ticket #13543
+		jQuery.swap( body, body.style.zoom != null ? { zoom: 1 } : {}, function() {
+			support.boxSizing = div.offsetWidth === 4;
+		});
+
+		// Use window.getComputedStyle because jsdom on node.js will break without it.
+		if ( window.getComputedStyle ) {
+			support.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== "1%";
+			support.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: "4px" } ).width === "4px";
+
+			// Check if div with explicit width and no margin-right incorrectly
+			// gets computed margin-right based on width of container. (#3333)
+			// Fails in WebKit before Feb 2011 nightlies
+			// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
+			marginDiv = div.appendChild( document.createElement("div") );
+			marginDiv.style.cssText = div.style.cssText = divReset;
+			marginDiv.style.marginRight = marginDiv.style.width = "0";
+			div.style.width = "1px";
+
+			support.reliableMarginRight =
+				!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );
+		}
+
+		if ( typeof div.style.zoom !== core_strundefined ) {
+			// Support: IE<8
+			// Check if natively block-level elements act like inline-block
+			// elements when setting their display to 'inline' and giving
+			// them layout
+			div.innerHTML = "";
+			div.style.cssText = divReset + "width:1px;padding:1px;display:inline;zoom:1";
+			support.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );
+
+			// Support: IE6
+			// Check if elements with layout shrink-wrap their children
+			div.style.display = "block";
+			div.innerHTML = "<div></div>";
+			div.firstChild.style.width = "5px";
+			support.shrinkWrapBlocks = ( div.offsetWidth !== 3 );
+
+			if ( support.inlineBlockNeedsLayout ) {
+				// Prevent IE 6 from affecting layout for positioned elements #11048
+				// Prevent IE from shrinking the body in IE 7 mode #12869
+				// Support: IE<8
+				body.style.zoom = 1;
+			}
+		}
+
+		body.removeChild( container );
+
+		// Null elements to avoid leaks in IE
+		container = div = tds = marginDiv = null;
+	});
+
+	// Null elements to avoid leaks in IE
+	all = select = fragment = opt = a = input = null;
+
+	return support;
+})({});
+
+var rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
+	rmultiDash = /([A-Z])/g;
+
+function internalData( elem, name, data, pvt /* Internal Use Only */ ){
+	if ( !jQuery.acceptData( elem ) ) {
+		return;
+	}
+
+	var ret, thisCache,
+		internalKey = jQuery.expando,
+
+		// We have to handle DOM nodes and JS objects differently because IE6-7
+		// can't GC object references properly across the DOM-JS boundary
+		isNode = elem.nodeType,
+
+		// Only DOM nodes need the global jQuery cache; JS object data is
+		// attached directly to the object so GC can occur automatically
+		cache = isNode ? jQuery.cache : elem,
+
+		// Only defining an ID for JS objects if its cache already exists allows
+		// the code to shortcut on the same path as a DOM node with no cache
+		id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;
+
+	// Avoid doing any more work than we need to when trying to get data on an
+	// object that has no data at all
+	if ( (!id || !cache[id] || (!pvt && !cache[id].data)) && data === undefined && typeof name === "string" ) {
+		return;
+	}
+
+	if ( !id ) {
+		// Only DOM nodes need a new unique ID for each element since their data
+		// ends up in the global cache
+		if ( isNode ) {
+			id = elem[ internalKey ] = core_deletedIds.pop() || jQuery.guid++;
+		} else {
+			id = internalKey;
+		}
+	}
+
+	if ( !cache[ id ] ) {
+		// Avoid exposing jQuery metadata on plain JS objects when the object
+		// is serialized using JSON.stringify
+		cache[ id ] = isNode ? {} : { toJSON: jQuery.noop };
+	}
+
+	// An object can be passed to jQuery.data instead of a key/value pair; this gets
+	// shallow copied over onto the existing cache
+	if ( typeof name === "object" || typeof name === "function" ) {
+		if ( pvt ) {
+			cache[ id ] = jQuery.extend( cache[ id ], name );
+		} else {
+			cache[ id ].data = jQuery.extend( cache[ id ].data, name );
+		}
+	}
+
+	thisCache = cache[ id ];
+
+	// jQuery data() is stored in a separate object inside the object's internal data
+	// cache in order to avoid key collisions between internal data and user-defined
+	// data.
+	if ( !pvt ) {
+		if ( !thisCache.data ) {
+			thisCache.data = {};
+		}
+
+		thisCache = thisCache.data;
+	}
+
+	if ( data !== undefined ) {
+		thisCache[ jQuery.camelCase( name ) ] = data;
+	}
+
+	// Check for both converted-to-camel and non-converted data property names
+	// If a data property was specified
+	if ( typeof name === "string" ) {
+
+		// First Try to find as-is property data
+		ret = thisCache[ name ];
+
+		// Test for null|undefined property data
+		if ( ret == null ) {
+
+			// Try to find the camelCased property
+			ret = thisCache[ jQuery.camelCase( name ) ];
+		}
+	} else {
+		ret = thisCache;
+	}
+
+	return ret;
+}
+
+function internalRemoveData( elem, name, pvt ) {
+	if ( !jQuery.acceptData( elem ) ) {
+		return;
+	}
+
+	var thisCache, i,
+		isNode = elem.nodeType,
+
+		// See jQuery.data for more information
+		cache = isNode ? jQuery.cache : elem,
+		id = isNode ? elem[ jQuery.expando ] : jQuery.expando;
+
+	// If there is already no cache entry for this object, there is no
+	// purpose in continuing
+	if ( !cache[ id ] ) {
+		return;
+	}
+
+	if ( name ) {
+
+		thisCache = pvt ? cache[ id ] : cache[ id ].data;
+
+		if ( thisCache ) {
+
+			// Support array or space separated string names for data keys
+			if ( !jQuery.isArray( name ) ) {
+
+				// try the string as a key before any manipulation
+				if ( name in thisCache ) {
+					name = [ name ];
+				} else {
+
+					// split the camel cased version by spaces unless a key with the spaces exists
+					name = jQuery.camelCase( name );
+					if ( name in thisCache ) {
+						name = [ name ];
+					} else {
+						name = name.split(" ");
+					}
+				}
+			} else {
+				// If "name" is an array of keys...
+				// When data is initially created, via ("key", "val") signature,
+				// keys will be converted to camelCase.
+				// Since there is no way to tell _how_ a key was added, remove
+				// both plain key and camelCase key. #12786
+				// This will only penalize the array argument path.
+				name = name.concat( jQuery.map( name, jQuery.camelCase ) );
+			}
+
+			i = name.length;
+			while ( i-- ) {
+				delete thisCache[ name[i] ];
+			}
+
+			// If there is no data left in the cache, we want to continue
+			// and let the cache object itself get destroyed
+			if ( pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache) ) {
+				return;
+			}
+		}
+	}
+
+	// See jQuery.data for more information
+	if ( !pvt ) {
+		delete cache[ id ].data;
+
+		// Don't destroy the parent cache unless the internal data object
+		// had been the only thing left in it
+		if ( !isEmptyDataObject( cache[ id ] ) ) {
+			return;
+		}
+	}
+
+	// Destroy the cache
+	if ( isNode ) {
+		jQuery.cleanData( [ elem ], true );
+
+	// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
+	/* jshint eqeqeq: false */
+	} else if ( jQuery.support.deleteExpando || cache != cache.window ) {
+		/* jshint eqeqeq: true */
+		delete cache[ id ];
+
+	// When all else fails, null
+	} else {
+		cache[ id ] = null;
+	}
+}
+
+jQuery.extend({
+	cache: {},
+
+	// The following elements throw uncatchable exceptions if you
+	// attempt to add expando properties to them.
+	noData: {
+		"applet": true,
+		"embed": true,
+		// Ban all objects except for Flash (which handle expandos)
+		"object": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
+	},
+
+	hasData: function( elem ) {
+		elem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];
+		return !!elem && !isEmptyDataObject( elem );
+	},
+
+	data: function( elem, name, data ) {
+		return internalData( elem, name, data );
+	},
+
+	removeData: function( elem, name ) {
+		return internalRemoveData( elem, name );
+	},
+
+	// For internal use only.
+	_data: function( elem, name, data ) {
+		return internalData( elem, name, data, true );
+	},
+
+	_removeData: function( elem, name ) {
+		return internalRemoveData( elem, name, true );
+	},
+
+	// A method for determining if a DOM node can handle the data expando
+	acceptData: function( elem ) {
+		// Do not set data on non-element because it will not be cleared (#8335).
+		if ( elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9 ) {
+			return false;
+		}
+
+		var noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];
+
+		// nodes accept data unless otherwise specified; rejection can be conditional
+		return !noData || noData !== true && elem.getAttribute("classid") === noData;
+	}
+});
+
+jQuery.fn.extend({
+	data: function( key, value ) {
+		var attrs, name,
+			data = null,
+			i = 0,
+			elem = this[0];
+
+		// Special expections of .data basically thwart jQuery.access,
+		// so implement the relevant behavior ourselves
+
+		// Gets all values
+		if ( key === undefined ) {
+			if ( this.length ) {
+				data = jQuery.data( elem );
+
+				if ( elem.nodeType === 1 && !jQuery._data( elem, "parsedAttrs" ) ) {
+					attrs = elem.attributes;
+					for ( ; i < attrs.length; i++ ) {
+						name = attrs[i].name;
+
+						if ( name.indexOf("data-") === 0 ) {
+							name = jQuery.camelCase( name.slice(5) );
+
+							dataAttr( elem, name, data[ name ] );
+						}
+					}
+					jQuery._data( elem, "parsedAttrs", true );
+				}
+			}
+
+			return data;
+		}
+
+		// Sets multiple values
+		if ( typeof key === "object" ) {
+			return this.each(function() {
+				jQuery.data( this, key );
+			});
+		}
+
+		return arguments.length > 1 ?
+
+			// Sets one value
+			this.each(function() {
+				jQuery.data( this, key, value );
+			}) :
+
+			// Gets one value
+			// Try to fetch any internally stored data first
+			elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : null;
+	},
+
+	removeData: function( key ) {
+		return this.each(function() {
+			jQuery.removeData( this, key );
+		});
+	}
+});
+
+function dataAttr( elem, key, data ) {
+	// If nothing was found internally, try to fetch any
+	// data from the HTML5 data-* attribute
+	if ( data === undefined && elem.nodeType === 1 ) {
+
+		var name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
+
+		data = elem.getAttribute( name );
+
+		if ( typeof data === "string" ) {
+			try {
+				data = data === "true" ? true :
+					data === "false" ? false :
+					data === "null" ? null :
+					// Only convert to a number if it doesn't change the string
+					+data + "" === data ? +data :
+					rbrace.test( data ) ? jQuery.parseJSON( data ) :
+						data;
+			} catch( e ) {}
+
+			// Make sure we set the data so it isn't changed later
+			jQuery.data( elem, key, data );
+
+		} else {
+			data = undefined;
+		}
+	}
+
+	return data;
+}
+
+// checks a cache object for emptiness
+function isEmptyDataObject( obj ) {
+	var name;
+	for ( name in obj ) {
+
+		// if the public data object is empty, the private is still empty
+		if ( name === "data" && jQuery.isEmptyObject( obj[name] ) ) {
+			continue;
+		}
+		if ( name !== "toJSON" ) {
+			return false;
+		}
+	}
+
+	return true;
+}
+jQuery.extend({
+	queue: function( elem, type, data ) {
+		var queue;
+
+		if ( elem ) {
+			type = ( type || "fx" ) + "queue";
+			queue = jQuery._data( elem, type );
+
+			// Speed up dequeue by getting out quickly if this is just a lookup
+			if ( data ) {
+				if ( !queue || jQuery.isArray(data) ) {
+					queue = jQuery._data( elem, type, jQuery.makeArray(data) );
+				} else {
+					queue.push( data );
+				}
+			}
+			return queue || [];
+		}
+	},
+
+	dequeue: function( elem, type ) {
+		type = type || "fx";
+
+		var queue = jQuery.queue( elem, type ),
+			startLength = queue.length,
+			fn = queue.shift(),
+			hooks = jQuery._queueHooks( elem, type ),
+			next = function() {
+				jQuery.dequeue( elem, type );
+			};
+
+		// If the fx queue is dequeued, always remove the progress sentinel
+		if ( fn === "inprogress" ) {
+			fn = queue.shift();
+			startLength--;
+		}
+
+		if ( fn ) {
+
+			// Add a progress sentinel to prevent the fx queue from being
+			// automatically dequeued
+			if ( type === "fx" ) {
+				queue.unshift( "inprogress" );
+			}
+
+			// clear up the last queue stop function
+			delete hooks.stop;
+			fn.call( elem, next, hooks );
+		}
+
+		if ( !startLength && hooks ) {
+			hooks.empty.fire();
+		}
+	},
+
+	// not intended for public consumption - generates a queueHooks object, or returns the current one
+	_queueHooks: function( elem, type ) {
+		var key = type + "queueHooks";
+		return jQuery._data( elem, key ) || jQuery._data( elem, key, {
+			empty: jQuery.Callbacks("once memory").add(function() {
+				jQuery._removeData( elem, type + "queue" );
+				jQuery._removeData( elem, key );
+			})
+		});
+	}
+});
+
+jQuery.fn.extend({
+	queue: function( type, data ) {
+		var setter = 2;
+
+		if ( typeof type !== "string" ) {
+			data = type;
+			type = "fx";
+			setter--;
+		}
+
+		if ( arguments.length < setter ) {
+			return jQuery.queue( this[0], type );
+		}
+
+		return data === undefined ?
+			this :
+			this.each(function() {
+				var queue = jQuery.queue( this, type, data );
+
+				// ensure a hooks for this queue
+				jQuery._queueHooks( this, type );
+
+				if ( type === "fx" && queue[0] !== "inprogress" ) {
+					jQuery.dequeue( this, type );
+				}
+			});
+	},
+	dequeue: function( type ) {
+		return this.each(function() {
+			jQuery.dequeue( this, type );
+		});
+	},
+	// Based off of the plugin by Clint Helfers, with permission.
+	// http://blindsignals.com/index.php/2009/07/jquery-delay/
+	delay: function( time, type ) {
+		time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
+		type = type || "fx";
+
+		return this.queue( type, function( next, hooks ) {
+			var timeout = setTimeout( next, time );
+			hooks.stop = function() {
+				clearTimeout( timeout );
+			};
+		});
+	},
+	clearQueue: function( type ) {
+		return this.queue( type || "fx", [] );
+	},
+	// Get a promise resolved when queues of a certain type
+	// are emptied (fx is the type by default)
+	promise: function( type, obj ) {
+		var tmp,
+			count = 1,
+			defer = jQuery.Deferred(),
+			elements = this,
+			i = this.length,
+			resolve = function() {
+				if ( !( --count ) ) {
+					defer.resolveWith( elements, [ elements ] );
+				}
+			};
+
+		if ( typeof type !== "string" ) {
+			obj = type;
+			type = undefined;
+		}
+		type = type || "fx";
+
+		while( i-- ) {
+			tmp = jQuery._data( elements[ i ], type + "queueHooks" );
+			if ( tmp && tmp.empty ) {
+				count++;
+				tmp.empty.add( resolve );
+			}
+		}
+		resolve();
+		return defer.promise( obj );
+	}
+});
+var nodeHook, boolHook,
+	rclass = /[\t\r\n\f]/g,
+	rreturn = /\r/g,
+	rfocusable = /^(?:input|select|textarea|button|object)$/i,
+	rclickable = /^(?:a|area)$/i,
+	ruseDefault = /^(?:checked|selected)$/i,
+	getSetAttribute = jQuery.support.getSetAttribute,
+	getSetInput = jQuery.support.input;
+
+jQuery.fn.extend({
+	attr: function( name, value ) {
+		return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
+	},
+
+	removeAttr: function( name ) {
+		return this.each(function() {
+			jQuery.removeAttr( this, name );
+		});
+	},
+
+	prop: function( name, value ) {
+		return jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );
+	},
+
+	removeProp: function( name ) {
+		name = jQuery.propFix[ name ] || name;
+		return this.each(function() {
+			// try/catch handles cases where IE balks (such as removing a property on window)
+			try {
+				this[ name ] = undefined;
+				delete this[ name ];
+			} catch( e ) {}
+		});
+	},
+
+	addClass: function( value ) {
+		var classes, elem, cur, clazz, j,
+			i = 0,
+			len = this.length,
+			proceed = typeof value === "string" && value;
+
+		if ( jQuery.isFunction( value ) ) {
+			return this.each(function( j ) {
+				jQuery( this ).addClass( value.call( this, j, this.className ) );
+			});
+		}
+
+		if ( proceed ) {
+			// The disjunction here is for better compressibility (see removeClass)
+			classes = ( value || "" ).match( core_rnotwhite ) || [];
+
+			for ( ; i < len; i++ ) {
+				elem = this[ i ];
+				cur = elem.nodeType === 1 && ( elem.className ?
+					( " " + elem.className + " " ).replace( rclass, " " ) :
+					" "
+				);
+
+				if ( cur ) {
+					j = 0;
+					while ( (clazz = classes[j++]) ) {
+						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
+							cur += clazz + " ";
+						}
+					}
+					elem.className = jQuery.trim( cur );
+
+				}
+			}
+		}
+
+		return this;
+	},
+
+	removeClass: function( value ) {
+		var classes, elem, cur, clazz, j,
+			i = 0,
+			len = this.length,
+			proceed = arguments.length === 0 || typeof value === "string" && value;
+
+		if ( jQuery.isFunction( value ) ) {
+			return this.each(function( j ) {
+				jQuery( this ).removeClass( value.call( this, j, this.className ) );
+			});
+		}
+		if ( proceed ) {
+			classes = ( value || "" ).match( core_rnotwhite ) || [];
+
+			for ( ; i < len; i++ ) {
+				elem = this[ i ];
+				// This expression is here for better compressibility (see addClass)
+				cur = elem.nodeType === 1 && ( elem.className ?
+					( " " + elem.className + " " ).replace( rclass, " " ) :
+					""
+				);
+
+				if ( cur ) {
+					j = 0;
+					while ( (clazz = classes[j++]) ) {
+						// Remove *all* instances
+						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
+							cur = cur.replace( " " + clazz + " ", " " );
+						}
+					}
+					elem.className = value ? jQuery.trim( cur ) : "";
+				}
+			}
+		}
+
+		return this;
+	},
+
+	toggleClass: function( value, stateVal ) {
+		var type = typeof value;
+
+		if ( typeof stateVal === "boolean" && type === "string" ) {
+			return stateVal ? this.addClass( value ) : this.removeClass( value );
+		}
+
+		if ( jQuery.isFunction( value ) ) {
+			return this.each(function( i ) {
+				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
+			});
+		}
+
+		return this.each(function() {
+			if ( type === "string" ) {
+				// toggle individual class names
+				var className,
+					i = 0,
+					self = jQuery( this ),
+					classNames = value.match( core_rnotwhite ) || [];
+
+				while ( (className = classNames[ i++ ]) ) {
+					// check each className given, space separated list
+					if ( self.hasClass( className ) ) {
+						self.removeClass( className );
+					} else {
+						self.addClass( className );
+					}
+				}
+
+			// Toggle whole class name
+			} else if ( type === core_strundefined || type === "boolean" ) {
+				if ( this.className ) {
+					// store className if set
+					jQuery._data( this, "__className__", this.className );
+				}
+
+				// If the element has a class name or if we're passed "false",
+				// then remove the whole classname (if there was one, the above saved it).
+				// Otherwise bring back whatever was previously saved (if anything),
+				// falling back to the empty string if nothing was stored.
+				this.className = this.className || value === false ? "" : jQuery._data( this, "__className__" ) || "";
+			}
+		});
+	},
+
+	hasClass: function( selector ) {
+		var className = " " + selector + " ",
+			i = 0,
+			l = this.length;
+		for ( ; i < l; i++ ) {
+			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
+				return true;
+			}
+		}
+
+		return false;
+	},
+
+	val: function( value ) {
+		var ret, hooks, isFunction,
+			elem = this[0];
+
+		if ( !arguments.length ) {
+			if ( elem ) {
+				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];
+
+				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
+					return ret;
+				}
+
+				ret = elem.value;
+
+				return typeof ret === "string" ?
+					// handle most common string cases
+					ret.replace(rreturn, "") :
+					// handle cases where value is null/undef or number
+					ret == null ? "" : ret;
+			}
+
+			return;
+		}
+
+		isFunction = jQuery.isFunction( value );
+
+		return this.each(function( i ) {
+			var val;
+
+			if ( this.nodeType !== 1 ) {
+				return;
+			}
+
+			if ( isFunction ) {
+				val = value.call( this, i, jQuery( this ).val() );
+			} else {
+				val = value;
+			}
+
+			// Treat null/undefined as ""; convert numbers to string
+			if ( val == null ) {
+				val = "";
+			} else if ( typeof val === "number" ) {
+				val += "";
+			} else if ( jQuery.isArray( val ) ) {
+				val = jQuery.map(val, function ( value ) {
+					return value == null ? "" : value + "";
+				});
+			}
+
+			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];
+
+			// If set returns undefined, fall back to normal setting
+			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
+				this.value = val;
+			}
+		});
+	}
+});
+
+jQuery.extend({
+	valHooks: {
+		option: {
+			get: function( elem ) {
+				// Use proper attribute retrieval(#6932, #12072)
+				var val = jQuery.find.attr( elem, "value" );
+				return val != null ?
+					val :
+					elem.text;
+			}
+		},
+		select: {
+			get: function( elem ) {
+				var value, option,
+					options = elem.options,
+					index = elem.selectedIndex,
+					one = elem.type === "select-one" || index < 0,
+					values = one ? null : [],
+					max = one ? index + 1 : options.length,
+					i = index < 0 ?
+						max :
+						one ? index : 0;
+
+				// Loop through all the selected options
+				for ( ; i < max; i++ ) {
+					option = options[ i ];
+
+					// oldIE doesn't update selected after form reset (#2551)
+					if ( ( option.selected || i === index ) &&
+							// Don't return options that are disabled or in a disabled optgroup
+							( jQuery.support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null ) &&
+							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {
+
+						// Get the specific value for the option
+						value = jQuery( option ).val();
+
+						// We don't need an array for one selects
+						if ( one ) {
+							return value;
+						}
+
+						// Multi-Selects return an array
+						values.push( value );
+					}
+				}
+
+				return values;
+			},
+
+			set: function( elem, value ) {
+				var optionSet, option,
+					options = elem.options,
+					values = jQuery.makeArray( value ),
+					i = options.length;
+
+				while ( i-- ) {
+					option = options[ i ];
+					if ( (option.selected = jQuery.inArray( jQuery(option).val(), values ) >= 0) ) {
+						optionSet = true;
+					}
+				}
+
+				// force browsers to behave consistently when non-matching value is set
+				if ( !optionSet ) {
+					elem.selectedIndex = -1;
+				}
+				return values;
+			}
+		}
+	},
+
+	attr: function( elem, name, value ) {
+		var hooks, ret,
+			nType = elem.nodeType;
+
+		// don't get/set attributes on text, comment and attribute nodes
+		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
+			return;
+		}
+
+		// Fallback to prop when attributes are not supported
+		if ( typeof elem.getAttribute === core_strundefined ) {
+			return jQuery.prop( elem, name, value );
+		}
+
+		// All attributes are lowercase
+		// Grab necessary hook if one is defined
+		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
+			name = name.toLowerCase();
+			hooks = jQuery.attrHooks[ name ] ||
+				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
+		}
+
+		if ( value !== undefined ) {
+
+			if ( value === null ) {
+				jQuery.removeAttr( elem, name );
+
+			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
+				return ret;
+
+			} else {
+				elem.setAttribute( name, value + "" );
+				return value;
+			}
+
+		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
+			return ret;
+
+		} else {
+			ret = jQuery.find.attr( elem, name );
+
+			// Non-existent attributes return null, we normalize to undefined
+			return ret == null ?
+				undefined :
+				ret;
+		}
+	},
+
+	removeAttr: function( elem, value ) {
+		var name, propName,
+			i = 0,
+			attrNames = value && value.match( core_rnotwhite );
+
+		if ( attrNames && elem.nodeType === 1 ) {
+			while ( (name = attrNames[i++]) ) {
+				propName = jQuery.propFix[ name ] || name;
+
+				// Boolean attributes get special treatment (#10870)
+				if ( jQuery.expr.match.bool.test( name ) ) {
+					// Set corresponding property to false
+					if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
+						elem[ propName ] = false;
+					// Support: IE<9
+					// Also clear defaultChecked/defaultSelected (if appropriate)
+					} else {
+						elem[ jQuery.camelCase( "default-" + name ) ] =
+							elem[ propName ] = false;
+					}
+
+				// See #9699 for explanation of this approach (setting first, then removal)
+				} else {
+					jQuery.attr( elem, name, "" );
+				}
+
+				elem.removeAttribute( getSetAttribute ? name : propName );
+			}
+		}
+	},
+
+	attrHooks: {
+		type: {
+			set: function( elem, value ) {
+				if ( !jQuery.support.radioValue && value === "radio" && jQuery.nodeName(elem, "input") ) {
+					// Setting the type on a radio button after the value resets the value in IE6-9
+					// Reset value to default in case type is set after value during creation
+					var val = elem.value;
+					elem.setAttribute( "type", value );
+					if ( val ) {
+						elem.value = val;
+					}
+					return value;
+				}
+			}
+		}
+	},
+
+	propFix: {
+		"for": "htmlFor",
+		"class": "className"
+	},
+
+	prop: function( elem, name, value ) {
+		var ret, hooks, notxml,
+			nType = elem.nodeType;
+
+		// don't get/set properties on text, comment and attribute nodes
+		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
+			return;
+		}
+
+		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );
+
+		if ( notxml ) {
+			// Fix name and attach hooks
+			name = jQuery.propFix[ name ] || name;
+			hooks = jQuery.propHooks[ name ];
+		}
+
+		if ( value !== undefined ) {
+			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
+				ret :
+				( elem[ name ] = value );
+
+		} else {
+			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
+				ret :
+				elem[ name ];
+		}
+	},
+
+	propHooks: {
+		tabIndex: {
+			get: function( elem ) {
+				// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
+				// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
+				// Use proper attribute retrieval(#12072)
+				var tabindex = jQuery.find.attr( elem, "tabindex" );
+
+				return tabindex ?
+					parseInt( tabindex, 10 ) :
+					rfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?
+						0 :
+						-1;
+			}
+		}
+	}
+});
+
+// Hooks for boolean attributes
+boolHook = {
+	set: function( elem, value, name ) {
+		if ( value === false ) {
+			// Remove boolean attributes when set to false
+			jQuery.removeAttr( elem, name );
+		} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
+			// IE<8 needs the *property* name
+			elem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );
+
+		// Use defaultChecked and defaultSelected for oldIE
+		} else {
+			elem[ jQuery.camelCase( "default-" + name ) ] = elem[ name ] = true;
+		}
+
+		return name;
+	}
+};
+jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
+	var getter = jQuery.expr.attrHandle[ name ] || jQuery.find.attr;
+
+	jQuery.expr.attrHandle[ name ] = getSetInput && getSetAttribute || !ruseDefault.test( name ) ?
+		function( elem, name, isXML ) {
+			var fn = jQuery.expr.attrHandle[ name ],
+				ret = isXML ?
+					undefined :
+					/* jshint eqeqeq: false */
+					(jQuery.expr.attrHandle[ name ] = undefined) !=
+						getter( elem, name, isXML ) ?
+
+						name.toLowerCase() :
+						null;
+			jQuery.expr.attrHandle[ name ] = fn;
+			return ret;
+		} :
+		function( elem, name, isXML ) {
+			return isXML ?
+				undefined :
+				elem[ jQuery.camelCase( "default-" + name ) ] ?
+					name.toLowerCase() :
+					null;
+		};
+});
+
+// fix oldIE attroperties
+if ( !getSetInput || !getSetAttribute ) {
+	jQuery.attrHooks.value = {
+		set: function( elem, value, name ) {
+			if ( jQuery.nodeName( elem, "input" ) ) {
+				// Does not return so that setAttribute is also used
+				elem.defaultValue = value;
+			} else {
+				// Use nodeHook if defined (#1954); otherwise setAttribute is fine
+				return nodeHook && nodeHook.set( elem, value, name );
+			}
+		}
+	};
+}
+
+// IE6/7 do not support getting/setting some attributes with get/setAttribute
+if ( !getSetAttribute ) {
+
+	// Use this for any attribute in IE6/7
+	// This fixes almost every IE6/7 issue
+	nodeHook = {
+		set: function( elem, value, name ) {
+			// Set the existing or create a new attribute node
+			var ret = elem.getAttributeNode( name );
+			if ( !ret ) {
+				elem.setAttributeNode(
+					(ret = elem.ownerDocument.createAttribute( name ))
+				);
+			}
+
+			ret.value = value += "";
+
+			// Break association with cloned elements by also using setAttribute (#9646)
+			return name === "value" || value === elem.getAttribute( name ) ?
+				value :
+				undefined;
+		}
+	};
+	jQuery.expr.attrHandle.id = jQuery.expr.attrHandle.name = jQuery.expr.attrHandle.coords =
+		// Some attributes are constructed with empty-string values when not defined
+		function( elem, name, isXML ) {
+			var ret;
+			return isXML ?
+				undefined :
+				(ret = elem.getAttributeNode( name )) && ret.value !== "" ?
+					ret.value :
+					null;
+		};
+	jQuery.valHooks.button = {
+		get: function( elem, name ) {
+			var ret = elem.getAttributeNode( name );
+			return ret && ret.specified ?
+				ret.value :
+				undefined;
+		},
+		set: nodeHook.set
+	};
+
+	// Set contenteditable to false on removals(#10429)
+	// Setting to empty string throws an error as an invalid value
+	jQuery.attrHooks.contenteditable = {
+		set: function( elem, value, name ) {
+			nodeHook.set( elem, value === "" ? false : value, name );
+		}
+	};
+
+	// Set width and height to auto instead of 0 on empty string( Bug #8150 )
+	// This is for removals
+	jQuery.each([ "width", "height" ], function( i, name ) {
+		jQuery.attrHooks[ name ] = {
+			set: function( elem, value ) {
+				if ( value === "" ) {
+					elem.setAttribute( name, "auto" );
+					return value;
+				}
+			}
+		};
+	});
+}
+
+
+// Some attributes require a special call on IE
+// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
+if ( !jQuery.support.hrefNormalized ) {
+	// href/src property should get the full normalized URL (#10299/#12915)
+	jQuery.each([ "href", "src" ], function( i, name ) {
+		jQuery.propHooks[ name ] = {
+			get: function( elem ) {
+				return elem.getAttribute( name, 4 );
+			}
+		};
+	});
+}
+
+if ( !jQuery.support.style ) {
+	jQuery.attrHooks.style = {
+		get: function( elem ) {
+			// Return undefined in the case of empty string
+			// Note: IE uppercases css property names, but if we were to .toLowerCase()
+			// .cssText, that would destroy case senstitivity in URL's, like in "background"
+			return elem.style.cssText || undefined;
+		},
+		set: function( elem, value ) {
+			return ( elem.style.cssText = value + "" );
+		}
+	};
+}
+
+// Safari mis-reports the default selected property of an option
+// Accessing the parent's selectedIndex property fixes it
+if ( !jQuery.support.optSelected ) {
+	jQuery.propHooks.selected = {
+		get: function( elem ) {
+			var parent = elem.parentNode;
+
+			if ( parent ) {
+				parent.selectedIndex;
+
+				// Make sure that it also works with optgroups, see #5701
+				if ( parent.parentNode ) {
+					parent.parentNode.selectedIndex;
+				}
+			}
+			return null;
+		}
+	};
+}
+
+jQuery.each([
+	"tabIndex",
+	"readOnly",
+	"maxLength",
+	"cellSpacing",
+	"cellPadding",
+	"rowSpan",
+	"colSpan",
+	"useMap",
+	"frameBorder",
+	"contentEditable"
+], function() {
+	jQuery.propFix[ this.toLowerCase() ] = this;
+});
+
+// IE6/7 call enctype encoding
+if ( !jQuery.support.enctype ) {
+	jQuery.propFix.enctype = "encoding";
+}
+
+// Radios and checkboxes getter/setter
+jQuery.each([ "radio", "checkbox" ], function() {
+	jQuery.valHooks[ this ] = {
+		set: function( elem, value ) {
+			if ( jQuery.isArray( value ) ) {
+				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
+			}
+		}
+	};
+	if ( !jQuery.support.checkOn ) {
+		jQuery.valHooks[ this ].get = function( elem ) {
+			// Support: Webkit
+			// "" is returned instead of "on" if a value isn't specified
+			return elem.getAttribute("value") === null ? "on" : elem.value;
+		};
+	}
+});
+var rformElems = /^(?:input|select|textarea)$/i,
+	rkeyEvent = /^key/,
+	rmouseEvent = /^(?:mouse|contextmenu)|click/,
+	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
+	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
+
+function returnTrue() {
+	return true;
+}
+
+function returnFalse() {
+	return false;
+}
+
+function safeActiveElement() {
+	try {
+		return document.activeElement;
+	} catch ( err ) { }
+}
+
+/*
+ * Helper functions for managing events -- not part of the public interface.
+ * Props to Dean Edwards' addEvent library for many of the ideas.
+ */
+jQuery.event = {
+
+	global: {},
+
+	add: function( elem, types, handler, data, selector ) {
+		var tmp, events, t, handleObjIn,
+			special, eventHandle, handleObj,
+			handlers, type, namespaces, origType,
+			elemData = jQuery._data( elem );
+
+		// Don't attach events to noData or text/comment nodes (but allow plain objects)
+		if ( !elemData ) {
+			return;
+		}
+
+		// Caller can pass in an object of custom data in lieu of the handler
+		if ( handler.handler ) {
+			handleObjIn = handler;
+			handler = handleObjIn.handler;
+			selector = handleObjIn.selector;
+		}
+
+		// Make sure that the handler has a unique ID, used to find/remove it later
+		if ( !handler.guid ) {
+			handler.guid = jQuery.guid++;
+		}
+
+		// Init the element's event structure and main handler, if this is the first
+		if ( !(events = elemData.events) ) {
+			events = elemData.events = {};
+		}
+		if ( !(eventHandle = elemData.handle) ) {
+			eventHandle = elemData.handle = function( e ) {
+				// Discard the second event of a jQuery.event.trigger() and
+				// when an event is called after a page has unloaded
+				return typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?
+					jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
+					undefined;
+			};
+			// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
+			eventHandle.elem = elem;
+		}
+
+		// Handle multiple events separated by a space
+		types = ( types || "" ).match( core_rnotwhite ) || [""];
+		t = types.length;
+		while ( t-- ) {
+			tmp = rtypenamespace.exec( types[t] ) || [];
+			type = origType = tmp[1];
+			namespaces = ( tmp[2] || "" ).split( "." ).sort();
+
+			// There *must* be a type, no attaching namespace-only handlers
+			if ( !type ) {
+				continue;
+			}
+
+			// If event changes its type, use the special event handlers for the changed type
+			special = jQuery.event.special[ type ] || {};
+
+			// If selector defined, determine special event api type, otherwise given type
+			type = ( selector ? special.delegateType : special.bindType ) || type;
+
+			// Update special based on newly reset type
+			special = jQuery.event.special[ type ] || {};
+
+			// handleObj is passed to all event handlers
+			handleObj = jQuery.extend({
+				type: type,
+				origType: origType,
+				data: data,
+				handler: handler,
+				guid: handler.guid,
+				selector: selector,
+				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
+				namespace: namespaces.join(".")
+			}, handleObjIn );
+
+			// Init the event handler queue if we're the first
+			if ( !(handlers = events[ type ]) ) {
+				handlers = events[ type ] = [];
+				handlers.delegateCount = 0;
+
+				// Only use addEventListener/attachEvent if the special events handler returns false
+				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
+					// Bind the global event handler to the element
+					if ( elem.addEventListener ) {
+						elem.addEventListener( type, eventHandle, false );
+
+					} else if ( elem.attachEvent ) {
+						elem.attachEvent( "on" + type, eventHandle );
+					}
+				}
+			}
+
+			if ( special.add ) {
+				special.add.call( elem, handleObj );
+
+				if ( !handleObj.handler.guid ) {
+					handleObj.handler.guid = handler.guid;
+				}
+			}
+
+			// Add to the element's handler list, delegates in front
+			if ( selector ) {
+				handlers.splice( handlers.delegateCount++, 0, handleObj );
+			} else {
+				handlers.push( handleObj );
+			}
+
+			// Keep track of which events have ever been used, for event optimization
+			jQuery.event.global[ type ] = true;
+		}
+
+		// Nullify elem to prevent memory leaks in IE
+		elem = null;
+	},
+
+	// Detach an event or set of events from an element
+	remove: function( elem, types, handler, selector, mappedTypes ) {
+		var j, handleObj, tmp,
+			origCount, t, events,
+			special, handlers, type,
+			namespaces, origType,
+			elemData = jQuery.hasData( elem ) && jQuery._data( elem );
+
+		if ( !elemData || !(events = elemData.events) ) {
+			return;
+		}
+
+		// Once for each type.namespace in types; type may be omitted
+		types = ( types || "" ).match( core_rnotwhite ) || [""];
+		t = types.length;
+		while ( t-- ) {
+			tmp = rtypenamespace.exec( types[t] ) || [];
+			type = origType = tmp[1];
+			namespaces = ( tmp[2] || "" ).split( "." ).sort();
+
+			// Unbind all events (on this namespace, if provided) for the element
+			if ( !type ) {
+				for ( type in events ) {
+					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
+				}
+				continue;
+			}
+
+			special = jQuery.event.special[ type ] || {};
+			type = ( selector ? special.delegateType : special.bindType ) || type;
+			handlers = events[ type ] || [];
+			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );
+
+			// Remove matching events
+			origCount = j = handlers.length;
+			while ( j-- ) {
+				handleObj = handlers[ j ];
+
+				if ( ( mappedTypes || origType === handleObj.origType ) &&
+					( !handler || handler.guid === handleObj.guid ) &&
+					( !tmp || tmp.test( handleObj.namespace ) ) &&
+					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
+					handlers.splice( j, 1 );
+
+					if ( handleObj.selector ) {
+						handlers.delegateCount--;
+					}
+					if ( special.remove ) {
+						special.remove.call( elem, handleObj );
+					}
+				}
+			}
+
+			// Remove generic event handler if we removed something and no more handlers exist
+			// (avoids potential for endless recursion during removal of special event handlers)
+			if ( origCount && !handlers.length ) {
+				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
+					jQuery.removeEvent( elem, type, elemData.handle );
+				}
+
+				delete events[ type ];
+			}
+		}
+
+		// Remove the expando if it's no longer used
+		if ( jQuery.isEmptyObject( events ) ) {
+			delete elemData.handle;
+
+			// removeData also checks for emptiness and clears the expando if empty
+			// so use it instead of delete
+			jQuery._removeData( elem, "events" );
+		}
+	},
+
+	trigger: function( event, data, elem, onlyHandlers ) {
+		var handle, ontype, cur,
+			bubbleType, special, tmp, i,
+			eventPath = [ elem || document ],
+			type = core_hasOwn.call( event, "type" ) ? event.type : event,
+			namespaces = core_hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];
+
+		cur = tmp = elem = elem || document;
+
+		// Don't do events on text and comment nodes
+		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
+			return;
+		}
+
+		// focus/blur morphs to focusin/out; ensure we're not firing them right now
+		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
+			return;
+		}
+
+		if ( type.indexOf(".") >= 0 ) {
+			// Namespaced trigger; create a regexp to match event type in handle()
+			namespaces = type.split(".");
+			type = namespaces.shift();
+			namespaces.sort();
+		}
+		ontype = type.indexOf(":") < 0 && "on" + type;
+
+		// Caller can pass in a jQuery.Event object, Object, or just an event type string
+		event = event[ jQuery.expando ] ?
+			event :
+			new jQuery.Event( type, typeof event === "object" && event );
+
+		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
+		event.isTrigger = onlyHandlers ? 2 : 3;
+		event.namespace = namespaces.join(".");
+		event.namespace_re = event.namespace ?
+			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
+			null;
+
+		// Clean up the event in case it is being reused
+		event.result = undefined;
+		if ( !event.target ) {
+			event.target = elem;
+		}
+
+		// Clone any incoming data and prepend the event, creating the handler arg list
+		data = data == null ?
+			[ event ] :
+			jQuery.makeArray( data, [ event ] );
+
+		// Allow special events to draw outside the lines
+		special = jQuery.event.special[ type ] || {};
+		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
+			return;
+		}
+
+		// Determine event propagation path in advance, per W3C events spec (#9951)
+		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
+		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {
+
+			bubbleType = special.delegateType || type;
+			if ( !rfocusMorph.test( bubbleType + type ) ) {
+				cur = cur.parentNode;
+			}
+			for ( ; cur; cur = cur.parentNode ) {
+				eventPath.push( cur );
+				tmp = cur;
+			}
+
+			// Only add window if we got to document (e.g., not plain obj or detached DOM)
+			if ( tmp === (elem.ownerDocument || document) ) {
+				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
+			}
+		}
+
+		// Fire handlers on the event path
+		i = 0;
+		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {
+
+			event.type = i > 1 ?
+				bubbleType :
+				special.bindType || type;
+
+			// jQuery handler
+			handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] && jQuery._data( cur, "handle" );
+			if ( handle ) {
+				handle.apply( cur, data );
+			}
+
+			// Native handler
+			handle = ontype && cur[ ontype ];
+			if ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {
+				event.preventDefault();
+			}
+		}
+		event.type = type;
+
+		// If nobody prevented the default action, do it now
+		if ( !onlyHandlers && !event.isDefaultPrevented() ) {
+
+			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
+				jQuery.acceptData( elem ) ) {
+
+				// Call a native DOM method on the target with the same name name as the event.
+				// Can't use an .isFunction() check here because IE6/7 fails that test.
+				// Don't do default actions on window, that's where global variables be (#6170)
+				if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {
+
+					// Don't re-trigger an onFOO event when we call its FOO() method
+					tmp = elem[ ontype ];
+
+					if ( tmp ) {
+						elem[ ontype ] = null;
+					}
+
+					// Prevent re-triggering of the same event, since we already bubbled it above
+					jQuery.event.triggered = type;
+					try {
+						elem[ type ]();
+					} catch ( e ) {
+						// IE<9 dies on focus/blur to hidden element (#1486,#12518)
+						// only reproducible on winXP IE8 native, not IE9 in IE8 mode
+					}
+					jQuery.event.triggered = undefined;
+
+					if ( tmp ) {
+						elem[ ontype ] = tmp;
+					}
+				}
+			}
+		}
+
+		return event.result;
+	},
+
+	dispatch: function( event ) {
+
+		// Make a writable jQuery.Event from the native event object
+		event = jQuery.event.fix( event );
+
+		var i, ret, handleObj, matched, j,
+			handlerQueue = [],
+			args = core_slice.call( arguments ),
+			handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
+			special = jQuery.event.special[ event.type ] || {};
+
+		// Use the fix-ed jQuery.Event rather than the (read-only) native event
+		args[0] = event;
+		event.delegateTarget = this;
+
+		// Call the preDispatch hook for the mapped type, and let it bail if desired
+		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
+			return;
+		}
+
+		// Determine handlers
+		handlerQueue = jQuery.event.handlers.call( this, event, handlers );
+
+		// Run delegates first; they may want to stop propagation beneath us
+		i = 0;
+		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
+			event.currentTarget = matched.elem;
+
+			j = 0;
+			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {
+
+				// Triggered event must either 1) have no namespace, or
+				// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
+				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {
+
+					event.handleObj = handleObj;
+					event.data = handleObj.data;
+
+					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
+							.apply( matched.elem, args );
+
+					if ( ret !== undefined ) {
+						if ( (event.result = ret) === false ) {
+							event.preventDefault();
+							event.stopPropagation();
+						}
+					}
+				}
+			}
+		}
+
+		// Call the postDispatch hook for the mapped type
+		if ( special.postDispatch ) {
+			special.postDispatch.call( this, event );
+		}
+
+		return event.result;
+	},
+
+	handlers: function( event, handlers ) {
+		var sel, handleObj, matches, i,
+			handlerQueue = [],
+			delegateCount = handlers.delegateCount,
+			cur = event.target;
+
+		// Find delegate handlers
+		// Black-hole SVG <use> instance trees (#13180)
+		// Avoid non-left-click bubbling in Firefox (#3861)
+		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {
+
+			/* jshint eqeqeq: false */
+			for ( ; cur != this; cur = cur.parentNode || this ) {
+				/* jshint eqeqeq: true */
+
+				// Don't check non-elements (#13208)
+				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
+				if ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click") ) {
+					matches = [];
+					for ( i = 0; i < delegateCount; i++ ) {
+						handleObj = handlers[ i ];
+
+						// Don't conflict with Object.prototype properties (#13203)
+						sel = handleObj.selector + " ";
+
+						if ( matches[ sel ] === undefined ) {
+							matches[ sel ] = handleObj.needsContext ?
+								jQuery( sel, this ).index( cur ) >= 0 :
+								jQuery.find( sel, this, null, [ cur ] ).length;
+						}
+						if ( matches[ sel ] ) {
+							matches.push( handleObj );
+						}
+					}
+					if ( matches.length ) {
+						handlerQueue.push({ elem: cur, handlers: matches });
+					}
+				}
+			}
+		}
+
+		// Add the remaining (directly-bound) handlers
+		if ( delegateCount < handlers.length ) {
+			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
+		}
+
+		return handlerQueue;
+	},
+
+	fix: function( event ) {
+		if ( event[ jQuery.expando ] ) {
+			return event;
+		}
+
+		// Create a writable copy of the event object and normalize some properties
+		var i, prop, copy,
+			type = event.type,
+			originalEvent = event,
+			fixHook = this.fixHooks[ type ];
+
+		if ( !fixHook ) {
+			this.fixHooks[ type ] = fixHook =
+				rmouseEvent.test( type ) ? this.mouseHooks :
+				rkeyEvent.test( type ) ? this.keyHooks :
+				{};
+		}
+		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;
+
+		event = new jQuery.Event( originalEvent );
+
+		i = copy.length;
+		while ( i-- ) {
+			prop = copy[ i ];
+			event[ prop ] = originalEvent[ prop ];
+		}
+
+		// Support: IE<9
+		// Fix target property (#1925)
+		if ( !event.target ) {
+			event.target = originalEvent.srcElement || document;
+		}
+
+		// Support: Chrome 23+, Safari?
+		// Target should not be a text node (#504, #13143)
+		if ( event.target.nodeType === 3 ) {
+			event.target = event.target.parentNode;
+		}
+
+		// Support: IE<9
+		// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
+		event.metaKey = !!event.metaKey;
+
+		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
+	},
+
+	// Includes some event props shared by KeyEvent and MouseEvent
+	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
+
+	fixHooks: {},
+
+	keyHooks: {
+		props: "char charCode key keyCode".split(" "),
+		filter: function( event, original ) {
+
+			// Add which for key events
+			if ( event.which == null ) {
+				event.which = original.charCode != null ? original.charCode : original.keyCode;
+			}
+
+			return event;
+		}
+	},
+
+	mouseHooks: {
+		props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
+		filter: function( event, original ) {
+			var body, eventDoc, doc,
+				button = original.button,
+				fromElement = original.fromElement;
+
+			// Calculate pageX/Y if missing and clientX/Y available
+			if ( event.pageX == null && original.clientX != null ) {
+				eventDoc = event.target.ownerDocument || document;
+				doc = eventDoc.documentElement;
+				body = eventDoc.body;
+
+				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
+				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
+			}
+
+			// Add relatedTarget, if necessary
+			if ( !event.relatedTarget && fromElement ) {
+				event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
+			}
+
+			// Add which for click: 1 === left; 2 === middle; 3 === right
+			// Note: button is not normalized, so don't use it
+			if ( !event.which && button !== undefined ) {
+				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
+			}
+
+			return event;
+		}
+	},
+
+	special: {
+		load: {
+			// Prevent triggered image.load events from bubbling to window.load
+			noBubble: true
+		},
+		focus: {
+			// Fire native event if possible so blur/focus sequence is correct
+			trigger: function() {
+				if ( this !== safeActiveElement() && this.focus ) {
+					try {
+						this.focus();
+						return false;
+					} catch ( e ) {
+						// Support: IE<9
+						// If we error on focus to hidden element (#1486, #12518),
+						// let .trigger() run the handlers
+					}
+				}
+			},
+			delegateType: "focusin"
+		},
+		blur: {
+			trigger: function() {
+				if ( this === safeActiveElement() && this.blur ) {
+					this.blur();
+					return false;
+				}
+			},
+			delegateType: "focusout"
+		},
+		click: {
+			// For checkbox, fire native event so checked state will be right
+			trigger: function() {
+				if ( jQuery.nodeName( this, "input" ) && this.type === "checkbox" && this.click ) {
+					this.click();
+					return false;
+				}
+			},
+
+			// For cross-browser consistency, don't fire native .click() on links
+			_default: function( event ) {
+				return jQuery.nodeName( event.target, "a" );
+			}
+		},
+
+		beforeunload: {
+			postDispatch: function( event ) {
+
+				// Even when returnValue equals to undefined Firefox will still show alert
+				if ( event.result !== undefined ) {
+					event.originalEvent.returnValue = event.result;
+				}
+			}
+		}
+	},
+
+	simulate: function( type, elem, event, bubble ) {
+		// Piggyback on a donor event to simulate a different one.
+		// Fake originalEvent to avoid donor's stopPropagation, but if the
+		// simulated event prevents default then we do the same on the donor.
+		var e = jQuery.extend(
+			new jQuery.Event(),
+			event,
+			{
+				type: type,
+				isSimulated: true,
+				originalEvent: {}
+			}
+		);
+		if ( bubble ) {
+			jQuery.event.trigger( e, null, elem );
+		} else {
+			jQuery.event.dispatch.call( elem, e );
+		}
+		if ( e.isDefaultPrevented() ) {
+			event.preventDefault();
+		}
+	}
+};
+
+jQuery.removeEvent = document.removeEventListener ?
+	function( elem, type, handle ) {
+		if ( elem.removeEventListener ) {
+			elem.removeEventListener( type, handle, false );
+		}
+	} :
+	function( elem, type, handle ) {
+		var name = "on" + type;
+
+		if ( elem.detachEvent ) {
+
+			// #8545, #7054, preventing memory leaks for custom events in IE6-8
+			// detachEvent needed property on element, by name of that event, to properly expose it to GC
+			if ( typeof elem[ name ] === core_strundefined ) {
+				elem[ name ] = null;
+			}
+
+			elem.detachEvent( name, handle );
+		}
+	};
+
+jQuery.Event = function( src, props ) {
+	// Allow instantiation without the 'new' keyword
+	if ( !(this instanceof jQuery.Event) ) {
+		return new jQuery.Event( src, props );
+	}
+
+	// Event object
+	if ( src && src.type ) {
+		this.originalEvent = src;
+		this.type = src.type;
+
+		// Events bubbling up the document may have been marked as prevented
+		// by a handler lower down the tree; reflect the correct value.
+		this.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||
+			src.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;
+
+	// Event type
+	} else {
+		this.type = src;
+	}
+
+	// Put explicitly provided properties onto the event object
+	if ( props ) {
+		jQuery.extend( this, props );
+	}
+
+	// Create a timestamp if incoming event doesn't have one
+	this.timeStamp = src && src.timeStamp || jQuery.now();
+
+	// Mark it as fixed
+	this[ jQuery.expando ] = true;
+};
+
+// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
+// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
+jQuery.Event.prototype = {
+	isDefaultPrevented: returnFalse,
+	isPropagationStopped: returnFalse,
+	isImmediatePropagationStopped: returnFalse,
+
+	preventDefault: function() {
+		var e = this.originalEvent;
+
+		this.isDefaultPrevented = returnTrue;
+		if ( !e ) {
+			return;
+		}
+
+		// If preventDefault exists, run it on the original event
+		if ( e.preventDefault ) {
+			e.preventDefault();
+
+		// Support: IE
+		// Otherwise set the returnValue property of the original event to false
+		} else {
+			e.returnValue = false;
+		}
+	},
+	stopPropagation: function() {
+		var e = this.originalEvent;
+
+		this.isPropagationStopped = returnTrue;
+		if ( !e ) {
+			return;
+		}
+		// If stopPropagation exists, run it on the original event
+		if ( e.stopPropagation ) {
+			e.stopPropagation();
+		}
+
+		// Support: IE
+		// Set the cancelBubble property of the original event to true
+		e.cancelBubble = true;
+	},
+	stopImmediatePropagation: function() {
+		this.isImmediatePropagationStopped = returnTrue;
+		this.stopPropagation();
+	}
+};
+
+// Create mouseenter/leave events using mouseover/out and event-time checks
+jQuery.each({
+	mouseenter: "mouseover",
+	mouseleave: "mouseout"
+}, function( orig, fix ) {
+	jQuery.event.special[ orig ] = {
+		delegateType: fix,
+		bindType: fix,
+
+		handle: function( event ) {
+			var ret,
+				target = this,
+				related = event.relatedTarget,
+				handleObj = event.handleObj;
+
+			// For mousenter/leave call the handler if related is outside the target.
+			// NB: No relatedTarget if the mouse left/entered the browser window
+			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
+				event.type = handleObj.origType;
+				ret = handleObj.handler.apply( this, arguments );
+				event.type = fix;
+			}
+			return ret;
+		}
+	};
+});
+
+// IE submit delegation
+if ( !jQuery.support.submitBubbles ) {
+
+	jQuery.event.special.submit = {
+		setup: function() {
+			// Only need this for delegated form submit events
+			if ( jQuery.nodeName( this, "form" ) ) {
+				return false;
+			}
+
+			// Lazy-add a submit handler when a descendant form may potentially be submitted
+			jQuery.event.add( this, "click._submit keypress._submit", function( e ) {
+				// Node name check avoids a VML-related crash in IE (#9807)
+				var elem = e.target,
+					form = jQuery.nodeName( elem, "input" ) || jQuery.nodeName( elem, "button" ) ? elem.form : undefined;
+				if ( form && !jQuery._data( form, "submitBubbles" ) ) {
+					jQuery.event.add( form, "submit._submit", function( event ) {
+						event._submit_bubble = true;
+					});
+					jQuery._data( form, "submitBubbles", true );
+				}
+			});
+			// return undefined since we don't need an event listener
+		},
+
+		postDispatch: function( event ) {
+			// If form was submitted by the user, bubble the event up the tree
+			if ( event._submit_bubble ) {
+				delete event._submit_bubble;
+				if ( this.parentNode && !event.isTrigger ) {
+					jQuery.event.simulate( "submit", this.parentNode, event, true );
+				}
+			}
+		},
+
+		teardown: function() {
+			// Only need this for delegated form submit events
+			if ( jQuery.nodeName( this, "form" ) ) {
+				return false;
+			}
+
+			// Remove delegated handlers; cleanData eventually reaps submit handlers attached above
+			jQuery.event.remove( this, "._submit" );
+		}
+	};
+}
+
+// IE change delegation and checkbox/radio fix
+if ( !jQuery.support.changeBubbles ) {
+
+	jQuery.event.special.change = {
+
+		setup: function() {
+
+			if ( rformElems.test( this.nodeName ) ) {
+				// IE doesn't fire change on a check/radio until blur; trigger it on click
+				// after a propertychange. Eat the blur-change in special.change.handle.
+				// This still fires onchange a second time for check/radio after blur.
+				if ( this.type === "checkbox" || this.type === "radio" ) {
+					jQuery.event.add( this, "propertychange._change", function( event ) {
+						if ( event.originalEvent.propertyName === "checked" ) {
+							this._just_changed = true;
+						}
+					});
+					jQuery.event.add( this, "click._change", function( event ) {
+						if ( this._just_changed && !event.isTrigger ) {
+							this._just_changed = false;
+						}
+						// Allow triggered, simulated change events (#11500)
+						jQuery.event.simulate( "change", this, event, true );
+					});
+				}
+				return false;
+			}
+			// Delegated event; lazy-add a change handler on descendant inputs
+			jQuery.event.add( this, "beforeactivate._change", function( e ) {
+				var elem = e.target;
+
+				if ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, "changeBubbles" ) ) {
+					jQuery.event.add( elem, "change._change", function( event ) {
+						if ( this.parentNode && !event.isSimulated && !event.isTrigger ) {
+							jQuery.event.simulate( "change", this.parentNode, event, true );
+						}
+					});
+					jQuery._data( elem, "changeBubbles", true );
+				}
+			});
+		},
+
+		handle: function( event ) {
+			var elem = event.target;
+
+			// Swallow native change events from checkbox/radio, we already triggered them above
+			if ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox") ) {
+				return event.handleObj.handler.apply( this, arguments );
+			}
+		},
+
+		teardown: function() {
+			jQuery.event.remove( this, "._change" );
+
+			return !rformElems.test( this.nodeName );
+		}
+	};
+}
+
+// Create "bubbling" focus and blur events
+if ( !jQuery.support.focusinBubbles ) {
+	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {
+
+		// Attach a single capturing handler while someone wants focusin/focusout
+		var attaches = 0,
+			handler = function( event ) {
+				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
+			};
+
+		jQuery.event.special[ fix ] = {
+			setup: function() {
+				if ( attaches++ === 0 ) {
+					document.addEventListener( orig, handler, true );
+				}
+			},
+			teardown: function() {
+				if ( --attaches === 0 ) {
+					document.removeEventListener( orig, handler, true );
+				}
+			}
+		};
+	});
+}
+
+jQuery.fn.extend({
+
+	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
+		var type, origFn;
+
+		// Types can be a map of types/handlers
+		if ( typeof types === "object" ) {
+			// ( types-Object, selector, data )
+			if ( typeof selector !== "string" ) {
+				// ( types-Object, data )
+				data = data || selector;
+				selector = undefined;
+			}
+			for ( type in types ) {
+				this.on( type, selector, data, types[ type ], one );
+			}
+			return this;
+		}
+
+		if ( data == null && fn == null ) {
+			// ( types, fn )
+			fn = selector;
+			data = selector = undefined;
+		} else if ( fn == null ) {
+			if ( typeof selector === "string" ) {
+				// ( types, selector, fn )
+				fn = data;
+				data = undefined;
+			} else {
+				// ( types, data, fn )
+				fn = data;
+				data = selector;
+				selector = undefined;
+			}
+		}
+		if ( fn === false ) {
+			fn = returnFalse;
+		} else if ( !fn ) {
+			return this;
+		}
+
+		if ( one === 1 ) {
+			origFn = fn;
+			fn = function( event ) {
+				// Can use an empty set, since event contains the info
+				jQuery().off( event );
+				return origFn.apply( this, arguments );
+			};
+			// Use same guid so caller can remove using origFn
+			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
+		}
+		return this.each( function() {
+			jQuery.event.add( this, types, fn, data, selector );
+		});
+	},
+	one: function( types, selector, data, fn ) {
+		return this.on( types, selector, data, fn, 1 );
+	},
+	off: function( types, selector, fn ) {
+		var handleObj, type;
+		if ( types && types.preventDefault && types.handleObj ) {
+			// ( event )  dispatched jQuery.Event
+			handleObj = types.handleObj;
+			jQuery( types.delegateTarget ).off(
+				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
+				handleObj.selector,
+				handleObj.handler
+			);
+			return this;
+		}
+		if ( typeof types === "object" ) {
+			// ( types-object [, selector] )
+			for ( type in types ) {
+				this.off( type, selector, types[ type ] );
+			}
+			return this;
+		}
+		if ( selector === false || typeof selector === "function" ) {
+			// ( types [, fn] )
+			fn = selector;
+			selector = undefined;
+		}
+		if ( fn === false ) {
+			fn = returnFalse;
+		}
+		return this.each(function() {
+			jQuery.event.remove( this, types, fn, selector );
+		});
+	},
+
+	trigger: function( type, data ) {
+		return this.each(function() {
+			jQuery.event.trigger( type, data, this );
+		});
+	},
+	triggerHandler: function( type, data ) {
+		var elem = this[0];
+		if ( elem ) {
+			return jQuery.event.trigger( type, data, elem, true );
+		}
+	}
+});
+var isSimple = /^.[^:#\[\.,]*$/,
+	rparentsprev = /^(?:parents|prev(?:Until|All))/,
+	rneedsContext = jQuery.expr.match.needsContext,
+	// methods guaranteed to produce a unique set when starting from a unique set
+	guaranteedUnique = {
+		children: true,
+		contents: true,
+		next: true,
+		prev: true
+	};
+
+jQuery.fn.extend({
+	find: function( selector ) {
+		var i,
+			ret = [],
+			self = this,
+			len = self.length;
+
+		if ( typeof selector !== "string" ) {
+			return this.pushStack( jQuery( selector ).filter(function() {
+				for ( i = 0; i < len; i++ ) {
+					if ( jQuery.contains( self[ i ], this ) ) {
+						return true;
+					}
+				}
+			}) );
+		}
+
+		for ( i = 0; i < len; i++ ) {
+			jQuery.find( selector, self[ i ], ret );
+		}
+
+		// Needed because $( selector, context ) becomes $( context ).find( selector )
+		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
+		ret.selector = this.selector ? this.selector + " " + selector : selector;
+		return ret;
+	},
+
+	has: function( target ) {
+		var i,
+			targets = jQuery( target, this ),
+			len = targets.length;
+
+		return this.filter(function() {
+			for ( i = 0; i < len; i++ ) {
+				if ( jQuery.contains( this, targets[i] ) ) {
+					return true;
+				}
+			}
+		});
+	},
+
+	not: function( selector ) {
+		return this.pushStack( winnow(this, selector || [], true) );
+	},
+
+	filter: function( selector ) {
+		return this.pushStack( winnow(this, selector || [], false) );
+	},
+
+	is: function( selector ) {
+		return !!winnow(
+			this,
+
+			// If this is a positional/relative selector, check membership in the returned set
+			// so $("p:first").is("p:last") won't return true for a doc with two "p".
+			typeof selector === "string" && rneedsContext.test( selector ) ?
+				jQuery( selector ) :
+				selector || [],
+			false
+		).length;
+	},
+
+	closest: function( selectors, context ) {
+		var cur,
+			i = 0,
+			l = this.length,
+			ret = [],
+			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
+				jQuery( selectors, context || this.context ) :
+				0;
+
+		for ( ; i < l; i++ ) {
+			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
+				// Always skip document fragments
+				if ( cur.nodeType < 11 && (pos ?
+					pos.index(cur) > -1 :
+
+					// Don't pass non-elements to Sizzle
+					cur.nodeType === 1 &&
+						jQuery.find.matchesSelector(cur, selectors)) ) {
+
+					cur = ret.push( cur );
+					break;
+				}
+			}
+		}
+
+		return this.pushStack( ret.length > 1 ? jQuery.unique( ret ) : ret );
+	},
+
+	// Determine the position of an element within
+	// the matched set of elements
+	index: function( elem ) {
+
+		// No argument, return index in parent
+		if ( !elem ) {
+			return ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;
+		}
+
+		// index in selector
+		if ( typeof elem === "string" ) {
+			return jQuery.inArray( this[0], jQuery( elem ) );
+		}
+
+		// Locate the position of the desired element
+		return jQuery.inArray(
+			// If it receives a jQuery object, the first element is used
+			elem.jquery ? elem[0] : elem, this );
+	},
+
+	add: function( selector, context ) {
+		var set = typeof selector === "string" ?
+				jQuery( selector, context ) :
+				jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
+			all = jQuery.merge( this.get(), set );
+
+		return this.pushStack( jQuery.unique(all) );
+	},
+
+	addBack: function( selector ) {
+		return this.add( selector == null ?
+			this.prevObject : this.prevObject.filter(selector)
+		);
+	}
+});
+
+function sibling( cur, dir ) {
+	do {
+		cur = cur[ dir ];
+	} while ( cur && cur.nodeType !== 1 );
+
+	return cur;
+}
+
+jQuery.each({
+	parent: function( elem ) {
+		var parent = elem.parentNode;
+		return parent && parent.nodeType !== 11 ? parent : null;
+	},
+	parents: function( elem ) {
+		return jQuery.dir( elem, "parentNode" );
+	},
+	parentsUntil: function( elem, i, until ) {
+		return jQuery.dir( elem, "parentNode", until );
+	},
+	next: function( elem ) {
+		return sibling( elem, "nextSibling" );
+	},
+	prev: function( elem ) {
+		return sibling( elem, "previousSibling" );
+	},
+	nextAll: function( elem ) {
+		return jQuery.dir( elem, "nextSibling" );
+	},
+	prevAll: function( elem ) {
+		return jQuery.dir( elem, "previousSibling" );
+	},
+	nextUntil: function( elem, i, until ) {
+		return jQuery.dir( elem, "nextSibling", until );
+	},
+	prevUntil: function( elem, i, until ) {
+		return jQuery.dir( elem, "previousSibling", until );
+	},
+	siblings: function( elem ) {
+		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
+	},
+	children: function( elem ) {
+		return jQuery.sibling( elem.firstChild );
+	},
+	contents: function( elem ) {
+		return jQuery.nodeName( elem, "iframe" ) ?
+			elem.contentDocument || elem.contentWindow.document :
+			jQuery.merge( [], elem.childNodes );
+	}
+}, function( name, fn ) {
+	jQuery.fn[ name ] = function( until, selector ) {
+		var ret = jQuery.map( this, fn, until );
+
+		if ( name.slice( -5 ) !== "Until" ) {
+			selector = until;
+		}
+
+		if ( selector && typeof selector === "string" ) {
+			ret = jQuery.filter( selector, ret );
+		}
+
+		if ( this.length > 1 ) {
+			// Remove duplicates
+			if ( !guaranteedUnique[ name ] ) {
+				ret = jQuery.unique( ret );
+			}
+
+			// Reverse order for parents* and prev-derivatives
+			if ( rparentsprev.test( name ) ) {
+				ret = ret.reverse();
+			}
+		}
+
+		return this.pushStack( ret );
+	};
+});
+
+jQuery.extend({
+	filter: function( expr, elems, not ) {
+		var elem = elems[ 0 ];
+
+		if ( not ) {
+			expr = ":not(" + expr + ")";
+		}
+
+		return elems.length === 1 && elem.nodeType === 1 ?
+			jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
+			jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
+				return elem.nodeType === 1;
+			}));
+	},
+
+	dir: function( elem, dir, until ) {
+		var matched = [],
+			cur = elem[ dir ];
+
+		while ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {
+			if ( cur.nodeType === 1 ) {
+				matched.push( cur );
+			}
+			cur = cur[dir];
+		}
+		return matched;
+	},
+
+	sibling: function( n, elem ) {
+		var r = [];
+
+		for ( ; n; n = n.nextSibling ) {
+			if ( n.nodeType === 1 && n !== elem ) {
+				r.push( n );
+			}
+		}
+
+		return r;
+	}
+});
+
+// Implement the identical functionality for filter and not
+function winnow( elements, qualifier, not ) {
+	if ( jQuery.isFunction( qualifier ) ) {
+		return jQuery.grep( elements, function( elem, i ) {
+			/* jshint -W018 */
+			return !!qualifier.call( elem, i, elem ) !== not;
+		});
+
+	}
+
+	if ( qualifier.nodeType ) {
+		return jQuery.grep( elements, function( elem ) {
+			return ( elem === qualifier ) !== not;
+		});
+
+	}
+
+	if ( typeof qualifier === "string" ) {
+		if ( isSimple.test( qualifier ) ) {
+			return jQuery.filter( qualifier, elements, not );
+		}
+
+		qualifier = jQuery.filter( qualifier, elements );
+	}
+
+	return jQuery.grep( elements, function( elem ) {
+		return ( jQuery.inArray( elem, qualifier ) >= 0 ) !== not;
+	});
+}
+function createSafeFragment( document ) {
+	var list = nodeNames.split( "|" ),
+		safeFrag = document.createDocumentFragment();
+
+	if ( safeFrag.createElement ) {
+		while ( list.length ) {
+			safeFrag.createElement(
+				list.pop()
+			);
+		}
+	}
+	return safeFrag;
+}
+
+var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
+		"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
+	rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
+	rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"),
+	rleadingWhitespace = /^\s+/,
+	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
+	rtagName = /<([\w:]+)/,
+	rtbody = /<tbody/i,
+	rhtml = /<|&#?\w+;/,
+	rnoInnerhtml = /<(?:script|style|link)/i,
+	manipulation_rcheckableType = /^(?:checkbox|radio)$/i,
+	// checked="checked" or checked
+	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
+	rscriptType = /^$|\/(?:java|ecma)script/i,
+	rscriptTypeMasked = /^true\/(.*)/,
+	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
+
+	// We have to close these tags to support XHTML (#13200)
+	wrapMap = {
+		option: [ 1, "<select multiple='multiple'>", "</select>" ],
+		legend: [ 1, "<fieldset>", "</fieldset>" ],
+		area: [ 1, "<map>", "</map>" ],
+		param: [ 1, "<object>", "</object>" ],
+		thead: [ 1, "<table>", "</table>" ],
+		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
+		col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
+		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
+
+		// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
+		// unless wrapped in a div with non-breaking characters in front of it.
+		_default: jQuery.support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>"  ]
+	},
+	safeFragment = createSafeFragment( document ),
+	fragmentDiv = safeFragment.appendChild( document.createElement("div") );
+
+wrapMap.optgroup = wrapMap.option;
+wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
+wrapMap.th = wrapMap.td;
+
+jQuery.fn.extend({
+	text: function( value ) {
+		return jQuery.access( this, function( value ) {
+			return value === undefined ?
+				jQuery.text( this ) :
+				this.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );
+		}, null, value, arguments.length );
+	},
+
+	append: function() {
+		return this.domManip( arguments, function( elem ) {
+			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
+				var target = manipulationTarget( this, elem );
+				target.appendChild( elem );
+			}
+		});
+	},
+
+	prepend: function() {
+		return this.domManip( arguments, function( elem ) {
+			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
+				var target = manipulationTarget( this, elem );
+				target.insertBefore( elem, target.firstChild );
+			}
+		});
+	},
+
+	before: function() {
+		return this.domManip( arguments, function( elem ) {
+			if ( this.parentNode ) {
+				this.parentNode.insertBefore( elem, this );
+			}
+		});
+	},
+
+	after: function() {
+		return this.domManip( arguments, function( elem ) {
+			if ( this.parentNode ) {
+				this.parentNode.insertBefore( elem, this.nextSibling );
+			}
+		});
+	},
+
+	// keepData is for internal use only--do not document
+	remove: function( selector, keepData ) {
+		var elem,
+			elems = selector ? jQuery.filter( selector, this ) : this,
+			i = 0;
+
+		for ( ; (elem = elems[i]) != null; i++ ) {
+
+			if ( !keepData && elem.nodeType === 1 ) {
+				jQuery.cleanData( getAll( elem ) );
+			}
+
+			if ( elem.parentNode ) {
+				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
+					setGlobalEval( getAll( elem, "script" ) );
+				}
+				elem.parentNode.removeChild( elem );
+			}
+		}
+
+		return this;
+	},
+
+	empty: function() {
+		var elem,
+			i = 0;
+
+		for ( ; (elem = this[i]) != null; i++ ) {
+			// Remove element nodes and prevent memory leaks
+			if ( elem.nodeType === 1 ) {
+				jQuery.cleanData( getAll( elem, false ) );
+			}
+
+			// Remove any remaining nodes
+			while ( elem.firstChild ) {
+				elem.removeChild( elem.firstChild );
+			}
+
+			// If this is a select, ensure that it displays empty (#12336)
+			// Support: IE<9
+			if ( elem.options && jQuery.nodeName( elem, "select" ) ) {
+				elem.options.length = 0;
+			}
+		}
+
+		return this;
+	},
+
+	clone: function( dataAndEvents, deepDataAndEvents ) {
+		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
+		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;
+
+		return this.map( function () {
+			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
+		});
+	},
+
+	html: function( value ) {
+		return jQuery.access( this, function( value ) {
+			var elem = this[0] || {},
+				i = 0,
+				l = this.length;
+
+			if ( value === undefined ) {
+				return elem.nodeType === 1 ?
+					elem.innerHTML.replace( rinlinejQuery, "" ) :
+					undefined;
+			}
+
+			// See if we can take a shortcut and just use innerHTML
+			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
+				( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&
+				( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&
+				!wrapMap[ ( rtagName.exec( value ) || ["", ""] )[1].toLowerCase() ] ) {
+
+				value = value.replace( rxhtmlTag, "<$1></$2>" );
+
+				try {
+					for (; i < l; i++ ) {
+						// Remove element nodes and prevent memory leaks
+						elem = this[i] || {};
+						if ( elem.nodeType === 1 ) {
+							jQuery.cleanData( getAll( elem, false ) );
+							elem.innerHTML = value;
+						}
+					}
+
+					elem = 0;
+
+				// If using innerHTML throws an exception, use the fallback method
+				} catch(e) {}
+			}
+
+			if ( elem ) {
+				this.empty().append( value );
+			}
+		}, null, value, arguments.length );
+	},
+
+	replaceWith: function() {
+		var
+			// Snapshot the DOM in case .domManip sweeps something relevant into its fragment
+			args = jQuery.map( this, function( elem ) {
+				return [ elem.nextSibling, elem.parentNode ];
+			}),
+			i = 0;
+
+		// Make the changes, replacing each context element with the new content
+		this.domManip( arguments, function( elem ) {
+			var next = args[ i++ ],
+				parent = args[ i++ ];
+
+			if ( parent ) {
+				// Don't use the snapshot next if it has moved (#13810)
+				if ( next && next.parentNode !== parent ) {
+					next = this.nextSibling;
+				}
+				jQuery( this ).remove();
+				parent.insertBefore( elem, next );
+			}
+		// Allow new content to include elements from the context set
+		}, true );
+
+		// Force removal if there was no new content (e.g., from empty arguments)
+		return i ? this : this.remove();
+	},
+
+	detach: function( selector ) {
+		return this.remove( selector, true );
+	},
+
+	domManip: function( args, callback, allowIntersection ) {
+
+		// Flatten any nested arrays
+		args = core_concat.apply( [], args );
+
+		var first, node, hasScripts,
+			scripts, doc, fragment,
+			i = 0,
+			l = this.length,
+			set = this,
+			iNoClone = l - 1,
+			value = args[0],
+			isFunction = jQuery.isFunction( value );
+
+		// We can't cloneNode fragments that contain checked, in WebKit
+		if ( isFunction || !( l <= 1 || typeof value !== "string" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {
+			return this.each(function( index ) {
+				var self = set.eq( index );
+				if ( isFunction ) {
+					args[0] = value.call( this, index, self.html() );
+				}
+				self.domManip( args, callback, allowIntersection );
+			});
+		}
+
+		if ( l ) {
+			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, !allowIntersection && this );
+			first = fragment.firstChild;
+
+			if ( fragment.childNodes.length === 1 ) {
+				fragment = first;
+			}
+
+			if ( first ) {
+				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
+				hasScripts = scripts.length;
+
+				// Use the original fragment for the last item instead of the first because it can end up
+				// being emptied incorrectly in certain situations (#8070).
+				for ( ; i < l; i++ ) {
+					node = fragment;
+
+					if ( i !== iNoClone ) {
+						node = jQuery.clone( node, true, true );
+
+						// Keep references to cloned scripts for later restoration
+						if ( hasScripts ) {
+							jQuery.merge( scripts, getAll( node, "script" ) );
+						}
+					}
+
+					callback.call( this[i], node, i );
+				}
+
+				if ( hasScripts ) {
+					doc = scripts[ scripts.length - 1 ].ownerDocument;
+
+					// Reenable scripts
+					jQuery.map( scripts, restoreScript );
+
+					// Evaluate executable scripts on first document insertion
+					for ( i = 0; i < hasScripts; i++ ) {
+						node = scripts[ i ];
+						if ( rscriptType.test( node.type || "" ) &&
+							!jQuery._data( node, "globalEval" ) && jQuery.contains( doc, node ) ) {
+
+							if ( node.src ) {
+								// Hope ajax is available...
+								jQuery._evalUrl( node.src );
+							} else {
+								jQuery.globalEval( ( node.text || node.textContent || node.innerHTML || "" ).replace( rcleanScript, "" ) );
+							}
+						}
+					}
+				}
+
+				// Fix #11809: Avoid leaking memory
+				fragment = first = null;
+			}
+		}
+
+		return this;
+	}
+});
+
+// Support: IE<8
+// Manipulating tables requires a tbody
+function manipulationTarget( elem, content ) {
+	return jQuery.nodeName( elem, "table" ) &&
+		jQuery.nodeName( content.nodeType === 1 ? content : content.firstChild, "tr" ) ?
+
+		elem.getElementsByTagName("tbody")[0] ||
+			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
+		elem;
+}
+
+// Replace/restore the type attribute of script elements for safe DOM manipulation
+function disableScript( elem ) {
+	elem.type = (jQuery.find.attr( elem, "type" ) !== null) + "/" + elem.type;
+	return elem;
+}
+function restoreScript( elem ) {
+	var match = rscriptTypeMasked.exec( elem.type );
+	if ( match ) {
+		elem.type = match[1];
+	} else {
+		elem.removeAttribute("type");
+	}
+	return elem;
+}
+
+// Mark scripts as having already been evaluated
+function setGlobalEval( elems, refElements ) {
+	var elem,
+		i = 0;
+	for ( ; (elem = elems[i]) != null; i++ ) {
+		jQuery._data( elem, "globalEval", !refElements || jQuery._data( refElements[i], "globalEval" ) );
+	}
+}
+
+function cloneCopyEvent( src, dest ) {
+
+	if ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {
+		return;
+	}
+
+	var type, i, l,
+		oldData = jQuery._data( src ),
+		curData = jQuery._data( dest, oldData ),
+		events = oldData.events;
+
+	if ( events ) {
+		delete curData.handle;
+		curData.events = {};
+
+		for ( type in events ) {
+			for ( i = 0, l = events[ type ].length; i < l; i++ ) {
+				jQuery.event.add( dest, type, events[ type ][ i ] );
+			}
+		}
+	}
+
+	// make the cloned public data object a copy from the original
+	if ( curData.data ) {
+		curData.data = jQuery.extend( {}, curData.data );
+	}
+}
+
+function fixCloneNodeIssues( src, dest ) {
+	var nodeName, e, data;
+
+	// We do not need to do anything for non-Elements
+	if ( dest.nodeType !== 1 ) {
+		return;
+	}
+
+	nodeName = dest.nodeName.toLowerCase();
+
+	// IE6-8 copies events bound via attachEvent when using cloneNode.
+	if ( !jQuery.support.noCloneEvent && dest[ jQuery.expando ] ) {
+		data = jQuery._data( dest );
+
+		for ( e in data.events ) {
+			jQuery.removeEvent( dest, e, data.handle );
+		}
+
+		// Event data gets referenced instead of copied if the expando gets copied too
+		dest.removeAttribute( jQuery.expando );
+	}
+
+	// IE blanks contents when cloning scripts, and tries to evaluate newly-set text
+	if ( nodeName === "script" && dest.text !== src.text ) {
+		disableScript( dest ).text = src.text;
+		restoreScript( dest );
+
+	// IE6-10 improperly clones children of object elements using classid.
+	// IE10 throws NoModificationAllowedError if parent is null, #12132.
+	} else if ( nodeName === "object" ) {
+		if ( dest.parentNode ) {
+			dest.outerHTML = src.outerHTML;
+		}
+
+		// This path appears unavoidable for IE9. When cloning an object
+		// element in IE9, the outerHTML strategy above is not sufficient.
+		// If the src has innerHTML and the destination does not,
+		// copy the src.innerHTML into the dest.innerHTML. #10324
+		if ( jQuery.support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {
+			dest.innerHTML = src.innerHTML;
+		}
+
+	} else if ( nodeName === "input" && manipulation_rcheckableType.test( src.type ) ) {
+		// IE6-8 fails to persist the checked state of a cloned checkbox
+		// or radio button. Worse, IE6-7 fail to give the cloned element
+		// a checked appearance if the defaultChecked value isn't also set
+
+		dest.defaultChecked = dest.checked = src.checked;
+
+		// IE6-7 get confused and end up setting the value of a cloned
+		// checkbox/radio button to an empty string instead of "on"
+		if ( dest.value !== src.value ) {
+			dest.value = src.value;
+		}
+
+	// IE6-8 fails to return the selected option to the default selected
+	// state when cloning options
+	} else if ( nodeName === "option" ) {
+		dest.defaultSelected = dest.selected = src.defaultSelected;
+
+	// IE6-8 fails to set the defaultValue to the correct value when
+	// cloning other types of input fields
+	} else if ( nodeName === "input" || nodeName === "textarea" ) {
+		dest.defaultValue = src.defaultValue;
+	}
+}
+
+jQuery.each({
+	appendTo: "append",
+	prependTo: "prepend",
+	insertBefore: "before",
+	insertAfter: "after",
+	replaceAll: "replaceWith"
+}, function( name, original ) {
+	jQuery.fn[ name ] = function( selector ) {
+		var elems,
+			i = 0,
+			ret = [],
+			insert = jQuery( selector ),
+			last = insert.length - 1;
+
+		for ( ; i <= last; i++ ) {
+			elems = i === last ? this : this.clone(true);
+			jQuery( insert[i] )[ original ]( elems );
+
+			// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
+			core_push.apply( ret, elems.get() );
+		}
+
+		return this.pushStack( ret );
+	};
+});
+
+function getAll( context, tag ) {
+	var elems, elem,
+		i = 0,
+		found = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName( tag || "*" ) :
+			typeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll( tag || "*" ) :
+			undefined;
+
+	if ( !found ) {
+		for ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {
+			if ( !tag || jQuery.nodeName( elem, tag ) ) {
+				found.push( elem );
+			} else {
+				jQuery.merge( found, getAll( elem, tag ) );
+			}
+		}
+	}
+
+	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
+		jQuery.merge( [ context ], found ) :
+		found;
+}
+
+// Used in buildFragment, fixes the defaultChecked property
+function fixDefaultChecked( elem ) {
+	if ( manipulation_rcheckableType.test( elem.type ) ) {
+		elem.defaultChecked = elem.checked;
+	}
+}
+
+jQuery.extend({
+	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
+		var destElements, node, clone, i, srcElements,
+			inPage = jQuery.contains( elem.ownerDocument, elem );
+
+		if ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( "<" + elem.nodeName + ">" ) ) {
+			clone = elem.cloneNode( true );
+
+		// IE<=8 does not properly clone detached, unknown element nodes
+		} else {
+			fragmentDiv.innerHTML = elem.outerHTML;
+			fragmentDiv.removeChild( clone = fragmentDiv.firstChild );
+		}
+
+		if ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&
+				(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {
+
+			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
+			destElements = getAll( clone );
+			srcElements = getAll( elem );
+
+			// Fix all IE cloning issues
+			for ( i = 0; (node = srcElements[i]) != null; ++i ) {
+				// Ensure that the destination node is not null; Fixes #9587
+				if ( destElements[i] ) {
+					fixCloneNodeIssues( node, destElements[i] );
+				}
+			}
+		}
+
+		// Copy the events from the original to the clone
+		if ( dataAndEvents ) {
+			if ( deepDataAndEvents ) {
+				srcElements = srcElements || getAll( elem );
+				destElements = destElements || getAll( clone );
+
+				for ( i = 0; (node = srcElements[i]) != null; i++ ) {
+					cloneCopyEvent( node, destElements[i] );
+				}
+			} else {
+				cloneCopyEvent( elem, clone );
+			}
+		}
+
+		// Preserve script evaluation history
+		destElements = getAll( clone, "script" );
+		if ( destElements.length > 0 ) {
+			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
+		}
+
+		destElements = srcElements = node = null;
+
+		// Return the cloned set
+		return clone;
+	},
+
+	buildFragment: function( elems, context, scripts, selection ) {
+		var j, elem, contains,
+			tmp, tag, tbody, wrap,
+			l = elems.length,
+
+			// Ensure a safe fragment
+			safe = createSafeFragment( context ),
+
+			nodes = [],
+			i = 0;
+
+		for ( ; i < l; i++ ) {
+			elem = elems[ i ];
+
+			if ( elem || elem === 0 ) {
+
+				// Add nodes directly
+				if ( jQuery.type( elem ) === "object" ) {
+					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );
+
+				// Convert non-html into a text node
+				} else if ( !rhtml.test( elem ) ) {
+					nodes.push( context.createTextNode( elem ) );
+
+				// Convert html into DOM nodes
+				} else {
+					tmp = tmp || safe.appendChild( context.createElement("div") );
+
+					// Deserialize a standard representation
+					tag = ( rtagName.exec( elem ) || ["", ""] )[1].toLowerCase();
+					wrap = wrapMap[ tag ] || wrapMap._default;
+
+					tmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[2];
+
+					// Descend through wrappers to the right content
+					j = wrap[0];
+					while ( j-- ) {
+						tmp = tmp.lastChild;
+					}
+
+					// Manually add leading whitespace removed by IE
+					if ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {
+						nodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );
+					}
+
+					// Remove IE's autoinserted <tbody> from table fragments
+					if ( !jQuery.support.tbody ) {
+
+						// String was a <table>, *may* have spurious <tbody>
+						elem = tag === "table" && !rtbody.test( elem ) ?
+							tmp.firstChild :
+
+							// String was a bare <thead> or <tfoot>
+							wrap[1] === "<table>" && !rtbody.test( elem ) ?
+								tmp :
+								0;
+
+						j = elem && elem.childNodes.length;
+						while ( j-- ) {
+							if ( jQuery.nodeName( (tbody = elem.childNodes[j]), "tbody" ) && !tbody.childNodes.length ) {
+								elem.removeChild( tbody );
+							}
+						}
+					}
+
+					jQuery.merge( nodes, tmp.childNodes );
+
+					// Fix #12392 for WebKit and IE > 9
+					tmp.textContent = "";
+
+					// Fix #12392 for oldIE
+					while ( tmp.firstChild ) {
+						tmp.removeChild( tmp.firstChild );
+					}
+
+					// Remember the top-level container for proper cleanup
+					tmp = safe.lastChild;
+				}
+			}
+		}
+
+		// Fix #11356: Clear elements from fragment
+		if ( tmp ) {
+			safe.removeChild( tmp );
+		}
+
+		// Reset defaultChecked for any radios and checkboxes
+		// about to be appended to the DOM in IE 6/7 (#8060)
+		if ( !jQuery.support.appendChecked ) {
+			jQuery.grep( getAll( nodes, "input" ), fixDefaultChecked );
+		}
+
+		i = 0;
+		while ( (elem = nodes[ i++ ]) ) {
+
+			// #4087 - If origin and destination elements are the same, and this is
+			// that element, do not do anything
+			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
+				continue;
+			}
+
+			contains = jQuery.contains( elem.ownerDocument, elem );
+
+			// Append to fragment
+			tmp = getAll( safe.appendChild( elem ), "script" );
+
+			// Preserve script evaluation history
+			if ( contains ) {
+				setGlobalEval( tmp );
+			}
+
+			// Capture executables
+			if ( scripts ) {
+				j = 0;
+				while ( (elem = tmp[ j++ ]) ) {
+					if ( rscriptType.test( elem.type || "" ) ) {
+						scripts.push( elem );
+					}
+				}
+			}
+		}
+
+		tmp = null;
+
+		return safe;
+	},
+
+	cleanData: function( elems, /* internal */ acceptData ) {
+		var elem, type, id, data,
+			i = 0,
+			internalKey = jQuery.expando,
+			cache = jQuery.cache,
+			deleteExpando = jQuery.support.deleteExpando,
+			special = jQuery.event.special;
+
+		for ( ; (elem = elems[i]) != null; i++ ) {
+
+			if ( acceptData || jQuery.acceptData( elem ) ) {
+
+				id = elem[ internalKey ];
+				data = id && cache[ id ];
+
+				if ( data ) {
+					if ( data.events ) {
+						for ( type in data.events ) {
+							if ( special[ type ] ) {
+								jQuery.event.remove( elem, type );
+
+							// This is a shortcut to avoid jQuery.event.remove's overhead
+							} else {
+								jQuery.removeEvent( elem, type, data.handle );
+							}
+						}
+					}
+
+					// Remove cache only if it was not already removed by jQuery.event.remove
+					if ( cache[ id ] ) {
+
+						delete cache[ id ];
+
+						// IE does not allow us to delete expando properties from nodes,
+						// nor does it have a removeAttribute function on Document nodes;
+						// we must handle all of these cases
+						if ( deleteExpando ) {
+							delete elem[ internalKey ];
+
+						} else if ( typeof elem.removeAttribute !== core_strundefined ) {
+							elem.removeAttribute( internalKey );
+
+						} else {
+							elem[ internalKey ] = null;
+						}
+
+						core_deletedIds.push( id );
+					}
+				}
+			}
+		}
+	},
+
+	_evalUrl: function( url ) {
+		return jQuery.ajax({
+			url: url,
+			type: "GET",
+			dataType: "script",
+			async: false,
+			global: false,
+			"throws": true
+		});
+	}
+});
+jQuery.fn.extend({
+	wrapAll: function( html ) {
+		if ( jQuery.isFunction( html ) ) {
+			return this.each(function(i) {
+				jQuery(this).wrapAll( html.call(this, i) );
+			});
+		}
+
+		if ( this[0] ) {
+			// The elements to wrap the target around
+			var wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);
+
+			if ( this[0].parentNode ) {
+				wrap.insertBefore( this[0] );
+			}
+
+			wrap.map(function() {
+				var elem = this;
+
+				while ( elem.firstChild && elem.firstChild.nodeType === 1 ) {
+					elem = elem.firstChild;
+				}
+
+				return elem;
+			}).append( this );
+		}
+
+		return this;
+	},
+
+	wrapInner: function( html ) {
+		if ( jQuery.isFunction( html ) ) {
+			return this.each(function(i) {
+				jQuery(this).wrapInner( html.call(this, i) );
+			});
+		}
+
+		return this.each(function() {
+			var self = jQuery( this ),
+				contents = self.contents();
+
+			if ( contents.length ) {
+				contents.wrapAll( html );
+
+			} else {
+				self.append( html );
+			}
+		});
+	},
+
+	wrap: function( html ) {
+		var isFunction = jQuery.isFunction( html );
+
+		return this.each(function(i) {
+			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
+		});
+	},
+
+	unwrap: function() {
+		return this.parent().each(function() {
+			if ( !jQuery.nodeName( this, "body" ) ) {
+				jQuery( this ).replaceWith( this.childNodes );
+			}
+		}).end();
+	}
+});
+var iframe, getStyles, curCSS,
+	ralpha = /alpha\([^)]*\)/i,
+	ropacity = /opacity\s*=\s*([^)]*)/,
+	rposition = /^(top|right|bottom|left)$/,
+	// swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
+	// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
+	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
+	rmargin = /^margin/,
+	rnumsplit = new RegExp( "^(" + core_pnum + ")(.*)$", "i" ),
+	rnumnonpx = new RegExp( "^(" + core_pnum + ")(?!px)[a-z%]+$", "i" ),
+	rrelNum = new RegExp( "^([+-])=(" + core_pnum + ")", "i" ),
+	elemdisplay = { BODY: "block" },
+
+	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
+	cssNormalTransform = {
+		letterSpacing: 0,
+		fontWeight: 400
+	},
+
+	cssExpand = [ "Top", "Right", "Bottom", "Left" ],
+	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];
+
+// return a css property mapped to a potentially vendor prefixed property
+function vendorPropName( style, name ) {
+
+	// shortcut for names that are not vendor prefixed
+	if ( name in style ) {
+		return name;
+	}
+
+	// check for vendor prefixed names
+	var capName = name.charAt(0).toUpperCase() + name.slice(1),
+		origName = name,
+		i = cssPrefixes.length;
+
+	while ( i-- ) {
+		name = cssPrefixes[ i ] + capName;
+		if ( name in style ) {
+			return name;
+		}
+	}
+
+	return origName;
+}
+
+function isHidden( elem, el ) {
+	// isHidden might be called from jQuery#filter function;
+	// in that case, element will be second argument
+	elem = el || elem;
+	return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
+}
+
+function showHide( elements, show ) {
+	var display, elem, hidden,
+		values = [],
+		index = 0,
+		length = elements.length;
+
+	for ( ; index < length; index++ ) {
+		elem = elements[ index ];
+		if ( !elem.style ) {
+			continue;
+		}
+
+		values[ index ] = jQuery._data( elem, "olddisplay" );
+		display = elem.style.display;
+		if ( show ) {
+			// Reset the inline display of this element to learn if it is
+			// being hidden by cascaded rules or not
+			if ( !values[ index ] && display === "none" ) {
+				elem.style.display = "";
+			}
+
+			// Set elements which have been overridden with display: none
+			// in a stylesheet to whatever the default browser style is
+			// for such an element
+			if ( elem.style.display === "" && isHidden( elem ) ) {
+				values[ index ] = jQuery._data( elem, "olddisplay", css_defaultDisplay(elem.nodeName) );
+			}
+		} else {
+
+			if ( !values[ index ] ) {
+				hidden = isHidden( elem );
+
+				if ( display && display !== "none" || !hidden ) {
+					jQuery._data( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
+				}
+			}
+		}
+	}
+
+	// Set the display of most of the elements in a second loop
+	// to avoid the constant reflow
+	for ( index = 0; index < length; index++ ) {
+		elem = elements[ index ];
+		if ( !elem.style ) {
+			continue;
+		}
+		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
+			elem.style.display = show ? values[ index ] || "" : "none";
+		}
+	}
+
+	return elements;
+}
+
+jQuery.fn.extend({
+	css: function( name, value ) {
+		return jQuery.access( this, function( elem, name, value ) {
+			var len, styles,
+				map = {},
+				i = 0;
+
+			if ( jQuery.isArray( name ) ) {
+				styles = getStyles( elem );
+				len = name.length;
+
+				for ( ; i < len; i++ ) {
+					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
+				}
+
+				return map;
+			}
+
+			return value !== undefined ?
+				jQuery.style( elem, name, value ) :
+				jQuery.css( elem, name );
+		}, name, value, arguments.length > 1 );
+	},
+	show: function() {
+		return showHide( this, true );
+	},
+	hide: function() {
+		return showHide( this );
+	},
+	toggle: function( state ) {
+		if ( typeof state === "boolean" ) {
+			return state ? this.show() : this.hide();
+		}
+
+		return this.each(function() {
+			if ( isHidden( this ) ) {
+				jQuery( this ).show();
+			} else {
+				jQuery( this ).hide();
+			}
+		});
+	}
+});
+
+jQuery.extend({
+	// Add in style property hooks for overriding the default
+	// behavior of getting and setting a style property
+	cssHooks: {
+		opacity: {
+			get: function( elem, computed ) {
+				if ( computed ) {
+					// We should always get a number back from opacity
+					var ret = curCSS( elem, "opacity" );
+					return ret === "" ? "1" : ret;
+				}
+			}
+		}
+	},
+
+	// Don't automatically add "px" to these possibly-unitless properties
+	cssNumber: {
+		"columnCount": true,
+		"fillOpacity": true,
+		"fontWeight": true,
+		"lineHeight": true,
+		"opacity": true,
+		"order": true,
+		"orphans": true,
+		"widows": true,
+		"zIndex": true,
+		"zoom": true
+	},
+
+	// Add in properties whose names you wish to fix before
+	// setting or getting the value
+	cssProps: {
+		// normalize float css property
+		"float": jQuery.support.cssFloat ? "cssFloat" : "styleFloat"
+	},
+
+	// Get and set the style property on a DOM Node
+	style: function( elem, name, value, extra ) {
+		// Don't set styles on text and comment nodes
+		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
+			return;
+		}
+
+		// Make sure that we're working with the right name
+		var ret, type, hooks,
+			origName = jQuery.camelCase( name ),
+			style = elem.style;
+
+		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );
+
+		// gets hook for the prefixed version
+		// followed by the unprefixed version
+		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];
+
+		// Check if we're setting a value
+		if ( value !== undefined ) {
+			type = typeof value;
+
+			// convert relative number strings (+= or -=) to relative numbers. #7345
+			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
+				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
+				// Fixes bug #9237
+				type = "number";
+			}
+
+			// Make sure that NaN and null values aren't set. See: #7116
+			if ( value == null || type === "number" && isNaN( value ) ) {
+				return;
+			}
+
+			// If a number was passed in, add 'px' to the (except for certain CSS properties)
+			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
+				value += "px";
+			}
+
+			// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
+			// but it would mean to define eight (for every problematic property) identical functions
+			if ( !jQuery.support.clearCloneStyle && value === "" && name.indexOf("background") === 0 ) {
+				style[ name ] = "inherit";
+			}
+
+			// If a hook was provided, use that value, otherwise just set the specified value
+			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
+
+				// Wrapped to prevent IE from throwing errors when 'invalid' values are provided
+				// Fixes bug #5509
+				try {
+					style[ name ] = value;
+				} catch(e) {}
+			}
+
+		} else {
+			// If a hook was provided get the non-computed value from there
+			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
+				return ret;
+			}
+
+			// Otherwise just get the value from the style object
+			return style[ name ];
+		}
+	},
+
+	css: function( elem, name, extra, styles ) {
+		var num, val, hooks,
+			origName = jQuery.camelCase( name );
+
+		// Make sure that we're working with the right name
+		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );
+
+		// gets hook for the prefixed version
+		// followed by the unprefixed version
+		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];
+
+		// If a hook was provided get the computed value from there
+		if ( hooks && "get" in hooks ) {
+			val = hooks.get( elem, true, extra );
+		}
+
+		// Otherwise, if a way to get the computed value exists, use that
+		if ( val === undefined ) {
+			val = curCSS( elem, name, styles );
+		}
+
+		//convert "normal" to computed value
+		if ( val === "normal" && name in cssNormalTransform ) {
+			val = cssNormalTransform[ name ];
+		}
+
+		// Return, converting to number if forced or a qualifier was provided and val looks numeric
+		if ( extra === "" || extra ) {
+			num = parseFloat( val );
+			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
+		}
+		return val;
+	}
+});
+
+// NOTE: we've included the "window" in window.getComputedStyle
+// because jsdom on node.js will break without it.
+if ( window.getComputedStyle ) {
+	getStyles = function( elem ) {
+		return window.getComputedStyle( elem, null );
+	};
+
+	curCSS = function( elem, name, _computed ) {
+		var width, minWidth, maxWidth,
+			computed = _computed || getStyles( elem ),
+
+			// getPropertyValue is only needed for .css('filter') in IE9, see #12537
+			ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,
+			style = elem.style;
+
+		if ( computed ) {
+
+			if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
+				ret = jQuery.style( elem, name );
+			}
+
+			// A tribute to the "awesome hack by Dean Edwards"
+			// Chrome < 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
+			// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
+			// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
+			if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {
+
+				// Remember the original values
+				width = style.width;
+				minWidth = style.minWidth;
+				maxWidth = style.maxWidth;
+
+				// Put in the new values to get a computed value out
+				style.minWidth = style.maxWidth = style.width = ret;
+				ret = computed.width;
+
+				// Revert the changed values
+				style.width = width;
+				style.minWidth = minWidth;
+				style.maxWidth = maxWidth;
+			}
+		}
+
+		return ret;
+	};
+} else if ( document.documentElement.currentStyle ) {
+	getStyles = function( elem ) {
+		return elem.currentStyle;
+	};
+
+	curCSS = function( elem, name, _computed ) {
+		var left, rs, rsLeft,
+			computed = _computed || getStyles( elem ),
+			ret = computed ? computed[ name ] : undefined,
+			style = elem.style;
+
+		// Avoid setting ret to empty string here
+		// so we don't default to auto
+		if ( ret == null && style && style[ name ] ) {
+			ret = style[ name ];
+		}
+
+		// From the awesome hack by Dean Edwards
+		// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291
+
+		// If we're not dealing with a regular pixel number
+		// but a number that has a weird ending, we need to convert it to pixels
+		// but not position css attributes, as those are proportional to the parent element instead
+		// and we can't measure the parent instead because it might trigger a "stacking dolls" problem
+		if ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {
+
+			// Remember the original values
+			left = style.left;
+			rs = elem.runtimeStyle;
+			rsLeft = rs && rs.left;
+
+			// Put in the new values to get a computed value out
+			if ( rsLeft ) {
+				rs.left = elem.currentStyle.left;
+			}
+			style.left = name === "fontSize" ? "1em" : ret;
+			ret = style.pixelLeft + "px";
+
+			// Revert the changed values
+			style.left = left;
+			if ( rsLeft ) {
+				rs.left = rsLeft;
+			}
+		}
+
+		return ret === "" ? "auto" : ret;
+	};
+}
+
+function setPositiveNumber( elem, value, subtract ) {
+	var matches = rnumsplit.exec( value );
+	return matches ?
+		// Guard against undefined "subtract", e.g., when used as in cssHooks
+		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
+		value;
+}
+
+function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
+	var i = extra === ( isBorderBox ? "border" : "content" ) ?
+		// If we already have the right measurement, avoid augmentation
+		4 :
+		// Otherwise initialize for horizontal or vertical properties
+		name === "width" ? 1 : 0,
+
+		val = 0;
+
+	for ( ; i < 4; i += 2 ) {
+		// both box models exclude margin, so add it if we want it
+		if ( extra === "margin" ) {
+			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
+		}
+
+		if ( isBorderBox ) {
+			// border-box includes padding, so remove it if we want content
+			if ( extra === "content" ) {
+				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
+			}
+
+			// at this point, extra isn't border nor margin, so remove border
+			if ( extra !== "margin" ) {
+				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
+			}
+		} else {
+			// at this point, extra isn't content, so add padding
+			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
+
+			// at this point, extra isn't content nor padding, so add border
+			if ( extra !== "padding" ) {
+				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
+			}
+		}
+	}
+
+	return val;
+}
+
+function getWidthOrHeight( elem, name, extra ) {
+
+	// Start with offset property, which is equivalent to the border-box value
+	var valueIsBorderBox = true,
+		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
+		styles = getStyles( elem ),
+		isBorderBox = jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box";
+
+	// some non-html elements return undefined for offsetWidth, so check for null/undefined
+	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
+	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
+	if ( val <= 0 || val == null ) {
+		// Fall back to computed then uncomputed css if necessary
+		val = curCSS( elem, name, styles );
+		if ( val < 0 || val == null ) {
+			val = elem.style[ name ];
+		}
+
+		// Computed unit is not pixels. Stop here and return.
+		if ( rnumnonpx.test(val) ) {
+			return val;
+		}
+
+		// we need the check for style in case a browser which returns unreliable values
+		// for getComputedStyle silently falls back to the reliable elem.style
+		valueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );
+
+		// Normalize "", auto, and prepare for extra
+		val = parseFloat( val ) || 0;
+	}
+
+	// use the active box-sizing model to add/subtract irrelevant styles
+	return ( val +
+		augmentWidthOrHeight(
+			elem,
+			name,
+			extra || ( isBorderBox ? "border" : "content" ),
+			valueIsBorderBox,
+			styles
+		)
+	) + "px";
+}
+
+// Try to determine the default display value of an element
+function css_defaultDisplay( nodeName ) {
+	var doc = document,
+		display = elemdisplay[ nodeName ];
+
+	if ( !display ) {
+		display = actualDisplay( nodeName, doc );
+
+		// If the simple way fails, read from inside an iframe
+		if ( display === "none" || !display ) {
+			// Use the already-created iframe if possible
+			iframe = ( iframe ||
+				jQuery("<iframe frameborder='0' width='0' height='0'/>")
+				.css( "cssText", "display:block !important" )
+			).appendTo( doc.documentElement );
+
+			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
+			doc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;
+			doc.write("<!doctype html><html><body>");
+			doc.close();
+
+			display = actualDisplay( nodeName, doc );
+			iframe.detach();
+		}
+
+		// Store the correct default display
+		elemdisplay[ nodeName ] = display;
+	}
+
+	return display;
+}
+
+// Called ONLY from within css_defaultDisplay
+function actualDisplay( name, doc ) {
+	var elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),
+		display = jQuery.css( elem[0], "display" );
+	elem.remove();
+	return display;
+}
+
+jQuery.each([ "height", "width" ], function( i, name ) {
+	jQuery.cssHooks[ name ] = {
+		get: function( elem, computed, extra ) {
+			if ( computed ) {
+				// certain elements can have dimension info if we invisibly show them
+				// however, it must have a current display style that would benefit from this
+				return elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, "display" ) ) ?
+					jQuery.swap( elem, cssShow, function() {
+						return getWidthOrHeight( elem, name, extra );
+					}) :
+					getWidthOrHeight( elem, name, extra );
+			}
+		},
+
+		set: function( elem, value, extra ) {
+			var styles = extra && getStyles( elem );
+			return setPositiveNumber( elem, value, extra ?
+				augmentWidthOrHeight(
+					elem,
+					name,
+					extra,
+					jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
+					styles
+				) : 0
+			);
+		}
+	};
+});
+
+if ( !jQuery.support.opacity ) {
+	jQuery.cssHooks.opacity = {
+		get: function( elem, computed ) {
+			// IE uses filters for opacity
+			return ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "" ) ?
+				( 0.01 * parseFloat( RegExp.$1 ) ) + "" :
+				computed ? "1" : "";
+		},
+
+		set: function( elem, value ) {
+			var style = elem.style,
+				currentStyle = elem.currentStyle,
+				opacity = jQuery.isNumeric( value ) ? "alpha(opacity=" + value * 100 + ")" : "",
+				filter = currentStyle && currentStyle.filter || style.filter || "";
+
+			// IE has trouble with opacity if it does not have layout
+			// Force it by setting the zoom level
+			style.zoom = 1;
+
+			// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
+			// if value === "", then remove inline opacity #12685
+			if ( ( value >= 1 || value === "" ) &&
+					jQuery.trim( filter.replace( ralpha, "" ) ) === "" &&
+					style.removeAttribute ) {
+
+				// Setting style.filter to null, "" & " " still leave "filter:" in the cssText
+				// if "filter:" is present at all, clearType is disabled, we want to avoid this
+				// style.removeAttribute is IE Only, but so apparently is this code path...
+				style.removeAttribute( "filter" );
+
+				// if there is no filter style applied in a css rule or unset inline opacity, we are done
+				if ( value === "" || currentStyle && !currentStyle.filter ) {
+					return;
+				}
+			}
+
+			// otherwise, set new filter values
+			style.filter = ralpha.test( filter ) ?
+				filter.replace( ralpha, opacity ) :
+				filter + " " + opacity;
+		}
+	};
+}
+
+// These hooks cannot be added until DOM ready because the support test
+// for it is not run until after DOM ready
+jQuery(function() {
+	if ( !jQuery.support.reliableMarginRight ) {
+		jQuery.cssHooks.marginRight = {
+			get: function( elem, computed ) {
+				if ( computed ) {
+					// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
+					// Work around by temporarily setting element display to inline-block
+					return jQuery.swap( elem, { "display": "inline-block" },
+						curCSS, [ elem, "marginRight" ] );
+				}
+			}
+		};
+	}
+
+	// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
+	// getComputedStyle returns percent when specified for top/left/bottom/right
+	// rather than make the css module depend on the offset module, we just check for it here
+	if ( !jQuery.support.pixelPosition && jQuery.fn.position ) {
+		jQuery.each( [ "top", "left" ], function( i, prop ) {
+			jQuery.cssHooks[ prop ] = {
+				get: function( elem, computed ) {
+					if ( computed ) {
+						computed = curCSS( elem, prop );
+						// if curCSS returns percentage, fallback to offset
+						return rnumnonpx.test( computed ) ?
+							jQuery( elem ).position()[ prop ] + "px" :
+							computed;
+					}
+				}
+			};
+		});
+	}
+
+});
+
+if ( jQuery.expr && jQuery.expr.filters ) {
+	jQuery.expr.filters.hidden = function( elem ) {
+		// Support: Opera <= 12.12
+		// Opera reports offsetWidths and offsetHeights less than zero on some elements
+		return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||
+			(!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, "display" )) === "none");
+	};
+
+	jQuery.expr.filters.visible = function( elem ) {
+		return !jQuery.expr.filters.hidden( elem );
+	};
+}
+
+// These hooks are used by animate to expand properties
+jQuery.each({
+	margin: "",
+	padding: "",
+	border: "Width"
+}, function( prefix, suffix ) {
+	jQuery.cssHooks[ prefix + suffix ] = {
+		expand: function( value ) {
+			var i = 0,
+				expanded = {},
+
+				// assumes a single number if not a string
+				parts = typeof value === "string" ? value.split(" ") : [ value ];
+
+			for ( ; i < 4; i++ ) {
+				expanded[ prefix + cssExpand[ i ] + suffix ] =
+					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
+			}
+
+			return expanded;
+		}
+	};
+
+	if ( !rmargin.test( prefix ) ) {
+		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
+	}
+});
+var r20 = /%20/g,
+	rbracket = /\[\]$/,
+	rCRLF = /\r?\n/g,
+	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
+	rsubmittable = /^(?:input|select|textarea|keygen)/i;
+
+jQuery.fn.extend({
+	serialize: function() {
+		return jQuery.param( this.serializeArray() );
+	},
+	serializeArray: function() {
+		return this.map(function(){
+			// Can add propHook for "elements" to filter or add form elements
+			var elements = jQuery.prop( this, "elements" );
+			return elements ? jQuery.makeArray( elements ) : this;
+		})
+		.filter(function(){
+			var type = this.type;
+			// Use .is(":disabled") so that fieldset[disabled] works
+			return this.name && !jQuery( this ).is( ":disabled" ) &&
+				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
+				( this.checked || !manipulation_rcheckableType.test( type ) );
+		})
+		.map(function( i, elem ){
+			var val = jQuery( this ).val();
+
+			return val == null ?
+				null :
+				jQuery.isArray( val ) ?
+					jQuery.map( val, function( val ){
+						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
+					}) :
+					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
+		}).get();
+	}
+});
+
+//Serialize an array of form elements or a set of
+//key/values into a query string
+jQuery.param = function( a, traditional ) {
+	var prefix,
+		s = [],
+		add = function( key, value ) {
+			// If value is a function, invoke it and return its value
+			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
+			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
+		};
+
+	// Set traditional to true for jQuery <= 1.3.2 behavior.
+	if ( traditional === undefined ) {
+		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
+	}
+
+	// If an array was passed in, assume that it is an array of form elements.
+	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
+		// Serialize the form elements
+		jQuery.each( a, function() {
+			add( this.name, this.value );
+		});
+
+	} else {
+		// If traditional, encode the "old" way (the way 1.3.2 or older
+		// did it), otherwise encode params recursively.
+		for ( prefix in a ) {
+			buildParams( prefix, a[ prefix ], traditional, add );
+		}
+	}
+
+	// Return the resulting serialization
+	return s.join( "&" ).replace( r20, "+" );
+};
+
+function buildParams( prefix, obj, traditional, add ) {
+	var name;
+
+	if ( jQuery.isArray( obj ) ) {
+		// Serialize array item.
+		jQuery.each( obj, function( i, v ) {
+			if ( traditional || rbracket.test( prefix ) ) {
+				// Treat each array item as a scalar.
+				add( prefix, v );
+
+			} else {
+				// Item is non-scalar (array or object), encode its numeric index.
+				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
+			}
+		});
+
+	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
+		// Serialize object item.
+		for ( name in obj ) {
+			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
+		}
+
+	} else {
+		// Serialize scalar item.
+		add( prefix, obj );
+	}
+}
+jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
+	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
+	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {
+
+	// Handle event binding
+	jQuery.fn[ name ] = function( data, fn ) {
+		return arguments.length > 0 ?
+			this.on( name, null, data, fn ) :
+			this.trigger( name );
+	};
+});
+
+jQuery.fn.extend({
+	hover: function( fnOver, fnOut ) {
+		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
+	},
+
+	bind: function( types, data, fn ) {
+		return this.on( types, null, data, fn );
+	},
+	unbind: function( types, fn ) {
+		return this.off( types, null, fn );
+	},
+
+	delegate: function( selector, types, data, fn ) {
+		return this.on( types, selector, data, fn );
+	},
+	undelegate: function( selector, types, fn ) {
+		// ( namespace ) or ( selector, types [, fn] )
+		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
+	}
+});
+var
+	// Document location
+	ajaxLocParts,
+	ajaxLocation,
+	ajax_nonce = jQuery.now(),
+
+	ajax_rquery = /\?/,
+	rhash = /#.*$/,
+	rts = /([?&])_=[^&]*/,
+	rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, // IE leaves an \r character at EOL
+	// #7653, #8125, #8152: local protocol detection
+	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
+	rnoContent = /^(?:GET|HEAD)$/,
+	rprotocol = /^\/\//,
+	rurl = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
+
+	// Keep a copy of the old load method
+	_load = jQuery.fn.load,
+
+	/* Prefilters
+	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
+	 * 2) These are called:
+	 *    - BEFORE asking for a transport
+	 *    - AFTER param serialization (s.data is a string if s.processData is true)
+	 * 3) key is the dataType
+	 * 4) the catchall symbol "*" can be used
+	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
+	 */
+	prefilters = {},
+
+	/* Transports bindings
+	 * 1) key is the dataType
+	 * 2) the catchall symbol "*" can be used
+	 * 3) selection will start with transport dataType and THEN go to "*" if needed
+	 */
+	transports = {},
+
+	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
+	allTypes = "*/".concat("*");
+
+// #8138, IE may throw an exception when accessing
+// a field from window.location if document.domain has been set
+try {
+	ajaxLocation = location.href;
+} catch( e ) {
+	// Use the href attribute of an A element
+	// since IE will modify it given document.location
+	ajaxLocation = document.createElement( "a" );
+	ajaxLocation.href = "";
+	ajaxLocation = ajaxLocation.href;
+}
+
+// Segment location into parts
+ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];
+
+// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
+function addToPrefiltersOrTransports( structure ) {
+
+	// dataTypeExpression is optional and defaults to "*"
+	return function( dataTypeExpression, func ) {
+
+		if ( typeof dataTypeExpression !== "string" ) {
+			func = dataTypeExpression;
+			dataTypeExpression = "*";
+		}
+
+		var dataType,
+			i = 0,
+			dataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];
+
+		if ( jQuery.isFunction( func ) ) {
+			// For each dataType in the dataTypeExpression
+			while ( (dataType = dataTypes[i++]) ) {
+				// Prepend if requested
+				if ( dataType[0] === "+" ) {
+					dataType = dataType.slice( 1 ) || "*";
+					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );
+
+				// Otherwise append
+				} else {
+					(structure[ dataType ] = structure[ dataType ] || []).push( func );
+				}
+			}
+		}
+	};
+}
+
+// Base inspection function for prefilters and transports
+function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {
+
+	var inspected = {},
+		seekingTransport = ( structure === transports );
+
+	function inspect( dataType ) {
+		var selected;
+		inspected[ dataType ] = true;
+		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
+			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
+			if( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
+				options.dataTypes.unshift( dataTypeOrTransport );
+				inspect( dataTypeOrTransport );
+				return false;
+			} else if ( seekingTransport ) {
+				return !( selected = dataTypeOrTransport );
+			}
+		});
+		return selected;
+	}
+
+	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
+}
+
+// A special extend for ajax options
+// that takes "flat" options (not to be deep extended)
+// Fixes #9887
+function ajaxExtend( target, src ) {
+	var deep, key,
+		flatOptions = jQuery.ajaxSettings.flatOptions || {};
+
+	for ( key in src ) {
+		if ( src[ key ] !== undefined ) {
+			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
+		}
+	}
+	if ( deep ) {
+		jQuery.extend( true, target, deep );
+	}
+
+	return target;
+}
+
+jQuery.fn.load = function( url, params, callback ) {
+	if ( typeof url !== "string" && _load ) {
+		return _load.apply( this, arguments );
+	}
+
+	var selector, response, type,
+		self = this,
+		off = url.indexOf(" ");
+
+	if ( off >= 0 ) {
+		selector = url.slice( off, url.length );
+		url = url.slice( 0, off );
+	}
+
+	// If it's a function
+	if ( jQuery.isFunction( params ) ) {
+
+		// We assume that it's the callback
+		callback = params;
+		params = undefined;
+
+	// Otherwise, build a param string
+	} else if ( params && typeof params === "object" ) {
+		type = "POST";
+	}
+
+	// If we have elements to modify, make the request
+	if ( self.length > 0 ) {
+		jQuery.ajax({
+			url: url,
+
+			// if "type" variable is undefined, then "GET" method will be used
+			type: type,
+			dataType: "html",
+			data: params
+		}).done(function( responseText ) {
+
+			// Save response for use in complete callback
+			response = arguments;
+
+			self.html( selector ?
+
+				// If a selector was specified, locate the right elements in a dummy div
+				// Exclude scripts to avoid IE 'Permission Denied' errors
+				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :
+
+				// Otherwise use the full result
+				responseText );
+
+		}).complete( callback && function( jqXHR, status ) {
+			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
+		});
+	}
+
+	return this;
+};
+
+// Attach a bunch of functions for handling common AJAX events
+jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ){
+	jQuery.fn[ type ] = function( fn ){
+		return this.on( type, fn );
+	};
+});
+
+jQuery.extend({
+
+	// Counter for holding the number of active queries
+	active: 0,
+
+	// Last-Modified header cache for next request
+	lastModified: {},
+	etag: {},
+
+	ajaxSettings: {
+		url: ajaxLocation,
+		type: "GET",
+		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
+		global: true,
+		processData: true,
+		async: true,
+		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
+		/*
+		timeout: 0,
+		data: null,
+		dataType: null,
+		username: null,
+		password: null,
+		cache: null,
+		throws: false,
+		traditional: false,
+		headers: {},
+		*/
+
+		accepts: {
+			"*": allTypes,
+			text: "text/plain",
+			html: "text/html",
+			xml: "application/xml, text/xml",
+			json: "application/json, text/javascript"
+		},
+
+		contents: {
+			xml: /xml/,
+			html: /html/,
+			json: /json/
+		},
+
+		responseFields: {
+			xml: "responseXML",
+			text: "responseText",
+			json: "responseJSON"
+		},
+
+		// Data converters
+		// Keys separate source (or catchall "*") and destination types with a single space
+		converters: {
+
+			// Convert anything to text
+			"* text": String,
+
+			// Text to html (true = no transformation)
+			"text html": true,
+
+			// Evaluate text as a json expression
+			"text json": jQuery.parseJSON,
+
+			// Parse text as xml
+			"text xml": jQuery.parseXML
+		},
+
+		// For options that shouldn't be deep extended:
+		// you can add your own custom options here if
+		// and when you create one that shouldn't be
+		// deep extended (see ajaxExtend)
+		flatOptions: {
+			url: true,
+			context: true
+		}
+	},
+
+	// Creates a full fledged settings object into target
+	// with both ajaxSettings and settings fields.
+	// If target is omitted, writes into ajaxSettings.
+	ajaxSetup: function( target, settings ) {
+		return settings ?
+
+			// Building a settings object
+			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :
+
+			// Extending ajaxSettings
+			ajaxExtend( jQuery.ajaxSettings, target );
+	},
+
+	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
+	ajaxTransport: addToPrefiltersOrTransports( transports ),
+
+	// Main method
+	ajax: function( url, options ) {
+
+		// If url is an object, simulate pre-1.5 signature
+		if ( typeof url === "object" ) {
+			options = url;
+			url = undefined;
+		}
+
+		// Force options to be an object
+		options = options || {};
+
+		var // Cross-domain detection vars
+			parts,
+			// Loop variable
+			i,
+			// URL without anti-cache param
+			cacheURL,
+			// Response headers as string
+			responseHeadersString,
+			// timeout handle
+			timeoutTimer,
+
+			// To know if global events are to be dispatched
+			fireGlobals,
+
+			transport,
+			// Response headers
+			responseHeaders,
+			// Create the final options object
+			s = jQuery.ajaxSetup( {}, options ),
+			// Callbacks context
+			callbackContext = s.context || s,
+			// Context for global events is callbackContext if it is a DOM node or jQuery collection
+			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
+				jQuery( callbackContext ) :
+				jQuery.event,
+			// Deferreds
+			deferred = jQuery.Deferred(),
+			completeDeferred = jQuery.Callbacks("once memory"),
+			// Status-dependent callbacks
+			statusCode = s.statusCode || {},
+			// Headers (they are sent all at once)
+			requestHeaders = {},
+			requestHeadersNames = {},
+			// The jqXHR state
+			state = 0,
+			// Default abort message
+			strAbort = "canceled",
+			// Fake xhr
+			jqXHR = {
+				readyState: 0,
+
+				// Builds headers hashtable if needed
+				getResponseHeader: function( key ) {
+					var match;
+					if ( state === 2 ) {
+						if ( !responseHeaders ) {
+							responseHeaders = {};
+							while ( (match = rheaders.exec( responseHeadersString )) ) {
+								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
+							}
+						}
+						match = responseHeaders[ key.toLowerCase() ];
+					}
+					return match == null ? null : match;
+				},
+
+				// Raw string
+				getAllResponseHeaders: function() {
+					return state === 2 ? responseHeadersString : null;
+				},
+
+				// Caches the header
+				setRequestHeader: function( name, value ) {
+					var lname = name.toLowerCase();
+					if ( !state ) {
+						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
+						requestHeaders[ name ] = value;
+					}
+					return this;
+				},
+
+				// Overrides response content-type header
+				overrideMimeType: function( type ) {
+					if ( !state ) {
+						s.mimeType = type;
+					}
+					return this;
+				},
+
+				// Status-dependent callbacks
+				statusCode: function( map ) {
+					var code;
+					if ( map ) {
+						if ( state < 2 ) {
+							for ( code in map ) {
+								// Lazy-add the new callback in a way that preserves old ones
+								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
+							}
+						} else {
+							// Execute the appropriate callbacks
+							jqXHR.always( map[ jqXHR.status ] );
+						}
+					}
+					return this;
+				},
+
+				// Cancel the request
+				abort: function( statusText ) {
+					var finalText = statusText || strAbort;
+					if ( transport ) {
+						transport.abort( finalText );
+					}
+					done( 0, finalText );
+					return this;
+				}
+			};
+
+		// Attach deferreds
+		deferred.promise( jqXHR ).complete = completeDeferred.add;
+		jqXHR.success = jqXHR.done;
+		jqXHR.error = jqXHR.fail;
+
+		// Remove hash character (#7531: and string promotion)
+		// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
+		// Handle falsy url in the settings object (#10093: consistency with old signature)
+		// We also use the url parameter if available
+		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" ).replace( rprotocol, ajaxLocParts[ 1 ] + "//" );
+
+		// Alias method option to type as per ticket #12004
+		s.type = options.method || options.type || s.method || s.type;
+
+		// Extract dataTypes list
+		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( core_rnotwhite ) || [""];
+
+		// A cross-domain request is in order when we have a protocol:host:port mismatch
+		if ( s.crossDomain == null ) {
+			parts = rurl.exec( s.url.toLowerCase() );
+			s.crossDomain = !!( parts &&
+				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
+					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
+						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
+			);
+		}
+
+		// Convert data if not already a string
+		if ( s.data && s.processData && typeof s.data !== "string" ) {
+			s.data = jQuery.param( s.data, s.traditional );
+		}
+
+		// Apply prefilters
+		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );
+
+		// If request was aborted inside a prefilter, stop there
+		if ( state === 2 ) {
+			return jqXHR;
+		}
+
+		// We can fire global events as of now if asked to
+		fireGlobals = s.global;
+
+		// Watch for a new set of requests
+		if ( fireGlobals && jQuery.active++ === 0 ) {
+			jQuery.event.trigger("ajaxStart");
+		}
+
+		// Uppercase the type
+		s.type = s.type.toUpperCase();
+
+		// Determine if request has content
+		s.hasContent = !rnoContent.test( s.type );
+
+		// Save the URL in case we're toying with the If-Modified-Since
+		// and/or If-None-Match header later on
+		cacheURL = s.url;
+
+		// More options handling for requests with no content
+		if ( !s.hasContent ) {
+
+			// If data is available, append data to url
+			if ( s.data ) {
+				cacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
+				// #9682: remove data so that it's not used in an eventual retry
+				delete s.data;
+			}
+
+			// Add anti-cache in url if needed
+			if ( s.cache === false ) {
+				s.url = rts.test( cacheURL ) ?
+
+					// If there is already a '_' parameter, set its value
+					cacheURL.replace( rts, "$1_=" + ajax_nonce++ ) :
+
+					// Otherwise add one to the end
+					cacheURL + ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ajax_nonce++;
+			}
+		}
+
+		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
+		if ( s.ifModified ) {
+			if ( jQuery.lastModified[ cacheURL ] ) {
+				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
+			}
+			if ( jQuery.etag[ cacheURL ] ) {
+				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
+			}
+		}
+
+		// Set the correct header, if data is being sent
+		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
+			jqXHR.setRequestHeader( "Content-Type", s.contentType );
+		}
+
+		// Set the Accepts header for the server, depending on the dataType
+		jqXHR.setRequestHeader(
+			"Accept",
+			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
+				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
+				s.accepts[ "*" ]
+		);
+
+		// Check for headers option
+		for ( i in s.headers ) {
+			jqXHR.setRequestHeader( i, s.headers[ i ] );
+		}
+
+		// Allow custom headers/mimetypes and early abort
+		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
+			// Abort if not done already and return
+			return jqXHR.abort();
+		}
+
+		// aborting is no longer a cancellation
+		strAbort = "abort";
+
+		// Install callbacks on deferreds
+		for ( i in { success: 1, error: 1, complete: 1 } ) {
+			jqXHR[ i ]( s[ i ] );
+		}
+
+		// Get transport
+		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );
+
+		// If no transport, we auto-abort
+		if ( !transport ) {
+			done( -1, "No Transport" );
+		} else {
+			jqXHR.readyState = 1;
+
+			// Send global event
+			if ( fireGlobals ) {
+				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
+			}
+			// Timeout
+			if ( s.async && s.timeout > 0 ) {
+				timeoutTimer = setTimeout(function() {
+					jqXHR.abort("timeout");
+				}, s.timeout );
+			}
+
+			try {
+				state = 1;
+				transport.send( requestHeaders, done );
+			} catch ( e ) {
+				// Propagate exception as error if not done
+				if ( state < 2 ) {
+					done( -1, e );
+				// Simply rethrow otherwise
+				} else {
+					throw e;
+				}
+			}
+		}
+
+		// Callback for when everything is done
+		function done( status, nativeStatusText, responses, headers ) {
+			var isSuccess, success, error, response, modified,
+				statusText = nativeStatusText;
+
+			// Called once
+			if ( state === 2 ) {
+				return;
+			}
+
+			// State is "done" now
+			state = 2;
+
+			// Clear timeout if it exists
+			if ( timeoutTimer ) {
+				clearTimeout( timeoutTimer );
+			}
+
+			// Dereference transport for early garbage collection
+			// (no matter how long the jqXHR object will be used)
+			transport = undefined;
+
+			// Cache response headers
+			responseHeadersString = headers || "";
+
+			// Set readyState
+			jqXHR.readyState = status > 0 ? 4 : 0;
+
+			// Determine if successful
+			isSuccess = status >= 200 && status < 300 || status === 304;
+
+			// Get response data
+			if ( responses ) {
+				response = ajaxHandleResponses( s, jqXHR, responses );
+			}
+
+			// Convert no matter what (that way responseXXX fields are always set)
+			response = ajaxConvert( s, response, jqXHR, isSuccess );
+
+			// If successful, handle type chaining
+			if ( isSuccess ) {
+
+				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
+				if ( s.ifModified ) {
+					modified = jqXHR.getResponseHeader("Last-Modified");
+					if ( modified ) {
+						jQuery.lastModified[ cacheURL ] = modified;
+					}
+					modified = jqXHR.getResponseHeader("etag");
+					if ( modified ) {
+						jQuery.etag[ cacheURL ] = modified;
+					}
+				}
+
+				// if no content
+				if ( status === 204 || s.type === "HEAD" ) {
+					statusText = "nocontent";
+
+				// if not modified
+				} else if ( status === 304 ) {
+					statusText = "notmodified";
+
+				// If we have data, let's convert it
+				} else {
+					statusText = response.state;
+					success = response.data;
+					error = response.error;
+					isSuccess = !error;
+				}
+			} else {
+				// We extract error from statusText
+				// then normalize statusText and status for non-aborts
+				error = statusText;
+				if ( status || !statusText ) {
+					statusText = "error";
+					if ( status < 0 ) {
+						status = 0;
+					}
+				}
+			}
+
+			// Set data for the fake xhr object
+			jqXHR.status = status;
+			jqXHR.statusText = ( nativeStatusText || statusText ) + "";
+
+			// Success/Error
+			if ( isSuccess ) {
+				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
+			} else {
+				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
+			}
+
+			// Status-dependent callbacks
+			jqXHR.statusCode( statusCode );
+			statusCode = undefined;
+
+			if ( fireGlobals ) {
+				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
+					[ jqXHR, s, isSuccess ? success : error ] );
+			}
+
+			// Complete
+			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );
+
+			if ( fireGlobals ) {
+				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
+				// Handle the global AJAX counter
+				if ( !( --jQuery.active ) ) {
+					jQuery.event.trigger("ajaxStop");
+				}
+			}
+		}
+
+		return jqXHR;
+	},
+
+	getJSON: function( url, data, callback ) {
+		return jQuery.get( url, data, callback, "json" );
+	},
+
+	getScript: function( url, callback ) {
+		return jQuery.get( url, undefined, callback, "script" );
+	}
+});
+
+jQuery.each( [ "get", "post" ], function( i, method ) {
+	jQuery[ method ] = function( url, data, callback, type ) {
+		// shift arguments if data argument was omitted
+		if ( jQuery.isFunction( data ) ) {
+			type = type || callback;
+			callback = data;
+			data = undefined;
+		}
+
+		return jQuery.ajax({
+			url: url,
+			type: method,
+			dataType: type,
+			data: data,
+			success: callback
+		});
+	};
+});
+
+/* Handles responses to an ajax request:
+ * - finds the right dataType (mediates between content-type and expected dataType)
+ * - returns the corresponding response
+ */
+function ajaxHandleResponses( s, jqXHR, responses ) {
+	var firstDataType, ct, finalDataType, type,
+		contents = s.contents,
+		dataTypes = s.dataTypes;
+
+	// Remove auto dataType and get content-type in the process
+	while( dataTypes[ 0 ] === "*" ) {
+		dataTypes.shift();
+		if ( ct === undefined ) {
+			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
+		}
+	}
+
+	// Check if we're dealing with a known content-type
+	if ( ct ) {
+		for ( type in contents ) {
+			if ( contents[ type ] && contents[ type ].test( ct ) ) {
+				dataTypes.unshift( type );
+				break;
+			}
+		}
+	}
+
+	// Check to see if we have a response for the expected dataType
+	if ( dataTypes[ 0 ] in responses ) {
+		finalDataType = dataTypes[ 0 ];
+	} else {
+		// Try convertible dataTypes
+		for ( type in responses ) {
+			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
+				finalDataType = type;
+				break;
+			}
+			if ( !firstDataType ) {
+				firstDataType = type;
+			}
+		}
+		// Or just use first one
+		finalDataType = finalDataType || firstDataType;
+	}
+
+	// If we found a dataType
+	// We add the dataType to the list if needed
+	// and return the corresponding response
+	if ( finalDataType ) {
+		if ( finalDataType !== dataTypes[ 0 ] ) {
+			dataTypes.unshift( finalDataType );
+		}
+		return responses[ finalDataType ];
+	}
+}
+
+/* Chain conversions given the request and the original response
+ * Also sets the responseXXX fields on the jqXHR instance
+ */
+function ajaxConvert( s, response, jqXHR, isSuccess ) {
+	var conv2, current, conv, tmp, prev,
+		converters = {},
+		// Work with a copy of dataTypes in case we need to modify it for conversion
+		dataTypes = s.dataTypes.slice();
+
+	// Create converters map with lowercased keys
+	if ( dataTypes[ 1 ] ) {
+		for ( conv in s.converters ) {
+			converters[ conv.toLowerCase() ] = s.converters[ conv ];
+		}
+	}
+
+	current = dataTypes.shift();
+
+	// Convert to each sequential dataType
+	while ( current ) {
+
+		if ( s.responseFields[ current ] ) {
+			jqXHR[ s.responseFields[ current ] ] = response;
+		}
+
+		// Apply the dataFilter if provided
+		if ( !prev && isSuccess && s.dataFilter ) {
+			response = s.dataFilter( response, s.dataType );
+		}
+
+		prev = current;
+		current = dataTypes.shift();
+
+		if ( current ) {
+
+			// There's only work to do if current dataType is non-auto
+			if ( current === "*" ) {
+
+				current = prev;
+
+			// Convert response if prev dataType is non-auto and differs from current
+			} else if ( prev !== "*" && prev !== current ) {
+
+				// Seek a direct converter
+				conv = converters[ prev + " " + current ] || converters[ "* " + current ];
+
+				// If none found, seek a pair
+				if ( !conv ) {
+					for ( conv2 in converters ) {
+
+						// If conv2 outputs current
+						tmp = conv2.split( " " );
+						if ( tmp[ 1 ] === current ) {
+
+							// If prev can be converted to accepted input
+							conv = converters[ prev + " " + tmp[ 0 ] ] ||
+								converters[ "* " + tmp[ 0 ] ];
+							if ( conv ) {
+								// Condense equivalence converters
+								if ( conv === true ) {
+									conv = converters[ conv2 ];
+
+								// Otherwise, insert the intermediate dataType
+								} else if ( converters[ conv2 ] !== true ) {
+									current = tmp[ 0 ];
+									dataTypes.unshift( tmp[ 1 ] );
+								}
+								break;
+							}
+						}
+					}
+				}
+
+				// Apply converter (if not an equivalence)
+				if ( conv !== true ) {
+
+					// Unless errors are allowed to bubble, catch and return them
+					if ( conv && s[ "throws" ] ) {
+						response = conv( response );
+					} else {
+						try {
+							response = conv( response );
+						} catch ( e ) {
+							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
+						}
+					}
+				}
+			}
+		}
+	}
+
+	return { state: "success", data: response };
+}
+// Install script dataType
+jQuery.ajaxSetup({
+	accepts: {
+		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
+	},
+	contents: {
+		script: /(?:java|ecma)script/
+	},
+	converters: {
+		"text script": function( text ) {
+			jQuery.globalEval( text );
+			return text;
+		}
+	}
+});
+
+// Handle cache's special case and global
+jQuery.ajaxPrefilter( "script", function( s ) {
+	if ( s.cache === undefined ) {
+		s.cache = false;
+	}
+	if ( s.crossDomain ) {
+		s.type = "GET";
+		s.global = false;
+	}
+});
+
+// Bind script tag hack transport
+jQuery.ajaxTransport( "script", function(s) {
+
+	// This transport only deals with cross domain requests
+	if ( s.crossDomain ) {
+
+		var script,
+			head = document.head || jQuery("head")[0] || document.documentElement;
+
+		return {
+
+			send: function( _, callback ) {
+
+				script = document.createElement("script");
+
+				script.async = true;
+
+				if ( s.scriptCharset ) {
+					script.charset = s.scriptCharset;
+				}
+
+				script.src = s.url;
+
+				// Attach handlers for all browsers
+				script.onload = script.onreadystatechange = function( _, isAbort ) {
+
+					if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {
+
+						// Handle memory leak in IE
+						script.onload = script.onreadystatechange = null;
+
+						// Remove the script
+						if ( script.parentNode ) {
+							script.parentNode.removeChild( script );
+						}
+
+						// Dereference the script
+						script = null;
+
+						// Callback if not abort
+						if ( !isAbort ) {
+							callback( 200, "success" );
+						}
+					}
+				};
+
+				// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
+				// Use native DOM manipulation to avoid our domManip AJAX trickery
+				head.insertBefore( script, head.firstChild );
+			},
+
+			abort: function() {
+				if ( script ) {
+					script.onload( undefined, true );
+				}
+			}
+		};
+	}
+});
+var oldCallbacks = [],
+	rjsonp = /(=)\?(?=&|$)|\?\?/;
+
+// Default jsonp settings
+jQuery.ajaxSetup({
+	jsonp: "callback",
+	jsonpCallback: function() {
+		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( ajax_nonce++ ) );
+		this[ callback ] = true;
+		return callback;
+	}
+});
+
+// Detect, normalize options and install callbacks for jsonp requests
+jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {
+
+	var callbackName, overwritten, responseContainer,
+		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
+			"url" :
+			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
+		);
+
+	// Handle iff the expected data type is "jsonp" or we have a parameter to set
+	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {
+
+		// Get callback name, remembering preexisting value associated with it
+		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
+			s.jsonpCallback() :
+			s.jsonpCallback;
+
+		// Insert callback into url or form data
+		if ( jsonProp ) {
+			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
+		} else if ( s.jsonp !== false ) {
+			s.url += ( ajax_rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
+		}
+
+		// Use data converter to retrieve json after script execution
+		s.converters["script json"] = function() {
+			if ( !responseContainer ) {
+				jQuery.error( callbackName + " was not called" );
+			}
+			return responseContainer[ 0 ];
+		};
+
+		// force json dataType
+		s.dataTypes[ 0 ] = "json";
+
+		// Install callback
+		overwritten = window[ callbackName ];
+		window[ callbackName ] = function() {
+			responseContainer = arguments;
+		};
+
+		// Clean-up function (fires after converters)
+		jqXHR.always(function() {
+			// Restore preexisting value
+			window[ callbackName ] = overwritten;
+
+			// Save back as free
+			if ( s[ callbackName ] ) {
+				// make sure that re-using the options doesn't screw things around
+				s.jsonpCallback = originalSettings.jsonpCallback;
+
+				// save the callback name for future use
+				oldCallbacks.push( callbackName );
+			}
+
+			// Call if it was a function and we have a response
+			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
+				overwritten( responseContainer[ 0 ] );
+			}
+
+			responseContainer = overwritten = undefined;
+		});
+
+		// Delegate to script
+		return "script";
+	}
+});
+var xhrCallbacks, xhrSupported,
+	xhrId = 0,
+	// #5280: Internet Explorer will keep connections alive if we don't abort on unload
+	xhrOnUnloadAbort = window.ActiveXObject && function() {
+		// Abort all pending requests
+		var key;
+		for ( key in xhrCallbacks ) {
+			xhrCallbacks[ key ]( undefined, true );
+		}
+	};
+
+// Functions to create xhrs
+function createStandardXHR() {
+	try {
+		return new window.XMLHttpRequest();
+	} catch( e ) {}
+}
+
+function createActiveXHR() {
+	try {
+		return new window.ActiveXObject("Microsoft.XMLHTTP");
+	} catch( e ) {}
+}
+
+// Create the request object
+// (This is still attached to ajaxSettings for backward compatibility)
+jQuery.ajaxSettings.xhr = window.ActiveXObject ?
+	/* Microsoft failed to properly
+	 * implement the XMLHttpRequest in IE7 (can't request local files),
+	 * so we use the ActiveXObject when it is available
+	 * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
+	 * we need a fallback.
+	 */
+	function() {
+		return !this.isLocal && createStandardXHR() || createActiveXHR();
+	} :
+	// For all other browsers, use the standard XMLHttpRequest object
+	createStandardXHR;
+
+// Determine support properties
+xhrSupported = jQuery.ajaxSettings.xhr();
+jQuery.support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
+xhrSupported = jQuery.support.ajax = !!xhrSupported;
+
+// Create transport if the browser can provide an xhr
+if ( xhrSupported ) {
+
+	jQuery.ajaxTransport(function( s ) {
+		// Cross domain only allowed if supported through XMLHttpRequest
+		if ( !s.crossDomain || jQuery.support.cors ) {
+
+			var callback;
+
+			return {
+				send: function( headers, complete ) {
+
+					// Get a new xhr
+					var handle, i,
+						xhr = s.xhr();
+
+					// Open the socket
+					// Passing null username, generates a login popup on Opera (#2865)
+					if ( s.username ) {
+						xhr.open( s.type, s.url, s.async, s.username, s.password );
+					} else {
+						xhr.open( s.type, s.url, s.async );
+					}
+
+					// Apply custom fields if provided
+					if ( s.xhrFields ) {
+						for ( i in s.xhrFields ) {
+							xhr[ i ] = s.xhrFields[ i ];
+						}
+					}
+
+					// Override mime type if needed
+					if ( s.mimeType && xhr.overrideMimeType ) {
+						xhr.overrideMimeType( s.mimeType );
+					}
+
+					// X-Requested-With header
+					// For cross-domain requests, seeing as conditions for a preflight are
+					// akin to a jigsaw puzzle, we simply never set it to be sure.
+					// (it can always be set on a per-request basis or even using ajaxSetup)
+					// For same-domain requests, won't change header if already provided.
+					if ( !s.crossDomain && !headers["X-Requested-With"] ) {
+						headers["X-Requested-With"] = "XMLHttpRequest";
+					}
+
+					// Need an extra try/catch for cross domain requests in Firefox 3
+					try {
+						for ( i in headers ) {
+							xhr.setRequestHeader( i, headers[ i ] );
+						}
+					} catch( err ) {}
+
+					// Do send the request
+					// This may raise an exception which is actually
+					// handled in jQuery.ajax (so no try/catch here)
+					xhr.send( ( s.hasContent && s.data ) || null );
+
+					// Listener
+					callback = function( _, isAbort ) {
+						var status, responseHeaders, statusText, responses;
+
+						// Firefox throws exceptions when accessing properties
+						// of an xhr when a network error occurred
+						// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)
+						try {
+
+							// Was never called and is aborted or complete
+							if ( callback && ( isAbort || xhr.readyState === 4 ) ) {
+
+								// Only called once
+								callback = undefined;
+
+								// Do not keep as active anymore
+								if ( handle ) {
+									xhr.onreadystatechange = jQuery.noop;
+									if ( xhrOnUnloadAbort ) {
+										delete xhrCallbacks[ handle ];
+									}
+								}
+
+								// If it's an abort
+								if ( isAbort ) {
+									// Abort it manually if needed
+									if ( xhr.readyState !== 4 ) {
+										xhr.abort();
+									}
+								} else {
+									responses = {};
+									status = xhr.status;
+									responseHeaders = xhr.getAllResponseHeaders();
+
+									// When requesting binary data, IE6-9 will throw an exception
+									// on any attempt to access responseText (#11426)
+									if ( typeof xhr.responseText === "string" ) {
+										responses.text = xhr.responseText;
+									}
+
+									// Firefox throws an exception when accessing
+									// statusText for faulty cross-domain requests
+									try {
+										statusText = xhr.statusText;
+									} catch( e ) {
+										// We normalize with Webkit giving an empty statusText
+										statusText = "";
+									}
+
+									// Filter status for non standard behaviors
+
+									// If the request is local and we have data: assume a success
+									// (success with no data won't get notified, that's the best we
+									// can do given current implementations)
+									if ( !status && s.isLocal && !s.crossDomain ) {
+										status = responses.text ? 200 : 404;
+									// IE - #1450: sometimes returns 1223 when it should be 204
+									} else if ( status === 1223 ) {
+										status = 204;
+									}
+								}
+							}
+						} catch( firefoxAccessException ) {
+							if ( !isAbort ) {
+								complete( -1, firefoxAccessException );
+							}
+						}
+
+						// Call complete if needed
+						if ( responses ) {
+							complete( status, statusText, responses, responseHeaders );
+						}
+					};
+
+					if ( !s.async ) {
+						// if we're in sync mode we fire the callback
+						callback();
+					} else if ( xhr.readyState === 4 ) {
+						// (IE6 & IE7) if it's in cache and has been
+						// retrieved directly we need to fire the callback
+						setTimeout( callback );
+					} else {
+						handle = ++xhrId;
+						if ( xhrOnUnloadAbort ) {
+							// Create the active xhrs callbacks list if needed
+							// and attach the unload handler
+							if ( !xhrCallbacks ) {
+								xhrCallbacks = {};
+								jQuery( window ).unload( xhrOnUnloadAbort );
+							}
+							// Add to list of active xhrs callbacks
+							xhrCallbacks[ handle ] = callback;
+						}
+						xhr.onreadystatechange = callback;
+					}
+				},
+
+				abort: function() {
+					if ( callback ) {
+						callback( undefined, true );
+					}
+				}
+			};
+		}
+	});
+}
+var fxNow, timerId,
+	rfxtypes = /^(?:toggle|show|hide)$/,
+	rfxnum = new RegExp( "^(?:([+-])=|)(" + core_pnum + ")([a-z%]*)$", "i" ),
+	rrun = /queueHooks$/,
+	animationPrefilters = [ defaultPrefilter ],
+	tweeners = {
+		"*": [function( prop, value ) {
+			var tween = this.createTween( prop, value ),
+				target = tween.cur(),
+				parts = rfxnum.exec( value ),
+				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),
+
+				// Starting value computation is required for potential unit mismatches
+				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
+					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
+				scale = 1,
+				maxIterations = 20;
+
+			if ( start && start[ 3 ] !== unit ) {
+				// Trust units reported by jQuery.css
+				unit = unit || start[ 3 ];
+
+				// Make sure we update the tween properties later on
+				parts = parts || [];
+
+				// Iteratively approximate from a nonzero starting point
+				start = +target || 1;
+
+				do {
+					// If previous iteration zeroed out, double until we get *something*
+					// Use a string for doubling factor so we don't accidentally see scale as unchanged below
+					scale = scale || ".5";
+
+					// Adjust and apply
+					start = start / scale;
+					jQuery.style( tween.elem, prop, start + unit );
+
+				// Update scale, tolerating zero or NaN from tween.cur()
+				// And breaking the loop if scale is unchanged or perfect, or if we've just had enough
+				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
+			}
+
+			// Update tween properties
+			if ( parts ) {
+				start = tween.start = +start || +target || 0;
+				tween.unit = unit;
+				// If a +=/-= token was provided, we're doing a relative animation
+				tween.end = parts[ 1 ] ?
+					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
+					+parts[ 2 ];
+			}
+
+			return tween;
+		}]
+	};
+
+// Animations created synchronously will run synchronously
+function createFxNow() {
+	setTimeout(function() {
+		fxNow = undefined;
+	});
+	return ( fxNow = jQuery.now() );
+}
+
+function createTween( value, prop, animation ) {
+	var tween,
+		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
+		index = 0,
+		length = collection.length;
+	for ( ; index < length; index++ ) {
+		if ( (tween = collection[ index ].call( animation, prop, value )) ) {
+
+			// we're done with this property
+			return tween;
+		}
+	}
+}
+
+function Animation( elem, properties, options ) {
+	var result,
+		stopped,
+		index = 0,
+		length = animationPrefilters.length,
+		deferred = jQuery.Deferred().always( function() {
+			// don't match elem in the :animated selector
+			delete tick.elem;
+		}),
+		tick = function() {
+			if ( stopped ) {
+				return false;
+			}
+			var currentTime = fxNow || createFxNow(),
+				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
+				// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
+				temp = remaining / animation.duration || 0,
+				percent = 1 - temp,
+				index = 0,
+				length = animation.tweens.length;
+
+			for ( ; index < length ; index++ ) {
+				animation.tweens[ index ].run( percent );
+			}
+
+			deferred.notifyWith( elem, [ animation, percent, remaining ]);
+
+			if ( percent < 1 && length ) {
+				return remaining;
+			} else {
+				deferred.resolveWith( elem, [ animation ] );
+				return false;
+			}
+		},
+		animation = deferred.promise({
+			elem: elem,
+			props: jQuery.extend( {}, properties ),
+			opts: jQuery.extend( true, { specialEasing: {} }, options ),
+			originalProperties: properties,
+			originalOptions: options,
+			startTime: fxNow || createFxNow(),
+			duration: options.duration,
+			tweens: [],
+			createTween: function( prop, end ) {
+				var tween = jQuery.Tween( elem, animation.opts, prop, end,
+						animation.opts.specialEasing[ prop ] || animation.opts.easing );
+				animation.tweens.push( tween );
+				return tween;
+			},
+			stop: function( gotoEnd ) {
+				var index = 0,
+					// if we are going to the end, we want to run all the tweens
+					// otherwise we skip this part
+					length = gotoEnd ? animation.tweens.length : 0;
+				if ( stopped ) {
+					return this;
+				}
+				stopped = true;
+				for ( ; index < length ; index++ ) {
+					animation.tweens[ index ].run( 1 );
+				}
+
+				// resolve when we played the last frame
+				// otherwise, reject
+				if ( gotoEnd ) {
+					deferred.resolveWith( elem, [ animation, gotoEnd ] );
+				} else {
+					deferred.rejectWith( elem, [ animation, gotoEnd ] );
+				}
+				return this;
+			}
+		}),
+		props = animation.props;
+
+	propFilter( props, animation.opts.specialEasing );
+
+	for ( ; index < length ; index++ ) {
+		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
+		if ( result ) {
+			return result;
+		}
+	}
+
+	jQuery.map( props, createTween, animation );
+
+	if ( jQuery.isFunction( animation.opts.start ) ) {
+		animation.opts.start.call( elem, animation );
+	}
+
+	jQuery.fx.timer(
+		jQuery.extend( tick, {
+			elem: elem,
+			anim: animation,
+			queue: animation.opts.queue
+		})
+	);
+
+	// attach callbacks from options
+	return animation.progress( animation.opts.progress )
+		.done( animation.opts.done, animation.opts.complete )
+		.fail( animation.opts.fail )
+		.always( animation.opts.always );
+}
+
+function propFilter( props, specialEasing ) {
+	var index, name, easing, value, hooks;
+
+	// camelCase, specialEasing and expand cssHook pass
+	for ( index in props ) {
+		name = jQuery.camelCase( index );
+		easing = specialEasing[ name ];
+		value = props[ index ];
+		if ( jQuery.isArray( value ) ) {
+			easing = value[ 1 ];
+			value = props[ index ] = value[ 0 ];
+		}
+
+		if ( index !== name ) {
+			props[ name ] = value;
+			delete props[ index ];
+		}
+
+		hooks = jQuery.cssHooks[ name ];
+		if ( hooks && "expand" in hooks ) {
+			value = hooks.expand( value );
+			delete props[ name ];
+
+			// not quite $.extend, this wont overwrite keys already present.
+			// also - reusing 'index' from above because we have the correct "name"
+			for ( index in value ) {
+				if ( !( index in props ) ) {
+					props[ index ] = value[ index ];
+					specialEasing[ index ] = easing;
+				}
+			}
+		} else {
+			specialEasing[ name ] = easing;
+		}
+	}
+}
+
+jQuery.Animation = jQuery.extend( Animation, {
+
+	tweener: function( props, callback ) {
+		if ( jQuery.isFunction( props ) ) {
+			callback = props;
+			props = [ "*" ];
+		} else {
+			props = props.split(" ");
+		}
+
+		var prop,
+			index = 0,
+			length = props.length;
+
+		for ( ; index < length ; index++ ) {
+			prop = props[ index ];
+			tweeners[ prop ] = tweeners[ prop ] || [];
+			tweeners[ prop ].unshift( callback );
+		}
+	},
+
+	prefilter: function( callback, prepend ) {
+		if ( prepend ) {
+			animationPrefilters.unshift( callback );
+		} else {
+			animationPrefilters.push( callback );
+		}
+	}
+});
+
+function defaultPrefilter( elem, props, opts ) {
+	/* jshint validthis: true */
+	var prop, value, toggle, tween, hooks, oldfire,
+		anim = this,
+		orig = {},
+		style = elem.style,
+		hidden = elem.nodeType && isHidden( elem ),
+		dataShow = jQuery._data( elem, "fxshow" );
+
+	// handle queue: false promises
+	if ( !opts.queue ) {
+		hooks = jQuery._queueHooks( elem, "fx" );
+		if ( hooks.unqueued == null ) {
+			hooks.unqueued = 0;
+			oldfire = hooks.empty.fire;
+			hooks.empty.fire = function() {
+				if ( !hooks.unqueued ) {
+					oldfire();
+				}
+			};
+		}
+		hooks.unqueued++;
+
+		anim.always(function() {
+			// doing this makes sure that the complete handler will be called
+			// before this completes
+			anim.always(function() {
+				hooks.unqueued--;
+				if ( !jQuery.queue( elem, "fx" ).length ) {
+					hooks.empty.fire();
+				}
+			});
+		});
+	}
+
+	// height/width overflow pass
+	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
+		// Make sure that nothing sneaks out
+		// Record all 3 overflow attributes because IE does not
+		// change the overflow attribute when overflowX and
+		// overflowY are set to the same value
+		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];
+
+		// Set display property to inline-block for height/width
+		// animations on inline elements that are having width/height animated
+		if ( jQuery.css( elem, "display" ) === "inline" &&
+				jQuery.css( elem, "float" ) === "none" ) {
+
+			// inline-level elements accept inline-block;
+			// block-level elements need to be inline with layout
+			if ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === "inline" ) {
+				style.display = "inline-block";
+
+			} else {
+				style.zoom = 1;
+			}
+		}
+	}
+
+	if ( opts.overflow ) {
+		style.overflow = "hidden";
+		if ( !jQuery.support.shrinkWrapBlocks ) {
+			anim.always(function() {
+				style.overflow = opts.overflow[ 0 ];
+				style.overflowX = opts.overflow[ 1 ];
+				style.overflowY = opts.overflow[ 2 ];
+			});
+		}
+	}
+
+
+	// show/hide pass
+	for ( prop in props ) {
+		value = props[ prop ];
+		if ( rfxtypes.exec( value ) ) {
+			delete props[ prop ];
+			toggle = toggle || value === "toggle";
+			if ( value === ( hidden ? "hide" : "show" ) ) {
+				continue;
+			}
+			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
+		}
+	}
+
+	if ( !jQuery.isEmptyObject( orig ) ) {
+		if ( dataShow ) {
+			if ( "hidden" in dataShow ) {
+				hidden = dataShow.hidden;
+			}
+		} else {
+			dataShow = jQuery._data( elem, "fxshow", {} );
+		}
+
+		// store state if its toggle - enables .stop().toggle() to "reverse"
+		if ( toggle ) {
+			dataShow.hidden = !hidden;
+		}
+		if ( hidden ) {
+			jQuery( elem ).show();
+		} else {
+			anim.done(function() {
+				jQuery( elem ).hide();
+			});
+		}
+		anim.done(function() {
+			var prop;
+			jQuery._removeData( elem, "fxshow" );
+			for ( prop in orig ) {
+				jQuery.style( elem, prop, orig[ prop ] );
+			}
+		});
+		for ( prop in orig ) {
+			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
+
+			if ( !( prop in dataShow ) ) {
+				dataShow[ prop ] = tween.start;
+				if ( hidden ) {
+					tween.end = tween.start;
+					tween.start = prop === "width" || prop === "height" ? 1 : 0;
+				}
+			}
+		}
+	}
+}
+
+function Tween( elem, options, prop, end, easing ) {
+	return new Tween.prototype.init( elem, options, prop, end, easing );
+}
+jQuery.Tween = Tween;
+
+Tween.prototype = {
+	constructor: Tween,
+	init: function( elem, options, prop, end, easing, unit ) {
+		this.elem = elem;
+		this.prop = prop;
+		this.easing = easing || "swing";
+		this.options = options;
+		this.start = this.now = this.cur();
+		this.end = end;
+		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
+	},
+	cur: function() {
+		var hooks = Tween.propHooks[ this.prop ];
+
+		return hooks && hooks.get ?
+			hooks.get( this ) :
+			Tween.propHooks._default.get( this );
+	},
+	run: function( percent ) {
+		var eased,
+			hooks = Tween.propHooks[ this.prop ];
+
+		if ( this.options.duration ) {
+			this.pos = eased = jQuery.easing[ this.easing ](
+				percent, this.options.duration * percent, 0, 1, this.options.duration
+			);
+		} else {
+			this.pos = eased = percent;
+		}
+		this.now = ( this.end - this.start ) * eased + this.start;
+
+		if ( this.options.step ) {
+			this.options.step.call( this.elem, this.now, this );
+		}
+
+		if ( hooks && hooks.set ) {
+			hooks.set( this );
+		} else {
+			Tween.propHooks._default.set( this );
+		}
+		return this;
+	}
+};
+
+Tween.prototype.init.prototype = Tween.prototype;
+
+Tween.propHooks = {
+	_default: {
+		get: function( tween ) {
+			var result;
+
+			if ( tween.elem[ tween.prop ] != null &&
+				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
+				return tween.elem[ tween.prop ];
+			}
+
+			// passing an empty string as a 3rd parameter to .css will automatically
+			// attempt a parseFloat and fallback to a string if the parse fails
+			// so, simple values such as "10px" are parsed to Float.
+			// complex values such as "rotate(1rad)" are returned as is.
+			result = jQuery.css( tween.elem, tween.prop, "" );
+			// Empty strings, null, undefined and "auto" are converted to 0.
+			return !result || result === "auto" ? 0 : result;
+		},
+		set: function( tween ) {
+			// use step hook for back compat - use cssHook if its there - use .style if its
+			// available and use plain properties where available
+			if ( jQuery.fx.step[ tween.prop ] ) {
+				jQuery.fx.step[ tween.prop ]( tween );
+			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
+				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
+			} else {
+				tween.elem[ tween.prop ] = tween.now;
+			}
+		}
+	}
+};
+
+// Support: IE <=9
+// Panic based approach to setting things on disconnected nodes
+
+Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
+	set: function( tween ) {
+		if ( tween.elem.nodeType && tween.elem.parentNode ) {
+			tween.elem[ tween.prop ] = tween.now;
+		}
+	}
+};
+
+jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
+	var cssFn = jQuery.fn[ name ];
+	jQuery.fn[ name ] = function( speed, easing, callback ) {
+		return speed == null || typeof speed === "boolean" ?
+			cssFn.apply( this, arguments ) :
+			this.animate( genFx( name, true ), speed, easing, callback );
+	};
+});
+
+jQuery.fn.extend({
+	fadeTo: function( speed, to, easing, callback ) {
+
+		// show any hidden elements after setting opacity to 0
+		return this.filter( isHidden ).css( "opacity", 0 ).show()
+
+			// animate to the value specified
+			.end().animate({ opacity: to }, speed, easing, callback );
+	},
+	animate: function( prop, speed, easing, callback ) {
+		var empty = jQuery.isEmptyObject( prop ),
+			optall = jQuery.speed( speed, easing, callback ),
+			doAnimation = function() {
+				// Operate on a copy of prop so per-property easing won't be lost
+				var anim = Animation( this, jQuery.extend( {}, prop ), optall );
+
+				// Empty animations, or finishing resolves immediately
+				if ( empty || jQuery._data( this, "finish" ) ) {
+					anim.stop( true );
+				}
+			};
+			doAnimation.finish = doAnimation;
+
+		return empty || optall.queue === false ?
+			this.each( doAnimation ) :
+			this.queue( optall.queue, doAnimation );
+	},
+	stop: function( type, clearQueue, gotoEnd ) {
+		var stopQueue = function( hooks ) {
+			var stop = hooks.stop;
+			delete hooks.stop;
+			stop( gotoEnd );
+		};
+
+		if ( typeof type !== "string" ) {
+			gotoEnd = clearQueue;
+			clearQueue = type;
+			type = undefined;
+		}
+		if ( clearQueue && type !== false ) {
+			this.queue( type || "fx", [] );
+		}
+
+		return this.each(function() {
+			var dequeue = true,
+				index = type != null && type + "queueHooks",
+				timers = jQuery.timers,
+				data = jQuery._data( this );
+
+			if ( index ) {
+				if ( data[ index ] && data[ index ].stop ) {
+					stopQueue( data[ index ] );
+				}
+			} else {
+				for ( index in data ) {
+					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
+						stopQueue( data[ index ] );
+					}
+				}
+			}
+
+			for ( index = timers.length; index--; ) {
+				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
+					timers[ index ].anim.stop( gotoEnd );
+					dequeue = false;
+					timers.splice( index, 1 );
+				}
+			}
+
+			// start the next in the queue if the last step wasn't forced
+			// timers currently will call their complete callbacks, which will dequeue
+			// but only if they were gotoEnd
+			if ( dequeue || !gotoEnd ) {
+				jQuery.dequeue( this, type );
+			}
+		});
+	},
+	finish: function( type ) {
+		if ( type !== false ) {
+			type = type || "fx";
+		}
+		return this.each(function() {
+			var index,
+				data = jQuery._data( this ),
+				queue = data[ type + "queue" ],
+				hooks = data[ type + "queueHooks" ],
+				timers = jQuery.timers,
+				length = queue ? queue.length : 0;
+
+			// enable finishing flag on private data
+			data.finish = true;
+
+			// empty the queue first
+			jQuery.queue( this, type, [] );
+
+			if ( hooks && hooks.stop ) {
+				hooks.stop.call( this, true );
+			}
+
+			// look for any active animations, and finish them
+			for ( index = timers.length; index--; ) {
+				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
+					timers[ index ].anim.stop( true );
+					timers.splice( index, 1 );
+				}
+			}
+
+			// look for any animations in the old queue and finish them
+			for ( index = 0; index < length; index++ ) {
+				if ( queue[ index ] && queue[ index ].finish ) {
+					queue[ index ].finish.call( this );
+				}
+			}
+
+			// turn off finishing flag
+			delete data.finish;
+		});
+	}
+});
+
+// Generate parameters to create a standard animation
+function genFx( type, includeWidth ) {
+	var which,
+		attrs = { height: type },
+		i = 0;
+
+	// if we include width, step value is 1 to do all cssExpand values,
+	// if we don't include width, step value is 2 to skip over Left and Right
+	includeWidth = includeWidth? 1 : 0;
+	for( ; i < 4 ; i += 2 - includeWidth ) {
+		which = cssExpand[ i ];
+		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
+	}
+
+	if ( includeWidth ) {
+		attrs.opacity = attrs.width = type;
+	}
+
+	return attrs;
+}
+
+// Generate shortcuts for custom animations
+jQuery.each({
+	slideDown: genFx("show"),
+	slideUp: genFx("hide"),
+	slideToggle: genFx("toggle"),
+	fadeIn: { opacity: "show" },
+	fadeOut: { opacity: "hide" },
+	fadeToggle: { opacity: "toggle" }
+}, function( name, props ) {
+	jQuery.fn[ name ] = function( speed, easing, callback ) {
+		return this.animate( props, speed, easing, callback );
+	};
+});
+
+jQuery.speed = function( speed, easing, fn ) {
+	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
+		complete: fn || !fn && easing ||
+			jQuery.isFunction( speed ) && speed,
+		duration: speed,
+		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
+	};
+
+	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
+		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;
+
+	// normalize opt.queue - true/undefined/null -> "fx"
+	if ( opt.queue == null || opt.queue === true ) {
+		opt.queue = "fx";
+	}
+
+	// Queueing
+	opt.old = opt.complete;
+
+	opt.complete = function() {
+		if ( jQuery.isFunction( opt.old ) ) {
+			opt.old.call( this );
+		}
+
+		if ( opt.queue ) {
+			jQuery.dequeue( this, opt.queue );
+		}
+	};
+
+	return opt;
+};
+
+jQuery.easing = {
+	linear: function( p ) {
+		return p;
+	},
+	swing: function( p ) {
+		return 0.5 - Math.cos( p*Math.PI ) / 2;
+	}
+};
+
+jQuery.timers = [];
+jQuery.fx = Tween.prototype.init;
+jQuery.fx.tick = function() {
+	var timer,
+		timers = jQuery.timers,
+		i = 0;
+
+	fxNow = jQuery.now();
+
+	for ( ; i < timers.length; i++ ) {
+		timer = timers[ i ];
+		// Checks the timer has not already been removed
+		if ( !timer() && timers[ i ] === timer ) {
+			timers.splice( i--, 1 );
+		}
+	}
+
+	if ( !timers.length ) {
+		jQuery.fx.stop();
+	}
+	fxNow = undefined;
+};
+
+jQuery.fx.timer = function( timer ) {
+	if ( timer() && jQuery.timers.push( timer ) ) {
+		jQuery.fx.start();
+	}
+};
+
+jQuery.fx.interval = 13;
+
+jQuery.fx.start = function() {
+	if ( !timerId ) {
+		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
+	}
+};
+
+jQuery.fx.stop = function() {
+	clearInterval( timerId );
+	timerId = null;
+};
+
+jQuery.fx.speeds = {
+	slow: 600,
+	fast: 200,
+	// Default speed
+	_default: 400
+};
+
+// Back Compat <1.8 extension point
+jQuery.fx.step = {};
+
+if ( jQuery.expr && jQuery.expr.filters ) {
+	jQuery.expr.filters.animated = function( elem ) {
+		return jQuery.grep(jQuery.timers, function( fn ) {
+			return elem === fn.elem;
+		}).length;
+	};
+}
+jQuery.fn.offset = function( options ) {
+	if ( arguments.length ) {
+		return options === undefined ?
+			this :
+			this.each(function( i ) {
+				jQuery.offset.setOffset( this, options, i );
+			});
+	}
+
+	var docElem, win,
+		box = { top: 0, left: 0 },
+		elem = this[ 0 ],
+		doc = elem && elem.ownerDocument;
+
+	if ( !doc ) {
+		return;
+	}
+
+	docElem = doc.documentElement;
+
+	// Make sure it's not a disconnected DOM node
+	if ( !jQuery.contains( docElem, elem ) ) {
+		return box;
+	}
+
+	// If we don't have gBCR, just use 0,0 rather than error
+	// BlackBerry 5, iOS 3 (original iPhone)
+	if ( typeof elem.getBoundingClientRect !== core_strundefined ) {
+		box = elem.getBoundingClientRect();
+	}
+	win = getWindow( doc );
+	return {
+		top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
+		left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
+	};
+};
+
+jQuery.offset = {
+
+	setOffset: function( elem, options, i ) {
+		var position = jQuery.css( elem, "position" );
+
+		// set position first, in-case top/left are set even on static elem
+		if ( position === "static" ) {
+			elem.style.position = "relative";
+		}
+
+		var curElem = jQuery( elem ),
+			curOffset = curElem.offset(),
+			curCSSTop = jQuery.css( elem, "top" ),
+			curCSSLeft = jQuery.css( elem, "left" ),
+			calculatePosition = ( position === "absolute" || position === "fixed" ) && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1,
+			props = {}, curPosition = {}, curTop, curLeft;
+
+		// need to be able to calculate position if either top or left is auto and position is either absolute or fixed
+		if ( calculatePosition ) {
+			curPosition = curElem.position();
+			curTop = curPosition.top;
+			curLeft = curPosition.left;
+		} else {
+			curTop = parseFloat( curCSSTop ) || 0;
+			curLeft = parseFloat( curCSSLeft ) || 0;
+		}
+
+		if ( jQuery.isFunction( options ) ) {
+			options = options.call( elem, i, curOffset );
+		}
+
+		if ( options.top != null ) {
+			props.top = ( options.top - curOffset.top ) + curTop;
+		}
+		if ( options.left != null ) {
+			props.left = ( options.left - curOffset.left ) + curLeft;
+		}
+
+		if ( "using" in options ) {
+			options.using.call( elem, props );
+		} else {
+			curElem.css( props );
+		}
+	}
+};
+
+
+jQuery.fn.extend({
+
+	position: function() {
+		if ( !this[ 0 ] ) {
+			return;
+		}
+
+		var offsetParent, offset,
+			parentOffset = { top: 0, left: 0 },
+			elem = this[ 0 ];
+
+		// fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent
+		if ( jQuery.css( elem, "position" ) === "fixed" ) {
+			// we assume that getBoundingClientRect is available when computed position is fixed
+			offset = elem.getBoundingClientRect();
+		} else {
+			// Get *real* offsetParent
+			offsetParent = this.offsetParent();
+
+			// Get correct offsets
+			offset = this.offset();
+			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
+				parentOffset = offsetParent.offset();
+			}
+
+			// Add offsetParent borders
+			parentOffset.top  += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
+			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
+		}
+
+		// Subtract parent offsets and element margins
+		// note: when an element has margin: auto the offsetLeft and marginLeft
+		// are the same in Safari causing offset.left to incorrectly be 0
+		return {
+			top:  offset.top  - parentOffset.top - jQuery.css( elem, "marginTop", true ),
+			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true)
+		};
+	},
+
+	offsetParent: function() {
+		return this.map(function() {
+			var offsetParent = this.offsetParent || docElem;
+			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position") === "static" ) ) {
+				offsetParent = offsetParent.offsetParent;
+			}
+			return offsetParent || docElem;
+		});
+	}
+});
+
+
+// Create scrollLeft and scrollTop methods
+jQuery.each( {scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function( method, prop ) {
+	var top = /Y/.test( prop );
+
+	jQuery.fn[ method ] = function( val ) {
+		return jQuery.access( this, function( elem, method, val ) {
+			var win = getWindow( elem );
+
+			if ( val === undefined ) {
+				return win ? (prop in win) ? win[ prop ] :
+					win.document.documentElement[ method ] :
+					elem[ method ];
+			}
+
+			if ( win ) {
+				win.scrollTo(
+					!top ? val : jQuery( win ).scrollLeft(),
+					top ? val : jQuery( win ).scrollTop()
+				);
+
+			} else {
+				elem[ method ] = val;
+			}
+		}, method, val, arguments.length, null );
+	};
+});
+
+function getWindow( elem ) {
+	return jQuery.isWindow( elem ) ?
+		elem :
+		elem.nodeType === 9 ?
+			elem.defaultView || elem.parentWindow :
+			false;
+}
+// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
+jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
+	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
+		// margin is only for outerHeight, outerWidth
+		jQuery.fn[ funcName ] = function( margin, value ) {
+			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
+				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );
+
+			return jQuery.access( this, function( elem, type, value ) {
+				var doc;
+
+				if ( jQuery.isWindow( elem ) ) {
+					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
+					// isn't a whole lot we can do. See pull request at this URL for discussion:
+					// https://github.com/jquery/jquery/pull/764
+					return elem.document.documentElement[ "client" + name ];
+				}
+
+				// Get document width or height
+				if ( elem.nodeType === 9 ) {
+					doc = elem.documentElement;
+
+					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
+					// unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
+					return Math.max(
+						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
+						elem.body[ "offset" + name ], doc[ "offset" + name ],
+						doc[ "client" + name ]
+					);
+				}
+
+				return value === undefined ?
+					// Get width or height on the element, requesting but not forcing parseFloat
+					jQuery.css( elem, type, extra ) :
+
+					// Set width or height on the element
+					jQuery.style( elem, type, value, extra );
+			}, type, chainable ? margin : undefined, chainable, null );
+		};
+	});
+});
+// Limit scope pollution from any deprecated API
+// (function() {
+
+// The number of elements contained in the matched element set
+jQuery.fn.size = function() {
+	return this.length;
+};
+
+jQuery.fn.andSelf = jQuery.fn.addBack;
+
+// })();
+if ( typeof module === "object" && module && typeof module.exports === "object" ) {
+	// Expose jQuery as module.exports in loaders that implement the Node
+	// module pattern (including browserify). Do not create the global, since
+	// the user will be storing it themselves locally, and globals are frowned
+	// upon in the Node module world.
+	module.exports = jQuery;
+} else {
+	// Otherwise expose jQuery to the global object as usual
+	window.jQuery = window.$ = jQuery;
+
+	// Register as a named AMD module, since jQuery can be concatenated with other
+	// files that may use define, but not via a proper concatenation script that
+	// understands anonymous AMD modules. A named AMD is safest and most robust
+	// way to register. Lowercase jquery is used because AMD module names are
+	// derived from file names, and jQuery is normally delivered in a lowercase
+	// file name. Do this after creating the global so that if an AMD module wants
+	// to call noConflict to hide this version of jQuery, it will work.
+	if ( typeof define === "function" && define.amd ) {
+		define( "jquery", [], function () { return jQuery; } );
+	}
+}
+
+})( window );
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_diagonals-thick_18_b81900_40x40.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_diagonals-thick_18_b81900_40x40.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_diagonals-thick_20_666666_40x40.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_diagonals-thick_20_666666_40x40.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_flat_0_aaaaaa_40x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_flat_0_aaaaaa_40x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_flat_10_000000_40x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_flat_10_000000_40x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_flat_75_ffffff_40x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_flat_75_ffffff_40x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_100_f6f6f6_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_100_f6f6f6_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_100_fdf5ce_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_100_fdf5ce_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_55_fbf9ee_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_55_fbf9ee_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_65_ffffff_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_65_ffffff_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_75_dadada_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_75_dadada_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_75_e6e6e6_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_75_e6e6e6_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_glass_95_fef1ec_1x400.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_glass_95_fef1ec_1x400.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_gloss-wave_35_f6a828_500x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_gloss-wave_35_f6a828_500x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_highlight-soft_100_eeeeee_1x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_highlight-soft_100_eeeeee_1x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_highlight-soft_75_cccccc_1x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_highlight-soft_75_cccccc_1x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-bg_highlight-soft_75_ffe45c_1x100.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-bg_highlight-soft_75_ffe45c_1x100.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_222222_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_222222_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_228ef1_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_228ef1_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_2e83ff_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_2e83ff_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_454545_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_454545_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_888888_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_888888_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_cd0a0a_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_cd0a0a_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_ef8c08_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_ef8c08_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_ffd27a_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_ffd27a_256x240.png differ
Binary files elefant-elefant_1_3_10_beta/js/jquery-ui/images/ui-icons_ffffff_256x240.png and elefant-elefant_1_3_11_rc/js/jquery-ui/images/ui-icons_ffffff_256x240.png differ
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/index.html elefant-elefant_1_3_11_rc/js/jquery-ui/index.html
--- elefant-elefant_1_3_10_beta/js/jquery-ui/index.html	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/index.html	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,513 @@
+<!doctype html>
+<html lang="us">
+<head>
+	<meta charset="utf-8">
+	<title>jQuery UI Example Page</title>
+	<link href="jquery-ui.css" rel="stylesheet">
+	<style>
+	body{
+		font: 62.5% "Trebuchet MS", sans-serif;
+		margin: 50px;
+	}
+	.demoHeaders {
+		margin-top: 2em;
+	}
+	#dialog-link {
+		padding: .4em 1em .4em 20px;
+		text-decoration: none;
+		position: relative;
+	}
+	#dialog-link span.ui-icon {
+		margin: 0 5px 0 0;
+		position: absolute;
+		left: .2em;
+		top: 50%;
+		margin-top: -8px;
+	}
+	#icons {
+		margin: 0;
+		padding: 0;
+	}
+	#icons li {
+		margin: 2px;
+		position: relative;
+		padding: 4px 0;
+		cursor: pointer;
+		float: left;
+		list-style: none;
+	}
+	#icons span.ui-icon {
+		float: left;
+		margin: 0 4px;
+	}
+	.fakewindowcontain .ui-widget-overlay {
+		position: absolute;
+	}
+	select {
+		width: 200px;
+	}
+	</style>
+</head>
+<body>
+
+<h1>Welcome to jQuery UI!</h1>
+
+<div class="ui-widget">
+	<p>This page demonstrates the widgets and theme you selected in Download Builder. Please make sure you are using them with a compatible jQuery version.</p>
+</div>
+
+<h1>YOUR COMPONENTS:</h1>
+
+
+<!-- Accordion -->
+<h2 class="demoHeaders">Accordion</h2>
+<div id="accordion">
+	<h3>First</h3>
+	<div>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
+	<h3>Second</h3>
+	<div>Phasellus mattis tincidunt nibh.</div>
+	<h3>Third</h3>
+	<div>Nam dui erat, auctor a, dignissim quis.</div>
+</div>
+
+
+
+<!-- Autocomplete -->
+<h2 class="demoHeaders">Autocomplete</h2>
+<div>
+	<input id="autocomplete" title="type &quot;a&quot;">
+</div>
+
+
+
+<!-- Button -->
+<h2 class="demoHeaders">Button</h2>
+<button id="button">A button element</button>
+<form style="margin-top: 1em;">
+	<div id="radioset">
+		<input type="radio" id="radio1" name="radio"><label for="radio1">Choice 1</label>
+		<input type="radio" id="radio2" name="radio" checked="checked"><label for="radio2">Choice 2</label>
+		<input type="radio" id="radio3" name="radio"><label for="radio3">Choice 3</label>
+	</div>
+</form>
+
+
+
+<!-- Tabs -->
+<h2 class="demoHeaders">Tabs</h2>
+<div id="tabs">
+	<ul>
+		<li><a href="#tabs-1">First</a></li>
+		<li><a href="#tabs-2">Second</a></li>
+		<li><a href="#tabs-3">Third</a></li>
+	</ul>
+	<div id="tabs-1">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
+	<div id="tabs-2">Phasellus mattis tincidunt nibh. Cras orci urna, blandit id, pretium vel, aliquet ornare, felis. Maecenas scelerisque sem non nisl. Fusce sed lorem in enim dictum bibendum.</div>
+	<div id="tabs-3">Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.</div>
+</div>
+
+
+
+<!-- Dialog NOTE: Dialog is not generated by UI in this demo so it can be visually styled in themeroller-->
+<h2 class="demoHeaders">Dialog</h2>
+<p><a href="#" id="dialog-link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a></p>
+
+<h2 class="demoHeaders">Overlay and Shadow Classes <em>(not currently used in UI widgets)</em></h2>
+<div style="position: relative; width: 96%; height: 200px; padding:1% 2%; overflow:hidden;" class="fakewindowcontain">
+	<p>Lorem ipsum dolor sit amet,  Nulla nec tortor. Donec id elit quis purus consectetur consequat. </p><p>Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. </p><p>Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. </p><p>Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. </p><p>Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. </p><p>Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. </p>
+
+	<!-- ui-dialog -->
+	<div class="ui-overlay"><div class="ui-widget-overlay"></div><div class="ui-widget-shadow ui-corner-all" style="width: 302px; height: 152px; position: absolute; left: 50px; top: 30px;"></div></div>
+	<div style="position: absolute; width: 280px; height: 130px;left: 50px; top: 30px; padding: 10px;" class="ui-widget ui-widget-content ui-corner-all">
+		<div class="ui-dialog-content ui-widget-content" style="background: none; border: 0;">
+			<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
+		</div>
+	</div>
+
+</div>
+
+<!-- ui-dialog -->
+<div id="dialog" title="Dialog Title">
+	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
+</div>
+
+
+
+<h2 class="demoHeaders">Framework Icons (content color preview)</h2>
+<ul id="icons" class="ui-widget ui-helper-clearfix">
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-n"><span class="ui-icon ui-icon-carat-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-ne"><span class="ui-icon ui-icon-carat-1-ne"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-e"><span class="ui-icon ui-icon-carat-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-se"><span class="ui-icon ui-icon-carat-1-se"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-s"><span class="ui-icon ui-icon-carat-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-sw"><span class="ui-icon ui-icon-carat-1-sw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-w"><span class="ui-icon ui-icon-carat-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-nw"><span class="ui-icon ui-icon-carat-1-nw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-2-n-s"><span class="ui-icon ui-icon-carat-2-n-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-carat-2-e-w"><span class="ui-icon ui-icon-carat-2-e-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-n"><span class="ui-icon ui-icon-triangle-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-ne"><span class="ui-icon ui-icon-triangle-1-ne"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-e"><span class="ui-icon ui-icon-triangle-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-se"><span class="ui-icon ui-icon-triangle-1-se"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-s"><span class="ui-icon ui-icon-triangle-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-sw"><span class="ui-icon ui-icon-triangle-1-sw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-w"><span class="ui-icon ui-icon-triangle-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-nw"><span class="ui-icon ui-icon-triangle-1-nw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-2-n-s"><span class="ui-icon ui-icon-triangle-2-n-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-2-e-w"><span class="ui-icon ui-icon-triangle-2-e-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-n"><span class="ui-icon ui-icon-arrow-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-ne"><span class="ui-icon ui-icon-arrow-1-ne"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-e"><span class="ui-icon ui-icon-arrow-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-se"><span class="ui-icon ui-icon-arrow-1-se"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-s"><span class="ui-icon ui-icon-arrow-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-sw"><span class="ui-icon ui-icon-arrow-1-sw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-w"><span class="ui-icon ui-icon-arrow-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-nw"><span class="ui-icon ui-icon-arrow-1-nw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-n-s"><span class="ui-icon ui-icon-arrow-2-n-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-ne-sw"><span class="ui-icon ui-icon-arrow-2-ne-sw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-e-w"><span class="ui-icon ui-icon-arrow-2-e-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-se-nw"><span class="ui-icon ui-icon-arrow-2-se-nw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-n"><span class="ui-icon ui-icon-arrowstop-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-e"><span class="ui-icon ui-icon-arrowstop-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-s"><span class="ui-icon ui-icon-arrowstop-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-w"><span class="ui-icon ui-icon-arrowstop-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-n"><span class="ui-icon ui-icon-arrowthick-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-ne"><span class="ui-icon ui-icon-arrowthick-1-ne"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-e"><span class="ui-icon ui-icon-arrowthick-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-se"><span class="ui-icon ui-icon-arrowthick-1-se"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-s"><span class="ui-icon ui-icon-arrowthick-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-sw"><span class="ui-icon ui-icon-arrowthick-1-sw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-w"><span class="ui-icon ui-icon-arrowthick-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-nw"><span class="ui-icon ui-icon-arrowthick-1-nw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-n-s"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-ne-sw"><span class="ui-icon ui-icon-arrowthick-2-ne-sw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-e-w"><span class="ui-icon ui-icon-arrowthick-2-e-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-se-nw"><span class="ui-icon ui-icon-arrowthick-2-se-nw"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-n"><span class="ui-icon ui-icon-arrowthickstop-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-e"><span class="ui-icon ui-icon-arrowthickstop-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-s"><span class="ui-icon ui-icon-arrowthickstop-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-w"><span class="ui-icon ui-icon-arrowthickstop-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-w"><span class="ui-icon ui-icon-arrowreturnthick-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-n"><span class="ui-icon ui-icon-arrowreturnthick-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-e"><span class="ui-icon ui-icon-arrowreturnthick-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-s"><span class="ui-icon ui-icon-arrowreturnthick-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-w"><span class="ui-icon ui-icon-arrowreturn-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-n"><span class="ui-icon ui-icon-arrowreturn-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-e"><span class="ui-icon ui-icon-arrowreturn-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-s"><span class="ui-icon ui-icon-arrowreturn-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-w"><span class="ui-icon ui-icon-arrowrefresh-1-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-n"><span class="ui-icon ui-icon-arrowrefresh-1-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-e"><span class="ui-icon ui-icon-arrowrefresh-1-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-s"><span class="ui-icon ui-icon-arrowrefresh-1-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-4"><span class="ui-icon ui-icon-arrow-4"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-4-diag"><span class="ui-icon ui-icon-arrow-4-diag"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-extlink"><span class="ui-icon ui-icon-extlink"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-newwin"><span class="ui-icon ui-icon-newwin"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-refresh"><span class="ui-icon ui-icon-refresh"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-shuffle"><span class="ui-icon ui-icon-shuffle"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-transfer-e-w"><span class="ui-icon ui-icon-transfer-e-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-transferthick-e-w"><span class="ui-icon ui-icon-transferthick-e-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-folder-collapsed"><span class="ui-icon ui-icon-folder-collapsed"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-folder-open"><span class="ui-icon ui-icon-folder-open"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-document"><span class="ui-icon ui-icon-document"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-document-b"><span class="ui-icon ui-icon-document-b"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-note"><span class="ui-icon ui-icon-note"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-mail-open"><span class="ui-icon ui-icon-mail-open"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-suitcase"><span class="ui-icon ui-icon-suitcase"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-comment"><span class="ui-icon ui-icon-comment"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-person"><span class="ui-icon ui-icon-person"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-print"><span class="ui-icon ui-icon-print"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-trash"><span class="ui-icon ui-icon-trash"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-locked"><span class="ui-icon ui-icon-locked"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-unlocked"><span class="ui-icon ui-icon-unlocked"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-bookmark"><span class="ui-icon ui-icon-bookmark"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-tag"><span class="ui-icon ui-icon-tag"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-home"><span class="ui-icon ui-icon-home"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-flag"><span class="ui-icon ui-icon-flag"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-calculator"><span class="ui-icon ui-icon-calculator"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-cart"><span class="ui-icon ui-icon-cart"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-pencil"><span class="ui-icon ui-icon-pencil"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-clock"><span class="ui-icon ui-icon-clock"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-disk"><span class="ui-icon ui-icon-disk"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-calendar"><span class="ui-icon ui-icon-calendar"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-zoomin"><span class="ui-icon ui-icon-zoomin"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-zoomout"><span class="ui-icon ui-icon-zoomout"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-search"><span class="ui-icon ui-icon-search"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-wrench"><span class="ui-icon ui-icon-wrench"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-gear"><span class="ui-icon ui-icon-gear"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-heart"><span class="ui-icon ui-icon-heart"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-star"><span class="ui-icon ui-icon-star"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-link"><span class="ui-icon ui-icon-link"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-cancel"><span class="ui-icon ui-icon-cancel"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-plus"><span class="ui-icon ui-icon-plus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-minus"><span class="ui-icon ui-icon-minus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-minusthick"><span class="ui-icon ui-icon-minusthick"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-close"><span class="ui-icon ui-icon-close"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-closethick"><span class="ui-icon ui-icon-closethick"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-key"><span class="ui-icon ui-icon-key"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-lightbulb"><span class="ui-icon ui-icon-lightbulb"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-scissors"><span class="ui-icon ui-icon-scissors"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-clipboard"><span class="ui-icon ui-icon-clipboard"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-copy"><span class="ui-icon ui-icon-copy"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-contact"><span class="ui-icon ui-icon-contact"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-image"><span class="ui-icon ui-icon-image"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-video"><span class="ui-icon ui-icon-video"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-script"><span class="ui-icon ui-icon-script"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-alert"><span class="ui-icon ui-icon-alert"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-info"><span class="ui-icon ui-icon-info"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-notice"><span class="ui-icon ui-icon-notice"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-help"><span class="ui-icon ui-icon-help"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-bullet"><span class="ui-icon ui-icon-bullet"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-radio-off"><span class="ui-icon ui-icon-radio-off"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-radio-on"><span class="ui-icon ui-icon-radio-on"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-pin-w"><span class="ui-icon ui-icon-pin-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-pin-s"><span class="ui-icon ui-icon-pin-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-play"><span class="ui-icon ui-icon-play"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-pause"><span class="ui-icon ui-icon-pause"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-next"><span class="ui-icon ui-icon-seek-next"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-prev"><span class="ui-icon ui-icon-seek-prev"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-end"><span class="ui-icon ui-icon-seek-end"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-first"><span class="ui-icon ui-icon-seek-first"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-stop"><span class="ui-icon ui-icon-stop"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-eject"><span class="ui-icon ui-icon-eject"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-volume-off"><span class="ui-icon ui-icon-volume-off"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-volume-on"><span class="ui-icon ui-icon-volume-on"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-power"><span class="ui-icon ui-icon-power"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-signal-diag"><span class="ui-icon ui-icon-signal-diag"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-signal"><span class="ui-icon ui-icon-signal"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-0"><span class="ui-icon ui-icon-battery-0"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-1"><span class="ui-icon ui-icon-battery-1"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-2"><span class="ui-icon ui-icon-battery-2"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-3"><span class="ui-icon ui-icon-battery-3"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-plus"><span class="ui-icon ui-icon-circle-plus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-minus"><span class="ui-icon ui-icon-circle-minus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-close"><span class="ui-icon ui-icon-circle-close"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-e"><span class="ui-icon ui-icon-circle-triangle-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-s"><span class="ui-icon ui-icon-circle-triangle-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-w"><span class="ui-icon ui-icon-circle-triangle-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-n"><span class="ui-icon ui-icon-circle-triangle-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-e"><span class="ui-icon ui-icon-circle-arrow-e"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-s"><span class="ui-icon ui-icon-circle-arrow-s"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-w"><span class="ui-icon ui-icon-circle-arrow-w"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-n"><span class="ui-icon ui-icon-circle-arrow-n"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-zoomin"><span class="ui-icon ui-icon-circle-zoomin"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-zoomout"><span class="ui-icon ui-icon-circle-zoomout"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-check"><span class="ui-icon ui-icon-circle-check"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circlesmall-plus"><span class="ui-icon ui-icon-circlesmall-plus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circlesmall-minus"><span class="ui-icon ui-icon-circlesmall-minus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-circlesmall-close"><span class="ui-icon ui-icon-circlesmall-close"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-squaresmall-plus"><span class="ui-icon ui-icon-squaresmall-plus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-squaresmall-minus"><span class="ui-icon ui-icon-squaresmall-minus"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-squaresmall-close"><span class="ui-icon ui-icon-squaresmall-close"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-dotted-vertical"><span class="ui-icon ui-icon-grip-dotted-vertical"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-dotted-horizontal"><span class="ui-icon ui-icon-grip-dotted-horizontal"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-solid-vertical"><span class="ui-icon ui-icon-grip-solid-vertical"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-solid-horizontal"><span class="ui-icon ui-icon-grip-solid-horizontal"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-gripsmall-diagonal-se"><span class="ui-icon ui-icon-gripsmall-diagonal-se"></span></li>
+	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-diagonal-se"><span class="ui-icon ui-icon-grip-diagonal-se"></span></li>
+</ul>
+
+
+<!-- Slider -->
+<h2 class="demoHeaders">Slider</h2>
+<div id="slider"></div>
+
+
+
+<!-- Datepicker -->
+<h2 class="demoHeaders">Datepicker</h2>
+<div id="datepicker"></div>
+
+
+
+<!-- Progressbar -->
+<h2 class="demoHeaders">Progressbar</h2>
+<div id="progressbar"></div>
+
+
+
+<!-- Progressbar -->
+<h2 class="demoHeaders">Selectmenu</h2>
+<select id="selectmenu">
+	<option>Slower</option>
+	<option>Slow</option>
+	<option selected="selected">Medium</option>
+	<option>Fast</option>
+	<option>Faster</option>
+</select>
+
+
+
+<!-- Spinner -->
+<h2 class="demoHeaders">Spinner</h2>
+<input id="spinner">
+
+
+
+<!-- Menu -->
+<h2 class="demoHeaders">Menu</h2>
+<ul style="width:100px;" id="menu">
+	<li>Item 1</li>
+	<li>Item 2</li>
+	<li>Item 3
+		<ul>
+			<li>Item 3-1</li>
+			<li>Item 3-2</li>
+			<li>Item 3-3</li>
+			<li>Item 3-4</li>
+			<li>Item 3-5</li>
+		</ul>
+	</li>
+	<li>Item 4</li>
+	<li>Item 5</li>
+</ul>
+
+
+
+<!-- Tooltip -->
+<h2 class="demoHeaders">Tooltip</h2>
+<p id="tooltip">
+	<a href="#" title="That&apos;s what this widget is">Tooltips</a> can be attached to any element. When you hover
+the element with your mouse, the title attribute is displayed in a little box next to the element, just like a native tooltip.
+</p>
+
+
+<!-- Highlight / Error -->
+<h2 class="demoHeaders">Highlight / Error</h2>
+<div class="ui-widget">
+	<div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
+		<p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
+		<strong>Hey!</strong> Sample ui-state-highlight style.</p>
+	</div>
+</div>
+<br>
+<div class="ui-widget">
+	<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">
+		<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
+		<strong>Alert:</strong> Sample ui-state-error style.</p>
+	</div>
+</div>
+
+<script src="external/jquery/jquery.js"></script>
+<script src="jquery-ui.js"></script>
+<script>
+
+$( "#accordion" ).accordion();
+
+
+
+var availableTags = [
+	"ActionScript",
+	"AppleScript",
+	"Asp",
+	"BASIC",
+	"C",
+	"C++",
+	"Clojure",
+	"COBOL",
+	"ColdFusion",
+	"Erlang",
+	"Fortran",
+	"Groovy",
+	"Haskell",
+	"Java",
+	"JavaScript",
+	"Lisp",
+	"Perl",
+	"PHP",
+	"Python",
+	"Ruby",
+	"Scala",
+	"Scheme"
+];
+$( "#autocomplete" ).autocomplete({
+	source: availableTags
+});
+
+
+
+$( "#button" ).button();
+$( "#radioset" ).buttonset();
+
+
+
+$( "#tabs" ).tabs();
+
+
+
+$( "#dialog" ).dialog({
+	autoOpen: false,
+	width: 400,
+	buttons: [
+		{
+			text: "Ok",
+			click: function() {
+				$( this ).dialog( "close" );
+			}
+		},
+		{
+			text: "Cancel",
+			click: function() {
+				$( this ).dialog( "close" );
+			}
+		}
+	]
+});
+
+// Link to open the dialog
+$( "#dialog-link" ).click(function( event ) {
+	$( "#dialog" ).dialog( "open" );
+	event.preventDefault();
+});
+
+
+
+$( "#datepicker" ).datepicker({
+	inline: true
+});
+
+
+
+$( "#slider" ).slider({
+	range: true,
+	values: [ 17, 67 ]
+});
+
+
+
+$( "#progressbar" ).progressbar({
+	value: 20
+});
+
+
+
+$( "#spinner" ).spinner();
+
+
+
+$( "#menu" ).menu();
+
+
+
+$( "#tooltip" ).tooltip();
+
+
+
+$( "#selectmenu" ).selectmenu();
+
+
+// Hover states on the static widgets
+$( "#dialog-link, #icons li" ).hover(
+	function() {
+		$( this ).addClass( "ui-state-hover" );
+	},
+	function() {
+		$( this ).removeClass( "ui-state-hover" );
+	}
+);
+</script>
+</body>
+</html>
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.css elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.css
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.css	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.css	2015-09-05 21:13:59.000000000 -0500
@@ -1,5 +1,1225 @@
-/*! jQuery UI - v1.10.0 - 2013-01-17
+/*! jQuery UI - v1.11.4 - 2015-03-11
 * http://jqueryui.com
-* Includes: jquery.ui.core.css, jquery.ui.accordion.css, jquery.ui.autocomplete.css, jquery.ui.button.css, jquery.ui.datepicker.css, jquery.ui.dialog.css, jquery.ui.menu.css, jquery.ui.progressbar.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.slider.css, jquery.ui.spinner.css, jquery.ui.tabs.css, jquery.ui.tooltip.css
-* To view and modify this theme, visit http://jqueryui.com/themeroller/
-* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-accordion .ui-accordion-header{display:block;cursor:pointer;position:relative;margin-top:2px;padding:.5em .5em .5em .7em;min-height:0}.ui-accordion .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-noicons{padding-left:.7em}.ui-accordion .ui-accordion-icons .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-header .ui-accordion-header-icon{position:absolute;left:.5em;top:50%;margin-top:-8px}.ui-accordion .ui-accordion-content{padding:1em 2.2em;border-top:0;overflow:auto}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.4em 1em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-datepicker{width:17em;padding:.2em .2em 0;display:none}.ui-datepicker .ui-datepicker-header{position:relative;padding:.2em 0}.ui-datepicker .ui-datepicker-prev,.ui-datepicker .ui-datepicker-next{position:absolute;top:2px;width:1.8em;height:1.8em}.ui-datepicker .ui-datepicker-prev-hover,.ui-datepicker .ui-datepicker-next-hover{top:1px}.ui-datepicker .ui-datepicker-prev{left:2px}.ui-datepicker .ui-datepicker-next{right:2px}.ui-datepicker .ui-datepicker-prev-hover{left:1px}.ui-datepicker .ui-datepicker-next-hover{right:1px}.ui-datepicker .ui-datepicker-prev span,.ui-datepicker .ui-datepicker-next span{display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.ui-datepicker .ui-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.ui-datepicker .ui-datepicker-title select{font-size:1em;margin:1px 0}.ui-datepicker select.ui-datepicker-month-year{width:100%}.ui-datepicker select.ui-datepicker-month,.ui-datepicker select.ui-datepicker-year{width:49%}.ui-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.ui-datepicker th{padding:.7em .3em;text-align:center;font-weight:bold;border:0}.ui-datepicker td{border:0;padding:1px}.ui-datepicker td span,.ui-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.ui-datepicker .ui-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.ui-datepicker .ui-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current{float:left}.ui-datepicker.ui-datepicker-multi{width:auto}.ui-datepicker-multi .ui-datepicker-group{float:left}.ui-datepicker-multi .ui-datepicker-group table{width:95%;margin:0 auto .4em}.ui-datepicker-multi-2 .ui-datepicker-group{width:50%}.ui-datepicker-multi-3 .ui-datepicker-group{width:33.3%}.ui-datepicker-multi-4 .ui-datepicker-group{width:25%}.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header{border-left-width:0}.ui-datepicker-multi .ui-datepicker-buttonpane{clear:left}.ui-datepicker-row-break{clear:both;width:100%;font-size:0}.ui-datepicker-rtl{direction:rtl}.ui-datepicker-rtl .ui-datepicker-prev{right:2px;left:auto}.ui-datepicker-rtl .ui-datepicker-next{left:2px;right:auto}.ui-datepicker-rtl .ui-datepicker-prev:hover{right:1px;left:auto}.ui-datepicker-rtl .ui-datepicker-next:hover{left:1px;right:auto}.ui-datepicker-rtl .ui-datepicker-buttonpane{clear:right}.ui-datepicker-rtl .ui-datepicker-buttonpane button{float:left}.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,.ui-datepicker-rtl .ui-datepicker-group{float:right}.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header{border-right-width:0;border-left-width:1px}.ui-dialog{position:absolute;top:0;left:0;padding:.2em;outline:0}.ui-dialog .ui-dialog-titlebar{padding:.4em 1em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:21px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em 1em;background:none;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-menu{list-style:none;padding:2px;margin:0;display:block;outline:none}.ui-menu .ui-menu{margin-top:-3px;position:absolute}.ui-menu .ui-menu-item{margin:0;padding:0;width:100%}.ui-menu .ui-menu-divider{margin:5px -2px 5px -2px;height:0;font-size:0;line-height:0;border-width:1px 0 0 0}.ui-menu .ui-menu-item a{text-decoration:none;display:block;padding:2px .4em;line-height:1.5;min-height:0;font-weight:normal}.ui-menu .ui-menu-item a.ui-state-focus,.ui-menu .ui-menu-item a.ui-state-active{font-weight:normal;margin:-1px}.ui-menu .ui-state-disabled{font-weight:normal;margin:.4em 0 .2em;line-height:1.5}.ui-menu .ui-state-disabled a{cursor:default}.ui-menu-icons{position:relative}.ui-menu-icons .ui-menu-item a{position:relative;padding-left:2em}.ui-menu .ui-icon{position:absolute;top:.2em;left:.2em}.ui-menu .ui-menu-icon{position:static;float:right}.ui-progressbar{height:2em;text-align:left;overflow:hidden}.ui-progressbar .ui-progressbar-value{margin:-1px;height:100%}.ui-progressbar .ui-progressbar-overlay{background:url("images/animated-overlay.gif");height:100%;filter:alpha(opacity=25);opacity:0.25}.ui-progressbar-indeterminate .ui-progressbar-value{background-image:none}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:0.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-selectable-helper{position:absolute;z-index:100;border:1px dotted black}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-spinner{position:relative;display:inline-block;overflow:hidden;padding:0;vertical-align:middle}.ui-spinner-input{border:none;background:none;color:inherit;padding:0;margin:.2em 0;vertical-align:middle;margin-left:.4em;margin-right:22px}.ui-spinner-button{width:16px;height:50%;font-size:.5em;padding:0;margin:0;text-align:center;position:absolute;cursor:default;display:block;overflow:hidden;right:0}.ui-spinner a.ui-spinner-button{border-top:none;border-bottom:none;border-right:none}.ui-spinner .ui-icon{position:absolute;margin-top:-8px;top:50%;left:0}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}.ui-spinner .ui-icon-triangle-1-s{background-position:-65px -16px}.ui-tabs{position:relative;padding:.2em}.ui-tabs .ui-tabs-nav{margin:0;padding:.2em .2em 0}.ui-tabs .ui-tabs-nav li{list-style:none;float:left;position:relative;top:0;margin:1px .2em 0 0;border-bottom:0;padding:0;white-space:nowrap}.ui-tabs .ui-tabs-nav li a{float:left;padding:.5em 1em;text-decoration:none}.ui-tabs .ui-tabs-nav li.ui-tabs-active{margin-bottom:-1px;padding-bottom:1px}.ui-tabs .ui-tabs-nav li.ui-tabs-active a,.ui-tabs .ui-tabs-nav li.ui-state-disabled a,.ui-tabs .ui-tabs-nav li.ui-tabs-loading a{cursor:text}.ui-tabs .ui-tabs-nav li a,.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active a{cursor:pointer}.ui-tabs .ui-tabs-panel{display:block;border-width:0;padding:1em 1.4em;background:none}.ui-tooltip{padding:8px;position:absolute;z-index:9999;max-width:300px;-webkit-box-shadow:0 0 5px #aaa;box-shadow:0 0 5px #aaa}body .ui-tooltip{border-width:2px}.ui-widget{font-family:Verdana,Arial,sans-serif;font-size:1.1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Verdana,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid #aaa;background:#fff url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x;color:#222}.ui-widget-content a{color:#222}.ui-widget-header{border:1px solid #aaa;background:#ccc url(images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x;color:#222;font-weight:bold}.ui-widget-header a{color:#222}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid #d3d3d3;background:#e6e6e6 url(images/ui-bg_glass_75_e6e6e6_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#555}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#555;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #999;background:#dadada url(images/ui-bg_glass_75_dadada_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#212121}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited{color:#212121;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid #aaa;background:#fff url(images/ui-bg_glass_65_ffffff_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#212121}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#212121;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #fcefa1;background:#fbf9ee url(images/ui-bg_glass_55_fbf9ee_1x400.png) 50% 50% repeat-x;color:#363636}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#363636}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#fef1ec url(images/ui-bg_glass_95_fef1ec_1x400.png) 50% 50% repeat-x;color:#cd0a0a}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#cd0a0a}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#cd0a0a}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px;background-position:16px 16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(images/ui-icons_222222_256x240.png)}.ui-widget-header .ui-icon{background-image:url(images/ui-icons_222222_256x240.png)}.ui-state-default .ui-icon{background-image:url(images/ui-icons_888888_256x240.png)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url(images/ui-icons_454545_256x240.png)}.ui-state-active .ui-icon{background-image:url(images/ui-icons_454545_256x240.png)}.ui-state-highlight .ui-icon{background-image:url(images/ui-icons_2e83ff_256x240.png)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(images/ui-icons_cd0a0a_256x240.png)}.ui-icon-carat-1-n{background-position:0 0}.ui-icon-carat-1-ne{background-position:-16px 0}.ui-icon-carat-1-e{background-position:-32px 0}.ui-icon-carat-1-se{background-position:-48px 0}.ui-icon-carat-1-s{background-position:-64px 0}.ui-icon-carat-1-sw{background-position:-80px 0}.ui-icon-carat-1-w{background-position:-96px 0}.ui-icon-carat-1-nw{background-position:-112px 0}.ui-icon-carat-2-n-s{background-position:-128px 0}.ui-icon-carat-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-64px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-64px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:0 -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:4px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:4px}.ui-widget-overlay{background:#aaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{margin:-8px 0 0 -8px;padding:8px;background:#aaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x;opacity:.3;filter:Alpha(Opacity=30);border-radius:8px}
\ No newline at end of file
+* Includes: core.css, accordion.css, autocomplete.css, button.css, datepicker.css, dialog.css, draggable.css, menu.css, progressbar.css, resizable.css, selectable.css, selectmenu.css, slider.css, sortable.css, spinner.css, tabs.css, tooltip.css, theme.css
+* To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Trebuchet%20MS%2CTahoma%2CVerdana%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=4px&bgColorHeader=f6a828&bgTextureHeader=gloss_wave&bgImgOpacityHeader=35&borderColorHeader=e78f08&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=eeeeee&bgTextureContent=highlight_soft&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=333333&iconColorContent=222222&bgColorDefault=f6f6f6&bgTextureDefault=glass&bgImgOpacityDefault=100&borderColorDefault=cccccc&fcDefault=1c94c4&iconColorDefault=ef8c08&bgColorHover=fdf5ce&bgTextureHover=glass&bgImgOpacityHover=100&borderColorHover=fbcb09&fcHover=c77405&iconColorHover=ef8c08&bgColorActive=ffffff&bgTextureActive=glass&bgImgOpacityActive=65&borderColorActive=fbd850&fcActive=eb8f00&iconColorActive=ef8c08&bgColorHighlight=ffe45c&bgTextureHighlight=highlight_soft&bgImgOpacityHighlight=75&borderColorHighlight=fed22f&fcHighlight=363636&iconColorHighlight=228ef1&bgColorError=b81900&bgTextureError=diagonals_thick&bgImgOpacityError=18&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffd27a&bgColorOverlay=666666&bgTextureOverlay=diagonals_thick&bgImgOpacityOverlay=20&opacityOverlay=50&bgColorShadow=000000&bgTextureShadow=flat&bgImgOpacityShadow=10&opacityShadow=20&thicknessShadow=5px&offsetTopShadow=-5px&offsetLeftShadow=-5px&cornerRadiusShadow=5px
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
+
+/* Layout helpers
+----------------------------------*/
+.ui-helper-hidden {
+	display: none;
+}
+.ui-helper-hidden-accessible {
+	border: 0;
+	clip: rect(0 0 0 0);
+	height: 1px;
+	margin: -1px;
+	overflow: hidden;
+	padding: 0;
+	position: absolute;
+	width: 1px;
+}
+.ui-helper-reset {
+	margin: 0;
+	padding: 0;
+	border: 0;
+	outline: 0;
+	line-height: 1.3;
+	text-decoration: none;
+	font-size: 100%;
+	list-style: none;
+}
+.ui-helper-clearfix:before,
+.ui-helper-clearfix:after {
+	content: "";
+	display: table;
+	border-collapse: collapse;
+}
+.ui-helper-clearfix:after {
+	clear: both;
+}
+.ui-helper-clearfix {
+	min-height: 0; /* support: IE7 */
+}
+.ui-helper-zfix {
+	width: 100%;
+	height: 100%;
+	top: 0;
+	left: 0;
+	position: absolute;
+	opacity: 0;
+	filter:Alpha(Opacity=0); /* support: IE8 */
+}
+
+.ui-front {
+	z-index: 100;
+}
+
+
+/* Interaction Cues
+----------------------------------*/
+.ui-state-disabled {
+	cursor: default !important;
+}
+
+
+/* Icons
+----------------------------------*/
+
+/* states and images */
+.ui-icon {
+	display: block;
+	text-indent: -99999px;
+	overflow: hidden;
+	background-repeat: no-repeat;
+}
+
+
+/* Misc visuals
+----------------------------------*/
+
+/* Overlays */
+.ui-widget-overlay {
+	position: fixed;
+	top: 0;
+	left: 0;
+	width: 100%;
+	height: 100%;
+}
+.ui-accordion .ui-accordion-header {
+	display: block;
+	cursor: pointer;
+	position: relative;
+	margin: 2px 0 0 0;
+	padding: .5em .5em .5em .7em;
+	min-height: 0; /* support: IE7 */
+	font-size: 100%;
+}
+.ui-accordion .ui-accordion-icons {
+	padding-left: 2.2em;
+}
+.ui-accordion .ui-accordion-icons .ui-accordion-icons {
+	padding-left: 2.2em;
+}
+.ui-accordion .ui-accordion-header .ui-accordion-header-icon {
+	position: absolute;
+	left: .5em;
+	top: 50%;
+	margin-top: -8px;
+}
+.ui-accordion .ui-accordion-content {
+	padding: 1em 2.2em;
+	border-top: 0;
+	overflow: auto;
+}
+.ui-autocomplete {
+	position: absolute;
+	top: 0;
+	left: 0;
+	cursor: default;
+}
+.ui-button {
+	display: inline-block;
+	position: relative;
+	padding: 0;
+	line-height: normal;
+	margin-right: .1em;
+	cursor: pointer;
+	vertical-align: middle;
+	text-align: center;
+	overflow: visible; /* removes extra width in IE */
+}
+.ui-button,
+.ui-button:link,
+.ui-button:visited,
+.ui-button:hover,
+.ui-button:active {
+	text-decoration: none;
+}
+/* to make room for the icon, a width needs to be set here */
+.ui-button-icon-only {
+	width: 2.2em;
+}
+/* button elements seem to need a little more width */
+button.ui-button-icon-only {
+	width: 2.4em;
+}
+.ui-button-icons-only {
+	width: 3.4em;
+}
+button.ui-button-icons-only {
+	width: 3.7em;
+}
+
+/* button text element */
+.ui-button .ui-button-text {
+	display: block;
+	line-height: normal;
+}
+.ui-button-text-only .ui-button-text {
+	padding: .4em 1em;
+}
+.ui-button-icon-only .ui-button-text,
+.ui-button-icons-only .ui-button-text {
+	padding: .4em;
+	text-indent: -9999999px;
+}
+.ui-button-text-icon-primary .ui-button-text,
+.ui-button-text-icons .ui-button-text {
+	padding: .4em 1em .4em 2.1em;
+}
+.ui-button-text-icon-secondary .ui-button-text,
+.ui-button-text-icons .ui-button-text {
+	padding: .4em 2.1em .4em 1em;
+}
+.ui-button-text-icons .ui-button-text {
+	padding-left: 2.1em;
+	padding-right: 2.1em;
+}
+/* no icon support for input elements, provide padding by default */
+input.ui-button {
+	padding: .4em 1em;
+}
+
+/* button icon element(s) */
+.ui-button-icon-only .ui-icon,
+.ui-button-text-icon-primary .ui-icon,
+.ui-button-text-icon-secondary .ui-icon,
+.ui-button-text-icons .ui-icon,
+.ui-button-icons-only .ui-icon {
+	position: absolute;
+	top: 50%;
+	margin-top: -8px;
+}
+.ui-button-icon-only .ui-icon {
+	left: 50%;
+	margin-left: -8px;
+}
+.ui-button-text-icon-primary .ui-button-icon-primary,
+.ui-button-text-icons .ui-button-icon-primary,
+.ui-button-icons-only .ui-button-icon-primary {
+	left: .5em;
+}
+.ui-button-text-icon-secondary .ui-button-icon-secondary,
+.ui-button-text-icons .ui-button-icon-secondary,
+.ui-button-icons-only .ui-button-icon-secondary {
+	right: .5em;
+}
+
+/* button sets */
+.ui-buttonset {
+	margin-right: 7px;
+}
+.ui-buttonset .ui-button {
+	margin-left: 0;
+	margin-right: -.3em;
+}
+
+/* workarounds */
+/* reset extra padding in Firefox, see h5bp.com/l */
+input.ui-button::-moz-focus-inner,
+button.ui-button::-moz-focus-inner {
+	border: 0;
+	padding: 0;
+}
+.ui-datepicker {
+	width: 17em;
+	padding: .2em .2em 0;
+	display: none;
+}
+.ui-datepicker .ui-datepicker-header {
+	position: relative;
+	padding: .2em 0;
+}
+.ui-datepicker .ui-datepicker-prev,
+.ui-datepicker .ui-datepicker-next {
+	position: absolute;
+	top: 2px;
+	width: 1.8em;
+	height: 1.8em;
+}
+.ui-datepicker .ui-datepicker-prev-hover,
+.ui-datepicker .ui-datepicker-next-hover {
+	top: 1px;
+}
+.ui-datepicker .ui-datepicker-prev {
+	left: 2px;
+}
+.ui-datepicker .ui-datepicker-next {
+	right: 2px;
+}
+.ui-datepicker .ui-datepicker-prev-hover {
+	left: 1px;
+}
+.ui-datepicker .ui-datepicker-next-hover {
+	right: 1px;
+}
+.ui-datepicker .ui-datepicker-prev span,
+.ui-datepicker .ui-datepicker-next span {
+	display: block;
+	position: absolute;
+	left: 50%;
+	margin-left: -8px;
+	top: 50%;
+	margin-top: -8px;
+}
+.ui-datepicker .ui-datepicker-title {
+	margin: 0 2.3em;
+	line-height: 1.8em;
+	text-align: center;
+}
+.ui-datepicker .ui-datepicker-title select {
+	font-size: 1em;
+	margin: 1px 0;
+}
+.ui-datepicker select.ui-datepicker-month,
+.ui-datepicker select.ui-datepicker-year {
+	width: 45%;
+}
+.ui-datepicker table {
+	width: 100%;
+	font-size: .9em;
+	border-collapse: collapse;
+	margin: 0 0 .4em;
+}
+.ui-datepicker th {
+	padding: .7em .3em;
+	text-align: center;
+	font-weight: bold;
+	border: 0;
+}
+.ui-datepicker td {
+	border: 0;
+	padding: 1px;
+}
+.ui-datepicker td span,
+.ui-datepicker td a {
+	display: block;
+	padding: .2em;
+	text-align: right;
+	text-decoration: none;
+}
+.ui-datepicker .ui-datepicker-buttonpane {
+	background-image: none;
+	margin: .7em 0 0 0;
+	padding: 0 .2em;
+	border-left: 0;
+	border-right: 0;
+	border-bottom: 0;
+}
+.ui-datepicker .ui-datepicker-buttonpane button {
+	float: right;
+	margin: .5em .2em .4em;
+	cursor: pointer;
+	padding: .2em .6em .3em .6em;
+	width: auto;
+	overflow: visible;
+}
+.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {
+	float: left;
+}
+
+/* with multiple calendars */
+.ui-datepicker.ui-datepicker-multi {
+	width: auto;
+}
+.ui-datepicker-multi .ui-datepicker-group {
+	float: left;
+}
+.ui-datepicker-multi .ui-datepicker-group table {
+	width: 95%;
+	margin: 0 auto .4em;
+}
+.ui-datepicker-multi-2 .ui-datepicker-group {
+	width: 50%;
+}
+.ui-datepicker-multi-3 .ui-datepicker-group {
+	width: 33.3%;
+}
+.ui-datepicker-multi-4 .ui-datepicker-group {
+	width: 25%;
+}
+.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,
+.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {
+	border-left-width: 0;
+}
+.ui-datepicker-multi .ui-datepicker-buttonpane {
+	clear: left;
+}
+.ui-datepicker-row-break {
+	clear: both;
+	width: 100%;
+	font-size: 0;
+}
+
+/* RTL support */
+.ui-datepicker-rtl {
+	direction: rtl;
+}
+.ui-datepicker-rtl .ui-datepicker-prev {
+	right: 2px;
+	left: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-next {
+	left: 2px;
+	right: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-prev:hover {
+	right: 1px;
+	left: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-next:hover {
+	left: 1px;
+	right: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-buttonpane {
+	clear: right;
+}
+.ui-datepicker-rtl .ui-datepicker-buttonpane button {
+	float: left;
+}
+.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,
+.ui-datepicker-rtl .ui-datepicker-group {
+	float: right;
+}
+.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,
+.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {
+	border-right-width: 0;
+	border-left-width: 1px;
+}
+.ui-dialog {
+	overflow: hidden;
+	position: absolute;
+	top: 0;
+	left: 0;
+	padding: .2em;
+	outline: 0;
+}
+.ui-dialog .ui-dialog-titlebar {
+	padding: .4em 1em;
+	position: relative;
+}
+.ui-dialog .ui-dialog-title {
+	float: left;
+	margin: .1em 0;
+	white-space: nowrap;
+	width: 90%;
+	overflow: hidden;
+	text-overflow: ellipsis;
+}
+.ui-dialog .ui-dialog-titlebar-close {
+	position: absolute;
+	right: .3em;
+	top: 50%;
+	width: 20px;
+	margin: -10px 0 0 0;
+	padding: 1px;
+	height: 20px;
+}
+.ui-dialog .ui-dialog-content {
+	position: relative;
+	border: 0;
+	padding: .5em 1em;
+	background: none;
+	overflow: auto;
+}
+.ui-dialog .ui-dialog-buttonpane {
+	text-align: left;
+	border-width: 1px 0 0 0;
+	background-image: none;
+	margin-top: .5em;
+	padding: .3em 1em .5em .4em;
+}
+.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {
+	float: right;
+}
+.ui-dialog .ui-dialog-buttonpane button {
+	margin: .5em .4em .5em 0;
+	cursor: pointer;
+}
+.ui-dialog .ui-resizable-se {
+	width: 12px;
+	height: 12px;
+	right: -5px;
+	bottom: -5px;
+	background-position: 16px 16px;
+}
+.ui-draggable .ui-dialog-titlebar {
+	cursor: move;
+}
+.ui-draggable-handle {
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-menu {
+	list-style: none;
+	padding: 0;
+	margin: 0;
+	display: block;
+	outline: none;
+}
+.ui-menu .ui-menu {
+	position: absolute;
+}
+.ui-menu .ui-menu-item {
+	position: relative;
+	margin: 0;
+	padding: 3px 1em 3px .4em;
+	cursor: pointer;
+	min-height: 0; /* support: IE7 */
+	/* support: IE10, see #8844 */
+	list-style-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");
+}
+.ui-menu .ui-menu-divider {
+	margin: 5px 0;
+	height: 0;
+	font-size: 0;
+	line-height: 0;
+	border-width: 1px 0 0 0;
+}
+.ui-menu .ui-state-focus,
+.ui-menu .ui-state-active {
+	margin: -1px;
+}
+
+/* icon support */
+.ui-menu-icons {
+	position: relative;
+}
+.ui-menu-icons .ui-menu-item {
+	padding-left: 2em;
+}
+
+/* left-aligned */
+.ui-menu .ui-icon {
+	position: absolute;
+	top: 0;
+	bottom: 0;
+	left: .2em;
+	margin: auto 0;
+}
+
+/* right-aligned */
+.ui-menu .ui-menu-icon {
+	left: auto;
+	right: 0;
+}
+.ui-progressbar {
+	height: 2em;
+	text-align: left;
+	overflow: hidden;
+}
+.ui-progressbar .ui-progressbar-value {
+	margin: -1px;
+	height: 100%;
+}
+.ui-progressbar .ui-progressbar-overlay {
+	background: url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");
+	height: 100%;
+	filter: alpha(opacity=25); /* support: IE8 */
+	opacity: 0.25;
+}
+.ui-progressbar-indeterminate .ui-progressbar-value {
+	background-image: none;
+}
+.ui-resizable {
+	position: relative;
+}
+.ui-resizable-handle {
+	position: absolute;
+	font-size: 0.1px;
+	display: block;
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-resizable-disabled .ui-resizable-handle,
+.ui-resizable-autohide .ui-resizable-handle {
+	display: none;
+}
+.ui-resizable-n {
+	cursor: n-resize;
+	height: 7px;
+	width: 100%;
+	top: -5px;
+	left: 0;
+}
+.ui-resizable-s {
+	cursor: s-resize;
+	height: 7px;
+	width: 100%;
+	bottom: -5px;
+	left: 0;
+}
+.ui-resizable-e {
+	cursor: e-resize;
+	width: 7px;
+	right: -5px;
+	top: 0;
+	height: 100%;
+}
+.ui-resizable-w {
+	cursor: w-resize;
+	width: 7px;
+	left: -5px;
+	top: 0;
+	height: 100%;
+}
+.ui-resizable-se {
+	cursor: se-resize;
+	width: 12px;
+	height: 12px;
+	right: 1px;
+	bottom: 1px;
+}
+.ui-resizable-sw {
+	cursor: sw-resize;
+	width: 9px;
+	height: 9px;
+	left: -5px;
+	bottom: -5px;
+}
+.ui-resizable-nw {
+	cursor: nw-resize;
+	width: 9px;
+	height: 9px;
+	left: -5px;
+	top: -5px;
+}
+.ui-resizable-ne {
+	cursor: ne-resize;
+	width: 9px;
+	height: 9px;
+	right: -5px;
+	top: -5px;
+}
+.ui-selectable {
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-selectable-helper {
+	position: absolute;
+	z-index: 100;
+	border: 1px dotted black;
+}
+.ui-selectmenu-menu {
+	padding: 0;
+	margin: 0;
+	position: absolute;
+	top: 0;
+	left: 0;
+	display: none;
+}
+.ui-selectmenu-menu .ui-menu {
+	overflow: auto;
+	/* Support: IE7 */
+	overflow-x: hidden;
+	padding-bottom: 1px;
+}
+.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {
+	font-size: 1em;
+	font-weight: bold;
+	line-height: 1.5;
+	padding: 2px 0.4em;
+	margin: 0.5em 0 0 0;
+	height: auto;
+	border: 0;
+}
+.ui-selectmenu-open {
+	display: block;
+}
+.ui-selectmenu-button {
+	display: inline-block;
+	overflow: hidden;
+	position: relative;
+	text-decoration: none;
+	cursor: pointer;
+}
+.ui-selectmenu-button span.ui-icon {
+	right: 0.5em;
+	left: auto;
+	margin-top: -8px;
+	position: absolute;
+	top: 50%;
+}
+.ui-selectmenu-button span.ui-selectmenu-text {
+	text-align: left;
+	padding: 0.4em 2.1em 0.4em 1em;
+	display: block;
+	line-height: 1.4;
+	overflow: hidden;
+	text-overflow: ellipsis;
+	white-space: nowrap;
+}
+.ui-slider {
+	position: relative;
+	text-align: left;
+}
+.ui-slider .ui-slider-handle {
+	position: absolute;
+	z-index: 2;
+	width: 1.2em;
+	height: 1.2em;
+	cursor: default;
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-slider .ui-slider-range {
+	position: absolute;
+	z-index: 1;
+	font-size: .7em;
+	display: block;
+	border: 0;
+	background-position: 0 0;
+}
+
+/* support: IE8 - See #6727 */
+.ui-slider.ui-state-disabled .ui-slider-handle,
+.ui-slider.ui-state-disabled .ui-slider-range {
+	filter: inherit;
+}
+
+.ui-slider-horizontal {
+	height: .8em;
+}
+.ui-slider-horizontal .ui-slider-handle {
+	top: -.3em;
+	margin-left: -.6em;
+}
+.ui-slider-horizontal .ui-slider-range {
+	top: 0;
+	height: 100%;
+}
+.ui-slider-horizontal .ui-slider-range-min {
+	left: 0;
+}
+.ui-slider-horizontal .ui-slider-range-max {
+	right: 0;
+}
+
+.ui-slider-vertical {
+	width: .8em;
+	height: 100px;
+}
+.ui-slider-vertical .ui-slider-handle {
+	left: -.3em;
+	margin-left: 0;
+	margin-bottom: -.6em;
+}
+.ui-slider-vertical .ui-slider-range {
+	left: 0;
+	width: 100%;
+}
+.ui-slider-vertical .ui-slider-range-min {
+	bottom: 0;
+}
+.ui-slider-vertical .ui-slider-range-max {
+	top: 0;
+}
+.ui-sortable-handle {
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-spinner {
+	position: relative;
+	display: inline-block;
+	overflow: hidden;
+	padding: 0;
+	vertical-align: middle;
+}
+.ui-spinner-input {
+	border: none;
+	background: none;
+	color: inherit;
+	padding: 0;
+	margin: .2em 0;
+	vertical-align: middle;
+	margin-left: .4em;
+	margin-right: 22px;
+}
+.ui-spinner-button {
+	width: 16px;
+	height: 50%;
+	font-size: .5em;
+	padding: 0;
+	margin: 0;
+	text-align: center;
+	position: absolute;
+	cursor: default;
+	display: block;
+	overflow: hidden;
+	right: 0;
+}
+/* more specificity required here to override default borders */
+.ui-spinner a.ui-spinner-button {
+	border-top: none;
+	border-bottom: none;
+	border-right: none;
+}
+/* vertically center icon */
+.ui-spinner .ui-icon {
+	position: absolute;
+	margin-top: -8px;
+	top: 50%;
+	left: 0;
+}
+.ui-spinner-up {
+	top: 0;
+}
+.ui-spinner-down {
+	bottom: 0;
+}
+
+/* TR overrides */
+.ui-spinner .ui-icon-triangle-1-s {
+	/* need to fix icons sprite */
+	background-position: -65px -16px;
+}
+.ui-tabs {
+	position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
+	padding: .2em;
+}
+.ui-tabs .ui-tabs-nav {
+	margin: 0;
+	padding: .2em .2em 0;
+}
+.ui-tabs .ui-tabs-nav li {
+	list-style: none;
+	float: left;
+	position: relative;
+	top: 0;
+	margin: 1px .2em 0 0;
+	border-bottom-width: 0;
+	padding: 0;
+	white-space: nowrap;
+}
+.ui-tabs .ui-tabs-nav .ui-tabs-anchor {
+	float: left;
+	padding: .5em 1em;
+	text-decoration: none;
+}
+.ui-tabs .ui-tabs-nav li.ui-tabs-active {
+	margin-bottom: -1px;
+	padding-bottom: 1px;
+}
+.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,
+.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,
+.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {
+	cursor: text;
+}
+.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {
+	cursor: pointer;
+}
+.ui-tabs .ui-tabs-panel {
+	display: block;
+	border-width: 0;
+	padding: 1em 1.4em;
+	background: none;
+}
+.ui-tooltip {
+	padding: 8px;
+	position: absolute;
+	z-index: 9999;
+	max-width: 300px;
+	-webkit-box-shadow: 0 0 5px #aaa;
+	box-shadow: 0 0 5px #aaa;
+}
+body .ui-tooltip {
+	border-width: 2px;
+}
+
+/* Component containers
+----------------------------------*/
+.ui-widget {
+	font-family: Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
+	font-size: 1.1em;
+}
+.ui-widget .ui-widget {
+	font-size: 1em;
+}
+.ui-widget input,
+.ui-widget select,
+.ui-widget textarea,
+.ui-widget button {
+	font-family: Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
+	font-size: 1em;
+}
+.ui-widget-content {
+	border: 1px solid #dddddd;
+	background: #eeeeee url("images/ui-bg_highlight-soft_100_eeeeee_1x100.png") 50% top repeat-x;
+	color: #333333;
+}
+.ui-widget-content a {
+	color: #333333;
+}
+.ui-widget-header {
+	border: 1px solid #e78f08;
+	background: #f6a828 url("images/ui-bg_gloss-wave_35_f6a828_500x100.png") 50% 50% repeat-x;
+	color: #ffffff;
+	font-weight: bold;
+}
+.ui-widget-header a {
+	color: #ffffff;
+}
+
+/* Interaction states
+----------------------------------*/
+.ui-state-default,
+.ui-widget-content .ui-state-default,
+.ui-widget-header .ui-state-default {
+	border: 1px solid #cccccc;
+	background: #f6f6f6 url("images/ui-bg_glass_100_f6f6f6_1x400.png") 50% 50% repeat-x;
+	font-weight: bold;
+	color: #1c94c4;
+}
+.ui-state-default a,
+.ui-state-default a:link,
+.ui-state-default a:visited {
+	color: #1c94c4;
+	text-decoration: none;
+}
+.ui-state-hover,
+.ui-widget-content .ui-state-hover,
+.ui-widget-header .ui-state-hover,
+.ui-state-focus,
+.ui-widget-content .ui-state-focus,
+.ui-widget-header .ui-state-focus {
+	border: 1px solid #fbcb09;
+	background: #fdf5ce url("images/ui-bg_glass_100_fdf5ce_1x400.png") 50% 50% repeat-x;
+	font-weight: bold;
+	color: #c77405;
+}
+.ui-state-hover a,
+.ui-state-hover a:hover,
+.ui-state-hover a:link,
+.ui-state-hover a:visited,
+.ui-state-focus a,
+.ui-state-focus a:hover,
+.ui-state-focus a:link,
+.ui-state-focus a:visited {
+	color: #c77405;
+	text-decoration: none;
+}
+.ui-state-active,
+.ui-widget-content .ui-state-active,
+.ui-widget-header .ui-state-active {
+	border: 1px solid #fbd850;
+	background: #ffffff url("images/ui-bg_glass_65_ffffff_1x400.png") 50% 50% repeat-x;
+	font-weight: bold;
+	color: #eb8f00;
+}
+.ui-state-active a,
+.ui-state-active a:link,
+.ui-state-active a:visited {
+	color: #eb8f00;
+	text-decoration: none;
+}
+
+/* Interaction Cues
+----------------------------------*/
+.ui-state-highlight,
+.ui-widget-content .ui-state-highlight,
+.ui-widget-header .ui-state-highlight {
+	border: 1px solid #fed22f;
+	background: #ffe45c url("images/ui-bg_highlight-soft_75_ffe45c_1x100.png") 50% top repeat-x;
+	color: #363636;
+}
+.ui-state-highlight a,
+.ui-widget-content .ui-state-highlight a,
+.ui-widget-header .ui-state-highlight a {
+	color: #363636;
+}
+.ui-state-error,
+.ui-widget-content .ui-state-error,
+.ui-widget-header .ui-state-error {
+	border: 1px solid #cd0a0a;
+	background: #b81900 url("images/ui-bg_diagonals-thick_18_b81900_40x40.png") 50% 50% repeat;
+	color: #ffffff;
+}
+.ui-state-error a,
+.ui-widget-content .ui-state-error a,
+.ui-widget-header .ui-state-error a {
+	color: #ffffff;
+}
+.ui-state-error-text,
+.ui-widget-content .ui-state-error-text,
+.ui-widget-header .ui-state-error-text {
+	color: #ffffff;
+}
+.ui-priority-primary,
+.ui-widget-content .ui-priority-primary,
+.ui-widget-header .ui-priority-primary {
+	font-weight: bold;
+}
+.ui-priority-secondary,
+.ui-widget-content .ui-priority-secondary,
+.ui-widget-header .ui-priority-secondary {
+	opacity: .7;
+	filter:Alpha(Opacity=70); /* support: IE8 */
+	font-weight: normal;
+}
+.ui-state-disabled,
+.ui-widget-content .ui-state-disabled,
+.ui-widget-header .ui-state-disabled {
+	opacity: .35;
+	filter:Alpha(Opacity=35); /* support: IE8 */
+	background-image: none;
+}
+.ui-state-disabled .ui-icon {
+	filter:Alpha(Opacity=35); /* support: IE8 - See #6059 */
+}
+
+/* Icons
+----------------------------------*/
+
+/* states and images */
+.ui-icon {
+	width: 16px;
+	height: 16px;
+}
+.ui-icon,
+.ui-widget-content .ui-icon {
+	background-image: url("images/ui-icons_222222_256x240.png");
+}
+.ui-widget-header .ui-icon {
+	background-image: url("images/ui-icons_ffffff_256x240.png");
+}
+.ui-state-default .ui-icon {
+	background-image: url("images/ui-icons_ef8c08_256x240.png");
+}
+.ui-state-hover .ui-icon,
+.ui-state-focus .ui-icon {
+	background-image: url("images/ui-icons_ef8c08_256x240.png");
+}
+.ui-state-active .ui-icon {
+	background-image: url("images/ui-icons_ef8c08_256x240.png");
+}
+.ui-state-highlight .ui-icon {
+	background-image: url("images/ui-icons_228ef1_256x240.png");
+}
+.ui-state-error .ui-icon,
+.ui-state-error-text .ui-icon {
+	background-image: url("images/ui-icons_ffd27a_256x240.png");
+}
+
+/* positioning */
+.ui-icon-blank { background-position: 16px 16px; }
+.ui-icon-carat-1-n { background-position: 0 0; }
+.ui-icon-carat-1-ne { background-position: -16px 0; }
+.ui-icon-carat-1-e { background-position: -32px 0; }
+.ui-icon-carat-1-se { background-position: -48px 0; }
+.ui-icon-carat-1-s { background-position: -64px 0; }
+.ui-icon-carat-1-sw { background-position: -80px 0; }
+.ui-icon-carat-1-w { background-position: -96px 0; }
+.ui-icon-carat-1-nw { background-position: -112px 0; }
+.ui-icon-carat-2-n-s { background-position: -128px 0; }
+.ui-icon-carat-2-e-w { background-position: -144px 0; }
+.ui-icon-triangle-1-n { background-position: 0 -16px; }
+.ui-icon-triangle-1-ne { background-position: -16px -16px; }
+.ui-icon-triangle-1-e { background-position: -32px -16px; }
+.ui-icon-triangle-1-se { background-position: -48px -16px; }
+.ui-icon-triangle-1-s { background-position: -64px -16px; }
+.ui-icon-triangle-1-sw { background-position: -80px -16px; }
+.ui-icon-triangle-1-w { background-position: -96px -16px; }
+.ui-icon-triangle-1-nw { background-position: -112px -16px; }
+.ui-icon-triangle-2-n-s { background-position: -128px -16px; }
+.ui-icon-triangle-2-e-w { background-position: -144px -16px; }
+.ui-icon-arrow-1-n { background-position: 0 -32px; }
+.ui-icon-arrow-1-ne { background-position: -16px -32px; }
+.ui-icon-arrow-1-e { background-position: -32px -32px; }
+.ui-icon-arrow-1-se { background-position: -48px -32px; }
+.ui-icon-arrow-1-s { background-position: -64px -32px; }
+.ui-icon-arrow-1-sw { background-position: -80px -32px; }
+.ui-icon-arrow-1-w { background-position: -96px -32px; }
+.ui-icon-arrow-1-nw { background-position: -112px -32px; }
+.ui-icon-arrow-2-n-s { background-position: -128px -32px; }
+.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }
+.ui-icon-arrow-2-e-w { background-position: -160px -32px; }
+.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }
+.ui-icon-arrowstop-1-n { background-position: -192px -32px; }
+.ui-icon-arrowstop-1-e { background-position: -208px -32px; }
+.ui-icon-arrowstop-1-s { background-position: -224px -32px; }
+.ui-icon-arrowstop-1-w { background-position: -240px -32px; }
+.ui-icon-arrowthick-1-n { background-position: 0 -48px; }
+.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }
+.ui-icon-arrowthick-1-e { background-position: -32px -48px; }
+.ui-icon-arrowthick-1-se { background-position: -48px -48px; }
+.ui-icon-arrowthick-1-s { background-position: -64px -48px; }
+.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }
+.ui-icon-arrowthick-1-w { background-position: -96px -48px; }
+.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }
+.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }
+.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }
+.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }
+.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }
+.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }
+.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }
+.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }
+.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }
+.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }
+.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }
+.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }
+.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }
+.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }
+.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }
+.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }
+.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }
+.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }
+.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }
+.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }
+.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }
+.ui-icon-arrow-4 { background-position: 0 -80px; }
+.ui-icon-arrow-4-diag { background-position: -16px -80px; }
+.ui-icon-extlink { background-position: -32px -80px; }
+.ui-icon-newwin { background-position: -48px -80px; }
+.ui-icon-refresh { background-position: -64px -80px; }
+.ui-icon-shuffle { background-position: -80px -80px; }
+.ui-icon-transfer-e-w { background-position: -96px -80px; }
+.ui-icon-transferthick-e-w { background-position: -112px -80px; }
+.ui-icon-folder-collapsed { background-position: 0 -96px; }
+.ui-icon-folder-open { background-position: -16px -96px; }
+.ui-icon-document { background-position: -32px -96px; }
+.ui-icon-document-b { background-position: -48px -96px; }
+.ui-icon-note { background-position: -64px -96px; }
+.ui-icon-mail-closed { background-position: -80px -96px; }
+.ui-icon-mail-open { background-position: -96px -96px; }
+.ui-icon-suitcase { background-position: -112px -96px; }
+.ui-icon-comment { background-position: -128px -96px; }
+.ui-icon-person { background-position: -144px -96px; }
+.ui-icon-print { background-position: -160px -96px; }
+.ui-icon-trash { background-position: -176px -96px; }
+.ui-icon-locked { background-position: -192px -96px; }
+.ui-icon-unlocked { background-position: -208px -96px; }
+.ui-icon-bookmark { background-position: -224px -96px; }
+.ui-icon-tag { background-position: -240px -96px; }
+.ui-icon-home { background-position: 0 -112px; }
+.ui-icon-flag { background-position: -16px -112px; }
+.ui-icon-calendar { background-position: -32px -112px; }
+.ui-icon-cart { background-position: -48px -112px; }
+.ui-icon-pencil { background-position: -64px -112px; }
+.ui-icon-clock { background-position: -80px -112px; }
+.ui-icon-disk { background-position: -96px -112px; }
+.ui-icon-calculator { background-position: -112px -112px; }
+.ui-icon-zoomin { background-position: -128px -112px; }
+.ui-icon-zoomout { background-position: -144px -112px; }
+.ui-icon-search { background-position: -160px -112px; }
+.ui-icon-wrench { background-position: -176px -112px; }
+.ui-icon-gear { background-position: -192px -112px; }
+.ui-icon-heart { background-position: -208px -112px; }
+.ui-icon-star { background-position: -224px -112px; }
+.ui-icon-link { background-position: -240px -112px; }
+.ui-icon-cancel { background-position: 0 -128px; }
+.ui-icon-plus { background-position: -16px -128px; }
+.ui-icon-plusthick { background-position: -32px -128px; }
+.ui-icon-minus { background-position: -48px -128px; }
+.ui-icon-minusthick { background-position: -64px -128px; }
+.ui-icon-close { background-position: -80px -128px; }
+.ui-icon-closethick { background-position: -96px -128px; }
+.ui-icon-key { background-position: -112px -128px; }
+.ui-icon-lightbulb { background-position: -128px -128px; }
+.ui-icon-scissors { background-position: -144px -128px; }
+.ui-icon-clipboard { background-position: -160px -128px; }
+.ui-icon-copy { background-position: -176px -128px; }
+.ui-icon-contact { background-position: -192px -128px; }
+.ui-icon-image { background-position: -208px -128px; }
+.ui-icon-video { background-position: -224px -128px; }
+.ui-icon-script { background-position: -240px -128px; }
+.ui-icon-alert { background-position: 0 -144px; }
+.ui-icon-info { background-position: -16px -144px; }
+.ui-icon-notice { background-position: -32px -144px; }
+.ui-icon-help { background-position: -48px -144px; }
+.ui-icon-check { background-position: -64px -144px; }
+.ui-icon-bullet { background-position: -80px -144px; }
+.ui-icon-radio-on { background-position: -96px -144px; }
+.ui-icon-radio-off { background-position: -112px -144px; }
+.ui-icon-pin-w { background-position: -128px -144px; }
+.ui-icon-pin-s { background-position: -144px -144px; }
+.ui-icon-play { background-position: 0 -160px; }
+.ui-icon-pause { background-position: -16px -160px; }
+.ui-icon-seek-next { background-position: -32px -160px; }
+.ui-icon-seek-prev { background-position: -48px -160px; }
+.ui-icon-seek-end { background-position: -64px -160px; }
+.ui-icon-seek-start { background-position: -80px -160px; }
+/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */
+.ui-icon-seek-first { background-position: -80px -160px; }
+.ui-icon-stop { background-position: -96px -160px; }
+.ui-icon-eject { background-position: -112px -160px; }
+.ui-icon-volume-off { background-position: -128px -160px; }
+.ui-icon-volume-on { background-position: -144px -160px; }
+.ui-icon-power { background-position: 0 -176px; }
+.ui-icon-signal-diag { background-position: -16px -176px; }
+.ui-icon-signal { background-position: -32px -176px; }
+.ui-icon-battery-0 { background-position: -48px -176px; }
+.ui-icon-battery-1 { background-position: -64px -176px; }
+.ui-icon-battery-2 { background-position: -80px -176px; }
+.ui-icon-battery-3 { background-position: -96px -176px; }
+.ui-icon-circle-plus { background-position: 0 -192px; }
+.ui-icon-circle-minus { background-position: -16px -192px; }
+.ui-icon-circle-close { background-position: -32px -192px; }
+.ui-icon-circle-triangle-e { background-position: -48px -192px; }
+.ui-icon-circle-triangle-s { background-position: -64px -192px; }
+.ui-icon-circle-triangle-w { background-position: -80px -192px; }
+.ui-icon-circle-triangle-n { background-position: -96px -192px; }
+.ui-icon-circle-arrow-e { background-position: -112px -192px; }
+.ui-icon-circle-arrow-s { background-position: -128px -192px; }
+.ui-icon-circle-arrow-w { background-position: -144px -192px; }
+.ui-icon-circle-arrow-n { background-position: -160px -192px; }
+.ui-icon-circle-zoomin { background-position: -176px -192px; }
+.ui-icon-circle-zoomout { background-position: -192px -192px; }
+.ui-icon-circle-check { background-position: -208px -192px; }
+.ui-icon-circlesmall-plus { background-position: 0 -208px; }
+.ui-icon-circlesmall-minus { background-position: -16px -208px; }
+.ui-icon-circlesmall-close { background-position: -32px -208px; }
+.ui-icon-squaresmall-plus { background-position: -48px -208px; }
+.ui-icon-squaresmall-minus { background-position: -64px -208px; }
+.ui-icon-squaresmall-close { background-position: -80px -208px; }
+.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }
+.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }
+.ui-icon-grip-solid-vertical { background-position: -32px -224px; }
+.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }
+.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }
+.ui-icon-grip-diagonal-se { background-position: -80px -224px; }
+
+
+/* Misc visuals
+----------------------------------*/
+
+/* Corner radius */
+.ui-corner-all,
+.ui-corner-top,
+.ui-corner-left,
+.ui-corner-tl {
+	border-top-left-radius: 4px;
+}
+.ui-corner-all,
+.ui-corner-top,
+.ui-corner-right,
+.ui-corner-tr {
+	border-top-right-radius: 4px;
+}
+.ui-corner-all,
+.ui-corner-bottom,
+.ui-corner-left,
+.ui-corner-bl {
+	border-bottom-left-radius: 4px;
+}
+.ui-corner-all,
+.ui-corner-bottom,
+.ui-corner-right,
+.ui-corner-br {
+	border-bottom-right-radius: 4px;
+}
+
+/* Overlays */
+.ui-widget-overlay {
+	background: #666666 url("images/ui-bg_diagonals-thick_20_666666_40x40.png") 50% 50% repeat;
+	opacity: .5;
+	filter: Alpha(Opacity=50); /* support: IE8 */
+}
+.ui-widget-shadow {
+	margin: -5px 0 0 -5px;
+	padding: 5px;
+	background: #000000 url("images/ui-bg_flat_10_000000_40x100.png") 50% 50% repeat-x;
+	opacity: .2;
+	filter: Alpha(Opacity=20); /* support: IE8 */
+	border-radius: 5px;
+}
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.js elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.js
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.js	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.js	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,16617 @@
+/*! jQuery UI - v1.11.4 - 2015-03-11
+* http://jqueryui.com
+* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
+
+(function( factory ) {
+	if ( typeof define === "function" && define.amd ) {
+
+		// AMD. Register as an anonymous module.
+		define([ "jquery" ], factory );
+	} else {
+
+		// Browser globals
+		factory( jQuery );
+	}
+}(function( $ ) {
+/*!
+ * jQuery UI Core 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/category/ui-core/
+ */
+
+
+// $.ui might exist from components with no dependencies, e.g., $.ui.position
+$.ui = $.ui || {};
+
+$.extend( $.ui, {
+	version: "1.11.4",
+
+	keyCode: {
+		BACKSPACE: 8,
+		COMMA: 188,
+		DELETE: 46,
+		DOWN: 40,
+		END: 35,
+		ENTER: 13,
+		ESCAPE: 27,
+		HOME: 36,
+		LEFT: 37,
+		PAGE_DOWN: 34,
+		PAGE_UP: 33,
+		PERIOD: 190,
+		RIGHT: 39,
+		SPACE: 32,
+		TAB: 9,
+		UP: 38
+	}
+});
+
+// plugins
+$.fn.extend({
+	scrollParent: function( includeHidden ) {
+		var position = this.css( "position" ),
+			excludeStaticParent = position === "absolute",
+			overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
+			scrollParent = this.parents().filter( function() {
+				var parent = $( this );
+				if ( excludeStaticParent && parent.css( "position" ) === "static" ) {
+					return false;
+				}
+				return overflowRegex.test( parent.css( "overflow" ) + parent.css( "overflow-y" ) + parent.css( "overflow-x" ) );
+			}).eq( 0 );
+
+		return position === "fixed" || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;
+	},
+
+	uniqueId: (function() {
+		var uuid = 0;
+
+		return function() {
+			return this.each(function() {
+				if ( !this.id ) {
+					this.id = "ui-id-" + ( ++uuid );
+				}
+			});
+		};
+	})(),
+
+	removeUniqueId: function() {
+		return this.each(function() {
+			if ( /^ui-id-\d+$/.test( this.id ) ) {
+				$( this ).removeAttr( "id" );
+			}
+		});
+	}
+});
+
+// selectors
+function focusable( element, isTabIndexNotNaN ) {
+	var map, mapName, img,
+		nodeName = element.nodeName.toLowerCase();
+	if ( "area" === nodeName ) {
+		map = element.parentNode;
+		mapName = map.name;
+		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
+			return false;
+		}
+		img = $( "img[usemap='#" + mapName + "']" )[ 0 ];
+		return !!img && visible( img );
+	}
+	return ( /^(input|select|textarea|button|object)$/.test( nodeName ) ?
+		!element.disabled :
+		"a" === nodeName ?
+			element.href || isTabIndexNotNaN :
+			isTabIndexNotNaN) &&
+		// the element and all of its ancestors must be visible
+		visible( element );
+}
+
+function visible( element ) {
+	return $.expr.filters.visible( element ) &&
+		!$( element ).parents().addBack().filter(function() {
+			return $.css( this, "visibility" ) === "hidden";
+		}).length;
+}
+
+$.extend( $.expr[ ":" ], {
+	data: $.expr.createPseudo ?
+		$.expr.createPseudo(function( dataName ) {
+			return function( elem ) {
+				return !!$.data( elem, dataName );
+			};
+		}) :
+		// support: jQuery <1.8
+		function( elem, i, match ) {
+			return !!$.data( elem, match[ 3 ] );
+		},
+
+	focusable: function( element ) {
+		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
+	},
+
+	tabbable: function( element ) {
+		var tabIndex = $.attr( element, "tabindex" ),
+			isTabIndexNaN = isNaN( tabIndex );
+		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
+	}
+});
+
+// support: jQuery <1.8
+if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
+	$.each( [ "Width", "Height" ], function( i, name ) {
+		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
+			type = name.toLowerCase(),
+			orig = {
+				innerWidth: $.fn.innerWidth,
+				innerHeight: $.fn.innerHeight,
+				outerWidth: $.fn.outerWidth,
+				outerHeight: $.fn.outerHeight
+			};
+
+		function reduce( elem, size, border, margin ) {
+			$.each( side, function() {
+				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
+				if ( border ) {
+					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
+				}
+				if ( margin ) {
+					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
+				}
+			});
+			return size;
+		}
+
+		$.fn[ "inner" + name ] = function( size ) {
+			if ( size === undefined ) {
+				return orig[ "inner" + name ].call( this );
+			}
+
+			return this.each(function() {
+				$( this ).css( type, reduce( this, size ) + "px" );
+			});
+		};
+
+		$.fn[ "outer" + name] = function( size, margin ) {
+			if ( typeof size !== "number" ) {
+				return orig[ "outer" + name ].call( this, size );
+			}
+
+			return this.each(function() {
+				$( this).css( type, reduce( this, size, true, margin ) + "px" );
+			});
+		};
+	});
+}
+
+// support: jQuery <1.8
+if ( !$.fn.addBack ) {
+	$.fn.addBack = function( selector ) {
+		return this.add( selector == null ?
+			this.prevObject : this.prevObject.filter( selector )
+		);
+	};
+}
+
+// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
+if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
+	$.fn.removeData = (function( removeData ) {
+		return function( key ) {
+			if ( arguments.length ) {
+				return removeData.call( this, $.camelCase( key ) );
+			} else {
+				return removeData.call( this );
+			}
+		};
+	})( $.fn.removeData );
+}
+
+// deprecated
+$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );
+
+$.fn.extend({
+	focus: (function( orig ) {
+		return function( delay, fn ) {
+			return typeof delay === "number" ?
+				this.each(function() {
+					var elem = this;
+					setTimeout(function() {
+						$( elem ).focus();
+						if ( fn ) {
+							fn.call( elem );
+						}
+					}, delay );
+				}) :
+				orig.apply( this, arguments );
+		};
+	})( $.fn.focus ),
+
+	disableSelection: (function() {
+		var eventType = "onselectstart" in document.createElement( "div" ) ?
+			"selectstart" :
+			"mousedown";
+
+		return function() {
+			return this.bind( eventType + ".ui-disableSelection", function( event ) {
+				event.preventDefault();
+			});
+		};
+	})(),
+
+	enableSelection: function() {
+		return this.unbind( ".ui-disableSelection" );
+	},
+
+	zIndex: function( zIndex ) {
+		if ( zIndex !== undefined ) {
+			return this.css( "zIndex", zIndex );
+		}
+
+		if ( this.length ) {
+			var elem = $( this[ 0 ] ), position, value;
+			while ( elem.length && elem[ 0 ] !== document ) {
+				// Ignore z-index if position is set to a value where z-index is ignored by the browser
+				// This makes behavior of this function consistent across browsers
+				// WebKit always returns auto if the element is positioned
+				position = elem.css( "position" );
+				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
+					// IE returns 0 when zIndex is not specified
+					// other browsers return a string
+					// we ignore the case of nested elements with an explicit value of 0
+					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
+					value = parseInt( elem.css( "zIndex" ), 10 );
+					if ( !isNaN( value ) && value !== 0 ) {
+						return value;
+					}
+				}
+				elem = elem.parent();
+			}
+		}
+
+		return 0;
+	}
+});
+
+// $.ui.plugin is deprecated. Use $.widget() extensions instead.
+$.ui.plugin = {
+	add: function( module, option, set ) {
+		var i,
+			proto = $.ui[ module ].prototype;
+		for ( i in set ) {
+			proto.plugins[ i ] = proto.plugins[ i ] || [];
+			proto.plugins[ i ].push( [ option, set[ i ] ] );
+		}
+	},
+	call: function( instance, name, args, allowDisconnected ) {
+		var i,
+			set = instance.plugins[ name ];
+
+		if ( !set ) {
+			return;
+		}
+
+		if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {
+			return;
+		}
+
+		for ( i = 0; i < set.length; i++ ) {
+			if ( instance.options[ set[ i ][ 0 ] ] ) {
+				set[ i ][ 1 ].apply( instance.element, args );
+			}
+		}
+	}
+};
+
+
+/*!
+ * jQuery UI Widget 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/jQuery.widget/
+ */
+
+
+var widget_uuid = 0,
+	widget_slice = Array.prototype.slice;
+
+$.cleanData = (function( orig ) {
+	return function( elems ) {
+		var events, elem, i;
+		for ( i = 0; (elem = elems[i]) != null; i++ ) {
+			try {
+
+				// Only trigger remove when necessary to save time
+				events = $._data( elem, "events" );
+				if ( events && events.remove ) {
+					$( elem ).triggerHandler( "remove" );
+				}
+
+			// http://bugs.jquery.com/ticket/8235
+			} catch ( e ) {}
+		}
+		orig( elems );
+	};
+})( $.cleanData );
+
+$.widget = function( name, base, prototype ) {
+	var fullName, existingConstructor, constructor, basePrototype,
+		// proxiedPrototype allows the provided prototype to remain unmodified
+		// so that it can be used as a mixin for multiple widgets (#8876)
+		proxiedPrototype = {},
+		namespace = name.split( "." )[ 0 ];
+
+	name = name.split( "." )[ 1 ];
+	fullName = namespace + "-" + name;
+
+	if ( !prototype ) {
+		prototype = base;
+		base = $.Widget;
+	}
+
+	// create selector for plugin
+	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
+		return !!$.data( elem, fullName );
+	};
+
+	$[ namespace ] = $[ namespace ] || {};
+	existingConstructor = $[ namespace ][ name ];
+	constructor = $[ namespace ][ name ] = function( options, element ) {
+		// allow instantiation without "new" keyword
+		if ( !this._createWidget ) {
+			return new constructor( options, element );
+		}
+
+		// allow instantiation without initializing for simple inheritance
+		// must use "new" keyword (the code above always passes args)
+		if ( arguments.length ) {
+			this._createWidget( options, element );
+		}
+	};
+	// extend with the existing constructor to carry over any static properties
+	$.extend( constructor, existingConstructor, {
+		version: prototype.version,
+		// copy the object used to create the prototype in case we need to
+		// redefine the widget later
+		_proto: $.extend( {}, prototype ),
+		// track widgets that inherit from this widget in case this widget is
+		// redefined after a widget inherits from it
+		_childConstructors: []
+	});
+
+	basePrototype = new base();
+	// we need to make the options hash a property directly on the new instance
+	// otherwise we'll modify the options hash on the prototype that we're
+	// inheriting from
+	basePrototype.options = $.widget.extend( {}, basePrototype.options );
+	$.each( prototype, function( prop, value ) {
+		if ( !$.isFunction( value ) ) {
+			proxiedPrototype[ prop ] = value;
+			return;
+		}
+		proxiedPrototype[ prop ] = (function() {
+			var _super = function() {
+					return base.prototype[ prop ].apply( this, arguments );
+				},
+				_superApply = function( args ) {
+					return base.prototype[ prop ].apply( this, args );
+				};
+			return function() {
+				var __super = this._super,
+					__superApply = this._superApply,
+					returnValue;
+
+				this._super = _super;
+				this._superApply = _superApply;
+
+				returnValue = value.apply( this, arguments );
+
+				this._super = __super;
+				this._superApply = __superApply;
+
+				return returnValue;
+			};
+		})();
+	});
+	constructor.prototype = $.widget.extend( basePrototype, {
+		// TODO: remove support for widgetEventPrefix
+		// always use the name + a colon as the prefix, e.g., draggable:start
+		// don't prefix for widgets that aren't DOM-based
+		widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
+	}, proxiedPrototype, {
+		constructor: constructor,
+		namespace: namespace,
+		widgetName: name,
+		widgetFullName: fullName
+	});
+
+	// If this widget is being redefined then we need to find all widgets that
+	// are inheriting from it and redefine all of them so that they inherit from
+	// the new version of this widget. We're essentially trying to replace one
+	// level in the prototype chain.
+	if ( existingConstructor ) {
+		$.each( existingConstructor._childConstructors, function( i, child ) {
+			var childPrototype = child.prototype;
+
+			// redefine the child widget using the same prototype that was
+			// originally used, but inherit from the new version of the base
+			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
+		});
+		// remove the list of existing child constructors from the old constructor
+		// so the old child constructors can be garbage collected
+		delete existingConstructor._childConstructors;
+	} else {
+		base._childConstructors.push( constructor );
+	}
+
+	$.widget.bridge( name, constructor );
+
+	return constructor;
+};
+
+$.widget.extend = function( target ) {
+	var input = widget_slice.call( arguments, 1 ),
+		inputIndex = 0,
+		inputLength = input.length,
+		key,
+		value;
+	for ( ; inputIndex < inputLength; inputIndex++ ) {
+		for ( key in input[ inputIndex ] ) {
+			value = input[ inputIndex ][ key ];
+			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
+				// Clone objects
+				if ( $.isPlainObject( value ) ) {
+					target[ key ] = $.isPlainObject( target[ key ] ) ?
+						$.widget.extend( {}, target[ key ], value ) :
+						// Don't extend strings, arrays, etc. with objects
+						$.widget.extend( {}, value );
+				// Copy everything else by reference
+				} else {
+					target[ key ] = value;
+				}
+			}
+		}
+	}
+	return target;
+};
+
+$.widget.bridge = function( name, object ) {
+	var fullName = object.prototype.widgetFullName || name;
+	$.fn[ name ] = function( options ) {
+		var isMethodCall = typeof options === "string",
+			args = widget_slice.call( arguments, 1 ),
+			returnValue = this;
+
+		if ( isMethodCall ) {
+			this.each(function() {
+				var methodValue,
+					instance = $.data( this, fullName );
+				if ( options === "instance" ) {
+					returnValue = instance;
+					return false;
+				}
+				if ( !instance ) {
+					return $.error( "cannot call methods on " + name + " prior to initialization; " +
+						"attempted to call method '" + options + "'" );
+				}
+				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
+					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
+				}
+				methodValue = instance[ options ].apply( instance, args );
+				if ( methodValue !== instance && methodValue !== undefined ) {
+					returnValue = methodValue && methodValue.jquery ?
+						returnValue.pushStack( methodValue.get() ) :
+						methodValue;
+					return false;
+				}
+			});
+		} else {
+
+			// Allow multiple hashes to be passed on init
+			if ( args.length ) {
+				options = $.widget.extend.apply( null, [ options ].concat(args) );
+			}
+
+			this.each(function() {
+				var instance = $.data( this, fullName );
+				if ( instance ) {
+					instance.option( options || {} );
+					if ( instance._init ) {
+						instance._init();
+					}
+				} else {
+					$.data( this, fullName, new object( options, this ) );
+				}
+			});
+		}
+
+		return returnValue;
+	};
+};
+
+$.Widget = function( /* options, element */ ) {};
+$.Widget._childConstructors = [];
+
+$.Widget.prototype = {
+	widgetName: "widget",
+	widgetEventPrefix: "",
+	defaultElement: "<div>",
+	options: {
+		disabled: false,
+
+		// callbacks
+		create: null
+	},
+	_createWidget: function( options, element ) {
+		element = $( element || this.defaultElement || this )[ 0 ];
+		this.element = $( element );
+		this.uuid = widget_uuid++;
+		this.eventNamespace = "." + this.widgetName + this.uuid;
+
+		this.bindings = $();
+		this.hoverable = $();
+		this.focusable = $();
+
+		if ( element !== this ) {
+			$.data( element, this.widgetFullName, this );
+			this._on( true, this.element, {
+				remove: function( event ) {
+					if ( event.target === element ) {
+						this.destroy();
+					}
+				}
+			});
+			this.document = $( element.style ?
+				// element within the document
+				element.ownerDocument :
+				// element is window or document
+				element.document || element );
+			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
+		}
+
+		this.options = $.widget.extend( {},
+			this.options,
+			this._getCreateOptions(),
+			options );
+
+		this._create();
+		this._trigger( "create", null, this._getCreateEventData() );
+		this._init();
+	},
+	_getCreateOptions: $.noop,
+	_getCreateEventData: $.noop,
+	_create: $.noop,
+	_init: $.noop,
+
+	destroy: function() {
+		this._destroy();
+		// we can probably remove the unbind calls in 2.0
+		// all event bindings should go through this._on()
+		this.element
+			.unbind( this.eventNamespace )
+			.removeData( this.widgetFullName )
+			// support: jquery <1.6.3
+			// http://bugs.jquery.com/ticket/9413
+			.removeData( $.camelCase( this.widgetFullName ) );
+		this.widget()
+			.unbind( this.eventNamespace )
+			.removeAttr( "aria-disabled" )
+			.removeClass(
+				this.widgetFullName + "-disabled " +
+				"ui-state-disabled" );
+
+		// clean up events and states
+		this.bindings.unbind( this.eventNamespace );
+		this.hoverable.removeClass( "ui-state-hover" );
+		this.focusable.removeClass( "ui-state-focus" );
+	},
+	_destroy: $.noop,
+
+	widget: function() {
+		return this.element;
+	},
+
+	option: function( key, value ) {
+		var options = key,
+			parts,
+			curOption,
+			i;
+
+		if ( arguments.length === 0 ) {
+			// don't return a reference to the internal hash
+			return $.widget.extend( {}, this.options );
+		}
+
+		if ( typeof key === "string" ) {
+			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
+			options = {};
+			parts = key.split( "." );
+			key = parts.shift();
+			if ( parts.length ) {
+				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
+				for ( i = 0; i < parts.length - 1; i++ ) {
+					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
+					curOption = curOption[ parts[ i ] ];
+				}
+				key = parts.pop();
+				if ( arguments.length === 1 ) {
+					return curOption[ key ] === undefined ? null : curOption[ key ];
+				}
+				curOption[ key ] = value;
+			} else {
+				if ( arguments.length === 1 ) {
+					return this.options[ key ] === undefined ? null : this.options[ key ];
+				}
+				options[ key ] = value;
+			}
+		}
+
+		this._setOptions( options );
+
+		return this;
+	},
+	_setOptions: function( options ) {
+		var key;
+
+		for ( key in options ) {
+			this._setOption( key, options[ key ] );
+		}
+
+		return this;
+	},
+	_setOption: function( key, value ) {
+		this.options[ key ] = value;
+
+		if ( key === "disabled" ) {
+			this.widget()
+				.toggleClass( this.widgetFullName + "-disabled", !!value );
+
+			// If the widget is becoming disabled, then nothing is interactive
+			if ( value ) {
+				this.hoverable.removeClass( "ui-state-hover" );
+				this.focusable.removeClass( "ui-state-focus" );
+			}
+		}
+
+		return this;
+	},
+
+	enable: function() {
+		return this._setOptions({ disabled: false });
+	},
+	disable: function() {
+		return this._setOptions({ disabled: true });
+	},
+
+	_on: function( suppressDisabledCheck, element, handlers ) {
+		var delegateElement,
+			instance = this;
+
+		// no suppressDisabledCheck flag, shuffle arguments
+		if ( typeof suppressDisabledCheck !== "boolean" ) {
+			handlers = element;
+			element = suppressDisabledCheck;
+			suppressDisabledCheck = false;
+		}
+
+		// no element argument, shuffle and use this.element
+		if ( !handlers ) {
+			handlers = element;
+			element = this.element;
+			delegateElement = this.widget();
+		} else {
+			element = delegateElement = $( element );
+			this.bindings = this.bindings.add( element );
+		}
+
+		$.each( handlers, function( event, handler ) {
+			function handlerProxy() {
+				// allow widgets to customize the disabled handling
+				// - disabled as an array instead of boolean
+				// - disabled class as method for disabling individual parts
+				if ( !suppressDisabledCheck &&
+						( instance.options.disabled === true ||
+							$( this ).hasClass( "ui-state-disabled" ) ) ) {
+					return;
+				}
+				return ( typeof handler === "string" ? instance[ handler ] : handler )
+					.apply( instance, arguments );
+			}
+
+			// copy the guid so direct unbinding works
+			if ( typeof handler !== "string" ) {
+				handlerProxy.guid = handler.guid =
+					handler.guid || handlerProxy.guid || $.guid++;
+			}
+
+			var match = event.match( /^([\w:-]*)\s*(.*)$/ ),
+				eventName = match[1] + instance.eventNamespace,
+				selector = match[2];
+			if ( selector ) {
+				delegateElement.delegate( selector, eventName, handlerProxy );
+			} else {
+				element.bind( eventName, handlerProxy );
+			}
+		});
+	},
+
+	_off: function( element, eventName ) {
+		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) +
+			this.eventNamespace;
+		element.unbind( eventName ).undelegate( eventName );
+
+		// Clear the stack to avoid memory leaks (#10056)
+		this.bindings = $( this.bindings.not( element ).get() );
+		this.focusable = $( this.focusable.not( element ).get() );
+		this.hoverable = $( this.hoverable.not( element ).get() );
+	},
+
+	_delay: function( handler, delay ) {
+		function handlerProxy() {
+			return ( typeof handler === "string" ? instance[ handler ] : handler )
+				.apply( instance, arguments );
+		}
+		var instance = this;
+		return setTimeout( handlerProxy, delay || 0 );
+	},
+
+	_hoverable: function( element ) {
+		this.hoverable = this.hoverable.add( element );
+		this._on( element, {
+			mouseenter: function( event ) {
+				$( event.currentTarget ).addClass( "ui-state-hover" );
+			},
+			mouseleave: function( event ) {
+				$( event.currentTarget ).removeClass( "ui-state-hover" );
+			}
+		});
+	},
+
+	_focusable: function( element ) {
+		this.focusable = this.focusable.add( element );
+		this._on( element, {
+			focusin: function( event ) {
+				$( event.currentTarget ).addClass( "ui-state-focus" );
+			},
+			focusout: function( event ) {
+				$( event.currentTarget ).removeClass( "ui-state-focus" );
+			}
+		});
+	},
+
+	_trigger: function( type, event, data ) {
+		var prop, orig,
+			callback = this.options[ type ];
+
+		data = data || {};
+		event = $.Event( event );
+		event.type = ( type === this.widgetEventPrefix ?
+			type :
+			this.widgetEventPrefix + type ).toLowerCase();
+		// the original event may come from any element
+		// so we need to reset the target on the new event
+		event.target = this.element[ 0 ];
+
+		// copy original event properties over to the new event
+		orig = event.originalEvent;
+		if ( orig ) {
+			for ( prop in orig ) {
+				if ( !( prop in event ) ) {
+					event[ prop ] = orig[ prop ];
+				}
+			}
+		}
+
+		this.element.trigger( event, data );
+		return !( $.isFunction( callback ) &&
+			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
+			event.isDefaultPrevented() );
+	}
+};
+
+$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
+	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
+		if ( typeof options === "string" ) {
+			options = { effect: options };
+		}
+		var hasOptions,
+			effectName = !options ?
+				method :
+				options === true || typeof options === "number" ?
+					defaultEffect :
+					options.effect || defaultEffect;
+		options = options || {};
+		if ( typeof options === "number" ) {
+			options = { duration: options };
+		}
+		hasOptions = !$.isEmptyObject( options );
+		options.complete = callback;
+		if ( options.delay ) {
+			element.delay( options.delay );
+		}
+		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
+			element[ method ]( options );
+		} else if ( effectName !== method && element[ effectName ] ) {
+			element[ effectName ]( options.duration, options.easing, callback );
+		} else {
+			element.queue(function( next ) {
+				$( this )[ method ]();
+				if ( callback ) {
+					callback.call( element[ 0 ] );
+				}
+				next();
+			});
+		}
+	};
+});
+
+var widget = $.widget;
+
+
+/*!
+ * jQuery UI Mouse 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/mouse/
+ */
+
+
+var mouseHandled = false;
+$( document ).mouseup( function() {
+	mouseHandled = false;
+});
+
+var mouse = $.widget("ui.mouse", {
+	version: "1.11.4",
+	options: {
+		cancel: "input,textarea,button,select,option",
+		distance: 1,
+		delay: 0
+	},
+	_mouseInit: function() {
+		var that = this;
+
+		this.element
+			.bind("mousedown." + this.widgetName, function(event) {
+				return that._mouseDown(event);
+			})
+			.bind("click." + this.widgetName, function(event) {
+				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
+					$.removeData(event.target, that.widgetName + ".preventClickEvent");
+					event.stopImmediatePropagation();
+					return false;
+				}
+			});
+
+		this.started = false;
+	},
+
+	// TODO: make sure destroying one instance of mouse doesn't mess with
+	// other instances of mouse
+	_mouseDestroy: function() {
+		this.element.unbind("." + this.widgetName);
+		if ( this._mouseMoveDelegate ) {
+			this.document
+				.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
+				.unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
+		}
+	},
+
+	_mouseDown: function(event) {
+		// don't let more than one widget handle mouseStart
+		if ( mouseHandled ) {
+			return;
+		}
+
+		this._mouseMoved = false;
+
+		// we may have missed mouseup (out of window)
+		(this._mouseStarted && this._mouseUp(event));
+
+		this._mouseDownEvent = event;
+
+		var that = this,
+			btnIsLeft = (event.which === 1),
+			// event.target.nodeName works around a bug in IE 8 with
+			// disabled inputs (#7620)
+			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
+		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
+			return true;
+		}
+
+		this.mouseDelayMet = !this.options.delay;
+		if (!this.mouseDelayMet) {
+			this._mouseDelayTimer = setTimeout(function() {
+				that.mouseDelayMet = true;
+			}, this.options.delay);
+		}
+
+		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
+			this._mouseStarted = (this._mouseStart(event) !== false);
+			if (!this._mouseStarted) {
+				event.preventDefault();
+				return true;
+			}
+		}
+
+		// Click event may never have fired (Gecko & Opera)
+		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
+			$.removeData(event.target, this.widgetName + ".preventClickEvent");
+		}
+
+		// these delegates are required to keep context
+		this._mouseMoveDelegate = function(event) {
+			return that._mouseMove(event);
+		};
+		this._mouseUpDelegate = function(event) {
+			return that._mouseUp(event);
+		};
+
+		this.document
+			.bind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
+			.bind( "mouseup." + this.widgetName, this._mouseUpDelegate );
+
+		event.preventDefault();
+
+		mouseHandled = true;
+		return true;
+	},
+
+	_mouseMove: function(event) {
+		// Only check for mouseups outside the document if you've moved inside the document
+		// at least once. This prevents the firing of mouseup in the case of IE<9, which will
+		// fire a mousemove event if content is placed under the cursor. See #7778
+		// Support: IE <9
+		if ( this._mouseMoved ) {
+			// IE mouseup check - mouseup happened when mouse was out of window
+			if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
+				return this._mouseUp(event);
+
+			// Iframe mouseup check - mouseup occurred in another document
+			} else if ( !event.which ) {
+				return this._mouseUp( event );
+			}
+		}
+
+		if ( event.which || event.button ) {
+			this._mouseMoved = true;
+		}
+
+		if (this._mouseStarted) {
+			this._mouseDrag(event);
+			return event.preventDefault();
+		}
+
+		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
+			this._mouseStarted =
+				(this._mouseStart(this._mouseDownEvent, event) !== false);
+			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
+		}
+
+		return !this._mouseStarted;
+	},
+
+	_mouseUp: function(event) {
+		this.document
+			.unbind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
+			.unbind( "mouseup." + this.widgetName, this._mouseUpDelegate );
+
+		if (this._mouseStarted) {
+			this._mouseStarted = false;
+
+			if (event.target === this._mouseDownEvent.target) {
+				$.data(event.target, this.widgetName + ".preventClickEvent", true);
+			}
+
+			this._mouseStop(event);
+		}
+
+		mouseHandled = false;
+		return false;
+	},
+
+	_mouseDistanceMet: function(event) {
+		return (Math.max(
+				Math.abs(this._mouseDownEvent.pageX - event.pageX),
+				Math.abs(this._mouseDownEvent.pageY - event.pageY)
+			) >= this.options.distance
+		);
+	},
+
+	_mouseDelayMet: function(/* event */) {
+		return this.mouseDelayMet;
+	},
+
+	// These are placeholder methods, to be overriden by extending plugin
+	_mouseStart: function(/* event */) {},
+	_mouseDrag: function(/* event */) {},
+	_mouseStop: function(/* event */) {},
+	_mouseCapture: function(/* event */) { return true; }
+});
+
+
+/*!
+ * jQuery UI Position 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/position/
+ */
+
+(function() {
+
+$.ui = $.ui || {};
+
+var cachedScrollbarWidth, supportsOffsetFractions,
+	max = Math.max,
+	abs = Math.abs,
+	round = Math.round,
+	rhorizontal = /left|center|right/,
+	rvertical = /top|center|bottom/,
+	roffset = /[\+\-]\d+(\.[\d]+)?%?/,
+	rposition = /^\w+/,
+	rpercent = /%$/,
+	_position = $.fn.position;
+
+function getOffsets( offsets, width, height ) {
+	return [
+		parseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
+		parseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
+	];
+}
+
+function parseCss( element, property ) {
+	return parseInt( $.css( element, property ), 10 ) || 0;
+}
+
+function getDimensions( elem ) {
+	var raw = elem[0];
+	if ( raw.nodeType === 9 ) {
+		return {
+			width: elem.width(),
+			height: elem.height(),
+			offset: { top: 0, left: 0 }
+		};
+	}
+	if ( $.isWindow( raw ) ) {
+		return {
+			width: elem.width(),
+			height: elem.height(),
+			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
+		};
+	}
+	if ( raw.preventDefault ) {
+		return {
+			width: 0,
+			height: 0,
+			offset: { top: raw.pageY, left: raw.pageX }
+		};
+	}
+	return {
+		width: elem.outerWidth(),
+		height: elem.outerHeight(),
+		offset: elem.offset()
+	};
+}
+
+$.position = {
+	scrollbarWidth: function() {
+		if ( cachedScrollbarWidth !== undefined ) {
+			return cachedScrollbarWidth;
+		}
+		var w1, w2,
+			div = $( "<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>" ),
+			innerDiv = div.children()[0];
+
+		$( "body" ).append( div );
+		w1 = innerDiv.offsetWidth;
+		div.css( "overflow", "scroll" );
+
+		w2 = innerDiv.offsetWidth;
+
+		if ( w1 === w2 ) {
+			w2 = div[0].clientWidth;
+		}
+
+		div.remove();
+
+		return (cachedScrollbarWidth = w1 - w2);
+	},
+	getScrollInfo: function( within ) {
+		var overflowX = within.isWindow || within.isDocument ? "" :
+				within.element.css( "overflow-x" ),
+			overflowY = within.isWindow || within.isDocument ? "" :
+				within.element.css( "overflow-y" ),
+			hasOverflowX = overflowX === "scroll" ||
+				( overflowX === "auto" && within.width < within.element[0].scrollWidth ),
+			hasOverflowY = overflowY === "scroll" ||
+				( overflowY === "auto" && within.height < within.element[0].scrollHeight );
+		return {
+			width: hasOverflowY ? $.position.scrollbarWidth() : 0,
+			height: hasOverflowX ? $.position.scrollbarWidth() : 0
+		};
+	},
+	getWithinInfo: function( element ) {
+		var withinElement = $( element || window ),
+			isWindow = $.isWindow( withinElement[0] ),
+			isDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9;
+		return {
+			element: withinElement,
+			isWindow: isWindow,
+			isDocument: isDocument,
+			offset: withinElement.offset() || { left: 0, top: 0 },
+			scrollLeft: withinElement.scrollLeft(),
+			scrollTop: withinElement.scrollTop(),
+
+			// support: jQuery 1.6.x
+			// jQuery 1.6 doesn't support .outerWidth/Height() on documents or windows
+			width: isWindow || isDocument ? withinElement.width() : withinElement.outerWidth(),
+			height: isWindow || isDocument ? withinElement.height() : withinElement.outerHeight()
+		};
+	}
+};
+
+$.fn.position = function( options ) {
+	if ( !options || !options.of ) {
+		return _position.apply( this, arguments );
+	}
+
+	// make a copy, we don't want to modify arguments
+	options = $.extend( {}, options );
+
+	var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
+		target = $( options.of ),
+		within = $.position.getWithinInfo( options.within ),
+		scrollInfo = $.position.getScrollInfo( within ),
+		collision = ( options.collision || "flip" ).split( " " ),
+		offsets = {};
+
+	dimensions = getDimensions( target );
+	if ( target[0].preventDefault ) {
+		// force left top to allow flipping
+		options.at = "left top";
+	}
+	targetWidth = dimensions.width;
+	targetHeight = dimensions.height;
+	targetOffset = dimensions.offset;
+	// clone to reuse original targetOffset later
+	basePosition = $.extend( {}, targetOffset );
+
+	// force my and at to have valid horizontal and vertical positions
+	// if a value is missing or invalid, it will be converted to center
+	$.each( [ "my", "at" ], function() {
+		var pos = ( options[ this ] || "" ).split( " " ),
+			horizontalOffset,
+			verticalOffset;
+
+		if ( pos.length === 1) {
+			pos = rhorizontal.test( pos[ 0 ] ) ?
+				pos.concat( [ "center" ] ) :
+				rvertical.test( pos[ 0 ] ) ?
+					[ "center" ].concat( pos ) :
+					[ "center", "center" ];
+		}
+		pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : "center";
+		pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : "center";
+
+		// calculate offsets
+		horizontalOffset = roffset.exec( pos[ 0 ] );
+		verticalOffset = roffset.exec( pos[ 1 ] );
+		offsets[ this ] = [
+			horizontalOffset ? horizontalOffset[ 0 ] : 0,
+			verticalOffset ? verticalOffset[ 0 ] : 0
+		];
+
+		// reduce to just the positions without the offsets
+		options[ this ] = [
+			rposition.exec( pos[ 0 ] )[ 0 ],
+			rposition.exec( pos[ 1 ] )[ 0 ]
+		];
+	});
+
+	// normalize collision option
+	if ( collision.length === 1 ) {
+		collision[ 1 ] = collision[ 0 ];
+	}
+
+	if ( options.at[ 0 ] === "right" ) {
+		basePosition.left += targetWidth;
+	} else if ( options.at[ 0 ] === "center" ) {
+		basePosition.left += targetWidth / 2;
+	}
+
+	if ( options.at[ 1 ] === "bottom" ) {
+		basePosition.top += targetHeight;
+	} else if ( options.at[ 1 ] === "center" ) {
+		basePosition.top += targetHeight / 2;
+	}
+
+	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
+	basePosition.left += atOffset[ 0 ];
+	basePosition.top += atOffset[ 1 ];
+
+	return this.each(function() {
+		var collisionPosition, using,
+			elem = $( this ),
+			elemWidth = elem.outerWidth(),
+			elemHeight = elem.outerHeight(),
+			marginLeft = parseCss( this, "marginLeft" ),
+			marginTop = parseCss( this, "marginTop" ),
+			collisionWidth = elemWidth + marginLeft + parseCss( this, "marginRight" ) + scrollInfo.width,
+			collisionHeight = elemHeight + marginTop + parseCss( this, "marginBottom" ) + scrollInfo.height,
+			position = $.extend( {}, basePosition ),
+			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );
+
+		if ( options.my[ 0 ] === "right" ) {
+			position.left -= elemWidth;
+		} else if ( options.my[ 0 ] === "center" ) {
+			position.left -= elemWidth / 2;
+		}
+
+		if ( options.my[ 1 ] === "bottom" ) {
+			position.top -= elemHeight;
+		} else if ( options.my[ 1 ] === "center" ) {
+			position.top -= elemHeight / 2;
+		}
+
+		position.left += myOffset[ 0 ];
+		position.top += myOffset[ 1 ];
+
+		// if the browser doesn't support fractions, then round for consistent results
+		if ( !supportsOffsetFractions ) {
+			position.left = round( position.left );
+			position.top = round( position.top );
+		}
+
+		collisionPosition = {
+			marginLeft: marginLeft,
+			marginTop: marginTop
+		};
+
+		$.each( [ "left", "top" ], function( i, dir ) {
+			if ( $.ui.position[ collision[ i ] ] ) {
+				$.ui.position[ collision[ i ] ][ dir ]( position, {
+					targetWidth: targetWidth,
+					targetHeight: targetHeight,
+					elemWidth: elemWidth,
+					elemHeight: elemHeight,
+					collisionPosition: collisionPosition,
+					collisionWidth: collisionWidth,
+					collisionHeight: collisionHeight,
+					offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
+					my: options.my,
+					at: options.at,
+					within: within,
+					elem: elem
+				});
+			}
+		});
+
+		if ( options.using ) {
+			// adds feedback as second argument to using callback, if present
+			using = function( props ) {
+				var left = targetOffset.left - position.left,
+					right = left + targetWidth - elemWidth,
+					top = targetOffset.top - position.top,
+					bottom = top + targetHeight - elemHeight,
+					feedback = {
+						target: {
+							element: target,
+							left: targetOffset.left,
+							top: targetOffset.top,
+							width: targetWidth,
+							height: targetHeight
+						},
+						element: {
+							element: elem,
+							left: position.left,
+							top: position.top,
+							width: elemWidth,
+							height: elemHeight
+						},
+						horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",
+						vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"
+					};
+				if ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {
+					feedback.horizontal = "center";
+				}
+				if ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {
+					feedback.vertical = "middle";
+				}
+				if ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {
+					feedback.important = "horizontal";
+				} else {
+					feedback.important = "vertical";
+				}
+				options.using.call( this, props, feedback );
+			};
+		}
+
+		elem.offset( $.extend( position, { using: using } ) );
+	});
+};
+
+$.ui.position = {
+	fit: {
+		left: function( position, data ) {
+			var within = data.within,
+				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
+				outerWidth = within.width,
+				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
+				overLeft = withinOffset - collisionPosLeft,
+				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
+				newOverRight;
+
+			// element is wider than within
+			if ( data.collisionWidth > outerWidth ) {
+				// element is initially over the left side of within
+				if ( overLeft > 0 && overRight <= 0 ) {
+					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
+					position.left += overLeft - newOverRight;
+				// element is initially over right side of within
+				} else if ( overRight > 0 && overLeft <= 0 ) {
+					position.left = withinOffset;
+				// element is initially over both left and right sides of within
+				} else {
+					if ( overLeft > overRight ) {
+						position.left = withinOffset + outerWidth - data.collisionWidth;
+					} else {
+						position.left = withinOffset;
+					}
+				}
+			// too far left -> align with left edge
+			} else if ( overLeft > 0 ) {
+				position.left += overLeft;
+			// too far right -> align with right edge
+			} else if ( overRight > 0 ) {
+				position.left -= overRight;
+			// adjust based on position and margin
+			} else {
+				position.left = max( position.left - collisionPosLeft, position.left );
+			}
+		},
+		top: function( position, data ) {
+			var within = data.within,
+				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
+				outerHeight = data.within.height,
+				collisionPosTop = position.top - data.collisionPosition.marginTop,
+				overTop = withinOffset - collisionPosTop,
+				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
+				newOverBottom;
+
+			// element is taller than within
+			if ( data.collisionHeight > outerHeight ) {
+				// element is initially over the top of within
+				if ( overTop > 0 && overBottom <= 0 ) {
+					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
+					position.top += overTop - newOverBottom;
+				// element is initially over bottom of within
+				} else if ( overBottom > 0 && overTop <= 0 ) {
+					position.top = withinOffset;
+				// element is initially over both top and bottom of within
+				} else {
+					if ( overTop > overBottom ) {
+						position.top = withinOffset + outerHeight - data.collisionHeight;
+					} else {
+						position.top = withinOffset;
+					}
+				}
+			// too far up -> align with top
+			} else if ( overTop > 0 ) {
+				position.top += overTop;
+			// too far down -> align with bottom edge
+			} else if ( overBottom > 0 ) {
+				position.top -= overBottom;
+			// adjust based on position and margin
+			} else {
+				position.top = max( position.top - collisionPosTop, position.top );
+			}
+		}
+	},
+	flip: {
+		left: function( position, data ) {
+			var within = data.within,
+				withinOffset = within.offset.left + within.scrollLeft,
+				outerWidth = within.width,
+				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
+				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
+				overLeft = collisionPosLeft - offsetLeft,
+				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
+				myOffset = data.my[ 0 ] === "left" ?
+					-data.elemWidth :
+					data.my[ 0 ] === "right" ?
+						data.elemWidth :
+						0,
+				atOffset = data.at[ 0 ] === "left" ?
+					data.targetWidth :
+					data.at[ 0 ] === "right" ?
+						-data.targetWidth :
+						0,
+				offset = -2 * data.offset[ 0 ],
+				newOverRight,
+				newOverLeft;
+
+			if ( overLeft < 0 ) {
+				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
+				if ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {
+					position.left += myOffset + atOffset + offset;
+				}
+			} else if ( overRight > 0 ) {
+				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
+				if ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {
+					position.left += myOffset + atOffset + offset;
+				}
+			}
+		},
+		top: function( position, data ) {
+			var within = data.within,
+				withinOffset = within.offset.top + within.scrollTop,
+				outerHeight = within.height,
+				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
+				collisionPosTop = position.top - data.collisionPosition.marginTop,
+				overTop = collisionPosTop - offsetTop,
+				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
+				top = data.my[ 1 ] === "top",
+				myOffset = top ?
+					-data.elemHeight :
+					data.my[ 1 ] === "bottom" ?
+						data.elemHeight :
+						0,
+				atOffset = data.at[ 1 ] === "top" ?
+					data.targetHeight :
+					data.at[ 1 ] === "bottom" ?
+						-data.targetHeight :
+						0,
+				offset = -2 * data.offset[ 1 ],
+				newOverTop,
+				newOverBottom;
+			if ( overTop < 0 ) {
+				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
+				if ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {
+					position.top += myOffset + atOffset + offset;
+				}
+			} else if ( overBottom > 0 ) {
+				newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
+				if ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {
+					position.top += myOffset + atOffset + offset;
+				}
+			}
+		}
+	},
+	flipfit: {
+		left: function() {
+			$.ui.position.flip.left.apply( this, arguments );
+			$.ui.position.fit.left.apply( this, arguments );
+		},
+		top: function() {
+			$.ui.position.flip.top.apply( this, arguments );
+			$.ui.position.fit.top.apply( this, arguments );
+		}
+	}
+};
+
+// fraction support test
+(function() {
+	var testElement, testElementParent, testElementStyle, offsetLeft, i,
+		body = document.getElementsByTagName( "body" )[ 0 ],
+		div = document.createElement( "div" );
+
+	//Create a "fake body" for testing based on method used in jQuery.support
+	testElement = document.createElement( body ? "div" : "body" );
+	testElementStyle = {
+		visibility: "hidden",
+		width: 0,
+		height: 0,
+		border: 0,
+		margin: 0,
+		background: "none"
+	};
+	if ( body ) {
+		$.extend( testElementStyle, {
+			position: "absolute",
+			left: "-1000px",
+			top: "-1000px"
+		});
+	}
+	for ( i in testElementStyle ) {
+		testElement.style[ i ] = testElementStyle[ i ];
+	}
+	testElement.appendChild( div );
+	testElementParent = body || document.documentElement;
+	testElementParent.insertBefore( testElement, testElementParent.firstChild );
+
+	div.style.cssText = "position: absolute; left: 10.7432222px;";
+
+	offsetLeft = $( div ).offset().left;
+	supportsOffsetFractions = offsetLeft > 10 && offsetLeft < 11;
+
+	testElement.innerHTML = "";
+	testElementParent.removeChild( testElement );
+})();
+
+})();
+
+var position = $.ui.position;
+
+
+/*!
+ * jQuery UI Accordion 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/accordion/
+ */
+
+
+var accordion = $.widget( "ui.accordion", {
+	version: "1.11.4",
+	options: {
+		active: 0,
+		animate: {},
+		collapsible: false,
+		event: "click",
+		header: "> li > :first-child,> :not(li):even",
+		heightStyle: "auto",
+		icons: {
+			activeHeader: "ui-icon-triangle-1-s",
+			header: "ui-icon-triangle-1-e"
+		},
+
+		// callbacks
+		activate: null,
+		beforeActivate: null
+	},
+
+	hideProps: {
+		borderTopWidth: "hide",
+		borderBottomWidth: "hide",
+		paddingTop: "hide",
+		paddingBottom: "hide",
+		height: "hide"
+	},
+
+	showProps: {
+		borderTopWidth: "show",
+		borderBottomWidth: "show",
+		paddingTop: "show",
+		paddingBottom: "show",
+		height: "show"
+	},
+
+	_create: function() {
+		var options = this.options;
+		this.prevShow = this.prevHide = $();
+		this.element.addClass( "ui-accordion ui-widget ui-helper-reset" )
+			// ARIA
+			.attr( "role", "tablist" );
+
+		// don't allow collapsible: false and active: false / null
+		if ( !options.collapsible && (options.active === false || options.active == null) ) {
+			options.active = 0;
+		}
+
+		this._processPanels();
+		// handle negative values
+		if ( options.active < 0 ) {
+			options.active += this.headers.length;
+		}
+		this._refresh();
+	},
+
+	_getCreateEventData: function() {
+		return {
+			header: this.active,
+			panel: !this.active.length ? $() : this.active.next()
+		};
+	},
+
+	_createIcons: function() {
+		var icons = this.options.icons;
+		if ( icons ) {
+			$( "<span>" )
+				.addClass( "ui-accordion-header-icon ui-icon " + icons.header )
+				.prependTo( this.headers );
+			this.active.children( ".ui-accordion-header-icon" )
+				.removeClass( icons.header )
+				.addClass( icons.activeHeader );
+			this.headers.addClass( "ui-accordion-icons" );
+		}
+	},
+
+	_destroyIcons: function() {
+		this.headers
+			.removeClass( "ui-accordion-icons" )
+			.children( ".ui-accordion-header-icon" )
+				.remove();
+	},
+
+	_destroy: function() {
+		var contents;
+
+		// clean up main element
+		this.element
+			.removeClass( "ui-accordion ui-widget ui-helper-reset" )
+			.removeAttr( "role" );
+
+		// clean up headers
+		this.headers
+			.removeClass( "ui-accordion-header ui-accordion-header-active ui-state-default " +
+				"ui-corner-all ui-state-active ui-state-disabled ui-corner-top" )
+			.removeAttr( "role" )
+			.removeAttr( "aria-expanded" )
+			.removeAttr( "aria-selected" )
+			.removeAttr( "aria-controls" )
+			.removeAttr( "tabIndex" )
+			.removeUniqueId();
+
+		this._destroyIcons();
+
+		// clean up content panels
+		contents = this.headers.next()
+			.removeClass( "ui-helper-reset ui-widget-content ui-corner-bottom " +
+				"ui-accordion-content ui-accordion-content-active ui-state-disabled" )
+			.css( "display", "" )
+			.removeAttr( "role" )
+			.removeAttr( "aria-hidden" )
+			.removeAttr( "aria-labelledby" )
+			.removeUniqueId();
+
+		if ( this.options.heightStyle !== "content" ) {
+			contents.css( "height", "" );
+		}
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "active" ) {
+			// _activate() will handle invalid values and update this.options
+			this._activate( value );
+			return;
+		}
+
+		if ( key === "event" ) {
+			if ( this.options.event ) {
+				this._off( this.headers, this.options.event );
+			}
+			this._setupEvents( value );
+		}
+
+		this._super( key, value );
+
+		// setting collapsible: false while collapsed; open first panel
+		if ( key === "collapsible" && !value && this.options.active === false ) {
+			this._activate( 0 );
+		}
+
+		if ( key === "icons" ) {
+			this._destroyIcons();
+			if ( value ) {
+				this._createIcons();
+			}
+		}
+
+		// #5332 - opacity doesn't cascade to positioned elements in IE
+		// so we need to add the disabled class to the headers and panels
+		if ( key === "disabled" ) {
+			this.element
+				.toggleClass( "ui-state-disabled", !!value )
+				.attr( "aria-disabled", value );
+			this.headers.add( this.headers.next() )
+				.toggleClass( "ui-state-disabled", !!value );
+		}
+	},
+
+	_keydown: function( event ) {
+		if ( event.altKey || event.ctrlKey ) {
+			return;
+		}
+
+		var keyCode = $.ui.keyCode,
+			length = this.headers.length,
+			currentIndex = this.headers.index( event.target ),
+			toFocus = false;
+
+		switch ( event.keyCode ) {
+			case keyCode.RIGHT:
+			case keyCode.DOWN:
+				toFocus = this.headers[ ( currentIndex + 1 ) % length ];
+				break;
+			case keyCode.LEFT:
+			case keyCode.UP:
+				toFocus = this.headers[ ( currentIndex - 1 + length ) % length ];
+				break;
+			case keyCode.SPACE:
+			case keyCode.ENTER:
+				this._eventHandler( event );
+				break;
+			case keyCode.HOME:
+				toFocus = this.headers[ 0 ];
+				break;
+			case keyCode.END:
+				toFocus = this.headers[ length - 1 ];
+				break;
+		}
+
+		if ( toFocus ) {
+			$( event.target ).attr( "tabIndex", -1 );
+			$( toFocus ).attr( "tabIndex", 0 );
+			toFocus.focus();
+			event.preventDefault();
+		}
+	},
+
+	_panelKeyDown: function( event ) {
+		if ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {
+			$( event.currentTarget ).prev().focus();
+		}
+	},
+
+	refresh: function() {
+		var options = this.options;
+		this._processPanels();
+
+		// was collapsed or no panel
+		if ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {
+			options.active = false;
+			this.active = $();
+		// active false only when collapsible is true
+		} else if ( options.active === false ) {
+			this._activate( 0 );
+		// was active, but active panel is gone
+		} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
+			// all remaining panel are disabled
+			if ( this.headers.length === this.headers.find(".ui-state-disabled").length ) {
+				options.active = false;
+				this.active = $();
+			// activate previous panel
+			} else {
+				this._activate( Math.max( 0, options.active - 1 ) );
+			}
+		// was active, active panel still exists
+		} else {
+			// make sure active index is correct
+			options.active = this.headers.index( this.active );
+		}
+
+		this._destroyIcons();
+
+		this._refresh();
+	},
+
+	_processPanels: function() {
+		var prevHeaders = this.headers,
+			prevPanels = this.panels;
+
+		this.headers = this.element.find( this.options.header )
+			.addClass( "ui-accordion-header ui-state-default ui-corner-all" );
+
+		this.panels = this.headers.next()
+			.addClass( "ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" )
+			.filter( ":not(.ui-accordion-content-active)" )
+			.hide();
+
+		// Avoid memory leaks (#10056)
+		if ( prevPanels ) {
+			this._off( prevHeaders.not( this.headers ) );
+			this._off( prevPanels.not( this.panels ) );
+		}
+	},
+
+	_refresh: function() {
+		var maxHeight,
+			options = this.options,
+			heightStyle = options.heightStyle,
+			parent = this.element.parent();
+
+		this.active = this._findActive( options.active )
+			.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" )
+			.removeClass( "ui-corner-all" );
+		this.active.next()
+			.addClass( "ui-accordion-content-active" )
+			.show();
+
+		this.headers
+			.attr( "role", "tab" )
+			.each(function() {
+				var header = $( this ),
+					headerId = header.uniqueId().attr( "id" ),
+					panel = header.next(),
+					panelId = panel.uniqueId().attr( "id" );
+				header.attr( "aria-controls", panelId );
+				panel.attr( "aria-labelledby", headerId );
+			})
+			.next()
+				.attr( "role", "tabpanel" );
+
+		this.headers
+			.not( this.active )
+			.attr({
+				"aria-selected": "false",
+				"aria-expanded": "false",
+				tabIndex: -1
+			})
+			.next()
+				.attr({
+					"aria-hidden": "true"
+				})
+				.hide();
+
+		// make sure at least one header is in the tab order
+		if ( !this.active.length ) {
+			this.headers.eq( 0 ).attr( "tabIndex", 0 );
+		} else {
+			this.active.attr({
+				"aria-selected": "true",
+				"aria-expanded": "true",
+				tabIndex: 0
+			})
+			.next()
+				.attr({
+					"aria-hidden": "false"
+				});
+		}
+
+		this._createIcons();
+
+		this._setupEvents( options.event );
+
+		if ( heightStyle === "fill" ) {
+			maxHeight = parent.height();
+			this.element.siblings( ":visible" ).each(function() {
+				var elem = $( this ),
+					position = elem.css( "position" );
+
+				if ( position === "absolute" || position === "fixed" ) {
+					return;
+				}
+				maxHeight -= elem.outerHeight( true );
+			});
+
+			this.headers.each(function() {
+				maxHeight -= $( this ).outerHeight( true );
+			});
+
+			this.headers.next()
+				.each(function() {
+					$( this ).height( Math.max( 0, maxHeight -
+						$( this ).innerHeight() + $( this ).height() ) );
+				})
+				.css( "overflow", "auto" );
+		} else if ( heightStyle === "auto" ) {
+			maxHeight = 0;
+			this.headers.next()
+				.each(function() {
+					maxHeight = Math.max( maxHeight, $( this ).css( "height", "" ).height() );
+				})
+				.height( maxHeight );
+		}
+	},
+
+	_activate: function( index ) {
+		var active = this._findActive( index )[ 0 ];
+
+		// trying to activate the already active panel
+		if ( active === this.active[ 0 ] ) {
+			return;
+		}
+
+		// trying to collapse, simulate a click on the currently active header
+		active = active || this.active[ 0 ];
+
+		this._eventHandler({
+			target: active,
+			currentTarget: active,
+			preventDefault: $.noop
+		});
+	},
+
+	_findActive: function( selector ) {
+		return typeof selector === "number" ? this.headers.eq( selector ) : $();
+	},
+
+	_setupEvents: function( event ) {
+		var events = {
+			keydown: "_keydown"
+		};
+		if ( event ) {
+			$.each( event.split( " " ), function( index, eventName ) {
+				events[ eventName ] = "_eventHandler";
+			});
+		}
+
+		this._off( this.headers.add( this.headers.next() ) );
+		this._on( this.headers, events );
+		this._on( this.headers.next(), { keydown: "_panelKeyDown" });
+		this._hoverable( this.headers );
+		this._focusable( this.headers );
+	},
+
+	_eventHandler: function( event ) {
+		var options = this.options,
+			active = this.active,
+			clicked = $( event.currentTarget ),
+			clickedIsActive = clicked[ 0 ] === active[ 0 ],
+			collapsing = clickedIsActive && options.collapsible,
+			toShow = collapsing ? $() : clicked.next(),
+			toHide = active.next(),
+			eventData = {
+				oldHeader: active,
+				oldPanel: toHide,
+				newHeader: collapsing ? $() : clicked,
+				newPanel: toShow
+			};
+
+		event.preventDefault();
+
+		if (
+				// click on active header, but not collapsible
+				( clickedIsActive && !options.collapsible ) ||
+				// allow canceling activation
+				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
+			return;
+		}
+
+		options.active = collapsing ? false : this.headers.index( clicked );
+
+		// when the call to ._toggle() comes after the class changes
+		// it causes a very odd bug in IE 8 (see #6720)
+		this.active = clickedIsActive ? $() : clicked;
+		this._toggle( eventData );
+
+		// switch classes
+		// corner classes on the previously active header stay after the animation
+		active.removeClass( "ui-accordion-header-active ui-state-active" );
+		if ( options.icons ) {
+			active.children( ".ui-accordion-header-icon" )
+				.removeClass( options.icons.activeHeader )
+				.addClass( options.icons.header );
+		}
+
+		if ( !clickedIsActive ) {
+			clicked
+				.removeClass( "ui-corner-all" )
+				.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" );
+			if ( options.icons ) {
+				clicked.children( ".ui-accordion-header-icon" )
+					.removeClass( options.icons.header )
+					.addClass( options.icons.activeHeader );
+			}
+
+			clicked
+				.next()
+				.addClass( "ui-accordion-content-active" );
+		}
+	},
+
+	_toggle: function( data ) {
+		var toShow = data.newPanel,
+			toHide = this.prevShow.length ? this.prevShow : data.oldPanel;
+
+		// handle activating a panel during the animation for another activation
+		this.prevShow.add( this.prevHide ).stop( true, true );
+		this.prevShow = toShow;
+		this.prevHide = toHide;
+
+		if ( this.options.animate ) {
+			this._animate( toShow, toHide, data );
+		} else {
+			toHide.hide();
+			toShow.show();
+			this._toggleComplete( data );
+		}
+
+		toHide.attr({
+			"aria-hidden": "true"
+		});
+		toHide.prev().attr({
+			"aria-selected": "false",
+			"aria-expanded": "false"
+		});
+		// if we're switching panels, remove the old header from the tab order
+		// if we're opening from collapsed state, remove the previous header from the tab order
+		// if we're collapsing, then keep the collapsing header in the tab order
+		if ( toShow.length && toHide.length ) {
+			toHide.prev().attr({
+				"tabIndex": -1,
+				"aria-expanded": "false"
+			});
+		} else if ( toShow.length ) {
+			this.headers.filter(function() {
+				return parseInt( $( this ).attr( "tabIndex" ), 10 ) === 0;
+			})
+			.attr( "tabIndex", -1 );
+		}
+
+		toShow
+			.attr( "aria-hidden", "false" )
+			.prev()
+				.attr({
+					"aria-selected": "true",
+					"aria-expanded": "true",
+					tabIndex: 0
+				});
+	},
+
+	_animate: function( toShow, toHide, data ) {
+		var total, easing, duration,
+			that = this,
+			adjust = 0,
+			boxSizing = toShow.css( "box-sizing" ),
+			down = toShow.length &&
+				( !toHide.length || ( toShow.index() < toHide.index() ) ),
+			animate = this.options.animate || {},
+			options = down && animate.down || animate,
+			complete = function() {
+				that._toggleComplete( data );
+			};
+
+		if ( typeof options === "number" ) {
+			duration = options;
+		}
+		if ( typeof options === "string" ) {
+			easing = options;
+		}
+		// fall back from options to animation in case of partial down settings
+		easing = easing || options.easing || animate.easing;
+		duration = duration || options.duration || animate.duration;
+
+		if ( !toHide.length ) {
+			return toShow.animate( this.showProps, duration, easing, complete );
+		}
+		if ( !toShow.length ) {
+			return toHide.animate( this.hideProps, duration, easing, complete );
+		}
+
+		total = toShow.show().outerHeight();
+		toHide.animate( this.hideProps, {
+			duration: duration,
+			easing: easing,
+			step: function( now, fx ) {
+				fx.now = Math.round( now );
+			}
+		});
+		toShow
+			.hide()
+			.animate( this.showProps, {
+				duration: duration,
+				easing: easing,
+				complete: complete,
+				step: function( now, fx ) {
+					fx.now = Math.round( now );
+					if ( fx.prop !== "height" ) {
+						if ( boxSizing === "content-box" ) {
+							adjust += fx.now;
+						}
+					} else if ( that.options.heightStyle !== "content" ) {
+						fx.now = Math.round( total - toHide.outerHeight() - adjust );
+						adjust = 0;
+					}
+				}
+			});
+	},
+
+	_toggleComplete: function( data ) {
+		var toHide = data.oldPanel;
+
+		toHide
+			.removeClass( "ui-accordion-content-active" )
+			.prev()
+				.removeClass( "ui-corner-top" )
+				.addClass( "ui-corner-all" );
+
+		// Work around for rendering bug in IE (#5421)
+		if ( toHide.length ) {
+			toHide.parent()[ 0 ].className = toHide.parent()[ 0 ].className;
+		}
+		this._trigger( "activate", null, data );
+	}
+});
+
+
+/*!
+ * jQuery UI Menu 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/menu/
+ */
+
+
+var menu = $.widget( "ui.menu", {
+	version: "1.11.4",
+	defaultElement: "<ul>",
+	delay: 300,
+	options: {
+		icons: {
+			submenu: "ui-icon-carat-1-e"
+		},
+		items: "> *",
+		menus: "ul",
+		position: {
+			my: "left-1 top",
+			at: "right top"
+		},
+		role: "menu",
+
+		// callbacks
+		blur: null,
+		focus: null,
+		select: null
+	},
+
+	_create: function() {
+		this.activeMenu = this.element;
+
+		// Flag used to prevent firing of the click handler
+		// as the event bubbles up through nested menus
+		this.mouseHandled = false;
+		this.element
+			.uniqueId()
+			.addClass( "ui-menu ui-widget ui-widget-content" )
+			.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length )
+			.attr({
+				role: this.options.role,
+				tabIndex: 0
+			});
+
+		if ( this.options.disabled ) {
+			this.element
+				.addClass( "ui-state-disabled" )
+				.attr( "aria-disabled", "true" );
+		}
+
+		this._on({
+			// Prevent focus from sticking to links inside menu after clicking
+			// them (focus should always stay on UL during navigation).
+			"mousedown .ui-menu-item": function( event ) {
+				event.preventDefault();
+			},
+			"click .ui-menu-item": function( event ) {
+				var target = $( event.target );
+				if ( !this.mouseHandled && target.not( ".ui-state-disabled" ).length ) {
+					this.select( event );
+
+					// Only set the mouseHandled flag if the event will bubble, see #9469.
+					if ( !event.isPropagationStopped() ) {
+						this.mouseHandled = true;
+					}
+
+					// Open submenu on click
+					if ( target.has( ".ui-menu" ).length ) {
+						this.expand( event );
+					} else if ( !this.element.is( ":focus" ) && $( this.document[ 0 ].activeElement ).closest( ".ui-menu" ).length ) {
+
+						// Redirect focus to the menu
+						this.element.trigger( "focus", [ true ] );
+
+						// If the active item is on the top level, let it stay active.
+						// Otherwise, blur the active item since it is no longer visible.
+						if ( this.active && this.active.parents( ".ui-menu" ).length === 1 ) {
+							clearTimeout( this.timer );
+						}
+					}
+				}
+			},
+			"mouseenter .ui-menu-item": function( event ) {
+				// Ignore mouse events while typeahead is active, see #10458.
+				// Prevents focusing the wrong item when typeahead causes a scroll while the mouse
+				// is over an item in the menu
+				if ( this.previousFilter ) {
+					return;
+				}
+				var target = $( event.currentTarget );
+				// Remove ui-state-active class from siblings of the newly focused menu item
+				// to avoid a jump caused by adjacent elements both having a class with a border
+				target.siblings( ".ui-state-active" ).removeClass( "ui-state-active" );
+				this.focus( event, target );
+			},
+			mouseleave: "collapseAll",
+			"mouseleave .ui-menu": "collapseAll",
+			focus: function( event, keepActiveItem ) {
+				// If there's already an active item, keep it active
+				// If not, activate the first item
+				var item = this.active || this.element.find( this.options.items ).eq( 0 );
+
+				if ( !keepActiveItem ) {
+					this.focus( event, item );
+				}
+			},
+			blur: function( event ) {
+				this._delay(function() {
+					if ( !$.contains( this.element[0], this.document[0].activeElement ) ) {
+						this.collapseAll( event );
+					}
+				});
+			},
+			keydown: "_keydown"
+		});
+
+		this.refresh();
+
+		// Clicks outside of a menu collapse any open menus
+		this._on( this.document, {
+			click: function( event ) {
+				if ( this._closeOnDocumentClick( event ) ) {
+					this.collapseAll( event );
+				}
+
+				// Reset the mouseHandled flag
+				this.mouseHandled = false;
+			}
+		});
+	},
+
+	_destroy: function() {
+		// Destroy (sub)menus
+		this.element
+			.removeAttr( "aria-activedescendant" )
+			.find( ".ui-menu" ).addBack()
+				.removeClass( "ui-menu ui-widget ui-widget-content ui-menu-icons ui-front" )
+				.removeAttr( "role" )
+				.removeAttr( "tabIndex" )
+				.removeAttr( "aria-labelledby" )
+				.removeAttr( "aria-expanded" )
+				.removeAttr( "aria-hidden" )
+				.removeAttr( "aria-disabled" )
+				.removeUniqueId()
+				.show();
+
+		// Destroy menu items
+		this.element.find( ".ui-menu-item" )
+			.removeClass( "ui-menu-item" )
+			.removeAttr( "role" )
+			.removeAttr( "aria-disabled" )
+			.removeUniqueId()
+			.removeClass( "ui-state-hover" )
+			.removeAttr( "tabIndex" )
+			.removeAttr( "role" )
+			.removeAttr( "aria-haspopup" )
+			.children().each( function() {
+				var elem = $( this );
+				if ( elem.data( "ui-menu-submenu-carat" ) ) {
+					elem.remove();
+				}
+			});
+
+		// Destroy menu dividers
+		this.element.find( ".ui-menu-divider" ).removeClass( "ui-menu-divider ui-widget-content" );
+	},
+
+	_keydown: function( event ) {
+		var match, prev, character, skip,
+			preventDefault = true;
+
+		switch ( event.keyCode ) {
+		case $.ui.keyCode.PAGE_UP:
+			this.previousPage( event );
+			break;
+		case $.ui.keyCode.PAGE_DOWN:
+			this.nextPage( event );
+			break;
+		case $.ui.keyCode.HOME:
+			this._move( "first", "first", event );
+			break;
+		case $.ui.keyCode.END:
+			this._move( "last", "last", event );
+			break;
+		case $.ui.keyCode.UP:
+			this.previous( event );
+			break;
+		case $.ui.keyCode.DOWN:
+			this.next( event );
+			break;
+		case $.ui.keyCode.LEFT:
+			this.collapse( event );
+			break;
+		case $.ui.keyCode.RIGHT:
+			if ( this.active && !this.active.is( ".ui-state-disabled" ) ) {
+				this.expand( event );
+			}
+			break;
+		case $.ui.keyCode.ENTER:
+		case $.ui.keyCode.SPACE:
+			this._activate( event );
+			break;
+		case $.ui.keyCode.ESCAPE:
+			this.collapse( event );
+			break;
+		default:
+			preventDefault = false;
+			prev = this.previousFilter || "";
+			character = String.fromCharCode( event.keyCode );
+			skip = false;
+
+			clearTimeout( this.filterTimer );
+
+			if ( character === prev ) {
+				skip = true;
+			} else {
+				character = prev + character;
+			}
+
+			match = this._filterMenuItems( character );
+			match = skip && match.index( this.active.next() ) !== -1 ?
+				this.active.nextAll( ".ui-menu-item" ) :
+				match;
+
+			// If no matches on the current filter, reset to the last character pressed
+			// to move down the menu to the first item that starts with that character
+			if ( !match.length ) {
+				character = String.fromCharCode( event.keyCode );
+				match = this._filterMenuItems( character );
+			}
+
+			if ( match.length ) {
+				this.focus( event, match );
+				this.previousFilter = character;
+				this.filterTimer = this._delay(function() {
+					delete this.previousFilter;
+				}, 1000 );
+			} else {
+				delete this.previousFilter;
+			}
+		}
+
+		if ( preventDefault ) {
+			event.preventDefault();
+		}
+	},
+
+	_activate: function( event ) {
+		if ( !this.active.is( ".ui-state-disabled" ) ) {
+			if ( this.active.is( "[aria-haspopup='true']" ) ) {
+				this.expand( event );
+			} else {
+				this.select( event );
+			}
+		}
+	},
+
+	refresh: function() {
+		var menus, items,
+			that = this,
+			icon = this.options.icons.submenu,
+			submenus = this.element.find( this.options.menus );
+
+		this.element.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length );
+
+		// Initialize nested menus
+		submenus.filter( ":not(.ui-menu)" )
+			.addClass( "ui-menu ui-widget ui-widget-content ui-front" )
+			.hide()
+			.attr({
+				role: this.options.role,
+				"aria-hidden": "true",
+				"aria-expanded": "false"
+			})
+			.each(function() {
+				var menu = $( this ),
+					item = menu.parent(),
+					submenuCarat = $( "<span>" )
+						.addClass( "ui-menu-icon ui-icon " + icon )
+						.data( "ui-menu-submenu-carat", true );
+
+				item
+					.attr( "aria-haspopup", "true" )
+					.prepend( submenuCarat );
+				menu.attr( "aria-labelledby", item.attr( "id" ) );
+			});
+
+		menus = submenus.add( this.element );
+		items = menus.find( this.options.items );
+
+		// Initialize menu-items containing spaces and/or dashes only as dividers
+		items.not( ".ui-menu-item" ).each(function() {
+			var item = $( this );
+			if ( that._isDivider( item ) ) {
+				item.addClass( "ui-widget-content ui-menu-divider" );
+			}
+		});
+
+		// Don't refresh list items that are already adapted
+		items.not( ".ui-menu-item, .ui-menu-divider" )
+			.addClass( "ui-menu-item" )
+			.uniqueId()
+			.attr({
+				tabIndex: -1,
+				role: this._itemRole()
+			});
+
+		// Add aria-disabled attribute to any disabled menu item
+		items.filter( ".ui-state-disabled" ).attr( "aria-disabled", "true" );
+
+		// If the active item has been removed, blur the menu
+		if ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
+			this.blur();
+		}
+	},
+
+	_itemRole: function() {
+		return {
+			menu: "menuitem",
+			listbox: "option"
+		}[ this.options.role ];
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "icons" ) {
+			this.element.find( ".ui-menu-icon" )
+				.removeClass( this.options.icons.submenu )
+				.addClass( value.submenu );
+		}
+		if ( key === "disabled" ) {
+			this.element
+				.toggleClass( "ui-state-disabled", !!value )
+				.attr( "aria-disabled", value );
+		}
+		this._super( key, value );
+	},
+
+	focus: function( event, item ) {
+		var nested, focused;
+		this.blur( event, event && event.type === "focus" );
+
+		this._scrollIntoView( item );
+
+		this.active = item.first();
+		focused = this.active.addClass( "ui-state-focus" ).removeClass( "ui-state-active" );
+		// Only update aria-activedescendant if there's a role
+		// otherwise we assume focus is managed elsewhere
+		if ( this.options.role ) {
+			this.element.attr( "aria-activedescendant", focused.attr( "id" ) );
+		}
+
+		// Highlight active parent menu item, if any
+		this.active
+			.parent()
+			.closest( ".ui-menu-item" )
+			.addClass( "ui-state-active" );
+
+		if ( event && event.type === "keydown" ) {
+			this._close();
+		} else {
+			this.timer = this._delay(function() {
+				this._close();
+			}, this.delay );
+		}
+
+		nested = item.children( ".ui-menu" );
+		if ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {
+			this._startOpening(nested);
+		}
+		this.activeMenu = item.parent();
+
+		this._trigger( "focus", event, { item: item } );
+	},
+
+	_scrollIntoView: function( item ) {
+		var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
+		if ( this._hasScroll() ) {
+			borderTop = parseFloat( $.css( this.activeMenu[0], "borderTopWidth" ) ) || 0;
+			paddingTop = parseFloat( $.css( this.activeMenu[0], "paddingTop" ) ) || 0;
+			offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
+			scroll = this.activeMenu.scrollTop();
+			elementHeight = this.activeMenu.height();
+			itemHeight = item.outerHeight();
+
+			if ( offset < 0 ) {
+				this.activeMenu.scrollTop( scroll + offset );
+			} else if ( offset + itemHeight > elementHeight ) {
+				this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
+			}
+		}
+	},
+
+	blur: function( event, fromFocus ) {
+		if ( !fromFocus ) {
+			clearTimeout( this.timer );
+		}
+
+		if ( !this.active ) {
+			return;
+		}
+
+		this.active.removeClass( "ui-state-focus" );
+		this.active = null;
+
+		this._trigger( "blur", event, { item: this.active } );
+	},
+
+	_startOpening: function( submenu ) {
+		clearTimeout( this.timer );
+
+		// Don't open if already open fixes a Firefox bug that caused a .5 pixel
+		// shift in the submenu position when mousing over the carat icon
+		if ( submenu.attr( "aria-hidden" ) !== "true" ) {
+			return;
+		}
+
+		this.timer = this._delay(function() {
+			this._close();
+			this._open( submenu );
+		}, this.delay );
+	},
+
+	_open: function( submenu ) {
+		var position = $.extend({
+			of: this.active
+		}, this.options.position );
+
+		clearTimeout( this.timer );
+		this.element.find( ".ui-menu" ).not( submenu.parents( ".ui-menu" ) )
+			.hide()
+			.attr( "aria-hidden", "true" );
+
+		submenu
+			.show()
+			.removeAttr( "aria-hidden" )
+			.attr( "aria-expanded", "true" )
+			.position( position );
+	},
+
+	collapseAll: function( event, all ) {
+		clearTimeout( this.timer );
+		this.timer = this._delay(function() {
+			// If we were passed an event, look for the submenu that contains the event
+			var currentMenu = all ? this.element :
+				$( event && event.target ).closest( this.element.find( ".ui-menu" ) );
+
+			// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway
+			if ( !currentMenu.length ) {
+				currentMenu = this.element;
+			}
+
+			this._close( currentMenu );
+
+			this.blur( event );
+			this.activeMenu = currentMenu;
+		}, this.delay );
+	},
+
+	// With no arguments, closes the currently active menu - if nothing is active
+	// it closes all menus.  If passed an argument, it will search for menus BELOW
+	_close: function( startMenu ) {
+		if ( !startMenu ) {
+			startMenu = this.active ? this.active.parent() : this.element;
+		}
+
+		startMenu
+			.find( ".ui-menu" )
+				.hide()
+				.attr( "aria-hidden", "true" )
+				.attr( "aria-expanded", "false" )
+			.end()
+			.find( ".ui-state-active" ).not( ".ui-state-focus" )
+				.removeClass( "ui-state-active" );
+	},
+
+	_closeOnDocumentClick: function( event ) {
+		return !$( event.target ).closest( ".ui-menu" ).length;
+	},
+
+	_isDivider: function( item ) {
+
+		// Match hyphen, em dash, en dash
+		return !/[^\-\u2014\u2013\s]/.test( item.text() );
+	},
+
+	collapse: function( event ) {
+		var newItem = this.active &&
+			this.active.parent().closest( ".ui-menu-item", this.element );
+		if ( newItem && newItem.length ) {
+			this._close();
+			this.focus( event, newItem );
+		}
+	},
+
+	expand: function( event ) {
+		var newItem = this.active &&
+			this.active
+				.children( ".ui-menu " )
+				.find( this.options.items )
+				.first();
+
+		if ( newItem && newItem.length ) {
+			this._open( newItem.parent() );
+
+			// Delay so Firefox will not hide activedescendant change in expanding submenu from AT
+			this._delay(function() {
+				this.focus( event, newItem );
+			});
+		}
+	},
+
+	next: function( event ) {
+		this._move( "next", "first", event );
+	},
+
+	previous: function( event ) {
+		this._move( "prev", "last", event );
+	},
+
+	isFirstItem: function() {
+		return this.active && !this.active.prevAll( ".ui-menu-item" ).length;
+	},
+
+	isLastItem: function() {
+		return this.active && !this.active.nextAll( ".ui-menu-item" ).length;
+	},
+
+	_move: function( direction, filter, event ) {
+		var next;
+		if ( this.active ) {
+			if ( direction === "first" || direction === "last" ) {
+				next = this.active
+					[ direction === "first" ? "prevAll" : "nextAll" ]( ".ui-menu-item" )
+					.eq( -1 );
+			} else {
+				next = this.active
+					[ direction + "All" ]( ".ui-menu-item" )
+					.eq( 0 );
+			}
+		}
+		if ( !next || !next.length || !this.active ) {
+			next = this.activeMenu.find( this.options.items )[ filter ]();
+		}
+
+		this.focus( event, next );
+	},
+
+	nextPage: function( event ) {
+		var item, base, height;
+
+		if ( !this.active ) {
+			this.next( event );
+			return;
+		}
+		if ( this.isLastItem() ) {
+			return;
+		}
+		if ( this._hasScroll() ) {
+			base = this.active.offset().top;
+			height = this.element.height();
+			this.active.nextAll( ".ui-menu-item" ).each(function() {
+				item = $( this );
+				return item.offset().top - base - height < 0;
+			});
+
+			this.focus( event, item );
+		} else {
+			this.focus( event, this.activeMenu.find( this.options.items )
+				[ !this.active ? "first" : "last" ]() );
+		}
+	},
+
+	previousPage: function( event ) {
+		var item, base, height;
+		if ( !this.active ) {
+			this.next( event );
+			return;
+		}
+		if ( this.isFirstItem() ) {
+			return;
+		}
+		if ( this._hasScroll() ) {
+			base = this.active.offset().top;
+			height = this.element.height();
+			this.active.prevAll( ".ui-menu-item" ).each(function() {
+				item = $( this );
+				return item.offset().top - base + height > 0;
+			});
+
+			this.focus( event, item );
+		} else {
+			this.focus( event, this.activeMenu.find( this.options.items ).first() );
+		}
+	},
+
+	_hasScroll: function() {
+		return this.element.outerHeight() < this.element.prop( "scrollHeight" );
+	},
+
+	select: function( event ) {
+		// TODO: It should never be possible to not have an active item at this
+		// point, but the tests don't trigger mouseenter before click.
+		this.active = this.active || $( event.target ).closest( ".ui-menu-item" );
+		var ui = { item: this.active };
+		if ( !this.active.has( ".ui-menu" ).length ) {
+			this.collapseAll( event, true );
+		}
+		this._trigger( "select", event, ui );
+	},
+
+	_filterMenuItems: function(character) {
+		var escapedCharacter = character.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" ),
+			regex = new RegExp( "^" + escapedCharacter, "i" );
+
+		return this.activeMenu
+			.find( this.options.items )
+
+			// Only match on items, not dividers or other content (#10571)
+			.filter( ".ui-menu-item" )
+			.filter(function() {
+				return regex.test( $.trim( $( this ).text() ) );
+			});
+	}
+});
+
+
+/*!
+ * jQuery UI Autocomplete 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/autocomplete/
+ */
+
+
+$.widget( "ui.autocomplete", {
+	version: "1.11.4",
+	defaultElement: "<input>",
+	options: {
+		appendTo: null,
+		autoFocus: false,
+		delay: 300,
+		minLength: 1,
+		position: {
+			my: "left top",
+			at: "left bottom",
+			collision: "none"
+		},
+		source: null,
+
+		// callbacks
+		change: null,
+		close: null,
+		focus: null,
+		open: null,
+		response: null,
+		search: null,
+		select: null
+	},
+
+	requestIndex: 0,
+	pending: 0,
+
+	_create: function() {
+		// Some browsers only repeat keydown events, not keypress events,
+		// so we use the suppressKeyPress flag to determine if we've already
+		// handled the keydown event. #7269
+		// Unfortunately the code for & in keypress is the same as the up arrow,
+		// so we use the suppressKeyPressRepeat flag to avoid handling keypress
+		// events when we know the keydown event was used to modify the
+		// search term. #7799
+		var suppressKeyPress, suppressKeyPressRepeat, suppressInput,
+			nodeName = this.element[ 0 ].nodeName.toLowerCase(),
+			isTextarea = nodeName === "textarea",
+			isInput = nodeName === "input";
+
+		this.isMultiLine =
+			// Textareas are always multi-line
+			isTextarea ? true :
+			// Inputs are always single-line, even if inside a contentEditable element
+			// IE also treats inputs as contentEditable
+			isInput ? false :
+			// All other element types are determined by whether or not they're contentEditable
+			this.element.prop( "isContentEditable" );
+
+		this.valueMethod = this.element[ isTextarea || isInput ? "val" : "text" ];
+		this.isNewMenu = true;
+
+		this.element
+			.addClass( "ui-autocomplete-input" )
+			.attr( "autocomplete", "off" );
+
+		this._on( this.element, {
+			keydown: function( event ) {
+				if ( this.element.prop( "readOnly" ) ) {
+					suppressKeyPress = true;
+					suppressInput = true;
+					suppressKeyPressRepeat = true;
+					return;
+				}
+
+				suppressKeyPress = false;
+				suppressInput = false;
+				suppressKeyPressRepeat = false;
+				var keyCode = $.ui.keyCode;
+				switch ( event.keyCode ) {
+				case keyCode.PAGE_UP:
+					suppressKeyPress = true;
+					this._move( "previousPage", event );
+					break;
+				case keyCode.PAGE_DOWN:
+					suppressKeyPress = true;
+					this._move( "nextPage", event );
+					break;
+				case keyCode.UP:
+					suppressKeyPress = true;
+					this._keyEvent( "previous", event );
+					break;
+				case keyCode.DOWN:
+					suppressKeyPress = true;
+					this._keyEvent( "next", event );
+					break;
+				case keyCode.ENTER:
+					// when menu is open and has focus
+					if ( this.menu.active ) {
+						// #6055 - Opera still allows the keypress to occur
+						// which causes forms to submit
+						suppressKeyPress = true;
+						event.preventDefault();
+						this.menu.select( event );
+					}
+					break;
+				case keyCode.TAB:
+					if ( this.menu.active ) {
+						this.menu.select( event );
+					}
+					break;
+				case keyCode.ESCAPE:
+					if ( this.menu.element.is( ":visible" ) ) {
+						if ( !this.isMultiLine ) {
+							this._value( this.term );
+						}
+						this.close( event );
+						// Different browsers have different default behavior for escape
+						// Single press can mean undo or clear
+						// Double press in IE means clear the whole form
+						event.preventDefault();
+					}
+					break;
+				default:
+					suppressKeyPressRepeat = true;
+					// search timeout should be triggered before the input value is changed
+					this._searchTimeout( event );
+					break;
+				}
+			},
+			keypress: function( event ) {
+				if ( suppressKeyPress ) {
+					suppressKeyPress = false;
+					if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
+						event.preventDefault();
+					}
+					return;
+				}
+				if ( suppressKeyPressRepeat ) {
+					return;
+				}
+
+				// replicate some key handlers to allow them to repeat in Firefox and Opera
+				var keyCode = $.ui.keyCode;
+				switch ( event.keyCode ) {
+				case keyCode.PAGE_UP:
+					this._move( "previousPage", event );
+					break;
+				case keyCode.PAGE_DOWN:
+					this._move( "nextPage", event );
+					break;
+				case keyCode.UP:
+					this._keyEvent( "previous", event );
+					break;
+				case keyCode.DOWN:
+					this._keyEvent( "next", event );
+					break;
+				}
+			},
+			input: function( event ) {
+				if ( suppressInput ) {
+					suppressInput = false;
+					event.preventDefault();
+					return;
+				}
+				this._searchTimeout( event );
+			},
+			focus: function() {
+				this.selectedItem = null;
+				this.previous = this._value();
+			},
+			blur: function( event ) {
+				if ( this.cancelBlur ) {
+					delete this.cancelBlur;
+					return;
+				}
+
+				clearTimeout( this.searching );
+				this.close( event );
+				this._change( event );
+			}
+		});
+
+		this._initSource();
+		this.menu = $( "<ul>" )
+			.addClass( "ui-autocomplete ui-front" )
+			.appendTo( this._appendTo() )
+			.menu({
+				// disable ARIA support, the live region takes care of that
+				role: null
+			})
+			.hide()
+			.menu( "instance" );
+
+		this._on( this.menu.element, {
+			mousedown: function( event ) {
+				// prevent moving focus out of the text field
+				event.preventDefault();
+
+				// IE doesn't prevent moving focus even with event.preventDefault()
+				// so we set a flag to know when we should ignore the blur event
+				this.cancelBlur = true;
+				this._delay(function() {
+					delete this.cancelBlur;
+				});
+
+				// clicking on the scrollbar causes focus to shift to the body
+				// but we can't detect a mouseup or a click immediately afterward
+				// so we have to track the next mousedown and close the menu if
+				// the user clicks somewhere outside of the autocomplete
+				var menuElement = this.menu.element[ 0 ];
+				if ( !$( event.target ).closest( ".ui-menu-item" ).length ) {
+					this._delay(function() {
+						var that = this;
+						this.document.one( "mousedown", function( event ) {
+							if ( event.target !== that.element[ 0 ] &&
+									event.target !== menuElement &&
+									!$.contains( menuElement, event.target ) ) {
+								that.close();
+							}
+						});
+					});
+				}
+			},
+			menufocus: function( event, ui ) {
+				var label, item;
+				// support: Firefox
+				// Prevent accidental activation of menu items in Firefox (#7024 #9118)
+				if ( this.isNewMenu ) {
+					this.isNewMenu = false;
+					if ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {
+						this.menu.blur();
+
+						this.document.one( "mousemove", function() {
+							$( event.target ).trigger( event.originalEvent );
+						});
+
+						return;
+					}
+				}
+
+				item = ui.item.data( "ui-autocomplete-item" );
+				if ( false !== this._trigger( "focus", event, { item: item } ) ) {
+					// use value to match what will end up in the input, if it was a key event
+					if ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {
+						this._value( item.value );
+					}
+				}
+
+				// Announce the value in the liveRegion
+				label = ui.item.attr( "aria-label" ) || item.value;
+				if ( label && $.trim( label ).length ) {
+					this.liveRegion.children().hide();
+					$( "<div>" ).text( label ).appendTo( this.liveRegion );
+				}
+			},
+			menuselect: function( event, ui ) {
+				var item = ui.item.data( "ui-autocomplete-item" ),
+					previous = this.previous;
+
+				// only trigger when focus was lost (click on menu)
+				if ( this.element[ 0 ] !== this.document[ 0 ].activeElement ) {
+					this.element.focus();
+					this.previous = previous;
+					// #6109 - IE triggers two focus events and the second
+					// is asynchronous, so we need to reset the previous
+					// term synchronously and asynchronously :-(
+					this._delay(function() {
+						this.previous = previous;
+						this.selectedItem = item;
+					});
+				}
+
+				if ( false !== this._trigger( "select", event, { item: item } ) ) {
+					this._value( item.value );
+				}
+				// reset the term after the select event
+				// this allows custom select handling to work properly
+				this.term = this._value();
+
+				this.close( event );
+				this.selectedItem = item;
+			}
+		});
+
+		this.liveRegion = $( "<span>", {
+				role: "status",
+				"aria-live": "assertive",
+				"aria-relevant": "additions"
+			})
+			.addClass( "ui-helper-hidden-accessible" )
+			.appendTo( this.document[ 0 ].body );
+
+		// turning off autocomplete prevents the browser from remembering the
+		// value when navigating through history, so we re-enable autocomplete
+		// if the page is unloaded before the widget is destroyed. #7790
+		this._on( this.window, {
+			beforeunload: function() {
+				this.element.removeAttr( "autocomplete" );
+			}
+		});
+	},
+
+	_destroy: function() {
+		clearTimeout( this.searching );
+		this.element
+			.removeClass( "ui-autocomplete-input" )
+			.removeAttr( "autocomplete" );
+		this.menu.element.remove();
+		this.liveRegion.remove();
+	},
+
+	_setOption: function( key, value ) {
+		this._super( key, value );
+		if ( key === "source" ) {
+			this._initSource();
+		}
+		if ( key === "appendTo" ) {
+			this.menu.element.appendTo( this._appendTo() );
+		}
+		if ( key === "disabled" && value && this.xhr ) {
+			this.xhr.abort();
+		}
+	},
+
+	_appendTo: function() {
+		var element = this.options.appendTo;
+
+		if ( element ) {
+			element = element.jquery || element.nodeType ?
+				$( element ) :
+				this.document.find( element ).eq( 0 );
+		}
+
+		if ( !element || !element[ 0 ] ) {
+			element = this.element.closest( ".ui-front" );
+		}
+
+		if ( !element.length ) {
+			element = this.document[ 0 ].body;
+		}
+
+		return element;
+	},
+
+	_initSource: function() {
+		var array, url,
+			that = this;
+		if ( $.isArray( this.options.source ) ) {
+			array = this.options.source;
+			this.source = function( request, response ) {
+				response( $.ui.autocomplete.filter( array, request.term ) );
+			};
+		} else if ( typeof this.options.source === "string" ) {
+			url = this.options.source;
+			this.source = function( request, response ) {
+				if ( that.xhr ) {
+					that.xhr.abort();
+				}
+				that.xhr = $.ajax({
+					url: url,
+					data: request,
+					dataType: "json",
+					success: function( data ) {
+						response( data );
+					},
+					error: function() {
+						response([]);
+					}
+				});
+			};
+		} else {
+			this.source = this.options.source;
+		}
+	},
+
+	_searchTimeout: function( event ) {
+		clearTimeout( this.searching );
+		this.searching = this._delay(function() {
+
+			// Search if the value has changed, or if the user retypes the same value (see #7434)
+			var equalValues = this.term === this._value(),
+				menuVisible = this.menu.element.is( ":visible" ),
+				modifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;
+
+			if ( !equalValues || ( equalValues && !menuVisible && !modifierKey ) ) {
+				this.selectedItem = null;
+				this.search( null, event );
+			}
+		}, this.options.delay );
+	},
+
+	search: function( value, event ) {
+		value = value != null ? value : this._value();
+
+		// always save the actual value, not the one passed as an argument
+		this.term = this._value();
+
+		if ( value.length < this.options.minLength ) {
+			return this.close( event );
+		}
+
+		if ( this._trigger( "search", event ) === false ) {
+			return;
+		}
+
+		return this._search( value );
+	},
+
+	_search: function( value ) {
+		this.pending++;
+		this.element.addClass( "ui-autocomplete-loading" );
+		this.cancelSearch = false;
+
+		this.source( { term: value }, this._response() );
+	},
+
+	_response: function() {
+		var index = ++this.requestIndex;
+
+		return $.proxy(function( content ) {
+			if ( index === this.requestIndex ) {
+				this.__response( content );
+			}
+
+			this.pending--;
+			if ( !this.pending ) {
+				this.element.removeClass( "ui-autocomplete-loading" );
+			}
+		}, this );
+	},
+
+	__response: function( content ) {
+		if ( content ) {
+			content = this._normalize( content );
+		}
+		this._trigger( "response", null, { content: content } );
+		if ( !this.options.disabled && content && content.length && !this.cancelSearch ) {
+			this._suggest( content );
+			this._trigger( "open" );
+		} else {
+			// use ._close() instead of .close() so we don't cancel future searches
+			this._close();
+		}
+	},
+
+	close: function( event ) {
+		this.cancelSearch = true;
+		this._close( event );
+	},
+
+	_close: function( event ) {
+		if ( this.menu.element.is( ":visible" ) ) {
+			this.menu.element.hide();
+			this.menu.blur();
+			this.isNewMenu = true;
+			this._trigger( "close", event );
+		}
+	},
+
+	_change: function( event ) {
+		if ( this.previous !== this._value() ) {
+			this._trigger( "change", event, { item: this.selectedItem } );
+		}
+	},
+
+	_normalize: function( items ) {
+		// assume all items have the right format when the first item is complete
+		if ( items.length && items[ 0 ].label && items[ 0 ].value ) {
+			return items;
+		}
+		return $.map( items, function( item ) {
+			if ( typeof item === "string" ) {
+				return {
+					label: item,
+					value: item
+				};
+			}
+			return $.extend( {}, item, {
+				label: item.label || item.value,
+				value: item.value || item.label
+			});
+		});
+	},
+
+	_suggest: function( items ) {
+		var ul = this.menu.element.empty();
+		this._renderMenu( ul, items );
+		this.isNewMenu = true;
+		this.menu.refresh();
+
+		// size and position menu
+		ul.show();
+		this._resizeMenu();
+		ul.position( $.extend({
+			of: this.element
+		}, this.options.position ) );
+
+		if ( this.options.autoFocus ) {
+			this.menu.next();
+		}
+	},
+
+	_resizeMenu: function() {
+		var ul = this.menu.element;
+		ul.outerWidth( Math.max(
+			// Firefox wraps long text (possibly a rounding bug)
+			// so we add 1px to avoid the wrapping (#7513)
+			ul.width( "" ).outerWidth() + 1,
+			this.element.outerWidth()
+		) );
+	},
+
+	_renderMenu: function( ul, items ) {
+		var that = this;
+		$.each( items, function( index, item ) {
+			that._renderItemData( ul, item );
+		});
+	},
+
+	_renderItemData: function( ul, item ) {
+		return this._renderItem( ul, item ).data( "ui-autocomplete-item", item );
+	},
+
+	_renderItem: function( ul, item ) {
+		return $( "<li>" ).text( item.label ).appendTo( ul );
+	},
+
+	_move: function( direction, event ) {
+		if ( !this.menu.element.is( ":visible" ) ) {
+			this.search( null, event );
+			return;
+		}
+		if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
+				this.menu.isLastItem() && /^next/.test( direction ) ) {
+
+			if ( !this.isMultiLine ) {
+				this._value( this.term );
+			}
+
+			this.menu.blur();
+			return;
+		}
+		this.menu[ direction ]( event );
+	},
+
+	widget: function() {
+		return this.menu.element;
+	},
+
+	_value: function() {
+		return this.valueMethod.apply( this.element, arguments );
+	},
+
+	_keyEvent: function( keyEvent, event ) {
+		if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
+			this._move( keyEvent, event );
+
+			// prevents moving cursor to beginning/end of the text field in some browsers
+			event.preventDefault();
+		}
+	}
+});
+
+$.extend( $.ui.autocomplete, {
+	escapeRegex: function( value ) {
+		return value.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" );
+	},
+	filter: function( array, term ) {
+		var matcher = new RegExp( $.ui.autocomplete.escapeRegex( term ), "i" );
+		return $.grep( array, function( value ) {
+			return matcher.test( value.label || value.value || value );
+		});
+	}
+});
+
+// live region extension, adding a `messages` option
+// NOTE: This is an experimental API. We are still investigating
+// a full solution for string manipulation and internationalization.
+$.widget( "ui.autocomplete", $.ui.autocomplete, {
+	options: {
+		messages: {
+			noResults: "No search results.",
+			results: function( amount ) {
+				return amount + ( amount > 1 ? " results are" : " result is" ) +
+					" available, use up and down arrow keys to navigate.";
+			}
+		}
+	},
+
+	__response: function( content ) {
+		var message;
+		this._superApply( arguments );
+		if ( this.options.disabled || this.cancelSearch ) {
+			return;
+		}
+		if ( content && content.length ) {
+			message = this.options.messages.results( content.length );
+		} else {
+			message = this.options.messages.noResults;
+		}
+		this.liveRegion.children().hide();
+		$( "<div>" ).text( message ).appendTo( this.liveRegion );
+	}
+});
+
+var autocomplete = $.ui.autocomplete;
+
+
+/*!
+ * jQuery UI Button 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/button/
+ */
+
+
+var lastActive,
+	baseClasses = "ui-button ui-widget ui-state-default ui-corner-all",
+	typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
+	formResetHandler = function() {
+		var form = $( this );
+		setTimeout(function() {
+			form.find( ":ui-button" ).button( "refresh" );
+		}, 1 );
+	},
+	radioGroup = function( radio ) {
+		var name = radio.name,
+			form = radio.form,
+			radios = $( [] );
+		if ( name ) {
+			name = name.replace( /'/g, "\\'" );
+			if ( form ) {
+				radios = $( form ).find( "[name='" + name + "'][type=radio]" );
+			} else {
+				radios = $( "[name='" + name + "'][type=radio]", radio.ownerDocument )
+					.filter(function() {
+						return !this.form;
+					});
+			}
+		}
+		return radios;
+	};
+
+$.widget( "ui.button", {
+	version: "1.11.4",
+	defaultElement: "<button>",
+	options: {
+		disabled: null,
+		text: true,
+		label: null,
+		icons: {
+			primary: null,
+			secondary: null
+		}
+	},
+	_create: function() {
+		this.element.closest( "form" )
+			.unbind( "reset" + this.eventNamespace )
+			.bind( "reset" + this.eventNamespace, formResetHandler );
+
+		if ( typeof this.options.disabled !== "boolean" ) {
+			this.options.disabled = !!this.element.prop( "disabled" );
+		} else {
+			this.element.prop( "disabled", this.options.disabled );
+		}
+
+		this._determineButtonType();
+		this.hasTitle = !!this.buttonElement.attr( "title" );
+
+		var that = this,
+			options = this.options,
+			toggleButton = this.type === "checkbox" || this.type === "radio",
+			activeClass = !toggleButton ? "ui-state-active" : "";
+
+		if ( options.label === null ) {
+			options.label = (this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
+		}
+
+		this._hoverable( this.buttonElement );
+
+		this.buttonElement
+			.addClass( baseClasses )
+			.attr( "role", "button" )
+			.bind( "mouseenter" + this.eventNamespace, function() {
+				if ( options.disabled ) {
+					return;
+				}
+				if ( this === lastActive ) {
+					$( this ).addClass( "ui-state-active" );
+				}
+			})
+			.bind( "mouseleave" + this.eventNamespace, function() {
+				if ( options.disabled ) {
+					return;
+				}
+				$( this ).removeClass( activeClass );
+			})
+			.bind( "click" + this.eventNamespace, function( event ) {
+				if ( options.disabled ) {
+					event.preventDefault();
+					event.stopImmediatePropagation();
+				}
+			});
+
+		// Can't use _focusable() because the element that receives focus
+		// and the element that gets the ui-state-focus class are different
+		this._on({
+			focus: function() {
+				this.buttonElement.addClass( "ui-state-focus" );
+			},
+			blur: function() {
+				this.buttonElement.removeClass( "ui-state-focus" );
+			}
+		});
+
+		if ( toggleButton ) {
+			this.element.bind( "change" + this.eventNamespace, function() {
+				that.refresh();
+			});
+		}
+
+		if ( this.type === "checkbox" ) {
+			this.buttonElement.bind( "click" + this.eventNamespace, function() {
+				if ( options.disabled ) {
+					return false;
+				}
+			});
+		} else if ( this.type === "radio" ) {
+			this.buttonElement.bind( "click" + this.eventNamespace, function() {
+				if ( options.disabled ) {
+					return false;
+				}
+				$( this ).addClass( "ui-state-active" );
+				that.buttonElement.attr( "aria-pressed", "true" );
+
+				var radio = that.element[ 0 ];
+				radioGroup( radio )
+					.not( radio )
+					.map(function() {
+						return $( this ).button( "widget" )[ 0 ];
+					})
+					.removeClass( "ui-state-active" )
+					.attr( "aria-pressed", "false" );
+			});
+		} else {
+			this.buttonElement
+				.bind( "mousedown" + this.eventNamespace, function() {
+					if ( options.disabled ) {
+						return false;
+					}
+					$( this ).addClass( "ui-state-active" );
+					lastActive = this;
+					that.document.one( "mouseup", function() {
+						lastActive = null;
+					});
+				})
+				.bind( "mouseup" + this.eventNamespace, function() {
+					if ( options.disabled ) {
+						return false;
+					}
+					$( this ).removeClass( "ui-state-active" );
+				})
+				.bind( "keydown" + this.eventNamespace, function(event) {
+					if ( options.disabled ) {
+						return false;
+					}
+					if ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {
+						$( this ).addClass( "ui-state-active" );
+					}
+				})
+				// see #8559, we bind to blur here in case the button element loses
+				// focus between keydown and keyup, it would be left in an "active" state
+				.bind( "keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
+					$( this ).removeClass( "ui-state-active" );
+				});
+
+			if ( this.buttonElement.is("a") ) {
+				this.buttonElement.keyup(function(event) {
+					if ( event.keyCode === $.ui.keyCode.SPACE ) {
+						// TODO pass through original event correctly (just as 2nd argument doesn't work)
+						$( this ).click();
+					}
+				});
+			}
+		}
+
+		this._setOption( "disabled", options.disabled );
+		this._resetButton();
+	},
+
+	_determineButtonType: function() {
+		var ancestor, labelSelector, checked;
+
+		if ( this.element.is("[type=checkbox]") ) {
+			this.type = "checkbox";
+		} else if ( this.element.is("[type=radio]") ) {
+			this.type = "radio";
+		} else if ( this.element.is("input") ) {
+			this.type = "input";
+		} else {
+			this.type = "button";
+		}
+
+		if ( this.type === "checkbox" || this.type === "radio" ) {
+			// we don't search against the document in case the element
+			// is disconnected from the DOM
+			ancestor = this.element.parents().last();
+			labelSelector = "label[for='" + this.element.attr("id") + "']";
+			this.buttonElement = ancestor.find( labelSelector );
+			if ( !this.buttonElement.length ) {
+				ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();
+				this.buttonElement = ancestor.filter( labelSelector );
+				if ( !this.buttonElement.length ) {
+					this.buttonElement = ancestor.find( labelSelector );
+				}
+			}
+			this.element.addClass( "ui-helper-hidden-accessible" );
+
+			checked = this.element.is( ":checked" );
+			if ( checked ) {
+				this.buttonElement.addClass( "ui-state-active" );
+			}
+			this.buttonElement.prop( "aria-pressed", checked );
+		} else {
+			this.buttonElement = this.element;
+		}
+	},
+
+	widget: function() {
+		return this.buttonElement;
+	},
+
+	_destroy: function() {
+		this.element
+			.removeClass( "ui-helper-hidden-accessible" );
+		this.buttonElement
+			.removeClass( baseClasses + " ui-state-active " + typeClasses )
+			.removeAttr( "role" )
+			.removeAttr( "aria-pressed" )
+			.html( this.buttonElement.find(".ui-button-text").html() );
+
+		if ( !this.hasTitle ) {
+			this.buttonElement.removeAttr( "title" );
+		}
+	},
+
+	_setOption: function( key, value ) {
+		this._super( key, value );
+		if ( key === "disabled" ) {
+			this.widget().toggleClass( "ui-state-disabled", !!value );
+			this.element.prop( "disabled", !!value );
+			if ( value ) {
+				if ( this.type === "checkbox" || this.type === "radio" ) {
+					this.buttonElement.removeClass( "ui-state-focus" );
+				} else {
+					this.buttonElement.removeClass( "ui-state-focus ui-state-active" );
+				}
+			}
+			return;
+		}
+		this._resetButton();
+	},
+
+	refresh: function() {
+		//See #8237 & #8828
+		var isDisabled = this.element.is( "input, button" ) ? this.element.is( ":disabled" ) : this.element.hasClass( "ui-button-disabled" );
+
+		if ( isDisabled !== this.options.disabled ) {
+			this._setOption( "disabled", isDisabled );
+		}
+		if ( this.type === "radio" ) {
+			radioGroup( this.element[0] ).each(function() {
+				if ( $( this ).is( ":checked" ) ) {
+					$( this ).button( "widget" )
+						.addClass( "ui-state-active" )
+						.attr( "aria-pressed", "true" );
+				} else {
+					$( this ).button( "widget" )
+						.removeClass( "ui-state-active" )
+						.attr( "aria-pressed", "false" );
+				}
+			});
+		} else if ( this.type === "checkbox" ) {
+			if ( this.element.is( ":checked" ) ) {
+				this.buttonElement
+					.addClass( "ui-state-active" )
+					.attr( "aria-pressed", "true" );
+			} else {
+				this.buttonElement
+					.removeClass( "ui-state-active" )
+					.attr( "aria-pressed", "false" );
+			}
+		}
+	},
+
+	_resetButton: function() {
+		if ( this.type === "input" ) {
+			if ( this.options.label ) {
+				this.element.val( this.options.label );
+			}
+			return;
+		}
+		var buttonElement = this.buttonElement.removeClass( typeClasses ),
+			buttonText = $( "<span></span>", this.document[0] )
+				.addClass( "ui-button-text" )
+				.html( this.options.label )
+				.appendTo( buttonElement.empty() )
+				.text(),
+			icons = this.options.icons,
+			multipleIcons = icons.primary && icons.secondary,
+			buttonClasses = [];
+
+		if ( icons.primary || icons.secondary ) {
+			if ( this.options.text ) {
+				buttonClasses.push( "ui-button-text-icon" + ( multipleIcons ? "s" : ( icons.primary ? "-primary" : "-secondary" ) ) );
+			}
+
+			if ( icons.primary ) {
+				buttonElement.prepend( "<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>" );
+			}
+
+			if ( icons.secondary ) {
+				buttonElement.append( "<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>" );
+			}
+
+			if ( !this.options.text ) {
+				buttonClasses.push( multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only" );
+
+				if ( !this.hasTitle ) {
+					buttonElement.attr( "title", $.trim( buttonText ) );
+				}
+			}
+		} else {
+			buttonClasses.push( "ui-button-text-only" );
+		}
+		buttonElement.addClass( buttonClasses.join( " " ) );
+	}
+});
+
+$.widget( "ui.buttonset", {
+	version: "1.11.4",
+	options: {
+		items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
+	},
+
+	_create: function() {
+		this.element.addClass( "ui-buttonset" );
+	},
+
+	_init: function() {
+		this.refresh();
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "disabled" ) {
+			this.buttons.button( "option", key, value );
+		}
+
+		this._super( key, value );
+	},
+
+	refresh: function() {
+		var rtl = this.element.css( "direction" ) === "rtl",
+			allButtons = this.element.find( this.options.items ),
+			existingButtons = allButtons.filter( ":ui-button" );
+
+		// Initialize new buttons
+		allButtons.not( ":ui-button" ).button();
+
+		// Refresh existing buttons
+		existingButtons.button( "refresh" );
+
+		this.buttons = allButtons
+			.map(function() {
+				return $( this ).button( "widget" )[ 0 ];
+			})
+				.removeClass( "ui-corner-all ui-corner-left ui-corner-right" )
+				.filter( ":first" )
+					.addClass( rtl ? "ui-corner-right" : "ui-corner-left" )
+				.end()
+				.filter( ":last" )
+					.addClass( rtl ? "ui-corner-left" : "ui-corner-right" )
+				.end()
+			.end();
+	},
+
+	_destroy: function() {
+		this.element.removeClass( "ui-buttonset" );
+		this.buttons
+			.map(function() {
+				return $( this ).button( "widget" )[ 0 ];
+			})
+				.removeClass( "ui-corner-left ui-corner-right" )
+			.end()
+			.button( "destroy" );
+	}
+});
+
+var button = $.ui.button;
+
+
+/*!
+ * jQuery UI Datepicker 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/datepicker/
+ */
+
+
+$.extend($.ui, { datepicker: { version: "1.11.4" } });
+
+var datepicker_instActive;
+
+function datepicker_getZindex( elem ) {
+	var position, value;
+	while ( elem.length && elem[ 0 ] !== document ) {
+		// Ignore z-index if position is set to a value where z-index is ignored by the browser
+		// This makes behavior of this function consistent across browsers
+		// WebKit always returns auto if the element is positioned
+		position = elem.css( "position" );
+		if ( position === "absolute" || position === "relative" || position === "fixed" ) {
+			// IE returns 0 when zIndex is not specified
+			// other browsers return a string
+			// we ignore the case of nested elements with an explicit value of 0
+			// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
+			value = parseInt( elem.css( "zIndex" ), 10 );
+			if ( !isNaN( value ) && value !== 0 ) {
+				return value;
+			}
+		}
+		elem = elem.parent();
+	}
+
+	return 0;
+}
+/* Date picker manager.
+   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
+   Settings for (groups of) date pickers are maintained in an instance object,
+   allowing multiple different settings on the same page. */
+
+function Datepicker() {
+	this._curInst = null; // The current instance in use
+	this._keyEvent = false; // If the last event was a key event
+	this._disabledInputs = []; // List of date picker inputs that have been disabled
+	this._datepickerShowing = false; // True if the popup picker is showing , false if not
+	this._inDialog = false; // True if showing within a "dialog", false if not
+	this._mainDivId = "ui-datepicker-div"; // The ID of the main datepicker division
+	this._inlineClass = "ui-datepicker-inline"; // The name of the inline marker class
+	this._appendClass = "ui-datepicker-append"; // The name of the append marker class
+	this._triggerClass = "ui-datepicker-trigger"; // The name of the trigger marker class
+	this._dialogClass = "ui-datepicker-dialog"; // The name of the dialog marker class
+	this._disableClass = "ui-datepicker-disabled"; // The name of the disabled covering marker class
+	this._unselectableClass = "ui-datepicker-unselectable"; // The name of the unselectable cell marker class
+	this._currentClass = "ui-datepicker-current-day"; // The name of the current day marker class
+	this._dayOverClass = "ui-datepicker-days-cell-over"; // The name of the day hover marker class
+	this.regional = []; // Available regional settings, indexed by language code
+	this.regional[""] = { // Default regional settings
+		closeText: "Done", // Display text for close link
+		prevText: "Prev", // Display text for previous month link
+		nextText: "Next", // Display text for next month link
+		currentText: "Today", // Display text for current month link
+		monthNames: ["January","February","March","April","May","June",
+			"July","August","September","October","November","December"], // Names of months for drop-down and formatting
+		monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], // For formatting
+		dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], // For formatting
+		dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], // For formatting
+		dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa"], // Column headings for days starting at Sunday
+		weekHeader: "Wk", // Column header for week of the year
+		dateFormat: "mm/dd/yy", // See format options on parseDate
+		firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
+		isRTL: false, // True if right-to-left language, false if left-to-right
+		showMonthAfterYear: false, // True if the year select precedes month, false for month then year
+		yearSuffix: "" // Additional text to append to the year in the month headers
+	};
+	this._defaults = { // Global defaults for all the date picker instances
+		showOn: "focus", // "focus" for popup on focus,
+			// "button" for trigger button, or "both" for either
+		showAnim: "fadeIn", // Name of jQuery animation for popup
+		showOptions: {}, // Options for enhanced animations
+		defaultDate: null, // Used when field is blank: actual date,
+			// +/-number for offset from today, null for today
+		appendText: "", // Display text following the input box, e.g. showing the format
+		buttonText: "...", // Text for trigger button
+		buttonImage: "", // URL for trigger button image
+		buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
+		hideIfNoPrevNext: false, // True to hide next/previous month links
+			// if not applicable, false to just disable them
+		navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
+		gotoCurrent: false, // True if today link goes back to current selection instead
+		changeMonth: false, // True if month can be selected directly, false if only prev/next
+		changeYear: false, // True if year can be selected directly, false if only prev/next
+		yearRange: "c-10:c+10", // Range of years to display in drop-down,
+			// either relative to today's year (-nn:+nn), relative to currently displayed year
+			// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)
+		showOtherMonths: false, // True to show dates in other months, false to leave blank
+		selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
+		showWeek: false, // True to show week of the year, false to not show it
+		calculateWeek: this.iso8601Week, // How to calculate the week of the year,
+			// takes a Date and returns the number of the week for it
+		shortYearCutoff: "+10", // Short year values < this are in the current century,
+			// > this are in the previous century,
+			// string value starting with "+" for current year + value
+		minDate: null, // The earliest selectable date, or null for no limit
+		maxDate: null, // The latest selectable date, or null for no limit
+		duration: "fast", // Duration of display/closure
+		beforeShowDay: null, // Function that takes a date and returns an array with
+			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or "",
+			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
+		beforeShow: null, // Function that takes an input field and
+			// returns a set of custom settings for the date picker
+		onSelect: null, // Define a callback function when a date is selected
+		onChangeMonthYear: null, // Define a callback function when the month or year is changed
+		onClose: null, // Define a callback function when the datepicker is closed
+		numberOfMonths: 1, // Number of months to show at a time
+		showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
+		stepMonths: 1, // Number of months to step back/forward
+		stepBigMonths: 12, // Number of months to step back/forward for the big links
+		altField: "", // Selector for an alternate field to store selected dates into
+		altFormat: "", // The date format to use for the alternate field
+		constrainInput: true, // The input is constrained by the current date format
+		showButtonPanel: false, // True to show button panel, false to not show it
+		autoSize: false, // True to size the input for the date format, false to leave as is
+		disabled: false // The initial disabled state
+	};
+	$.extend(this._defaults, this.regional[""]);
+	this.regional.en = $.extend( true, {}, this.regional[ "" ]);
+	this.regional[ "en-US" ] = $.extend( true, {}, this.regional.en );
+	this.dpDiv = datepicker_bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
+}
+
+$.extend(Datepicker.prototype, {
+	/* Class name added to elements to indicate already configured with a date picker. */
+	markerClassName: "hasDatepicker",
+
+	//Keep track of the maximum number of rows displayed (see #7043)
+	maxRows: 4,
+
+	// TODO rename to "widget" when switching to widget factory
+	_widgetDatepicker: function() {
+		return this.dpDiv;
+	},
+
+	/* Override the default settings for all instances of the date picker.
+	 * @param  settings  object - the new settings to use as defaults (anonymous object)
+	 * @return the manager object
+	 */
+	setDefaults: function(settings) {
+		datepicker_extendRemove(this._defaults, settings || {});
+		return this;
+	},
+
+	/* Attach the date picker to a jQuery selection.
+	 * @param  target	element - the target input field or division or span
+	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
+	 */
+	_attachDatepicker: function(target, settings) {
+		var nodeName, inline, inst;
+		nodeName = target.nodeName.toLowerCase();
+		inline = (nodeName === "div" || nodeName === "span");
+		if (!target.id) {
+			this.uuid += 1;
+			target.id = "dp" + this.uuid;
+		}
+		inst = this._newInst($(target), inline);
+		inst.settings = $.extend({}, settings || {});
+		if (nodeName === "input") {
+			this._connectDatepicker(target, inst);
+		} else if (inline) {
+			this._inlineDatepicker(target, inst);
+		}
+	},
+
+	/* Create a new instance object. */
+	_newInst: function(target, inline) {
+		var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); // escape jQuery meta chars
+		return {id: id, input: target, // associated target
+			selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
+			drawMonth: 0, drawYear: 0, // month being drawn
+			inline: inline, // is datepicker inline or not
+			dpDiv: (!inline ? this.dpDiv : // presentation div
+			datepicker_bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
+	},
+
+	/* Attach the date picker to an input field. */
+	_connectDatepicker: function(target, inst) {
+		var input = $(target);
+		inst.append = $([]);
+		inst.trigger = $([]);
+		if (input.hasClass(this.markerClassName)) {
+			return;
+		}
+		this._attachments(input, inst);
+		input.addClass(this.markerClassName).keydown(this._doKeyDown).
+			keypress(this._doKeyPress).keyup(this._doKeyUp);
+		this._autoSize(inst);
+		$.data(target, "datepicker", inst);
+		//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)
+		if( inst.settings.disabled ) {
+			this._disableDatepicker( target );
+		}
+	},
+
+	/* Make attachments based on settings. */
+	_attachments: function(input, inst) {
+		var showOn, buttonText, buttonImage,
+			appendText = this._get(inst, "appendText"),
+			isRTL = this._get(inst, "isRTL");
+
+		if (inst.append) {
+			inst.append.remove();
+		}
+		if (appendText) {
+			inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
+			input[isRTL ? "before" : "after"](inst.append);
+		}
+
+		input.unbind("focus", this._showDatepicker);
+
+		if (inst.trigger) {
+			inst.trigger.remove();
+		}
+
+		showOn = this._get(inst, "showOn");
+		if (showOn === "focus" || showOn === "both") { // pop-up date picker when in the marked field
+			input.focus(this._showDatepicker);
+		}
+		if (showOn === "button" || showOn === "both") { // pop-up date picker when button clicked
+			buttonText = this._get(inst, "buttonText");
+			buttonImage = this._get(inst, "buttonImage");
+			inst.trigger = $(this._get(inst, "buttonImageOnly") ?
+				$("<img/>").addClass(this._triggerClass).
+					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
+				$("<button type='button'></button>").addClass(this._triggerClass).
+					html(!buttonImage ? buttonText : $("<img/>").attr(
+					{ src:buttonImage, alt:buttonText, title:buttonText })));
+			input[isRTL ? "before" : "after"](inst.trigger);
+			inst.trigger.click(function() {
+				if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
+					$.datepicker._hideDatepicker();
+				} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
+					$.datepicker._hideDatepicker();
+					$.datepicker._showDatepicker(input[0]);
+				} else {
+					$.datepicker._showDatepicker(input[0]);
+				}
+				return false;
+			});
+		}
+	},
+
+	/* Apply the maximum length for the date format. */
+	_autoSize: function(inst) {
+		if (this._get(inst, "autoSize") && !inst.inline) {
+			var findMax, max, maxI, i,
+				date = new Date(2009, 12 - 1, 20), // Ensure double digits
+				dateFormat = this._get(inst, "dateFormat");
+
+			if (dateFormat.match(/[DM]/)) {
+				findMax = function(names) {
+					max = 0;
+					maxI = 0;
+					for (i = 0; i < names.length; i++) {
+						if (names[i].length > max) {
+							max = names[i].length;
+							maxI = i;
+						}
+					}
+					return maxI;
+				};
+				date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
+					"monthNames" : "monthNamesShort"))));
+				date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?
+					"dayNames" : "dayNamesShort"))) + 20 - date.getDay());
+			}
+			inst.input.attr("size", this._formatDate(inst, date).length);
+		}
+	},
+
+	/* Attach an inline date picker to a div. */
+	_inlineDatepicker: function(target, inst) {
+		var divSpan = $(target);
+		if (divSpan.hasClass(this.markerClassName)) {
+			return;
+		}
+		divSpan.addClass(this.markerClassName).append(inst.dpDiv);
+		$.data(target, "datepicker", inst);
+		this._setDate(inst, this._getDefaultDate(inst), true);
+		this._updateDatepicker(inst);
+		this._updateAlternate(inst);
+		//If disabled option is true, disable the datepicker before showing it (see ticket #5665)
+		if( inst.settings.disabled ) {
+			this._disableDatepicker( target );
+		}
+		// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements
+		// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height
+		inst.dpDiv.css( "display", "block" );
+	},
+
+	/* Pop-up the date picker in a "dialog" box.
+	 * @param  input element - ignored
+	 * @param  date	string or Date - the initial date to display
+	 * @param  onSelect  function - the function to call when a date is selected
+	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
+	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
+	 *					event - with x/y coordinates or
+	 *					leave empty for default (screen centre)
+	 * @return the manager object
+	 */
+	_dialogDatepicker: function(input, date, onSelect, settings, pos) {
+		var id, browserWidth, browserHeight, scrollX, scrollY,
+			inst = this._dialogInst; // internal instance
+
+		if (!inst) {
+			this.uuid += 1;
+			id = "dp" + this.uuid;
+			this._dialogInput = $("<input type='text' id='" + id +
+				"' style='position: absolute; top: -100px; width: 0px;'/>");
+			this._dialogInput.keydown(this._doKeyDown);
+			$("body").append(this._dialogInput);
+			inst = this._dialogInst = this._newInst(this._dialogInput, false);
+			inst.settings = {};
+			$.data(this._dialogInput[0], "datepicker", inst);
+		}
+		datepicker_extendRemove(inst.settings, settings || {});
+		date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
+		this._dialogInput.val(date);
+
+		this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
+		if (!this._pos) {
+			browserWidth = document.documentElement.clientWidth;
+			browserHeight = document.documentElement.clientHeight;
+			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
+			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
+			this._pos = // should use actual width/height below
+				[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
+		}
+
+		// move input on screen for focus, but hidden behind dialog
+		this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
+		inst.settings.onSelect = onSelect;
+		this._inDialog = true;
+		this.dpDiv.addClass(this._dialogClass);
+		this._showDatepicker(this._dialogInput[0]);
+		if ($.blockUI) {
+			$.blockUI(this.dpDiv);
+		}
+		$.data(this._dialogInput[0], "datepicker", inst);
+		return this;
+	},
+
+	/* Detach a datepicker from its control.
+	 * @param  target	element - the target input field or division or span
+	 */
+	_destroyDatepicker: function(target) {
+		var nodeName,
+			$target = $(target),
+			inst = $.data(target, "datepicker");
+
+		if (!$target.hasClass(this.markerClassName)) {
+			return;
+		}
+
+		nodeName = target.nodeName.toLowerCase();
+		$.removeData(target, "datepicker");
+		if (nodeName === "input") {
+			inst.append.remove();
+			inst.trigger.remove();
+			$target.removeClass(this.markerClassName).
+				unbind("focus", this._showDatepicker).
+				unbind("keydown", this._doKeyDown).
+				unbind("keypress", this._doKeyPress).
+				unbind("keyup", this._doKeyUp);
+		} else if (nodeName === "div" || nodeName === "span") {
+			$target.removeClass(this.markerClassName).empty();
+		}
+
+		if ( datepicker_instActive === inst ) {
+			datepicker_instActive = null;
+		}
+	},
+
+	/* Enable the date picker to a jQuery selection.
+	 * @param  target	element - the target input field or division or span
+	 */
+	_enableDatepicker: function(target) {
+		var nodeName, inline,
+			$target = $(target),
+			inst = $.data(target, "datepicker");
+
+		if (!$target.hasClass(this.markerClassName)) {
+			return;
+		}
+
+		nodeName = target.nodeName.toLowerCase();
+		if (nodeName === "input") {
+			target.disabled = false;
+			inst.trigger.filter("button").
+				each(function() { this.disabled = false; }).end().
+				filter("img").css({opacity: "1.0", cursor: ""});
+		} else if (nodeName === "div" || nodeName === "span") {
+			inline = $target.children("." + this._inlineClass);
+			inline.children().removeClass("ui-state-disabled");
+			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
+				prop("disabled", false);
+		}
+		this._disabledInputs = $.map(this._disabledInputs,
+			function(value) { return (value === target ? null : value); }); // delete entry
+	},
+
+	/* Disable the date picker to a jQuery selection.
+	 * @param  target	element - the target input field or division or span
+	 */
+	_disableDatepicker: function(target) {
+		var nodeName, inline,
+			$target = $(target),
+			inst = $.data(target, "datepicker");
+
+		if (!$target.hasClass(this.markerClassName)) {
+			return;
+		}
+
+		nodeName = target.nodeName.toLowerCase();
+		if (nodeName === "input") {
+			target.disabled = true;
+			inst.trigger.filter("button").
+				each(function() { this.disabled = true; }).end().
+				filter("img").css({opacity: "0.5", cursor: "default"});
+		} else if (nodeName === "div" || nodeName === "span") {
+			inline = $target.children("." + this._inlineClass);
+			inline.children().addClass("ui-state-disabled");
+			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
+				prop("disabled", true);
+		}
+		this._disabledInputs = $.map(this._disabledInputs,
+			function(value) { return (value === target ? null : value); }); // delete entry
+		this._disabledInputs[this._disabledInputs.length] = target;
+	},
+
+	/* Is the first field in a jQuery collection disabled as a datepicker?
+	 * @param  target	element - the target input field or division or span
+	 * @return boolean - true if disabled, false if enabled
+	 */
+	_isDisabledDatepicker: function(target) {
+		if (!target) {
+			return false;
+		}
+		for (var i = 0; i < this._disabledInputs.length; i++) {
+			if (this._disabledInputs[i] === target) {
+				return true;
+			}
+		}
+		return false;
+	},
+
+	/* Retrieve the instance data for the target control.
+	 * @param  target  element - the target input field or division or span
+	 * @return  object - the associated instance data
+	 * @throws  error if a jQuery problem getting data
+	 */
+	_getInst: function(target) {
+		try {
+			return $.data(target, "datepicker");
+		}
+		catch (err) {
+			throw "Missing instance data for this datepicker";
+		}
+	},
+
+	/* Update or retrieve the settings for a date picker attached to an input field or division.
+	 * @param  target  element - the target input field or division or span
+	 * @param  name	object - the new settings to update or
+	 *				string - the name of the setting to change or retrieve,
+	 *				when retrieving also "all" for all instance settings or
+	 *				"defaults" for all global defaults
+	 * @param  value   any - the new value for the setting
+	 *				(omit if above is an object or to retrieve a value)
+	 */
+	_optionDatepicker: function(target, name, value) {
+		var settings, date, minDate, maxDate,
+			inst = this._getInst(target);
+
+		if (arguments.length === 2 && typeof name === "string") {
+			return (name === "defaults" ? $.extend({}, $.datepicker._defaults) :
+				(inst ? (name === "all" ? $.extend({}, inst.settings) :
+				this._get(inst, name)) : null));
+		}
+
+		settings = name || {};
+		if (typeof name === "string") {
+			settings = {};
+			settings[name] = value;
+		}
+
+		if (inst) {
+			if (this._curInst === inst) {
+				this._hideDatepicker();
+			}
+
+			date = this._getDateDatepicker(target, true);
+			minDate = this._getMinMaxDate(inst, "min");
+			maxDate = this._getMinMaxDate(inst, "max");
+			datepicker_extendRemove(inst.settings, settings);
+			// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided
+			if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
+				inst.settings.minDate = this._formatDate(inst, minDate);
+			}
+			if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
+				inst.settings.maxDate = this._formatDate(inst, maxDate);
+			}
+			if ( "disabled" in settings ) {
+				if ( settings.disabled ) {
+					this._disableDatepicker(target);
+				} else {
+					this._enableDatepicker(target);
+				}
+			}
+			this._attachments($(target), inst);
+			this._autoSize(inst);
+			this._setDate(inst, date);
+			this._updateAlternate(inst);
+			this._updateDatepicker(inst);
+		}
+	},
+
+	// change method deprecated
+	_changeDatepicker: function(target, name, value) {
+		this._optionDatepicker(target, name, value);
+	},
+
+	/* Redraw the date picker attached to an input field or division.
+	 * @param  target  element - the target input field or division or span
+	 */
+	_refreshDatepicker: function(target) {
+		var inst = this._getInst(target);
+		if (inst) {
+			this._updateDatepicker(inst);
+		}
+	},
+
+	/* Set the dates for a jQuery selection.
+	 * @param  target element - the target input field or division or span
+	 * @param  date	Date - the new date
+	 */
+	_setDateDatepicker: function(target, date) {
+		var inst = this._getInst(target);
+		if (inst) {
+			this._setDate(inst, date);
+			this._updateDatepicker(inst);
+			this._updateAlternate(inst);
+		}
+	},
+
+	/* Get the date(s) for the first entry in a jQuery selection.
+	 * @param  target element - the target input field or division or span
+	 * @param  noDefault boolean - true if no default date is to be used
+	 * @return Date - the current date
+	 */
+	_getDateDatepicker: function(target, noDefault) {
+		var inst = this._getInst(target);
+		if (inst && !inst.inline) {
+			this._setDateFromField(inst, noDefault);
+		}
+		return (inst ? this._getDate(inst) : null);
+	},
+
+	/* Handle keystrokes. */
+	_doKeyDown: function(event) {
+		var onSelect, dateStr, sel,
+			inst = $.datepicker._getInst(event.target),
+			handled = true,
+			isRTL = inst.dpDiv.is(".ui-datepicker-rtl");
+
+		inst._keyEvent = true;
+		if ($.datepicker._datepickerShowing) {
+			switch (event.keyCode) {
+				case 9: $.datepicker._hideDatepicker();
+						handled = false;
+						break; // hide on tab out
+				case 13: sel = $("td." + $.datepicker._dayOverClass + ":not(." +
+									$.datepicker._currentClass + ")", inst.dpDiv);
+						if (sel[0]) {
+							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
+						}
+
+						onSelect = $.datepicker._get(inst, "onSelect");
+						if (onSelect) {
+							dateStr = $.datepicker._formatDate(inst);
+
+							// trigger custom callback
+							onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
+						} else {
+							$.datepicker._hideDatepicker();
+						}
+
+						return false; // don't submit the form
+				case 27: $.datepicker._hideDatepicker();
+						break; // hide on escape
+				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
+							-$.datepicker._get(inst, "stepBigMonths") :
+							-$.datepicker._get(inst, "stepMonths")), "M");
+						break; // previous month/year on page up/+ ctrl
+				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
+							+$.datepicker._get(inst, "stepBigMonths") :
+							+$.datepicker._get(inst, "stepMonths")), "M");
+						break; // next month/year on page down/+ ctrl
+				case 35: if (event.ctrlKey || event.metaKey) {
+							$.datepicker._clearDate(event.target);
+						}
+						handled = event.ctrlKey || event.metaKey;
+						break; // clear on ctrl or command +end
+				case 36: if (event.ctrlKey || event.metaKey) {
+							$.datepicker._gotoToday(event.target);
+						}
+						handled = event.ctrlKey || event.metaKey;
+						break; // current on ctrl or command +home
+				case 37: if (event.ctrlKey || event.metaKey) {
+							$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
+						}
+						handled = event.ctrlKey || event.metaKey;
+						// -1 day on ctrl or command +left
+						if (event.originalEvent.altKey) {
+							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
+								-$.datepicker._get(inst, "stepBigMonths") :
+								-$.datepicker._get(inst, "stepMonths")), "M");
+						}
+						// next month/year on alt +left on Mac
+						break;
+				case 38: if (event.ctrlKey || event.metaKey) {
+							$.datepicker._adjustDate(event.target, -7, "D");
+						}
+						handled = event.ctrlKey || event.metaKey;
+						break; // -1 week on ctrl or command +up
+				case 39: if (event.ctrlKey || event.metaKey) {
+							$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
+						}
+						handled = event.ctrlKey || event.metaKey;
+						// +1 day on ctrl or command +right
+						if (event.originalEvent.altKey) {
+							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
+								+$.datepicker._get(inst, "stepBigMonths") :
+								+$.datepicker._get(inst, "stepMonths")), "M");
+						}
+						// next month/year on alt +right
+						break;
+				case 40: if (event.ctrlKey || event.metaKey) {
+							$.datepicker._adjustDate(event.target, +7, "D");
+						}
+						handled = event.ctrlKey || event.metaKey;
+						break; // +1 week on ctrl or command +down
+				default: handled = false;
+			}
+		} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home
+			$.datepicker._showDatepicker(this);
+		} else {
+			handled = false;
+		}
+
+		if (handled) {
+			event.preventDefault();
+			event.stopPropagation();
+		}
+	},
+
+	/* Filter entered characters - based on date format. */
+	_doKeyPress: function(event) {
+		var chars, chr,
+			inst = $.datepicker._getInst(event.target);
+
+		if ($.datepicker._get(inst, "constrainInput")) {
+			chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
+			chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
+			return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
+		}
+	},
+
+	/* Synchronise manual entry and field/alternate field. */
+	_doKeyUp: function(event) {
+		var date,
+			inst = $.datepicker._getInst(event.target);
+
+		if (inst.input.val() !== inst.lastVal) {
+			try {
+				date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
+					(inst.input ? inst.input.val() : null),
+					$.datepicker._getFormatConfig(inst));
+
+				if (date) { // only if valid
+					$.datepicker._setDateFromField(inst);
+					$.datepicker._updateAlternate(inst);
+					$.datepicker._updateDatepicker(inst);
+				}
+			}
+			catch (err) {
+			}
+		}
+		return true;
+	},
+
+	/* Pop-up the date picker for a given input field.
+	 * If false returned from beforeShow event handler do not show.
+	 * @param  input  element - the input field attached to the date picker or
+	 *					event - if triggered by focus
+	 */
+	_showDatepicker: function(input) {
+		input = input.target || input;
+		if (input.nodeName.toLowerCase() !== "input") { // find from button/image trigger
+			input = $("input", input.parentNode)[0];
+		}
+
+		if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
+			return;
+		}
+
+		var inst, beforeShow, beforeShowSettings, isFixed,
+			offset, showAnim, duration;
+
+		inst = $.datepicker._getInst(input);
+		if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
+			$.datepicker._curInst.dpDiv.stop(true, true);
+			if ( inst && $.datepicker._datepickerShowing ) {
+				$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
+			}
+		}
+
+		beforeShow = $.datepicker._get(inst, "beforeShow");
+		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
+		if(beforeShowSettings === false){
+			return;
+		}
+		datepicker_extendRemove(inst.settings, beforeShowSettings);
+
+		inst.lastVal = null;
+		$.datepicker._lastInput = input;
+		$.datepicker._setDateFromField(inst);
+
+		if ($.datepicker._inDialog) { // hide cursor
+			input.value = "";
+		}
+		if (!$.datepicker._pos) { // position below input
+			$.datepicker._pos = $.datepicker._findPos(input);
+			$.datepicker._pos[1] += input.offsetHeight; // add the height
+		}
+
+		isFixed = false;
+		$(input).parents().each(function() {
+			isFixed |= $(this).css("position") === "fixed";
+			return !isFixed;
+		});
+
+		offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
+		$.datepicker._pos = null;
+		//to avoid flashes on Firefox
+		inst.dpDiv.empty();
+		// determine sizing offscreen
+		inst.dpDiv.css({position: "absolute", display: "block", top: "-1000px"});
+		$.datepicker._updateDatepicker(inst);
+		// fix width for dynamic number of date pickers
+		// and adjust position before showing
+		offset = $.datepicker._checkOffset(inst, offset, isFixed);
+		inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?
+			"static" : (isFixed ? "fixed" : "absolute")), display: "none",
+			left: offset.left + "px", top: offset.top + "px"});
+
+		if (!inst.inline) {
+			showAnim = $.datepicker._get(inst, "showAnim");
+			duration = $.datepicker._get(inst, "duration");
+			inst.dpDiv.css( "z-index", datepicker_getZindex( $( input ) ) + 1 );
+			$.datepicker._datepickerShowing = true;
+
+			if ( $.effects && $.effects.effect[ showAnim ] ) {
+				inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
+			} else {
+				inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
+			}
+
+			if ( $.datepicker._shouldFocusInput( inst ) ) {
+				inst.input.focus();
+			}
+
+			$.datepicker._curInst = inst;
+		}
+	},
+
+	/* Generate the date picker content. */
+	_updateDatepicker: function(inst) {
+		this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)
+		datepicker_instActive = inst; // for delegate hover events
+		inst.dpDiv.empty().append(this._generateHTML(inst));
+		this._attachHandlers(inst);
+
+		var origyearshtml,
+			numMonths = this._getNumberOfMonths(inst),
+			cols = numMonths[1],
+			width = 17,
+			activeCell = inst.dpDiv.find( "." + this._dayOverClass + " a" );
+
+		if ( activeCell.length > 0 ) {
+			datepicker_handleMouseover.apply( activeCell.get( 0 ) );
+		}
+
+		inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
+		if (cols > 1) {
+			inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
+		}
+		inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") +
+			"Class"]("ui-datepicker-multi");
+		inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") +
+			"Class"]("ui-datepicker-rtl");
+
+		if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {
+			inst.input.focus();
+		}
+
+		// deffered render of the years select (to avoid flashes on Firefox)
+		if( inst.yearshtml ){
+			origyearshtml = inst.yearshtml;
+			setTimeout(function(){
+				//assure that inst.yearshtml didn't change.
+				if( origyearshtml === inst.yearshtml && inst.yearshtml ){
+					inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
+				}
+				origyearshtml = inst.yearshtml = null;
+			}, 0);
+		}
+	},
+
+	// #6694 - don't focus the input if it's already focused
+	// this breaks the change event in IE
+	// Support: IE and jQuery <1.9
+	_shouldFocusInput: function( inst ) {
+		return inst.input && inst.input.is( ":visible" ) && !inst.input.is( ":disabled" ) && !inst.input.is( ":focus" );
+	},
+
+	/* Check positioning to remain on screen. */
+	_checkOffset: function(inst, offset, isFixed) {
+		var dpWidth = inst.dpDiv.outerWidth(),
+			dpHeight = inst.dpDiv.outerHeight(),
+			inputWidth = inst.input ? inst.input.outerWidth() : 0,
+			inputHeight = inst.input ? inst.input.outerHeight() : 0,
+			viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
+			viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());
+
+		offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
+		offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
+		offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;
+
+		// now check if datepicker is showing outside window viewport - move to a better place if so.
+		offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
+			Math.abs(offset.left + dpWidth - viewWidth) : 0);
+		offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
+			Math.abs(dpHeight + inputHeight) : 0);
+
+		return offset;
+	},
+
+	/* Find an object's position on the screen. */
+	_findPos: function(obj) {
+		var position,
+			inst = this._getInst(obj),
+			isRTL = this._get(inst, "isRTL");
+
+		while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
+			obj = obj[isRTL ? "previousSibling" : "nextSibling"];
+		}
+
+		position = $(obj).offset();
+		return [position.left, position.top];
+	},
+
+	/* Hide the date picker from view.
+	 * @param  input  element - the input field attached to the date picker
+	 */
+	_hideDatepicker: function(input) {
+		var showAnim, duration, postProcess, onClose,
+			inst = this._curInst;
+
+		if (!inst || (input && inst !== $.data(input, "datepicker"))) {
+			return;
+		}
+
+		if (this._datepickerShowing) {
+			showAnim = this._get(inst, "showAnim");
+			duration = this._get(inst, "duration");
+			postProcess = function() {
+				$.datepicker._tidyDialog(inst);
+			};
+
+			// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed
+			if ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
+				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
+			} else {
+				inst.dpDiv[(showAnim === "slideDown" ? "slideUp" :
+					(showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
+			}
+
+			if (!showAnim) {
+				postProcess();
+			}
+			this._datepickerShowing = false;
+
+			onClose = this._get(inst, "onClose");
+			if (onClose) {
+				onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
+			}
+
+			this._lastInput = null;
+			if (this._inDialog) {
+				this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
+				if ($.blockUI) {
+					$.unblockUI();
+					$("body").append(this.dpDiv);
+				}
+			}
+			this._inDialog = false;
+		}
+	},
+
+	/* Tidy up after a dialog display. */
+	_tidyDialog: function(inst) {
+		inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
+	},
+
+	/* Close date picker if clicked elsewhere. */
+	_checkExternalClick: function(event) {
+		if (!$.datepicker._curInst) {
+			return;
+		}
+
+		var $target = $(event.target),
+			inst = $.datepicker._getInst($target[0]);
+
+		if ( ( ( $target[0].id !== $.datepicker._mainDivId &&
+				$target.parents("#" + $.datepicker._mainDivId).length === 0 &&
+				!$target.hasClass($.datepicker.markerClassName) &&
+				!$target.closest("." + $.datepicker._triggerClass).length &&
+				$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||
+			( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {
+				$.datepicker._hideDatepicker();
+		}
+	},
+
+	/* Adjust one of the date sub-fields. */
+	_adjustDate: function(id, offset, period) {
+		var target = $(id),
+			inst = this._getInst(target[0]);
+
+		if (this._isDisabledDatepicker(target[0])) {
+			return;
+		}
+		this._adjustInstDate(inst, offset +
+			(period === "M" ? this._get(inst, "showCurrentAtPos") : 0), // undo positioning
+			period);
+		this._updateDatepicker(inst);
+	},
+
+	/* Action for current link. */
+	_gotoToday: function(id) {
+		var date,
+			target = $(id),
+			inst = this._getInst(target[0]);
+
+		if (this._get(inst, "gotoCurrent") && inst.currentDay) {
+			inst.selectedDay = inst.currentDay;
+			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
+			inst.drawYear = inst.selectedYear = inst.currentYear;
+		} else {
+			date = new Date();
+			inst.selectedDay = date.getDate();
+			inst.drawMonth = inst.selectedMonth = date.getMonth();
+			inst.drawYear = inst.selectedYear = date.getFullYear();
+		}
+		this._notifyChange(inst);
+		this._adjustDate(target);
+	},
+
+	/* Action for selecting a new month/year. */
+	_selectMonthYear: function(id, select, period) {
+		var target = $(id),
+			inst = this._getInst(target[0]);
+
+		inst["selected" + (period === "M" ? "Month" : "Year")] =
+		inst["draw" + (period === "M" ? "Month" : "Year")] =
+			parseInt(select.options[select.selectedIndex].value,10);
+
+		this._notifyChange(inst);
+		this._adjustDate(target);
+	},
+
+	/* Action for selecting a day. */
+	_selectDay: function(id, month, year, td) {
+		var inst,
+			target = $(id);
+
+		if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
+			return;
+		}
+
+		inst = this._getInst(target[0]);
+		inst.selectedDay = inst.currentDay = $("a", td).html();
+		inst.selectedMonth = inst.currentMonth = month;
+		inst.selectedYear = inst.currentYear = year;
+		this._selectDate(id, this._formatDate(inst,
+			inst.currentDay, inst.currentMonth, inst.currentYear));
+	},
+
+	/* Erase the input field and hide the date picker. */
+	_clearDate: function(id) {
+		var target = $(id);
+		this._selectDate(target, "");
+	},
+
+	/* Update the input field with the selected date. */
+	_selectDate: function(id, dateStr) {
+		var onSelect,
+			target = $(id),
+			inst = this._getInst(target[0]);
+
+		dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
+		if (inst.input) {
+			inst.input.val(dateStr);
+		}
+		this._updateAlternate(inst);
+
+		onSelect = this._get(inst, "onSelect");
+		if (onSelect) {
+			onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
+		} else if (inst.input) {
+			inst.input.trigger("change"); // fire the change event
+		}
+
+		if (inst.inline){
+			this._updateDatepicker(inst);
+		} else {
+			this._hideDatepicker();
+			this._lastInput = inst.input[0];
+			if (typeof(inst.input[0]) !== "object") {
+				inst.input.focus(); // restore focus
+			}
+			this._lastInput = null;
+		}
+	},
+
+	/* Update any alternate field to synchronise with the main field. */
+	_updateAlternate: function(inst) {
+		var altFormat, date, dateStr,
+			altField = this._get(inst, "altField");
+
+		if (altField) { // update alternate field too
+			altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
+			date = this._getDate(inst);
+			dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
+			$(altField).each(function() { $(this).val(dateStr); });
+		}
+	},
+
+	/* Set as beforeShowDay function to prevent selection of weekends.
+	 * @param  date  Date - the date to customise
+	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
+	 */
+	noWeekends: function(date) {
+		var day = date.getDay();
+		return [(day > 0 && day < 6), ""];
+	},
+
+	/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
+	 * @param  date  Date - the date to get the week for
+	 * @return  number - the number of the week within the year that contains this date
+	 */
+	iso8601Week: function(date) {
+		var time,
+			checkDate = new Date(date.getTime());
+
+		// Find Thursday of this week starting on Monday
+		checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));
+
+		time = checkDate.getTime();
+		checkDate.setMonth(0); // Compare with Jan 1
+		checkDate.setDate(1);
+		return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
+	},
+
+	/* Parse a string value into a date object.
+	 * See formatDate below for the possible formats.
+	 *
+	 * @param  format string - the expected format of the date
+	 * @param  value string - the date in the above format
+	 * @param  settings Object - attributes include:
+	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
+	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
+	 *					dayNames		string[7] - names of the days from Sunday (optional)
+	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
+	 *					monthNames		string[12] - names of the months (optional)
+	 * @return  Date - the extracted date value or null if value is blank
+	 */
+	parseDate: function (format, value, settings) {
+		if (format == null || value == null) {
+			throw "Invalid arguments";
+		}
+
+		value = (typeof value === "object" ? value.toString() : value + "");
+		if (value === "") {
+			return null;
+		}
+
+		var iFormat, dim, extra,
+			iValue = 0,
+			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
+			shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp :
+				new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
+			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
+			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
+			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
+			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
+			year = -1,
+			month = -1,
+			day = -1,
+			doy = -1,
+			literal = false,
+			date,
+			// Check whether a format character is doubled
+			lookAhead = function(match) {
+				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
+				if (matches) {
+					iFormat++;
+				}
+				return matches;
+			},
+			// Extract a number from the string value
+			getNumber = function(match) {
+				var isDoubled = lookAhead(match),
+					size = (match === "@" ? 14 : (match === "!" ? 20 :
+					(match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))),
+					minSize = (match === "y" ? size : 1),
+					digits = new RegExp("^\\d{" + minSize + "," + size + "}"),
+					num = value.substring(iValue).match(digits);
+				if (!num) {
+					throw "Missing number at position " + iValue;
+				}
+				iValue += num[0].length;
+				return parseInt(num[0], 10);
+			},
+			// Extract a name from the string value and convert to an index
+			getName = function(match, shortNames, longNames) {
+				var index = -1,
+					names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
+						return [ [k, v] ];
+					}).sort(function (a, b) {
+						return -(a[1].length - b[1].length);
+					});
+
+				$.each(names, function (i, pair) {
+					var name = pair[1];
+					if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
+						index = pair[0];
+						iValue += name.length;
+						return false;
+					}
+				});
+				if (index !== -1) {
+					return index + 1;
+				} else {
+					throw "Unknown name at position " + iValue;
+				}
+			},
+			// Confirm that a literal character matches the string value
+			checkLiteral = function() {
+				if (value.charAt(iValue) !== format.charAt(iFormat)) {
+					throw "Unexpected literal at position " + iValue;
+				}
+				iValue++;
+			};
+
+		for (iFormat = 0; iFormat < format.length; iFormat++) {
+			if (literal) {
+				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
+					literal = false;
+				} else {
+					checkLiteral();
+				}
+			} else {
+				switch (format.charAt(iFormat)) {
+					case "d":
+						day = getNumber("d");
+						break;
+					case "D":
+						getName("D", dayNamesShort, dayNames);
+						break;
+					case "o":
+						doy = getNumber("o");
+						break;
+					case "m":
+						month = getNumber("m");
+						break;
+					case "M":
+						month = getName("M", monthNamesShort, monthNames);
+						break;
+					case "y":
+						year = getNumber("y");
+						break;
+					case "@":
+						date = new Date(getNumber("@"));
+						year = date.getFullYear();
+						month = date.getMonth() + 1;
+						day = date.getDate();
+						break;
+					case "!":
+						date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
+						year = date.getFullYear();
+						month = date.getMonth() + 1;
+						day = date.getDate();
+						break;
+					case "'":
+						if (lookAhead("'")){
+							checkLiteral();
+						} else {
+							literal = true;
+						}
+						break;
+					default:
+						checkLiteral();
+				}
+			}
+		}
+
+		if (iValue < value.length){
+			extra = value.substr(iValue);
+			if (!/^\s+/.test(extra)) {
+				throw "Extra/unparsed characters found in date: " + extra;
+			}
+		}
+
+		if (year === -1) {
+			year = new Date().getFullYear();
+		} else if (year < 100) {
+			year += new Date().getFullYear() - new Date().getFullYear() % 100 +
+				(year <= shortYearCutoff ? 0 : -100);
+		}
+
+		if (doy > -1) {
+			month = 1;
+			day = doy;
+			do {
+				dim = this._getDaysInMonth(year, month - 1);
+				if (day <= dim) {
+					break;
+				}
+				month++;
+				day -= dim;
+			} while (true);
+		}
+
+		date = this._daylightSavingAdjust(new Date(year, month - 1, day));
+		if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
+			throw "Invalid date"; // E.g. 31/02/00
+		}
+		return date;
+	},
+
+	/* Standard date formats. */
+	ATOM: "yy-mm-dd", // RFC 3339 (ISO 8601)
+	COOKIE: "D, dd M yy",
+	ISO_8601: "yy-mm-dd",
+	RFC_822: "D, d M y",
+	RFC_850: "DD, dd-M-y",
+	RFC_1036: "D, d M y",
+	RFC_1123: "D, d M yy",
+	RFC_2822: "D, d M yy",
+	RSS: "D, d M y", // RFC 822
+	TICKS: "!",
+	TIMESTAMP: "@",
+	W3C: "yy-mm-dd", // ISO 8601
+
+	_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
+		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),
+
+	/* Format a date object into a string value.
+	 * The format can be combinations of the following:
+	 * d  - day of month (no leading zero)
+	 * dd - day of month (two digit)
+	 * o  - day of year (no leading zeros)
+	 * oo - day of year (three digit)
+	 * D  - day name short
+	 * DD - day name long
+	 * m  - month of year (no leading zero)
+	 * mm - month of year (two digit)
+	 * M  - month name short
+	 * MM - month name long
+	 * y  - year (two digit)
+	 * yy - year (four digit)
+	 * @ - Unix timestamp (ms since 01/01/1970)
+	 * ! - Windows ticks (100ns since 01/01/0001)
+	 * "..." - literal text
+	 * '' - single quote
+	 *
+	 * @param  format string - the desired format of the date
+	 * @param  date Date - the date value to format
+	 * @param  settings Object - attributes include:
+	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
+	 *					dayNames		string[7] - names of the days from Sunday (optional)
+	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
+	 *					monthNames		string[12] - names of the months (optional)
+	 * @return  string - the date in the above format
+	 */
+	formatDate: function (format, date, settings) {
+		if (!date) {
+			return "";
+		}
+
+		var iFormat,
+			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
+			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
+			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
+			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
+			// Check whether a format character is doubled
+			lookAhead = function(match) {
+				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
+				if (matches) {
+					iFormat++;
+				}
+				return matches;
+			},
+			// Format a number, with leading zero if necessary
+			formatNumber = function(match, value, len) {
+				var num = "" + value;
+				if (lookAhead(match)) {
+					while (num.length < len) {
+						num = "0" + num;
+					}
+				}
+				return num;
+			},
+			// Format a name, short or long as requested
+			formatName = function(match, value, shortNames, longNames) {
+				return (lookAhead(match) ? longNames[value] : shortNames[value]);
+			},
+			output = "",
+			literal = false;
+
+		if (date) {
+			for (iFormat = 0; iFormat < format.length; iFormat++) {
+				if (literal) {
+					if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
+						literal = false;
+					} else {
+						output += format.charAt(iFormat);
+					}
+				} else {
+					switch (format.charAt(iFormat)) {
+						case "d":
+							output += formatNumber("d", date.getDate(), 2);
+							break;
+						case "D":
+							output += formatName("D", date.getDay(), dayNamesShort, dayNames);
+							break;
+						case "o":
+							output += formatNumber("o",
+								Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
+							break;
+						case "m":
+							output += formatNumber("m", date.getMonth() + 1, 2);
+							break;
+						case "M":
+							output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
+							break;
+						case "y":
+							output += (lookAhead("y") ? date.getFullYear() :
+								(date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
+							break;
+						case "@":
+							output += date.getTime();
+							break;
+						case "!":
+							output += date.getTime() * 10000 + this._ticksTo1970;
+							break;
+						case "'":
+							if (lookAhead("'")) {
+								output += "'";
+							} else {
+								literal = true;
+							}
+							break;
+						default:
+							output += format.charAt(iFormat);
+					}
+				}
+			}
+		}
+		return output;
+	},
+
+	/* Extract all possible characters from the date format. */
+	_possibleChars: function (format) {
+		var iFormat,
+			chars = "",
+			literal = false,
+			// Check whether a format character is doubled
+			lookAhead = function(match) {
+				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
+				if (matches) {
+					iFormat++;
+				}
+				return matches;
+			};
+
+		for (iFormat = 0; iFormat < format.length; iFormat++) {
+			if (literal) {
+				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
+					literal = false;
+				} else {
+					chars += format.charAt(iFormat);
+				}
+			} else {
+				switch (format.charAt(iFormat)) {
+					case "d": case "m": case "y": case "@":
+						chars += "0123456789";
+						break;
+					case "D": case "M":
+						return null; // Accept anything
+					case "'":
+						if (lookAhead("'")) {
+							chars += "'";
+						} else {
+							literal = true;
+						}
+						break;
+					default:
+						chars += format.charAt(iFormat);
+				}
+			}
+		}
+		return chars;
+	},
+
+	/* Get a setting value, defaulting if necessary. */
+	_get: function(inst, name) {
+		return inst.settings[name] !== undefined ?
+			inst.settings[name] : this._defaults[name];
+	},
+
+	/* Parse existing date and initialise date picker. */
+	_setDateFromField: function(inst, noDefault) {
+		if (inst.input.val() === inst.lastVal) {
+			return;
+		}
+
+		var dateFormat = this._get(inst, "dateFormat"),
+			dates = inst.lastVal = inst.input ? inst.input.val() : null,
+			defaultDate = this._getDefaultDate(inst),
+			date = defaultDate,
+			settings = this._getFormatConfig(inst);
+
+		try {
+			date = this.parseDate(dateFormat, dates, settings) || defaultDate;
+		} catch (event) {
+			dates = (noDefault ? "" : dates);
+		}
+		inst.selectedDay = date.getDate();
+		inst.drawMonth = inst.selectedMonth = date.getMonth();
+		inst.drawYear = inst.selectedYear = date.getFullYear();
+		inst.currentDay = (dates ? date.getDate() : 0);
+		inst.currentMonth = (dates ? date.getMonth() : 0);
+		inst.currentYear = (dates ? date.getFullYear() : 0);
+		this._adjustInstDate(inst);
+	},
+
+	/* Retrieve the default date shown on opening. */
+	_getDefaultDate: function(inst) {
+		return this._restrictMinMax(inst,
+			this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
+	},
+
+	/* A date may be specified as an exact value or a relative one. */
+	_determineDate: function(inst, date, defaultDate) {
+		var offsetNumeric = function(offset) {
+				var date = new Date();
+				date.setDate(date.getDate() + offset);
+				return date;
+			},
+			offsetString = function(offset) {
+				try {
+					return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
+						offset, $.datepicker._getFormatConfig(inst));
+				}
+				catch (e) {
+					// Ignore
+				}
+
+				var date = (offset.toLowerCase().match(/^c/) ?
+					$.datepicker._getDate(inst) : null) || new Date(),
+					year = date.getFullYear(),
+					month = date.getMonth(),
+					day = date.getDate(),
+					pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
+					matches = pattern.exec(offset);
+
+				while (matches) {
+					switch (matches[2] || "d") {
+						case "d" : case "D" :
+							day += parseInt(matches[1],10); break;
+						case "w" : case "W" :
+							day += parseInt(matches[1],10) * 7; break;
+						case "m" : case "M" :
+							month += parseInt(matches[1],10);
+							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
+							break;
+						case "y": case "Y" :
+							year += parseInt(matches[1],10);
+							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
+							break;
+					}
+					matches = pattern.exec(offset);
+				}
+				return new Date(year, month, day);
+			},
+			newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) :
+				(typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));
+
+		newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
+		if (newDate) {
+			newDate.setHours(0);
+			newDate.setMinutes(0);
+			newDate.setSeconds(0);
+			newDate.setMilliseconds(0);
+		}
+		return this._daylightSavingAdjust(newDate);
+	},
+
+	/* Handle switch to/from daylight saving.
+	 * Hours may be non-zero on daylight saving cut-over:
+	 * > 12 when midnight changeover, but then cannot generate
+	 * midnight datetime, so jump to 1AM, otherwise reset.
+	 * @param  date  (Date) the date to check
+	 * @return  (Date) the corrected date
+	 */
+	_daylightSavingAdjust: function(date) {
+		if (!date) {
+			return null;
+		}
+		date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
+		return date;
+	},
+
+	/* Set the date(s) directly. */
+	_setDate: function(inst, date, noChange) {
+		var clear = !date,
+			origMonth = inst.selectedMonth,
+			origYear = inst.selectedYear,
+			newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));
+
+		inst.selectedDay = inst.currentDay = newDate.getDate();
+		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
+		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
+		if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
+			this._notifyChange(inst);
+		}
+		this._adjustInstDate(inst);
+		if (inst.input) {
+			inst.input.val(clear ? "" : this._formatDate(inst));
+		}
+	},
+
+	/* Retrieve the date(s) directly. */
+	_getDate: function(inst) {
+		var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null :
+			this._daylightSavingAdjust(new Date(
+			inst.currentYear, inst.currentMonth, inst.currentDay)));
+			return startDate;
+	},
+
+	/* Attach the onxxx handlers.  These are declared statically so
+	 * they work with static code transformers like Caja.
+	 */
+	_attachHandlers: function(inst) {
+		var stepMonths = this._get(inst, "stepMonths"),
+			id = "#" + inst.id.replace( /\\\\/g, "\\" );
+		inst.dpDiv.find("[data-handler]").map(function () {
+			var handler = {
+				prev: function () {
+					$.datepicker._adjustDate(id, -stepMonths, "M");
+				},
+				next: function () {
+					$.datepicker._adjustDate(id, +stepMonths, "M");
+				},
+				hide: function () {
+					$.datepicker._hideDatepicker();
+				},
+				today: function () {
+					$.datepicker._gotoToday(id);
+				},
+				selectDay: function () {
+					$.datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
+					return false;
+				},
+				selectMonth: function () {
+					$.datepicker._selectMonthYear(id, this, "M");
+					return false;
+				},
+				selectYear: function () {
+					$.datepicker._selectMonthYear(id, this, "Y");
+					return false;
+				}
+			};
+			$(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
+		});
+	},
+
+	/* Generate the HTML for the current state of the date picker. */
+	_generateHTML: function(inst) {
+		var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
+			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
+			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
+			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
+			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
+			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
+			tempDate = new Date(),
+			today = this._daylightSavingAdjust(
+				new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time
+			isRTL = this._get(inst, "isRTL"),
+			showButtonPanel = this._get(inst, "showButtonPanel"),
+			hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"),
+			navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"),
+			numMonths = this._getNumberOfMonths(inst),
+			showCurrentAtPos = this._get(inst, "showCurrentAtPos"),
+			stepMonths = this._get(inst, "stepMonths"),
+			isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
+			currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :
+				new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),
+			minDate = this._getMinMaxDate(inst, "min"),
+			maxDate = this._getMinMaxDate(inst, "max"),
+			drawMonth = inst.drawMonth - showCurrentAtPos,
+			drawYear = inst.drawYear;
+
+		if (drawMonth < 0) {
+			drawMonth += 12;
+			drawYear--;
+		}
+		if (maxDate) {
+			maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
+				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
+			maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
+			while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
+				drawMonth--;
+				if (drawMonth < 0) {
+					drawMonth = 11;
+					drawYear--;
+				}
+			}
+		}
+		inst.drawMonth = drawMonth;
+		inst.drawYear = drawYear;
+
+		prevText = this._get(inst, "prevText");
+		prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
+			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
+			this._getFormatConfig(inst)));
+
+		prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
+			"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" +
+			" title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" :
+			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+ prevText +"'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));
+
+		nextText = this._get(inst, "nextText");
+		nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
+			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
+			this._getFormatConfig(inst)));
+
+		next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
+			"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" +
+			" title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" :
+			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));
+
+		currentText = this._get(inst, "currentText");
+		gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
+		currentText = (!navigationAsDateFormat ? currentText :
+			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));
+
+		controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
+			this._get(inst, "closeText") + "</button>" : "");
+
+		buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") +
+			(this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" +
+			">" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";
+
+		firstDay = parseInt(this._get(inst, "firstDay"),10);
+		firstDay = (isNaN(firstDay) ? 0 : firstDay);
+
+		showWeek = this._get(inst, "showWeek");
+		dayNames = this._get(inst, "dayNames");
+		dayNamesMin = this._get(inst, "dayNamesMin");
+		monthNames = this._get(inst, "monthNames");
+		monthNamesShort = this._get(inst, "monthNamesShort");
+		beforeShowDay = this._get(inst, "beforeShowDay");
+		showOtherMonths = this._get(inst, "showOtherMonths");
+		selectOtherMonths = this._get(inst, "selectOtherMonths");
+		defaultDate = this._getDefaultDate(inst);
+		html = "";
+		dow;
+		for (row = 0; row < numMonths[0]; row++) {
+			group = "";
+			this.maxRows = 4;
+			for (col = 0; col < numMonths[1]; col++) {
+				selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
+				cornerClass = " ui-corner-all";
+				calender = "";
+				if (isMultiMonth) {
+					calender += "<div class='ui-datepicker-group";
+					if (numMonths[1] > 1) {
+						switch (col) {
+							case 0: calender += " ui-datepicker-group-first";
+								cornerClass = " ui-corner-" + (isRTL ? "right" : "left"); break;
+							case numMonths[1]-1: calender += " ui-datepicker-group-last";
+								cornerClass = " ui-corner-" + (isRTL ? "left" : "right"); break;
+							default: calender += " ui-datepicker-group-middle"; cornerClass = ""; break;
+						}
+					}
+					calender += "'>";
+				}
+				calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" +
+					(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") +
+					(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") +
+					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
+					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
+					"</div><table class='ui-datepicker-calendar'><thead>" +
+					"<tr>";
+				thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
+				for (dow = 0; dow < 7; dow++) { // days of the week
+					day = (dow + firstDay) % 7;
+					thead += "<th scope='col'" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" +
+						"<span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
+				}
+				calender += thead + "</tr></thead><tbody>";
+				daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
+				if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
+					inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
+				}
+				leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
+				curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
+				numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)
+				this.maxRows = numRows;
+				printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
+				for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows
+					calender += "<tr>";
+					tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" +
+						this._get(inst, "calculateWeek")(printDate) + "</td>");
+					for (dow = 0; dow < 7; dow++) { // create date picker days
+						daySettings = (beforeShowDay ?
+							beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
+						otherMonth = (printDate.getMonth() !== drawMonth);
+						unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
+							(minDate && printDate < minDate) || (maxDate && printDate > maxDate);
+						tbody += "<td class='" +
+							((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + // highlight weekends
+							(otherMonth ? " ui-datepicker-other-month" : "") + // highlight days from other months
+							((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key
+							(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?
+							// or defaultDate is current printedDate and defaultDate is selectedDate
+							" " + this._dayOverClass : "") + // highlight selected day
+							(unselectable ? " " + this._unselectableClass + " ui-state-disabled": "") +  // highlight unselectable days
+							(otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + // highlight custom dates
+							(printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + // highlight selected day
+							(printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + // highlight today (if different)
+							((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2].replace(/'/g, "&#39;") + "'" : "") + // cell title
+							(unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + // actions
+							(otherMonth && !showOtherMonths ? "&#xa0;" : // display for other months
+							(unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" +
+							(printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") +
+							(printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + // highlight selected day
+							(otherMonth ? " ui-priority-secondary" : "") + // distinguish dates from other months
+							"' href='#'>" + printDate.getDate() + "</a>")) + "</td>"; // display selectable date
+						printDate.setDate(printDate.getDate() + 1);
+						printDate = this._daylightSavingAdjust(printDate);
+					}
+					calender += tbody + "</tr>";
+				}
+				drawMonth++;
+				if (drawMonth > 11) {
+					drawMonth = 0;
+					drawYear++;
+				}
+				calender += "</tbody></table>" + (isMultiMonth ? "</div>" +
+							((numMonths[0] > 0 && col === numMonths[1]-1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
+				group += calender;
+			}
+			html += group;
+		}
+		html += buttonPanel;
+		inst._keyEvent = false;
+		return html;
+	},
+
+	/* Generate the month and year header. */
+	_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
+			secondary, monthNames, monthNamesShort) {
+
+		var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
+			changeMonth = this._get(inst, "changeMonth"),
+			changeYear = this._get(inst, "changeYear"),
+			showMonthAfterYear = this._get(inst, "showMonthAfterYear"),
+			html = "<div class='ui-datepicker-title'>",
+			monthHtml = "";
+
+		// month selection
+		if (secondary || !changeMonth) {
+			monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
+		} else {
+			inMinYear = (minDate && minDate.getFullYear() === drawYear);
+			inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
+			monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
+			for ( month = 0; month < 12; month++) {
+				if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
+					monthHtml += "<option value='" + month + "'" +
+						(month === drawMonth ? " selected='selected'" : "") +
+						">" + monthNamesShort[month] + "</option>";
+				}
+			}
+			monthHtml += "</select>";
+		}
+
+		if (!showMonthAfterYear) {
+			html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
+		}
+
+		// year selection
+		if ( !inst.yearshtml ) {
+			inst.yearshtml = "";
+			if (secondary || !changeYear) {
+				html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
+			} else {
+				// determine range of years to display
+				years = this._get(inst, "yearRange").split(":");
+				thisYear = new Date().getFullYear();
+				determineYear = function(value) {
+					var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
+						(value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
+						parseInt(value, 10)));
+					return (isNaN(year) ? thisYear : year);
+				};
+				year = determineYear(years[0]);
+				endYear = Math.max(year, determineYear(years[1] || ""));
+				year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
+				endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
+				inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
+				for (; year <= endYear; year++) {
+					inst.yearshtml += "<option value='" + year + "'" +
+						(year === drawYear ? " selected='selected'" : "") +
+						">" + year + "</option>";
+				}
+				inst.yearshtml += "</select>";
+
+				html += inst.yearshtml;
+				inst.yearshtml = null;
+			}
+		}
+
+		html += this._get(inst, "yearSuffix");
+		if (showMonthAfterYear) {
+			html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
+		}
+		html += "</div>"; // Close datepicker_header
+		return html;
+	},
+
+	/* Adjust one of the date sub-fields. */
+	_adjustInstDate: function(inst, offset, period) {
+		var year = inst.drawYear + (period === "Y" ? offset : 0),
+			month = inst.drawMonth + (period === "M" ? offset : 0),
+			day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0),
+			date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));
+
+		inst.selectedDay = date.getDate();
+		inst.drawMonth = inst.selectedMonth = date.getMonth();
+		inst.drawYear = inst.selectedYear = date.getFullYear();
+		if (period === "M" || period === "Y") {
+			this._notifyChange(inst);
+		}
+	},
+
+	/* Ensure a date is within any min/max bounds. */
+	_restrictMinMax: function(inst, date) {
+		var minDate = this._getMinMaxDate(inst, "min"),
+			maxDate = this._getMinMaxDate(inst, "max"),
+			newDate = (minDate && date < minDate ? minDate : date);
+		return (maxDate && newDate > maxDate ? maxDate : newDate);
+	},
+
+	/* Notify change of month/year. */
+	_notifyChange: function(inst) {
+		var onChange = this._get(inst, "onChangeMonthYear");
+		if (onChange) {
+			onChange.apply((inst.input ? inst.input[0] : null),
+				[inst.selectedYear, inst.selectedMonth + 1, inst]);
+		}
+	},
+
+	/* Determine the number of months to show. */
+	_getNumberOfMonths: function(inst) {
+		var numMonths = this._get(inst, "numberOfMonths");
+		return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
+	},
+
+	/* Determine the current maximum date - ensure no time components are set. */
+	_getMinMaxDate: function(inst, minMax) {
+		return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
+	},
+
+	/* Find the number of days in a given month. */
+	_getDaysInMonth: function(year, month) {
+		return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
+	},
+
+	/* Find the day of the week of the first of a month. */
+	_getFirstDayOfMonth: function(year, month) {
+		return new Date(year, month, 1).getDay();
+	},
+
+	/* Determines if we should allow a "next/prev" month display change. */
+	_canAdjustMonth: function(inst, offset, curYear, curMonth) {
+		var numMonths = this._getNumberOfMonths(inst),
+			date = this._daylightSavingAdjust(new Date(curYear,
+			curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));
+
+		if (offset < 0) {
+			date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
+		}
+		return this._isInRange(inst, date);
+	},
+
+	/* Is the given date in the accepted range? */
+	_isInRange: function(inst, date) {
+		var yearSplit, currentYear,
+			minDate = this._getMinMaxDate(inst, "min"),
+			maxDate = this._getMinMaxDate(inst, "max"),
+			minYear = null,
+			maxYear = null,
+			years = this._get(inst, "yearRange");
+			if (years){
+				yearSplit = years.split(":");
+				currentYear = new Date().getFullYear();
+				minYear = parseInt(yearSplit[0], 10);
+				maxYear = parseInt(yearSplit[1], 10);
+				if ( yearSplit[0].match(/[+\-].*/) ) {
+					minYear += currentYear;
+				}
+				if ( yearSplit[1].match(/[+\-].*/) ) {
+					maxYear += currentYear;
+				}
+			}
+
+		return ((!minDate || date.getTime() >= minDate.getTime()) &&
+			(!maxDate || date.getTime() <= maxDate.getTime()) &&
+			(!minYear || date.getFullYear() >= minYear) &&
+			(!maxYear || date.getFullYear() <= maxYear));
+	},
+
+	/* Provide the configuration settings for formatting/parsing. */
+	_getFormatConfig: function(inst) {
+		var shortYearCutoff = this._get(inst, "shortYearCutoff");
+		shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff :
+			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
+		return {shortYearCutoff: shortYearCutoff,
+			dayNamesShort: this._get(inst, "dayNamesShort"), dayNames: this._get(inst, "dayNames"),
+			monthNamesShort: this._get(inst, "monthNamesShort"), monthNames: this._get(inst, "monthNames")};
+	},
+
+	/* Format the given date for display. */
+	_formatDate: function(inst, day, month, year) {
+		if (!day) {
+			inst.currentDay = inst.selectedDay;
+			inst.currentMonth = inst.selectedMonth;
+			inst.currentYear = inst.selectedYear;
+		}
+		var date = (day ? (typeof day === "object" ? day :
+			this._daylightSavingAdjust(new Date(year, month, day))) :
+			this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
+		return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
+	}
+});
+
+/*
+ * Bind hover events for datepicker elements.
+ * Done via delegate so the binding only occurs once in the lifetime of the parent div.
+ * Global datepicker_instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
+ */
+function datepicker_bindHover(dpDiv) {
+	var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
+	return dpDiv.delegate(selector, "mouseout", function() {
+			$(this).removeClass("ui-state-hover");
+			if (this.className.indexOf("ui-datepicker-prev") !== -1) {
+				$(this).removeClass("ui-datepicker-prev-hover");
+			}
+			if (this.className.indexOf("ui-datepicker-next") !== -1) {
+				$(this).removeClass("ui-datepicker-next-hover");
+			}
+		})
+		.delegate( selector, "mouseover", datepicker_handleMouseover );
+}
+
+function datepicker_handleMouseover() {
+	if (!$.datepicker._isDisabledDatepicker( datepicker_instActive.inline? datepicker_instActive.dpDiv.parent()[0] : datepicker_instActive.input[0])) {
+		$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
+		$(this).addClass("ui-state-hover");
+		if (this.className.indexOf("ui-datepicker-prev") !== -1) {
+			$(this).addClass("ui-datepicker-prev-hover");
+		}
+		if (this.className.indexOf("ui-datepicker-next") !== -1) {
+			$(this).addClass("ui-datepicker-next-hover");
+		}
+	}
+}
+
+/* jQuery extend now ignores nulls! */
+function datepicker_extendRemove(target, props) {
+	$.extend(target, props);
+	for (var name in props) {
+		if (props[name] == null) {
+			target[name] = props[name];
+		}
+	}
+	return target;
+}
+
+/* Invoke the datepicker functionality.
+   @param  options  string - a command, optionally followed by additional parameters or
+					Object - settings for attaching new datepicker functionality
+   @return  jQuery object */
+$.fn.datepicker = function(options){
+
+	/* Verify an empty collection wasn't passed - Fixes #6976 */
+	if ( !this.length ) {
+		return this;
+	}
+
+	/* Initialise the date picker. */
+	if (!$.datepicker.initialized) {
+		$(document).mousedown($.datepicker._checkExternalClick);
+		$.datepicker.initialized = true;
+	}
+
+	/* Append datepicker main container to body if not exist. */
+	if ($("#"+$.datepicker._mainDivId).length === 0) {
+		$("body").append($.datepicker.dpDiv);
+	}
+
+	var otherArgs = Array.prototype.slice.call(arguments, 1);
+	if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
+		return $.datepicker["_" + options + "Datepicker"].
+			apply($.datepicker, [this[0]].concat(otherArgs));
+	}
+	if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
+		return $.datepicker["_" + options + "Datepicker"].
+			apply($.datepicker, [this[0]].concat(otherArgs));
+	}
+	return this.each(function() {
+		typeof options === "string" ?
+			$.datepicker["_" + options + "Datepicker"].
+				apply($.datepicker, [this].concat(otherArgs)) :
+			$.datepicker._attachDatepicker(this, options);
+	});
+};
+
+$.datepicker = new Datepicker(); // singleton instance
+$.datepicker.initialized = false;
+$.datepicker.uuid = new Date().getTime();
+$.datepicker.version = "1.11.4";
+
+var datepicker = $.datepicker;
+
+
+/*!
+ * jQuery UI Draggable 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/draggable/
+ */
+
+
+$.widget("ui.draggable", $.ui.mouse, {
+	version: "1.11.4",
+	widgetEventPrefix: "drag",
+	options: {
+		addClasses: true,
+		appendTo: "parent",
+		axis: false,
+		connectToSortable: false,
+		containment: false,
+		cursor: "auto",
+		cursorAt: false,
+		grid: false,
+		handle: false,
+		helper: "original",
+		iframeFix: false,
+		opacity: false,
+		refreshPositions: false,
+		revert: false,
+		revertDuration: 500,
+		scope: "default",
+		scroll: true,
+		scrollSensitivity: 20,
+		scrollSpeed: 20,
+		snap: false,
+		snapMode: "both",
+		snapTolerance: 20,
+		stack: false,
+		zIndex: false,
+
+		// callbacks
+		drag: null,
+		start: null,
+		stop: null
+	},
+	_create: function() {
+
+		if ( this.options.helper === "original" ) {
+			this._setPositionRelative();
+		}
+		if (this.options.addClasses){
+			this.element.addClass("ui-draggable");
+		}
+		if (this.options.disabled){
+			this.element.addClass("ui-draggable-disabled");
+		}
+		this._setHandleClassName();
+
+		this._mouseInit();
+	},
+
+	_setOption: function( key, value ) {
+		this._super( key, value );
+		if ( key === "handle" ) {
+			this._removeHandleClassName();
+			this._setHandleClassName();
+		}
+	},
+
+	_destroy: function() {
+		if ( ( this.helper || this.element ).is( ".ui-draggable-dragging" ) ) {
+			this.destroyOnClear = true;
+			return;
+		}
+		this.element.removeClass( "ui-draggable ui-draggable-dragging ui-draggable-disabled" );
+		this._removeHandleClassName();
+		this._mouseDestroy();
+	},
+
+	_mouseCapture: function(event) {
+		var o = this.options;
+
+		this._blurActiveElement( event );
+
+		// among others, prevent a drag on a resizable-handle
+		if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
+			return false;
+		}
+
+		//Quit if we're not on a valid handle
+		this.handle = this._getHandle(event);
+		if (!this.handle) {
+			return false;
+		}
+
+		this._blockFrames( o.iframeFix === true ? "iframe" : o.iframeFix );
+
+		return true;
+
+	},
+
+	_blockFrames: function( selector ) {
+		this.iframeBlocks = this.document.find( selector ).map(function() {
+			var iframe = $( this );
+
+			return $( "<div>" )
+				.css( "position", "absolute" )
+				.appendTo( iframe.parent() )
+				.outerWidth( iframe.outerWidth() )
+				.outerHeight( iframe.outerHeight() )
+				.offset( iframe.offset() )[ 0 ];
+		});
+	},
+
+	_unblockFrames: function() {
+		if ( this.iframeBlocks ) {
+			this.iframeBlocks.remove();
+			delete this.iframeBlocks;
+		}
+	},
+
+	_blurActiveElement: function( event ) {
+		var document = this.document[ 0 ];
+
+		// Only need to blur if the event occurred on the draggable itself, see #10527
+		if ( !this.handleElement.is( event.target ) ) {
+			return;
+		}
+
+		// support: IE9
+		// IE9 throws an "Unspecified error" accessing document.activeElement from an <iframe>
+		try {
+
+			// Support: IE9, IE10
+			// If the <body> is blurred, IE will switch windows, see #9520
+			if ( document.activeElement && document.activeElement.nodeName.toLowerCase() !== "body" ) {
+
+				// Blur any element that currently has focus, see #4261
+				$( document.activeElement ).blur();
+			}
+		} catch ( error ) {}
+	},
+
+	_mouseStart: function(event) {
+
+		var o = this.options;
+
+		//Create and append the visible helper
+		this.helper = this._createHelper(event);
+
+		this.helper.addClass("ui-draggable-dragging");
+
+		//Cache the helper size
+		this._cacheHelperProportions();
+
+		//If ddmanager is used for droppables, set the global draggable
+		if ($.ui.ddmanager) {
+			$.ui.ddmanager.current = this;
+		}
+
+		/*
+		 * - Position generation -
+		 * This block generates everything position related - it's the core of draggables.
+		 */
+
+		//Cache the margins of the original element
+		this._cacheMargins();
+
+		//Store the helper's css position
+		this.cssPosition = this.helper.css( "position" );
+		this.scrollParent = this.helper.scrollParent( true );
+		this.offsetParent = this.helper.offsetParent();
+		this.hasFixedAncestor = this.helper.parents().filter(function() {
+				return $( this ).css( "position" ) === "fixed";
+			}).length > 0;
+
+		//The element's absolute position on the page minus margins
+		this.positionAbs = this.element.offset();
+		this._refreshOffsets( event );
+
+		//Generate the original position
+		this.originalPosition = this.position = this._generatePosition( event, false );
+		this.originalPageX = event.pageX;
+		this.originalPageY = event.pageY;
+
+		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
+		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
+
+		//Set a containment if given in the options
+		this._setContainment();
+
+		//Trigger event + callbacks
+		if (this._trigger("start", event) === false) {
+			this._clear();
+			return false;
+		}
+
+		//Recache the helper size
+		this._cacheHelperProportions();
+
+		//Prepare the droppable offsets
+		if ($.ui.ddmanager && !o.dropBehaviour) {
+			$.ui.ddmanager.prepareOffsets(this, event);
+		}
+
+		// Reset helper's right/bottom css if they're set and set explicit width/height instead
+		// as this prevents resizing of elements with right/bottom set (see #7772)
+		this._normalizeRightBottom();
+
+		this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position
+
+		//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
+		if ( $.ui.ddmanager ) {
+			$.ui.ddmanager.dragStart(this, event);
+		}
+
+		return true;
+	},
+
+	_refreshOffsets: function( event ) {
+		this.offset = {
+			top: this.positionAbs.top - this.margins.top,
+			left: this.positionAbs.left - this.margins.left,
+			scroll: false,
+			parent: this._getParentOffset(),
+			relative: this._getRelativeOffset()
+		};
+
+		this.offset.click = {
+			left: event.pageX - this.offset.left,
+			top: event.pageY - this.offset.top
+		};
+	},
+
+	_mouseDrag: function(event, noPropagation) {
+		// reset any necessary cached properties (see #5009)
+		if ( this.hasFixedAncestor ) {
+			this.offset.parent = this._getParentOffset();
+		}
+
+		//Compute the helpers position
+		this.position = this._generatePosition( event, true );
+		this.positionAbs = this._convertPositionTo("absolute");
+
+		//Call plugins and callbacks and use the resulting position if something is returned
+		if (!noPropagation) {
+			var ui = this._uiHash();
+			if (this._trigger("drag", event, ui) === false) {
+				this._mouseUp({});
+				return false;
+			}
+			this.position = ui.position;
+		}
+
+		this.helper[ 0 ].style.left = this.position.left + "px";
+		this.helper[ 0 ].style.top = this.position.top + "px";
+
+		if ($.ui.ddmanager) {
+			$.ui.ddmanager.drag(this, event);
+		}
+
+		return false;
+	},
+
+	_mouseStop: function(event) {
+
+		//If we are using droppables, inform the manager about the drop
+		var that = this,
+			dropped = false;
+		if ($.ui.ddmanager && !this.options.dropBehaviour) {
+			dropped = $.ui.ddmanager.drop(this, event);
+		}
+
+		//if a drop comes from outside (a sortable)
+		if (this.dropped) {
+			dropped = this.dropped;
+			this.dropped = false;
+		}
+
+		if ((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
+			$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
+				if (that._trigger("stop", event) !== false) {
+					that._clear();
+				}
+			});
+		} else {
+			if (this._trigger("stop", event) !== false) {
+				this._clear();
+			}
+		}
+
+		return false;
+	},
+
+	_mouseUp: function( event ) {
+		this._unblockFrames();
+
+		//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)
+		if ( $.ui.ddmanager ) {
+			$.ui.ddmanager.dragStop(this, event);
+		}
+
+		// Only need to focus if the event occurred on the draggable itself, see #10527
+		if ( this.handleElement.is( event.target ) ) {
+			// The interaction is over; whether or not the click resulted in a drag, focus the element
+			this.element.focus();
+		}
+
+		return $.ui.mouse.prototype._mouseUp.call(this, event);
+	},
+
+	cancel: function() {
+
+		if (this.helper.is(".ui-draggable-dragging")) {
+			this._mouseUp({});
+		} else {
+			this._clear();
+		}
+
+		return this;
+
+	},
+
+	_getHandle: function(event) {
+		return this.options.handle ?
+			!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :
+			true;
+	},
+
+	_setHandleClassName: function() {
+		this.handleElement = this.options.handle ?
+			this.element.find( this.options.handle ) : this.element;
+		this.handleElement.addClass( "ui-draggable-handle" );
+	},
+
+	_removeHandleClassName: function() {
+		this.handleElement.removeClass( "ui-draggable-handle" );
+	},
+
+	_createHelper: function(event) {
+
+		var o = this.options,
+			helperIsFunction = $.isFunction( o.helper ),
+			helper = helperIsFunction ?
+				$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :
+				( o.helper === "clone" ?
+					this.element.clone().removeAttr( "id" ) :
+					this.element );
+
+		if (!helper.parents("body").length) {
+			helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
+		}
+
+		// http://bugs.jqueryui.com/ticket/9446
+		// a helper function can return the original element
+		// which wouldn't have been set to relative in _create
+		if ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {
+			this._setPositionRelative();
+		}
+
+		if (helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
+			helper.css("position", "absolute");
+		}
+
+		return helper;
+
+	},
+
+	_setPositionRelative: function() {
+		if ( !( /^(?:r|a|f)/ ).test( this.element.css( "position" ) ) ) {
+			this.element[ 0 ].style.position = "relative";
+		}
+	},
+
+	_adjustOffsetFromHelper: function(obj) {
+		if (typeof obj === "string") {
+			obj = obj.split(" ");
+		}
+		if ($.isArray(obj)) {
+			obj = { left: +obj[0], top: +obj[1] || 0 };
+		}
+		if ("left" in obj) {
+			this.offset.click.left = obj.left + this.margins.left;
+		}
+		if ("right" in obj) {
+			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
+		}
+		if ("top" in obj) {
+			this.offset.click.top = obj.top + this.margins.top;
+		}
+		if ("bottom" in obj) {
+			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
+		}
+	},
+
+	_isRootNode: function( element ) {
+		return ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];
+	},
+
+	_getParentOffset: function() {
+
+		//Get the offsetParent and cache its position
+		var po = this.offsetParent.offset(),
+			document = this.document[ 0 ];
+
+		// This is a special case where we need to modify a offset calculated on start, since the following happened:
+		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
+		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
+		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
+		if (this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
+			po.left += this.scrollParent.scrollLeft();
+			po.top += this.scrollParent.scrollTop();
+		}
+
+		if ( this._isRootNode( this.offsetParent[ 0 ] ) ) {
+			po = { top: 0, left: 0 };
+		}
+
+		return {
+			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
+			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
+		};
+
+	},
+
+	_getRelativeOffset: function() {
+		if ( this.cssPosition !== "relative" ) {
+			return { top: 0, left: 0 };
+		}
+
+		var p = this.element.position(),
+			scrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );
+
+		return {
+			top: p.top - ( parseInt(this.helper.css( "top" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),
+			left: p.left - ( parseInt(this.helper.css( "left" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )
+		};
+
+	},
+
+	_cacheMargins: function() {
+		this.margins = {
+			left: (parseInt(this.element.css("marginLeft"), 10) || 0),
+			top: (parseInt(this.element.css("marginTop"), 10) || 0),
+			right: (parseInt(this.element.css("marginRight"), 10) || 0),
+			bottom: (parseInt(this.element.css("marginBottom"), 10) || 0)
+		};
+	},
+
+	_cacheHelperProportions: function() {
+		this.helperProportions = {
+			width: this.helper.outerWidth(),
+			height: this.helper.outerHeight()
+		};
+	},
+
+	_setContainment: function() {
+
+		var isUserScrollable, c, ce,
+			o = this.options,
+			document = this.document[ 0 ];
+
+		this.relativeContainer = null;
+
+		if ( !o.containment ) {
+			this.containment = null;
+			return;
+		}
+
+		if ( o.containment === "window" ) {
+			this.containment = [
+				$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
+				$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,
+				$( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,
+				$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
+			];
+			return;
+		}
+
+		if ( o.containment === "document") {
+			this.containment = [
+				0,
+				0,
+				$( document ).width() - this.helperProportions.width - this.margins.left,
+				( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
+			];
+			return;
+		}
+
+		if ( o.containment.constructor === Array ) {
+			this.containment = o.containment;
+			return;
+		}
+
+		if ( o.containment === "parent" ) {
+			o.containment = this.helper[ 0 ].parentNode;
+		}
+
+		c = $( o.containment );
+		ce = c[ 0 ];
+
+		if ( !ce ) {
+			return;
+		}
+
+		isUserScrollable = /(scroll|auto)/.test( c.css( "overflow" ) );
+
+		this.containment = [
+			( parseInt( c.css( "borderLeftWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingLeft" ), 10 ) || 0 ),
+			( parseInt( c.css( "borderTopWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingTop" ), 10 ) || 0 ),
+			( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -
+				( parseInt( c.css( "borderRightWidth" ), 10 ) || 0 ) -
+				( parseInt( c.css( "paddingRight" ), 10 ) || 0 ) -
+				this.helperProportions.width -
+				this.margins.left -
+				this.margins.right,
+			( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -
+				( parseInt( c.css( "borderBottomWidth" ), 10 ) || 0 ) -
+				( parseInt( c.css( "paddingBottom" ), 10 ) || 0 ) -
+				this.helperProportions.height -
+				this.margins.top -
+				this.margins.bottom
+		];
+		this.relativeContainer = c;
+	},
+
+	_convertPositionTo: function(d, pos) {
+
+		if (!pos) {
+			pos = this.position;
+		}
+
+		var mod = d === "absolute" ? 1 : -1,
+			scrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );
+
+		return {
+			top: (
+				pos.top	+																// The absolute mouse position
+				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.top * mod -										// The offsetParent's offset without borders (offset + border)
+				( ( this.cssPosition === "fixed" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod)
+			),
+			left: (
+				pos.left +																// The absolute mouse position
+				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
+				( ( this.cssPosition === "fixed" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod)
+			)
+		};
+
+	},
+
+	_generatePosition: function( event, constrainPosition ) {
+
+		var containment, co, top, left,
+			o = this.options,
+			scrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),
+			pageX = event.pageX,
+			pageY = event.pageY;
+
+		// Cache the scroll
+		if ( !scrollIsRootNode || !this.offset.scroll ) {
+			this.offset.scroll = {
+				top: this.scrollParent.scrollTop(),
+				left: this.scrollParent.scrollLeft()
+			};
+		}
+
+		/*
+		 * - Position constraining -
+		 * Constrain the position to a mix of grid, containment.
+		 */
+
+		// If we are not dragging yet, we won't check for options
+		if ( constrainPosition ) {
+			if ( this.containment ) {
+				if ( this.relativeContainer ){
+					co = this.relativeContainer.offset();
+					containment = [
+						this.containment[ 0 ] + co.left,
+						this.containment[ 1 ] + co.top,
+						this.containment[ 2 ] + co.left,
+						this.containment[ 3 ] + co.top
+					];
+				} else {
+					containment = this.containment;
+				}
+
+				if (event.pageX - this.offset.click.left < containment[0]) {
+					pageX = containment[0] + this.offset.click.left;
+				}
+				if (event.pageY - this.offset.click.top < containment[1]) {
+					pageY = containment[1] + this.offset.click.top;
+				}
+				if (event.pageX - this.offset.click.left > containment[2]) {
+					pageX = containment[2] + this.offset.click.left;
+				}
+				if (event.pageY - this.offset.click.top > containment[3]) {
+					pageY = containment[3] + this.offset.click.top;
+				}
+			}
+
+			if (o.grid) {
+				//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)
+				top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
+				pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
+
+				left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
+				pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
+			}
+
+			if ( o.axis === "y" ) {
+				pageX = this.originalPageX;
+			}
+
+			if ( o.axis === "x" ) {
+				pageY = this.originalPageY;
+			}
+		}
+
+		return {
+			top: (
+				pageY -																	// The absolute mouse position
+				this.offset.click.top	-												// Click offset (relative to the element)
+				this.offset.relative.top -												// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
+				( this.cssPosition === "fixed" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) )
+			),
+			left: (
+				pageX -																	// The absolute mouse position
+				this.offset.click.left -												// Click offset (relative to the element)
+				this.offset.relative.left -												// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
+				( this.cssPosition === "fixed" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) )
+			)
+		};
+
+	},
+
+	_clear: function() {
+		this.helper.removeClass("ui-draggable-dragging");
+		if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
+			this.helper.remove();
+		}
+		this.helper = null;
+		this.cancelHelperRemoval = false;
+		if ( this.destroyOnClear ) {
+			this.destroy();
+		}
+	},
+
+	_normalizeRightBottom: function() {
+		if ( this.options.axis !== "y" && this.helper.css( "right" ) !== "auto" ) {
+			this.helper.width( this.helper.width() );
+			this.helper.css( "right", "auto" );
+		}
+		if ( this.options.axis !== "x" && this.helper.css( "bottom" ) !== "auto" ) {
+			this.helper.height( this.helper.height() );
+			this.helper.css( "bottom", "auto" );
+		}
+	},
+
+	// From now on bulk stuff - mainly helpers
+
+	_trigger: function( type, event, ui ) {
+		ui = ui || this._uiHash();
+		$.ui.plugin.call( this, type, [ event, ui, this ], true );
+
+		// Absolute position and offset (see #6884 ) have to be recalculated after plugins
+		if ( /^(drag|start|stop)/.test( type ) ) {
+			this.positionAbs = this._convertPositionTo( "absolute" );
+			ui.offset = this.positionAbs;
+		}
+		return $.Widget.prototype._trigger.call( this, type, event, ui );
+	},
+
+	plugins: {},
+
+	_uiHash: function() {
+		return {
+			helper: this.helper,
+			position: this.position,
+			originalPosition: this.originalPosition,
+			offset: this.positionAbs
+		};
+	}
+
+});
+
+$.ui.plugin.add( "draggable", "connectToSortable", {
+	start: function( event, ui, draggable ) {
+		var uiSortable = $.extend( {}, ui, {
+			item: draggable.element
+		});
+
+		draggable.sortables = [];
+		$( draggable.options.connectToSortable ).each(function() {
+			var sortable = $( this ).sortable( "instance" );
+
+			if ( sortable && !sortable.options.disabled ) {
+				draggable.sortables.push( sortable );
+
+				// refreshPositions is called at drag start to refresh the containerCache
+				// which is used in drag. This ensures it's initialized and synchronized
+				// with any changes that might have happened on the page since initialization.
+				sortable.refreshPositions();
+				sortable._trigger("activate", event, uiSortable);
+			}
+		});
+	},
+	stop: function( event, ui, draggable ) {
+		var uiSortable = $.extend( {}, ui, {
+			item: draggable.element
+		});
+
+		draggable.cancelHelperRemoval = false;
+
+		$.each( draggable.sortables, function() {
+			var sortable = this;
+
+			if ( sortable.isOver ) {
+				sortable.isOver = 0;
+
+				// Allow this sortable to handle removing the helper
+				draggable.cancelHelperRemoval = true;
+				sortable.cancelHelperRemoval = false;
+
+				// Use _storedCSS To restore properties in the sortable,
+				// as this also handles revert (#9675) since the draggable
+				// may have modified them in unexpected ways (#8809)
+				sortable._storedCSS = {
+					position: sortable.placeholder.css( "position" ),
+					top: sortable.placeholder.css( "top" ),
+					left: sortable.placeholder.css( "left" )
+				};
+
+				sortable._mouseStop(event);
+
+				// Once drag has ended, the sortable should return to using
+				// its original helper, not the shared helper from draggable
+				sortable.options.helper = sortable.options._helper;
+			} else {
+				// Prevent this Sortable from removing the helper.
+				// However, don't set the draggable to remove the helper
+				// either as another connected Sortable may yet handle the removal.
+				sortable.cancelHelperRemoval = true;
+
+				sortable._trigger( "deactivate", event, uiSortable );
+			}
+		});
+	},
+	drag: function( event, ui, draggable ) {
+		$.each( draggable.sortables, function() {
+			var innermostIntersecting = false,
+				sortable = this;
+
+			// Copy over variables that sortable's _intersectsWith uses
+			sortable.positionAbs = draggable.positionAbs;
+			sortable.helperProportions = draggable.helperProportions;
+			sortable.offset.click = draggable.offset.click;
+
+			if ( sortable._intersectsWith( sortable.containerCache ) ) {
+				innermostIntersecting = true;
+
+				$.each( draggable.sortables, function() {
+					// Copy over variables that sortable's _intersectsWith uses
+					this.positionAbs = draggable.positionAbs;
+					this.helperProportions = draggable.helperProportions;
+					this.offset.click = draggable.offset.click;
+
+					if ( this !== sortable &&
+							this._intersectsWith( this.containerCache ) &&
+							$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {
+						innermostIntersecting = false;
+					}
+
+					return innermostIntersecting;
+				});
+			}
+
+			if ( innermostIntersecting ) {
+				// If it intersects, we use a little isOver variable and set it once,
+				// so that the move-in stuff gets fired only once.
+				if ( !sortable.isOver ) {
+					sortable.isOver = 1;
+
+					// Store draggable's parent in case we need to reappend to it later.
+					draggable._parent = ui.helper.parent();
+
+					sortable.currentItem = ui.helper
+						.appendTo( sortable.element )
+						.data( "ui-sortable-item", true );
+
+					// Store helper option to later restore it
+					sortable.options._helper = sortable.options.helper;
+
+					sortable.options.helper = function() {
+						return ui.helper[ 0 ];
+					};
+
+					// Fire the start events of the sortable with our passed browser event,
+					// and our own helper (so it doesn't create a new one)
+					event.target = sortable.currentItem[ 0 ];
+					sortable._mouseCapture( event, true );
+					sortable._mouseStart( event, true, true );
+
+					// Because the browser event is way off the new appended portlet,
+					// modify necessary variables to reflect the changes
+					sortable.offset.click.top = draggable.offset.click.top;
+					sortable.offset.click.left = draggable.offset.click.left;
+					sortable.offset.parent.left -= draggable.offset.parent.left -
+						sortable.offset.parent.left;
+					sortable.offset.parent.top -= draggable.offset.parent.top -
+						sortable.offset.parent.top;
+
+					draggable._trigger( "toSortable", event );
+
+					// Inform draggable that the helper is in a valid drop zone,
+					// used solely in the revert option to handle "valid/invalid".
+					draggable.dropped = sortable.element;
+
+					// Need to refreshPositions of all sortables in the case that
+					// adding to one sortable changes the location of the other sortables (#9675)
+					$.each( draggable.sortables, function() {
+						this.refreshPositions();
+					});
+
+					// hack so receive/update callbacks work (mostly)
+					draggable.currentItem = draggable.element;
+					sortable.fromOutside = draggable;
+				}
+
+				if ( sortable.currentItem ) {
+					sortable._mouseDrag( event );
+					// Copy the sortable's position because the draggable's can potentially reflect
+					// a relative position, while sortable is always absolute, which the dragged
+					// element has now become. (#8809)
+					ui.position = sortable.position;
+				}
+			} else {
+				// If it doesn't intersect with the sortable, and it intersected before,
+				// we fake the drag stop of the sortable, but make sure it doesn't remove
+				// the helper by using cancelHelperRemoval.
+				if ( sortable.isOver ) {
+
+					sortable.isOver = 0;
+					sortable.cancelHelperRemoval = true;
+
+					// Calling sortable's mouseStop would trigger a revert,
+					// so revert must be temporarily false until after mouseStop is called.
+					sortable.options._revert = sortable.options.revert;
+					sortable.options.revert = false;
+
+					sortable._trigger( "out", event, sortable._uiHash( sortable ) );
+					sortable._mouseStop( event, true );
+
+					// restore sortable behaviors that were modfied
+					// when the draggable entered the sortable area (#9481)
+					sortable.options.revert = sortable.options._revert;
+					sortable.options.helper = sortable.options._helper;
+
+					if ( sortable.placeholder ) {
+						sortable.placeholder.remove();
+					}
+
+					// Restore and recalculate the draggable's offset considering the sortable
+					// may have modified them in unexpected ways. (#8809, #10669)
+					ui.helper.appendTo( draggable._parent );
+					draggable._refreshOffsets( event );
+					ui.position = draggable._generatePosition( event, true );
+
+					draggable._trigger( "fromSortable", event );
+
+					// Inform draggable that the helper is no longer in a valid drop zone
+					draggable.dropped = false;
+
+					// Need to refreshPositions of all sortables just in case removing
+					// from one sortable changes the location of other sortables (#9675)
+					$.each( draggable.sortables, function() {
+						this.refreshPositions();
+					});
+				}
+			}
+		});
+	}
+});
+
+$.ui.plugin.add("draggable", "cursor", {
+	start: function( event, ui, instance ) {
+		var t = $( "body" ),
+			o = instance.options;
+
+		if (t.css("cursor")) {
+			o._cursor = t.css("cursor");
+		}
+		t.css("cursor", o.cursor);
+	},
+	stop: function( event, ui, instance ) {
+		var o = instance.options;
+		if (o._cursor) {
+			$("body").css("cursor", o._cursor);
+		}
+	}
+});
+
+$.ui.plugin.add("draggable", "opacity", {
+	start: function( event, ui, instance ) {
+		var t = $( ui.helper ),
+			o = instance.options;
+		if (t.css("opacity")) {
+			o._opacity = t.css("opacity");
+		}
+		t.css("opacity", o.opacity);
+	},
+	stop: function( event, ui, instance ) {
+		var o = instance.options;
+		if (o._opacity) {
+			$(ui.helper).css("opacity", o._opacity);
+		}
+	}
+});
+
+$.ui.plugin.add("draggable", "scroll", {
+	start: function( event, ui, i ) {
+		if ( !i.scrollParentNotHidden ) {
+			i.scrollParentNotHidden = i.helper.scrollParent( false );
+		}
+
+		if ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] && i.scrollParentNotHidden[ 0 ].tagName !== "HTML" ) {
+			i.overflowOffset = i.scrollParentNotHidden.offset();
+		}
+	},
+	drag: function( event, ui, i  ) {
+
+		var o = i.options,
+			scrolled = false,
+			scrollParent = i.scrollParentNotHidden[ 0 ],
+			document = i.document[ 0 ];
+
+		if ( scrollParent !== document && scrollParent.tagName !== "HTML" ) {
+			if ( !o.axis || o.axis !== "x" ) {
+				if ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY < o.scrollSensitivity ) {
+					scrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;
+				} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {
+					scrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;
+				}
+			}
+
+			if ( !o.axis || o.axis !== "y" ) {
+				if ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX < o.scrollSensitivity ) {
+					scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;
+				} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {
+					scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;
+				}
+			}
+
+		} else {
+
+			if (!o.axis || o.axis !== "x") {
+				if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
+					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
+				} else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
+					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
+				}
+			}
+
+			if (!o.axis || o.axis !== "y") {
+				if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
+					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
+				} else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
+					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
+				}
+			}
+
+		}
+
+		if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
+			$.ui.ddmanager.prepareOffsets(i, event);
+		}
+
+	}
+});
+
+$.ui.plugin.add("draggable", "snap", {
+	start: function( event, ui, i ) {
+
+		var o = i.options;
+
+		i.snapElements = [];
+
+		$(o.snap.constructor !== String ? ( o.snap.items || ":data(ui-draggable)" ) : o.snap).each(function() {
+			var $t = $(this),
+				$o = $t.offset();
+			if (this !== i.element[0]) {
+				i.snapElements.push({
+					item: this,
+					width: $t.outerWidth(), height: $t.outerHeight(),
+					top: $o.top, left: $o.left
+				});
+			}
+		});
+
+	},
+	drag: function( event, ui, inst ) {
+
+		var ts, bs, ls, rs, l, r, t, b, i, first,
+			o = inst.options,
+			d = o.snapTolerance,
+			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
+			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;
+
+		for (i = inst.snapElements.length - 1; i >= 0; i--){
+
+			l = inst.snapElements[i].left - inst.margins.left;
+			r = l + inst.snapElements[i].width;
+			t = inst.snapElements[i].top - inst.margins.top;
+			b = t + inst.snapElements[i].height;
+
+			if ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {
+				if (inst.snapElements[i].snapping) {
+					(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
+				}
+				inst.snapElements[i].snapping = false;
+				continue;
+			}
+
+			if (o.snapMode !== "inner") {
+				ts = Math.abs(t - y2) <= d;
+				bs = Math.abs(b - y1) <= d;
+				ls = Math.abs(l - x2) <= d;
+				rs = Math.abs(r - x1) <= d;
+				if (ts) {
+					ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top;
+				}
+				if (bs) {
+					ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top;
+				}
+				if (ls) {
+					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left;
+				}
+				if (rs) {
+					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left;
+				}
+			}
+
+			first = (ts || bs || ls || rs);
+
+			if (o.snapMode !== "outer") {
+				ts = Math.abs(t - y1) <= d;
+				bs = Math.abs(b - y2) <= d;
+				ls = Math.abs(l - x1) <= d;
+				rs = Math.abs(r - x2) <= d;
+				if (ts) {
+					ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top;
+				}
+				if (bs) {
+					ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top;
+				}
+				if (ls) {
+					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left;
+				}
+				if (rs) {
+					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left;
+				}
+			}
+
+			if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
+				(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
+			}
+			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);
+
+		}
+
+	}
+});
+
+$.ui.plugin.add("draggable", "stack", {
+	start: function( event, ui, instance ) {
+		var min,
+			o = instance.options,
+			group = $.makeArray($(o.stack)).sort(function(a, b) {
+				return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0);
+			});
+
+		if (!group.length) { return; }
+
+		min = parseInt($(group[0]).css("zIndex"), 10) || 0;
+		$(group).each(function(i) {
+			$(this).css("zIndex", min + i);
+		});
+		this.css("zIndex", (min + group.length));
+	}
+});
+
+$.ui.plugin.add("draggable", "zIndex", {
+	start: function( event, ui, instance ) {
+		var t = $( ui.helper ),
+			o = instance.options;
+
+		if (t.css("zIndex")) {
+			o._zIndex = t.css("zIndex");
+		}
+		t.css("zIndex", o.zIndex);
+	},
+	stop: function( event, ui, instance ) {
+		var o = instance.options;
+
+		if (o._zIndex) {
+			$(ui.helper).css("zIndex", o._zIndex);
+		}
+	}
+});
+
+var draggable = $.ui.draggable;
+
+
+/*!
+ * jQuery UI Resizable 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/resizable/
+ */
+
+
+$.widget("ui.resizable", $.ui.mouse, {
+	version: "1.11.4",
+	widgetEventPrefix: "resize",
+	options: {
+		alsoResize: false,
+		animate: false,
+		animateDuration: "slow",
+		animateEasing: "swing",
+		aspectRatio: false,
+		autoHide: false,
+		containment: false,
+		ghost: false,
+		grid: false,
+		handles: "e,s,se",
+		helper: false,
+		maxHeight: null,
+		maxWidth: null,
+		minHeight: 10,
+		minWidth: 10,
+		// See #7960
+		zIndex: 90,
+
+		// callbacks
+		resize: null,
+		start: null,
+		stop: null
+	},
+
+	_num: function( value ) {
+		return parseInt( value, 10 ) || 0;
+	},
+
+	_isNumber: function( value ) {
+		return !isNaN( parseInt( value, 10 ) );
+	},
+
+	_hasScroll: function( el, a ) {
+
+		if ( $( el ).css( "overflow" ) === "hidden") {
+			return false;
+		}
+
+		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
+			has = false;
+
+		if ( el[ scroll ] > 0 ) {
+			return true;
+		}
+
+		// TODO: determine which cases actually cause this to happen
+		// if the element doesn't have the scroll set, see if it's possible to
+		// set the scroll
+		el[ scroll ] = 1;
+		has = ( el[ scroll ] > 0 );
+		el[ scroll ] = 0;
+		return has;
+	},
+
+	_create: function() {
+
+		var n, i, handle, axis, hname,
+			that = this,
+			o = this.options;
+		this.element.addClass("ui-resizable");
+
+		$.extend(this, {
+			_aspectRatio: !!(o.aspectRatio),
+			aspectRatio: o.aspectRatio,
+			originalElement: this.element,
+			_proportionallyResizeElements: [],
+			_helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
+		});
+
+		// Wrap the element if it cannot hold child nodes
+		if (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {
+
+			this.element.wrap(
+				$("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
+					position: this.element.css("position"),
+					width: this.element.outerWidth(),
+					height: this.element.outerHeight(),
+					top: this.element.css("top"),
+					left: this.element.css("left")
+				})
+			);
+
+			this.element = this.element.parent().data(
+				"ui-resizable", this.element.resizable( "instance" )
+			);
+
+			this.elementIsWrapper = true;
+
+			this.element.css({
+				marginLeft: this.originalElement.css("marginLeft"),
+				marginTop: this.originalElement.css("marginTop"),
+				marginRight: this.originalElement.css("marginRight"),
+				marginBottom: this.originalElement.css("marginBottom")
+			});
+			this.originalElement.css({
+				marginLeft: 0,
+				marginTop: 0,
+				marginRight: 0,
+				marginBottom: 0
+			});
+			// support: Safari
+			// Prevent Safari textarea resize
+			this.originalResizeStyle = this.originalElement.css("resize");
+			this.originalElement.css("resize", "none");
+
+			this._proportionallyResizeElements.push( this.originalElement.css({
+				position: "static",
+				zoom: 1,
+				display: "block"
+			}) );
+
+			// support: IE9
+			// avoid IE jump (hard set the margin)
+			this.originalElement.css({ margin: this.originalElement.css("margin") });
+
+			this._proportionallyResize();
+		}
+
+		this.handles = o.handles ||
+			( !$(".ui-resizable-handle", this.element).length ?
+				"e,s,se" : {
+					n: ".ui-resizable-n",
+					e: ".ui-resizable-e",
+					s: ".ui-resizable-s",
+					w: ".ui-resizable-w",
+					se: ".ui-resizable-se",
+					sw: ".ui-resizable-sw",
+					ne: ".ui-resizable-ne",
+					nw: ".ui-resizable-nw"
+				} );
+
+		this._handles = $();
+		if ( this.handles.constructor === String ) {
+
+			if ( this.handles === "all") {
+				this.handles = "n,e,s,w,se,sw,ne,nw";
+			}
+
+			n = this.handles.split(",");
+			this.handles = {};
+
+			for (i = 0; i < n.length; i++) {
+
+				handle = $.trim(n[i]);
+				hname = "ui-resizable-" + handle;
+				axis = $("<div class='ui-resizable-handle " + hname + "'></div>");
+
+				axis.css({ zIndex: o.zIndex });
+
+				// TODO : What's going on here?
+				if ("se" === handle) {
+					axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
+				}
+
+				this.handles[handle] = ".ui-resizable-" + handle;
+				this.element.append(axis);
+			}
+
+		}
+
+		this._renderAxis = function(target) {
+
+			var i, axis, padPos, padWrapper;
+
+			target = target || this.element;
+
+			for (i in this.handles) {
+
+				if (this.handles[i].constructor === String) {
+					this.handles[i] = this.element.children( this.handles[ i ] ).first().show();
+				} else if ( this.handles[ i ].jquery || this.handles[ i ].nodeType ) {
+					this.handles[ i ] = $( this.handles[ i ] );
+					this._on( this.handles[ i ], { "mousedown": that._mouseDown });
+				}
+
+				if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {
+
+					axis = $(this.handles[i], this.element);
+
+					padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();
+
+					padPos = [ "padding",
+						/ne|nw|n/.test(i) ? "Top" :
+						/se|sw|s/.test(i) ? "Bottom" :
+						/^e$/.test(i) ? "Right" : "Left" ].join("");
+
+					target.css(padPos, padWrapper);
+
+					this._proportionallyResize();
+				}
+
+				this._handles = this._handles.add( this.handles[ i ] );
+			}
+		};
+
+		// TODO: make renderAxis a prototype function
+		this._renderAxis(this.element);
+
+		this._handles = this._handles.add( this.element.find( ".ui-resizable-handle" ) );
+		this._handles.disableSelection();
+
+		this._handles.mouseover(function() {
+			if (!that.resizing) {
+				if (this.className) {
+					axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
+				}
+				that.axis = axis && axis[1] ? axis[1] : "se";
+			}
+		});
+
+		if (o.autoHide) {
+			this._handles.hide();
+			$(this.element)
+				.addClass("ui-resizable-autohide")
+				.mouseenter(function() {
+					if (o.disabled) {
+						return;
+					}
+					$(this).removeClass("ui-resizable-autohide");
+					that._handles.show();
+				})
+				.mouseleave(function() {
+					if (o.disabled) {
+						return;
+					}
+					if (!that.resizing) {
+						$(this).addClass("ui-resizable-autohide");
+						that._handles.hide();
+					}
+				});
+		}
+
+		this._mouseInit();
+	},
+
+	_destroy: function() {
+
+		this._mouseDestroy();
+
+		var wrapper,
+			_destroy = function(exp) {
+				$(exp)
+					.removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
+					.removeData("resizable")
+					.removeData("ui-resizable")
+					.unbind(".resizable")
+					.find(".ui-resizable-handle")
+						.remove();
+			};
+
+		// TODO: Unwrap at same DOM position
+		if (this.elementIsWrapper) {
+			_destroy(this.element);
+			wrapper = this.element;
+			this.originalElement.css({
+				position: wrapper.css("position"),
+				width: wrapper.outerWidth(),
+				height: wrapper.outerHeight(),
+				top: wrapper.css("top"),
+				left: wrapper.css("left")
+			}).insertAfter( wrapper );
+			wrapper.remove();
+		}
+
+		this.originalElement.css("resize", this.originalResizeStyle);
+		_destroy(this.originalElement);
+
+		return this;
+	},
+
+	_mouseCapture: function(event) {
+		var i, handle,
+			capture = false;
+
+		for (i in this.handles) {
+			handle = $(this.handles[i])[0];
+			if (handle === event.target || $.contains(handle, event.target)) {
+				capture = true;
+			}
+		}
+
+		return !this.options.disabled && capture;
+	},
+
+	_mouseStart: function(event) {
+
+		var curleft, curtop, cursor,
+			o = this.options,
+			el = this.element;
+
+		this.resizing = true;
+
+		this._renderProxy();
+
+		curleft = this._num(this.helper.css("left"));
+		curtop = this._num(this.helper.css("top"));
+
+		if (o.containment) {
+			curleft += $(o.containment).scrollLeft() || 0;
+			curtop += $(o.containment).scrollTop() || 0;
+		}
+
+		this.offset = this.helper.offset();
+		this.position = { left: curleft, top: curtop };
+
+		this.size = this._helper ? {
+				width: this.helper.width(),
+				height: this.helper.height()
+			} : {
+				width: el.width(),
+				height: el.height()
+			};
+
+		this.originalSize = this._helper ? {
+				width: el.outerWidth(),
+				height: el.outerHeight()
+			} : {
+				width: el.width(),
+				height: el.height()
+			};
+
+		this.sizeDiff = {
+			width: el.outerWidth() - el.width(),
+			height: el.outerHeight() - el.height()
+		};
+
+		this.originalPosition = { left: curleft, top: curtop };
+		this.originalMousePosition = { left: event.pageX, top: event.pageY };
+
+		this.aspectRatio = (typeof o.aspectRatio === "number") ?
+			o.aspectRatio :
+			((this.originalSize.width / this.originalSize.height) || 1);
+
+		cursor = $(".ui-resizable-" + this.axis).css("cursor");
+		$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);
+
+		el.addClass("ui-resizable-resizing");
+		this._propagate("start", event);
+		return true;
+	},
+
+	_mouseDrag: function(event) {
+
+		var data, props,
+			smp = this.originalMousePosition,
+			a = this.axis,
+			dx = (event.pageX - smp.left) || 0,
+			dy = (event.pageY - smp.top) || 0,
+			trigger = this._change[a];
+
+		this._updatePrevProperties();
+
+		if (!trigger) {
+			return false;
+		}
+
+		data = trigger.apply(this, [ event, dx, dy ]);
+
+		this._updateVirtualBoundaries(event.shiftKey);
+		if (this._aspectRatio || event.shiftKey) {
+			data = this._updateRatio(data, event);
+		}
+
+		data = this._respectSize(data, event);
+
+		this._updateCache(data);
+
+		this._propagate("resize", event);
+
+		props = this._applyChanges();
+
+		if ( !this._helper && this._proportionallyResizeElements.length ) {
+			this._proportionallyResize();
+		}
+
+		if ( !$.isEmptyObject( props ) ) {
+			this._updatePrevProperties();
+			this._trigger( "resize", event, this.ui() );
+			this._applyChanges();
+		}
+
+		return false;
+	},
+
+	_mouseStop: function(event) {
+
+		this.resizing = false;
+		var pr, ista, soffseth, soffsetw, s, left, top,
+			o = this.options, that = this;
+
+		if (this._helper) {
+
+			pr = this._proportionallyResizeElements;
+			ista = pr.length && (/textarea/i).test(pr[0].nodeName);
+			soffseth = ista && this._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height;
+			soffsetw = ista ? 0 : that.sizeDiff.width;
+
+			s = {
+				width: (that.helper.width()  - soffsetw),
+				height: (that.helper.height() - soffseth)
+			};
+			left = (parseInt(that.element.css("left"), 10) +
+				(that.position.left - that.originalPosition.left)) || null;
+			top = (parseInt(that.element.css("top"), 10) +
+				(that.position.top - that.originalPosition.top)) || null;
+
+			if (!o.animate) {
+				this.element.css($.extend(s, { top: top, left: left }));
+			}
+
+			that.helper.height(that.size.height);
+			that.helper.width(that.size.width);
+
+			if (this._helper && !o.animate) {
+				this._proportionallyResize();
+			}
+		}
+
+		$("body").css("cursor", "auto");
+
+		this.element.removeClass("ui-resizable-resizing");
+
+		this._propagate("stop", event);
+
+		if (this._helper) {
+			this.helper.remove();
+		}
+
+		return false;
+
+	},
+
+	_updatePrevProperties: function() {
+		this.prevPosition = {
+			top: this.position.top,
+			left: this.position.left
+		};
+		this.prevSize = {
+			width: this.size.width,
+			height: this.size.height
+		};
+	},
+
+	_applyChanges: function() {
+		var props = {};
+
+		if ( this.position.top !== this.prevPosition.top ) {
+			props.top = this.position.top + "px";
+		}
+		if ( this.position.left !== this.prevPosition.left ) {
+			props.left = this.position.left + "px";
+		}
+		if ( this.size.width !== this.prevSize.width ) {
+			props.width = this.size.width + "px";
+		}
+		if ( this.size.height !== this.prevSize.height ) {
+			props.height = this.size.height + "px";
+		}
+
+		this.helper.css( props );
+
+		return props;
+	},
+
+	_updateVirtualBoundaries: function(forceAspectRatio) {
+		var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
+			o = this.options;
+
+		b = {
+			minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,
+			maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity,
+			minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,
+			maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity
+		};
+
+		if (this._aspectRatio || forceAspectRatio) {
+			pMinWidth = b.minHeight * this.aspectRatio;
+			pMinHeight = b.minWidth / this.aspectRatio;
+			pMaxWidth = b.maxHeight * this.aspectRatio;
+			pMaxHeight = b.maxWidth / this.aspectRatio;
+
+			if (pMinWidth > b.minWidth) {
+				b.minWidth = pMinWidth;
+			}
+			if (pMinHeight > b.minHeight) {
+				b.minHeight = pMinHeight;
+			}
+			if (pMaxWidth < b.maxWidth) {
+				b.maxWidth = pMaxWidth;
+			}
+			if (pMaxHeight < b.maxHeight) {
+				b.maxHeight = pMaxHeight;
+			}
+		}
+		this._vBoundaries = b;
+	},
+
+	_updateCache: function(data) {
+		this.offset = this.helper.offset();
+		if (this._isNumber(data.left)) {
+			this.position.left = data.left;
+		}
+		if (this._isNumber(data.top)) {
+			this.position.top = data.top;
+		}
+		if (this._isNumber(data.height)) {
+			this.size.height = data.height;
+		}
+		if (this._isNumber(data.width)) {
+			this.size.width = data.width;
+		}
+	},
+
+	_updateRatio: function( data ) {
+
+		var cpos = this.position,
+			csize = this.size,
+			a = this.axis;
+
+		if (this._isNumber(data.height)) {
+			data.width = (data.height * this.aspectRatio);
+		} else if (this._isNumber(data.width)) {
+			data.height = (data.width / this.aspectRatio);
+		}
+
+		if (a === "sw") {
+			data.left = cpos.left + (csize.width - data.width);
+			data.top = null;
+		}
+		if (a === "nw") {
+			data.top = cpos.top + (csize.height - data.height);
+			data.left = cpos.left + (csize.width - data.width);
+		}
+
+		return data;
+	},
+
+	_respectSize: function( data ) {
+
+		var o = this._vBoundaries,
+			a = this.axis,
+			ismaxw = this._isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width),
+			ismaxh = this._isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),
+			isminw = this._isNumber(data.width) && o.minWidth && (o.minWidth > data.width),
+			isminh = this._isNumber(data.height) && o.minHeight && (o.minHeight > data.height),
+			dw = this.originalPosition.left + this.originalSize.width,
+			dh = this.position.top + this.size.height,
+			cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
+		if (isminw) {
+			data.width = o.minWidth;
+		}
+		if (isminh) {
+			data.height = o.minHeight;
+		}
+		if (ismaxw) {
+			data.width = o.maxWidth;
+		}
+		if (ismaxh) {
+			data.height = o.maxHeight;
+		}
+
+		if (isminw && cw) {
+			data.left = dw - o.minWidth;
+		}
+		if (ismaxw && cw) {
+			data.left = dw - o.maxWidth;
+		}
+		if (isminh && ch) {
+			data.top = dh - o.minHeight;
+		}
+		if (ismaxh && ch) {
+			data.top = dh - o.maxHeight;
+		}
+
+		// Fixing jump error on top/left - bug #2330
+		if (!data.width && !data.height && !data.left && data.top) {
+			data.top = null;
+		} else if (!data.width && !data.height && !data.top && data.left) {
+			data.left = null;
+		}
+
+		return data;
+	},
+
+	_getPaddingPlusBorderDimensions: function( element ) {
+		var i = 0,
+			widths = [],
+			borders = [
+				element.css( "borderTopWidth" ),
+				element.css( "borderRightWidth" ),
+				element.css( "borderBottomWidth" ),
+				element.css( "borderLeftWidth" )
+			],
+			paddings = [
+				element.css( "paddingTop" ),
+				element.css( "paddingRight" ),
+				element.css( "paddingBottom" ),
+				element.css( "paddingLeft" )
+			];
+
+		for ( ; i < 4; i++ ) {
+			widths[ i ] = ( parseInt( borders[ i ], 10 ) || 0 );
+			widths[ i ] += ( parseInt( paddings[ i ], 10 ) || 0 );
+		}
+
+		return {
+			height: widths[ 0 ] + widths[ 2 ],
+			width: widths[ 1 ] + widths[ 3 ]
+		};
+	},
+
+	_proportionallyResize: function() {
+
+		if (!this._proportionallyResizeElements.length) {
+			return;
+		}
+
+		var prel,
+			i = 0,
+			element = this.helper || this.element;
+
+		for ( ; i < this._proportionallyResizeElements.length; i++) {
+
+			prel = this._proportionallyResizeElements[i];
+
+			// TODO: Seems like a bug to cache this.outerDimensions
+			// considering that we are in a loop.
+			if (!this.outerDimensions) {
+				this.outerDimensions = this._getPaddingPlusBorderDimensions( prel );
+			}
+
+			prel.css({
+				height: (element.height() - this.outerDimensions.height) || 0,
+				width: (element.width() - this.outerDimensions.width) || 0
+			});
+
+		}
+
+	},
+
+	_renderProxy: function() {
+
+		var el = this.element, o = this.options;
+		this.elementOffset = el.offset();
+
+		if (this._helper) {
+
+			this.helper = this.helper || $("<div style='overflow:hidden;'></div>");
+
+			this.helper.addClass(this._helper).css({
+				width: this.element.outerWidth() - 1,
+				height: this.element.outerHeight() - 1,
+				position: "absolute",
+				left: this.elementOffset.left + "px",
+				top: this.elementOffset.top + "px",
+				zIndex: ++o.zIndex //TODO: Don't modify option
+			});
+
+			this.helper
+				.appendTo("body")
+				.disableSelection();
+
+		} else {
+			this.helper = this.element;
+		}
+
+	},
+
+	_change: {
+		e: function(event, dx) {
+			return { width: this.originalSize.width + dx };
+		},
+		w: function(event, dx) {
+			var cs = this.originalSize, sp = this.originalPosition;
+			return { left: sp.left + dx, width: cs.width - dx };
+		},
+		n: function(event, dx, dy) {
+			var cs = this.originalSize, sp = this.originalPosition;
+			return { top: sp.top + dy, height: cs.height - dy };
+		},
+		s: function(event, dx, dy) {
+			return { height: this.originalSize.height + dy };
+		},
+		se: function(event, dx, dy) {
+			return $.extend(this._change.s.apply(this, arguments),
+				this._change.e.apply(this, [ event, dx, dy ]));
+		},
+		sw: function(event, dx, dy) {
+			return $.extend(this._change.s.apply(this, arguments),
+				this._change.w.apply(this, [ event, dx, dy ]));
+		},
+		ne: function(event, dx, dy) {
+			return $.extend(this._change.n.apply(this, arguments),
+				this._change.e.apply(this, [ event, dx, dy ]));
+		},
+		nw: function(event, dx, dy) {
+			return $.extend(this._change.n.apply(this, arguments),
+				this._change.w.apply(this, [ event, dx, dy ]));
+		}
+	},
+
+	_propagate: function(n, event) {
+		$.ui.plugin.call(this, n, [ event, this.ui() ]);
+		(n !== "resize" && this._trigger(n, event, this.ui()));
+	},
+
+	plugins: {},
+
+	ui: function() {
+		return {
+			originalElement: this.originalElement,
+			element: this.element,
+			helper: this.helper,
+			position: this.position,
+			size: this.size,
+			originalSize: this.originalSize,
+			originalPosition: this.originalPosition
+		};
+	}
+
+});
+
+/*
+ * Resizable Extensions
+ */
+
+$.ui.plugin.add("resizable", "animate", {
+
+	stop: function( event ) {
+		var that = $(this).resizable( "instance" ),
+			o = that.options,
+			pr = that._proportionallyResizeElements,
+			ista = pr.length && (/textarea/i).test(pr[0].nodeName),
+			soffseth = ista && that._hasScroll(pr[0], "left") ? 0 : that.sizeDiff.height,
+			soffsetw = ista ? 0 : that.sizeDiff.width,
+			style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
+			left = (parseInt(that.element.css("left"), 10) +
+				(that.position.left - that.originalPosition.left)) || null,
+			top = (parseInt(that.element.css("top"), 10) +
+				(that.position.top - that.originalPosition.top)) || null;
+
+		that.element.animate(
+			$.extend(style, top && left ? { top: top, left: left } : {}), {
+				duration: o.animateDuration,
+				easing: o.animateEasing,
+				step: function() {
+
+					var data = {
+						width: parseInt(that.element.css("width"), 10),
+						height: parseInt(that.element.css("height"), 10),
+						top: parseInt(that.element.css("top"), 10),
+						left: parseInt(that.element.css("left"), 10)
+					};
+
+					if (pr && pr.length) {
+						$(pr[0]).css({ width: data.width, height: data.height });
+					}
+
+					// propagating resize, and updating values for each animation step
+					that._updateCache(data);
+					that._propagate("resize", event);
+
+				}
+			}
+		);
+	}
+
+});
+
+$.ui.plugin.add( "resizable", "containment", {
+
+	start: function() {
+		var element, p, co, ch, cw, width, height,
+			that = $( this ).resizable( "instance" ),
+			o = that.options,
+			el = that.element,
+			oc = o.containment,
+			ce = ( oc instanceof $ ) ? oc.get( 0 ) : ( /parent/.test( oc ) ) ? el.parent().get( 0 ) : oc;
+
+		if ( !ce ) {
+			return;
+		}
+
+		that.containerElement = $( ce );
+
+		if ( /document/.test( oc ) || oc === document ) {
+			that.containerOffset = {
+				left: 0,
+				top: 0
+			};
+			that.containerPosition = {
+				left: 0,
+				top: 0
+			};
+
+			that.parentData = {
+				element: $( document ),
+				left: 0,
+				top: 0,
+				width: $( document ).width(),
+				height: $( document ).height() || document.body.parentNode.scrollHeight
+			};
+		} else {
+			element = $( ce );
+			p = [];
+			$([ "Top", "Right", "Left", "Bottom" ]).each(function( i, name ) {
+				p[ i ] = that._num( element.css( "padding" + name ) );
+			});
+
+			that.containerOffset = element.offset();
+			that.containerPosition = element.position();
+			that.containerSize = {
+				height: ( element.innerHeight() - p[ 3 ] ),
+				width: ( element.innerWidth() - p[ 1 ] )
+			};
+
+			co = that.containerOffset;
+			ch = that.containerSize.height;
+			cw = that.containerSize.width;
+			width = ( that._hasScroll ( ce, "left" ) ? ce.scrollWidth : cw );
+			height = ( that._hasScroll ( ce ) ? ce.scrollHeight : ch ) ;
+
+			that.parentData = {
+				element: ce,
+				left: co.left,
+				top: co.top,
+				width: width,
+				height: height
+			};
+		}
+	},
+
+	resize: function( event ) {
+		var woset, hoset, isParent, isOffsetRelative,
+			that = $( this ).resizable( "instance" ),
+			o = that.options,
+			co = that.containerOffset,
+			cp = that.position,
+			pRatio = that._aspectRatio || event.shiftKey,
+			cop = {
+				top: 0,
+				left: 0
+			},
+			ce = that.containerElement,
+			continueResize = true;
+
+		if ( ce[ 0 ] !== document && ( /static/ ).test( ce.css( "position" ) ) ) {
+			cop = co;
+		}
+
+		if ( cp.left < ( that._helper ? co.left : 0 ) ) {
+			that.size.width = that.size.width +
+				( that._helper ?
+					( that.position.left - co.left ) :
+					( that.position.left - cop.left ) );
+
+			if ( pRatio ) {
+				that.size.height = that.size.width / that.aspectRatio;
+				continueResize = false;
+			}
+			that.position.left = o.helper ? co.left : 0;
+		}
+
+		if ( cp.top < ( that._helper ? co.top : 0 ) ) {
+			that.size.height = that.size.height +
+				( that._helper ?
+					( that.position.top - co.top ) :
+					that.position.top );
+
+			if ( pRatio ) {
+				that.size.width = that.size.height * that.aspectRatio;
+				continueResize = false;
+			}
+			that.position.top = that._helper ? co.top : 0;
+		}
+
+		isParent = that.containerElement.get( 0 ) === that.element.parent().get( 0 );
+		isOffsetRelative = /relative|absolute/.test( that.containerElement.css( "position" ) );
+
+		if ( isParent && isOffsetRelative ) {
+			that.offset.left = that.parentData.left + that.position.left;
+			that.offset.top = that.parentData.top + that.position.top;
+		} else {
+			that.offset.left = that.element.offset().left;
+			that.offset.top = that.element.offset().top;
+		}
+
+		woset = Math.abs( that.sizeDiff.width +
+			(that._helper ?
+				that.offset.left - cop.left :
+				(that.offset.left - co.left)) );
+
+		hoset = Math.abs( that.sizeDiff.height +
+			(that._helper ?
+				that.offset.top - cop.top :
+				(that.offset.top - co.top)) );
+
+		if ( woset + that.size.width >= that.parentData.width ) {
+			that.size.width = that.parentData.width - woset;
+			if ( pRatio ) {
+				that.size.height = that.size.width / that.aspectRatio;
+				continueResize = false;
+			}
+		}
+
+		if ( hoset + that.size.height >= that.parentData.height ) {
+			that.size.height = that.parentData.height - hoset;
+			if ( pRatio ) {
+				that.size.width = that.size.height * that.aspectRatio;
+				continueResize = false;
+			}
+		}
+
+		if ( !continueResize ) {
+			that.position.left = that.prevPosition.left;
+			that.position.top = that.prevPosition.top;
+			that.size.width = that.prevSize.width;
+			that.size.height = that.prevSize.height;
+		}
+	},
+
+	stop: function() {
+		var that = $( this ).resizable( "instance" ),
+			o = that.options,
+			co = that.containerOffset,
+			cop = that.containerPosition,
+			ce = that.containerElement,
+			helper = $( that.helper ),
+			ho = helper.offset(),
+			w = helper.outerWidth() - that.sizeDiff.width,
+			h = helper.outerHeight() - that.sizeDiff.height;
+
+		if ( that._helper && !o.animate && ( /relative/ ).test( ce.css( "position" ) ) ) {
+			$( this ).css({
+				left: ho.left - cop.left - co.left,
+				width: w,
+				height: h
+			});
+		}
+
+		if ( that._helper && !o.animate && ( /static/ ).test( ce.css( "position" ) ) ) {
+			$( this ).css({
+				left: ho.left - cop.left - co.left,
+				width: w,
+				height: h
+			});
+		}
+	}
+});
+
+$.ui.plugin.add("resizable", "alsoResize", {
+
+	start: function() {
+		var that = $(this).resizable( "instance" ),
+			o = that.options;
+
+		$(o.alsoResize).each(function() {
+			var el = $(this);
+			el.data("ui-resizable-alsoresize", {
+				width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),
+				left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10)
+			});
+		});
+	},
+
+	resize: function(event, ui) {
+		var that = $(this).resizable( "instance" ),
+			o = that.options,
+			os = that.originalSize,
+			op = that.originalPosition,
+			delta = {
+				height: (that.size.height - os.height) || 0,
+				width: (that.size.width - os.width) || 0,
+				top: (that.position.top - op.top) || 0,
+				left: (that.position.left - op.left) || 0
+			};
+
+			$(o.alsoResize).each(function() {
+				var el = $(this), start = $(this).data("ui-resizable-alsoresize"), style = {},
+					css = el.parents(ui.originalElement[0]).length ?
+							[ "width", "height" ] :
+							[ "width", "height", "top", "left" ];
+
+				$.each(css, function(i, prop) {
+					var sum = (start[prop] || 0) + (delta[prop] || 0);
+					if (sum && sum >= 0) {
+						style[prop] = sum || null;
+					}
+				});
+
+				el.css(style);
+			});
+	},
+
+	stop: function() {
+		$(this).removeData("resizable-alsoresize");
+	}
+});
+
+$.ui.plugin.add("resizable", "ghost", {
+
+	start: function() {
+
+		var that = $(this).resizable( "instance" ), o = that.options, cs = that.size;
+
+		that.ghost = that.originalElement.clone();
+		that.ghost
+			.css({
+				opacity: 0.25,
+				display: "block",
+				position: "relative",
+				height: cs.height,
+				width: cs.width,
+				margin: 0,
+				left: 0,
+				top: 0
+			})
+			.addClass("ui-resizable-ghost")
+			.addClass(typeof o.ghost === "string" ? o.ghost : "");
+
+		that.ghost.appendTo(that.helper);
+
+	},
+
+	resize: function() {
+		var that = $(this).resizable( "instance" );
+		if (that.ghost) {
+			that.ghost.css({
+				position: "relative",
+				height: that.size.height,
+				width: that.size.width
+			});
+		}
+	},
+
+	stop: function() {
+		var that = $(this).resizable( "instance" );
+		if (that.ghost && that.helper) {
+			that.helper.get(0).removeChild(that.ghost.get(0));
+		}
+	}
+
+});
+
+$.ui.plugin.add("resizable", "grid", {
+
+	resize: function() {
+		var outerDimensions,
+			that = $(this).resizable( "instance" ),
+			o = that.options,
+			cs = that.size,
+			os = that.originalSize,
+			op = that.originalPosition,
+			a = that.axis,
+			grid = typeof o.grid === "number" ? [ o.grid, o.grid ] : o.grid,
+			gridX = (grid[0] || 1),
+			gridY = (grid[1] || 1),
+			ox = Math.round((cs.width - os.width) / gridX) * gridX,
+			oy = Math.round((cs.height - os.height) / gridY) * gridY,
+			newWidth = os.width + ox,
+			newHeight = os.height + oy,
+			isMaxWidth = o.maxWidth && (o.maxWidth < newWidth),
+			isMaxHeight = o.maxHeight && (o.maxHeight < newHeight),
+			isMinWidth = o.minWidth && (o.minWidth > newWidth),
+			isMinHeight = o.minHeight && (o.minHeight > newHeight);
+
+		o.grid = grid;
+
+		if (isMinWidth) {
+			newWidth += gridX;
+		}
+		if (isMinHeight) {
+			newHeight += gridY;
+		}
+		if (isMaxWidth) {
+			newWidth -= gridX;
+		}
+		if (isMaxHeight) {
+			newHeight -= gridY;
+		}
+
+		if (/^(se|s|e)$/.test(a)) {
+			that.size.width = newWidth;
+			that.size.height = newHeight;
+		} else if (/^(ne)$/.test(a)) {
+			that.size.width = newWidth;
+			that.size.height = newHeight;
+			that.position.top = op.top - oy;
+		} else if (/^(sw)$/.test(a)) {
+			that.size.width = newWidth;
+			that.size.height = newHeight;
+			that.position.left = op.left - ox;
+		} else {
+			if ( newHeight - gridY <= 0 || newWidth - gridX <= 0) {
+				outerDimensions = that._getPaddingPlusBorderDimensions( this );
+			}
+
+			if ( newHeight - gridY > 0 ) {
+				that.size.height = newHeight;
+				that.position.top = op.top - oy;
+			} else {
+				newHeight = gridY - outerDimensions.height;
+				that.size.height = newHeight;
+				that.position.top = op.top + os.height - newHeight;
+			}
+			if ( newWidth - gridX > 0 ) {
+				that.size.width = newWidth;
+				that.position.left = op.left - ox;
+			} else {
+				newWidth = gridX - outerDimensions.width;
+				that.size.width = newWidth;
+				that.position.left = op.left + os.width - newWidth;
+			}
+		}
+	}
+
+});
+
+var resizable = $.ui.resizable;
+
+
+/*!
+ * jQuery UI Dialog 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/dialog/
+ */
+
+
+var dialog = $.widget( "ui.dialog", {
+	version: "1.11.4",
+	options: {
+		appendTo: "body",
+		autoOpen: true,
+		buttons: [],
+		closeOnEscape: true,
+		closeText: "Close",
+		dialogClass: "",
+		draggable: true,
+		hide: null,
+		height: "auto",
+		maxHeight: null,
+		maxWidth: null,
+		minHeight: 150,
+		minWidth: 150,
+		modal: false,
+		position: {
+			my: "center",
+			at: "center",
+			of: window,
+			collision: "fit",
+			// Ensure the titlebar is always visible
+			using: function( pos ) {
+				var topOffset = $( this ).css( pos ).offset().top;
+				if ( topOffset < 0 ) {
+					$( this ).css( "top", pos.top - topOffset );
+				}
+			}
+		},
+		resizable: true,
+		show: null,
+		title: null,
+		width: 300,
+
+		// callbacks
+		beforeClose: null,
+		close: null,
+		drag: null,
+		dragStart: null,
+		dragStop: null,
+		focus: null,
+		open: null,
+		resize: null,
+		resizeStart: null,
+		resizeStop: null
+	},
+
+	sizeRelatedOptions: {
+		buttons: true,
+		height: true,
+		maxHeight: true,
+		maxWidth: true,
+		minHeight: true,
+		minWidth: true,
+		width: true
+	},
+
+	resizableRelatedOptions: {
+		maxHeight: true,
+		maxWidth: true,
+		minHeight: true,
+		minWidth: true
+	},
+
+	_create: function() {
+		this.originalCss = {
+			display: this.element[ 0 ].style.display,
+			width: this.element[ 0 ].style.width,
+			minHeight: this.element[ 0 ].style.minHeight,
+			maxHeight: this.element[ 0 ].style.maxHeight,
+			height: this.element[ 0 ].style.height
+		};
+		this.originalPosition = {
+			parent: this.element.parent(),
+			index: this.element.parent().children().index( this.element )
+		};
+		this.originalTitle = this.element.attr( "title" );
+		this.options.title = this.options.title || this.originalTitle;
+
+		this._createWrapper();
+
+		this.element
+			.show()
+			.removeAttr( "title" )
+			.addClass( "ui-dialog-content ui-widget-content" )
+			.appendTo( this.uiDialog );
+
+		this._createTitlebar();
+		this._createButtonPane();
+
+		if ( this.options.draggable && $.fn.draggable ) {
+			this._makeDraggable();
+		}
+		if ( this.options.resizable && $.fn.resizable ) {
+			this._makeResizable();
+		}
+
+		this._isOpen = false;
+
+		this._trackFocus();
+	},
+
+	_init: function() {
+		if ( this.options.autoOpen ) {
+			this.open();
+		}
+	},
+
+	_appendTo: function() {
+		var element = this.options.appendTo;
+		if ( element && (element.jquery || element.nodeType) ) {
+			return $( element );
+		}
+		return this.document.find( element || "body" ).eq( 0 );
+	},
+
+	_destroy: function() {
+		var next,
+			originalPosition = this.originalPosition;
+
+		this._untrackInstance();
+		this._destroyOverlay();
+
+		this.element
+			.removeUniqueId()
+			.removeClass( "ui-dialog-content ui-widget-content" )
+			.css( this.originalCss )
+			// Without detaching first, the following becomes really slow
+			.detach();
+
+		this.uiDialog.stop( true, true ).remove();
+
+		if ( this.originalTitle ) {
+			this.element.attr( "title", this.originalTitle );
+		}
+
+		next = originalPosition.parent.children().eq( originalPosition.index );
+		// Don't try to place the dialog next to itself (#8613)
+		if ( next.length && next[ 0 ] !== this.element[ 0 ] ) {
+			next.before( this.element );
+		} else {
+			originalPosition.parent.append( this.element );
+		}
+	},
+
+	widget: function() {
+		return this.uiDialog;
+	},
+
+	disable: $.noop,
+	enable: $.noop,
+
+	close: function( event ) {
+		var activeElement,
+			that = this;
+
+		if ( !this._isOpen || this._trigger( "beforeClose", event ) === false ) {
+			return;
+		}
+
+		this._isOpen = false;
+		this._focusedElement = null;
+		this._destroyOverlay();
+		this._untrackInstance();
+
+		if ( !this.opener.filter( ":focusable" ).focus().length ) {
+
+			// support: IE9
+			// IE9 throws an "Unspecified error" accessing document.activeElement from an <iframe>
+			try {
+				activeElement = this.document[ 0 ].activeElement;
+
+				// Support: IE9, IE10
+				// If the <body> is blurred, IE will switch windows, see #4520
+				if ( activeElement && activeElement.nodeName.toLowerCase() !== "body" ) {
+
+					// Hiding a focused element doesn't trigger blur in WebKit
+					// so in case we have nothing to focus on, explicitly blur the active element
+					// https://bugs.webkit.org/show_bug.cgi?id=47182
+					$( activeElement ).blur();
+				}
+			} catch ( error ) {}
+		}
+
+		this._hide( this.uiDialog, this.options.hide, function() {
+			that._trigger( "close", event );
+		});
+	},
+
+	isOpen: function() {
+		return this._isOpen;
+	},
+
+	moveToTop: function() {
+		this._moveToTop();
+	},
+
+	_moveToTop: function( event, silent ) {
+		var moved = false,
+			zIndices = this.uiDialog.siblings( ".ui-front:visible" ).map(function() {
+				return +$( this ).css( "z-index" );
+			}).get(),
+			zIndexMax = Math.max.apply( null, zIndices );
+
+		if ( zIndexMax >= +this.uiDialog.css( "z-index" ) ) {
+			this.uiDialog.css( "z-index", zIndexMax + 1 );
+			moved = true;
+		}
+
+		if ( moved && !silent ) {
+			this._trigger( "focus", event );
+		}
+		return moved;
+	},
+
+	open: function() {
+		var that = this;
+		if ( this._isOpen ) {
+			if ( this._moveToTop() ) {
+				this._focusTabbable();
+			}
+			return;
+		}
+
+		this._isOpen = true;
+		this.opener = $( this.document[ 0 ].activeElement );
+
+		this._size();
+		this._position();
+		this._createOverlay();
+		this._moveToTop( null, true );
+
+		// Ensure the overlay is moved to the top with the dialog, but only when
+		// opening. The overlay shouldn't move after the dialog is open so that
+		// modeless dialogs opened after the modal dialog stack properly.
+		if ( this.overlay ) {
+			this.overlay.css( "z-index", this.uiDialog.css( "z-index" ) - 1 );
+		}
+
+		this._show( this.uiDialog, this.options.show, function() {
+			that._focusTabbable();
+			that._trigger( "focus" );
+		});
+
+		// Track the dialog immediately upon openening in case a focus event
+		// somehow occurs outside of the dialog before an element inside the
+		// dialog is focused (#10152)
+		this._makeFocusTarget();
+
+		this._trigger( "open" );
+	},
+
+	_focusTabbable: function() {
+		// Set focus to the first match:
+		// 1. An element that was focused previously
+		// 2. First element inside the dialog matching [autofocus]
+		// 3. Tabbable element inside the content element
+		// 4. Tabbable element inside the buttonpane
+		// 5. The close button
+		// 6. The dialog itself
+		var hasFocus = this._focusedElement;
+		if ( !hasFocus ) {
+			hasFocus = this.element.find( "[autofocus]" );
+		}
+		if ( !hasFocus.length ) {
+			hasFocus = this.element.find( ":tabbable" );
+		}
+		if ( !hasFocus.length ) {
+			hasFocus = this.uiDialogButtonPane.find( ":tabbable" );
+		}
+		if ( !hasFocus.length ) {
+			hasFocus = this.uiDialogTitlebarClose.filter( ":tabbable" );
+		}
+		if ( !hasFocus.length ) {
+			hasFocus = this.uiDialog;
+		}
+		hasFocus.eq( 0 ).focus();
+	},
+
+	_keepFocus: function( event ) {
+		function checkFocus() {
+			var activeElement = this.document[0].activeElement,
+				isActive = this.uiDialog[0] === activeElement ||
+					$.contains( this.uiDialog[0], activeElement );
+			if ( !isActive ) {
+				this._focusTabbable();
+			}
+		}
+		event.preventDefault();
+		checkFocus.call( this );
+		// support: IE
+		// IE <= 8 doesn't prevent moving focus even with event.preventDefault()
+		// so we check again later
+		this._delay( checkFocus );
+	},
+
+	_createWrapper: function() {
+		this.uiDialog = $("<div>")
+			.addClass( "ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " +
+				this.options.dialogClass )
+			.hide()
+			.attr({
+				// Setting tabIndex makes the div focusable
+				tabIndex: -1,
+				role: "dialog"
+			})
+			.appendTo( this._appendTo() );
+
+		this._on( this.uiDialog, {
+			keydown: function( event ) {
+				if ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
+						event.keyCode === $.ui.keyCode.ESCAPE ) {
+					event.preventDefault();
+					this.close( event );
+					return;
+				}
+
+				// prevent tabbing out of dialogs
+				if ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {
+					return;
+				}
+				var tabbables = this.uiDialog.find( ":tabbable" ),
+					first = tabbables.filter( ":first" ),
+					last = tabbables.filter( ":last" );
+
+				if ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {
+					this._delay(function() {
+						first.focus();
+					});
+					event.preventDefault();
+				} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {
+					this._delay(function() {
+						last.focus();
+					});
+					event.preventDefault();
+				}
+			},
+			mousedown: function( event ) {
+				if ( this._moveToTop( event ) ) {
+					this._focusTabbable();
+				}
+			}
+		});
+
+		// We assume that any existing aria-describedby attribute means
+		// that the dialog content is marked up properly
+		// otherwise we brute force the content as the description
+		if ( !this.element.find( "[aria-describedby]" ).length ) {
+			this.uiDialog.attr({
+				"aria-describedby": this.element.uniqueId().attr( "id" )
+			});
+		}
+	},
+
+	_createTitlebar: function() {
+		var uiDialogTitle;
+
+		this.uiDialogTitlebar = $( "<div>" )
+			.addClass( "ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" )
+			.prependTo( this.uiDialog );
+		this._on( this.uiDialogTitlebar, {
+			mousedown: function( event ) {
+				// Don't prevent click on close button (#8838)
+				// Focusing a dialog that is partially scrolled out of view
+				// causes the browser to scroll it into view, preventing the click event
+				if ( !$( event.target ).closest( ".ui-dialog-titlebar-close" ) ) {
+					// Dialog isn't getting focus when dragging (#8063)
+					this.uiDialog.focus();
+				}
+			}
+		});
+
+		// support: IE
+		// Use type="button" to prevent enter keypresses in textboxes from closing the
+		// dialog in IE (#9312)
+		this.uiDialogTitlebarClose = $( "<button type='button'></button>" )
+			.button({
+				label: this.options.closeText,
+				icons: {
+					primary: "ui-icon-closethick"
+				},
+				text: false
+			})
+			.addClass( "ui-dialog-titlebar-close" )
+			.appendTo( this.uiDialogTitlebar );
+		this._on( this.uiDialogTitlebarClose, {
+			click: function( event ) {
+				event.preventDefault();
+				this.close( event );
+			}
+		});
+
+		uiDialogTitle = $( "<span>" )
+			.uniqueId()
+			.addClass( "ui-dialog-title" )
+			.prependTo( this.uiDialogTitlebar );
+		this._title( uiDialogTitle );
+
+		this.uiDialog.attr({
+			"aria-labelledby": uiDialogTitle.attr( "id" )
+		});
+	},
+
+	_title: function( title ) {
+		if ( !this.options.title ) {
+			title.html( "&#160;" );
+		}
+		title.text( this.options.title );
+	},
+
+	_createButtonPane: function() {
+		this.uiDialogButtonPane = $( "<div>" )
+			.addClass( "ui-dialog-buttonpane ui-widget-content ui-helper-clearfix" );
+
+		this.uiButtonSet = $( "<div>" )
+			.addClass( "ui-dialog-buttonset" )
+			.appendTo( this.uiDialogButtonPane );
+
+		this._createButtons();
+	},
+
+	_createButtons: function() {
+		var that = this,
+			buttons = this.options.buttons;
+
+		// if we already have a button pane, remove it
+		this.uiDialogButtonPane.remove();
+		this.uiButtonSet.empty();
+
+		if ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {
+			this.uiDialog.removeClass( "ui-dialog-buttons" );
+			return;
+		}
+
+		$.each( buttons, function( name, props ) {
+			var click, buttonOptions;
+			props = $.isFunction( props ) ?
+				{ click: props, text: name } :
+				props;
+			// Default to a non-submitting button
+			props = $.extend( { type: "button" }, props );
+			// Change the context for the click callback to be the main element
+			click = props.click;
+			props.click = function() {
+				click.apply( that.element[ 0 ], arguments );
+			};
+			buttonOptions = {
+				icons: props.icons,
+				text: props.showText
+			};
+			delete props.icons;
+			delete props.showText;
+			$( "<button></button>", props )
+				.button( buttonOptions )
+				.appendTo( that.uiButtonSet );
+		});
+		this.uiDialog.addClass( "ui-dialog-buttons" );
+		this.uiDialogButtonPane.appendTo( this.uiDialog );
+	},
+
+	_makeDraggable: function() {
+		var that = this,
+			options = this.options;
+
+		function filteredUi( ui ) {
+			return {
+				position: ui.position,
+				offset: ui.offset
+			};
+		}
+
+		this.uiDialog.draggable({
+			cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
+			handle: ".ui-dialog-titlebar",
+			containment: "document",
+			start: function( event, ui ) {
+				$( this ).addClass( "ui-dialog-dragging" );
+				that._blockFrames();
+				that._trigger( "dragStart", event, filteredUi( ui ) );
+			},
+			drag: function( event, ui ) {
+				that._trigger( "drag", event, filteredUi( ui ) );
+			},
+			stop: function( event, ui ) {
+				var left = ui.offset.left - that.document.scrollLeft(),
+					top = ui.offset.top - that.document.scrollTop();
+
+				options.position = {
+					my: "left top",
+					at: "left" + (left >= 0 ? "+" : "") + left + " " +
+						"top" + (top >= 0 ? "+" : "") + top,
+					of: that.window
+				};
+				$( this ).removeClass( "ui-dialog-dragging" );
+				that._unblockFrames();
+				that._trigger( "dragStop", event, filteredUi( ui ) );
+			}
+		});
+	},
+
+	_makeResizable: function() {
+		var that = this,
+			options = this.options,
+			handles = options.resizable,
+			// .ui-resizable has position: relative defined in the stylesheet
+			// but dialogs have to use absolute or fixed positioning
+			position = this.uiDialog.css("position"),
+			resizeHandles = typeof handles === "string" ?
+				handles	:
+				"n,e,s,w,se,sw,ne,nw";
+
+		function filteredUi( ui ) {
+			return {
+				originalPosition: ui.originalPosition,
+				originalSize: ui.originalSize,
+				position: ui.position,
+				size: ui.size
+			};
+		}
+
+		this.uiDialog.resizable({
+			cancel: ".ui-dialog-content",
+			containment: "document",
+			alsoResize: this.element,
+			maxWidth: options.maxWidth,
+			maxHeight: options.maxHeight,
+			minWidth: options.minWidth,
+			minHeight: this._minHeight(),
+			handles: resizeHandles,
+			start: function( event, ui ) {
+				$( this ).addClass( "ui-dialog-resizing" );
+				that._blockFrames();
+				that._trigger( "resizeStart", event, filteredUi( ui ) );
+			},
+			resize: function( event, ui ) {
+				that._trigger( "resize", event, filteredUi( ui ) );
+			},
+			stop: function( event, ui ) {
+				var offset = that.uiDialog.offset(),
+					left = offset.left - that.document.scrollLeft(),
+					top = offset.top - that.document.scrollTop();
+
+				options.height = that.uiDialog.height();
+				options.width = that.uiDialog.width();
+				options.position = {
+					my: "left top",
+					at: "left" + (left >= 0 ? "+" : "") + left + " " +
+						"top" + (top >= 0 ? "+" : "") + top,
+					of: that.window
+				};
+				$( this ).removeClass( "ui-dialog-resizing" );
+				that._unblockFrames();
+				that._trigger( "resizeStop", event, filteredUi( ui ) );
+			}
+		})
+		.css( "position", position );
+	},
+
+	_trackFocus: function() {
+		this._on( this.widget(), {
+			focusin: function( event ) {
+				this._makeFocusTarget();
+				this._focusedElement = $( event.target );
+			}
+		});
+	},
+
+	_makeFocusTarget: function() {
+		this._untrackInstance();
+		this._trackingInstances().unshift( this );
+	},
+
+	_untrackInstance: function() {
+		var instances = this._trackingInstances(),
+			exists = $.inArray( this, instances );
+		if ( exists !== -1 ) {
+			instances.splice( exists, 1 );
+		}
+	},
+
+	_trackingInstances: function() {
+		var instances = this.document.data( "ui-dialog-instances" );
+		if ( !instances ) {
+			instances = [];
+			this.document.data( "ui-dialog-instances", instances );
+		}
+		return instances;
+	},
+
+	_minHeight: function() {
+		var options = this.options;
+
+		return options.height === "auto" ?
+			options.minHeight :
+			Math.min( options.minHeight, options.height );
+	},
+
+	_position: function() {
+		// Need to show the dialog to get the actual offset in the position plugin
+		var isVisible = this.uiDialog.is( ":visible" );
+		if ( !isVisible ) {
+			this.uiDialog.show();
+		}
+		this.uiDialog.position( this.options.position );
+		if ( !isVisible ) {
+			this.uiDialog.hide();
+		}
+	},
+
+	_setOptions: function( options ) {
+		var that = this,
+			resize = false,
+			resizableOptions = {};
+
+		$.each( options, function( key, value ) {
+			that._setOption( key, value );
+
+			if ( key in that.sizeRelatedOptions ) {
+				resize = true;
+			}
+			if ( key in that.resizableRelatedOptions ) {
+				resizableOptions[ key ] = value;
+			}
+		});
+
+		if ( resize ) {
+			this._size();
+			this._position();
+		}
+		if ( this.uiDialog.is( ":data(ui-resizable)" ) ) {
+			this.uiDialog.resizable( "option", resizableOptions );
+		}
+	},
+
+	_setOption: function( key, value ) {
+		var isDraggable, isResizable,
+			uiDialog = this.uiDialog;
+
+		if ( key === "dialogClass" ) {
+			uiDialog
+				.removeClass( this.options.dialogClass )
+				.addClass( value );
+		}
+
+		if ( key === "disabled" ) {
+			return;
+		}
+
+		this._super( key, value );
+
+		if ( key === "appendTo" ) {
+			this.uiDialog.appendTo( this._appendTo() );
+		}
+
+		if ( key === "buttons" ) {
+			this._createButtons();
+		}
+
+		if ( key === "closeText" ) {
+			this.uiDialogTitlebarClose.button({
+				// Ensure that we always pass a string
+				label: "" + value
+			});
+		}
+
+		if ( key === "draggable" ) {
+			isDraggable = uiDialog.is( ":data(ui-draggable)" );
+			if ( isDraggable && !value ) {
+				uiDialog.draggable( "destroy" );
+			}
+
+			if ( !isDraggable && value ) {
+				this._makeDraggable();
+			}
+		}
+
+		if ( key === "position" ) {
+			this._position();
+		}
+
+		if ( key === "resizable" ) {
+			// currently resizable, becoming non-resizable
+			isResizable = uiDialog.is( ":data(ui-resizable)" );
+			if ( isResizable && !value ) {
+				uiDialog.resizable( "destroy" );
+			}
+
+			// currently resizable, changing handles
+			if ( isResizable && typeof value === "string" ) {
+				uiDialog.resizable( "option", "handles", value );
+			}
+
+			// currently non-resizable, becoming resizable
+			if ( !isResizable && value !== false ) {
+				this._makeResizable();
+			}
+		}
+
+		if ( key === "title" ) {
+			this._title( this.uiDialogTitlebar.find( ".ui-dialog-title" ) );
+		}
+	},
+
+	_size: function() {
+		// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
+		// divs will both have width and height set, so we need to reset them
+		var nonContentHeight, minContentHeight, maxContentHeight,
+			options = this.options;
+
+		// Reset content sizing
+		this.element.show().css({
+			width: "auto",
+			minHeight: 0,
+			maxHeight: "none",
+			height: 0
+		});
+
+		if ( options.minWidth > options.width ) {
+			options.width = options.minWidth;
+		}
+
+		// reset wrapper sizing
+		// determine the height of all the non-content elements
+		nonContentHeight = this.uiDialog.css({
+				height: "auto",
+				width: options.width
+			})
+			.outerHeight();
+		minContentHeight = Math.max( 0, options.minHeight - nonContentHeight );
+		maxContentHeight = typeof options.maxHeight === "number" ?
+			Math.max( 0, options.maxHeight - nonContentHeight ) :
+			"none";
+
+		if ( options.height === "auto" ) {
+			this.element.css({
+				minHeight: minContentHeight,
+				maxHeight: maxContentHeight,
+				height: "auto"
+			});
+		} else {
+			this.element.height( Math.max( 0, options.height - nonContentHeight ) );
+		}
+
+		if ( this.uiDialog.is( ":data(ui-resizable)" ) ) {
+			this.uiDialog.resizable( "option", "minHeight", this._minHeight() );
+		}
+	},
+
+	_blockFrames: function() {
+		this.iframeBlocks = this.document.find( "iframe" ).map(function() {
+			var iframe = $( this );
+
+			return $( "<div>" )
+				.css({
+					position: "absolute",
+					width: iframe.outerWidth(),
+					height: iframe.outerHeight()
+				})
+				.appendTo( iframe.parent() )
+				.offset( iframe.offset() )[0];
+		});
+	},
+
+	_unblockFrames: function() {
+		if ( this.iframeBlocks ) {
+			this.iframeBlocks.remove();
+			delete this.iframeBlocks;
+		}
+	},
+
+	_allowInteraction: function( event ) {
+		if ( $( event.target ).closest( ".ui-dialog" ).length ) {
+			return true;
+		}
+
+		// TODO: Remove hack when datepicker implements
+		// the .ui-front logic (#8989)
+		return !!$( event.target ).closest( ".ui-datepicker" ).length;
+	},
+
+	_createOverlay: function() {
+		if ( !this.options.modal ) {
+			return;
+		}
+
+		// We use a delay in case the overlay is created from an
+		// event that we're going to be cancelling (#2804)
+		var isOpening = true;
+		this._delay(function() {
+			isOpening = false;
+		});
+
+		if ( !this.document.data( "ui-dialog-overlays" ) ) {
+
+			// Prevent use of anchors and inputs
+			// Using _on() for an event handler shared across many instances is
+			// safe because the dialogs stack and must be closed in reverse order
+			this._on( this.document, {
+				focusin: function( event ) {
+					if ( isOpening ) {
+						return;
+					}
+
+					if ( !this._allowInteraction( event ) ) {
+						event.preventDefault();
+						this._trackingInstances()[ 0 ]._focusTabbable();
+					}
+				}
+			});
+		}
+
+		this.overlay = $( "<div>" )
+			.addClass( "ui-widget-overlay ui-front" )
+			.appendTo( this._appendTo() );
+		this._on( this.overlay, {
+			mousedown: "_keepFocus"
+		});
+		this.document.data( "ui-dialog-overlays",
+			(this.document.data( "ui-dialog-overlays" ) || 0) + 1 );
+	},
+
+	_destroyOverlay: function() {
+		if ( !this.options.modal ) {
+			return;
+		}
+
+		if ( this.overlay ) {
+			var overlays = this.document.data( "ui-dialog-overlays" ) - 1;
+
+			if ( !overlays ) {
+				this.document
+					.unbind( "focusin" )
+					.removeData( "ui-dialog-overlays" );
+			} else {
+				this.document.data( "ui-dialog-overlays", overlays );
+			}
+
+			this.overlay.remove();
+			this.overlay = null;
+		}
+	}
+});
+
+
+/*!
+ * jQuery UI Droppable 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/droppable/
+ */
+
+
+$.widget( "ui.droppable", {
+	version: "1.11.4",
+	widgetEventPrefix: "drop",
+	options: {
+		accept: "*",
+		activeClass: false,
+		addClasses: true,
+		greedy: false,
+		hoverClass: false,
+		scope: "default",
+		tolerance: "intersect",
+
+		// callbacks
+		activate: null,
+		deactivate: null,
+		drop: null,
+		out: null,
+		over: null
+	},
+	_create: function() {
+
+		var proportions,
+			o = this.options,
+			accept = o.accept;
+
+		this.isover = false;
+		this.isout = true;
+
+		this.accept = $.isFunction( accept ) ? accept : function( d ) {
+			return d.is( accept );
+		};
+
+		this.proportions = function( /* valueToWrite */ ) {
+			if ( arguments.length ) {
+				// Store the droppable's proportions
+				proportions = arguments[ 0 ];
+			} else {
+				// Retrieve or derive the droppable's proportions
+				return proportions ?
+					proportions :
+					proportions = {
+						width: this.element[ 0 ].offsetWidth,
+						height: this.element[ 0 ].offsetHeight
+					};
+			}
+		};
+
+		this._addToManager( o.scope );
+
+		o.addClasses && this.element.addClass( "ui-droppable" );
+
+	},
+
+	_addToManager: function( scope ) {
+		// Add the reference and positions to the manager
+		$.ui.ddmanager.droppables[ scope ] = $.ui.ddmanager.droppables[ scope ] || [];
+		$.ui.ddmanager.droppables[ scope ].push( this );
+	},
+
+	_splice: function( drop ) {
+		var i = 0;
+		for ( ; i < drop.length; i++ ) {
+			if ( drop[ i ] === this ) {
+				drop.splice( i, 1 );
+			}
+		}
+	},
+
+	_destroy: function() {
+		var drop = $.ui.ddmanager.droppables[ this.options.scope ];
+
+		this._splice( drop );
+
+		this.element.removeClass( "ui-droppable ui-droppable-disabled" );
+	},
+
+	_setOption: function( key, value ) {
+
+		if ( key === "accept" ) {
+			this.accept = $.isFunction( value ) ? value : function( d ) {
+				return d.is( value );
+			};
+		} else if ( key === "scope" ) {
+			var drop = $.ui.ddmanager.droppables[ this.options.scope ];
+
+			this._splice( drop );
+			this._addToManager( value );
+		}
+
+		this._super( key, value );
+	},
+
+	_activate: function( event ) {
+		var draggable = $.ui.ddmanager.current;
+		if ( this.options.activeClass ) {
+			this.element.addClass( this.options.activeClass );
+		}
+		if ( draggable ){
+			this._trigger( "activate", event, this.ui( draggable ) );
+		}
+	},
+
+	_deactivate: function( event ) {
+		var draggable = $.ui.ddmanager.current;
+		if ( this.options.activeClass ) {
+			this.element.removeClass( this.options.activeClass );
+		}
+		if ( draggable ){
+			this._trigger( "deactivate", event, this.ui( draggable ) );
+		}
+	},
+
+	_over: function( event ) {
+
+		var draggable = $.ui.ddmanager.current;
+
+		// Bail if draggable and droppable are same element
+		if ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {
+			return;
+		}
+
+		if ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
+			if ( this.options.hoverClass ) {
+				this.element.addClass( this.options.hoverClass );
+			}
+			this._trigger( "over", event, this.ui( draggable ) );
+		}
+
+	},
+
+	_out: function( event ) {
+
+		var draggable = $.ui.ddmanager.current;
+
+		// Bail if draggable and droppable are same element
+		if ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {
+			return;
+		}
+
+		if ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
+			if ( this.options.hoverClass ) {
+				this.element.removeClass( this.options.hoverClass );
+			}
+			this._trigger( "out", event, this.ui( draggable ) );
+		}
+
+	},
+
+	_drop: function( event, custom ) {
+
+		var draggable = custom || $.ui.ddmanager.current,
+			childrenIntersection = false;
+
+		// Bail if draggable and droppable are same element
+		if ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {
+			return false;
+		}
+
+		this.element.find( ":data(ui-droppable)" ).not( ".ui-draggable-dragging" ).each(function() {
+			var inst = $( this ).droppable( "instance" );
+			if (
+				inst.options.greedy &&
+				!inst.options.disabled &&
+				inst.options.scope === draggable.options.scope &&
+				inst.accept.call( inst.element[ 0 ], ( draggable.currentItem || draggable.element ) ) &&
+				$.ui.intersect( draggable, $.extend( inst, { offset: inst.element.offset() } ), inst.options.tolerance, event )
+			) { childrenIntersection = true; return false; }
+		});
+		if ( childrenIntersection ) {
+			return false;
+		}
+
+		if ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
+			if ( this.options.activeClass ) {
+				this.element.removeClass( this.options.activeClass );
+			}
+			if ( this.options.hoverClass ) {
+				this.element.removeClass( this.options.hoverClass );
+			}
+			this._trigger( "drop", event, this.ui( draggable ) );
+			return this.element;
+		}
+
+		return false;
+
+	},
+
+	ui: function( c ) {
+		return {
+			draggable: ( c.currentItem || c.element ),
+			helper: c.helper,
+			position: c.position,
+			offset: c.positionAbs
+		};
+	}
+
+});
+
+$.ui.intersect = (function() {
+	function isOverAxis( x, reference, size ) {
+		return ( x >= reference ) && ( x < ( reference + size ) );
+	}
+
+	return function( draggable, droppable, toleranceMode, event ) {
+
+		if ( !droppable.offset ) {
+			return false;
+		}
+
+		var x1 = ( draggable.positionAbs || draggable.position.absolute ).left + draggable.margins.left,
+			y1 = ( draggable.positionAbs || draggable.position.absolute ).top + draggable.margins.top,
+			x2 = x1 + draggable.helperProportions.width,
+			y2 = y1 + draggable.helperProportions.height,
+			l = droppable.offset.left,
+			t = droppable.offset.top,
+			r = l + droppable.proportions().width,
+			b = t + droppable.proportions().height;
+
+		switch ( toleranceMode ) {
+		case "fit":
+			return ( l <= x1 && x2 <= r && t <= y1 && y2 <= b );
+		case "intersect":
+			return ( l < x1 + ( draggable.helperProportions.width / 2 ) && // Right Half
+				x2 - ( draggable.helperProportions.width / 2 ) < r && // Left Half
+				t < y1 + ( draggable.helperProportions.height / 2 ) && // Bottom Half
+				y2 - ( draggable.helperProportions.height / 2 ) < b ); // Top Half
+		case "pointer":
+			return isOverAxis( event.pageY, t, droppable.proportions().height ) && isOverAxis( event.pageX, l, droppable.proportions().width );
+		case "touch":
+			return (
+				( y1 >= t && y1 <= b ) || // Top edge touching
+				( y2 >= t && y2 <= b ) || // Bottom edge touching
+				( y1 < t && y2 > b ) // Surrounded vertically
+			) && (
+				( x1 >= l && x1 <= r ) || // Left edge touching
+				( x2 >= l && x2 <= r ) || // Right edge touching
+				( x1 < l && x2 > r ) // Surrounded horizontally
+			);
+		default:
+			return false;
+		}
+	};
+})();
+
+/*
+	This manager tracks offsets of draggables and droppables
+*/
+$.ui.ddmanager = {
+	current: null,
+	droppables: { "default": [] },
+	prepareOffsets: function( t, event ) {
+
+		var i, j,
+			m = $.ui.ddmanager.droppables[ t.options.scope ] || [],
+			type = event ? event.type : null, // workaround for #2317
+			list = ( t.currentItem || t.element ).find( ":data(ui-droppable)" ).addBack();
+
+		droppablesLoop: for ( i = 0; i < m.length; i++ ) {
+
+			// No disabled and non-accepted
+			if ( m[ i ].options.disabled || ( t && !m[ i ].accept.call( m[ i ].element[ 0 ], ( t.currentItem || t.element ) ) ) ) {
+				continue;
+			}
+
+			// Filter out elements in the current dragged item
+			for ( j = 0; j < list.length; j++ ) {
+				if ( list[ j ] === m[ i ].element[ 0 ] ) {
+					m[ i ].proportions().height = 0;
+					continue droppablesLoop;
+				}
+			}
+
+			m[ i ].visible = m[ i ].element.css( "display" ) !== "none";
+			if ( !m[ i ].visible ) {
+				continue;
+			}
+
+			// Activate the droppable if used directly from draggables
+			if ( type === "mousedown" ) {
+				m[ i ]._activate.call( m[ i ], event );
+			}
+
+			m[ i ].offset = m[ i ].element.offset();
+			m[ i ].proportions({ width: m[ i ].element[ 0 ].offsetWidth, height: m[ i ].element[ 0 ].offsetHeight });
+
+		}
+
+	},
+	drop: function( draggable, event ) {
+
+		var dropped = false;
+		// Create a copy of the droppables in case the list changes during the drop (#9116)
+		$.each( ( $.ui.ddmanager.droppables[ draggable.options.scope ] || [] ).slice(), function() {
+
+			if ( !this.options ) {
+				return;
+			}
+			if ( !this.options.disabled && this.visible && $.ui.intersect( draggable, this, this.options.tolerance, event ) ) {
+				dropped = this._drop.call( this, event ) || dropped;
+			}
+
+			if ( !this.options.disabled && this.visible && this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {
+				this.isout = true;
+				this.isover = false;
+				this._deactivate.call( this, event );
+			}
+
+		});
+		return dropped;
+
+	},
+	dragStart: function( draggable, event ) {
+		// Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)
+		draggable.element.parentsUntil( "body" ).bind( "scroll.droppable", function() {
+			if ( !draggable.options.refreshPositions ) {
+				$.ui.ddmanager.prepareOffsets( draggable, event );
+			}
+		});
+	},
+	drag: function( draggable, event ) {
+
+		// If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.
+		if ( draggable.options.refreshPositions ) {
+			$.ui.ddmanager.prepareOffsets( draggable, event );
+		}
+
+		// Run through all droppables and check their positions based on specific tolerance options
+		$.each( $.ui.ddmanager.droppables[ draggable.options.scope ] || [], function() {
+
+			if ( this.options.disabled || this.greedyChild || !this.visible ) {
+				return;
+			}
+
+			var parentInstance, scope, parent,
+				intersects = $.ui.intersect( draggable, this, this.options.tolerance, event ),
+				c = !intersects && this.isover ? "isout" : ( intersects && !this.isover ? "isover" : null );
+			if ( !c ) {
+				return;
+			}
+
+			if ( this.options.greedy ) {
+				// find droppable parents with same scope
+				scope = this.options.scope;
+				parent = this.element.parents( ":data(ui-droppable)" ).filter(function() {
+					return $( this ).droppable( "instance" ).options.scope === scope;
+				});
+
+				if ( parent.length ) {
+					parentInstance = $( parent[ 0 ] ).droppable( "instance" );
+					parentInstance.greedyChild = ( c === "isover" );
+				}
+			}
+
+			// we just moved into a greedy child
+			if ( parentInstance && c === "isover" ) {
+				parentInstance.isover = false;
+				parentInstance.isout = true;
+				parentInstance._out.call( parentInstance, event );
+			}
+
+			this[ c ] = true;
+			this[c === "isout" ? "isover" : "isout"] = false;
+			this[c === "isover" ? "_over" : "_out"].call( this, event );
+
+			// we just moved out of a greedy child
+			if ( parentInstance && c === "isout" ) {
+				parentInstance.isout = false;
+				parentInstance.isover = true;
+				parentInstance._over.call( parentInstance, event );
+			}
+		});
+
+	},
+	dragStop: function( draggable, event ) {
+		draggable.element.parentsUntil( "body" ).unbind( "scroll.droppable" );
+		// Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)
+		if ( !draggable.options.refreshPositions ) {
+			$.ui.ddmanager.prepareOffsets( draggable, event );
+		}
+	}
+};
+
+var droppable = $.ui.droppable;
+
+
+/*!
+ * jQuery UI Effects 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/category/effects-core/
+ */
+
+
+var dataSpace = "ui-effects-",
+
+	// Create a local jQuery because jQuery Color relies on it and the
+	// global may not exist with AMD and a custom build (#10199)
+	jQuery = $;
+
+$.effects = {
+	effect: {}
+};
+
+/*!
+ * jQuery Color Animations v2.1.2
+ * https://github.com/jquery/jquery-color
+ *
+ * Copyright 2014 jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * Date: Wed Jan 16 08:47:09 2013 -0600
+ */
+(function( jQuery, undefined ) {
+
+	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
+
+	// plusequals test for += 100 -= 100
+	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
+	// a set of RE's that can match strings and generate color tuples.
+	stringParsers = [ {
+			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
+			parse: function( execResult ) {
+				return [
+					execResult[ 1 ],
+					execResult[ 2 ],
+					execResult[ 3 ],
+					execResult[ 4 ]
+				];
+			}
+		}, {
+			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
+			parse: function( execResult ) {
+				return [
+					execResult[ 1 ] * 2.55,
+					execResult[ 2 ] * 2.55,
+					execResult[ 3 ] * 2.55,
+					execResult[ 4 ]
+				];
+			}
+		}, {
+			// this regex ignores A-F because it's compared against an already lowercased string
+			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
+			parse: function( execResult ) {
+				return [
+					parseInt( execResult[ 1 ], 16 ),
+					parseInt( execResult[ 2 ], 16 ),
+					parseInt( execResult[ 3 ], 16 )
+				];
+			}
+		}, {
+			// this regex ignores A-F because it's compared against an already lowercased string
+			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
+			parse: function( execResult ) {
+				return [
+					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
+					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
+					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
+				];
+			}
+		}, {
+			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
+			space: "hsla",
+			parse: function( execResult ) {
+				return [
+					execResult[ 1 ],
+					execResult[ 2 ] / 100,
+					execResult[ 3 ] / 100,
+					execResult[ 4 ]
+				];
+			}
+		} ],
+
+	// jQuery.Color( )
+	color = jQuery.Color = function( color, green, blue, alpha ) {
+		return new jQuery.Color.fn.parse( color, green, blue, alpha );
+	},
+	spaces = {
+		rgba: {
+			props: {
+				red: {
+					idx: 0,
+					type: "byte"
+				},
+				green: {
+					idx: 1,
+					type: "byte"
+				},
+				blue: {
+					idx: 2,
+					type: "byte"
+				}
+			}
+		},
+
+		hsla: {
+			props: {
+				hue: {
+					idx: 0,
+					type: "degrees"
+				},
+				saturation: {
+					idx: 1,
+					type: "percent"
+				},
+				lightness: {
+					idx: 2,
+					type: "percent"
+				}
+			}
+		}
+	},
+	propTypes = {
+		"byte": {
+			floor: true,
+			max: 255
+		},
+		"percent": {
+			max: 1
+		},
+		"degrees": {
+			mod: 360,
+			floor: true
+		}
+	},
+	support = color.support = {},
+
+	// element for support tests
+	supportElem = jQuery( "<p>" )[ 0 ],
+
+	// colors = jQuery.Color.names
+	colors,
+
+	// local aliases of functions called often
+	each = jQuery.each;
+
+// determine rgba support immediately
+supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
+support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;
+
+// define cache name and alpha properties
+// for rgba and hsla spaces
+each( spaces, function( spaceName, space ) {
+	space.cache = "_" + spaceName;
+	space.props.alpha = {
+		idx: 3,
+		type: "percent",
+		def: 1
+	};
+});
+
+function clamp( value, prop, allowEmpty ) {
+	var type = propTypes[ prop.type ] || {};
+
+	if ( value == null ) {
+		return (allowEmpty || !prop.def) ? null : prop.def;
+	}
+
+	// ~~ is an short way of doing floor for positive numbers
+	value = type.floor ? ~~value : parseFloat( value );
+
+	// IE will pass in empty strings as value for alpha,
+	// which will hit this case
+	if ( isNaN( value ) ) {
+		return prop.def;
+	}
+
+	if ( type.mod ) {
+		// we add mod before modding to make sure that negatives values
+		// get converted properly: -10 -> 350
+		return (value + type.mod) % type.mod;
+	}
+
+	// for now all property types without mod have min and max
+	return 0 > value ? 0 : type.max < value ? type.max : value;
+}
+
+function stringParse( string ) {
+	var inst = color(),
+		rgba = inst._rgba = [];
+
+	string = string.toLowerCase();
+
+	each( stringParsers, function( i, parser ) {
+		var parsed,
+			match = parser.re.exec( string ),
+			values = match && parser.parse( match ),
+			spaceName = parser.space || "rgba";
+
+		if ( values ) {
+			parsed = inst[ spaceName ]( values );
+
+			// if this was an rgba parse the assignment might happen twice
+			// oh well....
+			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
+			rgba = inst._rgba = parsed._rgba;
+
+			// exit each( stringParsers ) here because we matched
+			return false;
+		}
+	});
+
+	// Found a stringParser that handled it
+	if ( rgba.length ) {
+
+		// if this came from a parsed string, force "transparent" when alpha is 0
+		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
+		if ( rgba.join() === "0,0,0,0" ) {
+			jQuery.extend( rgba, colors.transparent );
+		}
+		return inst;
+	}
+
+	// named colors
+	return colors[ string ];
+}
+
+color.fn = jQuery.extend( color.prototype, {
+	parse: function( red, green, blue, alpha ) {
+		if ( red === undefined ) {
+			this._rgba = [ null, null, null, null ];
+			return this;
+		}
+		if ( red.jquery || red.nodeType ) {
+			red = jQuery( red ).css( green );
+			green = undefined;
+		}
+
+		var inst = this,
+			type = jQuery.type( red ),
+			rgba = this._rgba = [];
+
+		// more than 1 argument specified - assume ( red, green, blue, alpha )
+		if ( green !== undefined ) {
+			red = [ red, green, blue, alpha ];
+			type = "array";
+		}
+
+		if ( type === "string" ) {
+			return this.parse( stringParse( red ) || colors._default );
+		}
+
+		if ( type === "array" ) {
+			each( spaces.rgba.props, function( key, prop ) {
+				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
+			});
+			return this;
+		}
+
+		if ( type === "object" ) {
+			if ( red instanceof color ) {
+				each( spaces, function( spaceName, space ) {
+					if ( red[ space.cache ] ) {
+						inst[ space.cache ] = red[ space.cache ].slice();
+					}
+				});
+			} else {
+				each( spaces, function( spaceName, space ) {
+					var cache = space.cache;
+					each( space.props, function( key, prop ) {
+
+						// if the cache doesn't exist, and we know how to convert
+						if ( !inst[ cache ] && space.to ) {
+
+							// if the value was null, we don't need to copy it
+							// if the key was alpha, we don't need to copy it either
+							if ( key === "alpha" || red[ key ] == null ) {
+								return;
+							}
+							inst[ cache ] = space.to( inst._rgba );
+						}
+
+						// this is the only case where we allow nulls for ALL properties.
+						// call clamp with alwaysAllowEmpty
+						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
+					});
+
+					// everything defined but alpha?
+					if ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {
+						// use the default of 1
+						inst[ cache ][ 3 ] = 1;
+						if ( space.from ) {
+							inst._rgba = space.from( inst[ cache ] );
+						}
+					}
+				});
+			}
+			return this;
+		}
+	},
+	is: function( compare ) {
+		var is = color( compare ),
+			same = true,
+			inst = this;
+
+		each( spaces, function( _, space ) {
+			var localCache,
+				isCache = is[ space.cache ];
+			if (isCache) {
+				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
+				each( space.props, function( _, prop ) {
+					if ( isCache[ prop.idx ] != null ) {
+						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
+						return same;
+					}
+				});
+			}
+			return same;
+		});
+		return same;
+	},
+	_space: function() {
+		var used = [],
+			inst = this;
+		each( spaces, function( spaceName, space ) {
+			if ( inst[ space.cache ] ) {
+				used.push( spaceName );
+			}
+		});
+		return used.pop();
+	},
+	transition: function( other, distance ) {
+		var end = color( other ),
+			spaceName = end._space(),
+			space = spaces[ spaceName ],
+			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
+			start = startColor[ space.cache ] || space.to( startColor._rgba ),
+			result = start.slice();
+
+		end = end[ space.cache ];
+		each( space.props, function( key, prop ) {
+			var index = prop.idx,
+				startValue = start[ index ],
+				endValue = end[ index ],
+				type = propTypes[ prop.type ] || {};
+
+			// if null, don't override start value
+			if ( endValue === null ) {
+				return;
+			}
+			// if null - use end
+			if ( startValue === null ) {
+				result[ index ] = endValue;
+			} else {
+				if ( type.mod ) {
+					if ( endValue - startValue > type.mod / 2 ) {
+						startValue += type.mod;
+					} else if ( startValue - endValue > type.mod / 2 ) {
+						startValue -= type.mod;
+					}
+				}
+				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
+			}
+		});
+		return this[ spaceName ]( result );
+	},
+	blend: function( opaque ) {
+		// if we are already opaque - return ourself
+		if ( this._rgba[ 3 ] === 1 ) {
+			return this;
+		}
+
+		var rgb = this._rgba.slice(),
+			a = rgb.pop(),
+			blend = color( opaque )._rgba;
+
+		return color( jQuery.map( rgb, function( v, i ) {
+			return ( 1 - a ) * blend[ i ] + a * v;
+		}));
+	},
+	toRgbaString: function() {
+		var prefix = "rgba(",
+			rgba = jQuery.map( this._rgba, function( v, i ) {
+				return v == null ? ( i > 2 ? 1 : 0 ) : v;
+			});
+
+		if ( rgba[ 3 ] === 1 ) {
+			rgba.pop();
+			prefix = "rgb(";
+		}
+
+		return prefix + rgba.join() + ")";
+	},
+	toHslaString: function() {
+		var prefix = "hsla(",
+			hsla = jQuery.map( this.hsla(), function( v, i ) {
+				if ( v == null ) {
+					v = i > 2 ? 1 : 0;
+				}
+
+				// catch 1 and 2
+				if ( i && i < 3 ) {
+					v = Math.round( v * 100 ) + "%";
+				}
+				return v;
+			});
+
+		if ( hsla[ 3 ] === 1 ) {
+			hsla.pop();
+			prefix = "hsl(";
+		}
+		return prefix + hsla.join() + ")";
+	},
+	toHexString: function( includeAlpha ) {
+		var rgba = this._rgba.slice(),
+			alpha = rgba.pop();
+
+		if ( includeAlpha ) {
+			rgba.push( ~~( alpha * 255 ) );
+		}
+
+		return "#" + jQuery.map( rgba, function( v ) {
+
+			// default to 0 when nulls exist
+			v = ( v || 0 ).toString( 16 );
+			return v.length === 1 ? "0" + v : v;
+		}).join("");
+	},
+	toString: function() {
+		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
+	}
+});
+color.fn.parse.prototype = color.fn;
+
+// hsla conversions adapted from:
+// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021
+
+function hue2rgb( p, q, h ) {
+	h = ( h + 1 ) % 1;
+	if ( h * 6 < 1 ) {
+		return p + ( q - p ) * h * 6;
+	}
+	if ( h * 2 < 1) {
+		return q;
+	}
+	if ( h * 3 < 2 ) {
+		return p + ( q - p ) * ( ( 2 / 3 ) - h ) * 6;
+	}
+	return p;
+}
+
+spaces.hsla.to = function( rgba ) {
+	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
+		return [ null, null, null, rgba[ 3 ] ];
+	}
+	var r = rgba[ 0 ] / 255,
+		g = rgba[ 1 ] / 255,
+		b = rgba[ 2 ] / 255,
+		a = rgba[ 3 ],
+		max = Math.max( r, g, b ),
+		min = Math.min( r, g, b ),
+		diff = max - min,
+		add = max + min,
+		l = add * 0.5,
+		h, s;
+
+	if ( min === max ) {
+		h = 0;
+	} else if ( r === max ) {
+		h = ( 60 * ( g - b ) / diff ) + 360;
+	} else if ( g === max ) {
+		h = ( 60 * ( b - r ) / diff ) + 120;
+	} else {
+		h = ( 60 * ( r - g ) / diff ) + 240;
+	}
+
+	// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
+	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
+	if ( diff === 0 ) {
+		s = 0;
+	} else if ( l <= 0.5 ) {
+		s = diff / add;
+	} else {
+		s = diff / ( 2 - add );
+	}
+	return [ Math.round(h) % 360, s, l, a == null ? 1 : a ];
+};
+
+spaces.hsla.from = function( hsla ) {
+	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
+		return [ null, null, null, hsla[ 3 ] ];
+	}
+	var h = hsla[ 0 ] / 360,
+		s = hsla[ 1 ],
+		l = hsla[ 2 ],
+		a = hsla[ 3 ],
+		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
+		p = 2 * l - q;
+
+	return [
+		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
+		Math.round( hue2rgb( p, q, h ) * 255 ),
+		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
+		a
+	];
+};
+
+each( spaces, function( spaceName, space ) {
+	var props = space.props,
+		cache = space.cache,
+		to = space.to,
+		from = space.from;
+
+	// makes rgba() and hsla()
+	color.fn[ spaceName ] = function( value ) {
+
+		// generate a cache for this space if it doesn't exist
+		if ( to && !this[ cache ] ) {
+			this[ cache ] = to( this._rgba );
+		}
+		if ( value === undefined ) {
+			return this[ cache ].slice();
+		}
+
+		var ret,
+			type = jQuery.type( value ),
+			arr = ( type === "array" || type === "object" ) ? value : arguments,
+			local = this[ cache ].slice();
+
+		each( props, function( key, prop ) {
+			var val = arr[ type === "object" ? key : prop.idx ];
+			if ( val == null ) {
+				val = local[ prop.idx ];
+			}
+			local[ prop.idx ] = clamp( val, prop );
+		});
+
+		if ( from ) {
+			ret = color( from( local ) );
+			ret[ cache ] = local;
+			return ret;
+		} else {
+			return color( local );
+		}
+	};
+
+	// makes red() green() blue() alpha() hue() saturation() lightness()
+	each( props, function( key, prop ) {
+		// alpha is included in more than one space
+		if ( color.fn[ key ] ) {
+			return;
+		}
+		color.fn[ key ] = function( value ) {
+			var vtype = jQuery.type( value ),
+				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
+				local = this[ fn ](),
+				cur = local[ prop.idx ],
+				match;
+
+			if ( vtype === "undefined" ) {
+				return cur;
+			}
+
+			if ( vtype === "function" ) {
+				value = value.call( this, cur );
+				vtype = jQuery.type( value );
+			}
+			if ( value == null && prop.empty ) {
+				return this;
+			}
+			if ( vtype === "string" ) {
+				match = rplusequals.exec( value );
+				if ( match ) {
+					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
+				}
+			}
+			local[ prop.idx ] = value;
+			return this[ fn ]( local );
+		};
+	});
+});
+
+// add cssHook and .fx.step function for each named hook.
+// accept a space separated string of properties
+color.hook = function( hook ) {
+	var hooks = hook.split( " " );
+	each( hooks, function( i, hook ) {
+		jQuery.cssHooks[ hook ] = {
+			set: function( elem, value ) {
+				var parsed, curElem,
+					backgroundColor = "";
+
+				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" || ( parsed = stringParse( value ) ) ) ) {
+					value = color( parsed || value );
+					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
+						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
+						while (
+							(backgroundColor === "" || backgroundColor === "transparent") &&
+							curElem && curElem.style
+						) {
+							try {
+								backgroundColor = jQuery.css( curElem, "backgroundColor" );
+								curElem = curElem.parentNode;
+							} catch ( e ) {
+							}
+						}
+
+						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
+							backgroundColor :
+							"_default" );
+					}
+
+					value = value.toRgbaString();
+				}
+				try {
+					elem.style[ hook ] = value;
+				} catch ( e ) {
+					// wrapped to prevent IE from throwing errors on "invalid" values like 'auto' or 'inherit'
+				}
+			}
+		};
+		jQuery.fx.step[ hook ] = function( fx ) {
+			if ( !fx.colorInit ) {
+				fx.start = color( fx.elem, hook );
+				fx.end = color( fx.end );
+				fx.colorInit = true;
+			}
+			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
+		};
+	});
+
+};
+
+color.hook( stepHooks );
+
+jQuery.cssHooks.borderColor = {
+	expand: function( value ) {
+		var expanded = {};
+
+		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
+			expanded[ "border" + part + "Color" ] = value;
+		});
+		return expanded;
+	}
+};
+
+// Basic color names only.
+// Usage of any of the other color names requires adding yourself or including
+// jquery.color.svg-names.js.
+colors = jQuery.Color.names = {
+	// 4.1. Basic color keywords
+	aqua: "#00ffff",
+	black: "#000000",
+	blue: "#0000ff",
+	fuchsia: "#ff00ff",
+	gray: "#808080",
+	green: "#008000",
+	lime: "#00ff00",
+	maroon: "#800000",
+	navy: "#000080",
+	olive: "#808000",
+	purple: "#800080",
+	red: "#ff0000",
+	silver: "#c0c0c0",
+	teal: "#008080",
+	white: "#ffffff",
+	yellow: "#ffff00",
+
+	// 4.2.3. "transparent" color keyword
+	transparent: [ null, null, null, 0 ],
+
+	_default: "#ffffff"
+};
+
+})( jQuery );
+
+/******************************************************************************/
+/****************************** CLASS ANIMATIONS ******************************/
+/******************************************************************************/
+(function() {
+
+var classAnimationActions = [ "add", "remove", "toggle" ],
+	shorthandStyles = {
+		border: 1,
+		borderBottom: 1,
+		borderColor: 1,
+		borderLeft: 1,
+		borderRight: 1,
+		borderTop: 1,
+		borderWidth: 1,
+		margin: 1,
+		padding: 1
+	};
+
+$.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function( _, prop ) {
+	$.fx.step[ prop ] = function( fx ) {
+		if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
+			jQuery.style( fx.elem, prop, fx.end );
+			fx.setAttr = true;
+		}
+	};
+});
+
+function getElementStyles( elem ) {
+	var key, len,
+		style = elem.ownerDocument.defaultView ?
+			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
+			elem.currentStyle,
+		styles = {};
+
+	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
+		len = style.length;
+		while ( len-- ) {
+			key = style[ len ];
+			if ( typeof style[ key ] === "string" ) {
+				styles[ $.camelCase( key ) ] = style[ key ];
+			}
+		}
+	// support: Opera, IE <9
+	} else {
+		for ( key in style ) {
+			if ( typeof style[ key ] === "string" ) {
+				styles[ key ] = style[ key ];
+			}
+		}
+	}
+
+	return styles;
+}
+
+function styleDifference( oldStyle, newStyle ) {
+	var diff = {},
+		name, value;
+
+	for ( name in newStyle ) {
+		value = newStyle[ name ];
+		if ( oldStyle[ name ] !== value ) {
+			if ( !shorthandStyles[ name ] ) {
+				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
+					diff[ name ] = value;
+				}
+			}
+		}
+	}
+
+	return diff;
+}
+
+// support: jQuery <1.8
+if ( !$.fn.addBack ) {
+	$.fn.addBack = function( selector ) {
+		return this.add( selector == null ?
+			this.prevObject : this.prevObject.filter( selector )
+		);
+	};
+}
+
+$.effects.animateClass = function( value, duration, easing, callback ) {
+	var o = $.speed( duration, easing, callback );
+
+	return this.queue( function() {
+		var animated = $( this ),
+			baseClass = animated.attr( "class" ) || "",
+			applyClassChange,
+			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;
+
+		// map the animated objects to store the original styles.
+		allAnimations = allAnimations.map(function() {
+			var el = $( this );
+			return {
+				el: el,
+				start: getElementStyles( this )
+			};
+		});
+
+		// apply class change
+		applyClassChange = function() {
+			$.each( classAnimationActions, function(i, action) {
+				if ( value[ action ] ) {
+					animated[ action + "Class" ]( value[ action ] );
+				}
+			});
+		};
+		applyClassChange();
+
+		// map all animated objects again - calculate new styles and diff
+		allAnimations = allAnimations.map(function() {
+			this.end = getElementStyles( this.el[ 0 ] );
+			this.diff = styleDifference( this.start, this.end );
+			return this;
+		});
+
+		// apply original class
+		animated.attr( "class", baseClass );
+
+		// map all animated objects again - this time collecting a promise
+		allAnimations = allAnimations.map(function() {
+			var styleInfo = this,
+				dfd = $.Deferred(),
+				opts = $.extend({}, o, {
+					queue: false,
+					complete: function() {
+						dfd.resolve( styleInfo );
+					}
+				});
+
+			this.el.animate( this.diff, opts );
+			return dfd.promise();
+		});
+
+		// once all animations have completed:
+		$.when.apply( $, allAnimations.get() ).done(function() {
+
+			// set the final class
+			applyClassChange();
+
+			// for each animated element,
+			// clear all css properties that were animated
+			$.each( arguments, function() {
+				var el = this.el;
+				$.each( this.diff, function(key) {
+					el.css( key, "" );
+				});
+			});
+
+			// this is guarnteed to be there if you use jQuery.speed()
+			// it also handles dequeuing the next anim...
+			o.complete.call( animated[ 0 ] );
+		});
+	});
+};
+
+$.fn.extend({
+	addClass: (function( orig ) {
+		return function( classNames, speed, easing, callback ) {
+			return speed ?
+				$.effects.animateClass.call( this,
+					{ add: classNames }, speed, easing, callback ) :
+				orig.apply( this, arguments );
+		};
+	})( $.fn.addClass ),
+
+	removeClass: (function( orig ) {
+		return function( classNames, speed, easing, callback ) {
+			return arguments.length > 1 ?
+				$.effects.animateClass.call( this,
+					{ remove: classNames }, speed, easing, callback ) :
+				orig.apply( this, arguments );
+		};
+	})( $.fn.removeClass ),
+
+	toggleClass: (function( orig ) {
+		return function( classNames, force, speed, easing, callback ) {
+			if ( typeof force === "boolean" || force === undefined ) {
+				if ( !speed ) {
+					// without speed parameter
+					return orig.apply( this, arguments );
+				} else {
+					return $.effects.animateClass.call( this,
+						(force ? { add: classNames } : { remove: classNames }),
+						speed, easing, callback );
+				}
+			} else {
+				// without force parameter
+				return $.effects.animateClass.call( this,
+					{ toggle: classNames }, force, speed, easing );
+			}
+		};
+	})( $.fn.toggleClass ),
+
+	switchClass: function( remove, add, speed, easing, callback) {
+		return $.effects.animateClass.call( this, {
+			add: add,
+			remove: remove
+		}, speed, easing, callback );
+	}
+});
+
+})();
+
+/******************************************************************************/
+/*********************************** EFFECTS **********************************/
+/******************************************************************************/
+
+(function() {
+
+$.extend( $.effects, {
+	version: "1.11.4",
+
+	// Saves a set of properties in a data storage
+	save: function( element, set ) {
+		for ( var i = 0; i < set.length; i++ ) {
+			if ( set[ i ] !== null ) {
+				element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
+			}
+		}
+	},
+
+	// Restores a set of previously saved properties from a data storage
+	restore: function( element, set ) {
+		var val, i;
+		for ( i = 0; i < set.length; i++ ) {
+			if ( set[ i ] !== null ) {
+				val = element.data( dataSpace + set[ i ] );
+				// support: jQuery 1.6.2
+				// http://bugs.jquery.com/ticket/9917
+				// jQuery 1.6.2 incorrectly returns undefined for any falsy value.
+				// We can't differentiate between "" and 0 here, so we just assume
+				// empty string since it's likely to be a more common value...
+				if ( val === undefined ) {
+					val = "";
+				}
+				element.css( set[ i ], val );
+			}
+		}
+	},
+
+	setMode: function( el, mode ) {
+		if (mode === "toggle") {
+			mode = el.is( ":hidden" ) ? "show" : "hide";
+		}
+		return mode;
+	},
+
+	// Translates a [top,left] array into a baseline value
+	// this should be a little more flexible in the future to handle a string & hash
+	getBaseline: function( origin, original ) {
+		var y, x;
+		switch ( origin[ 0 ] ) {
+			case "top": y = 0; break;
+			case "middle": y = 0.5; break;
+			case "bottom": y = 1; break;
+			default: y = origin[ 0 ] / original.height;
+		}
+		switch ( origin[ 1 ] ) {
+			case "left": x = 0; break;
+			case "center": x = 0.5; break;
+			case "right": x = 1; break;
+			default: x = origin[ 1 ] / original.width;
+		}
+		return {
+			x: x,
+			y: y
+		};
+	},
+
+	// Wraps the element around a wrapper that copies position properties
+	createWrapper: function( element ) {
+
+		// if the element is already wrapped, return it
+		if ( element.parent().is( ".ui-effects-wrapper" )) {
+			return element.parent();
+		}
+
+		// wrap the element
+		var props = {
+				width: element.outerWidth(true),
+				height: element.outerHeight(true),
+				"float": element.css( "float" )
+			},
+			wrapper = $( "<div></div>" )
+				.addClass( "ui-effects-wrapper" )
+				.css({
+					fontSize: "100%",
+					background: "transparent",
+					border: "none",
+					margin: 0,
+					padding: 0
+				}),
+			// Store the size in case width/height are defined in % - Fixes #5245
+			size = {
+				width: element.width(),
+				height: element.height()
+			},
+			active = document.activeElement;
+
+		// support: Firefox
+		// Firefox incorrectly exposes anonymous content
+		// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
+		try {
+			active.id;
+		} catch ( e ) {
+			active = document.body;
+		}
+
+		element.wrap( wrapper );
+
+		// Fixes #7595 - Elements lose focus when wrapped.
+		if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
+			$( active ).focus();
+		}
+
+		wrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element
+
+		// transfer positioning properties to the wrapper
+		if ( element.css( "position" ) === "static" ) {
+			wrapper.css({ position: "relative" });
+			element.css({ position: "relative" });
+		} else {
+			$.extend( props, {
+				position: element.css( "position" ),
+				zIndex: element.css( "z-index" )
+			});
+			$.each([ "top", "left", "bottom", "right" ], function(i, pos) {
+				props[ pos ] = element.css( pos );
+				if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
+					props[ pos ] = "auto";
+				}
+			});
+			element.css({
+				position: "relative",
+				top: 0,
+				left: 0,
+				right: "auto",
+				bottom: "auto"
+			});
+		}
+		element.css(size);
+
+		return wrapper.css( props ).show();
+	},
+
+	removeWrapper: function( element ) {
+		var active = document.activeElement;
+
+		if ( element.parent().is( ".ui-effects-wrapper" ) ) {
+			element.parent().replaceWith( element );
+
+			// Fixes #7595 - Elements lose focus when wrapped.
+			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
+				$( active ).focus();
+			}
+		}
+
+		return element;
+	},
+
+	setTransition: function( element, list, factor, value ) {
+		value = value || {};
+		$.each( list, function( i, x ) {
+			var unit = element.cssUnit( x );
+			if ( unit[ 0 ] > 0 ) {
+				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
+			}
+		});
+		return value;
+	}
+});
+
+// return an effect options object for the given parameters:
+function _normalizeArguments( effect, options, speed, callback ) {
+
+	// allow passing all options as the first parameter
+	if ( $.isPlainObject( effect ) ) {
+		options = effect;
+		effect = effect.effect;
+	}
+
+	// convert to an object
+	effect = { effect: effect };
+
+	// catch (effect, null, ...)
+	if ( options == null ) {
+		options = {};
+	}
+
+	// catch (effect, callback)
+	if ( $.isFunction( options ) ) {
+		callback = options;
+		speed = null;
+		options = {};
+	}
+
+	// catch (effect, speed, ?)
+	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
+		callback = speed;
+		speed = options;
+		options = {};
+	}
+
+	// catch (effect, options, callback)
+	if ( $.isFunction( speed ) ) {
+		callback = speed;
+		speed = null;
+	}
+
+	// add options to effect
+	if ( options ) {
+		$.extend( effect, options );
+	}
+
+	speed = speed || options.duration;
+	effect.duration = $.fx.off ? 0 :
+		typeof speed === "number" ? speed :
+		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
+		$.fx.speeds._default;
+
+	effect.complete = callback || options.complete;
+
+	return effect;
+}
+
+function standardAnimationOption( option ) {
+	// Valid standard speeds (nothing, number, named speed)
+	if ( !option || typeof option === "number" || $.fx.speeds[ option ] ) {
+		return true;
+	}
+
+	// Invalid strings - treat as "normal" speed
+	if ( typeof option === "string" && !$.effects.effect[ option ] ) {
+		return true;
+	}
+
+	// Complete callback
+	if ( $.isFunction( option ) ) {
+		return true;
+	}
+
+	// Options hash (but not naming an effect)
+	if ( typeof option === "object" && !option.effect ) {
+		return true;
+	}
+
+	// Didn't match any standard API
+	return false;
+}
+
+$.fn.extend({
+	effect: function( /* effect, options, speed, callback */ ) {
+		var args = _normalizeArguments.apply( this, arguments ),
+			mode = args.mode,
+			queue = args.queue,
+			effectMethod = $.effects.effect[ args.effect ];
+
+		if ( $.fx.off || !effectMethod ) {
+			// delegate to the original method (e.g., .show()) if possible
+			if ( mode ) {
+				return this[ mode ]( args.duration, args.complete );
+			} else {
+				return this.each( function() {
+					if ( args.complete ) {
+						args.complete.call( this );
+					}
+				});
+			}
+		}
+
+		function run( next ) {
+			var elem = $( this ),
+				complete = args.complete,
+				mode = args.mode;
+
+			function done() {
+				if ( $.isFunction( complete ) ) {
+					complete.call( elem[0] );
+				}
+				if ( $.isFunction( next ) ) {
+					next();
+				}
+			}
+
+			// If the element already has the correct final state, delegate to
+			// the core methods so the internal tracking of "olddisplay" works.
+			if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {
+				elem[ mode ]();
+				done();
+			} else {
+				effectMethod.call( elem[0], args, done );
+			}
+		}
+
+		return queue === false ? this.each( run ) : this.queue( queue || "fx", run );
+	},
+
+	show: (function( orig ) {
+		return function( option ) {
+			if ( standardAnimationOption( option ) ) {
+				return orig.apply( this, arguments );
+			} else {
+				var args = _normalizeArguments.apply( this, arguments );
+				args.mode = "show";
+				return this.effect.call( this, args );
+			}
+		};
+	})( $.fn.show ),
+
+	hide: (function( orig ) {
+		return function( option ) {
+			if ( standardAnimationOption( option ) ) {
+				return orig.apply( this, arguments );
+			} else {
+				var args = _normalizeArguments.apply( this, arguments );
+				args.mode = "hide";
+				return this.effect.call( this, args );
+			}
+		};
+	})( $.fn.hide ),
+
+	toggle: (function( orig ) {
+		return function( option ) {
+			if ( standardAnimationOption( option ) || typeof option === "boolean" ) {
+				return orig.apply( this, arguments );
+			} else {
+				var args = _normalizeArguments.apply( this, arguments );
+				args.mode = "toggle";
+				return this.effect.call( this, args );
+			}
+		};
+	})( $.fn.toggle ),
+
+	// helper functions
+	cssUnit: function(key) {
+		var style = this.css( key ),
+			val = [];
+
+		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
+			if ( style.indexOf( unit ) > 0 ) {
+				val = [ parseFloat( style ), unit ];
+			}
+		});
+		return val;
+	}
+});
+
+})();
+
+/******************************************************************************/
+/*********************************** EASING ***********************************/
+/******************************************************************************/
+
+(function() {
+
+// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)
+
+var baseEasings = {};
+
+$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
+	baseEasings[ name ] = function( p ) {
+		return Math.pow( p, i + 2 );
+	};
+});
+
+$.extend( baseEasings, {
+	Sine: function( p ) {
+		return 1 - Math.cos( p * Math.PI / 2 );
+	},
+	Circ: function( p ) {
+		return 1 - Math.sqrt( 1 - p * p );
+	},
+	Elastic: function( p ) {
+		return p === 0 || p === 1 ? p :
+			-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );
+	},
+	Back: function( p ) {
+		return p * p * ( 3 * p - 2 );
+	},
+	Bounce: function( p ) {
+		var pow2,
+			bounce = 4;
+
+		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
+		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
+	}
+});
+
+$.each( baseEasings, function( name, easeIn ) {
+	$.easing[ "easeIn" + name ] = easeIn;
+	$.easing[ "easeOut" + name ] = function( p ) {
+		return 1 - easeIn( 1 - p );
+	};
+	$.easing[ "easeInOut" + name ] = function( p ) {
+		return p < 0.5 ?
+			easeIn( p * 2 ) / 2 :
+			1 - easeIn( p * -2 + 2 ) / 2;
+	};
+});
+
+})();
+
+var effect = $.effects;
+
+
+/*!
+ * jQuery UI Effects Blind 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/blind-effect/
+ */
+
+
+var effectBlind = $.effects.effect.blind = function( o, done ) {
+	// Create element
+	var el = $( this ),
+		rvertical = /up|down|vertical/,
+		rpositivemotion = /up|left|vertical|horizontal/,
+		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
+		mode = $.effects.setMode( el, o.mode || "hide" ),
+		direction = o.direction || "up",
+		vertical = rvertical.test( direction ),
+		ref = vertical ? "height" : "width",
+		ref2 = vertical ? "top" : "left",
+		motion = rpositivemotion.test( direction ),
+		animation = {},
+		show = mode === "show",
+		wrapper, distance, margin;
+
+	// if already wrapped, the wrapper's properties are my property. #6245
+	if ( el.parent().is( ".ui-effects-wrapper" ) ) {
+		$.effects.save( el.parent(), props );
+	} else {
+		$.effects.save( el, props );
+	}
+	el.show();
+	wrapper = $.effects.createWrapper( el ).css({
+		overflow: "hidden"
+	});
+
+	distance = wrapper[ ref ]();
+	margin = parseFloat( wrapper.css( ref2 ) ) || 0;
+
+	animation[ ref ] = show ? distance : 0;
+	if ( !motion ) {
+		el
+			.css( vertical ? "bottom" : "right", 0 )
+			.css( vertical ? "top" : "left", "auto" )
+			.css({ position: "absolute" });
+
+		animation[ ref2 ] = show ? margin : distance + margin;
+	}
+
+	// start at 0 if we are showing
+	if ( show ) {
+		wrapper.css( ref, 0 );
+		if ( !motion ) {
+			wrapper.css( ref2, margin + distance );
+		}
+	}
+
+	// Animate
+	wrapper.animate( animation, {
+		duration: o.duration,
+		easing: o.easing,
+		queue: false,
+		complete: function() {
+			if ( mode === "hide" ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			$.effects.removeWrapper( el );
+			done();
+		}
+	});
+};
+
+
+/*!
+ * jQuery UI Effects Bounce 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/bounce-effect/
+ */
+
+
+var effectBounce = $.effects.effect.bounce = function( o, done ) {
+	var el = $( this ),
+		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
+
+		// defaults:
+		mode = $.effects.setMode( el, o.mode || "effect" ),
+		hide = mode === "hide",
+		show = mode === "show",
+		direction = o.direction || "up",
+		distance = o.distance,
+		times = o.times || 5,
+
+		// number of internal animations
+		anims = times * 2 + ( show || hide ? 1 : 0 ),
+		speed = o.duration / anims,
+		easing = o.easing,
+
+		// utility:
+		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
+		motion = ( direction === "up" || direction === "left" ),
+		i,
+		upAnim,
+		downAnim,
+
+		// we will need to re-assemble the queue to stack our animations in place
+		queue = el.queue(),
+		queuelen = queue.length;
+
+	// Avoid touching opacity to prevent clearType and PNG issues in IE
+	if ( show || hide ) {
+		props.push( "opacity" );
+	}
+
+	$.effects.save( el, props );
+	el.show();
+	$.effects.createWrapper( el ); // Create Wrapper
+
+	// default distance for the BIGGEST bounce is the outer Distance / 3
+	if ( !distance ) {
+		distance = el[ ref === "top" ? "outerHeight" : "outerWidth" ]() / 3;
+	}
+
+	if ( show ) {
+		downAnim = { opacity: 1 };
+		downAnim[ ref ] = 0;
+
+		// if we are showing, force opacity 0 and set the initial position
+		// then do the "first" animation
+		el.css( "opacity", 0 )
+			.css( ref, motion ? -distance * 2 : distance * 2 )
+			.animate( downAnim, speed, easing );
+	}
+
+	// start at the smallest distance if we are hiding
+	if ( hide ) {
+		distance = distance / Math.pow( 2, times - 1 );
+	}
+
+	downAnim = {};
+	downAnim[ ref ] = 0;
+	// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here
+	for ( i = 0; i < times; i++ ) {
+		upAnim = {};
+		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;
+
+		el.animate( upAnim, speed, easing )
+			.animate( downAnim, speed, easing );
+
+		distance = hide ? distance * 2 : distance / 2;
+	}
+
+	// Last Bounce when Hiding
+	if ( hide ) {
+		upAnim = { opacity: 0 };
+		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;
+
+		el.animate( upAnim, speed, easing );
+	}
+
+	el.queue(function() {
+		if ( hide ) {
+			el.hide();
+		}
+		$.effects.restore( el, props );
+		$.effects.removeWrapper( el );
+		done();
+	});
+
+	// inject all the animations we just queued to be first in line (after "inprogress")
+	if ( queuelen > 1) {
+		queue.splice.apply( queue,
+			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
+	}
+	el.dequeue();
+
+};
+
+
+/*!
+ * jQuery UI Effects Clip 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/clip-effect/
+ */
+
+
+var effectClip = $.effects.effect.clip = function( o, done ) {
+	// Create element
+	var el = $( this ),
+		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
+		mode = $.effects.setMode( el, o.mode || "hide" ),
+		show = mode === "show",
+		direction = o.direction || "vertical",
+		vert = direction === "vertical",
+		size = vert ? "height" : "width",
+		position = vert ? "top" : "left",
+		animation = {},
+		wrapper, animate, distance;
+
+	// Save & Show
+	$.effects.save( el, props );
+	el.show();
+
+	// Create Wrapper
+	wrapper = $.effects.createWrapper( el ).css({
+		overflow: "hidden"
+	});
+	animate = ( el[0].tagName === "IMG" ) ? wrapper : el;
+	distance = animate[ size ]();
+
+	// Shift
+	if ( show ) {
+		animate.css( size, 0 );
+		animate.css( position, distance / 2 );
+	}
+
+	// Create Animation Object:
+	animation[ size ] = show ? distance : 0;
+	animation[ position ] = show ? 0 : distance / 2;
+
+	// Animate
+	animate.animate( animation, {
+		queue: false,
+		duration: o.duration,
+		easing: o.easing,
+		complete: function() {
+			if ( !show ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			$.effects.removeWrapper( el );
+			done();
+		}
+	});
+
+};
+
+
+/*!
+ * jQuery UI Effects Drop 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/drop-effect/
+ */
+
+
+var effectDrop = $.effects.effect.drop = function( o, done ) {
+
+	var el = $( this ),
+		props = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ],
+		mode = $.effects.setMode( el, o.mode || "hide" ),
+		show = mode === "show",
+		direction = o.direction || "left",
+		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
+		motion = ( direction === "up" || direction === "left" ) ? "pos" : "neg",
+		animation = {
+			opacity: show ? 1 : 0
+		},
+		distance;
+
+	// Adjust
+	$.effects.save( el, props );
+	el.show();
+	$.effects.createWrapper( el );
+
+	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true ) / 2;
+
+	if ( show ) {
+		el
+			.css( "opacity", 0 )
+			.css( ref, motion === "pos" ? -distance : distance );
+	}
+
+	// Animation
+	animation[ ref ] = ( show ?
+		( motion === "pos" ? "+=" : "-=" ) :
+		( motion === "pos" ? "-=" : "+=" ) ) +
+		distance;
+
+	// Animate
+	el.animate( animation, {
+		queue: false,
+		duration: o.duration,
+		easing: o.easing,
+		complete: function() {
+			if ( mode === "hide" ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			$.effects.removeWrapper( el );
+			done();
+		}
+	});
+};
+
+
+/*!
+ * jQuery UI Effects Explode 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/explode-effect/
+ */
+
+
+var effectExplode = $.effects.effect.explode = function( o, done ) {
+
+	var rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,
+		cells = rows,
+		el = $( this ),
+		mode = $.effects.setMode( el, o.mode || "hide" ),
+		show = mode === "show",
+
+		// show and then visibility:hidden the element before calculating offset
+		offset = el.show().css( "visibility", "hidden" ).offset(),
+
+		// width and height of a piece
+		width = Math.ceil( el.outerWidth() / cells ),
+		height = Math.ceil( el.outerHeight() / rows ),
+		pieces = [],
+
+		// loop
+		i, j, left, top, mx, my;
+
+	// children animate complete:
+	function childComplete() {
+		pieces.push( this );
+		if ( pieces.length === rows * cells ) {
+			animComplete();
+		}
+	}
+
+	// clone the element for each row and cell.
+	for ( i = 0; i < rows ; i++ ) { // ===>
+		top = offset.top + i * height;
+		my = i - ( rows - 1 ) / 2 ;
+
+		for ( j = 0; j < cells ; j++ ) { // |||
+			left = offset.left + j * width;
+			mx = j - ( cells - 1 ) / 2 ;
+
+			// Create a clone of the now hidden main element that will be absolute positioned
+			// within a wrapper div off the -left and -top equal to size of our pieces
+			el
+				.clone()
+				.appendTo( "body" )
+				.wrap( "<div></div>" )
+				.css({
+					position: "absolute",
+					visibility: "visible",
+					left: -j * width,
+					top: -i * height
+				})
+
+			// select the wrapper - make it overflow: hidden and absolute positioned based on
+			// where the original was located +left and +top equal to the size of pieces
+				.parent()
+				.addClass( "ui-effects-explode" )
+				.css({
+					position: "absolute",
+					overflow: "hidden",
+					width: width,
+					height: height,
+					left: left + ( show ? mx * width : 0 ),
+					top: top + ( show ? my * height : 0 ),
+					opacity: show ? 0 : 1
+				}).animate({
+					left: left + ( show ? 0 : mx * width ),
+					top: top + ( show ? 0 : my * height ),
+					opacity: show ? 1 : 0
+				}, o.duration || 500, o.easing, childComplete );
+		}
+	}
+
+	function animComplete() {
+		el.css({
+			visibility: "visible"
+		});
+		$( pieces ).remove();
+		if ( !show ) {
+			el.hide();
+		}
+		done();
+	}
+};
+
+
+/*!
+ * jQuery UI Effects Fade 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/fade-effect/
+ */
+
+
+var effectFade = $.effects.effect.fade = function( o, done ) {
+	var el = $( this ),
+		mode = $.effects.setMode( el, o.mode || "toggle" );
+
+	el.animate({
+		opacity: mode
+	}, {
+		queue: false,
+		duration: o.duration,
+		easing: o.easing,
+		complete: done
+	});
+};
+
+
+/*!
+ * jQuery UI Effects Fold 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/fold-effect/
+ */
+
+
+var effectFold = $.effects.effect.fold = function( o, done ) {
+
+	// Create element
+	var el = $( this ),
+		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
+		mode = $.effects.setMode( el, o.mode || "hide" ),
+		show = mode === "show",
+		hide = mode === "hide",
+		size = o.size || 15,
+		percent = /([0-9]+)%/.exec( size ),
+		horizFirst = !!o.horizFirst,
+		widthFirst = show !== horizFirst,
+		ref = widthFirst ? [ "width", "height" ] : [ "height", "width" ],
+		duration = o.duration / 2,
+		wrapper, distance,
+		animation1 = {},
+		animation2 = {};
+
+	$.effects.save( el, props );
+	el.show();
+
+	// Create Wrapper
+	wrapper = $.effects.createWrapper( el ).css({
+		overflow: "hidden"
+	});
+	distance = widthFirst ?
+		[ wrapper.width(), wrapper.height() ] :
+		[ wrapper.height(), wrapper.width() ];
+
+	if ( percent ) {
+		size = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];
+	}
+	if ( show ) {
+		wrapper.css( horizFirst ? {
+			height: 0,
+			width: size
+		} : {
+			height: size,
+			width: 0
+		});
+	}
+
+	// Animation
+	animation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;
+	animation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;
+
+	// Animate
+	wrapper
+		.animate( animation1, duration, o.easing )
+		.animate( animation2, duration, o.easing, function() {
+			if ( hide ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			$.effects.removeWrapper( el );
+			done();
+		});
+
+};
+
+
+/*!
+ * jQuery UI Effects Highlight 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/highlight-effect/
+ */
+
+
+var effectHighlight = $.effects.effect.highlight = function( o, done ) {
+	var elem = $( this ),
+		props = [ "backgroundImage", "backgroundColor", "opacity" ],
+		mode = $.effects.setMode( elem, o.mode || "show" ),
+		animation = {
+			backgroundColor: elem.css( "backgroundColor" )
+		};
+
+	if (mode === "hide") {
+		animation.opacity = 0;
+	}
+
+	$.effects.save( elem, props );
+
+	elem
+		.show()
+		.css({
+			backgroundImage: "none",
+			backgroundColor: o.color || "#ffff99"
+		})
+		.animate( animation, {
+			queue: false,
+			duration: o.duration,
+			easing: o.easing,
+			complete: function() {
+				if ( mode === "hide" ) {
+					elem.hide();
+				}
+				$.effects.restore( elem, props );
+				done();
+			}
+		});
+};
+
+
+/*!
+ * jQuery UI Effects Size 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/size-effect/
+ */
+
+
+var effectSize = $.effects.effect.size = function( o, done ) {
+
+	// Create element
+	var original, baseline, factor,
+		el = $( this ),
+		props0 = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ],
+
+		// Always restore
+		props1 = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ],
+
+		// Copy for children
+		props2 = [ "width", "height", "overflow" ],
+		cProps = [ "fontSize" ],
+		vProps = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ],
+		hProps = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ],
+
+		// Set options
+		mode = $.effects.setMode( el, o.mode || "effect" ),
+		restore = o.restore || mode !== "effect",
+		scale = o.scale || "both",
+		origin = o.origin || [ "middle", "center" ],
+		position = el.css( "position" ),
+		props = restore ? props0 : props1,
+		zero = {
+			height: 0,
+			width: 0,
+			outerHeight: 0,
+			outerWidth: 0
+		};
+
+	if ( mode === "show" ) {
+		el.show();
+	}
+	original = {
+		height: el.height(),
+		width: el.width(),
+		outerHeight: el.outerHeight(),
+		outerWidth: el.outerWidth()
+	};
+
+	if ( o.mode === "toggle" && mode === "show" ) {
+		el.from = o.to || zero;
+		el.to = o.from || original;
+	} else {
+		el.from = o.from || ( mode === "show" ? zero : original );
+		el.to = o.to || ( mode === "hide" ? zero : original );
+	}
+
+	// Set scaling factor
+	factor = {
+		from: {
+			y: el.from.height / original.height,
+			x: el.from.width / original.width
+		},
+		to: {
+			y: el.to.height / original.height,
+			x: el.to.width / original.width
+		}
+	};
+
+	// Scale the css box
+	if ( scale === "box" || scale === "both" ) {
+
+		// Vertical props scaling
+		if ( factor.from.y !== factor.to.y ) {
+			props = props.concat( vProps );
+			el.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );
+			el.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );
+		}
+
+		// Horizontal props scaling
+		if ( factor.from.x !== factor.to.x ) {
+			props = props.concat( hProps );
+			el.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );
+			el.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );
+		}
+	}
+
+	// Scale the content
+	if ( scale === "content" || scale === "both" ) {
+
+		// Vertical props scaling
+		if ( factor.from.y !== factor.to.y ) {
+			props = props.concat( cProps ).concat( props2 );
+			el.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );
+			el.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );
+		}
+	}
+
+	$.effects.save( el, props );
+	el.show();
+	$.effects.createWrapper( el );
+	el.css( "overflow", "hidden" ).css( el.from );
+
+	// Adjust
+	if (origin) { // Calculate baseline shifts
+		baseline = $.effects.getBaseline( origin, original );
+		el.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;
+		el.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;
+		el.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;
+		el.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;
+	}
+	el.css( el.from ); // set top & left
+
+	// Animate
+	if ( scale === "content" || scale === "both" ) { // Scale the children
+
+		// Add margins/font-size
+		vProps = vProps.concat([ "marginTop", "marginBottom" ]).concat(cProps);
+		hProps = hProps.concat([ "marginLeft", "marginRight" ]);
+		props2 = props0.concat(vProps).concat(hProps);
+
+		el.find( "*[width]" ).each( function() {
+			var child = $( this ),
+				c_original = {
+					height: child.height(),
+					width: child.width(),
+					outerHeight: child.outerHeight(),
+					outerWidth: child.outerWidth()
+				};
+			if (restore) {
+				$.effects.save(child, props2);
+			}
+
+			child.from = {
+				height: c_original.height * factor.from.y,
+				width: c_original.width * factor.from.x,
+				outerHeight: c_original.outerHeight * factor.from.y,
+				outerWidth: c_original.outerWidth * factor.from.x
+			};
+			child.to = {
+				height: c_original.height * factor.to.y,
+				width: c_original.width * factor.to.x,
+				outerHeight: c_original.height * factor.to.y,
+				outerWidth: c_original.width * factor.to.x
+			};
+
+			// Vertical props scaling
+			if ( factor.from.y !== factor.to.y ) {
+				child.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );
+				child.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );
+			}
+
+			// Horizontal props scaling
+			if ( factor.from.x !== factor.to.x ) {
+				child.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );
+				child.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );
+			}
+
+			// Animate children
+			child.css( child.from );
+			child.animate( child.to, o.duration, o.easing, function() {
+
+				// Restore children
+				if ( restore ) {
+					$.effects.restore( child, props2 );
+				}
+			});
+		});
+	}
+
+	// Animate
+	el.animate( el.to, {
+		queue: false,
+		duration: o.duration,
+		easing: o.easing,
+		complete: function() {
+			if ( el.to.opacity === 0 ) {
+				el.css( "opacity", el.from.opacity );
+			}
+			if ( mode === "hide" ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			if ( !restore ) {
+
+				// we need to calculate our new positioning based on the scaling
+				if ( position === "static" ) {
+					el.css({
+						position: "relative",
+						top: el.to.top,
+						left: el.to.left
+					});
+				} else {
+					$.each([ "top", "left" ], function( idx, pos ) {
+						el.css( pos, function( _, str ) {
+							var val = parseInt( str, 10 ),
+								toRef = idx ? el.to.left : el.to.top;
+
+							// if original was "auto", recalculate the new value from wrapper
+							if ( str === "auto" ) {
+								return toRef + "px";
+							}
+
+							return val + toRef + "px";
+						});
+					});
+				}
+			}
+
+			$.effects.removeWrapper( el );
+			done();
+		}
+	});
+
+};
+
+
+/*!
+ * jQuery UI Effects Scale 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/scale-effect/
+ */
+
+
+var effectScale = $.effects.effect.scale = function( o, done ) {
+
+	// Create element
+	var el = $( this ),
+		options = $.extend( true, {}, o ),
+		mode = $.effects.setMode( el, o.mode || "effect" ),
+		percent = parseInt( o.percent, 10 ) ||
+			( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === "hide" ? 0 : 100 ) ),
+		direction = o.direction || "both",
+		origin = o.origin,
+		original = {
+			height: el.height(),
+			width: el.width(),
+			outerHeight: el.outerHeight(),
+			outerWidth: el.outerWidth()
+		},
+		factor = {
+			y: direction !== "horizontal" ? (percent / 100) : 1,
+			x: direction !== "vertical" ? (percent / 100) : 1
+		};
+
+	// We are going to pass this effect to the size effect:
+	options.effect = "size";
+	options.queue = false;
+	options.complete = done;
+
+	// Set default origin and restore for show/hide
+	if ( mode !== "effect" ) {
+		options.origin = origin || [ "middle", "center" ];
+		options.restore = true;
+	}
+
+	options.from = o.from || ( mode === "show" ? {
+		height: 0,
+		width: 0,
+		outerHeight: 0,
+		outerWidth: 0
+	} : original );
+	options.to = {
+		height: original.height * factor.y,
+		width: original.width * factor.x,
+		outerHeight: original.outerHeight * factor.y,
+		outerWidth: original.outerWidth * factor.x
+	};
+
+	// Fade option to support puff
+	if ( options.fade ) {
+		if ( mode === "show" ) {
+			options.from.opacity = 0;
+			options.to.opacity = 1;
+		}
+		if ( mode === "hide" ) {
+			options.from.opacity = 1;
+			options.to.opacity = 0;
+		}
+	}
+
+	// Animate
+	el.effect( options );
+
+};
+
+
+/*!
+ * jQuery UI Effects Puff 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/puff-effect/
+ */
+
+
+var effectPuff = $.effects.effect.puff = function( o, done ) {
+	var elem = $( this ),
+		mode = $.effects.setMode( elem, o.mode || "hide" ),
+		hide = mode === "hide",
+		percent = parseInt( o.percent, 10 ) || 150,
+		factor = percent / 100,
+		original = {
+			height: elem.height(),
+			width: elem.width(),
+			outerHeight: elem.outerHeight(),
+			outerWidth: elem.outerWidth()
+		};
+
+	$.extend( o, {
+		effect: "scale",
+		queue: false,
+		fade: true,
+		mode: mode,
+		complete: done,
+		percent: hide ? percent : 100,
+		from: hide ?
+			original :
+			{
+				height: original.height * factor,
+				width: original.width * factor,
+				outerHeight: original.outerHeight * factor,
+				outerWidth: original.outerWidth * factor
+			}
+	});
+
+	elem.effect( o );
+};
+
+
+/*!
+ * jQuery UI Effects Pulsate 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/pulsate-effect/
+ */
+
+
+var effectPulsate = $.effects.effect.pulsate = function( o, done ) {
+	var elem = $( this ),
+		mode = $.effects.setMode( elem, o.mode || "show" ),
+		show = mode === "show",
+		hide = mode === "hide",
+		showhide = ( show || mode === "hide" ),
+
+		// showing or hiding leaves of the "last" animation
+		anims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),
+		duration = o.duration / anims,
+		animateTo = 0,
+		queue = elem.queue(),
+		queuelen = queue.length,
+		i;
+
+	if ( show || !elem.is(":visible")) {
+		elem.css( "opacity", 0 ).show();
+		animateTo = 1;
+	}
+
+	// anims - 1 opacity "toggles"
+	for ( i = 1; i < anims; i++ ) {
+		elem.animate({
+			opacity: animateTo
+		}, duration, o.easing );
+		animateTo = 1 - animateTo;
+	}
+
+	elem.animate({
+		opacity: animateTo
+	}, duration, o.easing);
+
+	elem.queue(function() {
+		if ( hide ) {
+			elem.hide();
+		}
+		done();
+	});
+
+	// We just queued up "anims" animations, we need to put them next in the queue
+	if ( queuelen > 1 ) {
+		queue.splice.apply( queue,
+			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
+	}
+	elem.dequeue();
+};
+
+
+/*!
+ * jQuery UI Effects Shake 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/shake-effect/
+ */
+
+
+var effectShake = $.effects.effect.shake = function( o, done ) {
+
+	var el = $( this ),
+		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
+		mode = $.effects.setMode( el, o.mode || "effect" ),
+		direction = o.direction || "left",
+		distance = o.distance || 20,
+		times = o.times || 3,
+		anims = times * 2 + 1,
+		speed = Math.round( o.duration / anims ),
+		ref = (direction === "up" || direction === "down") ? "top" : "left",
+		positiveMotion = (direction === "up" || direction === "left"),
+		animation = {},
+		animation1 = {},
+		animation2 = {},
+		i,
+
+		// we will need to re-assemble the queue to stack our animations in place
+		queue = el.queue(),
+		queuelen = queue.length;
+
+	$.effects.save( el, props );
+	el.show();
+	$.effects.createWrapper( el );
+
+	// Animation
+	animation[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance;
+	animation1[ ref ] = ( positiveMotion ? "+=" : "-=" ) + distance * 2;
+	animation2[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance * 2;
+
+	// Animate
+	el.animate( animation, speed, o.easing );
+
+	// Shakes
+	for ( i = 1; i < times; i++ ) {
+		el.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );
+	}
+	el
+		.animate( animation1, speed, o.easing )
+		.animate( animation, speed / 2, o.easing )
+		.queue(function() {
+			if ( mode === "hide" ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			$.effects.removeWrapper( el );
+			done();
+		});
+
+	// inject all the animations we just queued to be first in line (after "inprogress")
+	if ( queuelen > 1) {
+		queue.splice.apply( queue,
+			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
+	}
+	el.dequeue();
+
+};
+
+
+/*!
+ * jQuery UI Effects Slide 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/slide-effect/
+ */
+
+
+var effectSlide = $.effects.effect.slide = function( o, done ) {
+
+	// Create element
+	var el = $( this ),
+		props = [ "position", "top", "bottom", "left", "right", "width", "height" ],
+		mode = $.effects.setMode( el, o.mode || "show" ),
+		show = mode === "show",
+		direction = o.direction || "left",
+		ref = (direction === "up" || direction === "down") ? "top" : "left",
+		positiveMotion = (direction === "up" || direction === "left"),
+		distance,
+		animation = {};
+
+	// Adjust
+	$.effects.save( el, props );
+	el.show();
+	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true );
+
+	$.effects.createWrapper( el ).css({
+		overflow: "hidden"
+	});
+
+	if ( show ) {
+		el.css( ref, positiveMotion ? (isNaN(distance) ? "-" + distance : -distance) : distance );
+	}
+
+	// Animation
+	animation[ ref ] = ( show ?
+		( positiveMotion ? "+=" : "-=") :
+		( positiveMotion ? "-=" : "+=")) +
+		distance;
+
+	// Animate
+	el.animate( animation, {
+		queue: false,
+		duration: o.duration,
+		easing: o.easing,
+		complete: function() {
+			if ( mode === "hide" ) {
+				el.hide();
+			}
+			$.effects.restore( el, props );
+			$.effects.removeWrapper( el );
+			done();
+		}
+	});
+};
+
+
+/*!
+ * jQuery UI Effects Transfer 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/transfer-effect/
+ */
+
+
+var effectTransfer = $.effects.effect.transfer = function( o, done ) {
+	var elem = $( this ),
+		target = $( o.to ),
+		targetFixed = target.css( "position" ) === "fixed",
+		body = $("body"),
+		fixTop = targetFixed ? body.scrollTop() : 0,
+		fixLeft = targetFixed ? body.scrollLeft() : 0,
+		endPosition = target.offset(),
+		animation = {
+			top: endPosition.top - fixTop,
+			left: endPosition.left - fixLeft,
+			height: target.innerHeight(),
+			width: target.innerWidth()
+		},
+		startPosition = elem.offset(),
+		transfer = $( "<div class='ui-effects-transfer'></div>" )
+			.appendTo( document.body )
+			.addClass( o.className )
+			.css({
+				top: startPosition.top - fixTop,
+				left: startPosition.left - fixLeft,
+				height: elem.innerHeight(),
+				width: elem.innerWidth(),
+				position: targetFixed ? "fixed" : "absolute"
+			})
+			.animate( animation, o.duration, o.easing, function() {
+				transfer.remove();
+				done();
+			});
+};
+
+
+/*!
+ * jQuery UI Progressbar 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/progressbar/
+ */
+
+
+var progressbar = $.widget( "ui.progressbar", {
+	version: "1.11.4",
+	options: {
+		max: 100,
+		value: 0,
+
+		change: null,
+		complete: null
+	},
+
+	min: 0,
+
+	_create: function() {
+		// Constrain initial value
+		this.oldValue = this.options.value = this._constrainedValue();
+
+		this.element
+			.addClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
+			.attr({
+				// Only set static values, aria-valuenow and aria-valuemax are
+				// set inside _refreshValue()
+				role: "progressbar",
+				"aria-valuemin": this.min
+			});
+
+		this.valueDiv = $( "<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>" )
+			.appendTo( this.element );
+
+		this._refreshValue();
+	},
+
+	_destroy: function() {
+		this.element
+			.removeClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
+			.removeAttr( "role" )
+			.removeAttr( "aria-valuemin" )
+			.removeAttr( "aria-valuemax" )
+			.removeAttr( "aria-valuenow" );
+
+		this.valueDiv.remove();
+	},
+
+	value: function( newValue ) {
+		if ( newValue === undefined ) {
+			return this.options.value;
+		}
+
+		this.options.value = this._constrainedValue( newValue );
+		this._refreshValue();
+	},
+
+	_constrainedValue: function( newValue ) {
+		if ( newValue === undefined ) {
+			newValue = this.options.value;
+		}
+
+		this.indeterminate = newValue === false;
+
+		// sanitize value
+		if ( typeof newValue !== "number" ) {
+			newValue = 0;
+		}
+
+		return this.indeterminate ? false :
+			Math.min( this.options.max, Math.max( this.min, newValue ) );
+	},
+
+	_setOptions: function( options ) {
+		// Ensure "value" option is set after other values (like max)
+		var value = options.value;
+		delete options.value;
+
+		this._super( options );
+
+		this.options.value = this._constrainedValue( value );
+		this._refreshValue();
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "max" ) {
+			// Don't allow a max less than min
+			value = Math.max( this.min, value );
+		}
+		if ( key === "disabled" ) {
+			this.element
+				.toggleClass( "ui-state-disabled", !!value )
+				.attr( "aria-disabled", value );
+		}
+		this._super( key, value );
+	},
+
+	_percentage: function() {
+		return this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );
+	},
+
+	_refreshValue: function() {
+		var value = this.options.value,
+			percentage = this._percentage();
+
+		this.valueDiv
+			.toggle( this.indeterminate || value > this.min )
+			.toggleClass( "ui-corner-right", value === this.options.max )
+			.width( percentage.toFixed(0) + "%" );
+
+		this.element.toggleClass( "ui-progressbar-indeterminate", this.indeterminate );
+
+		if ( this.indeterminate ) {
+			this.element.removeAttr( "aria-valuenow" );
+			if ( !this.overlayDiv ) {
+				this.overlayDiv = $( "<div class='ui-progressbar-overlay'></div>" ).appendTo( this.valueDiv );
+			}
+		} else {
+			this.element.attr({
+				"aria-valuemax": this.options.max,
+				"aria-valuenow": value
+			});
+			if ( this.overlayDiv ) {
+				this.overlayDiv.remove();
+				this.overlayDiv = null;
+			}
+		}
+
+		if ( this.oldValue !== value ) {
+			this.oldValue = value;
+			this._trigger( "change" );
+		}
+		if ( value === this.options.max ) {
+			this._trigger( "complete" );
+		}
+	}
+});
+
+
+/*!
+ * jQuery UI Selectable 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/selectable/
+ */
+
+
+var selectable = $.widget("ui.selectable", $.ui.mouse, {
+	version: "1.11.4",
+	options: {
+		appendTo: "body",
+		autoRefresh: true,
+		distance: 0,
+		filter: "*",
+		tolerance: "touch",
+
+		// callbacks
+		selected: null,
+		selecting: null,
+		start: null,
+		stop: null,
+		unselected: null,
+		unselecting: null
+	},
+	_create: function() {
+		var selectees,
+			that = this;
+
+		this.element.addClass("ui-selectable");
+
+		this.dragged = false;
+
+		// cache selectee children based on filter
+		this.refresh = function() {
+			selectees = $(that.options.filter, that.element[0]);
+			selectees.addClass("ui-selectee");
+			selectees.each(function() {
+				var $this = $(this),
+					pos = $this.offset();
+				$.data(this, "selectable-item", {
+					element: this,
+					$element: $this,
+					left: pos.left,
+					top: pos.top,
+					right: pos.left + $this.outerWidth(),
+					bottom: pos.top + $this.outerHeight(),
+					startselected: false,
+					selected: $this.hasClass("ui-selected"),
+					selecting: $this.hasClass("ui-selecting"),
+					unselecting: $this.hasClass("ui-unselecting")
+				});
+			});
+		};
+		this.refresh();
+
+		this.selectees = selectees.addClass("ui-selectee");
+
+		this._mouseInit();
+
+		this.helper = $("<div class='ui-selectable-helper'></div>");
+	},
+
+	_destroy: function() {
+		this.selectees
+			.removeClass("ui-selectee")
+			.removeData("selectable-item");
+		this.element
+			.removeClass("ui-selectable ui-selectable-disabled");
+		this._mouseDestroy();
+	},
+
+	_mouseStart: function(event) {
+		var that = this,
+			options = this.options;
+
+		this.opos = [ event.pageX, event.pageY ];
+
+		if (this.options.disabled) {
+			return;
+		}
+
+		this.selectees = $(options.filter, this.element[0]);
+
+		this._trigger("start", event);
+
+		$(options.appendTo).append(this.helper);
+		// position helper (lasso)
+		this.helper.css({
+			"left": event.pageX,
+			"top": event.pageY,
+			"width": 0,
+			"height": 0
+		});
+
+		if (options.autoRefresh) {
+			this.refresh();
+		}
+
+		this.selectees.filter(".ui-selected").each(function() {
+			var selectee = $.data(this, "selectable-item");
+			selectee.startselected = true;
+			if (!event.metaKey && !event.ctrlKey) {
+				selectee.$element.removeClass("ui-selected");
+				selectee.selected = false;
+				selectee.$element.addClass("ui-unselecting");
+				selectee.unselecting = true;
+				// selectable UNSELECTING callback
+				that._trigger("unselecting", event, {
+					unselecting: selectee.element
+				});
+			}
+		});
+
+		$(event.target).parents().addBack().each(function() {
+			var doSelect,
+				selectee = $.data(this, "selectable-item");
+			if (selectee) {
+				doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass("ui-selected");
+				selectee.$element
+					.removeClass(doSelect ? "ui-unselecting" : "ui-selected")
+					.addClass(doSelect ? "ui-selecting" : "ui-unselecting");
+				selectee.unselecting = !doSelect;
+				selectee.selecting = doSelect;
+				selectee.selected = doSelect;
+				// selectable (UN)SELECTING callback
+				if (doSelect) {
+					that._trigger("selecting", event, {
+						selecting: selectee.element
+					});
+				} else {
+					that._trigger("unselecting", event, {
+						unselecting: selectee.element
+					});
+				}
+				return false;
+			}
+		});
+
+	},
+
+	_mouseDrag: function(event) {
+
+		this.dragged = true;
+
+		if (this.options.disabled) {
+			return;
+		}
+
+		var tmp,
+			that = this,
+			options = this.options,
+			x1 = this.opos[0],
+			y1 = this.opos[1],
+			x2 = event.pageX,
+			y2 = event.pageY;
+
+		if (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }
+		if (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }
+		this.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });
+
+		this.selectees.each(function() {
+			var selectee = $.data(this, "selectable-item"),
+				hit = false;
+
+			//prevent helper from being selected if appendTo: selectable
+			if (!selectee || selectee.element === that.element[0]) {
+				return;
+			}
+
+			if (options.tolerance === "touch") {
+				hit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );
+			} else if (options.tolerance === "fit") {
+				hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);
+			}
+
+			if (hit) {
+				// SELECT
+				if (selectee.selected) {
+					selectee.$element.removeClass("ui-selected");
+					selectee.selected = false;
+				}
+				if (selectee.unselecting) {
+					selectee.$element.removeClass("ui-unselecting");
+					selectee.unselecting = false;
+				}
+				if (!selectee.selecting) {
+					selectee.$element.addClass("ui-selecting");
+					selectee.selecting = true;
+					// selectable SELECTING callback
+					that._trigger("selecting", event, {
+						selecting: selectee.element
+					});
+				}
+			} else {
+				// UNSELECT
+				if (selectee.selecting) {
+					if ((event.metaKey || event.ctrlKey) && selectee.startselected) {
+						selectee.$element.removeClass("ui-selecting");
+						selectee.selecting = false;
+						selectee.$element.addClass("ui-selected");
+						selectee.selected = true;
+					} else {
+						selectee.$element.removeClass("ui-selecting");
+						selectee.selecting = false;
+						if (selectee.startselected) {
+							selectee.$element.addClass("ui-unselecting");
+							selectee.unselecting = true;
+						}
+						// selectable UNSELECTING callback
+						that._trigger("unselecting", event, {
+							unselecting: selectee.element
+						});
+					}
+				}
+				if (selectee.selected) {
+					if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {
+						selectee.$element.removeClass("ui-selected");
+						selectee.selected = false;
+
+						selectee.$element.addClass("ui-unselecting");
+						selectee.unselecting = true;
+						// selectable UNSELECTING callback
+						that._trigger("unselecting", event, {
+							unselecting: selectee.element
+						});
+					}
+				}
+			}
+		});
+
+		return false;
+	},
+
+	_mouseStop: function(event) {
+		var that = this;
+
+		this.dragged = false;
+
+		$(".ui-unselecting", this.element[0]).each(function() {
+			var selectee = $.data(this, "selectable-item");
+			selectee.$element.removeClass("ui-unselecting");
+			selectee.unselecting = false;
+			selectee.startselected = false;
+			that._trigger("unselected", event, {
+				unselected: selectee.element
+			});
+		});
+		$(".ui-selecting", this.element[0]).each(function() {
+			var selectee = $.data(this, "selectable-item");
+			selectee.$element.removeClass("ui-selecting").addClass("ui-selected");
+			selectee.selecting = false;
+			selectee.selected = true;
+			selectee.startselected = true;
+			that._trigger("selected", event, {
+				selected: selectee.element
+			});
+		});
+		this._trigger("stop", event);
+
+		this.helper.remove();
+
+		return false;
+	}
+
+});
+
+
+/*!
+ * jQuery UI Selectmenu 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/selectmenu
+ */
+
+
+var selectmenu = $.widget( "ui.selectmenu", {
+	version: "1.11.4",
+	defaultElement: "<select>",
+	options: {
+		appendTo: null,
+		disabled: null,
+		icons: {
+			button: "ui-icon-triangle-1-s"
+		},
+		position: {
+			my: "left top",
+			at: "left bottom",
+			collision: "none"
+		},
+		width: null,
+
+		// callbacks
+		change: null,
+		close: null,
+		focus: null,
+		open: null,
+		select: null
+	},
+
+	_create: function() {
+		var selectmenuId = this.element.uniqueId().attr( "id" );
+		this.ids = {
+			element: selectmenuId,
+			button: selectmenuId + "-button",
+			menu: selectmenuId + "-menu"
+		};
+
+		this._drawButton();
+		this._drawMenu();
+
+		if ( this.options.disabled ) {
+			this.disable();
+		}
+	},
+
+	_drawButton: function() {
+		var that = this;
+
+		// Associate existing label with the new button
+		this.label = $( "label[for='" + this.ids.element + "']" ).attr( "for", this.ids.button );
+		this._on( this.label, {
+			click: function( event ) {
+				this.button.focus();
+				event.preventDefault();
+			}
+		});
+
+		// Hide original select element
+		this.element.hide();
+
+		// Create button
+		this.button = $( "<span>", {
+			"class": "ui-selectmenu-button ui-widget ui-state-default ui-corner-all",
+			tabindex: this.options.disabled ? -1 : 0,
+			id: this.ids.button,
+			role: "combobox",
+			"aria-expanded": "false",
+			"aria-autocomplete": "list",
+			"aria-owns": this.ids.menu,
+			"aria-haspopup": "true"
+		})
+			.insertAfter( this.element );
+
+		$( "<span>", {
+			"class": "ui-icon " + this.options.icons.button
+		})
+			.prependTo( this.button );
+
+		this.buttonText = $( "<span>", {
+			"class": "ui-selectmenu-text"
+		})
+			.appendTo( this.button );
+
+		this._setText( this.buttonText, this.element.find( "option:selected" ).text() );
+		this._resizeButton();
+
+		this._on( this.button, this._buttonEvents );
+		this.button.one( "focusin", function() {
+
+			// Delay rendering the menu items until the button receives focus.
+			// The menu may have already been rendered via a programmatic open.
+			if ( !that.menuItems ) {
+				that._refreshMenu();
+			}
+		});
+		this._hoverable( this.button );
+		this._focusable( this.button );
+	},
+
+	_drawMenu: function() {
+		var that = this;
+
+		// Create menu
+		this.menu = $( "<ul>", {
+			"aria-hidden": "true",
+			"aria-labelledby": this.ids.button,
+			id: this.ids.menu
+		});
+
+		// Wrap menu
+		this.menuWrap = $( "<div>", {
+			"class": "ui-selectmenu-menu ui-front"
+		})
+			.append( this.menu )
+			.appendTo( this._appendTo() );
+
+		// Initialize menu widget
+		this.menuInstance = this.menu
+			.menu({
+				role: "listbox",
+				select: function( event, ui ) {
+					event.preventDefault();
+
+					// support: IE8
+					// If the item was selected via a click, the text selection
+					// will be destroyed in IE
+					that._setSelection();
+
+					that._select( ui.item.data( "ui-selectmenu-item" ), event );
+				},
+				focus: function( event, ui ) {
+					var item = ui.item.data( "ui-selectmenu-item" );
+
+					// Prevent inital focus from firing and check if its a newly focused item
+					if ( that.focusIndex != null && item.index !== that.focusIndex ) {
+						that._trigger( "focus", event, { item: item } );
+						if ( !that.isOpen ) {
+							that._select( item, event );
+						}
+					}
+					that.focusIndex = item.index;
+
+					that.button.attr( "aria-activedescendant",
+						that.menuItems.eq( item.index ).attr( "id" ) );
+				}
+			})
+			.menu( "instance" );
+
+		// Adjust menu styles to dropdown
+		this.menu
+			.addClass( "ui-corner-bottom" )
+			.removeClass( "ui-corner-all" );
+
+		// Don't close the menu on mouseleave
+		this.menuInstance._off( this.menu, "mouseleave" );
+
+		// Cancel the menu's collapseAll on document click
+		this.menuInstance._closeOnDocumentClick = function() {
+			return false;
+		};
+
+		// Selects often contain empty items, but never contain dividers
+		this.menuInstance._isDivider = function() {
+			return false;
+		};
+	},
+
+	refresh: function() {
+		this._refreshMenu();
+		this._setText( this.buttonText, this._getSelectedItem().text() );
+		if ( !this.options.width ) {
+			this._resizeButton();
+		}
+	},
+
+	_refreshMenu: function() {
+		this.menu.empty();
+
+		var item,
+			options = this.element.find( "option" );
+
+		if ( !options.length ) {
+			return;
+		}
+
+		this._parseOptions( options );
+		this._renderMenu( this.menu, this.items );
+
+		this.menuInstance.refresh();
+		this.menuItems = this.menu.find( "li" ).not( ".ui-selectmenu-optgroup" );
+
+		item = this._getSelectedItem();
+
+		// Update the menu to have the correct item focused
+		this.menuInstance.focus( null, item );
+		this._setAria( item.data( "ui-selectmenu-item" ) );
+
+		// Set disabled state
+		this._setOption( "disabled", this.element.prop( "disabled" ) );
+	},
+
+	open: function( event ) {
+		if ( this.options.disabled ) {
+			return;
+		}
+
+		// If this is the first time the menu is being opened, render the items
+		if ( !this.menuItems ) {
+			this._refreshMenu();
+		} else {
+
+			// Menu clears focus on close, reset focus to selected item
+			this.menu.find( ".ui-state-focus" ).removeClass( "ui-state-focus" );
+			this.menuInstance.focus( null, this._getSelectedItem() );
+		}
+
+		this.isOpen = true;
+		this._toggleAttr();
+		this._resizeMenu();
+		this._position();
+
+		this._on( this.document, this._documentClick );
+
+		this._trigger( "open", event );
+	},
+
+	_position: function() {
+		this.menuWrap.position( $.extend( { of: this.button }, this.options.position ) );
+	},
+
+	close: function( event ) {
+		if ( !this.isOpen ) {
+			return;
+		}
+
+		this.isOpen = false;
+		this._toggleAttr();
+
+		this.range = null;
+		this._off( this.document );
+
+		this._trigger( "close", event );
+	},
+
+	widget: function() {
+		return this.button;
+	},
+
+	menuWidget: function() {
+		return this.menu;
+	},
+
+	_renderMenu: function( ul, items ) {
+		var that = this,
+			currentOptgroup = "";
+
+		$.each( items, function( index, item ) {
+			if ( item.optgroup !== currentOptgroup ) {
+				$( "<li>", {
+					"class": "ui-selectmenu-optgroup ui-menu-divider" +
+						( item.element.parent( "optgroup" ).prop( "disabled" ) ?
+							" ui-state-disabled" :
+							"" ),
+					text: item.optgroup
+				})
+					.appendTo( ul );
+
+				currentOptgroup = item.optgroup;
+			}
+
+			that._renderItemData( ul, item );
+		});
+	},
+
+	_renderItemData: function( ul, item ) {
+		return this._renderItem( ul, item ).data( "ui-selectmenu-item", item );
+	},
+
+	_renderItem: function( ul, item ) {
+		var li = $( "<li>" );
+
+		if ( item.disabled ) {
+			li.addClass( "ui-state-disabled" );
+		}
+		this._setText( li, item.label );
+
+		return li.appendTo( ul );
+	},
+
+	_setText: function( element, value ) {
+		if ( value ) {
+			element.text( value );
+		} else {
+			element.html( "&#160;" );
+		}
+	},
+
+	_move: function( direction, event ) {
+		var item, next,
+			filter = ".ui-menu-item";
+
+		if ( this.isOpen ) {
+			item = this.menuItems.eq( this.focusIndex );
+		} else {
+			item = this.menuItems.eq( this.element[ 0 ].selectedIndex );
+			filter += ":not(.ui-state-disabled)";
+		}
+
+		if ( direction === "first" || direction === "last" ) {
+			next = item[ direction === "first" ? "prevAll" : "nextAll" ]( filter ).eq( -1 );
+		} else {
+			next = item[ direction + "All" ]( filter ).eq( 0 );
+		}
+
+		if ( next.length ) {
+			this.menuInstance.focus( event, next );
+		}
+	},
+
+	_getSelectedItem: function() {
+		return this.menuItems.eq( this.element[ 0 ].selectedIndex );
+	},
+
+	_toggle: function( event ) {
+		this[ this.isOpen ? "close" : "open" ]( event );
+	},
+
+	_setSelection: function() {
+		var selection;
+
+		if ( !this.range ) {
+			return;
+		}
+
+		if ( window.getSelection ) {
+			selection = window.getSelection();
+			selection.removeAllRanges();
+			selection.addRange( this.range );
+
+		// support: IE8
+		} else {
+			this.range.select();
+		}
+
+		// support: IE
+		// Setting the text selection kills the button focus in IE, but
+		// restoring the focus doesn't kill the selection.
+		this.button.focus();
+	},
+
+	_documentClick: {
+		mousedown: function( event ) {
+			if ( !this.isOpen ) {
+				return;
+			}
+
+			if ( !$( event.target ).closest( ".ui-selectmenu-menu, #" + this.ids.button ).length ) {
+				this.close( event );
+			}
+		}
+	},
+
+	_buttonEvents: {
+
+		// Prevent text selection from being reset when interacting with the selectmenu (#10144)
+		mousedown: function() {
+			var selection;
+
+			if ( window.getSelection ) {
+				selection = window.getSelection();
+				if ( selection.rangeCount ) {
+					this.range = selection.getRangeAt( 0 );
+				}
+
+			// support: IE8
+			} else {
+				this.range = document.selection.createRange();
+			}
+		},
+
+		click: function( event ) {
+			this._setSelection();
+			this._toggle( event );
+		},
+
+		keydown: function( event ) {
+			var preventDefault = true;
+			switch ( event.keyCode ) {
+				case $.ui.keyCode.TAB:
+				case $.ui.keyCode.ESCAPE:
+					this.close( event );
+					preventDefault = false;
+					break;
+				case $.ui.keyCode.ENTER:
+					if ( this.isOpen ) {
+						this._selectFocusedItem( event );
+					}
+					break;
+				case $.ui.keyCode.UP:
+					if ( event.altKey ) {
+						this._toggle( event );
+					} else {
+						this._move( "prev", event );
+					}
+					break;
+				case $.ui.keyCode.DOWN:
+					if ( event.altKey ) {
+						this._toggle( event );
+					} else {
+						this._move( "next", event );
+					}
+					break;
+				case $.ui.keyCode.SPACE:
+					if ( this.isOpen ) {
+						this._selectFocusedItem( event );
+					} else {
+						this._toggle( event );
+					}
+					break;
+				case $.ui.keyCode.LEFT:
+					this._move( "prev", event );
+					break;
+				case $.ui.keyCode.RIGHT:
+					this._move( "next", event );
+					break;
+				case $.ui.keyCode.HOME:
+				case $.ui.keyCode.PAGE_UP:
+					this._move( "first", event );
+					break;
+				case $.ui.keyCode.END:
+				case $.ui.keyCode.PAGE_DOWN:
+					this._move( "last", event );
+					break;
+				default:
+					this.menu.trigger( event );
+					preventDefault = false;
+			}
+
+			if ( preventDefault ) {
+				event.preventDefault();
+			}
+		}
+	},
+
+	_selectFocusedItem: function( event ) {
+		var item = this.menuItems.eq( this.focusIndex );
+		if ( !item.hasClass( "ui-state-disabled" ) ) {
+			this._select( item.data( "ui-selectmenu-item" ), event );
+		}
+	},
+
+	_select: function( item, event ) {
+		var oldIndex = this.element[ 0 ].selectedIndex;
+
+		// Change native select element
+		this.element[ 0 ].selectedIndex = item.index;
+		this._setText( this.buttonText, item.label );
+		this._setAria( item );
+		this._trigger( "select", event, { item: item } );
+
+		if ( item.index !== oldIndex ) {
+			this._trigger( "change", event, { item: item } );
+		}
+
+		this.close( event );
+	},
+
+	_setAria: function( item ) {
+		var id = this.menuItems.eq( item.index ).attr( "id" );
+
+		this.button.attr({
+			"aria-labelledby": id,
+			"aria-activedescendant": id
+		});
+		this.menu.attr( "aria-activedescendant", id );
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "icons" ) {
+			this.button.find( "span.ui-icon" )
+				.removeClass( this.options.icons.button )
+				.addClass( value.button );
+		}
+
+		this._super( key, value );
+
+		if ( key === "appendTo" ) {
+			this.menuWrap.appendTo( this._appendTo() );
+		}
+
+		if ( key === "disabled" ) {
+			this.menuInstance.option( "disabled", value );
+			this.button
+				.toggleClass( "ui-state-disabled", value )
+				.attr( "aria-disabled", value );
+
+			this.element.prop( "disabled", value );
+			if ( value ) {
+				this.button.attr( "tabindex", -1 );
+				this.close();
+			} else {
+				this.button.attr( "tabindex", 0 );
+			}
+		}
+
+		if ( key === "width" ) {
+			this._resizeButton();
+		}
+	},
+
+	_appendTo: function() {
+		var element = this.options.appendTo;
+
+		if ( element ) {
+			element = element.jquery || element.nodeType ?
+				$( element ) :
+				this.document.find( element ).eq( 0 );
+		}
+
+		if ( !element || !element[ 0 ] ) {
+			element = this.element.closest( ".ui-front" );
+		}
+
+		if ( !element.length ) {
+			element = this.document[ 0 ].body;
+		}
+
+		return element;
+	},
+
+	_toggleAttr: function() {
+		this.button
+			.toggleClass( "ui-corner-top", this.isOpen )
+			.toggleClass( "ui-corner-all", !this.isOpen )
+			.attr( "aria-expanded", this.isOpen );
+		this.menuWrap.toggleClass( "ui-selectmenu-open", this.isOpen );
+		this.menu.attr( "aria-hidden", !this.isOpen );
+	},
+
+	_resizeButton: function() {
+		var width = this.options.width;
+
+		if ( !width ) {
+			width = this.element.show().outerWidth();
+			this.element.hide();
+		}
+
+		this.button.outerWidth( width );
+	},
+
+	_resizeMenu: function() {
+		this.menu.outerWidth( Math.max(
+			this.button.outerWidth(),
+
+			// support: IE10
+			// IE10 wraps long text (possibly a rounding bug)
+			// so we add 1px to avoid the wrapping
+			this.menu.width( "" ).outerWidth() + 1
+		) );
+	},
+
+	_getCreateOptions: function() {
+		return { disabled: this.element.prop( "disabled" ) };
+	},
+
+	_parseOptions: function( options ) {
+		var data = [];
+		options.each(function( index, item ) {
+			var option = $( item ),
+				optgroup = option.parent( "optgroup" );
+			data.push({
+				element: option,
+				index: index,
+				value: option.val(),
+				label: option.text(),
+				optgroup: optgroup.attr( "label" ) || "",
+				disabled: optgroup.prop( "disabled" ) || option.prop( "disabled" )
+			});
+		});
+		this.items = data;
+	},
+
+	_destroy: function() {
+		this.menuWrap.remove();
+		this.button.remove();
+		this.element.show();
+		this.element.removeUniqueId();
+		this.label.attr( "for", this.ids.element );
+	}
+});
+
+
+/*!
+ * jQuery UI Slider 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/slider/
+ */
+
+
+var slider = $.widget( "ui.slider", $.ui.mouse, {
+	version: "1.11.4",
+	widgetEventPrefix: "slide",
+
+	options: {
+		animate: false,
+		distance: 0,
+		max: 100,
+		min: 0,
+		orientation: "horizontal",
+		range: false,
+		step: 1,
+		value: 0,
+		values: null,
+
+		// callbacks
+		change: null,
+		slide: null,
+		start: null,
+		stop: null
+	},
+
+	// number of pages in a slider
+	// (how many times can you page up/down to go through the whole range)
+	numPages: 5,
+
+	_create: function() {
+		this._keySliding = false;
+		this._mouseSliding = false;
+		this._animateOff = true;
+		this._handleIndex = null;
+		this._detectOrientation();
+		this._mouseInit();
+		this._calculateNewMax();
+
+		this.element
+			.addClass( "ui-slider" +
+				" ui-slider-" + this.orientation +
+				" ui-widget" +
+				" ui-widget-content" +
+				" ui-corner-all");
+
+		this._refresh();
+		this._setOption( "disabled", this.options.disabled );
+
+		this._animateOff = false;
+	},
+
+	_refresh: function() {
+		this._createRange();
+		this._createHandles();
+		this._setupEvents();
+		this._refreshValue();
+	},
+
+	_createHandles: function() {
+		var i, handleCount,
+			options = this.options,
+			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
+			handle = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",
+			handles = [];
+
+		handleCount = ( options.values && options.values.length ) || 1;
+
+		if ( existingHandles.length > handleCount ) {
+			existingHandles.slice( handleCount ).remove();
+			existingHandles = existingHandles.slice( 0, handleCount );
+		}
+
+		for ( i = existingHandles.length; i < handleCount; i++ ) {
+			handles.push( handle );
+		}
+
+		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );
+
+		this.handle = this.handles.eq( 0 );
+
+		this.handles.each(function( i ) {
+			$( this ).data( "ui-slider-handle-index", i );
+		});
+	},
+
+	_createRange: function() {
+		var options = this.options,
+			classes = "";
+
+		if ( options.range ) {
+			if ( options.range === true ) {
+				if ( !options.values ) {
+					options.values = [ this._valueMin(), this._valueMin() ];
+				} else if ( options.values.length && options.values.length !== 2 ) {
+					options.values = [ options.values[0], options.values[0] ];
+				} else if ( $.isArray( options.values ) ) {
+					options.values = options.values.slice(0);
+				}
+			}
+
+			if ( !this.range || !this.range.length ) {
+				this.range = $( "<div></div>" )
+					.appendTo( this.element );
+
+				classes = "ui-slider-range" +
+				// note: this isn't the most fittingly semantic framework class for this element,
+				// but worked best visually with a variety of themes
+				" ui-widget-header ui-corner-all";
+			} else {
+				this.range.removeClass( "ui-slider-range-min ui-slider-range-max" )
+					// Handle range switching from true to min/max
+					.css({
+						"left": "",
+						"bottom": ""
+					});
+			}
+
+			this.range.addClass( classes +
+				( ( options.range === "min" || options.range === "max" ) ? " ui-slider-range-" + options.range : "" ) );
+		} else {
+			if ( this.range ) {
+				this.range.remove();
+			}
+			this.range = null;
+		}
+	},
+
+	_setupEvents: function() {
+		this._off( this.handles );
+		this._on( this.handles, this._handleEvents );
+		this._hoverable( this.handles );
+		this._focusable( this.handles );
+	},
+
+	_destroy: function() {
+		this.handles.remove();
+		if ( this.range ) {
+			this.range.remove();
+		}
+
+		this.element
+			.removeClass( "ui-slider" +
+				" ui-slider-horizontal" +
+				" ui-slider-vertical" +
+				" ui-widget" +
+				" ui-widget-content" +
+				" ui-corner-all" );
+
+		this._mouseDestroy();
+	},
+
+	_mouseCapture: function( event ) {
+		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
+			that = this,
+			o = this.options;
+
+		if ( o.disabled ) {
+			return false;
+		}
+
+		this.elementSize = {
+			width: this.element.outerWidth(),
+			height: this.element.outerHeight()
+		};
+		this.elementOffset = this.element.offset();
+
+		position = { x: event.pageX, y: event.pageY };
+		normValue = this._normValueFromMouse( position );
+		distance = this._valueMax() - this._valueMin() + 1;
+		this.handles.each(function( i ) {
+			var thisDistance = Math.abs( normValue - that.values(i) );
+			if (( distance > thisDistance ) ||
+				( distance === thisDistance &&
+					(i === that._lastChangedValue || that.values(i) === o.min ))) {
+				distance = thisDistance;
+				closestHandle = $( this );
+				index = i;
+			}
+		});
+
+		allowed = this._start( event, index );
+		if ( allowed === false ) {
+			return false;
+		}
+		this._mouseSliding = true;
+
+		this._handleIndex = index;
+
+		closestHandle
+			.addClass( "ui-state-active" )
+			.focus();
+
+		offset = closestHandle.offset();
+		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
+		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
+			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
+			top: event.pageY - offset.top -
+				( closestHandle.height() / 2 ) -
+				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
+				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
+				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
+		};
+
+		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
+			this._slide( event, index, normValue );
+		}
+		this._animateOff = true;
+		return true;
+	},
+
+	_mouseStart: function() {
+		return true;
+	},
+
+	_mouseDrag: function( event ) {
+		var position = { x: event.pageX, y: event.pageY },
+			normValue = this._normValueFromMouse( position );
+
+		this._slide( event, this._handleIndex, normValue );
+
+		return false;
+	},
+
+	_mouseStop: function( event ) {
+		this.handles.removeClass( "ui-state-active" );
+		this._mouseSliding = false;
+
+		this._stop( event, this._handleIndex );
+		this._change( event, this._handleIndex );
+
+		this._handleIndex = null;
+		this._clickOffset = null;
+		this._animateOff = false;
+
+		return false;
+	},
+
+	_detectOrientation: function() {
+		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
+	},
+
+	_normValueFromMouse: function( position ) {
+		var pixelTotal,
+			pixelMouse,
+			percentMouse,
+			valueTotal,
+			valueMouse;
+
+		if ( this.orientation === "horizontal" ) {
+			pixelTotal = this.elementSize.width;
+			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
+		} else {
+			pixelTotal = this.elementSize.height;
+			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
+		}
+
+		percentMouse = ( pixelMouse / pixelTotal );
+		if ( percentMouse > 1 ) {
+			percentMouse = 1;
+		}
+		if ( percentMouse < 0 ) {
+			percentMouse = 0;
+		}
+		if ( this.orientation === "vertical" ) {
+			percentMouse = 1 - percentMouse;
+		}
+
+		valueTotal = this._valueMax() - this._valueMin();
+		valueMouse = this._valueMin() + percentMouse * valueTotal;
+
+		return this._trimAlignValue( valueMouse );
+	},
+
+	_start: function( event, index ) {
+		var uiHash = {
+			handle: this.handles[ index ],
+			value: this.value()
+		};
+		if ( this.options.values && this.options.values.length ) {
+			uiHash.value = this.values( index );
+			uiHash.values = this.values();
+		}
+		return this._trigger( "start", event, uiHash );
+	},
+
+	_slide: function( event, index, newVal ) {
+		var otherVal,
+			newValues,
+			allowed;
+
+		if ( this.options.values && this.options.values.length ) {
+			otherVal = this.values( index ? 0 : 1 );
+
+			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
+					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
+				) {
+				newVal = otherVal;
+			}
+
+			if ( newVal !== this.values( index ) ) {
+				newValues = this.values();
+				newValues[ index ] = newVal;
+				// A slide can be canceled by returning false from the slide callback
+				allowed = this._trigger( "slide", event, {
+					handle: this.handles[ index ],
+					value: newVal,
+					values: newValues
+				} );
+				otherVal = this.values( index ? 0 : 1 );
+				if ( allowed !== false ) {
+					this.values( index, newVal );
+				}
+			}
+		} else {
+			if ( newVal !== this.value() ) {
+				// A slide can be canceled by returning false from the slide callback
+				allowed = this._trigger( "slide", event, {
+					handle: this.handles[ index ],
+					value: newVal
+				} );
+				if ( allowed !== false ) {
+					this.value( newVal );
+				}
+			}
+		}
+	},
+
+	_stop: function( event, index ) {
+		var uiHash = {
+			handle: this.handles[ index ],
+			value: this.value()
+		};
+		if ( this.options.values && this.options.values.length ) {
+			uiHash.value = this.values( index );
+			uiHash.values = this.values();
+		}
+
+		this._trigger( "stop", event, uiHash );
+	},
+
+	_change: function( event, index ) {
+		if ( !this._keySliding && !this._mouseSliding ) {
+			var uiHash = {
+				handle: this.handles[ index ],
+				value: this.value()
+			};
+			if ( this.options.values && this.options.values.length ) {
+				uiHash.value = this.values( index );
+				uiHash.values = this.values();
+			}
+
+			//store the last changed value index for reference when handles overlap
+			this._lastChangedValue = index;
+
+			this._trigger( "change", event, uiHash );
+		}
+	},
+
+	value: function( newValue ) {
+		if ( arguments.length ) {
+			this.options.value = this._trimAlignValue( newValue );
+			this._refreshValue();
+			this._change( null, 0 );
+			return;
+		}
+
+		return this._value();
+	},
+
+	values: function( index, newValue ) {
+		var vals,
+			newValues,
+			i;
+
+		if ( arguments.length > 1 ) {
+			this.options.values[ index ] = this._trimAlignValue( newValue );
+			this._refreshValue();
+			this._change( null, index );
+			return;
+		}
+
+		if ( arguments.length ) {
+			if ( $.isArray( arguments[ 0 ] ) ) {
+				vals = this.options.values;
+				newValues = arguments[ 0 ];
+				for ( i = 0; i < vals.length; i += 1 ) {
+					vals[ i ] = this._trimAlignValue( newValues[ i ] );
+					this._change( null, i );
+				}
+				this._refreshValue();
+			} else {
+				if ( this.options.values && this.options.values.length ) {
+					return this._values( index );
+				} else {
+					return this.value();
+				}
+			}
+		} else {
+			return this._values();
+		}
+	},
+
+	_setOption: function( key, value ) {
+		var i,
+			valsLength = 0;
+
+		if ( key === "range" && this.options.range === true ) {
+			if ( value === "min" ) {
+				this.options.value = this._values( 0 );
+				this.options.values = null;
+			} else if ( value === "max" ) {
+				this.options.value = this._values( this.options.values.length - 1 );
+				this.options.values = null;
+			}
+		}
+
+		if ( $.isArray( this.options.values ) ) {
+			valsLength = this.options.values.length;
+		}
+
+		if ( key === "disabled" ) {
+			this.element.toggleClass( "ui-state-disabled", !!value );
+		}
+
+		this._super( key, value );
+
+		switch ( key ) {
+			case "orientation":
+				this._detectOrientation();
+				this.element
+					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
+					.addClass( "ui-slider-" + this.orientation );
+				this._refreshValue();
+
+				// Reset positioning from previous orientation
+				this.handles.css( value === "horizontal" ? "bottom" : "left", "" );
+				break;
+			case "value":
+				this._animateOff = true;
+				this._refreshValue();
+				this._change( null, 0 );
+				this._animateOff = false;
+				break;
+			case "values":
+				this._animateOff = true;
+				this._refreshValue();
+				for ( i = 0; i < valsLength; i += 1 ) {
+					this._change( null, i );
+				}
+				this._animateOff = false;
+				break;
+			case "step":
+			case "min":
+			case "max":
+				this._animateOff = true;
+				this._calculateNewMax();
+				this._refreshValue();
+				this._animateOff = false;
+				break;
+			case "range":
+				this._animateOff = true;
+				this._refresh();
+				this._animateOff = false;
+				break;
+		}
+	},
+
+	//internal value getter
+	// _value() returns value trimmed by min and max, aligned by step
+	_value: function() {
+		var val = this.options.value;
+		val = this._trimAlignValue( val );
+
+		return val;
+	},
+
+	//internal values getter
+	// _values() returns array of values trimmed by min and max, aligned by step
+	// _values( index ) returns single value trimmed by min and max, aligned by step
+	_values: function( index ) {
+		var val,
+			vals,
+			i;
+
+		if ( arguments.length ) {
+			val = this.options.values[ index ];
+			val = this._trimAlignValue( val );
+
+			return val;
+		} else if ( this.options.values && this.options.values.length ) {
+			// .slice() creates a copy of the array
+			// this copy gets trimmed by min and max and then returned
+			vals = this.options.values.slice();
+			for ( i = 0; i < vals.length; i += 1) {
+				vals[ i ] = this._trimAlignValue( vals[ i ] );
+			}
+
+			return vals;
+		} else {
+			return [];
+		}
+	},
+
+	// returns the step-aligned value that val is closest to, between (inclusive) min and max
+	_trimAlignValue: function( val ) {
+		if ( val <= this._valueMin() ) {
+			return this._valueMin();
+		}
+		if ( val >= this._valueMax() ) {
+			return this._valueMax();
+		}
+		var step = ( this.options.step > 0 ) ? this.options.step : 1,
+			valModStep = (val - this._valueMin()) % step,
+			alignValue = val - valModStep;
+
+		if ( Math.abs(valModStep) * 2 >= step ) {
+			alignValue += ( valModStep > 0 ) ? step : ( -step );
+		}
+
+		// Since JavaScript has problems with large floats, round
+		// the final value to 5 digits after the decimal point (see #4124)
+		return parseFloat( alignValue.toFixed(5) );
+	},
+
+	_calculateNewMax: function() {
+		var max = this.options.max,
+			min = this._valueMin(),
+			step = this.options.step,
+			aboveMin = Math.floor( ( +( max - min ).toFixed( this._precision() ) ) / step ) * step;
+		max = aboveMin + min;
+		this.max = parseFloat( max.toFixed( this._precision() ) );
+	},
+
+	_precision: function() {
+		var precision = this._precisionOf( this.options.step );
+		if ( this.options.min !== null ) {
+			precision = Math.max( precision, this._precisionOf( this.options.min ) );
+		}
+		return precision;
+	},
+
+	_precisionOf: function( num ) {
+		var str = num.toString(),
+			decimal = str.indexOf( "." );
+		return decimal === -1 ? 0 : str.length - decimal - 1;
+	},
+
+	_valueMin: function() {
+		return this.options.min;
+	},
+
+	_valueMax: function() {
+		return this.max;
+	},
+
+	_refreshValue: function() {
+		var lastValPercent, valPercent, value, valueMin, valueMax,
+			oRange = this.options.range,
+			o = this.options,
+			that = this,
+			animate = ( !this._animateOff ) ? o.animate : false,
+			_set = {};
+
+		if ( this.options.values && this.options.values.length ) {
+			this.handles.each(function( i ) {
+				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
+				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
+				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
+				if ( that.options.range === true ) {
+					if ( that.orientation === "horizontal" ) {
+						if ( i === 0 ) {
+							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
+						}
+						if ( i === 1 ) {
+							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
+						}
+					} else {
+						if ( i === 0 ) {
+							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
+						}
+						if ( i === 1 ) {
+							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
+						}
+					}
+				}
+				lastValPercent = valPercent;
+			});
+		} else {
+			value = this.value();
+			valueMin = this._valueMin();
+			valueMax = this._valueMax();
+			valPercent = ( valueMax !== valueMin ) ?
+					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
+					0;
+			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
+			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
+
+			if ( oRange === "min" && this.orientation === "horizontal" ) {
+				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
+			}
+			if ( oRange === "max" && this.orientation === "horizontal" ) {
+				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
+			}
+			if ( oRange === "min" && this.orientation === "vertical" ) {
+				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
+			}
+			if ( oRange === "max" && this.orientation === "vertical" ) {
+				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
+			}
+		}
+	},
+
+	_handleEvents: {
+		keydown: function( event ) {
+			var allowed, curVal, newVal, step,
+				index = $( event.target ).data( "ui-slider-handle-index" );
+
+			switch ( event.keyCode ) {
+				case $.ui.keyCode.HOME:
+				case $.ui.keyCode.END:
+				case $.ui.keyCode.PAGE_UP:
+				case $.ui.keyCode.PAGE_DOWN:
+				case $.ui.keyCode.UP:
+				case $.ui.keyCode.RIGHT:
+				case $.ui.keyCode.DOWN:
+				case $.ui.keyCode.LEFT:
+					event.preventDefault();
+					if ( !this._keySliding ) {
+						this._keySliding = true;
+						$( event.target ).addClass( "ui-state-active" );
+						allowed = this._start( event, index );
+						if ( allowed === false ) {
+							return;
+						}
+					}
+					break;
+			}
+
+			step = this.options.step;
+			if ( this.options.values && this.options.values.length ) {
+				curVal = newVal = this.values( index );
+			} else {
+				curVal = newVal = this.value();
+			}
+
+			switch ( event.keyCode ) {
+				case $.ui.keyCode.HOME:
+					newVal = this._valueMin();
+					break;
+				case $.ui.keyCode.END:
+					newVal = this._valueMax();
+					break;
+				case $.ui.keyCode.PAGE_UP:
+					newVal = this._trimAlignValue(
+						curVal + ( ( this._valueMax() - this._valueMin() ) / this.numPages )
+					);
+					break;
+				case $.ui.keyCode.PAGE_DOWN:
+					newVal = this._trimAlignValue(
+						curVal - ( (this._valueMax() - this._valueMin()) / this.numPages ) );
+					break;
+				case $.ui.keyCode.UP:
+				case $.ui.keyCode.RIGHT:
+					if ( curVal === this._valueMax() ) {
+						return;
+					}
+					newVal = this._trimAlignValue( curVal + step );
+					break;
+				case $.ui.keyCode.DOWN:
+				case $.ui.keyCode.LEFT:
+					if ( curVal === this._valueMin() ) {
+						return;
+					}
+					newVal = this._trimAlignValue( curVal - step );
+					break;
+			}
+
+			this._slide( event, index, newVal );
+		},
+		keyup: function( event ) {
+			var index = $( event.target ).data( "ui-slider-handle-index" );
+
+			if ( this._keySliding ) {
+				this._keySliding = false;
+				this._stop( event, index );
+				this._change( event, index );
+				$( event.target ).removeClass( "ui-state-active" );
+			}
+		}
+	}
+});
+
+
+/*!
+ * jQuery UI Sortable 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/sortable/
+ */
+
+
+var sortable = $.widget("ui.sortable", $.ui.mouse, {
+	version: "1.11.4",
+	widgetEventPrefix: "sort",
+	ready: false,
+	options: {
+		appendTo: "parent",
+		axis: false,
+		connectWith: false,
+		containment: false,
+		cursor: "auto",
+		cursorAt: false,
+		dropOnEmpty: true,
+		forcePlaceholderSize: false,
+		forceHelperSize: false,
+		grid: false,
+		handle: false,
+		helper: "original",
+		items: "> *",
+		opacity: false,
+		placeholder: false,
+		revert: false,
+		scroll: true,
+		scrollSensitivity: 20,
+		scrollSpeed: 20,
+		scope: "default",
+		tolerance: "intersect",
+		zIndex: 1000,
+
+		// callbacks
+		activate: null,
+		beforeStop: null,
+		change: null,
+		deactivate: null,
+		out: null,
+		over: null,
+		receive: null,
+		remove: null,
+		sort: null,
+		start: null,
+		stop: null,
+		update: null
+	},
+
+	_isOverAxis: function( x, reference, size ) {
+		return ( x >= reference ) && ( x < ( reference + size ) );
+	},
+
+	_isFloating: function( item ) {
+		return (/left|right/).test(item.css("float")) || (/inline|table-cell/).test(item.css("display"));
+	},
+
+	_create: function() {
+		this.containerCache = {};
+		this.element.addClass("ui-sortable");
+
+		//Get the items
+		this.refresh();
+
+		//Let's determine the parent's offset
+		this.offset = this.element.offset();
+
+		//Initialize mouse events for interaction
+		this._mouseInit();
+
+		this._setHandleClassName();
+
+		//We're ready to go
+		this.ready = true;
+
+	},
+
+	_setOption: function( key, value ) {
+		this._super( key, value );
+
+		if ( key === "handle" ) {
+			this._setHandleClassName();
+		}
+	},
+
+	_setHandleClassName: function() {
+		this.element.find( ".ui-sortable-handle" ).removeClass( "ui-sortable-handle" );
+		$.each( this.items, function() {
+			( this.instance.options.handle ?
+				this.item.find( this.instance.options.handle ) : this.item )
+				.addClass( "ui-sortable-handle" );
+		});
+	},
+
+	_destroy: function() {
+		this.element
+			.removeClass( "ui-sortable ui-sortable-disabled" )
+			.find( ".ui-sortable-handle" )
+				.removeClass( "ui-sortable-handle" );
+		this._mouseDestroy();
+
+		for ( var i = this.items.length - 1; i >= 0; i-- ) {
+			this.items[i].item.removeData(this.widgetName + "-item");
+		}
+
+		return this;
+	},
+
+	_mouseCapture: function(event, overrideHandle) {
+		var currentItem = null,
+			validHandle = false,
+			that = this;
+
+		if (this.reverting) {
+			return false;
+		}
+
+		if(this.options.disabled || this.options.type === "static") {
+			return false;
+		}
+
+		//We have to refresh the items data once first
+		this._refreshItems(event);
+
+		//Find out if the clicked node (or one of its parents) is a actual item in this.items
+		$(event.target).parents().each(function() {
+			if($.data(this, that.widgetName + "-item") === that) {
+				currentItem = $(this);
+				return false;
+			}
+		});
+		if($.data(event.target, that.widgetName + "-item") === that) {
+			currentItem = $(event.target);
+		}
+
+		if(!currentItem) {
+			return false;
+		}
+		if(this.options.handle && !overrideHandle) {
+			$(this.options.handle, currentItem).find("*").addBack().each(function() {
+				if(this === event.target) {
+					validHandle = true;
+				}
+			});
+			if(!validHandle) {
+				return false;
+			}
+		}
+
+		this.currentItem = currentItem;
+		this._removeCurrentsFromItems();
+		return true;
+
+	},
+
+	_mouseStart: function(event, overrideHandle, noActivation) {
+
+		var i, body,
+			o = this.options;
+
+		this.currentContainer = this;
+
+		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
+		this.refreshPositions();
+
+		//Create and append the visible helper
+		this.helper = this._createHelper(event);
+
+		//Cache the helper size
+		this._cacheHelperProportions();
+
+		/*
+		 * - Position generation -
+		 * This block generates everything position related - it's the core of draggables.
+		 */
+
+		//Cache the margins of the original element
+		this._cacheMargins();
+
+		//Get the next scrolling parent
+		this.scrollParent = this.helper.scrollParent();
+
+		//The element's absolute position on the page minus margins
+		this.offset = this.currentItem.offset();
+		this.offset = {
+			top: this.offset.top - this.margins.top,
+			left: this.offset.left - this.margins.left
+		};
+
+		$.extend(this.offset, {
+			click: { //Where the click happened, relative to the element
+				left: event.pageX - this.offset.left,
+				top: event.pageY - this.offset.top
+			},
+			parent: this._getParentOffset(),
+			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
+		});
+
+		// Only after we got the offset, we can change the helper's position to absolute
+		// TODO: Still need to figure out a way to make relative sorting possible
+		this.helper.css("position", "absolute");
+		this.cssPosition = this.helper.css("position");
+
+		//Generate the original position
+		this.originalPosition = this._generatePosition(event);
+		this.originalPageX = event.pageX;
+		this.originalPageY = event.pageY;
+
+		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
+		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
+
+		//Cache the former DOM position
+		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };
+
+		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
+		if(this.helper[0] !== this.currentItem[0]) {
+			this.currentItem.hide();
+		}
+
+		//Create the placeholder
+		this._createPlaceholder();
+
+		//Set a containment if given in the options
+		if(o.containment) {
+			this._setContainment();
+		}
+
+		if( o.cursor && o.cursor !== "auto" ) { // cursor option
+			body = this.document.find( "body" );
+
+			// support: IE
+			this.storedCursor = body.css( "cursor" );
+			body.css( "cursor", o.cursor );
+
+			this.storedStylesheet = $( "<style>*{ cursor: "+o.cursor+" !important; }</style>" ).appendTo( body );
+		}
+
+		if(o.opacity) { // opacity option
+			if (this.helper.css("opacity")) {
+				this._storedOpacity = this.helper.css("opacity");
+			}
+			this.helper.css("opacity", o.opacity);
+		}
+
+		if(o.zIndex) { // zIndex option
+			if (this.helper.css("zIndex")) {
+				this._storedZIndex = this.helper.css("zIndex");
+			}
+			this.helper.css("zIndex", o.zIndex);
+		}
+
+		//Prepare scrolling
+		if(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== "HTML") {
+			this.overflowOffset = this.scrollParent.offset();
+		}
+
+		//Call callbacks
+		this._trigger("start", event, this._uiHash());
+
+		//Recache the helper size
+		if(!this._preserveHelperProportions) {
+			this._cacheHelperProportions();
+		}
+
+
+		//Post "activate" events to possible containers
+		if( !noActivation ) {
+			for ( i = this.containers.length - 1; i >= 0; i-- ) {
+				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
+			}
+		}
+
+		//Prepare possible droppables
+		if($.ui.ddmanager) {
+			$.ui.ddmanager.current = this;
+		}
+
+		if ($.ui.ddmanager && !o.dropBehaviour) {
+			$.ui.ddmanager.prepareOffsets(this, event);
+		}
+
+		this.dragging = true;
+
+		this.helper.addClass("ui-sortable-helper");
+		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
+		return true;
+
+	},
+
+	_mouseDrag: function(event) {
+		var i, item, itemElement, intersection,
+			o = this.options,
+			scrolled = false;
+
+		//Compute the helpers position
+		this.position = this._generatePosition(event);
+		this.positionAbs = this._convertPositionTo("absolute");
+
+		if (!this.lastPositionAbs) {
+			this.lastPositionAbs = this.positionAbs;
+		}
+
+		//Do scrolling
+		if(this.options.scroll) {
+			if(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== "HTML") {
+
+				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
+					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
+				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
+					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
+				}
+
+				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
+					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
+				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
+					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
+				}
+
+			} else {
+
+				if(event.pageY - this.document.scrollTop() < o.scrollSensitivity) {
+					scrolled = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed);
+				} else if(this.window.height() - (event.pageY - this.document.scrollTop()) < o.scrollSensitivity) {
+					scrolled = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed);
+				}
+
+				if(event.pageX - this.document.scrollLeft() < o.scrollSensitivity) {
+					scrolled = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed);
+				} else if(this.window.width() - (event.pageX - this.document.scrollLeft()) < o.scrollSensitivity) {
+					scrolled = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed);
+				}
+
+			}
+
+			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
+				$.ui.ddmanager.prepareOffsets(this, event);
+			}
+		}
+
+		//Regenerate the absolute position used for position checks
+		this.positionAbs = this._convertPositionTo("absolute");
+
+		//Set the helper position
+		if(!this.options.axis || this.options.axis !== "y") {
+			this.helper[0].style.left = this.position.left+"px";
+		}
+		if(!this.options.axis || this.options.axis !== "x") {
+			this.helper[0].style.top = this.position.top+"px";
+		}
+
+		//Rearrange
+		for (i = this.items.length - 1; i >= 0; i--) {
+
+			//Cache variables and intersection, continue if no intersection
+			item = this.items[i];
+			itemElement = item.item[0];
+			intersection = this._intersectsWithPointer(item);
+			if (!intersection) {
+				continue;
+			}
+
+			// Only put the placeholder inside the current Container, skip all
+			// items from other containers. This works because when moving
+			// an item from one container to another the
+			// currentContainer is switched before the placeholder is moved.
+			//
+			// Without this, moving items in "sub-sortables" can cause
+			// the placeholder to jitter between the outer and inner container.
+			if (item.instance !== this.currentContainer) {
+				continue;
+			}
+
+			// cannot intersect with itself
+			// no useless actions that have been done before
+			// no action if the item moved is the parent of the item checked
+			if (itemElement !== this.currentItem[0] &&
+				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
+				!$.contains(this.placeholder[0], itemElement) &&
+				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
+			) {
+
+				this.direction = intersection === 1 ? "down" : "up";
+
+				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
+					this._rearrange(event, item);
+				} else {
+					break;
+				}
+
+				this._trigger("change", event, this._uiHash());
+				break;
+			}
+		}
+
+		//Post events to containers
+		this._contactContainers(event);
+
+		//Interconnect with droppables
+		if($.ui.ddmanager) {
+			$.ui.ddmanager.drag(this, event);
+		}
+
+		//Call callbacks
+		this._trigger("sort", event, this._uiHash());
+
+		this.lastPositionAbs = this.positionAbs;
+		return false;
+
+	},
+
+	_mouseStop: function(event, noPropagation) {
+
+		if(!event) {
+			return;
+		}
+
+		//If we are using droppables, inform the manager about the drop
+		if ($.ui.ddmanager && !this.options.dropBehaviour) {
+			$.ui.ddmanager.drop(this, event);
+		}
+
+		if(this.options.revert) {
+			var that = this,
+				cur = this.placeholder.offset(),
+				axis = this.options.axis,
+				animation = {};
+
+			if ( !axis || axis === "x" ) {
+				animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft);
+			}
+			if ( !axis || axis === "y" ) {
+				animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop);
+			}
+			this.reverting = true;
+			$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {
+				that._clear(event);
+			});
+		} else {
+			this._clear(event, noPropagation);
+		}
+
+		return false;
+
+	},
+
+	cancel: function() {
+
+		if(this.dragging) {
+
+			this._mouseUp({ target: null });
+
+			if(this.options.helper === "original") {
+				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
+			} else {
+				this.currentItem.show();
+			}
+
+			//Post deactivating events to containers
+			for (var i = this.containers.length - 1; i >= 0; i--){
+				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
+				if(this.containers[i].containerCache.over) {
+					this.containers[i]._trigger("out", null, this._uiHash(this));
+					this.containers[i].containerCache.over = 0;
+				}
+			}
+
+		}
+
+		if (this.placeholder) {
+			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
+			if(this.placeholder[0].parentNode) {
+				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
+			}
+			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
+				this.helper.remove();
+			}
+
+			$.extend(this, {
+				helper: null,
+				dragging: false,
+				reverting: false,
+				_noFinalSort: null
+			});
+
+			if(this.domPosition.prev) {
+				$(this.domPosition.prev).after(this.currentItem);
+			} else {
+				$(this.domPosition.parent).prepend(this.currentItem);
+			}
+		}
+
+		return this;
+
+	},
+
+	serialize: function(o) {
+
+		var items = this._getItemsAsjQuery(o && o.connected),
+			str = [];
+		o = o || {};
+
+		$(items).each(function() {
+			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
+			if (res) {
+				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
+			}
+		});
+
+		if(!str.length && o.key) {
+			str.push(o.key + "=");
+		}
+
+		return str.join("&");
+
+	},
+
+	toArray: function(o) {
+
+		var items = this._getItemsAsjQuery(o && o.connected),
+			ret = [];
+
+		o = o || {};
+
+		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
+		return ret;
+
+	},
+
+	/* Be careful with the following core functions */
+	_intersectsWith: function(item) {
+
+		var x1 = this.positionAbs.left,
+			x2 = x1 + this.helperProportions.width,
+			y1 = this.positionAbs.top,
+			y2 = y1 + this.helperProportions.height,
+			l = item.left,
+			r = l + item.width,
+			t = item.top,
+			b = t + item.height,
+			dyClick = this.offset.click.top,
+			dxClick = this.offset.click.left,
+			isOverElementHeight = ( this.options.axis === "x" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),
+			isOverElementWidth = ( this.options.axis === "y" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),
+			isOverElement = isOverElementHeight && isOverElementWidth;
+
+		if ( this.options.tolerance === "pointer" ||
+			this.options.forcePointerForContainers ||
+			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
+		) {
+			return isOverElement;
+		} else {
+
+			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
+				x2 - (this.helperProportions.width / 2) < r && // Left Half
+				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
+				y2 - (this.helperProportions.height / 2) < b ); // Top Half
+
+		}
+	},
+
+	_intersectsWithPointer: function(item) {
+
+		var isOverElementHeight = (this.options.axis === "x") || this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
+			isOverElementWidth = (this.options.axis === "y") || this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
+			isOverElement = isOverElementHeight && isOverElementWidth,
+			verticalDirection = this._getDragVerticalDirection(),
+			horizontalDirection = this._getDragHorizontalDirection();
+
+		if (!isOverElement) {
+			return false;
+		}
+
+		return this.floating ?
+			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
+			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );
+
+	},
+
+	_intersectsWithSides: function(item) {
+
+		var isOverBottomHalf = this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
+			isOverRightHalf = this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
+			verticalDirection = this._getDragVerticalDirection(),
+			horizontalDirection = this._getDragHorizontalDirection();
+
+		if (this.floating && horizontalDirection) {
+			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
+		} else {
+			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
+		}
+
+	},
+
+	_getDragVerticalDirection: function() {
+		var delta = this.positionAbs.top - this.lastPositionAbs.top;
+		return delta !== 0 && (delta > 0 ? "down" : "up");
+	},
+
+	_getDragHorizontalDirection: function() {
+		var delta = this.positionAbs.left - this.lastPositionAbs.left;
+		return delta !== 0 && (delta > 0 ? "right" : "left");
+	},
+
+	refresh: function(event) {
+		this._refreshItems(event);
+		this._setHandleClassName();
+		this.refreshPositions();
+		return this;
+	},
+
+	_connectWith: function() {
+		var options = this.options;
+		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
+	},
+
+	_getItemsAsjQuery: function(connected) {
+
+		var i, j, cur, inst,
+			items = [],
+			queries = [],
+			connectWith = this._connectWith();
+
+		if(connectWith && connected) {
+			for (i = connectWith.length - 1; i >= 0; i--){
+				cur = $(connectWith[i], this.document[0]);
+				for ( j = cur.length - 1; j >= 0; j--){
+					inst = $.data(cur[j], this.widgetFullName);
+					if(inst && inst !== this && !inst.options.disabled) {
+						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
+					}
+				}
+			}
+		}
+
+		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
+
+		function addItems() {
+			items.push( this );
+		}
+		for (i = queries.length - 1; i >= 0; i--){
+			queries[i][0].each( addItems );
+		}
+
+		return $(items);
+
+	},
+
+	_removeCurrentsFromItems: function() {
+
+		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");
+
+		this.items = $.grep(this.items, function (item) {
+			for (var j=0; j < list.length; j++) {
+				if(list[j] === item.item[0]) {
+					return false;
+				}
+			}
+			return true;
+		});
+
+	},
+
+	_refreshItems: function(event) {
+
+		this.items = [];
+		this.containers = [this];
+
+		var i, j, cur, inst, targetData, _queries, item, queriesLength,
+			items = this.items,
+			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
+			connectWith = this._connectWith();
+
+		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
+			for (i = connectWith.length - 1; i >= 0; i--){
+				cur = $(connectWith[i], this.document[0]);
+				for (j = cur.length - 1; j >= 0; j--){
+					inst = $.data(cur[j], this.widgetFullName);
+					if(inst && inst !== this && !inst.options.disabled) {
+						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
+						this.containers.push(inst);
+					}
+				}
+			}
+		}
+
+		for (i = queries.length - 1; i >= 0; i--) {
+			targetData = queries[i][1];
+			_queries = queries[i][0];
+
+			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
+				item = $(_queries[j]);
+
+				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)
+
+				items.push({
+					item: item,
+					instance: targetData,
+					width: 0, height: 0,
+					left: 0, top: 0
+				});
+			}
+		}
+
+	},
+
+	refreshPositions: function(fast) {
+
+		// Determine whether items are being displayed horizontally
+		this.floating = this.items.length ?
+			this.options.axis === "x" || this._isFloating( this.items[ 0 ].item ) :
+			false;
+
+		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
+		if(this.offsetParent && this.helper) {
+			this.offset.parent = this._getParentOffset();
+		}
+
+		var i, item, t, p;
+
+		for (i = this.items.length - 1; i >= 0; i--){
+			item = this.items[i];
+
+			//We ignore calculating positions of all connected containers when we're not over them
+			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
+				continue;
+			}
+
+			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;
+
+			if (!fast) {
+				item.width = t.outerWidth();
+				item.height = t.outerHeight();
+			}
+
+			p = t.offset();
+			item.left = p.left;
+			item.top = p.top;
+		}
+
+		if(this.options.custom && this.options.custom.refreshContainers) {
+			this.options.custom.refreshContainers.call(this);
+		} else {
+			for (i = this.containers.length - 1; i >= 0; i--){
+				p = this.containers[i].element.offset();
+				this.containers[i].containerCache.left = p.left;
+				this.containers[i].containerCache.top = p.top;
+				this.containers[i].containerCache.width = this.containers[i].element.outerWidth();
+				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
+			}
+		}
+
+		return this;
+	},
+
+	_createPlaceholder: function(that) {
+		that = that || this;
+		var className,
+			o = that.options;
+
+		if(!o.placeholder || o.placeholder.constructor === String) {
+			className = o.placeholder;
+			o.placeholder = {
+				element: function() {
+
+					var nodeName = that.currentItem[0].nodeName.toLowerCase(),
+						element = $( "<" + nodeName + ">", that.document[0] )
+							.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
+							.removeClass("ui-sortable-helper");
+
+					if ( nodeName === "tbody" ) {
+						that._createTrPlaceholder(
+							that.currentItem.find( "tr" ).eq( 0 ),
+							$( "<tr>", that.document[ 0 ] ).appendTo( element )
+						);
+					} else if ( nodeName === "tr" ) {
+						that._createTrPlaceholder( that.currentItem, element );
+					} else if ( nodeName === "img" ) {
+						element.attr( "src", that.currentItem.attr( "src" ) );
+					}
+
+					if ( !className ) {
+						element.css( "visibility", "hidden" );
+					}
+
+					return element;
+				},
+				update: function(container, p) {
+
+					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
+					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
+					if(className && !o.forcePlaceholderSize) {
+						return;
+					}
+
+					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
+					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
+					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
+				}
+			};
+		}
+
+		//Create the placeholder
+		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));
+
+		//Append it after the actual current item
+		that.currentItem.after(that.placeholder);
+
+		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
+		o.placeholder.update(that, that.placeholder);
+
+	},
+
+	_createTrPlaceholder: function( sourceTr, targetTr ) {
+		var that = this;
+
+		sourceTr.children().each(function() {
+			$( "<td>&#160;</td>", that.document[ 0 ] )
+				.attr( "colspan", $( this ).attr( "colspan" ) || 1 )
+				.appendTo( targetTr );
+		});
+	},
+
+	_contactContainers: function(event) {
+		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis,
+			innermostContainer = null,
+			innermostIndex = null;
+
+		// get innermost container that intersects with item
+		for (i = this.containers.length - 1; i >= 0; i--) {
+
+			// never consider a container that's located within the item itself
+			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
+				continue;
+			}
+
+			if(this._intersectsWith(this.containers[i].containerCache)) {
+
+				// if we've already found a container and it's more "inner" than this, then continue
+				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
+					continue;
+				}
+
+				innermostContainer = this.containers[i];
+				innermostIndex = i;
+
+			} else {
+				// container doesn't intersect. trigger "out" event if necessary
+				if(this.containers[i].containerCache.over) {
+					this.containers[i]._trigger("out", event, this._uiHash(this));
+					this.containers[i].containerCache.over = 0;
+				}
+			}
+
+		}
+
+		// if no intersecting containers found, return
+		if(!innermostContainer) {
+			return;
+		}
+
+		// move the item into the container if it's not there already
+		if(this.containers.length === 1) {
+			if (!this.containers[innermostIndex].containerCache.over) {
+				this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
+				this.containers[innermostIndex].containerCache.over = 1;
+			}
+		} else {
+
+			//When entering a new container, we will find the item with the least distance and append our item near it
+			dist = 10000;
+			itemWithLeastDistance = null;
+			floating = innermostContainer.floating || this._isFloating(this.currentItem);
+			posProperty = floating ? "left" : "top";
+			sizeProperty = floating ? "width" : "height";
+			axis = floating ? "clientX" : "clientY";
+
+			for (j = this.items.length - 1; j >= 0; j--) {
+				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
+					continue;
+				}
+				if(this.items[j].item[0] === this.currentItem[0]) {
+					continue;
+				}
+
+				cur = this.items[j].item.offset()[posProperty];
+				nearBottom = false;
+				if ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {
+					nearBottom = true;
+				}
+
+				if ( Math.abs( event[ axis ] - cur ) < dist ) {
+					dist = Math.abs( event[ axis ] - cur );
+					itemWithLeastDistance = this.items[ j ];
+					this.direction = nearBottom ? "up": "down";
+				}
+			}
+
+			//Check if dropOnEmpty is enabled
+			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
+				return;
+			}
+
+			if(this.currentContainer === this.containers[innermostIndex]) {
+				if ( !this.currentContainer.containerCache.over ) {
+					this.containers[ innermostIndex ]._trigger( "over", event, this._uiHash() );
+					this.currentContainer.containerCache.over = 1;
+				}
+				return;
+			}
+
+			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
+			this._trigger("change", event, this._uiHash());
+			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
+			this.currentContainer = this.containers[innermostIndex];
+
+			//Update the placeholder
+			this.options.placeholder.update(this.currentContainer, this.placeholder);
+
+			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
+			this.containers[innermostIndex].containerCache.over = 1;
+		}
+
+
+	},
+
+	_createHelper: function(event) {
+
+		var o = this.options,
+			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);
+
+		//Add the helper to the DOM if that didn't happen already
+		if(!helper.parents("body").length) {
+			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
+		}
+
+		if(helper[0] === this.currentItem[0]) {
+			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
+		}
+
+		if(!helper[0].style.width || o.forceHelperSize) {
+			helper.width(this.currentItem.width());
+		}
+		if(!helper[0].style.height || o.forceHelperSize) {
+			helper.height(this.currentItem.height());
+		}
+
+		return helper;
+
+	},
+
+	_adjustOffsetFromHelper: function(obj) {
+		if (typeof obj === "string") {
+			obj = obj.split(" ");
+		}
+		if ($.isArray(obj)) {
+			obj = {left: +obj[0], top: +obj[1] || 0};
+		}
+		if ("left" in obj) {
+			this.offset.click.left = obj.left + this.margins.left;
+		}
+		if ("right" in obj) {
+			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
+		}
+		if ("top" in obj) {
+			this.offset.click.top = obj.top + this.margins.top;
+		}
+		if ("bottom" in obj) {
+			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
+		}
+	},
+
+	_getParentOffset: function() {
+
+
+		//Get the offsetParent and cache its position
+		this.offsetParent = this.helper.offsetParent();
+		var po = this.offsetParent.offset();
+
+		// This is a special case where we need to modify a offset calculated on start, since the following happened:
+		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
+		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
+		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
+		if(this.cssPosition === "absolute" && this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) {
+			po.left += this.scrollParent.scrollLeft();
+			po.top += this.scrollParent.scrollTop();
+		}
+
+		// This needs to be actually done for all browsers, since pageX/pageY includes this information
+		// with an ugly IE fix
+		if( this.offsetParent[0] === this.document[0].body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
+			po = { top: 0, left: 0 };
+		}
+
+		return {
+			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
+			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
+		};
+
+	},
+
+	_getRelativeOffset: function() {
+
+		if(this.cssPosition === "relative") {
+			var p = this.currentItem.position();
+			return {
+				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
+				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
+			};
+		} else {
+			return { top: 0, left: 0 };
+		}
+
+	},
+
+	_cacheMargins: function() {
+		this.margins = {
+			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
+			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
+		};
+	},
+
+	_cacheHelperProportions: function() {
+		this.helperProportions = {
+			width: this.helper.outerWidth(),
+			height: this.helper.outerHeight()
+		};
+	},
+
+	_setContainment: function() {
+
+		var ce, co, over,
+			o = this.options;
+		if(o.containment === "parent") {
+			o.containment = this.helper[0].parentNode;
+		}
+		if(o.containment === "document" || o.containment === "window") {
+			this.containment = [
+				0 - this.offset.relative.left - this.offset.parent.left,
+				0 - this.offset.relative.top - this.offset.parent.top,
+				o.containment === "document" ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left,
+				(o.containment === "document" ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
+			];
+		}
+
+		if(!(/^(document|window|parent)$/).test(o.containment)) {
+			ce = $(o.containment)[0];
+			co = $(o.containment).offset();
+			over = ($(ce).css("overflow") !== "hidden");
+
+			this.containment = [
+				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
+				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
+				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
+				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
+			];
+		}
+
+	},
+
+	_convertPositionTo: function(d, pos) {
+
+		if(!pos) {
+			pos = this.position;
+		}
+		var mod = d === "absolute" ? 1 : -1,
+			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
+			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
+
+		return {
+			top: (
+				pos.top	+																// The absolute mouse position
+				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
+				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
+			),
+			left: (
+				pos.left +																// The absolute mouse position
+				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
+				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
+			)
+		};
+
+	},
+
+	_generatePosition: function(event) {
+
+		var top, left,
+			o = this.options,
+			pageX = event.pageX,
+			pageY = event.pageY,
+			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);
+
+		// This is another very weird special case that only happens for relative elements:
+		// 1. If the css position is relative
+		// 2. and the scroll parent is the document or similar to the offset parent
+		// we have to refresh the relative offset during the scroll so there are no jumps
+		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0])) {
+			this.offset.relative = this._getRelativeOffset();
+		}
+
+		/*
+		 * - Position constraining -
+		 * Constrain the position to a mix of grid, containment.
+		 */
+
+		if(this.originalPosition) { //If we are not dragging yet, we won't check for options
+
+			if(this.containment) {
+				if(event.pageX - this.offset.click.left < this.containment[0]) {
+					pageX = this.containment[0] + this.offset.click.left;
+				}
+				if(event.pageY - this.offset.click.top < this.containment[1]) {
+					pageY = this.containment[1] + this.offset.click.top;
+				}
+				if(event.pageX - this.offset.click.left > this.containment[2]) {
+					pageX = this.containment[2] + this.offset.click.left;
+				}
+				if(event.pageY - this.offset.click.top > this.containment[3]) {
+					pageY = this.containment[3] + this.offset.click.top;
+				}
+			}
+
+			if(o.grid) {
+				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
+				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
+
+				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
+				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
+			}
+
+		}
+
+		return {
+			top: (
+				pageY -																// The absolute mouse position
+				this.offset.click.top -													// Click offset (relative to the element)
+				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
+				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
+			),
+			left: (
+				pageX -																// The absolute mouse position
+				this.offset.click.left -												// Click offset (relative to the element)
+				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
+				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
+				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
+			)
+		};
+
+	},
+
+	_rearrange: function(event, i, a, hardRefresh) {
+
+		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));
+
+		//Various things done here to improve the performance:
+		// 1. we create a setTimeout, that calls refreshPositions
+		// 2. on the instance, we have a counter variable, that get's higher after every append
+		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
+		// 4. this lets only the last addition to the timeout stack through
+		this.counter = this.counter ? ++this.counter : 1;
+		var counter = this.counter;
+
+		this._delay(function() {
+			if(counter === this.counter) {
+				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
+			}
+		});
+
+	},
+
+	_clear: function(event, noPropagation) {
+
+		this.reverting = false;
+		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
+		// everything else normalized again
+		var i,
+			delayedTriggers = [];
+
+		// We first have to update the dom position of the actual currentItem
+		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
+		if(!this._noFinalSort && this.currentItem.parent().length) {
+			this.placeholder.before(this.currentItem);
+		}
+		this._noFinalSort = null;
+
+		if(this.helper[0] === this.currentItem[0]) {
+			for(i in this._storedCSS) {
+				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
+					this._storedCSS[i] = "";
+				}
+			}
+			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
+		} else {
+			this.currentItem.show();
+		}
+
+		if(this.fromOutside && !noPropagation) {
+			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
+		}
+		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
+			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
+		}
+
+		// Check if the items Container has Changed and trigger appropriate
+		// events.
+		if (this !== this.currentContainer) {
+			if(!noPropagation) {
+				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
+				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
+				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
+			}
+		}
+
+
+		//Post events to containers
+		function delayEvent( type, instance, container ) {
+			return function( event ) {
+				container._trigger( type, event, instance._uiHash( instance ) );
+			};
+		}
+		for (i = this.containers.length - 1; i >= 0; i--){
+			if (!noPropagation) {
+				delayedTriggers.push( delayEvent( "deactivate", this, this.containers[ i ] ) );
+			}
+			if(this.containers[i].containerCache.over) {
+				delayedTriggers.push( delayEvent( "out", this, this.containers[ i ] ) );
+				this.containers[i].containerCache.over = 0;
+			}
+		}
+
+		//Do what was originally in plugins
+		if ( this.storedCursor ) {
+			this.document.find( "body" ).css( "cursor", this.storedCursor );
+			this.storedStylesheet.remove();
+		}
+		if(this._storedOpacity) {
+			this.helper.css("opacity", this._storedOpacity);
+		}
+		if(this._storedZIndex) {
+			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
+		}
+
+		this.dragging = false;
+
+		if(!noPropagation) {
+			this._trigger("beforeStop", event, this._uiHash());
+		}
+
+		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
+		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
+
+		if ( !this.cancelHelperRemoval ) {
+			if ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {
+				this.helper.remove();
+			}
+			this.helper = null;
+		}
+
+		if(!noPropagation) {
+			for (i=0; i < delayedTriggers.length; i++) {
+				delayedTriggers[i].call(this, event);
+			} //Trigger all delayed events
+			this._trigger("stop", event, this._uiHash());
+		}
+
+		this.fromOutside = false;
+		return !this.cancelHelperRemoval;
+
+	},
+
+	_trigger: function() {
+		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
+			this.cancel();
+		}
+	},
+
+	_uiHash: function(_inst) {
+		var inst = _inst || this;
+		return {
+			helper: inst.helper,
+			placeholder: inst.placeholder || $([]),
+			position: inst.position,
+			originalPosition: inst.originalPosition,
+			offset: inst.positionAbs,
+			item: inst.currentItem,
+			sender: _inst ? _inst.element : null
+		};
+	}
+
+});
+
+
+/*!
+ * jQuery UI Spinner 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/spinner/
+ */
+
+
+function spinner_modifier( fn ) {
+	return function() {
+		var previous = this.element.val();
+		fn.apply( this, arguments );
+		this._refresh();
+		if ( previous !== this.element.val() ) {
+			this._trigger( "change" );
+		}
+	};
+}
+
+var spinner = $.widget( "ui.spinner", {
+	version: "1.11.4",
+	defaultElement: "<input>",
+	widgetEventPrefix: "spin",
+	options: {
+		culture: null,
+		icons: {
+			down: "ui-icon-triangle-1-s",
+			up: "ui-icon-triangle-1-n"
+		},
+		incremental: true,
+		max: null,
+		min: null,
+		numberFormat: null,
+		page: 10,
+		step: 1,
+
+		change: null,
+		spin: null,
+		start: null,
+		stop: null
+	},
+
+	_create: function() {
+		// handle string values that need to be parsed
+		this._setOption( "max", this.options.max );
+		this._setOption( "min", this.options.min );
+		this._setOption( "step", this.options.step );
+
+		// Only format if there is a value, prevents the field from being marked
+		// as invalid in Firefox, see #9573.
+		if ( this.value() !== "" ) {
+			// Format the value, but don't constrain.
+			this._value( this.element.val(), true );
+		}
+
+		this._draw();
+		this._on( this._events );
+		this._refresh();
+
+		// turning off autocomplete prevents the browser from remembering the
+		// value when navigating through history, so we re-enable autocomplete
+		// if the page is unloaded before the widget is destroyed. #7790
+		this._on( this.window, {
+			beforeunload: function() {
+				this.element.removeAttr( "autocomplete" );
+			}
+		});
+	},
+
+	_getCreateOptions: function() {
+		var options = {},
+			element = this.element;
+
+		$.each( [ "min", "max", "step" ], function( i, option ) {
+			var value = element.attr( option );
+			if ( value !== undefined && value.length ) {
+				options[ option ] = value;
+			}
+		});
+
+		return options;
+	},
+
+	_events: {
+		keydown: function( event ) {
+			if ( this._start( event ) && this._keydown( event ) ) {
+				event.preventDefault();
+			}
+		},
+		keyup: "_stop",
+		focus: function() {
+			this.previous = this.element.val();
+		},
+		blur: function( event ) {
+			if ( this.cancelBlur ) {
+				delete this.cancelBlur;
+				return;
+			}
+
+			this._stop();
+			this._refresh();
+			if ( this.previous !== this.element.val() ) {
+				this._trigger( "change", event );
+			}
+		},
+		mousewheel: function( event, delta ) {
+			if ( !delta ) {
+				return;
+			}
+			if ( !this.spinning && !this._start( event ) ) {
+				return false;
+			}
+
+			this._spin( (delta > 0 ? 1 : -1) * this.options.step, event );
+			clearTimeout( this.mousewheelTimer );
+			this.mousewheelTimer = this._delay(function() {
+				if ( this.spinning ) {
+					this._stop( event );
+				}
+			}, 100 );
+			event.preventDefault();
+		},
+		"mousedown .ui-spinner-button": function( event ) {
+			var previous;
+
+			// We never want the buttons to have focus; whenever the user is
+			// interacting with the spinner, the focus should be on the input.
+			// If the input is focused then this.previous is properly set from
+			// when the input first received focus. If the input is not focused
+			// then we need to set this.previous based on the value before spinning.
+			previous = this.element[0] === this.document[0].activeElement ?
+				this.previous : this.element.val();
+			function checkFocus() {
+				var isActive = this.element[0] === this.document[0].activeElement;
+				if ( !isActive ) {
+					this.element.focus();
+					this.previous = previous;
+					// support: IE
+					// IE sets focus asynchronously, so we need to check if focus
+					// moved off of the input because the user clicked on the button.
+					this._delay(function() {
+						this.previous = previous;
+					});
+				}
+			}
+
+			// ensure focus is on (or stays on) the text field
+			event.preventDefault();
+			checkFocus.call( this );
+
+			// support: IE
+			// IE doesn't prevent moving focus even with event.preventDefault()
+			// so we set a flag to know when we should ignore the blur event
+			// and check (again) if focus moved off of the input.
+			this.cancelBlur = true;
+			this._delay(function() {
+				delete this.cancelBlur;
+				checkFocus.call( this );
+			});
+
+			if ( this._start( event ) === false ) {
+				return;
+			}
+
+			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
+		},
+		"mouseup .ui-spinner-button": "_stop",
+		"mouseenter .ui-spinner-button": function( event ) {
+			// button will add ui-state-active if mouse was down while mouseleave and kept down
+			if ( !$( event.currentTarget ).hasClass( "ui-state-active" ) ) {
+				return;
+			}
+
+			if ( this._start( event ) === false ) {
+				return false;
+			}
+			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
+		},
+		// TODO: do we really want to consider this a stop?
+		// shouldn't we just stop the repeater and wait until mouseup before
+		// we trigger the stop event?
+		"mouseleave .ui-spinner-button": "_stop"
+	},
+
+	_draw: function() {
+		var uiSpinner = this.uiSpinner = this.element
+			.addClass( "ui-spinner-input" )
+			.attr( "autocomplete", "off" )
+			.wrap( this._uiSpinnerHtml() )
+			.parent()
+				// add buttons
+				.append( this._buttonHtml() );
+
+		this.element.attr( "role", "spinbutton" );
+
+		// button bindings
+		this.buttons = uiSpinner.find( ".ui-spinner-button" )
+			.attr( "tabIndex", -1 )
+			.button()
+			.removeClass( "ui-corner-all" );
+
+		// IE 6 doesn't understand height: 50% for the buttons
+		// unless the wrapper has an explicit height
+		if ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&
+				uiSpinner.height() > 0 ) {
+			uiSpinner.height( uiSpinner.height() );
+		}
+
+		// disable spinner if element was already disabled
+		if ( this.options.disabled ) {
+			this.disable();
+		}
+	},
+
+	_keydown: function( event ) {
+		var options = this.options,
+			keyCode = $.ui.keyCode;
+
+		switch ( event.keyCode ) {
+		case keyCode.UP:
+			this._repeat( null, 1, event );
+			return true;
+		case keyCode.DOWN:
+			this._repeat( null, -1, event );
+			return true;
+		case keyCode.PAGE_UP:
+			this._repeat( null, options.page, event );
+			return true;
+		case keyCode.PAGE_DOWN:
+			this._repeat( null, -options.page, event );
+			return true;
+		}
+
+		return false;
+	},
+
+	_uiSpinnerHtml: function() {
+		return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
+	},
+
+	_buttonHtml: function() {
+		return "" +
+			"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>" +
+				"<span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" +
+			"</a>" +
+			"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" +
+				"<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" +
+			"</a>";
+	},
+
+	_start: function( event ) {
+		if ( !this.spinning && this._trigger( "start", event ) === false ) {
+			return false;
+		}
+
+		if ( !this.counter ) {
+			this.counter = 1;
+		}
+		this.spinning = true;
+		return true;
+	},
+
+	_repeat: function( i, steps, event ) {
+		i = i || 500;
+
+		clearTimeout( this.timer );
+		this.timer = this._delay(function() {
+			this._repeat( 40, steps, event );
+		}, i );
+
+		this._spin( steps * this.options.step, event );
+	},
+
+	_spin: function( step, event ) {
+		var value = this.value() || 0;
+
+		if ( !this.counter ) {
+			this.counter = 1;
+		}
+
+		value = this._adjustValue( value + step * this._increment( this.counter ) );
+
+		if ( !this.spinning || this._trigger( "spin", event, { value: value } ) !== false) {
+			this._value( value );
+			this.counter++;
+		}
+	},
+
+	_increment: function( i ) {
+		var incremental = this.options.incremental;
+
+		if ( incremental ) {
+			return $.isFunction( incremental ) ?
+				incremental( i ) :
+				Math.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );
+		}
+
+		return 1;
+	},
+
+	_precision: function() {
+		var precision = this._precisionOf( this.options.step );
+		if ( this.options.min !== null ) {
+			precision = Math.max( precision, this._precisionOf( this.options.min ) );
+		}
+		return precision;
+	},
+
+	_precisionOf: function( num ) {
+		var str = num.toString(),
+			decimal = str.indexOf( "." );
+		return decimal === -1 ? 0 : str.length - decimal - 1;
+	},
+
+	_adjustValue: function( value ) {
+		var base, aboveMin,
+			options = this.options;
+
+		// make sure we're at a valid step
+		// - find out where we are relative to the base (min or 0)
+		base = options.min !== null ? options.min : 0;
+		aboveMin = value - base;
+		// - round to the nearest step
+		aboveMin = Math.round(aboveMin / options.step) * options.step;
+		// - rounding is based on 0, so adjust back to our base
+		value = base + aboveMin;
+
+		// fix precision from bad JS floating point math
+		value = parseFloat( value.toFixed( this._precision() ) );
+
+		// clamp the value
+		if ( options.max !== null && value > options.max) {
+			return options.max;
+		}
+		if ( options.min !== null && value < options.min ) {
+			return options.min;
+		}
+
+		return value;
+	},
+
+	_stop: function( event ) {
+		if ( !this.spinning ) {
+			return;
+		}
+
+		clearTimeout( this.timer );
+		clearTimeout( this.mousewheelTimer );
+		this.counter = 0;
+		this.spinning = false;
+		this._trigger( "stop", event );
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "culture" || key === "numberFormat" ) {
+			var prevValue = this._parse( this.element.val() );
+			this.options[ key ] = value;
+			this.element.val( this._format( prevValue ) );
+			return;
+		}
+
+		if ( key === "max" || key === "min" || key === "step" ) {
+			if ( typeof value === "string" ) {
+				value = this._parse( value );
+			}
+		}
+		if ( key === "icons" ) {
+			this.buttons.first().find( ".ui-icon" )
+				.removeClass( this.options.icons.up )
+				.addClass( value.up );
+			this.buttons.last().find( ".ui-icon" )
+				.removeClass( this.options.icons.down )
+				.addClass( value.down );
+		}
+
+		this._super( key, value );
+
+		if ( key === "disabled" ) {
+			this.widget().toggleClass( "ui-state-disabled", !!value );
+			this.element.prop( "disabled", !!value );
+			this.buttons.button( value ? "disable" : "enable" );
+		}
+	},
+
+	_setOptions: spinner_modifier(function( options ) {
+		this._super( options );
+	}),
+
+	_parse: function( val ) {
+		if ( typeof val === "string" && val !== "" ) {
+			val = window.Globalize && this.options.numberFormat ?
+				Globalize.parseFloat( val, 10, this.options.culture ) : +val;
+		}
+		return val === "" || isNaN( val ) ? null : val;
+	},
+
+	_format: function( value ) {
+		if ( value === "" ) {
+			return "";
+		}
+		return window.Globalize && this.options.numberFormat ?
+			Globalize.format( value, this.options.numberFormat, this.options.culture ) :
+			value;
+	},
+
+	_refresh: function() {
+		this.element.attr({
+			"aria-valuemin": this.options.min,
+			"aria-valuemax": this.options.max,
+			// TODO: what should we do with values that can't be parsed?
+			"aria-valuenow": this._parse( this.element.val() )
+		});
+	},
+
+	isValid: function() {
+		var value = this.value();
+
+		// null is invalid
+		if ( value === null ) {
+			return false;
+		}
+
+		// if value gets adjusted, it's invalid
+		return value === this._adjustValue( value );
+	},
+
+	// update the value without triggering change
+	_value: function( value, allowAny ) {
+		var parsed;
+		if ( value !== "" ) {
+			parsed = this._parse( value );
+			if ( parsed !== null ) {
+				if ( !allowAny ) {
+					parsed = this._adjustValue( parsed );
+				}
+				value = this._format( parsed );
+			}
+		}
+		this.element.val( value );
+		this._refresh();
+	},
+
+	_destroy: function() {
+		this.element
+			.removeClass( "ui-spinner-input" )
+			.prop( "disabled", false )
+			.removeAttr( "autocomplete" )
+			.removeAttr( "role" )
+			.removeAttr( "aria-valuemin" )
+			.removeAttr( "aria-valuemax" )
+			.removeAttr( "aria-valuenow" );
+		this.uiSpinner.replaceWith( this.element );
+	},
+
+	stepUp: spinner_modifier(function( steps ) {
+		this._stepUp( steps );
+	}),
+	_stepUp: function( steps ) {
+		if ( this._start() ) {
+			this._spin( (steps || 1) * this.options.step );
+			this._stop();
+		}
+	},
+
+	stepDown: spinner_modifier(function( steps ) {
+		this._stepDown( steps );
+	}),
+	_stepDown: function( steps ) {
+		if ( this._start() ) {
+			this._spin( (steps || 1) * -this.options.step );
+			this._stop();
+		}
+	},
+
+	pageUp: spinner_modifier(function( pages ) {
+		this._stepUp( (pages || 1) * this.options.page );
+	}),
+
+	pageDown: spinner_modifier(function( pages ) {
+		this._stepDown( (pages || 1) * this.options.page );
+	}),
+
+	value: function( newVal ) {
+		if ( !arguments.length ) {
+			return this._parse( this.element.val() );
+		}
+		spinner_modifier( this._value ).call( this, newVal );
+	},
+
+	widget: function() {
+		return this.uiSpinner;
+	}
+});
+
+
+/*!
+ * jQuery UI Tabs 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/tabs/
+ */
+
+
+var tabs = $.widget( "ui.tabs", {
+	version: "1.11.4",
+	delay: 300,
+	options: {
+		active: null,
+		collapsible: false,
+		event: "click",
+		heightStyle: "content",
+		hide: null,
+		show: null,
+
+		// callbacks
+		activate: null,
+		beforeActivate: null,
+		beforeLoad: null,
+		load: null
+	},
+
+	_isLocal: (function() {
+		var rhash = /#.*$/;
+
+		return function( anchor ) {
+			var anchorUrl, locationUrl;
+
+			// support: IE7
+			// IE7 doesn't normalize the href property when set via script (#9317)
+			anchor = anchor.cloneNode( false );
+
+			anchorUrl = anchor.href.replace( rhash, "" );
+			locationUrl = location.href.replace( rhash, "" );
+
+			// decoding may throw an error if the URL isn't UTF-8 (#9518)
+			try {
+				anchorUrl = decodeURIComponent( anchorUrl );
+			} catch ( error ) {}
+			try {
+				locationUrl = decodeURIComponent( locationUrl );
+			} catch ( error ) {}
+
+			return anchor.hash.length > 1 && anchorUrl === locationUrl;
+		};
+	})(),
+
+	_create: function() {
+		var that = this,
+			options = this.options;
+
+		this.running = false;
+
+		this.element
+			.addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
+			.toggleClass( "ui-tabs-collapsible", options.collapsible );
+
+		this._processTabs();
+		options.active = this._initialActive();
+
+		// Take disabling tabs via class attribute from HTML
+		// into account and update option properly.
+		if ( $.isArray( options.disabled ) ) {
+			options.disabled = $.unique( options.disabled.concat(
+				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
+					return that.tabs.index( li );
+				})
+			) ).sort();
+		}
+
+		// check for length avoids error when initializing empty list
+		if ( this.options.active !== false && this.anchors.length ) {
+			this.active = this._findActive( options.active );
+		} else {
+			this.active = $();
+		}
+
+		this._refresh();
+
+		if ( this.active.length ) {
+			this.load( options.active );
+		}
+	},
+
+	_initialActive: function() {
+		var active = this.options.active,
+			collapsible = this.options.collapsible,
+			locationHash = location.hash.substring( 1 );
+
+		if ( active === null ) {
+			// check the fragment identifier in the URL
+			if ( locationHash ) {
+				this.tabs.each(function( i, tab ) {
+					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
+						active = i;
+						return false;
+					}
+				});
+			}
+
+			// check for a tab marked active via a class
+			if ( active === null ) {
+				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
+			}
+
+			// no active tab, set to false
+			if ( active === null || active === -1 ) {
+				active = this.tabs.length ? 0 : false;
+			}
+		}
+
+		// handle numbers: negative, out of range
+		if ( active !== false ) {
+			active = this.tabs.index( this.tabs.eq( active ) );
+			if ( active === -1 ) {
+				active = collapsible ? false : 0;
+			}
+		}
+
+		// don't allow collapsible: false and active: false
+		if ( !collapsible && active === false && this.anchors.length ) {
+			active = 0;
+		}
+
+		return active;
+	},
+
+	_getCreateEventData: function() {
+		return {
+			tab: this.active,
+			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
+		};
+	},
+
+	_tabKeydown: function( event ) {
+		var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
+			selectedIndex = this.tabs.index( focusedTab ),
+			goingForward = true;
+
+		if ( this._handlePageNav( event ) ) {
+			return;
+		}
+
+		switch ( event.keyCode ) {
+			case $.ui.keyCode.RIGHT:
+			case $.ui.keyCode.DOWN:
+				selectedIndex++;
+				break;
+			case $.ui.keyCode.UP:
+			case $.ui.keyCode.LEFT:
+				goingForward = false;
+				selectedIndex--;
+				break;
+			case $.ui.keyCode.END:
+				selectedIndex = this.anchors.length - 1;
+				break;
+			case $.ui.keyCode.HOME:
+				selectedIndex = 0;
+				break;
+			case $.ui.keyCode.SPACE:
+				// Activate only, no collapsing
+				event.preventDefault();
+				clearTimeout( this.activating );
+				this._activate( selectedIndex );
+				return;
+			case $.ui.keyCode.ENTER:
+				// Toggle (cancel delayed activation, allow collapsing)
+				event.preventDefault();
+				clearTimeout( this.activating );
+				// Determine if we should collapse or activate
+				this._activate( selectedIndex === this.options.active ? false : selectedIndex );
+				return;
+			default:
+				return;
+		}
+
+		// Focus the appropriate tab, based on which key was pressed
+		event.preventDefault();
+		clearTimeout( this.activating );
+		selectedIndex = this._focusNextTab( selectedIndex, goingForward );
+
+		// Navigating with control/command key will prevent automatic activation
+		if ( !event.ctrlKey && !event.metaKey ) {
+
+			// Update aria-selected immediately so that AT think the tab is already selected.
+			// Otherwise AT may confuse the user by stating that they need to activate the tab,
+			// but the tab will already be activated by the time the announcement finishes.
+			focusedTab.attr( "aria-selected", "false" );
+			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );
+
+			this.activating = this._delay(function() {
+				this.option( "active", selectedIndex );
+			}, this.delay );
+		}
+	},
+
+	_panelKeydown: function( event ) {
+		if ( this._handlePageNav( event ) ) {
+			return;
+		}
+
+		// Ctrl+up moves focus to the current tab
+		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
+			event.preventDefault();
+			this.active.focus();
+		}
+	},
+
+	// Alt+page up/down moves focus to the previous/next tab (and activates)
+	_handlePageNav: function( event ) {
+		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
+			this._activate( this._focusNextTab( this.options.active - 1, false ) );
+			return true;
+		}
+		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
+			this._activate( this._focusNextTab( this.options.active + 1, true ) );
+			return true;
+		}
+	},
+
+	_findNextTab: function( index, goingForward ) {
+		var lastTabIndex = this.tabs.length - 1;
+
+		function constrain() {
+			if ( index > lastTabIndex ) {
+				index = 0;
+			}
+			if ( index < 0 ) {
+				index = lastTabIndex;
+			}
+			return index;
+		}
+
+		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
+			index = goingForward ? index + 1 : index - 1;
+		}
+
+		return index;
+	},
+
+	_focusNextTab: function( index, goingForward ) {
+		index = this._findNextTab( index, goingForward );
+		this.tabs.eq( index ).focus();
+		return index;
+	},
+
+	_setOption: function( key, value ) {
+		if ( key === "active" ) {
+			// _activate() will handle invalid values and update this.options
+			this._activate( value );
+			return;
+		}
+
+		if ( key === "disabled" ) {
+			// don't use the widget factory's disabled handling
+			this._setupDisabled( value );
+			return;
+		}
+
+		this._super( key, value);
+
+		if ( key === "collapsible" ) {
+			this.element.toggleClass( "ui-tabs-collapsible", value );
+			// Setting collapsible: false while collapsed; open first panel
+			if ( !value && this.options.active === false ) {
+				this._activate( 0 );
+			}
+		}
+
+		if ( key === "event" ) {
+			this._setupEvents( value );
+		}
+
+		if ( key === "heightStyle" ) {
+			this._setupHeightStyle( value );
+		}
+	},
+
+	_sanitizeSelector: function( hash ) {
+		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
+	},
+
+	refresh: function() {
+		var options = this.options,
+			lis = this.tablist.children( ":has(a[href])" );
+
+		// get disabled tabs from class attribute from HTML
+		// this will get converted to a boolean if needed in _refresh()
+		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
+			return lis.index( tab );
+		});
+
+		this._processTabs();
+
+		// was collapsed or no tabs
+		if ( options.active === false || !this.anchors.length ) {
+			options.active = false;
+			this.active = $();
+		// was active, but active tab is gone
+		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
+			// all remaining tabs are disabled
+			if ( this.tabs.length === options.disabled.length ) {
+				options.active = false;
+				this.active = $();
+			// activate previous tab
+			} else {
+				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
+			}
+		// was active, active tab still exists
+		} else {
+			// make sure active index is correct
+			options.active = this.tabs.index( this.active );
+		}
+
+		this._refresh();
+	},
+
+	_refresh: function() {
+		this._setupDisabled( this.options.disabled );
+		this._setupEvents( this.options.event );
+		this._setupHeightStyle( this.options.heightStyle );
+
+		this.tabs.not( this.active ).attr({
+			"aria-selected": "false",
+			"aria-expanded": "false",
+			tabIndex: -1
+		});
+		this.panels.not( this._getPanelForTab( this.active ) )
+			.hide()
+			.attr({
+				"aria-hidden": "true"
+			});
+
+		// Make sure one tab is in the tab order
+		if ( !this.active.length ) {
+			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
+		} else {
+			this.active
+				.addClass( "ui-tabs-active ui-state-active" )
+				.attr({
+					"aria-selected": "true",
+					"aria-expanded": "true",
+					tabIndex: 0
+				});
+			this._getPanelForTab( this.active )
+				.show()
+				.attr({
+					"aria-hidden": "false"
+				});
+		}
+	},
+
+	_processTabs: function() {
+		var that = this,
+			prevTabs = this.tabs,
+			prevAnchors = this.anchors,
+			prevPanels = this.panels;
+
+		this.tablist = this._getList()
+			.addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
+			.attr( "role", "tablist" )
+
+			// Prevent users from focusing disabled tabs via click
+			.delegate( "> li", "mousedown" + this.eventNamespace, function( event ) {
+				if ( $( this ).is( ".ui-state-disabled" ) ) {
+					event.preventDefault();
+				}
+			})
+
+			// support: IE <9
+			// Preventing the default action in mousedown doesn't prevent IE
+			// from focusing the element, so if the anchor gets focused, blur.
+			// We don't have to worry about focusing the previously focused
+			// element since clicking on a non-focusable element should focus
+			// the body anyway.
+			.delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
+				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
+					this.blur();
+				}
+			});
+
+		this.tabs = this.tablist.find( "> li:has(a[href])" )
+			.addClass( "ui-state-default ui-corner-top" )
+			.attr({
+				role: "tab",
+				tabIndex: -1
+			});
+
+		this.anchors = this.tabs.map(function() {
+				return $( "a", this )[ 0 ];
+			})
+			.addClass( "ui-tabs-anchor" )
+			.attr({
+				role: "presentation",
+				tabIndex: -1
+			});
+
+		this.panels = $();
+
+		this.anchors.each(function( i, anchor ) {
+			var selector, panel, panelId,
+				anchorId = $( anchor ).uniqueId().attr( "id" ),
+				tab = $( anchor ).closest( "li" ),
+				originalAriaControls = tab.attr( "aria-controls" );
+
+			// inline tab
+			if ( that._isLocal( anchor ) ) {
+				selector = anchor.hash;
+				panelId = selector.substring( 1 );
+				panel = that.element.find( that._sanitizeSelector( selector ) );
+			// remote tab
+			} else {
+				// If the tab doesn't already have aria-controls,
+				// generate an id by using a throw-away element
+				panelId = tab.attr( "aria-controls" ) || $( {} ).uniqueId()[ 0 ].id;
+				selector = "#" + panelId;
+				panel = that.element.find( selector );
+				if ( !panel.length ) {
+					panel = that._createPanel( panelId );
+					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
+				}
+				panel.attr( "aria-live", "polite" );
+			}
+
+			if ( panel.length) {
+				that.panels = that.panels.add( panel );
+			}
+			if ( originalAriaControls ) {
+				tab.data( "ui-tabs-aria-controls", originalAriaControls );
+			}
+			tab.attr({
+				"aria-controls": panelId,
+				"aria-labelledby": anchorId
+			});
+			panel.attr( "aria-labelledby", anchorId );
+		});
+
+		this.panels
+			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
+			.attr( "role", "tabpanel" );
+
+		// Avoid memory leaks (#10056)
+		if ( prevTabs ) {
+			this._off( prevTabs.not( this.tabs ) );
+			this._off( prevAnchors.not( this.anchors ) );
+			this._off( prevPanels.not( this.panels ) );
+		}
+	},
+
+	// allow overriding how to find the list for rare usage scenarios (#7715)
+	_getList: function() {
+		return this.tablist || this.element.find( "ol,ul" ).eq( 0 );
+	},
+
+	_createPanel: function( id ) {
+		return $( "<div>" )
+			.attr( "id", id )
+			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
+			.data( "ui-tabs-destroy", true );
+	},
+
+	_setupDisabled: function( disabled ) {
+		if ( $.isArray( disabled ) ) {
+			if ( !disabled.length ) {
+				disabled = false;
+			} else if ( disabled.length === this.anchors.length ) {
+				disabled = true;
+			}
+		}
+
+		// disable tabs
+		for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
+			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
+				$( li )
+					.addClass( "ui-state-disabled" )
+					.attr( "aria-disabled", "true" );
+			} else {
+				$( li )
+					.removeClass( "ui-state-disabled" )
+					.removeAttr( "aria-disabled" );
+			}
+		}
+
+		this.options.disabled = disabled;
+	},
+
+	_setupEvents: function( event ) {
+		var events = {};
+		if ( event ) {
+			$.each( event.split(" "), function( index, eventName ) {
+				events[ eventName ] = "_eventHandler";
+			});
+		}
+
+		this._off( this.anchors.add( this.tabs ).add( this.panels ) );
+		// Always prevent the default action, even when disabled
+		this._on( true, this.anchors, {
+			click: function( event ) {
+				event.preventDefault();
+			}
+		});
+		this._on( this.anchors, events );
+		this._on( this.tabs, { keydown: "_tabKeydown" } );
+		this._on( this.panels, { keydown: "_panelKeydown" } );
+
+		this._focusable( this.tabs );
+		this._hoverable( this.tabs );
+	},
+
+	_setupHeightStyle: function( heightStyle ) {
+		var maxHeight,
+			parent = this.element.parent();
+
+		if ( heightStyle === "fill" ) {
+			maxHeight = parent.height();
+			maxHeight -= this.element.outerHeight() - this.element.height();
+
+			this.element.siblings( ":visible" ).each(function() {
+				var elem = $( this ),
+					position = elem.css( "position" );
+
+				if ( position === "absolute" || position === "fixed" ) {
+					return;
+				}
+				maxHeight -= elem.outerHeight( true );
+			});
+
+			this.element.children().not( this.panels ).each(function() {
+				maxHeight -= $( this ).outerHeight( true );
+			});
+
+			this.panels.each(function() {
+				$( this ).height( Math.max( 0, maxHeight -
+					$( this ).innerHeight() + $( this ).height() ) );
+			})
+			.css( "overflow", "auto" );
+		} else if ( heightStyle === "auto" ) {
+			maxHeight = 0;
+			this.panels.each(function() {
+				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
+			}).height( maxHeight );
+		}
+	},
+
+	_eventHandler: function( event ) {
+		var options = this.options,
+			active = this.active,
+			anchor = $( event.currentTarget ),
+			tab = anchor.closest( "li" ),
+			clickedIsActive = tab[ 0 ] === active[ 0 ],
+			collapsing = clickedIsActive && options.collapsible,
+			toShow = collapsing ? $() : this._getPanelForTab( tab ),
+			toHide = !active.length ? $() : this._getPanelForTab( active ),
+			eventData = {
+				oldTab: active,
+				oldPanel: toHide,
+				newTab: collapsing ? $() : tab,
+				newPanel: toShow
+			};
+
+		event.preventDefault();
+
+		if ( tab.hasClass( "ui-state-disabled" ) ||
+				// tab is already loading
+				tab.hasClass( "ui-tabs-loading" ) ||
+				// can't switch durning an animation
+				this.running ||
+				// click on active header, but not collapsible
+				( clickedIsActive && !options.collapsible ) ||
+				// allow canceling activation
+				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
+			return;
+		}
+
+		options.active = collapsing ? false : this.tabs.index( tab );
+
+		this.active = clickedIsActive ? $() : tab;
+		if ( this.xhr ) {
+			this.xhr.abort();
+		}
+
+		if ( !toHide.length && !toShow.length ) {
+			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
+		}
+
+		if ( toShow.length ) {
+			this.load( this.tabs.index( tab ), event );
+		}
+		this._toggle( event, eventData );
+	},
+
+	// handles show/hide for selecting tabs
+	_toggle: function( event, eventData ) {
+		var that = this,
+			toShow = eventData.newPanel,
+			toHide = eventData.oldPanel;
+
+		this.running = true;
+
+		function complete() {
+			that.running = false;
+			that._trigger( "activate", event, eventData );
+		}
+
+		function show() {
+			eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );
+
+			if ( toShow.length && that.options.show ) {
+				that._show( toShow, that.options.show, complete );
+			} else {
+				toShow.show();
+				complete();
+			}
+		}
+
+		// start out by hiding, then showing, then completing
+		if ( toHide.length && this.options.hide ) {
+			this._hide( toHide, this.options.hide, function() {
+				eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
+				show();
+			});
+		} else {
+			eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
+			toHide.hide();
+			show();
+		}
+
+		toHide.attr( "aria-hidden", "true" );
+		eventData.oldTab.attr({
+			"aria-selected": "false",
+			"aria-expanded": "false"
+		});
+		// If we're switching tabs, remove the old tab from the tab order.
+		// If we're opening from collapsed state, remove the previous tab from the tab order.
+		// If we're collapsing, then keep the collapsing tab in the tab order.
+		if ( toShow.length && toHide.length ) {
+			eventData.oldTab.attr( "tabIndex", -1 );
+		} else if ( toShow.length ) {
+			this.tabs.filter(function() {
+				return $( this ).attr( "tabIndex" ) === 0;
+			})
+			.attr( "tabIndex", -1 );
+		}
+
+		toShow.attr( "aria-hidden", "false" );
+		eventData.newTab.attr({
+			"aria-selected": "true",
+			"aria-expanded": "true",
+			tabIndex: 0
+		});
+	},
+
+	_activate: function( index ) {
+		var anchor,
+			active = this._findActive( index );
+
+		// trying to activate the already active panel
+		if ( active[ 0 ] === this.active[ 0 ] ) {
+			return;
+		}
+
+		// trying to collapse, simulate a click on the current active header
+		if ( !active.length ) {
+			active = this.active;
+		}
+
+		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
+		this._eventHandler({
+			target: anchor,
+			currentTarget: anchor,
+			preventDefault: $.noop
+		});
+	},
+
+	_findActive: function( index ) {
+		return index === false ? $() : this.tabs.eq( index );
+	},
+
+	_getIndex: function( index ) {
+		// meta-function to give users option to provide a href string instead of a numerical index.
+		if ( typeof index === "string" ) {
+			index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
+		}
+
+		return index;
+	},
+
+	_destroy: function() {
+		if ( this.xhr ) {
+			this.xhr.abort();
+		}
+
+		this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );
+
+		this.tablist
+			.removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
+			.removeAttr( "role" );
+
+		this.anchors
+			.removeClass( "ui-tabs-anchor" )
+			.removeAttr( "role" )
+			.removeAttr( "tabIndex" )
+			.removeUniqueId();
+
+		this.tablist.unbind( this.eventNamespace );
+
+		this.tabs.add( this.panels ).each(function() {
+			if ( $.data( this, "ui-tabs-destroy" ) ) {
+				$( this ).remove();
+			} else {
+				$( this )
+					.removeClass( "ui-state-default ui-state-active ui-state-disabled " +
+						"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
+					.removeAttr( "tabIndex" )
+					.removeAttr( "aria-live" )
+					.removeAttr( "aria-busy" )
+					.removeAttr( "aria-selected" )
+					.removeAttr( "aria-labelledby" )
+					.removeAttr( "aria-hidden" )
+					.removeAttr( "aria-expanded" )
+					.removeAttr( "role" );
+			}
+		});
+
+		this.tabs.each(function() {
+			var li = $( this ),
+				prev = li.data( "ui-tabs-aria-controls" );
+			if ( prev ) {
+				li
+					.attr( "aria-controls", prev )
+					.removeData( "ui-tabs-aria-controls" );
+			} else {
+				li.removeAttr( "aria-controls" );
+			}
+		});
+
+		this.panels.show();
+
+		if ( this.options.heightStyle !== "content" ) {
+			this.panels.css( "height", "" );
+		}
+	},
+
+	enable: function( index ) {
+		var disabled = this.options.disabled;
+		if ( disabled === false ) {
+			return;
+		}
+
+		if ( index === undefined ) {
+			disabled = false;
+		} else {
+			index = this._getIndex( index );
+			if ( $.isArray( disabled ) ) {
+				disabled = $.map( disabled, function( num ) {
+					return num !== index ? num : null;
+				});
+			} else {
+				disabled = $.map( this.tabs, function( li, num ) {
+					return num !== index ? num : null;
+				});
+			}
+		}
+		this._setupDisabled( disabled );
+	},
+
+	disable: function( index ) {
+		var disabled = this.options.disabled;
+		if ( disabled === true ) {
+			return;
+		}
+
+		if ( index === undefined ) {
+			disabled = true;
+		} else {
+			index = this._getIndex( index );
+			if ( $.inArray( index, disabled ) !== -1 ) {
+				return;
+			}
+			if ( $.isArray( disabled ) ) {
+				disabled = $.merge( [ index ], disabled ).sort();
+			} else {
+				disabled = [ index ];
+			}
+		}
+		this._setupDisabled( disabled );
+	},
+
+	load: function( index, event ) {
+		index = this._getIndex( index );
+		var that = this,
+			tab = this.tabs.eq( index ),
+			anchor = tab.find( ".ui-tabs-anchor" ),
+			panel = this._getPanelForTab( tab ),
+			eventData = {
+				tab: tab,
+				panel: panel
+			},
+			complete = function( jqXHR, status ) {
+				if ( status === "abort" ) {
+					that.panels.stop( false, true );
+				}
+
+				tab.removeClass( "ui-tabs-loading" );
+				panel.removeAttr( "aria-busy" );
+
+				if ( jqXHR === that.xhr ) {
+					delete that.xhr;
+				}
+			};
+
+		// not remote
+		if ( this._isLocal( anchor[ 0 ] ) ) {
+			return;
+		}
+
+		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );
+
+		// support: jQuery <1.8
+		// jQuery <1.8 returns false if the request is canceled in beforeSend,
+		// but as of 1.8, $.ajax() always returns a jqXHR object.
+		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
+			tab.addClass( "ui-tabs-loading" );
+			panel.attr( "aria-busy", "true" );
+
+			this.xhr
+				.done(function( response, status, jqXHR ) {
+					// support: jQuery <1.8
+					// http://bugs.jquery.com/ticket/11778
+					setTimeout(function() {
+						panel.html( response );
+						that._trigger( "load", event, eventData );
+
+						complete( jqXHR, status );
+					}, 1 );
+				})
+				.fail(function( jqXHR, status ) {
+					// support: jQuery <1.8
+					// http://bugs.jquery.com/ticket/11778
+					setTimeout(function() {
+						complete( jqXHR, status );
+					}, 1 );
+				});
+		}
+	},
+
+	_ajaxSettings: function( anchor, event, eventData ) {
+		var that = this;
+		return {
+			url: anchor.attr( "href" ),
+			beforeSend: function( jqXHR, settings ) {
+				return that._trigger( "beforeLoad", event,
+					$.extend( { jqXHR: jqXHR, ajaxSettings: settings }, eventData ) );
+			}
+		};
+	},
+
+	_getPanelForTab: function( tab ) {
+		var id = $( tab ).attr( "aria-controls" );
+		return this.element.find( this._sanitizeSelector( "#" + id ) );
+	}
+});
+
+
+/*!
+ * jQuery UI Tooltip 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/tooltip/
+ */
+
+
+var tooltip = $.widget( "ui.tooltip", {
+	version: "1.11.4",
+	options: {
+		content: function() {
+			// support: IE<9, Opera in jQuery <1.7
+			// .text() can't accept undefined, so coerce to a string
+			var title = $( this ).attr( "title" ) || "";
+			// Escape title, since we're going from an attribute to raw HTML
+			return $( "<a>" ).text( title ).html();
+		},
+		hide: true,
+		// Disabled elements have inconsistent behavior across browsers (#8661)
+		items: "[title]:not([disabled])",
+		position: {
+			my: "left top+15",
+			at: "left bottom",
+			collision: "flipfit flip"
+		},
+		show: true,
+		tooltipClass: null,
+		track: false,
+
+		// callbacks
+		close: null,
+		open: null
+	},
+
+	_addDescribedBy: function( elem, id ) {
+		var describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ );
+		describedby.push( id );
+		elem
+			.data( "ui-tooltip-id", id )
+			.attr( "aria-describedby", $.trim( describedby.join( " " ) ) );
+	},
+
+	_removeDescribedBy: function( elem ) {
+		var id = elem.data( "ui-tooltip-id" ),
+			describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ ),
+			index = $.inArray( id, describedby );
+
+		if ( index !== -1 ) {
+			describedby.splice( index, 1 );
+		}
+
+		elem.removeData( "ui-tooltip-id" );
+		describedby = $.trim( describedby.join( " " ) );
+		if ( describedby ) {
+			elem.attr( "aria-describedby", describedby );
+		} else {
+			elem.removeAttr( "aria-describedby" );
+		}
+	},
+
+	_create: function() {
+		this._on({
+			mouseover: "open",
+			focusin: "open"
+		});
+
+		// IDs of generated tooltips, needed for destroy
+		this.tooltips = {};
+
+		// IDs of parent tooltips where we removed the title attribute
+		this.parents = {};
+
+		if ( this.options.disabled ) {
+			this._disable();
+		}
+
+		// Append the aria-live region so tooltips announce correctly
+		this.liveRegion = $( "<div>" )
+			.attr({
+				role: "log",
+				"aria-live": "assertive",
+				"aria-relevant": "additions"
+			})
+			.addClass( "ui-helper-hidden-accessible" )
+			.appendTo( this.document[ 0 ].body );
+	},
+
+	_setOption: function( key, value ) {
+		var that = this;
+
+		if ( key === "disabled" ) {
+			this[ value ? "_disable" : "_enable" ]();
+			this.options[ key ] = value;
+			// disable element style changes
+			return;
+		}
+
+		this._super( key, value );
+
+		if ( key === "content" ) {
+			$.each( this.tooltips, function( id, tooltipData ) {
+				that._updateContent( tooltipData.element );
+			});
+		}
+	},
+
+	_disable: function() {
+		var that = this;
+
+		// close open tooltips
+		$.each( this.tooltips, function( id, tooltipData ) {
+			var event = $.Event( "blur" );
+			event.target = event.currentTarget = tooltipData.element[ 0 ];
+			that.close( event, true );
+		});
+
+		// remove title attributes to prevent native tooltips
+		this.element.find( this.options.items ).addBack().each(function() {
+			var element = $( this );
+			if ( element.is( "[title]" ) ) {
+				element
+					.data( "ui-tooltip-title", element.attr( "title" ) )
+					.removeAttr( "title" );
+			}
+		});
+	},
+
+	_enable: function() {
+		// restore title attributes
+		this.element.find( this.options.items ).addBack().each(function() {
+			var element = $( this );
+			if ( element.data( "ui-tooltip-title" ) ) {
+				element.attr( "title", element.data( "ui-tooltip-title" ) );
+			}
+		});
+	},
+
+	open: function( event ) {
+		var that = this,
+			target = $( event ? event.target : this.element )
+				// we need closest here due to mouseover bubbling,
+				// but always pointing at the same event target
+				.closest( this.options.items );
+
+		// No element to show a tooltip for or the tooltip is already open
+		if ( !target.length || target.data( "ui-tooltip-id" ) ) {
+			return;
+		}
+
+		if ( target.attr( "title" ) ) {
+			target.data( "ui-tooltip-title", target.attr( "title" ) );
+		}
+
+		target.data( "ui-tooltip-open", true );
+
+		// kill parent tooltips, custom or native, for hover
+		if ( event && event.type === "mouseover" ) {
+			target.parents().each(function() {
+				var parent = $( this ),
+					blurEvent;
+				if ( parent.data( "ui-tooltip-open" ) ) {
+					blurEvent = $.Event( "blur" );
+					blurEvent.target = blurEvent.currentTarget = this;
+					that.close( blurEvent, true );
+				}
+				if ( parent.attr( "title" ) ) {
+					parent.uniqueId();
+					that.parents[ this.id ] = {
+						element: this,
+						title: parent.attr( "title" )
+					};
+					parent.attr( "title", "" );
+				}
+			});
+		}
+
+		this._registerCloseHandlers( event, target );
+		this._updateContent( target, event );
+	},
+
+	_updateContent: function( target, event ) {
+		var content,
+			contentOption = this.options.content,
+			that = this,
+			eventType = event ? event.type : null;
+
+		if ( typeof contentOption === "string" ) {
+			return this._open( event, target, contentOption );
+		}
+
+		content = contentOption.call( target[0], function( response ) {
+
+			// IE may instantly serve a cached response for ajax requests
+			// delay this call to _open so the other call to _open runs first
+			that._delay(function() {
+
+				// Ignore async response if tooltip was closed already
+				if ( !target.data( "ui-tooltip-open" ) ) {
+					return;
+				}
+
+				// jQuery creates a special event for focusin when it doesn't
+				// exist natively. To improve performance, the native event
+				// object is reused and the type is changed. Therefore, we can't
+				// rely on the type being correct after the event finished
+				// bubbling, so we set it back to the previous value. (#8740)
+				if ( event ) {
+					event.type = eventType;
+				}
+				this._open( event, target, response );
+			});
+		});
+		if ( content ) {
+			this._open( event, target, content );
+		}
+	},
+
+	_open: function( event, target, content ) {
+		var tooltipData, tooltip, delayedShow, a11yContent,
+			positionOption = $.extend( {}, this.options.position );
+
+		if ( !content ) {
+			return;
+		}
+
+		// Content can be updated multiple times. If the tooltip already
+		// exists, then just update the content and bail.
+		tooltipData = this._find( target );
+		if ( tooltipData ) {
+			tooltipData.tooltip.find( ".ui-tooltip-content" ).html( content );
+			return;
+		}
+
+		// if we have a title, clear it to prevent the native tooltip
+		// we have to check first to avoid defining a title if none exists
+		// (we don't want to cause an element to start matching [title])
+		//
+		// We use removeAttr only for key events, to allow IE to export the correct
+		// accessible attributes. For mouse events, set to empty string to avoid
+		// native tooltip showing up (happens only when removing inside mouseover).
+		if ( target.is( "[title]" ) ) {
+			if ( event && event.type === "mouseover" ) {
+				target.attr( "title", "" );
+			} else {
+				target.removeAttr( "title" );
+			}
+		}
+
+		tooltipData = this._tooltip( target );
+		tooltip = tooltipData.tooltip;
+		this._addDescribedBy( target, tooltip.attr( "id" ) );
+		tooltip.find( ".ui-tooltip-content" ).html( content );
+
+		// Support: Voiceover on OS X, JAWS on IE <= 9
+		// JAWS announces deletions even when aria-relevant="additions"
+		// Voiceover will sometimes re-read the entire log region's contents from the beginning
+		this.liveRegion.children().hide();
+		if ( content.clone ) {
+			a11yContent = content.clone();
+			a11yContent.removeAttr( "id" ).find( "[id]" ).removeAttr( "id" );
+		} else {
+			a11yContent = content;
+		}
+		$( "<div>" ).html( a11yContent ).appendTo( this.liveRegion );
+
+		function position( event ) {
+			positionOption.of = event;
+			if ( tooltip.is( ":hidden" ) ) {
+				return;
+			}
+			tooltip.position( positionOption );
+		}
+		if ( this.options.track && event && /^mouse/.test( event.type ) ) {
+			this._on( this.document, {
+				mousemove: position
+			});
+			// trigger once to override element-relative positioning
+			position( event );
+		} else {
+			tooltip.position( $.extend({
+				of: target
+			}, this.options.position ) );
+		}
+
+		tooltip.hide();
+
+		this._show( tooltip, this.options.show );
+		// Handle tracking tooltips that are shown with a delay (#8644). As soon
+		// as the tooltip is visible, position the tooltip using the most recent
+		// event.
+		if ( this.options.show && this.options.show.delay ) {
+			delayedShow = this.delayedShow = setInterval(function() {
+				if ( tooltip.is( ":visible" ) ) {
+					position( positionOption.of );
+					clearInterval( delayedShow );
+				}
+			}, $.fx.interval );
+		}
+
+		this._trigger( "open", event, { tooltip: tooltip } );
+	},
+
+	_registerCloseHandlers: function( event, target ) {
+		var events = {
+			keyup: function( event ) {
+				if ( event.keyCode === $.ui.keyCode.ESCAPE ) {
+					var fakeEvent = $.Event(event);
+					fakeEvent.currentTarget = target[0];
+					this.close( fakeEvent, true );
+				}
+			}
+		};
+
+		// Only bind remove handler for delegated targets. Non-delegated
+		// tooltips will handle this in destroy.
+		if ( target[ 0 ] !== this.element[ 0 ] ) {
+			events.remove = function() {
+				this._removeTooltip( this._find( target ).tooltip );
+			};
+		}
+
+		if ( !event || event.type === "mouseover" ) {
+			events.mouseleave = "close";
+		}
+		if ( !event || event.type === "focusin" ) {
+			events.focusout = "close";
+		}
+		this._on( true, target, events );
+	},
+
+	close: function( event ) {
+		var tooltip,
+			that = this,
+			target = $( event ? event.currentTarget : this.element ),
+			tooltipData = this._find( target );
+
+		// The tooltip may already be closed
+		if ( !tooltipData ) {
+
+			// We set ui-tooltip-open immediately upon open (in open()), but only set the
+			// additional data once there's actually content to show (in _open()). So even if the
+			// tooltip doesn't have full data, we always remove ui-tooltip-open in case we're in
+			// the period between open() and _open().
+			target.removeData( "ui-tooltip-open" );
+			return;
+		}
+
+		tooltip = tooltipData.tooltip;
+
+		// disabling closes the tooltip, so we need to track when we're closing
+		// to avoid an infinite loop in case the tooltip becomes disabled on close
+		if ( tooltipData.closing ) {
+			return;
+		}
+
+		// Clear the interval for delayed tracking tooltips
+		clearInterval( this.delayedShow );
+
+		// only set title if we had one before (see comment in _open())
+		// If the title attribute has changed since open(), don't restore
+		if ( target.data( "ui-tooltip-title" ) && !target.attr( "title" ) ) {
+			target.attr( "title", target.data( "ui-tooltip-title" ) );
+		}
+
+		this._removeDescribedBy( target );
+
+		tooltipData.hiding = true;
+		tooltip.stop( true );
+		this._hide( tooltip, this.options.hide, function() {
+			that._removeTooltip( $( this ) );
+		});
+
+		target.removeData( "ui-tooltip-open" );
+		this._off( target, "mouseleave focusout keyup" );
+
+		// Remove 'remove' binding only on delegated targets
+		if ( target[ 0 ] !== this.element[ 0 ] ) {
+			this._off( target, "remove" );
+		}
+		this._off( this.document, "mousemove" );
+
+		if ( event && event.type === "mouseleave" ) {
+			$.each( this.parents, function( id, parent ) {
+				$( parent.element ).attr( "title", parent.title );
+				delete that.parents[ id ];
+			});
+		}
+
+		tooltipData.closing = true;
+		this._trigger( "close", event, { tooltip: tooltip } );
+		if ( !tooltipData.hiding ) {
+			tooltipData.closing = false;
+		}
+	},
+
+	_tooltip: function( element ) {
+		var tooltip = $( "<div>" )
+				.attr( "role", "tooltip" )
+				.addClass( "ui-tooltip ui-widget ui-corner-all ui-widget-content " +
+					( this.options.tooltipClass || "" ) ),
+			id = tooltip.uniqueId().attr( "id" );
+
+		$( "<div>" )
+			.addClass( "ui-tooltip-content" )
+			.appendTo( tooltip );
+
+		tooltip.appendTo( this.document[0].body );
+
+		return this.tooltips[ id ] = {
+			element: element,
+			tooltip: tooltip
+		};
+	},
+
+	_find: function( target ) {
+		var id = target.data( "ui-tooltip-id" );
+		return id ? this.tooltips[ id ] : null;
+	},
+
+	_removeTooltip: function( tooltip ) {
+		tooltip.remove();
+		delete this.tooltips[ tooltip.attr( "id" ) ];
+	},
+
+	_destroy: function() {
+		var that = this;
+
+		// close open tooltips
+		$.each( this.tooltips, function( id, tooltipData ) {
+			// Delegate to close method to handle common cleanup
+			var event = $.Event( "blur" ),
+				element = tooltipData.element;
+			event.target = event.currentTarget = element[ 0 ];
+			that.close( event, true );
+
+			// Remove immediately; destroying an open tooltip doesn't use the
+			// hide animation
+			$( "#" + id ).remove();
+
+			// Restore the title
+			if ( element.data( "ui-tooltip-title" ) ) {
+				// If the title attribute has changed since open(), don't restore
+				if ( !element.attr( "title" ) ) {
+					element.attr( "title", element.data( "ui-tooltip-title" ) );
+				}
+				element.removeData( "ui-tooltip-title" );
+			}
+		});
+		this.liveRegion.remove();
+	}
+});
+
+
+
+}));
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.min.css elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.min.css
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.min.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.min.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,7 @@
+/*! jQuery UI - v1.11.4 - 2015-03-11
+* http://jqueryui.com
+* Includes: core.css, accordion.css, autocomplete.css, button.css, datepicker.css, dialog.css, draggable.css, menu.css, progressbar.css, resizable.css, selectable.css, selectmenu.css, slider.css, sortable.css, spinner.css, tabs.css, tooltip.css, theme.css
+* To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Trebuchet%20MS%2CTahoma%2CVerdana%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=4px&bgColorHeader=f6a828&bgTextureHeader=gloss_wave&bgImgOpacityHeader=35&borderColorHeader=e78f08&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=eeeeee&bgTextureContent=highlight_soft&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=333333&iconColorContent=222222&bgColorDefault=f6f6f6&bgTextureDefault=glass&bgImgOpacityDefault=100&borderColorDefault=cccccc&fcDefault=1c94c4&iconColorDefault=ef8c08&bgColorHover=fdf5ce&bgTextureHover=glass&bgImgOpacityHover=100&borderColorHover=fbcb09&fcHover=c77405&iconColorHover=ef8c08&bgColorActive=ffffff&bgTextureActive=glass&bgImgOpacityActive=65&borderColorActive=fbd850&fcActive=eb8f00&iconColorActive=ef8c08&bgColorHighlight=ffe45c&bgTextureHighlight=highlight_soft&bgImgOpacityHighlight=75&borderColorHighlight=fed22f&fcHighlight=363636&iconColorHighlight=228ef1&bgColorError=b81900&bgTextureError=diagonals_thick&bgImgOpacityError=18&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffd27a&bgColorOverlay=666666&bgTextureOverlay=diagonals_thick&bgImgOpacityOverlay=20&opacityOverlay=50&bgColorShadow=000000&bgTextureShadow=flat&bgImgOpacityShadow=10&opacityShadow=20&thicknessShadow=5px&offsetTopShadow=-5px&offsetLeftShadow=-5px&cornerRadiusShadow=5px
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
+
+.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-accordion .ui-accordion-header{display:block;cursor:pointer;position:relative;margin:2px 0 0 0;padding:.5em .5em .5em .7em;min-height:0;font-size:100%}.ui-accordion .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-icons .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-header .ui-accordion-header-icon{position:absolute;left:.5em;top:50%;margin-top:-8px}.ui-accordion .ui-accordion-content{padding:1em 2.2em;border-top:0;overflow:auto}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.4em 1em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-datepicker{width:17em;padding:.2em .2em 0;display:none}.ui-datepicker .ui-datepicker-header{position:relative;padding:.2em 0}.ui-datepicker .ui-datepicker-prev,.ui-datepicker .ui-datepicker-next{position:absolute;top:2px;width:1.8em;height:1.8em}.ui-datepicker .ui-datepicker-prev-hover,.ui-datepicker .ui-datepicker-next-hover{top:1px}.ui-datepicker .ui-datepicker-prev{left:2px}.ui-datepicker .ui-datepicker-next{right:2px}.ui-datepicker .ui-datepicker-prev-hover{left:1px}.ui-datepicker .ui-datepicker-next-hover{right:1px}.ui-datepicker .ui-datepicker-prev span,.ui-datepicker .ui-datepicker-next span{display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.ui-datepicker .ui-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.ui-datepicker .ui-datepicker-title select{font-size:1em;margin:1px 0}.ui-datepicker select.ui-datepicker-month,.ui-datepicker select.ui-datepicker-year{width:45%}.ui-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.ui-datepicker th{padding:.7em .3em;text-align:center;font-weight:bold;border:0}.ui-datepicker td{border:0;padding:1px}.ui-datepicker td span,.ui-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.ui-datepicker .ui-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.ui-datepicker .ui-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current{float:left}.ui-datepicker.ui-datepicker-multi{width:auto}.ui-datepicker-multi .ui-datepicker-group{float:left}.ui-datepicker-multi .ui-datepicker-group table{width:95%;margin:0 auto .4em}.ui-datepicker-multi-2 .ui-datepicker-group{width:50%}.ui-datepicker-multi-3 .ui-datepicker-group{width:33.3%}.ui-datepicker-multi-4 .ui-datepicker-group{width:25%}.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header{border-left-width:0}.ui-datepicker-multi .ui-datepicker-buttonpane{clear:left}.ui-datepicker-row-break{clear:both;width:100%;font-size:0}.ui-datepicker-rtl{direction:rtl}.ui-datepicker-rtl .ui-datepicker-prev{right:2px;left:auto}.ui-datepicker-rtl .ui-datepicker-next{left:2px;right:auto}.ui-datepicker-rtl .ui-datepicker-prev:hover{right:1px;left:auto}.ui-datepicker-rtl .ui-datepicker-next:hover{left:1px;right:auto}.ui-datepicker-rtl .ui-datepicker-buttonpane{clear:right}.ui-datepicker-rtl .ui-datepicker-buttonpane button{float:left}.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,.ui-datepicker-rtl .ui-datepicker-group{float:right}.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header{border-right-width:0;border-left-width:1px}.ui-dialog{overflow:hidden;position:absolute;top:0;left:0;padding:.2em;outline:0}.ui-dialog .ui-dialog-titlebar{padding:.4em 1em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:20px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em 1em;background:none;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-draggable-handle{-ms-touch-action:none;touch-action:none}.ui-menu{list-style:none;padding:0;margin:0;display:block;outline:none}.ui-menu .ui-menu{position:absolute}.ui-menu .ui-menu-item{position:relative;margin:0;padding:3px 1em 3px .4em;cursor:pointer;min-height:0;list-style-image:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}.ui-menu .ui-menu-divider{margin:5px 0;height:0;font-size:0;line-height:0;border-width:1px 0 0 0}.ui-menu .ui-state-focus,.ui-menu .ui-state-active{margin:-1px}.ui-menu-icons{position:relative}.ui-menu-icons .ui-menu-item{padding-left:2em}.ui-menu .ui-icon{position:absolute;top:0;bottom:0;left:.2em;margin:auto 0}.ui-menu .ui-menu-icon{left:auto;right:0}.ui-progressbar{height:2em;text-align:left;overflow:hidden}.ui-progressbar .ui-progressbar-value{margin:-1px;height:100%}.ui-progressbar .ui-progressbar-overlay{background:url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");height:100%;filter:alpha(opacity=25);opacity:0.25}.ui-progressbar-indeterminate .ui-progressbar-value{background-image:none}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:0.1px;display:block;-ms-touch-action:none;touch-action:none}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-selectable{-ms-touch-action:none;touch-action:none}.ui-selectable-helper{position:absolute;z-index:100;border:1px dotted black}.ui-selectmenu-menu{padding:0;margin:0;position:absolute;top:0;left:0;display:none}.ui-selectmenu-menu .ui-menu{overflow:auto;overflow-x:hidden;padding-bottom:1px}.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup{font-size:1em;font-weight:bold;line-height:1.5;padding:2px 0.4em;margin:0.5em 0 0 0;height:auto;border:0}.ui-selectmenu-open{display:block}.ui-selectmenu-button{display:inline-block;overflow:hidden;position:relative;text-decoration:none;cursor:pointer}.ui-selectmenu-button span.ui-icon{right:0.5em;left:auto;margin-top:-8px;position:absolute;top:50%}.ui-selectmenu-button span.ui-selectmenu-text{text-align:left;padding:0.4em 2.1em 0.4em 1em;display:block;line-height:1.4;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-sortable-handle{-ms-touch-action:none;touch-action:none}.ui-spinner{position:relative;display:inline-block;overflow:hidden;padding:0;vertical-align:middle}.ui-spinner-input{border:none;background:none;color:inherit;padding:0;margin:.2em 0;vertical-align:middle;margin-left:.4em;margin-right:22px}.ui-spinner-button{width:16px;height:50%;font-size:.5em;padding:0;margin:0;text-align:center;position:absolute;cursor:default;display:block;overflow:hidden;right:0}.ui-spinner a.ui-spinner-button{border-top:none;border-bottom:none;border-right:none}.ui-spinner .ui-icon{position:absolute;margin-top:-8px;top:50%;left:0}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}.ui-spinner .ui-icon-triangle-1-s{background-position:-65px -16px}.ui-tabs{position:relative;padding:.2em}.ui-tabs .ui-tabs-nav{margin:0;padding:.2em .2em 0}.ui-tabs .ui-tabs-nav li{list-style:none;float:left;position:relative;top:0;margin:1px .2em 0 0;border-bottom-width:0;padding:0;white-space:nowrap}.ui-tabs .ui-tabs-nav .ui-tabs-anchor{float:left;padding:.5em 1em;text-decoration:none}.ui-tabs .ui-tabs-nav li.ui-tabs-active{margin-bottom:-1px;padding-bottom:1px}.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor{cursor:text}.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor{cursor:pointer}.ui-tabs .ui-tabs-panel{display:block;border-width:0;padding:1em 1.4em;background:none}.ui-tooltip{padding:8px;position:absolute;z-index:9999;max-width:300px;-webkit-box-shadow:0 0 5px #aaa;box-shadow:0 0 5px #aaa}body .ui-tooltip{border-width:2px}.ui-widget{font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;font-size:1.1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid #ddd;background:#eee url("images/ui-bg_highlight-soft_100_eeeeee_1x100.png") 50% top repeat-x;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #e78f08;background:#f6a828 url("images/ui-bg_gloss-wave_35_f6a828_500x100.png") 50% 50% repeat-x;color:#fff;font-weight:bold}.ui-widget-header a{color:#fff}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid #ccc;background:#f6f6f6 url("images/ui-bg_glass_100_f6f6f6_1x400.png") 50% 50% repeat-x;font-weight:bold;color:#1c94c4}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#1c94c4;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #fbcb09;background:#fdf5ce url("images/ui-bg_glass_100_fdf5ce_1x400.png") 50% 50% repeat-x;font-weight:bold;color:#c77405}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited{color:#c77405;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid #fbd850;background:#fff url("images/ui-bg_glass_65_ffffff_1x400.png") 50% 50% repeat-x;font-weight:bold;color:#eb8f00}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#eb8f00;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #fed22f;background:#ffe45c url("images/ui-bg_highlight-soft_75_ffe45c_1x100.png") 50% top repeat-x;color:#363636}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#363636}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#b81900 url("images/ui-bg_diagonals-thick_18_b81900_40x40.png") 50% 50% repeat;color:#fff}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#fff}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#fff}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url("images/ui-icons_222222_256x240.png")}.ui-widget-header .ui-icon{background-image:url("images/ui-icons_ffffff_256x240.png")}.ui-state-default .ui-icon{background-image:url("images/ui-icons_ef8c08_256x240.png")}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url("images/ui-icons_ef8c08_256x240.png")}.ui-state-active .ui-icon{background-image:url("images/ui-icons_ef8c08_256x240.png")}.ui-state-highlight .ui-icon{background-image:url("images/ui-icons_228ef1_256x240.png")}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url("images/ui-icons_ffd27a_256x240.png")}.ui-icon-blank{background-position:16px 16px}.ui-icon-carat-1-n{background-position:0 0}.ui-icon-carat-1-ne{background-position:-16px 0}.ui-icon-carat-1-e{background-position:-32px 0}.ui-icon-carat-1-se{background-position:-48px 0}.ui-icon-carat-1-s{background-position:-64px 0}.ui-icon-carat-1-sw{background-position:-80px 0}.ui-icon-carat-1-w{background-position:-96px 0}.ui-icon-carat-1-nw{background-position:-112px 0}.ui-icon-carat-2-n-s{background-position:-128px 0}.ui-icon-carat-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-64px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-64px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:0 -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:4px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:4px}.ui-widget-overlay{background:#666 url("images/ui-bg_diagonals-thick_20_666666_40x40.png") 50% 50% repeat;opacity:.5;filter:Alpha(Opacity=50)}.ui-widget-shadow{margin:-5px 0 0 -5px;padding:5px;background:#000 url("images/ui-bg_flat_10_000000_40x100.png") 50% 50% repeat-x;opacity:.2;filter:Alpha(Opacity=20);border-radius:5px}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.min.js elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.min.js
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.min.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.min.js	2015-09-05 21:13:59.000000000 -0500
@@ -1,6 +1,13 @@
-/*! jQuery UI - v1.10.0 - 2013-01-17
+/*! jQuery UI - v1.11.4 - 2015-03-11
 * http://jqueryui.com
-* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.slider.js, jquery.ui.sortable.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
-* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
+* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
 
-(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();if(t.active===!1&&t.collapsible===!0||!this.headers.length)t.active=!1,this.active=e();t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function u(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var n="datepicker",r=(new Date).getTime(),i;e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,o){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),u(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,o,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),u(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;u(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),s=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2]+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10)+r,u=parseInt(n[1],10)+r),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+r]=e})(jQuery);(function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove()}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];while(n&&(n=n.parentNode))n===document&&(i=!0);return!i&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[i.containment==="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment==="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment==="document"?0:e(window).scrollLeft())+e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?0:e(window).scrollTop())+(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(i.containment)&&i.containment.constructor!==Array){n=e(i.containment),r=n[0];if(!r)return;t=e(r).css("overflow")!=="hidden",this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else i.containment.constructor===Array&&(this.containment=i.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(!(u-v<m&&m<a+v&&f-v<y&&y<l+v||u-v<m&&m<a+v&&f-v<b&&b<l+v||u-v<g&&g<a+v&&f-v<y&&y<l+v||u-v<g&&g<a+v&&f-v<b&&b<l+v)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(r[0].style.zIndex,10)||0,e(r).each(function(e){this.style.zIndex=t+e}),this[0].style.zIndex=t+r.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);jQuery.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.0",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?u():s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);(function(e,t){e.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})})(jQuery);(function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this.range=e([]),r.range&&(r.range===!0&&(r.values?r.values.length&&r.values.length!==2?r.values=[r.values[0],r.values[0]]:e.isArray(r.values)&&(r.values=r.values.slice(0)):r.values=[this._valueMin(),this._valueMin()]),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1;for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._setOption("disabled",r.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o];for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[h].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")this._storedCSS[r]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);
\ No newline at end of file
+(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);
+i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);
+return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)
+},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;
+if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};
+f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));
+return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;
+this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.structure.css elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.structure.css
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.structure.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.structure.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,833 @@
+/*!
+ * jQuery UI CSS Framework 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/category/theming/
+ */
+
+/* Layout helpers
+----------------------------------*/
+.ui-helper-hidden {
+	display: none;
+}
+.ui-helper-hidden-accessible {
+	border: 0;
+	clip: rect(0 0 0 0);
+	height: 1px;
+	margin: -1px;
+	overflow: hidden;
+	padding: 0;
+	position: absolute;
+	width: 1px;
+}
+.ui-helper-reset {
+	margin: 0;
+	padding: 0;
+	border: 0;
+	outline: 0;
+	line-height: 1.3;
+	text-decoration: none;
+	font-size: 100%;
+	list-style: none;
+}
+.ui-helper-clearfix:before,
+.ui-helper-clearfix:after {
+	content: "";
+	display: table;
+	border-collapse: collapse;
+}
+.ui-helper-clearfix:after {
+	clear: both;
+}
+.ui-helper-clearfix {
+	min-height: 0; /* support: IE7 */
+}
+.ui-helper-zfix {
+	width: 100%;
+	height: 100%;
+	top: 0;
+	left: 0;
+	position: absolute;
+	opacity: 0;
+	filter:Alpha(Opacity=0); /* support: IE8 */
+}
+
+.ui-front {
+	z-index: 100;
+}
+
+
+/* Interaction Cues
+----------------------------------*/
+.ui-state-disabled {
+	cursor: default !important;
+}
+
+
+/* Icons
+----------------------------------*/
+
+/* states and images */
+.ui-icon {
+	display: block;
+	text-indent: -99999px;
+	overflow: hidden;
+	background-repeat: no-repeat;
+}
+
+
+/* Misc visuals
+----------------------------------*/
+
+/* Overlays */
+.ui-widget-overlay {
+	position: fixed;
+	top: 0;
+	left: 0;
+	width: 100%;
+	height: 100%;
+}
+.ui-accordion .ui-accordion-header {
+	display: block;
+	cursor: pointer;
+	position: relative;
+	margin: 2px 0 0 0;
+	padding: .5em .5em .5em .7em;
+	min-height: 0; /* support: IE7 */
+	font-size: 100%;
+}
+.ui-accordion .ui-accordion-icons {
+	padding-left: 2.2em;
+}
+.ui-accordion .ui-accordion-icons .ui-accordion-icons {
+	padding-left: 2.2em;
+}
+.ui-accordion .ui-accordion-header .ui-accordion-header-icon {
+	position: absolute;
+	left: .5em;
+	top: 50%;
+	margin-top: -8px;
+}
+.ui-accordion .ui-accordion-content {
+	padding: 1em 2.2em;
+	border-top: 0;
+	overflow: auto;
+}
+.ui-autocomplete {
+	position: absolute;
+	top: 0;
+	left: 0;
+	cursor: default;
+}
+.ui-button {
+	display: inline-block;
+	position: relative;
+	padding: 0;
+	line-height: normal;
+	margin-right: .1em;
+	cursor: pointer;
+	vertical-align: middle;
+	text-align: center;
+	overflow: visible; /* removes extra width in IE */
+}
+.ui-button,
+.ui-button:link,
+.ui-button:visited,
+.ui-button:hover,
+.ui-button:active {
+	text-decoration: none;
+}
+/* to make room for the icon, a width needs to be set here */
+.ui-button-icon-only {
+	width: 2.2em;
+}
+/* button elements seem to need a little more width */
+button.ui-button-icon-only {
+	width: 2.4em;
+}
+.ui-button-icons-only {
+	width: 3.4em;
+}
+button.ui-button-icons-only {
+	width: 3.7em;
+}
+
+/* button text element */
+.ui-button .ui-button-text {
+	display: block;
+	line-height: normal;
+}
+.ui-button-text-only .ui-button-text {
+	padding: .4em 1em;
+}
+.ui-button-icon-only .ui-button-text,
+.ui-button-icons-only .ui-button-text {
+	padding: .4em;
+	text-indent: -9999999px;
+}
+.ui-button-text-icon-primary .ui-button-text,
+.ui-button-text-icons .ui-button-text {
+	padding: .4em 1em .4em 2.1em;
+}
+.ui-button-text-icon-secondary .ui-button-text,
+.ui-button-text-icons .ui-button-text {
+	padding: .4em 2.1em .4em 1em;
+}
+.ui-button-text-icons .ui-button-text {
+	padding-left: 2.1em;
+	padding-right: 2.1em;
+}
+/* no icon support for input elements, provide padding by default */
+input.ui-button {
+	padding: .4em 1em;
+}
+
+/* button icon element(s) */
+.ui-button-icon-only .ui-icon,
+.ui-button-text-icon-primary .ui-icon,
+.ui-button-text-icon-secondary .ui-icon,
+.ui-button-text-icons .ui-icon,
+.ui-button-icons-only .ui-icon {
+	position: absolute;
+	top: 50%;
+	margin-top: -8px;
+}
+.ui-button-icon-only .ui-icon {
+	left: 50%;
+	margin-left: -8px;
+}
+.ui-button-text-icon-primary .ui-button-icon-primary,
+.ui-button-text-icons .ui-button-icon-primary,
+.ui-button-icons-only .ui-button-icon-primary {
+	left: .5em;
+}
+.ui-button-text-icon-secondary .ui-button-icon-secondary,
+.ui-button-text-icons .ui-button-icon-secondary,
+.ui-button-icons-only .ui-button-icon-secondary {
+	right: .5em;
+}
+
+/* button sets */
+.ui-buttonset {
+	margin-right: 7px;
+}
+.ui-buttonset .ui-button {
+	margin-left: 0;
+	margin-right: -.3em;
+}
+
+/* workarounds */
+/* reset extra padding in Firefox, see h5bp.com/l */
+input.ui-button::-moz-focus-inner,
+button.ui-button::-moz-focus-inner {
+	border: 0;
+	padding: 0;
+}
+.ui-datepicker {
+	width: 17em;
+	padding: .2em .2em 0;
+	display: none;
+}
+.ui-datepicker .ui-datepicker-header {
+	position: relative;
+	padding: .2em 0;
+}
+.ui-datepicker .ui-datepicker-prev,
+.ui-datepicker .ui-datepicker-next {
+	position: absolute;
+	top: 2px;
+	width: 1.8em;
+	height: 1.8em;
+}
+.ui-datepicker .ui-datepicker-prev-hover,
+.ui-datepicker .ui-datepicker-next-hover {
+	top: 1px;
+}
+.ui-datepicker .ui-datepicker-prev {
+	left: 2px;
+}
+.ui-datepicker .ui-datepicker-next {
+	right: 2px;
+}
+.ui-datepicker .ui-datepicker-prev-hover {
+	left: 1px;
+}
+.ui-datepicker .ui-datepicker-next-hover {
+	right: 1px;
+}
+.ui-datepicker .ui-datepicker-prev span,
+.ui-datepicker .ui-datepicker-next span {
+	display: block;
+	position: absolute;
+	left: 50%;
+	margin-left: -8px;
+	top: 50%;
+	margin-top: -8px;
+}
+.ui-datepicker .ui-datepicker-title {
+	margin: 0 2.3em;
+	line-height: 1.8em;
+	text-align: center;
+}
+.ui-datepicker .ui-datepicker-title select {
+	font-size: 1em;
+	margin: 1px 0;
+}
+.ui-datepicker select.ui-datepicker-month,
+.ui-datepicker select.ui-datepicker-year {
+	width: 45%;
+}
+.ui-datepicker table {
+	width: 100%;
+	font-size: .9em;
+	border-collapse: collapse;
+	margin: 0 0 .4em;
+}
+.ui-datepicker th {
+	padding: .7em .3em;
+	text-align: center;
+	font-weight: bold;
+	border: 0;
+}
+.ui-datepicker td {
+	border: 0;
+	padding: 1px;
+}
+.ui-datepicker td span,
+.ui-datepicker td a {
+	display: block;
+	padding: .2em;
+	text-align: right;
+	text-decoration: none;
+}
+.ui-datepicker .ui-datepicker-buttonpane {
+	background-image: none;
+	margin: .7em 0 0 0;
+	padding: 0 .2em;
+	border-left: 0;
+	border-right: 0;
+	border-bottom: 0;
+}
+.ui-datepicker .ui-datepicker-buttonpane button {
+	float: right;
+	margin: .5em .2em .4em;
+	cursor: pointer;
+	padding: .2em .6em .3em .6em;
+	width: auto;
+	overflow: visible;
+}
+.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {
+	float: left;
+}
+
+/* with multiple calendars */
+.ui-datepicker.ui-datepicker-multi {
+	width: auto;
+}
+.ui-datepicker-multi .ui-datepicker-group {
+	float: left;
+}
+.ui-datepicker-multi .ui-datepicker-group table {
+	width: 95%;
+	margin: 0 auto .4em;
+}
+.ui-datepicker-multi-2 .ui-datepicker-group {
+	width: 50%;
+}
+.ui-datepicker-multi-3 .ui-datepicker-group {
+	width: 33.3%;
+}
+.ui-datepicker-multi-4 .ui-datepicker-group {
+	width: 25%;
+}
+.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,
+.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {
+	border-left-width: 0;
+}
+.ui-datepicker-multi .ui-datepicker-buttonpane {
+	clear: left;
+}
+.ui-datepicker-row-break {
+	clear: both;
+	width: 100%;
+	font-size: 0;
+}
+
+/* RTL support */
+.ui-datepicker-rtl {
+	direction: rtl;
+}
+.ui-datepicker-rtl .ui-datepicker-prev {
+	right: 2px;
+	left: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-next {
+	left: 2px;
+	right: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-prev:hover {
+	right: 1px;
+	left: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-next:hover {
+	left: 1px;
+	right: auto;
+}
+.ui-datepicker-rtl .ui-datepicker-buttonpane {
+	clear: right;
+}
+.ui-datepicker-rtl .ui-datepicker-buttonpane button {
+	float: left;
+}
+.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,
+.ui-datepicker-rtl .ui-datepicker-group {
+	float: right;
+}
+.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,
+.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {
+	border-right-width: 0;
+	border-left-width: 1px;
+}
+.ui-dialog {
+	overflow: hidden;
+	position: absolute;
+	top: 0;
+	left: 0;
+	padding: .2em;
+	outline: 0;
+}
+.ui-dialog .ui-dialog-titlebar {
+	padding: .4em 1em;
+	position: relative;
+}
+.ui-dialog .ui-dialog-title {
+	float: left;
+	margin: .1em 0;
+	white-space: nowrap;
+	width: 90%;
+	overflow: hidden;
+	text-overflow: ellipsis;
+}
+.ui-dialog .ui-dialog-titlebar-close {
+	position: absolute;
+	right: .3em;
+	top: 50%;
+	width: 20px;
+	margin: -10px 0 0 0;
+	padding: 1px;
+	height: 20px;
+}
+.ui-dialog .ui-dialog-content {
+	position: relative;
+	border: 0;
+	padding: .5em 1em;
+	background: none;
+	overflow: auto;
+}
+.ui-dialog .ui-dialog-buttonpane {
+	text-align: left;
+	border-width: 1px 0 0 0;
+	background-image: none;
+	margin-top: .5em;
+	padding: .3em 1em .5em .4em;
+}
+.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {
+	float: right;
+}
+.ui-dialog .ui-dialog-buttonpane button {
+	margin: .5em .4em .5em 0;
+	cursor: pointer;
+}
+.ui-dialog .ui-resizable-se {
+	width: 12px;
+	height: 12px;
+	right: -5px;
+	bottom: -5px;
+	background-position: 16px 16px;
+}
+.ui-draggable .ui-dialog-titlebar {
+	cursor: move;
+}
+.ui-draggable-handle {
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-menu {
+	list-style: none;
+	padding: 0;
+	margin: 0;
+	display: block;
+	outline: none;
+}
+.ui-menu .ui-menu {
+	position: absolute;
+}
+.ui-menu .ui-menu-item {
+	position: relative;
+	margin: 0;
+	padding: 3px 1em 3px .4em;
+	cursor: pointer;
+	min-height: 0; /* support: IE7 */
+	/* support: IE10, see #8844 */
+	list-style-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");
+}
+.ui-menu .ui-menu-divider {
+	margin: 5px 0;
+	height: 0;
+	font-size: 0;
+	line-height: 0;
+	border-width: 1px 0 0 0;
+}
+.ui-menu .ui-state-focus,
+.ui-menu .ui-state-active {
+	margin: -1px;
+}
+
+/* icon support */
+.ui-menu-icons {
+	position: relative;
+}
+.ui-menu-icons .ui-menu-item {
+	padding-left: 2em;
+}
+
+/* left-aligned */
+.ui-menu .ui-icon {
+	position: absolute;
+	top: 0;
+	bottom: 0;
+	left: .2em;
+	margin: auto 0;
+}
+
+/* right-aligned */
+.ui-menu .ui-menu-icon {
+	left: auto;
+	right: 0;
+}
+.ui-progressbar {
+	height: 2em;
+	text-align: left;
+	overflow: hidden;
+}
+.ui-progressbar .ui-progressbar-value {
+	margin: -1px;
+	height: 100%;
+}
+.ui-progressbar .ui-progressbar-overlay {
+	background: url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");
+	height: 100%;
+	filter: alpha(opacity=25); /* support: IE8 */
+	opacity: 0.25;
+}
+.ui-progressbar-indeterminate .ui-progressbar-value {
+	background-image: none;
+}
+.ui-resizable {
+	position: relative;
+}
+.ui-resizable-handle {
+	position: absolute;
+	font-size: 0.1px;
+	display: block;
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-resizable-disabled .ui-resizable-handle,
+.ui-resizable-autohide .ui-resizable-handle {
+	display: none;
+}
+.ui-resizable-n {
+	cursor: n-resize;
+	height: 7px;
+	width: 100%;
+	top: -5px;
+	left: 0;
+}
+.ui-resizable-s {
+	cursor: s-resize;
+	height: 7px;
+	width: 100%;
+	bottom: -5px;
+	left: 0;
+}
+.ui-resizable-e {
+	cursor: e-resize;
+	width: 7px;
+	right: -5px;
+	top: 0;
+	height: 100%;
+}
+.ui-resizable-w {
+	cursor: w-resize;
+	width: 7px;
+	left: -5px;
+	top: 0;
+	height: 100%;
+}
+.ui-resizable-se {
+	cursor: se-resize;
+	width: 12px;
+	height: 12px;
+	right: 1px;
+	bottom: 1px;
+}
+.ui-resizable-sw {
+	cursor: sw-resize;
+	width: 9px;
+	height: 9px;
+	left: -5px;
+	bottom: -5px;
+}
+.ui-resizable-nw {
+	cursor: nw-resize;
+	width: 9px;
+	height: 9px;
+	left: -5px;
+	top: -5px;
+}
+.ui-resizable-ne {
+	cursor: ne-resize;
+	width: 9px;
+	height: 9px;
+	right: -5px;
+	top: -5px;
+}
+.ui-selectable {
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-selectable-helper {
+	position: absolute;
+	z-index: 100;
+	border: 1px dotted black;
+}
+.ui-selectmenu-menu {
+	padding: 0;
+	margin: 0;
+	position: absolute;
+	top: 0;
+	left: 0;
+	display: none;
+}
+.ui-selectmenu-menu .ui-menu {
+	overflow: auto;
+	/* Support: IE7 */
+	overflow-x: hidden;
+	padding-bottom: 1px;
+}
+.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {
+	font-size: 1em;
+	font-weight: bold;
+	line-height: 1.5;
+	padding: 2px 0.4em;
+	margin: 0.5em 0 0 0;
+	height: auto;
+	border: 0;
+}
+.ui-selectmenu-open {
+	display: block;
+}
+.ui-selectmenu-button {
+	display: inline-block;
+	overflow: hidden;
+	position: relative;
+	text-decoration: none;
+	cursor: pointer;
+}
+.ui-selectmenu-button span.ui-icon {
+	right: 0.5em;
+	left: auto;
+	margin-top: -8px;
+	position: absolute;
+	top: 50%;
+}
+.ui-selectmenu-button span.ui-selectmenu-text {
+	text-align: left;
+	padding: 0.4em 2.1em 0.4em 1em;
+	display: block;
+	line-height: 1.4;
+	overflow: hidden;
+	text-overflow: ellipsis;
+	white-space: nowrap;
+}
+.ui-slider {
+	position: relative;
+	text-align: left;
+}
+.ui-slider .ui-slider-handle {
+	position: absolute;
+	z-index: 2;
+	width: 1.2em;
+	height: 1.2em;
+	cursor: default;
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-slider .ui-slider-range {
+	position: absolute;
+	z-index: 1;
+	font-size: .7em;
+	display: block;
+	border: 0;
+	background-position: 0 0;
+}
+
+/* support: IE8 - See #6727 */
+.ui-slider.ui-state-disabled .ui-slider-handle,
+.ui-slider.ui-state-disabled .ui-slider-range {
+	filter: inherit;
+}
+
+.ui-slider-horizontal {
+	height: .8em;
+}
+.ui-slider-horizontal .ui-slider-handle {
+	top: -.3em;
+	margin-left: -.6em;
+}
+.ui-slider-horizontal .ui-slider-range {
+	top: 0;
+	height: 100%;
+}
+.ui-slider-horizontal .ui-slider-range-min {
+	left: 0;
+}
+.ui-slider-horizontal .ui-slider-range-max {
+	right: 0;
+}
+
+.ui-slider-vertical {
+	width: .8em;
+	height: 100px;
+}
+.ui-slider-vertical .ui-slider-handle {
+	left: -.3em;
+	margin-left: 0;
+	margin-bottom: -.6em;
+}
+.ui-slider-vertical .ui-slider-range {
+	left: 0;
+	width: 100%;
+}
+.ui-slider-vertical .ui-slider-range-min {
+	bottom: 0;
+}
+.ui-slider-vertical .ui-slider-range-max {
+	top: 0;
+}
+.ui-sortable-handle {
+	-ms-touch-action: none;
+	touch-action: none;
+}
+.ui-spinner {
+	position: relative;
+	display: inline-block;
+	overflow: hidden;
+	padding: 0;
+	vertical-align: middle;
+}
+.ui-spinner-input {
+	border: none;
+	background: none;
+	color: inherit;
+	padding: 0;
+	margin: .2em 0;
+	vertical-align: middle;
+	margin-left: .4em;
+	margin-right: 22px;
+}
+.ui-spinner-button {
+	width: 16px;
+	height: 50%;
+	font-size: .5em;
+	padding: 0;
+	margin: 0;
+	text-align: center;
+	position: absolute;
+	cursor: default;
+	display: block;
+	overflow: hidden;
+	right: 0;
+}
+/* more specificity required here to override default borders */
+.ui-spinner a.ui-spinner-button {
+	border-top: none;
+	border-bottom: none;
+	border-right: none;
+}
+/* vertically center icon */
+.ui-spinner .ui-icon {
+	position: absolute;
+	margin-top: -8px;
+	top: 50%;
+	left: 0;
+}
+.ui-spinner-up {
+	top: 0;
+}
+.ui-spinner-down {
+	bottom: 0;
+}
+
+/* TR overrides */
+.ui-spinner .ui-icon-triangle-1-s {
+	/* need to fix icons sprite */
+	background-position: -65px -16px;
+}
+.ui-tabs {
+	position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
+	padding: .2em;
+}
+.ui-tabs .ui-tabs-nav {
+	margin: 0;
+	padding: .2em .2em 0;
+}
+.ui-tabs .ui-tabs-nav li {
+	list-style: none;
+	float: left;
+	position: relative;
+	top: 0;
+	margin: 1px .2em 0 0;
+	border-bottom-width: 0;
+	padding: 0;
+	white-space: nowrap;
+}
+.ui-tabs .ui-tabs-nav .ui-tabs-anchor {
+	float: left;
+	padding: .5em 1em;
+	text-decoration: none;
+}
+.ui-tabs .ui-tabs-nav li.ui-tabs-active {
+	margin-bottom: -1px;
+	padding-bottom: 1px;
+}
+.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,
+.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,
+.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {
+	cursor: text;
+}
+.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {
+	cursor: pointer;
+}
+.ui-tabs .ui-tabs-panel {
+	display: block;
+	border-width: 0;
+	padding: 1em 1.4em;
+	background: none;
+}
+.ui-tooltip {
+	padding: 8px;
+	position: absolute;
+	z-index: 9999;
+	max-width: 300px;
+	-webkit-box-shadow: 0 0 5px #aaa;
+	box-shadow: 0 0 5px #aaa;
+}
+body .ui-tooltip {
+	border-width: 2px;
+}
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.structure.min.css elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.structure.min.css
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.structure.min.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.structure.min.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,5 @@
+/*! jQuery UI - v1.11.4 - 2015-03-11
+* http://jqueryui.com
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
+
+.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-accordion .ui-accordion-header{display:block;cursor:pointer;position:relative;margin:2px 0 0 0;padding:.5em .5em .5em .7em;min-height:0;font-size:100%}.ui-accordion .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-icons .ui-accordion-icons{padding-left:2.2em}.ui-accordion .ui-accordion-header .ui-accordion-header-icon{position:absolute;left:.5em;top:50%;margin-top:-8px}.ui-accordion .ui-accordion-content{padding:1em 2.2em;border-top:0;overflow:auto}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.4em 1em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-datepicker{width:17em;padding:.2em .2em 0;display:none}.ui-datepicker .ui-datepicker-header{position:relative;padding:.2em 0}.ui-datepicker .ui-datepicker-prev,.ui-datepicker .ui-datepicker-next{position:absolute;top:2px;width:1.8em;height:1.8em}.ui-datepicker .ui-datepicker-prev-hover,.ui-datepicker .ui-datepicker-next-hover{top:1px}.ui-datepicker .ui-datepicker-prev{left:2px}.ui-datepicker .ui-datepicker-next{right:2px}.ui-datepicker .ui-datepicker-prev-hover{left:1px}.ui-datepicker .ui-datepicker-next-hover{right:1px}.ui-datepicker .ui-datepicker-prev span,.ui-datepicker .ui-datepicker-next span{display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.ui-datepicker .ui-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.ui-datepicker .ui-datepicker-title select{font-size:1em;margin:1px 0}.ui-datepicker select.ui-datepicker-month,.ui-datepicker select.ui-datepicker-year{width:45%}.ui-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.ui-datepicker th{padding:.7em .3em;text-align:center;font-weight:bold;border:0}.ui-datepicker td{border:0;padding:1px}.ui-datepicker td span,.ui-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.ui-datepicker .ui-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.ui-datepicker .ui-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current{float:left}.ui-datepicker.ui-datepicker-multi{width:auto}.ui-datepicker-multi .ui-datepicker-group{float:left}.ui-datepicker-multi .ui-datepicker-group table{width:95%;margin:0 auto .4em}.ui-datepicker-multi-2 .ui-datepicker-group{width:50%}.ui-datepicker-multi-3 .ui-datepicker-group{width:33.3%}.ui-datepicker-multi-4 .ui-datepicker-group{width:25%}.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header{border-left-width:0}.ui-datepicker-multi .ui-datepicker-buttonpane{clear:left}.ui-datepicker-row-break{clear:both;width:100%;font-size:0}.ui-datepicker-rtl{direction:rtl}.ui-datepicker-rtl .ui-datepicker-prev{right:2px;left:auto}.ui-datepicker-rtl .ui-datepicker-next{left:2px;right:auto}.ui-datepicker-rtl .ui-datepicker-prev:hover{right:1px;left:auto}.ui-datepicker-rtl .ui-datepicker-next:hover{left:1px;right:auto}.ui-datepicker-rtl .ui-datepicker-buttonpane{clear:right}.ui-datepicker-rtl .ui-datepicker-buttonpane button{float:left}.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,.ui-datepicker-rtl .ui-datepicker-group{float:right}.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header{border-right-width:0;border-left-width:1px}.ui-dialog{overflow:hidden;position:absolute;top:0;left:0;padding:.2em;outline:0}.ui-dialog .ui-dialog-titlebar{padding:.4em 1em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:20px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em 1em;background:none;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-draggable-handle{-ms-touch-action:none;touch-action:none}.ui-menu{list-style:none;padding:0;margin:0;display:block;outline:none}.ui-menu .ui-menu{position:absolute}.ui-menu .ui-menu-item{position:relative;margin:0;padding:3px 1em 3px .4em;cursor:pointer;min-height:0;list-style-image:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}.ui-menu .ui-menu-divider{margin:5px 0;height:0;font-size:0;line-height:0;border-width:1px 0 0 0}.ui-menu .ui-state-focus,.ui-menu .ui-state-active{margin:-1px}.ui-menu-icons{position:relative}.ui-menu-icons .ui-menu-item{padding-left:2em}.ui-menu .ui-icon{position:absolute;top:0;bottom:0;left:.2em;margin:auto 0}.ui-menu .ui-menu-icon{left:auto;right:0}.ui-progressbar{height:2em;text-align:left;overflow:hidden}.ui-progressbar .ui-progressbar-value{margin:-1px;height:100%}.ui-progressbar .ui-progressbar-overlay{background:url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");height:100%;filter:alpha(opacity=25);opacity:0.25}.ui-progressbar-indeterminate .ui-progressbar-value{background-image:none}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:0.1px;display:block;-ms-touch-action:none;touch-action:none}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-selectable{-ms-touch-action:none;touch-action:none}.ui-selectable-helper{position:absolute;z-index:100;border:1px dotted black}.ui-selectmenu-menu{padding:0;margin:0;position:absolute;top:0;left:0;display:none}.ui-selectmenu-menu .ui-menu{overflow:auto;overflow-x:hidden;padding-bottom:1px}.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup{font-size:1em;font-weight:bold;line-height:1.5;padding:2px 0.4em;margin:0.5em 0 0 0;height:auto;border:0}.ui-selectmenu-open{display:block}.ui-selectmenu-button{display:inline-block;overflow:hidden;position:relative;text-decoration:none;cursor:pointer}.ui-selectmenu-button span.ui-icon{right:0.5em;left:auto;margin-top:-8px;position:absolute;top:50%}.ui-selectmenu-button span.ui-selectmenu-text{text-align:left;padding:0.4em 2.1em 0.4em 1em;display:block;line-height:1.4;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-sortable-handle{-ms-touch-action:none;touch-action:none}.ui-spinner{position:relative;display:inline-block;overflow:hidden;padding:0;vertical-align:middle}.ui-spinner-input{border:none;background:none;color:inherit;padding:0;margin:.2em 0;vertical-align:middle;margin-left:.4em;margin-right:22px}.ui-spinner-button{width:16px;height:50%;font-size:.5em;padding:0;margin:0;text-align:center;position:absolute;cursor:default;display:block;overflow:hidden;right:0}.ui-spinner a.ui-spinner-button{border-top:none;border-bottom:none;border-right:none}.ui-spinner .ui-icon{position:absolute;margin-top:-8px;top:50%;left:0}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}.ui-spinner .ui-icon-triangle-1-s{background-position:-65px -16px}.ui-tabs{position:relative;padding:.2em}.ui-tabs .ui-tabs-nav{margin:0;padding:.2em .2em 0}.ui-tabs .ui-tabs-nav li{list-style:none;float:left;position:relative;top:0;margin:1px .2em 0 0;border-bottom-width:0;padding:0;white-space:nowrap}.ui-tabs .ui-tabs-nav .ui-tabs-anchor{float:left;padding:.5em 1em;text-decoration:none}.ui-tabs .ui-tabs-nav li.ui-tabs-active{margin-bottom:-1px;padding-bottom:1px}.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor{cursor:text}.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor{cursor:pointer}.ui-tabs .ui-tabs-panel{display:block;border-width:0;padding:1em 1.4em;background:none}.ui-tooltip{padding:8px;position:absolute;z-index:9999;max-width:300px;-webkit-box-shadow:0 0 5px #aaa;box-shadow:0 0 5px #aaa}body .ui-tooltip{border-width:2px}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.theme.css elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.theme.css
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.theme.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.theme.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,410 @@
+/*!
+ * jQuery UI CSS Framework 1.11.4
+ * http://jqueryui.com
+ *
+ * Copyright jQuery Foundation and other contributors
+ * Released under the MIT license.
+ * http://jquery.org/license
+ *
+ * http://api.jqueryui.com/category/theming/
+ *
+ * To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Trebuchet%20MS%2CTahoma%2CVerdana%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=4px&bgColorHeader=f6a828&bgTextureHeader=gloss_wave&bgImgOpacityHeader=35&borderColorHeader=e78f08&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=eeeeee&bgTextureContent=highlight_soft&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=333333&iconColorContent=222222&bgColorDefault=f6f6f6&bgTextureDefault=glass&bgImgOpacityDefault=100&borderColorDefault=cccccc&fcDefault=1c94c4&iconColorDefault=ef8c08&bgColorHover=fdf5ce&bgTextureHover=glass&bgImgOpacityHover=100&borderColorHover=fbcb09&fcHover=c77405&iconColorHover=ef8c08&bgColorActive=ffffff&bgTextureActive=glass&bgImgOpacityActive=65&borderColorActive=fbd850&fcActive=eb8f00&iconColorActive=ef8c08&bgColorHighlight=ffe45c&bgTextureHighlight=highlight_soft&bgImgOpacityHighlight=75&borderColorHighlight=fed22f&fcHighlight=363636&iconColorHighlight=228ef1&bgColorError=b81900&bgTextureError=diagonals_thick&bgImgOpacityError=18&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffd27a&bgColorOverlay=666666&bgTextureOverlay=diagonals_thick&bgImgOpacityOverlay=20&opacityOverlay=50&bgColorShadow=000000&bgTextureShadow=flat&bgImgOpacityShadow=10&opacityShadow=20&thicknessShadow=5px&offsetTopShadow=-5px&offsetLeftShadow=-5px&cornerRadiusShadow=5px
+ */
+
+
+/* Component containers
+----------------------------------*/
+.ui-widget {
+	font-family: Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
+	font-size: 1.1em;
+}
+.ui-widget .ui-widget {
+	font-size: 1em;
+}
+.ui-widget input,
+.ui-widget select,
+.ui-widget textarea,
+.ui-widget button {
+	font-family: Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
+	font-size: 1em;
+}
+.ui-widget-content {
+	border: 1px solid #dddddd;
+	background: #eeeeee url("images/ui-bg_highlight-soft_100_eeeeee_1x100.png") 50% top repeat-x;
+	color: #333333;
+}
+.ui-widget-content a {
+	color: #333333;
+}
+.ui-widget-header {
+	border: 1px solid #e78f08;
+	background: #f6a828 url("images/ui-bg_gloss-wave_35_f6a828_500x100.png") 50% 50% repeat-x;
+	color: #ffffff;
+	font-weight: bold;
+}
+.ui-widget-header a {
+	color: #ffffff;
+}
+
+/* Interaction states
+----------------------------------*/
+.ui-state-default,
+.ui-widget-content .ui-state-default,
+.ui-widget-header .ui-state-default {
+	border: 1px solid #cccccc;
+	background: #f6f6f6 url("images/ui-bg_glass_100_f6f6f6_1x400.png") 50% 50% repeat-x;
+	font-weight: bold;
+	color: #1c94c4;
+}
+.ui-state-default a,
+.ui-state-default a:link,
+.ui-state-default a:visited {
+	color: #1c94c4;
+	text-decoration: none;
+}
+.ui-state-hover,
+.ui-widget-content .ui-state-hover,
+.ui-widget-header .ui-state-hover,
+.ui-state-focus,
+.ui-widget-content .ui-state-focus,
+.ui-widget-header .ui-state-focus {
+	border: 1px solid #fbcb09;
+	background: #fdf5ce url("images/ui-bg_glass_100_fdf5ce_1x400.png") 50% 50% repeat-x;
+	font-weight: bold;
+	color: #c77405;
+}
+.ui-state-hover a,
+.ui-state-hover a:hover,
+.ui-state-hover a:link,
+.ui-state-hover a:visited,
+.ui-state-focus a,
+.ui-state-focus a:hover,
+.ui-state-focus a:link,
+.ui-state-focus a:visited {
+	color: #c77405;
+	text-decoration: none;
+}
+.ui-state-active,
+.ui-widget-content .ui-state-active,
+.ui-widget-header .ui-state-active {
+	border: 1px solid #fbd850;
+	background: #ffffff url("images/ui-bg_glass_65_ffffff_1x400.png") 50% 50% repeat-x;
+	font-weight: bold;
+	color: #eb8f00;
+}
+.ui-state-active a,
+.ui-state-active a:link,
+.ui-state-active a:visited {
+	color: #eb8f00;
+	text-decoration: none;
+}
+
+/* Interaction Cues
+----------------------------------*/
+.ui-state-highlight,
+.ui-widget-content .ui-state-highlight,
+.ui-widget-header .ui-state-highlight {
+	border: 1px solid #fed22f;
+	background: #ffe45c url("images/ui-bg_highlight-soft_75_ffe45c_1x100.png") 50% top repeat-x;
+	color: #363636;
+}
+.ui-state-highlight a,
+.ui-widget-content .ui-state-highlight a,
+.ui-widget-header .ui-state-highlight a {
+	color: #363636;
+}
+.ui-state-error,
+.ui-widget-content .ui-state-error,
+.ui-widget-header .ui-state-error {
+	border: 1px solid #cd0a0a;
+	background: #b81900 url("images/ui-bg_diagonals-thick_18_b81900_40x40.png") 50% 50% repeat;
+	color: #ffffff;
+}
+.ui-state-error a,
+.ui-widget-content .ui-state-error a,
+.ui-widget-header .ui-state-error a {
+	color: #ffffff;
+}
+.ui-state-error-text,
+.ui-widget-content .ui-state-error-text,
+.ui-widget-header .ui-state-error-text {
+	color: #ffffff;
+}
+.ui-priority-primary,
+.ui-widget-content .ui-priority-primary,
+.ui-widget-header .ui-priority-primary {
+	font-weight: bold;
+}
+.ui-priority-secondary,
+.ui-widget-content .ui-priority-secondary,
+.ui-widget-header .ui-priority-secondary {
+	opacity: .7;
+	filter:Alpha(Opacity=70); /* support: IE8 */
+	font-weight: normal;
+}
+.ui-state-disabled,
+.ui-widget-content .ui-state-disabled,
+.ui-widget-header .ui-state-disabled {
+	opacity: .35;
+	filter:Alpha(Opacity=35); /* support: IE8 */
+	background-image: none;
+}
+.ui-state-disabled .ui-icon {
+	filter:Alpha(Opacity=35); /* support: IE8 - See #6059 */
+}
+
+/* Icons
+----------------------------------*/
+
+/* states and images */
+.ui-icon {
+	width: 16px;
+	height: 16px;
+}
+.ui-icon,
+.ui-widget-content .ui-icon {
+	background-image: url("images/ui-icons_222222_256x240.png");
+}
+.ui-widget-header .ui-icon {
+	background-image: url("images/ui-icons_ffffff_256x240.png");
+}
+.ui-state-default .ui-icon {
+	background-image: url("images/ui-icons_ef8c08_256x240.png");
+}
+.ui-state-hover .ui-icon,
+.ui-state-focus .ui-icon {
+	background-image: url("images/ui-icons_ef8c08_256x240.png");
+}
+.ui-state-active .ui-icon {
+	background-image: url("images/ui-icons_ef8c08_256x240.png");
+}
+.ui-state-highlight .ui-icon {
+	background-image: url("images/ui-icons_228ef1_256x240.png");
+}
+.ui-state-error .ui-icon,
+.ui-state-error-text .ui-icon {
+	background-image: url("images/ui-icons_ffd27a_256x240.png");
+}
+
+/* positioning */
+.ui-icon-blank { background-position: 16px 16px; }
+.ui-icon-carat-1-n { background-position: 0 0; }
+.ui-icon-carat-1-ne { background-position: -16px 0; }
+.ui-icon-carat-1-e { background-position: -32px 0; }
+.ui-icon-carat-1-se { background-position: -48px 0; }
+.ui-icon-carat-1-s { background-position: -64px 0; }
+.ui-icon-carat-1-sw { background-position: -80px 0; }
+.ui-icon-carat-1-w { background-position: -96px 0; }
+.ui-icon-carat-1-nw { background-position: -112px 0; }
+.ui-icon-carat-2-n-s { background-position: -128px 0; }
+.ui-icon-carat-2-e-w { background-position: -144px 0; }
+.ui-icon-triangle-1-n { background-position: 0 -16px; }
+.ui-icon-triangle-1-ne { background-position: -16px -16px; }
+.ui-icon-triangle-1-e { background-position: -32px -16px; }
+.ui-icon-triangle-1-se { background-position: -48px -16px; }
+.ui-icon-triangle-1-s { background-position: -64px -16px; }
+.ui-icon-triangle-1-sw { background-position: -80px -16px; }
+.ui-icon-triangle-1-w { background-position: -96px -16px; }
+.ui-icon-triangle-1-nw { background-position: -112px -16px; }
+.ui-icon-triangle-2-n-s { background-position: -128px -16px; }
+.ui-icon-triangle-2-e-w { background-position: -144px -16px; }
+.ui-icon-arrow-1-n { background-position: 0 -32px; }
+.ui-icon-arrow-1-ne { background-position: -16px -32px; }
+.ui-icon-arrow-1-e { background-position: -32px -32px; }
+.ui-icon-arrow-1-se { background-position: -48px -32px; }
+.ui-icon-arrow-1-s { background-position: -64px -32px; }
+.ui-icon-arrow-1-sw { background-position: -80px -32px; }
+.ui-icon-arrow-1-w { background-position: -96px -32px; }
+.ui-icon-arrow-1-nw { background-position: -112px -32px; }
+.ui-icon-arrow-2-n-s { background-position: -128px -32px; }
+.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }
+.ui-icon-arrow-2-e-w { background-position: -160px -32px; }
+.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }
+.ui-icon-arrowstop-1-n { background-position: -192px -32px; }
+.ui-icon-arrowstop-1-e { background-position: -208px -32px; }
+.ui-icon-arrowstop-1-s { background-position: -224px -32px; }
+.ui-icon-arrowstop-1-w { background-position: -240px -32px; }
+.ui-icon-arrowthick-1-n { background-position: 0 -48px; }
+.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }
+.ui-icon-arrowthick-1-e { background-position: -32px -48px; }
+.ui-icon-arrowthick-1-se { background-position: -48px -48px; }
+.ui-icon-arrowthick-1-s { background-position: -64px -48px; }
+.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }
+.ui-icon-arrowthick-1-w { background-position: -96px -48px; }
+.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }
+.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }
+.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }
+.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }
+.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }
+.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }
+.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }
+.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }
+.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }
+.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }
+.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }
+.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }
+.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }
+.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }
+.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }
+.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }
+.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }
+.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }
+.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }
+.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }
+.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }
+.ui-icon-arrow-4 { background-position: 0 -80px; }
+.ui-icon-arrow-4-diag { background-position: -16px -80px; }
+.ui-icon-extlink { background-position: -32px -80px; }
+.ui-icon-newwin { background-position: -48px -80px; }
+.ui-icon-refresh { background-position: -64px -80px; }
+.ui-icon-shuffle { background-position: -80px -80px; }
+.ui-icon-transfer-e-w { background-position: -96px -80px; }
+.ui-icon-transferthick-e-w { background-position: -112px -80px; }
+.ui-icon-folder-collapsed { background-position: 0 -96px; }
+.ui-icon-folder-open { background-position: -16px -96px; }
+.ui-icon-document { background-position: -32px -96px; }
+.ui-icon-document-b { background-position: -48px -96px; }
+.ui-icon-note { background-position: -64px -96px; }
+.ui-icon-mail-closed { background-position: -80px -96px; }
+.ui-icon-mail-open { background-position: -96px -96px; }
+.ui-icon-suitcase { background-position: -112px -96px; }
+.ui-icon-comment { background-position: -128px -96px; }
+.ui-icon-person { background-position: -144px -96px; }
+.ui-icon-print { background-position: -160px -96px; }
+.ui-icon-trash { background-position: -176px -96px; }
+.ui-icon-locked { background-position: -192px -96px; }
+.ui-icon-unlocked { background-position: -208px -96px; }
+.ui-icon-bookmark { background-position: -224px -96px; }
+.ui-icon-tag { background-position: -240px -96px; }
+.ui-icon-home { background-position: 0 -112px; }
+.ui-icon-flag { background-position: -16px -112px; }
+.ui-icon-calendar { background-position: -32px -112px; }
+.ui-icon-cart { background-position: -48px -112px; }
+.ui-icon-pencil { background-position: -64px -112px; }
+.ui-icon-clock { background-position: -80px -112px; }
+.ui-icon-disk { background-position: -96px -112px; }
+.ui-icon-calculator { background-position: -112px -112px; }
+.ui-icon-zoomin { background-position: -128px -112px; }
+.ui-icon-zoomout { background-position: -144px -112px; }
+.ui-icon-search { background-position: -160px -112px; }
+.ui-icon-wrench { background-position: -176px -112px; }
+.ui-icon-gear { background-position: -192px -112px; }
+.ui-icon-heart { background-position: -208px -112px; }
+.ui-icon-star { background-position: -224px -112px; }
+.ui-icon-link { background-position: -240px -112px; }
+.ui-icon-cancel { background-position: 0 -128px; }
+.ui-icon-plus { background-position: -16px -128px; }
+.ui-icon-plusthick { background-position: -32px -128px; }
+.ui-icon-minus { background-position: -48px -128px; }
+.ui-icon-minusthick { background-position: -64px -128px; }
+.ui-icon-close { background-position: -80px -128px; }
+.ui-icon-closethick { background-position: -96px -128px; }
+.ui-icon-key { background-position: -112px -128px; }
+.ui-icon-lightbulb { background-position: -128px -128px; }
+.ui-icon-scissors { background-position: -144px -128px; }
+.ui-icon-clipboard { background-position: -160px -128px; }
+.ui-icon-copy { background-position: -176px -128px; }
+.ui-icon-contact { background-position: -192px -128px; }
+.ui-icon-image { background-position: -208px -128px; }
+.ui-icon-video { background-position: -224px -128px; }
+.ui-icon-script { background-position: -240px -128px; }
+.ui-icon-alert { background-position: 0 -144px; }
+.ui-icon-info { background-position: -16px -144px; }
+.ui-icon-notice { background-position: -32px -144px; }
+.ui-icon-help { background-position: -48px -144px; }
+.ui-icon-check { background-position: -64px -144px; }
+.ui-icon-bullet { background-position: -80px -144px; }
+.ui-icon-radio-on { background-position: -96px -144px; }
+.ui-icon-radio-off { background-position: -112px -144px; }
+.ui-icon-pin-w { background-position: -128px -144px; }
+.ui-icon-pin-s { background-position: -144px -144px; }
+.ui-icon-play { background-position: 0 -160px; }
+.ui-icon-pause { background-position: -16px -160px; }
+.ui-icon-seek-next { background-position: -32px -160px; }
+.ui-icon-seek-prev { background-position: -48px -160px; }
+.ui-icon-seek-end { background-position: -64px -160px; }
+.ui-icon-seek-start { background-position: -80px -160px; }
+/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */
+.ui-icon-seek-first { background-position: -80px -160px; }
+.ui-icon-stop { background-position: -96px -160px; }
+.ui-icon-eject { background-position: -112px -160px; }
+.ui-icon-volume-off { background-position: -128px -160px; }
+.ui-icon-volume-on { background-position: -144px -160px; }
+.ui-icon-power { background-position: 0 -176px; }
+.ui-icon-signal-diag { background-position: -16px -176px; }
+.ui-icon-signal { background-position: -32px -176px; }
+.ui-icon-battery-0 { background-position: -48px -176px; }
+.ui-icon-battery-1 { background-position: -64px -176px; }
+.ui-icon-battery-2 { background-position: -80px -176px; }
+.ui-icon-battery-3 { background-position: -96px -176px; }
+.ui-icon-circle-plus { background-position: 0 -192px; }
+.ui-icon-circle-minus { background-position: -16px -192px; }
+.ui-icon-circle-close { background-position: -32px -192px; }
+.ui-icon-circle-triangle-e { background-position: -48px -192px; }
+.ui-icon-circle-triangle-s { background-position: -64px -192px; }
+.ui-icon-circle-triangle-w { background-position: -80px -192px; }
+.ui-icon-circle-triangle-n { background-position: -96px -192px; }
+.ui-icon-circle-arrow-e { background-position: -112px -192px; }
+.ui-icon-circle-arrow-s { background-position: -128px -192px; }
+.ui-icon-circle-arrow-w { background-position: -144px -192px; }
+.ui-icon-circle-arrow-n { background-position: -160px -192px; }
+.ui-icon-circle-zoomin { background-position: -176px -192px; }
+.ui-icon-circle-zoomout { background-position: -192px -192px; }
+.ui-icon-circle-check { background-position: -208px -192px; }
+.ui-icon-circlesmall-plus { background-position: 0 -208px; }
+.ui-icon-circlesmall-minus { background-position: -16px -208px; }
+.ui-icon-circlesmall-close { background-position: -32px -208px; }
+.ui-icon-squaresmall-plus { background-position: -48px -208px; }
+.ui-icon-squaresmall-minus { background-position: -64px -208px; }
+.ui-icon-squaresmall-close { background-position: -80px -208px; }
+.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }
+.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }
+.ui-icon-grip-solid-vertical { background-position: -32px -224px; }
+.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }
+.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }
+.ui-icon-grip-diagonal-se { background-position: -80px -224px; }
+
+
+/* Misc visuals
+----------------------------------*/
+
+/* Corner radius */
+.ui-corner-all,
+.ui-corner-top,
+.ui-corner-left,
+.ui-corner-tl {
+	border-top-left-radius: 4px;
+}
+.ui-corner-all,
+.ui-corner-top,
+.ui-corner-right,
+.ui-corner-tr {
+	border-top-right-radius: 4px;
+}
+.ui-corner-all,
+.ui-corner-bottom,
+.ui-corner-left,
+.ui-corner-bl {
+	border-bottom-left-radius: 4px;
+}
+.ui-corner-all,
+.ui-corner-bottom,
+.ui-corner-right,
+.ui-corner-br {
+	border-bottom-right-radius: 4px;
+}
+
+/* Overlays */
+.ui-widget-overlay {
+	background: #666666 url("images/ui-bg_diagonals-thick_20_666666_40x40.png") 50% 50% repeat;
+	opacity: .5;
+	filter: Alpha(Opacity=50); /* support: IE8 */
+}
+.ui-widget-shadow {
+	margin: -5px 0 0 -5px;
+	padding: 5px;
+	background: #000000 url("images/ui-bg_flat_10_000000_40x100.png") 50% 50% repeat-x;
+	opacity: .2;
+	filter: Alpha(Opacity=20); /* support: IE8 */
+	border-radius: 5px;
+}
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.theme.min.css elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.theme.min.css
--- elefant-elefant_1_3_10_beta/js/jquery-ui/jquery-ui.theme.min.css	1969-12-31 18:00:00.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery-ui/jquery-ui.theme.min.css	2015-09-05 21:13:59.000000000 -0500
@@ -0,0 +1,5 @@
+/*! jQuery UI - v1.11.4 - 2015-03-11
+* http://jqueryui.com
+* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
+
+.ui-widget{font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;font-size:1.1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid #ddd;background:#eee url("images/ui-bg_highlight-soft_100_eeeeee_1x100.png") 50% top repeat-x;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #e78f08;background:#f6a828 url("images/ui-bg_gloss-wave_35_f6a828_500x100.png") 50% 50% repeat-x;color:#fff;font-weight:bold}.ui-widget-header a{color:#fff}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid #ccc;background:#f6f6f6 url("images/ui-bg_glass_100_f6f6f6_1x400.png") 50% 50% repeat-x;font-weight:bold;color:#1c94c4}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#1c94c4;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #fbcb09;background:#fdf5ce url("images/ui-bg_glass_100_fdf5ce_1x400.png") 50% 50% repeat-x;font-weight:bold;color:#c77405}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited{color:#c77405;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid #fbd850;background:#fff url("images/ui-bg_glass_65_ffffff_1x400.png") 50% 50% repeat-x;font-weight:bold;color:#eb8f00}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#eb8f00;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #fed22f;background:#ffe45c url("images/ui-bg_highlight-soft_75_ffe45c_1x100.png") 50% top repeat-x;color:#363636}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#363636}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#b81900 url("images/ui-bg_diagonals-thick_18_b81900_40x40.png") 50% 50% repeat;color:#fff}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#fff}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#fff}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url("images/ui-icons_222222_256x240.png")}.ui-widget-header .ui-icon{background-image:url("images/ui-icons_ffffff_256x240.png")}.ui-state-default .ui-icon{background-image:url("images/ui-icons_ef8c08_256x240.png")}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url("images/ui-icons_ef8c08_256x240.png")}.ui-state-active .ui-icon{background-image:url("images/ui-icons_ef8c08_256x240.png")}.ui-state-highlight .ui-icon{background-image:url("images/ui-icons_228ef1_256x240.png")}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url("images/ui-icons_ffd27a_256x240.png")}.ui-icon-blank{background-position:16px 16px}.ui-icon-carat-1-n{background-position:0 0}.ui-icon-carat-1-ne{background-position:-16px 0}.ui-icon-carat-1-e{background-position:-32px 0}.ui-icon-carat-1-se{background-position:-48px 0}.ui-icon-carat-1-s{background-position:-64px 0}.ui-icon-carat-1-sw{background-position:-80px 0}.ui-icon-carat-1-w{background-position:-96px 0}.ui-icon-carat-1-nw{background-position:-112px 0}.ui-icon-carat-2-n-s{background-position:-128px 0}.ui-icon-carat-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-64px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-64px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:0 -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:4px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:4px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:4px}.ui-widget-overlay{background:#666 url("images/ui-bg_diagonals-thick_20_666666_40x40.png") 50% 50% repeat;opacity:.5;filter:Alpha(Opacity=50)}.ui-widget-shadow{margin:-5px 0 0 -5px;padding:5px;background:#000 url("images/ui-bg_flat_10_000000_40x100.png") 50% 50% repeat-x;opacity:.2;filter:Alpha(Opacity=20);border-radius:5px}
\ No newline at end of file
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery.autosave.js elefant-elefant_1_3_11_rc/js/jquery.autosave.js
--- elefant-elefant_1_3_10_beta/js/jquery.autosave.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery.autosave.js	2015-09-05 21:13:59.000000000 -0500
@@ -101,9 +101,10 @@
 							opts.form.elements[vals[i].name].value = vals[i].value;
 						}
 
-						if (opts.form.elements[vals[i].name].getAttribute ('id') == 'webpage-body') {
+						if (opts.form.elements[vals[i].name].getAttribute ('data-wysiwyg') == 1) {
 							// Set the contents of wysiwyg editor
-							$('#webpage-body').redactor ('set', vals[i].value);
+							var id = opts.form.elements[vals[i].name].getAttribute ('id');
+							$('#' + id).redactor ('code.set', vals[i].value);
 						} else if (opts.form.elements[vals[i].name].getAttribute ('id') == 'code-body') {
 							// Set the contents of codemirror editor
 							_codemirror.setValue (vals[i].value);
@@ -156,12 +157,13 @@
 						// Unnamed fields can be ignored (submit buttons)
 						continue;
 					}
-					if (opts.form.elements[i].getAttribute ('id') == 'webpage-body') {
+					if (opts.form.elements[i].getAttribute ('data-wysiwyg') == 1) {
 						// Get the contents from Redactor editor
 						try {
+							var id = opts.form.elements[i].getAttribute ('id')
 							vals[i] = {
 								name: opts.form.elements[i].name,
-								value: $('#webpage-body').redactor ('get')
+								value: $('#' + id).redactor ('code.get')
 							};
 						} catch (e) {}
 					} else if (opts.form.elements[i].getAttribute ('id') == 'code-body') {
Files elefant-elefant_1_3_10_beta/js/jquery.bgsave.js and elefant-elefant_1_3_11_rc/js/jquery.bgsave.js are identical
Files elefant-elefant_1_3_10_beta/js/jquery.cookie.js and elefant-elefant_1_3_11_rc/js/jquery.cookie.js are identical
Files elefant-elefant_1_3_10_beta/js/jquery.localize.min.js and elefant-elefant_1_3_11_rc/js/jquery.localize.min.js are identical
Files elefant-elefant_1_3_10_beta/js/jquery.password_strength.js and elefant-elefant_1_3_11_rc/js/jquery.password_strength.js are identical
Files elefant-elefant_1_3_10_beta/js/jquery.quickpager.js and elefant-elefant_1_3_11_rc/js/jquery.quickpager.js are identical
diff -urBNs elefant-elefant_1_3_10_beta/js/jquery.verify_values.js elefant-elefant_1_3_11_rc/js/jquery.verify_values.js
--- elefant-elefant_1_3_10_beta/js/jquery.verify_values.js	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/js/jquery.verify_values.js	2015-09-05 21:13:59.000000000 -0500
@@ -47,19 +47,90 @@
 				
 				$.get (url, function (res) {
 					opts.rules = res;
+					
+					// Attach input change events for rule blocks that include
+					// validate_on_change = 1 for live input validation.
+					for (var n in opts.rules) {
+						if (opts.rules[n]['validate_on_change'] === undefined) {
+							continue;
+						}
+
+						var name = rule = n,
+							rules = n.indexOf (':');
+						
+						if (rules > 0) {
+							name = n.substr (0, rules);
+							rule = n.substr (rules + 1);
+						}
+						
+						var field = (typeof obj[0].elements[name + '[]'] !== 'undefined')
+								? obj[0].elements[name + '[]']
+								: obj[0].elements[name];
+						
+						$(field).on ('change input', {name: name, rule: rule, field: field, opts: opts, n: n}, function (evt) {
+							var failed = false,
+								skip_if_empty = false,
+								name = evt.data.name,
+								rule = evt.data.rule,
+								field = evt.data.field,
+								opts = evt.data.opts,
+								n = evt.data.n;
+
+							for (var t in opts.rules[n]) {
+
+								if (t == 'skip_if_empty') {
+									skip_if_empty = true;
+								}
+								
+								var opt_list = {
+									form: obj,
+									type: t,
+									validator: opts.rules[n][t],
+									skip_if_empty: skip_if_empty
+								};
+
+								if (! $(field).verify_value (opt_list)) {
+									failed = true;
+									break;
+								}
+							}								
+					
+							if (failed) {
+								opts.callback ([rule], true);
+							} else {
+								opts.reset ([rule]);
+							}
+						});
+					}
 				});
 
-				obj.bind ('submit', function (evt) {
+				obj.bind ('submit', {opts: opts}, function (evt) {
 					var failed = [],
-						fields = [];
+						fields = [],
+						opts = evt.data.opts;
 					
 					for (var n in opts.rules) {
-						fields.push (n);
+						var name = rule = n,
+							rules = n.indexOf (':');
+
+						if (rules > 0) {
+							name = n.substr (0, rules);
+							rule = n.substr (rules + 1);
+						}
+
+						if ($.inArray (rule, fields) === -1) {
+							fields.push (rule);
+						}
+
+						if ($.inArray (name, failed) !== -1) {
+							// field already failed its main validation
+							continue;
+						}
 
 						// switch for fields with name[] format
-						var field = (typeof evt.target.elements[n + '[]'] !== 'undefined')
-								? evt.target.elements[n + '[]']
-								: evt.target.elements[n],
+						var field = (typeof evt.target.elements[name + '[]'] !== 'undefined')
+								? evt.target.elements[name + '[]']
+								: evt.target.elements[name],
 							skip_if_empty = false;
 
 						for (var t in opts.rules[n]) {
@@ -73,8 +145,9 @@
 								validator: opts.rules[n][t],
 								skip_if_empty: skip_if_empty
 							};
+
 							if (! $(field).verify_value (opt_list)) {
-								failed.push (n);
+								failed.push (rule);
 								break;
 							}
 						}
@@ -91,9 +164,13 @@
 		},
 
 		verify_value: function (options) {
-			var value = $(this).attr ('value'),
+			var value = $(this).val (),
 				type = options.type,
 				validator = options.validator;
+			
+			if (type === 'validate_on_change') {
+				return true;
+			}
 
 			if (options.skip_if_empty == true && value == '') {
 				return true;
@@ -160,13 +237,23 @@
 					}
 					break;
 				case 'regex':
-					var re = new RegExp (validator.substring (1, validator.length - 1));
-					if (! value.match (re)) {
+					try {
+						var mod = validator.replace (/^.+\/([igm]?)$/, '$1'),
+							str = validator.substring (1).replace (/\/[igm]*$/, ''),
+							re = new RegExp (str, mod);
+
+						if (! value.match (re)) {
+							return _false;
+						}
+					} catch (e) {
+						if (window.console && console.log) {
+							console.log (e.message);
+						}
 						return _false;
 					}
 					break;
 				case 'contains':
-					if (! value.toLowerCase ().match (validator.toLowerCase ())) {
+					if (value.toLowerCase ().indexOf (validator.toLowerCase ()) == -1) {
 						return _false;
 					}
 					break;
Files elefant-elefant_1_3_10_beta/js/json2.js and elefant-elefant_1_3_11_rc/js/json2.js are identical
Files elefant-elefant_1_3_10_beta/js/jstorage.js and elefant-elefant_1_3_11_rc/js/jstorage.js are identical
Files elefant-elefant_1_3_10_beta/js/urlify.js and elefant-elefant_1_3_11_rc/js/urlify.js are identical
Files elefant-elefant_1_3_10_beta/lang/cs.php and elefant-elefant_1_3_11_rc/lang/cs.php are identical
Files elefant-elefant_1_3_10_beta/lang/de.php and elefant-elefant_1_3_11_rc/lang/de.php are identical
Files elefant-elefant_1_3_10_beta/lang/en.php and elefant-elefant_1_3_11_rc/lang/en.php are identical
Files elefant-elefant_1_3_10_beta/lang/fr.php and elefant-elefant_1_3_11_rc/lang/fr.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lang/it.php elefant-elefant_1_3_11_rc/lang/it.php
--- elefant-elefant_1_3_10_beta/lang/it.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lang/it.php	2015-09-05 21:13:59.000000000 -0500
@@ -1,286 +1,414 @@
 <?php
 
 $this->lang_hash['it'] = array (
-        '- select -' => '- seleziona -',
-	'Powered by' => 'Powered by',
+	'%d file saved. Unable to save files: %s' => '%d file salvati. Impossibile salvare i file: %s',
+	'%d files saved.' => '%d file salvati.',
+	'%d to %d of %d results:' => 'Risultati da %d a %d di %d.',
+	'- select -' => '- seleziona -',
+	'- service -' => '- servizio -',
+	'.htaccess file is missing from the site root. Please save the following file to your server:' => 'Il file .htaccess non  presente nella radice del sito. Per favore inserisci il file seguente net tuo server:',
 	'1 result:' => '1 risultato:',
-	'Sign in' => 'Accedi',
-	'Sign in with' => 'Accedi con',
+	'A file by that name already exists.' => 'Esiste gi un file con questo nome.',
+	'A PHP extension stopped the file upload.' => 'Una estensione PHP ha bloccato il caricamento del file.',
+	'A theme by this name is already installed.' => ' gi installato un tema con questo nome.',
+	'About' => 'Info',
+	'About you' => 'Info',
 	'Access' => 'Accesso',
+	'Access denied' => 'Accesso negato',
+	'Access token (optional)' => 'Token di accesso (opzionale)',
+	'Access token secret (optional)' => 'Secret Token di accesso (opzionale)',
+	'Account not found' => 'Account non trovato',
 	'Account Verified' => 'Account Verificato',
-	'Update Profile' => 'Aggiorna Profilo',
-	'Upgrading Blog App' => 'Aggiornamento Applicazione Blog',
-	'Upgrading Files App' => 'Aggiornamento Applicazione File',
-	'Upgrading User App' => 'Aggiornamento Applicazione Utente',
-	'Upgrade completed' => 'Aggiornamento completato',
+	'Accounts' => 'Accounts',
 	'Add' => 'Aggiungi',
 	'Add Block' => 'Aggiungi Blocco',
-	'Add Page-Specific Block' => 'Aggiungi Blocco Specifico per la Pagina',
 	'Add Blog Post' => 'Aggiungi Blog Post',
+	'Add Category' => 'Aggiungi Categoria',
 	'Add Field' => 'Aggiungi Campo',
-	'Add Page' => 'Aggiungi Pagina',
-	'Add User' => 'Aggiungi Utente',
 	'Add language' => 'Aggiungi lingua',
-	'Add {{appname|ucfirst}}' => 'Aggiungi {{appname|ucfirst}}',
-	'Site tree' => 'Albero Sito',
+	'Add Link' => 'Aggiungi Collegamento',
+	'Add Member' => 'Aggiungi Membro',
+	'Add Note' => 'Aggiungi Nota',
+	'Add Page' => 'Aggiungi Pagina',
+	'Add Page-Specific Block' => 'Aggiungi Blocco Specifico per la Pagina',
+	'Add Role' => 'Aggiungi Ruolo',
+	'Add role' => 'Aggiungi ruolo',
+	'Add {{appname|cli\\Filter::title}}' => 'Add {{appname|cli\\Filter::title}}',
+	'Address' => 'Indirizzo',
+	'Address line 2' => 'Indirizzo - riga 2',
+	'Admin Email' => 'Email amministratore',
+	'Admin login' => 'Login amministratore',
+	'Admin Password' => 'Password amministratore',
+	'Adobe Application Client ID' => 'Adobe Application Client ID',
+	'Adobe Image Editor' => 'Editore di Immagine Adobe',
+	'All' => 'Tutti',
+	'All Dates' => 'Tutte le date',
+	'All tags' => 'Tutti i TAG',
+	'Allowed roles' => 'Ruoli permessi',
 	'Alphabetical' => 'Alfabetico',
-	'Other pages' => 'Altre pagine',
-	'Other versions' => 'Altre versioni',
-	'No posts yet... :(' => 'Ancora nessun post...:(',
-	'Year in two digit form' => 'Anno a due cifre',
-	'Year in full' => 'Anno completo',
-	'Cancel' => 'Annulla',
-	'Preview' => 'Anteprima',
-	'Preview with layout' => 'Anteprima con layout',
-	'Please wait, this may take a minute...' => 'Attendi per favore, potrebbe volerci un minuto...',
-	'Embedded Audio (MP3)' => 'Audio Incorporato (MP3)',
+	'Already a member?' => 'Gi registrato?',
+	'Already up-to-date' => 'Gi aggiornata',
+	'Also note that Github limits you to installing one app per hour.' => 'Nota che Github limita a installare una app per ora.',
+	'Alternate menu title' => 'Titolo alternativo menu',
+	'Alternate window title' => 'Titolo alternativo finestra',
+	'An app by this name is already installed.' => ' installata un&apos;app con questo nome.',
+	'An email has been sent with a link to reset your password.' => ' stata inviata una email con un link per annullare la password.',
+	'An Error Occurred' => ' avvenuto un Errore',
+	'An unknown error occurred.' => ' avvenuto un Errore sconosciuto',
+	'Apache mod_rewrite extension must be installed.' => 'L&apos;estensione mod_rewrite di Apache deve essere installata.',
+	'Application ID' => 'ID applicazione',
+	'Application secret' => 'Chiave segreta applicazione',
+	'apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>' => 'La cartella delle applicazioni non  scrivibile. Per favore esegui:</p><p><tt>chmod 775 apps</tt>',
+	'Are you sure you want to cancel and lose any changes?' => 'Sei sicuro di annullare perdendo le modifiche?',
+	'Are you sure you want to cancel?' => 'Sei sicuro di voler annullare?',
+	'Are you sure you want to delete the current block?' => 'Sei sicuro di voler eliminare il blocco corrente?',
+	'Are you sure you want to delete the current page?' => 'Sei sicuro di voler eliminare la pagina corrente?',
+	'Are you sure you want to delete the default block? This will remove it from all pages using this block' => 'Sei sicuro di voler eliminare il blocco predefinito? Questo verr rimosso da tutte le pagine in cui  utilizzato.',
+	'Are you sure you want to delete this block?' => 'Sei sicuro di voler eliminare questo blocco?',
+	'Are you sure you want to delete this field?' => 'Sei sicuro di voler eliminare questo campo?',
+	'Are you sure you want to delete this file?' => 'Sei sicuro di voler eliminare questo file?',
+	'Are you sure you want to delete this folder and all of its contents?' => 'Sei sicuro di voler eliminare questa cartella e tutti i suoi contenuti?',
+	'Are you sure you want to delete this item?' => 'Sei sicuro di voler eliminare questo elemento?',
+	'Are you sure you want to delete this language?' => 'Sei sicuro di voler eliminare questa lingua?',
+	'Are you sure you want to delete this link?' => 'Sei sicuro di voler eliminare questo collegamento?',
+	'Are you sure you want to delete this page?' => 'Sei sicuro di voler eliminare questa pagina?',
+	'Are you sure you want to delete this post?' => 'Sei sicuro di voler eliminare questo post?',
+	'Are you sure you want to delete this role?' => 'Sei sicuro di voler eliminare questo ruolo?',
+	'Are you sure you want to delete this user?' => 'Sei sicuro di voler eliminare questo utente?',
+	'Are you sure you want to delete this {{appname|cli\\Filter::spaces}}?' => 'Are you sure you want to delete this {{appname|cli\\Filter::spaces}}?',
+	'Are you sure you want to permanently delete this layout file?' => 'Sei sicuro di voler eliminare permanentemente questo layout?',
+	'Are you sure you want to permanently delete this note?' => 'Sei sicuro di voler eliminare questa nota?',
+	'Are you sure you want to permanently delete this stylesheet file?' => 'Sei sicuro di voler eliminare permanentemente questo stile?',
 	'Author' => 'Autore',
 	'Authorization required.' => 'Autorizzazione richiesta',
-	'Welcome to the Elefant CMS installer.' => 'Benvenuto nell\'installatore di Elefant CMS.',
-	'Blocks' => 'Blocchi',
+	'Auto-saved data found for this form.' => 'Per questo form sono presenti dati auto-salvati.',
+	'Auto-saved data found.' => 'Dati auto-salvati trovati.',
+	'Available Resources' => 'Risorse Disponibili',
+	'Back' => 'Indietro',
+	'Basic admin access' => 'Accesso amministrativo di base',
+	'Basic Settings' => 'Impostazioni di Base',
+	'Block added.' => 'Blocco aggiunto',
 	'Block deleted.' => 'Blocco eliminato.',
-	'Blog post added.' => 'Blog post aggiunto.',
+	'Block ID' => 'ID blocco.',
+	'Block saved.' => 'Blocco salvato.',
+	'Block title' => 'Titolo blocco.',
+	'Blocks' => 'Blocchi',
+	'Blog page layout' => 'Impaginazione Blog',
 	'Blog post deleted.' => 'Blog post eliminato.',
 	'Blog post saved.' => 'Blog post salvato.',
-	'official blog' => 'Blog ufficiale',
-	'Custom Fields' => 'Campi personalizzati',
-	'Field' => 'Campo',
-	'Field updated.' => 'Campo aggiornato.',
-	'Field added.' => 'Campo aggiunto.',
-	'Field deleted.' => 'Campo eliminato.',
-	'Field not found.' => 'Campo non trovato.',
-	'Upload' => 'Carica',
-	'Upload the CSV file' => 'Carica il file CSV',
-	'Upload a zip file' => 'Carica un file zip',
-	'File upload failed' => 'Caricamento del file fallito',
-	'Multi-file uploader' => 'Caricatore file multiplo',
-	'Folder' => 'Cartella',
-	'Folder created.' => 'Cartella creata.',
-	'Folder renamed.' => 'Cartella rinominata.',
+	'Blog Posts' => 'Post del blog',
+	'Blog Settings' => 'Impostazioni blog',
+	'Blog title' => 'Titolo blog',
+	'Blogger export file' => 'Esporta file blogger',
+	'Blogger importer' => 'Importa blogger',
+	'Body' => 'Corpo (body)',
+	'Browse files' => 'Sfoglia i file',
+	'Browse images' => 'Sfoglia le immagini',
+	'Browse...' => 'Sfoglia...',
+	'Building index' => 'Costruzione indice...',
+	'by' => 'da',
+	'cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella della cache non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'Cancel' => 'Annulla',
+	'Cannot create page' => 'Impossibile creare la pagina',
+	'Cannot upload PHP files due to security.' => 'Impossibile caricare file PHP per sicurezza',
+	'Change password' => 'Modifica password',
+	'Changed on' => 'Modificata',
+	'Changes saved.' => 'Modifiche salvate.',
+	'Character set' => 'Set di caratteri',
 	'Charset' => 'Charset',
-	'Light' => 'Chiaro',
-	'Application secret' => 'Chiave segreta applicazione',
-	'Click \'Next\' to continue whenever you\'re ready. Thanks for using Elefant!' => 'Clicca "Successivo" per continuare quando se pronto. Grazie per utilizzare Elefant!',
-	'Click \'Next\' to continue.' => 'Clicca "Successivo" per continuare.',
-	'Click to update photo' => 'Clicca per aggiornare la foto',
-	'Click to edit.' => 'Clicca per modificare.',
-	'Click to restore.' => 'Clicca per recuperare.',
+	'Check that your permissions are correct and try again.' => 'Verifica i tuoi permessi e riprova.',
+	'Check your host for instructions on setting up sub-domains in production.' => 'Verifica il tuo host per le istruzioni di configurazione di sub-dominio in produzione.',
+	'Check your inbox' => 'Controlla la tua casella in ingresso.',
+	'Choose' => 'Scelta',
+	'choose' => 'scegli',
+	'Choose a file' => 'Scegli un file',
+	'Choose a Member' => 'Scegli un Membro',
+	'Choose a new password' => 'Scegli una nuova password',
+	'Choose a password' => 'Scegli una password',
+	'Choose a password for your new account.' => 'Scegli una password per il tuo nuovo account.',
+	'Choose an image' => 'Scegli una immagine',
+	'Choose an importer' => 'Scegli un importatore',
+	'City' => 'Citt',
+	'Clear' => 'Pulisci',
+	'Click \'Next\' to continue whenever you\'re ready. Thanks for using Elefant!' => 'Clicca \"Successivo\" per continuare quando se pronto. Grazie per utilizzare Elefant!',
+	'Click \'Next\' to continue.' => 'Clicca \"Successivo\" per continuare.',
 	'Click here for instructions on configuring virtual hosts for development.' => 'Clicca qui per istruzioni su come configurare host virtuali di sviluppo.',
 	'Click here for more information and translations of the MIT license.' => 'Clicca qui per maggiori informazioni e traduzione della licenza MIT.',
+	'Click here to add custom fields.' => 'Clic per aggiungere un campo personalizzato',
 	'Click here to restore.' => 'Clicca qui per recuperare.',
+	'Click to edit' => 'Clic per editare',
+	'click to install' => 'clicca per installare',
+	'Click to remove' => 'Clic per rimuovere',
+	'Click to remove, drag to re-order' => 'Clic per rimuovere, trascina per riordinare',
+	'Click to restore.' => 'Clicca per recuperare.',
+	'click to upgrade' => 'clicca per aggiornare',
 	'Code' => 'Codice',
-	'Language code' => 'Codice lingua',
+	'comments' => 'commenti',
 	'Comments' => 'Commenti',
+	'Comments app' => 'App Commenti',
+	'Company' => 'Societ',
 	'Compare to current' => 'Confronta con il corrente',
 	'Comparing' => 'Confronto',
-	'Database Connection' => 'Connessione Database',
+	'conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella di configurazione non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'Configuration file not found.' => 'File di configurazione non trovato.',
 	'Connect & Create Schema' => 'Connetti % Crea lo Schema',
+	'Connection Error' => 'Errore di collegamento',
 	'Consumer key' => 'Consumer Key',
 	'Consumer secret' => 'Consumer Secret ',
-	'Content' => 'Contenuto',
+	'Contact info' => 'Contatti',
+	'Contact information' => 'Info di contatto',
 	'Contains text...' => 'Contiene testo...',
+	'Content' => 'Contenuto',
 	'Continue' => 'Continua',
-	'Check your inbox' => 'Controlla la tua casella in ingresso.',
 	'Copyright' => 'Copyright',
-	'Body' => 'Corpo (body)',
-	'Current' => 'Corrente',
-	'Designer' => 'Costruttore',
-	'Building index' => 'Costruzione indice...',
+	'Country' => 'Paese',
 	'Create Layout' => 'Crea Layout',
+	'Create new content' => 'Crea un nuovo contenuto',
 	'Create Stylesheet' => 'Crea Stile',
+	'css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei css non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'CSV Importer' => 'Importa CSV',
+	'Current' => 'Corrente',
+	'Current version' => 'Versione corrente',
+	'Custom Fields' => 'Campi personalizzati',
+	'Dark' => 'Scuro',
+	'Database' => 'Database',
+	'Database Connection' => 'Connessione Database',
+	'Database tables created and settings saved.' => 'Tabelle del database create e impostazioni salvate.',
 	'Date' => 'Data',
+	'Date formatting reference' => 'Riferimento formattazione data',
 	'Date in ordinal form' => 'Data in forma seriale',
+	'Date input' => 'Immissione Data',
 	'Date, zero-padded' => 'Data, riempita con zeri',
 	'Date/Time' => 'Data/Ora',
-	'Database' => 'Database',
-	'Auto-saved data found.' => 'Dati auto-salvati trovati.',
+	'Date/time input' => 'Immissione data/ora',
+	'Day of the week' => 'Giorno della settimana',
+	'Day of the week, abbreviated' => 'Giorno della settimana, abbreviato',
+	'Default' => 'Default',
+	'Default access for this role' => 'Accesso di default per questo ruolo',
+	'Default access for this role (selected means allow by default)' => 'Accesso di default per questo ruolo (selezionato significa permetti per defualt)',
+	'Default language updated.' => 'Lingua predefinita aggiornata.',
+	'Default layout updated.' => 'Layout predefinito aggiornato.',
+	'Default member role' => 'Ruolo di default',
+	'Delete' => 'Elimina',
+	'Delete Block' => 'Elimina Blocco',
+	'Delete content' => 'Elimina contenuto',
+	'Delete Page' => 'Elimina Pagina',
 	'Description' => 'Descrizione',
-	'You must enter your name.' => 'Devi inserire il tuo nome.',
-	'You must enter options for a select field.' => 'Devi inserire le opzioni per il campo di selezione.',
-	'You must enter an author.' => 'Devi inserire un autore.',
-	'You must enter body content.' => 'Devi inserire un contenuto per il corpo.',
-	'You must enter an email address.' => 'Devi inserire un indirizzo email.',
-	'You must enter a field name.' => 'Devi inserire un nome campo.',
-	'You must enter a name.' => 'Devi inserire un nome.',
-	'You must enter a block title.' => 'Devi inserire un titolo di blocco.',
-	'You must enter a blog title.' => 'Devi inserire un titolo di blog.',
-	'You must enter a page title.' => 'Devi inserire un titolo di pagina.',
-	'You must enter a title.' => 'Devi inserire un titolo.',
-	'You must enter a valid email, or email not found.' => 'Devi inserire una email valida e gi registrata.',
-	'You must enter a valid email, or your email may already be registered.' => 'Devi inserire una email valida e non ancora registrata.',
-	'You must enter a password.' => 'Devi inserire una password.',
-	'You must select a date/time.' => 'Devi selezionare una data/ora.',
-	'File Size' => 'Dimensione File',
-	'File size' => 'Dimensione file',
-	'File size is too large.' => 'Dimensione file troppo grande.',
-	'Invalid directory' => 'Directory non valida',
+	'Designer' => 'Costruttore',
+	'Display title' => 'Mostra titolo',
 	'Disqus' => 'Disqus',
 	'Disqus shortname' => 'Disqus abbreviazione',
+	'Done editing' => 'Modifica terminata',
+	'Done.' => 'Fatto.',
+	'Draft' => 'Bozza',
+	'Drag files here to upload.' => 'Trascina il file qui per caricarlo',
+	'Drag pages here to remove them from the tree.' => 'Trascina le pagine qui per rimuoverle dall&apos;albero.',
+	'Drag pages to the site tree to include them in your navigation.' => 'Trascina le pagine nell&apos;albero del sito per includerle nella navigazione.',
+	'Drag resources here to remove them from the toolbar.' => 'Trascina la risorse qui per rimuoverla dalla Barra degli Strumenti.',
+	'Drag resources to the toolbar tree to include them in the toolbar.' => 'Trascina le risorse sulla Barra degli Strumenti per includerle in essa.',
 	'Driver' => 'Driver',
+	'Drop down' => 'Lista a discesa',
+	'Drop down options (one per line)' => 'Rilascia opzioni (una per riga)',
+	'Dynamic Objects' => 'Oggetti Dinamici',
+	'Edit' => 'Modifica',
+	'Edit Block' => 'Modifica Blocco',
+	'Edit Blog Post' => 'Modifica Post del Blog',
+	'Edit Caption' => 'Modifica Didascalia',
+	'Edit design themes' => 'Modifica tema grafico',
+	'Edit file' => 'Modifica File',
+	'Edit Layout' => 'Modifica Layout',
+	'Edit Member' => 'Modifica Membro',
+	'Edit Page' => 'Modifica Pagina',
+	'Edit Photo' => 'Modifica Foto',
+	'Edit Post' => 'Modifica Post',
+	'Edit posts with' => 'Modifica post con',
+	'Edit Profile' => 'Modifica Profilo',
+	'Edit Properties' => 'Modifica Propriet',
+	'Edit Role' => 'Modifica Ruolo',
+	'Edit site navigation' => 'Modifica navigazione sito',
+	'Edit Stylesheet' => 'Modifica Foglio di Stile',
+	'Edit Toolbar' => 'Modifica Barra degli Strumenti',
+	'Editing language' => 'Modifica Lingua',
+	'Editing Locked' => 'Modifica Bloccata',
 	'Elefant' => 'Elefant',
-	'Delete' => 'Elimina',
-	'Delete Block' => 'Elimina Blocco',
-	'Delete Page' => 'Elimina Pagina',
+	'Elefant homepage' => 'Homepage di Elefant',
+	'Elefant Installer' => 'Installer di Elefant',
+	'Elefant\'s CMS was designed to run a complete website, and needs to be installed in the root of a site to function correctly. Please move Elefant to the root folder to continue, or use a sub-domain of your site to install it under.' => 'Il CMS di Elefant  stato progettato per fornire un sito web completo, e necessita di essere installato nella cartella radice del sito per funzionare correttamente. Per favore sposta Elefant nella cartella radice per continuare oppure fai puntare un sub-dominio alla cartella in cui si trova Elefant.',
 	'Email' => 'Email',
-	'Admin Email' => 'Email amministratore',
-	'Incorrect email or password, please try again.' => 'Email o password non corretti, prova di nuovo.',
+	'Email address' => 'Indirizzo email',
+	'Embed' => 'Incorpora',
+	'Embedded' => 'Incorporato',
 	'Error' => 'Errore',
-	'Error uploading file.' => 'Errore caricando il file',
-	'Connection Error' => 'Errore di collegamento',
 	'Error importing file' => 'Errore importando il file',
-	'Unknown error' => 'Errore sconosciuto',
-	'A file by that name already exists.' => 'Esiste gi un file con questo nome.',
-	'Blogger export file' => 'Esporta file blogger',
-	'PHP PDO extension is missing.' => 'Estensione PHP PDO mancante',
+	'Error message' => 'Messaggio di errore',
+	'Error Message' => 'Messaggio di Errore',
+	'Error saving properties.' => 'Errore salvando le propriet.',
+	'Error uploading file.' => 'Errore caricando il file',
+	'Export' => 'Esporta',
+	'Extra Options' => 'Opzioni Extra',
 	'Facebook' => 'Facebook',
-	'Fallback' => 'Fallback',
+	'Facebook app settings' => 'Impostazione app Facebook',
 	'Failed to retrieve the file at the specified link.' => 'Fallito il recupero del file al link specificato.',
+	'Failed to save file' => 'Salvataggio file fallito',
+	'Failed to save...' => 'Salvataggio fallito...',
+	'Failed to write the file to disk.' => 'Scrittura del file su disco fallita.',
+	'Failed to write to conf/config.php' => 'Scrittura su conf/config.php fallita.',
+	'Fallback' => 'Fallback',
 	'False' => 'Falso',
-	'You\'re done!' => 'Fatto!',
-	'Done.' => 'Fatto.',
-	'Files' => 'File',
-	'Uploaded CSV file not found.' => 'File CSV caricato non trovato.',
-	'Configuration file not found.' => 'File di configurazione non trovato.',
-	'Wordpress export file' => 'File di esportazione di Wordpress',
+	'Field' => 'Campo',
+	'Field added.' => 'Campo aggiunto.',
+	'Field deleted.' => 'Campo eliminato.',
+	'Field name' => 'Nome Campo',
+	'Field not found.' => 'Campo non trovato.',
+	'Field order has been updated.' => 'L&apos;ordine del campo  stato aggiornato.',
+	'Field updated.' => 'Campo aggiornato.',
+	'File Already Exists' => 'Il File esiste gi',
+	'File already exists' => 'Il file esiste gi',
 	'File deleted.' => 'File eliminato.',
+	'File link' => 'Link del file',
+	'File moved.' => 'File spostato.',
 	'File not found' => 'File non trovato',
-	'Invalid file.' => 'File non valido.',
 	'File renamed.' => 'File rinominato.',
+	'File save failed' => 'Salvataggio file fallito',
 	'File saved.' => 'File salvato.',
+	'File Size' => 'Dimensione File',
+	'File size' => 'Dimensione file',
+	'File size is too large.' => 'Dimensione file troppo grande.',
+	'File unzipped.' => 'File decompresso',
+	'File upload failed' => 'Caricamento del file fallito',
+	'File upload field not set.' => 'Campo file upload non impostato',
 	'File:' => 'File:',
-	'Embedded Flash (SWF)' => 'Flash Incorporato (SWF)',
-	'Stylesheets' => 'Fogli di Stile',
-	'Stylesheet' => 'Foglio di Stile',
-	'Stylesheet added.' => 'Foglio di Stile aggiunto.',
-	'Stylesheet saved.' => 'Foglio di Stile salvato.',
-	'Source' => 'Fonte',
-	'Short date format' => 'Formato data corto',
-	'Local date format' => 'Formato data locale',
-	'Local time format' => 'Formato ora locale',
-	'Normal strength' => 'Forza normale',
-	'Photos by' => 'Foto da',
-	'Time zone offset' => 'Fuso orario (spostamento)',
-	'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec' => 'Gen Feb Mar Apr Mag Giu Lug Ago Set Ott Nov Dic',
-	'January February March April May June July August September October November December' => 'Gennaio Febbraio Marzo Aprile Maggio Giugno Luglio Agosto Settembre Ottobre Novembre Dicembre',
-	'File Manager' => 'Gestore File',
-	'Day of the week' => 'Giorno della settimana',
-	'Day of the week, abbreviated' => 'Giorno della settimana, abbreviato',
-	'SQLite users can simply click \'Connect & Create Schema\'. MySQL users please select your driver and enter your server details to continue.' => 'Gli utenti SQLite possono semplicemente fare clic su \'Connetti & Crea Schema\'. Gli utenti MySQL devono selezionare il driver e inserire i dati del server per continuare.',
+	'Files' => 'File',
+	'Files - Settings' => 'Impostazioni Files',
+	'files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei file non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
+	'Finish importing' => 'Termina importazione',
+	'Finished' => 'Terminato',
+	'First name' => 'Nome',
+	'Folder already exists' => 'La cartella esiste gi',
+	'Folder created.' => 'Cartella creata.',
+	'Folder deleted.' => 'Cartella eliminata.',
+	'Folder must be empty' => 'La cartella deve essere vuota',
+	'Folder renamed.' => 'Cartella rinominata.',
+	'Footer message' => 'Messagio Footer',
+	'Forbidden' => 'Vietato',
+	'Forgot your password?' => 'Password dimenticata?',
+	'Form validation failed. Please review and try again.' => 'Validazione modulo fallita. Controlla e riprova.',
+	'Full name' => 'Nome e Cognome',
+	'Github installation failed' => 'Installazione Github fallita',
+	'Go' => 'Vai',
+	'Go to user profile' => 'Vai al profilo utente.',
+	'Go to website' => 'Vai al sito web',
 	'Google' => 'Google',
-	'Thanks for using Elefant!' => 'Grazie per utilizzare Elefant!',
 	'Hmm, we can\'t seem to find the page you wanted at the moment.' => 'Hmm, sembra che al momento non si trovi la pagina che cerchi.',
+	'Hmm, we can\'t seem to find the post you wanted at the moment.' => 'Il post che cerchi sembra non disponibile al momento.',
 	'Home' => 'Home',
-	'Elefant homepage' => 'Homepage di Elefant',
-	'Server requirements have been verified.' => 'I requisiti del server sono stati verificati.',
+	'Hours in 12-hour time' => 'Ore in formato 12-ore',
+	'Hours in 12-hour time, zero-padded' => 'Ore in formato 12-ore, ccon zero iniziale',
+	'Hours in 24-hour time' => 'Ore in formato 24-ore',
+	'Hours in 24-hour time, zero-padded' => 'Ore in formato 24-ore, con zero iniziale',
+	'I Agree' => 'Sono d&apos;accordo',
 	'ID' => 'ID',
-	'Page ID' => 'ID Ppagina',
-	'Application ID' => 'ID applicazione',
-	'Block ID' => 'ID blocco.',
-	'Elefant\'s CMS was designed to run a complete website, and needs to be installed in the root of a site to function correctly. Please move Elefant to the root folder to continue, or use a sub-domain of your site to install it under.' => 'Il CMS di Elefant  stato progettato per fornire un sito web completo, e necessita di essere installato nella cartella radice del sito per funzionare correttamente. Per favore sposta Elefant nella cartella radice per continuare oppure fai puntare un sub-dominio alla cartella in cui si trova Elefant.',
-	'File Already Exists' => 'Il File esiste gi',
-	'The language code entered already exists.' => 'Il codice lingua inserito esiste gi.',
-	'.htaccess file is missing from the site root. Please save the following file to your server:' => 'Il file .htaccess non  presente nella radice del sito. Per favore inserisci il file seguente net tuo server:',
-	'File already exists' => 'Il file esiste gi',
-	'Zip file was invalid or could not be installed.' => 'Il file zip non  valido o non pu essere installato.',
-	'The file was only partially uploaded.' => 'Il file  stato caricato solo parzialmente.',
-	'The layout you entered doesn\'t exist.' => 'Il layout inserito non esiste.',
-	'The link appears to be invalid.' => 'Il link sembra essere non valido.',
-	'The file name contains invalid characters.' => 'Il nome del file contiene caratteri non validi.',
-	'The installation process has been completed. Here are some links you may want to bookmark:' => 'Il processo di installazione  stato completato. Ecco alcuni link che potresti voler annotare.',
-	'The following theme has been installed:' => 'Il seguente tema  stato installato:',
-	'Your ID must be a lowercase alphanumeric value. It must also not share the name of an app.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve condividere il nome di una applicazione.',
-	'Your ID must be a lowercase alphanumeric value and can\'t already exist.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve esistere gi.',
-	'Your ID must be a lowercase alphanumeric value and can\'t already exist. It must also not share the name of an app.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve esistere gi. Non deve nemmeno condividere il nome di una applicazione.',
-	'Your ID must be a lowercase alphanumeric value.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo.',
-	'Your Name' => 'Il tuo Nome',
-	'Your name' => 'Il tuo nome',
-	'Your name must be alphanumeric and not a duplicate of an existing stylesheet.' => 'Il tuo nome deve essere alfanumerico e non un duplicato di un foglio di stile esistente.',
-	'Your name must be alphanumeric and not a duplicate of an existing layout.' => 'Il tuo nome deve essere alfanumerico e non un duplicato di un layout esistente.',
-	'Your website' => 'Il tuo sito web',
-	'Updated image not found.' => 'Immagine aggiornata non trovata.',
-	'CSV Importer' => 'Importa CSV',
-	'Blogger importer' => 'Importa blogger',
+	'If you have any trouble during the install process, please visit the Elefant project at the following link to report it, and we\'ll do our best to help.' => 'Se hai problemi durante il processo di installazione, riportalo al progetto Elefant al link seguente e noi faremo del nostro meglio per aiutarti.',
+	'Image link' => 'Collegamento immagine',
+	'Import' => 'Importa',
 	'Import as...' => 'Importa come...',
+	'Import Members' => 'Importa Membri',
 	'Import Posts' => 'Importa i Post',
 	'Important: Only install apps or themes from trusted sources.' => 'Importante: installa soltanto applicazioni e temi da fonti fidate.',
-	'Wordpress importer' => 'Importatore Wordpress',
-	'Unable to parse the uploaded file.' => 'Impossibile analizzare il file caricato.',
-	'Unable to create folder' => 'Impossibile creare la cartella',
-	'Unable to delete' => 'Impossibile eliminare',
-	'Unable to Delete File' => 'Impossibile eliminare il file.',
-	'Unable to delete folders' => 'Impossibile eliminare le cartelle',
-	'Unable to fetch file' => 'Impossibile recuperare il file',
-	'Unable to fetch configuration file.' => 'Impossibile recuperare il file di configurazione.',
-	'Unable to rename' => 'Impossibile rinominare',
-	'Unable to save the file.' => 'Impossibile salvare il file.',
-	'Unable to save changes. Check your folder permissions and try again.' => 'Impossibile salvare le modifiche. Controllare le autorizzazioni della cartella e riprova.',
-	'Unable to write to the file. Please check your folder permissions and try again.' => 'Impossibile scrivere nel file. Controlla le autorizzazioni della cartella e riprova.',
-	'Unable to write to layouts folder.' => 'Impossibile scrivere nella cartella dei layout.',
-	'Unable to write to apps folder.' => 'Impossibile scrivere nella cartella dell\'applicazione.',
-	'Unable to write to cache folder.' => 'Impossibile scrivere nella cartella della cache.',
-	'Settings' => 'Impostazioni',
-	'Site Settings' => 'Impostazioni Sito',
-	'User Settings' => 'Impostazioni Utente',
-	'Blog Settings' => 'Impostazioni blog',
-	'Language settings' => 'Impostazioni lingua',
-	'Settings saved and admin user created.' => 'Impostazioni salvate e utente amministratore creato.',
-	'Settings saved.' => 'Impostazioni salvate.',
-	'Embedded' => 'Incorporato',
+	'Imported' => 'Importato',
+	'Imported %d members.' => 'Importati %d membri.',
+	'Imported %d posts.' => 'Importati %d post',
+	'Incorrect email or password, please try again.' => 'Email o password non corretti, prova di nuovo.',
 	'Indexing completed' => 'Indicizzazione completata',
-	'Back' => 'Indietro',
-	'Email address' => 'Indirizzo email',
+	'Insert' => 'Inserisci',
+	'Insert File' => 'Inserisci FIle',
+	'Insert Image' => 'Inserisci Immagine',
+	'Insert Link' => 'Inserisci collegamento',
 	'Insert tag' => 'Inserisci Tag',
 	'Install' => 'Installa',
-	'Install App/Theme' => 'Installa Applicazione/Tema',
 	'Install another' => 'Installa un altro',
-	'Installer' => 'Installatore',
-	'Github installation failed' => 'Installazione Github fallita',
+	'Install App/Theme' => 'Installa Applicazione/Tema',
 	'Install completed' => 'Installazione completata',
-	'Zip file installation failed' => 'Installazione file zip fallita',
-	'Elefant Installer' => 'Installer di Elefant',
+	'Install failed.' => 'Installazione fallita.',
+	'Install new apps/themes' => 'Installa nuova app/tema.',
+	'Installer' => 'Installatore',
 	'Introduction' => 'Introduzione',
-	'Submit' => 'Invia',
-	'Send verification' => 'Invia verifica',
-	'Apache mod_rewrite extension must be installed.' => 'L\'estensione mod_rewrite di Apache deve essere installata.',
-	'Field order has been updated.' => 'L\'ordine del campo  stato aggiornato.',
-	'css folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei css non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
-	'files folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei file non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
-	'layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei layout non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
-	'cache folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella della cache non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
-	'apps folder is not writeable. Please run:</p><p><tt>chmod 775 apps</tt>' => 'La cartella delle applicazioni non  scrivibile. Per favore esegui:</p><p><tt>chmod 775 apps</tt>',
+	'Invalid class name.' => 'Nome classe non valido.',
+	'Invalid directory' => 'Directory non valida',
+	'Invalid File Name' => 'Nome Campo Non Valido',
+	'Invalid file name' => 'Nome file non valido',
+	'Invalid file type' => 'Tipo file non valido',
+	'Invalid file.' => 'File non valido.',
+	'Invalid folder' => 'Cartella non valida',
+	'Invalid folder name' => 'Nome cartella non valido',
+	'Invalid location' => 'Posizione non valida',
+	'Invalid name' => 'Nome non valido',
+	'Invalid or expired recovery link' => 'Link di recupero non valido o scaduto',
+	'Invalid path' => 'Percorso non valido',
+	'Invalid Path' => 'Percorso Non Valido',
+	'Invalid properties' => 'Propriet non valide',
+	'Invalid Verifier' => 'Verificatore Non Valido',
+	'is required' => ' richiesto',
+	'It looks like you\'re trying to install Elefant into a sub-folder.' => 'Sembra che tu stia installando Elefant in una sottocartella.',
+	'Item restored.' => 'Elemento recuperato.',
+	'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec' => 'Gen Feb Mar Apr Mag Giu Lug Ago Set Ott Nov Dic',
+	'January February March April May June July August September October November December' => 'Gennaio Febbraio Marzo Aprile Maggio Giugno Luglio Agosto Settembre Ottobre Novembre Dicembre',
+	'Job title' => 'titolo di lavoro',
+	'Keyboard shortcuts' => 'Scorciatoie da tastiera',
+	'Keywords (comma-separated)' => 'Parole chiave (separate da virgola)',
 	'lang folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella delle lingue non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
-	'conf folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella di configurazione non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
-	'Folder already exists' => 'La cartella esiste gi',
-	'The MIT License' => 'La licenza MIT',
-	'The page you requested could not be found.' => 'La pagina richiesta non pu essere trovata.',
-	'Password does not match.' => 'La password non corrisponde.',
-	'The following app has been installed:' => 'La seguente applicazione  stata installata:',
-	'Your password must be at least 6 characters.' => 'La tua password dev\'essere di almeno 6 caratteri.',
-	'Your password doesn\'t match.' => 'La tua password non corrisponde.',
-	'PHP version must be 5.3+' => 'La versione di PHP deve essere 5.3+',
+	'Language' => 'Lingua',
+	'Language added.' => 'Lingua aggiunta.',
+	'Language code' => 'Codice lingua',
+	'Language deleted.' => 'Lingua eliminata.',
+	'Language settings' => 'Impostazioni lingua',
+	'Language updated.' => 'Lingua aggiornata.',
+	'Languages' => 'Lingue',
+	'Last changed' => 'Ultimo cambiato',
+	'Last modified' => 'Ultimo modificato',
+	'Last Modified' => 'Ultimo Modificato',
+	'Last name' => 'Cognome',
+	'Latest Posts' => 'Ultimi Post',
 	'Layout' => 'Layout',
 	'Layout added.' => 'Layout aggiunto.',
-	'Page layout' => 'Layout della pagina',
-	'Post page layout' => 'Layout pagina post',
-	'Default layout updated.' => 'Layout predefinito aggiornato.',
 	'Layout saved.' => 'Layout salvato.',
 	'Layouts' => 'Layouts',
+	'layouts folder is not writeable. Please run:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt>' => 'La cartella dei layout non  scrivibile. Per favore esegui:</p><p><tt>chmod -R 775 cache conf css files lang layouts</tt> ',
 	'License' => 'Licenza',
+	'Light' => 'Chiaro',
 	'Lightbox' => 'Lightbox',
+	'Limit post previews (# of chars)' => 'Limita anteprima post (N caratteri)',
 	'Limit to source file' => 'Limitare al file di origine',
-	'Language' => 'Lingua',
-	'Language updated.' => 'Lingua aggiornata.',
-	'Language added.' => 'Lingua aggiunta.',
-	'Language deleted.' => 'Lingua eliminata.',
-	'Default language updated.' => 'Lingua predefinita aggiornata.',
-	'Languages' => 'Lingue',
+	'Link' => 'Link',
+	'Link added.' => 'Link aggiunto.',
+	'Link deleted.' => 'Link eliminato.',
+	'Link or handle' => 'Link o handle',
 	'Link to a zip file or Github repository' => 'Link al file zip o al repositoru Github',
-	'File link' => 'Link del file',
-	'Invalid or expired recovery link' => 'Link di recupero non valido o scaduto',
+	'Links' => 'Collegamenti',
+	'List keyboard shortcuts' => 'Lista scorciatoie da tastiera',
+	'Local date format' => 'Formato data locale',
+	'Local time format' => 'Formato ora locale',
 	'Locale' => 'Locale',
-	'Admin login' => 'Login amministratore',
+	'Log in here' => 'Accedi qui',
+	'Log out' => 'Uscire',
+	'Login methods' => 'Metodo di login',
 	'Login required' => 'Login richiesto',
-	'Missing property name' => 'Manca il nome della propriet',
+	'Make default' => 'Rendi predefinito',
+	'Mark imported posts as published?' => 'Segna i post importati come pubblicati?',
+	'Markdown formatting' => 'Formattazione Markdown',
+	'max' => 'max',
+	'Member added.' => 'Membro aggiunto.',
+	'Member deleted.' => 'Membro eliminato.',
+	'Member role' => 'Ruolo membro',
+	'Member saved.' => 'Membro salvato.',
+	'Member Settings' => 'Impostazioni Membri',
+	'Members' => 'Membri',
+	'Members: Assign or change member roles' => 'Membri: assegna o cambia i ruoli',
+	'Members: Create or modify member accounts' => 'Membri: crea o modifica membri',
+	'Members: Create or modify member roles' => 'Membri: crea o modifica ruoli',
+	'Minutes' => 'Minuti',
+	'Minutes, zero-padded' => 'Minuti, con zero iniziale',
+	'Missing a temporary folder, check your PHP setup.' => 'Manca una cartella temporanea, controllare la configurazione PHP.',
 	'Missing parameter: class' => 'Manca il parametro: class',
 	'Missing parameter: fields' => 'Manca il parametro: fields',
 	'Missing parameter: id' => 'Manca il parametro: id',
@@ -289,276 +417,361 @@
 	'Missing parameter: options' => 'Manca il parametro: options',
 	'Missing parameter: required' => 'Manca il parametro: required',
 	'Missing parameter: type' => 'Manca il parametro: type',
-	'Missing a temporary folder, check your PHP setup.' => 'Manca una cartella temporanea, controllare la configurazione PHP.',
-	'Member' => 'Membro',
-	'Members' => 'Membri',
+	'Missing property name' => 'Manca il nome della propriet',
+	'Modify content blocks' => 'Modifica contenuto blocchi',
+	'Modify site settings' => 'Modifica impostazioni sito',
+	'Modify the admin toolbar' => 'Modifica la Barra degli Strumenti di amministrazione',
+	'Modify translations and language settings' => 'Modifica traduzioni e impostazione lingua',
+	'Modify web pages' => 'Modifica pagina web',
 	'Month in numeric form' => 'Mese in forma numerica',
 	'Month in numeric form, zero-padded' => 'Mese in forma numerica, con zero iniziale',
-	'Error Message' => 'Messaggio di Errore',
-	'Error message' => 'Messaggio di errore',
-	'Login methods' => 'Metodo di login',
-	'Minutes' => 'Minuti',
-	'Minutes, zero-padded' => 'Minuti, con zero iniziale',
-	'Edit' => 'Modifica',
-	'Editing Locked' => 'Modifica Bloccata',
-	'Edit Block' => 'Modifica Blocco',
-	'Edit file' => 'Modifica File',
-	'Edit Stylesheet' => 'Modifica Foglio di Stile',
-	'Edit Layout' => 'Modifica Layout',
-	'Editing language' => 'Modifica Lingua',
-	'Edit Page' => 'Modifica Pagina',
-	'Edit Blog Post' => 'Modifica Post del Blog',
-	'Edit Profile' => 'Modifica Profilo',
-	'Edit User' => 'Modifica Utente',
-	'Change password' => 'Modifica password',
-	'Done editing' => 'Modifica terminata',
-	'Changed on' => 'Modificata',
-	'View current' => 'Mostra attuale',
-	'Show empty fields' => 'Mostra i campi vuoti',
-	'Show versions' => 'Mostra le versioni',
-	'View profile' => 'Mostra profilo',
-	'Display title' => 'Mostra titolo',
-	'Show all fields' => 'Mostra tutti i campi',
+	'Month name' => 'Nome del mese',
+	'Month name, abbreviated' => 'Nome del mese abbreviato',
+	'Must be logged in to upload' => 'Devi accedere per caricare',
+	'Name' => 'Nome',
 	'Navigation' => 'Navigazione',
-	'No image url specified.' => 'Nessun URL immagine specificato.',
-	'No file uploaded or file too large.' => 'Nessun file caricato o file troppo grande.',
+	'new apps will automatically be added here' => 'Le nuove app saranno aggiunte automaticamenti qui',
+	'New file' => 'Nuovo file',
+	'New folder' => 'Nuova cartella',
+	'New folder name:' => 'Nome nuova cartella:',
+	'New Layout' => 'Nuovo Layout',
+	'New password' => 'Nuova password',
+	'New Post' => 'Nuovo Post',
+	'New Stylesheet' => 'Nuovo Foglio di Stile',
+	'New User' => 'Nuovo Utente',
+	'Newer posts' => 'Post pi recenti',
+	'Newer results' => 'Risultati precedenti',
+	'Newest first' => 'Prima i pi recenti',
+	'Next' => 'Successivo',
+	'No' => 'No',
+	'No audio playback capabilities' => 'Nessuna funzionalit di riproduzione audio',
+	'No custom fields defined.' => 'Nessun campo personalizzato definito.',
 	'No file specified.' => 'Nessun file specificato.',
+	'No file uploaded or file too large.' => 'Nessun file caricato o file troppo grande.',
 	'No file was uploaded.' => 'Nessun file  stato caricato.',
+	'No image url specified.' => 'Nessun URL immagine specificato.',
 	'No name specified' => 'Nessun nome specificato',
+	'No posts yet... :(' => 'Ancora nessun post...:(',
 	'No results.' => 'Nessun risultato.',
-	'No audio playback capabilities' => 'Nessuna funzionalit di riproduzione audio',
 	'No video playback capabilities' => 'Nessuna funzionalit di riproduzione video',
 	'Nobody' => 'Nessuno',
 	'None' => 'Nessuno',
-	'No' => 'No',
-	'Name' => 'Nome',
-	'Field name' => 'Nome Campo',
-	'Invalid File Name' => 'Nome Campo Non Valido',
-	'Site Name' => 'Nome Sito',
-	'Invalid folder name' => 'Nome cartella non valido',
-	'Invalid class name.' => 'Nome classe non valido.',
-	'Month name' => 'Nome del mese',
-	'Month name, abbreviated' => 'Nome del mese abbreviato',
-	'Invalid file name' => 'Nome file non valido',
-	'Invalid name' => 'Nome non valido',
-	'Username' => 'Nome utente',
-	'Could not unzip the file.' => 'Non posso decomprimere il file.',
+	'Normal strength' => 'Forza normale',
 	'Not a member?' => 'Non sei un membro?',
 	'Not found' => 'Non trovato',
-	'Note: Installing from links has been disabled because the PHP cURL extension is missing.' => 'Nota: L\'installazione dal link  stata disattivata perch manca l\'estensione PHP cURL.',
-	'Note: Pages that are not publicly visible will not be listed here.' => 'Nota: Pagine che non sono visibili pubblicamente non saranno elencate qui.',
-	'New folder' => 'Nuova cartella',
-	'New password' => 'Nuova password',
-	'New Stylesheet' => 'Nuovo Foglio di Stile',
-	'New Layout' => 'Nuovo Layout',
-	'New Post' => 'Nuovo Post',
-	'New User' => 'Nuovo Utente',
-	'New file' => 'Nuovo file',
-	'Required' => 'Obbligatorio',
-	'Dynamic Objects' => 'Oggetti Dinamici',
+	'Note added.' => 'Nota aggiunta.',
+	'Note deleted.' => 'Nota eliminata.',
+	'Note: Installing from links has been disabled because the PHP cURL extension is missing.' => 'Nota: L&apos;installazione dal link  stata disattivata perch manca l&apos;estensione PHP cURL.',
+	'Note: Pages that are not publicly visible will not be listed here.' => 'Nota: le pagine non visibili pubblicamente non sono elencate qui.',
+	'Notes' => 'Note',
+	'Off' => 'Spento',
+	'official blog' => 'Blog ufficiale',
+	'Older posts' => 'Post pi vecchi',
+	'Older results' => 'Risultati successivi',
+	'Oldest first' => 'Prima i pi vecchi',
+	'One or more server requirements failed' => 'Uno o pi requisiti del server non soddisfatti',
+	'Open link in new tab' => 'Apri link in uan nuova scheda',
 	'OpenID' => 'OpenID',
-	'Extra Options' => 'Opzioni Extra',
-	'Auto-post options' => 'Opzioni auto-post',
-	'Hours in 12-hour time' => 'Ore in formato 12-ore',
-	'Hours in 12-hour time, zero-padded' => 'Ore in formato 12-ore, ccon zero iniziale',
-	'Hours in 24-hour time' => 'Ore in formato 24-ore',
-	'Hours in 24-hour time, zero-padded' => 'Ore in formato 24-ore, con zero iniziale',
+	'optional' => 'opzionale',
+	'or' => 'o',
+	'Original text' => 'Testo originale',
+	'Other pages' => 'Altre pagine',
+	'Other versions' => 'Altre versioni',
+	'Page' => 'Pagina',
 	'Page created.' => 'Pagina creata.',
 	'Page deleted.' => 'Pagina eliminata.',
+	'Page ID' => 'ID Ppagina',
+	'Page layout' => 'Layout della pagina',
 	'Page not found' => 'Pagina non trovata',
 	'Page saved.' => 'Pagina salvata.',
-	'Keywords (comma-separated)' => 'Parole chiave (separate da virgola)',
+	'Page title' => 'Titolo pagina',
+	'pages' => 'pagine',
+	'Paragraph text' => 'Testo paragrafo',
 	'Password' => 'Password',
+	'Password does not match.' => 'La password non corrisponde.',
+	'Password recovery' => 'Recupero password',
 	'Password updated' => 'Password aggiornata',
-	'Admin Password' => 'Password amministratore',
-	'Weak password' => 'Password debole',
-	'Forgot your password?' => 'Password dimenticata?',
-	'Strong password' => 'Password forte',
-	'Very strong password' => 'Password molto forte',
-	'Please log in to continue.' => 'Per favore, accedi per continuare.',
-	'Please upload a zip file.' => 'Per favore, carica un file zip.',
+	'paused' => 'in pausa',
+	'Period' => 'Periodo',
+	'Permanent (best for SEO)' => 'Permanente (migliore per SEO)',
+	'Permissions' => 'Permessi',
+	'Persona' => 'Persona',
+	'Personal bio' => 'Dati Biografici',
+	'Phone' => 'Telefono',
+	'Phone number' => 'N. Telefono',
+	'Photo' => 'Foto',
+	'Photos by' => 'Foto da',
+	'PHP PDO extension is missing.' => 'Estensione PHP PDO mancante',
+	'PHP version must be 5.3+' => 'La versione di PHP deve essere 5.3+',
+	'Please add these lines to .htaccess file in order to keep old links working' => 'Aggiungi queste linee al file .htaccess per rendere funzionanti i vecchi collegamenti',
+	'Please choose a post format.' => 'Scegli un formato per il post.',
+	'Please choose a {{field->name|cli\\Filter::spaces}}.' => 'Please choose a {{field->name|cli\\Filter::spaces}}.',
 	'Please confirm your email address' => 'Per favore, conferma il tuo indirizzo email',
 	'Please correct the problem and try again.' => 'Per favore, correggi i problemi e riprova.',
-	'Please enter the language code.' => 'Per favore, inserisci il codice della lingua.',
-	'Please enter the name of the language.' => 'Per favore, inserisci il nome della lingua.',
-	'Please enter the character set.' => 'Per favore, inserisci il set di caratteri.',
 	'Please enter a link or upload a file.' => 'Per favore, inserisci un link o carica un file.',
-	'Please enter a name for your stylesheet.' => 'Per favore, inserisci un nome per il tuo foglio di stile.',
 	'Please enter a name for your layout.' => 'Per favore, inserisci un nome per il tuo layout.',
-	'Please enter a {{field}}.' => 'Per favore, inserisci un {{field}}.',
-	'Please try again later.' => 'Per favore, riprova pi tardi.',
+	'Please enter a name for your stylesheet.' => 'Per favore, inserisci un nome per il tuo foglio di stile.',
+	'Please enter a {{field->name|cli\\Filter::spaces}}.' => 'Please enter a {{field->name|cli\\Filter::spaces}}.',
+	'Please enter the character set.' => 'Per favore, inserisci il set di caratteri.',
+	'Please enter the language code.' => 'Per favore, inserisci il codice della lingua.',
+	'Please enter the name of the language.' => 'Per favore, inserisci il nome della lingua.',
+	'Please log in to continue.' => 'Per favore, accedi per continuare.',
 	'Please select a file to upload.' => 'Per favore, scegli un file da caricare.',
-	'Auto-saved data found for this form.' => 'Per questo form sono presenti dati auto-salvati.',
-	'Invalid Path' => 'Percorso Non Valido',
-	'Period' => 'Periodo',
-	'Permanent (best for SEO)' => 'Permanente (migliore per SEO)',
+	'Please try again later.' => 'Per favore, riprova pi tardi.',
+	'Please upload a zip file.' => 'Per favore, carica un file zip.',
+	'Please upload fewer files at a time.' => 'Carica meno file alla volta.',
+	'Please upload one of the following file types' => 'Carica solo file di questi tipi',
+	'Please wait, this may take a minute...' => 'Attendi per favore, potrebbe volerci un minuto...',
 	'Port' => 'Porta',
-	'Invalid location' => 'Posizione non valida',
-	'Blog Posts' => 'Post del blog',
-	'Newer posts' => 'Post pi recenti',
-	'Older posts' => 'Post pi vecchi',
-	'Table prefix:' => 'Prefisso tabelle:',
-	'Newest first' => 'Prima i pi recenti',
-	'Oldest first' => 'Prima i pi vecchi',
-	'Private' => 'Privato',
+	'Post Footer Settings' => 'Impostazioni post Footer',
+	'Post not found' => 'Post non trovato',
+	'Post page layout' => 'Layout pagina post',
+	'Post to the blog' => 'Inserisci Post nel Blog',
+	'posts' => 'posts',
+	'Posts by %s' => 'Post di %S',
+	'Powered by' => 'Powered by',
+	'Preview' => 'Anteprima',
+	'Preview must be a number of characters.' => 'L&apos;anteprima deve essere un numero di caratteri.',
+	'Preview with layout' => 'Anteprima con layout',
+	'Profile photo' => 'Foto profilo',
 	'Profile Updated' => 'Profilo Aggiornato',
 	'Properties' => 'Propriet',
 	'Properties saved.' => 'Propriet salvate.',
-	'Next' => 'Prossimo',
-	'Published' => 'Pubblicato',
 	'Public' => 'Pubblico',
-	'Clear' => 'Pulisci',
-	'Social buttons' => 'Pulsanti Social',
-	'Which columns should be imported?' => 'Quali colonne devono essere importate?',
-	'This page forwards visitors to the following link' => 'Questa pagina manda i visitatori al seguente link',
-	'This is a preview of how your layout will look.' => 'Questa  un\'anteprima di come apparir il tuo layout.',
-	'This object is already being edited by' => 'Questo oggetto  gi in fase di modifica da',
-	'This installer will guide you through the process of installing and configuring your new website.' => 'Questo programma di installazione ti guider attraverso il processo di installazione e configurazione del tuo nuovo sito Web.',
-	'Password recovery' => 'Recupero password',
-	'Sign Up' => 'Registrati',
-	'Sign up here' => 'Registrati qui',
-	'Reset Password' => 'Reimpostare la Password',
-	'Make default' => 'Rendi predefinito',
-	'Requirements' => 'Requisiti',
+	'Published' => 'Pubblicato',
+	'Read more' => 'Leggi altro',
 	'Rebuild index' => 'Ricostruisci indice',
 	'Rebuilding index' => 'Ricostruzione indice',
-	'Date formatting reference' => 'Riferimento formattazione data',
-	'Drop down' => 'Rilascia',
-	'Drop down options (one per line)' => 'Rilascia opzioni (una per riga)',
+	'Register your website as an Adobe Creative SDK app here to generate your credentials.' => 'Registra il tuo sito come app Adobe Creative SDK qui per generare le tue credenziali.',
+	'Register your website here to generate your Facebook credentials.' => 'Registra il tuo sito qui per generare le tue credenziali Facebook.',
+	'Register your website here to generate your Twitter credentials.' => 'Registra il tuo sito qui per generare le tue credenziali Twetter.',
 	'Rename' => 'Rinomina',
+	'Rename:' => 'Rinomina:',
+	'Required' => 'Obbligatorio',
+	'Required and must be unique.' => 'Campo rischiesto e deve essere unico.',
+	'Requirements' => 'Requisiti',
+	'Reset Password' => 'Reimpostare la Password',
 	'Restore' => 'Ripristino',
-	'Try Again' => 'Riprova',
-	'Newer results' => 'Risultati pi recenti',
-	'Older results' => 'Risultati pi vecchi',
+	'Restore content from past versions' => 'Recupera contenuto dalle versioni precedenti',
+	'Role' => 'Ruolo',
+	'Role added.' => 'Ruolo aggiunto',
+	'Role deleted.' => 'Ruolo eliminato.',
+	'Role name' => 'Nome ruolo',
+	'Role saved.' => 'Ruolo salvato.',
+	'Roles' => 'Ruoli',
 	'Save' => 'Salva',
+	'Save &amp; Keep Editing' => 'Salva e rimani in modifica',
 	'Save Block' => 'Salva Blocco',
+	'Save Blog Post' => 'Salva Post',
 	'Save File' => 'Salva File',
-	'Save Stylesheet' => 'Salva Foglio di Stile',
-	'Save Settings' => 'Salva Impostazioni',
 	'Save Layout' => 'Salva Layout',
+	'Save Member' => 'Salva Membro',
 	'Save Page' => 'Salva Pagina',
-	'Save Blog Post' => 'Salva Post',
-	'Save User' => 'Salva Utente',
-	'Save &amp; Keep Editing' => 'Salva e rimani in modifica',
-	'Save {{appname|ucfirst}}' => 'Salva {{appname|ucfirst}}',
-	'Saving Stylesheet Failed' => 'Salvataggio Foglio di Stile Fallito',
-	'Saving Layout Failed' => 'Salvataggio Layout Fallito',
-	'Failed to save...' => 'Salvataggio fallito...',
-	'File save failed' => 'Salvataggio file fallito',
+	'Save Role' => 'Salva Ruolo',
+	'Save Settings' => 'Salva Impostazioni',
+	'Save Stylesheet' => 'Salva Foglio di Stile',
+	'Save {{appname|cli\\Filter::title}}' => 'Save {{appname|cli\\Filter::title}}',
 	'Saved!' => 'Salvato!',
-	'Choose an importer' => 'Scegli un importatore',
-	'Choose a new password' => 'Scegli una nuova password',
-	'Choose a password' => 'Scegli una password',
-	'Choose a password for your new account.' => 'Scegli una password per il tuo nuovo account.',
-	'Failed to write the file to disk.' => 'Scrittura del file su disco fallita.',
-	'Failed to write to conf/config.php' => 'Scrittura su conf/config.php fallita.',
-	'Dark' => 'Scuro',
-	'If you have any trouble during the install process, please visit the Elefant project at the following link to report it, and we\'ll do our best to help.' => 'Se hai problemi durante il processo di installazione, riportalo al progetto Elefant al link seguente e noi faremo del nostro meglio per aiutarti.',
+	'Saving Layout Failed' => 'Salvataggio Layout Fallito',
+	'Saving Stylesheet Failed' => 'Salvataggio Foglio di Stile Fallito',
+	'Saving...' => 'Sto salvando...',
+	'Scheduled' => 'Pianificato',
+	'Search' => 'Ricerca',
 	'Seconds' => 'Secondi',
 	'Seconds with milliseconds' => 'Secondi con millisecondi',
 	'Seconds, zero-padded' => 'Secondi, con zero iniziale',
 	'Seconds, zero-padded, with milliseconds' => 'Secondi, con zero iniziale e millisecondi',
-	'Mark imported posts as published?' => 'Segna i post importati come pubblicati?',
-	'Are you sure you want to cancel and lose any changes?' => 'Sei sicuro di annullare perdendo le modifiche?',
-	'Are you sure you want to cancel?' => 'Sei sicuro di voler annullare?',
-	'Are you sure you want to delete the current block?' => 'Sei sicuro di voler eliminare il blocco corrente?',
-	'Are you sure you want to delete the default block? This will remove it from all pages using this block' => 'Sei sicuro di voler eliminare il blocco predefinito? Questo verr rimosso da tutte le pagine in cui  utilizzato.',
-	'Are you sure you want to delete this {{appname}}?' => 'Sei sicuro di voler eliminare l\'applicazione {{appname}}?',
-	'Are you sure you want to delete the current page?' => 'Sei sicuro di voler eliminare la pagina corrente?',
-	'Are you sure you want to permanently delete this layout file?' => 'Sei sicuro di voler eliminare permanentemente questo layout?',
-	'Are you sure you want to permanently delete this stylesheet file?' => 'Sei sicuro di voler eliminare permanentemente questo stile?',
-	'Are you sure you want to delete this language?' => 'Sei sicuro di voler eliminare questa lingua?',
-	'Are you sure you want to delete this page?' => 'Sei sicuro di voler eliminare questa pagina?',
-	'Are you sure you want to delete this block?' => 'Sei sicuro di voler eliminare questo blocco?',
-	'Are you sure you want to delete this field?' => 'Sei sicuro di voler eliminare questo campo?',
-	'Are you sure you want to delete this post?' => 'Sei sicuro di voler eliminare questo post?',
-	'Are you sure you want to delete this user?' => 'Sei sicuro di voler eliminare questo utente?',
-	'It looks like you\'re trying to install Elefant into a sub-folder.' => 'Sembra che tu stia installando Elefant in una sottocartella.',
+	'Select' => 'Seleziona',
+	'selected means allow everything by default' => 'selezionato significa tutto permesso per default',
+	'Send verification' => 'Invia verifica',
 	'Server' => 'Server',
-	'Character set' => 'Set di caratteri',
-	'Browse' => 'Sfoglia',
-	'Browse...' => 'Sfoglia...',
-	'Website' => 'Sito web',
-	'I Agree' => 'Sono d\'accordo',
-	'Off' => 'Spento',
-	'Saving...' => 'Sto salvando...',
-	'Tools' => 'Strumenti',
-	'Yes' => 'S',
-	'Database tables created and settings saved.' => 'Tabelle del database create e impostazioni salvate.',
+	'Server requirements have been verified.' => 'I requisiti del server sono stati verificati.',
+	'Settings' => 'Impostazioni',
+	'Settings saved and admin user created.' => 'Impostazioni salvate e utente amministratore creato.',
+	'Settings saved.' => 'Impostazioni salvate.',
+	'Short date format' => 'Formato data corto',
+	'Show all fields' => 'Mostra tutti i campi',
+	'Show empty fields' => 'Mostra i campi vuoti',
+	'Show related posts' => 'Mostra i post collegati',
+	'Show versions' => 'Mostra le versioni',
+	'Sign in' => 'Accedi',
+	'Sign in with' => 'Accedi con',
+	'Sign Up' => 'Registrati',
+	'Sign up here' => 'Registrati qui',
+	'Single-line text' => 'Testo a linea singola',
+	'Site Name' => 'Nome Sito',
+	'Site Settings' => 'Impostazioni Sito',
+	'Site tree' => 'Albero Sito',
+	'Social' => 'Social',
+	'Social buttons' => 'Pulsanti Social',
+	'Source' => 'Fonte',
+	'SQLite users can simply click \'Connect & Create Schema\'. MySQL users please select your driver and enter your server details to continue.' => 'Gli utenti SQLite possono semplicemente fare clic su &apos;Connetti & Crea Schema&apos;. Gli utenti MySQL devono selezionare il driver e inserire i dati del server per continuare.',
+	'State/province' => 'Stato/Provincia',
+	'Status' => 'Stato',
+	'String not found.' => 'Stringa non trovata',
+	'Strong password' => 'Password forte',
+	'Stylesheet' => 'Foglio di Stile',
+	'Stylesheet added.' => 'Foglio di Stile aggiunto.',
+	'Stylesheet saved.' => 'Foglio di Stile salvato.',
+	'Stylesheets' => 'Fogli di Stile',
+	'Submit' => 'Invia',
+	'Sun Mon Tue Wed Thu Fri Sat' => 'Dom Lun Mar Mer Gio Ven Sab',
+	'Sunday Monday Tuesday Wednesday Thursday Friday Saturday' => 'Domenica Luned Marted Mercoled Gioved Venerd Sabato',
+	'Table prefix:' => 'Prefisso tabelle:',
+	'Tagged: %s' => 'Contrassegnato: %s',
 	'Tags' => 'Tags',
 	'Tags (comma-separated)' => 'Tags (separati da virgole)',
 	'Temporary' => 'Temporaneo',
-	'Finish importing' => 'Termina importazione',
-	'Finished' => 'Terminato',
-	'Single-line text' => 'Testo a linea singola',
-	'Original text' => 'Testo originale',
-	'Paragraph text' => 'Testo paragrafo',
-	'Type' => 'Tipo',
-	'User type' => 'Tipo utente',
+	'Testing Requirements' => 'Verifica Requisiti',
+	'Text' => 'Testo',
+	'Thanks for using Elefant!' => 'Grazie per utilizzare Elefant!',
+	'The file name contains invalid characters.' => 'Il nome del file contiene caratteri non validi.',
+	'The file was only partially uploaded.' => 'Il file  stato caricato solo parzialmente.',
+	'The following app has been installed:' => 'La seguente applicazione  stata installata:',
+	'The following file is too large to upload' => 'File troppo grande per essere caricato',
+	'The following theme has been installed:' => 'Il seguente tema  stato installato:',
+	'The installation process has been completed. Here are some links you may want to bookmark:' => 'Il processo di installazione  stato completato. Ecco alcuni link che potresti voler annotare.',
+	'The language code entered already exists.' => 'Il codice lingua inserito esiste gi.',
+	'The layout you entered doesn\'t exist.' => 'Il layout inserito non esiste.',
+	'The link appears to be invalid.' => 'Il link sembra essere non valido.',
+	'The MIT License' => 'La licenza MIT',
+	'The page you requested could not be found.' => 'La pagina richiesta non pu essere trovata.',
+	'There is already an account that belongs to this email address.' => 'Esiste gi un account con questo indirizzo email.',
+	'This installer will guide you through the process of installing and configuring your new website.' => 'Questo programma di installazione ti guider attraverso il processo di installazione e configurazione del tuo nuovo sito Web.',
+	'This is a preview of how your layout will look.' => 'Questa  un&apos;anteprima di come apparir il tuo layout.',
+	'This object is already being edited by' => 'Questo oggetto  gi in fase di modifica da',
+	'This page forwards members of the %s group to the following link' => 'Questa pagina inoltra i membri del gruppo %s al link seguente',
+	'This page forwards visitors to the following link' => 'Questa pagina manda i visitatori al seguente link',
+	'Thumbnail' => 'Miniatura',
+	'Time zone offset' => 'Fuso orario (spostamento)',
 	'Title' => 'Titolo',
-	'Alternate window title' => 'Titolo alternativo finestra',
-	'Alternate menu title' => 'Titolo alternativo menu',
-	'Block title' => 'Titolo blocco.',
-	'Blog title' => 'Titolo blog',
-	'Page title' => 'Titolo pagina',
-	'Back to posts' => 'Torna al post.',
-	'Translated' => 'Tradotto',
-	'Drag pages to the site tree to include them in your navigation.' => 'Trascina le pagine nell\'albero del sito per includerle nella navigazione.',
-	'Drag pages here to remove them from the tree.' => 'Trascina le pagine qui per rimuoverle dall\'albero.',
+	'Toggle preview mode' => 'Scambi modo anteprima',
+	'Toggle tools menu' => 'Scambia menu strumenti',
 	'Too many login attempts' => 'Troppi tentativi di accesso',
 	'Too weak' => 'Troppo debole',
-	'All Pages' => 'Tutte le pagine',
-	'All tags' => 'Tutti i TAG',
+	'Toolbar Editor' => 'Editore Barra degli Strumenti',
+	'Toolbar Menu' => 'Menu Barra degli Strumenti',
+	'Tools' => 'Strumenti',
+	'Translated' => 'Tradotto',
+	'True' => 'Vero',
+	'Try Again' => 'Riprova',
 	'Twitter' => 'Twitter',
-	'Latest Posts' => 'Ultimi Post',
-	'Last Modified' => 'Ultimo Modificato',
-	'Last changed' => 'Ultimo cambiato',
-	'Last modified' => 'Ultimo modificato',
-	'A PHP extension stopped the file upload.' => 'Una estensione PHP ha bloccato il caricamento del file.',
-	'One or more server requirements failed' => 'Uno o pi requisiti del server non soddisfatti',
-	'Log out' => 'Uscire',
-	'User added.' => 'Utente aggiunto.',
-	'User deleted.' => 'Utente eliminato',
-	'User saved.' => 'Utente salvato.',
-	'Users' => 'Utenti',
-	'Go' => 'Vai',
-	'Verify Password' => 'Verifica Password',
-	'Testing Requirements' => 'Verifica Requisiti',
+	'Twitter app settings' => 'Impostazioni app Twitter',
+	'Twitter ID' => 'ID Twitter',
+	'Type' => 'Tipo',
+	'Unable to create folder' => 'Impossibile creare la cartella',
+	'Unable to delete' => 'Impossibile eliminare',
+	'Unable to Delete File' => 'Impossibile eliminare il file.',
+	'Unable to delete folder' => 'Impossibile cancellare la cartella',
+	'Unable to delete folders' => 'Impossibile eliminare le cartelle',
+	'Unable to fetch configuration file.' => 'Impossibile recuperare il file di configurazione.',
+	'Unable to fetch file' => 'Impossibile recuperare il file',
+	'Unable to load the dynamic object list. Please try again in a few seconds.' => 'Impossibile caricare la lista degli oggetti dinamici. Riprova tra qualche secondo.',
+	'Unable to load the member list. Please try again in a few seconds.' => 'Impossibile caricare la lista dei membri. Riprova tra pochi secondi.',
+	'Unable to move' => 'Impossibile spostare',
+	'Unable to parse the uploaded file.' => 'Impossibile analizzare il file caricato.',
+	'Unable to read folder' => 'Impossibile leggere la cartella',
+	'Unable to rename' => 'Impossibile rinominare',
+	'Unable to save changes.' => 'Impossibile salvare le modifiche.',
+	'Unable to save changes. Check your folder permissions and try again.' => 'Impossibile salvare le modifiche. Controllare le autorizzazioni della cartella e riprova.',
+	'Unable to save changes. Check your permissions and try again.' => 'Impossibile salvare le modifiche. Controlla i tuoi permessi e riprova.',
+	'Unable to save the file' => 'Impossibile salvare il file',
+	'Unable to save the file.' => 'Impossibile salvare il file.',
+	'Unable to save unzipped folder.' => 'Impossibile salvare la cartella decompressa',
+	'Unable to verify folder' => 'Impossibile verificare la cartella ',
+	'Unable to write to apps folder.' => 'Impossibile scrivere nella cartella dell&apos;applicazione.',
+	'Unable to write to cache folder.' => 'Impossibile scrivere nella cartella della cache.',
+	'Unable to write to layouts folder.' => 'Impossibile scrivere nella cartella dei layout.',
+	'Unable to write to the file. Please check your folder permissions and try again.' => 'Impossibile scrivere nel file. Controlla le autorizzazioni della cartella e riprova.',
+	'Unknown error' => 'Errore sconosciuto',
+	'Unlink' => 'Scollega',
+	'Unzip' => 'Decomprimi',
+	'Update existing content' => 'Aggiorna contenuto esistente',
+	'Update Profile' => 'Aggiorna Profilo',
+	'Updated image not found.' => 'Immagine aggiornata non trovata.',
+	'Upgrade completed' => 'Aggiornamento completato',
+	'Upgrading App' => 'Aggiornamento app...',
+	'Upgrading Elefant' => 'Aggiorna Elefant',
+	'Upgrading Files App' => 'Aggiornamento Applicazione File',
+	'Upgrading User App' => 'Aggiornamento Applicazione Utente',
+	'Upload' => 'Carica',
+	'Upload a zip file' => 'Carica un file zip',
+	'Upload and manage files' => 'Carica e gestisci i file',
+	'Upload the CSV file' => 'Carica il file CSV',
+	'Uploaded CSV file not found.' => 'File CSV caricato non trovato.',
+	'Uploading...' => 'Caricamento...',
+	'URL' => 'URL',
+	'Username' => 'Nome utente',
+	'VCF file' => 'File VCF (vCard)',
+	'VCF importer' => 'Importa VCF (vCard)',
 	'Verification failed: Invalid configuration file.' => 'Verifica fallita: file di configurazione non valido.',
+	'Verification failed: Invalid folder name.' => 'Verifica fallita: nome cartella non valido.',
+	'Verification failed: Invalid type.' => 'Verifica fallita: tipo non valido.',
 	'Verification failed: No configuration file found.' => 'Verifica fallita: nessun file di configurazione trovato.',
+	'Verification failed: No folder specified' => 'Verifica fallita: nessuna cartella specificata.',
 	'Verification failed: No name specified' => 'Verifica fallita: nessun nome specificato.',
 	'Verification failed: No type specified.' => 'Verifica fallita: nessun tipo specificato.',
-	'Verification failed: No folder specified' => 'Verifica fallita: nessuna cartella specificata.',
 	'Verification failed: No version specified.' => 'Verifica fallita: nessuna versione specificata.',
-	'Verification failed: Invalid folder name.' => 'Verifica fallita: nome cartella non valido.',
 	'Verification failed: Repository or website required.' => 'Verifica fallita: sito o repository richiesto.',
-	'Verification failed: Invalid type.' => 'Verifica fallita: tipo non valido.',
-	'Check that your permissions are correct and try again.' => 'Verifica i tuoi permessi e riprova.',
-	'Check your host for instructions on setting up sub-domains in production.' => 'Verifica il tuo host per le istruzioni di configurazione di sub-dominio in produzione.',
+	'Verification failed: This install requires Elefant %s or newer.' => 'Verifica fallita: questa installazione richiede Elefant %s o successivo',
+	'Verification failed: This install requires PHP %s or newer.' => 'Verifica fallita: questa installazione richiede PHP %s o successivo',
 	'Verify new password' => 'Verifica nuova password',
+	'Verify Password' => 'Verifica Password',
 	'Verify password' => 'Verifica password',
-	'Invalid Verifier' => 'Verificatore Non Valido',
-	'True' => 'Vero',
-	'Current version' => 'Versione corrente',
 	'Versions' => 'Versioni',
 	'Versions of' => 'Versioni di',
-	'Embedded Video (MP4)' => 'Video Incorporato (MP4)',
+	'Very strong password' => 'Password molto forte',
+	'View current (deleted)' => 'Vedi corrente (eliminato)',
+	'View members-only content' => 'Visualizza contenuti per soli membri',
+	'View private content' => 'Visualizza contenuti privati',
+	'View profile' => 'Mostra profilo',
+	'Visit Website' => 'Visita sito web',
 	'Visit your new website' => 'Visita il tuo nuovo sito web',
 	'Visit your website.' => 'Visita il tuo sito web',
-	'click to upgrade' => 'clicca per aggiornare',
-	'click to install' => 'clicca per installare',
-	'comments' => 'commenti',
-	'by' => 'da',
-	'max' => 'max',
-	'or' => 'o',
-	'optional' => 'opzionale',
-	'choose' => 'scegli',
-	'{{field|ucfirst}}' => '{{field|ucfirst}}',
-	'An Error Occurred' => ' avvenuto un Errore',
-	'An unknown error occurred.' => ' avvenuto un Errore sconosciuto',
-	'A theme by this name is already installed.' => ' gi installato un tema con questo nome.',
-	'An app by this name is already installed.' => ' installata un\'app con questo nome.',
-	'Admin access required.' => ' richiesto l\'accesso amministrativo ',
-	'An email has been sent with a link to reset your password.' => ' stata inviata una email con un link per annullare la password.',
-	'is required' => ' richiesto'
+	'Weak password' => 'Password debole',
+	'Web Pages' => 'Pagine',
+	'Website' => 'Sito web',
+	'Welcome to the Elefant CMS installer.' => 'Benvenuto nell&apos;installatore di Elefant CMS.',
+	'Which columns should be imported?' => 'Quali colonne devono essere importate?',
+	'Wordpress export file' => 'File di esportazione di Wordpress',
+	'Wordpress importer' => 'Importatore Wordpress',
+	'WYSIWYG editor' => 'Editor WYSIWYG',
+	'Year in full' => 'Anno completo',
+	'Year in two digit form' => 'Anno a due cifre',
+	'Yes' => 'S',
+	'You do not have enough access privileges for this operation.' => 'Non hai le prerogative per questa operazione.',
+	'You might also like:' => 'Ti potrebbe interessare anche:',
+	'You must enter a block title.' => 'Devi inserire un titolo di blocco.',
+	'You must enter a blog title.' => 'Devi inserire un titolo di blog.',
+	'You must enter a field name.' => 'Devi inserire un nome campo.',
+	'You must enter a name.' => 'Devi inserire un nome.',
+	'You must enter a page title.' => 'Devi inserire un titolo di pagina.',
+	'You must enter a password.' => 'Devi inserire una password.',
+	'You must enter a title.' => 'Devi inserire un titolo.',
+	'You must enter a valid email, or email not found.' => 'Devi inserire una email valida e gi registrata.',
+	'You must enter a valid email, or your email may already be registered.' => 'Devi inserire una email valida e non ancora registrata.',
+	'You must enter an author.' => 'Devi inserire un autore.',
+	'You must enter an email address.' => 'Devi inserire un indirizzo email.',
+	'You must enter body content.' => 'Devi inserire un contenuto per il corpo.',
+	'You must enter options for a select field.' => 'Devi inserire le opzioni per il campo di selezione.',
+	'You must enter your name.' => 'Devi inserire il tuo nome.',
+	'You must select a date/time.' => 'Devi selezionare una data/ora.',
+	'You\'re done!' => 'Fatto!',
+	'Your account has been locked temporarily as a security precaution. Please try again in %d minutes.' => 'Il tuo account  stato temporaneamente bloccato per precauzione. Riprova tra %d minuti.',
+	'Your browser does not support drag and drop file uploads.' => 'Il tuo browser non supporta il drag and drop dei file da caricare.',
+	'Your ID must be a lowercase alphanumeric value and can\'t already exist.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve esistere gi.',
+	'Your ID must be a lowercase alphanumeric value and can\'t already exist. It must also not share the name of an app.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve esistere gi. Non deve nemmeno condividere il nome di una applicazione.',
+	'Your ID must be a lowercase alphanumeric value.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo.',
+	'Your ID must be a lowercase alphanumeric value. It must also not share the name of an app.' => 'Il tuo ID deve essere un valore alfanumerico in minuscolo e non deve condividere il nome di una applicazione.',
+	'Your name' => 'Il tuo nome',
+	'Your Name' => 'Il tuo Nome',
+	'Your name must be alphanumeric and not a duplicate of an existing layout.' => 'Il tuo nome deve essere alfanumerico e non un duplicato di un layout esistente.',
+	'Your name must be alphanumeric and not a duplicate of an existing stylesheet.' => 'Il tuo nome deve essere alfanumerico e non un duplicato di un foglio di stile esistente.',
+	'Your password doesn\'t match.' => 'La tua password non corrisponde.',
+	'Your password must be at least 6 characters.' => 'La tua password dev&apos;essere di almeno 6 caratteri.',
+	'Your website' => 'Il tuo sito web',
+	'Zip file installation failed' => 'Installazione file zip fallita',
+	'Zip file was invalid or could not be installed.' => 'Il file zip non  valido o non pu essere installato.',
+	'Zip/postal code' => 'Codice postale',
+	'{{field->name|cli\\Filter::label}}' => '{{field->name|cli\\Filter::label}}'
 );
Files elefant-elefant_1_3_10_beta/lang/ja.php and elefant-elefant_1_3_11_rc/lang/ja.php are identical
Files elefant-elefant_1_3_10_beta/lang/languages.php and elefant-elefant_1_3_11_rc/lang/languages.php are identical
Files elefant-elefant_1_3_10_beta/lang/new_lang.php and elefant-elefant_1_3_11_rc/lang/new_lang.php are identical
Files elefant-elefant_1_3_10_beta/lang/nl.php and elefant-elefant_1_3_11_rc/lang/nl.php are identical
Files elefant-elefant_1_3_10_beta/lang/pt_br.php and elefant-elefant_1_3_11_rc/lang/pt_br.php are identical
Files elefant-elefant_1_3_10_beta/lang/ru.php and elefant-elefant_1_3_11_rc/lang/ru.php are identical
Files elefant-elefant_1_3_10_beta/lang/sl_si.php and elefant-elefant_1_3_11_rc/lang/sl_si.php are identical
Files elefant-elefant_1_3_10_beta/lang/uk.php and elefant-elefant_1_3_11_rc/lang/uk.php are identical
Files elefant-elefant_1_3_10_beta/lang/zh.php and elefant-elefant_1_3_11_rc/lang/zh.php are identical
Files elefant-elefant_1_3_10_beta/layouts/admin.html and elefant-elefant_1_3_11_rc/layouts/admin.html are identical
diff -urBNs elefant-elefant_1_3_10_beta/layouts/default.html elefant-elefant_1_3_11_rc/layouts/default.html
--- elefant-elefant_1_3_10_beta/layouts/default.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/layouts/default.html	2015-09-05 21:13:59.000000000 -0500
@@ -59,5 +59,6 @@
 	<div class="clear"></div>
 </div>
 {{ tail|none }}
+{! admin/util/analytics !}
 </body>
 </html>
diff -urBNs elefant-elefant_1_3_10_beta/layouts/single column.html elefant-elefant_1_3_11_rc/layouts/single column.html
--- elefant-elefant_1_3_10_beta/layouts/single column.html	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/layouts/single column.html	2015-09-05 21:13:59.000000000 -0500
@@ -45,5 +45,6 @@
 	<div class="clear"></div>
 </div>
 {{ tail|none }}
+{! admin/util/analytics !}
 </body>
 </html>
Files elefant-elefant_1_3_10_beta/lib/Acl.php and elefant-elefant_1_3_11_rc/lib/Acl.php are identical
Files elefant-elefant_1_3_10_beta/lib/AppTest.php and elefant-elefant_1_3_11_rc/lib/AppTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/Appconf.php elefant-elefant_1_3_11_rc/lib/Appconf.php
--- elefant-elefant_1_3_10_beta/lib/Appconf.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Appconf.php	2015-09-05 21:13:59.000000000 -0500
@@ -186,4 +186,37 @@
 		unset ($merged['Admin']);
 		return $merged;
 	}
+	
+	/**
+	 * Fetch all published hook handlers from a specific config file in
+	 * across all apps. This may be a specific file, or a specific
+	 * option list within the file.
+	 *
+	 * Usage:
+	 *
+	 *     $payment_options = Appconf::options ('payments');
+	 *     // array ('stripe/payment' => 'Stripe Payments')
+	 *     
+	 *     $commands = Appconf::options ('cli', 'commands');
+	 *     // array ('blog/publish-queue' => 'Publish scheduled...', ...etc...)
+	 */
+	public static function options ($basename = 'hooks', $hook = false) {
+		$files = glob ('apps/*/conf/' . $basename . '.php');
+		$options = array ();
+
+		foreach ($files as $file) {
+			$hooks = parse_ini_file ($file);
+			if ($hook !== false) {
+				if (isset ($hooks[$hook]) && is_array ($hooks[$hook])) {
+					foreach ($hooks[$hook] as $handler => $name) {
+						$options[$handler] = $name;
+					}
+				}
+			} else {
+				$options = array_merge ($options, $hooks);
+			}
+		}
+
+		return $options;
+	}
 }
diff -urBNs elefant-elefant_1_3_10_beta/lib/Autoloader.php elefant-elefant_1_3_11_rc/lib/Autoloader.php
--- elefant-elefant_1_3_10_beta/lib/Autoloader.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Autoloader.php	2015-09-05 21:13:59.000000000 -0500
@@ -80,7 +80,7 @@
 			return true;
 		}
 	}
-	if (count (spl_autoload_functions ()) > 1) {
+	if (ELEFANT_ENV === 'test' || count (spl_autoload_functions ()) > 1) {
 		// Leave it to another autoloader
 		return false;
 	}
Files elefant-elefant_1_3_10_beta/lib/CRUD.php and elefant-elefant_1_3_11_rc/lib/CRUD.php are identical
Files elefant-elefant_1_3_10_beta/lib/Cache.php and elefant-elefant_1_3_11_rc/lib/Cache.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/Controller.php elefant-elefant_1_3_11_rc/lib/Controller.php
--- elefant-elefant_1_3_10_beta/lib/Controller.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Controller.php	2015-09-05 21:13:59.000000000 -0500
@@ -243,6 +243,12 @@
 	 * The HTTP status code that's been set.
 	 */
 	public $status_code = false;
+	
+	/**
+	 * If the page is an alias, this will contain the original value of
+	 * `$_SERVER['REQUEST_URI']`. Otherwise, it will be false.
+	 */
+	public $alias = false;
 
 	/**
 	 * Page object.
@@ -958,6 +964,16 @@
 		}
 		return true;
 	}
+	
+	/**
+	 * Get the remote IP address from REMOTE_ADDR, or if it's set,
+	 * from HTTP_X_FORWARDED_FOR which may be set by a load balancer.
+	 */
+	public function remote_addr () {
+		return isset ($_SERVER['HTTP_X_FORWARDED_FOR'])
+			? $_SERVER['HTTP_X_FORWARDED_FOR']
+			: $_SERVER['REMOTE_ADDR'];
+	}
 
 	/**
 	 * Returns whether the current request is made over HTTPS or not.
Files elefant-elefant_1_3_10_beta/lib/DB.php and elefant-elefant_1_3_11_rc/lib/DB.php are identical
Files elefant-elefant_1_3_10_beta/lib/Debugger.php and elefant-elefant_1_3_11_rc/lib/Debugger.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/ExtendedModel.php elefant-elefant_1_3_11_rc/lib/ExtendedModel.php
--- elefant-elefant_1_3_10_beta/lib/ExtendedModel.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/ExtendedModel.php	2015-09-05 21:13:59.000000000 -0500
@@ -136,8 +136,14 @@
 	 * so we override the constructor to do so.
 	 */
 	public function __construct ($vals = false, $is_new = true) {
+		$defaults = array ();
+
 		foreach ($this->verify as $k => $v) {
 			if (isset ($v['extended'])) {
+				if (isset ($v['default'])) {
+					$defaults[$k] = $v['default'];
+					unset ($v['default']);
+				}
 				unset ($v['extended']);
 				$this->_extended_verify[$k] = $v;
 				unset ($this->verify[$k]);
@@ -152,6 +158,13 @@
 
 		parent::__construct ($vals, $is_new);
 
+		// Pre-populate extended attributes with given default values
+		if (! empty ($defaults)) {
+			foreach ($defaults as $k => $v) {
+				if (!$this->ext($k)) $this->ext ($k, $v);
+			}
+		}
+
 		// Populate extended attributes after `parent::__construct()`
 		if (isset ($extended)) {
 			foreach ($extended as $k => $v) {
@@ -194,7 +207,14 @@
 	 * Return the original data as an object, including extended fields.
 	 */
 	public function orig () {
-		return (object) array_merge ($this->data, $this->ext ());
+		$ext = $this->ext ();
+		if (is_string ($ext)) {
+			$ext = json_decode ($ext);
+		}
+		if (is_object ($ext)) {
+			$ext = (array) $ext;
+		}
+		return (object) array_merge ($this->data, $ext);
 	}
 
 	/**
diff -urBNs elefant-elefant_1_3_10_beta/lib/Form.php elefant-elefant_1_3_11_rc/lib/Form.php
--- elefant-elefant_1_3_10_beta/lib/Form.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Form.php	2015-09-05 21:13:59.000000000 -0500
@@ -369,7 +369,7 @@
 	 * since those are almost certainly abusive.
 	 */
 	public function verify_referrer () {
-		if (strpos ($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST']) === false) {
+		if (strpos ($_SERVER['HTTP_REFERER'], $_SERVER['HTTP_HOST']) === false && $_SERVER['HTTP_REFERER'] !== null) {
 			return false;
 		}
 		return true;
diff -urBNs elefant-elefant_1_3_10_beta/lib/FrontController.php elefant-elefant_1_3_11_rc/lib/FrontController.php
--- elefant-elefant_1_3_10_beta/lib/FrontController.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/FrontController.php	2015-09-05 21:13:59.000000000 -0500
@@ -67,13 +67,29 @@
 		/**
 		 * Check ELEFANT_ENV environment variable to determine which
 		 * configuration to load. Also include the Elefant version,
-		 * autoloader, and core functions, and set the default
-		 * timezone to avoid warnings in date functions.
+		 * autoloader, and core functions.
 		 */
 		define ('ELEFANT_ENV', getenv ('ELEFANT_ENV') ? getenv ('ELEFANT_ENV') : 'config');
 		require ('conf/version.php');
 		require ('lib/Autoloader.php');
 		require ('lib/Functions.php');
+		
+		/**
+		 * There are several settings which were moved to the admin app,
+		 * but are replicated into the global config here for backwards
+		 * compatibility with existing templates and apps.
+		 */
+		$site_settings = Appconf::admin ('Site Settings');
+		foreach ($site_settings as $key => $value) {
+			if ($value) {
+				conf ('General', $key, $value);
+			}
+		}
+
+		/**
+		 * Set the default timezone to avoid warnings in date functions,
+		 * and configure session settings.
+		 */
 		date_default_timezone_set(conf ('General', 'timezone'));
 		ini_set ('session.cookie_httponly', 1);
 		ini_set ('session.use_only_cookies', 1);
@@ -164,6 +180,42 @@
 		$GLOBALS['cache'] = $cache;
 
 		/**
+		 * Run any config level route overrides.
+		 */
+		if (file_exists ('conf/routes.php')) {
+			$_routes = parse_ini_file ('conf/routes.php',true);
+			if (isset($_routes['Disable'])){
+			foreach ($_routes['Disable'] as $_route => $_strict) {
+				if (
+					(!$_strict && strpos($_SERVER['REQUEST_URI'],$_route) === 0 && $_SERVER['REQUEST_URI'] !== $_route) //match from left, exclude exact
+					|| 
+					($_strict && $_SERVER['REQUEST_URI'] == $_route) // match exact
+				) {
+					$page->body = $controller->run (conf ('General', 'error_handler'), array (
+						'code' => 404,
+						'title' => 'Page not found.',
+						'message' => ''
+					));
+					echo $page->render ($tpl, $controller); // render 404 page and exit
+					return true;
+				}
+			}}
+			if (isset($_routes['Redirect'])){
+			foreach ($_routes['Redirect'] as $_old => $_new) {
+				if ($_old !== $_new && $_SERVER['REQUEST_URI'] == $_old) $controller->redirect($_new);
+			}}
+			if (isset($_routes['Alias'])){
+			foreach ($_routes['Alias'] as $_old => $_new) {
+				if (strpos($_SERVER['REQUEST_URI'],$_old) === 0) {
+					$controller->alias = $_SERVER['REQUEST_URI'];
+					$_SERVER['REQUEST_URI'] = str_replace($_old,$_new,$_SERVER['REQUEST_URI']);
+					break;
+				}
+			}}
+			unset($_routes);
+		}
+
+		/**
 		 * Route the request to the appropriate handler and get
 		 * the handler's response.
 		 */
diff -urBNs elefant-elefant_1_3_10_beta/lib/Functions.php elefant-elefant_1_3_11_rc/lib/Functions.php
--- elefant-elefant_1_3_10_beta/lib/Functions.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Functions.php	2015-09-05 21:13:59.000000000 -0500
@@ -301,9 +301,64 @@
 		curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
 		curl_setopt ($ch, CURLOPT_FAILONERROR, 0);
 		curl_setopt ($ch, CURLOPT_URL, $url);
+		curl_setproxy ($ch, $url);
 		$res = curl_exec ($ch);
 		curl_close ($ch);
 		return $res;
 	}
 	return file_get_contents ($url);
 }
+
+/**
+ * Sets proxy for a curl call using global settings.
+ * 
+ * @param resource $ch
+ * @param string $url
+ */
+function curl_setproxy ($ch, $url) {
+	
+	$set_proxy = true;
+	if (conf ('Proxy', 'url') && intval (conf ('Proxy', 'port'))) {
+		if (conf ('Proxy', 'skip_urls')) {
+			if (($domain = parse_url ($url, PHP_URL_HOST))) {
+				if (in_array ($domain, explode (',', conf ('Proxy', 'skip_urls')))) {
+					$set_proxy = false;
+				}
+			}
+		}
+		if (conf ('Proxy', 'skip_ips')) {
+			if (($domain = parse_url ($url, PHP_URL_HOST))) {
+				if (($ip = gethostbyname ($domain))) {
+					if (in_array ($ip, explode (',', conf ('Proxy', 'skip_ips')))) {
+						$set_proxy = false;
+					}
+				}
+			}
+		}
+		if ($set_proxy) {
+			curl_setopt ($ch, CURLOPT_PROXY,
+				conf ('Proxy', 'url') . ':' . intval (conf ('Proxy', 'port'))
+			);			
+		}
+	}
+}
+
+/**
+ * Returns URL without protocol and domain, just path, query and fragment:
+ *	https://www.elefantcms.com/docs/2.0?param=value#top => /docs/2.0?param=value#top
+ * 
+ * @param string $url
+ * @return string
+ */
+function url_get_fullpath ($url) {
+	
+	$url = parse_url ($url);
+	$return = $url['path'];
+	if ($url['query']) {
+		$return .= '?' . $url[query];
+	}
+	if ($url['fragment']) {
+		$return .= '#' . $url[fragment];
+	}
+	return $return;
+}
\ No newline at end of file
Files elefant-elefant_1_3_10_beta/lib/I18n.php and elefant-elefant_1_3_11_rc/lib/I18n.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/Ini.php elefant-elefant_1_3_11_rc/lib/Ini.php
--- elefant-elefant_1_3_10_beta/lib/Ini.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Ini.php	2015-09-05 21:13:59.000000000 -0500
@@ -100,6 +100,7 @@
 		}
 	
 		$out .= "\n; */ ?>";
+		$out = preg_replace("/\n/",PHP_EOL,$out);
 		if ($file === false) {
 			return $out;
 		}
Files elefant-elefant_1_3_10_beta/lib/Mailer.php and elefant-elefant_1_3_11_rc/lib/Mailer.php are identical
Files elefant-elefant_1_3_10_beta/lib/MemcacheAPC.php and elefant-elefant_1_3_11_rc/lib/MemcacheAPC.php are identical
Files elefant-elefant_1_3_10_beta/lib/MemcacheExt.php and elefant-elefant_1_3_11_rc/lib/MemcacheExt.php are identical
Files elefant-elefant_1_3_10_beta/lib/MemcacheRedis.php and elefant-elefant_1_3_11_rc/lib/MemcacheRedis.php are identical
Files elefant-elefant_1_3_10_beta/lib/MemcacheXCache.php and elefant-elefant_1_3_11_rc/lib/MemcacheXCache.php are identical
Files elefant-elefant_1_3_10_beta/lib/Model.php and elefant-elefant_1_3_11_rc/lib/Model.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/MongoManager.php elefant-elefant_1_3_11_rc/lib/MongoManager.php
--- elefant-elefant_1_3_10_beta/lib/MongoManager.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/MongoManager.php	2015-09-05 21:13:59.000000000 -0500
@@ -85,13 +85,13 @@
 			if (isset ($conf['user'])) {
 				$connstr = 'mongodb://' . $conf['user'] . ':' . $conf['pass'] . '@' . $conf['host'];
 			} else {
-				$connstr = $conf['host'];
+				$connstr = 'mongodb://' . $conf['host'];
 			}
 			try {
 				if (isset ($conf['set_name'])) {
-					self::$conn = new Mongo ($connstr, array ('replicaSet' => $conf['set_name']));
+					self::$conn = new MongoClient ($connstr, array ('replicaSet' => $conf['set_name']));
 				} else {
-					self::$conn = new Mongo ($connstr);
+					self::$conn = new MongoClient ($connstr);
 				}
 			} catch (Exception $e) {
 				self::$error = $e->getMessage ();
Files elefant-elefant_1_3_10_beta/lib/MongoModel.php and elefant-elefant_1_3_11_rc/lib/MongoModel.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/Page.php elefant-elefant_1_3_11_rc/lib/Page.php
--- elefant-elefant_1_3_10_beta/lib/Page.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Page.php	2015-09-05 21:13:59.000000000 -0500
@@ -98,6 +98,25 @@
 	 * `add_script()`.
 	 */
 	public $scripts = array ();
+	
+	/**
+	 * If set, add the specified value as a `?v=' to the end of scripts and stylesheets
+	 * that use a relative absolute path and end in `.js` or `.css` such as:
+	 *
+	 *     /apps/myapp/js/myscript.js -> /apps/myapp/js/myscript.js?v=123
+	 *     /apps/myapp/css/style.css -> /apps/myapp/css/style.css?v=123
+	 *
+	 * Should not affect scripts or stylesheets of these forms:
+	 *
+	 *     <script>...</script>
+	 *     <link rel="stylesheet" href="..." />
+	 *     https://www.google.com/script.js
+	 *     //www.google.com/script.js?abc=123
+	 *
+	 * This prevents it from altering external links including protocol-relative links,
+	 * and links which are being passed parameters already.
+	 */
+	public static $assets_version = false;
 
 	/**
 	 * This is set to true when the template is currently rendering
@@ -115,6 +134,12 @@
 	 * request.
 	 */
 	public $preview = false;
+	
+	/**
+	 * Set this to true if you wish to globally bypass all templates.
+	 * Primarily used by the async utility.
+	 */
+	public static $bypass_layout = false;
 
 	/**
 	 * Constructor method
@@ -136,7 +161,7 @@
 	 * whether to render as a preview or as a real page.
 	 */
 	public function render ($tpl, $controller) {
-		if ($this->layout === false) {
+		if ($this->layout === false || self::$bypass_layout) {
 			// No layout, return the body as-is
 			return $this->body;
 		}
@@ -187,7 +212,7 @@
 	 * to view templates.
 	 */
 	public function add_script ($script, $add_to = 'head', $type = '') {
-		$script = Page::wrap_script ($script, $type);
+		$script = self::wrap_script ($script, $type);
 
 		if (! in_array ($script, $this->scripts)) {
 			$this->scripts[] = $script;
@@ -252,8 +277,36 @@
 			$type = ' type="' . $type . '"';
 		}
 		if (preg_match ('/\.css$/i', $script)) {
-			return '<link rel="stylesheet"' . $type . ' href="' . $script . "\" />\n";
+			return '<link rel="stylesheet"' . $type . ' href="' . self::assets_version ($script) . "\" />\n";
 		}
-		return '<script' . $type . ' src="' . $script . "\"></script>\n";
+		return '<script' . $type . ' src="' . self::assets_version ($script) . "\"></script>\n";
+	}
+
+	/**
+	 * Returns a script with `'?v='.Page::$assets_version` appended if
+	 * `Page::$assets_version` is set and the script is a relative
+	 * absolute path ending in `.js` or `.css`, otherwise it returns the script
+	 * unchanged. If the script is empty, it will return 
+	 */	
+	public static function assets_version ($script = '') {
+		if (! self::$assets_version) {
+			return $script;
+		}
+
+		if ($script !== '') {
+			if (! preg_match ('/\.(js|css)$/i', $script)) {
+				return $script; // make sure script ends in .js or .css
+			}
+
+			if (strpos ($script, '/') !== 0) {
+				return $script; // make sure script begins with /
+			}
+		
+			if (preg_match ('/^\/\//', $script)) {
+				return $script; // ignore protocol-relative URLs beginning with //
+			}
+		}
+
+		return $script . '?v=' . self::$assets_version;
 	}
 }
Files elefant-elefant_1_3_10_beta/lib/Product.php and elefant-elefant_1_3_11_rc/lib/Product.php are identical
Files elefant-elefant_1_3_10_beta/lib/Restful.php and elefant-elefant_1_3_11_rc/lib/Restful.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/lib/Template.php elefant-elefant_1_3_11_rc/lib/Template.php
--- elefant-elefant_1_3_10_beta/lib/Template.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Template.php	2015-09-05 21:13:59.000000000 -0500
@@ -255,6 +255,7 @@
 			$data = (object) $data;
 		}
 		$data->is_being_rendered = true;
+		$data->template_id = str_replace ('/', '-', $template);
 
 		// Resolve the template to a file name, in one of:
 		// `apps/appname/views/filename.html`
@@ -431,6 +432,12 @@
 			} elseif (trim ($filter) === 'quotes') {
 				$out .= 'Template::quotes (';
 				$end = ')' . $end;
+			} elseif (trim ($filter) === 'sanitize') {
+				$out .= 'Template::sanitize (';
+				$end = ', \'' . $this->charset . '\')' . $end;
+			} elseif (trim ($filter) === 'autolink') {
+				$out .= 'Template::autolink (';
+				$end = ')' . $end;
 			} else {
 				$out .= $filter . ' (';
 				$end = ')' . $end;
@@ -463,8 +470,8 @@
 			if (is_array ($v)) {
 				$arr .= sprintf ('%s\'%s\' => array (', $sep, $k);
 				$sep2 = '';
-				foreach ($v as $a) {
-					$arr .= sprintf ('%s\'%s\'', $sep2, $a);
+				foreach ($v as $x => $a) {
+					$arr .= sprintf ('%s\'%s\' => \'%s\'', $sep2, $x, $a);
 					$sep2 = ', ';
 				}
 				$arr .= ')';
@@ -524,8 +531,10 @@
 		// remove spaces before ? and & for multiline includes
 		$val = preg_replace ('/\n(\t+| {2,})(\?|\&)/', '\2', trim ($val));
 
-		// normalize <span data-embed> tags to {! tags !}
-		$val = preg_replace ('/<[^>]*?data-embed="([^"]+)".*?>.*?<\/.*?>/', '{! \1 !}', $val);
+		// normalize <span data-embed> tags to {! tags !} embeds.
+		// also remove enclosing <p>, <br> and spacing that may have
+		// been added around it by the wysiwyg editor.
+		$val = preg_replace ('/(<p>\s*?)?<[^>]*?data-embed="([^"]+)".*?>.*?<\/.*?>(\s*?(<br>)?\s*?<\/p>)?/s', '{! \2 !}', $val);
 
 		$parts = preg_split ('/(\{\! ?.*? ?\!\})/', $val, -1, PREG_SPLIT_DELIM_CAPTURE);
 		$out = '';
@@ -600,10 +609,57 @@
 	 * Convert quotes to HTML entities for form input values.
 	 * Note: This should only be done for *trusted* data, as it does
 	 * not prevent XSS attacks.
+	 *
+	 * Usage as a template filter:
+	 *
+	 *     {{ text|quotes }}
 	 */
 	public static function quotes ($val) {
 		return str_replace ('"', '&quot;', $val);
 	}
+	
+	/**
+	 * Replace links in text with html links. For use as a
+	 * template filter via:
+	 *
+	 *     {{ text|autolink }}
+	 *
+	 * Note that you will likely want to sanitize your output too:
+	 *
+	 *     {{ text|sanitize|autolink }}
+	 *
+	 * Or even add line breaks too:
+	 *
+	 *     {{ text|sanitize|autolink|nl2br }}
+	 *
+	 * Based on: http://stackoverflow.com/a/1959073/1092725
+	 */
+	public static function autolink ($text) {
+		$pattern = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
+
+		$callback = function ($matches) {
+			$url = array_shift ($matches);
+			$url_parts = parse_url ($url);
+
+			$text = parse_url ($url, PHP_URL_HOST) . parse_url ($url, PHP_URL_PATH);
+			$text = preg_replace ("/^www\./", "", $text);
+			$text = trim ($text, '/');
+
+			return sprintf ('<a rel="nofollow" href="%s">%s</a>', $url, $text);
+		};
+
+		return preg_replace_callback ($pattern, $callback, $text);
+	}
+
+	/**
+	 * Clones and adds a parent_template_id value to the
+	 * template data.
+	 */
+	private static function add_parent_id ($data) {
+		$data = clone $data;
+		$data->parent_template_id = $data->template_id;
+		return $data;
+	}
 
 	/**
 	 * Replace foreach and if blocks. Handles the following forms:
@@ -658,7 +714,7 @@
 				);
 				$extra = preg_replace ('/\[(.*)\]/', $r, $extra);
 			}
-			return '<?php echo $this->render (\'' . $extra . '\', $data); ?>';
+			return '<?php echo $this->render (\'' . $extra . '\', self::add_parent_id ($data)); ?>';
 		}
 
 		if (($block === 'if' || $block === 'elseif') && strpos (ltrim ($extra), '!') === 0) {
diff -urBNs elefant-elefant_1_3_10_beta/lib/Validator.php elefant-elefant_1_3_11_rc/lib/Validator.php
--- elefant-elefant_1_3_10_beta/lib/Validator.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/lib/Validator.php	2015-09-05 21:13:59.000000000 -0500
@@ -282,11 +282,22 @@
 		}
 		$failed = array ();
 		self::$invalid = array ();
-		foreach ($validations as $name => $validators) {
+		foreach ($validations as $n => $validators) {
+			if (strpos ($n, ':') !== false) {
+				list ($name, $rule) = explode (':', $n);
+			} else {
+				$name = $n;
+				$rule = $n;
+			}
+			
+			if (in_array ($name, $failed)) {
+				continue;
+			}
+
 			foreach ($validators as $type => $validator) {
 				if ($type === 'file') {
 					if (! is_uploaded_file ($_FILES[$name]['tmp_name'])) {
-						$failed[] = $name;
+						$failed[] = $rule;
 						self::$invalid[$name] = array (
 							'field' => $name,
 							'type'  => $type,
@@ -305,7 +316,7 @@
 					}
 					$extension = strtolower (pathinfo ($_FILES[$name]['name'], PATHINFO_EXTENSION));
 					if (! in_array ($extension, $extensions)) {
-						$failed[] = $name;
+						$failed[] = $rule;
 						self::$invalid[$name] = array (
 							'field' => $name,
 							'type'  => $type,
@@ -332,8 +343,11 @@
 						continue;
 					}
 				}
+				if ($type === 'validate_on_change') {
+					continue;
+				}
 				if (! isset ($values[$name]) || ! Validator::validate ($values[$name], $type, $validator)) {
-					$failed[] = $name;
+					$failed[] = $rule;
 					self::$invalid[$name] = array (
 						'field' => $name,
 						'type'  => $type,
Files elefant-elefant_1_3_10_beta/lib/View.php and elefant-elefant_1_3_11_rc/lib/View.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/.htaccess and elefant-elefant_1_3_11_rc/lib/vendor/.htaccess are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/ActiveResource/ActiveResource.php and elefant-elefant_1_3_11_rc/lib/vendor/ActiveResource/ActiveResource.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/ActiveResource.php and elefant-elefant_1_3_11_rc/lib/vendor/ActiveResource.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Analog.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Analog.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Amon.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Amon.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Buffer/Destructor.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Buffer/Destructor.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Buffer.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Buffer.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/ChromeLogger.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/ChromeLogger.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/File.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/File.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/FirePHP.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/FirePHP.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/GELF.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/GELF.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/LevelBuffer.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/LevelBuffer.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Mail.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Mail.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Mongo.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Mongo.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Multi.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Multi.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Null.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Null.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Post.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Post.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Stderr.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Stderr.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Syslog.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Syslog.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Threshold.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Threshold.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Handler/Variable.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Handler/Variable.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog/Logger.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog/Logger.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Analog.php and elefant-elefant_1_3_11_rc/lib/vendor/Analog.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Bench.php and elefant-elefant_1_3_11_rc/lib/vendor/Bench.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/ChromePhp.php and elefant-elefant_1_3_11_rc/lib/vendor/ChromePhp.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Pimple.php and elefant-elefant_1_3_11_rc/lib/vendor/Pimple.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/SessionHandlerCookie.php and elefant-elefant_1_3_11_rc/lib/vendor/SessionHandlerCookie.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/URLify.php and elefant-elefant_1_3_11_rc/lib/vendor/URLify.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Loader.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Loader.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Message/File.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Message/File.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Message/Interface.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Message/Interface.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Message.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Message.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Part/File.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Part/File.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Part/Interface.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Part/Interface.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Part.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Part.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Abstract.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Abstract.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Imap.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Imap.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Pop3.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Pop3.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Crammd5.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Crammd5.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Login.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Login.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Plain.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Smtp/Auth/Plain.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Protocol/Smtp.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Protocol/Smtp.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Abstract.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Abstract.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Folder/Interface.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Folder/Interface.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Folder/Maildir.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Folder/Maildir.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Folder/Mbox.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Folder/Mbox.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Folder.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Folder.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Imap.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Imap.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Maildir.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Maildir.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Mbox.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Mbox.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Pop3.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Pop3.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Writable/Interface.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Writable/Interface.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage/Writable/Maildir.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage/Writable/Maildir.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Storage.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Storage.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Transport/Abstract.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Transport/Abstract.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Transport/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Transport/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Transport/File.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Transport/File.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Transport/Sendmail.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Transport/Sendmail.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail/Transport/Smtp.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail/Transport/Smtp.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mail.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mail.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mime/Decode.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mime/Decode.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mime/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mime/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mime/Message.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mime/Message.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mime/Part.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mime/Part.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Mime.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Mime.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Registry.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Registry.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Abstract.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Abstract.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Alnum.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Alnum.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Alpha.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Alpha.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/AdapterAbstract.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/AdapterAbstract.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/AdapterInterface.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/AdapterInterface.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Code25.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Code25.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Code25interleaved.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Code25interleaved.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Code39.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Code39.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Code39ext.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Code39ext.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Code93.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Code93.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Code93ext.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Code93ext.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean12.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean12.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean13.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean13.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean14.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean14.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean18.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean18.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean2.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean2.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean5.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean5.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Ean8.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Ean8.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Gtin12.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Gtin12.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Gtin13.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Gtin13.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Gtin14.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Gtin14.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Identcode.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Identcode.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Intelligentmail.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Intelligentmail.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Issn.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Issn.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Itf14.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Itf14.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Leitcode.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Leitcode.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Planet.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Planet.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Postnet.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Postnet.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Royalmail.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Royalmail.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Sscc.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Sscc.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Upca.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Upca.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode/Upce.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode/Upce.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Barcode.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Barcode.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Between.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Between.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Callback.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Callback.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Ccnum.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Ccnum.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/CreditCard.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/CreditCard.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Date.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Date.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Db/Abstract.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Db/Abstract.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Db/NoRecordExists.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Db/NoRecordExists.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Db/RecordExists.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Db/RecordExists.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Digits.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Digits.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/EmailAddress.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/EmailAddress.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Exception.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Exception.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Count.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Count.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Crc32.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Crc32.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/ExcludeExtension.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/ExcludeExtension.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/ExcludeMimeType.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/ExcludeMimeType.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Exists.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Exists.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Extension.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Extension.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/FilesSize.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/FilesSize.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Hash.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Hash.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/ImageSize.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/ImageSize.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/IsCompressed.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/IsCompressed.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/IsImage.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/IsImage.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Md5.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Md5.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/MimeType.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/MimeType.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/NotExists.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/NotExists.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Sha1.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Sha1.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Size.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Size.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/Upload.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/Upload.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/File/WordCount.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/File/WordCount.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Float.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Float.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/GreaterThan.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/GreaterThan.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Hex.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Hex.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Hostname/Biz.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Hostname/Biz.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Hostname/Cn.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Hostname/Cn.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Hostname/Com.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Hostname/Com.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Hostname/Jp.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Hostname/Jp.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Hostname.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Hostname.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Iban.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Iban.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Identical.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Identical.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/InArray.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/InArray.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Int.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Int.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Interface.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Interface.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Ip.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Ip.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Isbn.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Isbn.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/LessThan.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/LessThan.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/NotEmpty.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/NotEmpty.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/PostCode.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/PostCode.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Regex.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Regex.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Sitemap/Changefreq.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Sitemap/Changefreq.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Sitemap/Lastmod.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Sitemap/Lastmod.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Sitemap/Loc.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Sitemap/Loc.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/Sitemap/Priority.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/Sitemap/Priority.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate/StringLength.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate/StringLength.php are identical
Files elefant-elefant_1_3_10_beta/lib/vendor/Zend/Validate.php and elefant-elefant_1_3_11_rc/lib/vendor/Zend/Validate.php are identical
Files elefant-elefant_1_3_10_beta/nginx.conf and elefant-elefant_1_3_11_rc/nginx.conf are identical
Files elefant-elefant_1_3_10_beta/phpunit.xml.dist and elefant-elefant_1_3_11_rc/phpunit.xml.dist are identical
diff -urBNs elefant-elefant_1_3_10_beta/robots.txt elefant-elefant_1_3_11_rc/robots.txt
--- elefant-elefant_1_3_10_beta/robots.txt	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/robots.txt	2015-09-05 21:13:59.000000000 -0500
@@ -31,3 +31,6 @@
 # Apps Paths
 Disallow: /admin/
 Disallow: /user/
+# Allow Twitterbot for card images
+User-agent: Twitterbot
+Allow: /files/
Files elefant-elefant_1_3_10_beta/tests/.htaccess and elefant-elefant_1_3_11_rc/tests/.htaccess are identical
Files elefant-elefant_1_3_10_beta/tests/AclTest.php and elefant-elefant_1_3_11_rc/tests/AclTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/ActiveResourceTest.php and elefant-elefant_1_3_11_rc/tests/ActiveResourceTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/AdminAppTest.php and elefant-elefant_1_3_11_rc/tests/AdminAppTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/AdminFunctionsTest.php and elefant-elefant_1_3_11_rc/tests/AdminFunctionsTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/AnalogTest.php and elefant-elefant_1_3_11_rc/tests/AnalogTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/tests/AppconfTest.php elefant-elefant_1_3_11_rc/tests/AppconfTest.php
--- elefant-elefant_1_3_10_beta/tests/AppconfTest.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/tests/AppconfTest.php	2015-09-05 21:13:59.000000000 -0500
@@ -54,4 +54,25 @@
 		$conf = Appconf::admin ('Admin', 'handler');
 		$this->assertEquals ('admin/versions', $conf);
 	}
+	
+	function test_options () {
+		$payments = Appconf::options ('payments');
+		$this->assertEquals (true, is_array ($payments));
+		
+		$acl = Appconf::options ('acl');
+		$this->assertEquals (true, in_array ('filemanager', array_keys ($acl)));
+		$this->assertEquals ('Upload and manage files', $acl['filemanager']);
+		$this->assertEquals (true, in_array ('user/roles', array_keys ($acl)));
+		
+		$commands = Appconf::options ('cli', 'commands');
+		$expected_commands = array (
+			'api/create-token' => 'Generate or reset an API token and secret key for a user.',
+			'api/get-token' => 'Fetch or generate an API token and secret key for a user.',
+			'blog/publish-queue' => 'Publish scheduled blog posts.'
+		);
+		foreach ($expected_commands as $command => $name) {
+			$this->assertEquals (true, in_array ($command, array_keys ($commands)));
+			$this->assertEquals ($name, $commands[$command]);
+		}
+	}
 }
Files elefant-elefant_1_3_10_beta/tests/BlogAppTest.php and elefant-elefant_1_3_11_rc/tests/BlogAppTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/CacheTest.php and elefant-elefant_1_3_11_rc/tests/CacheTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/ControllerTest.php and elefant-elefant_1_3_11_rc/tests/ControllerTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/CsvParserTest.php and elefant-elefant_1_3_11_rc/tests/CsvParserTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/DBTest.php and elefant-elefant_1_3_11_rc/tests/DBTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/DiffTest.php and elefant-elefant_1_3_11_rc/tests/DiffTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/tests/ExtendedModelTest.php elefant-elefant_1_3_11_rc/tests/ExtendedModelTest.php
--- elefant-elefant_1_3_10_beta/tests/ExtendedModelTest.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/tests/ExtendedModelTest.php	2015-09-05 21:13:59.000000000 -0500
@@ -13,12 +13,27 @@
 	);
 }
 
+class MyModelWithDefault extends ExtendedModel {
+	public $_extended_field = 'extra';
+	public $verify = array (
+		'name' => array (
+			'not empty' => 1
+		),
+		'foo' => array (
+			'not empty' => 1,
+			'extended' => 1,
+			'default' => 'default value'
+		)
+	);
+}
+
 class ExtendedModelTest extends PHPUnit_Framework_TestCase {
 	protected static $o;
 
 	static function setUpBeforeClass () {
 		DB::open (array ('master' => true, 'driver' => 'sqlite', 'file' => ':memory:'));
 		DB::execute ('create table mymodel ( id integer primary key, name char(32), extra text )');
+		DB::execute ('create table mymodelwithdefault ( id integer primary key, name char(32), extra text )');
 	}
 
 	function test_create () {
@@ -35,6 +50,11 @@
 		self::$o->foo = 'foo';
 		$this->assertTrue (self::$o->put ());
 		$this->assertEquals (1, self::$o->id);
+		
+		// Test model with default foo value
+		$o2 = new MyModelWithDefault (array ('name' => 'Test'));
+		$this->assertEquals ('default value', $o2->ext ('foo'));
+		$this->assertTrue ($o2->put ());
 	}
 
 	/**
Files elefant-elefant_1_3_10_beta/tests/FileManagerTest.php and elefant-elefant_1_3_11_rc/tests/FileManagerTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/tests/FormTest.php elefant-elefant_1_3_11_rc/tests/FormTest.php
--- elefant-elefant_1_3_10_beta/tests/FormTest.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/tests/FormTest.php	2015-09-05 21:13:59.000000000 -0500
@@ -48,14 +48,10 @@
 		$form = new Form ();
 		$form->initialize_csrf ();
 		$this->assertRegExp ('/^[a-zA-Z0-9]+$/', $form->csrf_token);
-		$this->assertEquals ($_SESSION['csrf_token'], $form->csrf_token);
-		$this->assertGreaterThan (time (), $_SESSION['csrf_expires']);
 
 		$token = $form->csrf_token;
 		$form->initialize_csrf ();
 		$this->assertEquals ($token, $form->csrf_token);
-		$this->assertEquals ($_SESSION['csrf_token'], $form->csrf_token);
-		$this->assertGreaterThan (time (), $_SESSION['csrf_expires']);
 	}
 
 	function test_generate_csrf_script () {
@@ -66,7 +62,7 @@
 
 		$res = $form->generate_csrf_script ();
 		$this->assertEquals (
-			'<script>$(function(){$("form").append("<input type=\'hidden\' name=\'TOKEN\' value=\'' . $token . '\'/>");});</script>',
+			'<script>$(function(){$("form[method=\'post\']").append("<input type=\'hidden\' name=\'TOKEN\' value=\'' . $token . '\'/>");});</script>',
 			$res
 		);
 	}
@@ -80,7 +76,7 @@
 		$_POST['_token_'] = $form->csrf_token;
 		$this->assertTrue ($form->verify_csrf ());
 
-		$_SESSION['csrf_expires'] = time () - 10;
+		$_POST['_token_'] = '...';
 		$this->assertFalse ($form->verify_csrf ());
 	}
 }
diff -urBNs elefant-elefant_1_3_10_beta/tests/FunctionsTest.php elefant-elefant_1_3_11_rc/tests/FunctionsTest.php
--- elefant-elefant_1_3_10_beta/tests/FunctionsTest.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/tests/FunctionsTest.php	2015-09-05 21:13:59.000000000 -0500
@@ -6,7 +6,7 @@
 		$this->assertEquals ('Site Name', conf ('General', 'site_name', 'Site Name'));
 		$this->assertEquals ('Site Name', conf ('General', 'site_name'));
 		$this->assertEquals ('Your Site Name', conf ('General', 'site_name', 'Your Site Name'));
-		$this->assertEquals (array (), conf ('Cache'));
+		$this->assertEquals (array ('control' => '', 'expires' => '86400'), conf ('Cache'));
 	}
 
 	function test_simple_auth () {
Files elefant-elefant_1_3_10_beta/tests/I18nTest.php and elefant-elefant_1_3_11_rc/tests/I18nTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/IniTest.php and elefant-elefant_1_3_11_rc/tests/IniTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/LinkTest.php and elefant-elefant_1_3_11_rc/tests/LinkTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/LockTest.php and elefant-elefant_1_3_11_rc/tests/LockTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/ModelTest.php and elefant-elefant_1_3_11_rc/tests/ModelTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/MongoModelTest.php and elefant-elefant_1_3_11_rc/tests/MongoModelTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/NavigationAppTest.php and elefant-elefant_1_3_11_rc/tests/NavigationAppTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/NavigationTest.php and elefant-elefant_1_3_11_rc/tests/NavigationTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/tests/PageTest.php elefant-elefant_1_3_11_rc/tests/PageTest.php
--- elefant-elefant_1_3_10_beta/tests/PageTest.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/tests/PageTest.php	2015-09-05 21:13:59.000000000 -0500
@@ -46,4 +46,23 @@
 		$expected_head .= "<meta charset=\"utf-8\" />\n";
 		$this->assertEquals ($expected_head, $p->head);
 	}
+	
+	function test_assets_version () {
+		// should always return original value if unset
+		$this->assertEquals ('', Page::assets_version ());
+		$this->assertEquals ('...', Page::assets_version ('...'));
+		$this->assertEquals ('http://www.google.com/', Page::assets_version ('http://www.google.com/'));
+
+		// should add ?v=123 to these
+		Page::$assets_version = '123';
+		$this->assertEquals ('?v=123', Page::assets_version ());
+		$this->assertEquals ('/js/urlify.js?v=123', Page::assets_version ('/js/urlify.js'));
+		$this->assertEquals ('/css/style.css?v=123', Page::assets_version ('/css/style.css'));
+
+		// should not add ?v=123 to these
+		$this->assertEquals ('<script src="/js/urlify.js"></script>', Page::assets_version ('<script src="/js/urlify.js"></script>'));
+		$this->assertEquals ('<link rel="stylesheet" href="style.css" />', Page::assets_version ('<link rel="stylesheet" href="style.css" />'));
+		$this->assertEquals ('http://www.google.com/script.js', Page::assets_version ('http://www.google.com/script.js'));
+		$this->assertEquals ('//www.google.com/script.js', Page::assets_version ('//www.google.com/script.js'));
+	}
 }
Files elefant-elefant_1_3_10_beta/tests/RestfulTest.php and elefant-elefant_1_3_11_rc/tests/RestfulTest.php are identical
diff -urBNs elefant-elefant_1_3_10_beta/tests/TemplateTest.php elefant-elefant_1_3_11_rc/tests/TemplateTest.php
--- elefant-elefant_1_3_10_beta/tests/TemplateTest.php	2014-12-03 23:59:25.000000000 -0600
+++ elefant-elefant_1_3_11_rc/tests/TemplateTest.php	2015-09-05 21:13:59.000000000 -0500
@@ -77,14 +77,113 @@
 	}
 
 	function test_sanitize () {
-		$t = new Template ('UTF-8');
-
 		$this->assertEquals (
-			$t->sanitize ('<script type="text/javascript">eval ("alert (typeof window)")</script>'),
+			Template::sanitize ('<script type="text/javascript">eval ("alert (typeof window)")</script>'),
 			'&lt;script type=&quot;text/javascript&quot;&gt;eval (&quot;alert (typeof window)&quot;)&lt;/script&gt;'
 		);
 	}
 
+	function test_quotes () {
+		$this->assertEquals (
+			Template::quotes ('Escape "double" quotes'),
+			'Escape &quot;double&quot; quotes'
+		);
+	}
+
+	function test_autolink () {
+		$this->assertEquals (
+			Template::autolink ('http://www.example.com/'),
+			'<a rel="nofollow" href="http://www.example.com/">example.com</a>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('http://www.example.com/'),
+			'<a rel="nofollow" href="http://www.example.com/">example.com</a>'
+		);
+
+$this->assertEquals (
+			Template::autolink ('http://foo.com/blah_blah'),
+			'<a rel="nofollow" href="http://foo.com/blah_blah">foo.com/blah_blah</a>'
+		);
+
+$this->assertEquals (
+			Template::autolink ('http://foo.com/blah_blah/'),
+			'<a rel="nofollow" href="http://foo.com/blah_blah/">foo.com/blah_blah</a>'
+		);
+
+$this->assertEquals (
+			Template::autolink ('(Something like http://foo.com/blah_blah)'),
+			'(Something like <a rel="nofollow" href="http://foo.com/blah_blah">foo.com/blah_blah</a>)'
+		);
+
+$this->assertEquals (
+			Template::autolink ('http://foo.com/blah_blah_(wikipedia)'),
+			'<a rel="nofollow" href="http://foo.com/blah_blah_(wikipedia)">foo.com/blah_blah_(wikipedia)</a>'
+		);
+
+$this->assertEquals (
+			Template::autolink ('(Something like http://foo.com/blah_blah_(wikipedia))'),
+			'(Something like <a rel="nofollow" href="http://foo.com/blah_blah_(wikipedia)">foo.com/blah_blah_(wikipedia)</a>)'
+		);
+
+$this->assertEquals (
+			Template::autolink ('http://foo.com/blah_blah.'),
+			'<a rel="nofollow" href="http://foo.com/blah_blah">foo.com/blah_blah</a>.'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('http://foo.com/blah_blah/.'),
+			'<a rel="nofollow" href="http://foo.com/blah_blah/">foo.com/blah_blah</a>.'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('<http://foo.com/blah_blah>'),
+			'<<a rel="nofollow" href="http://foo.com/blah_blah">foo.com/blah_blah</a>>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('<http://foo.com/blah_blah/>'),
+			'<<a rel="nofollow" href="http://foo.com/blah_blah/">foo.com/blah_blah</a>>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('http://foo.com/blah_blah,'),
+			'<a rel="nofollow" href="http://foo.com/blah_blah">foo.com/blah_blah</a>,'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('http://www.example.com/wpstyle/?p=364.'),
+			'<a rel="nofollow" href="http://www.example.com/wpstyle/?p=364">example.com/wpstyle</a>.'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('rdar://1234'),
+			'<a rel="nofollow" href="rdar://1234">1234</a>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('http://userid:password@example.com:8080'),
+			'<a rel="nofollow" href="http://userid:password@example.com:8080">example.com</a>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('http://example.com:8080 x-yojimbo-item://6303E4C1-xxxx-45A6-AB9D-3A908F59AE0E'),
+			'<a rel="nofollow" href="http://example.com:8080">example.com</a> <a rel="nofollow" href="x-yojimbo-item://6303E4C1-xxxx-45A6-AB9D-3A908F59AE0E">6303E4C1-xxxx-45A6-AB9D-3A908F59AE0E</a>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('message://%3c330e7f8409726r6a4ba78dkf1fd71420c1bf6ff@mail.gmail.com%3e'),
+			'<a rel="nofollow" href="message://%3c330e7f8409726r6a4ba78dkf1fd71420c1bf6ff@mail.gmail.com%3e">mail.gmail.com%3e</a>'
+		);
+
+		$this->assertEquals (
+			Template::autolink ('<tag>http://example.com</tag>'),
+			'<tag><a rel="nofollow" href="http://example.com">example.com</a></tag>'
+		);
+
+
+	}
+
 	function test_escape () {
 		$t = new Template ('UTF-8');
 
Files elefant-elefant_1_3_10_beta/tests/TreeTest.php and elefant-elefant_1_3_11_rc/tests/TreeTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/URLifyTest.php and elefant-elefant_1_3_11_rc/tests/URLifyTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/UserTest.php and elefant-elefant_1_3_11_rc/tests/UserTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/ValidatorTest.php and elefant-elefant_1_3_11_rc/tests/ValidatorTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/VersionsTest.php and elefant-elefant_1_3_11_rc/tests/VersionsTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/ViewTest.php and elefant-elefant_1_3_11_rc/tests/ViewTest.php are identical
Files elefant-elefant_1_3_10_beta/tests/bootstrap.php and elefant-elefant_1_3_11_rc/tests/bootstrap.php are identical
Files elefant-elefant_1_3_10_beta/tests/travis_conf.ini and elefant-elefant_1_3_11_rc/tests/travis_conf.ini are identical
Files elefant-elefant_1_3_10_beta/tests/zombie/admin-login-failure.coffee and elefant-elefant_1_3_11_rc/tests/zombie/admin-login-failure.coffee are identical
Files elefant-elefant_1_3_10_beta/tests/zombie/admin-login-failure.js and elefant-elefant_1_3_11_rc/tests/zombie/admin-login-failure.js are identical
Files elefant-elefant_1_3_10_beta/tests/zombie/admin-login-success.coffee and elefant-elefant_1_3_11_rc/tests/zombie/admin-login-success.coffee are identical
Files elefant-elefant_1_3_10_beta/tests/zombie/admin-login-success.js and elefant-elefant_1_3_11_rc/tests/zombie/admin-login-success.js are identical
Files elefant-elefant_1_3_10_beta/tests/zombie/homepage.coffee and elefant-elefant_1_3_11_rc/tests/zombie/homepage.coffee are identical
Files elefant-elefant_1_3_10_beta/tests/zombie/homepage.js and elefant-elefant_1_3_11_rc/tests/zombie/homepage.js are identical
